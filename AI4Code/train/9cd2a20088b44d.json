{"cell_type":{"c4de6b91":"code","be39132d":"code","cf42ad10":"code","e00da401":"code","67c98350":"code","a6d0dfc4":"code","e209673d":"code","b71f947a":"code","ee1b979e":"code","888622e9":"code","7553b14b":"code","2f0cc553":"code","157bbfbd":"code","1c5ad76c":"code","af12b898":"code","7012bc8c":"code","6276f1ef":"code","2a91d369":"code","b15cf0be":"code","6dea7579":"code","a02d9a9a":"code","df6036a7":"code","4cd06062":"code","eb36c6a6":"code","06705b74":"code","c0dbc215":"code","3b2336c8":"code","5146db9f":"code","25878e39":"code","8b837146":"code","4e8e7306":"code","bf243c89":"code","c9666af0":"code","ca7b82ea":"code","7d507408":"code","ab373aed":"code","9295f067":"code","86862eb2":"code","fc59de2b":"code","ae4d5aa0":"code","9203f77e":"code","f37f07fd":"code","576852c1":"code","5fedfdba":"code","c58121d3":"code","508e6e33":"code","0384cae4":"code","23732cd6":"code","ea0b4ceb":"code","1f9ef2cb":"code","9dcbb9ea":"code","819f2409":"code","6d3061d7":"code","7a8a9bfb":"code","a8a4952e":"code","fe546ce0":"code","124e8407":"code","3887a468":"code","120110d5":"code","c7d2e628":"code","083d282e":"code","97a2ecbe":"code","20a53335":"code","c24333dd":"code","e21a7ea9":"code","b6d61fb1":"code","a60c4c43":"code","e50526a5":"code","646c8bea":"code","1e9b7e97":"code","97a1c39a":"code","948fbffc":"code","99a94fcf":"code","7d34c607":"code","45707eb7":"code","45b6f455":"code","386d5250":"code","249c734f":"code","292c93d9":"code","7e6c3294":"code","6efd7679":"code","f1816c87":"code","ba360515":"code","fe171304":"code","a99aee69":"code","3c588de2":"code","44ecf06f":"code","24f4f9fe":"code","257d1294":"code","8fcb7907":"code","9296e201":"code","89eadd98":"code","524ca804":"code","add9d51c":"code","82712df6":"code","d8b62750":"code","c6bc7dbe":"code","ef129fdd":"code","51391d51":"code","4b8ac28a":"code","b933e107":"code","c6d1c4eb":"code","dfa96433":"code","1c1575ce":"code","c94a2069":"code","d648eea1":"code","f0fa9440":"code","5bd4b96e":"code","7e1bded6":"code","68ebc6ce":"code","13eca5b7":"code","27e92bd7":"code","6af7429d":"code","00959021":"code","3c8954b6":"code","238047c1":"code","644cc22e":"code","084631f7":"code","3a6d2b74":"code","78428bdd":"code","67ef54fc":"code","2e29c4f7":"markdown","c88ea896":"markdown","29cf3a6c":"markdown","51385f7a":"markdown","b6dbb36b":"markdown","460b29b5":"markdown","a3096c40":"markdown","70708cbd":"markdown","c85dc610":"markdown","c62d4f49":"markdown","33f37e47":"markdown","964eb46b":"markdown","ab1abfba":"markdown","d93ea117":"markdown","3871558a":"markdown","c81af7ae":"markdown","33c436e7":"markdown","babf2bbe":"markdown","e342f5cf":"markdown","388633dd":"markdown","df64c1c3":"markdown","d95b29ec":"markdown","407860d5":"markdown","75d78a46":"markdown","ff56296b":"markdown","6f0489dc":"markdown","e2c8ccca":"markdown","4fa0f8f2":"markdown","3a7d4113":"markdown","d456ba60":"markdown","963ca931":"markdown","16ddfaf2":"markdown","151e1b5b":"markdown","363db4f3":"markdown","8a56a62b":"markdown","77bf077a":"markdown","c3b550d0":"markdown","bd99bbad":"markdown","352a3814":"markdown","9bc37f68":"markdown","9929124d":"markdown","a98d9921":"markdown","f994ab89":"markdown","1d4bf2aa":"markdown","d112d70f":"markdown","58f75b6b":"markdown","011ef2e4":"markdown","ab158543":"markdown","f82ace25":"markdown","cfc11ef2":"markdown","821e57ac":"markdown","3e47ab22":"markdown","2d8b670d":"markdown","535702e6":"markdown","819e6297":"markdown","4c8dad16":"markdown","f92107f1":"markdown","a272a750":"markdown","e790b5e0":"markdown","2f29797e":"markdown","42fdf78c":"markdown","e2a49c39":"markdown","81677805":"markdown","aa25ecb7":"markdown","9ca80095":"markdown"},"source":{"c4de6b91":"import os\nimport pandas as pd\nimport numpy as np\nimport math\nimport glob\nimport plotly.express as px\nimport matplotlib.pyplot as plt\n%matplotlib inline\nimport seaborn as sns\npal = sns.color_palette()\nimport missingno as msno\n","be39132d":"# Load engagement data:\npath = '..\/input\/learnplatform-covid19-impact-on-digital-learning\/engagement_data'\nall_files = glob.glob(path + \"\/*.csv\")\n\ndata = [] # pd.concat takes a list of dataframes as an argument\nfor csv in all_files:\n  frame = pd.read_csv(csv)\n  frame['filename'] = os.path.basename(csv)\n  data.append(frame)\n\nengagement_df = pd.concat(data)\nengagement_df","cf42ad10":"# Convert filename column as string:\nengagement_df.filename = engagement_df.filename.astype(\"string\")\nengagement_df.info()\n\n# Strip away '.csv' from filename column:\nengagement_df['filename'] = engagement_df['filename'].map(lambda x: x.rstrip('.csv'))  \n\n# Rename the column to 'district_id':\nengagement_df.rename(columns={'filename': 'district_id'}, inplace=True)","e00da401":"engagement_df","67c98350":"msno.bar(engagement_df, sort='ascending', figsize=(10, 5), fontsize=12)\nplt.show()","a6d0dfc4":"engagement_df.isnull().sum()","e209673d":"engagement_df[engagement_df.lp_id.isnull()]","b71f947a":"engagement_df[engagement_df.lp_id == 0]","ee1b979e":"engagement_df = engagement_df.fillna(0)","888622e9":"# Numeric value format:\npd.options.display.float_format = '{:,.2f}'.format\n\nengagement_df.describe()","7553b14b":"plt.figure(figsize=(12, 6))\nplt.title('Pct_access Distribution', size=20)\nplt.xlabel('pct_access')\nplt.ylabel('No. of rows')\n\nplt.hist(engagement_df.pct_access, bins=np.arange(0,100,1), color='purple');","2f0cc553":"plt.figure(figsize=(12, 6))\nplt.title('Engagement_index Distribution', size=20)\nplt.xlabel('engagement_index')\nplt.ylabel('No. of rows')\n\nplt.hist(engagement_df.engagement_index, bins=np.arange(0, 100,1), color='purple');","157bbfbd":"def split_date(df):\n  df['time'] = pd.to_datetime(df['time'])\n  df['Month'] = df.time.dt.month\n  df['Day'] = df.time.dt.day\n  df['DayOfWeek'] = df.time.dt.dayofweek\n  df['WeekOfYear'] = df.time.dt.week\n  df['DayOfYear'] = df.time.dt.dayofyear","1c5ad76c":"split_date(engagement_df)","af12b898":"districts_df = pd.read_csv('..\/input\/learnplatform-covid19-impact-on-digital-learning\/districts_info.csv')\ndistricts_df ","7012bc8c":"districts_df.info()","6276f1ef":"plt.figure(figsize=(16,10))\nplt.title('No. of school districts per State', size=20)\nsns.countplot(y='state', data=districts_df, order=districts_df.state.value_counts(ascending=False).index)\nplt.show();","2a91d369":"plt.title('No. of school districts per State', size=20)\ndistricts_df['state'].value_counts().plot(kind='pie', autopct='%1.1f%%', figsize=(16,10), startangle=0).legend(loc='right', bbox_to_anchor=(1.5, 0.5));","b15cf0be":"print(engagement_df.district_id.nunique())\nprint(districts_df.district_id.nunique())","6dea7579":"dlist = districts_df.district_id.unique().tolist()\nedlist = engagement_df.district_id.unique().tolist()\n\nfor x in dlist:\n  if str(x) in edlist:\n    continue\n  else:\n    print(x)","a02d9a9a":"fig, ax = plt.subplots(figsize=(16, 8))\nfig.suptitle('Locale Distribution', size=20)\nexplode = (0.05, 0.05, 0.05, 0.05)\nlabels = list(districts_df.locale.value_counts().index)\nsizes = districts_df.locale.value_counts().values\nax.pie(sizes, explode=explode, startangle=60, labels=labels, autopct='%1.0f%%', pctdistance=0.7)\nax.add_artist(plt.Circle((0,0), 0.4, fc='white'))\nplt.show()\n","df6036a7":"sns.countplot(data=districts_df, x='pct_black\/hispanic')\nplt.show()","4cd06062":"from IPython.display import Image\nImage('..\/input\/covid19impatondigitallearning\/CGE-figure-1.png')","eb36c6a6":"sns.countplot(data=districts_df, x='pct_free\/reduced')\nplt.show()","06705b74":"districts_df.county_connections_ratio.value_counts()","c0dbc215":"custom_sort = np.array(['[4000, 6000[','[6000, 8000[', '[8000, 10000[', '[10000, 12000[' ,'[12000, 14000[', '[14000, 16000[', '[16000, 18000[', '[18000, 20000[', '[20000, 22000[', '[22000, 24000[', '[32000, 34000['])","3b2336c8":"plt.figure(figsize=(12,10))\nsns.countplot(districts_df.pp_total_raw, order=custom_sort)\nplt.xticks(rotation=60);","5146db9f":"products_df = pd.read_csv('..\/input\/learnplatform-covid19-impact-on-digital-learning\/products_info.csv')","25878e39":"products_df","8b837146":"products_df.columns","4e8e7306":"products_df['func_category']= products_df['Primary Essential Function'].str.split(' - ', 1).str[0]\nproducts_df['primary_function']= products_df['Primary Essential Function'].str.split(' - ', 1).str[1]\nproducts_df","bf243c89":"products_df.info()","c9666af0":"print(products_df[\"LP ID\"].nunique())\nprint(engagement_df[\"lp_id\"].nunique())","ca7b82ea":"companies_num_prod = products_df['Provider\/Company Name'].value_counts(ascending=False).head(10)\n\nplt.figure(figsize=(10, 6))\nsns.barplot(x = companies_num_prod.values, y = companies_num_prod.index, alpha=0.8)\nplt.title('Top 10 companies in terms of number of products', size=20)\nplt.ylabel('Companies')\nplt.xlabel('Number of products')\nplt.show();","7d507408":"products_df['Sector(s)'].unique()","ab373aed":"c1=c2=c3=0\nfor s in products_df[\"Sector(s)\"]:\n    if(not pd.isnull(s)):\n        s = s.split(\";\")\n        for i in range(len(s)):\n            sub = s[i].strip()\n            if(sub == 'PreK-12'): c1+=1\n            if(sub == 'Higher Ed'): c2+=1\n            if(sub == 'Corporate'): c3+=1\n\nfig, ax  = plt.subplots(figsize=(16, 8))\nfig.suptitle('Sector Distribution', size = 20)\nexplode = (0.05, 0.05, 0.05)\nlabels = ['PreK-12','Higher Ed','Corporate']\nsizes = [c1,c2, c3]\nax.pie(sizes, explode=explode,startangle=60, labels=labels,autopct='%1.1f%%', pctdistance=0.7, colors=[\"#ff228a\",\"#20b1fd\",\"#ffb703\"])\nax.add_artist(plt.Circle((0,0),0.4,fc='white'))\nplt.show();","9295f067":"products_df['func_category'].value_counts()","86862eb2":"c1=c2=c3=0\n\nfor s in products_df[\"func_category\"]:\n    if(not pd.isnull(s)):\n        c1 += s.count(\"CM\")\n        c2 += s.count(\"LC\")\n        c3 += s.count(\"SDO\")\n\nfig, ax  = plt.subplots(figsize=(16, 8))\nfig.suptitle('Function Categories', size = 20)\nexplode = (0.05, 0.05, 0.05)\nlabels = ['CM','LC','SDO']\nsizes = [c1, c2, c3]\nax.pie(sizes, explode=explode,startangle=60, labels=labels,autopct='%1.1f%%', pctdistance=0.7, colors=[\"#18ff9f\",\"#2cfbff\",\"#ffb703\"])\nax.add_artist(plt.Circle((0,0),0.4,fc='white'))\nplt.show()","fc59de2b":"func_dist = products_df['primary_function'].value_counts(ascending=False)\n\nplt.figure(figsize=(10, 6))\nsns.barplot(x = func_dist.values, y = func_dist.index, alpha=0.8)\nplt.title('Primary Functions Ranking', size=20)\nplt.ylabel('Primary functions')\nplt.xlabel('count')\nplt.show();","ae4d5aa0":"states_df = pd.read_csv('..\/input\/covid19impatondigitallearning\/kids-well-being-by-state.csv')\nstates_df","9203f77e":"engagement_df['district_id'] = engagement_df['district_id'].astype(str).astype(int)\n\nengagement_districts_df = pd.merge(engagement_df, districts_df, left_on='district_id', right_on='district_id')\nengagement_districts_df.head()","f37f07fd":"engagement_districts_df.info()","576852c1":"products_engagement_df = pd.merge(products_df, engagement_df, left_on='LP ID', right_on='lp_id')\nproducts_engagement_df.head()","5fedfdba":"products_engagement_df.info()","c58121d3":" engagement_df","508e6e33":" engagement_df[(engagement_df['district_id']==1000) & (engagement_df['time']=='2020-01-01')].pct_access.max()","0384cae4":"engagement_df.groupby(['district_id', 'time']).pct_access.max().head(10)","23732cd6":"# For each district and each day, we take the maximum pct_access value registered on all available products:\ndist_engage_max_pct_access = engagement_df.groupby(['district_id', 'time']).pct_access.max()\ndist_engage_max_pct_access\n\n# max pct_access for the district no. 1000\n# dist_engage_max_pct_access.loc[1000]\n\n# max pct_access for the district no. 1000, on Jan. 1st\n# dist_engage_max_pct_access.loc[1000, '2020-01-01']\n\n# max pct_access for all the districts on Jan. 1st\n# dist_engage_max_pct_access.loc[:, '2020-01-01']","ea0b4ceb":"# max pct_access for each district during 2020:\n# it's a df\ndist_engage_max_pct_access_df = dist_engage_max_pct_access.unstack()\ndist_engage_max_pct_access_df\n\n# dist_engage_max_pct_access_df.loc[1000]\n# dist_engage_max_pct_access_df.loc[1000, '2020-01-01']\n# dist_engage_max_pct_access_df.loc[:, '2020-01-01']","1f9ef2cb":"# This also works:\nengagement_df.pivot_table(values='pct_access', index='district_id', columns='time', aggfunc='max')","9dcbb9ea":"dist_engagement_index_sum = engagement_df.groupby(['district_id', 'time']).engagement_index.sum()\ndist_engagement_index_sum","819f2409":"dist_pct_access_engagement_df = pd.concat([dist_engage_max_pct_access, dist_engagement_index_sum], axis=1)\ndist_pct_access_engagement_df.columns = ['pct_access_max', 'engagement_index_sum']\ndist_pct_access_engagement_df","6d3061d7":"# .loc[(what rows do I want), (what columns do I want)]\n# dist_pct_access_engagement_df.loc[(1000, '2020-01-01'), :]\ndist_pct_access_engagement_df.loc[(1000, '2020-01-01'), ('pct_access_max')]","7a8a9bfb":"dist_pct_access_engagement_df.loc[([1000, 9927], '2020-01-01'), :]","a8a4952e":"dist_pct_access_engagement_df.loc[(1000, ['2020-01-01', '2020-01-02']), :]","fe546ce0":"dist_pct_access_engagement_df.loc[(slice(None), ['2020-01-01', '2020-01-02']), :]","124e8407":"# All the engagement data for the district no. 1000:\n# Rolling 7 days to smooth out the effect of weekend:\ndist_pct_access_engagement_df.loc[1000]\n\ndist_1000 = dist_pct_access_engagement_df.loc[1000].rolling(7, min_periods=1).mean()\ndist_1000","3887a468":"# Ploting school district no.1000:\nfig, ax = plt.subplots(figsize=(20, 10))\ndist_1000['pct_access_max'].plot(ax=ax)\nplt.title('School district no.1000 daily pct_access maximum values during 2020', size=20)\nplt.show();","120110d5":"fig, ax = plt.subplots(figsize=(20, 10))\ndist_1000['engagement_index_sum'].plot(ax=ax)\nplt.title('School district no.1000 daily total engagement_index during 2020', size=20)\nplt.show();","c7d2e628":"dist_pct_access_engagement_df\n","083d282e":"# First we drop the NaN rows\ndist_pct_access_engagement_df.dropna(inplace=True)","97a2ecbe":"dist_pct_access_engagement_df.isnull().sum()","20a53335":"# There are a number of districts, which have less than 200 days of data\nfor district, sub_df in dist_pct_access_engagement_df.groupby(level=0):\n  if len(dist_pct_access_engagement_df.loc[district]) < 200:\n    print(district)","c24333dd":"# We drop those with less than 200 days of data, the threshold is personal here\nfor district, sub_df in dist_pct_access_engagement_df.groupby(level=0):\n  if len(dist_pct_access_engagement_df.loc[district]) < 200:\n    dist_pct_access_engagement_df = dist_pct_access_engagement_df.drop(district, level='district_id')\n  ","e21a7ea9":"# Create a new DataFrame with index districts of dist_pct_access_engagement_df:\ndf_index = dist_pct_access_engagement_df.index.get_level_values(level=0).drop_duplicates()\ndist_pct_engagement_mean_df = pd.DataFrame(index=df_index)\ndist_pct_engagement_mean_df","b6d61fb1":"# Store all the mean metrics into two lists:\ndist_pct_mean = []\ndist_engagement_index_mean = []\n\nfor district, sub_df in dist_pct_access_engagement_df.groupby(level=0):\n  dist_pct_mean.append(sub_df['pct_access_max'].mean())\n  dist_engagement_index_mean.append(sub_df['engagement_index_sum'].mean())","a60c4c43":"# Append lists to the new df:\ndist_pct_engagement_mean_df['pct_access_mean'] = dist_pct_mean\ndist_pct_engagement_mean_df['engagement_index_mean'] = dist_engagement_index_mean\ndist_pct_engagement_mean_df","e50526a5":"# Top 10 pct_access districts:\ndist_top10_pct_access = dist_pct_engagement_mean_df.pct_access_mean.sort_values(ascending=False).head(10).to_frame()","646c8bea":"dist_top10_pct_access","1e9b7e97":"# dist_pct_access_engagement_df.loc[8884].isnull().sum()\n# dist_top10_pct_access.drop(2285, inplace=True)\n# len(dist_pct_access_engagement_df.loc[5890])","97a1c39a":"dist_5890 = dist_pct_access_engagement_df.loc[5890].rolling(7, min_periods=1).mean()\n\n# Ploting school district no.5890:\nfig, ax = plt.subplots(figsize=(20, 10))\ndist_5890['pct_access_max'].plot(ax=ax)\nplt.title('School district no.5890 daily pct_access maximum values during 2020', size=20)\nplt.show();","948fbffc":"# Top 10 engagement_index districts:\ndist_top10_engagement_index = dist_pct_engagement_mean_df.engagement_index_mean.sort_values(ascending=False).head(10).to_frame()\ndist_top10_engagement_index","99a94fcf":"dist_8815 = dist_pct_access_engagement_df.loc[8815].rolling(7, min_periods=1).mean()\n\n# Ploting school district no.8815:\nfig, ax = plt.subplots(figsize=(20, 10))\ndist_8815['engagement_index_sum'].plot(ax=ax)\nplt.title('School district no.8815 daily engagement_index sum values during 2020', size=20)\nplt.show();","7d34c607":"list1 = dist_top10_pct_access.index.values.tolist()\nlist2 = dist_top10_engagement_index.index.values.tolist()\n\nset1 = set(list1)\nintersection = set1.intersection(list2)\nintersection = list(intersection)\nintersection","45707eb7":"dist_pct_engagement_mean_df.loc[intersection]","45b6f455":"# pd.options.display.float_format = '{:,.2f}'.format\n\ntop10_combined = dist_pct_engagement_mean_df.loc[intersection]\ntop10_combined","386d5250":"top10_df_temp = pd.merge(top10_combined, districts_df, left_index=True, right_on='district_id', how='left').set_index('district_id')\ntop10_df_temp","249c734f":"top10_df = pd.merge(top10_df_temp, states_df, left_on='state', right_on='state', how='left').set_index(top10_df_temp.index)\ntop10_df\n","292c93d9":"dist_bottom10_pct_access = dist_pct_engagement_mean_df.pct_access_mean.sort_values(ascending=True).head(10).to_frame()\ndist_bottom10_pct_access","7e6c3294":"dist_bottom10_engagement_index = dist_pct_engagement_mean_df.engagement_index_mean.sort_values(ascending=True).head(10).to_frame()\ndist_bottom10_engagement_index","6efd7679":"list1 = dist_bottom10_pct_access.index.values.tolist()\nlist2 = dist_bottom10_engagement_index.index.values.tolist()\n\nset1 = set(list1)\nintersection = set1.intersection(list2)\nintersection = list(intersection)\nintersection\n","f1816c87":"bottom10_combined = dist_pct_engagement_mean_df.loc[intersection]\nbottom10_combined","ba360515":"bottom10_df_temp = pd.merge(bottom10_combined, districts_df, left_index=True, right_on='district_id', how='left').set_index('district_id')","fe171304":"bottom10_df = pd.merge(bottom10_df_temp, states_df, left_on='state', right_on='state', how='left').set_index(bottom10_df_temp.index)\nbottom10_df\n","a99aee69":"districts_df.state.value_counts(ascending=False)","3c588de2":"engagement_districts_df[['state', 'pct_access']].groupby('state')['pct_access'].describe().sort_values(by='count', ascending=False)","44ecf06f":"engagement_districts_df[['state', 'engagement_index']].groupby('state')['engagement_index'].describe().sort_values(by='count', ascending=False)","24f4f9fe":"del districts_df,bottom10_df,bottom10_df_temp,top10_df,top10_df_temp,top10_combined,dist_pct_access_engagement_df,engagement_df,frame\nimport gc\ngc.collect()","257d1294":"# engagement_districts_df = engagement_districts_df.drop(engagement_districts_df[engagement_districts_df.state == 'Minnesota'].index)\n# engagement_districts_df.drop(engagement_districts_df[engagement_districts_df.state == 'Arizona'].index, inplace=True)\n# engagement_districts_df.drop(engagement_districts_df[engagement_districts_df.state == 'North Dakota'].index, inplace=True)\n# engagement_districts_df.drop(engagement_districts_df[engagement_districts_df.state == 'New Hampshire'].index, inplace=True)","8fcb7907":"states_pct_access_df = engagement_districts_df.groupby(['state', 'district_id', 'time']).pct_access.max().to_frame()\nstates_pct_access_df = states_pct_access_df.unstack()","9296e201":"states_pct_access_df.head(15)","89eadd98":"states_pct_access_df.loc['California'].mean(axis=0).head(20)","524ca804":"df = pd.DataFrame(states_pct_access_df.loc['California'].mean(axis=0))\ndf.index = df.index.droplevel()\ndf.transpose()","add9d51c":"df.transpose().shape","82712df6":"# Create a new temporary DataFrame with States as index:\nstates_index = states_pct_access_df.index.get_level_values(level=0).drop_duplicates()\nstates_pct_index = pd.DataFrame(index=states_index)\nstates_pct_index","d8b62750":"frames = []\n\nfor state, sub_df in states_pct_access_df.groupby(level=0):\n  new_df = pd.DataFrame(states_pct_access_df.loc[state].mean(axis=0))\n  new_df.index = new_df.index.droplevel()\n  frames.append(new_df.transpose())","c6bc7dbe":"states_pct_temp = pd.concat(frames)\nstates_pct_temp","ef129fdd":"# pct_access for each State:\nstates_pct_mean_df = states_pct_temp.set_index(states_pct_index.index)\nstates_pct_mean_df","51391d51":"# States Ranking for pct_access:\nstates_pa = states_pct_mean_df.mean(axis=1).sort_values(ascending=False).to_frame()\n\nplt.figure(figsize=(20,10))\nsns.barplot(x=states_pa.values.flatten().astype('int'), y=states_pa.index)\nplt.title('States Ranking for pct_access', size=20)\nplt.ylabel('States')\nplt.xlabel('Annual mean pct_access');","4b8ac28a":"pct_access_illinois = states_pct_mean_df[states_pct_mean_df.index =='Illinois'].transpose()\npct_access_illinois = pct_access_illinois.rolling(7, min_periods=1).mean()\npct_access_illinois.index = pd.to_datetime(pct_access_illinois.index)","b933e107":"fig, ax = plt.subplots(figsize=(20, 10))\npct_access_illinois.plot(ax=ax)\nplt.title('State of Illinois pct_access 2020', size=20)\nplt.axvline(pd.to_datetime('2020-03-17'), color='red', linestyle='--', label='The date a state closed K-12 public schools statewide.')\nplt.show();","c6d1c4eb":"pct_access_ny = states_pct_mean_df[states_pct_mean_df.index =='New York'].transpose()\npct_access_ny = pct_access_ny.rolling(7, min_periods=1).mean()\npct_access_ny\npct_access_ny.index = pd.to_datetime(pct_access_ny.index)\n\n\nfig, ax = plt.subplots(figsize=(20, 10))\npct_access_ny.plot(ax=ax)\nplt.title('State of New York pct_access 2020', size=20)\nplt.axvline(pd.to_datetime('2020-03-18'), color='red', linestyle='--', label='The date a state closed K-12 public schools statewide.')\nplt.show();","dfa96433":"def plot_pct(statename, closedate):\n  pct_access_state = states_pct_mean_df[states_pct_mean_df.index == statename].transpose()\n  pct_access_state = pct_access_state.rolling(7, min_periods=1).mean()\n  pct_access_state.index = pd.to_datetime(pct_access_state.index)\n\n  fig, ax = plt.subplots(figsize=(20, 10))\n  pct_access_state.plot(ax=ax)\n  plt.title('State of {} pct_access 2020'.format(statename), size=20)\n  plt.axvline(pd.to_datetime(closedate), color='red', linestyle='--', label='The date a state closed K-12 public schools statewide.')\n  plt.show();","1c1575ce":"plot_pct('Michigan', '2020-03-16')","c94a2069":"plot_pct('North Carolina', '2020-03-16')","d648eea1":"plot_pct('California', '2020-03-23')","f0fa9440":"states_engagement_index_df = engagement_districts_df.groupby(['state', 'district_id', 'time']).engagement_index.sum().to_frame()\nstates_engagement_index_df = states_engagement_index_df.unstack()\nstates_engagement_index_df","5bd4b96e":"# Create a new temporary DataFrame with States as index:\nstates_index = states_engagement_index_df.index.get_level_values(level=0).drop_duplicates()\nstates_engagement_index_index = pd.DataFrame(index=states_index)\nstates_engagement_index_index","7e1bded6":"frames = []\n\nfor state, sub_df in states_engagement_index_df.groupby(level=0):\n  new_df = pd.DataFrame(states_engagement_index_df.loc[state].mean(axis=0))\n  new_df.index = new_df.index.droplevel()\n  frames.append(new_df.transpose())","68ebc6ce":"states_engagement_temp = pd.concat(frames)\n\n# engagement_index for each State:\nstates_engagement_mean_df = states_engagement_temp.set_index(states_engagement_index_index.index)\nstates_engagement_mean_df\n","13eca5b7":"# States Ranking for engagement_index:\nstates_ei = states_engagement_mean_df.mean(axis=1).sort_values(ascending=False).to_frame()\n\n\nplt.figure(figsize=(20,10))\nsns.barplot(x=states_ei.values.flatten().astype('int'), y=states_ei.index)\nplt.title('States Ranking for engagement_index', size=20)\nplt.ylabel('States')\nplt.xlabel('Annual mean engagment_index');","27e92bd7":"def plot_engagement(statename, closedate):\n  engagement_index_state = states_engagement_mean_df[states_engagement_mean_df.index == statename].transpose()\n  engagement_index_state = engagement_index_state.rolling(7, min_periods=1).mean()\n  engagement_index_state.index = pd.to_datetime(engagement_index_state.index)\n\n  fig, ax = plt.subplots(figsize=(20, 10))\n  engagement_index_state.plot(ax=ax)\n  plt.title('State of {} engagement_index 2020'.format(statename), size=20)\n  plt.axvline(pd.to_datetime(closedate), color='red', linestyle='--', label='The date a state closed K-12 public schools statewide.')\n  plt.show();","6af7429d":"plot_engagement('Illinois', '2020-03-17')","00959021":"plot_engagement('Texas', '2020-03-21')","3c8954b6":"plot_engagement('Michigan', '2020-03-16')","238047c1":"plot_engagement('California', '2020-03-23')","644cc22e":"del states_engagement_mean_df,states_engagement_temp\nimport gc\ngc.collect()","084631f7":"path = '..\/input\/learnplatform-covid19-impact-on-digital-learning\/engagement_data' \nall_files = glob.glob(path + \"\/*.csv\")\n\nli = []\n\nfor filename in all_files:\n    df = pd.read_csv(filename, index_col=None, header=0)\n    district_id = filename.split(\"\/\")[3].split(\".\")[0]\n    df[\"district_id\"] = district_id\n    li.append(df)\n    \nengagement_df = pd.concat(li)\nengagement_df = engagement_df.reset_index(drop=True)\nengagement_df.head()\nengagement_df[\"district_id\"]","3a6d2b74":"import folium\nfrom geopy.geocoders import Nominatim\nfrom folium import Choropleth, Circle, Marker\nfrom folium.plugins import HeatMap, MarkerCluster\n\n\n\nprimary_essential_main = []\nprimary_essential_sub = []\nfor s in products_df[\"Primary Essential Function\"]:\n    if(not pd.isnull(s)):\n        s1 = s.split(\"-\",1)[0].strip()\n        primary_essential_main.append(s1)\n    else:\n        primary_essential_main.append(np.nan)\n    \n    if(not pd.isnull(s)):\n        s2 = s.split(\"-\",1)[1].strip()\n        primary_essential_sub.append(s2)\n    else:\n        primary_essential_sub.append(np.nan)\n\nproducts_df[\"primary_essential_main\"] = primary_essential_main\nproducts_df[\"primary_essential_sub\"] = primary_essential_sub\nengagement_df['time'] = pd.to_datetime(engagement_df['time'])\nproducts_engagement_data = pd.merge(products_df, engagement_df, left_on='LP ID', right_on='lp_id')\nengagement_df[\"district_id\"] = engagement_df[\"district_id\"].astype(str).astype(int)\ndistricts_engagement_data = pd.merge(districts_df, engagement_df, left_on='district_id', right_on='district_id')\n\n\ngeolocator = Nominatim(user_agent=\"MA\")\n\ndef feature_generation(df):\n    lat=[]\n    long=[]\n    for i in df['state']: \n        location = geolocator.geocode(i)\n        try:\n            lat.append(location.latitude)\n            long.append(location.longitude)\n        except:\n            lat.append(\"NA\")\n            long.append(\"NA\")\n    df['Latitude'] = lat\n    df['Longitude'] = long\n    \n    return df\n\ndef map_df(df,col1,col2):\n    df = pd.DataFrame(df[[col1,col2]]\\\n            .groupby([col1])[col2].mean()\\\n            .sort_values(ascending=False)[:20]).reset_index()\n    \n    df = feature_generation(df)\n    \n    return df\n\nstate_access = map_df(districts_engagement_data, \"state\", \"pct_access\")\nstate_engagement_index = map_df(districts_engagement_data, \"state\", \"engagement_index\")","78428bdd":"north_america_map = folium.Map(location=[38.9, -77.05], tiles='Stamen Watercolor', zoom_start=3)\nmc = MarkerCluster()\nfor idx, row in state_access.iterrows():\n    if not math.isnan(row['Longitude']) and not math.isnan(row['Latitude']):\n        popup = \"\"\"\n        State : <b>%s<\/b><br>\n        Percentage Access : <b>%s<\/b><br>\n        \"\"\" % (row['state'], row['pct_access'])\n        mc.add_child(Marker([row['Latitude'], row['Longitude']],tooltip=popup))\n    north_america_map.add_child(mc)\nnorth_america_map\n","67ef54fc":"mc = MarkerCluster()\nfor idx, row in state_engagement_index.iterrows():\n    if not math.isnan(row['Longitude']) and not math.isnan(row['Latitude']):\n        popup = \"\"\"\n        State : <b>%s<\/b><br>\n        Engagement Index : <b>%s<\/b><br>\n        \"\"\" % (row['state'], row['engagement_index'])\n        mc.add_child(Marker([row['Latitude'], row['Longitude']],tooltip=popup))\n    north_america_map.add_child(mc)\nnorth_america_map","2e29c4f7":"For both 'pct_access' and 'engagement_index' we can fill the NaN with zero. As for 'lp_id' we can either delete these 541 rows or fill them also with zero, we choose the later.","c88ea896":"Check for any missing values:","29cf3a6c":"### High speed connection data:","51385f7a":"For California we have enough data. Here we can make inference with more confidence. Its annual average pct_access is only half of that of Illinois. The reasons of this gap can be further researched.","b6dbb36b":"Also for Locale we don't have a uniform or close to uniform distribution. Our data is heavily skewed towards Suburb and Rural.","460b29b5":"For this data we'll ignore it right now. We will have better data to address this feature. ","a3096c40":"As per instruction, the last column 'Primary Essential Function' actually contains two layers of information. As first thing, we therefore split it as following:","70708cbd":"We have not a uniform dataset here. There are State with a lot of school districts like Connecticut and Utah and States that have very small samples like: Arizona, Florida, North Dakota, Minnesota. We have to pay attention when we compare the engagement average values for different States, as the number might be not representative if the sample size difference is too big.\n\nWe have 55.6% of the school districts coming from just 4 States: Connecticut, Utah, Masschusetts, Illinois.","c85dc610":"### Distribution pct_black\/hispanic ","c62d4f49":"## COVID-19 Impact on Digital Learning\n\n<img src=\"https:\/\/images.unsplash.com\/photo-1597933471507-1ca5765185d8?ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&ixlib=rb-1.2.1&auto=format&fit=crop&w=751&q=80\" style=\"width:400px;\"\/>\n\nThis is the notebook for the competition launched on Kaggle (https:\/\/www.kaggle.com\/c\/learnplatform-covid19-impact-on-digital-learning).\n\nThe goal of the data analysis is to better understand and measure the scope and **impact of the pandemic on education inequities**.\n\nIn this analytics competition, you\u2019ll work to **uncover trends in digital learning**. Accomplish this with data analysis about how engagement with digital learning relates to factors like district demographics, broadband access, and state\/national level policies and events. Then, submit a Kaggle Notebook to propose your best solution to these educational inequities.\n\nYour submissions will inform policies and practices that close the digital divide. With a better understanding of digital learning trends, you may help reverse the long-term learning loss among America\u2019s most vulnerable, making education more equitable.\n\n\n### Challenge:\n\nWe challenge the Kaggle community to explore (1) the state of digital learning in 2020 and (2) how the engagement of digital learning relates to factors such as district demographics, broadband access, and state\/national level policies and events.\n\nWe encourage you to guide the analysis with questions that are related to the themes that are described above (in bold font). Below are some examples of questions that relate to our problem statement:\n\n    - What is the picture of digital learning in 2020 for the school districts included in the dataset? \n    - What is the effect of the COVID-19 pandemic on online and distance learning, and how might this also evolve in the future? -> school closed in March, see the time series data.\n    - How does student engagement with different types of education technology change over the course of the pandemic? -> product_info.csv primary essential function\n    - How does student engagement with online learning platforms relate to different geography? Demographic context (e.g., race\/ethnicity, ESL, learning disability)? Learning context? Socioeconomic status?\n    - Do certain state interventions, practices or policies (e.g., stimulus, reopening, eviction moratorium) correlate with the increase or decrease online engagement?","33f37e47":"## Load districts_info data into DataFrame & some EDA\n\n### District information data\n\n>The district file ```districts_info.csv``` includes information about the **characteristics of school districts**, including data from \n>- NCES (2018-19), \n>- FCC (Dec 2018), and \n>- Edunomics Lab. \n\nSteps taken to preserve Privacy \ud83d\udd12 \n- Identifiable information about the school districts has been removed. \n- An open source tool ARX (Prasser et al. 2020) was used to transform several data fields and reduce the risks of re-identification. \n\n\ud83d\udcdd For data generalization purposes some data points are released with a range where the actual value falls under. Additionally, there are many missing data marked as 'NaN' indicating that the data was suppressed to maximize anonymization of the dataset.\n\n| Name                   | Description                                                                                                                                                                                                                                                                              |\n|------------------------|------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|\n| district_id            | The unique identifier of the school district                                                                                                                                                                                                                                             |\n| state                  | The state where the district resides in                                                                                                                                                                                                                                                  |\n| locale                 | NCES locale classification that categorizes U.S. territory into four types of areas: City, Suburban, Town, and Rural. See Locale Boundaries User's Manual for more information.                                                                                                          |\n| pct_black\/hispanic     | Percentage of students in the districts identified as Black or Hispanic based on 2018-19 NCES data                                                                                                                                                                                       |\n| pct_free\/reduced       | Percentage of students in the districts eligible for free or reduced-price lunch based on 2018-19 NCES data                                                                                                                                                                              |\n| county_connections_ratio | ratio (residential fixed high-speed connections over 200 kbps in at least one direction\/households) based on the county level data from FCC From 477 (December 2018 version). See FCC data for more information.                                                                         |\n| pp_total_raw             | Per-pupil total expenditure (sum of local and federal expenditure) from Edunomics Lab's National Education Resource Database on Schools (NERD$) project. The expenditure data are school-by-school, and we use the median value to represent the expenditure of a given school district. |\n                                                         ","964eb46b":"## Exploratory Data Analysis Part 2","ab1abfba":"### Locale Distribution Chart:","d93ea117":"For pct_access we take the max value from each district per each day over the 2020, then we take the mean over all the districts in one State to arrive at the State value.\n\nSame procedure for the engagement_index, we take the sum for each district per each day, then we take the mean over all the districts in one State to arrive at a comparable State value.","3871558a":"After droping a bunch of districts with missing values.\nThe top district in terms of average pct_access over the year is: **district 5890**\n\nLet's have a look at the chart:","c81af7ae":"## Q1: How was the students' engagement during 2020 in each of our districts?\n\nwe'll use the following metrics as proxies:\n- **pct_access.max()**: Why max value you may ask. The reason is there are a lot of available products for the students each day. And if we take the mean, we'll underestimate the engagement level. \n\n>> For example: on Jan. 1st 2020, for the school district 1000 we have 138 different products, each with its pct_access. If we take the mean, which is only 0.145%! Which is obviously wrong, because if we have 5% of students active on only one product, then this 5% should be the reliable estimate for engagement for that day, we can't average it out. In this case the max value is 3.6% on a 'certain' product. We don't care which product at this stage, we just know that 3.6% of the students were active on some technology product that day.\n\n- **engagement_index.sum()**: for engagement_index we choose the sum, since it registers the total page-load events per one thousand students of a given product and on a given day. ","33c436e7":"As expected the higher counts are related to functions focused on students learning like: Digital Learning Platforms, Resources & Reference, Content Creation & Curation. \n\nWhile the lower end is populated with school management software, admissions, enrollment, teacher resources etc.","babf2bbe":"Here we must not hurry to make comparison. We know that our datasets are not uniform, there are 4 States who count for more than 55% of the data. \n\nTherefore, we first need to establish a cut-off threshold to drop States with too few data points.\n\nWe can see that Florida, Minnesota, Arizona, North Dakota only have 1 school district each. \nWhile Minnesota, Arizona, North Dakota, New Hampshire have the fewest data points for both pct_access and engagement_index.\n\nWe'll establish a cut-off at 100K data points for both pct_access and engagement_index, and drop States with less than 100K data points. The goal is allow a certain comparability, as too fewer data will probabily give us a distorted picture of the reality.","e342f5cf":"## Load an extra data file into DataFrame\n\nWe have collected a bunch of extra data on well being of kids in U.S., data from households survey about impact of Covid-19 on the education of their kids, data on availability of computer device and internet at home etc.\n\nData source: \n- United States Census Bureau Household Pulse Survey - link: https:\/\/www.census.gov\/data\/tables\/2020\/demo\/hhp\/hhp21.html\n- The Annie E. Casey Foundation - link: https:\/\/datacenter.kidscount.org\/ \n\n\n\n\ud83d\udcddThe column ```state``` which can be used to link to district information in ```district_info.csv```. \n\n\n| Name             | Description                                                                                                    |\n|------------------|----------------------------------------------------------------------------------------------------------------|\n| state            | The state where the district resides in                                                                                 |\n| children_in_poverty_2018            | Percentage of children in poverty in the state                                                                           |\n| single_parent_families_2018      | Percentage of children in single-parent families |\n| household_head_no_diploma_2018 | Percentage of children in families where the household head lacks a high school diploma                        |\n| dist_learning_online_resources     | Percentage of children whose classes were moved to a distance learning format: using online resources. Dated: Dec. 2020 |\n| dist_learning_mat_home| Percentage of children whose classes were moved to a distance learning format: using paper materials sent home. Dated: Dec. 2020                       |\n| classes_cancelled     | Percentage of children whose classes were cancelled. Dated: Dec. 2020 |\n| covid_not_affect | Percentage of children whose education were not affect by the pandemic. Dated: Dec. 2020                       |\n| device_always_usually     | Percentage of children with computer device always or usually available for educational purposes. Dated: Dec. 2020 |\n| device_rarely_never | Percentage of children with computer device rarely or never available for educational purposes. Dated: Dec. 2020                       |\n| internet_always_usually    | Percentage of children with internet always or usually available for educational purposes. Dated: Dec. 2020 |\n| internet_rarely_never | Percentage of children with internet rarely or never available for educational purposes. Dated: Dec. 2020                       |\n| CLSCHOOL | The date a state closed K-12 public schools statewide. Only included directives\/orders. Did not include guidance or recommendations. Order must apply to entire state.                   |\n\nPlease note that the data includes only the States we have in our datasets, and doesn't cover the entire country.\n","388633dd":"### Sectors Distribution","df64c1c3":"## Load engagement data into DataFrame\n\n### Engagement data\n> The engagement data are aggregated at school district level, and each file in the folder ```engagement_data``` represents data from **one school district***. \n\n\ud83d\udcddThe 4-digit file name represents ```district_id``` which can be used to link to district information in ```district_info.csv```. \n\n\ud83d\udcddThe ```lp_id``` can be used to link to product information in ```product_info.csv```.\n\n| Name             | Description                                                                                                    |\n|------------------|----------------------------------------------------------------------------------------------------------------|\n| time             | date in \"YYYY-MM-DD\"                                                                                           |\n| lp_id            | The unique identifier of the product                                                                           |\n| pct_access       | Percentage of students in the district have at least one page-load event of a given product and on a given day |\n| engagement_index | Total page-load events per one thousand students of a given product and on a given day                         |\n| district_id | The unique identifier of the school district   (Custom added from filenames)                     \n","d95b29ec":"For Michigan we have a very big difference betweeen first part and second part of year. Again we have much less data for this State, so the reason can be partially due to this.","407860d5":"### Primary Functions Ranking\n","75d78a46":"We can notice the following:\n- **Illinois** is the State where 4 of the 6 districs are coming from, why? Any State interventions or policies we might want to check out.\n- Both Illinois and Connecticut are two of the four States where the bulk of the data (over 55%) is coming from. So we have to be careful here, maybe other States' districts will have higher engagement metrics if we add more data into the analysis. Same reasoning work for the locale, since we have ~60% of the data coming from Suburb, we can't make any hasty conclusion here.\n- The district from New York has very high percentage of black\/hispanic students and eligible for free\/reduced-price lunch students, both between 80-100%. This is a very encouraging news, as we might infer from this, **harsh economic conditions doesn't have to be an obstacle to digital learning**.\n- All 6 districts are situated in States where around 70-75% of children whose classes were moved to a distance learning format: using online resources. And 15-20% of children whose classes were moved to a distance learning format: using paper materials sent home. Around 30% of children whose classes were cancelled and only 3% of children whose education were not affected by the pandemic.\n- Both devices and internet are always or usually used for educational pourposes.","ff56296b":"Here we have the confirmation that Illinois is the top State in terms of pct_access metric. Remember previously we have analyze the top10 districts, a big part of them come from Illnois. Same for New York. \n\nLet's plot some chart of both the best and the worst.","6f0489dc":"'lp_id' are just the products_ids so we don't care about them here. \n\nFor 'pct_access', almost all of the values are between 0 and 1. \n\nFor 'engagement_index', almost all of the values are between 0 and 20.","e2c8ccca":"We have checked all 233 distric_id are the same for both dataframes: engagement_df and districts_df.","4fa0f8f2":"Inference on Michigan must be taken with a grain of salt, as we have only less than 200K sample data compared to 2.5M of Connecticut. \n\nAlso we have noticed that the second part of the year's trend is that low, just a little lower compared to NY. So the low ranking is mostly due to the first part of the year. With more districts and data, the pct_access might go up.","3a7d4113":"## Q4: Which are the best States? And Which are the worst?","d456ba60":"###\u00a0We now do the same analysis for the engagement_index:","963ca931":"The overall take away from analyzing districts data is that:\n- Majority of the school districs in the dataset coming from only 4 States;\n- School districts in the dataset mainly are in suburb and rural locales;\n- School districs in the dataset have a lower percentage of both Black and Hispanic students compared to the national average.\n\nTherefore we have to be careful to draw conclusion on whatever insights we will find from this dataset. As it represents only the school districts covered by this LearnPlatform dataset, while the country\/national picture might differ significantly from it.","16ddfaf2":" LC = Learning & Curriculum is the overwhelming majority function category, which matches well with our objective.","151e1b5b":"## Q2: Which are the top 10 districts?","363db4f3":"## Merge products_df with engagement_df","8a56a62b":"At this point, we have an overall picture of the data at our disposal. The next step we'll do is to merge datasets so we can proceed with further EDA. In particular, we will merge:\n- engagement_df with districts_df, they have both the same list of district_ids, so we should have back a nice big dataset;\n- products_df with engagement_df, here we're interested in the top 372 products included in the products_df, so with a inner merge we'll drop a big chunk of rows from engagement_df, which are related to products that we don't have information at this analysis.","77bf077a":"Let's have a quick look at stats first:","c3b550d0":"We have also a 'time' column. For now we don't transform it, we'll consider to do it later if necessary.","bd99bbad":"A very interesting insight emerges from this analysis: we have found 6 school districts that appear in both the top 10 rankings.\n\nSchool districts: 8815, 9536, 2779, 9553, 6194, 5890 where students used the most digital learning technologies both in terms of how diffuse the usage was and how big the usage was. It is advisable to study careful these school districts to find out the reason behind these metrics in order to assist other schools to increase the effectiveness of their digital learning policies.\n\nOut of curiosity, let's have a quick look at them and see if we can get some additional insights. Let's merge the combined top10 with districts_df and our custom dataset.","352a3814":"North Carolina is even more strange, notice the gap starting Apr. This might also be not enough data points. ","9bc37f68":"We have a total of **233** school districts. We have also some missing values, later on we'll fill with a string value 'Not disclosed'. We will also map each of the range value and string value to categories like [1, 2, 3, 4] for our ML modeling.\n","9929124d":"We can see from above that in the products_df we have the top 372 products information, while in our engagement_df we have a lot more products. So when we merge the datasets, we have to be mindful of this.","a98d9921":"### Top 10 companies in terms of number of products:","f994ab89":"The chart shows the importance of Google for digital learning, although we still have to dig deep on which products are the most used by the students. ","1d4bf2aa":"Now we are ready to calculate the annual mean for both pct_access and engagement_index for the whole df:","d112d70f":"Here we load all the csv files into an unique DataFrame. And using the filename as the column 'district_id', we'll need this column to merge with the 'District Info DataFrame' later on. \n\nWe'll also convert the time column into datetime, and extract a series of columns that will be useful later for our analysis.","58f75b6b":"### Distribution pct_free\/reduced","011ef2e4":"## Import the necessary libraries\n","ab158543":"Have analyzed the top 10, let's have a look at the bottom 10:\n\n## Q3: Which are the bottom 10 districts?","f82ace25":"At this point, we have some confirmation with our previous analysis on districs. Best States consist of: Illinois, New York, Connecticut. While at bottom of the ranking we can find: Texas, Michigan, North Carolina.","cfc11ef2":"One interesting thing to see here, notice how in Illinois when the schools get closed during March, there was a significant drop in pct_access. We would expect a surge like what happened in New York. Probably there was some Spring festival or some other State related reasons. But strange nevertheless.\n\nAnother intresting thing is Illinois school districts went into Summer holiday earlier compared to New York, but they come back to school earlier too. ","821e57ac":"### No. of school districts per State:","3e47ab22":"For Texas, the gap is probably due to missing data\/not enough data in our dataset.","2d8b670d":"We split the Primary Essential Function into two separate columns as there are two layers\/levels of specifications here.","535702e6":"### Function Categories Distribution","819e6297":"### Per-pupil total expenditure data:","4c8dad16":"No excuse for California. Despite having quite big and complete sample size, the California's performance on both pct_access and engagement_index only half of those States on the top part of the ranking namely: Illinois and New York.","f92107f1":"Analyzing the worst district, we notice the following:\n- Both pct_access and engagement_index are **around or less than 1\/10** from the best. The differences are very big, a lot of work to do in this districts.\n- Geographically speaking there's no one particular State that stands out. When we talk about disfunctionalities, it is quite spread out around. \n- **Lower income districts might have a correlation with lower performance on digital learnings**, 4 out of 7 districts have pretty high percentage of students eligible for free\/reduced-price lunch.\n- **The State of Utah** has only 58% of children whose classes were moved to a distance learning format: using online resources. However, that's correlated to 16% of reported children whose education were not affected by the pandemic. That might explain the lower usage for digital learning tools. This district reports also lower percentage of low income families students, partially matches the taking of point above.\n\nClearly something is not working in these districts, it might be economics reasons. **But have seen from the top10 the district in NY, low income doesn't necessary have to be an obtacle.** To better understand the reasons, further research must be done including interviews to the teachers, to the parents etc.","a272a750":"## Merge engagement_df with districts_df","e790b5e0":"We can see for the school district no.1000 the maximum percentage of students using a digital learning product oscillates between 25-40% on the most active days. We can see the drop during summer vacation time, and subsequent rise in September when school year restarts.\n\nA more clear picture is given by engagement_index, we can see here the magnitude of engagement jumps in march during outbreak of pandemic and schools were being closed. \n\nThis is only one district, while we have 233 districts in total, each one with 1 year of data. So we will use the simple mean to compare them and select the top 10 and bottom 10.","2f29797e":"The majority of spending per pupil is concentrated between 6K to 18K. ","42fdf78c":"After analyzing the States, we can say the following:\n- Top performing States are: **Illinois, New York**, confirmed also by our districts analysis.\n- Worst performing States: Michigan, North Carolina and Texas might partially due to the lower sample size of data. We can't have a confident conclusion unless we have more data on these States.\n- **California**'s performance are quite bad compared to the best. Both metrics pct_access and engagement_index are only 1\/2 of those at top of the ranking. ","e2a49c39":"## Geospatial Analysis \ud83d\uddfa\ufe0f","81677805":"## Load products_info data into DataFrame\n\n### Product information data\n> The product file ```products_info.csv``` includes information about the characteristics of the top 372 products with most users in 2020. The categories listed in this file are part of LearnPlatform's product taxonomy. \n\n\ud83d\udcdd Some products may not have labels due to being duplicate, lack of accurate url or other reasons.\n\n| Name                       | Description                                                                                                                                                                                                                                                                                                                    |\n|----------------------------|--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|\n| LP ID                      | The unique identifier of the product                                                                                                                                                                                                                                                                                           |\n| URL                        | Web Link to the specific product                                                                                                                                                                                                                                                                                               |\n| Product Name               | Name of the specific product                                                                                                                                                                                                                                                                                                   |\n| Provider\/Company Name      | Name of the product provider                                                                                                                                                                                                                                                                                                   |\n| Sector(s)                  | Sector of education where the product is used                                                                                                                                                                                                                                                                                  |\n| Primary Essential Function | The basic function of the product. There are two layers of labels here. Products are first labeled as one of these three categories: LC = Learning & Curriculum, CM = Classroom Management, and SDO = School & District Operations. Each of these categories have multiple sub-categories with which the products were labeled |\n|                            |                                                                                                                                                                         ","aa25ecb7":"The majority of products are PreK-12, this matches well with our goal of analysis.","9ca80095":"As we can see from above, our dataset's percentage of Black or Hispanic ethnicities students are lower compared to the national average. The majority of our school districts have between 0 and 20% of the two ethnicities, while the national average is around 42%. We have to remind us when we do analysis."}}