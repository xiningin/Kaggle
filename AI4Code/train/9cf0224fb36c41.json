{"cell_type":{"0c3d6636":"code","43caf307":"code","d395a100":"code","a4c7edd5":"code","af5dc2d7":"code","0f0e3e4c":"code","601db6ce":"code","2d6ee643":"code","2b9d079d":"code","014597a2":"code","f6f7ae3a":"code","d44e9b4f":"code","ee901a08":"code","246b0674":"code","b47a4bf6":"code","9facb371":"code","66da9ee2":"markdown","97dee640":"markdown","2a9f411d":"markdown","731d3499":"markdown","42d3b951":"markdown","0d52540a":"markdown","749700c0":"markdown","395dcfe2":"markdown","28593754":"markdown","d0b09cb1":"markdown"},"source":{"0c3d6636":"import pandas as pd\nimport numpy as np  \nimport seaborn as sns \npal = sns.color_palette(\"pastel\")\n\nimport plotly\nimport plotly.express as px\nimport matplotlib.pyplot as plt\n%matplotlib inline\nfrom sklearn import preprocessing\nimport glob\nimport plotly.offline as py\nimport plotly.graph_objs as go\nimport plotly.tools as tls\n\nfrom geopy.geocoders import Nominatim\nimport folium\nfrom folium.plugins import HeatMap\nfrom folium.plugins import FastMarkerCluster\nfrom plotly import tools\nimport re\nfrom plotly.offline import init_notebook_mode, plot, iplot\nfrom wordcloud import WordCloud, STOPWORDS \nfrom warnings import filterwarnings\nfilterwarnings('ignore')\nimport missingno as msno\nimport glob\n\nimport matplotlib.image as mpimg\nfrom matplotlib.offsetbox import AnnotationBbox, OffsetImage\n","43caf307":"districts_data=pd.read_csv(\"..\/input\/learnplatform-covid19-impact-on-digital-learning\/districts_info.csv\")\nproducts_data=pd.read_csv(\"..\/input\/learnplatform-covid19-impact-on-digital-learning\/products_info.csv\")\n\npath = '..\/input\/learnplatform-covid19-impact-on-digital-learning\/engagement_data' \nall_files = glob.glob(path + \"\/*.csv\")\n\nli = []\n\nfor filename in all_files:\n    df = pd.read_csv(filename, index_col=None, header=0)\n    district_id = filename.split(\"\/\")[4].split(\".\")[0]\n    df[\"district_id\"] = district_id\n    li.append(df)\n    \nengagement_data = pd.concat(li)\nengagement_data = engagement_data.reset_index(drop=True)","d395a100":"display(\"Districts data\", districts_data.head())\ndisplay(districts_data.info())","a4c7edd5":"student = mpimg.imread('..\/input\/covid-learning-pics\/1.jpg')\nimagebox = OffsetImage(student, zoom=.5)\nxy = (0.5, 0.5)\nab = AnnotationBbox(imagebox, xy, frameon=False, pad=1, xybox=(2, 60))\n\nplt.figure(figsize=(16, 6))\nax = sns.countplot(districts_data.locale)\nax.add_artist(ab)\n\n\nplt.title(\"The dataset is primarily from Suburbs\", fontsize=16)\nplt.xticks(rotation=90, fontsize=13)\nplt.yticks(fontsize=13)\nplt.ylabel(\"Frequency\", fontsize=14)\nplt.xlabel(\"\");","af5dc2d7":"student = mpimg.imread('..\/input\/covid-learning-pics\/0.jpg')\nimagebox = OffsetImage(student, zoom=1)\nxy = (0.5, 0.5)\nab = AnnotationBbox(imagebox, xy, frameon=False, pad=1, xybox=(20, 15))\n\n\nplt.figure(figsize=(16, 10))\nax =sns.countplot(y=\"state\",data=districts_data,order=districts_data.state.value_counts().index,palette=\"Blues\",linewidth=3)\nax.add_artist(ab)\n\nplt.title(\"The states with the most schools are Connecticut and Utah\",font=\"Serif\", size=20)\nplt.show()","0f0e3e4c":"sns.displot(data=districts_data, x='state', hue= 'locale', height=8, aspect=3)","601db6ce":"locations=pd.DataFrame({\"Name\":districts_data['state'].unique()})\ngeolocator=Nominatim(user_agent=\"app\")\nlat=[]\nlon=[]\nfor location in locations['Name']:\n    location = geolocator.geocode(location)    \n    if location is None:\n        lat.append(np.nan)\n        lon.append(np.nan)\n    else:\n        lat.append(location.latitude)\n        lon.append(location.longitude)\n        \nlocations['lat']=lat\nlocations['lon']=lon        \n\nRest_locations=pd.DataFrame(districts_data['state'].value_counts().reset_index())\n\nRest_locations.columns=['Name','count']\nfinal_loc=Rest_locations.merge(locations,on='Name',how=\"left\").dropna()\nfinal_loc.head(15).style.set_caption(\"Locations Dataframe\").set_properties(**{'background-color': 'peachpuff',\n                           'color': 'midnightblue','border': '1.5px solid black'})\n\ndef generateBaseMap(default_location=[37.0902, -95.7129], default_zoom_start=4):\n    base_map = folium.Map(location=default_location, zoom_start=default_zoom_start)\n    return base_map\n\nbasemap=generateBaseMap()\n\nFastMarkerCluster(data=final_loc[['lat','lon','count']].values.tolist()).add_to(basemap)\n\nbasemap","2d6ee643":"pct_black_hispanic = districts_data['pct_black\/hispanic'].str.split(\",\",n=1,expand=True)\ndistricts_data['pct_black']=pct_black_hispanic[0].str.replace('[','',regex=True)\ndistricts_data['pct_hispanic']= pct_black_hispanic[1].str.replace('[','',regex=True)\ndistricts_data['pct_black']=pd.to_numeric(districts_data['pct_black'])\ndistricts_data['pct_hispanic']=pd.to_numeric(districts_data['pct_hispanic'])\ndistricts_data['pct_black_and_hispanic']=(districts_data['pct_black'] + districts_data['pct_hispanic'])\/2 # combine with mean value\nsns.displot(data=districts_data, x=\"pct_black_and_hispanic\", hue='state', height=8, aspect=.8)","2b9d079d":"\nstudent = mpimg.imread('..\/input\/covid-learning-pics\/3.jpg')\nimagebox = OffsetImage(student, zoom=.6)\nxy = (0.5, 0.5)\nab = AnnotationBbox(imagebox, xy, frameon=False, pad=1, xybox=(3.5, 30))\n\n\nplt.figure(figsize=(16, 12))\nax =sns.countplot(x ='pct_free\/reduced',data = districts_data,order=districts_data['pct_free\/reduced'].value_counts().index)\nax.add_artist(ab)\n\nplt.title(\"Some states offer over 60% students eligible for free\/reduced fees\",font=\"Serif\", size=20)\nplt.show()","014597a2":"pct_free_reduced = districts_data['pct_free\/reduced'].str.split(\",\",n=1,expand=True)\ndistricts_data['pct_free']=pct_free_reduced[0].str.replace('[','',regex=True)\ndistricts_data['pct_reduced']= pct_free_reduced[1].str.replace('[','',regex=True)\ndistricts_data['pct_free']=pd.to_numeric(districts_data['pct_free'])\ndistricts_data['pct_reduced']=pd.to_numeric(districts_data['pct_reduced'])\ndistricts_data['pct_free_and_reduced']=(districts_data['pct_free'] + districts_data['pct_reduced'])\/2\n\nsns.displot(data=districts_data, x=\"pct_free_and_reduced\", hue='state', height=8, aspect=.8)","f6f7ae3a":"display(\"Products data\", products_data.head())\n\ndisplay(products_data.info())","d44e9b4f":"sectors= products_data['Sector(s)'].value_counts()\nfig = go.Figure(data=[go.Bar(y=sectors.values, x=sectors.index)],\n                layout=go.Layout(margin=go.layout.Margin(l=0, r=0, b=10, t=50)))\n\n# Show chart\nfig.update_layout(title='PreK-12 is the largest Sector')\nfig.show()","ee901a08":"prim_fn= products_data['Primary Essential Function'].value_counts()\nfig = go.Figure(data=[go.Bar(y=prim_fn.values, x=prim_fn.index)],\n                layout=go.Layout(margin=go.layout.Margin(l=0, r=0, b=10, t=50)))\n\n# Show chart\nfig.update_layout(title='Digital Learning Platforms are the primary essential function')\nfig.show()","246b0674":"provider= products_data['Provider\/Company Name'].value_counts()\nfig = go.Figure(data=[go.Bar(y=provider.values, x=provider.index)],\n                layout=go.Layout(margin=go.layout.Margin(l=0, r=0, b=10, t=50)))\n\n# Show chart\nfig.update_layout(title='Google is the largest provider, followed by Houghton Mifflin Harcourt and Microsoft')\nfig.show()","b47a4bf6":"display(\"Engagement data\",engagement_data.head())\n\ndisplay(engagement_data.info())","9facb371":"def plot_time_series(df,col1,col2,col3):\n    max_list = df[[col1,col2]]\\\n        .groupby([col1])[col2].mean()\\\n        .sort_values(ascending=False).index[:5].tolist()\n\n    df = df[df[col1].isin(max_list)]\\\n                    .reset_index(drop=True)[[col3, col1, col2]]\n    df = df.pivot_table(index=col3, columns=col1, values=col2)\n\n    fig = px.line(df, facet_col=col1, facet_col_wrap=1, width=800, height=800)\n    fig.update_layout(\n                      title=(col1 + \" , \" + col2 + \" , \" + col3).title(),\n                      title_x=0.39,\n                      template=\"plotly\",\n                      paper_bgcolor='#f5f7f7',\n                      font = {'family': 'Serif', 'size': 15}\n                     )\n    fig.show()\n    \nengagement_data[\"district_id\"] = engagement_data[\"district_id\"].astype(str).astype(int)\ndistricts_engagement_data = pd.merge(districts_data, engagement_data, left_on='district_id', right_on='district_id')\n\n\nplot_time_series(districts_engagement_data,\"state\",\"engagement_index\",\"time\")\n\n","66da9ee2":"# Distribution of schools in states by locale","97dee640":"# Districts data\nAs we look at basic details of the District data, we find that besides details on states and location, we also get details on population of minorities (black\/hispanic), fee reduction and population\n\nWe also note that missing values exist. ","2a9f411d":"# Products data\n\nAs we look at basic details of the Products data, we find details on products used, providors, sector and their primary function.\n\nWe also note that missing values exist. \n\nAs most of the data have a lot of unique categories, I have used plotly so that the charts are dynanmic and can be zoomed in\/out as per the viewers preference","731d3499":"# Geo-Analysis: Clustering the school disctricts in the US Map\n\nWe observe that most schools in the analysis are in the North Western part of the US\n(in the regions of area of New York and Chicago). \nThe students are from suburbs and data is in many states with Connecticut and Utah having the most details","42d3b951":"# COVID-19 Impact on Digital Learning\n\n![Source: Indian Express](https:\/\/images.indianexpress.com\/2021\/02\/teacher5.jpg)\n\n\n# Import the Python libraries","0d52540a":"**work in progress -- will add more in a few days!**\n\n# Sources and References\n\n* https:\/\/www.kaggle.com\/muhammadimran112233\/covid-19-impact-on-digital-learning\n* https:\/\/www.kaggle.com\/pranjalverma08\/exploring-impact-of-covid-19-on-digital-learning\n* https:\/\/www.kaggle.com\/ruchi798\/covid-19-impact-on-digital-learning-eda-w-b\n* https:\/\/www.kaggle.com\/girishkumarsahu\/learnplatform-covid-19-impact\n* https:\/\/www.kaggle.com\/saurabhbagchi\/covid-19-digital-learning-impact\n","749700c0":"# Engagement data","395dcfe2":"# Load the data","28593754":"# Most states have low percentage of of students in the districts identified as Black or Hispanic","d0b09cb1":"# Great to see States offer free\/reduced fee schools"}}