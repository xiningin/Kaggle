{"cell_type":{"ec215613":"code","a0022e66":"code","65651bad":"code","a0e8bc72":"code","29aa4dab":"code","05da751a":"code","6f377a9c":"code","16d9f854":"code","8d376bf5":"code","4440f103":"code","9ad40596":"code","d096e2dd":"code","be7e4e07":"code","567cfb35":"code","e955ee54":"code","5f2fb3d8":"code","faacde79":"code","fc81da1f":"code","aa30510c":"code","44ffedb1":"code","e2fc53c7":"code","1e954980":"code","3150704f":"code","bb143a3b":"code","0c251752":"code","e0c55f6c":"code","2fe0e770":"code","14020134":"code","aad7c19e":"code","f3ad3027":"code","9582cc65":"code","425b09f7":"markdown","c0dc0d3d":"markdown","e145e542":"markdown","222543ae":"markdown","113ba2fa":"markdown","bb5e2aba":"markdown","be79e879":"markdown","7e4a4279":"markdown","daddc845":"markdown","28f79dbc":"markdown","ff87e919":"markdown","94b2435f":"markdown","d921ef62":"markdown","903f2330":"markdown","5a65ecde":"markdown","e27ab046":"markdown","ea3dfcc9":"markdown","d8a9d702":"markdown","d00cab8b":"markdown","e9d5a2c0":"markdown"},"source":{"ec215613":"# This Python 3 environment comes with many helpful analytics libraries installed\n\nimport numpy as np # linear algebra\nimport pandas as pd # data processing, CSV file I\/O (e.g. pd.read_csv)\nimport matplotlib.pyplot as plt\nimport seaborn as sns\nsns.set_style('whitegrid')\nfrom subprocess import check_output\nprint(check_output([\"ls\", \"..\/input\"]).decode(\"utf8\"))","a0022e66":"laliga=pd.read_csv('..\/input\/FMEL_Dataset.csv')\nlaliga=laliga[laliga.division==1]","65651bad":"laliga.head()","a0e8bc72":"laliga.info()","29aa4dab":"#\u0414\u0430\u043b\u0456 \u043c\u0438 \u0441\u0442\u0432\u043e\u0440\u0438\u043c\u043e 3 \u043d\u043e\u0432\u0456 \u0444\u0443\u043d\u043a\u0446\u0456\u0457 \u0432 \u043d\u0430\u0431\u043e\u0440\u0456 \u0434\u0430\u043d\u0438\u0445, \u0449\u043e\u0431 \u043f\u043e\u0431\u0430\u0447\u0438\u0442\u0438, \u044f\u043a\u0430 \u043a\u043e\u043c\u0430\u043d\u0434\u0430 \u0432\u0438\u0433\u0440\u0430\u043b\u0430 \u043c\u0430\u0442\u0447 \u0447\u0438 \u043c\u0430\u0442\u0447 \u0437\u0430\u043a\u0456\u043d\u0447\u0438\u0432\u0441\u044f \u044f\u043a \u043d\u0456\u0447\u0438\u044f.\nlaliga['local_team_won']=laliga.apply(lambda row: 1 if row['localGoals']>row['visitorGoals'] else 0,axis=1)\nlaliga['visitor_team_won']=laliga.apply(lambda row: 1 if row['localGoals']<row['visitorGoals'] else 0,axis=1)\nlaliga['draw']=laliga.apply(lambda row: 1 if row['localGoals']==row['visitorGoals'] else 0,axis=1)","05da751a":"laliga.tail()\n#\u041d\u0430\u0448\u0456 \u043d\u043e\u0432\u0456 \u043c\u043e\u0436\u043b\u0438\u0432\u043e\u0441\u0442\u0456 \u0433\u043e\u0432\u043e\u0440\u044f\u0442\u044c \u043f\u0440\u043e \u0442\u0435, \u0449\u043e \u043c\u0456\u0441\u0446\u0435\u0432\u0430 \u043a\u043e\u043c\u0430\u043d\u0434\u0430 \u0432\u0438\u0433\u0440\u0430\u043b\u0430 \u043f\u0435\u0440\u0448\u0438\u0439 \u043c\u0430\u0442\u0447, \n#\u043a\u043e\u043c\u0430\u043d\u0434\u0430 \u0433\u043e\u0441\u0442\u0435\u0439 \u0432\u0438\u0433\u0440\u0430\u043b\u0430 \u0434\u0440\u0443\u0433\u0438\u0439 \u043c\u0430\u0442\u0447, \u0430 \u0442\u0440\u0435\u0442\u0456\u0439 \u043f\u043e\u0454\u0434\u0438\u043d\u043e\u043a \u0431\u0443\u0432 \u043d\u0456\u0447\u0438\u044f (\u0443 \u043f\u043e\u0440\u044f\u0434\u043a\u0443, \u043d\u0430\u0432\u0435\u0434\u0435\u043d\u043e\u043c\u0443 \u0432 \u0442\u0430\u0431\u043b\u0438\u0446\u0456 \u0432\u0438\u0449\u0435).","6f377a9c":"df=laliga.copy()","16d9f854":"a=df.groupby(['season','localTeam'])['local_team_won'].sum().reset_index().rename(columns={'localTeam': 'club','local_team_won': 'won'})\nb=df.groupby(['season','visitorTeam'])['visitor_team_won'].sum().reset_index().rename(columns={'visitorTeam': 'club','visitor_team_won': 'won'})\nc=df.groupby(['season','localTeam'])['draw'].sum().reset_index().rename(columns={'localTeam': 'club','draw': 'draw'})\nd=df.groupby(['season','visitorTeam'])['draw'].sum().reset_index().rename(columns={'visitorTeam': 'club','draw': 'draw'})\ne=df.groupby(['season','localTeam'])['visitor_team_won'].sum().reset_index().rename(columns={'localTeam': 'club','visitor_team_won': 'lost'})\nf=df.groupby(['season','visitorTeam'])['local_team_won'].sum().reset_index().rename(columns={'visitorTeam': 'club','local_team_won': 'lost'})","8d376bf5":"point_table=a.merge(b,on=['season','club']).merge(c,on=['season','club']).merge(d,on=['season','club']).merge(e,on=['season','club']).merge(f,on=['season','club'])\npoint_table.head()","4440f103":"point_table= point_table.rename(columns={'won_x':'home_win','won_y':'away_win','lost_x':'home_loss','lost_y':'away_loss'})\npoint_table['matches_won']=point_table.home_win+point_table.away_win\npoint_table['matches_lost']=point_table.home_loss+point_table.away_loss\npoint_table['matches_drawn']=point_table.draw_x+point_table.draw_y\npoint_table=point_table.drop(['draw_x','draw_y'],axis=1)\npoint_table['total_matches']=point_table.matches_won+point_table.matches_lost+point_table.matches_drawn","9ad40596":"point_table['points']=(point_table.matches_won*3)+(point_table.matches_drawn*1)","d096e2dd":"point_table.tail()","be7e4e07":"g=df.groupby(['season','localTeam'])['localGoals'].sum().reset_index().rename(columns={'localTeam': 'club','localGoals': 'home_goals'})\nh=df.groupby(['season','visitorTeam'])['visitorGoals'].sum().reset_index().rename(columns={'visitorTeam': 'club','visitorGoals': 'away_goals'})\ni=df.groupby(['season','localTeam'])['visitorGoals'].sum().reset_index().rename(columns={'localTeam': 'club','visitorGoals': 'goals_conceded'})\nj=df.groupby(['season','visitorTeam'])['localGoals'].sum().reset_index().rename(columns={'visitorTeam': 'club','localGoals': 'goals_conceded'})","567cfb35":"point_table=point_table.merge(g,on=['season','club']).merge(h,on=['season','club']).merge(i,on=['season','club']).merge(j,on=['season','club'])","e955ee54":"point_table['goals_scored']=point_table.home_goals+point_table.away_goals\npoint_table['goals_conceded']=point_table.goals_conceded_x+point_table.goals_conceded_y\npoint_table['goal_difference']=point_table.goals_scored-point_table.goals_conceded\npoint_table= point_table.drop(['goals_conceded_x','goals_conceded_y'],axis=1)","5f2fb3d8":"point_table= point_table.sort_values(by=['season','points','goal_difference']).reset_index().drop('index',axis=1)","faacde79":"point_table.tail(n=20).sort_values('points',ascending=False)","fc81da1f":"df=point_table.copy()","aa30510c":"champs=df[df.groupby(['season'])['points'].transform(max)==df.points].reset_index()\nchamps.tail(12)","44ffedb1":"champs=champs.drop(champs.index[[37]])\nchamps.tail(12)","e2fc53c7":"champs.club.value_counts().reset_index()","1e954980":"champs.club.value_counts().plot(kind='pie', autopct='%2.1f%%', figsize=(7,7))","3150704f":"df.groupby(['club'])['home_win'].sum().sort_values(ascending=False).head(20).plot(kind='bar',figsize=(20,8))","bb143a3b":"df.groupby(['club'])['matches_won'].sum().sort_values(ascending=False).head(20).plot(kind='bar',figsize=(20,8))","0c251752":"df.groupby(['club'])['goals_scored'].sum().sort_values(ascending=False).head(20)","e0c55f6c":"w=df.groupby(['club'])['home_goals'].sum().sort_values(ascending=False).head(20).reset_index()\nx=df.groupby(['club'])['away_goals'].sum().sort_values(ascending=False).head(20).reset_index()\ny=df.groupby(['club'])['goals_scored'].sum().sort_values(ascending=False).head(20).reset_index()\nz=w.merge(x,on=['club']).merge(y,on=['club'])\na=df.groupby(['club'])['home_win'].sum().sort_values(ascending=False).head(20).reset_index()\nb=df.groupby(['club'])['away_win'].sum().sort_values(ascending=False).head(20).reset_index()\nc=df.groupby(['club'])['matches_won'].sum().sort_values(ascending=False).head(20).reset_index()\nz=a.merge(b,on=['club']).merge(c,on=['club']).merge(z,on=['club'])","2fe0e770":"z.plot(x='club',y=['home_goals','away_goals','goals_scored'], kind=\"bar\",figsize=(15,8))","14020134":"sns.FacetGrid(z, hue=\"club\", size=7).map(plt.scatter, \"goals_scored\", \"matches_won\").add_legend()","aad7c19e":"z.plot(x='club',y=['home_win','away_win','matches_won'], kind=\"barh\",figsize=(15,10))","f3ad3027":"laliga.localGoals.plot(kind = 'line', color = 'g',label = 'localGoals',linewidth=1,alpha = 0.5,grid = True,linestyle = ':')\nlaliga.visitorGoals.plot(color = 'r',label = 'visitorGoals',linewidth=1, alpha = 0.5,grid = True,linestyle = '-.')\nplt.legend(loc='upper right')     # legend = puts label into plot\nplt.xlabel('x axis')              # label = name of label\nplt.ylabel('y axis')\nplt.title('Line Plot')            # title = title of plot\nplt.show()","9582cc65":"laliga.plot(kind='scatter', x='localGoals', y='visitorGoals',alpha = 0.5,color = 'red')\nplt.xlabel('Local Goals')              \nplt.ylabel('Visitor Goals')\nplt.title('Local vs Visitor Goals') ","425b09f7":"Let us start by reading the dataset in the name of laliga.\n","c0dc0d3d":"The more the number of goals scored, the more is the number of matches won. The following graph proves it.","e145e542":"After this let's have look at the points table of the last la liga season(2016-17). Here Real Madrid stand out as the winners followed by Barcelona.","222543ae":"This is a ranking of teams based on total goals scored. Two arch rivals are leading the way here.","113ba2fa":"Some bar graphs showing the dominance in the league with home wins, total wins.","bb5e2aba":"Dominance of each team on their home ground and away ground with respect to total matches won.","be79e879":"And this is how the points_table looks like after this.","7e4a4279":"Another chart showing dominance in the league with home wins, overall wins.","daddc845":"Next, we will calculate the number of wins,losses or draws each team\/club has registered both on there home grounds and away arenas. For simplicity the results are stored in simple alphabetica variables. ","28f79dbc":"Looking at the LaLiga winners for each of these years.","ff87e919":"We will sort the points table so as to get the team rankings in each of the seasons.","94b2435f":"Counting the trophies each team has won in this time period.  Real Madrid are the leaders here. Plotting the trophy share as a pie chart.","d921ef62":"Share of home goals and away goals for each team towards the total goals .","903f2330":"We will create **points_table** with all these win ,loss and draw information and see how it looks.","5a65ecde":"Let us view a sample of this data now.","e27ab046":"Going a little forward we will calculate the goals scored and conceded by each team throughout a season and also the goal difference.","ea3dfcc9":"Here the **won_x** feature stands for Win In HomeGround and **won_y** for Win In AwayGround. The same is for loss and draw. So we will rename the columns accordingly. Then calculate the total number of win ,loss and draw. Obviously the total number of matches played in the season by the team will be the sum of the aforesaid numbers.","d8a9d702":"For the 2006-07 season, we have 2 records, as both have equal points. Thus, deleting the second record.","d00cab8b":"It's time to award points for each team as per their performance in the matches. In laliga the winning team gets 3 points. for a decided match. Otherwise each team gets 1 point each if the match ends as a tie.","e9d5a2c0":"again taking a copy of this dataframe."}}