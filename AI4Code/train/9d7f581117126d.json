{"cell_type":{"18aa3f79":"code","67da9645":"code","9cd8a386":"code","8d23f64e":"code","5329d265":"code","3b7529b2":"markdown","2fcf03d3":"markdown","a7e5f11e":"markdown","7bcd819a":"markdown"},"source":{"18aa3f79":"import numpy as np\nimport pandas as pd\nimport plotly.express as px\n\ndef return_avg_result(dataframe, university, department, year, measurement):\n    new_df = pd.DataFrame()\n    dataframe = dataframe[dataframe['Academic Year'].isin([year])]\n    dataframe = dataframe[dataframe['University'].isin([university])]\n    smaller_dataframe = dataframe[dataframe['Department'].isin([department])]\n    new_df.loc[university+' All Departments'+' '+YEAR,'mean'] = dataframe.loc[:,measurement].mean(axis=0)\n    new_df.loc[university+' All Departments'+' '+YEAR,'std'] = dataframe.loc[:,measurement].std(axis=0)\n    new_df.loc[university+' All Departments'+' '+YEAR,'count'] = dataframe.loc[:,measurement].shape[0]\n    new_df.loc[university+' '+department+' Department'+' '+YEAR,'mean'] = smaller_dataframe.loc[:,measurement].mean(axis=0)\n    new_df.loc[university+' '+department+' Department'+' '+YEAR,'std'] = smaller_dataframe.loc[:,measurement].std(axis=0)\n    new_df.loc[university+' '+department+' Department'+' '+YEAR,'count'] = smaller_dataframe.loc[:,measurement].shape[0]\n    #print(measurement+' at '+university+' in '+year+':\\n')\n    return new_df\n\ndef return_popular_universities(dataframe,number_of_values):\n    popular_universities = pd.DataFrame(dataframe['University'].value_counts()[1:number_of_values])\n    #print('Number of Records Per University (Top '+str(number_of_values)+'):\\n')\n    return popular_universities\n\ndef return_popular_departments(dataframe,university,number_of_values):\n    dataframe = dataframe[dataframe['University'].isin([university])]\n    popular_departments = pd.DataFrame(dataframe['Department'].value_counts()[0:number_of_values])\n    #print('Number of Records Per Department at '+UNIVERSITY+' (Top '+str(number_of_values)+'): \\n')\n    return popular_departments","67da9645":"PHD_STIPENDS = pd.read_csv('\/kaggle\/input\/phd-stipends\/csv') # load the data\nPHD_STIPENDS['Overall Pay'].replace(regex=True,inplace=True,to_replace=r'\\D',value=r'') # remove $ sign from column\nPHD_STIPENDS['Overall Pay'] = PHD_STIPENDS['Overall Pay'].astype(float).fillna(0) # convert column to float\nPHD_STIPENDS[['University','Department','Overall Pay','LW Ratio']].head(10) # preview the data","9cd8a386":"df = return_popular_universities(PHD_STIPENDS,number_of_values = 10)\n\ndf.reset_index(level=0, inplace=True)\ndf.columns=['University','Number of Records']\nfig = px.bar(df, x='University', y=\"Number of Records\",title='Number of Records Per University (Top 10)')\nfig.update(layout=dict(xaxis_title='University',yaxis_title='Number of Records',legend_orientation=\"h\",showlegend=True))\nfig.update_yaxes(range=[0,140])\nfig.show()","8d23f64e":"UNIVERSITY = 'University of North Carolina - Chapel Hill (UNC)'\ndf = return_popular_departments(PHD_STIPENDS, UNIVERSITY,number_of_values = 10)\n\ndf.reset_index(level=0, inplace=True)\ndf.columns=['Department','Number of Records']\nfig = px.bar(df, x='Department', y=\"Number of Records\",title='Number of Records Per Department at '+UNIVERSITY+' (Top 10)')\nfig.update(layout=dict(xaxis_title='Department',yaxis_title='Number of Records',legend_orientation=\"h\",showlegend=True))\nfig.update_yaxes(range=[0,8])\nfig.show()","5329d265":"UNIVERSITY = 'University of North Carolina - Chapel Hill (UNC)'\nYEAR = '2019-2020'\nMEASUREMENT = 'Overall Pay'\nDEPARTMENT = 'English'\ndf1 = return_avg_result(PHD_STIPENDS, UNIVERSITY, DEPARTMENT, YEAR, MEASUREMENT)\nDEPARTMENT = 'Chemistry'\ndf2 = return_avg_result(PHD_STIPENDS, UNIVERSITY, DEPARTMENT, YEAR, MEASUREMENT)\ndf = pd.concat([df1,df2[1:]])\n\ndf.reset_index(level=0, inplace=True)\ndf.columns=['Cohort','Avg','Std','n']\nfig = px.bar(df, x='Cohort', y=\"Avg\",error_y=\"Std\",title='Average Overall Pay at '+UNIVERSITY)\nfig.update(layout=dict(xaxis_title='Cohort',yaxis_title='Average Overall Pay',legend_orientation=\"h\",showlegend=True))\nfig.update_yaxes(range=[0,35000])\nfig.show()","3b7529b2":"*Step 2: Load and preview the data*","2fcf03d3":"*Step 1: Import Python packages and define helper functions*","a7e5f11e":"*Step 3: Visualize the data for UNC only*","7bcd819a":"# What is the average PhD stipend at the University of North Carolina?"}}