{"cell_type":{"71dfef7b":"code","bcea3728":"code","4163ac57":"code","b5d0937e":"code","1678d1ff":"code","962ebbf7":"code","b1717a1c":"code","50b85ef1":"code","5f148fa7":"code","b01887a8":"code","3ed9909a":"code","90079fe4":"code","86d5cdbf":"code","fa42ff06":"code","3e29b4e7":"code","b0ad8ca2":"code","47a59b56":"code","9d28259d":"code","e67c031c":"code","e0dacc8c":"code","9da20bfc":"code","cd9f9e1e":"code","8e7fbf57":"code","233a7912":"code","1a24cd35":"code","620dda28":"code","edf9d0e6":"code","ff26dc20":"code","d1ebf859":"code","cf17bbd1":"code","3a7cccdc":"code","31fb6a00":"code","d9ae25c7":"code","75b9153e":"code","fd5e61b0":"code","a5bbff2d":"code","ae4bf2e7":"code","c5c39556":"code","1ee52d04":"code","3b8979a7":"markdown","83cc22b4":"markdown","7e6b7a72":"markdown","9256b3dd":"markdown","89c13ded":"markdown","a4d83281":"markdown","e0077f96":"markdown","00a4871b":"markdown","3591f8e0":"markdown","6e33e687":"markdown","ed5ad7f0":"markdown","e2750f8a":"markdown","ecbbb985":"markdown","0751682a":"markdown","55847d98":"markdown","e4e181c4":"markdown","f6bb3659":"markdown","65283178":"markdown","8a9473f4":"markdown","b2396f3f":"markdown","bafbf2f7":"markdown","807e77d1":"markdown","be50be44":"markdown","e128b868":"markdown","218cf497":"markdown","14a3f8dd":"markdown","e81b35a8":"markdown","6d44ff84":"markdown","9351739a":"markdown","41d5184e":"markdown","f3f3552e":"markdown","44d05244":"markdown","0696332d":"markdown","03aac29d":"markdown","c74bfa07":"markdown","3361d542":"markdown"},"source":{"71dfef7b":"import numpy as np\nimport pandas as pd \n\nimport os\nfor dirname, _, filenames in os.walk('\/kaggle\/input'):\n    for filename in filenames:\n        print(os.path.join(dirname, filename))","bcea3728":"train = pd.read_csv(\"\/kaggle\/input\/titanic\/train.csv\")\ntest = pd.read_csv(\"\/kaggle\/input\/titanic\/test.csv\")","4163ac57":"train.head()","b5d0937e":"print(train.describe())\ntrain.describe().to_csv(\"Basic statistics.csv\")","1678d1ff":"traindes = train.groupby([\"Survived\"])\ntraindes = round(traindes.describe(),2)\nprint(traindes)\ntraindes.to_csv(\"Feature grouping.csv\")","962ebbf7":"train.info()","b1717a1c":"train[\"Sex\"][train[\"Sex\"] == \"male\"] = 0\ntrain[\"Sex\"][train[\"Sex\"] == \"female\"] = 1\ntest[\"Sex\"][test[\"Sex\"] == \"male\"] = 0\ntest[\"Sex\"][test[\"Sex\"] == \"female\"] = 1","50b85ef1":"train[\"Embarked\"][train[\"Embarked\"]== \"S\"] = 0\ntrain[\"Embarked\"][train[\"Embarked\"]== \"C\"] =1\ntrain[\"Embarked\"][train[\"Embarked\"]== \"Q\"] =2\ntest[\"Embarked\"][test[\"Embarked\"]== \"S\"] = 0\ntest[\"Embarked\"][test[\"Embarked\"]== \"C\"] =1\ntest[\"Embarked\"][test[\"Embarked\"]== \"Q\"] =2","5f148fa7":"Age_Q1 = train[\"Age\"].quantile(0.25)\nAge_Q3 = train[\"Age\"].quantile(0.75)\nAge_IQR = Age_Q3 - Age_Q1\nAge_LOWER_Q = Age_Q1 - 1.5*Age_IQR\nAge_HIGHER_Q = Age_Q3 + 1.5*Age_IQR\nAge_iqr = train[\"Age\"][(Age_LOWER_Q <= train[\"Age\"]) & (train[\"Age\"] <= Age_HIGHER_Q)].dropna()\nAge_iqr_out= train[\"Age\"][(Age_LOWER_Q >= train[\"Age\"]) & (train[\"Age\"] >= Age_HIGHER_Q)].dropna()\nprint(Age_iqr)\nAge_iqr.to_csv(\"Age iqr.csv\")","b01887a8":"Fare_Q1 = train[\"Fare\"].quantile(0.25)\nFare_Q3 = train[\"Fare\"].quantile(0.75)\nFare_IQR = Fare_Q3 - Fare_Q1\nFare_LOWER_Q = Fare_Q1 - 1.5*Fare_IQR\nFare_HIGHER_Q = Fare_Q3 + 1.5*Fare_IQR\nFare_iqr = train[\"Fare\"][(Fare_LOWER_Q <= train[\"Fare\"]) & (train[\"Fare\"] <= Fare_HIGHER_Q)].dropna()\nprint(Fare_iqr)\nFare_iqr.to_csv(\"Fare iqr.csv\")","3ed9909a":"print(train.isnull().sum())\nprint(test.isnull().sum())","90079fe4":"Sex = train.loc[:,[\"Sex\"]]\nAge = train.loc[:,[\"Age\"]]\nPclass = train.loc[:,[\"Pclass\"]]\nSibSp = train.loc[:,[\"SibSp\"]]\nParch = train.loc[:,[\"Parch\"]]\nFare = train.loc[:,[\"Fare\"]]\nSurvived = train.loc[:,[\"Survived\"]]","86d5cdbf":"import warnings\nwarnings.filterwarnings(\"ignore\")","fa42ff06":"import seaborn as sns\nimport matplotlib.pyplot as plt","3e29b4e7":"sns.distplot(Age)\nplt.title(\"Age histogram\", y=-0.15)\nplt.savefig(\"Age histogram\")","b0ad8ca2":"sns.distplot(Fare)\nplt.title(\"Fare histogram\", y=-0.15)\nplt.savefig(\"Fare histogram\")","47a59b56":"x1 = train[\"Sex\"].values\nprint(len(x1))\nn0 = len(np.where(x1==0)[0])\nn1 = len(np.where(x1==1)[0])\nprint(n0,n1)\nn = [n0,n1]\nlabel1 = [\"male\",\"female\"]","9d28259d":"plt.pie(n,labels = label1,counterclock=False,startangle=90,autopct = \"%1.1f%%\")\nplt.title(\"Percentage of Sex composition\", y=-0.15)\nplt.axis(\"equal\")\nplt.savefig(\"Sex pie chart\")\nplt.show()","e67c031c":"x2 = train[\"Pclass\"].values\nprint(len(x2))\nn1 = len(np.where(x2==1)[0])\nn2 = len(np.where(x2==2)[0])\nn3 = len(np.where(x2==3)[0])\nprint(n1,n2,n3)\nn = [n1,n2,n3]\nlabel2 = [\"1\",\"2\",\"3\"]","e0dacc8c":"plt.pie(n,labels = label2,counterclock=False,startangle=90,autopct = \"%1.1f%%\")\nplt.title(\"Percentage of Pclass composition\", y=-0.15)\nplt.axis(\"equal\")\nplt.savefig(\"Pclass pie chart\")\nplt.show()","9da20bfc":"x3 = train[\"SibSp\"].values\nprint(len(x3))\nn0 = len(np.where(x3==0)[0])\nn1 = len(np.where(x3==1)[0])\nn2 = len(np.where(x3==2)[0])\nn3 = len(np.where(x3==3)[0])\nn4 = len(np.where(x3==4)[0])\nn5 = len(np.where(x3==5)[0])\nn8 = len(np.where(x3==8)[0])\nn = [n0,n1,n2,n3,n4,n5,n8]\nprint(n)\nlabel3 = [\"0\",\"1\",\"2\",\"3\",\"4\",\"5\",\"8\"]","cd9f9e1e":"plt.pie(n,labels = label3,counterclock=False,startangle=90,autopct = \"%1.1f%%\")\nplt.title(\"Percentage of SibSp composition\", y=-0.15)\nplt.axis(\"equal\")\nplt.savefig(\"SibSp pie chart\")\nplt.show()","8e7fbf57":"x4 = train[\"Parch\"].values\nprint(len(x3))\nn0 = len(np.where(x4==0)[0])\nn1 = len(np.where(x4==1)[0])\nn2 = len(np.where(x4==2)[0])\nn3 = len(np.where(x4==3)[0])\nn4 = len(np.where(x4==4)[0])\nn5 = len(np.where(x4==5)[0])\nn6 = len(np.where(x4==6)[0])\nn = [n0,n1,n2,n3,n4,n5,n6]\nfor i in range(len(n)):\n    print(n[i])\nlabel4 = [\"0\",\"1\",\"2\",\"3\",\"4\",\"5\",\"6\"]","233a7912":"plt.pie(n,labels = label4,counterclock=False,startangle=90,autopct = \"%1.1f%%\")\nplt.title(\"Percentage of Parch composition\", y=-0.15)\nplt.axis(\"equal\")\nplt.savefig(\"Parch pie chart\")\nplt.show()","1a24cd35":"x5 = train[\"Embarked\"].values\nprint(len(x5))\nn0 = len(np.where(x5==0)[0])\nn1 = len(np.where(x5==1)[0])\nn2 = len(np.where(x5==2)[0])\nprint(n0,n1,n2)\nn = [n0,n1,n2]\nlabel5 = [\"S\",\"C\",\"Q\"]","620dda28":"plt.pie(n,labels = label5,counterclock=False,startangle=90,autopct = \"%1.1f%%\")\nplt.title(\"Percentage of Embarked composition\", y=-0.15)\nplt.axis(\"equal\")\nplt.savefig(\"Embarked pie chart\")\nplt.show()","edf9d0e6":"data1 = train.loc[:,[\"Age\",\"Survived\"]]\n#print(data1)","ff26dc20":"sns.boxplot(x=\"Survived\",y=\"Age\",data = data1)\nplt.title(\"Age Box plot\", y=-0.25)\nplt.savefig(\"Age Box plot\")","d1ebf859":"data2 = pd.concat([train[\"Survived\"],Age_iqr],axis=1)\ndata2 = data2.reindex(columns=[\"Age\",\"Survived\"])\n#print(data2)","cf17bbd1":"sns.boxplot(x=\"Survived\",y=\"Age\",data = data2)\nplt.title(\"Age Outlier exclusion Box plot\", y=-0.25)\nplt.savefig(\"Age Outlier exclusion Box plot\")","3a7cccdc":"data3 =  train.loc[:,[\"Fare\",\"Survived\"]]\n#print(data3)","31fb6a00":"sns.boxplot(x=\"Survived\",y=\"Fare\",data = data3)\nplt.title(\"Fare Box plot\", y=-0.25)\nplt.savefig(\"Fare Box plot\")","d9ae25c7":"data4 = pd.concat([train[\"Survived\"],Fare_iqr],axis=1)\ndata4 = data4.reindex(columns=[\"Fare\",\"Survived\"])\n#print(data4)","75b9153e":"sns.boxplot(x=\"Survived\",y=\"Fare\",data = data4)\nplt.title(\"Fare Outlier exclusion Box plot\", y=-0.25)\nplt.savefig(\"Fare Outlier exclusion Box plot\")","fd5e61b0":"Age_mean = traindes[\"Age\"][\"mean\"]\nAge_std = traindes[\"Age\"][\"std\"]\n\nAge_mean0 = float(Age_mean[:1])\nAge_mean1 = float(Age_mean[1:2])\nprint(Age_mean0,Age_mean1)\n\nAge_std0 = float(Age_std[:1])\nAge_std1 = float(Age_std[1:2])\nprint(Age_std0,Age_std1)\n\nAge_var0 = Age_std0**2\nAge_var1 = Age_std1**2\nprint(Age_var0,Age_var1)\n\nn0 = int(traindes[\"Age\"][\"count\"][:1])\nn1 = int(traindes[\"Age\"][\"count\"][1:2])\nprint(n0,n1)\nAge_u0 = Age_var0*n0\/(n0-1)\nAge_u1 = Age_var1*n1\/(n1-1)\nprint(Age_u0,Age_u1)","a5bbff2d":"from scipy import stats\nf1 = Age_u0\/Age_u1\nprint(\"F\u5024\u306f\"+str(f1))","ae4bf2e7":"x = np.linspace(0.000001,2,1000)\nfig,ax=plt.subplots(1,1,figsize=(10,7))\ny = stats.f.pdf(x,n0-1,n1-1)\nax.plot(x,y,linestyle= \"-\",label = f\"k = (n0-1),(n1-1)\")\n\nplt.xlim(0,2)\nplt.ylim(0,5)\nplt.fill_between(x,y,0,where=x<=f1,facecolor = \"y\",alpha=0.5)\nplt.title(\"Age F distribution\")\nplt.legend()\nplt.savefig(\"Age F distribution\")\nprint(f\"p-value:{stats.f.sf(f1,n0-1,n1-1)}\")","c5c39556":"import math\n#Up2\u306f\u30d7\u30fc\u30eb\u3057\u305f\u5206\u6563\nUp2 = ((n0-1)*Age_u0+(n1-1)*Age_u1)\/(n0+n1-2) \nprint(Up2)\nt1 = (Age_mean0-Age_mean1)\/math.sqrt(Up2*(1\/n0+1\/n1))\nprint(t1)","1ee52d04":"x = np.linspace(-8,8,1000)\nfig,ax=plt.subplots(1,1,figsize=(10,7))\ny = stats.t.pdf(x,n0+n1-2)\nax.plot(x,y,linestyle= \"-\",label = r\"$k=%i$\" % (n0+n1-2))\n\nplt.xlim(-4,4)\nplt.ylim(0,0.5)\nplt.fill_between(x,y,0,where=x>=t1,facecolor = \"y\",alpha=0.5)\nplt.title(\"Age T distribution\")\nplt.legend()\nplt.savefig(\"Age T distribution\")\nprint(f\"p-value:{stats.t.sf(t1,(n0+n1-2))}\")","3b8979a7":"Fare","83cc22b4":"5.**\u8981\u7d04**","7e6b7a72":"Fare","9256b3dd":"S\u30920 C\u30921 Q\u30922\u306b\u3059\u308b","89c13ded":"male\u30920 female\u30921\u306b\u3059\u308b","a4d83281":"3.**\u57fa\u672c\u7d71\u8a08\u91cf\u306e\u8868\u793a**","e0077f96":"1.**\u30c7\u30fc\u30bf\u5165\u529b**","00a4871b":"SibSp","3591f8e0":"13.**Survived\u5225\u306e\u6bcd\u5e73\u5747\u306e\u5dee\u306e\u691c\u5b9a**","6e33e687":"7.**\u5916\u308c\u5024\u306e\u691c\u51fa**","ed5ad7f0":"Age","e2750f8a":"p-value>0.05\u3088\u308a\u6bcd\u5206\u6563\u306b\u5dee\u304c\u3042\u308b\u3068\u8a00\u3048\u306a\u3044","ecbbb985":"6.**\u30ab\u30c6\u30b4\u30ea\u30ab\u30eb\u30c7\u30fc\u30bf\u306e\u6570\u5024\u5316**","0751682a":"2.**\u57fa\u672c\u7684\u306a\u30c7\u30fc\u30bf\u63a2\u7d22**","55847d98":"Parch","e4e181c4":"Sex","f6bb3659":"12.**1\u5909\u6570\u306e\u6bd4\u7387**","65283178":"**\u30bf\u30a4\u30bf\u30cb\u30c3\u30af\u53f7\u306e\u6700\u521d\u306e\u63a2\u7d22\u7684\u30c7\u30fc\u30bf\u89e3\u6790**","8a9473f4":"Embarked","b2396f3f":"Pclass","bafbf2f7":"\u5bfe\u8c61\u30b3\u30f3\u30da : https:\/\/www.kaggle.com\/c\/titanic","807e77d1":"9.**\u30c7\u30fc\u30bf\u306e\u6574\u7406**","be50be44":"12.**2\u5909\u6570\u9593\u306e\u95a2\u4fc2**","e128b868":"\u7b49\u5206\u6563\u6027\u306e\u691c\u5b9a","218cf497":"p-value<0.05\u3088\u308aSurvived\u306e0\u30681\u306b\u5c5e\u3059\u308b\u5e74\u9f62\u306e\u6bcd\u5e73\u5747\u306b\u306f\u5dee\u304c\u3042\u308b","14a3f8dd":"8.**\u6b20\u640d\u306e\u78ba\u8a8d**","e81b35a8":"4.**Survived\u306e\u7279\u5fb4\u91cf\u306e\u30c7\u30fc\u30bf\u5206\u6563\u306e\u78ba\u8a8d**","6d44ff84":"Fare Outlier exclusion","9351739a":"Fare","41d5184e":"Age","f3f3552e":"10.**\u30a8\u30e9\u30fc\u306e\u975e\u8868\u793a**","44d05244":"Age","0696332d":"\u6bcd\u5206\u6563\u672a\u77e5\u30fb\u5bfe\u5fdc\u306e\u306a\u3044\u30c7\u30fc\u30bf\u30fb\u7b49\u5206\u6563\u6027\u3042\u308a","03aac29d":"Age","c74bfa07":"Age Outlier exclusion","3361d542":"11.**1\u5909\u6570\u306e\u5206\u5e03**"}}