{"cell_type":{"e3db9928":"code","e15d0390":"code","0e092a96":"code","99d188f9":"code","c880a5e7":"code","af2b6ede":"code","eb7b690e":"code","f8585ec6":"code","35de94be":"code","13f6604a":"code","bad2e548":"code","db33e3d3":"code","5a5882b2":"code","2108af66":"code","22619f5a":"code","0a32e5d3":"code","f9138fe0":"code","2c0813a8":"code","5df5c481":"code","196577af":"code","5be544bd":"markdown","84a9b17c":"markdown","8fe7b35b":"markdown","831672fb":"markdown","00dcc3fc":"markdown","eaf7eac2":"markdown","3b3897d8":"markdown","5475a564":"markdown","cff305a8":"markdown","334a0bad":"markdown","9b40054a":"markdown","4c0a3486":"markdown","ad958f60":"markdown","9116d334":"markdown"},"source":{"e3db9928":"# Installing Side Table\n!pip install sidetable","e15d0390":"import numpy as np\nimport pandas as pd\nimport sidetable\nimport ast\nfrom sklearn.preprocessing import MultiLabelBinarizer","0e092a96":"path = \"..\/input\/flipkart-products\/flipkart_com-ecommerce_sample.csv\"","99d188f9":"df = pd.read_csv(f\"{path}\")\ndf.head()","c880a5e7":"df[\"product_category_tree\"].apply(lambda x: ast.literal_eval(x)).apply(lambda x: len(x[0].split(\">>\"))).argmax()","af2b6ede":"df[\"product_category_tree\"].iloc[1482]","eb7b690e":"category_levels = (df[\"product_category_tree\"]\n     .apply(lambda x: ast.literal_eval(x))\n     .apply(lambda x: x[0].replace(\"\\\\\",\"\").replace(\"'\",\"\").split(\" >> \"))\n     .apply(pd.Series)\n     .rename(columns= lambda x: \"level_\"+str(x)))","f8585ec6":"df = pd.concat([category_levels, df], axis=1)","35de94be":"df.head()","13f6604a":"print(f\"Total Number of top level categories {df['level_0'].nunique()}\")","bad2e548":"df[\"level_0\"].value_counts()[:10]","db33e3d3":"df[\"level_0\"].value_counts(normalize=True)[:10]","5a5882b2":"df.stb.freq([\"level_0\"])[:10]","2108af66":"df.stb.freq([\"level_0\"],thresh=0.6, other_label=\"other_categories\")","22619f5a":"df.stb.freq([\"level_0\"], thresh=0.6) # without the other label","0a32e5d3":"df[df[\"overall_rating\"] != \"No rating available\"].stb.freq([\"level_0\"], thresh=0.6, other_label=\"other_rated_categories\")","f9138fe0":"df[df[\"overall_rating\"] != \"No rating available\"].stb.freq([\"level_0\"], value = \"discounted_price\", thresh=0.6)","2c0813a8":"(df[df[\"level_0\"].isin([\"Computers\", \"Clothing\", \"Jewellery\"])]\n    .groupby([\"level_0\", \"level_1\"]).agg({\"discounted_price\": [\"sum\"]}).stb.subtotal())","5df5c481":"df.stb.missing()","196577af":"df.stb.freq([\"brand\"], thresh=0.10, style=True)","5be544bd":"In terms of current selling price (i.e discounted price) Computers, Clothing and Jewellery are accumulating more money than other categories like Watches, Footwear,etc.","84a9b17c":"We can obtain the categories WITH RATINGS which contributes to top 60% ","8fe7b35b":"We can request for grand-totals and sub-totals by calling subtotal on the dataframe","831672fb":"#### Loading Data","00dcc3fc":"Now, we have categories and product names as separate columns to play with pandas extension side table.","eaf7eac2":"Returns a dataframe of frequencies with percentage, cumulative count and cumulative percentage calculated.","3b3897d8":"Percentage of contribution of Jewellery and Footwear categories are high but they didn't recieve ratings from the customer which means they are not yet sold much even though they have many different product varities.","5475a564":"When we want to look at the categories that contribures for the top 60% which may required to help us focus on it, we can use \"thresh\" option which filters based on threshold ratio provided with additional option to rename the records outside the threshold using \"other_label\"","cff305a8":"By default, records outside the threshold are grouped as \"Others\"","334a0bad":"Another useful feature of sidetable is that we can generate this frequency datafraame in terms of other column values","9b40054a":"Also, `%` can be suffixed for the percentange columns by styling","4c0a3486":"Top 10 categories out of 265 total categories","ad958f60":"#### Loading Libraries","9116d334":"Other important features is reporting \"missing\" values out of the box"}}