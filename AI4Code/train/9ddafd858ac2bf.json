{"cell_type":{"72fb11ee":"code","2e7be2f0":"code","6e1419ab":"code","c93727c0":"code","82494aef":"code","f0ed9f42":"code","0e771697":"code","ae6fb02c":"code","4e0f4c13":"code","483efa53":"code","7bfa1869":"code","5d358b2c":"code","f02089c6":"code","a5d66617":"code","70724cfd":"code","619b289a":"code","06bcc012":"code","b99becd4":"code","ff28d458":"code","eebc8f19":"code","9794e4bb":"code","f47a0d50":"markdown","6da7ff29":"markdown","afda458a":"markdown"},"source":{"72fb11ee":"# This Python 3 environment comes with many helpful analytics libraries installed\n# It is defined by the kaggle\/python Docker image: https:\/\/github.com\/kaggle\/docker-python\n# For example, here's several helpful packages to load\n\nimport numpy as np # linear algebra\nimport pandas as pd # data processing, CSV file I\/O (e.g. pd.read_csv)\n%matplotlib inline\nimport plotly.graph_objects as go\nimport seaborn as sns\nimport matplotlib.pyplot as plt\nimport plotly\nimport plotly.express as pc\nimport holoviews as hv\nfrom holoviews import opts\nhv.extension('bokeh','matplotlib')\n\n# Input data files are available in the read-only \"..\/input\/\" directory\n# For example, running this (by clicking run or pressing Shift+Enter) will list all files under the input directory\n\nimport os\nfor dirname, _, filenames in os.walk('\/kaggle\/input'):\n    for filename in filenames:\n        print(os.path.join(dirname, filename))\n\n# You can write up to 5GB to the current directory (\/kaggle\/working\/) that gets preserved as output when you create a version using \"Save & Run All\" \n# You can also write temporary files to \/kaggle\/temp\/, but they won't be saved outside of the current session\n","2e7be2f0":"data2020 = pd.read_csv('\/kaggle\/input\/world-happiness-report\/2020.csv')\ndata2019 = pd.read_csv('\/kaggle\/input\/world-happiness-report\/2019.csv')\ndata2018 = pd.read_csv('\/kaggle\/input\/world-happiness-report\/2018.csv')\ndata2017 = pd.read_csv('\/kaggle\/input\/world-happiness-report\/2017.csv')\ndata2016 = pd.read_csv('\/kaggle\/input\/world-happiness-report\/2016.csv')\ndata2015 = pd.read_csv('\/kaggle\/input\/world-happiness-report\/2015.csv')","6e1419ab":"data2015['year']=2015\ndata2016['year']=2016\ndata2017['year']=2017\ndata2018['year']=2018\ndata2019['year']=2019\ndata2020['year']=2020","c93727c0":"data2017.rename(columns={'Economy  GDP per Capita':'Economy (GDP per Capita)'},inplace=True)\ndata2018.rename(columns={'Country or region':'Country','Score':'Happiness Score','GDP per Capita':'Economy (GDP per Capita)'},inplace=True)\ndata2019.rename(columns={'Country or region':'Country','Score':'Happiness Score','Economy  GDP per Capita':'Economy (GDP per Capita)'},inplace=True)\ndata2020.rename(columns={'Country name':'Country','Ladder score':'Happiness Score','Regional indicator':'Region','Logged GDP per capita':'Economy (GDP per capita)'},inplace=True)","82494aef":"data2015.set_index('Country',inplace=True)\ndata2016.set_index('Country',inplace=True)\ndata2017.set_index('Country',inplace=True)\ndata2018.set_index('Country',inplace=True)\ndata2019.set_index('Country',inplace=True)\ndata2020.set_index('Country',inplace=True)","f0ed9f42":"for c in data2017.index:\n    if c in data2016.index:\n        data2017.loc[c,'Region'] = data2016.loc[c,'Region']\n    elif(c.find('China')!=-1):\n        data2017.loc[c,'Region'] = 'Eastern Asia'\n    else:\n        data2017.loc[c,'Region'] = 'Middle East and Northern Africa'\n        \n        ","0e771697":"data2015.drop(columns='Standard Error',axis=1,inplace=True)\ndata2016.drop(columns=['Lower Confidence Interval','Upper Confidence Interval'],axis=1,inplace=True)\ndata2017.drop(columns=['Whisker.low','Whisker.high'],axis=1,inplace=True)\ndata2020.drop(columns=['Standard error of ladder score', 'upperwhisker', 'lowerwhisker'],axis=1,inplace=True)\ndata2017.columns = [i.replace('.',' ') for i in data2017.columns]","ae6fb02c":"dataCombined = (data2015.append(data2016)).append(data2017)\ndataCombined = (dataCombined.append(data2018)).append(data2019)\ndataCombined = dataCombined.append(data2020)","4e0f4c13":"dataCombined.fillna(value=0,inplace=True)","483efa53":"dataCombined.reset_index()","7bfa1869":"l = dataCombined.reset_index().columns\ncols = l[2:11].append(l[12:]) #Exclude Country,Region and Year\ndataFinal = pd.pivot_table(dataCombined,values=cols,index=['Country','Region','year'],aggfunc=np.mean)","5d358b2c":"dataFinal.reset_index(inplace=True)","f02089c6":"dataFinal.sort_values(by='year',ascending=True,inplace=True)","a5d66617":"\nfig = pc.scatter_geo(dataFinal,\n    locations = dataFinal['Country'],\n    locationmode = \"country names\",\n    hover_data = ['Country','Happiness Score','year'],\n    size='Happiness Score',\n    color='Happiness Score',animation_frame='year',width=1200,height=800)\n\nfig.update_layout(title = dict(text=\"World Happiness Report(2015-2020)\",y=0.9,x=0.5,xanchor='center',yanchor='top'),geo=dict(\n        showframe=False,\n        showcoastlines=False,\n        projection_type='equirectangular'),margin=dict(l=20, r=50, t=110, b=20),font=dict(size=15,color='Blue'))\n\n\nfig.show()","70724cfd":"dataFinal['year_rank'] = dataFinal.groupby('year')['Happiness Score'].rank(ascending=False)\ndataFinal.sort_values(['year', 'year_rank'],inplace=True)","619b289a":"d1 = dataFinal[(dataFinal['year']==2015) & (dataFinal['year_rank']<11)]\nd2 = dataFinal[(dataFinal['year']==2016) & (dataFinal['year_rank']<11)]\nd3 = dataFinal[(dataFinal['year']==2017) & (dataFinal['year_rank']<11)]\nd4 = dataFinal[(dataFinal['year']==2018) & (dataFinal['year_rank']<11)]\nd5 = dataFinal[(dataFinal['year']==2019) & (dataFinal['year_rank']<11)]\nd6 = dataFinal[(dataFinal['year']==2020) & (dataFinal['year_rank']<11)]\nd1 = d1[['Country','Happiness Score','year','year_rank']].sort_values(by='year_rank')\nd2 = d2[['Country','Happiness Score','year','year_rank']].sort_values(by='year_rank')\nd3 = d3[['Country','Happiness Score','year','year_rank']].sort_values(by='year_rank')\nd4 = d4[['Country','Happiness Score','year','year_rank']].sort_values(by='year_rank')\nd5 = d5[['Country','Happiness Score','year','year_rank']].sort_values(by='year_rank')\nd6 = d6[['Country','Happiness Score','year','year_rank']].sort_values(by='year_rank')\n","06bcc012":"top10 = d1.append(d2).append(d3)\ntop10 = top10.append(d4).append(d5).append(d6)","b99becd4":"b1=dataFinal[(dataFinal['year']==2015)].tail(10)\nb2=dataFinal[(dataFinal['year']==2016)].tail(10)\nb3=dataFinal[(dataFinal['year']==2017)].tail(10)\nb4=dataFinal[(dataFinal['year']==2018)].tail(10)\nb5=dataFinal[(dataFinal['year']==2019)].tail(10)\nb6=dataFinal[(dataFinal['year']==2020)].tail(10)\n\nb1 = b1[['Country','Happiness Score','year','year_rank']].sort_values(by='year_rank')\nb2 = b2[['Country','Happiness Score','year','year_rank']].sort_values(by='year_rank')\nb3 = b3[['Country','Happiness Score','year','year_rank']].sort_values(by='year_rank')\nb4 = b4[['Country','Happiness Score','year','year_rank']].sort_values(by='year_rank')\nb5 = b5[['Country','Happiness Score','year','year_rank']].sort_values(by='year_rank')\nb6 = b6[['Country','Happiness Score','year','year_rank']].sort_values(by='year_rank')","ff28d458":"bot10 = b1.append(b2).append(b3)\nbot10 = bot10.append(b4).append(b5).append(b6)","eebc8f19":"key_dimensions   = [('year', 'Year'), ('Country', 'Country')]\nvalue_dimensions = [('Happiness Score', 'Happiness Score')]\nmacro = hv.Table(top10, key_dimensions, value_dimensions)\nbars = macro.to.bars(['year', 'Country'], 'Happiness Score', [])\nbars.opts(\n    opts.Bars(color=hv.Cycle('Category20'), show_legend=False, stacked=True, \n              tools=['hover'], width=600,height=600, xrotation=90,title=\"Happy Countries Scores\"))","9794e4bb":"key_dimensions   = [('year', 'Year'), ('Country', 'Country')]\nvalue_dimensions = [('Happiness Score', 'Happiness Score')]\nmacro = hv.Table(bot10, key_dimensions, value_dimensions)\nbars = macro.to.bars(['year', 'Country'], 'Happiness Score', [])\nbars.opts(\n    opts.Bars(color=hv.Cycle('Category20'), show_legend=False, stacked=True, \n              tools=['hover'], width=600, xrotation=90,title='Low Happiness Scores'))","f47a0d50":"# **Countries with low scores**","6da7ff29":"# **Countries with Top Happiness Scores**","afda458a":"# **World Happiness Scores (2015-2020)**"}}