{"cell_type":{"bc6c9950":"code","9e5cd000":"code","83529aa3":"code","02835c5e":"code","3829ec0a":"code","a836030a":"code","59e7b5bb":"code","db239f71":"code","9c1651d7":"code","3562989e":"code","cf77ab17":"code","3d77cf0c":"code","8737fd91":"code","0d1c5fb1":"code","e7099928":"code","332e210a":"code","a84662b3":"code","cca94669":"code","fcff769e":"code","d561db6b":"code","853a87f6":"markdown","5311d916":"markdown","8ed462c2":"markdown","604a4d5c":"markdown","2ff777ae":"markdown","b2102d9f":"markdown","0efd0f15":"markdown","aeaafd90":"markdown","65d97128":"markdown","0b5b6773":"markdown","39e5c87c":"markdown","459ae45c":"markdown","5431296c":"markdown","44dd5eda":"markdown"},"source":{"bc6c9950":"import numpy as np\nimport pandas as pd\nimport matplotlib.pyplot as plt\nfrom sklearn import preprocessing\nfrom sklearn.preprocessing import StandardScaler\nfrom sklearn.model_selection import train_test_split\nimport seaborn as sns\nfrom keras.layers import Dense, BatchNormalization, Dropout, LSTM\nfrom keras.models import Sequential\nfrom tensorflow.keras.utils import to_categorical\nfrom keras import callbacks\nfrom sklearn.metrics import precision_score, recall_score, confusion_matrix, classification_report, accuracy_score, f1_score","9e5cd000":"#Datasetten veri al\u0131yoruz\ndata = pd.read_csv(\"..\/input\/heart-failure-clinical-data\/heart_failure_clinical_records_dataset.csv\")\ndata.head()","83529aa3":"data.info()\n","02835c5e":"#\u00f6ncelikle hedefi de\u011ferlendirelim ve verilerimizin dengesiz olup olmad\u0131\u011f\u0131n\u0131 \u00f6\u011frenelim\ncols= [\"#6daa9f\",\"#774571\"]\nsns.countplot(x= data[\"DEATH_EVENT\"], palette= cols)","3829ec0a":"#T\u00fcm \u00f6zelliklerin bir korelasyon matrisini inceleyelim\ncmap = sns.diverging_palette(275,150,  s=40, l=65, n=9)\ncorrmat = data.corr()\nplt.subplots(figsize=(18,18))\nsns.heatmap(corrmat,cmap= cmap,annot=True, square=True);","a836030a":"#Hastan\u0131n ya\u015f\u0131 en \u00e7ok ili\u015fkili \u00f6zelliklerden birisidir demi\u015ftik. Burada onu inceliyoruz.\nplt.figure(figsize=(20,12))\n#colours =[\"#774571\",\"#b398af\",\"#f1f1f1\" ,\"#afcdc7\", \"#6daa9f\"]\nDays_of_week=sns.countplot(x=data['age'],data=data, hue =\"DEATH_EVENT\",palette = cols)\nDays_of_week.set_title(\"Distribution Of Age\", color=\"#774571\")","59e7b5bb":"# \u00d6l\u00fcmler ile Ya\u015f\u0131n, mcg\/L cinsinden kandaki kreatin fosfokinaz d\u00fczeyinin, Ejeksiyon fraksiyonun, Kiloplatelet\/mL cinsinden kan\u0131n trombosit say\u0131s\u0131n\u0131n, Kandaki kreatinin d\u00fczeyinin, mEq\/L cinsinden kandaki serum sodyum seviyesiyle ili\u015fkisini inceliyoruz. \n\nfeature = [\"age\",\"creatinine_phosphokinase\",\"ejection_fraction\",\"platelets\",\"serum_creatinine\",\"serum_sodium\", \"time\"]\nfor i in feature:\n    plt.figure(figsize=(8,8))\n    sns.swarmplot(x=data[\"DEATH_EVENT\"], y=data[i], color=\"black\", alpha=0.5)\n    sns.boxenplot(x=data[\"DEATH_EVENT\"], y=data[i], palette=cols)\n    plt.show()","db239f71":"sns.kdeplot(x=data[\"time\"], y=data[\"age\"], hue =data[\"DEATH_EVENT\"], palette=cols)\n","9c1651d7":"data.describe().T\n","3562989e":"#\u00d6zelliklere X ve hedefe y olarak de\u011fer atama\nX=data.drop([\"DEATH_EVENT\"],axis=1)\ny=data[\"DEATH_EVENT\"]","cf77ab17":"#\u00d6zelliklerimiz i\u00e7in standart bir scaler kuruyoruz\ncol_names = list(X.columns)\ns_scaler = preprocessing.StandardScaler()\nX_df= s_scaler.fit_transform(X)\nX_df = pd.DataFrame(X_df, columns=col_names)   \nX_df.describe().T","3d77cf0c":"#\u00d6l\u00e7eklendirilmi\u015f \u00f6zelliklere bakma\ncolours =[\"#774571\",\"#b398af\",\"#f1f1f1\" ,\"#afcdc7\", \"#6daa9f\"]\nplt.figure(figsize=(20,10))\nsns.boxenplot(data = X_df,palette = colours)\nplt.xticks(rotation=90)\nplt.show()","8737fd91":"#Spliting test ve e\u011fitim setleri\nX_train, X_test, y_train,y_test = train_test_split(X_df,y,test_size=0.25,random_state=7)","0d1c5fb1":"early_stopping = callbacks.EarlyStopping(\n    min_delta=0.001, # iyile\u015ftirme olarak say\u0131lacak minimum de\u011fi\u015fiklik miktar\u0131\n    patience=20, # durmadan \u00f6nce ka\u00e7 epoch beklenmeli\n    restore_best_weights=True)\n\n# ANN'yi ba\u015flatma\nmodel = Sequential()\n\n# Katmanlar\u0131\nmodel.add(Dense(units = 16, kernel_initializer = 'uniform', activation = 'relu', input_dim = 12))\nmodel.add(Dense(units = 8, kernel_initializer = 'uniform', activation = 'relu'))\nmodel.add(Dropout(0.25))\nmodel.add(Dense(units = 4, kernel_initializer = 'uniform', activation = 'relu'))\nmodel.add(Dropout(0.5))\nmodel.add(Dense(units = 1, kernel_initializer = 'uniform', activation = 'sigmoid'))\nfrom tensorflow.keras.optimizers import SGD\n# ANN'N\u0130N DERLENMES\u0130\nmodel.compile(optimizer = 'adam', loss = 'binary_crossentropy', metrics = ['accuracy'])\n\n# ANN'N\u0130N E\u011e\u0130T\u0130LMES\u0130\nhistory = model.fit(X_train, y_train, batch_size = 32, epochs = 500,callbacks=[early_stopping], validation_split=0.2)","e7099928":"val_accuracy = np.mean(history.history['val_accuracy'])\nprint(\"\\n%s: %.2f%%\" % ('val_accuracy', val_accuracy*100))","332e210a":"history_df = pd.DataFrame(history.history)\n\nplt.plot(history_df.loc[:, ['loss']], \"#6daa9f\", label='Training loss')\nplt.plot(history_df.loc[:, ['val_loss']],\"#774571\", label='Validation loss')\nplt.title('Training and Validation loss')\nplt.xlabel('Epochs')\nplt.ylabel('Loss')\nplt.legend(loc=\"best\")\n\nplt.show()","a84662b3":"history_df = pd.DataFrame(history.history)\n\nplt.plot(history_df.loc[:, ['accuracy']], \"#6daa9f\", label='Training accuracy')\nplt.plot(history_df.loc[:, ['val_accuracy']], \"#774571\", label='Validation accuracy')\n\nplt.title('Training and Validation accuracy')\nplt.xlabel('Epochs')\nplt.ylabel('Accuracy')\nplt.legend()\nplt.show()","cca94669":"# Test seti sonu\u00e7lar\u0131n\u0131 tahmin etme\ny_pred = model.predict(X_test)\ny_pred = (y_pred > 0.5)\nnp.set_printoptions()","fcff769e":"# Confusion matrisi\ncmap1 = sns.diverging_palette(275,150,  s=40, l=65, n=6)\nplt.subplots(figsize=(12,8))\ncf_matrix = confusion_matrix(y_test, y_pred)\nsns.heatmap(cf_matrix\/np.sum(cf_matrix), cmap = cmap1, annot = True, annot_kws = {'size':15})","d561db6b":"print(classification_report(y_test, y_pred))","853a87f6":"* **VER\u0130 \u00d6N\u0130\u015eLEME**\n* Veri \u00d6ni\u015fleme ile ilgili kodlar\u0131m\u0131z\u0131 bu sat\u0131rlarda ger\u00e7ekle\u015ftirece\u011fiz.\n* Veri analizine dayal\u0131 olarak anomal de\u011ferlerin \u00e7\u0131kar\u0131lmas\u0131\n* \u00d6zelliklere X ve hedefe Y olarak de\u011fer atama\n* \u00d6zelliklerin \u00f6l\u00e7eklendirmesi \n* Training set ve test set olarak ay\u0131r\u0131yoruz\n","5311d916":"* **VER\u0130 ANAL\u0130Z\u0130**\n* Veri Analiz ve G\u00f6rselle\u015ftirme\n* Hedef niteli\u011finin say\u0131m grafi\u011fiyle ba\u015fl\u0131yoruz. \u00c7e\u015fitli nitelikleri korelasyon matrisiyle devam ediyoruz.","8ed462c2":"**> Veri k\u00fcmemizde anomaliler g\u00f6r\u00fcyoruz. Hen\u00fcz bunlara dokunmuyoruz. \nYine de daha iyi istatistiklerle sonu\u00e7lanabiliriz. Bu durumda, t\u0131bbi verilerle, ayk\u0131r\u0131 de\u011ferler \u00f6nemli bir karar verme fakt\u00f6r\u00fc olabilir. Ya\u015f ve zaman kdeplotunu yani yo\u011funluk grafi\u011fini tekrar inceliyoruz.**","604a4d5c":"* **MODEL BU\u0130LD\u0130NG**\n* Bu projede bir yapay sinir a\u011f\u0131 kuruyoruz.\n> * Model olu\u015fturmada a\u015fa\u011f\u0131daki ad\u0131mlar yer al\u0131r.\n1. ANN'nin ba\u015flat\u0131lmas\u0131\n2. Katman ekleyerek tan\u0131mlama\n3. ANN'n\u0131n Derlenmesi\n4. ANN'yi e\u011fitilmesi","2ff777ae":"> **Epoch ile training ve validasyonun do\u011frulu\u011funu tespit ederiz**","b2102d9f":"# Kalp Yetmezli\u011fi Nedir?\n**Kalp yetmezli\u011fi, kalbinizin \u00e7e\u015fitli sebepler nedeniyle zarar g\u00f6rerek v\u00fccuda ihtiyac\u0131 \nolan kan\u0131 yeterli miktarda g\u00f6nderememesi olarak tan\u0131mlanabilir.\nEn s\u0131k kalp yetmezli\u011fi sebebi kalp kas\u0131n\u0131n kalp krizi nedeniyle zarar g\u00f6rerek kas\u0131lamamas\u0131d\u0131r. \nAncak uzun s\u00fcren hipertansiyon, kalp kapak hastal\u0131klar\u0131, \ndo\u011fumsal kalp kas hastal\u0131klar\u0131 gibi sebepler ile de kalp yetmezli\u011fi geli\u015fmektedir.\nKalp yetmezli\u011fi kronik, ilerleyici bir hastal\u0131kt\u0131r. \u0130la\u00e7 tedavisi ile kalp yetmezli\u011fi bulgu ve \nbelirtileri kontrol alt\u0131na al\u0131nabilir, hatta baz\u0131 \ndurumlarda zamanla kalp kas\u0131 g\u00fc\u00e7lenebilir.**","0efd0f15":"**> Veri y\u00fckleme**","aeaafd90":"**> Gerekli k\u00fct\u00fcphaneleri ekliyoruz.**","65d97128":"> S\u0131rada ya\u015f say\u0131m grafi\u011fi var.","0b5b6773":"**SONU\u00c7LAR**\n* Test seti test ediliyor\n* Confusioun matrisi de\u011ferlendirilmesi\n* S\u0131n\u0131fland\u0131rma raporu de\u011ferlendirilmesi\n","39e5c87c":"> Dikkat edilmesi gereken nokta, verilerde bir dengesizlik olmas\u0131d\u0131r.","459ae45c":"Data Hakk\u0131nda A\u00e7\u0131klamalar\n\n1. age: Hastan\u0131n ya\u015f\n2. anaemia: Hastan\u0131n hemoglobini normal aral\u0131\u011f\u0131n alt\u0131ndaysa\n3. serum_sodium: Miliekivalan\/L cinsinden kandaki serum sodyum seviyesi\n4. sex: Hasta cinsiyeti\n5. smoking: Sigara i\u00e7ip i\u00e7meme durumu\n6. time: Hastan\u0131n ay baz\u0131nda hastal\u0131k i\u00e7in takip ziyareti zaman\u0131d\u0131r.\n7. DEATH_EVENT: Hastan\u0131n \u00f6l\u00fcm durumu\n8. ejection_fraction: Ejeksiyon fraksiyonu, her kas\u0131lma ile sol ventrik\u00fcl\u00fcn ne kadar kan pompalad\u0131\u011f\u0131n\u0131n bir \u00f6l\u00e7\u00fcm\u00fcd\u00fcr.\n9. high_blood_pressure: Hastan\u0131n hipertansiyon durumu\n10. platelets: Kiloplatelet\/mL cinsinden kan\u0131n trombosit say\u0131s\u0131\n11. serum_creatinine: Kandaki serum kreatinin d\u00fczeyi mg\/dL olarak\n12. creatinine_phosphokinase: mcg\/L cinsinden kandaki kreatin fosfokinaz d\u00fczeyi\n13. diabetes: Hastan\u0131n diabet durumu\n\n","5431296c":"**\u00dcST\u00dcNDE DURMAMIZ GEREKENLER**\n* Kardiyovask\u00fcler sorunlu ilk tan\u0131 ve tedavi herhangi bir \u00f6l\u00fcm olas\u0131l\u0131\u011f\u0131n\u0131 azaltt\u0131\u011f\u0131 i\u00e7in hastan\u0131n hastal\u0131k i\u00e7in takip ziyaretinin zaman\u0131 \u00e7ok \u00f6nemlidir. \n* Ejeksiyon fraksiyonu ikinci en \u00f6nemli \u00f6zelliktir. Temelde kalbin etkinli\u011fi oldu\u011fu i\u00e7in olduk\u00e7a beklenir.\n* Hastan\u0131n ya\u015f\u0131 en \u00e7ok ili\u015fkili \u00fc\u00e7\u00fcnc\u00fc \u00f6zelliktir. Ya\u015flanmayla birlikte kalbin i\u015fleyi\u015fi azald\u0131\u011f\u0131 i\u00e7in daha sonra, ya\u015f say\u0131m\u0131 grafi\u011fini inceleyece\u011fiz.","44dd5eda":"> **Epochlar s\u00fcresince e\u011fitim ve do\u011frulama kayb\u0131n\u0131 planlama**"}}