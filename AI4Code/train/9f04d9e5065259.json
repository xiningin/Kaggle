{"cell_type":{"6ecfa662":"code","0b24296f":"code","c1c123b7":"code","c36291d6":"code","eeef523b":"code","5f6146db":"code","cd8fe2b2":"code","bd408eee":"code","085d23f8":"code","2b8d2d61":"code","880d2e8d":"code","ada4dc96":"code","260e1bda":"code","7b7f8b0a":"code","a52eaf70":"code","778b4061":"code","a7157f19":"code","94e79d8e":"code","4b963050":"code","f7a71af8":"code","bacdb97b":"code","5eb814a4":"code","6ffe05c9":"code","c93625f9":"code","b391219d":"code","d78b9eb2":"code","fd52c79f":"code","abbe972d":"code","3bd801fa":"code","d63c9a67":"code","5bb527a8":"code","d10cdd67":"code","d752bc8c":"code","1755753d":"markdown","7d30ac7e":"markdown","5ab3164a":"markdown","ed290f79":"markdown","5abf25ce":"markdown","aeffdee7":"markdown","25e947ab":"markdown","dbef81eb":"markdown","bce23c87":"markdown","697d3758":"markdown","e5e26813":"markdown","539d18be":"markdown","b363c2b1":"markdown","556fd9b7":"markdown"},"source":{"6ecfa662":"import numpy as np # linear algebra\nimport pandas as pd # data processing\nimport string\n\nimport nltk\nfrom nltk.corpus import stopwords\nfrom nltk.tokenize import word_tokenize\nnltk.download('stopwords')\nnltk.download('punkt')\n\nimport re #regex\nfrom textblob import TextBlob #sentimate analysis\nfrom textblob import Word\nfrom nltk.probability import FreqDist\n\n#graphs\nimport matplotlib.pyplot as plt\nfrom wordcloud import WordCloud\nimport plotly.graph_objects as go\n\nimport os\nfor dirname, _, filenames in os.walk('\/kaggle\/input'):\n    for filename in filenames:\n        print(os.path.join(dirname, filename))","0b24296f":"#data importation\ntrump_data = pd.read_csv('\/kaggle\/input\/us-election-2020-tweets\/hashtag_donaldtrump.csv', lineterminator='\\n')#trump tweets dataset\nbiden_data =pd.read_csv('\/kaggle\/input\/us-election-2020-tweets\/hashtag_joebiden.csv', lineterminator='\\n')#biden tweets dataset","c1c123b7":"trump_data.head()","c36291d6":"trump_data.shape ","eeef523b":"trump_data.describe()","5f6146db":"trump_data.info()","cd8fe2b2":"biden_data.head()","bd408eee":"biden_data.shape","085d23f8":"biden_data.describe()","2b8d2d61":"biden_data.info()","880d2e8d":"#removing columns unnecessary for analysis\ntrump_data = trump_data.drop(columns=['tweet_id', 'collected_at', 'user_description'])\nbiden_data = biden_data.drop(columns=['tweet_id', 'collected_at', 'user_description'])","ada4dc96":"#add a column specifying which dataset the tweet belongs to\ntrump_data.loc[:,'candidate'] = 'Trump'\nbiden_data.loc[:,'candidate'] = 'Biden'","260e1bda":"trump_data.sort_values(by='created_at') #sort by creation times\ntrump_data.head()","7b7f8b0a":"biden_data.sort_values(by= 'created_at') #sort by creation time\nbiden_data.head()","a52eaf70":"#make country name consistent\nd = {\"United States of America\":\"United States\"}\ntrump_data['country'].replace(d, inplace=True)\nbiden_data['country'].replace(d, inplace=True)\n\ntrump_data = trump_data.loc[trump_data['country'] == \"United States\"]\nbiden_data = biden_data.loc[biden_data['country'] == \"United States\"]\n\n\n#drop the columns with null values\ntrump_data = trump_data.dropna()\nbiden_data = biden_data.dropna()","778b4061":"trump_data.shape","a7157f19":"trump_data1 = trump_data.groupby(['state']).count().tweet #group by states\ntest1 = pd.DataFrame(trump_data1)\nbiden_data1 = biden_data.groupby(['state']).count().tweet\ntest2 = pd.DataFrame(biden_data1)\n\nstate_data = pd.merge(test1, test2, on= 'state') #join the two tables using the state\nstate_data = state_data.rename(columns={'tweet_x': 'Trump Tweets', 'tweet_y': 'Biden Tweets'})\nstate_data.head()","94e79d8e":"state_data.plot(kind='bar',title='Number of Tweets per State', figsize=(20,10), width = 1)\nplt.xlabel('State')\nplt.ylabel('Number of Tweets')","4b963050":"#group by sources, put count in descending order, and select top 5 sources\ntrump_sources = trump_data.groupby(['source']).count().tweet.sort_values(ascending=False)[:6]\nsource1 = pd.DataFrame(trump_sources)\nbiden_sources = biden_data.groupby(['source']).count().tweet.sort_values(ascending=False)[:6]\nsource2 = pd.DataFrame(biden_sources)\nsource_data = pd.merge(source1, source2, on= 'source')\nsource_data\nsource_data = source_data.rename(columns={'tweet_x': 'Trump Tweets', 'tweet_y': 'Biden Tweets'})\nsource_data.head()","f7a71af8":"source_data.plot(kind='bar',title='Number of Tweets per Source', figsize=(20,10), width = 0.75)\nplt.xlabel('Source')\nplt.ylabel('Number of Tweets')","bacdb97b":"#function to get rid of hashtags, @, and other special characters in the tweets\ndef tweet_cleaning(tweet):\n    tweet = tweet.lower()\n    to_remove = r'\\d+|http?\\S+|[^A-Za-z0-9]+'\n    tweet = re.sub(to_remove, ' ', tweet) \n    \n    stop_words = set(stopwords.words('english'))\n    word_tokens = word_tokenize(tweet)\n\n    filtered = []\n    for w in word_tokens:\n        if w not in stop_words:\n            filtered.append(w)\n    \n    return filtered\n\n#sample to demonstrate the function \nsample = \"This is is is a sample sentence to test if stop words works\"\ntweet_cleaning(sample)","5eb814a4":"trump_tweets = trump_data['tweet'].apply(lambda x: tweet_cleaning(x))\nbiden_tweets = biden_data['tweet'].apply(lambda x: tweet_cleaning(x))","6ffe05c9":"trump_tweets.head()","c93625f9":"biden_tweets.head()","b391219d":"#functions that will assist in the sentiment analysis\ndef subjectivity(tweet):\n    return TextBlob(tweet).sentiment.subjectivity\ndef polarity(tweet):\n    return TextBlob(tweet).sentiment.polarity\ndef conclusion(val):\n    if val<0:\n        return 'negative'\n    elif val==0:\n        return 'neutral'\n    else:\n        return 'positive'","d78b9eb2":"subjectivity_col = trump_data['tweet'].apply(subjectivity)\npolarity_col = trump_data['tweet'].apply(polarity)\nanalysis_col = polarity_col.apply(conclusion)\n\ndf = {'Tweet': trump_tweets, 'Subjectivity': subjectivity_col, 'Polarity': polarity_col, 'Sentiment': analysis_col}\nsentiment_analysis = pd.DataFrame(df)\nsentiment_analysis","fd52c79f":"neg_num = sentiment_analysis[sentiment_analysis['Sentiment']=='negative'].Sentiment.count()\nneu_num = sentiment_analysis[sentiment_analysis['Sentiment']=='neutral'].Sentiment.count()\npos_num = sentiment_analysis[sentiment_analysis['Sentiment']=='positive'].Sentiment.count()\n\nprint('Sentiment Breakdown: Trump Tweets')\nprint('Negative Tweets: ', neg_num)\nprint('Neutral Tweets: ', neu_num)\nprint('Positive Tweets: ', pos_num)","abbe972d":"num_sentiment = pd.DataFrame({'Tweet Sentiment': ['Negative', 'Neutral', 'Positive'], 'Number of Tweets': [neg_num, neu_num, pos_num]})\ntrump_plot = num_sentiment.plot.bar(x='Tweet Sentiment', y='Number of Tweets', title='Sentiment Analysis for Trump Tweets', color = 'red', rot=0)\nplt.ylabel('Number of Tweets')\ntrump_plot","3bd801fa":"subjectivity_col = biden_data['tweet'].apply(subjectivity)\npolarity_col = biden_data['tweet'].apply(polarity)\nanalysis_col = polarity_col.apply(conclusion)\n\ndf = {'Tweet': biden_tweets, 'Subjectivity': subjectivity_col, 'Polarity': polarity_col, 'Sentiment': analysis_col}\nsentiment_analysis2 = pd.DataFrame(df)\nsentiment_analysis2","d63c9a67":"neg_num2 = sentiment_analysis2[sentiment_analysis2['Sentiment']=='negative'].Sentiment.count()\nneu_num2 = sentiment_analysis2[sentiment_analysis2['Sentiment']=='neutral'].Sentiment.count()\npos_num2 = sentiment_analysis2[sentiment_analysis2['Sentiment']=='positive'].Sentiment.count()\n\nprint('Sentiment Breakdown: Biden Tweets')\nprint('Negative Tweets: ', neg_num2)\nprint('Neutral Tweets: ', neu_num2)\nprint('Positive Tweets: ', pos_num2)","5bb527a8":"num_sentiment2 = pd.DataFrame({'Tweet Sentiment': ['Negative', 'Neutral', 'Positive'], 'Number of Tweets': [neg_num2, neu_num2, pos_num2]})\nbiden_plot = num_sentiment.plot.bar(x='Tweet Sentiment', y='Number of Tweets', title='Sentiment Analysis for Biden Tweets', color=\n                                     'blue', rot=0)\nplt.ylabel('Number of Tweets')\nbiden_plot","d10cdd67":"overall_sent = pd.DataFrame({'Trump Tweets': [neg_num, neu_num, pos_num],\n                             'Biden Tweets': [neg_num2, neu_num2, pos_num2]}, \n                              index= ['Negative', 'Neutral', 'Positive'])\noverall_sent","d752bc8c":"overall_sent.plot(kind='bar',title='Sentimental Analysis for All Tweets', figsize=(10,7))\nplt.xlabel('Sentiment')\nplt.ylabel('Number of Tweets')","1755753d":"# Sentiment Analysis","7d30ac7e":"**Biden Tweets**","5ab3164a":"# Visualization by Top 5 Sources","ed290f79":"# Cleaning the data","5abf25ce":"# Importing the datasets","aeffdee7":"# Initial look: Trump Tweets","25e947ab":"This notebook will explore and extract information from tweets regarding the 2020 US election. The data used is tweets collected using the Twitter API statuses_lookup and snsscrape with #DonaldTrump and #JoeBiden used as keywords. The tweets were collected from 15.10.2020 to 08.11.2020.\nWe will explore information such as the distribution of tweets by state and source; the sentiment of tweets for each candidate (negative, neutral, or positive); and the overall sentiment of tweets.","dbef81eb":"**Trump Tweets**","bce23c87":"# Overall Sentiment","697d3758":"# Visualization by States","e5e26813":"# Cleaning the tweets","539d18be":"# Loading the necessary libraries","b363c2b1":"# Visualization and Sentimental Analysis of tweets surrounding the 2020 US Election","556fd9b7":"# Initial Look: Biden Tweets"}}