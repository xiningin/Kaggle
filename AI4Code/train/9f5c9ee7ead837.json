{"cell_type":{"d74a3ecc":"code","0e251ed7":"code","cadb8aa8":"code","57539d16":"code","1d062d77":"code","e702724a":"code","d74992f0":"code","9efb90b6":"code","c728718a":"code","3dcba268":"code","66e22c68":"code","00e155d9":"code","ad32d845":"code","edef0748":"code","580ef077":"code","d5c199d3":"markdown","985a81e5":"markdown","6a36c3cb":"markdown","834b30c3":"markdown","419ee37c":"markdown","b14998b7":"markdown","b0682a3a":"markdown","03a33aab":"markdown","eea77118":"markdown","16202a08":"markdown","fe2a2a56":"markdown","e8c393c2":"markdown","d3be63a4":"markdown","fd6caadc":"markdown","bf2f3a94":"markdown","6ae16bdd":"markdown","81d3958a":"markdown","d8d6058c":"markdown","502189b8":"markdown","05f3ea83":"markdown"},"source":{"d74a3ecc":"import matplotlib.pyplot as plt\nimport numpy as np\nimport seaborn as sns\nfrom math import pi, exp, sqrt\nfrom scipy import integrate","0e251ed7":"heights = [128, 165, 170, 180, 159, 185, 190, 172, 169, 163, 160, 160, 150, 135, 149]","cadb8aa8":"fig, ax = plt.subplots(1, 3)\nfig.tight_layout()\nsns.histplot(heights, bins=5, ax=ax[0])\nsns.histplot(heights, bins=10, ax=ax[1])\nsns.histplot(heights, bins=15, ax=ax[2])","57539d16":"mean = np.mean(heights)\nstd = np.std(heights)","1d062d77":"def pdf_normal(x, mean, std):\n  return exp(-0.5*((x-mean)\/std)**2)\/(sqrt(2*pi)*std)","e702724a":"x = np.linspace(50, 250, num=300)\ny = [pdf_normal(xi, mean, std) for xi in x]  \n\nplt.plot(x, y)","d74992f0":"height_a = 50\nheight_b = 60\n\nprint(\"Prob de altura = {}: {}\".format(height_a, pdf_normal(height_a, mean, std)))\nprint(\"Prob de altura = {}: {}\".format(height_b, pdf_normal(height_b, mean, std)))","9efb90b6":"def cdf_normal(x, mean, std):\n    return integrate.quad(pdf_normal,0,x, args=(mean, std))\n\nplt.plot(x, [cdf_normal(xi, mean, std)[0] for xi in x])","c728718a":"a = 140\nb = 190\n\nintegral = integrate.quad(pdf_normal, a, b, args=(mean, std))\nprint(\"Probabilidade de uma altura estar entre {} e {}: {}\".format(a, \n                                                                   b,\n                                                                   integral[0]))\nprint(\"Erro: {}\".format(integral[1]))","3dcba268":"a = -np.inf\nb = np.inf\n\nintegral = integrate.quad(pdf_normal, a, b, args=(mean, std))\nprint(\"Probabilidade de uma altura estar entre {} e {}: {}\".format(a, \n                                                                   b,\n                                                                   integral[0]))\nprint(\"Erro: {}\".format(integral[1]))","66e22c68":"a = mean-std\nb = mean+std\n\nintegral = integrate.quad(pdf_normal, a, b, args=(mean, std))\nprint(\"Probabilidade de uma altura estar entre {} e {}: {}\".format(round(a), \n                                                                   round(b),\n                                                                   round(integral[0], ndigits=4)))\nprint(\"Erro: {}\".format(integral[1]))","00e155d9":"plt.plot(x, [cdf_normal(xi, mean, std)[0] for xi in x])\nplt.plot(x, y)\nplt.axvline(x=mean-std, color='red')\nplt.axvline(x=mean+std, color='red')","ad32d845":"import scipy.stats as stats\n\nx = np.linspace(50, 250, num=300)\ny = stats.norm.pdf(x, mean, std)\n\nplt.plot(x,y)\nplt.show()         ","edef0748":"probs = stats.norm.cdf(x, mean, std)\n\nplt.plot(x, probs)\nplt.show()         ","580ef077":"a = mean-std\nb = mean+std\n\nintegral = integrate.quad(stats.norm.pdf, a, b, args=(mean, std))\nprint(\"Probabilidade de uma altura estar entre {} e {}: {}\".format(round(a), \n                                                                   round(b),\n                                                                   round(integral[0], ndigits=4)))\nprint(\"Erro: {}\".format(integral[1]))","d5c199d3":"**Defini\u00e7\u00e3o**: Um conjunto de valores X que t\u00eam par\u00e2metros a m\u00e9dia (\u03bc) e o desvio padr\u00e3o (\u03c3) segue uma Distribui\u00e7\u00e3o Normal \/ Gaussiana se sua fun\u00e7\u00e3o de densidade de probabilidade for definida como:\n\n$f(x, \u03bc, \u03c3) = \\frac{1}{\\sqrt{2\u03c0\u03c3}} e^{-(x-\u03bc)^2\/2\u03c3^2}$\n\nA deriva\u00e7\u00e3o dessa f\u00f3rmula \u00e9 um pouco al\u00e9m do que pretendemos passar aqui, portanto focaremos na aplica\u00e7\u00e3o dela. Por\u00e9m, \u00e9 importante saber que essa fun\u00e7\u00e3o serve para identificarmos qual a probabilidade de um valor escolhido seguir essa distribui\u00e7\u00e3o, ou melhor ainda, qual a probabilidade de um *intervalo* de valores seguir essa distribui\u00e7\u00e3o.\n\nEssa distribui\u00e7\u00e3o de probabilidade t\u00eam resultados que variam para diferentes valores de x (que pode ser qualquer n\u00famero real entre $-\\infty$ e $+\\infty$. Caso voc\u00ea n\u00e3o tenha notado, este intervalo \u00e9 absurdamente alto (infinito), o que implica que at\u00e9 valores comuns de alturas ter\u00e3o uma baixa probabilidade de serem tirados, mas conforme constru\u00edmos um intervalo de alturas, essa probabilidade aumenta.\n\nEm termos de nota\u00e7\u00e3o, \u00e9 comum mencionar que uma vari\u00e1vel aleat\u00f3ria X (que podemos pensar que \u00e9 o equivalente a termos diferentes valores de altura) segue uma normal pelo formato $X \\mathtt{\\sim} N(\u03bc, \u03c3^{2})$. Lembre-se que $\\sigma^2$ \u00e9 a vari\u00e2ncia (ou desvio padr\u00e3o ao quadrado).\n","985a81e5":"Essa \u00e9 a regra 68-95-99.7, resumida na figura abaixo.","6a36c3cb":"# Usando o Scipy\n\nCaso queira ir direto ao ponto, voc\u00ea pode criar a PDF normal de seus dados usando ```scipy.stats```","834b30c3":"## Os dados\n\nVamos gerar alguns valores que representam a altura (por exemplo de pessoas quando medida em cent\u00edmetros). Temos 15 dados, e se plotarmos um histograma, percebemos que conforme usamos mais barras para descrever os dados, notamos uma clara concentra\u00e7\u00e3o no meio, e uma diminui\u00e7\u00e3o na quantidade de valores nas pontas. Este \u00e9 o comportamento esperado de uma distribui\u00e7\u00e3o que segue uma normal.\n\nPerceba que n\u00e3o temos alguns buracos entre algumas barras, mas isso significa que n\u00e3o h\u00e1 nenhuma probabilidade de algu\u00e9m ter essa altura? N\u00e3o, e uma distribui\u00e7\u00e3o normal entra a\u00ed para aplicar uma suaviza\u00e7\u00e3o nessa diferen\u00e7a entre concentra\u00e7\u00f5es de dados.","419ee37c":"Existe uma regra bem conhecida que diz que em uma distribui\u00e7\u00e3o normal 68% dos valores est\u00e3o concentrados entre a m\u00e9dia mais ou menos 1 desvio padr\u00e3o.","b14998b7":"Por meio desta an\u00e1lise percebemos que h\u00e1 uma maior probabilidade de ser tirada uma altura de exatos 60cm do que uma de exatos 50cm. Mas a probabilidade \u00e9 muito baixa, correto? Isso ocorre porque 60,0 \u00e9 diferente de 60,01 por exemplo, e h\u00e1 necessidade de se calcular uma representa\u00e7\u00e3o cont\u00ednua e v\u00e1lida para todo o intervalo de dados poss\u00edvel (inifinito). \n\nQuando percebemos isso, notamos que h\u00e1 uma melhor interpreta\u00e7\u00e3o dos dados de uma distribui\u00e7\u00e3o normal se tratarmos de um intervalo (cont\u00ednuo) ao inv\u00e9s de pontos \u00fanicos (discreto). Essa transi\u00e7\u00e3o para o espa\u00e7o cont\u00ednuo necessita do apoio do c\u00e1lculo integral.","b0682a3a":"Tamb\u00e9m podemos confirmar que a integral entre -infinito e +infinito da pdf \u00e9 1, integrando ela neste intervalo.","03a33aab":"Notamos que isso faz sentido quando plotamos esses delimitadores e visualizamos a PDF e CDF da normal.","eea77118":"Tendo assim os valores de PDF ou CDF, voc\u00ea pode fazer os mesmos c\u00e1lculos usando integral vistos anteriormente para pegar a probabilidade de um intervalo.","16202a08":"### Fun\u00e7\u00e3o de distribui\u00e7\u00e3o de probabilidade acumulada\n\nEm ingl\u00eas, a sigla \u00e9 CDF. Essa distribui\u00e7\u00e3o constitui de somar toda a \u00e1rea entre um ponto inicial e um ponto m\u00e1ximo de altura. Sob um vi\u00e9s te\u00f3rico, esses limites s\u00e3o tipicamente $-\\infty$ e $+\\infty$, mas sob um vi\u00e9s pr\u00e1tico (para visualizarmos) esses limites s\u00e3o extremamente menores. \n\nN\u00e3o envolveremos muito c\u00e1lculo aqui, mas basta saber que estamos calculando a integral entre 0 e cada um dos 200 pontos (entre 50 e 250). A integral vai calcular a \u00e1rea abaixo da curva entre os dois pontos, e plotamos isso no gr\u00e1fico. Conforme avan\u00e7amos, percebemos o grande aumento entre 125 e 200, e depois tende a se manter de certa maneira constante, por\u00e9m convergindo \u00e0 1 no infinito.","fe2a2a56":"## Considera\u00e7\u00f5es finais\n\nA distribui\u00e7\u00e3o normal \u00e9 usada caso seus dados tenham uma concetra\u00e7\u00e3o forte pr\u00f3xima \u00e0 m\u00e9dia, e v\u00e1 diminuindo a frequ\u00eancia conforme desvia-se dela. Ela utiliza dois par\u00e2metros para representar a distribui\u00e7\u00e3o: a m\u00e9dia e o desvio padr\u00e3o. Foram introduzidos os conceitos de PDF e CDF, tal como o c\u00e1lculo de probabilidades usando integrais.","e8c393c2":"Aquela fun\u00e7\u00e3o esquisitona que mostramos agora a pouco $f(x, \u03bc, \u03c3)$ \u00e9 o que constr\u00f3i a distribui\u00e7\u00e3o de probabilidade da fun\u00e7\u00e3o normal. Uma das maneiras de codific\u00e1-la segue abaixo:\n","d3be63a4":"Agora sabemos que se calcularmos a integral entre um ponto a e outro ponto b ter\u00edamos a probabilidade de uma altura estar neste intervalo. Veja abaixo que uma altura entre 140 e 190 tem 0.86 de probabilidade de ocorrer.","fd6caadc":"T\u00e3o f\u00e1cil quanto \u00e9 criar a CDF.","bf2f3a94":"# Distribui\u00e7\u00e3o Normal\n\nDistribui\u00e7\u00f5es s\u00e3o usadas para descrever como um fen\u00f4mento observado pode ser representado. Conforme temos novas observa\u00e7\u00f5es de um fen\u00f4meno, podemos identificar se ele segue um padr\u00e3o, e muitas coisas seguem um padr\u00e3o. Talvez a distribui\u00e7\u00e3o estat\u00edstica mais utilizada para sumarizar essas observa\u00e7\u00f5es seja a Distribui\u00e7\u00e3o Normal, que parte da ideia de que temos uma grande concentra\u00e7\u00e3o de dados pr\u00f3ximos \u00e0 m\u00e9dia, mas conforme desviamos dela a probabilidade tende a cair.","6ae16bdd":"### Fun\u00e7\u00e3o de Densidade de Probabilidade\n\nNossa distribui\u00e7\u00e3o de alturas pode ser representada de uma maneira param\u00e9trica - que \u00e9 composta por dois par\u00e2metros: m\u00e9dia e desvio padr\u00e3o.","81d3958a":"## Criando uma normal do zero\n\nPython fornece diferentes maneiras de se implementar uma distribui\u00e7\u00e3o normal e fazer an\u00e1lises, mas come\u00e7aremos utilizando a defini\u00e7\u00e3o da distribui\u00e7\u00e3o aplicando os par\u00e2metros do nosso problema. Uma defini\u00e7\u00e3o mais formal consistiria de introduzir o que \u00e9 uma vari\u00e1vel aleat\u00f3ria, mas isso fica para outro notebook.\n","d8d6058c":"## Bibliotecas \n\nUtilizamos algumas das bibliotecas padr\u00e3o para se manipular dados, e outras matem\u00e1ticas para criar a fun\u00e7\u00e3o de densidade e calcular as probabilidades dessa distribui\u00e7\u00e3o por meio da integral.","502189b8":"PDF (do ingl\u00eas, fun\u00e7\u00e3o de densidade de probabilidade) \u00e9 um nome comumente usado para abreviar as fun\u00e7\u00f5es de probabilidade.\n\nPara exibirmos uma representa\u00e7\u00e3o visual de como ficaria a distribui\u00e7\u00e3o normal para esses dados n\u00f3s criamos 200 alturas entre 50 e 250, e qual seria o resultado da PDF para uma dada altura neste intervalo. Ao fim calculamos 200 alturas e temos o seguinte plot.","05f3ea83":"![Imagem](https:\/\/miro.medium.com\/max\/1400\/1*IZ2II2HYKeoMrdLU5jW6Dw.png)\n[Imagem de Towards Data Science](https:\/\/towardsdatascience.com\/understanding-the-68-95-99-7-rule-for-a-normal-distribution-b7b7cbf760c2)"}}