{"cell_type":{"e3fd83b5":"code","b5acc15c":"code","4feb4984":"code","ec7c704a":"code","d0e28a00":"code","57d1520c":"code","59a2f051":"code","f8086a2e":"code","0b92275d":"code","e8c103a5":"code","76498f44":"code","f9be98f9":"code","1301f0f9":"code","88b4f2c1":"code","94bd0829":"markdown","ca91b1ad":"markdown","92f8ed5d":"markdown","30bd01ea":"markdown","a59eacfe":"markdown"},"source":{"e3fd83b5":"import pandas as pd\nimport numpy as np\n\nimport matplotlib.pyplot as plt\nimport seaborn as sns\n\n%matplotlib inline","b5acc15c":"# color range for graphs\ncolors = [(0, x, 1) for x in np.arange(0,1,0.1)]","4feb4984":"songs = pd.read_csv('..\/input\/data.csv')\nsongs.head(3)","ec7c704a":"songs['Date'] = pd.to_datetime(songs['Date'])\n# work only with songs from 2017\nfirst_2018_day = pd.datetime(2018, 1, 1)\nsongs = songs[songs['Date'] < first_2018_day]","d0e28a00":"songs_global = songs[songs['Region']=='global']\ns = songs_global.sort_values(['Date', 'Position'])","57d1520c":"artists_by_streams = s.groupby('Artist')['Streams'].sum()\nartists_by_streams.sort_values(ascending=False, inplace=True)\ntop10 = artists_by_streams.iloc[:10]\ntop10","59a2f051":"plt.figure(figsize=(20,10))\nplt.title('Most streamed artists on spotify in 2017')\nplt.bar(x=top10.index, height=top10, color=colors)","f8086a2e":"songs_by_streams = s.groupby('Track Name')['Streams'].sum()\nsongs_by_streams.sort_values(ascending=False, inplace=True)\nsongs_by_streams[:10]","0b92275d":"1470919913 \/ 4467942169 * 100","e8c103a5":"s.sort_values('Streams', ascending=False).iloc[0]","76498f44":"start = pd.datetime(2017, 1, 1)\nend = pd.datetime(2017, 12, 31)\n\nbetween = s[(s['Date'] >= start) & (s['Date'] <= end)]\nlil_peep = between.groupby(['Artist', 'Date'])['Streams'].count()['Lil Peep']","f9be98f9":"all_days = pd.Series(index=pd.date_range(start, end))\nfor day in all_days.index:\n    if day not in lil_peep.index:\n        lil_peep[day] = 0\nlil_peep.sort_index(inplace=True)","1301f0f9":"plt.bar(lil_peep.index, lil_peep)","88b4f2c1":"lil_peep[lil_peep > 0]","94bd0829":"## Most streamed songs","ca91b1ad":"## Most streamed artists","92f8ed5d":"## Lil Peep streams","30bd01ea":"## Get single most streamed song","a59eacfe":"# Findings:\n\nEd Sheeran was the most streamed artist in 2017 with **more than double the streams** of the runner-up, Drake. Mostly due to his single `Shape of you` which amounted to **~32%** of Sheeran's total streams. It's also the most streamed songs with huge lead before two versions of Despacito, which ended second and third.\n\nThe `Despacito (Featuring Daddy Yankee)` was also the songs with most streams in single day - on May 27th the song was played **11381520** times.\n\nNext graph shows how tragic death of Gustav Elijah \u00c5hr, known professionaly as **Lil Peep** impacted his songs streams. At least one of his songs were in the most 200 streamed global songs 19 times, all following his death on November 15th."}}