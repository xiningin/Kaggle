{"cell_type":{"e6449cdf":"code","2083ac90":"code","e19ebd79":"code","030af6eb":"code","40b3ad16":"code","715dae84":"code","e2f2ce11":"code","f97ea792":"code","61eb2bf7":"code","f26ca118":"code","7fc80856":"code","108ca687":"code","473d42e8":"code","d719a941":"code","dd3afc7d":"code","7a0347b9":"code","d316557b":"code","99dfd2cf":"code","22e250ad":"code","9b97d922":"code","51a50fa1":"code","cd4713ab":"code","a6eb8477":"markdown","762453fd":"markdown"},"source":{"e6449cdf":"# Import libraries\nimport pandas as pd\nimport numpy as np\nimport matplotlib.pyplot as plt\nimport seaborn as sns","2083ac90":"# Import dataset\ndf = pd.read_csv('..\/input\/housedata\/data.csv')","e19ebd79":"# Take the variables that will be used\ndf = df[['price', 'bedrooms', 'bathrooms', 'sqft_living', 'sqft_lot', 'yr_built', 'yr_renovated']]\ndf = df.astype(int)","030af6eb":"# Replace yr_built into yr_renovated if the house was renovated\ndef year_built(df):\n    if df['yr_built'] < df['yr_renovated']:\n        return df['yr_renovated']\n    else:\n        return df['yr_built']\n    \ndf['year_built'] = df.apply(year_built, axis = 1)","40b3ad16":"# Drop yr_built and yr_renovated\ndf.drop(columns = ['yr_built', 'yr_renovated'], inplace = True)","715dae84":"# Drop the data with price value = 0\ndf.drop(index = df[df['price'] == 0].index, inplace = True)","e2f2ce11":"# Checking the data\ndf.info()","f97ea792":"# Shows the basic stat of the data\ndf.describe()","61eb2bf7":"# Looking correlation bettween the variables\nsns.heatmap(df.corr(), annot = True)","f26ca118":"# Shows the plot sqft_living vs price\nplt.figure(figsize = (12, 6))\nsns.pairplot(df, x_vars = ['sqft_living'], y_vars = ['price'], size = 7, kind = 'scatter')\nplt.xlabel('Sqft of Living')\nplt.ylabel('Price')\nplt.title('Sqft of living vs price')\nplt.show()","7fc80856":"# Remove the outliers data\ndf.drop(index = df[df['price'] > 10000000].index, inplace = True)\ndf.drop(index = df[df['sqft_living'] > 12000].index, inplace = True)","108ca687":"# sqft_living vs price without outliers data\nplt.figure(figsize = (12, 6))\nsns.pairplot(df, x_vars = ['sqft_living'], y_vars = ['price'], size = 7, kind = 'scatter')\nplt.xlabel('Sqft of Living')\nplt.ylabel('Price')\nplt.title('Sqft of living vs price')\nplt.show()","473d42e8":"# Set X and y for before splitting into train test data\nX = df.drop(columns = ['price'])\ny = df['price']\n\n# Import scikit learn\nfrom sklearn.model_selection import train_test_split\n\n# Split the data into train and test data\nX_train, X_test, y_train, y_test = train_test_split(X, y, train_size = 0.7, random_state = 100) ","d719a941":"# Importing Linear Regression model\nfrom sklearn.linear_model import LinearRegression\n\n# Fitting the model\nlr = LinearRegression()\nlr.fit(X_train, y_train)","dd3afc7d":"# Predicting the price for the test value\ny_pred = lr.predict(X_test)","7a0347b9":"# Plotting the actual and predicted values\nc = [i for i in range(1, len(y_test) + 1, 1)]\nplt.plot(c, y_test, color = 'r', linestyle = '-')\nplt.plot(c, y_pred, color = 'b', linestyle = '-')\nplt.xlabel('Price')\nplt.ylabel('index')\nplt.title('Prediction')\nplt.show()","d316557b":"# Plotting the error\nc = [i for i in range(1,len(y_test)+1,1)]\nplt.plot(c,y_test-y_pred,color='green',linestyle='-')\nplt.xlabel('index')\nplt.ylabel('Error')\nplt.title('Error Value')\nplt.show()","99dfd2cf":"# Importing metrics for model evaluation\nfrom sklearn.metrics import r2_score, mean_squared_error","22e250ad":"# Calculate mMean squuare error\nmse = mean_squared_error(y_test, y_pred)","9b97d922":"# Calculate R square value\nr2 = r2_score(y_test, y_pred)","51a50fa1":"print('Mean squared error : ', mse)\nprint('r square : ', r2)","cd4713ab":"# Intercept and coeff of the line\nprint('Intercept of the model : ', lr.intercept_)\nprint('Coefficient of the line : ', lr.coef_)","a6eb8477":"# House Pricing Analysis with Simple Linear Regression","762453fd":"<b>Conclussion<b\/>\n    \nOur house predicting model by using Linear Regression doesn't have a good accuracy, which is only 51,61%. This model should be improved.\n    \nThe equation of the line is as follows :\n    \n<b>y = 3018251.06 + (-6.07524762e+04 X1) + (2.38002469e+04 X2) + (2.98736933e+02 X3) + (-5.94362127e-01 X4) + (-1.47596702e+03 X5)<b\/>\n"}}