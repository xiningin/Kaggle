{"cell_type":{"7b9d51ce":"code","9ca3c5c7":"code","7cc4d1b0":"code","ea9ea92e":"code","773ec06a":"code","f1b54862":"code","5447393c":"code","ce10a64e":"code","23ad6e0e":"code","03f6493d":"code","80f2cf02":"code","e76bda87":"code","1a97fd18":"code","5111c112":"code","cb9b20d4":"code","93e6bb82":"code","0d58f1d7":"code","aac255f6":"code","13d61048":"code","ffa57280":"code","d58caa2b":"code","30ecaa0e":"code","95db18b2":"code","9c70194c":"code","73bfbd29":"code","5ec968d4":"code","2567a29b":"code","879db37e":"code","5af014d3":"code","8e2489e2":"code","0007d06a":"code","33fffe67":"code","190d397b":"code","0ef1d7ed":"code","f46e0a46":"code","72dbe8b5":"code","098199b7":"code","328969be":"code","72ed95be":"code","32ab9b7f":"code","feef1a9d":"markdown"},"source":{"7b9d51ce":"import pandas as pd\nwater= pd.read_csv(\"..\/input\/nyc-beach-water-quality-data\/dohmh-beach-water-quality-data-1.csv\")\nwater.head(9)","9ca3c5c7":"water['Sample Location'].value_counts()","7cc4d1b0":"water['Sample Location']= water['Sample Location'].replace('Rigth','Right')\nround(water['Sample Location']. value_counts()*100\/len(water),2)","ea9ea92e":"water.nunique()","773ec06a":"water.info()","f1b54862":"water['Sample Date']=pd.to_datetime(water['Sample Date'])\nwater.info()","5447393c":"water.isnull().sum()*100\/len(water)","ce10a64e":"missing=water[water.isna().any(axis=1)]\nmissing.head()","23ad6e0e":"missing.isnull().sum()*100\/len(missing)","03f6493d":"missing.nunique()","80f2cf02":"missing['Units or Notes'].value_counts()*100\/len(missing)","e76bda87":"water[water['Units or Notes']=='Result below detection limit'].head()","1a97fd18":"water[water['Units or Notes']=='Result below detection limit'].info()","5111c112":"water[water['Units or Notes']!='Result below detection limit'].head()","cb9b20d4":"water[water['Units or Notes']!='Result below detection limit'].info()","93e6bb82":"water['Enterococci Results']=water['Enterococci Results'].fillna(0)\nwater.isnull().sum()*100\/len(missing)","0d58f1d7":"water=water.dropna()\nwater.info()","aac255f6":"water.nunique()","13d61048":"water.head()","ffa57280":"water=water.drop(['Units or Notes'],axis=1)\nwater.head()","d58caa2b":"#paper : https:\/\/www.environment.nsw.gov.au\/-\/media\/OEH\/Corporate-Site\/Documents\/Water\/Beaches\/state-of-beaches-2019-2020-statewide-summary-200302.pdf\nwater.loc[water['Enterococci Results'] <= 50, 'Category'] = 'open'\nwater.loc[water['Enterococci Results'] >500, 'Category'] = 'closed'\nwater.loc[(water['Enterococci Results'] >50) & (water['Enterococci Results'] <=500), 'Category'] = 'advisory'\nround(water['Category'].value_counts()*100\/len(water))","30ecaa0e":"water.rename(columns = {'Enterococci Results':'Enterococci Results (MPN\/100 ml)'}, inplace = True)\nwater.head()","95db18b2":"!pip install pandas-profiling","9c70194c":"from pandas_profiling import ProfileReport\nProfileReport(water, title=\"EDA Report\")","73bfbd29":"!pip install pycaret","5ec968d4":"data = water.sample(frac=0.8, random_state=42)\ndata_unseen = water.drop(data.index)\ndata.reset_index(inplace=True, drop=True)\ndata_unseen.reset_index(inplace=True, drop=True)\nprint('Data for Modeling: ' + str(data.shape))","2567a29b":"print('Unseen Data For Predictions: ' + str(data_unseen.shape))","879db37e":"from pycaret.classification import *","5af014d3":"water= setup(data = data, target = 'Category', session_id=42,\n                  normalize = True, \n                  transformation = True, \n                  log_experiment = True,\n                  handle_unknown_categorical = True, \n                  unknown_categorical_method = 'most_frequent',\n                  remove_multicollinearity = True, #drop one of the two features that are highly correlated with each other\n                  ignore_low_variance = True,#all categorical features with statistically insignificant variances are removed from the dataset.\n                  combine_rare_levels = True,# all levels in categorical features below the threshold defined in rare_level_threshold param are combined together as a single level\n                  numeric_imputation='median',\n           ignore_features=['Sample ID'],\n            date_features=['Sample Date'],\n             high_cardinality_features =['Beach Name'],           \n           fix_imbalance = True,\n            train_size = 0.8\n          )","8e2489e2":"dt = create_model('dt')","0007d06a":"print(dt)","33fffe67":"tuned_dt = tune_model(dt,optimize = 'Kappa')","190d397b":"plot_model(tuned_dt, plot = 'auc')","0ef1d7ed":"plot_model(tuned_dt, plot = 'pr')","f46e0a46":"plot_model(tuned_dt, plot='feature')","72dbe8b5":"plot_model(tuned_dt, plot = 'confusion_matrix')","098199b7":"evaluate_model(tuned_dt)","328969be":"predict_model(tuned_dt)","72ed95be":"unseen_predictions = predict_model(tuned_dt, data=data_unseen)\nunseen_predictions.head()","32ab9b7f":"print(\"Confidence Score :   {}\".format(round(unseen_predictions.Score.mean(),2)))#Confidence Score","feef1a9d":"# Sample Location"}}