{"cell_type":{"8f44355b":"code","89d87572":"code","8d8280d5":"code","b75f6163":"code","d3722b73":"code","573ac3ff":"code","36503d03":"code","28e2c7ee":"code","20bf8270":"code","832c9f57":"code","542ebac8":"code","a6afc2cd":"code","13f0cb45":"code","0860b792":"code","6a3834cd":"code","62daa5d3":"code","ae06feed":"code","d984dd79":"code","fe0e721e":"code","1eda012e":"code","ac17466e":"code","597b8e2a":"code","e9c2529b":"markdown"},"source":{"8f44355b":"import numpy as np\nimport pandas as pd\nimport matplotlib.pyplot as plt\nimport matplotlib as mpl\n","89d87572":"df = pd.read_csv('\/kaggle\/input\/covid19-google-community-mobility-update-sept-2020\/covid19_mobility_report_sept_2020\/regional\/2020_AE_Region_Mobility_Report.csv')","8d8280d5":"df.head()","b75f6163":"df['date'] = pd.to_datetime(df['date'])\ndf['week_number'] = df['date'].dt.week","d3722b73":"df.head()","573ac3ff":"# A new column 'month_name'\n#df['month'] = pd.DatetimeIndex(df['date']).month_name()\ndf['month'] = pd.DatetimeIndex(df['date']).month","36503d03":"df = df[~df['month'].isin([7,8,9])]","28e2c7ee":"df.head()","20bf8270":"#Selecting some columns that want to be used for analysis\n\ndf1 = df[['sub_region_1', 'week_number','retail_and_recreation_percent_change_from_baseline', 'grocery_and_pharmacy_percent_change_from_baseline','parks_percent_change_from_baseline', 'transit_stations_percent_change_from_baseline','workplaces_percent_change_from_baseline','residential_percent_change_from_baseline']]","832c9f57":"#Renaming columns to make it shorter\ndf1 = df1.rename({'retail_and_recreation_percent_change_from_baseline': 'retail_recreation', 'grocery_and_pharmacy_percent_change_from_baseline': 'grocery_pharmacy', 'parks_percent_change_from_baseline':'park', 'workplaces_percent_change_from_baseline':'workspace', 'residential_percent_change_from_baseline':'residential', 'transit_stations_percent_change_from_baseline':'transit_station'}, axis=1)","542ebac8":"df1.shape","a6afc2cd":"#Drop rows when sub_region is Nan\ndf2 = df1.dropna(subset=['sub_region_1'])","13f0cb45":"df2.head()","0860b792":"#Group by month and subregion\ndf3 = df2.groupby(['week_number','sub_region_1']).mean()","6a3834cd":"df3.head(50).sort_values(by=\"week_number\")","62daa5d3":"ab = df2[df2['sub_region_1'] == 'Abu Dhabi']","ae06feed":"ab = ab.groupby(['week_number','sub_region_1']).mean().reset_index()","d984dd79":"ab","fe0e721e":"ab = ab.drop(columns=['sub_region_1'])\nab = ab.set_index('week_number')\nab","1eda012e":"# create valid markers from mpl.markers\nvalid_markers = ([item[0] for item in mpl.markers.MarkerStyle.markers.items() if\nitem[1] is not 'nothing' and not item[1].startswith('tick') and not item[1].startswith('caret')])\n \n# valid_markers = mpl.markers.MarkerStyle.filled_markers\n \nmarkers = np.random.choice(valid_markers, ab.shape[1], replace=False)\n","ac17466e":"ax = ab.plot(kind='bar')\nfor i, line in enumerate(ax.get_lines()):\n    line.set_marker(markers[i])\n\n# adding legend\nax.legend(ab.columns, loc='best')\nplt.ylabel('Percent Change from Baseline')\nplt.xlabel('Week number of the year 2020')\nplt.title('Abu Dhabi Community Mobility ')\n#labels = ['Feb', 'Mar', 'Apr', 'May', 'June','July','Aug','Sept']\n#ax.set_xticklabels(labels)\nplt.tight_layout()\nfig = mpl.pyplot.gcf()\nfig.set_size_inches(18.5, 10.5)\nplt.savefig('ab.png')\nplt.show()","597b8e2a":"ab.to_csv('abu_dhabi.csv', index=True)","e9c2529b":"# Abu Dhabi"}}