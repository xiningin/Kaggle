{"cell_type":{"6337a651":"code","d696ae07":"code","1cd5e00a":"code","a6641657":"code","83517bf3":"code","0aa50be0":"code","0d844ea9":"code","7151091c":"code","c9104494":"code","8d6c932d":"code","bf2a1727":"code","86a6dc06":"code","77ca180b":"code","485970c2":"code","4732fe76":"code","724607f4":"code","911148b6":"code","9d7b57e4":"code","6a93b352":"code","056b5f02":"code","b9d8c1a7":"code","909e7cc6":"code","33663953":"code","91c24d5f":"code","487e8ad4":"code","6b3afc00":"code","0853c6f2":"code","75b21d2b":"code","daadbbaf":"code","1065c788":"code","e8cbfb0f":"code","2b857eda":"code","d79cc0ae":"code","0f08e650":"code","30006062":"code","c65d358a":"code","633fdfb5":"code","fde75e78":"code","fcd8d5ea":"code","53ff5819":"code","4214df2a":"code","a13973ee":"code","5494e1a5":"code","5975b32b":"markdown","4458d728":"markdown","e1320e68":"markdown","4cb29531":"markdown","46a32305":"markdown","615c6402":"markdown","6f746ca5":"markdown","7d7b952e":"markdown","653361b3":"markdown","87badd03":"markdown","1272dec1":"markdown","9cbee75d":"markdown","02ac917e":"markdown","2be98808":"markdown","f230ef37":"markdown","abd25686":"markdown","c397391e":"markdown","7178184d":"markdown","ddc2ac11":"markdown","902b509d":"markdown","067b4c5a":"markdown","49c240ac":"markdown","633852b1":"markdown","bfcc1320":"markdown","ca19a1e3":"markdown","a03f27ec":"markdown","21c8c8b0":"markdown","62886a70":"markdown","a579f849":"markdown","71f65d87":"markdown","f3043008":"markdown","02856097":"markdown","921051f3":"markdown","c43bde14":"markdown"},"source":{"6337a651":"import numpy as np \nimport matplotlib.pyplot as plt \nimport pandas as pd\nimport seaborn as sns","d696ae07":"covid = pd.read_csv('..\/input\/novel-corona-virus-2019-dataset\/covid_19_data.csv')\ndf_BR = covid[covid['Country\/Region'] == 'Brazil']\ndf_BR","1cd5e00a":"sns.lineplot(df_BR['ObservationDate'], df_BR['Confirmed']);","a6641657":"sns.lineplot(df_BR['ObservationDate'], df_BR['Deaths']);","83517bf3":"sns.lineplot(df_BR['ObservationDate'], df_BR['Recovered']);","0aa50be0":"df_sum = df_BR.groupby('ObservationDate').agg({'Confirmed': 'sum', 'Deaths': 'sum', 'Recovered': 'sum'}).reset_index()\nplt.stackplot(df_sum['ObservationDate'], [df_sum['Confirmed'], df_sum['Deaths'], df_sum['Recovered']], labels = ['Confirmados', 'Mortos', 'Recuperados'])\nplt.legend(loc = 'upper left')","0d844ea9":"confirmados = pd.read_csv('..\/input\/novel-corona-virus-2019-dataset\/time_series_covid_19_confirmed.csv')\nconfirmados = confirmados[confirmados['Country\/Region'] == 'Brazil']\nconfirmados","7151091c":"columns1 = confirmados.keys()\ncolumns1","c9104494":"confirmados = confirmados.loc[:, columns1[4]:columns1[-1]]\nconfirmados","8d6c932d":"dates1 = confirmados.keys()\ny_c = []\nfor i in dates1:\n    y_c.append(confirmados[i].sum())","bf2a1727":"y_c = np.array(y_c).reshape(-1,1)\ny_c ","86a6dc06":"x_c = np.arange(len(dates1)).reshape(-1,1)\nx_c","77ca180b":"forecast_c = np.arange(len(dates1) + 15).reshape(-1,1)","485970c2":"from sklearn.model_selection import train_test_split\nX_train_c, X_test_c, Y_train_c, Y_test_c = train_test_split(x_c, y_c, test_size = 0.40, shuffle = False)","4732fe76":"from sklearn.preprocessing import PolynomialFeatures\npoly_c = PolynomialFeatures(degree = 3)\nX_train_poly_c = poly_c.fit_transform(X_train_c)\nX_test_poly_c = poly_c.transform(X_test_c)","724607f4":"from sklearn.linear_model import LinearRegression\nlr_c = LinearRegression()\nlr_c.fit(X_train_poly_c, Y_train_c)","911148b6":"poly_pred_c = lr_c.predict(X_test_poly_c)\nplt.plot(poly_pred_c, linestyle = 'dashed')\nplt.plot(Y_test_c)","9d7b57e4":"from sklearn.metrics import mean_absolute_error, mean_squared_error\nprint('MAE:', mean_absolute_error(poly_pred_c, Y_test_c))\nprint('MSE:', mean_squared_error(poly_pred_c, Y_test_c))\nprint('RMSE:', np.sqrt(mean_absolute_error(poly_pred_c, Y_test_c)))","6a93b352":"mortes = pd.read_csv('..\/input\/novel-corona-virus-2019-dataset\/time_series_covid_19_deaths.csv')\nmortes = mortes[mortes['Country\/Region'] == 'Brazil']\nmortes","056b5f02":"columns = mortes.keys()\nmortes = mortes.loc[:, columns[4]:columns[-1]]\nmortes","b9d8c1a7":"dates = mortes.keys()\ny = []\nfor i in dates:\n    y.append(mortes[i].sum())","909e7cc6":"y = np.array(y).reshape(-1,1)\ny","33663953":"x = np.arange(len(dates)).reshape(-1,1)\nx","91c24d5f":"forecast = np.arange(len(dates) + 15).reshape(-1,1)","487e8ad4":"X_train, X_test, Y_train, Y_test = train_test_split(x, y, test_size = 0.30, shuffle = False)","6b3afc00":"poly = PolynomialFeatures(degree = 2)\nX_train_poly = poly.fit_transform(X_train)\nX_test_poly = poly.transform(X_test)","0853c6f2":"lr = LinearRegression()\nlr.fit(X_train_poly, Y_train)","75b21d2b":"poly_pred = lr.predict(X_test_poly)\nplt.plot(poly_pred, linestyle = 'dashed')\nplt.plot(Y_test)","daadbbaf":"print('MAE:', mean_absolute_error(poly_pred, Y_test))\nprint('MSE:', mean_squared_error(poly_pred, Y_test))\nprint('RMSE:', np.sqrt(mean_absolute_error(poly_pred, Y_test)))","1065c788":"recuperados = pd.read_csv('..\/input\/novel-corona-virus-2019-dataset\/time_series_covid_19_recovered.csv')\nrecuperados = recuperados[recuperados['Country\/Region'] == 'Brazil']\nrecuperados","e8cbfb0f":"columns2 = recuperados.keys()\nrecuperados = recuperados.loc[:, columns2[4]:columns2[-1]]\nrecuperados","2b857eda":"dates2 = recuperados.keys()\ny_r = []\nfor i in dates2:\n    y_r.append(recuperados[i].sum())","d79cc0ae":"y_r = np.array(y_r).reshape(-1,1)\ny_r","0f08e650":"x_r = np.arange(len(dates2)).reshape(-1,1)\nx_r","30006062":"forecast_r = np.arange(len(dates2) + 15).reshape(-1,1)","c65d358a":"X_train_r, X_test_r, Y_train_r, Y_test_r = train_test_split(x_r, y_r, test_size = 0.30, shuffle = False)","633fdfb5":"poly_r = PolynomialFeatures(degree = 3)\nX_train_poly_r = poly_r.fit_transform(X_train_r)\nX_test_poly_r = poly_r.transform(X_test_r)","fde75e78":"lr_r = LinearRegression()\nlr_r.fit(X_train_poly_r, Y_train_r)","fcd8d5ea":"poly_pred_r = lr_r.predict(X_test_poly_r)\nplt.plot(poly_pred_r, linestyle = 'dashed')\nplt.plot(Y_test_r)","53ff5819":"print('MAE:', mean_absolute_error(poly_pred_r, Y_test_r))\nprint('MSE:', mean_squared_error(poly_pred_r, Y_test_r))\nprint('RMSE:', np.sqrt(mean_absolute_error(poly_pred_r, Y_test_r)))","4214df2a":"X_train_all_c = poly_c.transform(forecast_c)\npred_all_c = lr_c.predict(X_train_all_c)\n\nplt.plot(forecast_c[:-15], y_c, color='red')\nplt.plot(forecast_c, pred_all_c, linestyle='dashed')\nplt.title('Casos Confirmados de COVID-19')\nplt.xlabel('Dias desde 22\/01\/2020')\nplt.ylabel('N\u00famero de confirmados')\nplt.legend(['Casos Confirmados', 'Previs\u00f5es']);","a13973ee":"X_train_all = poly.transform(forecast)\npred_all = lr.predict(X_train_all)\n\nplt.plot(forecast[:-15], y, color='red')\nplt.plot(forecast, pred_all, linestyle='dashed')\nplt.title('Mortes por COVID-19')\nplt.xlabel('Dias desde 22\/01\/2020')\nplt.ylabel('N\u00famero de mortes')\nplt.legend(['Mortes', 'Previs\u00f5es']);","5494e1a5":"X_train_all_r = poly_r.transform(forecast_r)\npred_all_r = lr_r.predict(X_train_all_r)\n\nplt.plot(forecast_r[:-15], y_r, color='red')\nplt.plot(forecast_r, pred_all_r, linestyle='dashed')\nplt.title('Recuperados da COVID-19')\nplt.xlabel('Dias desde 22\/01\/2020')\nplt.ylabel('N\u00famero de recuperados')\nplt.legend(['Recuperados', 'Previs\u00f5es']);","5975b32b":"Agora \u00e9 a vez da vari\u00e1vel ``x_c``, nela ser\u00e1 armazenada os dias que j\u00e1 se passaram desde o inicio dessa base de dados (dia 22\/01). ","4458d728":"### **Previs\u00e3o do n\u00famero de CONFIRMADOS para os pr\u00f3ximos 15 dias:**","e1320e68":"**Criando o modelo e o avaliando:**","4cb29531":"Vamos iniciar realizando as importa\u00e7\u00f5es das bibliotecas:","46a32305":"Infelizmente a previs\u00e3o para os pr\u00f3ximos 15 dias \u00e9 que continue a crescer o n\u00famero de mortes no pa\u00eds. Pelo o que o gr\u00e1fico indica e j\u00e1 foi comentado anteriormente, \u00e9 bem poss\u00edvel que o n\u00famero de mortes se mantenha alto por\u00e9m controlado. O n\u00famero de pessoas que morrem em decorr\u00eancia do v\u00edrus ainda \u00e9 mais baixo que os outros dados analisados, por\u00e9m s\u00e3o valores elevados e preocupantes, mesmo que se mantenha estagnado e num ritmo menor que a taxa de recuperados, o ideal seria se esse gr\u00e1fico fosse decrescente e tendendo rapidamente para o zero. ","615c6402":"Esse gr\u00e1fico representa a avalia\u00e7\u00e3o do meu modelo, em laranja s\u00e3o os n\u00fameros verdadeiros e o pontilhado \u00e9 a previs\u00e3o que o modelo fez. Quanto menor o n\u00famero do ``RMSE`` melhor! As duas linhas est\u00e3o bem pr\u00f3ximas, o que mostra uma avalia\u00e7\u00e3o positiva pois coloca meu modelo prevendo de maneira pr\u00f3xima os n\u00fameros reais. ","6f746ca5":"Esse \u00faltimo gr\u00e1fico comprova o que foi colocado anteriormente sobre o n\u00famero de recuperados ultrapassar o de mortos. \u00c9 expl\u00edcito que h\u00e1 mais casos de confirmados e recuperados do que de mortos. Apesar de tudo, os n\u00fameros continuam crescendo e est\u00e3o bem altos, indicando que mesmo com o avan\u00e7o da doen\u00e7a estando mais controlado, n\u00e3o param de crescer os n\u00fameros de pessoas que acabam infectadas e mortas pelo v\u00edrus da COVID-19. J\u00e1 se passaram meses desde o inicio da pandemia e o cen\u00e1rio deveria ser outro, mas tamb\u00e9m sabemos que as medidas tomadas n\u00e3o foram as mais eficazes e que muito brasileiros n\u00e3o se cuidam como o recomendado. V\u00e1rios estabelecimentos ficaram abertos mesmo quando n\u00e3o deveriam, pessoas que n\u00e3o saem de m\u00e1scara, n\u00e3o se higienizam corretamente e para piorar, n\u00e3o respeitam a dist\u00e2ncia recomendada nos espa\u00e7os p\u00fablicos. ","7d7b952e":"Vamos ver as colunas onde est\u00e3o as dadas para assim realizar as previs\u00f5es:","653361b3":"O gr\u00e1fico acima tamb\u00e9m n\u00e3o \u00e9 diferente, h\u00e1 a linha caracter\u00edstica mas aqui notamos que o ritmo do avan\u00e7o das mortes \u00e9 menor. Podemos perceber que no in\u00edcio h\u00e1 uma r\u00e1pida escalada at\u00e9 a marca dos mais de 17500 mortos, que logo depois da queda volta a crescer de uma maneira mais controlada e com n\u00fameros mais baixos, se comparados ao crescimento elevado dos confirmados, visto anteriormente. Mas infelizmente o gr\u00e1fico segue em alta, mostrando que mesmo em um ritmo mais controlado, o n\u00famero de mortos pela COVID-19 n\u00e3o para de subir.","87badd03":"### **Previs\u00e3o do n\u00famero de MORTES para os pr\u00f3ximos 15 dias:**","1272dec1":"Criando o modelo e o avaliando:","9cbee75d":"A linha pontilhada ultrapassa a vermelha pois est\u00e3o sendo previstos os 15 dias futuros. E como \u00e9 mostrado, a previs\u00e3o para os pr\u00f3ximos 15 dias \u00e9 um crescimento do n\u00famero de confirmados. Justamente o que foi discutido anteriormente, infelizmente as medidas n\u00e3o foram t\u00e3o eficazes e muitos brasileiros tamb\u00e9m n\u00e3o seguem as orienta\u00e7\u00f5es que s\u00e3o recomendadas quando necess\u00e1rio sair de casa. Se continuar dessa maneira, sem medidas mais r\u00edgidas e a falta de contribui\u00e7\u00e3o das pessoas, o virus ir\u00e1 continuar a se espalhar e afetar mais pessoas.","02ac917e":"# Nesse projeto busco realizar um estudo sobre a atual situa\u00e7\u00e3o do Brasil no cen\u00e1rio da pandemia. Irei usar as s\u00e9ries temporais para realizar a previs\u00e3o dos n\u00fameros para os pr\u00f3ximos 15 dias!","2be98808":"Podemos ver na tabela que os casos come\u00e7aram a aparecer no dia 26\/02\/2020, onde foi **confirmado** o primeiro caso de COVID-19 no Brasil, infelizmente n\u00e3o se tem informa\u00e7\u00f5es sobre em qual regi\u00e3o do pa\u00eds. Vamos visualizar esses n\u00fameros de forma gr\u00e1fica, come\u00e7ando pelos Confirmados:","f230ef37":"Podemos ver que temos ``ObservationDate``, a coluna onde mostra a data em que foi registrado tal n\u00famero. Ser\u00e1 uma coluna importante para futuras an\u00e1lises na linha do tempo do in\u00edcio da pandemia at\u00e9 os dias mais recentes. ``Province\/State`` \u00e9 o Estado do Brasil onde foram feitos os registros. ``Last Update`` \u00e9 a data da \u00faltima atualiza\u00e7\u00e3o da COVID-19. Por fim, ``Confirmed``, ``Deaths`` e ``Recovered`` significam casos confirmados, mortes e recuperados, respectivamente. ","abd25686":"### Pr\u00f3ximos 15 dias do n\u00famero de recuperados:","c397391e":"A avalia\u00e7\u00e3o do modelo foi bem positiva, as previs\u00f5es chegam bem perto dos valores reais. E o valor da ``RMSE`` \u00e9 bem pequeno, o que indica uma m\u00e9dia de erros baixa.","7178184d":"# S\u00e9ries Temporais para a previs\u00e3o dos n\u00fameros da COVID-19 no Brasil","ddc2ac11":"### **Previs\u00e3o do n\u00famero de RECUPERADOS para os pr\u00f3ximos 15 dias:**","902b509d":"### Pr\u00f3ximos 15 dias do n\u00famero de confirmados:","067b4c5a":"Criando o modelo e o avaliando","49c240ac":"N\u00f3s temos 217 dias, que s\u00e3o aproximadamente 7 meses de dados para serem avaliados at\u00e9 a data de hoje, dia 28\/08\/2020.","633852b1":"# PREVIS\u00c3O PARA OS PR\u00d3XIMOS 15 DIAS\nAqui iremos utilizar as vari\u00e1veis ``forecast``, ``forecast_c`` e ``forecast_r`` para realizar as previs\u00f5es das s\u00e9ries temporais para pr\u00f3ximos 15 dias","bfcc1320":"Vale lembrar que a quantidade de registros \u00e9 diferente, por isso o valores dos ``RMSE`` variam. Lembrando que a vari\u00e1vel ``mortes`` tem um n\u00famero menor de casos registrados. Voltando para os gr\u00e1ficos iniciais, a quantidade de pessoas que s\u00e3o confirmadas diaraiamente com o novo v\u00edrus \u00e9 maior do que o n\u00famero de pessoas que morrem por causa dele, assim como o n\u00famero de infectados que se recuperam tamb\u00e9m \u00e9 bem maior que o n\u00famero de infectados que morrem por causa da doen\u00e7a. Isso justifica a diferen\u00e7a entre os ``RMSE``, que \u00e9 a m\u00e9dia de erros.","ca19a1e3":"Ser\u00e3o realizadas as mesmas etapas que foram feitas anteriormente!","a03f27ec":"E para realizar a previs\u00e3o dos pr\u00f3ximos 15 dias, ser\u00e1 criado o ``forecast_c``, ter\u00e1 15 dias a mais que a vari\u00e1vel ``x_c``:","21c8c8b0":"Para os pr\u00f3ximos 15 dias a previs\u00e3o \u00e9 que cres\u00e7a o n\u00famero de pessoas que ir\u00e3o se curar da COVID-19. Felizmente se mant\u00e9m em um bom ritmo, o que indica que muitos dos infectados mais se recuperam do que morrem. O ideal \u00e9 que a curva se mantenha sempre em alta e superando o n\u00famero de mortes. Mesmo com a retomada de algumas atividades, \u00e9 poss\u00edvel que esse n\u00famero se mantenha elevado. Como j\u00e1 tratado antes, seguir as recomenda\u00e7\u00f5es, por mais simples que pare\u00e7am, realmente auxiliam no combate contra a doen\u00e7a e ajuda a manter essa linha sempre crescente e decrescendo a linha de confirmados e consequentemente a de mortes.  ","62886a70":"Vamos fazer o ``reshape`` para que o modelo possa fazer corretamente a previs\u00e3o. Ele tem que estar em formato de matriz e \u00e9 isso que vamos fazer agora:","a579f849":"### Pr\u00f3ximos 15 dias do n\u00famero de mortes:","71f65d87":"Agora o carregamento da base de dados e buscando apenas os n\u00fameros do pa\u00eds:","f3043008":"Interessante que quando o n\u00famero de confirmados ultrapassa a marca dos 250.000 infectados, h\u00e1 um queda brusca, chegando quase a 0. Ap\u00f3s a grande linha de queda, voltam a crescer as pessoas infectadas, em um ritmo menor e mais controlado do que na primeira subida da linha. O n\u00famero de confirmados no pa\u00eds tende a se manter crescendo, por\u00e9m em n\u00fameros mais baixo e de maneira mais lenta do que no in\u00edcio da pandemia, como mostrado pelo gr\u00e1fico. \u00c9 bem prov\u00e1vel que essa diminui\u00e7\u00e3o atenuante do n\u00famero de confirmados seja por causa da medida tomada pelo ent\u00e3o presidente Jair Bolsonaro, de [n\u00e3o divulgar os n\u00fameros da COVID-19](https:\/\/noticias.uol.com.br\/ultimas-noticias\/deutschewelle\/2020\/06\/06\/governo-deixa-de-divulgar-total-de-mortos-e-casos-de-covid-19.htm). [O Brasil \u00e9 um destaque negativo](https:\/\/www.bbc.com\/portuguese\/brasil-52967730) quando o assunto \u00e9 o novo v\u00edrus, a come\u00e7ar pela [troca de ministros](https:\/\/veja.abril.com.br\/politica\/queda-de-dois-ministros-em-apenas-um-mes-deixa-saude-a-deriva\/), uma prova da instabilidade e total desgaste do atual governo. Essas implica\u00e7\u00f5es s\u00f3 tornam mais dif\u00edcil a batalha contra a COVID-19, a pr\u00f3pria descren\u00e7a do presidente, quanto a fatalidade da doen\u00e7a, demonstra a incapacidade das principais autoridades de tomar decis\u00f5es e criar medidas para controlar o avan\u00e7o da pandemia. ","02856097":"Felizmente o n\u00famero de recuperados tamb\u00e9m cresce, em um ritmo at\u00e9 mais acelerado que o de mortos. Os \u00edndices positivos nos d\u00e3o maior no\u00e7\u00e3o de que possivelmente o n\u00famero de mortos esteja mais contido pois h\u00e1 casos crescentes de infectados que se recuperaram, ou seja, tudo indica que h\u00e1 menos pessoas morrendo de COVID-19 e mais pessoas curadas. \u00c9 como se os n\u00fameros de mortos estivessem sendo \"trocados\" pelo o de recuperados, justificando os gr\u00e1ficos e os avan\u00e7os em ritmos diferentes. ","921051f3":"Vamos criar a vari\u00e1vel ``dates1`` para armazenar as datas com os n\u00fameros de confirmados:","c43bde14":"A partir da quarta coluna tem as datas, vamos guardar somente elas, que \u00e9 de fato o que iremos trabalhar:"}}