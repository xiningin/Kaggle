{"cell_type":{"f49451d8":"code","7fb3b189":"code","00bf1862":"code","c5dae56c":"code","a61da7cf":"code","8e4dd638":"code","c38c861f":"code","e9ce741d":"code","50306692":"code","0d8d0450":"code","713e3be3":"code","1cbf2c03":"code","f041efb4":"code","12a8e089":"code","ec09d64c":"code","9c03035a":"code","e3c69220":"code","7eccead1":"code","00445182":"code","82560226":"code","b9c26d18":"code","d667d03a":"code","95a39b6a":"code","5ad779bd":"code","64513988":"code","febdde86":"code","7444dbb7":"code","ecc487ce":"code","581c8740":"code","1b294d20":"code","4f38dfd6":"code","79b12c6a":"code","2d9ac861":"code","c99e8cec":"code","2aa2d780":"code","eaa46d8c":"code","df7cad1f":"code","7605690b":"code","53411003":"code","be08972b":"code","b6783224":"code","922c267b":"code","f2a09360":"code","f8c1c84f":"code","7979b674":"code","d2334a7b":"code","8920c971":"code","6e013b8e":"code","e864db81":"code","87171db5":"code","3d415808":"code","69440dca":"code","a7c59884":"code","a2b27d4d":"code","d95c1d58":"code","fb613189":"code","aed4de8b":"code","265d4ae0":"code","cdada70b":"code","2214974a":"code","27da3585":"code","e735a734":"code","72a6f741":"code","1de239f8":"code","9d4ca823":"markdown","56d146db":"markdown","ffcaeee1":"markdown","6aad05fa":"markdown","507b88c6":"markdown","a185b38e":"markdown","6f2adadc":"markdown","83a45f9b":"markdown","7adc6bf6":"markdown","c39cc5c6":"markdown","72f36e0e":"markdown","6f020fb1":"markdown","a370cbd2":"markdown","654e2e32":"markdown","80d4246a":"markdown","d75f8bd0":"markdown","67d7432d":"markdown","06c556f2":"markdown","2c53b0d2":"markdown","ca503099":"markdown"},"source":{"f49451d8":"import numpy as np\nimport pandas as pd\nimport seaborn as sns\nimport matplotlib.pyplot as plt","7fb3b189":"df=pd.read_csv(\"..\/input\/sydney-house-prices\/SydneyHousePrices.csv\")","00bf1862":"df.head()","c5dae56c":"df.info()","a61da7cf":"df[\"Date\"]=pd.to_datetime(df[\"Date\"])\ndf[\"Year\"]=df[\"Date\"].dt.year\ndf[\"Month\"]=df[\"Date\"].dt.month\ndf[\"Day\"]=df[\"Date\"].dt.day","8e4dd638":"df=df.drop([\"Id\",\"Date\"],axis=1)","c38c861f":"df.head()","e9ce741d":"df.describe().T","50306692":"df[\"new_column\"]=df[\"sellPrice\"]\ndf.drop([\"sellPrice\"],axis=1,inplace=True)\ndf.rename(columns={\"new_column\":\"sellPrice\"},inplace=True)","0d8d0450":"list_name=[]\nlist_type=[]\nlist_total_value=[]\nlist_missing_value=[]\nlist_unique_value=[]\n\nfor i in df.columns:\n    list_name.append(i)\n    list_type.append(str(df[i].dtype))\n    list_total_value.append(df[i].notnull().sum())\n    list_missing_value.append(df[i].isnull().sum())\n    list_unique_value.append(len(df[i].unique()))\n\n    df_info=pd.DataFrame(data={\"Total_Value\":list_total_value,\"Missing_Value\":list_missing_value,\"Unique_Value\":list_unique_value,\"Type\":list_type},index=list_name)","713e3be3":"df_info","1cbf2c03":"sns.set_style(\"whitegrid\")","f041efb4":"plt.figure(figsize=(15,6))\ndf[\"suburb\"].value_counts()[:15].plot.barh()","12a8e089":"plt.figure(figsize=(15,6))\ndf[\"propType\"].value_counts().plot.barh()","ec09d64c":"data_num=df.select_dtypes([\"float64\",\"int64\"]).columns","9c03035a":"fig,ax=plt.subplots(nrows=4,ncols=2,figsize=(15,15))\ncount=0\nfor i in range(4):\n    for j in range(2):\n        sns.kdeplot(df[data_num[count]],ax=ax[i][j],shade=True,color=\"#008080\")\n        count+=1","e3c69220":"plt.figure(figsize=(15,6))\nsns.countplot(df[\"propType\"],saturation=1,palette=\"pastel\")","7eccead1":"plt.figure(figsize=(15,6))\nsns.countplot(df[\"Month\"],palette=\"Set3\")","00445182":"plt.figure(figsize=(15,6))\nsns.countplot(df[\"Year\"],palette=\"hot_r\")","82560226":"fig,ax=plt.subplots(nrows=2,ncols=1,figsize=(15,12))\nsns.barplot(data=df,x=\"Year\",y=\"sellPrice\",color=\"#8E44AD\",ax=ax[0])\nsns.barplot(data=df,x=\"Month\",y=\"sellPrice\",color=\"#2ECC71\",ax=ax[1])","b9c26d18":"fig,ax=plt.subplots(nrows=2,ncols=1,figsize=(15,12))\nsns.pointplot(data=df,x=\"Year\",y=\"sellPrice\",color=\"#8E44AD\",ax=ax[0])\nsns.pointplot(data=df,x=\"Month\",y=\"sellPrice\",color=\"#2ECC71\",ax=ax[1])","d667d03a":"fig,ax=plt.subplots(nrows=2,ncols=1,figsize=(15,12))\nsns.pointplot(data=df,x=\"Year\",y=\"sellPrice\",hue=\"propType\",ax=ax[0],ci=None)\nsns.pointplot(data=df,x=\"Month\",y=\"sellPrice\",hue=\"propType\",ax=ax[1],ci=None)","95a39b6a":"heat = pd.pivot_table(data = df,\n                    index = 'Month',\n                    values = 'sellPrice',\n                    columns = 'Year')\nheat.fillna(0, inplace = True)","5ad779bd":"heat","64513988":"plt.figure(figsize=(15,10))\nplt.title('Heat map about Years and Mounths means ')\nsns.heatmap(heat)","febdde86":"plt.figure(figsize=(15,10))\nsns.heatmap(df.corr(),xticklabels=df.corr().columns,yticklabels=df.corr().columns,annot=True)","7444dbb7":"plt.figure(figsize=(15,12))\nsns.pairplot(df,vars=[\"bed\",\"bath\",\"car\",\"sellPrice\"])","ecc487ce":"list_value_counts=(df.groupby(\"suburb\")[\"sellPrice\"].mean().sort_values())[::-1].astype(\"int\")","581c8740":"list_value_counts[:5]","1b294d20":"suburb_grup1=list(list_value_counts[:137].index)\nsuburb_grup2=list(list_value_counts[137:274].index)\nsuburb_grup3=list(list_value_counts[274:411].index)\nsuburb_grup4=list(list_value_counts[411:548].index)\nsuburb_grup5=list(list_value_counts[548:685].index)","4f38dfd6":"df.replace(suburb_grup1,\"Group1\",inplace=True)\ndf.replace(suburb_grup2,\"Group2\",inplace=True)\ndf.replace(suburb_grup3,\"Group3\",inplace=True)\ndf.replace(suburb_grup4,\"Group4\",inplace=True)\ndf.replace(suburb_grup5,\"Group5\",inplace=True)","79b12c6a":"df.head()","2d9ac861":"dff=df.copy()","c99e8cec":"#propType_data=pd.get_dummies(df[\"propType\"],prefix=\"propType\")\n#suburp_data=pd.get_dummies(df[\"suburb\"],prefix=\"suburb\")\n#df.drop(\"propType\",axis=1,inplace=True)\n#df=pd.concat([df,suburp_data,propType_data],axis=1)\ndf = pd.get_dummies(df,columns= [\"suburb\",\"propType\"], prefix= [\"suburb\",\"propType\"])","2aa2d780":"df.head()","eaa46d8c":"data_num=list(df.select_dtypes([\"int64\",\"float64\"]).columns)\ndata_num.remove(\"Year\")\ndata_num.remove(\"Day\")\ndata_num.remove(\"Month\")","df7cad1f":"from warnings import filterwarnings\n\nfilterwarnings(\"ignore\")","7605690b":"fig, ax =plt.subplots(nrows=5,ncols=1,figsize=(18,16))\nfor i in range(5):\n    sns.boxplot(x = df[data_num[i]],ax=ax[i])\n    count = count+1","53411003":"lower_and_upper = {}\n\nfor col in data_num:\n    q1 = df[col].quantile(0.25)\n    q3 = df[col].quantile(0.75)\n    iqr = 1.5*(q3-q1)\n    \n    lower_bound = q1-iqr\n    upper_bound = q3+iqr\n    \n    lower_and_upper[col] = (lower_bound, upper_bound)\n    df.loc[(df.loc[:,col]<lower_bound),col]=lower_bound*0.75\n    df.loc[(df.loc[:,col]>upper_bound),col]=upper_bound*1.25\n    \n    \nlower_and_upper","be08972b":"fig, ax =plt.subplots(nrows=5,ncols=1,figsize=(18,16))\nfor i in range(5):\n    sns.boxplot(x = df[data_num[i]],ax=ax[i])\n    count = count+1","b6783224":"df.corr()[\"sellPrice\"]","922c267b":"import missingno as msno","f2a09360":"msno.bar(df)","f8c1c84f":"msno.matrix(df)","7979b674":"msno.heatmap(df)","d2334a7b":"from sklearn.impute import KNNImputer\nknn_imputer=KNNImputer()","8920c971":"df[\"bed\"]=knn_imputer.fit_transform(df[[\"bed\"]])\ndf[\"car\"]=knn_imputer.fit_transform(df[[\"car\"]])","6e013b8e":"msno.bar(df)","e864db81":"df = df.drop([\"postalCode\"],axis=1)\n\nfrom statsmodels.stats.outliers_influence import variance_inflation_factor\n\ndf_x = df.select_dtypes(include=[\"float64\",\"int64\"])\ndf_x.dropna(inplace=True)\nX = df_x.drop(\"sellPrice\",axis=1)\nvif = pd.DataFrame()\nvif[\"VIF_Factor\"] = [variance_inflation_factor(X.values,i)for i in range(X.shape[1])]\nvif[\"features\"] = X.columns","87171db5":"vif.head()","3d415808":"import statsmodels.api as sm\nfrom sklearn.model_selection import train_test_split\nfrom sklearn.model_selection import cross_val_score\nfrom sklearn.linear_model import LinearRegression","69440dca":"from sklearn.metrics import r2_score","a7c59884":"X=df.drop([\"sellPrice\",\"propType_acreage\",\"propType_warehouse\",\"Day\"],axis=1)\nY=df[\"sellPrice\"]\nX=sm.add_constant(X)","a2b27d4d":"X_train,X_test,Y_train,Y_test=train_test_split(X,Y,test_size=0.2,random_state=42)","d95c1d58":"stats_model=sm.OLS(Y_train,X_train).fit()\nprint(stats_model.summary())","fb613189":"X=df.drop([\"sellPrice\",\"propType_acreage\",\"propType_warehouse\",\"Day\"],axis=1)\nY=df[\"sellPrice\"]\nX_train,X_test,Y_train,Y_test=train_test_split(X,Y,test_size=0.2,random_state=42)","aed4de8b":"sklearn_model=LinearRegression().fit(X_train,Y_train)","265d4ae0":"cross_val_score(sklearn_model,X_train,Y_train,cv=10,scoring=\"r2\").mean()","cdada70b":"from sklearn.metrics import mean_squared_error","2214974a":"print(\"Train RMSE : \",np.sqrt(mean_squared_error(Y_train,sklearn_model.predict(X_train))))\nprint(\"Test RMSE : \",np.sqrt(mean_squared_error(Y_test,sklearn_model.predict(X_test))))","27da3585":"dff = pd.get_dummies(dff,columns= [\"suburb\",\"propType\"], prefix= [\"suburb\",\"propType\"])","e735a734":"from sklearn.preprocessing import MinMaxScaler\n\nscaler = MinMaxScaler(feature_range = (0,1))\narray = list(dff.select_dtypes(include=[\"float64\",\"int64\"]))\ndff.loc[:,array] = scaler.fit_transform(dff.loc[:,array])\n\n\n\n\ndff[\"bed\"]=knn_imputer.fit_transform(dff[[\"bed\"]])\ndff[\"car\"]=knn_imputer.fit_transform(dff[[\"car\"]])","72a6f741":"X=dff.drop([\"sellPrice\"],axis=1)\nY=dff[\"sellPrice\"]\nX_train,X_test,Y_train,Y_test=train_test_split(X,Y,test_size=0.2,random_state=42)","1de239f8":"sklearn_model=LinearRegression().fit(X,Y)\nprint(\"R2 Score :\",r2_score(Y_train,sklearn_model.predict(X_train)))\nprint(\"Train RMSE : \",np.sqrt(mean_squared_error(Y_train,sklearn_model.predict(X_train))))\nprint(\"Test RMSE: \",np.sqrt(mean_squared_error(Y_test,sklearn_model.predict(X_test))));","9d4ca823":"# MinMaxScaler on Data","56d146db":"# Get Dummies","ffcaeee1":"# Missing Data Filling","6aad05fa":"![](https:\/\/www.realestate.com.au\/blog\/images\/1600x1600-fit,progressive\/2019\/02\/12000152\/capi_a12b3c1c15aa9d9854e9cb4d5c2adf7f_8719970e41bbd1cb34801cc3c96851a8.jpeg)","507b88c6":"## Statsmodel","a185b38e":"## Data Visualization","6f2adadc":"## Sklearnmodel","83a45f9b":"#### What is the VIF?  Vif is very important to linear regression. As you know Linear Regression has several condition. VIF is one of them. If we want to minumum bias of our estimators, we should be careful about Vif values. \n\n#### VIF values must be < 10 this is the good news about us.\n","7adc6bf6":"## Representation of missing values, unique values, etc.","c39cc5c6":"## Variance Inflation Factor","72f36e0e":"## Content\n* Import Module and Data\n* Data Analysis\n* Representation of missing values, unique values, etc.\n* Data Visualization\n* Data Classification\n* Get Dummies\n* Outlier Data\n* Missing Data Filling\n* Building a Model","6f020fb1":"# Building a Model","a370cbd2":"# Sydney House Prices Introduction","654e2e32":"### Some of variable values are high but it doesn't problem , for the moment we ignore him.","80d4246a":"## Context\n200,000 Sydney property sales from 2000-2019 scarped from realestate.com.au","d75f8bd0":"## Data Analysis","67d7432d":"# Outlier Data","06c556f2":"## Data Classification","2c53b0d2":"## Import Module and Data","ca503099":"## Now, we saw the errors are so high. What can we do? At this point we'll use the MinMax Scaler method for see other results."}}