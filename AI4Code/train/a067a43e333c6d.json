{"cell_type":{"75fa9966":"code","3576e28c":"code","8759f59c":"code","9e272b30":"code","c5d87637":"code","34a85b6f":"code","0d776b12":"code","a57b810f":"code","f2506f8a":"code","b33b6783":"code","345203d0":"code","87518776":"code","5ccf7b16":"code","3c596914":"code","ee975da1":"code","1aef92ae":"code","decceb22":"code","dc975c01":"code","1012d557":"code","10a810f2":"code","324a5dda":"code","55e9442f":"code","efd5f776":"code","607ae65e":"code","ea973a0e":"code","0172e55b":"code","48d023fd":"code","075a7424":"code","47650f03":"code","b10d6f53":"code","c050afef":"code","f06111c5":"code","d80b3960":"code","6ce12f8d":"code","512c2187":"code","d76209d0":"code","db9d0b7b":"code","120eced9":"code","69e92183":"code","13b9b840":"markdown","812e1fe1":"markdown","abe63682":"markdown","d7e3a379":"markdown","226b7d24":"markdown","448713b1":"markdown","0fe9b79a":"markdown","e80b5b35":"markdown","8d9c7e8e":"markdown","f7eda904":"markdown","4c8a9422":"markdown","ada0b6fe":"markdown","21b43f6b":"markdown","7ecd476e":"markdown"},"source":{"75fa9966":"import numpy as np\nimport pandas as pd\nimport matplotlib.pyplot as plt\nimport seaborn as sns\n\nplt.rcParams['figure.figsize'] = [15, 8]\n\nfrom scipy import stats\n\nimport warnings\nwarnings.filterwarnings('ignore')","3576e28c":"df = pd.read_csv(\"..\/input\/default-of-credit-card-clients-dataset\/UCI_Credit_Card.csv\")\ndf.head()","8759f59c":"df.shape","9e272b30":"df.info()","c5d87637":"df.describe().T","34a85b6f":"df.isna().sum().sum()","0d776b12":"df.rename(columns={\"default.payment.next.month\":\"default\"}, inplace=True)\n\ndf.columns = df.columns.str.strip().str.replace(' ', '_').str.lower()","a57b810f":"preprocessed_df = df.copy()","f2506f8a":"## Unique values in each categorical columns\n\nprint(\"Sex\", preprocessed_df.sex.unique())\nprint('Education', preprocessed_df.education.unique())\nprint('Pay_0', preprocessed_df.pay_0.unique())\nprint('Marriage', preprocessed_df.marriage.unique())\nprint('Default', preprocessed_df.default.unique())","b33b6783":"fill = (df.education == 0) | (df.education == 5) | (df.education == 6)\npreprocessed_df.loc[fill, 'education'] = 4\ndf.loc[fill, 'education'] = 4","345203d0":"## marriage column also has 4 unique values but according to our data we only have three categories\n\nfill = (df.marriage == 0)\npreprocessed_df.loc[fill, 'marriage'] = 2\ndf.loc[fill, 'marriage'] = 2","87518776":"preprocessed_df = preprocessed_df.rename(columns={'pay_0': 'pay_1'})\npreprocessed_df.head()","5ccf7b16":"## Map categorical data\n\npreprocessed_df.sex = preprocessed_df.sex.map({1:'Male', 2:'Female'})\npreprocessed_df.default = preprocessed_df.default.map({0:'No', 1:'Yes'})\n\npreprocessed_df.education = preprocessed_df.education.map({1:'Graduate School',\n                                                          2:'University',\n                                                          3:'High School',\n                                                          4:'Others'})\n\npreprocessed_df.marriage = preprocessed_df.marriage.map({1:'Married',\n                                                        2:'Single',\n                                                        3:'Divorced'})","3c596914":"def plot_categorical_count(df, col, hue=None, hue_order=None, is_pct=True, figsize=(12,6)):\n    \n    plt.figure(figsize=figsize)\n    g = sns.countplot(data=df, x=col, hue=hue, hue_order=None)\n    for rect in g.patches:\n        h = rect.get_height()\n        w = rect.get_width()\n        x = rect.get_x()\n        y = rect.get_y()\n        g.annotate(f\"{h}\", (x+w\/2, h), va='bottom', ha='center', size=14)\n        \n    g.spines['top'].set_visible(False)\n    g.spines['left'].set_visible(False)\n    g.spines['right'].set_visible(False)\n    \n    plt.show()\n    \n    if is_pct:\n        print()\n        print(\"Percentage share of each category:\")\n        print(df[col].value_counts(normalize=True)*100)","ee975da1":"plot_categorical_count(preprocessed_df, 'default')","1aef92ae":"plot_categorical_count(preprocessed_df, 'sex')","decceb22":"plot_categorical_count(preprocessed_df, 'education')","dc975c01":"plot_categorical_count(preprocessed_df, 'marriage')","1012d557":"def default_df(df, col):\n    df1 = pd.crosstab(index=df[col], columns=df.default, margins=True)\n    df1.rename(columns={'No':'total_no_default', 'Yes':'total_yes_default', 'All':'total_default'}, inplace=True)\n    \n    df2 = pd.crosstab(index=df[col], columns=df.default, normalize='index', margins=True)\n    df2.rename(columns={'No':'pct_no_default', 'Yes':'pct_yes_default'}, inplace=True)\n    \n    final_df = pd.concat([df1, df2], axis=1)\n    \n    return final_df","10a810f2":"plot_categorical_count(preprocessed_df, col='sex', hue='default', is_pct=False)","324a5dda":"default_df(preprocessed_df, 'sex')","55e9442f":"plot_categorical_count(preprocessed_df, col='education', hue='default', is_pct=False)\n\ndefault_df(preprocessed_df, 'education')","efd5f776":"plot_categorical_count(preprocessed_df, col='marriage', hue='default', is_pct=False)\n\ndefault_df(preprocessed_df, 'marriage')","607ae65e":"pd.crosstab(preprocessed_df.pay_1, preprocessed_df.default, margins=True)","ea973a0e":"## Balance Limit\n\nsns.histplot(data=preprocessed_df, x='limit_bal', hue='default', \n             kde=True, line_kws={'ls':'--', 'lw':2})\nplt.show()","0172e55b":"sns.boxplot(data=preprocessed_df, x='default', y='limit_bal')\nplt.show()","48d023fd":"df.groupby('default')['limit_bal'].agg(['mean', 'median', 'std'])","075a7424":"## hypothesis test to check whether average balance for dafaulters and non-defaulters are same\n\nres = stats.ttest_ind(preprocessed_df.limit_bal.loc[preprocessed_df.default=='Yes'], \n                preprocessed_df.limit_bal.loc[preprocessed_df.default=='No'])\n\nprint(f\"P-Value: {res[1]:.3f}\")","47650f03":"## Age \n\nsns.histplot(data=preprocessed_df, x='age', hue='default', \n            kde=True, line_kws={'ls':'--', 'lw':2})\nplt.show()","b10d6f53":"sns.boxplot(data=preprocessed_df, x='default', y='age')\nplt.show()","c050afef":"## hypothesis test to check whether average age for dafaulters and non-defaulters are same\n\nres = stats.ttest_ind(preprocessed_df.age.loc[preprocessed_df.default=='Yes'], \n                preprocessed_df.age.loc[preprocessed_df.default=='No'])\n\nprint(f\"P-Value: {res[1]:.3f}\")","f06111c5":"age_df = pd.crosstab(preprocessed_df.age, preprocessed_df.default, normalize='index')\n\nplt.bar(x=age_df.index, height=age_df.No, label='Non-Defaulter')\nplt.bar(x=age_df.index, height=age_df.Yes, bottom=age_df.No, label='Defaulter')\n\nplt.xticks(ticks=range(20,81))\nplt.xlabel(\"Age\")\nplt.ylabel(\"Percentage\")\nplt.title(\"Percentage of Defaulters and Non-Defaulters\")\n\nplt.legend()\nplt.show()","d80b3960":"## Pay delays\n\ndef display_pay_delays(df, col):\n    x = pd.crosstab(index=df[col], columns=df.default, normalize='index')\n    x = x.style.highlight_max(color='orange', axis=1)\n    return x","6ce12f8d":"#  repayment status in September\n\ndisplay_pay_delays(preprocessed_df, 'pay_1')","512c2187":"#  repayment status in August\n\ndisplay_pay_delays(preprocessed_df, 'pay_2')","d76209d0":"#  repayment status in July\n\ndisplay_pay_delays(preprocessed_df, 'pay_3')","db9d0b7b":"## pay amount in September\n\npreprocessed_df.groupby('default')['pay_amt1'].agg(['min', 'max', 'mean', 'median', 'std']).T","120eced9":"corr_matrix = df.corr(method='spearman')\n\n\nplt.figure(figsize=(20,15))\nsns.heatmap(corr_matrix, cmap='Pastel1', annot=True, fmt='.2g', mask=np.triu(corr_matrix))\nplt.show()","69e92183":"corr_matrix.iloc[:-1, -1].plot.bar(color='orange')\nplt.xlabel(\"Features\")\nplt.ylabel(\"Correlation\")\nplt.title(\"Correlation of default feature with all other features\", fontdict={'size':16})\nplt.show()","13b9b840":"- around 24% of male customers have defaulted and around 20% of female customers have defaulted.","812e1fe1":"- Dua, D. and Graff, C. (2019). [UCI Machine Learning Repository](http:\/\/archive.ics.uci.edu\/ml). Irvine, CA: University of California, School of Information and Computer Science.\n- Yeh, I. C., & Lien, C. H. (2009). The comparisons of data mining techniques for the predictive accuracy of probability of default of credit card clients. Expert Systems with Applications, 36(2), 2473-2480.\n- [Dataset](https:\/\/archive.ics.uci.edu\/ml\/datasets\/default+of+credit+card+clients)","abe63682":"## Sources","d7e3a379":"## Bivariate Analysis","226b7d24":"# EDA","448713b1":"<h1>Table of Contents<span class=\"tocSkip\"><\/span><\/h1>\n<div class=\"toc\"><ul class=\"toc-item\"><li><span><a href=\"#Data-Loading-and-Preprocesssing\" data-toc-modified-id=\"Data-Loading-and-Preprocesssing-1\"><span class=\"toc-item-num\">1&nbsp;&nbsp;<\/span>Data Loading and Preprocesssing<\/a><\/span><\/li><li><span><a href=\"#EDA\" data-toc-modified-id=\"EDA-2\"><span class=\"toc-item-num\">2&nbsp;&nbsp;<\/span>EDA<\/a><\/span><ul class=\"toc-item\"><li><span><a href=\"#Univariate-Analysis\" data-toc-modified-id=\"Univariate-Analysis-2.1\"><span class=\"toc-item-num\">2.1&nbsp;&nbsp;<\/span>Univariate Analysis<\/a><\/span><\/li><li><span><a href=\"#Bivariate-Analysis\" data-toc-modified-id=\"Bivariate-Analysis-2.2\"><span class=\"toc-item-num\">2.2&nbsp;&nbsp;<\/span>Bivariate Analysis<\/a><\/span><\/li><li><span><a href=\"#Correlation\" data-toc-modified-id=\"Correlation-2.3\"><span class=\"toc-item-num\">2.3&nbsp;&nbsp;<\/span>Correlation<\/a><\/span><\/li><li><span><a href=\"#Building-a-Profile-of-a-High-Risk-Customer\" data-toc-modified-id=\"Building-a-Profile-of-a-High-Risk-Customer-2.4\"><span class=\"toc-item-num\">2.4&nbsp;&nbsp;<\/span>Building a Profile of a High-Risk Customer<\/a><\/span><\/li><li><span><a href=\"#Sources\" data-toc-modified-id=\"Sources-2.5\"><span class=\"toc-item-num\">2.5&nbsp;&nbsp;<\/span>Sources<\/a><\/span><\/li><\/ul><\/li><\/ul><\/div>","0fe9b79a":"- The EDUCATION column has 7 unique values, but as per our data description, we have only 4 unique values, so we are going to club categories 0, 5, and 6 with category 4","e80b5b35":"## Correlation","8d9c7e8e":"## Univariate Analysis","f7eda904":"# Data Loading and Preprocesssing","4c8a9422":"- we can infer that customers with higher balances have a lower likelihood of default than customers with lower balance amounts.","ada0b6fe":"## Building a Profile of a High-Risk Customer\n\n- A male customer is more likely to default than a female customer.\n- People with a relationship status of other are more likely to default than married or single people.\n- A customer whose highest educational qualification is a high-school diploma is more likely to default than a customer who has gone to graduate school or university.\n- A customer who has delayed payment for 2 consecutive months has a higher probability of default.\n- A customer who is 22 years of age has a higher probability of defaulting on payments than any other age group.","21b43f6b":"- People with high pay amount in month September are less likely to default than people with less pay amount.","7ecd476e":"- we can see that the maximum count of defaults falls under subcategory 2\u2014that is, a payment delay for the last 2 months. This implies that a customer who has missed payments for 2 continuous months has a high probability of default."}}