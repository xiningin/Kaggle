{"cell_type":{"010f913c":"code","1400f351":"code","74668141":"code","5681536f":"code","1d4aab2a":"code","b1c334c7":"code","73059a26":"code","11551503":"code","1ced2744":"code","6fffd22d":"code","313d7697":"code","e0e22c6f":"code","6c96a0a6":"code","31bb2953":"code","59130fcf":"code","6ac65807":"code","ffddf065":"code","2084cf2e":"code","f67b8c95":"code","4d330503":"code","ef1d21f7":"markdown","f5f2a91a":"markdown","1e312e27":"markdown","b1f6559c":"markdown","508bed72":"markdown"},"source":{"010f913c":"# init\nimport os\nimport numpy as np\nimport pandas as pd\nimport time\nimport warnings \n\nimport matplotlib.pyplot as plt\nfrom wordcloud import WordCloud, STOPWORDS, ImageColorGenerator\n\nwarnings.filterwarnings('ignore')","1400f351":"# load metadata\nt1 = time.time()\ndf = pd.read_csv('..\/input\/CORD-19-research-challenge\/metadata.csv')\nt2 = time.time()\nprint('Elapsed time:', t2-t1)","74668141":"# define keyword\nmy_keyword = 'main protease'","5681536f":"def word_finder(i_word, i_text):\n    found = (str(i_text).lower()).find(str(i_word).lower()) # avoid case sensitivity\n    if found == -1:\n        result = 0\n    else:\n        result = 1\n    return result\n\n# partial function for mapping\nword_indicator_partial = lambda text: word_finder(my_keyword, text)\n# build indicator vector (0\/1) of hits\nkeyword_indicator = np.asarray(list(map(word_indicator_partial, df.abstract)))","1d4aab2a":"# number of hits\nprint('Number of hits for keyword <', my_keyword, '> : ', keyword_indicator.sum())","b1c334c7":"# add index vector as additional column\ndf['selection'] = keyword_indicator\n\n# select only hits from data frame\ndf_hits = df[df['selection']==1]","73059a26":"# show results\ndf_hits","11551503":"# look at an example: metadata first\ndf_hits.iloc[0]","1ced2744":"# look at an example: the abstract itself\ndf_hits.abstract.iloc[0]","6fffd22d":"# define keyword\nmy_keyword2 = 'vaccine'","313d7697":"# partial function for mapping\nword_indicator_partial2 = lambda text: word_finder(my_keyword2, text)\n# build indicator vector (0\/1) of hits\nkeyword_indicator2 = np.asarray(list(map(word_indicator_partial2, df_hits.abstract)))","e0e22c6f":"# number of hits\nprint('Number of hits for keywords <', my_keyword, '> + <', my_keyword2, '> : ', keyword_indicator2.sum())","6c96a0a6":"# add index vector as additional column\ndf_hits['selection'] = keyword_indicator2\n\n# select only hits from data frame\ndf_hits2 = df_hits[df_hits['selection']==1]","31bb2953":"df_hits2","59130fcf":"# look at an example: metadata first\ndf_hits2.iloc[0]","6ac65807":"# look at an example: the abstract itself\ndf_hits2.abstract.iloc[0]","ffddf065":"# save selection to CSV file for further evaluations\ndf_hits2.to_csv('selection.csv')","2084cf2e":"text = \" \".join(abst for abst in df_hits2.abstract)","f67b8c95":"stopwords = set(STOPWORDS)","4d330503":"wordcloud = WordCloud(stopwords=stopwords, max_font_size=50, max_words=500,\n                      width = 600, height = 400,\n                      background_color=\"white\").generate(text)\nplt.figure(figsize=(12,8))\nplt.imshow(wordcloud, interpolation=\"bilinear\")\nplt.axis(\"off\")\nplt.show()","ef1d21f7":"# Filter articles by keywords","f5f2a91a":"### Use another keyword","1e312e27":"# Wordcloud of abstracts","b1f6559c":"### Import data","508bed72":"### Search for specific keyword in abstracts"}}