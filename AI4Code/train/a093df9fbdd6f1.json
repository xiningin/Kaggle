{"cell_type":{"e89700cd":"code","d6adeacb":"code","e6ff909f":"code","326403f7":"code","16718954":"code","c2da66f7":"code","653b76ff":"code","cbfb75f2":"code","37f8ca4a":"code","0456b191":"code","ca23c1dc":"code","d6680a0f":"code","9db9486a":"code","47ed9fe0":"code","3de152e3":"code","1433b4f9":"code","081d33bb":"code","e0dd8a22":"code","9b829339":"code","25b8a42a":"code","869516e3":"code","29cbb4e3":"code","ae7154ea":"code","436a28a7":"code","d48e908a":"code","322bbbe4":"code","40a90f1d":"code","4581d3b5":"code","417b6b3f":"code","17a2bff2":"code","c3f9dacf":"code","88257bd1":"code","f979ae4f":"code","377107ac":"markdown","a882b292":"markdown","e50c3af1":"markdown","652ca70b":"markdown","46a27f7a":"markdown","3f3a0a09":"markdown","a33111b6":"markdown","f9501d7c":"markdown","ab454b40":"markdown","dd1e51a1":"markdown","1b83e825":"markdown","368693a2":"markdown","fb7b7249":"markdown","afd661cb":"markdown","9b1e90a3":"markdown","7958f7e4":"markdown","c0e1765f":"markdown","6edf7b0c":"markdown","0936b78f":"markdown","20db9487":"markdown","e812b5d7":"markdown","77802915":"markdown","a2894e56":"markdown","92aa712b":"markdown","403dffe4":"markdown","fc6c6940":"markdown","f15ae317":"markdown","b32bca43":"markdown","d6347927":"markdown","9ee3bad5":"markdown","abf27537":"markdown","9faf39de":"markdown","61a568c4":"markdown","d0caa707":"markdown","6dc557c2":"markdown","e8935cf9":"markdown","d7e54d69":"markdown"},"source":{"e89700cd":"import pandas as pd\nimport numpy as np\nimport seaborn as sns\nimport matplotlib.pyplot as plt\n%matplotlib inline","d6adeacb":"titanic=pd.read_csv('..\/input\/titanic\/train.csv')\ntitanic.head()","e6ff909f":"titanic.dtypes","326403f7":"cat_feat=['Name','Sex','Ticket','Cabin','Embarked']","16718954":"titanic.drop(cat_feat, axis=1,inplace=True)\ntitanic.head()","c2da66f7":"titanic.describe()","653b76ff":"titanic.groupby('Survived').mean()","cbfb75f2":"titanic.groupby(titanic['Age'].isnull()).mean() #it will return True or False - if the rows have mising values or not\n","37f8ca4a":"for i in ['Age', 'Fare']:\n    died = list(titanic[titanic['Survived'] == 0][i].dropna())\n    survived = list(titanic[titanic['Survived'] == 1][i].dropna())\n    xmin = min(min(died), min(survived))\n    xmax = max(max(died), max(survived))\n    width = (xmax - xmin) \/ 40\n    sns.distplot(died, color='r', kde=False, bins=np.arange(xmin, xmax, width))\n    sns.distplot(survived, color='g', kde=False, bins=np.arange(xmin, xmax, width))\n    plt.legend(['Did not survive', 'Survived'])\n    plt.title('Overlaid histogram for {}'.format(i))\n    plt.show()\n    ","0456b191":"for i, col in enumerate(['Pclass','SibSp','Parch']): #enumerate returns the index of the list and actual items in the list \n    plt.figure(i) \n    sns.catplot(x=col, y='Survived', data=titanic, kind='point', aspect=2) #you can also explore other kinds of plot in seaborn documentation","ca23c1dc":"titanic['family_count']=titanic['SibSp']+titanic['Parch']\nsns.catplot(x='family_count',y='Survived', data=titanic, kind='point', aspect=2)","d6680a0f":"titanic.drop('PassengerId', axis=1,inplace=True)\ntitanic.head()","9db9486a":"titanic.groupby(titanic['Age'].isnull()).mean() #it will return True or False - if the rows have mising values or not\n","47ed9fe0":"titanic['Age'].fillna(titanic['Age'].mean(),inplace=True)\ntitanic.isna().sum()","3de152e3":"titanic.head(10)","1433b4f9":"titanic.drop(['SibSp','Parch'], axis=1,inplace=True)\ntitanic.head(5)","081d33bb":"titanic=pd.read_csv('..\/input\/titanic\/train.csv')\ntitanic.head()","e0dd8a22":"# Drop all continuous features\ncont_feat = ['PassengerId', 'Pclass', 'Name', 'Age', 'SibSp', 'Parch', 'Fare']\ntitanic.drop(cont_feat, axis=1, inplace=True)\ntitanic.head()","9b829339":"titanic.info()","25b8a42a":"titanic.groupby(titanic['Cabin'].isnull()).mean()","869516e3":"titanic['Cabin_ind'] = np.where(titanic['Cabin'].isnull(), 0, 1) #this is like if-else condition \n# using np.where - if it is null show '0' else '1'\ntitanic.head(10)","29cbb4e3":"for i, col in enumerate(['Cabin_ind', 'Sex', 'Embarked']):\n    plt.figure(i)\n    sns.catplot(x=col, y='Survived', data=titanic, kind='point', aspect=2)","ae7154ea":"titanic.pivot_table('Survived',index='Sex',columns='Embarked',aggfunc='count')","436a28a7":"titanic.pivot_table('Survived',index='Cabin_ind',columns='Embarked',aggfunc='count')","d48e908a":"import numpy as np\nimport pandas as pd\n\ntitanic = pd.read_csv('..\/input\/titanic\/train.csv')\ntitanic.drop(['Name', 'Ticket'], axis=1, inplace=True)\ntitanic.head()","322bbbe4":"titanic['Cabin_ind'] = np.where(titanic['Cabin'].isnull(), 0, 1)\ntitanic.head()","40a90f1d":"gender_num = {'male':0 , 'female':1 }\ntitanic['Sex']=titanic['Sex'].map(gender_num)\ntitanic.head(5)","4581d3b5":"titanic.drop(['Cabin', 'Embarked'], axis=1, inplace=True)\ntitanic.head(5)","417b6b3f":"from sklearn.model_selection import train_test_split","17a2bff2":"titanic_1=pd.read_csv('..\/input\/titanic\/train.csv')\ntitanic_1.head()","c3f9dacf":"features=titanic_1.drop('Survived',axis=1)\nlabels=titanic_1['Survived']","88257bd1":"X_train,X_test,y_train,y_test=train_test_split(features,labels,test_size=0.4,random_state=42)\nX_test,X_val,y_train,y_val=train_test_split(X_test,y_test,test_size=0.5,random_state=42)\n","f979ae4f":"print(len(labels),len(y_train),len(y_val),len(y_test))","377107ac":"# Thus we just found out, 'Cabin' has a very strong co-relation with 'Survived' and 'Sex' and hence important for further analysis. ","a882b292":"**It says, 66% of passengers who have non-missing cabin values survived**","e50c3af1":"**We have Cabin-ind, hence drop Cabin and Embarked**","652ca70b":"# Converting Sex to numeric ","46a27f7a":"**Look at 'S' - over 515 passengers had no cabins - hence, we can see there are more deaths in S**\n**In Q, they are way more people with no cabin and hardly 4 of them had one**\n**Look at 'C', 69% had cabins - which goes on to say - why it had a much higher survival rate**","3f3a0a09":"# Plot Categorical values with catplot","a33111b6":"**So for those who's Age is mising, they were having no parents or children or spouses - they belonged to 2nd Pclass and the fare was lower too**","f9501d7c":"# Exploring Categorical features","ab454b40":"**Look at 'Cabin'- they are 204 non-null values, that is a lot of missing data**","dd1e51a1":"# Observations:\n","1b83e825":"1. **The points that you se on those graphs, they represent 'Survived' rate.**\n2. **Look in the 1st Pclass graph , it is visible that around 63% of the passengers in Pclass-1 survived.**\n3. **The vertical bars that pass through the point is 'Error'.**\n4. **People with less 'SibSp' or siblins are less likely to survive.**\n5. **Hence, it seems you are less likely to survive if you have more siblings,children or parents.**","368693a2":"**Filling in the missing age**","fb7b7249":"**Females survived more than males**\n**The ones who embarked on S and Q survived less.**\n**Also, may be passengers with more family members embarked on S and Q or more single males embarked there**","afd661cb":"# Now let's look at the average age of passenger that survived and that didn't - using groupby","9b1e90a3":"# Age has mising values - but when we have missing values we must check if the values are not present systematically or were not taken in the 1st place","7958f7e4":"**Then look at Survived (which is also our target variable(Y) - it is either 0 or 1). \nLook at the mean in such cases,because it is binary- either 0 or 1. it imeans 38.38% only survived in our dataset**","c0e1765f":"**Look at 'S' - roughly more than double the female count i.e,441 males onboarded in Southampton - and its visible in the graph. The survived rate is too low. Hence, males survived less**","6edf7b0c":"# Continuos Data Cleaning","0936b78f":"# Did you notice ? \n\n**In our dataset, we have 'SibSp' and 'Parch' being repeated again whereas we alreadty summed them up already under 'family_count'.**\n\n**Now this creates the condition called 'Multi-collinearity'**\n\n**'Multi-collinearity' when you have multiple features that add the similar information to my dataset and doesn't really add any insight**","20db9487":"# Just how we use pivot in excel,","e812b5d7":"# Splitting the data for train\/test and validation","77802915":"**These features are categorical - object **","a2894e56":"# Average age of one who Survived is 28 and one who did not is 30","92aa712b":"# Combining SibSp and Parch under Family count","403dffe4":"**Which clearly means, while saving or rescuing they preferred richer pasengers over 3rd category ones**","fc6c6940":"**So yes, the overall trend says it - if you have more members in family you are les likely to survive**","f15ae317":"**Read the file**","b32bca43":"# Look at the 'Fare' column - \n**The average Fare of those who survived is 48 while that of who didn't is 22, less than 50%**","d6347927":"**Now, X_train and y_train represents 60% of our data**\n\n**y_train and y_test represent 20% of data**\n\n**X_val and y_val represent remaining 20% of the data**","9ee3bad5":"**Look at the Count for all the variables : All are 981 except Age, which means there are missing values in Age**","abf27537":"**Search for categorical columns and drop them**","9faf39de":"**We have no mising values in Age now**","61a568c4":"# Categorical Data Cleaning : ","d0caa707":"**split**","6dc557c2":"**Look at the index no.5 - the value is a float , while all others integers. this means the value there was missing first and is now filled with average or mean|**","e8935cf9":"# Create Cabin indicator","d7e54d69":"# Plotting continuos features - focus on age and fare"}}