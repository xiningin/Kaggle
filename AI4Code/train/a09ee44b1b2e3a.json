{"cell_type":{"f0703fd5":"code","ab275e90":"code","43be9550":"code","787f1ee7":"code","f8f5e69d":"code","f9494226":"code","9b378274":"code","70783db8":"code","fb9256cc":"code","7b76c7b4":"code","d76ccadc":"code","075ced8f":"code","437bf473":"code","6f66bc10":"code","d40f13fe":"markdown","20388468":"markdown","2b2db21e":"markdown","cee40bdc":"markdown"},"source":{"f0703fd5":"import sys\n!{sys.executable} -m pip install bar_chart_race","ab275e90":"import pandas as pd\nimport numpy as np\nimport matplotlib.pyplot as plt\nimport os\n\nimport bar_chart_race as bcr\nfrom IPython.display import HTML\nimport warnings\nwarnings.filterwarnings(\"ignore\")\nfrom IPython.display import Video","43be9550":"data=pd.read_csv('..\/input\/billboard-hot-100-full-history\/billboard-hot-100-tracks.csv')\ndata","787f1ee7":"data.info()","f8f5e69d":"data['artist-song']=data['artist']+' - '+data['song']\ndata","f9494226":"data['year']=data['date'].apply(lambda x: int(x.split('-')[0]))\ndata","9b378274":"data1=data[data['rank']<11]","70783db8":"data2=data1[data1['year']>2017]\ndata2=data2.reset_index(drop=True)\ndata2","fb9256cc":"N0=list(range(10,0,-1))\nN1=list(range(1,11))\nprint(N0)\nprint(N1)\nnormal_mapping=dict(zip(N0,N1)) ","7b76c7b4":"data2['rank2']=data2['rank'].map(normal_mapping)","d76ccadc":"data3=data2[['date','rank2','artist-song','rank']]\ndata3","075ced8f":"# set double indexes and unsack!!!\ndata4=data3.set_index(['date','artist-song']).unstack()['rank2']\ndata4=data4.fillna(0)\ndata4","437bf473":"df = data4\nbcr.bar_chart_race(\n    df=df,\n    filename='BCR_BillboardHot100.mp4',\n    orientation='h',\n    sort='desc',   #'desc',\n    n_bars=10,\n    fixed_order=False,\n    fixed_max=10,\n    steps_per_period=8,\n    interpolate_period=False,\n    label_bars=True,\n    bar_size=.6,\n    period_label={'x': .99, 'y': .10, 'ha': 'right', 'va': 'center'},\n    #period_fmt='%B %d, %Y',\n    period_summary_func=lambda v, r: {'x': .99, 'y': .18,'s': '',\n                                      'ha': 'right', 'size':12, 'family': 'Courier New'},\n    #perpendicular_bar_func='median',\n    period_length=1000,\n    figsize=(6,4),\n    dpi=500,\n    cmap='dark24',\n    title='Billboard Hot 100 in 2018-2021 - Bar Chart Race',\n    title_size=15,\n    bar_label_size=10,\n    tick_label_size=5,\n    shared_fontdict={'color' : '.1'},\n    scale='linear',\n    writer=None,\n    fig=None,\n    bar_kwargs={'alpha': .5},\n    filter_column_colors=True\n)","6f66bc10":"Video(\"\/kaggle\/working\/BCR_BillboardHot100.mp4\", width=800, height=600, embed=True)","d40f13fe":"# Data preparation","20388468":"# Dataframe for Bar Chart Race","2b2db21e":"# Bar Chart Race\n","cee40bdc":"# Bar Chart Race of Suicide Rates 1985 to 2015\n* cf. https:\/\/www.dexplo.org\/bar_chart_race\/\n* cf. https:\/\/github.com\/dexplo\/bar_chart_race\/"}}