{"cell_type":{"2a2c60a8":"code","02a672bc":"code","c1a57d9a":"code","653ed045":"code","a25e5f3e":"code","c297bf75":"code","8fa3f8f7":"code","ddae43d2":"code","c64d9881":"code","29761cb1":"code","96b6038b":"code","bc7ccaef":"code","4c725b6f":"code","824188c7":"code","8204a184":"code","6fb2e169":"code","23653f43":"code","74808a37":"code","a12aa993":"code","f046ea63":"markdown","11ed77c2":"markdown","1c79c78c":"markdown","597f0a0a":"markdown","975304ee":"markdown","77f52405":"markdown","68746984":"markdown","b6e908c0":"markdown","2d65d6d3":"markdown","23a6a990":"markdown","6f68335b":"markdown","e29a5615":"markdown"},"source":{"2a2c60a8":"# This Python 3 environment comes with many helpful analytics libraries installed\n# It is defined by the kaggle\/python docker image: https:\/\/github.com\/kaggle\/docker-python\n# For example, here's several helpful packages to load in \n\nimport numpy as np # linear algebra\nimport pandas as pd # data processing, CSV file I\/O (e.g. pd.read_csv)\n\n# Data visualization\nimport matplotlib.pyplot as plt\nimport seaborn as sns\n\n# regular expressions\nimport re \n\n#Counter\nfrom collections import Counter\n\n#setting display options\npd.set_option('display.max_columns', 100)\npd.set_option('display.max_rows', 100)","02a672bc":"df_fifa19 = pd.read_csv(r'..\/input\/data.csv')\ndf_fifa19.head(5)","c1a57d9a":"# cheking the shape of the data\ndf_fifa19.shape","653ed045":"#display all columns\ndf_fifa19.columns","a25e5f3e":"# Selecting only interested columns\nchosen_attributes = [\n            'Acceleration',\n            'Age',\n            'Aggression',\n            'Agility',\n            'Balance',\n            'BallControl',\n            'Body Type',\n            'Club',\n            'Composure',\n            'Contract Valid Until',\n            'Crossing',\n            'Curve',\n            'Dribbling',\n            'Finishing',\n            'FKAccuracy',\n            'Flag',\n            'GKDiving',\n            'GKHandling',\n            'GKKicking',\n            'GKPositioning',\n            'GKReflexe',\n            'GKReflexes',\n            'HeadingAccuracy',\n            'Height',\n            'Interceptions',\n            'International Reputation',\n            'Jersey Number',\n            'Joined',\n            'Jumping',\n            'LongPassing',\n            'LongShots',\n            'Marking',\n            'Name',\n            'Nationality',\n            'Overall',\n            'Penalties',\n            'Photo',\n            'Position',\n            'Positioning',\n            'Potential',\n            'Preferred Foot',\n            'Reactions',\n            'ShortPassing',\n            'ShotPower',\n            'Skill Moves',\n            'SlidingTackle',\n            'Special',\n            'SprintSpeed',\n            'Stamina',\n            'StandingTackle',\n            'Strength',\n            'Value',\n            'Vision',\n            'Volleys',\n            'Wage',\n            'Weak Foot',\n            'Weight',\n            'Work Rate'\n]\n\ndf = pd.DataFrame(df_fifa19 , columns = chosen_attributes)","c297bf75":"#Transforming Wage and value to numeric\n\ndef convert_value(value):\n    numeric_val = float(re.findall('\\d+\\.*\\d*', value)[0])\n    if 'M' in value:\n        numeric_val*= 1000000\n    elif 'K' in value:\n        numeric_val*= 1000\n    return int(numeric_val)\n    \n\n\n#Wage contains data in these formats(\u20ac0 ,\u20ac100k...)\ndf['Wage'] = df['Wage'].apply(lambda x: int(re.findall('\\d+', x)[0])* 1000)\ndf['Value'] = df['Value'].apply(convert_value)","8fa3f8f7":"plt.figure(1 , figsize = (20 , 13))\ncorr_columns = ['Acceleration', 'Age', 'Aggression', 'Agility', 'Balance', 'BallControl', 'Crossing', 'Dribbling', \n                'Finishing', 'FKAccuracy', 'HeadingAccuracy', 'Height', 'Interceptions', 'Jumping', 'LongPassing', \n                'LongShots', 'Overall', 'Penalties', 'Positioning', 'Preferred Foot', 'ShortPassing', 'ShotPower', \n                'Skill Moves', 'SprintSpeed', 'Stamina', 'Strength', 'Value', 'Vision', 'Volleys', 'Weak Foot', \n                'Weight', 'Work Rate']\ncorr_mat = df[corr_columns].corr()\nmask = np.zeros_like(corr_mat)\nmask[np.triu_indices_from(mask,k=1)] = True\nheat_map = sns.heatmap(corr_mat,annot = True, linewidths=.5, cmap='YlOrBr', mask=mask)\nheat_map.set_title(label='Heatmap of attributes', fontsize=16)\nheat_map","ddae43d2":"def plot_bar_plot(x = None, y = None, data = None ,hue =None, x_tick_rotation = None ,xlabel = None , \n                  ylabel = None , title = '',ylim = None, palette= None):\n    plt.figure(1 , figsize = (15 , 6))\n    if x_tick_rotation:\n        plt.xticks(rotation = x_tick_rotation)\n    if ylim:\n        plt.ylim(ylim)\n    if title:\n        plt.title(title)\n    sns.barplot(x = x, y = y, hue = hue, data = data, palette= palette)\n    ","c64d9881":"top_30_players = df.sort_values(by = 'Overall' ,ascending = False ).head(30)\nplot_bar_plot(x = \"Name\", y = \"Overall\", data = top_30_players, palette = 'RdBu', x_tick_rotation= 90 , ylim=(85,96) , title='Top 30 players with highest rating')","29761cb1":"top_100_players = df.sort_values(by = 'Overall' ,ascending = False ).head(100)\nplt.figure(1 , figsize = (15 , 6))\ntop_100_players['Age'].plot(kind = 'hist' , bins = 50)\nplt.xlabel('Player\\'s age')\nplt.ylabel('Number of players')\nplt.title('Top 100 players Age distribution')\nplt.show()","96b6038b":"oldest_player_in_top_100 = top_100_players.sort_values(by = 'Age' ,ascending = False ).head(1)[['Name','Age','Overall','Club','Position']]\nprint(oldest_player_in_top_100)\n","bc7ccaef":"youngest_player_in_top_100 = top_100_players.sort_values(by = 'Age' ,ascending = True ).head(1)[['Name','Age','Overall','Club','Position']]\nprint(youngest_player_in_top_100)","4c725b6f":"df_g = df.groupby(['Club']).sum()[['Overall','Value','Wage']]\ndf_top_10_club_value = df_g.sort_values(by='Value',ascending=False).head(10)\ndf_top_10_club_value.reset_index(inplace=True)\ndf_top_10_club_value","824188c7":"plot_bar_plot(x = \"Club\", y = \"Value\", data = df_top_10_club_value, x_tick_rotation= 90 , ylim=(5e8,9e8), palette=\"Blues_d\", title=\"Club with highest player value\")","8204a184":"df_top_10_club_wage = df_g.sort_values(by='Wage',ascending=False).head(10)\ndf_top_10_club_wage.reset_index(inplace=True)\ndf_top_10_club_wage","6fb2e169":"plot_bar_plot(x = \"Club\", y = \"Wage\", data = df_top_10_club_wage, x_tick_rotation= 90 , ylim=(1e6,5.5e6), palette=\"Blues_d\", title=\"Club with highest player Wages\")","23653f43":"plt.figure(1 , figsize = (18 , 10))\np1=sns.regplot(data=df_top_10_club_value, x=\"Value\", y=\"Wage\", fit_reg=False, marker=\"o\", color=\"skyblue\", scatter_kws={'s':400})\nplt.title('Comparison of Players Total wage and Total Value')\nfor line in range(0,df_top_10_club_value.shape[0]):\n     p1.text(df_top_10_club_value.Value[line]+0.2, df_top_10_club_value.Wage[line], df_top_10_club_value.Club[line], horizontalalignment='left', size='medium', color='black', weight='semibold')","74808a37":"countries_with_most_players = [data[0] for data in Counter(df['Nationality']).most_common()[:20]]\ndf_country = df.loc[df['Nationality'].isin(countries_with_most_players) ]","a12aa993":"plt.figure(1 , figsize = (15 , 6))\nplt.xticks(rotation = 90)\nplt.title('Total Number of players by country')\nsns.countplot(x=\"Nationality\", data=df_country, palette=\"rocket\" )","f046ea63":"> ## **Top 10 Clubs based on Market value of Players **","11ed77c2":"> #  **Club wise Statistics**","1c79c78c":"> #  **Country wise Statistics**","597f0a0a":"<img src=\"https:\/\/cdn.sofifa.org\/players\/4\/19\/231747.png\" width = 100 height = 100 >\n","975304ee":"> ## **Club Value and Players Wage Comparison**","77f52405":"**Analysis Based on Overall Performance**","68746984":"> **Age distribution of top 100 players**","b6e908c0":"> ## **Gianluigi Buffon (40) is the oldest player in Top 100 **","2d65d6d3":"> ## **Clubs with Most Wage bills**","23a6a990":"> ## **Youngest Player in Top 100 is kylian mbappe (19)**","6f68335b":"> **Top 30 Players**\n","e29a5615":"> ### **Age is Just a Number for G.Buffon**\n\n<img src=\"https:\/\/cdn.sofifa.org\/players\/4\/19\/1179.png\"  width = 100 height = 100 >\n"}}