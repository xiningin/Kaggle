{"cell_type":{"61ec7bba":"code","2b43ce2e":"code","2fc51bdb":"code","bf667836":"code","dd4a86a9":"code","244f85d2":"code","837448dd":"code","8b9fe75b":"code","b2e2a948":"code","bfa4d374":"code","5f1cad2c":"code","6106dc1f":"code","4dad762d":"code","f43a0832":"code","62e70cbb":"code","c2943645":"code","04bfc837":"code","ac308367":"code","92706fc1":"code","1e5e5025":"code","bbafd178":"code","f5e6b38b":"code","55851ab5":"code","8aafda72":"code","52870359":"markdown","fe2f8d8e":"markdown","bea5744a":"markdown","b7de1cfe":"markdown","d32b14df":"markdown","a908d11f":"markdown","a6e6bba7":"markdown","4a97fcdd":"markdown","99e39fb2":"markdown","f6d310c2":"markdown","52dd4b8c":"markdown","4f56b7fc":"markdown","497abffc":"markdown","0a1942bf":"markdown","93f226d3":"markdown","a51cce37":"markdown","75ddaf94":"markdown","b462a9a6":"markdown","d3f2433f":"markdown","97043278":"markdown","58d4b0a1":"markdown"},"source":{"61ec7bba":"import matplotlib.pyplot as plt\nimport pandas as pd\nimport seaborn as sns\nimport plotly.figure_factory as ff\nimport plotly.graph_objects as go\nimport numpy as np\nimport plotly.express as px\nimport re\n\nimport numpy as np # linear algebra\nimport pandas as pd # data processing, CSV file I\/O (e.g. pd.read_csv)\n\nimport os\nfor dirname, _, filenames in os.walk('\/kaggle\/input'):\n    for filename in filenames:\n        print(os.path.join(dirname, filename))","2b43ce2e":"data= pd.read_csv('..\/input\/turkey-earthquakes-19152021\/turkey_earthquakes(1915-2021).csv', delimiter=';')\ndata.head()","2fc51bdb":"data = data.drop(['No', 'Deprem Kodu', 'Tip'], axis=1)\ndata.head()","bf667836":"data['Olus tarihi'][11109] + '  ' +data['Olus zamani'][11109]","dd4a86a9":"# Splitting the dataframe due to before and after the '.'\ndata['Olus zamani'] = data['Olus zamani'].str.split('.').str[0]\n\n# Saniye is greater than 60 for some data points. I located and dropped them\nfor i in range(0, len(data)):\n    if float(data['Olus zamani'][i][6:]) >= 60:\n        data = data.drop(i)\ndata = data.reset_index(drop=True)","244f85d2":"# Creating single column for date and time\nolus_zamani = pd.to_datetime(data['Olus tarihi'] + ' ' + data['Olus zamani'])\ndata['Olus zamani'] = olus_zamani\ndata.drop(['Olus tarihi'], axis=1, inplace=True)\ndata.head()","837448dd":"data['Yer'][4157]","8b9fe75b":"data['Yer'][17355]","b2e2a948":"# Creating a list with empty string values\nYer = []\nfor y in range(len(data)):\n    Yer.append(\"\")\n\n# Placing Yer values to the empty list\nfor i in range(0, len(data)):\n    Yer[i] = data['Yer'][i]\n\n    # If the Yer values have '(', it will divided by left and right side of the '(', ')' in order\n    if Yer[i].find(\"(\") != -1:\n        Yer[i] = Yer[i].split('(')[1]\n        Yer[i] = Yer[i].split(')')[0]\nYer = pd.DataFrame(Yer)\nYer.head()","bfa4d374":"# Getting rid of the string values start with '['\nYer = Yer[0].str.split('[').str[0].to_frame()\nYer.columns = ['Yer']\n\n# Placing the created Yer column to the original dataset\ndata['Yer'] = Yer","5f1cad2c":"# Some data points have missing letters due to Turkish Alphabet unique letters\nYer_update = {\"?ORUM\": \"CORUM\", \"K?TAHYA\": \"KUTAHYA\", \"EGE DENiZi\": \"EGE DENIZI\",\n              \"DiYARBAKIR\": \"DIYARBAKIR\", \"T?RKiYE-iRAN SINIR B?LGESi\": \"TURKIYE-IRAN SINIR BOLGESI\",\n              \"BALIKESiR \": \"BALIKESIR\", \"SiVAS\": \"SIVAS\", \"iZMiR\": \"IZMIR\", \"TUNCELi\": \"TUNCELI\",\n              \"SURiYE\": \"SURIYE\", \"ESKiSEHiR\": \"ESKISEHIR\", \"DENiZLi\": \"DENIZLI\", \"BiTLiS\": \"BITLIS\",\n              \"KiLiS\": \"KILIS\", \"VAN G?L?\": \"VAN GOLU\", \"?ANKIRI\": \"CANKIRI\",\n              \"T?RKIYE-IRAN SINIR B?LGESI\": \"TURKIYE-IRAN SINIR BOLGESI\", \"MANiSA\": \"MANISA\",\n              \"AKDENiZ\": \"AKDENIZ\", \"G?RCiSTAN\": \"GURCISTAN\", \"BiNGOL\": \"BINGOL\", \"OSMANiYE\": \"OSMANIYE\",\n              \"KIRSEHiR\": \"KIRSEHIR\", \"MARMARA DENiZi\": \"MARMARA DENIZI\", \"ERZiNCAN\": \"ERZINCAN\",\n              \"BALIKESiR\": \"BALIKESIR\", \"GAZiANTEP\": \"GAZIANTEP\", \"G?RCISTAN\": \"GURCISTAN\",\n              \"?ANAKKALE'\": \"CANAKKALE\", \"HAKKARi\": \"HAKKARI\", \"AFYONKARAHiSAR\": \"AFYONKARAHISAR\",\n              \"BiLECiK\": \"BILECIK\", \"KAYSERi\": \"KAYSERI\", \"T?RKiYE-IRAK SINIR B?LGESi\": \"TURKIYE-IRAK SINIR BOLGESI\",\n              \"KARADENiZ\": \"KARADENIZ\", \"T?RKIYE-IRAK SINIR B?LGESI\": \"TURKIYE-IRAK SINIR BOLGESI\",\n              \"KARAB?K\": \"KARABUK\", \"KIBRIS-SADRAZAMK?Y?K\": \"KIBRIS-SADRAZAMKOY\",\n              \"T?RKIYE-SURIYE SINIR B?LGESI?K\": \"TURKIYE-SURIYE SINIR BOLGESI\", \"?ANAKKALE\": \"CANAKKALE\",\n              \"KIBRIS-SADRAZAMK?Y\": \"KIBRIS-SADRAZAMKOY\", \"ERZURUM \": \"ERZURUM\",\n              \"T?RKIYE-SURIYE SINIR B?LGESI\": \"TURKIYE-SURIYE SINIR BOLGESI\", \"ADANA \": \"ADANA\", \"KUS G?L?\": \"KUS GOLU\",\n              \"BURDUR \": \"BURDUR\", \"KIBRIS-G?ZELYURT\": \"KIBRIS-GUZELYURT\", \"KONYA \": \"KONYA\",\n              \"KOCAELI \": \"KOCAELI\", \"AMASYA \": \"AMASYA\", \"KIRSEHIR \": \"KIRSEHIR\",\n              \"KIBRIS-KILI?ASLAN\": \"KIBRIS-KILICASLAN\", \"KIBRIS-Z?MR?TK?Y\": \"KIBRIS-ZUMRUTKOY\",\n              \"DENIZLI \": \"DENIZLI\", \"MANISA \": \"MANISA\", \"ULUBAT G?L?\": \"ULUBAT GOLU\",\n              \"T?RKIYE-ERMENISTAN SINIR B?LGESI\": \"TURKIYE-ERMENISTAN SINIR BOLGESI\",\n              \"ERZINCAN \": \"ERZINCAN\", \"TOKAT \": \"TOKAT\", \"ARDAHAN \": \"ARDAHAN\"}\ndata['Yer'] = data['Yer'].replace(Yer_update)\ndata['Yer'].head()","6106dc1f":"aa = data['Olus zamani'].value_counts()\naa = aa.resample('Y').sum().to_frame()\nfig = px.line(aa, x=aa.index, y='Olus zamani', text='Olus zamani',\n              labels={\n                  \"index\": \"Year\",\n                  \"Olus zamani\": \"Number of Earthquakes\"\n              }\n              )\nfig.update_traces(marker=dict(line=dict(color='#000000', width=2)))\nfig.update_traces(textposition='top center')\nfig.update_layout(title_text='Number of Earthquakes Annually',\n                  title_x=0.5, title_font=dict(size=30))\nfig.show()","4dad762d":"fig_hist = px.histogram(data_frame=data, x='Olus zamani')\nfig_hist.update_layout(title_text='Distribution of the Earthquakes (Annually)',\n                       title_x=0.5, title_font=dict(size=32))\nfig_hist.update_traces(marker=dict(line=dict(color='#000000', width=2)))\nfig_hist.show()","f43a0832":"fig = px.histogram(data, x=\"xM\", marginal='rug', hover_data=data.columns)\nfig.update_layout(title_text='Distribution of the Magnitudes',\n                  title_x=0.5, title_font=dict(size=32))\nfig.show()","62e70cbb":"fig = px.histogram(data, x=\"Derinlik\", marginal='rug', hover_data=data.columns)\nfig.update_layout(title_text='Distribution of the Depth(km)',\n                  title_x=0.5, title_font=dict(size=32))\nfig.show()","c2943645":"fig = px.scatter(data, x='xM', y='Derinlik')\nfig.update_layout(title='The Relationship between the Depth and the Magnitude', title_x=0.5, title_font=dict(size=22))\nfig.show()","04bfc837":"Yer_count = data.groupby(pd.Grouper(key='Yer')).size().reset_index(name='count')\nfig = px.treemap(Yer_count, path=['Yer'], values='count')\nfig.update_layout(title_text='Number of Earthquakes due to Location',\n                  title_x=0.5, title_font=dict(size=30)\n                  )\nfig.update_traces(textinfo=\"label+value\")\nfig.show()","ac308367":"Yer_count = data.groupby(pd.Grouper(key='Yer')).size().reset_index(name='count')\nYer_count_top = Yer_count.nlargest(10, 'count')[['Yer', 'count']]\nfig = px.bar(Yer_count_top, x='Yer', y='count', color='Yer', text='count')\nfig.update_layout(title_text='Top 10 Frequent Earthquake Locations',\n                  title_x=0.5, title_font=dict(size=30))\nfig.update_traces(texttemplate='%{text:.2s}', textposition='outside')\nfig.show()","92706fc1":"fig = px.density_mapbox(data, lat=data['Enlem'], lon=data['Boylam'], z=data['xM'],\n                        center=dict(lat=39.42, lon=35), zoom=4.5,\n                        mapbox_style=\"stamen-terrain\",\n                        radius=15,\n                        opacity=0.5,\n                        animation_frame=pd.DatetimeIndex(data['Olus zamani']).year)\nfig.update_layout(title_text='Heatmap of the Earthquakes (animated)',\n                  title_x=0.5, title_font=dict(size=32))\nfig.show()","1e5e5025":"fig = px.density_mapbox(data, lat=data['Enlem'], lon=data['Boylam'], z=data['xM'],\n                        center=dict(lat=39.42, lon=35), zoom=4.5,\n                        mapbox_style=\"stamen-terrain\",\n                        radius=10,\n                        opacity=0.5)\nfig.update_layout(title_text='Heatmap of the Earthquakes',\n                  title_x=0.5, title_font=dict(size=32))\nfig.show()","bbafd178":"top_mag = data.nlargest(30, 'xM')[['Yer', 'xM', 'Enlem', 'Boylam']]\nfig = px.density_mapbox(top_mag, lat=top_mag['Enlem'], lon=top_mag['Boylam'], z=top_mag['xM'],\n                        center=dict(lat=39.42, lon=35), zoom=4.5,\n                        mapbox_style=\"open-street-map\",\n                        radius=30,\n                        opacity=0.8)\nfig.update_layout(title_text='Top 30 Largest Earthquakes in the Turkey',\n                  title_x=0.5, title_font=dict(size=32))\nfig.show()","f5e6b38b":"fig = px.scatter(data.nlargest(30, 'xM')[['xM', 'Yer', 'Olus zamani']],\n                 x='Olus zamani', y='xM', color='Yer', text='xM', hover_name='Olus zamani',\n                 size='xM')\nfig.update_traces(marker=dict(line=dict(color='#000000', width=2)))\nfig.update_layout(title_text='Top 30 Earthquakes due to Magnitude vs Year',  # Main title for the project\n                  title_x=0.5, title_font=dict(size=30))  # Location and the font size of the main title\n\nfig.show()","55851ab5":"fig = go.Figure(data=[go.Scatter3d(\n    x=data['Enlem'],\n    y=data['Boylam'],\n    z=data[data['xM'] >= 5]['xM'],\n    mode='markers+text',\n    hovertext=data['Yer'],\n    marker=dict(\n        size=5,\n        color=data['xM'],\n        colorscale='Viridis',\n        opacity=0.8\n    ),\n    text=data[data['xM'] >= 5]['xM'],\n)])\nfig.update_layout(scene=dict(\n    xaxis_title='Latitude',\n    yaxis_title='Longitude',\n    zaxis_title='xM')\n)\nfig.update_layout(title_text='Distribution of the Earthquakes due to Lat and Long (M>5)',\n                  title_x=0.5, title_font=dict(size=22))\nfig.update_layout(margin=dict(l=0, r=0, t=0, b=0))\nfig.show()","8aafda72":"plt.figure(figsize=(15, 8))\ncorrelation = sns.heatmap(data.corr(), vmin=-1, vmax=1, annot=True, linewidths=1, linecolor='black')\ncorrelation.set_title('Correlation Graph of the Dataset', fontdict={'fontsize': 24})","52870359":"# Data Cleaning of 'Yer' Feature\n\n**According to my pre-analysis, I noticed that most of the \"Yer\" feature data points have incorrect or corrupted points.**\n\n**For example:**","fe2f8d8e":"# Dropping Split-Second\n\n**According to my pre-analysis, I noticed that some data point has incorrect second information. They are greater than 60 seconds.**\n\n**For example:**","bea5744a":"# Top 10 Frequent Earthquake Locations","b7de1cfe":"# Distribution of the Earthquakes (Annually)","d32b14df":"# <center> Turkey Earthquake Analysis (1915-2020) <center>","a908d11f":"# Distribution of the Magnitudes","a6e6bba7":"# Importing Dataset","4a97fcdd":"# Top 30 Earthquakes due to Magnitude vs Year","99e39fb2":"# Relationship between the Depth and the Magnitude","f6d310c2":"# Heatmap of the Earthquakes (animated)","52dd4b8c":"# Distribution of the Depth(km)","4f56b7fc":"# Heatmap of the Earthquakes (stable)","497abffc":"**I dropped these data points from the dataset.**","0a1942bf":"# Data Visualization","93f226d3":"**The dataset is shown in above. The dataset features are explained in https:\/\/www.kaggle.com\/atasaygin\/turkey-earthquakes-19152021.**\n\n**For further reading, you can check: http:\/\/www.koeri.boun.edu.tr\/sismo\/zeqdb\/**","a51cce37":"# Correlation Graph","75ddaf94":"# Number of Earthquakes Annually","b462a9a6":"# Number of Earthquakes due to Location","d3f2433f":"**I will not use the No, Deprem Kodu and Tip features for my analysis.**","97043278":"# Distribution of the Earthquakes due to Lat and Long (M>5)","58d4b0a1":"# Top 30 Largest Earthquakes in the Turkey"}}