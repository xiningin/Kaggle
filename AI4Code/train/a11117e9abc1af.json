{"cell_type":{"6c3735cd":"code","b8efd3d7":"code","a024de8d":"code","b3605d96":"code","67d06e59":"code","b9483949":"code","0508da6f":"code","99dc04e5":"code","889de02f":"code","74f06dbc":"code","0a4c41f9":"code","e831c957":"code","e1697c45":"code","0ec2b8c5":"code","460d93bc":"code","79e4546b":"code","6c508bd2":"markdown","e75c897e":"markdown","60a228b4":"markdown","97a4d112":"markdown","949db34c":"markdown","fc0dc17e":"markdown","36a15142":"markdown","c0a43a9c":"markdown","9059f907":"markdown","e476ccba":"markdown","571b0b32":"markdown","c87de665":"markdown","3ca184c2":"markdown"},"source":{"6c3735cd":"# This Python 3 environment comes with many helpful analytics libraries installed\n# It is defined by the kaggle\/python Docker image: https:\/\/github.com\/kaggle\/docker-python\n# For example, here's several helpful packages to load\n\nimport numpy as np # linear algebra\nimport pandas as pd # data processing, CSV file I\/O (e.g. pd.read_csv)\nimport matplotlib.pyplot as plt\nimport seaborn as sns\n\n# Input data files are available in the read-only \"..\/input\/\" directory\n# For example, running this (by clicking run or pressing Shift+Enter) will list all files under the input directory\n\nimport os\nfor dirname, _, filenames in os.walk('\/kaggle\/input'):\n    for filename in filenames:\n        print(os.path.join(dirname, filename))\n\n# You can write up to 20GB to the current directory (\/kaggle\/working\/) that gets preserved as output when you create a version using \"Save & Run All\" \n# You can also write temporary files to \/kaggle\/temp\/, but they won't be saved outside of the current session","b8efd3d7":"phd_data=pd.read_csv('\/kaggle\/input\/phd-stipends\/csv') # read file\nphd_data.head()","a024de8d":"phd_data.info() ","b3605d96":"phd_data=phd_data.loc[phd_data['University'].notnull()].reset_index(drop=1)","67d06e59":"#converting columns related to wages to numeric\ncolumns=['Overall Pay','12 M Gross Pay','9 M Gross Pay','3 M Gross Pay', 'Fees' ]\nfor c in columns :\n    phd_data[c]= phd_data[c].str.replace('$','')\n    phd_data[c]= phd_data[c].str.replace(',','')\n    phd_data[c]=pd.to_numeric(phd_data[c], errors='coerce')","b9483949":"#replacing NaN values with zeros in the salaries and fees columns\nphd_data[columns]=phd_data[columns].fillna(value=0)\nphd_data['LW Ratio']=phd_data['LW Ratio'].fillna(value=1)","0508da6f":"phd_data.describe(include='all')","99dc04e5":"phd_data['Academic Year'].value_counts()","889de02f":"phd_2021=phd_data.loc[phd_data['Academic Year']=='2020-2021']","74f06dbc":"phd_2021.info()","0a4c41f9":"phd_2021.describe(include='all')","e831c957":"resp_per_uni=phd_2021[['University']].value_counts().to_frame().reset_index().rename(columns={0:'Count of respondants'})","e1697c45":"# plot number of respondants per University for University with at least 20 respondants\nf, ax1 = plt.subplots( figsize=(10, 18))\nsns.barplot(data=resp_per_uni.loc[resp_per_uni['Count of respondants']>=10], y='University', x='Count of respondants', palette=\"rocket\", ax=ax1,orient='h' )\nax1.xaxis.tick_top()\nfor location in ['left','right', 'top', 'bottom']: # removing axis\n    ax1.spines[location].set_visible(False)\nplt.plot()","0ec2b8c5":"phd_2021.sort_values('Overall Pay', ascending=False).head(15)","460d93bc":"phd_2021_below100=phd_2021.loc[phd_2021['Overall Pay']<100000]\nf, (ax1, ax2) = plt.subplots(1,2, figsize=(20, 15))\nsns.boxplot(y=phd_2021_below100['Overall Pay'], ax=ax1, color='#79AEF2')\nsns.boxplot(y=phd_2021_below100['LW Ratio'], color='#023E73', ax=ax2)\nplt.show()","79e4546b":"#create a dataframe for University with at least 10 respondants and without ouliers\nphd_2021_below50=phd_2021.loc[phd_2021['Overall Pay']<50000]\ndf_mean= phd_2021_below50[['University','Overall Pay','LW Ratio']].groupby('University').mean().reset_index() # calculating Overall Pay and lW ratio means\ndf_merged=df_mean.merge(resp_per_uni, on='University') # adding number of respondants\ndf_story1=df_merged.loc[df_merged['Count of respondants']>=10, ['University','Overall Pay','LW Ratio']].reset_index(drop=True)\ndf_story1['% Above LW']=round((df_story1['LW Ratio']-1)*100,2) \n\ntop_pay=df_story1.sort_values('Overall Pay',ascending=False).head(10) # dataframe with the top 10 universities based on Overall pay\ntop_LW=df_story1.sort_values('LW Ratio',ascending=False).head(10) # dataframe with the the top 10 universities based on LW Ratio\n\n# plotting \nuni_palette=({'Stanford University (SU)':'#B1050E','University of Chicago (UC)':'#800000','Cornell University (CU)':'#B21A1B',\n            'Princeton University':'#ED6C0B','Harvard University (HU)':'#C90017','Massachusetts Institute of Technology (MIT)':'#A31F34',\n             'Boston University (BU)':'#CC0000','Columbia University (CU)':'#B9D9EB','University of Southern California (USC)':'#990000','Yale University (YU)':'#00356b'}) # color palette for sectors\n\ngs_kw = dict(width_ratios=[2,1], height_ratios=[3],wspace=0.4)\nf, (ax1, ax2) = plt.subplots(1,2, figsize=(22, 10), gridspec_kw=gs_kw,sharey=True)\nsns.barplot(data=top_pay, y='University', x='Overall Pay', ax=ax1,orient='h', palette=uni_palette )\nsns.barplot(data=top_pay, y='University', x='% Above LW', ax=ax2,orient='h', palette=uni_palette )\n\nfor location in ['left','right', 'top', 'bottom']: # removing axis\n    ax1.spines[location].set_visible(False)\n    ax2.spines[location].set_visible(False)\nax1.set_ylabel('')\nax2.set_ylabel('')\nax1.set_xlabel('')\nax2.set_xlabel('')\nax1.yaxis.tick_right()\nax1.set_yticklabels((top_pay['University']), color='#404040', ha='center', position=(1.1,0))\nax1.tick_params( right=False, size=5, pad=10, color='#404040')\nax2.tick_params( left=False, size=5, pad=10, color='#404040')\nax1.xaxis.tick_top()\nax2.xaxis.tick_top()\n\nax1.text(s='Mean Overall Pay (USD)',  x=17000, y=-2, fontsize=12, fontstyle='italic', color='#404040')\nax2.text(s='% Above Living Wage',  x=20, y=-2, fontsize=12, fontstyle='italic', color='#404040')\n\nax1.text(s='Top 10 Highest paying Universities in 2021',  x=0, y=-3, fontsize=16,weight='bold')\n\nplt.show()","6c508bd2":"There are 21 different academic year in the data so let's examine what is available.","e75c897e":"We can see from the above table that the higest Overall Pay are outliers and will falsely increase the mean per university so we should not include them in our analysis.\nLet's plot the distribution of the Overall Pay and LW Ratio for Overal Pay below 100.","60a228b4":"From the 5 first rows we can see that some columns contains NaN values.\nLet's inspect the data types and check if there are null values","97a4d112":"## <p style=\"background-color:#79AEF2;font-family:Arial;color:#FFF9ED;font-size:120%;text-align:left;\"> II. Analysis <p>\n\n    First I am going to analyse the top 10 highest paying Universtities based on the mean Overall Pay.\n    We can see that apart from Standord University the 9 other universities offer similar overall pay. However there is a significant difference when we take into account the Living Wage Ratio. ","949db34c":"## That's it for today ! I will resume in the next days !!! Keep looking to check for updates ! \n## Upvote if you like this !","fc0dc17e":"We can see that there are null values in the University column, our goal is to compare universities so let's have a clean dataframe where the name of the university is mentionned.\nLet's also convert salaries and Fees columns to numeric data to enable calculation.\nThere are also Null values in the LW Ratio, we cannot replace them with 0 as this may  seriously impact our ranking. Let's replace the LW Ratio that have null values to 1 so that the missing information stay neutral.","36a15142":"There are 313 universtities for 2064 rows so we need to bear in mind that the information of some universtities may not be representative of the reality.\nLet's also have a closer look on most frequent universities in the dataset and let's see how we treat 'outliers' in terms of overall pay.","c0a43a9c":"<p style=\"background-color:#010440;font-family:Arial;color:#FFF9ED;font-size:200%;text-align:center;border-radius:10px 10px;\">Top 10 highest paying Universities in the United States <\/p>\n\n## I will update this notebook in the next days so keep looking for the updates !","9059f907":"For now we will focus on the academic year 2020-2021 as it is likely the most uptodate and complete data in terms of salaries received and accuracy of the living wage ratio (LW ratio)","e476ccba":"Let's have an overview of the file","571b0b32":"\n<h3><p style=\"background-color:#F2F2F2;font-family:Arial;font-size:120%;text-align:left;margin-top: 10px\">\nSummary of data exploration and options retained for further analysis <\/p> <\/h3> \n\n- We are going to analyse survey results for academic year 2020-2021\n- We are going to include only universities with at least 10 respondants\n- We have excluded respondant who have indicated an Overall Pay above USD K 50 ","c87de665":"## <p style=\"background-color:#79AEF2;font-family:Arial;color:#FFF9ED;font-size:120%;text-align:left;\"> I. Data exploration <p>\nLet's firt do some exploration to understand the dataset and its content","3ca184c2":"It is reasonable to assume that an Overall Pay above 50 000 is highly unlikely."}}