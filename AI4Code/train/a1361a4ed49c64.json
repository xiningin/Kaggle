{"cell_type":{"9c2b1a04":"code","2015d289":"code","38bf793e":"code","d2305672":"code","e2cd8976":"code","65a78590":"code","120a7a1e":"code","f48f0d27":"code","169abfa7":"code","64f43652":"code","e1a8934f":"code","4e433a03":"code","f35a30ce":"code","d2e17c99":"code","3ff1d69d":"code","1da33f4c":"code","ae440f51":"code","1e3cdd42":"code","05557246":"code","3f8ece00":"code","129776c5":"code","fbc0fef9":"code","27b45ee0":"markdown","a217170b":"markdown","141e9ff4":"markdown","a29c9fd0":"markdown","867fd75e":"markdown","58b86760":"markdown","98952fcd":"markdown","e693f5c1":"markdown","aa7d1def":"markdown","94f0b613":"markdown","432f7ec0":"markdown","196f48b6":"markdown","f14dfbc0":"markdown","eabb3db6":"markdown","5a070795":"markdown","1f45c675":"markdown","29f92de9":"markdown","a8f94dad":"markdown","c03d848e":"markdown","93d3290b":"markdown","581913fd":"markdown"},"source":{"9c2b1a04":"#Topic: World Happiness Report up to 2020\n#Author: Durbanova Anna\n#Date: 21.07.2020","2015d289":"import pandas as pd\nimport numpy as np\nimport holoviews as hv\nimport seaborn as sns\nimport matplotlib.pyplot as plt\nhv.extension('bokeh')","38bf793e":"!pip install hvplot","d2305672":"\nimport hvplot.pandas\nimport os\nimport glob\nimport panel as pn\nimport xarray as xr\nimport hvplot.xarray  \nfrom hvplot import hvPlot\n\n\n\n%matplotlib inline","e2cd8976":"for dirname, _, filenames in os.walk('\/kaggle\/input'):\n    for filename in filenames:\n        print(os.path.join(dirname, filename))","65a78590":"data=pd.read_csv('\/kaggle\/input\/happiness-study-data-for-5-years\/All Happiness Data.csv')\n\n\ndata = data.reindex(columns=[\n    \"Happiness Rank\",\n    \"Country\",\n    \"Happiness Score\",\n    \"GDP per capita\",\n    \"Social support\",\n    \"Healthy life expectancy\",\n    \"Freedom to make life choices\",\n    \"Generosity\",\n    \"Perceptions of corruption\",\n    \"Year\"\n])\ndata.head()","120a7a1e":"switzerland=data[\"Country\"]==\"Switzerland\"\ndata[switzerland].hvplot.line(x=\"Year\", y=\"Happiness Score\", title=\"Happiness Score for Switzerland, 2015 - 2020\")","f48f0d27":"kazakhstan = data[\"Country\"]==\"Kazakhstan\"\ndata[kazakhstan].hvplot.line(x=\"Year\", y=\"Happiness Score\", title=\"Happiness Score for Kazakhstan, 2015-2020\")","169abfa7":"data2019=(data\n          [data[\"Year\"] == 2019]\n          .sort_values(by=\"Happiness Score\", ascending=False)\n         )\n\nsns.set(style=\"whitegrid\")\ng=sns.PairGrid(\n    data2019, \n    x_vars=data.columns[2:-1],\n    y_vars=[\"Country\"],\n    height=70,\n    aspect=0.03\n)\n#g.figsize=(100,100)\n#g.fig.set_size_inches(50,50)\ng.map(sns.stripplot, size=10, orient=\"h\",\n    palette=\"ch:s=1,r=-.1,h=1_r\", linewidth=1, edgecolor=\"w\")\n\ntitles = [\n    \"Happiness Score\",\n    \"GDP per capita\",\n    \"Social support\",\n    \"Healthy life expectancy\",\n    \"Freedom to make life choices\",\n    \"Generosity\",\n    \"Perceptions of corruption\"]\n\nfor ax, title in zip(g.axes.flat, titles):\n        ax.set(title=title)\n        \nax.xaxis.grid(False)\nax.yaxis.grid(True)\nsns.despine(left=True, bottom=True)","64f43652":"year2015=data[\"Year\"]==2015\ndata[year2015].hvplot.bar(x=\"Country\",y=\"Happiness Score\", rot=90,width=2000, height=550, title=\"Happiness Scores for all countres, 2015 year\")","e1a8934f":"year2020=data[\"Year\"]==2020\n(data[year2020]\n .hvplot.bar(\n     x=\"Country\",\n     y=\"Happiness Score\",\n     rot=90, \n     width=2000,\n     height=550, \n     title=\"Happiness Score for all countries, 2020 year\")\n)","4e433a03":"mask_happy=data.loc[(data[\"Happiness Rank\"]<=10)&(data[\"Year\"]==2020)]\nmask_happy","f35a30ce":"mask_unhappy=data.loc[(data[\"Happiness Rank\"]>=144)&(data[\"Year\"]==2020)]\nmask_unhappy","d2e17c99":"happiness_score_happy=mask_happy.hvplot.bar(x=\"Country\", y=\"Happiness Score\", title=\"Happiness Score for the happiest and unhappiest countries for 2020\", rot=40, width=800, height=400)\nhappiness_score_unhappy=mask_unhappy.hvplot.bar(x=\"Country\", y=\"Happiness Score\")\nhappiness_score_happy*happiness_score_unhappy\n","3ff1d69d":"gdp_hap=mask_happy.hvplot.bar(x=\"Country\", y=\"GDP per capita\", title=\"GDP per Capita for the happiest and the most unhappy countries for 2020\" , rot=40, width=800, height=400)\ngdp_unhap=mask_unhappy.hvplot.bar(x=\"Country\", y=\"GDP per capita\")\ngdp_hap*gdp_unhap","1da33f4c":"health_hap=mask_happy.hvplot.bar(x=\"Country\", y=\"Healthy life expectancy\", title=\"Healthy life expectancy for the happiest and the most unhappy countries for 2020\" , rot=40, width=800, height=400)\nhealth_unhap=mask_unhappy.hvplot.bar(x=\"Country\", y=\"Healthy life expectancy\")\nhealth_hap*health_unhap","ae440f51":"social_hap=mask_happy.hvplot.bar(x=\"Country\", y=\"Social support\", title=\"Social support rate for the happiest and the most unhappy countries for 2020\" , rot=40, width=800, height=400)\nsocial_unhap=mask_unhappy.hvplot.bar(x=\"Country\", y=\"Social support\")\nsocial_hap*social_unhap","1e3cdd42":"corruption_hap=mask_happy.hvplot.bar(x=\"Country\", y=\"Perceptions of corruption\", title=\"Perceptions of corruption for the happiest and the most unhappy countries for 2020\" , rot=40, width=800, height=400)\ncorruption_unhap=mask_unhappy.hvplot.bar(x=\"Country\", y=\"Perceptions of corruption\")\ncorruption_hap*corruption_unhap","05557246":"generosity_hap=mask_happy.hvplot.bar(x=\"Country\", y=\"Perceptions of corruption\", title=\"Generosity for the happiest and the most unhappy countries for 2020\" , rot=40, width=800, height=400)\ngenerosity_unhap=mask_unhappy.hvplot.bar(x=\"Country\", y=\"Perceptions of corruption\")\ngenerosity_hap*generosity_unhap","3f8ece00":"freedom_hap=mask_happy.hvplot.bar(x=\"Country\", y=\"Freedom to make life choices\", title=\"Freedom to make life choices for the happiest and the most unhappy countries for 2020\" , rot=40, width=800, height=400)\nfreedom_unhap=mask_unhappy.hvplot.bar(x=\"Country\", y=\"Freedom to make life choices\")\nfreedom_hap*freedom_unhap","129776c5":"Notes: \nFreedom to make choices: Happiest countries have more freedom to make life choices","fbc0fef9":"data.hvplot.bar(x='Year', y=[\"Happiness Score\", \"GDP per capita\", \"Social support\", \"Perceptions of corruption\",\"Generosity\", \"Freedom to make life choices\"], value_label=\"Rate\", rot=40, width=700,height=500,groupby='Country')","27b45ee0":"### Preparation \nI combined all happiness reports from 2015 to 2020 together to work smoothly with the data set.\nTo combine properly, I created a Year column to sort out in the future and I made sure that each columns of files have the same name and left only those columns which I wanted for my further analysis which are Happiness Rank, Country, Happiness Score, GDP, Social support, Healthy Life expectancy, Freedom, Generosity, and Perception of Corruption","a217170b":"## Let's compare top happiest and unhappiest countries with the most important metrics","141e9ff4":"## Comparison of metrics between happiest and unhappiest countries for 2020","a29c9fd0":"## Bonus Graph:  If your Notebook is compatible with Hv plots, you can choose from the dropdown the country and check all metrics for the past 5 years","867fd75e":"#### Notes: \n GDP Per Capita: Happiest countries have much higher GDP per Capita than unhappiest countries","58b86760":"#### Notes:\nSocial Support: Happiest countries have a higher social support from family and friends","98952fcd":"### Top 10 unhappiest countries for 2020","e693f5c1":"# Happiness Score and supporting metric for all countries for 2019 using 2 different graph styles","aa7d1def":"Notes: \nUnhappiest countries are more generous (Exception Rwanda and Iceland)","94f0b613":"### Let's look at the Happiness Score of the happiest country for 2015 (Switzerland) and see how it changed over years","432f7ec0":"### Top 10 happiest countries for 2020","196f48b6":"#### Notes:\nPerception of corruption is lower at the happiest countries and higher at the unhappiest countries (exception Iceland and Rwanda)","f14dfbc0":"We can see that the happiest score for the Switzerlan was going up and down over years, but it did not have such drastic changes, maximum change was around -0.10 points","eabb3db6":"We can see that the happiness score was going up and down all over years but from 2019 to 2020 the happiness score drastically improved by 0.20 points","5a070795":"### Let's look at the Happiness Score of my origin country (Kazakhstan) and see how it changed over years\n","1f45c675":"#### Notes:\nHealthy Life Expectancy: Happiest countries live longer than unhappiest countries","29f92de9":"# Happiness Score for all countries, 2015\n","a8f94dad":"## Seaborn Plot\n","c03d848e":"## HV Plot","93d3290b":"##Conclusion: \nEvery year the happiness score changes for all countries. \nHappiness score depends on different factors: GDP, Social Support, Freedom to make choices, Perceptions of Corruptions, and Healthy Life Expectancy\n\nFrom comparison of top happiest and unhappiest countries, it became clear, that:\n<li>Happiest countries have much higher GDP per Capita than unhappiest countries<\/li>\n<li>Happiest countries live longer than unhappiest countries<\/li>\n<li>Happiest countries have a higher social support from family and friends<\/li>\n<li>Perception of corruption is lower at the happiest countries and higher at the unhappiest countries<\/li>\n<li>Unhappiest countries are more generous<\/li>\n <li>Happiest countries have more freedom to make life choices <\/li>","581913fd":"# Happiness Score for all countries, 2020\n"}}