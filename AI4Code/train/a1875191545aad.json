{"cell_type":{"fb60a011":"code","4386d70b":"code","d5c6089a":"code","9df8e338":"code","87525fae":"code","41ab453c":"code","05a85857":"code","f0dffe91":"code","1b467240":"code","7a0af204":"code","d893eff0":"code","3cce3f9d":"code","72e55396":"code","0cf8cfbf":"code","3b74b0be":"code","6360ecfd":"code","f8db1feb":"code","54ea8570":"code","6a877537":"code","f4e40106":"code","cf31a966":"code","e5e22288":"code","2fa460c8":"code","059dce82":"code","b7fc59c0":"code","0919005a":"code","e1296bfd":"code","6d1cac92":"code","10390499":"code","a74bcf12":"code","da05e013":"code","be4a001a":"code","716ed2de":"code","2313360d":"code","928a451e":"code","5f370d41":"code","bb9265de":"code","fe0dbf11":"code","44444c0b":"code","32888493":"code","10a82852":"code","856292f7":"code","43bf0127":"code","b1eb7600":"markdown","cdeb552d":"markdown","fbdaf23d":"markdown","4516312e":"markdown","b555efb8":"markdown","5688f109":"markdown","0b13c751":"markdown","9fec6b3f":"markdown","8e158122":"markdown","72286b7d":"markdown","38f1c768":"markdown","05a24564":"markdown","7aafcbc5":"markdown","747c6f3f":"markdown","86f4c749":"markdown","b0b3f886":"markdown","ebe4da40":"markdown","44e01671":"markdown","f9050ae0":"markdown","0fc5b166":"markdown","111e871e":"markdown","11017680":"markdown","6ac1e4ac":"markdown","473a4c3a":"markdown","9b341476":"markdown","682dc751":"markdown","72e8abb4":"markdown","a8f51051":"markdown","c0984ada":"markdown","369344bd":"markdown","dca67c34":"markdown","784439e8":"markdown","386d804f":"markdown","d562e2af":"markdown"},"source":{"fb60a011":"#1. Import the necessary libraries \nimport pandas as pd\nimport numpy as np\nimport matplotlib.pyplot as plt\nimport seaborn as sns\nimport warnings\nwarnings.filterwarnings(\"ignore\")\nfrom PIL import Image \nfrom scipy.stats import ttest_1samp, ttest_ind, mannwhitneyu, levene, shapiro\nfrom statsmodels.stats.power import ttest_power\nimport scipy.stats as stats\nfrom scipy.stats import f_oneway","4386d70b":"#2.Read the data as a data frame\ninsurance_data = pd.read_csv('..\/input\/insurance\/insurance.csv')","d5c6089a":"#top 5 rows\ninsurance_data.head()","9df8e338":"#a. Shape of the data\ninsurance_data.shape","87525fae":"#Insurance dataframe contains 1338 rows and 7 columns","41ab453c":"#b. Data type of each attribute\ninsurance_data.dtypes","05a85857":"#There are 5 integer and 2 float columns\n#There are 3 object columns","f0dffe91":"#c. Checking the presence of missing values \ninsurance_data.isnull().sum()","1b467240":"#There are no null-values present in this dataframe","7a0af204":"#d. 5 point summary of numerical attributes \ninsurance_data.describe()","d893eff0":"#Mean of age,bmi and children is close to their median respectively\n#Average charge is 13270.42\n#Most of the users have 1 children","3cce3f9d":"# Distribution of age \nsns.set()\nsns.distplot(insurance_data['age'],kde=True)","72e55396":"#bmi distribution\ninsurance_data['bmi'].hist(color='seagreen',bins=40,figsize=(8,4))","0cf8cfbf":"#charges distribution\nsns.set()\ninsurance_data['charges'].hist(color='red',bins=40,figsize=(18,4))","3b74b0be":"#f. Measure of skewness of \u2018bmi\u2019, \u2018age\u2019 and \u2018charges\u2019 columns \ninsurance_data.skew()","6360ecfd":"#visualization via Box Plot\n\nfig, axes = plt.subplots(2, 2, figsize=(12, 6))\nsns.boxplot(data=insurance_data['age'],orient='h',palette=None,ax=axes[0,0])\nsns.boxplot(data=insurance_data['bmi'],orient='h',palette='Set2',ax=axes[0,1])\nsns.boxplot(data=insurance_data['children'],orient='h',palette='Set3',ax=axes[1,0])\nsns.boxplot(data=insurance_data['charges'],orient='h',palette='Set1',ax=axes[1,1])\n","f8db1feb":"#lets visualize via count plot\nfig, axes = plt.subplots(2, 2, figsize=(12, 6))\nsns.countplot(x=insurance_data['smoker'],ax=axes[0,0])\nsns.countplot(x=insurance_data['region'],ax=axes[0,1])\nsns.countplot(x=insurance_data['sex'],ax=axes[1,0])\nsns.countplot(x=insurance_data['children'],orient='h',palette='Set1',ax=axes[1,1])\naxes[0,0].set_title('smoker')\naxes[0,1].set_title('region')\naxes[1,0].set_title('sex')\naxes[1,1].set_title('children')\nfig.tight_layout()","54ea8570":"#lets visualize bi-variate analysis via bar plot\nfig, axes = plt.subplots(2, 2, figsize=(12, 6))\nsns.barplot(x='smoker',y='charges',data=insurance_data,ax=axes[0,0])\nsns.barplot(x='sex',y='charges',data=insurance_data,ax=axes[0,1])\nsns.barplot(x='region',y='charges',data=insurance_data,ax=axes[1,0])\nsns.barplot(x='children',y='charges',data=insurance_data,ax=axes[1,1])","6a877537":"#i. Pair plot that includes all the columns of the data frame\n#As these are categorical columns,encoding is required (as pair plot considers only numerical columns)\ninsurance_data['region_code']=pd.factorize(insurance_data.region)[0]\ninsurance_data['sex_code']=pd.factorize(insurance_data.sex)[0]\ninsurance_data['smoker_code']=pd.factorize(insurance_data.smoker)[0]","f4e40106":"insurance_data.head()","cf31a966":"sns.set()\nsns.pairplot(insurance_data)","e5e22288":"sns.heatmap(insurance_data.corr(),cmap='coolwarm',annot=True)","2fa460c8":"#Do charges of people who smoke differ significantly from the people who don't? \nplt.figure(figsize=(8,4))\nax = sns.barplot(x=\"smoker\", y=\"charges\", data=insurance_data)","059dce82":"charge_smokers=np.array(insurance_data[insurance_data['smoker']=='yes']['charges'])\ncharge_non_smokers=np.array(insurance_data[insurance_data['smoker']=='no']['charges'])","b7fc59c0":"t_statistic, p_value = ttest_ind(charge_smokers,charge_non_smokers)\nprint(t_statistic, p_value)","0919005a":"# p_value < 0.05 => alternative hypothesis:\n# they don't have the same mean at the 5% significance level\nprint (\"two-sample t-test p-value=\", p_value)","e1296bfd":"#b. Does bmi of males differ significantly from that of females? \nplt.figure(figsize=(8,4))\nax = sns.barplot(x=\"sex\", y=\"bmi\", data=insurance_data)","6d1cac92":"bmi_male=np.array(insurance_data[insurance_data['sex']=='male']['bmi'])\nbmi_female=np.array(insurance_data[insurance_data['sex']=='female']['bmi'])","10390499":"t_statistic, p_value = ttest_ind(bmi_male,bmi_female)\nprint(t_statistic, p_value)","a74bcf12":"# p_value > 0.05 => null hypothesis:\nprint (\"two-sample t-test p-value=\", p_value)","da05e013":"#Is the proportion of smokers significantly different in different genders? ","be4a001a":"plt.figure(figsize=(8,4))\nax = sns.barplot(x=\"sex\", y=\"smoker_code\", data=insurance_data)","716ed2de":"female_smokers = insurance_data[insurance_data['sex'] == 'female'].smoker.value_counts()[1]  # number of female smokers\nmale_smokers = insurance_data[insurance_data['sex'] == 'male'].smoker.value_counts()[1] # number of male smokers\ntot_females = insurance_data['sex'].value_counts()[1] # number of females in the data\ntot_males = insurance_data['sex'].value_counts()[0] #number of males in the data","2313360d":"#proportion of smokers in different genders\nprint([female_smokers, male_smokers] , [tot_females, tot_males])\n\nprint(f' Proportion of smokers in females, males = {round(115\/662,2)}%, {round(159\/676,2)}% respectively')","928a451e":"#crosstables of sex and smokers\npd.crosstab(insurance_data['sex'],insurance_data['smoker'])","5f370d41":"#Calculate p value or chi-square statistic value\nchi_sq_Stat, p_value, deg_freedom, exp_freq = stats.chi2_contingency(pd.crosstab(insurance_data['sex'],insurance_data['smoker']))\nprint('Chi-square statistic %3.5f P value %1.6f Degrees of freedom %d' %(chi_sq_Stat, p_value,deg_freedom))","bb9265de":"#d. Is the distribution of bmi across women with no children, one child and two children, the same? ","fe0dbf11":"no_child=insurance_data[(insurance_data['sex']=='female') & (insurance_data['children'] == 0)]['bmi']#bmi of women with 0 child\none_child=insurance_data[(insurance_data['sex']=='female') & (insurance_data['children'] == 1)]['bmi']#bmi of women with 1 child\ntwo_child=insurance_data[(insurance_data['sex']=='female') & (insurance_data['children'] == 2)]['bmi']#bmi of women with 2 child","44444c0b":"no_child.mean() ","32888493":"one_child.mean()","10a82852":"two_child.mean()","856292f7":"#Mean of bmi across above 3 groups seems same.","43bf0127":"f_oneway(no_child,one_child,two_child) #One-way ANOVA test","b1eb7600":"# Conclusion:-\n1)So we reject the NULL Hypothesis\n\n2)Charges of people who smoke differ significantly from the people who don't","cdeb552d":"# Step 2: Decide the significance level\nNot mentioned , so let's consider alpha=0.05","fbdaf23d":"# Step 4: Calculate p value using ANOVA table\n","4516312e":"# Step 4: Calculate p-value","b555efb8":"# Insights:-\n    1)Correlation between charges and smoker(smoker_code)is high","5688f109":"# Step 3: Identify the test statistic\nHere we require to check for women with no,one or two children. Analysis of variance(ANOVA) will be the best fit for this. ","0b13c751":"# State the null and alternative hypothesis:\n\nNull hypothesis:  \ud835\udc3b0 : Proportion of smokers is same in different genders\n\nAlternative hypothesis:  \ud835\udc3b\ud835\udc34 : Proportion of smokers is different in different genders\n    ","9fec6b3f":"# EDA","8e158122":"# Step 2: Decide the significance level\nNot mentioned , so let's consider alpha=0.05","72286b7d":"# Step 4: Calculate p value ","38f1c768":"# Step 2: Decide the significance level\nNot mentioned , so let's consider alpha=0.05","05a24564":"# Insights:-\n    1)charges seems higly skewed(more outliers)\n    2)age seems least skewed","7aafcbc5":"# Insights:-\n  1)Smokers pay more charges than non-smokers\n  \n  2)Male pays more medical costs than females\n  \n  3)Southeast region has more medical costs(charges),as they have more users","747c6f3f":"# Insights:-\n    1)There are more users around age 20yrs\n    2)There are less users in timespan of 35-40yrs\n    3)Users don't prefer insurance over 60 yrs and under 18 yrs.(seems practical)","86f4c749":"# Decide the significance level\n\nNot mentioned , so let's consider alpha=0.05","b0b3f886":"# Insights:-\n    1)Ratio of non smokers are more than smokers\n    2)Southeast region is having more people with health insurance than any other region\n    3)There are almost equal no. of male and female customers \n    4)Users with No children are more","ebe4da40":"# Insights:-\n    1)BMI is forming almost a normalised curve\n    2)Users with bmi 30 are large in numbers\n    3)Few outliers at the right (lightly right skewed)","44e01671":"# Step 1: State the null and alternative hypothesis:\n\nNull hypothesis:  \ud835\udc3b0 : Distribution of bmi across women with  no children, one child and two children is same\n\nAlternative hypothesis:  \ud835\udc3b\ud835\udc34 : Distribution of bmi across women with  no children, one child and two children is different\n    ","f9050ae0":"# h. Distribution of categorical columns (include children) ","0fc5b166":"# Conclusions:-\n   1)As per above, p-value 0.7>0.05,so we fail to reject NULL Hypothesis\n   \n   2)Hence,we can conclude that Distribution of bmi across women with no children, one child and two children is same\n   \n   3)These Distributions are independent","111e871e":"# Step 3: Identify the test statistic\nWe will use 2 sample independent test for categorical and numerical columns, so let's find out the p-value","11017680":"# Identify the test-statistic\n\nWe use the chi-square test of independence to find out the difference of categorical variables","6ac1e4ac":"# Conclusion:-\n    1)p-value<0.05,so we reject the NULL Hypothesis(0.006<0.05)\n    2)Proportion of smokers significantly varies in different genders","473a4c3a":"# Step 1: State the null and alternative hypothesis:\nNull hypothesis: \ud835\udc3b0 : BMI of males is same as females\n\nAlternative hypothesis: \ud835\udc3b\ud835\udc34 : BMI of males differs from of females","9b341476":"# g. Checking the presence of outliers in \u2018bmi\u2019, \u2018age\u2019 and \u2018charges columns ","682dc751":"# Step 5:  Decide to reject or accept null hypothesis","72e8abb4":"# Step 3: Identify the test statistic\nWe will use 2 sample independent test for categorical and numerical columns, so let's find out the p-value","a8f51051":"# Insights:-\n    1)Charges disctribution seems highly right skewed\n    2)There are few users with charges above 50000","c0984ada":"# 4. Answer the following questions with statistical evidence","369344bd":"# Conclusion:-\n    1)p-value>0.05, so , we fail to reject NULL hypothesis\n    2)bmi of males is similar to females","dca67c34":"# Step 1: State the null and alternative hypothesis:\nNull hypothesis: \ud835\udc3b0 : Charges of people who smoke is same as people who don't\n\nAlternative hypothesis: \ud835\udc3b\ud835\udc34 : Charges of people who smoke differ from the people who don't","784439e8":"# Step 5: Decide to reject or accept null hypothesis","386d804f":"# Insights:-\n    1)BMI-There are some outliers present beyond 46\n           Most of the users have bmi between 26-35\n           BMI is right skewed with few outliers at right\n    2)AGE-No outliers present\n          seems to be a normal distribution\n          Most of the users are between 27-51 yrs of age(People are more concern about their health in this time period)\n    3)CHARGES-There are many outliers present above 30000\n            charges are higly right skewed with most outliers at right\n            Health insurance charges are commonly spread towards left","d562e2af":"# e. Distribution of \u2018bmi\u2019, \u2018age\u2019 and \u2018charges\u2019 columns."}}