{"cell_type":{"a63ba6ca":"code","4efabb2f":"code","f606755d":"code","2b9274fc":"code","82081209":"code","df432d95":"code","810836a8":"code","2b4b6e68":"code","ceb190c9":"code","686783c6":"code","09eef079":"code","f0a923c9":"code","ed18da43":"code","d4d94d87":"code","4f4b275e":"code","e5ef3cb8":"markdown","129ccb68":"markdown","f2976670":"markdown","9a452fbe":"markdown","8326222e":"markdown","14d37169":"markdown","880eedac":"markdown","75f738fa":"markdown","919344bd":"markdown","be3d348b":"markdown","26a0cadd":"markdown","b689b278":"markdown","66ebd212":"markdown","1ca51882":"markdown","5dbc97c6":"markdown","c96d6b02":"markdown","c89f087e":"markdown","89037d0f":"markdown","40a8e87f":"markdown","bfe5cca9":"markdown","85e5c132":"markdown","ef948869":"markdown","cbb36528":"markdown","26c491dd":"markdown","b844ca7b":"markdown","aef60006":"markdown","432ba780":"markdown"},"source":{"a63ba6ca":"import numpy as np \nimport pandas as pd \nimport seaborn as sns\nimport matplotlib.pyplot as plt\nimport matplotlib.patches as mpatches\nimport geopandas as gpd\nimport geoplot as gplt\n\nimport warnings\nwarnings.filterwarnings('ignore')","4efabb2f":"df = pd.read_csv(\"\/kaggle\/input\/kaggle-survey-2021\/kaggle_survey_2021_responses.csv\")\ndf.shape","f606755d":"df.head()","2b9274fc":"plt.figure(figsize=(18,8))\ncolors = ['grey', 'cornflowerblue', 'grey', 'grey', 'grey', 'grey', 'grey', 'grey', 'grey', 'grey', 'grey', 'grey', 'grey', 'grey']\nax = sns.countplot(df['Q5'], order = df['Q5'].value_counts().iloc[:15].index, palette = colors)\nax.set(title = 'Current Role', xlabel = '', ylabel = '')\nax.annotate(\"\u21b1 Look, we have 3616 data scientists\", (1, 3650), ha=\"left\", va=\"bottom\")\nfor item in ax.get_xticklabels():\n    item.set_rotation(90)\n\nplt.show()","82081209":"import plotly.express as px\ndata_scientist = df[df['Q5']=='Data Scientist']\n\nfig = px.histogram(data_scientist, x=\"Q1\", color = \"Q2\", labels = {'Q2': 'Sex', 'Q1': 'Age'}, title = 'Age and Gender of Data Scientists').update_xaxes(categoryorder='total descending')\nfig.update_layout({\n'plot_bgcolor': 'rgba(0, 0, 0, 0)',\n'paper_bgcolor': 'rgba(0, 0, 0, 0)',\n})\n\nfig.show()","df432d95":"df_q4 = data_scientist['Q4'].value_counts()\nfig = px.pie(df_q4, values=df_q4.values, names=df_q4.index, title='Education Level of Data Scientists')\nfig.show()","810836a8":"%%capture\npip install pyecharts==1.7.1","2b4b6e68":"columns = [3,5]\ndata_scientist = data_scientist.replace(\"United States of America\", \"United States\")\ndata_map2 = data_scientist.iloc[:,columns]\ndata_map2 = data_map2.groupby('Q3').count()\ndata_map2 = pd.DataFrame(data_map2)\ndata_map2\n\ncountry = list(data_map2.index)\ntotal_scientist = list(data_map2['Q5'])\n\nfrom pyecharts.charts import Map,Geo\nfrom pyecharts import options as opts\nfrom pyecharts.globals import ThemeType\n\nlist1 = [[country[i],total_scientist[i]] for i in range(len(country))] \nmap_1 = Map(init_opts=opts.InitOpts(width='1000px', height='460px',theme=ThemeType.VINTAGE)) \nmap_1.add('Total Data Scientist', \n list1,\n maptype='world',\n is_map_symbol_show=False)\nmap_1.set_series_opts(label_opts=opts.LabelOpts(is_show=False)) \nmap_1.set_global_opts(\nvisualmap_opts=opts.VisualMapOpts(max_=1100000,is_piecewise=True,pieces=[\n {'min': 200},\n {'min': 150, 'max': 199},\n {'min': 100, 'max': 149},\n {'min': 50, 'max': 99},\n {'max': 49},]),\n title_opts=opts.TitleOpts(\n title='Data Scientists Around the World',\n subtitle='2021 Kaggle Machine Learning & Data Science Survey',\n pos_left='center',\n padding=0,\n item_gap=2,\n title_textstyle_opts= opts.TextStyleOpts(color='black',\n font_weight='bold',\n font_family='Zebrazil',\n font_size=30), \n subtitle_textstyle_opts= opts.TextStyleOpts(color='darkgrey',\n font_weight='bold',\n font_family='Zebrazil',\n font_size=13)), \n legend_opts=opts.LegendOpts(is_show=False))\nmap_1.render_notebook()","ceb190c9":"df_estimation = df[((df['Q5']=='Currently not employed') | (df['Q5']=='Data Scientist')) & ((df['Q3']=='India') | (df['Q3']=='United States of America') | (df['Q3']=='Brazil') | (df['Q3']=='Russia') | (df['Q3']=='France'))]\nnot_employed = df_estimation[(df_estimation['Q5']=='Currently not employed')]\nds = df_estimation[(df_estimation['Q5']=='Data Scientist')]\n\nplt.figure(figsize=(10, 10))\nsns.set(style=\"darkgrid\")\n\n## Selecting just data scientists\ndf_table = df_estimation.groupby('Q3')['Q5'].size().reset_index()\nbar1 = sns.barplot(x='Q3',  y='Q5', data = df_table, color='darkblue', order=df_table.sort_values('Q5', ascending= False).Q3)\n\n## Now selecting current not employed\ndf_table2 = df_estimation[df_estimation['Q5']=='Currently not employed']\ndf_table2 = df_table2.groupby('Q3')['Q5'].size().reset_index()\nbar2 = sns.barplot(x=\"Q3\", y=\"Q5\", data=df_table2, estimator=sum, ci=None,  color='lightblue', order=df_table.sort_values('Q5', ascending= False).Q3)\n\n# Adding legends and changing xaxis and yaxis\ntop_bar = mpatches.Patch(color='darkblue', label='Data Scientist')\nbottom_bar = mpatches.Patch(color='lightblue', label='Currently not employed')\nplt.legend(handles=[top_bar, bottom_bar])\nplt.title('Count of Data Scientists and Not Employed')\nplt.xlabel('Countries')\nplt.ylabel('Count')\n\n# show the graph\nprint('We have', len(not_employed), 'people current not employed of the countries discussed above and this will be the 0 in our dummy.')\nprint('Besides, there are', len(ds), 'data scientists of the same countries and this will be the 1 in our dummy.')\nprint('So, we have', len(df_estimation), 'data scientists and current not employed from India, USA, Brazil, Russia and France. Take a look at the graph:')\nprint(\"\")\nplt.show()","686783c6":"df_estimation = df_estimation.sort_values(by='Q1', ascending=True)\nfig = px.box(df_estimation, x=\"Q3\", y=\"Q1\", title = \"Age of Data Scientist by Country\", labels = {'Q1': 'Age', 'Q3': 'Country'}).update_xaxes(categoryorder='total descending')\nfig.show()","09eef079":"from statsmodels.iolib.summary2 import summary_col\nimport statsmodels.formula.api as smf\n\n# Database \n\ndf_reg = df_estimation.iloc[:,1:20]\ndf_reg['age'] = np.where((df_reg['Q1']== '18-21') | (df_reg['Q1']== '22-24') | (df_reg['Q1']== '25-29') | (df_reg['Q1']== '30-34') | (df_reg['Q1']== '35-39') | (df_reg['Q1']== '40-44'), 1, 0)\ndf_reg['sex'] = np.where(df_reg['Q2']=='Man', 1, 0)\ndf_reg['scholarity'] = np.where((df_reg['Q4']=='Bachelor\u2019s degree') | (df_reg['Q4']=='Master\u2019s degree') | (df_reg['Q4']=='Doctoral degree'), 1, 0)\ndf_reg['experience'] = np.where((df_reg['Q6']=='I have never written code') | (df_reg['Q6']=='< 1 years') | (df_reg['Q6']=='1-2 years'), 0, 1)\ndf_reg = df_reg.drop(['Q1', 'Q2', 'Q4', 'Q6'], 1)\n\n# India \n\ndf_reg_India = df_reg[df_reg['Q3']=='India']\ndf_reg_India = pd.get_dummies(df_reg_India)\ndf_reg_India = df_reg_India.rename(columns = {'Q5_Data Scientist': 'India', 'Q7_Part_1_Python': 'Python', 'Q7_Part_2_R': 'R'}, inplace = False)\nformula1 = 'India~1 + age + sex + scholarity + experience + Python + R'\nmodel1 = smf.probit(formula1, data = df_reg_India).fit(disp = 0)\n\n# USA \n\ndf_reg_USA = df_reg[df_reg['Q3']=='United States of America']\ndf_reg_USA = pd.get_dummies(df_reg_USA)\ndf_reg_USA = df_reg_USA.rename(columns = {'Q5_Data Scientist': 'USA', 'Q7_Part_1_Python': 'Python', 'Q7_Part_2_R': 'R'}, inplace = False)\n\nformula2 = 'USA~1 + age + sex + scholarity + experience + Python + R'\nmodel2 = smf.probit(formula2, data = df_reg_USA).fit(disp = 0)\n\n# BR \n\ndf_reg_BR = df_reg[df_reg['Q3']=='Brazil']\ndf_reg_BR = pd.get_dummies(df_reg_BR)\ndf_reg_BR = df_reg_BR.rename(columns = {'Q5_Data Scientist': 'Brazil', 'Q7_Part_1_Python': 'Python', 'Q7_Part_2_R': 'R'}, inplace = False)\n\nformula3 = 'Brazil~1 + age + sex + scholarity + experience + Python + R'\nmodel3 = smf.probit(formula3, data = df_reg_BR).fit(disp = 0)\n\n# Russia\n\ndf_reg_Russia = df_reg[df_reg['Q3']=='Russia']\ndf_reg_Russia = pd.get_dummies(df_reg_Russia)\ndf_reg_Russia = df_reg_Russia.rename(columns = {'Q5_Data Scientist': 'Russia', 'Q7_Part_1_Python': 'Python', 'Q7_Part_2_R': 'R'}, inplace = False)\n\nformula4 = 'Russia~1 + age + sex + scholarity + experience + Python + R'\nmodel4 = smf.probit(formula4, data = df_reg_Russia).fit(disp = 0)\n\n# France \n\ndf_reg_France = df_reg[df_reg['Q3']=='France']\ndf_reg_France = pd.get_dummies(df_reg_France)\ndf_reg_France = df_reg_France.rename(columns = {'Q5_Data Scientist': 'France', 'Q7_Part_1_Python': 'Python', 'Q7_Part_2_R': 'R'}, inplace = False)\n\nformula5 = 'France~1 + age + sex + scholarity + experience + Python + R'\nmodel5 = smf.probit(formula5, data = df_reg_France).fit(disp = 0)\n\ndictionary={'No. observations' : lambda x: f\"{int(x.nobs):d}\"}\n\nprint(summary_col([model1, model2, model3, model4, model5],\n                 float_format='%0.2f',\n                 stars = True,\n                 info_dict=dictionary))","f0a923c9":"df_perception = df_estimation[df_estimation['Q5']=='Data Scientist']\ndf_india = df_perception[df_perception['Q3']=='India']\ndf_usa = df_perception[df_perception['Q3']=='United States of America']\ndf_br = df_perception[df_perception['Q3']=='Brazil']\ndf_russia = df_perception[df_perception['Q3']=='Russia']\ndf_france = df_perception[df_perception['Q3']=='France']\n\nfig = plt.figure(figsize=(25,15))\n\nax1 = plt.subplot2grid(shape=(2,6), loc=(0,0), colspan=2)\nax1 = sns.countplot(df_india['Q8'], order = df_india['Q8'].value_counts().index).set(title = 'India', xlabel = '', ylabel = '')\nax2 = plt.subplot2grid((2,6), (0,2), colspan=2)\nax2 = sns.countplot(df_usa['Q8'], order = df_usa['Q8'].value_counts().index).set(title = 'USA', xlabel = '', ylabel = '')\nax3 = plt.subplot2grid((2,6), (0,4), colspan=2)\nax3 = sns.countplot(df_br['Q8'], order = df_br['Q8'].value_counts().index).set(title = 'Brazil', xlabel = '', ylabel = '')\nax4 = plt.subplot2grid((2,6), (1,1), colspan=2)\nax4 = sns.countplot(df_russia['Q8'], order = df_russia['Q8'].value_counts().index).set(title = 'Russia', xlabel = '', ylabel = '')\nax5 = plt.subplot2grid((2,6), (1,3), colspan=2)\nax5 = sns.countplot(df_france['Q8'], order = df_france['Q8'].value_counts().index).set(title = 'France', xlabel = '', ylabel = '')\n\nplt.show()","ed18da43":"from sklearn.ensemble import RandomForestClassifier\nfrom sklearn.model_selection import train_test_split\nfrom sklearn.metrics import accuracy_score\n\ndata_scientist_general = df[(df['Q5']=='Data Scientist') | (df['Q5']=='Currently not employed')]\ndata_scientist_general['age'] = np.where((data_scientist_general['Q1']== '18-21') | (data_scientist_general['Q1']== '22-24') | (data_scientist_general['Q1']== '25-29') | (data_scientist_general['Q1']== '30-34') | (data_scientist_general['Q1']== '35-39') | (data_scientist_general['Q1']== '40-44'), 1, 0)\ndata_scientist_general['sex'] = np.where(data_scientist_general['Q2']=='Man', 1, 0)\ndata_scientist_general['scholarity'] = np.where((data_scientist_general['Q4']=='Bachelor\u2019s degree') | (data_scientist_general['Q4']=='Master\u2019s degree') | (data_scientist_general['Q4']=='Doctoral degree'), 1, 0)\ndata_scientist_general['experience'] = np.where((data_scientist_general['Q6']=='I have never written code') | (data_scientist_general['Q6']=='< 1 years') | (data_scientist_general['Q6']=='1-2 years'), 0, 1)\ndata_scientist_general = data_scientist_general.drop(['Q1', 'Q2', 'Q4', 'Q6'], 1)\n\ndf_reg_general = data_scientist_general.drop(columns=['Q3'])\ndf_reg_general = pd.get_dummies(df_reg_general)\ndf_reg_general = df_reg_general.rename(columns = {'Q5_Data Scientist': 'DS', 'Q7_Part_1_Python': 'Python', 'Q7_Part_2_R': 'R'}, inplace = False)\n\nclf = RandomForestClassifier(min_samples_leaf=60, random_state=25)\n\nentradas = df_reg_general[['age', 'sex', 'scholarity', 'experience', 'Python', 'R']]\n\nx = pd.DataFrame(entradas)\ny = df_reg_general['DS']\n\nX_train, X_test, Y_train, Y_test = train_test_split(x, y, test_size = 0.20, random_state = 25)\n\nclf.fit(X_train, Y_train)\n\nrdf = clf.predict(X_test)\nacc = accuracy_score(Y_test,rdf)\n\nprint(\"Random Forest Accuracy:\", acc)","d4d94d87":"importance = clf.feature_importances_\n\nlist_1 = []\nlist_2 = []\nfor i,j in zip(importance,entradas.columns):\n    list_1.append(str(j))\n    list_2.append(i)\n\ndf_name = pd.DataFrame(list_1,columns=[\"Column\"])\ndf_number = pd.DataFrame(list_2,columns=[\"Importances\"])\n\ndf_ranking = pd.concat([df_name, df_number], axis=1)\ndf_final = df_ranking.sort_values(\"Importances\",ascending=False).reset_index(drop=True)\ndf_final.Column = df_final.Column.astype(str)\n\n\nf, ax = plt.subplots(figsize=(15, 10))\n\ncolors = ['blue', 'orange', 'green', 'red', 'purple', 'brown']\nsns.barplot(x=\"Column\", y=\"Importances\", data=df_final, palette=colors).set(title = 'Feature Importances', xlabel = '', ylabel = '')\n\nplt.show()","4f4b275e":"import plotly.graph_objects as go\n\ndf_Python = df[df['Q7_Part_1']=='Python']\ndf_Python = df_Python['Q5'].value_counts(normalize=True).mul(100).sort_index(ascending=True).round(2)\n\ndf_R = df[df['Q7_Part_2']=='R']\ndf_R = df_R['Q5'].value_counts(normalize=True).mul(100).sort_index(ascending=True).round(2)\n\nfig = go.Figure(data=[go.Table(\n    header=dict(values=['Current Role', 'Python', 'R'],\n                font=dict(color='white', size=12),\n                line_color='darkslategray',\n                fill_color='darkgrey',\n                align='left'),\n    cells=dict(values=[df_R.index, \n                       df_Python.values,\n                      df_R.values],\n               line_color='darkslategray',\n               fill_color='whitesmoke',\n               align='left'))\n])\n\nfig.show()","e5ef3cb8":"# Introduction\n\n* The main concern to elaborate this notebook, is based on the hypothesis that there are some characteristics influencing the probabilitity of a person, who have, at different levels, knowledge in data manipulation, be hired as a data scientist.\n\n* Note that is some characteristics beyond individual control, such as age or sex, that can influence the probability of being hired, but we won't focus on these points. Nonetheless, other factors can be relevant to be hired as a data scientist, like the education level or proficiency in Python or R, and it is important for professionals to know what to specialize in.   \n\n* So, to start our analisys, let's take a look at the data. \n","129ccb68":"# Estimation","f2976670":"\n\n* Analyzing the education level of data scientists, it's possible to observe that more than 80% of this professional have at least Bachelor's degree. So, probably, this variable will have a significant impact in our estimation. \n\n* The proportion of professionals who don't have formal education past high school is practically insignificant, only 0.83% of the base.  \n\n","9a452fbe":"\n* Note that the distribution of age in India is divergent from other countries beacuse the data scientists are younger in India. It appears that the distribution of age is similar between USA and France, and between Brazil and Russia. \n","8326222e":"\n\n* The results found to France and Russia don't presented a good fit, so we can't have good insights about this countries data scientists dynamics. This probably occurs because ther is a limited amount of data. Furthermore, the variables age and sex acts like control variables in this estimation, because they are characteristics beyond individual control and we don't want to analyse their impact on the final result. \n\n* The variables scholarity and experience has a less impact in India compared to USA and Brazil. This means that, a person who is starting in this area, have more probability to get a job as a data scientist in India than in USA and Brazil. This colaborate with the boxplot presented above, in general, Indian data scientists are younger compared to other countries.       \n* The programming language Python has significant impact in the fact of being a data scientist in Brazil and USA. In Brazil, this programming language consolidates as a very important factor and, for a person that wants to join this area, according to the estimation, it is recommended to specialize in Python. In the USA, despite Python also be relevant as the main programming language, a person who eventually knows R, also has considerable space in the labor market. Note that in India, only the variable related to R was significant, so we can't compare with Python, but even so, for a person that is starting in this area, R is a good programming langugage to specialize in.  \n\n","14d37169":"![img2.jpeg](attachment:3683fe77-c9ca-4f4b-9ab1-1407b67cc33f.jpeg)","880eedac":"# What are their education levels?","75f738fa":"\n\n* Here, we will expose our estimation strategy. For the estimation that will be presented bellow, we chose to analyze the dynamics of countries that have at least 100 responses in the survey. Therefore, the countries are: India, USA, Brazil, Russia and France. \n\n* So, we want to compare individuals who have some knowledge in data manipulation, but isn't current employed with those who is employed as a data scientist. We hope that some characteristics may exert influences of different magnitudes in different countries and this we will investigate.  <\/li> \n\n","919344bd":"\n\n* As discussed above, we will estimate a Probit Model, the independent variables are age, sex (1 if man, 0 otherwise), scholarity (1 if the person have Bachelor's degree or more than that, 0 otherwise), experience (1 if the individual have more than 2 years of experience writting a code, 0 otherwise) and, like discussed previously, we will use just dummies for Python and R, because some countries have little data, the degree of freedom of the estimation would be compromised if we have used the other programming languages as dummies in our estimation. \n\n* The dependent variable will be data_scientist (1 if the current role of person is data scient, 0 if it's not current employed).   \n\n","be3d348b":"\n* Now, to introduce the main motivation of this work, look the qualifiquation required of some linkedin jobs...\n","26a0cadd":"\n\n* Although R consolidates as a programming language with significant impact in some countries, like India and USA, note that the perception of data scientists in all countries is: \"Learn Python!!!\" \n\n","b689b278":"* Our main concern isn't focused in the accuracy of the model. Probabilly, including other features and adjusting it, we could obtain better accuracy. But, see the feature importances presented in the graph above.\n* Note that, experience remais the most important variable in the model. However, now R consolidates as a programming language with more importance in our model. Let's see a possible reason why this happens.","66ebd212":"\n* Let's see what is the perception of this data scientists about what aspirants should learn first.   \n","1ca51882":" \n\n* All the required qualifications presented above were extracted from linkedin jobs. Note that there are a variety of programming languages required for different job opportunities. So, we have a hypothesis that, depending on which country a person lives, specializing in certain programming languages can make it easier to get a job as a data scientist.\n\n* To investigate this hypotesis, we will estimate a Probit Model, to observe what characteristics impacts more on the fact of being or not a data scientist.  \n\n","5dbc97c6":"\n* **Work still in progress! Comments apreciated!**\n","c96d6b02":"# How old are they and what is their gender?","c89f087e":"\n\n* The database of data scientists and current not employed of India and USA corresponds to about 81% of total base. This limits us somewhat, because the reduced amount of data from other countries compromises the degree of freedom of our estimates, so the selection of variables should be reduced. We will have a more detailed discussion below. \n\n","89037d0f":"* In relative terms, R (21.37%) is more present in the profession of data scientist than Python (15.44%). It's as if Python is a little more distributed among the other occupations. In general, both programming languages are import to enter the labor market. ","40a8e87f":"# Let's see just data scients ","bfe5cca9":"## Where are they from?","85e5c132":"# Estimation for all countries","ef948869":"* We will use Random Forest Classifier as an alternative model for all countries estimation. Note that here, we use the same variables used in the Probit Model, as a basis for comparision. ","cbb36528":"# What is needed to be hired as a data scientist? ","26c491dd":"* 2021 Kaggle Machine Learning & Data Science Survey has 42 main questions plus 9 supplementary questions, that results in a database containing 25974 rows and 369 columns (some questions could be answered more than once).\n","b844ca7b":"## Base for estimation","aef60006":"![img1](https:\/\/uploads-ssl.webflow.com\/5e6947ce836a8f4014824e30\/604fe709a68de064754c7c85_markus-spiske-466ENaLuhLY-unsplash-p-1080.jpeg)","432ba780":"* Note that, for all age groups, most data scientists are man. Furthermore, about 59% of data scientists are between 22 and 34 years old. \n\n* From the age of 40, the gap between man and woman increases, so that, in the age group 55-59, the ratio is one woman to twenty one men, while in 25-29, the ratio was from one woman to about five men.  \n    \n "}}