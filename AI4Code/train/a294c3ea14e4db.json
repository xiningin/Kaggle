{"cell_type":{"bfcb718b":"code","b8dc1f7d":"code","d4b5cb25":"code","1f9752a8":"code","80aec56e":"code","c89e0b9a":"code","1197b2c8":"code","3ed2e048":"code","b084bd04":"code","3675117e":"code","b87399ce":"code","d3742076":"code","740fbb4f":"code","964ce23b":"code","18161f29":"code","7be23bf0":"code","a27a0ce9":"markdown","cd681712":"markdown","583463ec":"markdown","83c1a032":"markdown","11b34bfe":"markdown","2bda5a15":"markdown","304f2f2f":"markdown","450b15e7":"markdown","fb2bd13b":"markdown","5bd0cdae":"markdown"},"source":{"bfcb718b":"## Importing necessary libraries\nimport numpy as np\nimport pandas as pd\nimport matplotlib.pyplot as plt\n%matplotlib inline\nimport seaborn as sns\nplt.style.use(\"seaborn-pastel\")\n\n# Plotting geographical data\nimport folium\nimport os\nimport warnings\nwarnings.filterwarnings('ignore')","b8dc1f7d":"# Total power plants in Puerto Rico\ndf_power_plants = pd.read_csv('..\/input\/ds4g-environmental-insights-explorer\/eie_data\/gppd\/gppd_120_pr.csv')\ndf_power_plants.head().T","d4b5cb25":"lat_lng = df_power_plants[\".geo\"].apply(lambda x: pd.read_json(x)[\"coordinates\"])\ndf_power_plants = df_power_plants.assign(lat=lat_lng[1],lng=lat_lng[0])","1f9752a8":"remove_col = []\nfor colname,col_serie in df_power_plants.iteritems():\n    if len(col_serie.unique())== 1:\n        remove_col.append(colname)\n        \ndf_power_plants.drop(columns=remove_col,inplace=True)\nprint(\"Removed columns: {}\\n\".format(\", \".join(remove_col)))\nprint(\"Final columns: {}\".format(\", \".join(df_power_plants.columns)))","80aec56e":"df_power_plants.shape[0] == df_power_plants[\"system:index\"].unique().shape[0]","c89e0b9a":"df_power_plants[\"system:index\"].unique().shape[0] == df_power_plants[\"system:index\"].apply(lambda x: x[-3:]).unique().shape[0]","1197b2c8":"df_power_plants[\"name_id\"] = df_power_plants[\"name\"] + \"_\" + df_power_plants[\"system:index\"].apply(lambda x: x[-3:])","3ed2e048":"plt.figure(figsize=(8,7))\nplt.title(\"Electrical generating capacity (MW) by plants\")\ndf_power_plants.groupby([\"name_id\"]).mean()[\"capacity_mw\"].sort_values().plot(kind=\"barh\")\nplt.tight_layout()","b084bd04":"plt.figure(figsize=(15,8))\nax = plt.subplot(1,2,1)\nplt.title(\"Estimated annual electricity generation in gigawatt-hours\")\ndf_power_plants.groupby([\"name_id\"]).mean()[\"estimated_generation_gwh\"].sort_values().plot(kind=\"barh\",ax=ax)\n\nax = plt.subplot(1,2,2)\nplt.title(\"Electrical generating capacity (MW) by plants\")\ndf_power_plants.groupby([\"name_id\"]).mean()[\"capacity_mw\"].sort_values().plot(kind=\"barh\",ax=ax)\nplt.tight_layout()","3675117e":"plt.figure(figsize=(15,5))\nax = plt.subplot(1,2,1)\ndf_power_plants.groupby([\"primary_fuel\"])[[\"capacity_mw\"]].sum().sort_values(by=\"capacity_mw\").plot(kind=\"barh\",ax=ax);\nplt.title(\"Electrical generating capacity (MW sum) by primary_fuel\");\n\nax = plt.subplot(1,2,2)\ndf_power_plants.groupby([\"primary_fuel\"])[[\"name_id\"]].count().sort_values(by=\"name_id\", ascending=False).plot(kind=\"bar\",ax=ax);\nplt.title(\"Power Plants based on primary Fuel\");","b87399ce":"df_power_plants.shape[0] == df_power_plants[\"gppd_idnr\"].unique().shape[0]","d3742076":"df_power_plants[[\"commissioning_year\",\"capacity_mw\"]].sort_values(by=\"commissioning_year\").plot(kind=\"scatter\",x=\"commissioning_year\",y=\"capacity_mw\",s=32)","740fbb4f":"print(df_power_plants[\"owner\"].unique())\ndf_power_plants.groupby(\"owner\").count()[\"name_id\"].sort_values()","964ce23b":"plt.figure(figsize=(8,8))\ndf_power_plants.groupby(\"owner\").sum()[\"estimated_generation_gwh\"].sort_values(ascending=False).plot(kind=\"bar\")\nplt.tight_layout()\n\nprint(\"Estimated generation sum (GWH) by owner\")\nprint(df_power_plants.groupby(\"owner\").sum()[\"estimated_generation_gwh\"]\/df_power_plants[\"estimated_generation_gwh\"].sum())\n","18161f29":"def addpoint(lat,lng,data,scale=10,var_circle=\"capacity_mw\"):\n    folium.Marker(\n    location=[lat, lng],\n    popup=pd.DataFrame(data).to_html(),\n    icon=folium.Icon(icon='bolt',color='black',icon_color=\"yellow\",prefix=\"fa\")\n    ).add_to(m)\n    \n    folium.CircleMarker(\n    location=[lat, lng],\n    radius=data[var_circle]\/scale,\n    color='red',\n    fill=True,\n    fill_color='red'\n    ).add_to(m)\n    \n    \nm = folium.Map(tiles=\"cartodbpositron\",\n    location=[18.245497, -66.524216],\n            zoom_start=9)\n\ndf_power_plants.apply(lambda x: addpoint(x.lat,x.lng,x),axis=1 )\nprint(\"Capacity_mw\")\n\nm","7be23bf0":" m = folium.Map(tiles=\"cartodbpositron\",\n    location=[18.245497, -66.524216],\n            zoom_start=9)\n\ndf_power_plants.apply(lambda x: addpoint(x.lat,x.lng,x,1000,\"estimated_generation_gwh\"),axis=1 )\nprint(\"estimated_generation_gwh\")\n\nm","a27a0ce9":"## Remove irrelevants columns\n\n\nAll columns with a single unique value are removed","cd681712":"## Columns\n\n### system:index\nUnique plant-level ID\n\n\n","583463ec":"### gppd_idnr\n10- or 12-character identifier for the power plant","83c1a032":"# Analysing Global Power Plant Database (Puerto Rico)","11b34bfe":"## estimated_generation_gwh\n\nEstimated annual electricity generation in gigawatt-hours","2bda5a15":"### Primary_fuel\n\nEnergy source used in primary electricity generation or export","304f2f2f":"### Owner\n\t\nMajority shareholder of the power plant, generally in Romanized form","450b15e7":"### Commissioning_year\n\nYear of plant operation, weighted by unit-capacity when data is available","fb2bd13b":"### Geographical analysis","5bd0cdae":"\n### capacity_mw\n\nElectrical generating capacity in megawatts. Is the maximum electric output an electricity generator can produce under specific conditions. Nameplate generator capacity is determined by the generator's manufacturer and indicates the maximum output of electricity a generator can produce without exceeding design limits."}}