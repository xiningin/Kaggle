{"cell_type":{"e8502093":"code","1b95b05b":"code","b106ff4c":"code","a78c8a08":"code","4253c354":"code","5d68dadf":"code","e199801b":"code","b9e0dd6b":"code","0bc42052":"code","e7deeacd":"code","63e6dfbe":"code","4905581a":"code","c9083ddf":"code","4721d1da":"code","e351eaf8":"markdown","afcf2080":"markdown","b822adcd":"markdown","12dfc5b5":"markdown","6cdde16a":"markdown","d5584bad":"markdown","ed25b06a":"markdown","69969dbb":"markdown","ac13e767":"markdown","3c9b86b1":"markdown","e55cdfe7":"markdown","8d596a04":"markdown","a6057625":"markdown","b059459d":"markdown","48fdf20c":"markdown","5262c666":"markdown","176767c7":"markdown","b9498b87":"markdown","a7ed4844":"markdown","fa31edc5":"markdown","e10590bc":"markdown","a30a7c49":"markdown","8b344a2c":"markdown"},"source":{"e8502093":"import numpy as np \nimport pandas as pd\n\nimport os\nfrom os import path\nimport plotly.offline as py\nimport plotly.graph_objs as go\nimport plotly.tools as tls\nimport plotly.figure_factory as ff\nimport matplotlib.pyplot as plt\nfrom PIL import Image\nfrom wordcloud import WordCloud, STOPWORDS\nimport seaborn as sns\nprint(os.listdir(\"..\/input\"))\nimport urllib","1b95b05b":"# Loading the data\ndata_d = pd.read_csv('..\/input\/plane-crash\/planecrashinfo_20181121001952.csv')\ndata_d.head()","b106ff4c":"# Loading geocoded data\ndata_geocoded = pd.read_csv('..\/input\/air-crash-geocoded-20\/geocoded_locations_new.csv')\ndata_geocoded.head()","a78c8a08":"py.init_notebook_mode(connected=True)\n\npy.init_notebook_mode(connected=True)\n\n\ndata = [ dict(\n        type = 'scattergeo',\n        lon = data_geocoded['Longitude'],\n        lat = data_geocoded['Latitude'],\n        text = data_geocoded['Locations'],\n        mode = 'markers',\n        marker = dict(\n            size = 8,\n            opacity = 0.6,\n            reversescale = True,\n            autocolorscale = False,\n            symbol = 'circle',\n            line = dict(\n                width=1,\n                color='rgba(102, 102, 102)'\n            ),\n            color = 'red',\n        ))]\n\nlayout = dict(\n        title = 'Plane crashes<br>(Hover for crash locations)',\n        geo = dict(\n            showland = True,\n            landcolor = \"rgb(255, 255, 255)\",\n            countrycolor = \"rgb(217, 217, 217)\",\n            countrywidth = 0.5,\n            subunitwidth = 0.5\n        ),\n    )\n\nfig = dict( data=data, layout=layout )\npy.iplot( fig, validate=False, filename='historic-crashes' )","4253c354":"fig = ff.create_distplot([data_geocoded['year']], ['Crashes'])\nfig['layout'].update(title='Distplot of Crashes through years', xaxis=dict(title='Year'))\npy.iplot(fig, filename='Basic Distplot')","5d68dadf":"data = [ dict(\n        type = 'scattergeo',\n        lon = data_geocoded['Longitude'][data_geocoded['year']<1940],\n        lat = data_geocoded['Latitude'][data_geocoded['year']<1940],\n        text = data_geocoded['Locations'][data_geocoded['year']<1940],\n        mode = 'markers',\n        marker = dict(\n            size = 8,\n            opacity = 0.6,\n            reversescale = True,\n            autocolorscale = False,\n            symbol = 'circle',\n            line = dict(\n                width=1,\n                color='rgba(102, 102, 102)'\n            ),\n            color = 'red',\n        ))]\n\nlayout = dict(\n        title = 'Plane crashes Before 1940<br>(Hover for crash locations)',\n        geo = dict(\n            showland = True,\n            landcolor = \"rgb(255, 255, 255)\",\n            countrycolor = \"rgb(217, 217, 217)\",\n            countrywidth = 0.5,\n            subunitwidth = 0.5\n        ),\n    )\n\nfig = dict( data=data, layout=layout )\npy.iplot( fig, validate=False, filename='historic-crashes' )","e199801b":"data = [ dict(\n        type = 'scattergeo',\n        lon = data_geocoded['Longitude'][(data_geocoded['year']>=1940).values & (data_geocoded['year']<1960).values],\n        lat = data_geocoded['Latitude'][(data_geocoded['year']>=1940).values & (data_geocoded['year']<1960).values],\n        text = data_geocoded['Locations'][(data_geocoded['year']>=1940).values & (data_geocoded['year']<1960).values],\n        mode = 'markers',\n        marker = dict(\n            size = 8,\n            opacity = 0.6,\n            reversescale = True,\n            autocolorscale = False,\n            symbol = 'circle',\n            line = dict(\n                width=1,\n                color='rgba(102, 102, 102)'\n            ),\n            color = 'red',\n        ))]\n\nlayout = dict(\n        title = 'Plane crashes 1940-1960<br>(Hover for crash locations)',\n        geo = dict(\n            showland = True,\n            landcolor = \"rgb(255, 255, 255)\",\n            countrycolor = \"rgb(217, 217, 217)\",\n            countrywidth = 0.5,\n            subunitwidth = 0.5\n        ),\n    )\n\nfig = dict( data=data, layout=layout )\npy.iplot( fig, validate=False, filename='historic-crashes' )","b9e0dd6b":"data = [ dict(\n        type = 'scattergeo',\n        lon = data_geocoded['Longitude'][(data_geocoded['year']>=1960).values & (data_geocoded['year']<1980).values],\n        lat = data_geocoded['Latitude'][(data_geocoded['year']>=1960).values & (data_geocoded['year']<1980).values],\n        text = data_geocoded['Locations'][(data_geocoded['year']>=1960).values & (data_geocoded['year']<1980).values],\n        mode = 'markers',\n        marker = dict(\n            size = 8,\n            opacity = 0.6,\n            reversescale = True,\n            autocolorscale = False,\n            symbol = 'circle',\n            line = dict(\n                width=1,\n                color='rgba(102, 102, 102)'\n            ),\n            color = 'red',\n        ))]\n\nlayout = dict(\n        title = 'Plane crashes 1960-1980<br>(Hover for crash locations)',\n        geo = dict(\n            showland = True,\n            landcolor = \"rgb(255, 255, 255)\",\n            countrycolor = \"rgb(217, 217, 217)\",\n            countrywidth = 0.5,\n            subunitwidth = 0.5\n        ),\n    )\n\nfig = dict( data=data, layout=layout )\npy.iplot( fig, validate=False, filename='historic-crashes' )","0bc42052":"data = [ dict(\n        type = 'scattergeo',\n        lon = data_geocoded['Longitude'][(data_geocoded['year']>=1980).values & (data_geocoded['year']<2000).values],\n        lat = data_geocoded['Latitude'][(data_geocoded['year']>=1980).values & (data_geocoded['year']<2000).values],\n        text = data_geocoded['Locations'][(data_geocoded['year']>=1980).values & (data_geocoded['year']<2000).values],\n        mode = 'markers',\n        marker = dict(\n            size = 8,\n            opacity = 0.6,\n            reversescale = True,\n            autocolorscale = False,\n            symbol = 'circle',\n            line = dict(\n                width=1,\n                color='rgba(102, 102, 102)'\n            ),\n            color = 'red',\n        ))]\n\nlayout = dict(\n        title = 'Plane crashes 1980-2000<br>(Hover for crash locations)',\n        geo = dict(\n            showland = True,\n            landcolor = \"rgb(255, 255, 255)\",\n            countrycolor = \"rgb(217, 217, 217)\",\n            countrywidth = 0.5,\n            subunitwidth = 0.5\n        ),\n    )\n\nfig = dict( data=data, layout=layout )\npy.iplot( fig, validate=False, filename='historic-crashes' )","e7deeacd":"data = [ dict(\n        type = 'scattergeo',\n        lon = data_geocoded['Longitude'][(data_geocoded['year']>=2000).values & (data_geocoded['year']<2020).values],\n        lat = data_geocoded['Latitude'][(data_geocoded['year']>=2000).values & (data_geocoded['year']<2020).values],\n        text = data_geocoded['Locations'][(data_geocoded['year']>=2000).values & (data_geocoded['year']<2020).values],\n        mode = 'markers',\n        marker = dict(\n            size = 8,\n            opacity = 0.6,\n            reversescale = True,\n            autocolorscale = False,\n            symbol = 'circle',\n            line = dict(\n                width=1,\n                color='rgba(102, 102, 102)'\n            ),\n            color = 'red',\n        ))]\n\nlayout = dict(\n        title = 'Plane crashes 2000-2020<br>(Hover for crash locations)',\n        geo = dict(\n            showland = True,\n            landcolor = \"rgb(255, 255, 255)\",\n            countrycolor = \"rgb(217, 217, 217)\",\n            countrywidth = 0.5,\n            subunitwidth = 0.5\n        ),\n    )\n\nfig = dict( data=data, layout=layout )\npy.iplot( fig, validate=False, filename='historic-crashes' )","63e6dfbe":"text = ' '.join(data_d['route'][data_d['route']!='?'].values)\nimport urllib\nfile = urllib.request.urlopen('https:\/\/i.pinimg.com\/564x\/f8\/98\/f2\/f898f2b1d68f0218f7dbc2a459a60bb0.jpg')\nimg = Image.open(file)\nalice_mask = np.array(img)\nstopwords = set(STOPWORDS)\nwc = WordCloud(background_color=\"white\", max_words=200, mask=alice_mask,\n               stopwords=stopwords, contour_width=0)\n\n# generate word cloud\nwc.generate(text.lower())\nplt.figure(figsize = (10, 10))\nplt.imshow(wc, interpolation='bilinear')\nplt.axis(\"off\")\nplt.show()","4905581a":"text = ' '.join(data_d['ac_type'][data_d['ac_type']!='?'].values)\nfile = urllib.request.urlopen('https:\/\/i.pinimg.com\/564x\/f8\/98\/f2\/f898f2b1d68f0218f7dbc2a459a60bb0.jpg')\nimg = Image.open(file)\nalice_mask = np.array(img)\nstopwords = set(STOPWORDS)\nwc = WordCloud(background_color=\"white\", max_words=200, mask=alice_mask,\n               stopwords=stopwords, contour_width=0)\n\n# generate word cloud\nwc.generate(text.lower())\nplt.figure(figsize = (10, 10))\nplt.imshow(wc, interpolation='bilinear')\nplt.axis(\"off\")\nplt.show()","c9083ddf":"text = ''\nfor i in data_d['summary']:\n    if i != '?':\n        text = text + i\n\nfile = urllib.request.urlopen('https:\/\/i.pinimg.com\/564x\/f8\/98\/f2\/f898f2b1d68f0218f7dbc2a459a60bb0.jpg')\nimg = Image.open(file)\nalice_mask = np.array(img)\nstopwords = set(STOPWORDS)\nstopwords.add(\"aircraft\")\nstopwords.add(\"crashed\")\nstopwords.add(\"airplane\")\nstopwords.add(\"plane\")\nstopwords.add(\"helicopter\")\nwc = WordCloud(background_color=\"white\", max_words=200, mask=alice_mask,\n               stopwords=stopwords, contour_width=0)\n\n# generate word cloud\nwc.generate(text.lower())\nplt.figure(figsize = (10, 10))\nplt.imshow(wc, interpolation='bilinear')\nplt.axis(\"off\")\nplt.show()","4721d1da":"fatalities = []\nfor i in data_geocoded['fatalities']:\n    n = i.split()[0]\n    if n != '?':\n        if int(n) <=100:\n            fatalities.extend([int(n)])\n\nfig = ff.create_distplot([fatalities], ['Fatalities'])\nlayout = go.Layout(\n    title='Distplot of Fatalities',\n    xaxis=dict(\n        title='No. of Fatalities',\n        titlefont=dict(\n            color='#000000'\n        )\n    )\n)\nfig['layout'].update(title='Distplot of Fatalities', xaxis=dict(\n        title='No. of Fatalities',\n        titlefont=dict(\n            color='#7f7f7f'\n        )\n    ))\npy.iplot(fig, filename='Basic Distplot')","e351eaf8":"<a id=\"3\"><\/a>\n## Distribution of the number of crashes through the years\n[back to top](#top)","afcf2080":"Douglas DCs and Boeings seem to be crashing a lot. \n\nTurns out Douglas DC is the most produced Airline\/Transport aircraft. (Source: [Wikipedia](https:\/\/en.wikipedia.org\/wiki\/List_of_most-produced_aircraft)]","b822adcd":"<a id=\"2\"><\/a>\n## Plot of all Crash Locations in the dataset\n[back to top](#top)","12dfc5b5":"<a id=\"6\"><\/a>\n### Model of planes that crash a lot\n[back to top](#top)","6cdde16a":"We see that most of the planes that crashes had New York, Alaska (AK) or Paris in their route. Planes in training also crashed a lot.","d5584bad":"<a id=\"4-1980\"><\/a>\n### 1980-2000","ed25b06a":"<a id=\"4-1940\"><\/a>\n### 1940-1960","69969dbb":"<a id=\"top\"><\/a>\n# Sometimes they don't make it down in one piece\n\nEvery aircraft made by man (using paper or metal) eventually comes down, sometimes not in on piece. In this kernel I explore and analyze plane crashes through history.","ac13e767":"We can see that the crash sites are initially concentrated in North America and Europe. Then, it starts spread to other parts of the globe.","3c9b86b1":"<a id=\"maps\"><\/a>\n# Crashes grouped by years.\n[back to top](#top)","e55cdfe7":"The above word cloud gives us a good understanding of the causes of crashes in most cases.","8d596a04":"Seems like all the continents have their fair share of crashes. There is almost no crashes in Antartica and Greenland, which is understandable.","a6057625":"## Word Clouds","b059459d":"<a id=\"4-2000\"><\/a>\n### 2000-2020","48fdf20c":"We see very few crashes near 1920. This is because the commercial arlines were first intruduced in [1915](https:\/\/en.wikipedia.org\/wiki\/Airliner#History). Since then, they have increased in popularity. This led to more metallic birds over our head and more crashes.\n\nFrom somewhere around 1990s we a drop in number of crashes. This could be due to improvement in technologies (or maybe the dataset has not recorded every crash \u00af\\\\_(\u30c4)_\/\u00af  ).","5262c666":"## Contents\n1. [Geocoding Crash Locations](#1)\n1. [Plot of all the Crash locations](#2)\n1. [Distribution of crashes through years](#3)\n1. [Maps](#maps)\n    1. [Crash Locations (till 1940)](#4-0)\n    1. [Crash Location (1940 - 1960)](#4-1940)\n    1. [Crash Location (1960 - 1980)](#4-1960)\n    1. [Crash Location (1980 - 2000)](#4-1980)\n    1. [Crash Location (2000 - 2020)](#4-2000)\n1. [Word Clouds](#word_clouds)\n    1. [Route During Crash](#5)\n    1. [Models that Crash a lot](#6)\n    1. [Most occuring words in crash summaries](#7)\n1. [Distribution of fatalities in crash](#8)","176767c7":"<a id='4-0'><\/a>\n### till 1940","b9498b87":"<a id=\"7\"><\/a>\n### Most occuring words in crash summaries\n[back to top](#top)","a7ed4844":"<a id=\"1\"><\/a>\n## Geocoding Crash Locations\nThis dataset has a feature called ```location```. This denotes the location of the crash. I had to geocode these location. I used [HERE](https:\/\/developer.here.com\/) to geocode the given locations. The code for which can be found [here](https:\/\/pastebin.com\/WPUEvfQg)\n\nYou can also use Openstreetmap. Code for which can be found [here](https:\/\/pastebin.com\/qAPhASxx)\n\n[back to top](#top)","fa31edc5":"<a id=\"4-1960\"><\/a>\n### 1960-1980","e10590bc":"Most of the times, only 1, 2 or 3 people were killed in the crash (That's a good thing).","a30a7c49":"<a id=\"8\"><\/a>\n### Distribution of number of fatalities during crash\n[back to top](#top)","8b344a2c":"<a id=\"5\"><\/a>\n### Routes that have a lot of crashes\n[back to top](#top)"}}