{"cell_type":{"fa99e427":"code","4a298c22":"code","1c4d867b":"code","9a9b7cf3":"code","8a5053ff":"code","ee0c849d":"code","db4ab305":"code","543e9315":"code","ec411868":"code","0b2a7f7e":"code","f2d227cf":"code","94523451":"code","9da77dbf":"code","7cc26d10":"code","28184c29":"code","cfdaa043":"code","cf79935e":"code","79c483b0":"code","5ec9d299":"markdown","5e12abeb":"markdown","5cb3837a":"markdown","2369367d":"markdown","09785a86":"markdown","fcc33c00":"markdown","b0074b87":"markdown","a37331ee":"markdown","7896bbd5":"markdown","cccbda97":"markdown","fa691863":"markdown"},"source":{"fa99e427":"# Setting package umum \nimport pandas as pd\nimport pandas_profiling as pp\nimport numpy as np\nimport matplotlib.pyplot as plt\nimport matplotlib.gridspec as gridspec\nimport seaborn as sns\nfrom tqdm import tqdm_notebook as tqdm\n%matplotlib inline\n\nfrom matplotlib.pylab import rcParams\n# For every plotting cell use this\n# grid = gridspec.GridSpec(n_row,n_col)\n# ax = plt.subplot(grid[i])\n# fig, axes = plt.subplots()\nrcParams['figure.figsize'] = [10,5]\nplt.style.use('fivethirtyeight') \nsns.set_style('whitegrid')\n\nimport warnings\nwarnings.filterwarnings('ignore')\nfrom tqdm import tqdm\n\npd.set_option('display.max_rows', 100)\npd.set_option('display.max_columns', 200)\npd.options.display.float_format = '{:.5f}'.format\n\nimport os\nfor dirname, _, filenames in os.walk('\/kaggle\/input'):\n    for filename in filenames:\n        print(os.path.join(dirname, filename))","4a298c22":"# Load dataset\ndf = pd.read_csv('\/kaggle\/input\/josh-devlin-2018-nba-playoff-shoot\/playoff_shots.csv')","1c4d867b":"# Dataset overview\ndf.head(10)","9a9b7cf3":"# Get all the player on each team\ndict_player = {}\nfor team in df['team'].unique() :\n    dict_player[team] = df[df['team']==team]['player_name'].unique()\n    \ndisplay(dict_player['Golden State Warriors'])","8a5053ff":"### Function to generate shooting summary\ndef shooting_summary(df, by) :\n    \n    # Filter dataset\n    df_summary = df.copy()\n    df_3p = df_summary[df_summary['shot_type']=='3PT']\n    df_2p = df_summary[df_summary['shot_type']=='2PT']\n    df_ft = df_summary[df_summary['shot_type']=='FT']\n    result = pd.DataFrame()\n    \n    # Count FGA  and FG% for all attempt\n    all_make = df_summary[df_summary['result']=='make'].groupby(by).count()['game_id']\n    all_miss = df_summary[df_summary['result']=='miss'].groupby(by).count()['game_id']\n    result['Shot Attempts'] = all_make + all_miss\n    result['Shot %'] = all_make \/ result['Shot Attempts'] * 100\n    \n    # Count FGA and FG% for 3p\n    make_3p = df_3p[df_3p['result']=='make'].groupby(by).count()['game_id']\n    miss_3p = df_3p[df_3p['result']=='miss'].groupby(by).count()['game_id']\n    result['3p Attempts'] = make_3p + miss_3p\n    result['3p %'] = make_3p \/ result['3p Attempts'] * 100\n    \n    # Count FGA and FG% for 2p\n    make_2p = df_2p[df_2p['result']=='make'].groupby(by).count()['game_id']\n    miss_2p = df_2p[df_2p['result']=='miss'].groupby(by).count()['game_id']\n    result['2p Attempts'] = make_2p + miss_2p\n    result['2p %'] = make_2p \/ result['2p Attempts'] * 100\n    \n    # Count FGA and FG% for FT\n    make_ft = df_ft[df_ft['result']=='make'].groupby(by).count()['game_id']\n    miss_ft = df_ft[df_ft['result']=='miss'].groupby(by).count()['game_id']\n    result['FT Attempts'] = make_ft + miss_ft\n    result['FT %'] = make_ft \/ result['FT Attempts'] * 100\n    \n    # Calculate proportion of team shot attempts\n    result['TS Proportion'] = result['Shot Attempts'] \/ np.sum(result['Shot Attempts']) * 100\n    \n    return result","ee0c849d":"### Shooting summary of GSW\nrcParams['figure.figsize'] = [15,5]\nplt.style.use('fivethirtyeight') \nsns.set_style('whitegrid')\ngrid = gridspec.GridSpec(1,2)\n\n# Plot prep\ngsw = df[df['team']=='Golden State Warriors']\ndf_plot = shooting_summary(gsw, 'player_name').fillna(0).sort_values('Shot Attempts', ascending=False).head(5)\n\n# Plot shooting percentage\nax1 = plt.subplot(grid[0])\nsns.heatmap(df_plot[['Shot %', '3p %', '2p %', 'FT %', 'TS Proportion']], annot=True, ax=ax1, cmap='Pastel1_r', linewidths=2)\nax1.set_title('GSW Shooting Percentage', fontname='Monospace', fontsize='20', fontweight='bold')\n\n# Plot shooting attempts\nax2 = plt.subplot(grid[1])\nsns.heatmap(df_plot[['3p Attempts', '2p Attempts', 'FT Attempts']], annot=True, fmt='.2f', cmap='Pastel1_r', ax=ax2, linewidths=2)\nax2.set_title('GSW Shooting Attempts', fontname='Monospace', fontsize='20', fontweight='bold')\nplt.tight_layout()\n","db4ab305":"### Check wether a player like to shoot more than KD\nrcParams['figure.figsize'] = [10,5]\nplt.style.use('fivethirtyeight') \nsns.set_style('whitegrid')\n\n# Plot prep\nkevin_durant_prop = 26.27570\nresult = pd.DataFrame()\n\nfor team in df['team'].unique() :\n    df_team = df[df['team']==team]\n    summary = shooting_summary(df_team, 'player_name')\n    \n    bool_team_shot = summary['TS Proportion'] >= kevin_durant_prop\n    result = pd.concat([result, summary[bool_team_shot]])\n    \n# Plot\ncmap = sns.color_palette(\"Pastel1_r\")\nresult['TS Proportion'].sort_values().plot(kind='barh', color=cmap)\n\n# Add cosmetics\nlist_x = list(np.round(result['TS Proportion'].sort_values(), 2))\nlist_y = list(np.arange(-0.1, 5.9, 1)) \nfor x,y in zip(list_x,list_y) :\n    plt.text(x + 0.5, y, str(x), fontweight='bold', fontsize=14, fontname='Monospace')\n    \nplt.plot([0, np.max(list_x)], [0.5, 0.5], '--', color='grey')\nplt.text(np.max(list_x) + 0.5, 0.4, 'Threshold', fontname='Monospace', fontsize=14)\n    \nplt.xlabel('Team Shot Proportion')\nplt.title('Top Player based on TS Proportion', fontname='Monospace', fontsize=20, fontweight='bold')\nplt.xlim(0, np.max(list_x) * 1.2) ;","543e9315":"### Compare KD and LeBron\ndef highlight_max(s):\n    '''\n    highlight the maximum \n    '''\n    is_max = s == s.max()\n    return ['background-color:#f85a40' if v else '' for v in is_max]\n\nprint('--- Comparison of Kevin Durant and Lebron James throughout the playoffs 2018 ---')\ndisplay(result[result.index.isin(['LeBron James','Kevin Durant'])].T.style.apply(highlight_max, axis=1))","ec411868":"### Shooting stats in the Finals only\ndf_final = df[df['game_description'].str.contains('CLE v GS')]\nresult = shooting_summary(df_final, 'player_name')\n\nprint('--- Comparison of Kevin Durant and Lebron James in NBA Finals 2018 ---')\ndisplay(result[result.index.isin(['LeBron James','Kevin Durant'])].T.style.apply(highlight_max, axis=1))","0b2a7f7e":"### Grand comparison\nrcParams['figure.figsize'] = [10,5]\nplt.style.use('fivethirtyeight') \nsns.set_style('whitegrid')\n\nlist_var = ['Shot %','3p %','2p %','FT %']\nteam = 'Golden State Warriors'\nresult = pd.DataFrame()\n\n# First round\nfirst_round_desc = list(df['game_description'].unique())[:44]\nfirst_round_desc.append('CLE v IND, G7')\nfirst_round = df[df['game_description'].isin(first_round_desc)]\nsummary_first_round = shooting_summary(first_round, 'team')[list_var]\nfor var in list_var :\n    summary_first_round[var] = summary_first_round[var].rank(ascending=False)\nteam_summary = summary_first_round[summary_first_round.index == team]\nteam_summary.index = ['First Round (16)']\nresult = pd.concat([result, team_summary])\n\n# Conference Seminfinals\nconf_semi_desc = list(df['game_description'].unique())[44:64]\nconf_semi_desc.remove('CLE v IND, G7')\nconf_semi = df[df['game_description'].isin(conf_semi_desc)]\nsummary_conf_semi = shooting_summary(conf_semi, 'team')[list_var]\nfor var in list_var :\n    summary_conf_semi[var] = summary_conf_semi[var].rank(ascending=False, method='min')\nteam_summary = summary_conf_semi[summary_conf_semi.index == team]\nteam_summary.index = ['Conf. Semifinals (8)']\nresult = pd.concat([result, team_summary])\n\n# Conference Finals\nconf_finals_desc = list(df['game_description'].unique())[64:78]\nconf_finals = df[df['game_description'].isin(conf_finals_desc)]\nsummary_conf_finals = shooting_summary(conf_finals, 'team')[list_var]\nfor var in list_var :\n    summary_conf_finals[var] = summary_conf_finals[var].rank(ascending=False)\nteam_summary = summary_conf_finals[summary_conf_finals.index == team]\nteam_summary.index = ['Conf. Finals (4)']\nresult = pd.concat([result, team_summary])\n\n# Finals\nfinals_desc = list(df['game_description'].unique())[78:]\nfinals = df[df['game_description'].isin(finals_desc)]\nsummary_finals = shooting_summary(finals, 'team')[list_var]\nfor var in list_var :\n    summary_finals[var] = summary_finals[var].rank(ascending=False)\nteam_summary = summary_finals[summary_finals.index == team]\nteam_summary.index = ['Finals (2)']\nresult = pd.concat([result, team_summary])\n                      \n# Plot\nsns.heatmap(result, annot=True, cmap='Pastel1', linewidths=2)\nplt.title('GSW Shooting % Rank', fontname='Monospace', fontsize='20', fontweight='bold') ;","f2d227cf":"### 3p of GSW in 3rd period\nrcParams['figure.figsize'] = [10,5]\nplt.style.use('fivethirtyeight') \nsns.set_style('whitegrid')\ngrid = gridspec.GridSpec(1,1)\n\n# Prep plot\ndf_plot = shooting_summary(gsw, 'period').iloc[:4].reset_index()\ndf_plot['period'] = df_plot['period'].astype('str')\n\n# Plot\nax1 = plt.subplot(grid[0])\nsns.barplot(x=df_plot['period'], y=df_plot['3p Attempts'], ax=ax1, color='#4298b5', alpha=0.5)\nax1.set_ylim([0,180])\n\nax2 = ax1.twinx()\nsns.lineplot(x=df_plot['period'], y=df_plot['3p %'], color='#f85a40', ax=ax2)\nax2.set_ylim([25, 46]) ;\n\n# Add cosmetics\nplt.title('3p of GSW based on period', fontname='Monospace', fontsize='20', fontweight='bold') ;","94523451":"### Compare production of each player based on period\nrcParams['figure.figsize'] = [10,5]\nplt.style.use('fivethirtyeight') \nsns.set_style('whitegrid')\n\n# Plot prep\nlist_player = ['Kevin Durant','Stephen Curry','Klay Thompson']\nlist_period = [1,2,3,4]\n\ngsw = df[df['team']=='Golden State Warriors']\ngsw_summary = shooting_summary(gsw, ['player_name','period']).reset_index()\ngsw_summary = gsw_summary[gsw_summary['player_name'].isin(list_player)]\ngsw_summary = gsw_summary[gsw_summary['period'].isin(list_period)]\n\n# Plot\nsns.barplot(data=gsw_summary, x='period',y='3p %', hue='player_name')\n\n# Add cosmetics\nplt.title('3p% of Top GSW player based on period', fontname='Monospace', fontsize='20', fontweight='bold') ;","9da77dbf":"# Ordered the dataframe\nsort_order = [\"player_id\", \"shot_type\", \"game_id\", \"period\", \"period_time\"]\nascending = [True, True, True, True, False]\n\ndf_ordered = df.sort_values(sort_order, ascending=ascending).reset_index(drop=True)","7cc26d10":"### Function for making streaks count\ndef making_streaks(df) :\n    '''\n    Need to have `result`, 'player_id', and 'shot_type' column in the dataframe\n    The dataframe must be ordered\n    '''\n    \n    # Shift the result\n    streaks_df = df.copy().reset_index(drop=True)\n    \n    # Make `Streak Flag`\n    check_result = (streaks_df['result'] != streaks_df['result'].shift(1))\n    check_player = (streaks_df['player_id'] == streaks_df['player_id'].shift(1, fill_value=streaks_df.iloc[0]['player_id']))\n    check_shot = (streaks_df['shot_type'] == streaks_df['shot_type'].shift(1, fill_value=streaks_df.iloc[0]['shot_type']))\n    streaks_df['Streak Flag'] = check_result == (check_player & check_shot)\n    \n    # Make `End Streak Flag`\n    check_result = (streaks_df['result'] != streaks_df['result'].shift(-1))\n    check_player = (streaks_df['player_id'] == streaks_df['player_id'].shift(-1, fill_value=streaks_df.iloc[-1]['player_id']))\n    check_shot = (streaks_df['shot_type'] == streaks_df['shot_type'].shift(-1, fill_value=streaks_df.iloc[-1]['shot_type']))\n    streaks_df['End Streak Flag'] = check_result == (check_player & check_shot)\n    \n    # Make an ID for each streak\n    streaks_df['Streak ID'] = streaks_df['Streak Flag'].cumsum()\n    \n    # Count how many shot in each streak\n    streaks_df['Streak Count'] = streaks_df.groupby('Streak ID').cumcount() + 1\n    \n    # Make start streaks description\n    start_target_cols = ['Start Game', 'Start Period', 'Start Period Time']\n    source_cols = [\"game_description\", \"period\", \"period_time\"]\n    for target,source in zip(start_target_cols, source_cols) :\n        streaks_df.loc[streaks_df['Streak Flag'], target] = streaks_df.loc[streaks_df['Streak Flag'], source]\n        streaks_df[target] = streaks_df[target].fillna(method='ffill')\n        \n    # Make end streaks description\n    end_target_cols = ['End Game', 'End Period', 'End Period Time']\n    source_cols = [\"game_description\", \"period\", \"period_time\"]\n    for target,source in zip(end_target_cols, source_cols) :\n        streaks_df.loc[streaks_df['End Streak Flag'], target] = streaks_df.loc[streaks_df['End Streak Flag'], source]\n        \n    list_col = ['player_name','team','shot_type','result', 'Streak Count', 'Streak ID'] + start_target_cols + end_target_cols\n    \n    return streaks_df, list_col","28184c29":"# Make summary of streaks for each player each shots\ndf_streaks, list_col = making_streaks(df_ordered)","cfdaa043":"# Plotting shoot progress\nrcParams['figure.figsize'] = [15,5]\nplt.style.use('fivethirtyeight') \nsns.set_style('whitegrid')\nfig, ax = plt.subplots()\n\n# Prep plot\nbool_shot = (df_streaks['shot_type'] == '3PT')\nbool_player = (df_streaks['player_name'] == 'Kevin Durant')\ndf_plot_make = df_streaks[(bool_shot & bool_player)].reset_index()\nbool_make = (df_plot_make['result'] == 'make')\ndf_plot_miss = df_plot_make.copy()\ndf_plot_make.loc[~bool_make, 'Streak Count'] = 0\ndf_plot_miss.loc[bool_make, 'Streak Count'] = 0\n\n# Plot\nsns.barplot(x=df_plot_make.index, y=df_plot_make['Streak Count'], color='#f85a40', label='Make') ;\nsns.barplot(x=df_plot_miss.index, y=df_plot_miss['Streak Count'] * -1, color='#4298b5', label='Miss') ;\n\n# Add cosmetics\nplt.title('Kevin Durant 3p shoot throughout NBA Playoff 2018', fontname='Monospace', fontsize='20', fontweight='bold') ;\nax.set_xticklabels([])\nplt.legend() ;","cf79935e":"# Plotting shoot progress\nrcParams['figure.figsize'] = [15,5]\nplt.style.use('fivethirtyeight') \nsns.set_style('whitegrid')\nfig, ax = plt.subplots()\n\n# Prep plot\nbool_shot = (df_streaks['shot_type'] == '3PT')\nbool_player = (df_streaks['player_name'] == 'Klay Thompson')\ndf_plot_make = df_streaks[(bool_shot & bool_player)].reset_index()\nbool_make = (df_plot_make['result'] == 'make')\ndf_plot_miss = df_plot_make.copy()\ndf_plot_make.loc[~bool_make, 'Streak Count'] = 0\ndf_plot_miss.loc[bool_make, 'Streak Count'] = 0\n\n# Plot\nsns.barplot(x=df_plot_make.index, y=df_plot_make['Streak Count'], color='#f85a40', label='Make') ;\nsns.barplot(x=df_plot_miss.index, y=df_plot_miss['Streak Count'] * -1, color='#4298b5', label='Miss') ;\n\n# Add cosmetics\nplt.title('Klay Thompson 3p shoot throughout NBA Playoff 2018', fontname='Monospace', fontsize='20', fontweight='bold') ;\nax.set_xticklabels([])\nplt.legend() ;","79c483b0":"# Plotting shoot progress\nrcParams['figure.figsize'] = [15,5]\nplt.style.use('fivethirtyeight') \nsns.set_style('whitegrid')\nfig, ax = plt.subplots()\n\n# Prep plot\nbool_shot = (df_streaks['shot_type'] == '3PT')\nbool_player = (df_streaks['player_name'] == 'Stephen Curry')\ndf_plot_make = df_streaks[(bool_shot & bool_player)].reset_index()\nbool_make = (df_plot_make['result'] == 'make')\ndf_plot_miss = df_plot_make.copy()\ndf_plot_make.loc[~bool_make, 'Streak Count'] = 0\ndf_plot_miss.loc[bool_make, 'Streak Count'] = 0\n\n# Plot\nsns.barplot(x=df_plot_make.index, y=df_plot_make['Streak Count'], color='#f85a40', label='Make') ;\nsns.barplot(x=df_plot_miss.index, y=df_plot_miss['Streak Count'] * -1, color='#4298b5', label='Miss') ;\n\n# Add cosmetics\nplt.title('Stephen Curry 3p shoot throughout NBA Playoff 2018', fontname='Monospace', fontsize='20', fontweight='bold') ;\nax.set_xticklabels([])\nplt.legend() ;","5ec9d299":"We can see that throughout the playoff on each round GSW consistently rank at the top 3 in shooting efficiency with a perfect rank 1 in all type of shot in Conference Final and the Finals. But surprisingly it is not because of their 3p shooting but instead their 2p and FT efficiency. GSW rank 13 and 7 in the First Round and Conference Semifinals on 3p %. It seems like their 3p exponentially getting better throughout the playoff. Indeed I remember that GSW in 2018 is known to explode late in the game, especially in the third quarter. So lets check if its true or not","5e12abeb":"Clearly from here we can see that the statistics have turn to Kevin Durant favor. He shot more efficiently in all of the type of shot than LeBron James. The only thing LeBron do better is taking more shot (lot of carrying to do).\n\nWell enough of this comparison lets see how truly well GSW as team shot their shot compare to other team. We will calculate the statistics for each round of the playoff and rank them. To really see how consistent GSW shot to championness","5cb3837a":"The dataset differ the type of shot by three categories : 3PT, 2PT, and FT. For each row it tells what is the type of the shot attempted, the exact time, the player who attempt it, and in which game.","2369367d":"Clearly we can see that LeBron James lead in almost all of the shooting statistics, except in FT% where he shoot an okay 74.64%. He even dominate the mid and 3p shot better than KD and he is not famous for his shooting. This number truly represent how unbelieveable LeBron James is. But eventually he got sweeped in the final by GSW. So lets see how the shooting in the finals occur by both player","09785a86":"Well turn out all three of them have multiple drought on 3p on a certain time, with a maximum of at least 8 3p missed for them. That is quite horrendous but hey they still win it all :D. Hope you guys enjoy this and please give me a feedback for my wrongdoing, Cheers !","fcc33c00":"So there are 5 player with a bigger Team Shot Proportion than Kevin Durant, all of them is a noticeable player, 3 NBA MVP Finalist on LeBron James (King), Anthony Davis, and the reigning MVP itself James Harden. The remaining two is Russel Westbrook (Last year MVP) and John Wall. LeBron James itself made the NBA Finals match again GSW, so this number really represent how LeBron is very valuable for his team (and how bad the team will be without him). Lets compare LeBron production with Kevin Durant","b0074b87":"So without further ado let's see how GSW player shot their shot. For now let just see the top 5 player based by the total shot attempts","a37331ee":"We can see that Kevin Durant (you know who he is) carry 26.27% of all GSW shooting attempts. That is a lot of shot and thankfully he made most of them, shooting 34.05% from three (good but not great number) and a preposterous 55.55% from two on 297 attempts. This guy have a monster mid game. On top of that he get 152 FT Attempts (WTF !?) and made 90.13% of them. These number indeed worthy of NBA Finals MVP. \n\nAside from that we can see that Klay Thompson and Stephen Curry (the splash bro) give significant impact specifically in 3p, shooting 42.67% and 39.50% in more attempts than Kevin Durant. No wonder GSW win it all because they are indeed eltie in shooting.\n\nKevin Durant indeed shot a big proportion of the team attempt, but are there a player that take a lot their team shot more than him ?","7896bbd5":"# Shot to Championness\nTwo years have past from the 2018 NBA Playoff where the Golden State Warriors, arguably the greatest shooting team in NBA history crowned champion, sweeping the Cleveland Cavaliers 4-0. This remarks the end of the GSW vs Cleveland rivalries because now in 2020 neither team is as good as it's prime. Well actually GSW still made the final next year but eventually lose to Toronto Raptors. When I stumbled upon these dataset made by Josh Devlin that consist of all the shooting attempt in the NBA Playfoss 2018 game I can't help myself to be curious about how goood GSW  actually in shooting. \n\nInspired by : Josh Devlin article about streaks analysis (https:\/\/joshdevlin.com\/blog\/calculate-streaks-in-pandas\/?utm_campaign=Data_Elixir&utm_source=Data_Elixir_285)","cccbda97":"Turn out the beast is Klay Thompson, shooting a ridiculous 56% from three in the 3rd quarter. This is the thing that you can expect from a player that broke a record for most point in a quarter and guess in what quarter he did it, 3rd QUARTER ! (You guys should check it on youtube). Kevin Durant highest 3p % also come in the 3rd quarter, and both player % then shrink in the 4th quarter. Luckily they have Stephen Curry to the rescue with a solid 3p % of 45% in the 4th quarter\n\nThese three guys are quite amazing and for bonus here are the graph that represent their streaks of 3p shooting throughout the playoffs 2018","fa691863":"We can see that it is true that GSW are a beast at 3rd quarter. They shot at around 44% from three in the 3rd quarter, around 10% better than the 2nd and 4th quarter in similar total attempt. I can guess that it must not be because Steve Kerr is a good coach alone, it has to have a certain player that can spark this explosion. So next we will see the production number of GSW player in 3rd quarter compare to other quarter"}}