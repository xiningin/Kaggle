{"cell_type":{"f2cee14e":"code","78c4a647":"code","744db389":"code","a7699612":"code","275a0139":"code","9daa0007":"code","1631f343":"code","fe2ec9fc":"code","353420df":"code","78be4ac2":"code","e5cee215":"code","e545a10e":"code","748f0c33":"code","5aff7c2a":"code","4180e146":"code","d2f3b38e":"code","ed0a05e4":"code","cbbb725e":"code","b9281bf6":"code","97de58cd":"code","2d0611de":"code","767148b6":"code","11fab8e0":"code","5a518a49":"code","c1e9d0e9":"code","8847ed1c":"code","13e3264c":"code","eeaf1f85":"code","73b63212":"code","d4348923":"code","2ecc8fca":"code","34ee5799":"markdown","763036a8":"markdown","2650c4ab":"markdown","c4ddc04e":"markdown","26826ce1":"markdown","7f20e386":"markdown","fda82399":"markdown","24d89f5a":"markdown","f2c3b87f":"markdown","a76b996d":"markdown","954f3801":"markdown"},"source":{"f2cee14e":"# This Python 3 environment comes with many helpful analytics libraries installed\n# It is defined by the kaggle\/python Docker image: https:\/\/github.com\/kaggle\/docker-python\n# For example, here's several helpful packages to load\n\nimport numpy as np # linear algebra\nimport pandas as pd # data processing, CSV file I\/O (e.g. pd.read_csv)\n\n# Input data files are available in the read-only \"..\/input\/\" directory\n# For example, running this (by clicking run or pressing Shift+Enter) will list all files under the input directory\n\nimport os\nfor dirname, _, filenames in os.walk('\/kaggle\/input'):\n    for filename in filenames:\n        print(os.path.join(dirname, filename))\n\n# You can write up to 20GB to the current directory (\/kaggle\/working\/) that gets preserved as output when you create a version using \"Save & Run All\" \n# You can also write temporary files to \/kaggle\/temp\/, but they won't be saved outside of the current session","78c4a647":"import numpy as np\nimport pandas as pd\nimport networkx as nx\nimport matplotlib.pyplot as plt\n%matplotlib inline","744db389":"G = nx.read_gexf('\/kaggle\/input\/tiktok-russian-celebrities-mentions-graph\/tiktok_ru_celebrities.gexf')","a7699612":"def pr_summary(G):\n    pr = nx.pagerank(G)\n    df = pd.DataFrame.from_dict({\n        'node': list(pr.keys()),\n        'centrality_pr': list(pr.values())\n    })\n    return df.sort_values('centrality_pr', ascending=False)","275a0139":"pr = pd.DataFrame(pr_summary(G), columns=['node', 'centrality_pr'])","9daa0007":"pr.head()","1631f343":"def bc_summary(G):\n    bc = nx.betweenness_centrality(G)\n    df = pd.DataFrame.from_dict({\n        'node': list(bc.keys()),\n        'centrality_bc': list(bc.values())\n    })\n    return df.sort_values('centrality_bc', ascending=False)","fe2ec9fc":"bc = pd.DataFrame(bc_summary(G), columns=['node', 'centrality_bc'])","353420df":"bc.head()","78be4ac2":"!pip install python-louvain","e5cee215":"from community import community_louvain\ncommunities =community_louvain.best_partition(G)","e545a10e":"community_id = [communities[node] for node in G.nodes()]\n\nfig = plt.figure(figsize=(10, 10))\n\nax = plt.gca()\nax.set_title('\u0413\u0440\u0430\u0444 \u0443\u043f\u043e\u043c\u0438\u043d\u0430\u043d\u0438\u0439 \u0441\u043e \u0441\u0445\u043e\u0434\u0441\u0442\u0432\u043e\u043c \u043c\u0435\u0436\u0434\u0443 \u0432\u0435\u0440\u0448\u0438\u043d\u0430\u043c\u0438 \u0431\u043e\u043b\u0435\u0435 60% (\u0446\u0432\u0435\u0442\u043e\u043c \u0432\u044b\u0434\u0435\u043b\u0435\u043d\u044b \u0441\u043e\u043e\u0431\u0449\u0435\u0441\u0442\u0432\u0430)')\n\nnx.draw(\n    G,\n    #with_labels=True,\n    edge_color=['silver'] * len(G.edges()),\n    cmap=plt.cm.tab20,\n    node_color=community_id,\n    node_size=150,\n)","748f0c33":"df_nodes_list = pd.DataFrame(np.column_stack([G.nodes, community_id]), \n                               columns=['node', 'community'])","5aff7c2a":"df_filter = df_nodes_list.loc[df_nodes_list['community'] == '1']","4180e146":"df_filter.head(50)","d2f3b38e":"jaccard_coefficient = pd.DataFrame(nx.jaccard_coefficient(G), columns=['node_1', 'node2', 'jaccard_coefficient'])","ed0a05e4":"jaccard_coefficient.sort_values(by = 'jaccard_coefficient', ascending = False).head()","cbbb725e":"resource_allocation_index = pd.DataFrame(nx.resource_allocation_index(G), columns=['node_1', 'node2', 'resource_allocation_index'])","b9281bf6":"resource_allocation_index.sort_values(by = 'resource_allocation_index', ascending = False).head()","97de58cd":"adamic_adar_index = pd.DataFrame(nx.adamic_adar_index(G), columns=['node_1', 'node2', 'adamic_adar_index'])","2d0611de":"adamic_adar_index.sort_values(by = 'adamic_adar_index', ascending = False).head()","767148b6":"preferential_attachment = pd.DataFrame(nx.preferential_attachment(G), columns=['node_1', 'node2', 'preferential_attachment'])","11fab8e0":"preferential_attachment.sort_values(by = 'preferential_attachment', ascending = False).head()","5a518a49":"!pip install node2vec","c1e9d0e9":"from node2vec import Node2Vec","8847ed1c":"node2vec = Node2Vec(G, dimensions=64, walk_length=30, num_walks=200, workers=4)","13e3264c":"n2v_model = node2vec.fit(window=10, min_count=1, batch_words=4)","eeaf1f85":"n2v_model.wv.most_similar(positive=['\u0432\u043b\u0430\u0434\u04304'], topn=20)","73b63212":"n2v_output = pd.DataFrame(n2v_model.wv.most_similar(positive=['\u0432\u043b\u0430\u0434\u04304'], topn=100), columns=['\u0443\u043f\u043e\u043c\u0438\u043d\u0430\u043d\u0438\u044f', '\u043a\u043e\u044d\u0444\u0444\u0438\u0446\u0438\u0435\u043d\u0442'])","d4348923":"import seaborn as sns\nsns.set_theme(style=\"ticks\", color_codes=True)","2ecc8fca":"g=sns.catplot(x='\u0443\u043f\u043e\u043c\u0438\u043d\u0430\u043d\u0438\u044f', y='\u043a\u043e\u044d\u0444\u0444\u0438\u0446\u0438\u0435\u043d\u0442', data=n2v_output)\ng.set_xticklabels(rotation=90)\ng.fig.set_size_inches(15,5)\nplt.title('\u0423\u043f\u043e\u043c\u0438\u043d\u0430\u043d\u0438\u044f, \u043f\u043e\u0445\u043e\u0436\u0438\u0435 \u043d\u0430 \"\u0432\u043b\u0430\u0434\u04304\"')","34ee5799":"\u0421 \u043f\u043e\u043c\u043e\u0449\u044c\u044e \u0430\u043b\u0433\u043e\u0440\u0438\u0442\u043c\u043e\u0432 \u0441\u043c\u043e\u0442\u0440\u0438\u043c, \u043a\u0430\u043a\u0438\u0435 \u043f\u0430\u0440\u044b \u0432\u0435\u0440\u0448\u0438\u043d, \u043d\u0435 \u0438\u043c\u0435\u044e\u0449\u0438\u0435 \u043e\u0431\u0449\u0435\u0433\u043e \u0440\u0435\u0431\u0440\u0430, \u043d\u043e \u0441\u0432\u044f\u0437\u0430\u043d\u043d\u044b\u0435 \u0441 \u0441\u043e\u0441\u0435\u0434\u043d\u0438\u043c\u0438 \u0432\u0435\u0440\u0448\u0438\u043d\u0430\u043c\u0438, \u043c\u043e\u0433\u0443\u0442 \u0431\u044b\u0442\u044c \u0441\u043e\u0435\u0434\u0438\u043d\u0435\u043d\u044b \u0440\u0435\u0431\u0440\u043e\u043c.","763036a8":"\u042d\u0442\u043e\u0442 \u0431\u043b\u043e\u043a\u043d\u043e\u0442 \u043f\u043e\u0437\u0432\u043e\u043b\u044f\u0435\u0442 \u0440\u0430\u0431\u043e\u0442\u0430\u0442\u044c \u0441 \u0433\u0440\u0430\u0444\u043e\u043c, \u043a\u043e\u0442\u043e\u0440\u044b\u0439 \u043f\u043e\u0441\u0442\u0440\u043e\u0435\u043d \u043d\u0430 \u043e\u0441\u043d\u043e\u0432\u0435 \u043c\u043e\u0434\u0435\u043b\u0438 Gesnsim Fasttext. \u041c\u043e\u0434\u0435\u043b\u044c \u0431\u044b\u043b\u0430 \u043e\u0431\u0443\u0447\u0435\u043d\u0430 \u043d\u0430 \u0442\u0435\u043a\u0441\u0442\u043e\u0432\u044b\u0445 \u043e\u043f\u0438\u0441\u0430\u043d\u0438\u044f\u0445 \u043a \u0440\u043e\u043b\u0438\u043a\u0430\u043c \u0438\u0437 \u0422\u0438\u043a\u0442\u043e\u043a\u0430. \u0412 \u043a\u0430\u0447\u0435\u0441\u0442\u0432\u0435 \u0432\u0435\u0440\u0448\u0438\u043d \u0432\u044b\u0431\u0440\u0430\u043d\u044b \u0438\u043c\u0435\u043d\u0430 \u0437\u043d\u0430\u043c\u0435\u043d\u0438\u0442\u043e\u0441\u0442\u0435\u0439, \u0441\u043f\u0438\u0441\u043e\u043a \u043a\u043e\u0442\u043e\u0440\u044b\u0445 \u0431\u044b\u043b \u043f\u043e\u043b\u0443\u0447\u0435\u043d \u0432 \u0445\u043e\u0434\u0435 \u043e\u043f\u0440\u043e\u0441\u0430 \u0443\u0447\u0435\u043d\u0438\u043a\u043e\u0432 5-\u0445 \u043a\u043b\u0430\u0441\u0441\u043e\u0432 \u0440\u043e\u0441\u0441\u0438\u0439\u0441\u043a\u0438\u0445 \u0448\u043a\u043e\u043b \u043b\u0435\u0442\u043e\u043c 2020 \u0433\u043e\u0434\u0430. \u0420\u0435\u0431\u0440\u043e \u0441\u0442\u0440\u043e\u0438\u0442\u0441\u044f \u043f\u0440\u0438 \u043f\u043e\u0440\u043e\u0433\u043e\u0432\u043e\u043c \u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0438 \u0441\u0432\u044b\u0448\u0435 60 \u043f\u0440\u043e\u0446\u0435\u043d\u0442\u043e\u0432 \u043a\u043e\u0441\u0438\u043d\u0443\u0441\u043d\u043e\u0433\u043e \u0441\u0445\u043e\u0434\u0441\u0442\u0432\u0430 \u043c\u0435\u0436\u0434\u0443 \u0441\u043b\u043e\u0432\u0430\u043c\u0438.","2650c4ab":"# \u041f\u043e\u043b\u0443\u0447\u0430\u0435\u043c \u0441\u0445\u043e\u0434\u0441\u0442\u0432\u043e \u0432\u0435\u0440\u0448\u0438\u043d \u0441 \u043f\u043e\u043c\u043e\u0449\u044c\u044e \u043e\u0431\u0443\u0447\u0435\u043d\u043d\u043e\u0439 \u043c\u043e\u0434\u0435\u043b\u0438 node2vec","c4ddc04e":"# \u0417\u0430\u0433\u0440\u0443\u0436\u0430\u0435\u043c \u0434\u0430\u043d\u043d\u044b\u0435","26826ce1":"# \u0421\u043e\u043e\u0431\u0449\u0435\u0441\u0442\u0432\u0430","7f20e386":"# \u041c\u0435\u0440\u044b \u0446\u0435\u043d\u0442\u0440\u0430\u043b\u044c\u043d\u043e\u0441\u0442\u0438","fda82399":"\u0421\u043c\u043e\u0442\u0440\u0438\u043c \u043f\u043e \u043c\u0435\u0440\u0430\u043c \u0446\u0435\u043d\u0442\u0440\u0430\u043b\u044c\u043d\u043e\u0441\u0442\u0438 (\u043f\u0435\u0439\u0434\u0436\u0440\u0430\u043d\u043a\u0443 \u0438 \u0441\u0442\u0435\u043f\u0435\u043d\u0438 \u043f\u043e\u0441\u0440\u0435\u0434\u043d\u0438\u0447\u0435\u0441\u0442\u0432\u0430), \u043a\u0430\u043a\u0438\u0435 \u0432\u0435\u0440\u0448\u0438\u043d\u044b \u044f\u0432\u043b\u044f\u044e\u0442\u0441\u044f \u0432\u0430\u0436\u043d\u044b\u043c\u0438.","24d89f5a":"\u0423\u0442\u043e\u0447\u043d\u044f\u0435\u043c \u0441\u0445\u043e\u0434\u0441\u0442\u0432\u043e \u0432\u0435\u0440\u0448\u0438\u043d \u043d\u0430 \u043e\u0441\u043d\u043e\u0432\u0435 \u043e\u0431\u0443\u0447\u0435\u043d\u043d\u043e\u0439 \u043d\u0430 \u0433\u0440\u0430\u0444\u0435 \u043c\u043e\u0434\u0435\u043b\u0438.","f2c3b87f":"\u041c\u044b \u043c\u043e\u0436\u0435\u043c \u0443\u0442\u043e\u0447\u043d\u0438\u0442\u044c, \u043a\u0430\u043a\u0438\u0435 \u0432\u0435\u0440\u0448\u0438\u043d\u044b \u043d\u0430\u0445\u043e\u0434\u044f\u0442\u0441\u044f \u0432 \u043a\u043e\u043d\u043a\u0440\u0435\u0442\u043d\u043e\u043c \u0441\u043e\u043e\u0431\u0449\u0435\u0441\u0442\u0432\u0435 (\u043e\u0442 1 \u0434\u043e 19)","a76b996d":"\u0421 \u043f\u043e\u043c\u043e\u0449\u044c\u044e \u041b\u0443\u0432\u0435\u043d\u0441\u043a\u043e\u0433\u043e \u0430\u043b\u0433\u043e\u0440\u0438\u0442\u043c\u0430 \u0440\u0430\u0437\u0431\u0438\u0432\u0430\u0435\u043c \u0433\u0440\u0430\u0444 \u043d\u0430 \u0441\u043e\u043e\u0431\u0449\u0435\u0441\u0442\u0432\u0430.","954f3801":"# \u041f\u0440\u0435\u0434\u0441\u043a\u0430\u0437\u0430\u043d\u0438\u0435 \u0441\u0432\u044f\u0437\u0435\u0439"}}