{"cell_type":{"8af18e6e":"code","bd74507b":"code","4398d757":"code","396779e1":"code","a4f9e25d":"code","f34d96d8":"code","951672ea":"code","fca174d1":"code","6ba3acd2":"code","6a2c8bc0":"code","9e92ffda":"code","dc29e330":"code","c07762f5":"code","36ef2370":"code","76ff3696":"code","c6db5a3e":"markdown","092750d4":"markdown","26a3d9db":"markdown","d9e64823":"markdown","ae94d908":"markdown","d86b3a5a":"markdown","2db5612f":"markdown","2ddb25db":"markdown","47d8781e":"markdown","df284a80":"markdown","028a35be":"markdown","efc02091":"markdown","a28d38c5":"markdown","543ce4e4":"markdown"},"source":{"8af18e6e":"# Run this cell to pip install statnnot\n!pip install statannot","bd74507b":"# Imports and initializations\n\nimport pandas as pd\nimport seaborn as sns\n\n# for stattanot, make sure you \nfrom statannot import add_stat_annotation\nimport matplotlib.pyplot as plt\nimport matplotlib\nfrom scipy import stats\n\nexchange_df = pd.read_csv('..\/input\/coingecko-vs-coinmarketcap-data\/May_CMC_CG_Combo.csv')\n\nmatplotlib.__version__","4398d757":"exchange_df['Bad_Pairs'] = exchange_df['Unknown_Pairs'] + exchange_df['Yellow_Pairs'] + exchange_df['Red_Pairs']","396779e1":"# Get numeric df\nnumeric_df = exchange_df._get_numeric_data()\n# Clean out estimated reserves and regulatory compliance\nnumeric_df = numeric_df.drop(columns = ['Estimated_Reserves', 'Regulatory_Compliance'])\n\n# Get correlation matrix\ncorr = numeric_df.corr()\n\nfig, ax = plt.subplots(figsize=(10,10))  \nsns.heatmap(corr, annot = True, linewidths=.5, ax = ax)","a4f9e25d":"num_cols = numeric_df.columns\nfig, ax = plt.subplots(3,4,figsize=(22,10))\nfor i, col in enumerate(num_cols):\n    plt.subplot(3,5,i+1)\n    plt.xlabel(col, fontsize=9)\n    sns.kdeplot(numeric_df[col].values, bw=0.5,label='Train')\n    # sns.kdeplot(raw_test[col].values, bw=0.5,label='Test')\n   \nplt.show() ","f34d96d8":"# Set styleee\nsns.set_style(\"dark\")\n\n# Get boxplot\nplot = sns.violinplot(exchange_df['Websocket'], exchange_df['CMC Liquidity'])\nplot = sns.stripplot(x='Websocket', y='CMC Liquidity', data=exchange_df, color=\"purple\", jitter=0.3, size=3.0)\n# Get statistical info\nadd_stat_annotation(plot, data=exchange_df, x=exchange_df['Websocket'], y=exchange_df['CMC Liquidity'],\n                                   box_pairs=[(\"Available\", \"Not\")],\n                                   test='t-test_ind', text_format='star',\n                                   loc='outside', verbose=2)","951672ea":"plot = sns.violinplot(exchange_df['Trading_via_API'], exchange_df['CMC Liquidity'])\nplot = sns.stripplot(x='Trading_via_API', y='CMC Liquidity', data=exchange_df, color=\"purple\", jitter=0.3, size=3.0)\nadd_stat_annotation(plot, data=exchange_df, x=exchange_df['Trading_via_API'], y=exchange_df['CMC Liquidity'],\n                                   box_pairs=[(\"Available\", \"Not\")],\n                                   test='t-test_ind', text_format='star',\n                                   loc='outside', verbose=2)","fca174d1":"plot = sns.violinplot(exchange_df['Websocket'], exchange_df['Liquidity'])\nplot = sns.stripplot(x='Websocket', y='Liquidity', data=exchange_df, color=\"purple\", jitter=0.3, size=3.0)\nadd_stat_annotation(plot, data=exchange_df, x=exchange_df['Websocket'], y=exchange_df['Liquidity'],\n                                   box_pairs=[(\"Available\", \"Not\")],\n                                   test='t-test_ind', text_format='star',\n                                   loc='outside', verbose=2)","6ba3acd2":"order = [\" Low\", \" Medium\", \" High\"]\nplot = sns.boxplot(exchange_df['Sanctions'], exchange_df['CMC Liquidity'], order = order)\nplot = sns.stripplot(x='Sanctions', y='CMC Liquidity', data=exchange_df, color=\"purple\", jitter=0.3, size=3.0 ,order = order)\nadd_stat_annotation(plot, data=exchange_df, x=exchange_df['Sanctions'], y=exchange_df['CMC Liquidity'], order = order,\n                                   box_pairs=[(\" Low\", \" High\"), (\" Low\", \" Medium\")],\n                                   test='Mann-Whitney', text_format='star',\n                                   loc='outside', verbose=2)\n","6a2c8bc0":"order = [' High', ' Medium', ' Low']\nplot = sns.boxplot(exchange_df['Negative_News'], exchange_df['CMC Liquidity'], order = order)\nplot = sns.stripplot(x='Negative_News', y='CMC Liquidity', data=exchange_df, color=\"purple\", jitter=0.3, size=3.0 ,order = order)\nadd_stat_annotation(plot, data=exchange_df, x=exchange_df['Negative_News'], y=exchange_df['CMC Liquidity'], order = order,\n                                   box_pairs=[(\" Low\", \" High\"), (\" Low\", \" Medium\"), (' High', ' Medium')],\n                                   test='Mann-Whitney', text_format='star',\n                                   loc='outside', verbose=1)","9e92ffda":"plot = sns.scatterplot(data = exchange_df, x = 'Bad_Pairs', y = 'CMC Liquidity', hue = 'Trust_Score', x_jitter=2.0)","dc29e330":"plot = sns.scatterplot(data = exchange_df, x = 'Red_Pairs', y = 'CMC Liquidity', hue = 'Trust_Score', x_jitter=2.0)","c07762f5":"plot = sns.scatterplot(data = exchange_df, x = 'Bad_Pairs', y = 'BidAsk Spread', hue = 'Trust_Score', x_jitter=2.0)","36ef2370":"def r2(x, y):\n    return stats.pearsonr(x, y)[0] ** 2\n\n# sns.jointplot(data = exchange_df, x = 'Scale', y = 'CMC Liquidity', kind = 'reg', stat_func=r2)\nsns.regplot(data = exchange_df, x = 'Scale', y = 'CMC Liquidity')","76ff3696":"plot = sns.jointplot(data = exchange_df, x = 'Trust_Score', y = 'CMC Liquidity', kind = 'reg', stat_func=r2)","c6db5a3e":"There are 4 features relating to trading pairs:\n\n1) Red Pairs (Percentage of pairs deemed high risk by CoinGecko)\n2) Yellow Pairs (Percentage of pairs deemed Medium risk by CoinGecko)\n3) Green Pairs (Percentage of pairs deemed Low risk by CoinGecko)\n4) Unknown Pairs (Percentage of pairs with unknown risk)\n\nTo make things a little easier, we will bin red, yelllow, and unknown together into one\n\nLet's take a look at how our binned \"bad pairs\" relate with other things","092750d4":"Does negative news affect liquidity? We would expect high amounts of negative news to lead to lower liquidity, but quite the opposite is true. From a statistical perspective, here are already very few points in the \"High\" bin, and they are quite spread out, making this a sparse feature. Additionally, from an intuitive stand point, larger exchanges probably generate more news in general, so they will have already be generating a lot of liquidity as it is.\n\nEither way you split it, there's no statistical difference between the different bins, so we can conclude negative news has a non-existent effect on liquidity.","26a3d9db":"Hmm, maybe this was a bad idea to bin the columns? Let's just try red pairs now","d9e64823":"Note: I highly recommend using Orange miner as a way to look at your data faster, then coming over to python and making prettier plots here :)\n\nLet's start by comparing some categorical features from CoinGecko to the numeric Liquidity metric from CMC. Because Coin Gecko and Coin Market Cap both use differnt equations for formulating their respective metrics, it will be interesting to see if there are any statistically significant groupings.\n\nDoes acces to a websocket affect liquidity by CMC's standards?","ae94d908":"How about API trading? in general?","d86b3a5a":"But now lets get to the heart of what we really came to see, what is the relationship between CMC's liquidity and CG's trust score?","2db5612f":"How about Websockets for CG's Lqicuidity? Not so much","2ddb25db":"We saw from the heatmap previously that Bad_Pairs and Average BidAsk Spread are negatively correlated. Why is this the case? I would have expected opposite behavior","47d8781e":"CMC Liquidity also seems to be affected by risk of sanctioning, where a low risk leads to higher liquidity","df284a80":"We also noticed a moderate correlation between CG scale and CMC liquidity. Let's plot it.","028a35be":"Heatmaps are great because we can get a quick overlook of all the attributes and their effects on each other","efc02091":"Earlier we made the new column \"Bad_Pairs\", so let's make some plots of that now to get an idea..","a28d38c5":"Density plot of numeric values? We'll do this to get an idea of the distribution of different values.","543ce4e4":"Looking at the graph, there isn't much spread in the data. Values are locked at the x and y-limits, which makes me doubt the relationship. Even at high levels of bad pairs, most of them sit in the 1.0 bid-ask spread range.\n\n\\\\FUTURE\\\\ Look into getting CG's data as timeseries, then calculate the averages for the whole dataset (don't inner join CMC)"}}