{"cell_type":{"3fe8be19":"code","5a844cf0":"code","a43de441":"code","45d6e977":"code","727de1bf":"code","f0403c7f":"code","2619d919":"code","29d7043f":"code","e196f522":"code","b74040ac":"code","233bd586":"code","4e915d32":"code","e3e0566d":"code","5d66ae6a":"code","cb2faf5f":"code","7bfda9c6":"code","dbebd702":"code","5f1fb35b":"code","d01e0ac4":"code","7ef685dc":"code","37e0d13d":"code","f11aae49":"markdown","ae087482":"markdown","7be67614":"markdown","dc84801c":"markdown","c5f69c32":"markdown","2f24ceec":"markdown","25a8fd95":"markdown","dcad6c8d":"markdown","95b3c801":"markdown","aa0d2bd4":"markdown","5c717ebc":"markdown","6c4288c2":"markdown","cff5fecc":"markdown","24b3ece0":"markdown","8deb77df":"markdown","b26d4602":"markdown","ddf747b8":"markdown","c9ad2b9e":"markdown","2415e281":"markdown","7f76c546":"markdown","72760750":"markdown"},"source":{"3fe8be19":"import pandas as pd\nimport numpy as np\nimport seaborn as sns\nimport matplotlib.pyplot as plt\n\n\n%matplotlib inline","5a844cf0":"dados = pd.read_csv('..\/input\/heart.csv')\n# dataframe.head(N) -> N indica o n\u00famero de linhas que devem ser mostradas\ndados.head() ","a43de441":"sns.distplot(dados['age'])","45d6e977":"f, axes = plt.subplots(2, 2, figsize=(7,7), sharex=True)\nsns.distplot(dados[dados['sex'] == 1]['age'], axlabel=\"Homens Total\", ax=axes[0,0]) # Homens\nsns.distplot(dados[dados['sex'] == 0]['age'], axlabel=\"Mulheres Total\", ax=axes[0,1]) # Mulheres\n\n# Homens e mulheres que possuem Doen\u00e7a Card\u00edaca\n# dados[dados['sex'] == 1] <- Isso pode ser lido como: \"dados onde dados na coluna 'sex' seja igual a 1.\"\n# Adicionalmente, onde est\u00e1 essa condi\u00e7\u00e3o, podem existir outras condi\u00e7\u00f5es. \n\nhomens_com_doenca_cardiaca = dados[(dados['sex'] == 1) & (dados['target'] == 1)]['age']\nmulheres_com_doenca_cardiaca = dados[(dados['sex'] == 0) & (dados['target'] == 1)]['age']\n\nsns.distplot(homens_com_doenca_cardiaca, axlabel=\"Homens com Doen\u00e7a\", ax=axes[1,0]) \nsns.distplot(mulheres_com_doenca_cardiaca, axlabel=\"Mulheres com Doen\u00e7a\", ax=axes[1,1]) \n","727de1bf":"sns.relplot(x='chol',y='age',hue='target', data=dados)","f0403c7f":"ax = sns.countplot('exang', hue='target', data=dados)\nax.set(xlabel='Dor no peito', ylabel='Quantidade')\nlegend_labels = ax.get_legend_handles_labels()[0]\nax.legend(legend_labels, ['Sem Doen\u00e7a', 'Com Doen\u00e7a'])","2619d919":"sns.lmplot('age', 'trestbps', hue='target', data=dados)","29d7043f":"sns.countplot('cp', hue='target', data=dados)","e196f522":"ax = sns.scatterplot('age','thalach', hue='target',size='trestbps',sizes=(10,400) ,data=dados)\nax.set(xlabel='Idade', ylabel='Batimentos M\u00e1x')","b74040ac":"sns.boxplot('target', 'oldpeak',data=dados)","233bd586":"sns.boxplot('target', 'slope',data=dados)","4e915d32":"sns.countplot('target',data=dados)","e3e0566d":"dados.info()","5d66ae6a":"dados.describe()","cb2faf5f":"for column in dados.columns:\n    print(dados[column].isna().sum(), column)","7bfda9c6":"from sklearn.model_selection import train_test_split, GridSearchCV \nfrom sklearn.preprocessing import Normalizer, StandardScaler\nfrom sklearn.svm import SVC\nfrom sklearn.pipeline import Pipeline\nfrom sklearn.metrics import classification_report","dbebd702":"X = dados.drop('target', axis=1)\ny = dados['target']\n\nX_treino, X_teste, y_treino, y_teste =  train_test_split(X,y)","5f1fb35b":"pipeline = Pipeline([\n    ('normalizer', Normalizer()),\n    ('svc', SVC())\n])\n\npipeline.fit(X_treino, y_treino)\npredicted = pipeline.predict(X_teste)\nprint(classification_report(y_teste, predicted))","d01e0ac4":"print(\"Score para Treino: \",pipeline.score(X_treino, y_treino))\nprint(\"Score para Teste: \", pipeline.score(X_teste, y_teste))","7ef685dc":"pipeline = Pipeline([\n    ('scaler', StandardScaler()),\n    ('svc', SVC())\n])\n\npipeline.fit(X_treino, y_treino)\npredicted = pipeline.predict(X_teste)\nprint(classification_report(y_teste, predicted))","37e0d13d":"print(\"Score para Treino: \",pipeline.score(X_treino, y_treino))\nprint(\"Score para Teste: \", pipeline.score(X_teste, y_teste))","f11aae49":"Ao utilizar a express\u00e3o: dados[column].isna().sum() contamos quantas ocorrencias de nulo existem nas colunas!","ae087482":"## Vamos ver esse mesmo plot com o Slope","7be67614":"## Distribui\u00e7\u00e3o dos Homens\n\n\n## Documenta\u00e7\u00e3o\n[sns.distplot()](https:\/\/seaborn.pydata.org\/generated\/seaborn.distplot.html?highlight=dist#seaborn.distplot)\n\n[Exemplos do sns.distplot](https:\/\/seaborn.pydata.org\/examples\/distplot_options.html)\n\n**Poss\u00edveis mensagens de erro e como contorn\u00e1-las**\n\n[Truth value of a Series is ambiguous. Use a.empty, a.bool(), a.item(), a.any() or a.all()](https:\/\/stackoverflow.com\/questions\/36921951\/truth-value-of-a-series-is-ambiguous-use-a-empty-a-bool-a-item-a-any-o)","dc84801c":"##  Visualiza\u00e7\u00e3o da rela\u00e7\u00e3o entre Idade, colesterol e a Variavel alvo","c5f69c32":"## Pipeline\n\n\nO uso de pipeline \u00e9 algo muito interessante. Com o pipeline, podemos encadear os algoritmos como Normaliza\u00e7\u00e3o, Feature Selection, e o classificador. \u00c9 bom pq realiza o encapsulamento da l\u00f3gica do Modelo e voc\u00ea pode mexer no seu modelo com mais facilidade\n\n\n### Documenta\u00e7\u00e3o - Machine Learning\n\n\n1) [Pipeline](https:\/\/scikit-learn.org\/stable\/modules\/generated\/sklearn.pipeline.Pipeline.html)\n\n2) [Train test split](https:\/\/scikit-learn.org\/stable\/modules\/generated\/sklearn.model_selection.train_test_split.html)\n\n3) [Normalizer](https:\/\/scikit-learn.org\/stable\/modules\/generated\/sklearn.preprocessing.Normalizer.html)\n\n4) [SVC - Support Vector Classifier](https:\/\/scikit-learn.org\/stable\/modules\/generated\/sklearn.svm.SVC.html)\n\n5) [GridSearchCV](https:\/\/scikit-learn.org\/stable\/modules\/generated\/sklearn.model_selection.GridSearchCV.html)\n\n6) [Classification Report](https:\/\/scikit-learn.org\/stable\/modules\/generated\/sklearn.metrics.classification_report.html)","2f24ceec":"## Batimentos Card\u00edacos M\u00e1ximos x Idade e Press\u00e3o Sangu\u00ednea\n\no Gr\u00e1fico abaixo relaciona os batimentos card\u00edacos m\u00e1ximos com a idade de cada pessoa. Adicionalmente, o tamanho dos pontos, relacionam a press\u00e3o arterial da pessoa. \n\n\nn\u00e3o parece existir uma separa\u00e7\u00e3o clara entre doentes e n\u00e3o doentes somente com essas tr\u00eas innforma\u00e7\u00f5es.","25a8fd95":"## Tentando identificar alguma rela\u00e7\u00e3o com aumento da press\u00e3o arterial, idade e doen\u00e7as card\u00edacas","dcad6c8d":"## Vamos ver o que significam as colunas do dataset. \n\n**Tradu\u00e7\u00e3o livre**\n\n* **age** Idade em anos \/ age in years\n* **sex** (1 = Homem; 0 = Mulher) \/ (1 = male; 0 = female)\n* **cpchest** Tipo de Dor \/ pain type\n* **trestbps** Press\u00e3o arterial em descanso em mm Hg \/ resting blood pressure (in mm Hg on admission to the hospital)\n* **chol** Colesterol S\u00e9rico em mg\/dl \/ serum cholestoral in mg\/dl\n* **fbs** N\u00edvel de A\u00e7ucar no sangue em jejum (Medido em mg\/dl. Se a medida for maior que 120, essa coluna assuma o valor 1. Caso menor, assume o valor 0) \/ (fasting blood sugar > 120 mg\/dl) (1 = true; 0 = false)\n* **restecg** Resultado do Eletrocardiograma em repouso \/ resting electrocardiographic results\n* **thalach**  Batimentos card\u00edacos m\u00e1ximo \/ maximum heart rate achieved\n* **exang** Exerc\u00edcio produz dor no peito? (Sim = 1, n\u00e3o = 0) \/ exercise induced angina (1 = yes; 0 = no)\n* **oldpeak**  https:\/\/en.wikipedia.org\/wiki\/ST_depression \/ ST depression induced by exercise relative to rest\n* **slope** https:\/\/en.wikipedia.org\/wiki\/ST_segment \/ the slope of the peak exercise ST segment\n* **ca**  N\u00famero de vasos sangu\u00edneos coloridos por fluoroscopia \/ number of major vessels (0-3) colored by fluoroscopy\n* **thal**  Categoria (3 = Normal; 6 = Defeito Consertado; 7 = Defeito revers\u00edvel)  \/  3 = normal; 6 = fixed defect; 7 = reversable defect\n* **target** Tem doen\u00e7a? (Sim = 1, N\u00e3o = 0) \/ 1 or 0 <- Vari\u00e1vel alvo do dataset","95b3c801":"[pd.describe()](https:\/\/pandas.pydata.org\/pandas-docs\/stable\/reference\/api\/pandas.DataFrame.describe.html) \u00e9 um m\u00e9todo interessante para visualizar mais facilmente se h\u00e1 [outliers](https:\/\/pt.wikipedia.org\/wiki\/Outlier) no dataset","aa0d2bd4":"### Nenhuma coluna parece conter dados absurdos e nem dados faltantes. Passemos ao Machine Learning","5c717ebc":"## Por fim, vamos ver a distribui\u00e7\u00e3o de pessoas com doen\u00e7a\n\n\nH\u00e1 mais pacientes doentes que n\u00e3o doentes no dataset","6c4288c2":"## Discuss\u00e3o V2\n\n\nHouve uma melhoria das m\u00e9tricas! Agora o modelo consegue identificar quem n\u00e3o possui doen\u00e7as! \n\nEntretanto, olhando o **Score**, parece que o modelo sofre de _OverFitting_. _OverFitting_ \u00e9 quando o modelo aprende muito bem (at\u00e9 demais) como representar os dados de Treino, enquanto tem um desempenho inferior quando \u00e9 apresentado a novas informa\u00e7\u00f5es\n\n\n\n## D\u00favidas e Estudos Futuros\n\n      Quando utilizar Normalizer e StandardScaler?","cff5fecc":"# Visualiza\u00e7\u00e3o de Dados\n\nParte do processo do estudos dos dados \u00e9 a intera\u00e7\u00e3o com os dados e com o contexto que ele se encaixa. \u00c9 popular que a idade \u00e9 um fator significativo para doen\u00e7as card\u00edacas, ent\u00e3o seria prudente explorar os dados com rela\u00e7\u00e3o \u00e0 idade\n\n\n## Distribui\u00e7\u00e3o da popula\u00e7\u00e3o do dataset\n\nEssa distribui\u00e7\u00e3o representa homens e mulheres","24b3ece0":"# Tratamento de dados","8deb77df":"## Seria o oldpeak um indicador de doen\u00e7a no cora\u00e7\u00e3o? \n\nver: \n\n[St Depression](https:\/\/en.wikipedia.org\/wiki\/ST_depression)","b26d4602":"## Discuss\u00e3o - V1\n\n\n\nEssas m\u00e9tricas indicam Underfitting do classificador. Ou seja, o classificador n\u00e3o foi capaz de generalizar o suficiente com os dados que foram utilizados","ddf747b8":"## Quantidade de pessoas que  t\u00eam dores no peito ao fazer exerc\u00edcio\n\n\n[Como mudar os labels dos eixos no seaborn](https:\/\/stackoverflow.com\/questions\/31632637\/label-axes-on-seaborn-barplot)\n\n[Como mudar os labels da legenda no seaborn](https:\/\/stackoverflow.com\/questions\/39606921\/changing-pointplot-legend-in-seaborn) **Aten\u00e7\u00e3o** - Mudar as legendas pode ser um trabalho chatinho","c9ad2b9e":"# V1","2415e281":"# V2","7f76c546":"# Importando os dados. \n\nPara importar os dados de um csv comum, usamos a fun\u00e7\u00e3o: \n\n[pd.read_csv](https:\/\/pandas.pydata.org\/pandas-docs\/stable\/reference\/api\/pandas.read_csv.html) - Essa fun\u00e7\u00e3o recebe como primeiro argumento o caminho para o arquivo csv que desejamos abrir. Na documenta\u00e7\u00e3o h\u00e1 mais informa\u00e7\u00f5es sobre o m\u00e9todo, como: \n\n1) Indicar qual \u00e9 o separador dos dados dentro do arquivo. (Geralmente \u00e9 uma v\u00edrgula (,) mas caso seja outro, voc\u00ea pode indicar.\n\n2) _Skiprows_  que permite pular N linhas do inicio do arquivo. E diversos outros par\u00e2metros para importar os dados que voc\u00ea precisar","72760750":"## Rela\u00e7\u00e3o entre os tipos de dores no peito e Doen\u00e7a Card\u00edaca"}}