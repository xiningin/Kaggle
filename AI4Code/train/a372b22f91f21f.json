{"cell_type":{"d66f47c8":"code","192bc46c":"code","d449055d":"code","513d87a4":"code","773336b5":"code","52e403c4":"code","c2cdec38":"code","3306eae9":"code","b87c75a0":"code","2fbbaf2f":"code","b763592c":"markdown","58073edc":"markdown","53216774":"markdown","aad9b7d7":"markdown","97c85fdc":"markdown","bedec357":"markdown","84f468b9":"markdown","1cca33bc":"markdown","bbd2de93":"markdown","efd4ac98":"markdown","49830cdd":"markdown","5adace4e":"markdown"},"source":{"d66f47c8":"import numpy as np # linear algebra\nimport pandas as pd # data processing, CSV file I\/O (e.g. pd.read_csv)\nimport seaborn as sns\nimport geopandas as gpd\nimport geoplot as gplt\nimport matplotlib.pyplot as plt\nimport mapclassify\nimport geoplot.crs as gcrs","192bc46c":"Airport_Filename=\"..\/input\/covid19s-impact-on-airport-traffic\/covid_impact_on_airport_traffic.csv\"\nAirport_Data=pd.read_csv(Airport_Filename,parse_dates=['Date'])\nAirport_Data.head()","d449055d":"Airport_Data.info()","513d87a4":"Airport_Data=Airport_Data[(Airport_Data.Country=='United States of America (the)') & (Airport_Data.City!='Urban Honolulu')]","773336b5":"Airport_Data['Longitude']=Airport_Data.Centroid.str[6:-1].str.split(' ').map(lambda x:x[0]).astype(float)\nAirport_Data['Latitude']=Airport_Data.Centroid.str[6:-1].str.split(' ').map(lambda x:x[1]).astype(float)\nAirport_Data=gpd.GeoDataFrame(\n    Airport_Data, geometry=gpd.points_from_xy(Airport_Data.Longitude, Airport_Data.Latitude))\nAirport_Geo_Data=Airport_Data[['City','geometry']].drop_duplicates(subset=['City']).set_index('City')","52e403c4":"Airport_Data['YearMonth']=Airport_Data.Date-pd.offsets.MonthBegin(1)\nTimeSer_Airport_Data2=Airport_Data.groupby(['YearMonth','City']).PercentOfBaseline.mean().reset_index()\nTimeSer_Airport_Data_wide=TimeSer_Airport_Data2.pivot(index='YearMonth',columns='City',values='PercentOfBaseline')","c2cdec38":"TimeSer_Airport_Data_wide","3306eae9":"Airport_Avgflight_Data=Airport_Data.groupby(['City']).PercentOfBaseline.mean().reset_index().set_index('City')\nAirport_Geo_Data=Airport_Geo_Data.join(Airport_Avgflight_Data).reset_index()","b87c75a0":"contiguous_usa = gpd.read_file(gplt.datasets.get_path('contiguous_usa'))\nax = gplt.polyplot(contiguous_usa, projection=gcrs.AlbersEqualArea())\ngplt.pointplot(Airport_Geo_Data, ax=ax, hue='PercentOfBaseline',cmap='Greens',legend=True)","2fbbaf2f":"sns.heatmap(TimeSer_Airport_Data_wide)","b763592c":"Lets process the longtitude and lattitute from Centroid:","58073edc":"There are no null records, good","53216774":"Lets also calculate average baselines for each city:","aad9b7d7":"This does not show how COVID19 has effected flight baselines. We need to see the effect over time. Trying to visualize using line plots will be too cluterred. However a heatmap can tell a better story.","97c85fdc":"> Lets first filter continous cities in US","bedec357":"Lets create a base map for USA cities and add average flight baselines as color:","84f468b9":"# Airport TRaffic Visualization","1cca33bc":"## Visualization","bbd2de93":"Lets import libraries:","efd4ac98":"## Preprocessing","49830cdd":"and agregate data for monthly flights:","5adace4e":"Then read the data file:"}}