{"cell_type":{"d8006cdb":"code","ca3da2f9":"code","d7bb348c":"code","067d4897":"code","a23f505f":"code","8ed87b77":"code","90cd0f03":"code","2794d634":"code","629cfe8d":"code","eedc2d3b":"code","5b87cfbc":"code","47b10736":"code","c8cdbdd0":"code","b1177266":"code","a1a429b1":"code","b95949f0":"code","feb2d583":"code","2a61d329":"code","4fa12d2b":"code","b3eb0400":"code","53a19811":"code","e13c8d48":"code","ee074ab7":"code","4e18ee97":"code","ba9e482a":"code","9371c418":"code","beffbef0":"code","d9abe5e2":"code","5189000b":"code","f53bd9ee":"code","d705cc1b":"code","a7c9788f":"code","31dbaf8a":"code","7309e31b":"code","aa93fb47":"code","2e3b4755":"code","9ec6cb53":"code","dcd6b7ea":"code","360f7625":"code","6128e533":"code","b851d49e":"code","03d3162e":"code","a2d49725":"code","b6db1d3f":"markdown","9e290175":"markdown","969cbb71":"markdown","020bd26c":"markdown","1bd35fd4":"markdown","369f3abc":"markdown","83d6f318":"markdown","f777bef4":"markdown","47a5698b":"markdown","d6a399fe":"markdown","0cc245c5":"markdown","d8d3a9b4":"markdown","f4140ebe":"markdown","c5006622":"markdown","5e338116":"markdown","8064a7c4":"markdown","d2d14619":"markdown","81aa2177":"markdown","14fe7d24":"markdown","ebd6d045":"markdown","380ce922":"markdown","d84096df":"markdown","3d0a5bef":"markdown","2110d055":"markdown","6865c215":"markdown","3a082258":"markdown","0f7c91d7":"markdown","953a8dfb":"markdown","458dfa07":"markdown","3d58a798":"markdown","a3aa345e":"markdown","d9231596":"markdown","7f5bf42c":"markdown","b93a478d":"markdown","c2c78ea0":"markdown","f49ebd66":"markdown","9f3c602d":"markdown","48c84b3e":"markdown","bccb0a7d":"markdown"},"source":{"d8006cdb":"%matplotlib inline","ca3da2f9":"import numpy as np\nimport pandas as pd\nfrom matplotlib import pyplot as plt\nimport seaborn as sns\nimport statsmodels.api as sm\nimport scipy.stats as stats\nfrom sklearn.preprocessing import LabelEncoder\nimport copy\nimport scipy\nfrom statsmodels.stats.proportion import proportions_ztest","d7bb348c":"sns.set() #setting the default seaborn style for our plots","067d4897":"df = pd.read_csv('..\/input\/sample-employees-monthly-salary\/Employee_monthly_salary.csv') # read the data as a data frame\ndf[\"Deduction_percentage\"] = pd.to_numeric(df[\"Deduction_percentage\"])\ndf['EmpID'] = df.EmpID.astype(object)","a23f505f":"df.head() #checking the head of the data frame","8ed87b77":"df.info()  #info about the data","90cd0f03":"df.isna().apply(pd.value_counts)   #null value check","2794d634":"df.describe().T  # five point summary of the continuous attributes","629cfe8d":"#Plots to see the distribution of the continuous features individually\n\nplt.figure(figsize= (20,15))\nplt.subplot(3,3,1)\nplt.hist(df.Age, color='lightblue', edgecolor = 'black', alpha = 0.7)\nplt.xlabel('Age')\n\nplt.subplot(3,3,2)\nplt.hist(df.Tenure_in_org_in_months, color='lightblue', edgecolor = 'black', alpha = 0.7)\nplt.xlabel('No. of months in organization')\n\nplt.subplot(3,3,3)\nplt.hist(df.GROSS, color='lightblue', edgecolor = 'black', alpha = 0.7)\nplt.xlabel('Gross monthly salary')\n\nplt.subplot(3,3,4)\nplt.hist(df.Net_Pay, color='lightblue', edgecolor = 'black', alpha = 0.7)\nplt.xlabel('Net monthly salary')\n\nplt.subplot(3,3,5)\nplt.hist(df.Deduction_percentage, color='lightblue', edgecolor = 'black', alpha = 0.7)\nplt.xlabel('Percentage of deduction')\n\nplt.show()","eedc2d3b":"Skewness = pd.DataFrame({'Skewness' : [stats.skew(df.Age),stats.skew(df.Tenure_in_org_in_months),stats.skew(df.GROSS),stats.skew(df.Net_Pay),stats.skew(df.Deduction_percentage)]},\n                        index=['Age','tenure','gross','net_pay','deduction_percentage'])  # Measure the skeweness of the required columns\nSkewness","5b87cfbc":"plt.figure(figsize= (30,20))\nplt.subplot(5,2,1)\nsns.boxplot(x= df.Age, color='lightblue')\n\nplt.subplot(5,2,2)\nsns.boxplot(x= df.Tenure_in_org_in_months, color='lightblue')\n\nplt.subplot(5,2,3)\nsns.boxplot(x= df.GROSS, color='lightblue')\n\nplt.subplot(5,2,4)\nsns.boxplot(x= df.Net_Pay, color='lightblue')\n\nplt.subplot(5,2,5)\nsns.boxplot(x= df.Deduction_percentage, color='lightblue')\n\nplt.show()","47b10736":"plt.figure(figsize=(20,25))\n\n\nx = df.Gender.value_counts().index    #Values for x-axis\ny = [df['Gender'].value_counts()[i] for i in x]   # Count of each class on y-axis\n\nplt.subplot(4,1,1)\nplt.bar(x,y, align='center',color = 'lightblue',edgecolor = 'black',alpha = 0.7)  #plot a bar chart\nplt.xlabel('Gender')\nplt.ylabel('Count')\nplt.title('Gender distribution')\n\nx1 = df.Designation.value_counts().head(7).index    #Values for x-axis\ny1 = [df['Designation'].value_counts().head(7)[j] for j in x1]   # Count of each class on y-axis\n\nplt.subplot(4,1,2)\nplt.bar(x1,y1, align='center',color = 'lightblue',edgecolor = 'black',alpha = 0.7)  #plot a bar chart\nplt.xlabel('Designation')\nplt.ylabel('Count')\nplt.title('Top designations')\n\nx2 = df.Department.value_counts().head(7).index    #Values for x-axis\ny2 = [df['Department'].value_counts().head(7)[k] for k in x2]   # Count of each class on y-axis\n\nplt.subplot(4,1,3)\nplt.bar(x2,y2, align='center',color = 'lightblue',edgecolor = 'black',alpha = 0.7)  #plot a bar chart\nplt.xlabel('Department')\nplt.ylabel('Count ')\nplt.title(\"Top sized Departments\")\n\n\ndf2 = df.nlargest(5,['GROSS'])\nx3 = df2.Designation   #Values for x-axis\ny3 = df2.GROSS  # Count of each class on y-axis\n\nplt.subplot(4,1,4)\nplt.bar(x3,y3, align='center',color = 'lightblue',edgecolor = 'black',alpha = 0.7)  #plot a bar chart\nplt.xlabel('Designation')\nplt.ylabel('Gross Salary')\nplt.title(\"Top earning designations\")\n\n\n\nplt.show()\n","c8cdbdd0":"#Label encoding the variables before doing a pairplot because pairplot ignores strings\ndf_encoded = copy.deepcopy(df)\ndf_encoded.loc[:,['Gender', 'Designation', 'Department']] = df_encoded.loc[:,['Gender', 'Designation', 'Department']].apply(LabelEncoder().fit_transform) \n\nsns.pairplot(df_encoded)  #pairplot\nplt.show()","b1177266":"### Null Hypothesis - Number of female employees is equal to the number of male employees.\n### Alternate Hypothesis - Number of female employees is significantly less than the number of male employees\n\ndf.groupby('Gender').size() # Gives the count of the gender in the sample","a1a429b1":"x = df.Gender.value_counts().index    #Values for x-axis\ny = [df['Gender'].value_counts()[i] for i in x]   # Count of each class on y-axis\n\nplt.subplot(4,1,1)\nplt.bar(x,y, align='center',color = 'lightblue',edgecolor = 'black',alpha = 0.7)  #plot a bar chart\nplt.xlabel('Gender')\nplt.ylabel('Count')\nplt.title('Gender distribution')","b95949f0":"observed_values    = np.array([499,1303])\nexpected_values    = np.array([901,901])\n\nchi_square_stat, p_value = stats.chisquare(observed_values, f_exp=expected_values)\nprint('At 5 % level of significance, the p-value is', p_value)\nprint('At 5 %s level of significance, the chi observed is %1.7f' %('%', chi_square_stat))","feb2d583":"#Scatter plot to look for visual evidence of dependency between gross salary and gender accross different ages\nplt.figure(figsize=(8,6))\nsns.scatterplot(df.Age,df.GROSS,hue=df.Gender,palette= ['green','red'] ,alpha=0.9)\nplt.show()","2a61d329":"# T-test to check dependency of gross salary on gender\n\nHo = \"Gross salary of male and female employees are same\"   # Stating the Null Hypothesis\nHa = \"Gross salary of female employees are significantly less\"   # Stating the Alternate Hypothesis\n\nx = np.array(df[df.Gender == 'M'].GROSS)  # Selecting gross salary of male employees\ny = np.array(df[df.Gender == 'F'].GROSS) # Selecting gross salary of female employees\n\nt, p_value  = stats.ttest_ind(x,y, axis = 0)  #Performing an Independent t-test\n\nif p_value < 0.05:  # Setting our significance level at 5%\n    print(f'{Ha} as the p_value ({p_value}) < 0.05')\nelse:\n    print(f'{Ho} as the p_value ({p_value}) > 0.05')","4fa12d2b":"plt.figure(figsize=(8,6))\nsns.scatterplot(df.Age, df.GROSS,hue=df.Age,alpha=0.6)\nplt.show()","b3eb0400":"bins= [20,30,40,50,60]\nlabels = ['Twenties','Thirties','Forties','Fifties']\ndf['AgeGroup'] = pd.cut(df['Age'], bins=bins, labels=labels, right=False)\ndf.AgeGroup.value_counts()   #Checking the Age distribution of all employees\n#Box plot to visualize dependency between Gross Salary and Age\nplt.figure(figsize= (10,8))\nsns.boxplot(x = \"AgeGroup\", y = \"GROSS\", data = df)\nplt.title('Gross Salary distribution among different Age groups')\nplt.show()","53a19811":"# One-way ANOVA to check dependency of Gross Salary on Age\nHo = \"Avg gross salary is same across different age groups\"   # Stating the Null Hypothesis\nHa = \"Avg gross salary is different across different age groups\"   # Stating the Alternate Hypothesis\n\nimport scipy.stats             as     stats\nimport statsmodels.api         as     sm\nfrom   statsmodels.formula.api import ols\n\nf_crit = stats.f.ppf(q =1-0.05, dfn = 3, dfd = 1802-3)\n\nprint(\"F critical value is\", f_crit)\nprint(\"\\nAnova Table\")\nmod = ols('GROSS ~ AgeGroup', data = df).fit()\naov_table = sm.stats.anova_lm(mod, typ=2)\nprint(aov_table)","e13c8d48":"#We will get the ratio of male & female employees in leadership roles and compare it with \n#the ratio of overall male & female employees and run a z-proportion test to find out:\n\nsearchwords = ['Lead','Manag','President','Director','VP']\nLeadership_role = np.array(df[df['Designation'].str.contains('|'.join(searchwords))].Gender.value_counts())\noverall_ratio = np.array(df.Gender.value_counts())","ee074ab7":"### Null Hypothesis - Gender has no role in leadership roles\n### Alternate Hypothesis - Gender has significant role to play in leadership roles\n\nzscore, pvalue = proportions_ztest(Leadership_role, overall_ratio, alternative = 'two-sided')\nprint('zscore = {:.3f}, pvalue = {:.3f}'.format(zscore, pvalue))","4e18ee97":"#We will get the ratio of various age-groups in leadership vs non-leadership roles:\n\nLeadership_role = scipy.array(df[df['Designation'].str.contains('|'.join(searchwords))].AgeGroup.value_counts())\nIndividual_cont_role = scipy.array(df[df['Designation'].str.contains('|'.join(searchwords))== False].AgeGroup.value_counts())\ncontingency_array = scipy.array([Leadership_role,Individual_cont_role])\nprint(contingency_array)","ba9e482a":"#We will try to find out with CHI-SQUARE TEST if age is a deciding factor for leadership roles:\n\n\n## Null Hypothesis: Leadership roles are independent of age\n## Alternate Hypothesis: Age has a role to play in leadership roles \n\nchi_sq_Stat, p_value, deg_freedom, exp_freq = stats.chi2_contingency(contingency_array)\nprint(f'Chi-square statistic {round(chi_sq_Stat,5)}; P value {p_value}; Degrees of freedom {deg_freedom}')","9371c418":"s_dept_mean_sal = df.groupby('Department').GROSS.mean() #Finding department-wise mean salaries\ndf_dept_mean_sal = pd.DataFrame(s_dept_mean_sal) # converting the above derived Series into a Dataframe.\nnp_dept_mean_sal = np.array(df_dept_mean_sal) # converting the above derived Series into an Array.\ndf_dept_mean_sal.hist()","beffbef0":"## We are going to perform 1 sample Z-Test on all 154 departments to find if there are departments paying significantly high salaries\n\n### Null Hypothesis - The payscale across the departments are equal.\n### Alternate Hypothese - The payscale across the departments are not equal.\n\nmu = df.GROSS.mean()\nsigma = df.GROSS.std(ddof=1)\nn = 1802 # number of records in the sample\nse = sigma\/np.sqrt(n) # calculating the standard error \nz_crit = 1.96 # Z critical value\n\nZ_value_array = (np_dept_mean_sal - mu)\/se # Calculating the Z value \ndf_dept_z_value = pd.DataFrame(Z_value_array,index=df_dept_mean_sal.index,columns=[\"z_value\"])\n\ndf_consolidated_zscores = pd.concat((df_dept_mean_sal,df_dept_z_value),axis=1, join='inner', sort=False)\ndf_consolidated_zscores.rename(columns={\"0\":\"z_value\"})\ndf_consolidated_zscores # Joined Dataframe of the Z_value and the mean value of the Gross salary for each department","d9abe5e2":"#Identifying departments outside the Z-Critical range\nunoptimized_salaries = pd.DataFrame(df_consolidated_zscores[(df_consolidated_zscores.z_value > 1.96)|(df_consolidated_zscores.z_value < -1.96)])\nunoptimized_salaries","5189000b":"unoptimized_salaries.sort_values(by = 'z_value').head()","f53bd9ee":"# 1 sample Z-Test to check dependency of salary deduction on age\nHo = \"Avg Data scientist salary is same as avg salaries of other designations\"   # Stating the Null Hypothesis\nHa = \"Avg Data scientist salary is higher than avg salaries of other designations\"   # Stating the Alternate Hypothesis\n\nsearchwords = ['Scientist']\ndf_data_scientist = df[df['Designation'].str.contains('|'.join(searchwords))]\nprint('Data Scientist:')\ndisplay(df_data_scientist)","d705cc1b":"data_scientist_sal_mean = np.array(df_data_scientist.GROSS.mean())    # Mean salary of Data scientist\npop_gross_sal_mean = np.array(df.GROSS.mean())    # Mean salary of all \npop_gross_sal_std = np.std(df.GROSS)\nprint('Mean Salary of Data Scientist: %8.4f'%data_scientist_sal_mean)\nprint('Mean Salary of other designations: %8.4f'%pop_gross_sal_mean)\nprint('Std deviation of population: %8.4f'%pop_gross_sal_std)","a7c9788f":"Zcrit = round(stats.norm.isf(q = 0.05),2)\nprint('Value of Z critical is %3.6f' %Zcrit)\nn = len(df.GROSS)\nZ = (data_scientist_sal_mean - pop_gross_sal_mean)\/(pop_gross_sal_std\/np.sqrt(n))\nprint('Value of Z observed is %2.5f' %Z)","31dbaf8a":"if Z > Zcrit:  # Setting our significance level at 5%\n    print(f'{Ha} as the observed Z value ({round(Z,4)}) > Z-critical')\nelse:\n    print(f'{Ho} as the observed Z value ({round(Z,4)}) < Z-critical')","7309e31b":"df.describe()","aa93fb47":"series1 = df.Age\nseries2 = df.Tenure_in_org_in_months\nseries3 = df.GROSS\nseries4 = df.Net_Pay\nseries5 = df.Deduction\nseries6 = df.Deduction_percentage","2e3b4755":"# Central Limit Theorem\n\ndef central_limit_theorem(data,n_samples, sample_size):\n    \"\"\" Use this function to demonstrate Central Limit Theorem. \n        data = 1D array, or a pd.Series\n        n_samples = number of samples to be created\n        sample_size = size of the individual sample \"\"\"\n    %matplotlib inline\n    import pandas as pd\n    import numpy as np\n    import matplotlib.pyplot as plt\n    import seaborn as sns\n    min_value = 0  # minimum index of the data\n    max_value = data.count()  # maximum index of the data\n    b = {}\n    for i in range(n_samples):\n        x = np.unique(np.random.randint(min_value, max_value, size = sample_size)) # set of random numbers with a specific size\n        b[i] = data[x].mean()   # mean of each sample\n    c = pd.DataFrame()\n    c['sample'] = b.keys()  # sample number \n    c['Mean'] = b.values()  # mean of that particular sample\n    plt.figure(figsize= (15,5))\n\n    plt.subplot(1,2,2)\n    sns.distplot(c.Mean)\n    plt.title(f\"Sampling Distribution. \\n \\u03bc = {round(c.Mean.mean(), 3)} & SE = {round(c.Mean.std(),3)}\")\n    plt.xlabel('data')\n    plt.ylabel('freq')\n\n    plt.subplot(1,2,1)\n    sns.distplot(data)\n    plt.title(f\"Population Distribution. \\n \\u03bc = {round(data.mean(), 3)} & \\u03C3 = {round(data.std(),3)}\")\n    plt.xlabel('data')\n    plt.ylabel('freq')\n\n    plt.show()\n","9ec6cb53":"central_limit_theorem(series1, n_samples = 1000, sample_size = 500) # Mean Sample ","dcd6b7ea":"central_limit_theorem(series1, n_samples = 1000, sample_size = 10) # Mean Sample ","360f7625":"central_limit_theorem(series2, n_samples = 2000, sample_size = 500)","6128e533":"central_limit_theorem(series3, n_samples = 1000, sample_size = 30)","b851d49e":"central_limit_theorem(series4, n_samples = 1000, sample_size = 50)","03d3162e":"central_limit_theorem(series5, n_samples = 1000, sample_size = 500)","a2d49725":"central_limit_theorem(series6, n_samples = 1000, sample_size = 30)","b6db1d3f":"### Performing a Chi-Square test to perform the hypothesis test to prove the observation statistically","9e290175":"### We have sufficient evidence to reject null hypothesis as the p-value is way lesser than 0.05 and the conclusion is that number of female employees is significantly less than the male employees","969cbb71":"![Screen%20Shot%202020-07-17%20at%209.50.28%20PM.png](attachment:Screen%20Shot%202020-07-17%20at%209.50.28%20PM.png)","020bd26c":"Data Source: https:\/\/drive.google.com\/file\/d\/1qRhH__-VyhjvwlQEGxQmcTVUpDQmZgrb\/view?usp=sharing","1bd35fd4":"### 7. Are Data Scientists getting paid significantly more than others?","369f3abc":"### - The only obvious correlation of salary (gross and net) is with gender, there are almost zero female employees earning high salaries  \n### - Looks like salary is proportional to 'age'\n### - Deduction depends on gross salary and age","83d6f318":"### - Age looks to be quite normally distributed, with most of the employees around 30.\n### - Total months spent in organization seems to be right skewed, majority of them are relatively new to the organization.\n### - Gross and net monthly salaries seem to be slightly right skewed \n### - Percentage of deduction seems to be normally distributed","f777bef4":"![Screen%20Shot%202020-07-17%20at%209.47.08%20PM.png](attachment:Screen%20Shot%202020-07-17%20at%209.47.08%20PM.png)","47a5698b":"#### Since p_value < 0.05, we have sufficent evidence to conclude that gender has an effect on Leadership roles. The ratio of male is to female in leadership roles is more than the overall male is to female ratio, in other words there are even fewer female employees in Leadership roles.","d6a399fe":"# Some of the questions we will try answering:","0cc245c5":"### We reject the null hypothesis as the Z_value is  in the range \ud835\udc4d_value  < -1.96 or  \ud835\udc4d_value > 1.96\n\n### Here is a list of top high paying departments in the organization","d8d3a9b4":"##### Let's find out by performing statistical analysis between Data Scientist's salary and salary of other job roles","f4140ebe":"# Statistical Simulation - Central Limit Theorem","c5006622":"##### Female employees earn significantly less than the male employees","5e338116":"#### Since p-value < 0.05 we have sufficent evidence to reject null hypothesis. In other words, age has a significant role to play when it comes to Leadership roles","8064a7c4":"### 4. Relation between gender and leadership roles","d2d14619":"### 1. Are the number of male and female employees equal in the organization? In other words, is there an inclusive gender ratio?","81aa2177":"### - We see an sparkingly uneven gender ratio \n### - We can see the top departments in terms of employee strength and top designations across the org\n### - We can see the top earning designations in terms of gross salary","14fe7d24":"## Basic EDA\n* Find the shape of the data,data type of individual columns\n* Check the presence of missing values\n* Five-point summary of numerical attributes\n* Descriptive stats of numerical columns\n* Find the distribution of numerical columns and the asssociated skeweness and presence of outliers \n* Distribution of categorical columns","ebd6d045":"### - Data looks legit as all the statistics seem reasonable\n### - Looking at the age column, 75% of the employees are 35 or below\n### - Very few people have a net salary of more than 1,45,898.\n### - There are very few employees who have spent more than FIVE years in the organization","380ce922":"### - Visually the gross salary earned by female employees is significantly less","d84096df":"### Bi-variate distribution of every possible attribute pair","3d0a5bef":"### 5. Relation between age and leadership roles","2110d055":"### - Age and deduction percentage have few extreme values \n### - Net_pay, Gross_pay and tenure are highly skewed, as there are quite a lot of extreme values","6865c215":"### 3. Does salary depend on Age?","3a082258":"## Read the data into the notebook","0f7c91d7":"##### Conclusion: \n\n1. It is visually evident that shape of mean samples for each attribute (Age, Tenure_in_org_in_months, GROSS, Net_Pay, Deduction & Deduction_percentage) follows Normal distribution\n\n2. As we see from above, for Age attribute when the sample size is decreased from 500 to 10, the Standard Error (SE) increased to 1.641 from 0.22\n\n3. Also, again for Age attribute it is visually evident that since population distribution is Normal even if we are taking a sample size of equal to 10 which is lesser than 30, we still have an approximately normal distribution according to CLT","953a8dfb":"### - There are no null values in any of the column","458dfa07":"#### Conclusion: Since P- value is very less than 0.05 we reject NULL hypothesis. Therefore, it is evident that Avg gross salary is different across different age groups","3d58a798":"### Visual representation of the count of the gender in the population","a3aa345e":"##### Lets plot Scatter-plot to look for visual evidence of dependency between attributes \"Gross Salary\" and \"Age\"","d9231596":"#### Conclusion: Data Scientists are drawing higher salary compared to other jobs","7f5bf42c":"### - Skewness of Age and deduction_percentage is very less as seen in the previous step\n### - Tenure is skewed\n### - Gross and net monthly salaries have huge skewness","b93a478d":"##### Let's perform statistical test (ANOVA) on Gross Salary and Age to check nature of relation","c2c78ea0":"## Import all the necessary libraries","f49ebd66":"### 2. Do male employees earn significantly more than female employees?","9f3c602d":"#### Observation: We see there is a positive relation between Gross Salary and Age. In fact, the relation is directly proportional","48c84b3e":"### - The data has 1802 instances with 13 attributes. 5 integer type, 1 float type and 7 object type(Strings in the column) ","bccb0a7d":"### 6. Are there departments paying significantly low salaries in the organization?"}}