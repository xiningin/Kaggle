{"cell_type":{"a21999ff":"code","e96bd5f4":"code","926380f3":"code","19aaf960":"code","3720ccef":"code","8ddda508":"code","c816a6d1":"code","d273f9d4":"code","42eebd7a":"code","b4ae05ec":"code","f6961599":"code","cbc8332d":"markdown","ad520992":"markdown","f020afb0":"markdown","1c2ea997":"markdown","574232ae":"markdown","c88d4ab6":"markdown","1d0758d3":"markdown","d07b76e1":"markdown","3c256de6":"markdown","9c74fb40":"markdown","bf0b2412":"markdown","d8dc0f65":"markdown","38d495d8":"markdown","fae47889":"markdown","7a1f5bb2":"markdown","07bbba8c":"markdown","2b1dc3fb":"markdown","83e15142":"markdown","17099f1f":"markdown","92014c39":"markdown","d05bfcbf":"markdown","2ad97b55":"markdown","beb0c523":"markdown","df6b5768":"markdown","d4495a64":"markdown","00b17a0d":"markdown","cb1b88cf":"markdown","5ef02999":"markdown","8b6057a9":"markdown","34e3c77f":"markdown","5f7ff380":"markdown"},"source":{"a21999ff":"# This Python 3 environment comes with many helpful analytics libraries installed\n# It is defined by the kaggle\/python docker image: https:\/\/github.com\/kaggle\/docker-python\n# For example, here's several helpful packages to load in \n\nimport numpy as np # linear algebra\nimport pandas as pd # data processing, CSV file I\/O (e.g. pd.read_csv)\n\n# Input data files are available in the \"..\/input\/\" directory.\n# For example, running this (by clicking run or pressing Shift+Enter) will list all files under the input directory\n\nimport os\nfor dirname, _, filenames in os.walk('\/kaggle\/input'):\n    for filename in filenames:\n        print(os.path.join(dirname, filename))\n\n#Any results you write to the current directory are saved as output.","e96bd5f4":"InjuryRecord = pd.read_csv(\"..\/input\/nfl-playing-surface-analytics\/InjuryRecord.csv\")\nPlayList = pd.read_csv(\"..\/input\/nfl-playing-surface-analytics\/PlayList.csv\")\nPlayerTrackData = pd.read_csv(\"..\/input\/nfl-playing-surface-analytics\/PlayerTrackData.csv\")\n","926380f3":"PlayList['StadiumType'].unique()","19aaf960":"exp2replace = ['Domed']\nPlayList['StadiumType'] = PlayList['StadiumType'].replace(exp2replace, 'Dome')\n\nexp2replace = ['Dome, closed', 'Domed, closed']\nPlayList['StadiumType'] = PlayList['StadiumType'].replace(exp2replace, 'Closed Dome')\n\nexp2replace = ['Cloudy']\nPlayList['StadiumType'] = PlayList['StadiumType'].replace(exp2replace, '')\n\nexp2replace = ['Indoors', 'Retractable Roof']\nPlayList['StadiumType'] = PlayList['StadiumType'].replace(exp2replace, 'Indoor')\n\nexp2replace = ['Oudoor','Ourdoor','Outddors', 'Outdoors','Outdor','Outside']\nPlayList['StadiumType'] = PlayList['StadiumType'].replace(exp2replace, 'Outdoor')\n\nexp2replace = ['Retr. Roof Closed','Retr. Roof-Closed', 'Indoor, Roof Closed']\nPlayList['StadiumType'] = PlayList['StadiumType'].replace(exp2replace, 'Retr. Roof - Closed')\n\nexp2replace = ['Retr. Roof-Open', 'Outdoor Retr Roof-Open', 'Indoor, Open Roof', 'Domed, Open', 'Domed, open', 'Open']\nPlayList['StadiumType'] = PlayList['StadiumType'].replace(exp2replace, 'Retr. Roof - Open')\n\nPlayList['StadiumType'].unique()","3720ccef":"PlayList['Weather'].unique()","8ddda508":"exp2replace = ['Indoor','Indoors']\nPlayList['Weather'] = PlayList['Weather'].replace(exp2replace, )\n\nexp2replace = ['Clear skies','Clear Skies']\nPlayList['Weather'] = PlayList['Weather'].replace(exp2replace, 'Clear')\n\nexp2replace = ['Overcast','Coudy', 'Clouidy', 'cloudy', 'Mostly Coudy', 'Mostly cloudy']\nPlayList['Weather'] = PlayList['Weather'].replace(exp2replace, 'Cloudy')\n\nexp2replace = ['Party']\nPlayList['Weather'] = PlayList['Weather'].replace(exp2replace, 'Partly')\n\nexp2replace = ['Partly clear','Partly Sunny', 'Party cloudy', 'Partly Clouidy', 'Partly cloudy']\nPlayList['Weather'] = PlayList['Weather'].replace(exp2replace, 'Partly Cloudy')\n\nexp2replace = ['Rain']\nPlayList['Weather'] = PlayList['Weather'].replace(exp2replace, 'Rainy')\n\nexp2replace = ['Clear and sunny', 'Sunny and clear', 'Sunny Skies']\nPlayList['Weather'] = PlayList['Weather'].replace(exp2replace, 'Sunny')\n\nexp2replace = ['Mostly Sunny Skies']\nPlayList['Weather'] = PlayList['Weather'].replace(exp2replace, 'Mostly Sunny')\n\nPlayList['Weather'].unique()\n","c816a6d1":"PlayList['Position'].unique()\n\nexp2replace = ['Missing Data']\nPlayList['Position'] = PlayList['Position'].replace(exp2replace, )\nPlayList['PositionGroup'] = PlayList['PositionGroup'].replace(exp2replace, )\n\nPlayList['PositionGroup'].unique()\n","d273f9d4":"import os\nPlayList.to_csv('CleanPlaylist.csv')\n#InjuryRecord.to_csv('InjuryRecord.csv')\n#PlayerTrackData.to_csv('PlayerTrackData.csv')\nfiles = os.listdir(os.curdir)\nprint (files)\n","42eebd7a":"import pandas as pd\nedgedmaxspan = pd.read_csv(\"..\/input\/nflnet\/edgedmaxspan.csv\")\n#edgednfl = pd.read_csv(\"..\/input\/\/nflnet\/edgednfl.csv\")\n#edgednfull = pd.read_csv(\"..\/input\/nflnet\/edgednfull.csv\")\n#nodesmaxspan = pd.read_csv(\"..\/input\/nflnet\/nodesmaxspan.csv\")\n#nodesnfl = pd.read_csv(\"..\/input\/nflnet\/nodesnfl.csv\")\n#nodesnfull = pd.read_csv(\"..\/input\/nflnet\/nodesnfull.csv\")","b4ae05ec":"edgedmaxspan.head()","f6961599":"interpolated_variables = edgedmaxspan[['edget']].groupby('edget').count()\ninterpolated_variables","cbc8332d":"A simple focus on the pair *Surface-BodyParts* makes appear the real (unbiased) distribution of injury risk. *Synthetic surface* is more dangerous for *Ankle* then for *Toes*, while *Natural* or *Synthetic* are equally dangerous for *Knee* and *Natural* is the worst for *Foot*. \n\nAnyway, *Heel*, *Toes* and *Foot* are not significantly injuried in comparison with *Ankle* and *Knee* (Fig. 9).","ad520992":"Cleaning weather description","f020afb0":"A zoom into NetFL#1 makes appear **Cold Weather** as a major cause of injury.\n*Surface* also appears as a significant cause, especially when it is *Synthetic* although the injury risk is also medium on *Natural* surfaces. \n\nOne might notice the slight decrease in risks from *DM_M*1 (1 day missed due to injury) to *DM-M7* (7 days missed) then to *DM_M28* and *DM_M42*, that will appear as a **causal chain** in some of the next presented graph structures.\n\nAt the opposite, *PlayerGamePlay* appears to have a few consequences on injuries (blue star-network at the center of Fig. 2). \n","1c2ea997":"Deploying statistic analysis on the Injury records file generates false **understanding of the *injury risk*** while *statistical bias* are not avoided: \n\nFor instance, if 1 injury on synthetic surface and 1 injury on natural suface were recorded (50\/50) while 10 games were recorded on synthetic soil and 100 games on natural soil, the real *injury risk* is not 50% for each surface but 1\/10 = 10% for synthetic and only 1\/100 = 1% for natural (unbiased\/true injury probability). \n\n All injury risk values presented in the **imported results are unbiased** based on the whole Playlist and InjuryRecord files, in order not to mislead users with biased data visualizations.\n","574232ae":"   Descriptive statistics of natural phenomena such as usually presented in data science rarely figure out the global and intricate behavior of variables described within the available datasets. No complete understanding of the real world is possible without considering phenomena as a whole system, allowing to explain how correlation metrics fail to detect highly dependant values subsets in pairs of (apparently) independant variables. As a result, **network science** was defined as \"the study of network representations of physical, biological, and social phenomena leading to predictive models of these phenomena\", by the United States Research Council (2006). Deep neural networks might be considered as a premise of the generalization of network science for future applications in analytics and artificial intelligence. \n\nBy this notebook, the author mostly wished to share some results for helping medical teams and players to prevent future injuries from special situations\/scenarios. The most critical situations were identified thanks to private models of probabilistic causal networks, which must remain partially disclosed (author developping and publishing private research works in network science, since 2009). \n\nThis work is shared in the memory of Freddie Joe Steinmark (1949-1971).\n","c88d4ab6":"The final model of PCN aims at mining **detailed causalities hidden in the studied dataset** - *NetFL#3*. Once again, the overall shape illustrated in Fig. 7 strictly results from the computed graph structure and spatialisation algorithm (Yifan Hu).\n\n![Fig7.jpg](attachment:Fig7.jpg)\nFig. 7 - NetFL#3","1d0758d3":"Similar analysis on movements (PlayerTrackData) having revealed no significant findings, no specific outcomes are presented. \n\nThanks to the supplied resources, experts such as team managers and medical specialists can mine the computed PCNs so as to find circumstances, **to verify and prevent scenarios propitious to injury** and to foster better conditions for players and supporters. \n\nNDLA. The complete sources for reproducing these outcomes may be provided in case of award. ","d07b76e1":"One can see various red and orange parts of the \"body\" represented in Fig. 8. These are *causal conjunctions* of injury risks. We complete the presented work with a focus on some of these parts, leaving users free to explorate the whole results thanks to the supplied resources.\n","3c256de6":"A close-up onto the upper left part of NetFL#1 makes appear *Ankle* and *Knee* as major injuries \"causes\" as *body parts* (Fig.3).\n\n*PlayerDay* seems to have an influence on injuries (green\/yellow and mid-sized elements), especially when the number of day is *higher than 300*.\n\nHowever, *32* days also appear as a risky *PlayerDay* value. Medical teams might study more thoroughly this case which may be due to undersampling in data for this value (*e.g.*, multiple injuries during the same play or date during the season and\/or few values recorded in *PlayList* at the same time).","9c74fb40":"![Fig2.jpg](attachment:Fig2.jpg)\nFig. 2 - Zoom into NetFL#1","bf0b2412":"![Fig3.jpg](attachment:Fig3.jpg)\nFig. 3 - Close-up into NetFL#1","d8dc0f65":"As previously noticed (Fig. 2), the higher injury risk tied to *Synthetic surface* makes it appear in the first circle of *DM_M1 is 1-true* (1 day missed for injury) while *Natural surface* only appears in its second circle, linked with *StadiumType is Outdoor* - Fig. 6.\n\n*DM_M7* also appears in the first circle of *DM_M1* as another causal chain frequently occuring (green and medium sized link), meaning **1 days missed for injury frequently leads to 7 days missed**. which is also the case with *28 days missed* (*DM_M28 is 1*) and so on, less and less frequently, for *42 days missed* (*DM_M42 is 1*) . \n\nBased on the studied dataset, most likely causes of *28 days missed for injury* seems to be *Position is SS* and\/or *RosterPosition is Linebacker*. Most likely causes for *42 days missed for injury* are **high temperature (89\u00b0) and league season beginning** (*PlayerGame is 1*).\n\nSome isolated particularities might reveal a **latent injury risk tied to highest numbers** of *PlayerDay* such as 396 and 421 (left part in Fig. 4). \n","38d495d8":"Cleaning stadium description","fae47889":"Network science results are imported from external environment","7a1f5bb2":"Fig. 8 shows the causal chain from *1 day missed for injury* (*DM_M1 is 1*) to longer periods (DM_M28 and DM_M42). **It reminds team managers the importance of injury prevention** before *DM_M1*. \n\n*Synthetic surface* is tied to *Indoor stadium*, wich entails **Indoor game under high temperatures should be avoided in the beginning and in the end of league season**, as a synthesis of previous observations of injury causes. \n\nWith the previously noticed position of *Linebacker*, the group and positions of *Wide Receiver* seem to be more exposed to injuries too. *PlayTypes Pass* and *Rush* are **combined factors to be avoided for these groups**, especially with high *PlayerDay* value (*396*) and *Light Rain* under medium *temperature* such as *70*\u00b0 (likely Outdoor).\n\nThe exploration of NetFL#3 reveals a lot of other circumstances combinations raising the risk of injuries, such as *Playtype is Kickoff* when *Weather is Cold*, or *PlayerDay* is low (11) while *Weather is Sunny* and *Temperature is high* (89\u00b0).","07bbba8c":"Injuries being absent in Playlist records, injury risk is something like *risk = injury \/ (injury + play)* * 100. \n\nNDLA. The computed metrics ensure homogeneous risk estimations from heterogeneous inputs. ","2b1dc3fb":"![Fig5.jpg](attachment:Fig5.jpg)\nFig. 5 - Causal chain of injuries risk","83e15142":"Zooming into the upper left of *NetFL#3*, we get Fig. 8.\n\n![Fig8.jpg](attachment:Fig8.jpg)\nFig. 8 - Upper left part of NetFL#3","17099f1f":"The following PCN - *NetFL#*2 - provides an overview of the **main causal chains** observed in injuries.\n\n![Fig4.png](attachment:Fig4.png)\nFig. 4 - NetFL#2","92014c39":"The body of *NetFl#2* shows a central chain of causality regarding the risk of injury. \n\nA high injury risk scenario and recommandation might be deduced: *PositionGroup DB* linked with *PlayType Punt* when *Weather is Cold* (*Temperaure is 38*) **must be avoided**, based on the recorded events (orange edges and nodes in Fig. 5). \n\nOne might notice the apparition of *PlayType is Punt Not Returned* and *Roster Position is Safety* in the \"left foot of the man\".\n\nSuch a **variables and values conjunction** was initially hidden within the dataset then revealed thanks to larger scale interpolations (about 14 000 pairs of variables\/values interpolated).\n","d05bfcbf":"Fig. 4 was obtained applying a Maximum Spanning Tree algorithm to *NetFL#2*, then a Yifan Hu spatialization (see Gephi documentation for implemented versions and publications). \nThe result might look as a children drawing of a man\/player but it is a pure coincidence (not an author action, nor a sign from an articial intelligence !).","2ad97b55":"![Fig1.png](attachment:Fig1.png)\nFig. 1 - NetFL#1","beb0c523":"Cleaning position\/position group descriptions","df6b5768":"Three different models of Probabilistic Causal Networks (PCN) providing **injury risk interpolations** were computed based on 120 combinations (pairs) from 16 representative variables (facts) in the original dataset.  ","d4495a64":"Due to certain lacks in network visualization with packages such as **networkX** or **Igraph**, the ilustrated results were generated from the graph visualizarion platform Gephi (https:\/\/gephi.org). Users can download the *nfl3.gephi* file provided with this kernel in \"input\/NFLnet\/\", for demos and data exploration from the open source platform.","00b17a0d":"The size and color of elements enable to quickly locate interpolated injury risk in network visualizations: **blue and litte for lowest risk**, **red and large for highest risk** (color gradient above) ![gradient.png](attachment:gradient.png) ","cb1b88cf":"**Ankle injuries** appear tied with *Sunny* weather and medium *temperature* (61\u00b0), while **Knee injuries** are tied to the game beginning advanced in the league season - *PlayerGamePlay is 1* and *PlayerDay is 365* (Fig. 6).","5ef02999":"A first and trivial network structure *NetFL#1* enables to visualize the significant features for injury causal analysis at a glance.","8b6057a9":"![Fig6.jpg](attachment:Fig6.jpg)\nFig. 6 - Details of the \"head\" in NetFl#2","34e3c77f":"![Fig9.jpg](attachment:Fig9.jpg)\nFig. 9 - User defined paired data comparison","5f7ff380":"Input data are exported for external operations with specific software environment (undisclosed environment).\n"}}