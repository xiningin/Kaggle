{"cell_type":{"747a7002":"code","e8f48d9d":"code","bec943a7":"code","59a2bb7b":"code","8bd95e31":"code","a3df3faf":"code","26765469":"code","5486be0f":"code","876d0e82":"code","c3914f27":"code","38687320":"code","239278d0":"code","81af3b37":"code","dee7d72f":"code","523488d5":"code","c3827964":"code","a538cb29":"code","ce02885f":"code","e9033abf":"code","df76a189":"markdown","887d9bf5":"markdown","1ecae8e0":"markdown","abb95892":"markdown","1cd1052d":"markdown","d75f1fdf":"markdown","47da739a":"markdown","2d0d2c41":"markdown","be8a8da9":"markdown","3166e27a":"markdown","07186384":"markdown","9d41f5ed":"markdown","1be6b480":"markdown","bdafb807":"markdown","b1059b28":"markdown","2414f745":"markdown","44c988f2":"markdown","da6cc602":"markdown","f3937b3c":"markdown","b4a32054":"markdown","d0dc037d":"markdown","c326ba48":"markdown","719bb988":"markdown","76237594":"markdown","7da4fb34":"markdown","9fac8a75":"markdown","6967a405":"markdown"},"source":{"747a7002":"import numpy as np\nimport pandas as pd\nimport seaborn as sns\nimport matplotlib.pyplot as plt\n%matplotlib inline\nfrom IPython.display import display as display\nimport plotly.graph_objs as go","e8f48d9d":"# Read the data to the dataframe from the data files.\n\n#state_year_month_df contains data for each state, segragated into year and month\nstate_year_month_df=pd.read_csv('..\/input\/only_road_accidents_data_month2.csv')\n\n#state_year_time_df contains data for each state, segragated into year and time of the day\nstate_year_time_df=pd.read_csv('..\/input\/only_road_accidents_data3.csv')\n\n","bec943a7":"state_year_month_df.head()","59a2bb7b":"state_year_time_df.head()","8bd95e31":"#Get all the state names in an array..\nstate_names=state_year_month_df['STATE\/UT'].unique()\nprint(state_names)","a3df3faf":"#state_year_month_df=state_year_month_df['STATE\/UT']\nstate_year_month_df['STATE\/UT']=state_year_month_df['STATE\/UT'].replace({'Delhi (Ut)': 'Delhi Ut', 'D & N Haveli':'D&N Haveli'})\nprint(state_year_month_df['STATE\/UT'].unique())","26765469":"# Reassiging state names to variable..\nstate_names=state_year_month_df['STATE\/UT'].unique()\n","5486be0f":"#display(state_year_month_df.head())\n\n#Create season groups clubbing values from multiple month columns..\nstate_year_month_df['SUMMER']=state_year_month_df[['JUNE','JULY','AUGUST']].sum(axis=1)\nstate_year_month_df['AUTUMN']=state_year_month_df[['SEPTEMBER','OCTOBER','NOVEMBER']].sum(axis=1)\nstate_year_month_df['WINTER']=state_year_month_df[['DECEMBER','JANUARY','FEBRUARY']].sum(axis=1)\nstate_year_month_df['SPRING']=state_year_month_df[['MARCH','APRIL','MAY']].sum(axis=1)\n\n#Delete month columns..\nstate_year_month_df=state_year_month_df.drop(['JANUARY','FEBRUARY','MARCH','APRIL','MAY','JUNE','JULY'\n                                             ,'AUGUST','SEPTEMBER','OCTOBER','NOVEMBER','DECEMBER'], axis=1)\n#Create groups of states, summing the values of accident number for each year..\nstate_grouped=state_year_month_df.groupby(['STATE\/UT']).sum()\n\n#Create % columns for noting the % of accidents happening in each state for each season..\nstate_grouped['%_SUMMER']=state_grouped['SUMMER']\/state_grouped['TOTAL']\nstate_grouped['%_AUTUMN']=state_grouped['AUTUMN']\/state_grouped['TOTAL']\nstate_grouped['%_WINTER']=state_grouped['WINTER']\/state_grouped['TOTAL']\nstate_grouped['%_SPRING']=state_grouped['SPRING']\/state_grouped['TOTAL']\n\ndisplay(state_grouped.iloc[:,1:].head())","876d0e82":"#Working on the over the day data...\nstate_year_time_df.rename(columns={'0-3 hrs. (Night)':'0-3',\n                              '3-6 hrs. (Night)':'3-6',\n                                '6-9 hrs (Day)':'6-9', '9-12 hrs (Day)':'9-12','12-15 hrs (Day)':'12-15','15-18 hrs (Day)':'15-18',\n                                  '18-21 hrs (Night)':'18-21','21-24 hrs (Night)':'21-24'}, inplace=True)\nstate_time_grouped=state_year_time_df.groupby(['STATE\/UT']).sum()\n\nstate_time_grouped['%_MORNING']=(state_time_grouped['6-9']+state_time_grouped['9-12'])\/state_time_grouped['Total']\nstate_time_grouped['%_AFTERNOON']=(state_time_grouped['12-15']+state_time_grouped['15-18'])\/state_time_grouped['Total']\nstate_time_grouped['%_EVENING']=(state_time_grouped['18-21']+state_time_grouped['21-24'])\/state_time_grouped['Total']\nstate_time_grouped['%_NIGHT']=(state_time_grouped['0-3']+state_time_grouped['3-6'])\/state_time_grouped['Total']\n\nstate_time_grouped=state_time_grouped.drop(state_time_grouped.columns[0:9], axis=1)\ndisplay(state_time_grouped.head())\n","c3914f27":"plt.figure(figsize=(15,5))\nax=plt.subplot(1,2,1)\nboxplot=state_grouped.boxplot(ax=ax,column=['%_SUMMER','%_WINTER','%_AUTUMN','%_SPRING'])\n\nax=plt.subplot(1,2,2)\nstate_grouped.loc[:,'SUMMER':'SPRING'].sum(axis=0).plot.pie(title='Seasonal distribution of all accidents in India(2001-14)',autopct='%1.1f%%')\n","38687320":"plt.figure(figsize=(20,5))\nplt.subplot(141)\nsummer_sorted=state_grouped.sort_values('%_SUMMER')\nsummer_sorted['%_SUMMER'].tail(5).plot.bar(title='Highest Summer Accidents')\nplt.subplot(142)\nwinter_sorted=state_grouped.sort_values('%_WINTER')\nwinter_sorted['%_WINTER'].tail(5).plot.bar(title='Highest Winter Accidents')\nplt.subplot(143)\nautumn_sorted=state_grouped.sort_values('%_AUTUMN')\nautumn_sorted['%_AUTUMN'].tail(5).plot.bar(title='Highest Autumn Accidents')\nplt.subplot(144)\nspring_sorted=state_grouped.sort_values('%_SPRING')\nspring_sorted['%_SPRING'].tail(5).plot.bar(title='Highest Spring Accidents')\n","239278d0":"highest_accident_states=state_grouped.sort_values('TOTAL', ascending=False)\nhigh_states=list(highest_accident_states.head().index)\ndf4=state_year_month_df.loc[state_year_month_df['STATE\/UT'].isin(high_states),['STATE\/UT','YEAR','TOTAL']]\n\nplt.figure(figsize=(10,5))\nax=plt.subplot(111)\nfor key, grp in df4.groupby(['STATE\/UT']):\n    ax = grp.plot(ax=ax, kind='line', x='YEAR', y='TOTAL', label=key)\n  \nplt.show()\n","81af3b37":"highest_accident_states=state_grouped.sort_values('TOTAL', ascending=False)\nstate_list=list(highest_accident_states.head().index)\nprint(state_list)","dee7d72f":"\ndf=state_time_grouped.loc[state_time_grouped.index.isin(state_list)]\n\ndf_T=df.groupby('STATE\/UT').sum().drop(['Total'], axis=1).T.plot.pie(subplots=True, figsize=(20, 5),autopct='%1.1f%%')","523488d5":"## Break up accidents for all states over the time blocks:\n#state_time_grouped.info()\ndf2=state_time_grouped.sum(axis=0)\n\n\n\ndf2.drop(['Total']).T.plot.pie(title='All accidents 2001-2014',subplots=True, figsize=(5,5),autopct='%1.1f%%')\n\ndf2=state_time_grouped.sum(axis=0)","c3827964":"df3=state_year_time_df.groupby(['YEAR']).sum()\ndf3.loc[:,'Total'].plot(title='Accidents growth in India')","a538cb29":"#See the states with highest % accident in the every timeblock..\nplt.figure(figsize=(10,5))\nstate_time_grouped.sort_values('%_MORNING',ascending=False).head().loc[:,['STATE\/UT','%_MORNING']].plot(kind='bar', ax=plt.subplot(221), color='b')\nstate_time_grouped.sort_values('%_AFTERNOON',ascending=False).head().loc[:,['STATE\/UT','%_AFTERNOON']].plot(kind='bar', ax=plt.subplot(222),color='g')\nstate_time_grouped.sort_values('%_EVENING',ascending=False).head().loc[:,['STATE\/UT','%_EVENING']].plot(kind='bar', ax=plt.subplot(223),color='r')\nstate_time_grouped.sort_values('%_NIGHT',ascending=False).head().loc[:,['STATE\/UT','%_NIGHT']].plot(kind='bar', ax=plt.subplot(224),color='y')\n","ce02885f":"#Create a new dataframe - period_performance.\nperiod_performance=pd.DataFrame(columns=['STATE\/UT','%_CHANGE_2001_TO_2014'])\n\n#Take one state name at a time,\nfor state in state_names:\n    #print(state)\n    total_2001=state_year_month_df.loc[(state_year_month_df['STATE\/UT']==state) & (state_year_month_df['YEAR']==2001), 'TOTAL']\n    total_2014=state_year_month_df.loc[(state_year_month_df['STATE\/UT']==state) & (state_year_month_df['YEAR']==2014), 'TOTAL']\n    value_2001=total_2001.iloc[0]\n    value_2014=total_2014.iloc[0]\n    change_in_percent= (value_2014-value_2001)*100\/value_2001\n   \n    new_data=pd.Series({'STATE\/UT':state, '%_CHANGE_2001_TO_2014':change_in_percent})\n    period_performance=period_performance.append(new_data, ignore_index=True)","e9033abf":"best_performing=period_performance.sort_values('%_CHANGE_2001_TO_2014')\n#print(best_performing.head())\nax=best_performing.plot(kind='bar').set_xticklabels(best_performing['STATE\/UT'])\n","df76a189":"# Analysis of road accident patterns in India from 2001 to 2014 in different states","887d9bf5":"## States with highest % accidents in different timeblocks","1ecae8e0":"## Feature Engineering","abb95892":"We can see that data is in a long format, ie the breakup of accidents in each state is given as separate rows, rathern than including separate columns for each year.","1cd1052d":"One observation: Kerala has high afternoon accidents, but low night time accidents. Other than that, we dont see any other interesting patterns.","d75f1fdf":"In this notebook, we are analysing the pattern of road accidents in India. The data covers the period from year 2001 through 2014. We have worked on publicly available data. The workbook is open for further improvement with data from other sources.\nCredibility of data is not ascertained.","47da739a":"#### States with highest accident numbers: How are accidents distributed over the day?","2d0d2c41":"The accidents are always growing since 2001, but the rate of growth has declined in recent years. Good news!!","be8a8da9":"we can see something unusual for Tamilnadu in year 2005. Lets not dig deeper, but applaud other states, which have improved over years.","3166e27a":"#### <i> Feature engineering 1: Clubbing month columns into seasons<\/I>\nOur data contains breakup of accident figures for every state and every month, since 2001 till 2014. We considered, clubbing monthly data to seasonal data, as monthly details is not required.","07186384":"## How has accidents in the country has grown over years ","9d41f5ed":"## Yearly progress of states with highest accidents","1be6b480":"#### <I> Over the day accident breakup : Merge columns into categories - 'Night', 'Day', 'Afternoon', 'Evening'<\/I>","bdafb807":"### First, lets see the seasonal distribution of accidents over the years, and for all the states taken together","b1059b28":"Interpretation: For all the states, and for all the years, we can see the afternoon accidents occupy major portion, followed by morning, and closely followed by evening.","2414f745":"## Special Note: Please give your feedback and suggestions. Thank you.","44c988f2":"## Working on over the day accident data..","da6cc602":"INTERPRETATION: \n\nFrom the boxplot it is evident that the median % of accidents is slightly high for winter and spring. Moreover, summer and spring are having more even distribution of accidents %. Outliers are high for summer.\n\nSecond plot(Pie plot) gives a general impression that accidents are nearly uniform over the seasons.","f3937b3c":"#### Which are the states having highest number of accidents?","b4a32054":"What we can interpret:\n      For summer, the smaller states occupy the major positions. Same is for winter and autumn. For winter and autumn, Lakshadweep has high % of accidents. But , we can not make any interpretation as the overall number of accidents in Lakshwadeep is low. Some anomaly may be there. States with highesst spring time accidents share are almost at par.\n     \n    ","d0dc037d":"## <U> Digging into the data to find patterns <\/U>","c326ba48":"#### Lets find out the states with highest percentage accidents in different seasons\n\nEach plot depicts a season with the states with highest % of accidents in that season. ","719bb988":"We can see from the above list that the states - Delhi, Dadra & Nagar Haveli has appeared with multiple names. So, we will make their names uniform.","76237594":"#### Getting the data from the files","7da4fb34":"## Checking performance of states from 2001 to 2014","9fac8a75":"Interpretation: A few states\/UTs have shown decrease in number of accidents. But, most of these states are smaller.\nJharkhand, Assam and Punjab on the other hand are leading the states with high % increase of accidents from 2001 to 2014.","6967a405":"## Now, lets see the over the day distribution of all the accidents in India"}}