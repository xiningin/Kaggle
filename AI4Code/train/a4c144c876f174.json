{"cell_type":{"db3c5c85":"code","83e86928":"code","9ea8770a":"code","d4b8a689":"code","8ded7e78":"code","992c6a58":"code","993b8bd0":"code","899b0d93":"code","d2306bde":"code","f849b2b0":"code","fe7a7c71":"code","ebe213e8":"code","1f405c69":"code","441e16dc":"code","4717a80f":"code","05fd6027":"code","f0be73e1":"code","ea3d3b62":"code","1d5d0c57":"code","bc6ddba0":"code","f7c9c23c":"code","b7aa4809":"markdown","9cb4975a":"markdown","f7db571a":"markdown","3affb84f":"markdown","fd1f355b":"markdown","213f936d":"markdown","adcdd725":"markdown","dededeb4":"markdown","9a0c1ab3":"markdown","d7a0e259":"markdown","9fac2497":"markdown","c55d7558":"markdown"},"source":{"db3c5c85":"# This Python 3 environment comes with many helpful analytics libraries installed\n# It is defined by the kaggle\/python Docker image: https:\/\/github.com\/kaggle\/docker-python\n# For example, here's several helpful packages to load\n\nimport numpy as np # linear algebra\nimport pandas as pd # data processing, CSV file I\/O (e.g. pd.read_csv)\n\n# Input data files are available in the read-only \"..\/input\/\" directory\n# For example, running this (by clicking run or pressing Shift+Enter) will list all files under the input directory\n\nimport os\nfor dirname, _, filenames in os.walk('\/kaggle\/input'):\n    for filename in filenames:\n        print(os.path.join(dirname, filename))\n\n# You can write up to 20GB to the current directory (\/kaggle\/working\/) that gets preserved as output when you create a version using \"Save & Run All\" \n# You can also write temporary files to \/kaggle\/temp\/, but they won't be saved outside of the current session","83e86928":"import pandas as pd\nimport matplotlib.pyplot as plt \nfrom matplotlib.ticker import FuncFormatter\nimport numpy as np\nimport seaborn as sns\nimport wordcloud","9ea8770a":"data = pd.read_csv(\"..\/input\/restaurant-business-rankings-2020\/Future50.csv\")\ndata.dtypes","d4b8a689":"data.head()","8ded7e78":"plt.figure(figsize=(10, 7))\nplt.bar(data.loc[:, \"Restaurant\"], data.loc[:, \"Sales\"])\nplt.xlabel(\"Restaurant\"\n          ,fontsize=18)\nplt.ylabel(\"Sales\"\n          ,fontsize=18)\nplt.xticks(rotation=\"vertical\"\n         ,fontsize=12)\nplt.yticks(fontsize=12)\nplt.title(\"2020 Restaurant's Sales\")\n\nplt.hlines(20, -1, 50, color=\"r\", linestyles=\"--\", linewidth=3, label=\"Sale = 20\")\nplt.hlines(50, -1, 50, color=\"greenyellow\", linestyles=\"--\", linewidth=3, label=\"Sale = 50\")\nplt.legend(loc=\"upper center\"\n          ,fontsize=20)\n\nplt.show()","992c6a58":"# \"YOY_Sales\"\u3001\"YOY_Units\": object -> float\ndata.loc[:, \"New_YOY_Sales\"] = data.loc[:, \"YOY_Sales\"].map(lambda x: x.split(\"%\")[0]).astype(float)\ndata.loc[:, \"New_YOY_Units\"] = data.loc[:, \"YOY_Units\"].map(lambda x: x.split(\"%\")[0]).astype(float)\n\n# \"Location\" -> \"Region\" + \"City\"\ndata.loc[:, \"City\"] = data.loc[:, \"Location\"].map(lambda x: x.split(\",\")[0])\ndata.loc[:, \"Region\"] = data.loc[:, \"Location\"].map(lambda x: x.split(\",\")[1])","993b8bd0":"data.loc[:, \"Region\"].unique()","899b0d93":"# Remove the spaces in string in data.loc[:, \"Region\"]\ndata.loc[:, \"Region\"] = data.loc[:, \"Region\"].map(lambda x: x.strip())\ndata.loc[:, \"Region\"].unique()","d2306bde":"data.head()","f849b2b0":"plt.figure(figsize=(10, 7))\nplt.bar(data.loc[:, \"Restaurant\"], data.loc[:, \"New_YOY_Sales\"])\n\n# \u8bbe\u7f6e\u8f74\u6807\u7b7e\u3001\u8f74\u523b\u5ea6\nplt.xlabel(\"Restaurant\"\n          ,fontsize=18)\nplt.ylabel(\"YOY_Sales\"\n          ,fontsize=18)\nplt.xticks(rotation=\"vertical\"\n          ,fontsize=12)\nplt.yticks(fontsize=12)\nplt.title(\"2020 Restaurant's YOY_Sales\"\n         ,fontsize=20)\n\ndef to_percent(temp, position):\n    return \"%.1f\" % temp + \"%\"\nplt.gca().yaxis.set_major_formatter(FuncFormatter(to_percent))\n\n\n# \u7ed8\u5236\u6c34\u5e73\u7ebf\nplt.hlines(40, -1 ,50, color=\"r\", linestyles=\"--\", linewidth=3, label=\"YOY_Sales=40%\")\nplt.legend(loc=\"upper center\"\n          ,fontsize=16)\nplt.show()","fe7a7c71":"region_ = data.groupby([\"Region\"]).sum()\nregion_.reset_index(inplace=True)\nregion_.head()","ebe213e8":"plt.figure(figsize=(10, 7))\nplt.bar(region_.loc[:, \"Region\"], region_.loc[:, \"Sales\"])\n\nplt.xlabel(\"Region\"\n          ,fontsize=18)\nplt.ylabel(\"Sales\"\n          ,fontsize=18)\nplt.xticks(rotation=\"vertical\"\n          ,fontsize=12)\nplt.yticks(fontsize=12)\nplt.title(\"2020 Region's Sales\"\n         ,fontsize=20)\n\nplt.show()","1f405c69":"# To count the number of restaurant in every region\nregion__ = data.groupby(\"Region\")[\"Restaurant\"].count()\nregion__ = pd.DataFrame(region__)","441e16dc":"plt.figure(figsize=(10, 7))\nplt.bar(region__.index, region__.loc[:, \"Restaurant\"])\nplt.xlabel(\"Region\"\n          ,fontsize=18)\nplt.ylabel(\"The Number of Restaurant\"\n          ,fontsize=18)\nplt.xticks(rotation=\"vertical\"\n           ,fontsize=12)\nplt.yticks(fontsize=12)\nplt.title(\"The Number of Restaurant in Each Region\"\n         ,fontsize=20)\n\nplt.show()","4717a80f":"data.head()","05fd6027":"plt.figure(figsize=(10, 7))\nsns.set(context=\"notebook\"\n       ,style=\"darkgrid\")\n\n# \u7ed8\u5236\u6563\u70b9\u56fe\nsns.scatterplot(data.loc[:, \"New_YOY_Units\"], data.loc[:, \"New_YOY_Sales\"]\n               ,hue=data.loc[:, \"Franchising\"])\n\n# \u8bbe\u7f6e\u8f74\u5750\u6807\u3001\u8f74\u523b\u5ea6\nplt.xlabel(\"YOY_Units\"\n          ,fontsize=18)\nplt.ylabel(\"YOY_Sales\"\n          ,fontsize=18)\nplt.xticks(fontsize=15)\nplt.yticks(fontsize=15)\n\ndef to_percent(temp, position):\n    return \"%.1f\" % temp + \"%\"\nplt.gca().xaxis.set_major_formatter(FuncFormatter(to_percent))\nplt.gca().yaxis.set_major_formatter(FuncFormatter(to_percent))\n\nplt.legend(fontsize=18)\nplt.show()","f0be73e1":"counts_ = []\ncategories_ = []\nfor x in data.loc[:, \"Franchising\"].unique():\n    mask = (data.loc[:, \"Franchising\"] == x)\n    counts_.append(data.loc[mask, \"Restaurant\"].count())\n    categories_.append(x)","ea3d3b62":"plt.figure(figsize=(10, 7))\npatches, l_text, p_text = plt.pie(x=counts_, labels=categories_\n                                  ,autopct=\"%0.1f%%\", radius=1\n                                  ,pctdistance=0.6, labeldistance=1.1)\nfor t in l_text:\n    t.set_size(18)\nfor t in p_text:\n    t.set_size(18)\n    \nplt.title(\"Franchising vs. Not Franchising\"\n         ,fontsize=20)\nplt.show()","1d5d0c57":"franchising_ = pd.DataFrame(data.groupby(\"Franchising\")[\"Sales\"].sum())\nfranchising_.head()","bc6ddba0":"plt.figure(figsize=(10, 7))\nplt.bar(franchising_.index, franchising_.loc[:, \"Sales\"])\n\nplt.xlabel(\"Franchising\"\n          ,fontsize=18)\nplt.ylabel(\"Sales\"\n          ,fontsize=18)\nplt.xticks(fontsize=18)\nplt.yticks(fontsize=18)\nplt.title(\"\")\nplt.show()","f7c9c23c":"words = \"\"\nfor x in data.loc[:, \"Restaurant\"]:\n    words += x + \" \"\n\nw = wordcloud.WordCloud()\nw.generate(words)\n\nplt.figure(figsize=(10, 7))\nplt.imshow(w, interpolation=\"gaussian\")\nplt.axis(\"off\")\n\nplt.show()","b7aa4809":"# 1. 2020 Restaurant's Sales","9cb4975a":"# 3. 2020 Restaurant's YOY_Sales","f7db571a":"We can find that: Calif. > N.Y. > Texas\n\nThen try to find why the sales in Calif. is the highest.","3affb84f":"# 7. Display key restaurant by wordcloud","fd1f355b":"From above output, we can see that there are 'Calif.' and '   Calif.'\nWe need to remove blank in string.","213f936d":"# 6. Franchising vs. Not Franchising","adcdd725":"# 4. 2020 Region's Sales","dededeb4":"# 2. Data Cleaning\n1. Seperate the column, make the data in Location to City and Region, so we can find that which Region in America has most Sales.\n2. If we directly groupby Region might find that there are two Calif. in the result but actually we only need one. Then we soon find out that there are spaces in front of Calif., so we need to fix it.","9a0c1ab3":"From above picture, we can see that all of the restaurants' sales between 20 ~ 50.","d7a0e259":"Due to Covid-19, most of restaurant's YOY_Sales are below 40%.","9fac2497":"# 5. Relation between YOY_Sales and YOY_Units","c55d7558":"So, we can see that there are 10 restaurants in Calif. Only 4 in Ohio. This is why the Sales in Calif. is the highest."}}