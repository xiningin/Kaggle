{"cell_type":{"791d6485":"code","c305af83":"code","dc9bf9bf":"code","6a269808":"code","ea67f56a":"code","6efd4373":"code","ed755f14":"code","d1794abe":"code","77d4abb0":"code","d6144ee0":"code","f3f3eba2":"code","2cfb3783":"code","f53d1dde":"code","de9e6361":"code","78c67ed9":"code","e985fdf6":"code","7f8e3cfe":"code","fb6d8492":"code","bae618b6":"code","10ecdd67":"code","2711617e":"code","bc46b747":"code","ca4d7796":"code","e2a362d6":"code","0260326b":"code","28b272a0":"code","38c04ae8":"code","b03c1c17":"code","96ab9bbb":"markdown","f4cf21ec":"markdown","11ae92b2":"markdown","4279bcea":"markdown","ce3a503d":"markdown","16d1e160":"markdown","564c5ae9":"markdown","77612f63":"markdown","bd0aba58":"markdown","479d3717":"markdown","061603ec":"markdown","48f2b852":"markdown","cae15f97":"markdown","d8124133":"markdown"},"source":{"791d6485":"# storing & analysis\nimport pandas as pd\nimport numpy as np\nimport ppscore as pps # pip install ppscore\n\n# visualization\nimport matplotlib.pyplot as plt\nimport plotly.express as px\nimport plotly.graph_objs as go\nimport plotly.figure_factory as ff\nimport matplotlib.pyplot as plt\n%matplotlib inline\nimport seaborn as sns\nsns.set()\n\n# hide warnings\nimport warnings\nwarnings.filterwarnings('ignore')","c305af83":"# Loading the dataset\ndf = pd.read_csv(\"..\/input\/adeconvid19\/train.csv\")\ndf.head()","dc9bf9bf":"df.shape","6a269808":"df.columns","ea67f56a":"df.describe()","6efd4373":"df.nunique()","ed755f14":"df.isnull().sum()","d1794abe":"df['Date'].unique()","77d4abb0":"df['Country_Region'].unique()","d6144ee0":"# Predictive Power Score\ndf1 = df.drop(['Id'], axis=1)\ntest_data = pps.matrix(df1)\nsns.heatmap(test_data, vmin=0, vmax=1, cmap=\"Blues\", linewidths=0.5, annot=True)","f3f3eba2":"# Cases Over Time\ntemp1 = df.groupby('Date')['ConfirmedCases','Fatalities'].sum().reset_index()\ntemp1 = temp1.melt(id_vars=\"Date\", value_vars=['ConfirmedCases','Fatalities'],\n                 var_name='Case', value_name='Count')\ntemp1.head()\n\n\nfig = px.area(temp1, x=\"Date\", y=\"Count\", color='Case',\n             title='Cases over time')\nfig.update_layout(margin=dict(t=80,l=0,r=0,b=0))\nfig","2cfb3783":"# Mortality Rate Over Time\ntemp2 = df.groupby('Date').sum().reset_index()\n\ntemp2['No. of Deaths to 100 Confirmed Cases'] = round(temp2['Fatalities']\/temp2['ConfirmedCases'], 3)*100\n\ntemp2 = temp2.melt(id_vars='Date', value_vars=['No. of Deaths to 100 Confirmed Cases'],var_name='Ratio',\n                  value_name='Value')\n\nfig = px.line(temp2, x=\"Date\", y=\"Value\", color='Ratio', log_y=True, title='Mortality Rate Over The Time')\nfig.update_layout(legend=dict(orientation=\"h\", y=1, x=0, xanchor=\"left\", yanchor=\"top\"),\n                  margin=dict(t=80,l=0,r=0,b=0))\nfig","f53d1dde":"# ConfirmedCases & Fatalities Group by Latest Date\nlatest_date = df[df['Date'] == max(df['Date'])].reset_index()\nlatest_date.head()","de9e6361":"# ConfirmedCases & Fatalities Group by Country on the Latest Date\nCountry_latest_date = latest_date.groupby('Country_Region')['ConfirmedCases','Fatalities'].sum().reset_index()\nCountry_latest_date.head()","78c67ed9":"# Top 10 Countries proportion to the COVID-19 cases\ndata_cases = Country_latest_date.sort_values('ConfirmedCases', ascending=False).head(10)\nsizes = data_cases['ConfirmedCases']\nlabels = data_cases['Country_Region']\nexplode = [0.1,0,0,0,0,0,0,0,0,0.3]\n\nplt.figure(figsize = (7,7))\nplt.pie(sizes, labels=labels, explode=explode,autopct='%1.1f%%', shadow=True,startangle=90, radius=1, \n        labeldistance=1.1,pctdistance=0.7,frame=False)\n\nplt.axis('equal')\nplt.show()","e985fdf6":"# Top 20 Countries With the Highest Confirm Casses \nfig = px.bar(Country_latest_date.sort_values('ConfirmedCases', ascending=False).head(20).sort_values('ConfirmedCases', ascending=True), \n             x=\"ConfirmedCases\", y=\"Country_Region\", title='Confirmed Cases Per Country', text='ConfirmedCases',\n             orientation='h')\nfig.update_traces(textposition='outside')\nfig.update_layout(margin=dict(t=80,l=0,r=0,b=0))\nfig","7f8e3cfe":"# Top 20 Countries With the Highest Fatalities\nfig = px.bar(Country_latest_date.sort_values('Fatalities', ascending=False).head(20).sort_values('Fatalities', ascending=True), \n             x=\"Fatalities\", y=\"Country_Region\", title='Fatalities Per Country', text='Fatalities',\n             orientation='h')\nfig.update_traces(textposition='outside')\nfig.update_layout(margin=dict(t=80,l=0,r=0,b=0))\nfig","fb6d8492":"sns.pairplot(Country_latest_date.sort_values('ConfirmedCases', ascending=False).head(20).sort_values('ConfirmedCases', ascending=True),\n             hue='Country_Region', size=3);","bae618b6":"plt.figure(figsize=(25,25))\nsns.relplot(x=\"ConfirmedCases\",y=\"Fatalities\", hue='Country_Region',kind=\"line\", height=10,\n            data=df.sort_values('ConfirmedCases', ascending=False).head(500).sort_values('ConfirmedCases', ascending=True))","10ecdd67":"# Time-Series-Analysis for the Provinces of Each Country\ndf_grouped_date1 = df.groupby(['Country_Region','Date','Province_State'])['ConfirmedCases','Fatalities'].sum().reset_index()\ndf_grouped_date2 = df.groupby(['Country_Region','Province_State','Date'])['ConfirmedCases','Fatalities'].sum().reset_index()","2711617e":"\ndf_grouped_date3 = df.groupby(['Country_Region','Province_State'])['ConfirmedCases','Fatalities'].max().reset_index()\ndf_grouped_date3.head()\n\nfig = px.pie(df_grouped_date3.sort_values('ConfirmedCases', ascending=False), values='ConfirmedCases', names='Country_Region',\n             title='Infected rates across countries',\n              hover_data=['Province_State'], labels={'Province_State':'Province_State'})\nfig.update_traces(textposition='inside')\nfig.show()","bc46b747":"World_latest = latest_date[latest_date['Country_Region']!='US']\ndf_grouped_date4 = World_latest.groupby(['Country_Region','Province_State'])['ConfirmedCases','Fatalities'].max().reset_index()\ndf_grouped_date4.head()\n\nfig = px.pie(df_grouped_date4.sort_values('ConfirmedCases', ascending=False), values='ConfirmedCases', names='Country_Region',\n             title='Infected rates Across Countries',\n              hover_data=['Province_State'], labels={'Province_State':'Province_State'})\nfig.update_traces(textposition='inside')\nfig.show()","ca4d7796":"US_latest = latest_date[latest_date['Country_Region']=='US']\nUS_latest.head()\nUS_latest_grouped = US_latest.groupby('Province_State')['ConfirmedCases','Fatalities'].sum().reset_index()\nUS_latest_grouped.head()","e2a362d6":"# Infected Rate Across the States of US\nfig = px.pie(US_latest_grouped.sort_values('ConfirmedCases', ascending=False), values='ConfirmedCases', names='Province_State',\n             title='Infected rates across Province State of US')\nfig.update_traces(textposition='inside')\nfig.show()","0260326b":"# Fatality Rate Across the States of US\nfig = px.pie(US_latest_grouped.sort_values('Fatalities', ascending=False), values='Fatalities', names='Province_State',\n             title='Fatality rates across Province State of US')\nfig.update_traces(textposition='inside')\nfig.show()","28b272a0":"China_latest = latest_date[latest_date['Country_Region']=='China']\nChina_latest.head()\nChina_latest_grouped = China_latest.groupby('Province_State')['ConfirmedCases','Fatalities'].sum().reset_index()\nChina_latest_grouped.head()\n\n# Infected Rate Across the States of US\nfig = px.pie(China_latest_grouped.sort_values('ConfirmedCases', ascending=False), values='ConfirmedCases', names='Province_State',\n             title='Infected rates across Province State of China')\nfig.update_traces(textposition='inside')\nfig.show()","38c04ae8":"US_df = df.groupby(['Date', 'Country_Region'])['ConfirmedCases','Fatalities'].max().reset_index()\n\ntemp4 = US_df[US_df['Country_Region']=='US'].reset_index()\ntemp4 = temp4.melt(id_vars='Date', value_vars=['ConfirmedCases','Fatalities'],\n                var_name='Case', value_name='Count')\nfig = px.bar(temp4, x=\"Date\", y=\"Count\", color='Case', facet_col=\"Case\",\n            title='US Cases Over Time')\nfig.update_layout(margin=dict(t=80,l=0,r=0,b=0))\nfig","b03c1c17":"China_df = df.groupby(['Date', 'Country_Region'])['ConfirmedCases','Fatalities'].max().reset_index()\n\ntemp5 = China_df[China_df['Country_Region']=='China'].reset_index()\ntemp5 = temp5.melt(id_vars='Date', value_vars=['ConfirmedCases','Fatalities'],\n                var_name='Case', value_name='Count')\nfig = px.bar(temp5, x=\"Date\", y=\"Count\", color='Case', facet_col=\"Case\",\n            title='China Cases Over Time')\nfig.update_layout(margin=dict(t=80,l=0,r=0,b=0))\nfig","96ab9bbb":"Task 1 & Task 2 are both accomodated in this Notebook","f4cf21ec":"* Major Propotion of Cases are in New York around 34.4% but Many Province States are affected by the COVID-19 Cases in US","11ae92b2":"* Slope of ConfirmedCases is still linearly increasing in US \n* Slope of Fatalities rate is increasing with the decreasing rate\n\n**Observation:**\n\nWhile a steady growth in the virus spread can be observed in US, a rapid increase in number of cases within the past few days can be seen in some other countries.","4279bcea":"# Cases & Fatalities Across the Countries","ce3a503d":"# Infected Rate Across the Countries (in their local Epicenter)","16d1e160":"The following trend shows the motality rate across the countres with the highest ConfirmedCases and Fatalitites","564c5ae9":"* Slope of ConfirmedCases is nearly flat in the China \n* Slope of Fatalities rate is Stable and not increasing anymore in China\n\n**Observation:**\n\nThe growth in the virus spread can be observed in China has come to a halt as it cab been from the dataset, the number cases in the month of March remains same.","77612f63":"* Most of the cases were saturated **(81.7)** in single Province State of Hubei in China unlike US.","bd0aba58":"* Null values are only to be found in the Province_State collumn","479d3717":"# Exploratory Data Analysis","061603ec":"# Time-Series-Analysis of ConfirmedCases & Fatalities","48f2b852":"* Correlation only defined for numeric columns, so Predictive Power Score is used to establish more meaningingful relation between the dataset features\n* Fatalities is a strong predictor for the ConfirmedCases (0.57 PPS). However ConfirmedCases only predicts the Fatalities with a PPS of 0.4","cae15f97":"* Timespan of the dataset is from the Month of January to March","d8124133":" # Motality Rate Trend Across the Countries"}}