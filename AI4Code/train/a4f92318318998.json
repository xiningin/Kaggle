{"cell_type":{"04e999cb":"code","cef4224a":"code","67030098":"code","045483c5":"code","a6e966e0":"code","1ed3a19d":"code","5b1e3678":"code","e92da090":"code","9073c195":"markdown","2b1b4ced":"markdown","d729f90c":"markdown","dbe3d831":"markdown","debbe626":"markdown","63f9c3eb":"markdown","71d8780f":"markdown"},"source":{"04e999cb":"import numpy as np \nimport pandas as pd \nimport subprocess\nimport glob\nimport os\nfrom pathlib import Path\nimport shutil\nfrom zipfile import ZipFile","cef4224a":"! tar xvf ..\/input\/ffmpeg-static-build\/ffmpeg-git-amd64-static.tar.xz","67030098":"output_format = 'mp3'  # can also use aac, wav, etc\n\noutput_dir = Path(f\"{output_format}s\")\nPath(output_dir).mkdir(exist_ok=True, parents=True)","045483c5":"list_of_files = glob.glob('..\/input\/deepfake-detection-challenge\/train_sample_videos\/*.mp4') ","a6e966e0":"for file in list_of_files:\n    command = f\"..\/working\/ffmpeg-git-20191209-amd64-static\/ffmpeg -i {file} -ab 192000 -ac 2 -ar 44100 -vn {output_dir\/file[-14:-4]}.{output_format}\"\n    subprocess.call(command, shell=True)","1ed3a19d":"with ZipFile(f'all_{output_format}s.zip', 'w') as zipObj:\n   # Iterate over all the files in directory\n   for folderName, subfolders, filenames in os.walk(f'.\/{output_format}s\/'):\n       for filename in filenames:\n           #create complete filepath of file in directory\n           filePath = os.path.join(folderName, filename)\n           # Add file to zip\n           zipObj.write(filePath)","5b1e3678":"# Remove FFMPEG directory from output\nshutil.rmtree(\"..\/working\/ffmpeg-git-20191209-amd64-static\")\n# Remove directory of output files\nshutil.rmtree(f'.\/{output_format}s\/')","e92da090":"os.listdir()","9073c195":"### Create ZIP file","2b1b4ced":"### Specify output format and create a directory for the output Audio files\nFor 400 mp3 files, the directory is approx 94 MB.<br>\nFor 400 wav files, the directory is approx 673 MB.","d729f90c":"#### Cleanup","dbe3d831":"### Get the list of videos to extract audio from","debbe626":"# This notebook enables the extraction of audio from the video files without internet.\n\nIf you find it useful, please upvote. Any suggestions to improve the code are welcome.\n","63f9c3eb":"Using the Static Build of ffmpeg from https:\/\/johnvansickle.com\/ffmpeg\/ because internet is not available. <br>\nThe public data set can be found here:\nhttps:\/\/www.kaggle.com\/rakibilly\/ffmpeg-static-build\n","71d8780f":"### Extract the audio from files"}}