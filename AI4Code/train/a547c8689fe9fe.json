{"cell_type":{"18ccc89d":"code","347519e5":"code","fc0a0a77":"code","b12eae61":"code","89e5ee34":"code","3aae785a":"code","bd6f037e":"code","10002917":"code","61e1bee1":"code","8626f824":"code","df0bf862":"code","b0e4d0b1":"code","b0f40f57":"code","8ef6f037":"code","82fd6955":"code","54cf110b":"code","c2939bae":"code","b8eb7c43":"code","5b422c4b":"code","4723a963":"code","3b611975":"code","2c0b555c":"code","6304bb60":"code","bd765c0d":"code","1554d8ec":"code","c37e5076":"code","11db4267":"code","1bd152b8":"code","de00a36a":"code","b94ee629":"code","9733d665":"code","3ab82cbc":"code","0b7d7c44":"code","eda007a8":"code","fc56bd9b":"code","77417974":"code","eb1ef4b8":"code","62ac425d":"code","a6540949":"code","17246a64":"code","b8a39021":"code","ccc1968d":"code","571caddb":"code","263cfe4d":"code","be9ee44f":"markdown","eb6cb9c7":"markdown","b7338788":"markdown","151ca052":"markdown","fef6f784":"markdown","dd4ba3fe":"markdown","d52b3211":"markdown","475bf9a1":"markdown","5d798b87":"markdown","f5614942":"markdown","9a285f28":"markdown"},"source":{"18ccc89d":"import pandas as pd\nimport numpy as np\nimport matplotlib.pyplot as plt\n%matplotlib inline","347519e5":"ri = pd.read_csv('..\/input\/stanford-open-policing\/police.csv')","fc0a0a77":"ri.head()","b12eae61":"ri.shape","89e5ee34":"ri.isnull().sum()","3aae785a":"#Remove the column that only contains missing values\nri.drop('county_name', axis='columns', inplace = True)","bd6f037e":"ri.shape","10002917":"ri.columns","61e1bee1":"# when someone is stopped for speeding, how often is it a man or woman?\nri[ri.violation == 'Speeding'].driver_gender.value_counts(normalize = True)","8626f824":"# when a man is pulled over, how often is it for speeding?\nri[ri.driver_gender == 'M'].violation.value_counts(normalize = True)","df0bf862":"# when a woman is pulled over, how often is it for speeding?\nri[ri.driver_gender == 'F'].violation.value_counts(normalize = True)","b0e4d0b1":"# combines the two lines above\nri.groupby('driver_gender').violation.value_counts(normalize=True)","b0f40f57":"ri.groupby(['violation','driver_gender']).search_conducted.mean()","8ef6f037":"ri.isnull().sum()","82fd6955":"ri.search_conducted.value_counts()","54cf110b":"## value_counts ignores missing values by default\nri[ri.search_conducted == False].search_type.value_counts(dropna=False)","c2939bae":"# when search_conducted is True, search_type is never missing\nri[ri.search_conducted == True].search_type.value_counts(dropna=False)","b8eb7c43":"ri[ri.search_conducted == True].search_type.isnull().sum()","5b422c4b":"ri['frisk'] = ri.search_type.str.contains('Protective Frisk')","4723a963":"ri.frisk.value_counts(dropna = False)","3b611975":"ri.frisk.mean()","2c0b555c":"ri.stop_date.str.slice(0, 4).value_counts()","6304bb60":"combined = ri.stop_date.str.cat(ri.stop_time, sep = ' ')","bd765c0d":"ri['stop_datetime'] = pd.to_datetime(combined)","1554d8ec":"ri.stop_datetime.dt.year.value_counts().sort_values().index[0]","c37e5076":"ri.drugs_related_stop.dtype","11db4267":"ri.groupby(ri.stop_datetime.dt.hour).drugs_related_stop.mean()","1bd152b8":"ri.groupby(ri.stop_datetime.dt.hour).drugs_related_stop.mean().plot()","de00a36a":"ri.groupby(ri.stop_datetime.dt.hour).drugs_related_stop.sum().plot()","b94ee629":"ri.stop_datetime.dt.hour.value_counts()","9733d665":"ri.stop_datetime.dt.hour.value_counts().plot()","3ab82cbc":"ri.stop_datetime.dt.hour.value_counts().sort_index().plot()","0b7d7c44":"# another method\nri.groupby(ri.stop_datetime.dt.hour).stop_date.count().plot()","eda007a8":"ri.stop_duration.value_counts()","fc56bd9b":"# what two things are still wrong with this code?\nri[(ri.stop_duration == '1')| (ri.stop_duration == '2')].stop_duration = 'NaN'","77417974":"ri.stop_duration.value_counts()","eb1ef4b8":"ri.stop_duration.value_counts(dropna=False)","62ac425d":"ri.loc[ri.stop_duration == 'NaN', 'stop_duration'] = np.nan","a6540949":"ri.stop_duration.value_counts(dropna=False)","17246a64":"# another method\nri.stop_duration.replace(['1', '2'], value=np.nan, inplace=True)","b8a39021":"# make sure you create this column\nmapping = {'0-15 Min':8, '16-30 Min':23, '30+ Min':45}\nri['stop_minutes'] = ri.stop_duration.map(mapping)","ccc1968d":"ri.stop_minutes.value_counts()","571caddb":"ri.groupby('violation_raw').stop_minutes.mean()","263cfe4d":"ri.groupby('violation_raw').stop_minutes.agg(['mean', 'count'])","be9ee44f":"# 2. Do men or women speed more often?\n\n","eb6cb9c7":"# 5. During a search, how often is the driver frisked? \n","b7338788":"# Dataset: Stanford Open Policing Project","151ca052":"# 8. Do most stops occur at night?","fef6f784":"# 9. Find the bad data in the stop_duration column and fix it","dd4ba3fe":"# 3. Does gender affect who gets searched during a stop?","d52b3211":"\n# 4. Why is search_type missing so often? \n","475bf9a1":"ri.dtypes","5d798b87":"# 10. What is the mean stop_duration for each violation_raw?","f5614942":"# 6. Which year had the least number of stops?","9a285f28":"# 7. How does drug activity change by time of day? "}}