{"cell_type":{"0f376e92":"code","99c34145":"code","67ab56bb":"code","c091536d":"code","050bc589":"code","d109e3a6":"code","2747e8be":"code","b4b80d18":"code","6762ac75":"code","c9f559ac":"code","478ead07":"code","c125c119":"code","77025cd8":"code","31c8fccc":"code","3accdb87":"code","55eaae92":"code","0845f0da":"code","c8381fc7":"code","8dbb6b83":"code","4d8a2d3f":"code","854901e5":"code","1810f443":"code","bdeeaad2":"code","5932ef7b":"code","4af7aa6f":"code","a50f3e51":"code","2ba7f91c":"code","b01826f4":"code","943683f1":"code","28dd588d":"code","a1f81c2a":"code","74565a5d":"code","3606d665":"code","97392eef":"code","63739d5c":"code","a3b82fd2":"code","2ef58f53":"code","804a9336":"code","063ef453":"code","cee90565":"code","7a327625":"code","c1222906":"code","ac36fd0c":"code","68862857":"code","439a8d0c":"code","bdd1a551":"code","2ada5374":"code","e9f484c2":"code","1775a368":"code","3fab86e9":"code","57b601a0":"code","1956bb27":"code","08128823":"code","3d7add53":"code","1ac888cd":"code","30fd9044":"code","f848703a":"code","3595a7b7":"code","83e79d38":"code","5961f9af":"code","ec7c06f2":"code","156bd746":"code","71aac6da":"code","330d28cc":"code","955edfb5":"code","5cc6b467":"code","987b6dd0":"code","1acd7e7c":"code","6c5865cc":"code","9e5ac43e":"code","768eaaad":"code","6b47e0c8":"code","baed7dbd":"code","5e92c88e":"code","4cb5c6bb":"code","315c0bc7":"code","f3d3dc40":"code","561fd7ce":"code","eb6bd2c0":"code","1ffffbb1":"code","c3c7fc3c":"code","dc50fdab":"code","054d3af1":"code","895d6b64":"code","244bfc23":"code","0efd2f34":"code","d4b49336":"code","9668f2e0":"code","c84cbb00":"code","fea89dbb":"code","87198cc6":"code","4cfdc83a":"code","92345454":"code","ebdb7b6b":"markdown","4ee666e4":"markdown","65efe263":"markdown","473708cb":"markdown","0d86c410":"markdown","af9e1bfe":"markdown","1eeb13c2":"markdown","29ef1658":"markdown","39ef712f":"markdown","7ec3e149":"markdown","00d5a248":"markdown","bbe51bb7":"markdown","d500a6bc":"markdown","03959239":"markdown","46cb6baf":"markdown","f22c85b4":"markdown"},"source":{"0f376e92":"import pandas as pd \nimport numpy as np \nimport seaborn as sns \nimport matplotlib.pyplot as plt\nimport os\nimport tensorflow as tf\nfrom tensorflow import keras\n","99c34145":"dados_df = pd.read_csv('..\/input\/absenteeism-at-company\/dados.csv')","67ab56bb":"dados_df","c091536d":"dados_df.info()","050bc589":"dados_df.isna()","d109e3a6":"sns.heatmap(dados_df.isnull());","2747e8be":"dados_df = dados_df.drop(['Reason for absence', 'Month of absence', 'Day of the week', 'Seasons', 'Hit target', 'Pet', 'Weight','Height', 'Body mass index'], axis=1)   ","b4b80d18":"dados_df['Absenteeism time in hours'] = dados_df['Absenteeism time in hours'].apply(lambda x: 1 if x > 0  else 0) ","6762ac75":"dados_df","c9f559ac":"dados_df.hist(bins= 30, figsize=(20,20), color = 'b');","478ead07":"dados_df.shape","c125c119":"missed = dados_df[dados_df['Absenteeism time in hours'] == 1] \nno_missed = dados_df[dados_df['Absenteeism time in hours'] == 0]","77025cd8":"###Em portugu\u00eas:\nprint('Total de de funcion\u00e1rios: ', len(dados_df))\nprint('N\u00famero de funcion\u00e1rios que faltaram ao trabalho: ', len(missed))\nprint('N\u00famero de funcion\u00e1rios que n\u00e3o faltaram ao trabalho: ', len(no_missed))\nprint('Porcentagem de funcion\u00e1rios que faltaram ao trabalho: ', (len(missed) \/ len(dados_df)) * 100)\nprint('Porcentagem de funcion\u00e1rios que n\u00e3o faltaram na empresa: ', (len(no_missed) \/ len(dados_df)) * 100)","31c8fccc":"###Em English:\nprint('Total employees: ', len(dados_df))\nprint('Number of employees who missed work: ', len(missed))\nprint('Number of employees who have not missed work: ', len(no_missed))\nprint('Percentage of employees who missed work: ', (len(missed) \/ len(dados_df)) * 100)\nprint('Percentage of employees who not missed work: ', (len(no_missed) \/ len(dados_df)) * 100)","3accdb87":"missed.describe()","55eaae92":"no_missed.describe()","0845f0da":"correlations = dados_df.corr()\nf, ax = plt.subplots(figsize = (20,20))\nsns.heatmap(correlations, annot=True)\ncorrelations.round(2);","c8381fc7":"plt.figure(figsize=[20,10])\nsns.countplot(x = 'Absenteeism time in hours', data=dados_df);","8dbb6b83":"plt.figure(figsize=[20,10])\nsns.countplot(x = 'Age', hue= 'Absenteeism time in hours', data=dados_df);","4d8a2d3f":"plt.figure(figsize=[20,20])\nplt.subplot(411)  \nsns.countplot(x = 'Son', hue = 'Absenteeism time in hours', data = dados_df)\nplt.subplot(412)  \nsns.countplot(x = 'Transportation expense', hue = 'Absenteeism time in hours', data = dados_df)\nplt.subplot(413)  \nsns.countplot(x = 'Distance from Residence to Work', hue = 'Absenteeism time in hours', data = dados_df)\nplt.subplot(414)  \nsns.countplot(x = 'Education', hue = 'Absenteeism time in hours', data = dados_df)\nplt.subplot(414)  \nsns.countplot(x = 'Disciplinary failure', hue = 'Absenteeism time in hours', data = dados_df);","854901e5":"plt.figure(figsize=[25,10])\nsns.kdeplot(no_missed['Distance from Residence to Work'], label = 'Funcion\u00e1rios que n\u00e3o faltam', shade = True, color = 'b')\nsns.kdeplot(missed['Distance from Residence to Work'], label = 'Funcion\u00e1rios que faltam', shade = True, color = 'r');","1810f443":"dados_analise = pd.read_csv('..\/input\/absenteeism-at-company\/dados.csv')","bdeeaad2":"dados_analise = dados_analise.drop(['Reason for absence', 'Month of absence', 'Day of the week', 'Seasons', 'Hit target', 'Pet', 'Weight', 'Height', 'Body mass index'], axis = 1) ","5932ef7b":"dados_analise","4af7aa6f":"eight_less = dados_analise.loc[dados_analise['Absenteeism time in hours'] < 8] # 63% Se ausentaram do trabalho o equivalente a menos de 8 horas;\n                                                                               # 63% were absent from work the equivalent of less than 8 hours;","a50f3e51":"eight_hours =  dados_analise.loc[dados_analise['Absenteeism time in hours'] == 8]      #  => Pessoas que se ausentaram pelo per\u00edodo de 8 horas, que seria o equivalente a 1 dias de trabalho;\n                                                                                       ## 208\/740*100 = 28% Se ausentaram do trabalho o equivalente a 8 horas de trabalho que seria relativo a um dia inteiro;    \n    \n                                                                                      # => People who were absent for a period of 8 hours, which would be equivalent to 1 working day;\n                                                                                       ## 208\/740*100 = 28% Absent from work the equivalent of 8 hours of work that would be related to a whole day;","2ba7f91c":"sixteen_hours = dados_analise.loc[dados_analise['Absenteeism time in hours'] == 16]  # 2,5% Se ausentaram do trabalho o equivalente a 16 horas de trabalho que seria relativo a dois dias inteiros;\n                                                                                     # 2.5% were absent from work the equivalent of 16 hours of work that would be related to two full days;","b01826f4":"twenty_four = dados_analise.loc[dados_analise['Absenteeism time in hours'] == 24] # 2,16% Se ausentaram do trabalho o equivalente a 24 horas de trabalho que seria relativo a tr\u00eas dias inteiros;\n                                                                                  # 2.16% were absent from work the equivalent of 24 hours of work that would be related to three full days;","943683f1":"thirty_two = dados_analise.loc[dados_analise['Absenteeism time in hours'] == 32]     # 0,81 Se ausentaram do trabalho o equivalente a 32 horas de trabalho que seria relativo a quatro dias inteiros;   \n                                                                                     # 0.81 Absent from work the equivalent of 32 hours of work that would be related to four full days;","28dd588d":"zero = dados_analise.loc[dados_analise['Absenteeism time in hours'] == 0] # 5,94% N\u00e3o se ausentaram do trabalho em nenhum momento no per\u00edodo de trabalho;   => um dado interessante quase todos tiveram alguma falta diciplinar; \n                                                                          # 5.94% were not absent from work at any time during the work period; => an interesting fact almost all had some disciplinary fault;","a1f81c2a":"obj = {'0 hour': ['5,94%'],'8 less': ['63%'],'8 hours': ['28%'],'16 hours': ['2,5%'],'24 hours': ['2,16%'],'32 hours': ['0,81%']}\ndf_porcent = pd.DataFrame(data=obj)\ndf_porcent","74565a5d":"X_cat = dados_df[['Transportation expense',\t'Distance from Residence to Work',\t'Age',\t'Disciplinary failure',\t'Education',\t'Son',\t'Social drinker']]","3606d665":"X_cat","97392eef":"from sklearn.preprocessing import OneHotEncoder\nonehotencoder = OneHotEncoder() ","63739d5c":"X_cat = onehotencoder.fit_transform(X_cat).toarray()","a3b82fd2":"X_cat.shape   ","2ef58f53":"type(X_cat)","804a9336":"X_cat = pd.DataFrame(X_cat)","063ef453":"type(X_cat)","cee90565":"X = X_cat","7a327625":"y = dados_df['Absenteeism time in hours']\ny","c1222906":"from sklearn.model_selection import train_test_split\ntrain_test_split","ac36fd0c":"X_train, X_test, y_train, y_test = train_test_split(X, y, test_size = 0.25)","68862857":"X_train.shape, y_train","439a8d0c":"X_test.shape, y_test","bdd1a551":"from sklearn.linear_model import LogisticRegression","2ada5374":"logistic = LogisticRegression()\nlogistic.fit(X_train, y_train) ","e9f484c2":"y_pred = logistic.predict(X_test)   \ny_pred","1775a368":"y_test ","3fab86e9":"from sklearn.metrics import accuracy_score","57b601a0":"accuracy_score(y_test, y_pred) # => \u00e9 um \u00f3timo valor para duas classes;","1956bb27":"from sklearn.metrics import confusion_matrix","08128823":"cm = confusion_matrix(y_test, y_pred)\ncm","3d7add53":"sns.heatmap(cm, annot=True);","1ac888cd":"from sklearn.metrics import precision_score, recall_score, f1_score, classification_report","30fd9044":"precision_score(y_test, y_pred) ","f848703a":"recall_score(y_test, y_pred) ","3595a7b7":"f1_score(y_test, y_pred, average='macro')    ","83e79d38":"print(classification_report(y_test, y_pred))","5961f9af":"from sklearn.ensemble import RandomForestClassifier  ","ec7c06f2":"forest = RandomForestClassifier()\nforest.fit(X_train, y_train)","156bd746":"y_pred = forest.predict(X_test)","71aac6da":"y_pred","330d28cc":"accuracy_score(y_test, y_pred)","955edfb5":"cm = confusion_matrix(y_pred, y_test)\ncm","5cc6b467":"sns.heatmap(cm, annot=True);","987b6dd0":"print(classification_report(y_test, y_pred))","1acd7e7c":"import tensorflow as tf\n\n","6c5865cc":"X_train.shape","9e5ac43e":"rede_neural = tf.keras.models.Sequential()  \n\nrede_neural.add(tf.keras.layers.Dense(units = 42, activation='relu', input_shape=(84,))) \nrede_neural.add(tf.keras.layers.Dense(units = 42, activation = 'relu')) \nrede_neural.add(tf.keras.layers.Dense(units = 42, activation = 'relu'))\nrede_neural.add(tf.keras.layers.Dense(units = 1, activation = 'sigmoid'))  \n","768eaaad":"rede_neural.summary()","6b47e0c8":"rede_neural.compile(optimizer='Adam', loss='binary_crossentropy', metrics = ['accuracy']) ","baed7dbd":"rede_neural.fit(X_train, y_train, epochs=100)","5e92c88e":"y_pred = rede_neural.predict(X_test)","4cb5c6bb":"y_pred","315c0bc7":"y_pred = (y_pred >= 0.5)  ","f3d3dc40":"y_pred","561fd7ce":"cm = confusion_matrix(y_test, y_pred)  \ncm","eb6bd2c0":"sns.heatmap(cm, annot=True);","1ffffbb1":"print(classification_report(y_test, y_pred))","c3c7fc3c":"import pickle","dc50fdab":"with open('variaveis_modelo.pkl', 'wb') as f:  \n  pickle.dump([onehotencoder, logistic], f) \n","054d3af1":"with open('variaveis_modelo.pkl', 'rb') as f:\n   encoder, model = pickle.load(f)","895d6b64":"encoder, model  ","244bfc23":"X_novo = dados_df.iloc[0:1]      #  nosso 'novo' funcion\u00e1rio na empresa;\nX_novo                           # our 'new' employee in the company;\n","0efd2f34":"X_cat_novo = X_novo[['Transportation expense',\t'Distance from Residence to Work',\t'Age',\t'Disciplinary failure',\t'Education',\t'Son',\t'Social drinker']]  \nX_cat_novo","d4b49336":"X_cat_novo = encoder.transform(X_cat_novo).toarray() ","9668f2e0":"X_cat_novo","c84cbb00":"X_cat_novo = pd.DataFrame(X_cat_novo)\nX_cat_novo","fea89dbb":"model.predict(X_cat_novo)  # Um funcion\u00e1rio com esse perfil tem chances de se ausentar no per\u00edodo de trabalho;\n                           # An employee with this profile is likely to be absent from work;","87198cc6":"model.predict_proba(X_cat_novo)   # A probabilidade da aus\u00eancia \u00e9 98%;\n                                  \n                                  # The probability of absence is 98%;","4cfdc83a":"model.classes_","92345454":"from IPython.display import Image\nImage(\"..\/input\/powerbi\/dados.png\")","ebdb7b6b":"# **Sklearn**","4ee666e4":"# **Salvando o Classificador**","65efe263":"# Redes Neurais\n\n# Neural networks","473708cb":"# Tratamento dos dados: \n\nNoso objetivo \u00e9 identificar as caracteristicas e perfil dos funcion\u00e1rios que faltam e os que n\u00e3o faltam;\n\nVamos eliminar alguns atributos que s\u00e3o dispensaveis para essa an\u00e1lise: \n\nReason for absence = n\u00e3o estamos analisando os motivos, mas a falta no trabalho, \u00e9 um atributo que pode ser deletado neste estudo de caso.\n\nMonth of absence, Day of the week', 'Seasons', = buscamos o n\u00famero de faltas e n\u00e3o um per\u00edodo de faltas.\n\nWeight,Heigh', Body mass index = s\u00e3o dados muito subjetivos, para nossa an\u00e1lise n\u00e3o influ\u00eanciara no n\u00famero de faltas;\n\nPet = \u00e9 um dado mais objetivo que subjetivo.","0d86c410":"# Importando as Bibliotecas\n\n# Importing Libraries","af9e1bfe":"# **** Introduction ****\n\nCurrently, absenteeism at work is considered as the absence of the worker from his\/her job, either as a result of delays or anticipated service and, currently, one of the main problems faced by companies and associations.\n\nAbsenteeism at work is something undesirable for companies and associations, negatively impacting productivity and the organizational climate itself (employees, in general, feel unmotivated by the absences of colleagues, in addition to suffering from work overload), generating financial losses as companies.\n\nThe absence of an employee can generate a gap certain day, in a production line, in the elaboration of a project or a decision making etc...\n\n The database was created with records of absenteeism at work from July 2007 to July 2010 at a courier company in Brazil.\nThe dataset allows for various attribute novations and attribute deletions, or a modification of the attribute type (categorical, integer or real) dependent on the purpose of the search.\n\nLet's analyze the data and observe some interesting characteristics of employee profiles, we often imagine that the most unruly employee is the one who is most lacking, or the employee with the most children, such data in this company demonstrate that often not everything follows a rule.\n\nAt the end, we will develop an algorithm based on the profile of employees who have no absences, if there are new hires, Human Resources can use the algorithm to help the hiring, whether you hire or not, if you have the profile of being a missing employee or not.","1eeb13c2":"# Vamos Criar dois dataframes para termos uma vis\u00e3o melhor dos n\u00fameros\n\n\n# Let's Create two dataframes to get a better view of the numbers","29ef1658":"# ****Introdu\u00e7\u00e3o****\n\nAtualmente o absente\u00edsmo no trabalho \u00e9 considerado como a aus\u00eancia do trabalhador em seu posto de trabalho, seja em decorr\u00eancia de atrasos ou sa\u00eddas antecipadas do servi\u00e7o e \u00e9, atualmente, um dos principais problemas enfrentados pelas empresas e organiza\u00e7\u00f5es.\n\nO absente\u00edsmo no trabalho \u00e9 algo indesej\u00e1vel para as empresas e organiza\u00e7\u00f5es, impactando negativamente na produtividade e no pr\u00f3prio clima organizacional (os funcion\u00e1rios, em geral, sentem-se desmotivados com as faltas dos colegas, al\u00e9m de sofrer com a sobrecarga de trabalho), gerando prejuizos financeiros as empresas.\n\nA aus\u00eancia de um \u00fanico funcion\u00e1rio pode gerar uma lacuna naquele dia, numa linha de produ\u00e7\u00e3o, na elabora\u00e7\u00e3o de um projeto ou uma tomada de decis\u00e3o etc...\n\n O banco de dados foi criado com registros de absente\u00edsmo no trabalho de julho de 2007 a julho de 2010 em uma empresa de courier no Brasil.\nO conjunto de dados permite v\u00e1rias novas combina\u00e7\u00f5es de atributos e exclus\u00f5es de atributos, ou a modifica\u00e7\u00e3o do tipo de atributo (categ\u00f3rico, inteiro ou real) dependendo do prop\u00f3sito da pesquisa.\n\nVamos analisar os dados e observar algumas caracteristicas interessantes de perfis de funcion\u00e1rios, muitas vezes imaginamos que o funcion\u00e1rio mais indiciplinado \u00e9 o que mais se falta, ou o funcion\u00e1rio com mais filhos, tais dados nesta empresa demonstram que muitas vezes nem tudo segue uma regra.\n\nAo final vamos elaborar um algoritimo com base no perfil dos funcion\u00e1rios que n\u00e3o possuem faltas, caso haja novas constrata\u00e7\u00f5es poder\u00e1 o Recursos Humanos se utilizar do algoritimopara o auxilio da contrata\u00e7\u00e3o, se contrata ou n\u00e3o contrata, se tem o perfil de ser um colaborador que falta ou n\u00e3o.","39ef712f":"Poderiamos fazer mais an\u00e1lises com outros algoritimos, mas tivemos resultados satisfat\u00f3rio com os que testamos aqui, como \u00e9 uma base de dados pequena\nn\u00e3o h\u00e1 necessidade de fazermos tuning ou a valida\u00e7\u00e3o cruzada para analisarmos os resultados, Random Forest apresentou melhores resultados.\n\n\nWe could do more analysis with other algorithms, but we had satisfactory results with the ones we've tested here, as it's a small database\nthere is no need for tuning or cross-validation to analyze the results, Random Forest showed better results.","7ec3e149":"# **Random forest**","00d5a248":"# **Pr\u00e9 Processamento dos Dados**\n\n# **Data Pre-Processing**","bbe51bb7":"# **Regress\u00e3o Log\u00edstica**\n\n# **Logistics Regression**","d500a6bc":"# **Vamos fazer uma an\u00e1slise mais detalhada do percentual de aus\u00eancia e seus n\u00fameros**\n\n# **Let's do a more detailed analysis of the percentage of absence and their numbers**","03959239":"# **Data processing: **\n\nOur objective is to identify the characteristics and profile of the missing and non-missing employees;\n\nLet's eliminate some attributes that are not necessary for this analysis:\n\nReason for absence = we are not analyzing reasons, but absence at work is an attribute that can be deleted in this case study.\n\nMonth of absence, Day of the week', 'Seasons', = we look for the number of absences and not a period of absences.\n\nWeight,Heigh', Body mass index = are very subjective data, for our analysis it will not influence the number of absences;\n\nPet = is more objective than subjective.","46cb6baf":"Geralmente imaginamos que as pessoas que possuem mais faltas diciplinares s\u00e3o as que mais se ausentaram no trabalho, o que vemos \u00e9 ao contr\u00e1rio;\n\n\nWe generally imagine that the people who have the most disciplinary absences are the ones who are absent from work the most, what we see is the opposite;","f22c85b4":"# **Conclus\u00e3o**\n\nO Dataset possui alguns dados muito interessantes;\n\n - Os funcion\u00e1rios que mais se ausentam do trabalho n\u00e3o s\u00e3o aqueles que possuem filhos, mas os que n\u00e3o tem filhos e est\u00e3o na casa dos 28 anos de idade;\n \n - Muitas vezes imaginamos que funcion\u00e1rios com mais filhos podem se ausentar mais do trabalho, mas o que observamos neste caso em estudo \u00e9 ao contr\u00e1rio, talves pelo fato de terem mais filhos e mais respons\u00e1bilidade, necessitam mais do emprego;\n \n - Os dias da semana com mais aus\u00eancia \u00e9 a segunda-feira;\n \n - Entre os meses, janeiro \u00e9 o com menor n\u00edvel de aus\u00eancias no trabalho, certamente devido as f\u00e9rias e as proximidades com o carnaval;\n \n \n Abaixo segue um resumo dos dados elabora pelo Power BI.\n \n\n\n# **Conclusion**\n\nThe Dataset has some very interesting data;\n\n - The employees who are most absent from work are not those who have children, but those who do not have children and are around 28 years old;\n \n - We often imagine that employees with more children can be absent from work longer, but what we see in this case study is the opposite, perhaps because they have more children and more responsibility, they need more work;\n \n - The days of the week with the most absence are Mondays;\n \n - Between the months, January is the one with the lowest level of absences from work, certainly due to the holidays and the proximity to Carnival;\n \n \n Below is a summary of the data elaborated by Power BI."}}