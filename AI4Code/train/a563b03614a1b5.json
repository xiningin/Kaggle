{"cell_type":{"926cd199":"code","a50e8f54":"code","7cef30ab":"code","e673163c":"code","d8d5aa54":"code","3377831e":"code","15beaa71":"code","fffb6f93":"code","8ab18e8f":"code","bae0d70a":"code","d9abf802":"code","f87d9151":"code","62e50324":"code","48d9bf13":"code","7e00889a":"code","1084a6cf":"code","ee4d5120":"code","4cac664b":"code","27ecc9bb":"code","ec3b0339":"code","b576eff3":"code","810f95f3":"code","fe8c004a":"code","33b6a2f3":"code","c0cb5139":"code","ac467445":"code","a4364e24":"code","7fe4c773":"code","e04c56de":"code","99f22e0c":"code","9287ffe7":"code","43ca3510":"code","e6b6f13a":"code","6d1a594b":"code","e2497244":"code","16e752ff":"code","85b381ed":"code","fe3afdbe":"code","9e8ba0be":"code","e67b87b1":"code","e412bd6d":"code","e61e359f":"code","fff46d0f":"code","1d33f27e":"code","7df1bb6f":"code","b173dcd3":"code","aff85465":"code","e5e159de":"code","66cb050d":"code","0baee3bf":"code","1f27dcb5":"code","19f526fa":"code","4b80afdc":"code","0dc716e9":"code","6db775d1":"code","9c21a827":"code","67f57f75":"code","41b818bf":"code","892d02d9":"code","bd08da9c":"code","68bf3c76":"code","d6874a44":"code","fd534571":"code","88fe47e8":"code","6ad9be34":"markdown","4b032bc5":"markdown","93bbdd57":"markdown","6bb5afdc":"markdown","618301e5":"markdown","19dfaaeb":"markdown","56da8e86":"markdown","a344230d":"markdown","c17baa0b":"markdown","fd257ec4":"markdown","8afb9953":"markdown","f42e7285":"markdown","65b4b58b":"markdown","1d3b7db2":"markdown","d75a4e1b":"markdown","01bbfa9e":"markdown","685fbbbe":"markdown","d44b9f6a":"markdown","81cfedf5":"markdown","2517b629":"markdown","c338616c":"markdown","6f32c6b7":"markdown","979f7e3b":"markdown","68f06276":"markdown","de0b62f8":"markdown","25269745":"markdown","5b076a96":"markdown","ee7f9a43":"markdown","fe50d204":"markdown","08b69223":"markdown","56411dd9":"markdown","b6b72a59":"markdown","69b00bb2":"markdown","5f9bd737":"markdown","58310de0":"markdown","d8e4d066":"markdown","85643bb8":"markdown","10500cf3":"markdown","c00d6d72":"markdown","151c5ff5":"markdown","4a70961e":"markdown","d90b0980":"markdown","d7ce894d":"markdown","b0e76214":"markdown","2b3c477c":"markdown","412ded17":"markdown","30951f37":"markdown","3553e09e":"markdown","cc507709":"markdown","7d717704":"markdown","c43dd2e9":"markdown","4c0b6d71":"markdown","3eec059c":"markdown","37105a2b":"markdown","eb9c1466":"markdown","9ae79de7":"markdown","3ba83a20":"markdown","51b58a36":"markdown","6c492e60":"markdown","0ec421b0":"markdown","bf16d43d":"markdown","103fc3a5":"markdown","f9a3440d":"markdown","616f1b15":"markdown"},"source":{"926cd199":"import numpy as np\nimport pandas as pd\nimport seaborn as sb\nimport matplotlib.pyplot as plt\n%matplotlib inline\n\nimport warnings\nwarnings.filterwarnings(\"ignore\")\n","a50e8f54":"df = pd.read_csv(\"..\/input\/netflix-shows\/netflix_titles.csv\")\ndf.head()","7cef30ab":"df.info()","e673163c":"df.isna().sum()","d8d5aa54":"# Plot missing values in columns\nimport missingno #Python library for the exploratory visualization of missing data #install using !pip install missingno\ncolor= ['dimgrey','dimgrey','dimgrey','darkblue','blue','blue','lightblue','dimgrey','dimgrey','dimgrey','dimgrey','dimgrey']\nmissingno.bar(df,fontsize=10,color=color,figsize=(10,5))\nplt.title('COLUMN WISE MISSING VALUES',fontsize=20)","3377831e":"df['country'] = df['country'].fillna(df['country'].mode()[0])\ndf['date_added'] = df['date_added'].fillna(df['date_added'].mode()[0])\ndf['rating'] = df['rating'].fillna(df['country'].mode()[0])","15beaa71":"df = df.dropna( how='any',subset=['cast', 'director'])","fffb6f93":"df.isna().sum()","8ab18e8f":"df.duplicated().sum()","bae0d70a":"#Rename the 'listed_in' column as 'Genre' for easy understanding\ndf = df.rename(columns={\"listed_in\":\"Genre\"})\ndf['Genre'] = df['Genre'].apply(lambda x: x.split(\",\")[0])\ndf['Genre'].head()","d9abf802":"df['year_add'] = df['date_added'].apply(lambda x: x.split(\" \")[-1])\ndf['year_add'].head()","f87d9151":"df['month_add'] = df['date_added'].apply(lambda x: x.split(\" \")[0])\ndf['month_add'].head()","62e50324":"df['country_main'] = df['country'].apply(lambda x: x.split(\",\")[0])\ndf['country_main'].head()","48d9bf13":"df['type'].value_counts()","7e00889a":"df['rating'].value_counts()","1084a6cf":"movie_df = df[df['type'] == 'Movie']\ntv_df = df[df['type'] == 'TV Show']","ee4d5120":"movie_df.head()","4cac664b":"sb.set(style=\"darkgrid\")\nsb.countplot(x=\"type\", data= df, palette=\"Set2\")","27ecc9bb":"#MOVIES RATINGS\nplt.figure(figsize=(12,10))\nsb.set(style=\"darkgrid\")\nsb.countplot(x=\"rating\", data= movie_df, palette=\"Set2\", order=movie_df['rating'].value_counts().index[0:15])","ec3b0339":"# TV SHOWS RATINGS\nplt.figure(figsize=(12,10))\nsb.set(style=\"darkgrid\")\nsb.countplot(x=\"rating\", data=tv_df, palette=\"Accent\", order=tv_df['rating'].value_counts().index[0:15])","b576eff3":"plt.figure(figsize=(12,10))\nsb.set(style=\"darkgrid\")\nsb.countplot(y=\"release_year\", data= df, palette=\"cool\", order= df['release_year'].value_counts().index[0:15],hue=df['type'])","810f95f3":"movie_df['duration']=movie_df['duration'].str.replace(' min','')\nmovie_df['duration']=movie_df['duration'].astype(str).astype(int)\nmovie_df['duration']","fe8c004a":"sb.set(style=\"darkgrid\")\nsb.kdeplot(data=movie_df['duration'], shade=True)","33b6a2f3":"duration_year = movie_df.groupby(['release_year']).mean()\nduration_year = duration_year.sort_index()\n\nplt.figure(figsize=(15,6))\nsb.lineplot(x=duration_year.index, y=duration_year.duration.values)\nplt.box(on=None)\nplt.ylabel('Movie duration in minutes');\nplt.xlabel('Year of released');\nplt.title(\"Trends of Movie's Duration over the Years\", fontsize=20, color='Green');","c0cb5139":"tv_df['duration']=tv_df['duration'].str.replace(' Season','')\ntv_df['duration']=tv_df['duration'].str.replace('s','')\ntv_df['duration']=tv_df['duration'].astype(str).astype(int)\ntv_df['duration']","ac467445":"#Extract the columns from tv_df\ncolumns=['title','duration']\ntv_shows = tv_df[columns]","a4364e24":"#sort the dataframe by number of seasons\ntv_shows = tv_shows.sort_values(by='duration',ascending=False)\ntv_shows\ntop20 = tv_shows[0:20]\ntop20","7fe4c773":"plt.figure(figsize=(10,6))\ntop20.plot(kind='bar',x='title',y='duration', color='purple')","e04c56de":"# TV SHOWS AND THEIR SEASONS\nplt.figure(figsize=(8, 6))\nlabels=['1 Season', '2 Season', '3 Season']\n_, _, texts = plt.pie(df.duration.value_counts()[:3], labels=labels, autopct='%1.2f%%', startangle=90, \n                      explode=(0.0, 0.1, 0.2), colors=['#003f5c', '#bc5090', '#ffa600'])\nplt.axis('equal')\nplt.title('Seasons Available on Netflix', fontsize=20, fontweight='bold');\nfor text in texts:\n    text.set_color('white')","99f22e0c":"plt.figure(figsize=(15,8))\nsb.set(style=\"darkgrid\")\nsb.countplot(x=\"country_main\", data=movie_df, palette=\"Accent\", order=movie_df['country_main'].value_counts().index[0:15])","9287ffe7":"plt.figure(figsize=(18,8))\nsb.set(style=\"darkgrid\")\nsb.countplot(x=\"country_main\", data=tv_df, palette=\"Accent\", order=tv_df['country_main'].value_counts().index[0:15])","43ca3510":"# Different Genres from Countries\ncolumns=['Genre','country_main']\ngen_country = df[columns]","e6b6f13a":"gen_country.head()","6d1a594b":"gen_country['Genre'].value_counts()","e2497244":"size = gen_country['Genre'].value_counts().tolist()\nsize","16e752ff":"# GENRES BY COUNTRIES\nimport squarify\nplt.figure(figsize=(30,15))\nsquarify.plot(value= gen_country['Genre'], label= gen_country['country_main'], sizes= size, alpha=0.8)\nplt.rc('font', size=14)\nplt.show()","85b381ed":"release = df['release_year'].value_counts()\nrelease = release.sort_index(ascending=True)\n\nplt.figure(figsize=(9,7))\nplt.plot(release[-11:-1])\nplt.scatter(release[-11:-1].index, release[-11:-1].values, s=0.5*release[-11:-1].values, c='Red');\nplt.box(on=None);\nplt.xticks(rotation = 60)\nplt.xticks(release[-11:-1].index);\nplt.title('Number of Content Released by Year', color='red', fontsize=20);","fe3afdbe":"plt.figure(figsize=(10,8))\nsb.barplot(y= movie_df.director.value_counts()[:10].sort_values().index, x=movie_df.director.value_counts()[:10].sort_values().values);\nplt.title('Director with most number of movies', color='red', fontsize=18)\nplt.xticks(movie_df.director.value_counts()[:10].sort_values().values);\nplt.xlabel('Number of Movies Released');\n","9e8ba0be":"plt.figure(figsize=(10,8))\nsb.barplot(y= tv_df.director.value_counts()[:10].sort_values().index, x=tv_df.director.value_counts()[:10].sort_values().values);\nplt.title('Director with most number of TV Shows', color='green', fontsize=18)\nplt.xticks(tv_df.director.value_counts()[:10].sort_values().values);\nplt.xlabel('Number of Series Released');","e67b87b1":"plt.figure(figsize=(18,10))\nsb.barplot(x= df.Genre.value_counts()[:10].sort_values().index, y=df.Genre.value_counts()[:10].sort_values().values,palette='GnBu');\nplt.title('Most Popular Genre', color='Blue', fontsize=20)\nplt.yticks(df.Genre.value_counts()[:10].sort_values().values);\nplt.xlabel('GENRES');\nplt.ylabel('Number of contents');","e412bd6d":"plt.figure(figsize=(18,14))\nsb.barplot(y= df.cast.value_counts()[:15].sort_values().index, x=df.cast.value_counts()[:15].sort_values().values,palette='gnuplot_r');\nplt.title('Top Actor\/Actresses on Netflix', color='purple', fontsize=30)\nplt.xticks(df.cast.value_counts()[:10].sort_values().values);\nplt.ylabel('Actor\/Actresses', fontsize=25);\nplt.xlabel('Content counts', fontsize=25);","e61e359f":"df_copy = df.copy()\nnet_date = df_copy[['date_added']]\nnet_date['year'] = net_date['date_added'].apply(lambda x : x.split(', ')[-1])\nnet_date['month'] = net_date['date_added'].apply(lambda x : x.lstrip().split(' ')[0])\n\nmonth_order = ['January', 'February', 'March', 'April', 'May', 'June', 'July', 'August', 'September', 'October', 'November', 'December'][::-1]\ndf_copy = net_date.groupby('year')['month'].value_counts().unstack().fillna(0)[month_order].T\n","fff46d0f":"plt.figure(figsize=(10, 7), dpi=200)\nplt.pcolor(df_copy, cmap='BrBG', edgecolors='white', linewidths=2) # heatmap\nplt.xticks(np.arange(0.5, len(df_copy.columns), 1), df_copy.columns, fontsize=7, fontfamily='serif')\nplt.yticks(np.arange(0.5, len(df_copy.index), 1), df_copy.index, fontsize=7, fontfamily='serif')\n\nplt.title('Netflix Contents Update', fontsize=12, fontfamily='calibri', fontweight='bold')\ncbar = plt.colorbar()\ncbar.solids.set_edgecolor(\"face\")\n\ncbar.ax.tick_params(labelsize=8) \ncbar.ax.minorticks_on()\nplt.show()","1d33f27e":"df['description'].head()","7df1bb6f":"from sklearn.feature_extraction.text import TfidfVectorizer\n\n#Define a TF-IDF Vectorizer Object. Remove all english stop words such as 'the', 'a'\ntfidf = TfidfVectorizer(stop_words='english')","b173dcd3":"#Replace NaN with an empty string\ndf['description'] = df['description'].fillna('')\n\n#Construct the required TF-IDF matrix by fitting and transforming the data\ntfidf_matrix = tfidf.fit_transform(df['description'])\n\n#Output the shape of tfidf_matrix\ntfidf_matrix.shape","aff85465":"# Import linear_kernel\nfrom sklearn.metrics.pairwise import linear_kernel\n\n# Compute the cosine similarity matrix\ncosine_sim = linear_kernel(tfidf_matrix, tfidf_matrix)","e5e159de":"#Construct a reverse map of indices and movie titles\nindices = pd.Series(df.index, index=df['title']).drop_duplicates()","66cb050d":"def get_recommendations(title, cosine_sim=cosine_sim):\n    idx = indices[title]\n\n    # Get the pairwsie similarity scores of all movies with that movie\n    sim_scores = list(enumerate(cosine_sim[idx]))\n\n    # Sort the movies based on the similarity scores\n    sim_scores = sorted(sim_scores, key=lambda x: x[1], reverse=True)\n\n    # Get the scores of the 10 most similar movies\n    sim_scores = sim_scores[1:11]\n\n    # Get the movie indices\n    movie_indices = [i[0] for i in sim_scores]\n\n    # Return the top 10 most similar movies\n    return df['title'].iloc[movie_indices]","0baee3bf":"get_recommendations('#realityhigh')","1f27dcb5":"get_recommendations('PK')","19f526fa":"features=['Genre','director','cast','description','title']\nfilters = df[features]","4b80afdc":"#Cleaning the data by making all the words in lower case.\ndef clean_data(x):\n        return str.lower(x.replace(\" \", \"\"))","0dc716e9":"for feature in features:\n    filters[feature] = filters[feature].apply(clean_data)\n    \nfilters.head()","6db775d1":"def create_soup(x):\n    return x['director'] + ' ' + x['cast'] + ' ' +x['Genre']+' '+ x['description']","9c21a827":"filters['soup'] = filters.apply(create_soup, axis=1)","67f57f75":"# Import CountVectorizer and create the count matrix\nfrom sklearn.feature_extraction.text import CountVectorizer\n\ncount = CountVectorizer(stop_words='english')\ncount_matrix = count.fit_transform(filters['soup'])","41b818bf":"# Compute the Cosine Similarity matrix based on the count_matrix\nfrom sklearn.metrics.pairwise import cosine_similarity\n\ncosine_sim2 = cosine_similarity(count_matrix, count_matrix)","892d02d9":"filters","bd08da9c":"# Reset index of our main DataFrame and construct reverse mapping as before\nfilters=filters.reset_index()\nindices = pd.Series(filters.index, index=filters['title'])","68bf3c76":"def get_recommendations_new(title, cosine_sim=cosine_sim):\n    title=title.replace(' ','').lower()\n    idx = indices[title]\n\n    # Get the pairwsie similarity scores of all movies with that movie\n    sim_scores = list(enumerate(cosine_sim[idx]))\n\n    # Sort the movies based on the similarity scores\n    sim_scores = sorted(sim_scores, key=lambda x: x[1], reverse=True)\n\n    # Get the scores of the 10 most similar movies\n    sim_scores = sim_scores[1:11]\n\n    # Get the movie indices\n    movie_indices = [i[0] for i in sim_scores]\n\n    # Return the top 10 most similar movies\n    return df['title'].iloc[movie_indices]","d6874a44":"get_recommendations_new('PK', cosine_sim2)","fd534571":"get_recommendations_new('Black panther', cosine_sim2)","88fe47e8":"get_recommendations_new('Naruto', cosine_sim2)","6ad9be34":"# <center> \ud83d\udcfaNetflix EDA and Movie Recommendation System\ud83d\ude0e\ud83c\udf7f","4b032bc5":"## Content Based Filtering","93bbdd57":"![](https:\/\/miro.medium.com\/max\/998\/1*O_GU8xLVlFx8WweIzKNCNw.png)","6bb5afdc":"## 3. Exploratory Data Analysis","618301e5":"## Plot description based Recommender","19dfaaeb":"- **United States** creates highest amount of movies followed by ***India and UK.***\n","56da8e86":"- dataset has 0 duplicated values.","a344230d":"- **Supernatural , Naruto** has the highest numbers of seasons","c17baa0b":"- **United States,United Kingdom,South Korea,Japan** creates most of the amount of TV Shows on netflix.","fd257ec4":"### --> Movies & TV Shows Ratings analysis","8afb9953":"### --> Contents released by years","f42e7285":"## 2. Data Exploration","65b4b58b":"### --> Analysis of movies duration","1d3b7db2":"- All the missing values in the dataset have either been removed or filled. There are no missing values left.","d75a4e1b":"![](https:\/\/www.extremetech.com\/wp-content\/uploads\/2016\/03\/Netflix-Feature.jpg)","01bbfa9e":"#### We can analyse the months in which least amount of contents are added, that months can be best for directors to release their content for better audience attention.","685fbbbe":"### Reading Data","d44b9f6a":"### --> Checking for missing values","81cfedf5":"## Multiple metrics(Genre,cast,director)  based Recommender System","2517b629":"-- Let's define a function that takes in a movie title as an input and outputs a list of the 10 most similar movies.","c338616c":"### --> Analysis of TV Shows with most number of seasons","6f32c6b7":"### --> Best Month for directors to release content","979f7e3b":"- In the years of **1960 to 1965**, Movies durations were over **200 minutes, after 1965 the durations became comparitively shorter.**\n- From the year **1980**, we can see consistent trend of movie durations, of which duration time is around in **between 100-150 minutes.**","68f06276":"- Director **Alastair Fothergill** released **highest number of TV shows:3** on Netflix.","de0b62f8":"-- we need a mechanism to identify the index of a movie in our metadata DataFrame, given its title.","25269745":"- There are missing values in column director,cast,country and date_added.\n- We can't randomly fill the missing values in columns of director and cast, so we can drop them.\n- For minimal number of missing values in country and date_added,rating, we can fill them using mode(most common value) and mean.","5b076a96":"- Actor **'Samuel West'** has highest number of movies\/Tv shows on Netflix.","ee7f9a43":"We need to convert the word vector of each overview.We'll compute Term Frequency-Inverse Document Frequency (TF-IDF) vectors for each description.The overall importance of each word to the documents in which they appear is equal to TF * IDF.This is done to reduce the importance of words that occur frequently in plot overviews and therefore, their significance in computing the final similarity score.","fe50d204":"### --> Trends of movies duration","08b69223":"- We can see that Netflix released most number of content in year 2017.\n- Noticeable growth in releasing content can be seen from the year 2015.","56411dd9":"### -->Understanding what content is available in different countries","b6b72a59":"-- Making two new dataframes, one with movies collection and other with TV shows collection:\n* movie_df\n* tv_df","69b00bb2":"### --> Countries on top for movies content creation","5f9bd737":"### --> Cleaning the data","58310de0":"--> Extract TV Shows titles and its number of seasons:","d8e4d066":"### --> Directors with most number of Movies produced","85643bb8":"- The largest count of movies are made with the 'TV-MA' rating.\"TV-MA\" is a rating assigned by the TV Parental Guidelines to a television program that was designed for mature audiences only. \n- Second largest is the 'TV-14' stands for content that may be inappropriate for children younger than 14 years of age.\n- Third largest is the  very popular 'R' rating.An R-rated film is a film that has been assessed as having material which may be unsuitable for children under the age of 17.","10500cf3":"### --> Number of Movies vs TV Shows","c00d6d72":"### Here I have done a detailed analysis of netflix content data with awesome visualizations and built a Recommendation System.","151c5ff5":"Netflix is the world's leading streaming entertainment service with 208 million paid memberships in over 190 countries enjoying TV series, documentaries and feature films across a wide variety of genres and languages. Members can watch as much as they want, anytime, anywhere, on any internet-connected screen. Members can play, pause and resume watching, all without commercials or commitments.","4a70961e":"### --> Handling missing values","d90b0980":"### We can see that our improved Recommendation System works very well.","d7ce894d":"### --> Most Popular Genre on Netflix","b0e76214":"### --> Top Actor\/Actresses on Netflix","2b3c477c":"### --> Countries on top for TV Show content creation","412ded17":"## Do share your feedbacks as well as suggestions on how can this EDA be improved,which other visualisations can also be added.I would highly appreciate any kind of ideas.\u2728\n# Kindly **Upvote** if you find it useful.\ud83d\ude0a","30951f37":"The next steps are the same as what we did with our plot description based recommender. One important difference is that we use the **CountVectorizer()** instead of TF-IDF.","3553e09e":"## 4. Netflix Recommendation System","cc507709":"- We can now create our \"metadata soup\", which is a string that contains all the metadata that we want to feed to our vectorizer.","7d717704":"- Most of the TV Shows has 'TV-14' ratings which stands for the content can be inappropriate for children under 14 years of age.\n- Second highest count of ratings in TV Shows is 'TV-MA', for which the content is for matured audience only.\n- TV Shows has least amount of counts with 'R' ratings.","c43dd2e9":"From the Genre,cast and director features, we need to extract the three most important actors, the director and genres associated with that movie.","4c0b6d71":"- From the chart we can analyze, **35.04% TV Shows has only 1 Season,32.48% TV Shows has 2 seasons and 32.48% Tv Shows has 3 seasons** available","3eec059c":"Since we have used the TF-IDF vectorizer, calculating the dot product will directly give us the cosine similarity score. Therefore, we will use sklearn's **linear_kernel()** instead of cosine_similarities() since it is faster.","37105a2b":"- Director **Raul Campos,Jan Suter** Produced **highest number of movies: 18** on Netflix till now.","eb9c1466":"- So, a good amount of movies on Netflix are among the **duration of 75-120 mins.**","9ae79de7":"- We will calculate similarity scores for all movies based on their plot descriptions and recommend movies based on that similarity score. The plot description is given in the **description** feature of our dataset.","3ba83a20":"Adding some new columns:\n- listed_in - Genre\n* Year Added - year_add\n* Month Added - month_add\n* Princial Country - country_main ","51b58a36":"## 1. Importing libraries","6c492e60":"- There are more Movies on Netflix than TV shows.","0ec421b0":"- For this recommender system the content of the movie (cast, description, director,genre etc) is used to find its similarity with other movies. Then the movies that are most likely to be similar are recommended.","bf16d43d":"- This is completely plot based recommendations. we can see these are not so accurate, so we can try to add more metrics to improve model performance.","103fc3a5":"### --> Yearly Analysis of content","f9a3440d":"- United states produces most amount of content in 'Comedies' and 'Childern & Family movies' Genres.","616f1b15":"- **Netflix knows how much we all love drama..!! :p**"}}