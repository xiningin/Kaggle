{"cell_type":{"2765f264":"code","d5d710f4":"code","61a703f7":"code","6e50b719":"code","6168cb96":"code","3617b545":"code","89b8dd77":"code","b5f8c6bc":"code","fee3dae0":"code","1b844764":"code","98581901":"code","2b021fa0":"code","bad1adda":"code","f2c6cbf8":"code","d71b587f":"code","5dc39f09":"code","d84f2df9":"code","8c85ad75":"code","9b39acfe":"code","7a01fbee":"code","6c85e2f0":"code","887a4eaa":"code","b5147cd4":"markdown","30dfadb1":"markdown","f38a826f":"markdown","d128325b":"markdown","7ee73a93":"markdown","58464b18":"markdown","4cf0ad27":"markdown"},"source":{"2765f264":"import pandas as pd\nimport numpy as np\nimport matplotlib.pyplot as plt\nimport seaborn as sns","d5d710f4":"df = pd.read_csv(\"..\/input\/pizza-price-prediction\/pizza_v1.csv\")\ndf","61a703f7":"# Check Whether There is Missing Value in Datasets or Not\ndf.isna().sum()","6e50b719":"# change rupiah_format format\nprice = []\n\nfor item in df['price_rupiah']:\n    price += [float(item.replace('Rp', '').replace(',', ''))]\n    \ndf['price_rupiah'] = price","6168cb96":"df.dtypes","3617b545":"sns.countplot(df.dtypes.map(str))","89b8dd77":"categoric_cols = [categoric for categoric in df.columns if df[categoric].dtype == 'object']\ncategoric_cols","b5f8c6bc":"numeric_cols = [numeric for numeric in df.columns if df[numeric].dtype == 'float64']\nnumeric_cols","fee3dae0":"fig, axes = plt.subplots(1, 6, figsize=(20, 5), sharey=True)\nsns.countplot(ax=axes[0], x=df.company)\n\nsns.countplot(ax=axes[1], x=df.topping)\n\nsns.countplot(ax=axes[2], x=df.variant)\n\nsns.countplot(ax=axes[3], x=df['size'])\n\nsns.countplot(ax=axes[4], x=df.extra_sauce)\n\nsns.countplot(ax=axes[5], x=df.extra_cheese)","1b844764":"df['diameter'].plot(figsize=(12,8))\nplt.show()","98581901":"df[numeric_cols].hist(figsize=(12,12))\nplt.show()","2b021fa0":"g = sns.PairGrid(df, x_vars=df.columns, y_vars=['price_rupiah'] )\ng.map(sns.scatterplot)","bad1adda":"df.groupby('company')['price_rupiah'].sum().plot()\nplt.show()","f2c6cbf8":"from sklearn.model_selection import train_test_split, GridSearchCV\nfrom sklearn.preprocessing import StandardScaler, MinMaxScaler, OneHotEncoder, OrdinalEncoder\nfrom sklearn.pipeline import Pipeline\nfrom sklearn.compose import ColumnTransformer\nfrom sklearn.ensemble import RandomForestRegressor\nfrom sklearn.metrics import mean_absolute_error","d71b587f":"X = df.drop(columns='price_rupiah')\ny = df.price_rupiah\n\nX_train, X_test, y_train, y_test = train_test_split(X, y, test_size=0.2, random_state=42)","5dc39f09":"numerical_pipeline = Pipeline([\n    ('scaling', StandardScaler())\n])\n\ncategorical_pipeline = Pipeline([\n    ('label', OneHotEncoder(handle_unknown='ignore'))\n])\n\npreprocessing = ColumnTransformer([\n    ('numeric', numerical_pipeline, ['diameter']),    \n    ('cat_sec', categorical_pipeline, categoric_cols)\n])\n\npipeline = Pipeline([\n    ('pre', preprocessing),\n    ('algo', RandomForestRegressor(random_state=42))\n])","d84f2df9":"pipeline.fit(X_train, y_train)","8c85ad75":"pipeline.get_params()","9b39acfe":"parameter = {\n    'algo__max_depth': [20,40,60,80,100],\n    'algo__min_samples_leaf': [1, 2, 4],\n    'algo__n_estimators': [200, 400, 600, 800, 1000]\n}","7a01fbee":"model = GridSearchCV(pipeline, parameter, cv=3, n_jobs=-1, verbose=1)\nmodel.fit(X_train, y_train)","6c85e2f0":"print(model.score(X_train, y_train)), print(model.score(X_test, y_test))","887a4eaa":"y_pred = model.predict(X_test)\nmae_val = mean_absolute_error(y_pred, y_test)\n\nprint(\"Validation MAE for RandomForestRegressor Model: {:,.0f}\".format(mae_val))","b5147cd4":"## **Check Data Type**","30dfadb1":"## **Exploratory Data Analysis**","f38a826f":"## **Bivariant Analysis**","d128325b":"## **Univariant Analysis**","7ee73a93":"- The purpose of changing the price format is so that there is no object format and remove the comma","58464b18":"- From the above visualization, can be concluded that company, extra_sauce and extra_cheese can make new colum with OneHotEncoding\n\n- topping, variant and size column could be label encodng","4cf0ad27":"- we can see that the company has the highest profit"}}