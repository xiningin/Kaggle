{"cell_type":{"6149a263":"code","3961d269":"code","94ef3f65":"code","1ce2f8c8":"code","25d185e7":"code","74773cac":"code","812bbdf4":"code","5b433e36":"code","8e275665":"code","aa54a723":"code","5b307503":"code","9a2594b1":"code","445f9a8a":"code","d94afbb8":"code","bd8455cd":"code","3d7b60d8":"code","c7fbcc29":"code","5e3472b0":"code","4874246f":"code","157e490b":"code","672c7882":"code","0b0b9195":"code","ce59844a":"code","36d97665":"markdown","17cf15ff":"markdown","31317fda":"markdown","2b46fd4d":"markdown","f159985d":"markdown","93d7f347":"markdown","069f386f":"markdown","94d32e60":"markdown","489dbc5a":"markdown","73153458":"markdown","ffaa9812":"markdown","22f1aca9":"markdown","7d3d04d1":"markdown","df6f8058":"markdown","c4991c33":"markdown","fcc57c7d":"markdown","d08ec4e4":"markdown"},"source":{"6149a263":"# This Python 3 environment comes with many helpful analytics libraries installed\n# It is defined by the kaggle\/python Docker image: https:\/\/github.com\/kaggle\/docker-python\n# For example, here's several helpful packages to load\n\nimport numpy as np # linear algebra\nimport pandas as pd # data processing, CSV file I\/O (e.g. pd.read_csv)\nimport matplotlib.pyplot as plt\nimport seaborn as sns\n# Input data files are available in the read-only \"..\/input\/\" directory\n# For example, running this (by clicking run or pressing Shift+Enter) will list all files under the input directory\n\nimport os\nfor dirname, _, filenames in os.walk('\/kaggle\/input'):\n    for filename in filenames:\n        print(os.path.join(dirname, filename))\n\n","3961d269":"ad=pd.read_csv(\"\/kaggle\/input\/clicks-conversion-tracking\/KAG_conversion_data.csv\")","94ef3f65":"ad.shape","1ce2f8c8":"ad.describe()","25d185e7":"# check null values\nad.info()","74773cac":"# modify datatype of several columns \nad['interest']=ad['interest'].astype('object',copy=False )\nad['Spent']= ad['Spent'].astype('int64')\nad['ad_id']= ad['Spent'].astype('int64')","812bbdf4":"# clusters can be made & find index column\n# only every row of ad_id column is unique \n#ad.age.unique()\n# ad.gender.unique()\n# ad.interest.unique()\n# ad.xyz_campaign_id()\nad.ad_id.nunique()","5b433e36":"# drop \"fb_campaign_id\" column, which won't be used in the analysis\nad= ad.drop('fb_campaign_id',axis=1)","8e275665":"# add new indicators as columns\nad['CPM']= ad['Spent']\/ad['Impressions']*1000\nad['CPC']= ad['Spent']\/ad['Clicks']\nad['CPA']= ad['Spent']\/ad['Total_Conversion']\nad['CTR(%)']= (ad['Clicks']\/ad['Impressions'])*100\nad['CVR(%)']= (ad['Approved_Conversion']\/ad['Total_Conversion'])*100\n\n#supposing each Approved_Conversion worth 100 euros\nad['revenue']=ad['Approved_Conversion']*100\nad['profit']= ad.revenue-ad.Spent","aa54a723":"# replace xyz_campaign id with campaign name\nc = {916: 'x', 936: 'y',1178:'z'}\nad['ID'] = ad['xyz_campaign_id'].map(c)","5b307503":"# check result\nad.sample(5)","9a2594b1":"# create new dataframe that only contain numbers for correlation analysis\nad_num= ad[['revenue','Impressions','Clicks', 'Total_Conversion', 'Spent']]\n\nad_num.sample(3)","445f9a8a":"# pairplot positive correlations\nsns.pairplot(ad_num,height=1.5)\nplt.suptitle(\"Overview of relathionships between numerical features\", y=1.05,weight='bold')","d94afbb8":"xg = sns.heatmap(ad_num.corr(),annot=True,fmt=\".2f\",cmap='coolwarm')\nplt.suptitle(\"Correlation heatmap of numerical features\")","bd8455cd":"# which age group is attracted and willing to pay?\nplt.rcParams['figure.figsize']=(10,6)\na = pd.pivot_table(data=ad, index='age',values=['Spent','revenue','profit'], aggfunc='mean').plot(kind='bar')\n\nplt.suptitle(\"Profit by age\")","3d7b60d8":"# interest (measured by CTR) by age\nplt.figure(figsize=(12,8))\nsns.boxplot(x=ad.age,y=ad['CTR(%)'],hue=ad.gender)\nplt.suptitle(\"Interest by age\")","c7fbcc29":"# interest (measured by CTR) by gender\nplt.figure(figsize=(5,5))\n\nsns.set(style='whitegrid')\nsns.boxplot(data=ad,x='gender',y='CTR(%)')\nplt.suptitle(\"Interest by gender\")","5e3472b0":"# which age group is willing to pay?\n\na = pd.pivot_table(data=ad, index='gender',values=['Spent','revenue','profit'], aggfunc='mean').plot(kind='bar')\n\nplt.suptitle(\"Profit by gender\")","4874246f":"# which gender group is more profitable?\n\nfig= plt.gcf()\nfig.set_size_inches(10,7)\nsns.scatterplot(data=ad, x='Spent',y='revenue',hue='gender',alpha=0.7)\n\n\n# add identity line\nplt.plot([0,700],[0,700],color='y',linestyle='--')\nplt.plot([0,700],[0,1400],color='g',linestyle='--')\n\nplt.suptitle('ROAS performance by gender')","157e490b":"# interest level (measured by CTR) by inerest\nplt.figure(figsize=(20,8))\nsns.boxplot(x=ad.interest,y=ad['CTR(%)'],hue=ad.gender)\n\nplt.suptitle(\"Interest level by gender& interest\")","672c7882":"# which interest group+ gender is willing to pay?\n\nplt.figure(figsize=(20,8))\nsns.barplot(x=ad.interest,y=ad['profit'],hue=ad.gender,ci=None)\n\nplt.suptitle(\"Profit by gender& interest\")","0b0b9195":"# revenue heatmap for interest+ age\nia= pd.pivot_table(data=ad,index='interest',columns='age',values='profit',aggfunc=\"mean\",fill_value=0   )\n\nsns.set(rc={'figure.figsize':(30,3)})\nsns.heatmap(ia.T,cmap=\"YlGnBu\");\nplt.figure(figsize=(20,8))\nplt.suptitle(\"Profit by age& interest\")","ce59844a":"agency = pd.pivot_table(data=ad,index='ID',values=['Spent','profit'],aggfunc='mean',margins=False).round(3)\nplt.rcParams['figure.figsize']=(5,5)\nagency.plot(kind='bar')\nplt.suptitle(\"Performance by agency\")","36d97665":"## Context\n\nAs Facebook users interact with the platform, adding demographic information, liking particular pages and commenting on specific posts, Facebook builds a profile of that user based on who they are and what they're interested in.\nAdvertisers can create Facebook adverts, then create an 'Audience' for that advert or group of adverts. Audiences can be built from a range of attributes including gender, age, location and interests. This specific targetting means advertisers can tailor content appropriately for a specific audience, even if the product being marketed is the same.\n\n\nFor the current stage, we wants to generate more profit instead of building brand awareness.  \nWe hired advertising agency: x, y, z. They lauched campaignes seperately.We want to compare the performance of these 3 agencies.  \nSupposing these 3 agencies lauched campaigns for 1 week, andthe average order value is 100 euros.\n\n\n\n### Explaination of each column in the dataset:\n1.) ad_id: unique ID for each ad.\n\n2.) xyz_campaign_id: an ID associated with each ad campaign of XYZ company.\n\n3.) fb_campaign_id: an ID associated with how Facebook tracks each campaign.\n\n4.) age: age of the person to whom the ad is shown.\n\n5.) gender: gender of the person to whom the add is shown\n\n6.) interest: a code specifying the category to which the person\u2019s interest belongs (interests are as mentioned in the person\u2019s Facebook public profile).\n\n7.) Impressions: the number of times the ad was shown.\n\n8.) Clicks: number of clicks on for that ad.\n\n9.) Spent: Amount paid by company xyz to Facebook, to show that ad.\n\n10.) Total conversion: Total number of people who enquired about the product after seeing the ad.\n\n11.) Approved conversion: Total number of people who bought the product after seeing the ad.\n\n\n### Business questions\n\n1.) what's the perfect target demographics ?\n2.) how can we optimize existing campaigns?\n3.) which advertising agency should we choose?\n\n\n\nData source : https:\/\/www.kaggle.com\/loveall\/clicks-conversion-tracking","17cf15ff":"#### Add New Indicator + Drop Irrelavant Column","31317fda":"### Campaign performance by ads agency","2b46fd4d":"## Data Import","f159985d":"**Observation:**\n- Women in interest group from 100,101,104,107,112 are our precise target.They are almost equally highly interested in our products and are willing to pay.\n- Beacuse the interest level is concentrated, we'd better try highly customized creatives for these dedicated groups to generate higher revenue.\n- Interest group to be excluded from targeting list (those have high\/dispersed interest level & generate low revenue):  group 22,23, 27, 105,106.\n\n- It's a good strategy to combine the gender and interest when targeting at specific interest group:\n    - Interest groups where we can target men only: 2, 7,10,15,16,25,36,63,64,65,103,108,109,110\n    - Interest groups where we can target women only:31,104,111,112,114","93d7f347":"\n**Observation:**  \n\n- \"Total_conversion\" and \"impression\" are more closely related to core indicator \"revenue\" than \"spent\" and \"click\".  \n- High correlation coefficient\"revenue\" and \"total_conversion\" is not surprising since approved_conversion is the next stage of total_conversion in the conversion funnel.\n- \u2018click\u2019is most related to 'cost'. Combined with Facebook ads bidding settings, we can reach the conclusion that ads is charged on \"pay per click\" model.\n\n\n","069f386f":"## Data analysis\n### Correlation Matrix","94d32e60":"**Observation**\n- Agency Z has delivered highest profits with greatest advertising volumes via high advertising expenditure .\n- Although agency x spends least, it brings highes ROAS with similar average revenue. Agency X has higher potencial.","489dbc5a":"**Observation:**  \nIn the heatmap above, darker means higher average income.   \nObviously, combining age and interest group is another direction for optimization.  \nWe need to overturn our old impressions of age groups.\nFor example, even for the elder group like 40-44 , the profit surge in interest 112.","73153458":"## Data Exploration","ffaa9812":"**Gender**","22f1aca9":"In this chart we use yellow and green identity line as a reference to illustrate ROAS performance of each  group.Yellow line refers to 1:1 ROAS and green line refers to 2:1 ROAS.\n- Generally speaking , ad investment on men brings higher profit. For a large percentage of creatives, the ROAS can be higher than 2:1.  \n- Women shows higher interest in our ads \uff08more clicks\uff09, but they converted less.  \n\nAgain, we need to analyse this further. Gender is an over-generalised classification. We need to refine to interest and age groups to see the characteristics of our core users.","7d3d04d1":"### Overall customer persona\n**Age**","df6f8058":"# Content Structure \n\n- Context  \n    1. Explaination of dataset\n    2. Business questions\n    \n- Data Import\n- Data Exploration  \n- Data Cleaning  \n    1. Cleaning\n    2. Introduce additional KPIs \n- Data analysis\n   1. Define most relevant key performance indicators (KPIs)   \n   2. Find best target demographics \n   3. Analyse the running campaign     \n        a. comparing the individual campaign overall performance by profitiablity  \n        b. analyse campaign with high potential  \n   \n","c4991c33":"**Observation:**\n- Generally, profits fall as customers age grows.\n- There was little difference in the level of interest (measured by CTR ) for each gender in each age group.\n- Age group 30-34 is our key target audience. They bring the highest ROAS.\n- Although the exposure and cost on Group 45-49 are high, this groups is not willing to pay for the product. There may be potential problems, such as imprecise interest targeting.\n- The elder group click on adertisment more frequently.Higher clicks do not necessarily indicate a higher interest in the product, but may also be due to the fact that older people don't distinguish well between sponsored content\uff08advertising) and feeds. Meanwhile, elder group is more cautious about online payments, so they seems hesitated to purchase. These two hypotheses may answer why profits fall as customers age grows. ( Further proof would require more behavior& investigation data. We will not expand on this here.)","fcc57c7d":"**Interest+Age**","d08ec4e4":"**Interest + Gender**"}}