{"cell_type":{"88a91b01":"code","1b186830":"code","b545e981":"code","9ad2e9f9":"markdown"},"source":{"88a91b01":"import pandas as pd # data processing, CSV file I\/O (e.g. pd.read_csv)\n\ncolorWheel = ['White', 'Blue', 'Black', 'Red', 'Green', 'Colorless', 'Multi']\nkeeps = ['name', 'rarity']\n\nraw = pd.read_json('..\/input\/AllSets-x.json')\nraw.shape\n\n#setStartDate = '2003-07-28' #8th Edition and later\nsetStartDate = '2013-09-26' #Theros and later\n\nsets = {}\nmtg = []\nfor col in raw.columns.values:\n    release = pd.DataFrame(raw[col]['cards'])\n    release = release.loc[:, keeps]\n    #release['modernLegal'] = release.legalities.apply(lambda l: 'none' if not isinstance(l,list) else next((legals['legality'] for legals in l if legals['format'] == 'Modern'),'none'))\n    #release = release[release.modernLegal == 'Legal']\n    #print(release.modernLegal.unique())\n    #release = release[release.legalities.isnotnull() and release.legalities]\n    if raw[col]['releaseDate'] > setStartDate and (raw[col]['type'] == 'core' or raw[col]['type'] == 'expansion'): #8th edition was released 2003-07-29, so this should include all modern sets\n        release['index'] = release.reset_index().index\n        release['setName'] = raw[col]['name']\n        release['releaseDate'] = raw[col]['releaseDate']\n        mtg.append(release)\n        sets[col] = release\ndel release, raw\nprint(len(sets))","1b186830":"mtg.sort(key=lambda x: x['releaseDate'][0])","b545e981":"output = '''\\\\documentclass[10pt]{article}\n\\\\usepackage[left=3cm, right=2cm, top=1cm, bottom=1cm]{geometry}\n\\\\usepackage{amsmath}\n\\\\usepackage{graphicx}\n\\\\usepackage{hyperref}\n\\\\usepackage[latin1]{inputenc}\n\n\\\\begin{document}\n\\\\pagestyle{empty}\n\n\\\\twocolumn '''\n\nfor curSet in mtg:\n    df = curSet\n    df.sort_values(by=['index'])\n    df['output'] = df['index'].apply(lambda x: str(x+1).zfill(3)) + '  ' + df.rarity.apply(lambda x: x[0]) + '  ' + df['index'].apply(lambda x: str(int(x \/ 9 + 1)).zfill(2) + ':'+str(x % 9 + 1)) +'   ' + df['name']\n    setname = df['setName'][0]\n    output += '\\\\section{'+setname+'}\\n\\\\begin{description}\\n\\\\setlength\\\\itemsep{-0.5em}\\n'\n    output += df.output.apply(lambda x: '\\t\\\\item ' + x).str.cat(sep='\\n')\n    output +='\\n\\\\end{description}\\n\\\\clearpage\\n'\n    \n    \noutput += '\\\\end{document}'\n\nf = open('sets.tex','w')\nf.write(output)\nf.close()","9ad2e9f9":"# Set Lists\n\nThis notebook generates files that list all cards in a set in the order which I use to archive a set. It goes by collector number, which isn't in the data source, but is (hopefully) what is used as an index"}}