{"cell_type":{"88ab16c8":"code","bdce2225":"code","50fa627c":"code","743e8d51":"code","f572a900":"code","5a60bf3c":"code","a6be759a":"code","df765dcc":"code","cf90347b":"code","f033861e":"code","3a06f580":"code","2bf66690":"code","15ce9394":"code","13b2d1fe":"code","6100c132":"code","3a8c9deb":"code","dc17c443":"code","dce61698":"code","8627a2ad":"code","de259cc4":"code","49417c9c":"code","f4253fdc":"code","5f08b88d":"code","cd1dd81d":"code","e5b95b3a":"code","e756385a":"code","bd66314e":"code","97356bc4":"code","a7900e72":"code","94e0d1c3":"code","7daeac25":"code","a6378a25":"code","79ac7aea":"markdown","688fe99c":"markdown","b337c4f1":"markdown","826d7486":"markdown","9758e2af":"markdown","84672be3":"markdown","a1eae46e":"markdown"},"source":{"88ab16c8":"# This Python 3 environment comes with many helpful analytics libraries installed\n# It is defined by the kaggle\/python Docker image: https:\/\/github.com\/kaggle\/docker-python\n# For example, here's several helpful packages to load\n\nimport numpy as np # linear algebra\nimport pandas as pd # data processing, CSV file I\/O (e.g. pd.read_csv)\n\n# Input data files are available in the read-only \"..\/input\/\" directory\n# For example, running this (by clicking run or pressing Shift+Enter) will list all files under the input directory\n\nimport os\nfor dirname, _, filenames in os.walk('\/kaggle\/input'):\n    for filename in filenames:\n        print(os.path.join(dirname, filename))\n\n# You can write up to 20GB to the current directory (\/kaggle\/working\/) that gets preserved as output when you create a version using \"Save & Run All\" \n# You can also write temporary files to \/kaggle\/temp\/, but they won't be saved outside of the current session","bdce2225":"df = pd.read_csv('..\/input\/world-happiness-report-2021\/world-happiness-report-2021.csv')\ndf1=pd.read_csv('..\/input\/world-happiness-report-2021\/world-happiness-report.csv')\nimport warnings\nwarnings.filterwarnings(\"ignore\")","50fa627c":"df.head()","743e8d51":"df1.head()","f572a900":"import matplotlib.pyplot as plt\nimport matplotlib.gridspec as gs\nimport seaborn as sns","5a60bf3c":"#Colors to be used in the plots\ncolor=[\"#f94144\",\"#f3722c\",\"#f8961e\",\"#f9c74f\",\"#90be6d\",\"#43aa8b\",\"#577590\"]\nsns.palplot(color)","a6be759a":"#top 5 and bottom 5 countries in 2021 report\nfig= plt.figure(figsize=(15,8))\ng=gs.GridSpec(ncols=1, nrows=2, figure=fig)\nplt.suptitle(\"Top 5 and Bottom 5 countries in Happiens index 2021\", family='Serif', weight='bold', size=20)\nax1=plt.subplot(g[0,0])\n\ntop_5=df.head(5)\nbot_5= df.tail(5)\nax1=sns.barplot(data=top_5, x=top_5['Ladder score'],y=top_5['Country name'], color=color[4])\n#ax1.set_xlabel('')\nax1.xaxis.set_visible(False)\nax1.annotate(\"Top 5 countries in Happiness index\",xy=(8,2), family='Serif', weight='bold', size=12)\nax2=plt.subplot(g[1,0], sharex=ax1)\nax2=sns.barplot(data=bot_5, x=bot_5['Ladder score'],y=bot_5['Country name'], color=color[0])\nax2.annotate(\"Bottom 5 countries in Happiness index\",xy=(8,2), family='Serif', weight='bold', size=12)\nfor s in ['left','right','top','bottom']:\n    ax1.spines[s].set_visible(False)\n    ax2.spines[s].set_visible(False)","df765dcc":"fig=plt.figure(figsize=(15,8))\nplt.title(\"Ladder score distribution and mean by countries\",family='Serif', weight='bold', size=20)\nsns.kdeplot(df['Ladder score'], fill=True,color=color[-1], shade=True, edgecolor='black', linewidth=3, ls='--', alpha=0.3)\nplt.axvline(df['Ladder score'].mean(), c='black',ls='--')\nplt.axvline(df[df['Country name']=='Finland']['Ladder score'].mean(), c=color[4])\nplt.text(x=df[df['Country name']=='Finland']['Ladder score'].mean(), y=0.15, s='Finland', rotation=90)\nplt.axvline(df[df['Country name']=='Afghanistan']['Ladder score'].mean(), c=color[0])\nplt.text(x=df[df['Country name']=='Afghanistan']['Ladder score'].mean(), y=0.15, s='Afghanistan', rotation=90)\nplt.axvline(df[df['Country name']=='India']['Ladder score'].mean(), c=color[1])\nplt.text(x=df[df['Country name']=='India']['Ladder score'].mean(), y=0.15, s='India', rotation=90)\nplt.axvline(df[df['Country name']=='United States']['Ladder score'].mean(), c=color[1])\nplt.text(x=df[df['Country name']=='United States']['Ladder score'].mean(), y=0.15, s='United States', rotation=90)\nfor s in ['left','right','top','bottom']:\n    plt.gca().spines[s].set_visible(False)\nplt.text(x=9,y=-0.05, s=\"There are difference in mean between the Asian countries and EU & American countries\", ha='right', family='San', size=15, weight='bold')","cf90347b":"fig=plt.figure(figsize=(20,8))\nplt.title(\"Ladder score distribution and mean Regional Indicators\",family='Serif', weight='bold', size=20)\nsns.kdeplot(df['Ladder score'], fill=True, shade=True, color=color[-1], linewidth=3, ls='--', edgecolor='black', alpha=0.5)\nplt.axvline(x=df['Ladder score'].mean(), linewidth=4, ls='--', color='white')\npop=x=df['Ladder score'].mean()\n\nplt.text(x=df['Ladder score'].mean(),y=0, s='Population Mean', rotation=90)\nfor i in df['Regional indicator'].unique():\n    m=df[df['Regional indicator']==i]['Ladder score'].mean()\n    \n    if m<pop:\n        c=color[1]\n    else:\n        c=color[5]\n    plt.axvline(x=m, color=c)\n    plt.text(x=m, y=0.05, rotation=90,s=i)\nfor s in ['left','right','top','bottom']:\n    plt.gca().spines[s].set_visible(False)\n   \n    ","f033861e":"fig=plt.figure(figsize=(15,8))\nplt.title(\"Ladder score distribution by Regional indicator\",family='Serif', weight='bold', size=20)\nsns.kdeplot(df['Ladder score'], fill=True,hue=df['Regional indicator'], color=color, shade=True, linewidth=2, edgecolor='white', multiple='layer')\nplt.axvline(df['Ladder score'].mean(), c='black',ls='--')\nplt.text(x=df['Ladder score'].mean(),y=-0.01,s='Population mean', size=15)\nfor s in ['left','right','top','bottom']:\n    plt.gca().spines[s].set_visible(False)\n","3a06f580":"fig=plt.figure(figsize=(15,8))\nplt.title(\"Data distribution by Regional indicator\",family='Serif', weight='bold', size=20)\nsns.boxplot(x=df['Ladder score'],y=df['Regional indicator'], palette=color)\nplt.axvline(df['Ladder score'].mean(), c='black',ls='--')\nplt.text(x=df['Ladder score'].mean(),y=10,s='Population mean', size=15)\nfor s in ['left','right','top','bottom']:\n    plt.gca().spines[s].set_visible(False)\n","2bf66690":"from scipy.stats import ttest_ind, wilcoxon, ttest_rel\ndef hypo_test(reg1,reg2):\n    r1 = df[df['Regional indicator']==reg1]['Ladder score']\n    r2 = df[df['Regional indicator']==reg2]['Ladder score']\n    t1=\"Hypotheis test between regions: {} vs {}\".format(reg1,reg2)\n    stats, p_value= ttest_ind(r1, r2)\n    \n    if p_value <0.05:\n        t2=\"since p_value : {} is < 0.05, we can reject the Null Hypothesis and say there are significant difference\".format(np.round(p_value,3))\n    else:\n        t2=\"P_value: {} is >0.05, we can't reject the Null Hypothesis, so we say there is no difference\".format(np.round(p_value,3))\n    fig=plt.figure(figsize=(15,3))\n    plt.title(t1,family='Serif', weight='bold', size=20)\n    plt.text(x=plt.xlim()[1]\/2,y=plt.ylim()[1]\/2,s=t2,ha='center', family='Serif', weight='bold', size=15)\n    for pos in ['right','top','bottom','left']:\n        plt.gca().spines[pos].set_visible(False)\n    plt.tick_params(axis='x', which='both', bottom=False, top=False, labelbottom=False)\n    plt.tick_params(axis='y', which='both', right=False, left=False, labelleft=False)\n    return","15ce9394":"reg=df['Regional indicator'].unique()\nhypo_test(reg[0],reg[1])\nhypo_test(reg[0],reg[-1])","13b2d1fe":"top_5 = df1.groupby('Country name')['Life Ladder'].mean().nlargest(5)\n#bot_5 = df1.groupby('Country name')['Life Ladder'].mean().nsmallest(5)\nfig=plt.figure(figsize=(15,10))\nplt.title(\"Life Ladder of top 5 countries and India\",family='Serif', weight='bold', size=20)\nsns.lineplot(data=df1[df1['Country name'].isin(top_5.index)], x='year',y='Life Ladder',hue='Country name', palette=color[0:5])\nsns.lineplot(data=df1[df1['Country name']=='India'], x='year',y='Life Ladder', color=color[1], linewidth=3, ls='--')\n","6100c132":"df2=df[['Country name', 'Regional indicator', 'Ladder score',\n        'Logged GDP per capita', 'Social support', 'Healthy life expectancy',\n       'Freedom to make life choices', 'Generosity',\n       'Perceptions of corruption']]","3a8c9deb":"cols=df2.corr()['Ladder score'].sort_values(ascending=False)","dc17c443":"fig=plt.figure(figsize=(15,10))\nplt.suptitle(\"Comparing the Features that contribute for Ladder score\",family='Serif', weight='bold', size=20)\nj=0\nfor i in cols.index[1:]:\n    \n    ax=plt.subplot(421+j)\n    ax=sns.regplot(data=df2, x='Ladder score',y=i, color=color[-j])\n    ax.legend('')\n    j=j+1\n    \nplt.legend('')\n","dce61698":"def comp_country(country1, country2):\n    df3=df1[df1['Country name'].isin([country1,country2])]\n    df3.rename(columns={'Healthy life expectancy at birth':'Healthy life expectancy','Log GDP per capita':'Logged GDP per capita','Life Ladder':'Ladder score'}, inplace=True)\n    fig=plt.figure(figsize=(15,10))\n    plt.suptitle(\"Comparing the Features that contribute for Happiness index for {} vs {}\".format(country1, country2),family='Serif', weight='bold', size=20)\n    j=0 \n    for i in cols.index:    \n        ax=plt.subplot(421+j)\n        sns.lineplot(data=df3,x='year',y=i, hue='Country name', color=color[-2])\n        j=j+1\n    return","8627a2ad":"comp_country('India','Finland')","de259cc4":"comp_country('United States','Finland')","49417c9c":"df.mean()","f4253fdc":"def country_comp1(country1, country2):\n    df4=df[df['Country name'].isin([country1, country2])]\n    df4=df4[cols.index].T\n    df4.columns=[country1,country2]\n    print(df4)\n    fig = plt.figure(figsize=(15,10))\n    plt.suptitle(\"Comparison {} and {}\".format(country1, country2),family='Serif', weight='bold', size=20)\n    g=gs.GridSpec(nrows=1, ncols=2, wspace=0)\n    ax1=plt.subplot(g[0,0])\n    for s in ['left','right','top','bottom']:\n        ax1.spines[s].set_visible(False)\n   \n    #ax1.set_xlim(xmin=0)\n    ax1=sns.barplot(data=df4,y=df4.index,x=country1, color=color[-1]).invert_xaxis()\n    \n    ax2=plt.subplot(g[0,1], sharey=ax1)\n    ax2=sns.barplot(data=df4,y=df4.index,x=country2, color=color[-2])\n    #ax2.set_xlim(xmin=0)\n    ax2.yaxis.tick_right()\n    for s in ['left','right','top','bottom']:\n        ax2.spines[s].set_visible(False)\n    return","5f08b88d":"ax1.get_xlim()","cd1dd81d":"country_comp1('Finland','India')","e5b95b3a":"country_comp1('United States','Russia')","e756385a":"country_comp1('United States','India')","bd66314e":"df6=df1.merge(df['Regional indicator'],left_on=df1['Country name'], right_on=df['Country name']).drop('key_0', axis=1)","97356bc4":"df6['Regional indicator'].unique()","a7900e72":"df6[df6['Regional indicator']=='South Asia'].pivot_table(index='Country name', columns='year')['Life Ladder']","94e0d1c3":"#fig=plt.figure(figsize=(15,10))\nfor i in df6['Regional indicator'].unique():\n    _,ax=plt.subplots(figsize=(15,10))\n    ax.set_title(\"Comparison of Ladder score by countries in {} Region\".format(i),family='Serif', weight='bold', size=20)\n    ax=sns.heatmap(df6[df6['Regional indicator']==i].pivot_table(index='Country name', columns='year')['Life Ladder'], square=True, linewidths=1, cmap='GnBu_r', annot=True, cbar=False)\n   # plt.show()","7daeac25":"# Ladder score changes - Inida\ndf7=df1[df1['Country name'].isin(['India','Finland'])].loc[:,'Country name':'Life Ladder']\n","a6378a25":"fig=plt.figure(figsize=(15,8))\nax=plt.subplot()\nax=sns.lineplot(data=df7,x='year',y='Life Ladder', alpha=0.5, hue='Country name')\nax=sns.scatterplot(data=df7,x='year',y='Life Ladder',hue='Country name', size='Life Ladder', sizes=(100,700))\nfor i in range(len(df7)):\n    ax.text(x=df7['year'].iloc[i],y=df7['Life Ladder'].iloc[i], s=df7['Life Ladder'].iloc[i])","79ac7aea":"# Observation\nAbove plot clearly shows that the columns \n1. Logged GDP per capita\n2. Social support\n3. Healthy life expectancy\n4. Freedom to make life choices\n5. Generosity - less likely\n6. Perceptions of corruption\n\nhave clear contribution to Happiness index","688fe99c":"\n1. df - consist of 2021 happiness index and corresponding data\n2. df1 - consist of past records by country","b337c4f1":"# Conclusion\nCountries having good Healthly life, Social support, Freedom to make life choised, less corruptions, good per capita income have high happiness index","826d7486":"Let us check what are the field contribute to happiness index","9758e2af":"# Hypothesis testing for Regions\n# is there a significant difference in between Two Regions\n\n# hypothesis test\n\n# Ho = There is no significant differenct\n# H1 = There are signifcant difference","84672be3":"# Read and Analyse Data","a1eae46e":"# Import plotting libraries"}}