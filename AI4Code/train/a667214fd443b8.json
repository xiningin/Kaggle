{"cell_type":{"bcd4e54b":"code","f35d046e":"code","4a5b67a0":"code","f1202a56":"code","f0db978e":"code","250cef40":"code","1d8294b4":"code","2a8a2528":"code","c37d94cb":"code","5ff596b2":"code","a1be3a35":"code","0b9e7e7b":"code","ee1ac124":"code","8852201c":"code","8973d3d3":"code","1cbabff7":"code","a3d13a3d":"code","c6c65233":"code","540dcf38":"code","6d511e29":"code","dea58c7c":"code","5b0d77e7":"markdown","d6769797":"markdown","3850ef00":"markdown","42c80607":"markdown","476e24e2":"markdown","785afc23":"markdown"},"source":{"bcd4e54b":"import numpy as np\nimport pandas as pd\nimport matplotlib.pyplot as plt\nimport seaborn as sns\nimport datetime","f35d046e":"# Load all trending data by country and combine it in a single dataframe\n\ncountries = ['BR','CA','IN','KR','DE','US','GB','JP','FR','MX','RU']\ndf = pd.DataFrame()\ndf1 = pd.DataFrame()\n\n# Loop over the countries to get the whole dataset\nfor c in countries:\n    path = '\/kaggle\/input\/youtube-trending-video-dataset\/' + c + '_youtube_trending_data.csv'\n    df1 = pd.read_csv(path, parse_dates=['publishedAt','trending_date'])\n    df1['country'] = c\n    df = pd.concat([df, df1])\n\ndf.shape","4a5b67a0":"df.head()","f1202a56":"# Remove unused columns\ndf = df.drop(['thumbnail_link'], axis=1)\n# trending_date column only needs date format\ndf.trending_date = df.trending_date.dt.date\n\nstart_date = df.trending_date.min()\nend_date = df.trending_date.max()\nprint ('Date covered from %s to %s' % (start_date, end_date))\nprint ('No. of days covered: %d' % df.trending_date.nunique())","f0db978e":"# Make list of videos\nv_col = ['video_id', 'title', 'publishedAt', 'channelId', 'channelTitle']\nvideos = df[v_col].drop_duplicates(subset='video_id', keep='last') # Treat video_id as unique\n\n# Compute video-based statistics\nvideo_stat = df.groupby('video_id').agg({'video_id':'count',\n    'trending_date': ['nunique','min','max'],\n                           'view_count': 'max',\n                           'likes': 'max',\n                           'dislikes': 'max',\n                           'comment_count': 'max',\n                           'country': ['unique','nunique']})\n\nvideo_stat.columns = ['trending_count','days_trend', 'first_trend_date','last_trend_date','views','likes','dislikes',\n                      'comments','country_list','country_count']\nvideo_stat.reset_index(inplace=True)\nvideo_stat.head()","250cef40":"videos = videos.merge(video_stat, on='video_id')","1d8294b4":"# Top 10 videos that are trending the most time\nvideos.sort_values('trending_count', ascending=False).head(10)[['title','channelTitle','trending_count','country_list']]","2a8a2528":"# 10 Highest view videos\nvideos.sort_values('views', ascending=False).head(10)[['title','channelTitle','views','country_list']]","c37d94cb":"# Top 10 most liked videos\nvideos.sort_values('likes', ascending=False).head(10)[['title','channelTitle','likes','country_list']]","5ff596b2":"# Top 10 most dislike videos\nvideos.sort_values('dislikes', ascending=False).head(10)[['title','channelTitle','dislikes','country_list']]","a1be3a35":"# Top 10 videos by comments\nvideos.sort_values('comments', ascending=False).head(10)[['title','channelTitle','comments','country_list']]","0b9e7e7b":"# Trending videos with lowest views\nvideos.sort_values('views').head(10)[['title','channelTitle','views','country_list']]","ee1ac124":"# Oldest videos that become trending?\nvideos.sort_values('publishedAt').head(10)[['title','channelTitle','publishedAt','first_trend_date','country_list']]","8852201c":"channel_stat = videos.groupby('channelId').agg({'video_id':'count',\n                               'views': ['sum','mean'],\n                           'days_trend': 'sum'})\nchannel_stat.columns = ['no of videos','total views', 'average views', 'total days trending']\nchannel_stat.reset_index(inplace=True)\n\nchannel_names = df[['channelId','channelTitle']].drop_duplicates(subset='channelId', keep='last')\nchannel_stat = channel_stat.merge(channel_names, on='channelId')","8973d3d3":"# Channels with the greatest number of trending videos\nchannel_stat.sort_values('no of videos', ascending=False).head(10)[['channelTitle','no of videos']]","1cbabff7":"# Channels with highest total views\nchannel_stat.sort_values('total views', ascending=False).head(10)[['channelTitle','total views', 'no of videos']]","a3d13a3d":"channel_stat['average views'] = channel_stat['average views'].astype('int64')","c6c65233":"# Channels with highest average views\nchannel_stat.sort_values('average views', ascending=False).head(10)[['channelTitle','average views', 'no of videos']]","540dcf38":"# Channels with largest combined days of trending\nchannel_stat.sort_values('total days trending', ascending=False).head(10)[['channelTitle','total days trending', 'no of videos']]","6d511e29":"# Average view of trending video per country\ndf.groupby('country')['view_count'].mean().astype('int64').sort_values(ascending=False)","dea58c7c":"# Average 'hurdle' (minimum view) of trending video per country\nhurdles = df.groupby(['country','trending_date'])['view_count'].min().reset_index()\nhurdles.groupby('country')['view_count'].mean().astype('int64').sort_values(ascending=False)","5b0d77e7":"## Channel-based statistics","d6769797":"## Country-based Statistics","3850ef00":"That's it for now. Stay tuned!","42c80607":"# YouTube Trending Videos EDA\n\nThe notebook looks into interesting patterns of YouTube trending videos across countries. Do come back for updates!","476e24e2":"## Initial exploration","785afc23":"So we have the statistics by each video ever on trending. Let's look at them in more details.\n\n## Video-based statistics"}}