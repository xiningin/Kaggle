{"cell_type":{"c7463b33":"code","c5be82fb":"code","e34d8189":"code","a787cec9":"code","401c23a1":"code","39f7a10f":"code","e3505a6e":"code","1a78aa41":"code","fbb455db":"code","c816e3b6":"code","f565387b":"code","8078ddc6":"code","260399e8":"code","ca4e9d54":"code","1498b088":"code","c218284a":"code","d3742902":"code","24fc8cd8":"code","30f40909":"code","051bb14f":"code","462ba968":"code","a6464d75":"code","69de3f4e":"code","3f26cff5":"code","0a988e76":"code","5ac1e723":"code","7c321b9c":"code","cbe756ea":"code","91c7c451":"code","a8fb112d":"code","9117f08a":"code","1eaadfe2":"code","610217f8":"code","4602abb9":"code","13524596":"code","e90295b6":"code","731c3b09":"code","673afa26":"code","4e037662":"code","ab02f87a":"code","c1144d87":"code","b884626d":"code","824799c6":"code","4b916555":"code","b3ae8faa":"code","4ef44a8e":"code","46e8d7a6":"code","dede4cc4":"code","c17a0c53":"code","f962d6ed":"code","6896f5fc":"code","5edca040":"code","ed7bbadb":"code","4d2cdbd9":"code","c599ea31":"code","c1da59af":"code","ef28698c":"code","930342e8":"code","86a17fc5":"code","5eb89b79":"code","8fce5b56":"code","07384bb6":"code","4744b542":"code","01e7feef":"code","b9179669":"code","9d6c691c":"code","b2dba52d":"code","868f37c0":"code","2954d6e9":"code","51421f49":"code","74467fbc":"code","cb30c53e":"code","c05dfc6e":"code","54465fc9":"markdown","f00a4f5a":"markdown","c52415f5":"markdown","45766457":"markdown","ec275614":"markdown","f526ea9b":"markdown","2a4a6311":"markdown"},"source":{"c7463b33":"!conda install -c conda-forge tabula-py --yes","c5be82fb":"import numpy as np\nimport pandas as pd\nimport os\nimport matplotlib.pyplot as plt","e34d8189":"import tabula\ndfs = tabula.read_pdf('https:\/\/www.mhlw.go.jp\/content\/10601000\/000823368.pdf', lattice=True, pages ='all')\nfor i,df in enumerate(dfs):\n    print(i)\n    display(df)","a787cec9":"len(dfs)","401c23a1":"dfs[3]","39f7a10f":"col0=['No', '\u5e74\u9f62\\r(\u63a5\u7a2e\\r\u6642)', '\u6027\u5225', '\u63a5\u7a2e\u65e5', '\u767a\u751f\u65e5', '\u30ed\u30c3\u30c8\u756a\u53f7', '\u63a5\u7a2e\u56de\u6570', '\u57fa\u790e\u75be\u60a3\u7b49', '\u6b7b\u56e0\u7b49\\r(\u5831\u544a\u8005\u306b\u3088\u308b\u898b\u89e3\u30fb\u8003\u5bdf\u7b49)', '\u5831\u544a\u533b\u304c\\r\u6b7b\u56e0\u7b49\u306e\u5224\u65ad\u306b\\r\u81f3\u3063\u305f\u691c\u67fb', '\u56e0\u679c\u95a2\u4fc2\\r(\u5831\u544a\u533b\u8a55\u4fa1)', '\u4ed6\u8981\u56e0\u306e\u53ef\u80fd\\r\u6027\u306e\u6709\u7121\\r(\u5831\u544a\u533b\u8a55\u4fa1)', '\u5c02\u9580\u5bb6\u306b\u3088\u308b\u8a55\u4fa1\u30108\/4\u6642\u70b9\u3011', '\u5c02\u9580\u5bb6\u306b\u3088\u308b\u8a55\u4fa1\u30108\/25\u6642\u70b9\u3011',]\nprint(col0)","e3505a6e":"### START\ndf0=dfs[3][col0]\ndf0","1a78aa41":"### END\ndfs[132]","fbb455db":"print(dfs[3].columns.tolist())\nprint(col0)","c816e3b6":"for i,df in enumerate(dfs[4:133]):\n    if '\u767a\u751f\u65e5' in df.columns.tolist():\n        df=df[col0]\n        df0=pd.concat([df0,df])\n    else:\n        print(i+4,dfs[i+4].columns.tolist())","f565387b":"df0","8078ddc6":"df1=df0.fillna('N').reset_index(drop=True)\ndf1","260399e8":"N=[]\nfor i in range(len(df1)):\n    if df1.iloc[i,0]=='N':\n        N+=[i]\nprint(N)\nprint(len(N))","ca4e9d54":"df2=df1.drop(index=N,axis=0)\ndf3=df2.reset_index(drop=True)\ndf3","1498b088":"data=df3[['\u5e74\u9f62\\r(\u63a5\u7a2e\\r\u6642)','\u6027\u5225','\u63a5\u7a2e\u65e5','\u767a\u751f\u65e5','\u63a5\u7a2e\u56de\u6570','\u6b7b\u56e0\u7b49\\r(\u5831\u544a\u8005\u306b\u3088\u308b\u898b\u89e3\u30fb\u8003\u5bdf\u7b49)']]\ndata","c218284a":"data['sex']=data['\u6027\u5225'].map({'\u5973':0,'\u7537':1})\ndata['times']=data['\u63a5\u7a2e\u56de\u6570'].map({'1\u56de\u76ee':1,'2\u56de\u76ee':2})\ndata","d3742902":"data['\u5e74\u9f62\\r(\u63a5\u7a2e\\r\u6642)'].unique()","24fc8cd8":"age=[]\n\nfor item in data['\u5e74\u9f62\\r(\u63a5\u7a2e\\r\u6642)']:\n    \n    if item in ['\u9ad8\u9f62\u8005','\u4e0d\u660e','\u6210\u4eba']:\n        age+=['N'] \n    elif item=='\u203b\\r78\u6b73\\r\u6ce8:4\u6708\\r30\u65e5\u306e\\r\u5408\u540c\u90e8\\r\u4f1a\u8cc7\u6599\\r\u3067\u306f\u3001\\r\u300c78\u300d\u3092\\r\u300c88\u300d\u3068\u8aa4\\r\u8a18\u8f09\u3002':\n        age+=[78]        \n    elif item=='69\u6b73\\r\u219261\u6b73\\r(~6\/23\\r\u306e\u60c5\u5831\\r\u306b\u57fa\u3065\u304d\\r\u8a02\u6b63)':\n        age+=[61]\n    elif item=='71\u6b73\\r\u219272\u6b73\\r(~6\/23\\r\u306e\u60c5\u5831\\r\u306b\u57fa\u3065\u304d\\r\u8a02\u6b63)':\n        age+=[72]        \n    elif item=='70\u6b73\u4ee3\\r\u219274\u6b73\\r(~8\/25\\r\u306e\u60c5\u5831\\r\u306b\u57fa\u3065\\r\u304f)':\n        age+=[74]\n    elif item=='81\u6b73\\r\u219282\u6b73\\r(~7\/21\\r\u306e\u60c5\u5831\\r\u306b\u57fa\u3065\\r\u304f)':\n        age+=[82]        \n    elif item=='86\u6b73\\r\u219287\u6b73\\r(~7\/7\\r\u306e\u60c5\u5831\\r\u306b\u57fa\u3065\\r\u304f)':\n        age+=[87]\n    elif item=='70\u6b73\u4ee3\\r\u219274\u6b73\\r(~8\/4\\r\u306e\u60c5\u5831\\r\u306b\u57fa\u3065\\r\u304f)':\n        age+=[74]        \n    elif item=='81\u6b73\\r\u219282\u6b73\\r(~7\/21\\r\u306e\u60c5\u5831\\r\u306b\u57fa\u3065':\n        age+=[82]\n    elif item=='\u4e0d\u660e\\r\u219292\u6b73\\r(~8\/25\\r\u306e\u60c5\u5831\\r\u306b\u57fa\u3065':\n        age+=[92]        \n    elif item=='70\u6b73\u4ee3\\r\u219278\u6b73\\r(~8\/4\\r\u306e\u60c5\u5831\\r\u306b\u57fa\u3065\\r\u304f)':\n        age+=[78]\n    elif item=='92\u6b73\\r\u219291\u6b73\\r(~8\/25\\r\u306e\u60c5\u5831\\r\u306b\u57fa\u3065\\r\u304f)':\n        age+=[91]     \n    elif item=='90\u6b73\\r(~5\/26\\r\u306e\u60c5\u5831\\r\u306b\u57fa\u3065\\r\u304f)':\n        age+=[90]      \n    elif item=='80\u6b73\u4ee3':\n        age+=['N']        \n    elif item=='70\u6b73\u4ee3':\n        age+=['N']\n    elif item=='60\u6b73\u4ee3':\n        age+=['N']        \n    elif item=='60\u6b73\u4ee3\\r\u5f8c\u534a':\n        age+=['N']\n    elif item=='N':\n        age+=['N']        \n    else:\n        item2=item.replace('\u6b73','')\n        age+=[int(item2)]\n\ndata['age']=age\ndata['age'].unique()","30f40909":"data['\u63a5\u7a2e\u65e5'].unique()","051bb14f":"date0=[]\nfor item in data['\u63a5\u7a2e\u65e5']:    \n    \n    if item=='\u4e0d\u660e':\n        date0+=['N']\n    elif item=='2021\/5\/14\\r\u6ce8:6\u670823\u65e5\u306e\u5408\\r\u540c\u90e8\u4f1a\u8cc7\u6599\u3067\\r\u306f\u3001\u300c14\u65e5\u300d\u3092\u300c16\\r\u65e5\u300d\u3068\u8aa4\u8a18\u8f09\u3002':\n        date0+=['2021\/5\/14']       \n    elif item=='\u4e0d\u660e\\r\u21922021\u5e744\u670820\\r\u65e5\\r(~7\/7\u306e\u60c5\u5831\u306b\\r\u57fa\u3065\u304f)':\n        date0+=['2021\/4\/20']\n    elif item=='2021\/5\/20\\r(~8\/25\u306e\u60c5\u5831\u306b\\r\u57fa\u3065\u304f)':\n        date0+=['2021\/5\/20']       \n    elif item=='\u4e0d\u660e\\r\u21922021\u5e746\u67083\u65e5\\r(~8\/25\u306e\u60c5\u5831\u306b\\r\u57fa\u3065\u304f)':\n        date0+=['2021\/6\/3']        \n    elif item=='\u4e0d\u660e\\r\u21922021\u5e745\u670821\\r\u65e5\\r(~7\/21\u306e\u60c5\u5831\u306b\\r\u57fa\u3065\u304f)':\n        date0+=['2021\/5\/21']       \n    elif item== '\u4e0d\u660e\\r\u21922021\u5e745\u670826\\r\u65e5\\r(~8\/4\u306e\u60c5\u5831\u306b\\r\u57fa\u3065\u304f)':\n        date0+=['2021\/5\/26']        \n    elif item== '2021\u5e745\u670826\u65e5\\r(~7\/21\u306e\u60c5\u5831\u306b\\r\u57fa\u3065\u304f)':\n        date0+=['2021\/5\/26']       \n    elif item== '\u4e0d\u660e\\r\u21922021\u5e746\u670814\\r\u65e5\\r(~8\/25\u306e\u60c5\u5831\u306b\\r\u57fa\u3065\u304f)':\n        date0+=['2021\/6\/14']\n    elif item=='2021\u5e745\u6708(\u65e5\u4ed8\\r\u4e0d\u660e)\\r\u21922021\u5e745\u670831\\r\u65e5\\r(~8\/25\u306e\u60c5\u5831\u306b\\r\u57fa\u3065\u304f)':\n        date0+=['2021\/5\/31']       \n    elif item=='2021\u5e745\u6708\u4e0b\u65ec':\n        date0+=['N']        \n    elif item=='2021\u5e746\u6708(\u65e5\u4ed8\\r\u4e0d\u660e)':\n        date0+=['N']       \n    elif item=='2021\u5e747\u670811\u65e5\\r\u53c8\u306f12\u65e5':\n        date0+=['N']        \n    elif item=='2021\u5e746\u6708\u672b':\n        date0+=['N']       \n    elif item== '2021\u5e747\u6708(\u65e5\u4ed8\\r\u4e0d\u660e)':\n        date0+=['N']    \n    else:\n        item2=item.replace('\u5e74','\/').replace('\u6708','\/').replace('\u65e5','')\n        date0+=[item2]\n        \ndata['date vaccination']=date0\ndata['date vaccination'].unique()","462ba968":"data['\u767a\u751f\u65e5'].unique()","a6464d75":"date1=[]\nfor item in data['\u767a\u751f\u65e5']:\n    \n    if item=='\u4e0d\u660e':\n        date1+=['N'] \n    elif item in '2021\u5e747\u670816\u65e5\\r\u9803':\n        date1+=['N'] \n    elif item in '\u4e0d\u660e\\r\u21922021\u5e747\u67085\u65e5\\r(~8\/25\u306e\u60c5\u5831\u306b\\r\u57fa\u3065\u304f)':\n        date1+=['N'] \n    elif item in '\u4e0d\u660e(\u63a5\u7a2e\u7d041\u30f5\\r\u6708\u5f8c)':\n        date1+=['N'] \n    elif item in '\u4e0d\u660e(\u63a5\u7a2e10\u65e5\\r\u5f8c)':\n        date1+=['N'] \n    elif item in '\u4e0d\u660e(\u63a5\u7a2e9\u65e5\\r\u5f8c)':\n        date1+=['N'] \n    elif item in '\u4e0d\u660e(\u63a5\u7a2e4\u65e5\\r\u5f8c)': \n        date1+=['N'] \n    elif item in '\u4e0d\u660e(\u63a5\u7a2e2\u9031\u9593\\r\u5f8c)': \n        date1+=['N'] \n    elif item in '2021\u5e747\u6708':\n        date1+=['N'] \n    elif item in '\u4e0d\u660e(\u63a5\u7a2e14\u65e5\\r\u5f8c)': \n        date1+=['N'] \n    elif item in '\u4e0d\u660e(\u63a5\u7a2e\u306e1\u9031\\r\u9593\u4ee5\u4e0a\u5f8c)':\n        date1+=['N'] \n    elif item in '2021\u5e748\u6708(\u63a5\u7a2e\\r\u7d0410\u65e5\u5f8c)':\n        date1+=['N'] \n    elif item in '\u4e0d\u660e(\u63a5\u7a2e\u7fcc\u65e5)':\n        date1+=['N'] \n    elif item in '\u4e0d\u660e\\r\u2192\u4e0d\u660e(2021\u5e746\\r\u6708)\\r(~7\/7\u306e\u60c5\u5831\u306b\\r\u57fa\u3065\u304f)':\n        date1+=['N'] \n    elif item in '\u4e0d\u660e(2021\u5e745\u6708\\r29\u65e5\u53c8\u306f30\u65e5)':\n        date1+=['N'] \n    elif item in '\u4e0d\u660e(\u63a5\u7a2e8\u65e5\\r\u5f8c)':\n        date1+=['N'] \n    elif item in '\u4e0d\u660e(\u63a5\u7a2e\u6570\u65e5\\r\u5f8c)':\n        date1+=['N'] \n    elif item in '\u4e0d\u660e(\u63a5\u7a2e5\u65e5\\r\u5f8c)': \n        date1+=['N'] \n    elif item in '\u4e0d\u660e(\u63a5\u7a2e3\u65e5\\r\u5f8c)': \n        date1+=['N'] \n    elif item in '\u4e0d\u660e(\u63a5\u7a2e12\u6642\\r\u9593\u5f8c)':\n        date1+=['N'] \n    elif item in '2021\/6\/19(\u63a8\\r\u5831\u544a\u306b\u57fa\u3065\u304f\u3002':\n        date1+=['N'] \n    elif item in '\u4e0d\u660e(\u767a\u75c7\u306f6\u6708\\r23\u65e5)':\n        date1+=['N'] \n    elif item in '\u4e0d\u660e(\u63a5\u7a2e\u65e5)':\n        date1+=['N'] \n    elif item in '2021\u5e746\u6708(\u63a5\u7a2e\\r\u7d0413\u65e5\u5f8c)':\n        date1+=['N'] \n    elif item in '2021\u5e747\u6708(\u65e5\u4ed8\\r\u4e0d\u660e)':\n        date1+=['N'] \n    elif item in '2021\u5e747\u6708(\u65e5\u4ed8\\r\u4e0d\u660e\u3001\u30ef\u30af\u30c1\u30f3\u63a5\\r\u7a2e5\u65e5\u76ee)':\n        date1+=['N'] \n    elif item in '\u4e0d\u660e(\u63a5\u7a2e\u5f8c1\u9031\\r\u9593\u4ee5\u5185)':\n        date1+=['N'] \n    elif item in '\u4e0d\u660e(\u63a5\u7a2e18\u65e5\\r\u5f8c)': \n        date1+=['N'] \n    elif item in '\u4e0d\u660e(\u63a5\u7a2e2\u65e5\\r\u5f8c)': \n        date1+=['N']\n    elif item=='2021\u5e743\u670827\u65e5\\r\u21922021\u5e743\u670829\\r\u65e5\\r(~8\/25\u306e\u60c5\u5831\u306b\\r\u57fa\u3065\u304f)':\n        date1+=['2021\/3\/29']          \n    elif item== '2021\/5\/16\\r\u6ce8:5\u670826\u65e5\u306e\u5408\\r\u540c\u90e8\u4f1a\u8cc7\u6599\u3067\\r\u306f\u3001\u6b7b\u4ea1\u65e5\u306e\u300c16\\r\u65e5\u300d\u3092\u75c7\u72b6\u767a\u751f\u65e5\\r\u306e\u300c8\u65e5\u300d\u3068\u8aa4\u8a18\\r\u8f09\u3002':\n        date1+=['2021\/5\/16']           \n    elif item=='2021\/5\/17\\r(~7\/7\u306e\u60c5\u5831\u306b\\r\u57fa\u3065\u304f)':\n        date1+=['2021\/5\/17']               \n    elif item=='\u4e0d\u660e(2021\u5e746\u6708\\r22\u65e5\u4ee5\u524d)':\n        date1+=['N']           \n    elif item=='2021\u5e745\u670827\u65e5\\r\u21922021\u5e745\u670828\\r\u65e5\\r(~7\/21\u306e\u60c5\u5831\u306b\\r\u57fa\u3065\u304d\u8a02\u6b63)':\n        date1+=['2021\/5\/28']      \n    elif item=='2021\u5e746\u670814\u65e5\\r\u21922021\u5e746\u670815\\r\u65e5\\r(~7\/7\u307e\u3067\u306e\u60c5\\r\u5831\u306b\u57fa\u3065\u304f)':\n        date1+=['2021\/6\/15']           \n    elif item=='\u4e0d\u660e\\r\u21922021\u5e746\u67083\u65e5\\r(~8\/25\u306e\u60c5\u5831\u306b\\r\u57fa\u3065\u304f)':\n        date1+=['2021\/6\/3']               \n    elif item=='\u4e0d\u660e(\u63a5\u7a2e\u5f8c\u7d04\\r10\u65e5)\\r\u21922021\u5e746\u67081\u65e5\\r(~7\/21\u306e\u60c5\u5831\u306b\\r\u57fa\u3065\u304f)':\n        date1+=['2021\/6\/1']           \n    elif item=='2021\u5e745\u670830\u65e5\\r\u6ce8:6\u670823\u65e5\u306e\u5408\\r\u540c\u90e8\u4f1a\u8cc7\u6599\u3067\\r\u306f\u3001\u300c30\u65e5\u300d\u3092\u300c28\\r\u65e5\u300d\u3068\u8aa4\u8a18\u8f09\u3002':\n        date1+=['2021\/5\/30']\n    elif item=='\u4e0d\u660e(\u63a5\u7a2e\u7d042\u9031\\r\u9593\u5f8c\u30012021\u5e746\\r\u6708)\\r\u21922021\u5e746\u670811\\r\u65e5\\r(~8\/4\u306e\u60c5\u5831\u306b\\r\u57fa\u3065\u304f)':\n        date1+=['2021\/6\/11']           \n    elif item=='2021\u5e746\u670816\u65e5\\r\u21922021\u5e746\u670815\\r\u65e5\\r(~8\/25\u306e\u60c5\u5831\u306b\\r\u57fa\u3065\u304f)':\n        date1+=['2021\/6\/15']               \n    elif item=='2021\u5e746\u670826\u65e5\\r\u21922021\u5e746\u670827\\r\u65e5\\r(~8\/25\u306e\u60c5\u5831\u306b\\r\u57fa\u3065\u304f)':\n        date1+=['2021\/6\/27']           \n    elif item=='2021\u5e746\u670830\u65e5\\r\u21922021\u5e747\u67084\u65e5\\r(~8\/4\u306e\u60c5\u5831\u306b\\r\u57fa\u3065\u304f)':\n        date1+=['2021\/7\/4']      \n    elif item=='\u4e0d\u660e(\u63a5\u7a2e\u6570\u65e5\\r\u5f8c)\\r\u21922021\u5e746\u670825\\r\u65e5\\r(~8\/4\u306e\u60c5\u5831\u306b\\r\u57fa\u3065\u304f)':\n        date1+=['2021\/6\/25']  \n    elif item=='2021\/6\/19(\u63a8\\r\u5b9a)\\r\u203b\u691c\u8996\u533b\u304b\u3089\u306e\\r\u5831\u544a\u306b\u57fa\u3065\u304f\u3002':\n        date1+=['N']          \n    elif item=='2021\u5e746\u670821\u65e5\\r\u53c8\u306f22\u65e5':\n        date1+=['N']               \n    elif item=='2021\u5e746\u6708(\u65e5\u4ed8\\r\u4e0d\u660e)\\r\u21922021\u5e746\u670823\\r\u65e5\\r(~8\/25\u306e\u60c5\u5831\u306b\\r\u57fa\u3065\u304f)':\n        date1+=['2021\/6\/23']           \n    elif item=='2021\u5e746\u6708(\u65e5\u4ed8\\r\u4e0d\u660e)\\r\u21922021\u5e746\u670814\\r\u65e5\\r(~8\/25\u306e\u60c5\u5831\u306b\\r\u57fa\u3065\u304f)':\n        date1+=['2021\/6\/14']       \n    elif item=='2021\u5e746\u670818\u65e5\\r\u21922021\u5e746\u670819\\r\u65e5\\r(~8\/25\u306e\u60c5\u5831\u306b\\r\u57fa\u3065\u304f)':\n        date1+=['2021\/6\/19']           \n    elif item=='2021\u5e747\u67082\u65e5\\r\u21922021\u5e747\u670817\\r\u65e5\\r(~8\/25\u306e\u60c5\u5831\u306b\\r\u57fa\u3065\u304f)':\n        date1+=['2021\/7\/17']  \n    elif item=='2021\/7\/28\\r\u21922021\/7\/29\\r(~8\/25\u306e\u60c5\u5831\u306b\\r\u57fa\u3065\u304f)':\n        date1+=['2021\/7\/29']           \n    else:\n        item2=item.replace('\u5e74','\/').replace('\u6708','\/').replace('\u65e5','')\n        date1+=[item2]    \n\ndata['date mortality']=date1\ndata['date mortality'].unique()","69de3f4e":"Drop1=[]\nfor i,item in enumerate(data['date vaccination']):\n    if item =='N':\n        Drop1+=[i]\nprint(Drop1)","3f26cff5":"Drop2=[]\nfor i,item in enumerate(data['date mortality']):\n    if item =='N':\n        Drop2+=[i]\nprint(Drop2)","0a988e76":"Drop3=sorted(set(Drop1+Drop2))\nprint(Drop3)","5ac1e723":"data=data.drop(index=Drop3,axis=0)\ndata","7c321b9c":"data['date vaccination2']=pd.to_datetime(data['date vaccination'])\ndata['date vaccination2']","cbe756ea":"data['date mortality2']=pd.to_datetime(data['date mortality'])\ndata['date mortality2']","91c7c451":"data['days']=data['date mortality2']-data['date vaccination2']\ndata","a8fb112d":"data3=data.copy()\ndata3","9117f08a":"data2=data['days'].value_counts()\nprint(data2)","1eaadfe2":"days_df0=data2\ndays_df0=pd.DataFrame(days_df0)\ndays_df0[1]=data2.index.days\ndays_df0.columns=['n','days after vaccination']\ndays_df1=days_df0[days_df0['days after vaccination']<=21][0<=days_df0['days after vaccination']]\ndays_df2=days_df1.sort_values(['days after vaccination'])\ndays_df3=days_df2.set_index('days after vaccination')","610217f8":"days_df3","4602abb9":"days_df3.plot.bar(y=['n'],alpha=0.8,figsize=(12,6))\nplt.title(\"Case fatality after vaccination of Pfizer's in Japan (-Aug8) \",size=24)\nplt.ylabel('days after vaccination')\nplt.ylabel('cases')\nplt.savefig('.\/FATAL_pfizer_aug8.jpg')\nplt.show()","13524596":"words=[]\nfor item0 in list(data['\u6b7b\u56e0\u7b49\\r(\u5831\u544a\u8005\u306b\u3088\u308b\u898b\u89e3\u30fb\u8003\u5bdf\u7b49)'].unique()):\n    words+=[str(item0).replace('\\r','').replace('\u306e\u60c5\u5831\u306b\u57fa\u3065\u304f','').replace('\u307e\u3067','').replace('\u4e0d\u660e\u2192','')\n        .replace('\/','').replace('0','').replace('1','').replace('2','').replace('3','').replace('4','')\n        .replace('5','').replace('6','').replace('7','').replace('8','').replace('9','').replace('()','')\n        .replace('(~)','').replace('\u203b','').replace('(\u4e07)','').replace('(~\u6708\u65e5)','').replace('(\u5ea6)','')]\nwords2=pd.Series(words).unique()\nprint(sorted(list(words2)))","e90295b6":"query=['\u5165\u6d74','\u8001\u8870','\u81ea\u6bba','\u547c\u5438','\u5fc3','\u8133','\u51fa\u8840']\nquery_number=[]\nfor item in query:\n    t=0\n    for item2 in data['\u6b7b\u56e0\u7b49\\r(\u5831\u544a\u8005\u306b\u3088\u308b\u898b\u89e3\u30fb\u8003\u5bdf\u7b49)'].to_list():\n        if item in item2:\n            t+=1\n    query_number+=[t]\n    \ndf=pd.DataFrame(query)\ndf[1]=query_number\ndf.columns=['\u30ad\u30fc\u30ef\u30fc\u30c9','\u4f8b\u6570']\ndf1=df.sort_values('\u4f8b\u6570',ascending=False).reset_index(drop=True)\ndf1","731c3b09":"data3","673afa26":"data4=data3[['sex','times','age']].reset_index(drop=True)\ndata4","4e037662":"N=data4[data4['age']=='N'].index.tolist()\nN","ab02f87a":"data4=data4.drop(index=data4.index[N])\ndata4['number']=1\ndata4['age_band']=data4['age'].apply(lambda x:int(x\/10))\ndata4","c1144d87":"data4['age'].min()","b884626d":"data3[data3['age']==16]","824799c6":"data3[data3['age']==22]","4b916555":"data3[data3['age']==23]","b3ae8faa":"data3[data3['age']==25]","4ef44a8e":"data3[data3['age']==26]","46e8d7a6":"data3[data3['age']==28]","dede4cc4":"data5a=data4.groupby('age_band').sum()\ndata5a","c17a0c53":"data5a.plot.bar(y=['number'],alpha=0.8,figsize=(12,6))\nplt.title(\"Case fatality after vaccination of Pfizer's by age band\",size=24)\nplt.xlabel('age band')\nplt.ylabel('cases')\nplt.show()","f962d6ed":"data5b=data4.groupby('times').sum()\ndata5b","6896f5fc":"data5b.plot.bar(y=['number'],alpha=0.8,figsize=(12,6))\nplt.title(\"Case fatality after vaccination of Pfizer's by vacination times\",size=24)\nplt.xlabel('times')\nplt.ylabel('cases')\nplt.show()","5edca040":"data5c=data4.groupby('sex').sum()\ndata5c","ed7bbadb":"data5c.plot.bar(y=['number'],alpha=0.8,figsize=(12,6))\nplt.title(\"Case fatality after vaccination of Pfizer's by sex\",size=24)\nplt.xlabel('sex')\nplt.ylabel('cases')\nplt.show()\n# 0:female,1:male","4d2cdbd9":"del data\ndel data2","c599ea31":"dfs = tabula.read_pdf('https:\/\/www.mhlw.go.jp\/content\/10601000\/000823369.pdf', lattice=True, pages ='all')\nfor i,df in enumerate(dfs):\n    print(i)\n    display(df)","c1da59af":"len(dfs)","ef28698c":"dfs[3]","930342e8":"col1=['No', '\u5e74\u9f62\\r(\u63a5\u7a2e\\r\u6642)', '\u6027\u5225', '\u63a5\u7a2e\u65e5', '\u767a\u751f\u65e5', '\u30ed\u30c3\u30c8\u756a\u53f7', '\u63a5\u7a2e\u56de\u6570', '\u57fa\u790e\u75be\u60a3\u7b49', '\u6b7b\u56e0\u7b49\\r(\u5831\u544a\u8005\u306b\u3088\u308b\u898b\u89e3\u30fb\u8003\u5bdf\u7b49)', '\u5831\u544a\u533b\u304c\\r\u6b7b\u56e0\u7b49\u306e\u5224\u65ad\u306b\\r\u81f3\u3063\u305f\u691c\u67fb', '\u56e0\u679c\u95a2\u4fc2\\r(\u5831\u544a\u533b\u8a55\u4fa1)', '\u5c02\u9580\u5bb6\u306b\u3088\u308b\u8a55\u4fa1\u30108\/4\u6642\u70b9\u3011', '\u5c02\u9580\u5bb6\u306b\u3088\u308b\u8a55\u4fa1\u30108\/25\u6642\u70b9\u3011',]\nprint(col1)","86a17fc5":"df0=dfs[3][col1]\ndf0","5eb89b79":"for i,df in enumerate(dfs[4:6]):\n    if '\u767a\u751f\u65e5' in df.columns.tolist():\n        df=df[col1]\n        df0=pd.concat([df0,df])\n    else:\n        print(i+4,dfs[i+4].columns.tolist())","8fce5b56":"df1=df0.fillna('N').reset_index(drop=True)\ndf1","07384bb6":"df1","4744b542":"N=[]\nfor i in range(len(df1)):\n    if df1.iloc[i,0]=='N':\n        N+=[i]\nprint(N)\nprint(len(N))","01e7feef":"df2=df1.drop(index=N,axis=0)\ndf3=df2.reset_index(drop=True)\ndf3\n\ndata=df3[['\u5e74\u9f62\\r(\u63a5\u7a2e\\r\u6642)','\u6027\u5225','\u63a5\u7a2e\u65e5','\u767a\u751f\u65e5','\u63a5\u7a2e\u56de\u6570','\u6b7b\u56e0\u7b49\\r(\u5831\u544a\u8005\u306b\u3088\u308b\u898b\u89e3\u30fb\u8003\u5bdf\u7b49)']]\ndata","b9179669":"data['sex']=data['\u6027\u5225'].map({'\u5973':0,'\u7537':1})\ndata['times']=data['\u63a5\u7a2e\u56de\u6570'].map({'1\u56de\u76ee':1,'2\u56de\u76ee':2})\ndata","9d6c691c":"age=[]\nfor item in data['\u5e74\u9f62\\r(\u63a5\u7a2e\\r\u6642)']:\n    item2=item.replace('\u6b73','')\n    if len(item2)<4 and item2!='\u4e0d\u660e':\n        age+=[int(item2)]\n    else:\n        age+=['N']\ndata['age']=age\ndata","b2dba52d":"date0=[]\nfor item in data['\u63a5\u7a2e\u65e5']:\n    date0+=[item.replace('\u5e74','\/').replace('\u6708','\/').replace('\u65e5','')]\ndata['date vaccination']=date0","868f37c0":"date1=[]\nfor item in data['\u767a\u751f\u65e5']:\n    if '\u4e0d\u660e' in item:\n        date1+=['N']\n    else:    \n        date1+=[item.replace('\u5e74','\/').replace('\u6708','\/').replace('\u65e5','')]\ndata['date mortality']=date1\ndata","2954d6e9":"data=data.drop(index=[6],axis=0)\ndata","51421f49":"data['date vaccination2']=pd.to_datetime(data['date vaccination'])\ndata['date mortality2']=pd.to_datetime(data['date mortality'])\ndata['days']=data['date mortality2']-data['date vaccination2']\ndata","74467fbc":"data2m=data['days'].value_counts()\nprint(data2m)","cb30c53e":"days_df0=data2m\ndays_df0=pd.DataFrame(days_df0)\ndays_df0[1]=data2m.index.days\ndays_df0.columns=['n','days after vaccination']\ndays_df1=days_df0[days_df0['days after vaccination']<=21][0<=days_df0['days after vaccination']]\ndays_df2=days_df1.sort_values(['days after vaccination'])\ndays_df3=days_df2.set_index('days after vaccination')","c05dfc6e":"days_df3.plot.bar(y=['n'], alpha=0.8, figsize=(12,6))\nplt.title(\"Case fatality after vaccination of Moderna's in Japan (-Aug8)\" , size=24)\nplt.ylabel('days after vaccination')\nplt.ylabel('cases')\nplt.savefig('.\/FATAL_moderna_aug8.jpg')\nplt.show()","54465fc9":"# **\u7b2c67\u56de\u539a\u751f\u79d1\u5b66\u5be9\u8b70\u4f1a\u4e88\u9632\u63a5\u7a2e\u30fb\u30ef\u30af\u30c1\u30f3\u5206\u79d1\u4f1a\u526f\u53cd\u5fdc\u691c\u8a0e\u90e8\u4f1a**\n### \u7b2c16\u56de \u85ac\u4e8b\u30fb\u98df\u54c1\u885b\u751f\u5be9\u8b70\u4f1a\u85ac\u4e8b\u5206\u79d1\u4f1a \u533b\u85ac\u54c1\u7b49\u5b89\u5168\u5bfe\u7b56\u90e8\u4f1a\u5b89\u5168\u5bfe\u7b56\u8abf\u67fb\u4f1a\uff08\u5408\u540c\u958b\u50ac\uff09\u3000\n#### \u4ee4\u548c\uff13\u5e74\uff18\u670825\u65e5\uff08\u6c34\uff09","f00a4f5a":"## Number of fatal cases was extremely high 1 day after vaccination and relatively high until 7 days after vaccination, which might indicate that these fatalities are related to vaccination. \n* If not related to vaccination, number shoud be almost constant on days. \n* Even if the relation between vaccination and fatality cannot be judged in each case, it is apparent that there is a relation between them as a whole.\n* This tendency is similar to the result on 'The Vaccine Adverse Event Reporting System (VAERS)'.\n* Check also: https:\/\/www.kaggle.com\/stpeteishii\/covid19-vaccination-risk\/data","c52415f5":"### **\u5e74\u9f62\u30fb\u63a5\u7a2e\u56de\u6570\u30fb\u6027\u5225**","45766457":"#### \u8cc7\u65991-3-1\n## **\u30b3\u30df\u30ca\u30c6\u30a3\u7b4b\u6ce8(\u30d5\u30a1\u30a4\u30b6\u30fc\u682a\u5f0f\u4f1a\u793e)\u63a5\u7a2e\u5f8c\u306b\u6b7b\u4ea1\u3068\u3057\u3066\u5831\u544a\u3055\u308c\u305f\u4e8b\u4f8b**\n#### \u4ee4\u548c3\u5e742\u670817\u65e5\u304b\u3089\u4ee4\u548c3\u5e748\u670820\u65e5\u307e\u3067\u306e\u5831\u544a\u5206","ec275614":"#### \u8cc7\u65991-3-2\n## **\u30e2\u30c7\u30eb\u30ca\u7b4b\u6ce8(\u6b66\u7530\u85ac\u54c1\u5de5\u696d\u682a\u5f0f\u4f1a\u793e)\u63a5\u7a2e\u5f8c\u306b\u6b7b\u4ea1\u3068\u3057\u3066\u5831\u544a\u3055\u308c\u305f\u4e8b\u4f8b**\n#### \u4ee4\u548c3\u5e745\u670822\u65e5\u304b\u3089\u4ee4\u548c3\u5e748\u670820\u65e5\u307e\u3067\u306e\u5831\u544a\u5206","f526ea9b":"## Data Source\n* https:\/\/www.mhlw.go.jp\/stf\/shingi2\/0000208910_00029.html\n* https:\/\/www.mhlw.go.jp\/content\/10601000\/000823368.pdf (\u30d5\u30a1\u30a4\u30b6\u30fc)\n* https:\/\/www.mhlw.go.jp\/content\/10601000\/000823370.pdf (\u30e2\u30c7\u30eb\u30ca)","2a4a6311":"### **\u6b7b\u56e0\u7b49(\u5831\u544a\u8005\u306b\u3088\u308b\u898b\u89e3\u30fb\u8003\u5bdf\u7b49)**"}}