{"cell_type":{"20fd22ee":"code","11b17144":"code","0a1a37dc":"code","13f080d2":"code","625a36ee":"code","5c0e16b4":"code","9b5e5a2a":"code","14c30090":"code","95735901":"code","eb75e67d":"code","33bc83b6":"code","44f4e570":"code","e4eba7d6":"code","f32d6267":"code","9f7b1fa5":"code","17444a43":"code","b50d3721":"code","f06bf27e":"code","a671c3d2":"code","a8881577":"code","41632101":"code","8cff440f":"code","cfa48405":"code","37046ab7":"code","a3fae525":"code","9d4be91a":"code","ab3010b5":"code","c69f6fc5":"code","5565f381":"code","26a0279f":"code","e4e8b81a":"code","8fe59db0":"code","003cda75":"code","a4fbee98":"code","5f575ad2":"code","da9f2c79":"code","cfbdc400":"code","ba51470f":"code","471c9c9d":"code","c2ca7f86":"code","eb319531":"code","90a446b0":"markdown","d9d97b47":"markdown","8ccff11d":"markdown","f9047691":"markdown","34a0e841":"markdown"},"source":{"20fd22ee":"import numpy as np # linear algebra\nimport pandas as pd # data processing, CSV file I\/O (e.g. pd.read_csv)\n\n\nimport os\nfor dirname, _, filenames in os.walk('\/kaggle\/input'):\n    for filename in filenames:\n        print(os.path.join(dirname, filename))","11b17144":"import matplotlib.pyplot as plt\nimport seaborn as sns\n%matplotlib inline","0a1a37dc":"import warnings \nwarnings.filterwarnings('ignore')\n\n!pip install openpyxl","13f080d2":"df=pd.read_excel('\/kaggle\/input\/customer-segmentation-dataset\/Online Retail.xlsx')","625a36ee":"df.head()","5c0e16b4":"df.info()","9b5e5a2a":"df.describe()","14c30090":"df[df['Quantity']<0]","95735901":"df[df['UnitPrice']<0]","eb75e67d":"df[df['UnitPrice']>1000]","33bc83b6":"df1=df.dropna(subset=['CustomerID'])","44f4e570":"df1['Amount']=df1['Quantity']*df1['UnitPrice']","e4eba7d6":"df1.head()","f32d6267":"df1.head()","9f7b1fa5":"df_total=pd.DataFrame(df1.groupby('CustomerID')['Amount'].sum())\ndf_total = df_total.rename(columns={'Amount': 'Total Value'})\ndf_total=df_total.reset_index()\ndf_total.head()","17444a43":"df_total.info()","b50d3721":"df_freq=pd.DataFrame(df1.groupby('CustomerID')['InvoiceDate'].nunique())\ndf_freq = df_freq.rename(columns={'InvoiceDate': 'Freq'})\ndf_freq = df_freq.reset_index()\ndf_freq.head()","f06bf27e":"df_freq.info()","a671c3d2":"df_seg=pd.merge(df_total, df_freq)","a8881577":"df_seg['Value\/Freq']=df_seg['Total Value']\/df_seg['Freq']\ndf_seg.head()","41632101":"pip install autoviz","8cff440f":"from autoviz.AutoViz_Class import AutoViz_Class\n%matplotlib inline","cfa48405":"AV = AutoViz_Class()","37046ab7":"target='CustomerID'","a3fae525":"dft = AV.AutoViz(depVar=target,dfte=df_seg, header=0, verbose=0,\n                lowess=False,chart_format='svg',max_rows_analyzed=1500000,max_cols_analyzed=300,filename='', sep=',' )","9d4be91a":"pip install pycaret --ignore-installed llvmlite numba","ab3010b5":"from pycaret.clustering import *","c69f6fc5":"df_seg1=df_seg.drop('CustomerID',axis=1)","5565f381":"clu = setup(df_seg1,silent=True,session_id=1)","26a0279f":"kmeans = create_model('kmeans',num_clusters=5)","e4e8b81a":"plot_model(kmeans, 'elbow')","8fe59db0":"plot_model(kmeans, plot = 'silhouette')","003cda75":"kmeans_df = assign_model(kmeans)","a4fbee98":"plot_model(kmeans)","5f575ad2":"plot_model(kmeans,'distribution')","da9f2c79":"kmeans_df.head()","cfbdc400":"kmeans_df.groupby('Cluster').mean()","ba51470f":"kmeans_df.groupby('Cluster').count()","471c9c9d":"kmeans_df.groupby('Cluster').sum().plot.pie(y='Total Value',autopct=\"%1.1f %%\")\nplt.legend(loc=\"upper left\")","c2ca7f86":"kmeans_df.groupby('Cluster').mean().plot.bar(y='Freq')","eb319531":"kmeans_df.groupby('Cluster').mean().plot.bar(y='Value\/Freq')","90a446b0":"I tired to find customer segmentation by clustering. \n* Features Engineering - I made new features, Total Amount, Frequency and Purchasing unit price (Total Amount\/Frequency)\n* Visualization by AutoViz\n* Clustering by PyCaret\n\n# -Insight-\n    \nI found 5 clusters.\n![image.png](attachment:22fdbdc0-2ba2-4df3-a68f-001642f0f95d.png)\n\nThe features of each clusters are \n* Cluster 0: 4,065 custmers out of 4,372 CustomerID are in Cluster 0. But because of their lowest purchasing unit price and lowest freqency, they occupy only 46.1% in total amount.\n* Cluster 1: Only 2 customers out of 4,372 CustomerID are in Cluster 1. But they occupy 6.5% in total value. Their average purchasing unit price is highest, 4,064 and their average frequency is second highest,67.\u3000They are 'best' customers.\n* Cluster 2:27 customers out of 4,372 CustomerID are in Cluster 2. They are in middle position in 5 clusters by freqency and by purchasing unit price.\n* Cluster 3:Only 5 customers out of 4,372 CustomerID are in Cluster 3. But they occupy 7.8% in total value. Their average purchasing unit price is second highest, 2,502 and their average frequency is highest,88.\u3000They are second 'best' customers. \n* Cluster 4:273 customers out of 4,372 CustomerID are in Cluster 4. They are second volume zone. But because of their second lowest purchasing unit price and second lowest freqency, they occupy only 26.3% in total amopunt.\n\nCluster 0 occupy 93% of total customeID. But they occupy only 46% in total value. So it is very important for us to manage cluster 0 accounts 'effiently'. And it is also important for us to find potential customers in Cluster 0 who will move to Cluster 4.\nCluster 1 to 4 occupy only 7% of total customerID. But they contribute 54% of total value. And in 4 clusters, most important one is cluster 1, next one is cluster 3, third one is cluster 2 and last one is cluster 4. It is not so difficult to manage each accounts in detail, because there are only 307 accounts in Cluster 1 to 4.\n\nNext action which I have to consider will be how I can build model and find potential customers in Cluster 0 who will move to Cluster 4, and in Cluster 4 who will move to Cluster 2, 3 and 1. And I also have to consider how I can increase total amount in cluster 1, 3 and 2.","d9d97b47":"2. Visualization by AutoViz","8ccff11d":"![segmentation.jpg](attachment:08e32c5c-8b23-4c0d-bba7-30f6d3195acf.jpg)\n\nimage from https:\/\/think2grow.com\/blog\/market-segmentation\/","f9047691":"1. Importing, data preprocessing and features engineering","34a0e841":"3. Clustering by PyCaret"}}