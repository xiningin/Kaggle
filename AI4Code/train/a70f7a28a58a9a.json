{"cell_type":{"648c47f5":"code","a9d8d13e":"code","a6ca6441":"code","4252b49d":"code","2144cdd0":"code","dc56ceed":"code","09d2d4dd":"code","316dedb4":"code","a8f1b005":"code","1d30fba2":"code","7b3cdb01":"code","47836c96":"code","3287341f":"code","afb34933":"code","196d25ab":"code","6b89accd":"code","cc02147b":"code","7483d2a1":"code","a0616895":"code","c37263d5":"code","45918dac":"code","13db2cf6":"code","5133947a":"code","de4a787b":"code","805e7b3c":"code","82576aab":"code","d94d9e8f":"code","4ee4ef38":"code","9cf910c8":"code","2c6604d8":"code","9209d577":"code","48c83b47":"markdown","5606b63c":"markdown","42924d13":"markdown","171e5bf5":"markdown","f679bce7":"markdown","9cfc7ac1":"markdown","e8a60906":"markdown","d62002f9":"markdown","71b7cb8a":"markdown","e21f1dab":"markdown","74367d09":"markdown","77be00fe":"markdown","381ad826":"markdown","ce9e7515":"markdown","0a9aa4dd":"markdown","15458eff":"markdown","ab49f4e9":"markdown","6e7ba4bc":"markdown","6956037b":"markdown","af57fa05":"markdown","7eae04a1":"markdown","39312963":"markdown","8f0909e7":"markdown","88c49f45":"markdown"},"source":{"648c47f5":"import matplotlib.pyplot as plt\nimport seaborn as sns\n%matplotlib inline\nurl = 'https:\/\/raw.githubusercontent.com\/Dutta-SD\/Images_Unsplash\/master\/Kaggle\/bews_self_edit_1.png'\nfrom IPython.display import Image\nImage(url)","a9d8d13e":"## We might get some warnings later due to unknown characters. So we import this cell\nimport warnings\nwarnings.filterwarnings('ignore')","a6ca6441":"# Latin 1 encoding seems to be needed for this dataset\nimport pandas as pd\nspData = pd.read_csv('..\/input\/top50spotify2019\/top50.csv',encoding = 'latin_1', index_col=0)\nspData.head()","4252b49d":"# Get information\nspData.info()","2144cdd0":"# We will remove the + using regex(credits : Stack Overflow) :P\nfrom wordcloud import WordCloud\nfrom collections import Counter\nallSongs = [trackname for trackname in spData['Track.Name']]\nwc_dict = Counter(allSongs)\n\nwordcloud = WordCloud(width=1000, height=500).generate_from_frequencies(wc_dict)\nplt.figure(figsize = (20, 10))\nplt.imshow(wordcloud)\nplt.axis('off');","dc56ceed":"# We will remove the + using regex(credits : Stack Overflow) :P\nfrom wordcloud import WordCloud\nfrom collections import Counter\nallSongs = [trackname for trackname in spData['Artist.Name']]\nwc_dict = Counter(allSongs)\n\nwordcloud = WordCloud(width=1000, height=500, background_color = 'white').generate_from_frequencies(wc_dict)\nplt.figure(figsize = (20, 10))\nplt.imshow(wordcloud)\nplt.axis('off');","09d2d4dd":"!pip -q --disable-pip-version-check install mplcyberpunk","316dedb4":"# Plotting Libraries\nimport matplotlib.pyplot as plt\nimport seaborn as sns\nimport mplcyberpunk\n%matplotlib inline","a8f1b005":"plt.style.use('cyberpunk')\nplt.figure(figsize = (6, 30))\nsns.barplot(data = spData, y = 'Track.Name', x= 'Popularity');\nmplcyberpunk.make_lines_glow()","1d30fba2":"plt.figure(figsize = (20, 5));\nsns.countplot(data = spData, x = 'Beats.Per.Minute', palette = 'winter');\nmplcyberpunk.add_glow_effects()\nplt.title('Count of Beats Per Minute');","7b3cdb01":"## Danceability\n##sns.set(style = 'whitegrid')\n\nplt.style.use('cyberpunk')\nplt.figure(figsize = (25, 5))\nsns.pointplot(data = spData, x = 'Track.Name',y = 'Danceability',hue = 'Popularity', palette = 'inferno');\n# remove lines\nsns.despine(offset = 10)\n# Rotate text by 90\nplt.xticks(rotation = 90)\nplt.title('Danceability');\n# Move Legend\nplt.legend(loc=8, ncol = 18);\n\nmplcyberpunk.add_glow_effects()","47836c96":"# Genre plots using Plotly\nimport plotly.express as px\nfig = px.pie(spData, values = 'Popularity', names='Genre', hole = 0.3)\nfig.update_layout(annotations=[dict(text='Genre',font_size=20, showarrow=False)])","3287341f":"import plotly.graph_objects as go\n\n# Generate Charts with Plotly\nfig = go.Figure(data = [go.Scatter3d(\n    x = spData['Energy'],\n    y = spData['Loudness..dB..'],\n    z = spData['Liveness'],\n    text = spData['Track.Name'],  ## Additional texts which will be shown\n    mode = 'markers',\n    marker = dict(\n    color = spData['Popularity'],\n    colorbar_title = 'Popularity',\n    colorscale = 'blues'\n    )\n)])\n\n# Set variables and size\nfig.update_layout(width=800, height=800, title = 'Energy, Liveness, Acousticness plot of Songs',\n                  scene = dict(xaxis=dict(title='Energy'),\n                               yaxis=dict(title='Liveness'),\n                               zaxis=dict(title='Acousticness')\n                               )\n                 )\n\nfig.show()","afb34933":"# Visualise the Valence\nplt.figure(figsize = (10, 4))\nplt.style.use('cyberpunk')\nsns.distplot(spData['Valence.'],\n             rug=True,\n             hist_kws={\"histtype\": \"stepfilled\",\n                       'linewidth' : 2,\n                       'color':'r',\n                      'alpha' : 0.11});\nplt.title('Valence. Distribution');\nmplcyberpunk.add_glow_effects()","196d25ab":"# Energy plot\nsns.set(style = 'white')\nplt.figure(figsize = (10, 10));\nsns.despine(offset = 10, left = True)\nsns.jointplot(data = spData, \n              x = 'Energy',\n              y = 'Loudness..dB..',\n              kind = 'kde',\n              color = '#3a4e0b',\n              space = 1);","6b89accd":"# Speechiness\nfig = px.histogram(spData,\n                   x=\"Speechiness.\",\n                  opacity = 1,\n                  title = 'Speechiness Histogram',\n                  color = 'Artist.Name')\nfig.show()\n","cc02147b":"# Length\nfig = px.line(spData,\n              y = 'Length.',\n              x = 'Track.Name',\n              title = 'Length of Popular Songs(Hover to See Name)')\nfig.update_xaxes(visible=False)\n\nfig.show()\n","7483d2a1":"# review the data once again\nspData.tail()","a0616895":"# Retain numeric columns\nspData2 = spData.drop(['Track.Name', 'Artist.Name', 'Genre'], axis = 1)\nspData2.head()","c37263d5":"sns.pairplot(data = spData2, corner = True)","45918dac":"plt.figure(figsize = (11, 11))\nplt.title('Correlation between all features')\nsns.heatmap(data = spData2.corr(),\n            annot = True,\n            cmap = 'copper_r',\n            square = True,\n           linewidths = 0.9);","13db2cf6":"!pip -q --disable-pip-version-check install autoviz","5133947a":"# Autoviz class\nfrom autoviz.AutoViz_Class import AutoViz_Class\n\nav = AutoViz_Class();\n#av.AutoViz? if you need help","de4a787b":"plt.style.use('cyberpunk')\nspData3 = av.AutoViz('..\/input\/top50spotify2019\/top50.csv', dfte = spData2, max_cols_analyzed=50)","805e7b3c":"from sklearn.linear_model import TheilSenRegressor\nfrom sklearn.model_selection import train_test_split\nfrom sklearn.metrics import mean_squared_error","82576aab":"X = spData2.iloc[: , :-1] # All rows, all columns upto column `-1` ie popularity\ny = spData2.iloc[:, -1] # The last row , 'Popularity'","d94d9e8f":"y.plot();","4ee4ef38":"# Split The data\nX_train, X_val, y_train, y_val = train_test_split(X, y, test_size = 0.2, shuffle = True, random_state = 42)","9cf910c8":"# define Model\nlRegrssModel = TheilSenRegressor()\n\n# Fit Model\nlRegrssModel.fit(X_train, y_train)\n\n# Get Predictions\ny_preds = lRegrssModel.predict(X_val)","2c6604d8":"mean_squared_error(y_val, y_preds)","9209d577":"print('True\\tPred')\nfor (trueVal, predVal) in zip(y_val, y_preds):\n    print(f\"{trueVal}\\t{predVal:.3f}\")","48c83b47":"# Can we predict Popularity?\n\nLet us try to predict popularity of the songs based on the data we have available here.","5606b63c":"# Speechiness and Length","42924d13":"# Hooray!\n# Hope you like it!","171e5bf5":"# Read in the data File\n\nWe can see that the first song, has a character that pandas will not be able to recognise with **UTF-8**. So we use **latin_1** as encoding","f679bce7":"## Inference\nMost popular songs have a popularity somewhere between 70 and 80.","9cfc7ac1":"# Heatmap","e8a60906":"# How Long Music is most preferred?","d62002f9":"Let us retain all the numeric columns and see what we can predict","71b7cb8a":"## Inference\nAbout **176 bpm** seems to be the most frequent bpm","e21f1dab":"# Data Analysis and EDA","74367d09":"## Inference\nDance pop seems to be the most popular, followed by pop and latin","77be00fe":"# 0. WordClouds!","381ad826":"# PairPlot of all the variables","ce9e7515":"**Spotify is an online music streaming platform. This data file contains details of the top 50 songs of Spotify in 2019.\nLet us use techniques to see what information we can extract from this database.**\n\n* Version 10 : Added new mplcyberpunk effects\n* Version 13 : Added Word Clouds","0a9aa4dd":"# Valence, Energy and More","15458eff":"# Energy,Liveliness, Acousticness\n3d Mapping of these 3 variables","ab49f4e9":"# Danceability\n\nHow much would you like to groove to each of these tunes??","6e7ba4bc":"## 1. Most Popular Songs","6956037b":"## We got some outliers in Linear Model. ","af57fa05":"# Genre Exploration using Plotly\nExploring the influence of Genre","7eae04a1":"Wow! Amazing. All plots just by one line of code!!","39312963":"## Inference\nBad Guy!!!","8f0909e7":"# AutoViz\nAutoViz is an automatic visualisation library for Python.","88c49f45":"# Predictive Modelling with outliers using Theil Sen Estimator\n"}}