{"cell_type":{"522cb5da":"code","0ab02948":"code","d9dfc51c":"code","1128ca1a":"code","f4b20452":"code","a770a23b":"code","7e0f9146":"markdown","be2c26a4":"markdown","1e854c4b":"markdown"},"source":{"522cb5da":"import os\nimport chromedriver_binary\n\nfrom tabulate import tabulate\nfrom selenium import webdriver\nfrom selenium.webdriver.common.keys import Keys\nfrom selenium.webdriver.support.ui import Select\nfrom selenium.webdriver.chrome.options import Options\nfrom selenium.common.exceptions import NoSuchElementException","0ab02948":"# get_data() Function to get datasets \ndef get_data():\n submit = driver.find_element_by_xpath('\/\/*[@id=\"btnSubmit\"]')\n driver.implicitly_wait(30)\n driver.execute_script(\"arguments[0].click();\", submit)\n driver.implicitly_wait(5)\n    \n try:\n        save= driver.find_element_by_xpath('\/\/*[@id=\"DL_CSV\"]')\n        driver.implicitly_wait(20)\n        # multiple_down()\n        driver.implicitly_wait(10)\n        # download_loc()\n        driver.implicitly_wait(10)\n        driver.execute_script(\"arguments[0].click();\", save)\n        driver.implicitly_wait(30)\n        print(\"Grabbed success...\")\n        driver.implicitly_wait(30)    \n        \n except NoSuchElementException:\n        print(\"No data found...\")","d9dfc51c":"# Does not work\n# Direct to a directory\ndef download_loc():\n    options = Options()\n    prefs = {\"download.default_directory\": r\"C:\/Users\/Yuki\/Documents\/Git Repositories\/Airline Delay Prediction Project\/Datasets\"}\n    options.add_experimental_option(\"prefs\",prefs)\n","1128ca1a":"# Function not used\n# Enables chromedriver to download multiple files\ndef multiple_down():\n    options = Options()\n    prefs = {'profile.default_content_setting_values.automatic_downloads': 1}\n    options.add_experimental_option(\"prefs\",prefs)\n\n    ","f4b20452":"# Checklist \ndef checklist():\n    stats = driver.find_element_by_xpath('\/\/*[@id=\"chkAllStatistics\"]')\n    # driver.find_element_by_id('chkAllStatistics').click()\n    driver.execute_script(\"arguments[0].click();\", stats)\n\n    # Click 'All Days' checkbox\n    months = driver.find_element_by_xpath('\/\/*[@id=\"chkAllMonths\"]')\n    driver.execute_script(\"arguments[0].click();\", months)\n\n\n    days = driver.find_element_by_xpath('\/\/*[@id=\"chkAllDays\"]')\n    driver.execute_script(\"arguments[0].click();\", days)\n\n    # Click '2019' checkbox\n    year = driver.find_element_by_id('chkYears_32')\n    driver.execute_script(\"arguments[0].click();\", year)\n\n    # Destination\n    dest = driver.find_element_by_xpath('\/\/*[@id=\"cboAirport\"]\/option[text()=\"Los Angeles, CA: Los Angeles International (LAX)\"]').click()\n","a770a23b":"url = \"https:\/\/transtats.bts.gov\/ONTIME\/Arrivals.aspx\"\nvariable = 0\nairport = \"Los Angeles, CA: Los Angeles International (LAX)\"\n\n# Downloaded datasets are located in \"..\/Downloads\" \noptions = Options()\nprefs = {'profile.default_content_setting_values.automatic_downloads': 1}\noptions.add_experimental_option(\"prefs\",prefs)\n\n# create a new Chrome session\ndriver = webdriver.Chrome(options=options)\ndriver.implicitly_wait(10)\ndriver.get(url)\n\nchecklist()\n\n# 33 items in picketlist\nwhile (variable < 33):\n    variable =variable+1 \n    airline = driver.find_element_by_xpath(\"\/\/*[@id='cboAirline']\/option[\"+str(variable)+\"]\").click()\n    print(driver.find_element_by_xpath(\"\/\/*[@id='cboAirline']\/option[\"+str(variable)+\"]\").get_attribute(\"value\"))\n    print(\"Grabing data...\")\n    get_data()\nelse:\n    print(\"\")\n    print(\"Fin.\")","7e0f9146":"\nBTS | Detailed Statistics Arrival Scraper\n\n@Author: Pete Aguirre II \n","be2c26a4":"## What this file does:\n- Runs selenium chromedriver\n- Downloads datasets if they are available  for the following carriers\n\n## Things to improve\/To do list:\n- Create a prompt of which Destination to extract from\n- How to download the files into a specified path\n- Create a script so that folders are automatically created\n- Find out how to extract the city name here for file naming purposes\n\n## Reference:\n- Selenium Scraper Template: https:\/\/github.com\/karishmavanjani\/ONTIME-Arrivals_Scraper\/blob\/master\/notebook\/Scraper_BTSWebsite.py","1e854c4b":"# Selenium Scraper"}}