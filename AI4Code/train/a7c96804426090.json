{"cell_type":{"a5d269a3":"code","98ef8a6a":"code","b2b8bcdb":"code","4514826c":"code","ad135e01":"code","e22fbd83":"code","607e33e6":"code","93517185":"code","b46c33f1":"markdown","c7b9a086":"markdown","aa6ab7e5":"markdown","aa47ac5e":"markdown"},"source":{"a5d269a3":"# This Python 3 environment comes with many helpful analytics libraries installed\n# It is defined by the kaggle\/python Docker image: https:\/\/github.com\/kaggle\/docker-python\n# For example, here's several helpful packages to load\n\nimport numpy as np # linear algebra\nimport pandas as pd # data processing, CSV file I\/O (e.g. pd.read_csv)","98ef8a6a":"# Set your own project id here\nPROJECT_ID = 'kmiki-ml' # \u3053\u3061\u3089\u3092\u3054\u81ea\u8eab\u306e\u30d7\u30ed\u30b8\u30a7\u30af\u30c8ID\u306b\u5909\u66f4\u304f\u3060\u3055\u3044\n# BigQuery\nfrom google.cloud import bigquery\nbigquery_client = bigquery.Client(project='YOUR PROJECT ID')","b2b8bcdb":"%%bigquery --project $PROJECT_ID\nSELECT \n  *\nFROM\n  kaggleworkshops.nyc311sla.train\nLIMIT 100","4514826c":"%%bigquery --project $PROJECT_ID\nSELECT\n* EXCEPT(table_catalog,table_schema, field_path)\nFROM\nkaggleworkshops.nyc311sla.INFORMATION_SCHEMA.COLUMN_FIELD_PATHS\nWHERE table_name = \"train\"","ad135e01":"%%bigquery --project $PROJECT_ID\nCREATE OR REPLACE MODEL bqmlnyc311.logreg_sample\n\nTRANSFORM(\n    EXTRACT(month from created_date) month,\n    lower(city) city,\n    days_to_close\n)\n\nOPTIONS(\n    MODEL_TYPE=\"logistic_reg\",\n    INPUT_LABEL_COLS=[\"days_to_close\"]) AS\n    \nSELECT\n    *\nFROM\n    kaggleworkshops.nyc311sla.train\nWHERE\n    DATE(created_date) BETWEEN DATE(\"2015-01-01\") AND DATE(\"2015-01-31\")","e22fbd83":"%%bigquery pred --project $PROJECT_ID\nSELECT\n  unique_key,\n  predicted_days_to_close AS days_to_close\nFROM\n  ML.PREDICT(MODEL bqmlnyc311.logreg_sample,\n    (\n    SELECT \n      *\n    FROM\n      kaggleworkshops.nyc311sla.test\n  ))","607e33e6":"## \u4e88\u6e2c\u7d50\u679c\u78ba\u8a8d\npred.head()","93517185":"## CSV\u3067\u4fdd\u5b58\npred.to_csv(\"logregsample.csv\", index=False)\n!ls","b46c33f1":"### GCP \u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u3092 Kaggle \u30ce\u30fc\u30c8\u30d6\u30c3\u30af\u306b\u63a5\u7d9a\n\u3053\u306e\u30ce\u30fc\u30c8\u30d6\u30c3\u30af\u3067\u306fBQML\u3068Kaggle\u30ce\u30fc\u30c8\u30d6\u30c3\u30af\u3067\u63d0\u51fa\u30d5\u30a1\u30a4\u30eb\u3092\u4f5c\u6210\u3059\u308b\u65b9\u6cd5\u3092\u3054\u7d39\u4ecb\u3057\u3066\u3044\u307e\u3059\u3002\n\u4e8b\u524d\u306bAdd-ons > Google Cloud Services \u3088\u308a\u3054\u81ea\u8eab\u306eGCP\u30a2\u30ab\u30a6\u30f3\u30c8\u306b\u63a5\u7d9a\u304f\u3060\u3055\u3044\u3002","c7b9a086":"### Submission\u30d5\u30a1\u30a4\u30eb\u4f5c\u6210","aa6ab7e5":"### \u30ed\u30b8\u30b9\u30c6\u30a3\u30c3\u30af\u56de\u5e30\u30e2\u30c7\u30eb\u4f5c\u6210","aa47ac5e":"### \u30c8\u30ec\u30fc\u30cb\u30f3\u30b0\u30c7\u30fc\u30bf\u306e\u78ba\u8a8d"}}