{"cell_type":{"8101bead":"code","4849dda7":"code","af66cd1b":"code","5301df19":"code","d1d1a2e1":"code","94afa256":"code","fff92183":"code","05ef79b2":"code","8abe5752":"code","d8055a58":"code","354c318f":"code","c3e6aaf8":"code","5f4d1b52":"code","a1ae463e":"code","94ef139f":"code","b648d0a4":"code","7c3864d3":"code","2e486238":"code","d83dcbb9":"code","d46c8ba3":"code","f1256216":"code","480529c3":"code","ba77b215":"code","83553eb7":"code","fe9ea73a":"code","c16a6376":"code","bdb8804e":"code","0430b554":"code","e292a1b2":"code","9dc23312":"code","7be26c85":"code","8104132d":"code","8a1509c6":"code","cdb4afe5":"code","3a5e1581":"code","b926ee9d":"code","e7512ae5":"code","35e84fbd":"code","90aa653b":"code","f192d06f":"code","e32498b6":"code","f9b94731":"code","4906f9a1":"code","1b591845":"code","b44d05cc":"code","121846ba":"code","e267623b":"code","a66dce79":"code","a47e2a98":"code","dbfab261":"code","2b2d9f1a":"code","923d42b1":"code","df467530":"code","33226e50":"code","a39fe0c8":"code","28595d1b":"markdown","7073d47a":"markdown","c094f17a":"markdown","41df11ac":"markdown","40aa7e1d":"markdown","d9b89fea":"markdown","c5b83895":"markdown","35829293":"markdown","9bd27340":"markdown","9859e87d":"markdown"},"source":{"8101bead":"!pip install bs4","4849dda7":"from shapely.geometry import Point, LineString, Polygon\nimport geopandas as gpd\nimport contextily\nimport matplotlib.pyplot as plt\nimport seaborn as sns\n\nimport os\nfrom urllib.request import urlretrieve\nimport requests\nimport zipfile\nfrom bs4 import BeautifulSoup","af66cd1b":"sns.set(font_scale=1.4)\nsns.set_style({'font.family': 'serif',\n               'fontname': 'Times New Roman'})","5301df19":"queimadas_brasil_2020 = gpd.read_file('..\/input\/queimadas-brasil-2020\/Focos_2020-01-01_2020-12-31.geojson')","d1d1a2e1":"queimadas_brasil_2020.shape","94afa256":"queimadas_brasil_2020.crs.to_string()","fff92183":"queimadas_brasil_2020.head()","05ef79b2":"queimadas_brasil_2020.to_crs(epsg=3857, inplace=True)","8abe5752":"queimadas_brasil_2020.crs.to_string()","d8055a58":"queimadas_brasil_2020.head()","354c318f":"ax = queimadas_brasil_2020.plot(figsize=(15, 10), markersize=1, color='red')\ncontextily.add_basemap(ax)\nax.set_axis_off()\nplt.show()","c3e6aaf8":"if not os.path.exists('\/kaggle\/working\/mapas'):\n    os.makedirs('\/kaggle\/working\/mapas')","5f4d1b52":"url_brasil_malhas_municipios = 'https:\/\/geoftp.ibge.gov.br\/organizacao_do_territorio\/malhas_territoriais\/malhas_municipais\/municipio_2020\/Brasil\/BR\/BR_Municipios_2020.zip'","a1ae463e":"%%time\n\nurlretrieve(url_brasil_malhas_municipios, '\/kaggle\/working\/mapas\/BR_Municipios_2020.zip')","94ef139f":"with zipfile.ZipFile('\/kaggle\/working\/mapas\/BR_Municipios_2020.zip', 'r') as zip_ref:\n    zip_ref.extractall('\/kaggle\/working\/mapas\/')","b648d0a4":"os.remove('\/kaggle\/working\/mapas\/BR_Municipios_2020.zip')","7c3864d3":"brasil_malhas_municipios = gpd.read_file('\/kaggle\/working\/mapas\/BR_Municipios_2020.shp')","2e486238":"brasil_malhas_municipios.shape","d83dcbb9":"brasil_malhas_municipios.head()","d46c8ba3":"brasil_malhas_municipios.crs.to_string()","f1256216":"brasil_malhas_municipios.to_crs(epsg=3857, inplace=True)","480529c3":"brasil_malhas_municipios.crs.to_string()","ba77b215":"ax = brasil_malhas_municipios.plot(figsize=(15, 10), edgecolor='black', facecolor='none')\ncontextily.add_basemap(ax)\nax.set_axis_off()\nplt.show()","83553eb7":"url_brasil_localidades = 'https:\/\/geoftp.ibge.gov.br\/organizacao_do_territorio\/estrutura_territorial\/localidades\/Shapefile_SHP\/'","fe9ea73a":"req = requests.get(url_brasil_localidades)","c16a6376":"dados_ibge = BeautifulSoup(req.text, \"html.parser\")\ndados_ibge","bdb8804e":"%%time\n\nfor arq in dados_ibge.find_all('a'):\n    if 'BR_Localidades' in arq.get_text():\n        print(arq.get_text())\n        req = requests.get(url_brasil_localidades + arq[\"href\"])\n        print(req.status_code)\n        open('\/kaggle\/working\/mapas\/' + arq['href'], 'wb').write(req.content)","0430b554":"brasil_localidades = gpd.read_file('\/kaggle\/working\/mapas\/BR_Localidades_2010_v1.shp')","e292a1b2":"brasil_localidades.shape","9dc23312":"brasil_localidades.head()","7be26c85":"brasil_localidades.crs.to_string()","8104132d":"brasil_localidades.to_crs(epsg=3857, inplace=True)","8a1509c6":"brasil_localidades.crs.to_string()","cdb4afe5":"ax = brasil_localidades.plot(figsize=(15, 10), markersize=1, color='blue')\ncontextily.add_basemap(ax)\nax.set_axis_off()\nplt.show()","3a5e1581":"queimadas_brasil_2020.head()","b926ee9d":"queimadas_brasil_2020['bioma'].unique()","e7512ae5":"plt.figure(figsize=(12,5))\nax = sns.countplot(x='bioma', data=queimadas_brasil_2020)\nax.set_xlabel('Bioma')\nax.set_ylabel('Qtd. de queimadas')\nplt.show()","35e84fbd":"ax = queimadas_brasil_2020.plot(figsize=(15, 10), column='bioma', markersize=1, legend=True)\ncontextily.add_basemap(ax)\nax.set_axis_off()\nplt.show()","90aa653b":"queimadas_brasil_2020.head()","f192d06f":"queimadas_risco_alto = queimadas_brasil_2020[queimadas_brasil_2020['riscofogo'] >= 1]\nqueimadas_risco_alto.head()","e32498b6":"plt.figure(figsize=(12,5))\nax = sns.countplot(x='bioma', data=queimadas_risco_alto)\nax.set_xlabel('Bioma')\nax.set_ylabel('Qtd. de queimadas')\nplt.show()","f9b94731":"ax = queimadas_risco_alto.plot(figsize=(15, 10), column='bioma', markersize=1, legend=True)\ncontextily.add_basemap(ax)\nax.set_axis_off()\nplt.show()","4906f9a1":"brasil_localidades.head()","1b591845":"brasil_localidades['NM_CATEGOR'].unique()","b44d05cc":"plt.figure(figsize=(20,5))\nax = sns.countplot(x='NM_CATEGOR', data=brasil_localidades)\nax.set_xlabel('Categoria')\n\nlabels = [l.replace(' ', '\\n') for l in brasil_localidades['NM_CATEGOR'].unique()]\nax.set_xticklabels(labels=labels)\n\nax.set_ylabel('Quantidade')\nplt.show()","121846ba":"aldeias_indigenas = brasil_localidades[brasil_localidades['NM_CATEGOR'] == 'ALDEIA IND\u00cdGENA']\naldeias_indigenas.head()","e267623b":"ax = aldeias_indigenas.plot(figsize=(15, 10), markersize=1, color='orange')\ncontextily.add_basemap(ax)\nax.set_axis_off()\nplt.show()","a66dce79":"aldeias_indigenas.head()","a47e2a98":"aldeia = aldeias_indigenas.loc[11, 'geometry']","dbfab261":"dist_aldeia = queimadas_risco_alto.distance(aldeia)\ndist_aldeia","2b2d9f1a":"dist_aldeia.min()","923d42b1":"agregados = gpd.sjoin(queimadas_risco_alto, brasil_malhas_municipios, op='within')","df467530":"agregados.head()","33226e50":"queimadas_muni = agregados.groupby(by='NM_MUN').size()\nqueimadas_muni","a39fe0c8":"queimadas_muni","28595d1b":"### 2.2) Filtrando e visualizando o risco de fogo","7073d47a":"### 1.2) Malhas municipais do Brasil\n\n* Fonte: [Instituto Brasileiro de Geografia e Estat\u00edstica (IBGE)](https:\/\/www.ibge.gov.br\/geociencias\/downloads-geociencias.html)","c094f17a":"# An\u00e1lise de Queimadas no Brasil (2020)\n\n## Resumo\n\nNeste notebook, iremos explorar dados territoriais e de queimadas no Brasil utilizando a linguagem Python e as bibliotecas Shapely e GeoPandas.","41df11ac":"### 2.1) Queimadas e biomas","40aa7e1d":"### 1.1) Queimadas no Brasil em 2020\n\n* Fonte: [Instituto Nacional de Pesquisas Espaciais (INPE)](http:\/\/queimadas.dgi.inpe.br\/queimadas)","d9b89fea":"### 1.3) Localidades brasileiras\n\n* Fonte: [Instituto Brasileiro de Geografia e Estat\u00edstica (IBGE)](https:\/\/www.ibge.gov.br\/geociencias\/downloads-geociencias.html)","c5b83895":"### 2.3) Entendendo as categorias das localidades","35829293":"## 2) O que podemos extrair de informa\u00e7\u00f5es dos dados?","9bd27340":"## 3) Trabalhando com camadas de dados","9859e87d":"## 1) Fontes de dados"}}