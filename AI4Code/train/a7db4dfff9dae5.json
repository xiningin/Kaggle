{"cell_type":{"a7bce4ed":"code","ddb4ffbe":"code","4783430a":"code","d2d66a7f":"code","242f5bcf":"code","3645a219":"code","3c8b6cee":"code","df2c9b63":"code","84ac5a44":"code","454692c0":"code","059fcfdb":"code","54149397":"code","fd0458e9":"code","14701c93":"code","af3f9380":"code","3d1b167c":"code","1e6caa34":"code","efaaec65":"code","90ab86cc":"code","8457f36e":"code","7c3173d6":"markdown","cf454963":"markdown","e428dc11":"markdown","4bb642d9":"markdown","9b22deb7":"markdown","9d4c4cba":"markdown","07503508":"markdown","8c122e33":"markdown","aa2c47c6":"markdown","1d04aadc":"markdown","eecf2b48":"markdown","9aeca98a":"markdown","bc2cdf3d":"markdown"},"source":{"a7bce4ed":"# This Python 3 environment comes with many helpful analytics libraries installed\n# It is defined by the kaggle\/python docker image: https:\/\/github.com\/kaggle\/docker-python\n# For example, here's several helpful packages to load in \n\nimport numpy as np # linear algebra\nimport pandas as pd # data processing, CSV file I\/O (e.g. pd.read_csv)\nimport matplotlib.pyplot as plt\nimport math\nfrom astropy.coordinates import SkyCoord\n\n# Input data files are available in the \"..\/input\/\" directory.\n# For example, running this (by clicking run or pressing Shift+Enter) will list the files in the input directory\n\nimport os\nprint(os.listdir(\"..\/input\"))\n\n# Any results you write to the current directory are saved as output.","ddb4ffbe":"train_data = pd.read_csv('..\/input\/training_set.csv')\ntrain_metadata = pd.read_csv('..\/input\/training_set_metadata.csv')","4783430a":"train_metadata.head()","d2d66a7f":"train_metadata.describe()","242f5bcf":"train_data.head()","3645a219":"target_counts = train_metadata.groupby(by='target')['object_id'].count().sort_values(ascending=False)\nplt.figure(figsize=(15, 8))\nplt.bar(target_counts.index.astype(str), target_counts.values)\nplt.xlabel('astro class')\nplt.ylabel('occurences in training data')\nplt.show()","3c8b6cee":"plt.figure(figsize=(20, 8))\nplt.subplot(121, projection='aitoff')\nplt.scatter(x=(train_metadata['ra']-180)*math.pi\/180, y=train_metadata['decl']*math.pi\/180, alpha=0.1)\nplt.title('Equatorial coordinates')\nplt.subplot(122, projection='aitoff')\nplt.scatter(x=(train_metadata['gal_l']-180)*math.pi\/180, y=train_metadata['gal_b']*math.pi\/180, alpha=0.1)\nplt.title('Galactic coordinates')\nplt.show()","df2c9b63":"ddf_metadata = train_metadata[train_metadata['ddf'] == 1].copy()\nwfd_metadata = train_metadata[train_metadata['ddf'] != 1].copy()\nplt.figure(figsize=(20, 8))\nplt.subplot(121, projection='aitoff')\nplt.scatter(x=(ddf_metadata['ra']-180)*math.pi\/180, y=ddf_metadata['decl']*math.pi\/180, alpha=0.1)\nplt.title('Equatorial coordinates')\nplt.subplot(122, projection='aitoff')\nplt.scatter(x=(ddf_metadata['gal_l']-180)*math.pi\/180, y=ddf_metadata['gal_b']*math.pi\/180, alpha=0.1)\nplt.title('Galactic coordinates')\nplt.show()","84ac5a44":"plt.figure(figsize=(20, 5))\nplt.barh(y=['DDF', 'WFD'], \n        width=[ddf_metadata['object_id'].count(), wfd_metadata['object_id'].count()])\nplt.show()","454692c0":"train_metadata['distmod'].isna().sum()","059fcfdb":"train_metadata[train_metadata['distmod'].isna()].head(10)","54149397":"train_metadata[train_metadata['distmod'].isna()]['hostgal_photoz'].describe()","fd0458e9":"train_metadata['is_milky_way'] = train_metadata['hostgal_photoz'] == 0","14701c93":"outside_sources = train_metadata.loc[~train_metadata['is_milky_way']].copy()\nmax_distance = outside_sources['distmod'].max()\noutside_sources['scaled_distance'] = outside_sources['distmod'] \/ max_distance\n\nplt.figure(figsize=(20, 8))\nplt.gray()\nplt.subplot(121, projection='aitoff')\nplt.scatter(x=(outside_sources['ra']-180)*math.pi\/180, y=outside_sources['decl']*math.pi\/180, c=outside_sources['scaled_distance'])\nplt.title('Equatorial coordinates')\nplt.subplot(122, projection='aitoff')\nplt.scatter(x=(outside_sources['gal_l']-180)*math.pi\/180, y=outside_sources['gal_b']*math.pi\/180, c=outside_sources['scaled_distance'])\nplt.title('Galactic coordinates')\nplt.show()","af3f9380":"outside_sources['mwebv_scaled'] = outside_sources['mwebv'] \/ outside_sources['mwebv'].max()\ns = [4 for i in range(len(outside_sources['mwebv']))]\n\nplt.figure(figsize=(20, 8))\nplt.gray()\nplt.subplot(121, projection='aitoff')\nplt.scatter(x=(outside_sources['ra']-180)*math.pi\/180, y=outside_sources['decl']*math.pi\/180, c=outside_sources['mwebv_scaled'], s=s)\nplt.title('Equatorial coordinates')\nplt.subplot(122, projection='aitoff')\nplt.scatter(x=(outside_sources['gal_l']-180)*math.pi\/180, y=outside_sources['gal_b']*math.pi\/180, c=outside_sources['mwebv_scaled'], s=s)\nplt.title('Galactic coordinates')\nplt.show()","3d1b167c":"milky_way_sources = train_metadata.loc[train_metadata['is_milky_way']].copy()\n\nplt.figure(figsize=(20, 8))\nplt.subplot(121, projection='aitoff')\nplt.scatter(x=(milky_way_sources['ra']-180)*math.pi\/180, y=milky_way_sources['decl']*math.pi\/180, alpha=0.1)\nplt.title('Equatorial coordinates')\nplt.subplot(122, projection='aitoff')\nplt.scatter(x=(milky_way_sources['gal_l']-180)*math.pi\/180, y=milky_way_sources['gal_b']*math.pi\/180, alpha=0.1)\nplt.title('Galactic coordinates')\nplt.show()","1e6caa34":"milky_way_ddf_count = len(train_metadata[(train_metadata['ddf']==1) & (train_metadata['is_milky_way'])])\noutside_ddf_count = len(train_metadata[(train_metadata['ddf']==1) & (~train_metadata['is_milky_way'])])\n\nplt.figure(figsize=(15, 5))\nplt.barh(y=['Milky Way', 'Outside'], width=[milky_way_ddf_count, outside_ddf_count])\nplt.show()","efaaec65":"# Convert from Modified Julian Date to normal date\n# Unix = (MJD\u221240587)\u00d786400\ntrain_data['date'] = pd.to_datetime((train_data['mjd'] - 40587) * 86400, unit='s')","90ab86cc":"light_curve_615 = train_data[train_data['object_id']==615]\nlight_curve_615['passband'].value_counts()","8457f36e":"bands = {0: 'b', 1: 'g', 2: 'r', 3: 'm', 4: 'y', 5: 'k'}\nplt.figure(figsize=(15, 8))\nfor band, color in bands.items():\n    plt.errorbar(x=light_curve_615[light_curve_615['passband']==band]['mjd'], \n                 y=light_curve_615[light_curve_615['passband']==band]['flux'], \n                 yerr=light_curve_615[light_curve_615['passband']==band]['flux_err'], \n                 fmt='o', color=color)\nplt.plot()","7c3173d6":"## Sources with redshift values of zero belong to our own galaxy - Milky Way\nLets create new feature with flag for that","cf454963":"## Investigate target","e428dc11":"## Quick look at one light curve","4bb642d9":"## Load the data","9b22deb7":"## Quick look at the tables","9d4c4cba":"## Show just DDFs (Deep Drilling Fields)","07503508":"## Light extinction of Milky Way Dust","8c122e33":"## Import libraries","aa2c47c6":"## DDFs vs WFDs (Wide Fast Deep)","1d04aadc":"## Plot distance to sources from outside Milky Way\nThe distance is going to be relative to others so that we can use distance as colour","eecf2b48":"## Plot the sources location in both coordinate systems","9aeca98a":"## Examine distance to sources","bc2cdf3d":"## Plot sources just in our galaxy"}}