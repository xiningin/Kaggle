{"cell_type":{"bc3cae97":"code","ec4a3fca":"code","29700a24":"code","0c54d8e6":"code","9f56ae09":"code","a5727cf0":"code","b5213af6":"code","bd147361":"code","363708dd":"code","91f10337":"code","c5df29eb":"code","468f70b2":"code","f584b9c6":"code","d1346cec":"code","c466b80b":"code","cfc37b6b":"code","c9cd7218":"code","77746606":"markdown","e8ecd6a1":"markdown","8de163e2":"markdown","114f6aa1":"markdown","b464f445":"markdown","b1821646":"markdown","6deac1be":"markdown","caee1ea2":"markdown","6f2e5006":"markdown","06be2d64":"markdown","105a76f8":"markdown","797ffa3c":"markdown"},"source":{"bc3cae97":"from IPython.display import Image\nImage('..\/input\/image-lmplot\/chart.jpg', width = 790)","ec4a3fca":"# Importando as biliotecas que iremos usar\nimport pandas as pd\nimport seaborn as sns\nimport matplotlib.pyplot as plt\nimport warnings\nwarnings.filterwarnings('ignore')\n%matplotlib inline","29700a24":"# Carregando a partir da biblioteca seaborn o dataset 'tips'\ntips = sns.load_dataset('tips')","0c54d8e6":"# Verficando o formato do dataset\ntips.shape","9f56ae09":"# Imprimindo as 5 primeiras linhas do dataset\ntips.head()","a5727cf0":"# Descri\u00e7\u00e3o do dataset\ntips.describe()","b5213af6":"# Imprimindo todas as informa\u00e7\u00f5es do dataset\ntips.info()","bd147361":"# Verificando os tipos de vari\u00e1veis que temos no nosso dataset\ntips.dtypes","363708dd":"# Visualizando os dados nulos no dataset\ntips.apply(lambda x: sum(x.isnull()), axis = 0)","91f10337":"# Criando o gr\u00e1fico o mais b\u00e1sico poss\u00edvel\nsns.lmplot(\n    x = 'total_bill',\n    y = 'tip',\n    data = tips,\n    aspect = 1.6\n);","c5df29eb":"# Quem d\u00e1 mais gorjeta, os fumantes ou n\u00e3o fumantes?\nsns.lmplot(\n    x = 'total_bill',\n    y = 'tip',\n    data = tips,\n    hue = 'smoker',\n    aspect = 1.4\n);","468f70b2":"# Quem d\u00e1 mais gorjeta, os fumantes ou n\u00e3o fumantes?\n# Agora vamos customizar um pouco mais ele...\n\ng = sns.set_style('darkgrid')\ng = sns.lmplot(\n    x = 'total_bill',\n    y = 'tip',\n    data = tips,\n    hue = 'smoker',\n    aspect = 1.6,\n    markers = ['o', 'x'],\n    palette = dict(Yes = 'b', No = 'r')\n)\n\ng.ax.set_title('Rela\u00e7\u00e3o Total da Conta e Gorjeta | Fumantes e n\u00e3o Fumantes', fontdict = {'size': 16})\ng.ax.set_xlabel('Tota da Conta', fontdict = {'size': 14})\ng.ax.set_ylabel('Gorjeta', fontdict = {'size': 14})\n\nplt.show()","f584b9c6":"# Quem d\u00e1 mais gorjeta, os fumantes ou n\u00e3o fumantes?\n# Agora vamos serpar em dois gr\u00e1ficos, para fumantes e n\u00e3o fumantes\n\ng = sns.set_style('darkgrid')\ng = sns.lmplot(\n    x = 'total_bill',\n    y = 'tip',\n    data = tips,\n    hue = 'smoker',\n    aspect = 1.4,\n    markers = ['o', 'x'],\n    palette = dict(Yes = 'b', No = 'r'),\n    col = 'smoker'\n)\n\nplt.suptitle('Rela\u00e7\u00e3o Total da Conta e Gorjeta | Fumantes e n\u00e3o Fumantes')\nplt.show()","d1346cec":"# Qual \u00e9 a rela\u00e7\u00e3o entre o custo total com a quantidade da gorjeta por dias de atendimento no restaurante?\n\nsns.lmplot(\n    x = 'total_bill',\n    y = 'tip',\n    data = tips,\n    col = 'day',\n    hue = 'day',\n    aspect = 1.2,\n    col_wrap = 2\n);","c466b80b":"# Criando o gr\u00e1fico o mais b\u00e1sico poss\u00edvel\nf = plt.subplots(figsize = (10, 7))\n\nsns.regplot(\n    x = 'total_bill',\n    y = 'tip',\n    data = tips,\n    color = 'b'\n);","cfc37b6b":"# Rela\u00e7\u00e3o do custo total com a gorjeta\nf = plt.subplots(figsize = (11, 7))\n\nsns.regplot(\n    x = 'total_bill',\n    y = 'tip',\n    data = tips,\n    scatter_kws = {'color': 'g'},\n    line_kws = {'color': 'r'}\n    \n);","c9cd7218":"# Rela\u00e7\u00e3o do custo total com o tamanho da refei\u00e7\u00e3o\nf = plt.subplots(figsize = (11, 7))\n\nsns.regplot(\n    x = 'size',\n    y = 'total_bill',\n    data = tips,\n    scatter_kws = {'color': 'purple', 'alpha': 0.4}, \n    line_kws = {'color': '#d95f0e', 'alpha': 10, 'lw': 3},\n    x_jitter = .2\n);","77746606":"### Como podemos ver, dependendo o tipo de informa\u00e7\u00e3o que voc\u00ea deseja coletar a escolha do tipo de gr\u00e1fico far\u00e1 toda diferen\u00e7a. Com escolhendo um ou outro gr\u00e1fico conseguimos plotar dados que podem nos dar as m\u00e9dias e intervalo de confian\u00e7a para valores \u00fanicos, ajustar uma regress\u00e3o polinomial, aumentar ou diminuir o intervalo de confian\u00e7a ao inv\u00e9s de 95% voc\u00ea pode escolherno intervalo [0 - 100], basta utilizar o par\u00e2metro 'ci' do gr\u00e1fico Regplot para o intervalo que voc\u00ea quiser exemplo: 'ci = 55'. \n\n\n### L\u00e1 em cima eu coloquei os par\u00e2metros do Regplot de acordo com a documenta\u00e7\u00e3o oficial, o seu aprendizado depende tamb\u00e9m do seu esfor\u00e7o. Seja curios e explore outras op\u00e7\u00f5es e divirta-se aprendendo. :)\n\n## Fim...","e8ecd6a1":"### Boa! Pudemos confirmar que est\u00e1 tudo certo com os nossos dados e estamos liberados para usar os dados para an\u00e1lises. Ent\u00e3o mbora l\u00e1...\n\n\n# Vamos come\u00e7ar olhando como est\u00e3o est\u00e3o distribuidos os nossos dados\n### E j\u00e1 vamos usar o tipo de gr\u00e1fico 'lmplot' come\u00e7ando por entender a rela\u00e7\u00e3o entre a 'tip' que \u00e9 a gorjeta dada pelos clientes e o 'total_bill' que \u00e9 o pre\u00e7o total\n### A ideia aqui \u00e9 entender o seguinte: quanto maior for a conta do cliente, ser\u00e1 que nossos clientes s\u00e3o mais generoso em dar gorjeta?\n### Para isso temos o nosso querido gr\u00e1fico lmplot que ir\u00e1 nos ajudar com isso de forma visual sem precisarmos de muito esfor\u00e7o para entender.\n### Eu vou executar primeiro o gr\u00e1fico e na sequ\u00eancia explico os detalhes","8de163e2":"### Olha s\u00f3 como ficou bem mais f\u00e1cil de entender n\u00e3o \u00e9 mesmo? A essa altura espero que voc\u00ea j\u00e1 conseguiu entender o mundo de possibilidades que temos \u00e0 disposi\u00e7\u00e3o... Sabendo as perguntas que queremos respostas, conseguimos insights muito valiosos, e dar um UP no seu neg\u00f3cio ou no da sua empresa.\n\n### O que eu fiz no script acima foi: Adicionei um novo par\u00e2metro opcional o 'col' ela cria um gr\u00e1fico para cada tipo de categoria que vamos ter em uma vari\u00e1vel, no nosso caso como a nossa vari\u00e1vel 'smoker' s\u00f3 tem dois tipos de dados categoricos o (Yes e o No) o algor\u00edtimo gerou pra n\u00f3s dois tipos de dados correspondentes.\n\n### E o mundo de possibilidades n\u00e3o para por a\u00ed, podemos ainda usar o par\u00e2metro 'hue' dessa vez para exibir a rela\u00e7\u00e3o do 'total_bill' com o 'day' veja como fica.","114f6aa1":"### Podemos utilizar mais recursos desse gr\u00e1fico, como diferenciar as cores da linha de regress\u00e3o com os dados","b464f445":"### E aeee galera tudo bem?! Pronto pra mais um aprendizado?\n### Nessa an\u00e1lise estarei explicando melhor pra voc\u00eas os tipos de gr\u00e1ficos: LMPlot e RegPlot\n##### * Como eles funcionam?\n##### * Qual cen\u00e1rio ideal para ser usado?","b1821646":"### A biblioteca Seaborn j\u00e1 vem com alguns datasets de exemplos que est\u00e3o dispon\u00edveis para usarmos para testes como an\u00e1lise explorat\u00f3ria, machine learning etc..\n### Por esse e outros motivos estarei usando um de seus datasets mais famosos que \u00e9 o 'TIPS'.\n### Justamente porque os dados deles j\u00e1 est\u00e3o bem tratados e como o foco da dica de hoje \u00e9 para entender como esses dois gr\u00e1ficos do Seaborn funcionam por isso resolvi carregar esse dataset\n### Se voc\u00ea quiser saber e aprender um pouco mais com a parte de an\u00e1lise explorat\u00f3ria e como contruir gr\u00e1ficos mais profissionais, tem esse link: https:\/\/www.kaggle.com\/adilsonanselmo\/all-space-missions-analysis\n### Onde eu foco mais na an\u00e1lise explorat\u00f3ria dos dados e customiza\u00e7\u00e3o de gr\u00e1ficos mais profissionais e apresent\u00e1veis.","6deac1be":"### O que fizemos foi: definimos o marcador de pontos de dados, coloquei como n\u00e3o fumantes a letra 'x' (representando n\u00e3o). Detalhe importante: Construir gr\u00e1ficos \u00e9 quase uma arte, e n\u00e3o \u00e9 assim t\u00e3o trivial quanto muita gente pensa, o seu trabalho como Analista ou Cientista \u00e9 deixar tudo mastigado para os tomadores de decis\u00e3o, lembra sempre: voc\u00ea n\u00e3o constroi o gr\u00e1fico pra voc\u00ea e sim para outras pessoas e aqui voc\u00ea precisa saber contar uma hist\u00f3ria, levando a mente da pessoa a entender o que o gr\u00e1fico quer passar.\n\n### Fora o t\u00edtulo do gr\u00e1fico e o t\u00edtulo dos r\u00f3tulos que precisam estar bem claro e objetivo. Ahhh e voc\u00ea viu tamb\u00e9m as cores n\u00e9, para 'n\u00e3o' escolhi a cor vermelha como negativo porque o c\u00e9rebro humano j\u00e1 est\u00e1 acostumado e na hora de interpretar vai ser meio meio que autom\u00e1tico, quando mais o seu gr\u00e1fico levantar d\u00favidas para entender ele, voc\u00ea precisa rever os seus conceitos e estudar mais sobre a constru\u00e7\u00e3o de gr\u00e1ficos. E como fumantes coloquei na cor azul de positivo ou 'sim'.\n\n### E se voc\u00ea pensa que j\u00e1 acabou... N\u00e3o ainda tem mais outra coisa que podemos personalisar nesse gr\u00e1fico.\n\n### Que tal separarmos o gr\u00e1fico em dois? Um para fumantes e outro para n\u00e3o fumantes, e pra isso o nosso querido python fazer num piscar de olho. Vejamos...","caee1ea2":"# <font color='blue' size='6'>Data Visualization - LMPlot e RegPlot<\/font>\n\n## Author: Adilson Anselmo\n* [Linkedin](https:\/\/www.linkedin.com\/in\/adilsonanselmo\/)\n* [Kaggle](https:\/\/www.kaggle.com\/adilsonanselmo)\n* [Medium](https:\/\/medium.com\/@adilsonselmo)","6f2e5006":"### Esse \u00e9 um dataset de um restarante onde foi filtrado algumas vari\u00e1veis (colunas) que s\u00e3o importantes para coletar alguns insights","06be2d64":"### Vamos \u00e0 explica\u00e7\u00e3o: J\u00e1 d\u00e1 pra entender o poder que temos em m\u00e3os n\u00e3o \u00e9 mesmo?!\n### Fica claro aqui que os clientes fumantes (representados na cor azul) s\u00e3o mais generosos quando se trata de dar gorjetas, lembra da sombra na cor azul convergindo o centro com a linha a azul na diagonal? Eu expliquei no in\u00edcio que esse ponto convergente \u00e9 a m\u00e9dia estat\u00edstica, por baixo dos panos o nosso algor\u00edtimo fez uma previs\u00e3o generalizada, conseguimos perceber que ela \u00e9 maior em rela\u00e7\u00e3o a sombra na cor laranja (que representa os n\u00e3o fumantes).\n\n### Por\u00e9m a linha azul nos mostra que os fumantes n\u00e3o s\u00e3o t\u00e3o concistentes com o h\u00e1bito de dar gorjetas. Porque se voc\u00ea perceber os dados na sombra azul eles s\u00e3o um pouco mais espalhados em rela\u00e7\u00e3o a linha e a sombra na cor laranja. Muito bom n\u00e3o \u00e9 mesmo?!\n\n### O foco aqui \u00e9 explicar como funciona os gr\u00e1ficos, mas vou dar mais algumas dicas de como deixar o nosso gr\u00e1fico um pouco mais personalizado","105a76f8":"## Vamos a explica\u00e7\u00e3o:\n### O que temos aqui \u00e9 o segunte: Mas antes vamos a um detalhe importante, por padr\u00e3o os gr\u00e1ficos da biblioteca seaborn possuem tr\u00eas conjutos de par\u00e2metros fixo e que s\u00e3o obrigat\u00f3rios, todos os outros s\u00e3o opcionais.\n### Os tr\u00eas par\u00e2metros s\u00e3o: valores para os eixos x & y e a ref\u00eancia ao conjunto de dados no nosso caso \u00e9 'tips'. Em quase todos os gr\u00e1ficos do seaborn voc\u00ea vai ter esse padr\u00e3o.\n### Agora mbora entender o nosso gr\u00e1fico: De cara voc\u00ea j\u00e1 se depara com essa linha na diagonal e voc\u00ea pensa o que signfica n\u00e9... Essa linha representa o melhor ajuste poss\u00edvel da tend\u00eancia para gorjeta que os clientes desse restaurante t\u00eam dado que por sinal temos um bom resultado, porque a linha vai crescendo, isso \u00e9: quanto maior for a conta total maior ser\u00e1 a gorjeta.\n### Tamb\u00e9m podemos ver alguns pontos que ficam mais distantes da linha, no canto superiror direito conseguimos ver alguns pontos e em alguns outros pontos do gr\u00e1ficos, chamamos isso de outliers.\n### Outliers s\u00e3o anamolias ou exce\u00e7\u00f5es. O que quer dizer que temos alguns clientes que acabam gastando e\/ou dando uma gorjeta que vai muito fora do que a maioria faz. S\u00f3 esse gr\u00e1fico em si tem muitos detalhes que ir\u00e3o ajudar muito os tomadores de decis\u00e3o \u00e9 s\u00f3 voc\u00ea enxegar o pontencial dele...\n\n### Por isso eu adoro a ci\u00eancia de dados, quando voc\u00ea souber fazer o match entre hard skill e soft skills (conhecimento t\u00e9cnio e de neg\u00f3cio) ela nos ajuda a prever o melhor ajuste poss\u00edvel para entender a tend\u00eancia do comportamento dos nossos clientes esse deve ser o foco de um Cientista de Dados.\n### Nesse gr\u00e1fico conseguimos ver que existe uma sombra convergindo o centro e dentro dele h\u00e1 alguns peda\u00e7os dos nossos dados. Esse ponto convergente \u00e9 a m\u00e9dia estat\u00edstica, por baixo dos panos o nosso algor\u00edtimo fez uma previs\u00e3o generalizada do valor 'tip' do nosso dataset em uma base di\u00e1ria do restaurante.\n\n### Agora vamos adicionar mais informa\u00e7\u00f5es ao nosso gr\u00e1fico e dessa vez vamos procurar entender quem d\u00e1 mais gorjeta os fumantes ou n\u00e3o fumantes?\n\n### Para isso iremos copiar o mesmo script acima e s\u00f3 iremos invocar o par\u00e2metro 'hue' recebendo a vari\u00e1vel 'smoker'","797ffa3c":"### Toppp! Aqui n\u00f3s vemos que o dia de s\u00e1bado (sat) \u00e9 o dia que mais temos gorjetas. E como voc\u00ea j\u00e1 percebeu tamb\u00e9m no dia de domingo (sun) temos mais concist\u00eancia no recebimento de gorjetas.\n### Recomendo que voc\u00ea pratique e inclua outros par\u00e2mentros, no par\u00e2metro 'col' voc\u00ea colocar por sexo (sex), 'time'. E voc\u00ea ter\u00e1 outros insights preciosos do dataset.\n\n### Vamos agora dar uma olhada no tipo de gr\u00e1fico Regplot:\n### O tipo de gr\u00e1fico Regplot() n\u00e3o vai fugir muito do gr\u00e1fico Lmplot() quando falamos das funcionalidades principais. O foco nos dois gr\u00e1ficos \u00e9 de conseguirmos ter uma visualiza\u00e7\u00e3o de um relacionamento linear, isto \u00e9: por meio da regress\u00e3o.\n### Basicamente n\u00f3s vamos ter um Scatterplot (O Scatterplot \u00e9 um tipo de gr\u00e1fico de disper\u00e7\u00e3o, utilizando \u00e1lgebra para fazer correla\u00e7\u00e3o entre duas vari\u00e1veis, x & y). No nosso caso do gr\u00e1fico Regplot tamb\u00e9m utilizamos duas vari\u00e1veis s\u00f3 que com um modelo de regress\u00e3o x ~ y que na sequ\u00eancia plota uma linha de regress\u00e3o com um intervalo de confian\u00e7a de 95%.\n\n### Precisa ficar claro a diferen\u00e7a entre esses dois gr\u00e1ficos para que na hora de escolher voc\u00ea escolha o gr\u00e1fico correto. Por isso vamos desmistificar ainda mais... Lembra que no gr\u00e1fico Lmplot n\u00f3s temos tr\u00eas par\u00e2metros obrigat\u00f3rios ('x', 'y', e 'data'). No Regplot voc\u00ea vai ver que os par\u00e2metros s\u00e3o flexis\u00edveis o que significa que as vari\u00e1veis (x & y) n\u00e3o precisam necess\u00e1riamente receber dados do tipo String como entrada.\n\n### Que quer dizer que no tipo de gr\u00e1fico Regplot os par\u00e2metros (x & y) podem tamb\u00e9m receber dados em outros formatos como: objetos de s\u00e9rie Pandas, matrizes NumPy simples, refer\u00eancias de um objeto do tipo DataFrame do Pandas.\n### Aqui vai um overview dos par\u00e2metros do Regplot de acordo com a documenta\u00e7\u00e3o oficial: \n### seaborn.regplot(x, y, data=None, x_estimator=None, x_bins=None, x_ci='ci', scatter=True, fit_reg=True, ci=95, n_boot=1000, units=None, order=1, logistic=False, lowess=False, robust=False, logx=False, x_partial=None, y_partial=None, truncate=False, dropna=True, x_jitter=None, y_jitter=None, label=None, color=None, marker='o', scatter_kws=None, line_kws=None, ax=None).\n\n\n### Vamos imprimir um gr\u00e1fico Regplot b\u00e1sico, e voc\u00ea vai perceber que as diferen\u00e7as no visual do gr\u00e1fico Regplot em rela\u00e7\u00e3o ao gr\u00e1fico Lmplot s\u00e3o m\u00ednimas."}}