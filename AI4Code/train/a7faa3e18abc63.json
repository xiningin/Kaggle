{"cell_type":{"9fd57b19":"code","e89f956a":"code","9c1f8b74":"code","e21cb9a4":"code","9d5be612":"code","379c48d8":"code","215b0b01":"code","828f4a24":"code","be876691":"code","72f151d0":"code","22f9ccfb":"code","41c51519":"code","de751a65":"code","e0ee2d6f":"code","626d3b3f":"code","75e10fdc":"code","f9c82b44":"code","2357ef7d":"code","53be87d9":"code","b608b530":"code","3afb5771":"code","714b5eef":"code","f934bb22":"code","59a94da5":"code","e3d8980d":"code","cfbd98e3":"code","aba060a7":"code","6c37f28e":"code","f718f786":"code","55fc6362":"code","1e3fd5e9":"code","f8f3b1c5":"code","96ec480d":"code","e2a808d3":"code","0697330e":"code","d37c7b38":"code","f615c3aa":"code","8db11681":"code","8f6e25e4":"code","4eaee3c1":"code","40ac5b31":"code","c9f75d15":"code","375407ee":"code","9d45fe53":"code","a8e9341a":"code","9d06a110":"code","cf08282f":"code","1a2459b6":"code","8b210ab1":"code","6e8ea86f":"code","4bddfcb6":"code","85a5a29f":"code","741cac04":"code","10848c43":"code","dec4cd57":"code","1c3e6cf4":"code","4dba80a2":"code","d35c4fa4":"code","44f9ce10":"code","6e630ebd":"code","cb1a255d":"code","7c7bcb13":"code","8f9dbb85":"code","5fc91262":"code","ba8d00ba":"code","fc8c6074":"markdown","b1ef6d84":"markdown","290f6212":"markdown","ed9276d1":"markdown","328c4708":"markdown","cacc4948":"markdown","7d1faff7":"markdown","5f0fe466":"markdown","cde8e22c":"markdown","fd3aacbe":"markdown","cc66acd6":"markdown","e00c28e0":"markdown","c5fa1698":"markdown"},"source":{"9fd57b19":"# This Python 3 environment comes with many helpful analytics libraries installed\n# It is defined by the kaggle\/python Docker image: https:\/\/github.com\/kaggle\/docker-python\n# For example, here's several helpful packages to load\n\nimport numpy as np # linear algebra\nimport pandas as pd # data processing, CSV file I\/O (e.g. pd.read_csv)\n\n# Input data files are available in the read-only \"..\/input\/\" directory\n# For example, running this (by clicking run or pressing Shift+Enter) will list all files under the input directory\n\nimport os\nfor dirname, _, filenames in os.walk('\/kaggle\/input'):\n    for filename in filenames:\n        print(os.path.join(dirname, filename))\n\n# You can write up to 5GB to the current directory (\/kaggle\/working\/) that gets preserved as output when you create a version using \"Save & Run All\" \n# You can also write temporary files to \/kaggle\/temp\/, but they won't be saved outside of the current session","e89f956a":"data=pd.read_csv(\"..\/input\/youtube-new\/KRvideos.csv\", engine=\"python\")\ndata=data.copy()","9c1f8b74":"data.info()\ndata.head()","e21cb9a4":"cat_data=pd.read_json(\"..\/input\/youtube-new\/KR_category_id.json\")\ncat_items=cat_data['items']","9d5be612":"cat_items.count()\nfor idx in range(0, cat_items.count()):\n    cat_data.loc[idx,'id'] = cat_items[idx]['id']\n    cat_data.loc[idx,'category'] = cat_items[idx]['snippet']['title']","379c48d8":"cat_data=cat_data.drop(columns=['kind','etag','items'])","215b0b01":"cat_data.info()\ncat_data.head()","828f4a24":"cat_data['id']=cat_data['id'].astype('int64')\ndata=pd.merge(data, cat_data, left_on='category_id', right_on='id', how='left')","be876691":"data.info()","72f151d0":"data['category_id'].loc[data['id'].isnull()==True].value_counts()","22f9ccfb":"data['id'].fillna(29, inplace=True)\ndata['category'].fillna('Nonprofits & Activism', inplace=True)","41c51519":"data.info()","de751a65":"#idx=(data['video_error_or_removed']==False) & (data['ratings_disabled']==False) & (data['comments_disabled']==False)\n#data=data.loc[idx,:]","e0ee2d6f":"#data[['comments_disabled','ratings_disabled','video_error_or_removed']].describe()","626d3b3f":"data=data.drop(columns=['comments_disabled','ratings_disabled','video_error_or_removed'])","75e10fdc":"data['video_id'].describe()","f9c82b44":"idx=(data['video_id']!='#NAME?')\ndata=data.loc[idx,:]","2357ef7d":"data['video_id'].describe()","53be87d9":"data['trending_date'].head()","b608b530":"data['trending_date']=pd.to_datetime(data['trending_date'], format='%y.%d.%m').dt.date","3afb5771":"data['publish_time'].head()","714b5eef":"data[['publish_date','publish_time']]=data['publish_time'].str.split('T', expand=True)","f934bb22":"data[['publish_date','publish_time']].head()","59a94da5":"data['publish_date']=pd.to_datetime(data['publish_date']).dt.date","e3d8980d":"data['to_trending_days']=(data['trending_date']-data['publish_date']).dt.days","cfbd98e3":"data['to_trending_days'].head()","aba060a7":"data.info()","6c37f28e":"data['tags'].head()","f718f786":"data['tag_count']=data['tags'].apply(lambda x: len(x.split(\"|\")) if x != '[none]' else 0)","55fc6362":"data['tag_count'].head()","1e3fd5e9":"data['tags'].head()","f8f3b1c5":"data['tag_list']=data['tags'].str.split(\"|\")","96ec480d":"data['tag_list'].head()","e2a808d3":"df=data[['category_id','category']]","0697330e":"df_dummy= pd.get_dummies(df)","d37c7b38":"df_dummy.head()","f615c3aa":"video_count=data.groupby(\"video_id\").size()\nvideo_count=video_count.reset_index()","8db11681":"video_count.head()","8f6e25e4":"data=pd.merge(data, video_count, on='video_id', how='left')","4eaee3c1":"data.rename(columns={0:'trending_count'}, inplace=True)","40ac5b31":"data.info()","c9f75d15":"data['trending_count'].describe()","375407ee":"data['title_length']=data['title'].apply(lambda x: len(str(x)) if pd.isnull(x) == False else 0)","9d45fe53":"data['title_length'].describe()","a8e9341a":"data.info()","9d06a110":"data['desc_length']=data['description'].apply(lambda x: len(str(x)) if pd.isnull(x) == False else 0)","cf08282f":"data['desc_length'].describe()","1a2459b6":"data.info()","8b210ab1":"data.sort_values(by='trending_date', inplace=True)\ndata_dr=data.drop_duplicates('video_id', keep='first')","6e8ea86f":"data_dr['video_id'].describe(include='all')","4bddfcb6":"data_dr.info()","85a5a29f":"data_dr=data_dr.drop(columns=['publish_time','id','thumbnail_link','description'])","741cac04":"data_dr.info()","10848c43":"data_dr['category_id']=data_dr['category_id'].astype('object')","dec4cd57":"data_dr.info()","1c3e6cf4":"import matplotlib.pyplot as plt\nimport seaborn as sns\nsns.set_style('whitegrid')\nsns.set()","4dba80a2":"data_dr_corr=data_dr.corr()","d35c4fa4":"plt.figure(figsize = (10,7))\nsns.heatmap(data_dr_corr,\n            cmap='coolwarm', cbar=True, annot=True, square=True, fmt='.2f')","44f9ce10":"data_dr_corr['views'].sort_values(ascending=False)","6e630ebd":"from sklearn.linear_model import LinearRegression\nfrom sklearn.tree import DecisionTreeRegressor\nfrom sklearn.model_selection import train_test_split\nfrom sklearn.linear_model import Lasso, Ridge\nfrom sklearn.metrics import r2_score","cb1a255d":"X_train, X_test, Y_train, Y_test = train_test_split(data_dr[['likes','comment_count','dislikes','desc_length','trending_count','title_length','tag_count','to_trending_days']], data_dr['views'], test_size=0.2, random_state=1)","7c7bcb13":"X_train.head()","8f9dbb85":"lr = LinearRegression()\nridge = Ridge()\nlasso = Lasso()\ntree = DecisionTreeRegressor()","5fc91262":"lr.fit(X_train, Y_train)\nridge.fit(X_train, Y_train)\nlasso.fit(X_train, Y_train)\ntree.fit(X_train, Y_train)","ba8d00ba":"score = make_scorer(r2_score)\nprint('lr_r2_score : {:}'.format(score(lr, X_test, Y_test)))\nprint('ridge_r2_score : {:}'.format(score(ridge, X_test, Y_test)))\nprint('lasso_r2_score : {:}'.format(score(lasso, X_test, Y_test)))\nprint('tree_r2_score : {:}'.format(score(tree, X_test, Y_test)))","fc8c6074":"# \uacf5\uac1c \ud6c4 \uc778\uae30 \ub3d9\uc601\uc0c1\uc5d0 \uc624\ub974\uae30\uae4c\uc9c0 \uac78\ub9b0 \uc2dc\uac04","b1ef6d84":"# \uce74\ud14c\uace0\ub9ac \uc815\ubcf4 \ubd88\ub7ec\uc624\uae30","290f6212":"# \uc81c\ubaa9 \uae38\uc774","ed9276d1":"# \uc601\uc0c1 \uc5d0\ub7ec \ub610\ub294 \uc0ad\uc81c, rating \ubc0f comments \ubd88\uac00 \uc601\uc0c1 \uc81c\uc678 - \uc120\ud0dd\uc0ac\ud56d","328c4708":"# Regression","cacc4948":"# \uc5d0\ub7ec video_id \uc0ad\uc81c","7d1faff7":"# \uc0c1\uad00\ubd84\uc11d","5f0fe466":"# description \uae38\uc774","cde8e22c":"# DATA\uc640 \uce74\ud14c\uace0\ub9ac \uc815\ubcf4 \ub9e4\ud551","fd3aacbe":"# \uc911\ubcf5 video \uc81c\uac70, \ucd5c\ucd08 \uc778\uae30\ub3d9\uc601\uc0c1 \ub4f1\ub85d\uc77c \uae30\uc900\uc73c\ub85c \uc81c\uac70","cc66acd6":"# video\ubcc4 \uc778\uae30\ub3d9\uc601\uc0c1 \ub4f1\ub85d \uc77c\uc218","e00c28e0":"# \ub370\uc774\ud130 \ubd88\ub7ec\uc624\uae30","c5fa1698":"# TAG \uac2f\uc218 \ucd94\uac00"}}