{"cell_type":{"a406af63":"code","16195f75":"code","8883d6de":"code","fd3fbbb7":"code","5ee0a5f6":"code","01bf4641":"code","7e0d5f56":"code","1de487fe":"code","8b18b40f":"code","a2fbd932":"code","a99f13f0":"code","db873d60":"code","2e280785":"code","591d23df":"code","89d17992":"code","e2b77155":"code","9bfd240b":"code","0d712eef":"code","0b9b73e5":"code","137a72d6":"code","cfb34796":"code","8e8a6126":"code","b935ab40":"code","b92ba282":"code","165e0e9b":"code","2022da79":"markdown","e6766957":"markdown","bbd40541":"markdown","8dca2e8c":"markdown","c95aef6a":"markdown","b3d573d8":"markdown","21246e0a":"markdown","c98fae14":"markdown"},"source":{"a406af63":"import numpy as np\nimport pandas as pd \nimport matplotlib.pyplot as plt\nimport seaborn as sns \n%matplotlib inline\nimport plotly.express as px","16195f75":"#lets import the dataset and review the first five rows\ndf = pd.read_csv('..\/input\/sp-500-companies-with-financial-information\/financials.csv')\ndf.head()","8883d6de":"#lets see the column names\ndf.columns","fd3fbbb7":"#lets see how many rows and columns the dataset has\ndf.shape","5ee0a5f6":"#Lets get some idea what inside the dataset\n\ndf.describe(include='all')","01bf4641":"#lets check if all data is available or we have something NaN\nprint(df.isnull().sum())","7e0d5f56":"#lets see these two rows where the Price\/Earnings data is missing\n\ndf[df['Price\/Earnings'].isnull()]","1de487fe":"#how much each Sector has in Market Cap, rounded to 1 decimal point\ndfsec = df.groupby([\"Sector\"]).sum().sort_values(\"Market Cap\", ascending=False).head(20) \ndfsec = dfsec[[\"Market Cap\"]].round(1) \ndfsec.reset_index(inplace=True) \ndfsec","8b18b40f":"#plotting the Market Cap by Sector\n\nplt.figure(figsize = (15,10)) # width and height of figure is defined in inches\nplt.title(\"Market cap by sector\", fontsize=18) \nplt.bar(dfsec[\"Sector\"], dfsec[\"Market Cap\"],color= '#227d3d',edgecolor='yellow', linewidth = 1)\nplt.xlabel(\"Sector\",fontsize=15) # x axis shows the States\nplt.ylabel(\"Market Cap\",fontsize=15) # y axis shows the Revenue\nplt.xticks(fontsize=12, rotation=90)\nplt.yticks(fontsize=12)\n","a2fbd932":"#lets review EBITDA by Sector, on the second line we are rounding to 1 decimal point\n\ndfebitda = df.groupby([\"Sector\"]).sum().sort_values(\"EBITDA\", ascending=False).head() \ndfebitda = dfebitda[[\"EBITDA\"]].round(1) \ndfebitda.reset_index(inplace=True) \ndfebitda","a99f13f0":"fig = px.pie(dfebitda, values='EBITDA', title='EBITDA by Sector (hover to see details)', hole=.3, hover_data=['Sector'], labels={'Sector'})\nfig.show()","db873d60":"#lets create three top sectors\ndfit=df[df['Sector']=='Information Technology']\ndffin=df[df['Sector']=='Financials']\ndfhc=df[df['Sector']=='Health Care']","2e280785":"dfit.head(3)","591d23df":"dffin.head(3)","89d17992":"dfhc.head(3)","e2b77155":"dfit=dfit.sort_values(by='Price',ascending=False).head(5)\ndfit","9bfd240b":"dffin=dffin.sort_values(by='Price',ascending=False).head(5)\ndffin","0d712eef":"dfhc=dfhc.sort_values(by='Price',ascending=False).head(5)\ndfhc","0b9b73e5":"#we can also use \"largest\" function, lets try on health care sector\n\ndfhc1 = dfhc.nlargest(5, ['Price'])","137a72d6":"#this is how to add a title to the dataframe\ndfhc2 = dfhc1[['Sector','Name','Price']]\ndfhc2.style.set_table_attributes(\"style='display:inline'\").set_caption('Top five companies by Price in the Health Care Sector')","cfb34796":"#this is how to add a title to the dataframe\ndfit = dfit[['Name','Price']]\ndfit.style.set_table_attributes(\"style='display:inline'\").set_caption('Top five companies by Price in the IT Sector')","8e8a6126":"#this is how to add a title to the dataframe\ndffin = dffin[['Name','Price']]\ndffin.style.set_table_attributes(\"style='display:inline'\").set_caption('Top five companies by Price in the Financials Sector')","b935ab40":"sns.histplot(data=df['Price'],bins=50, kde=False)","b92ba282":"sns.scatterplot(data=df['Price'])","165e0e9b":"sns.histplot(data=df['Earnings\/Share'],bins=10,kde=False)","2022da79":"# Splitting Sectors","e6766957":"IT sector is leading by both Market Cap and EBITDA, Health Care is also in the same third place, while second place is now taken by Consumer Discretionary","bbd40541":"Lets review the 5 top companies by Price in each of the sectors","8dca2e8c":"# Importing the dataset and first review","c95aef6a":"# Plots","b3d573d8":"Lets have a closer look at the dataset by sectors","21246e0a":"We see that IT sector is the leader, followed by Financials and Health Care sector. Let's have a closer look on these three sectors.","c98fae14":"# Analysis"}}