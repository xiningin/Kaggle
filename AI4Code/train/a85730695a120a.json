{"cell_type":{"0e6e97c9":"code","d10a217b":"code","a776ea07":"code","e48775f1":"code","86a0f72e":"code","b7314879":"code","8a86b41f":"code","27fd643e":"code","81e1531e":"code","18ad0832":"code","18400a83":"code","afed0675":"code","8c1b6386":"code","16c707e4":"code","a67e4673":"code","059a57d1":"code","e11a3016":"code","919d56f6":"code","d5867808":"code","2d5c2c0c":"code","88546afa":"code","ea39dbb2":"code","e9bea4f1":"code","ab9af1ca":"code","a572f5e3":"code","239df60f":"code","bb5c7421":"code","7c79e4d2":"code","71745405":"code","0428d5d6":"code","b628eaaf":"code","964e301a":"code","a1cac75f":"code","f7d73008":"code","62da29b2":"code","ba424e3a":"code","47eafe66":"code","dc2e2ccd":"code","2f93e43d":"code","3b8be576":"code","58608b1d":"code","2ae02bd1":"code","b4c3bfad":"code","20490beb":"code","1fbe6380":"code","deefff31":"code","aa101349":"code","d2b3560f":"code","c0cef90c":"code","42a2f53f":"code","e7c8b9ba":"markdown","c0460853":"markdown","80fa9cbd":"markdown","3e61f34b":"markdown","bd1cb669":"markdown","31137f85":"markdown","37eaf791":"markdown","04ae296a":"markdown","bfb87186":"markdown","68e0a039":"markdown","3175cf2f":"markdown","1aca0240":"markdown","dc37463f":"markdown","0f35e7da":"markdown","656f10ce":"markdown","f73bf169":"markdown","76a4f7cb":"markdown","c5ae9f77":"markdown","9e9da810":"markdown","396ec27e":"markdown","2a6d425d":"markdown","99114666":"markdown","378ddc0e":"markdown","42d5bd0c":"markdown","99302ecc":"markdown","76efe6e3":"markdown","7c73c54c":"markdown","85ed3acc":"markdown"},"source":{"0e6e97c9":"# LOAD PACKAGES\nimport pandas as pd\nimport numpy as np\n\nimport matplotlib.pyplot as plt\nimport seaborn as sns\n%matplotlib inline\n\nimport warnings\nwarnings.filterwarnings('ignore')","d10a217b":"# LOAD DATA\ndf = pd.read_csv('..\/input\/BlackFriday.csv')","a776ea07":"df.head()","e48775f1":"df.info()","86a0f72e":"df.shape","b7314879":"df.dtypes.value_counts()","8a86b41f":"df.fillna(value=0,inplace=True)","27fd643e":"# LOOKING AT THE DATA AGAIN\ndf.head(10)","81e1531e":"df['User_ID'] = df['User_ID'].apply(lambda x: str(x))\ndf['Product_Category_2'] = df['Product_Category_2'].astype(int)\ndf['Product_Category_3'] = df['Product_Category_3'].astype(int)","18ad0832":"df.info()","18400a83":"# CHECK THE NUMBER OF UNIQUE VARIABLES IN EACH COLUMN \n# (NOTE: ZERO WILL ALSO BE REGARDED AS A CATEGORY UNDER THE PRODUCT_CATEGORIES)\n\nfor col in df.drop('Purchase',axis=1):\n    x = df[col].nunique()\n    print(f'{col} column has {x} number of unique categories')","afed0675":"# Remove duplicate User_ID's and the Purchase column to determine the general demographics of the data\ngrouped_df = df.drop_duplicates('User_ID')","8c1b6386":"grouped_df.reset_index(drop=True, inplace=True)","16c707e4":"grouped_df.drop('Purchase', axis=1, inplace=True)","a67e4673":"grouped_df.head()","059a57d1":"len(grouped_df) == df['User_ID'].nunique()","e11a3016":"purchases_df = df.groupby('User_ID')['Purchase'].agg('sum').pipe(pd.DataFrame).reset_index()","919d56f6":"purchases_df.head()","d5867808":"# To verify the numbers\npurchases_df['Purchase'].sum() == df['Purchase'].sum()","2d5c2c0c":"# Since it's True, we can merge the two DataFrames\nnew_df = pd.concat([grouped_df,purchases_df],axis=1)","88546afa":"# Check if there are any missing (NaN) values\nnew_df = pd.DataFrame(new_df)\nnew_df.info()","ea39dbb2":"new_df.head()","e9bea4f1":"plt.figure(figsize=(16,4))\nplt.subplot(121)\nnew_df['Gender'].value_counts().plot.bar(rot=0)\nplt.title('Gender Head Count')\nplt.ylabel('count')\n\n# frequency of each Gender's purchase at the store\nplt.subplot(122)\ndf['Gender'].value_counts().plot.bar(rot=0)\nplt.title('Number of products')\nplt.ylabel('count')\n\nplt.tight_layout()","ab9af1ca":"male_frequency_of_purchase = df[df['Gender']=='M'].count()[0] \/ new_df[new_df['Gender']=='M'].count()[0]\nfemale_frequency_of_purchase = df[df['Gender']=='F'].count()[0] \/ new_df[new_df['Gender']=='F'].count()[0]","a572f5e3":"print('On average, Males purchased {:.0f} products on Black Friday\\n\\\nwhereas on average Females purchased {:.0f} products'.format(male_frequency_of_purchase, female_frequency_of_purchase))","239df60f":"# Total purchase of each Genre\nplt.style.use('ggplot')\nnew_df.groupby('Gender')['Purchase'].sum().plot.bar(rot=0)\nplt.title('Total Expenditure');","bb5c7421":"male_spending = df[df['Gender']=='M']['Purchase'].sum()\nfemale_spending = df[df['Gender']=='F']['Purchase'].sum()\navg_male_spending = df[df['Gender']=='M']['Purchase'].mean()\navg_female_spending = df[df['Gender']=='F']['Purchase'].mean()","7c79e4d2":"print(\"In total Males spent {:.2f} times more money than Females on Black Friday,\\n\\\nwith an average of {:.2f} for Males and {:.2f} for Females\".\n      format(male_spending\/female_spending,avg_male_spending,avg_female_spending))","71745405":"# Average spending per product\nper_product_avg_female = avg_female_spending\/female_frequency_of_purchase\nper_product_avg_male = avg_male_spending\/male_frequency_of_purchase","0428d5d6":"print('On average, Males spent {:.2f} per product and Females spent {:.2f} per product'.\n     format(per_product_avg_male,per_product_avg_female))","b628eaaf":"age_list = ['0-17', '18-25', '26-35', '36-45', '46-50', '51-55', '55+']","964e301a":"plt.figure(figsize=(16,10))\n\n# Distribution by age group\nplt.subplot(221)\nnew_df[new_df['Gender']=='M']['Age'].value_counts().plot.bar()\nplt.title('Number of Male User_ID\\'s by Age group')\nplt.ylabel('count')\nplt.xlabel('Age')\n\nplt.subplot(222)\nnew_df[new_df['Gender']=='F']['Age'].value_counts().plot.bar()\nplt.title('Number of Female User_ID\\'s by Age groups')\nplt.ylabel('count')\nplt.xlabel('Age')\n\n\n# frequency of each Age's purchase at the store\nplt.subplot(223)\nsns.countplot('Age',data=df, order=age_list)\nplt.title('Number of products purchased by different Age groups')\nplt.ylabel('count')\n\n# FILTERED BY GENDER\n\n# frequency of each Age's purchase at the store filtered by gender\nplt.subplot(224)\nsns.countplot('Age',hue='Gender',data=df, order=age_list)\nplt.title('Number of products purchased by grouped by Age and Gender')\n\nplt.tight_layout()","a1cac75f":"# Looking at Purchases\nplt.figure(figsize=(16,10))\n\n# Grouped by Age\nplt.subplot(221)\ndf.groupby('Age')['Purchase'].sum().plot.bar()\nplt.title('Purchases by Age')\nplt.ylabel('Purchase')\nplt.xlabel('Age')\n\n# Grouped by Age and Gender\nplt.subplot(223)\ndf[df['Gender']=='M'].groupby('Age')['Purchase'].sum().plot.bar()\nplt.title('Purchases by Age, Males')\nplt.ylabel('Purchase')\nplt.xlabel('Age')\n\nplt.subplot(224)\ndf[df['Gender']=='F'].groupby('Age')['Purchase'].sum().plot.bar()\nplt.title('Purchases by Age, Females')\nplt.ylabel('Purchase')\nplt.xlabel('Age')\n\nplt.tight_layout()","f7d73008":"new_df['City_Category'].unique()","62da29b2":"# Marital Status, 0: Single, 1:Married\ndf['Marital_Status'] = ['single' if x == 0 else 'married' for x in df['Marital_Status']]","ba424e3a":"plt.figure(figsize=(16,15))\n\nplt.subplot(321)\nsns.countplot('City_Category',data=df)\nplt.title('Number of products purchased by City Category')\n\nplt.subplot(322)\nsns.barplot('City_Category','Purchase',data=df, estimator=np.mean)\nplt.title('Mean Purchases by City Category')\n\nplt.subplot(323)\nsns.countplot('City_Category', hue='Gender',data=df)\nplt.title('Number of products purchased by Gender and City Category')\n\n\nplt.subplot(324)\nsns.barplot('City_Category','Purchase',hue='Gender',data=df, estimator=np.mean)\nplt.title('Mean Purchases and Gender by City Category')\n\nplt.subplot(325)\nsns.countplot('City_Category', hue='Marital_Status',data=df)\nplt.title('Number of products purchased by Gender and City Category')\n\nplt.subplot(326)\nsns.barplot('City_Category','Purchase',hue='Marital_Status',data=df, estimator=np.mean)\nplt.title('Mean Purchases and Marital_Status by City Category')\n\nplt.tight_layout()","47eafe66":"df['Occupation'].unique()","dc2e2ccd":"plt.figure(figsize=(14,18))\n\nplt.subplot(411)\nsns.barplot(x='Occupation',y='Purchase',hue='City_Category',data=df,estimator=np.sum)\nplt.title('Purchases by Occupation in each City Category')\nplt.legend(bbox_to_anchor=(1.1,1))\n\nplt.subplot(412)\nsns.barplot(x='Occupation',y='Purchase',hue='City_Category',data=df,estimator=np.mean)\nplt.title('Mean Purchases by Occupation in each City Category')\nplt.legend(bbox_to_anchor=(1.1,1))\n\nplt.subplot(413)\nsns.barplot(x='Age',y='Purchase',hue='City_Category',data=df,estimator=np.sum,order=age_list)\nplt.title('Purchases by Age in each City Category')\nplt.legend(bbox_to_anchor=(1.1,1))\n\nplt.subplot(414)\nsns.barplot(x='Age',y='Purchase',hue='City_Category',data=df,estimator=np.mean,order=age_list)\nplt.title('Mean Purchases by Age in each City Category')\nplt.legend(bbox_to_anchor=(1.1,1))\n\nplt.tight_layout()","2f93e43d":"df['Stay_In_Current_City_Years'].unique()","3b8be576":"stay_list = ['0','1','2','3','4+']","58608b1d":"# Marital Status, 0: Single, 1:Married\nnew_df['Marital_Status'] = ['single' if x == 0 else 'married' for x in new_df['Marital_Status']]","2ae02bd1":"plt.figure(figsize=(16,5))\n\nplt.subplot(121)\nnew_df[new_df['Gender']=='M']['Stay_In_Current_City_Years'].value_counts().plot.bar()\nplt.title('No. of years in a city: Males')\n\nplt.subplot(122)\nnew_df[new_df['Gender']=='F']['Stay_In_Current_City_Years'].value_counts().plot.bar()\nplt.title('No. of years in a city: Females')\n\nplt.tight_layout()\n","b4c3bfad":"plt.figure(figsize=(16,10))\n\nplt.subplot(221)\nsns.barplot(x='Stay_In_Current_City_Years',y='Purchase',data=df,order=stay_list,estimator=np.sum)\n\nplt.subplot(222)\nsns.barplot(x='Stay_In_Current_City_Years',y='Purchase',data=df,order=stay_list,estimator=np.mean)\n\nplt.subplot(223)\nsns.barplot(x='Stay_In_Current_City_Years',y='Purchase',hue='Gender',data=df,order=stay_list,estimator=np.mean)\n\nplt.subplot(224)\nsns.barplot(x='Stay_In_Current_City_Years',y='Purchase',hue='Marital_Status',data=df,order=stay_list,estimator=np.mean)\n\nplt.tight_layout()","20490beb":"# For further insight between Age Distribution and number of years in the city\npivot_df = pd.pivot_table(data=new_df,index='Age',columns='Stay_In_Current_City_Years',values='Purchase',aggfunc=np.count_nonzero)","1fbe6380":"plt.figure(figsize=(10,6))\nsns.heatmap(pivot_df,cmap='coolwarm',annot=True);","deefff31":"print('cat_1')\nprint(df['Product_Category_1'].unique(),df['Product_Category_1'].nunique())\nprint('\\n')\nprint('cat_2')\nprint(df['Product_Category_2'].unique(),df['Product_Category_2'].nunique())\nprint('\\n')\nprint('cat_3')\nprint(df['Product_Category_3'].unique(),df['Product_Category_3'].nunique())","aa101349":"def category_plots(cat):\n    \n    plt.subplot(611)\n    sns.countplot(x=cat,data=df[df[cat]!=0]) # Zero had replaced 'NaN' meaning no purchase was made of the Product_Category \n    plt.title(f'Number of {cat} purchased')\n    \n    plt.subplot(612)\n    sns.barplot(x=cat,y='Purchase',hue='Gender',data=df[df[cat]!=0],estimator=np.sum)\n    plt.title(f'Total {cat} purchased according to Gender')\n    \n    plt.subplot(613)\n    sns.barplot(x=cat,y='Purchase',hue='Marital_Status',data=df[df[cat]!=0],estimator=np.sum)\n    plt.title(f'Total {cat} purchased according to Marital_Status')\n    \n    plt.subplot(614)\n    sns.barplot(x=cat,y='Purchase',hue='Age',data=df[df[cat]!=0],estimator=np.sum)\n    plt.title(f'Total {cat} purchased filtered by Age group')\n    \n    plt.subplot(615)\n    sns.barplot(x=cat,y='Purchase',hue='City_Category',data=df[df[cat]!=0],estimator=np.sum)\n    plt.title(f'Total {cat} purchased filtered by City_Category')\n    \n    plt.subplot(616)\n    sns.barplot(x=cat,y='Purchase',hue='Stay_In_Current_City_Years',data=df[df[cat]!=0],estimator=np.sum)\n    plt.title(f'Total {cat} purchased filtered by Years staying in the city')\n    \n    plt.tight_layout()","d2b3560f":"plt.figure(figsize=(16,30))\ncategory_plots('Product_Category_1')","c0cef90c":"plt.figure(figsize=(16,30))\ncategory_plots('Product_Category_2')","42a2f53f":"plt.figure(figsize=(16,30))\ncategory_plots('Product_Category_3')","e7c8b9ba":"The purchase trends are all similar to the number of users per each age group, it seems overall, a strong support is for the age group 18-45 year olds. ","c0460853":"Layout of the type of data in the DataFrame","80fa9cbd":"Nothing new regarding filtered data can be intepreted from Product_Category_3","3e61f34b":"### Age","bd1cb669":"There were more males who made a purchase on the day than there were females which also explains the large number of products purchased by males than females. However, females might have been accompanying their male companion on the day which could also be a factor in this significant difference.","31137f85":"Further data exploration will look at distibution of each of the features and if any insights can be gathered from them,\nfirst looking at the features on their own","37eaf791":"'User_ID' is regarded as an int64, though it is similar to 'Product_ID' in terms of meaning, 'User_ID' shall be converted\nto an object type data. Similarly Product_Category_2 and Product_Category_3 can be converted to integers","04ae296a":"### Analyzing the Product Categories","bfb87186":"### City Category","68e0a039":"Majority of people in each age category have stayed in the city for 1 year, with the numbers declining as the number of years in the city increase as well as age increase post '26-35' years category. The trend suggests as people get older they leave the city.","3175cf2f":"To check the influence of years in the city on Purchase, and whether it is affected by Gender and\/or Marital Status ","1aca0240":"### Data exploration","dc37463f":"The '26-35' age group seems to have purchased a lot of products on Black Friday with males in each age group purchasing more products than females","0f35e7da":"#### Kernel Still in Progress...","656f10ce":"Similar results are obtained in Product_Category_2, though the most purchased products are category 8, followed by 2, then 14, 16 and then 15.","f73bf169":"The 'NaN' values were originally blanks, therefore wherever there's a 'NaN', it will be converted to zero","76a4f7cb":"## My First Kernel: Black Friday ","c5ae9f77":"Category 5, followed by 1, then 8 are the standout Product_Category_1 products purchased on Black Friday with males being the dominant gender in all categories. Though the according to purchase amount Category 1 seems to have the most amount spent on it, mostly by single people. Ages between 26-35 are the dominant customers according to amount spent on Product_Category_1, and for those people staying in City_Category_B. Those people who have stayed in the city for 1 year seem to be those who purchased the most from almost each product category","9e9da810":"Summary:\n\nTo sum it all up regarding Gender, in terms of purchases, more males made more purchase on the day than females which transferred to higher total purchases, 3.31 times more for males than females. Furthermore on average males purchased more products than females which got transferred to a higher purchase average for males than females. However it can be assumed that at the store on the day, majority of products purchased by males were male products, similarly for females. Then it can be argued that a high cost per product endured by females than males is also a contributing factor in lower female statistics.    ","396ec27e":"This is an overview of the data","2a6d425d":"Overall looking at the mean Purchase, occupation and age do not have a significant bearing on Purchase ","99114666":"### Stay in Current City","378ddc0e":"Description\nThe dataset here is a sample of the transactions made in a retail store. The\nstore wants to know better the customer purchase behavior against different\nproducts. Specifically, here the problem is a regression problem where we are\ntrying to predict the dependent variable (the amount of purchase) with the\nhelp of the information contained in the other variables.\n\nClassification problem can also be settled in this dataset since several\nvariables are categorical, and some other approaches could be \"Predicting the\nage of the consumer\" or even \"Predict the category of goods bought\". This\ndataset is also particularly convenient for clustering and maybe find different\nclusters of consumers within it.","42d5bd0c":"As already established, number of years in a city of '1' are the highest spenders, though as the years go by which is also correlated to as people get older, the numbers decline. This might be due to the store attracts younger customers on Black Friday than older customers. ","99302ecc":"More purchase done in City_Category B followed by City_Category C then by City_Category  even though on average City_Category_B Purchase is the highest. Furthermore based on Marital_Status, there are a lot more single people in each City_Category than there are married people, with Marital_Status not impacting the average purchases. A further look into the Age distribution of each city and occupational distribution for each City_Category follows:","76efe6e3":"### Gender","7c73c54c":"This makes sense since we removed the duplicates and all that is left are the unique User_ID","85ed3acc":"Majority of the people have stayed in the city for only a year, with males being the majority in each year category"}}