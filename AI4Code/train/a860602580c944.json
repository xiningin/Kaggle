{"cell_type":{"47f3e4fc":"code","96d81bb0":"code","c028b884":"code","7b5844fe":"code","2db12cf0":"code","dec4c40a":"code","74eab4ff":"code","d543be27":"code","4c20017e":"code","2f7b0a7a":"code","bb320630":"code","7c041f05":"code","16f9a565":"code","d178bfca":"code","a35284ba":"markdown"},"source":{"47f3e4fc":"address = '..\/input\/face-detection-in-images\/face_detection.json'","96d81bb0":"import json\nimport codecs","c028b884":"# get links and stuff from json\n\njsonData = []\n\nwith codecs.open(address, 'rU', 'utf-8') as js:\n    for line in js:\n        jsonData.append(json.loads(line))\n\nprint(f\"{len(jsonData)} image found!\")\n\nprint(\"Sample row:\")\n\njsonData[0]","7b5844fe":"import numpy as np\nimport requests\nfrom tqdm import tqdm\nfrom PIL import Image\nfrom io import BytesIO","2db12cf0":"# load images from url and save into images\n\nimages = []\n\nfor data in tqdm(jsonData):\n    response = requests.get(data['content'])\n    img = np.asarray(Image.open(BytesIO(response.content)))\n    images.append([img, data[\"annotation\"]])","dec4c40a":"!mkdir face-detection-images","74eab4ff":"import cv2\nimport time","d543be27":"count = 1\n\ntotalfaces = 0\n\nstart = time.time()\n\nfor image in images:\n    img = image[0]\n    metadata = image[1]\n    for data in metadata:\n        height = data['imageHeight']\n        width = data['imageWidth']\n        points = data['points']\n        if 'Face' in data['label']:\n            x1 = round(width*points[0]['x'])\n            y1 = round(height*points[0]['y'])\n            x2 = round(width*points[1]['x'])\n            y2 = round(height*points[1]['y'])\n            cv2.rectangle(img, (x1, y1), (x2, y2), (0, 0, 255), 1)\n            totalfaces += 1\n    cv2.imwrite('.\/face-detection-images\/face_image_{}.jpg'.format(count),img)\n    count += 1\n    \nend = time.time()\n\nprint(\"Total test images with faces : {}\".format(len(images)))\nprint(\"Sucessfully tested {} images\".format(count-1))\nprint(\"Execution time in seconds {}\".format(end-start))\nprint(\"Total Faces Detected {}\".format(totalfaces))","4c20017e":"import matplotlib.pyplot as plt","2f7b0a7a":"face1 = cv2.imread(\".\/face-detection-images\/face_image_64.jpg\")","bb320630":"plt.figure(figsize=(20,25))\nplt.imshow(face1)\nplt.show()","7c041f05":"plt.figure(figsize=(18,15))\nplt.imshow(cv2.cvtColor(face1, cv2.COLOR_BGR2RGB))","16f9a565":"face2 = cv2.imread(\".\/face-detection-images\/face_image_400.jpg\")","d178bfca":"plt.figure(figsize=(20,25))\nplt.imshow(face2)\nplt.show()","a35284ba":"Let's add the libraries where they are really needed, not all of them at the first line"}}