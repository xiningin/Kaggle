{"cell_type":{"90b74dc5":"code","b992c075":"code","15f1c360":"code","ad317516":"code","539684c9":"code","0e7a29d7":"code","16f07620":"code","64bad9aa":"code","ebd77554":"code","2e1e42fb":"code","cde764fb":"code","f2e08be9":"code","edabbf21":"code","cc00bf35":"code","1182876a":"code","fb0c3e4e":"code","7aa84d51":"code","ddfcb522":"code","b4319399":"code","05b8a266":"code","a2e1909f":"code","9bf2ddb5":"code","ace5a107":"code","1d752e80":"code","73ceba26":"code","eccf7df1":"code","71ac7a97":"markdown","240553e8":"markdown","7253b4bf":"markdown","ba7ac492":"markdown","d1e49009":"markdown"},"source":{"90b74dc5":"pip install calplot","b992c075":"pip install apyori","15f1c360":"import numpy as np\nimport pandas as pd\nimport matplotlib.pyplot as plt\nimport seaborn as sns\nimport plotly.express as px\nimport calplot\nimport warnings\nwarnings.filterwarnings('ignore')","ad317516":"grocery_dataset = pd.read_csv('..\/input\/groceries-dataset\/Groceries_dataset.csv')","539684c9":"grocery_dataset","0e7a29d7":"print(grocery_dataset.info())","16f07620":"grocery_dataset","64bad9aa":"# Extracting data for grocery items sold in 2015\ndf2015 = grocery_dataset[pd.DatetimeIndex(grocery_dataset['Date']).year==2015].\\\ngroupby(['Date']).size().reset_index(name='count').sort_values('Date',ascending=True)","ebd77554":"df2015","2e1e42fb":"# Visualizing the number of distribution of grocery items sold in 2015\nplt.figure(figsize=(15,10))\ndf2015['Date'] = pd.DatetimeIndex(df2015['Date'])\ndf2015.set_index(\"Date\", inplace = True,drop = True)\nevents = df2015[\"count\"]\ncalplot.calplot(events,cmap='YlGn')\nplt.title('Distribution of no. of items sold in the year 2015',fontsize=15)\nplt.show()","cde764fb":"# Extracting data for grocery items sold in 2014\ndf2014 = grocery_dataset[pd.DatetimeIndex(grocery_dataset['Date']).year==2014].\\\ngroupby(['Date']).size().reset_index(name='count').sort_values('Date',ascending=True)","f2e08be9":"df2014","edabbf21":"# Visualizing the number of distribution of grocery items sold in 2014\nplt.figure(figsize=(15,10))\ndf2014['Date'] = pd.DatetimeIndex(df2014['Date'])\ndf2014.set_index(\"Date\", inplace = True,drop = True)\nevents = df2014[\"count\"]\ncalplot.calplot(events,cmap='YlGn')\nplt.title('Distribution of no. of items sold in the year 2014',fontsize=15)\nplt.show()","cc00bf35":"df = grocery_dataset.groupby(['itemDescription']).size().reset_index(name='count')","1182876a":"# Visualizing the distribution of items sold during 2014-15\ndf.loc[df['count'] < 500, 'itemDescription'] = 'Other items'\nfig = px.pie(df, values='count',names = 'itemDescription',title='Distribution of items sold during 2014-15')\nfig.show()","fb0c3e4e":"grocery_df = grocery_dataset.groupby('Date').agg({'itemDescription':','.join})","7aa84d51":"grocery_df","ddfcb522":"grocery_df['itemDescription'] = grocery_df['itemDescription'].str.split(',')","b4319399":"transactions=[]\nfor i in range(0,len(grocery_df)):\n    transactions.append(grocery_df['itemDescription'][i])","05b8a266":"from apyori import apriori\nrules = apriori(transactions=transactions,min_support=0.0042,min_confidence=0.8,min_lift=3,\n                min_length=3,max_length=3)","a2e1909f":"rules","9bf2ddb5":"results = list(rules)","ace5a107":"len(results)","1d752e80":"def inspect(results):\n    baseItem   = [tuple(result[2][0][0])[0:] for result in results]\n    addItem     = [tuple(result[2][0][1])[0] for result in results]\n    supports    = [result[1] for result in results]\n    confidences = [result[2][0][2] for result in results]\n    lifts       = [result[2][0][3] for result in results]\n    return list(zip(baseItem,addItem, supports, confidences, lifts))\nresultsinDataFrame = pd.DataFrame(inspect(results),columns=['BaseItems','AdditionalItems','Supports',\n                                                            'Confidences','Lifts'])","73ceba26":"resultsinDataFrame","eccf7df1":"# Visualizing the distribution of add-on items sold with base products\nplt.figure(figsize=(20,12))\nsns.countplot(x='AdditionalItems',data=resultsinDataFrame)\nplt.xlabel('Additional Items associated with base products',fontsize=20)\nplt.ylabel('Count of additional items',fontsize=20)\nplt.title('Distribution of additional items',fontsize=25)\nplt.xticks(rotation=90,fontsize=20)\nplt.yticks(fontsize=20)\nplt.show()","71ac7a97":"<div class=\"alert alert-block alert-info\">\n<b>Assumption:<\/b> The below rules contain items that have been sold for a minimum of 3 times in a day. Also, the minimum and maximum number of items in each rule is set to 3. These values are subject to changes basis business requirement.\n<\/div>","240553e8":"### Importing the dataset","7253b4bf":"### Training the apriori model on the grocery items dataset","ba7ac492":"### Data preprocessing","d1e49009":"### Importing the libraries"}}