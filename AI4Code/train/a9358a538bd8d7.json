{"cell_type":{"e6a82809":"code","c542fef2":"code","1355d388":"code","e801107e":"code","0b83c663":"code","4aca6cce":"code","1bcd3493":"code","dd4ddcec":"code","7d53b643":"code","15142db6":"code","da5e7225":"code","972df6f6":"code","139c7569":"code","91ff808c":"code","b315d51e":"code","7ee6d7a4":"code","41d98cc1":"code","4bfe2e85":"code","5a86293d":"code","07a29995":"code","525a3f05":"code","740e81b0":"code","a1ee921c":"code","b9cd227e":"code","b1c79d7a":"code","62b59588":"code","241ad00b":"code","1aec10b0":"code","44f021ab":"code","0630a900":"markdown","5cadb993":"markdown","86392592":"markdown","c5375f48":"markdown","8dc61160":"markdown","54c24b14":"markdown","008e9234":"markdown","26e4f084":"markdown","c0e9d2eb":"markdown","6e52356f":"markdown","51787191":"markdown","148333f1":"markdown","fce4e2e4":"markdown","9eb50593":"markdown","be6b062e":"markdown","5e5edfe9":"markdown","1d1b1614":"markdown","37cfe32b":"markdown","64ecb4df":"markdown","5a945275":"markdown","e0f62466":"markdown","b4b5f4c3":"markdown","728562c0":"markdown","cd584d26":"markdown","fa167176":"markdown","1497a83b":"markdown","aff13afe":"markdown","58d37999":"markdown","ce038e92":"markdown","c73d193a":"markdown","707b87f4":"markdown","22d189ca":"markdown","6d4b6469":"markdown","0b0b338d":"markdown","e83acd2c":"markdown","936cc99e":"markdown","ed501159":"markdown","cb74baae":"markdown","abd7b913":"markdown","50f8d7bb":"markdown","1c68ec8e":"markdown"},"source":{"e6a82809":"import numpy as np \nimport pandas as pd\nimport seaborn as sns\nimport matplotlib.pyplot as plt\n\n#sklearn\nfrom sklearn.model_selection import train_test_split, cross_val_score,KFold\nfrom sklearn import datasets, linear_model\nfrom sklearn.preprocessing import StandardScaler\nfrom sklearn.ensemble import RandomForestRegressor\nfrom sklearn.tree import DecisionTreeRegressor\nfrom sklearn.linear_model import LassoCV\nfrom sklearn import preprocessing, svm\n\n\nimport os\nfor dirname, _, filenames in os.walk('\/kaggle\/input'):\n    for filename in filenames:\n        print(os.path.join(dirname, filename))\n","c542fef2":"df_train=pd.read_csv('..\/input\/demand-forecasting-kernels-only\/train.csv')","1355d388":"df_test= pd.read_csv('..\/input\/demand-forecasting-kernels-only\/test.csv', index_col='id')","e801107e":"df_smple=  pd.read_csv('..\/input\/demand-forecasting-kernels-only\/sample_submission.csv', index_col='id')","0b83c663":"df_train.head()","4aca6cce":"df_train.info()","1bcd3493":"df_train.shape","dd4ddcec":"df_test.head()","7d53b643":"df_test.info()","15142db6":"df_test.shape","da5e7225":"fig, ax = plt.subplots(nrows = 1, ncols = 2, figsize = (18, 6))\nsns.heatmap(df_train.isnull(), yticklabels=False, ax = ax[0], cbar=False, cmap='viridis')\nax[0].set_title('Trian data')\n\nsns.heatmap(df_test.isnull(), yticklabels=False, ax = ax[1], cbar=False, cmap='viridis')\nax[1].set_title('Test data')","972df6f6":"# change date to DateTime\ndf_train['date'] = pd.to_datetime(df_train['date'])\ndf_train.dtypes","139c7569":"# change date to DateTime\ndf_test['date'] = pd.to_datetime(df_test['date'])\ndf_test.dtypes","91ff808c":"#train data\ndf_train['year'] = df_train['date'].dt.year\ndf_train['month'] = df_train['date'].dt.month\ndf_train['day'] = df_train['date'].dt.day\ndf_train['week'] = df_train['date'].dt.week\ndf_train['weekofyear'] = df_train['date'].dt.weekofyear\ndf_train['dayofweek'] = df_train['date'].dt.dayofweek\ndf_train['weekday'] = df_train['date'].dt.weekday\ndf_train['dayofyear'] = df_train['date'].dt.dayofyear\ndf_train['quarter'] = df_train['date'].dt.quarter\n\ndf_train['is_month_start'] = df_train['date'].dt.is_month_start\ndf_train['is_month_end'] =df_train['date'].dt.is_month_end\ndf_train['is_quarter_start'] = df_train['date'].dt.is_quarter_start\ndf_train['is_quarter_end'] = df_train['date'].dt.is_quarter_end\ndf_train['is_year_start'] = df_train['date'].dt.is_year_start\ndf_train['is_year_end'] = df_train['date'].dt.is_year_end\n\n# To convert data type from bool to int\n# df_train['is_month_start'] = (df_train.date.dt.is_month_start).astype(int)","b315d51e":"#Test data\n\ndf_test['year'] = df_test['date'].dt.year\ndf_test['month'] = df_test['date'].dt.month\ndf_test['day'] = df_test['date'].dt.day\ndf_test['week'] = df_test['date'].dt.week\ndf_test['weekofyear'] = df_test['date'].dt.weekofyear\ndf_test['dayofweek'] = df_test['date'].dt.dayofweek\ndf_test['weekday'] = df_test['date'].dt.weekday\ndf_test['dayofyear'] = df_test['date'].dt.dayofyear\ndf_test['quarter'] = df_test['date'].dt.quarter\n\ndf_test['is_month_start'] = df_test['date'].dt.is_month_start\ndf_test['is_month_end']= df_test['date'].dt.is_month_end\ndf_test['is_quarter_start'] = df_test['date'].dt.is_quarter_start\ndf_test['is_quarter_end'] = df_test['date'].dt.is_quarter_end\ndf_test['is_year_start'] = df_test['date'].dt.is_year_start\ndf_test['is_year_end'] = df_test['date'].dt.is_year_end\n","7ee6d7a4":"df_train.info()","41d98cc1":"df_test.info()","4bfe2e85":"del df_train['date']\ndel df_test['date']","5a86293d":"plt.figure(figsize=(33,30))\ncor = df_train.corr()\nsns.heatmap(cor, annot=True, cmap=plt.cm.Reds)\nplt.show()","07a29995":"y = df_train['sales']\nX = df_train.drop('sales', axis=1)","525a3f05":"ss = StandardScaler()\nXs =ss.fit_transform(X)\nX_test_ss = ss.transform(df_test)","740e81b0":"%%time\nrandomF = RandomForestRegressor()\nrandomF.fit(Xs, y)\nprint('Score :',randomF.score(Xs, y))","a1ee921c":"pred_f = randomF.predict(X_test_ss)","b9cd227e":"%%time\ntree = DecisionTreeRegressor(max_depth = 28)\ntree.fit(Xs, y)\nprint('Score : ',tree.score(Xs, y))","b1c79d7a":"pred_t = tree.predict(X_test_ss)","62b59588":"submission = df_smple.drop(['sales'],axis=1)","241ad00b":"submission['sales'] = pred_f","1aec10b0":"submission.head()","44f021ab":"submission.to_csv('submission.csv')","0630a900":"### Plotting Histograms\n","5cadb993":"## EDA","86392592":"## Kaggle Score ","c5375f48":"- ### Drop Columns","8dc61160":"![prediction%20sales.png](attachment:prediction%20sales.png)","54c24b14":"# Store Item Demand Forecasting Challenge","008e9234":"### Here we used Power BI to do the visualizations ","26e4f084":"## Clean Data ","c0e9d2eb":"![prediction%20sales%20Feb.png](attachment:prediction%20sales%20Feb.png)","6e52356f":"### 2- Build Decision Tree Model\n","51787191":"![Screen%20Shot%202020-06-20%20at%2011.15.35%20AM.png](attachment:Screen%20Shot%202020-06-20%20at%2011.15.35%20AM.png)","148333f1":"![sales%202016.png](attachment:sales%202016.png)","fce4e2e4":"![sales%20by%20dates.png](attachment:sales%20by%20dates.png)","9eb50593":"### Check Missing Values","be6b062e":"## Introduction\n\n- In this Kaggle competition, we aim to predict 3 months of sales for 50 different items at 10 different stores.\n","5e5edfe9":"- ### Preprocessing: Date Column","1d1b1614":"---","37cfe32b":"---","64ecb4df":"## Importing packages\n","5a945275":"- ### Data Types","e0f62466":"In this chart, we can see the sales of each store from 2013 to 2017, and store 2 was the highest amount of sales then 8 and 3 respectively.","b4b5f4c3":"![sales%202017.png](attachment:sales%202017.png)","728562c0":"![sales%202015.png](attachment:sales%202015.png)","cd584d26":"![prediction%20sales%20Jan.png](attachment:prediction%20sales%20Jan.png)","fa167176":"The common items in all months that had the highest numbers of sales were 15 and 28. On the other hand, the common items in all months that had the lowest numbers of sales was 5. ","1497a83b":"The common items in all years that had the highest numbers of sales were 15 and 28, on the other hand, the common items in all years that had the lowest numbers of sales was 5. ","aff13afe":"## Modeling","58d37999":"![prediction%20sales%20Mar.png](attachment:prediction%20sales%20Mar.png)","ce038e92":"As we see above, March recorded the highest sales by 824K , February and January almost 610K. In addition, the sales of each store from Jan to Mar, and store 2 was the highest amount of sales then 8 and 3 respectively.","c73d193a":"### 1- Build RandomForest Model","707b87f4":"---","22d189ca":"### Submission","6d4b6469":"## Visualizing Sales Prediction for 2018 ","0b0b338d":"## Visualizations","e83acd2c":"---","936cc99e":"## Loading  Data\n","ed501159":"![sales%202014.png](attachment:sales%202014.png)","cb74baae":"We notice that the sales grew yearly, and between 2013 and 2014 the growth was bigger than others.","abd7b913":"### Group members:\n- Khwla Alsafri\n- Ahmad Fatani \n- Doaa Alsenani\n---","50f8d7bb":"![sales%202013.png](attachment:sales%202013.png)","1c68ec8e":"![sales%20by%20stores.png](attachment:sales%20by%20stores.png)"}}