{"cell_type":{"ba571cc1":"code","1022bcfe":"code","a0c33ce7":"code","16342800":"code","14f6b738":"code","b3d2e8b0":"code","c3f11efe":"code","f00701da":"code","c259a511":"code","9d7ae609":"code","322b0308":"code","c06ff5e4":"code","375da9c8":"code","9d0239d6":"code","6fd79f85":"code","9e037c2d":"code","628a373b":"code","cdc846bc":"code","f771faf3":"code","ad632f28":"code","0d8d9d7b":"code","bb40c051":"code","77abe4f2":"code","2e0866d2":"code","c2998abb":"code","a40a2689":"code","8747df9a":"code","d663e843":"code","687ed989":"code","448a79cf":"code","42c1bf73":"code","262ab14e":"code","bcd92935":"code","e434eee4":"code","e1c98ae0":"markdown","cc467cd4":"markdown","ae640d73":"markdown","a033c4d1":"markdown","4836df54":"markdown","d4b511e2":"markdown"},"source":{"ba571cc1":"# This Python 3 environment comes with many helpful analytics libraries installed\n# It is defined by the kaggle\/python docker image: https:\/\/github.com\/kaggle\/docker-python\n# For example, here's several helpful packages to load in \n\nimport numpy as np # linear algebra\nimport pandas as pd # data processing, CSV file I\/O (e.g. pd.read_csv)\n\n# Input data files are available in the \"..\/input\/\" directory.\n# For example, running this (by clicking run or pressing Shift+Enter) will list the files in the input directory\n\nimport os\nprint(os.listdir(\"..\/input\"))\n\n\n\n# Any results you write to the current directory are saved as output.","1022bcfe":"import matplotlib.pyplot as plt\nimport seaborn as sns\n%matplotlib inline\n\nfrom sklearn.preprocessing import LabelEncoder,OneHotEncoder\nfrom sklearn.model_selection import train_test_split\nfrom sklearn.linear_model import LinearRegression\nfrom sklearn.metrics import mean_absolute_error, mean_squared_error,r2_score\n\nfrom sklearn import metrics\n\nfrom sklearn.linear_model import LogisticRegression\nfrom sklearn.metrics import classification_report\nfrom sklearn.metrics import roc_auc_score\nfrom sklearn.metrics import roc_curve\n","a0c33ce7":"#reading CSV\nempdf=pd.read_csv(\"..\/input\/HR-Employee-Attrition.csv\")\nempdf1=empdf.copy()\nempdf1.head()","16342800":"empdf1.shape\n","14f6b738":"retained = empdf1[empdf1.Attrition == 'Yes']\nretained.shape","b3d2e8b0":"retained = empdf1[empdf1.Attrition == 'No']\nretained.shape","c3f11efe":"empdf1.groupby('Attrition').mean()","f00701da":"sns.boxplot(x=\"Attrition\", y= \"MonthlyIncome\", data=empdf1)\nplt.show()","c259a511":"sns.boxplot(x='Attrition',y='DailyRate',data=empdf1)\nplt.show()","9d7ae609":"sns.boxplot(x='Attrition',y='DistanceFromHome',data=empdf1)\nplt.show()","322b0308":"empdf1.Attrition.value_counts()","c06ff5e4":"empdf1.info()","375da9c8":"empdf1.isna().sum()","9d0239d6":"empdf1.duplicated().sum()","6fd79f85":"#Extracting the numerical columns\nnum_col=empdf1.select_dtypes(include=np.number).columns\nnum_col","9e037c2d":"#Extracting the categorical columns\ncat_col=empdf1.select_dtypes(exclude=np.number).columns\n\ncat_col","628a373b":"for i in cat_col:\n    print(empdf1[i].value_counts())","cdc846bc":"#one hot encoding for category column\nencoded_cat_col=pd.get_dummies(empdf1[cat_col])\nencoded_cat_col.head()","f771faf3":"#Concat Category column & numerical column\nempdf1_ready_model=pd.concat([empdf1[num_col],encoded_cat_col],axis=1)\nempdf1_ready_model.head()","ad632f28":"#performing Label encoding so that dataframe gets updated\nle=LabelEncoder()\nfor i in cat_col:\n    empdf1[i]=le.fit_transform(empdf1[i])\nempdf1.head()","0d8d9d7b":"#verification of data count after encoding\nleft=empdf1[empdf1.Attrition== 1]\nleft.shape","bb40c051":"#verification of data count after encoding\nretained = empdf1[empdf1.Attrition== 0]\nretained.shape","77abe4f2":"empdf1.describe().T","2e0866d2":"plt.figure(figsize=(50,20))\nsns.heatmap(empdf1.corr(),vmin=-1,vmax=1,center=0,annot=True)\n#ax=sns.heatmap(empdf1.corr(),annot=True)\n#plt.show(ax)","c2998abb":"#finding the correlation\nempdf1.corr()","a40a2689":"#split the data in to Train & Test\nX=empdf1.drop(columns='Attrition')\ny=empdf1['Attrition']\ntrain_X,test_X,train_y,test_y=train_test_split(X,y,test_size=0.3,random_state=1)\n\nprint(\"Train X :\", train_X.shape)\nprint(\"Test X :\",test_X.shape)\nprint(\"Train y :\",train_y.shape)\nprint(\"Test y :\",test_y.shape)\n\n\n","8747df9a":"#Building the Logistic Model\nmodel=LogisticRegression()\n\nmodel.fit(train_X,train_y)","d663e843":"#Predicting the Y value from the train set and test set\ntrain_y_predict=model.predict(train_X)\ntrain_y_predict[0:5]\n\ntest_y_predict=model.predict(test_X)\n","687ed989":"metrics.accuracy_score(train_y_predict,train_y)","448a79cf":"test_y_prediction=model.predict(test_X)","42c1bf73":"df_confusion=metrics.confusion_matrix(test_y,test_y_prediction)\ndf_confusion","262ab14e":"#plotting the confusion matrix\ndef plot_confusion_matrix(df_confusion, title='Confusion matrix', cmap=plt.cm.gray_r):\n    plt.matshow(df_confusion,cmap=cmap)\n    plt.title('Confusion Matrix')\n    plt.colorbar()\n    plt.ylabel('Actual')\n    plt.xlabel('Predicted')\nplot_confusion_matrix(df_confusion)","bcd92935":"\nprint(classification_report(test_y, test_y_prediction))","e434eee4":"Log_ROC_AUC=roc_auc_score(test_y,model.predict(test_X))\nfpr,tpr,thresholds=roc_curve(test_y,model.predict_proba(test_X)[:,1])\nplt.figure()\nplt.plot(fpr,tpr,label='Logistic Regression  (area=0.2%f)' % Log_ROC_AUC)\nplt.plot([0,1],[0,1],'r--')\nplt.xlim([0.0,1.0])\nplt.ylim([0.0,1.0])\nplt.xlabel('False Positive Rate')\nplt.ylabel('True Positive Rate')\nplt.title('Receiver operating characteristic')\nplt.legend(loc=\"lower right\")\nplt.savefig('Log_ROC')\nplt.show()","e1c98ae0":"**Logistic Regression **\n\n**Dataset** : HR-Employee-Attrition.csv","cc467cd4":"**Average number for all columns**\n\nObservation:\n1)**Daily Rate**: Daily Rate of employees who left is lower for employees who left vs who stay\n2)**DistanceFromHome**: Distance from home is higher for employees who left vs who stay                  3)**MonthlyIncome**: MonthlyIncome is lower for employees who left vs who stay","ae640d73":"**Impact of MonthlyIncome on Attrition**\nEffect of **MonthlyIncome on Attrition: Lower the salary chances of Attrition is higher ","a033c4d1":"* **Importing Libraries, Reading Dataset, Data Exploration **","4836df54":"**Impact of DailyRate on Attrition**\nEffect of **DailyRate on Attrition: Lower the dailyrate chances of Attrition is higher ","d4b511e2":"**Impact of DistanceFromHome on Attrition**\nEffect of **DistanceFromHome on Attrition: Higher the distancefromhome chances of Attrition is higher "}}