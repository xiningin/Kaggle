{"cell_type":{"219d4208":"code","f7d9defe":"code","072e83d0":"code","6798aa28":"code","a14cddf6":"code","d64954fb":"code","76c88ad7":"code","d6d9dbf3":"code","072efc96":"code","65827fa7":"code","37dba383":"code","85792dcc":"code","e1e0dd3a":"code","b083222d":"code","f40a2cc4":"code","aa04feac":"code","a588e775":"code","460b80bb":"code","cc4e6508":"code","aae1d788":"code","a65ab84d":"code","f3452a0a":"code","b96154d5":"code","37ea297f":"code","6d067f59":"code","e562c439":"code","37f94d02":"code","926e77f6":"code","d824dad4":"code","b8f11270":"code","ea9d1085":"code","2dd23969":"code","440db5ff":"code","66cdd53b":"code","a4e3f1d7":"code","0c1687b2":"code","85571817":"code","36e789c1":"code","8c9ffc90":"code","9895c125":"code","88cd2597":"code","401fc026":"code","4ce4078e":"code","c99eecb4":"code","0686b28f":"code","e77dadc8":"code","d87e1bbd":"code","a34e3106":"code","7f907c2d":"code","c88c2d43":"code","6cce23c4":"markdown","0deec728":"markdown","9e15e65a":"markdown","3abc4163":"markdown","8e1cd455":"markdown","4e5add49":"markdown","42ec4511":"markdown","46477779":"markdown","70750fac":"markdown","31952c30":"markdown","19ee52ba":"markdown","fe656b88":"markdown","bb4e05c3":"markdown","026487fd":"markdown","c91f31ba":"markdown","b7b6ff3e":"markdown","82eb563b":"markdown","ec35ce0c":"markdown","ebafb802":"markdown","b716a3c0":"markdown","d3a7bbec":"markdown","f9cb2153":"markdown","c2062bd7":"markdown","7b1e6b00":"markdown","f6d773b5":"markdown","b09dc46a":"markdown"},"source":{"219d4208":"from __future__ import division\nimport numpy as np\nimport pandas as pd\nfrom datetime import datetime\n\nfrom plotly.offline import init_notebook_mode, iplot\ninit_notebook_mode()\nimport plotly.express as px\nimport seaborn as sns\nimport matplotlib.pyplot as plt\nimport matplotlib\n%matplotlib inline","f7d9defe":"# Reading inputs\ndf_us = pd.read_excel(\"\/kaggle\/input\/mental-health-search-term\/search_term_us.xlsx\", index_col='Week')\ndf_italy = pd.read_excel(\"\/kaggle\/input\/mental-health-search-term\/search_term_italy.xlsx\", index_col=\"Week\")\ndf_uk = pd.read_excel(\"\/kaggle\/input\/mental-health-search-term\/search_term_uk.xlsx\", index_col=\"Week\")\ndf_world = pd.read_excel(\"\/kaggle\/input\/mental-health-search-term\/search_term_worldwide.xlsx\", index_col=\"Week\")\ndf_mhsds = pd.read_excel(\"\/kaggle\/input\/mental-health-services-april-2020\/MHSDS aprperf2020.xlsx\")\ndf_apple = pd.read_csv(\"\/kaggle\/input\/uncover\/UNCOVER_v4\/UNCOVER\/apple_mobility_trends\/mobility-trends.csv\")\ndf_google = pd.read_csv(\"\/kaggle\/input\/uncover\/UNCOVER_v4\/UNCOVER\/google_mobility\/regional-mobility.csv\")\ndf_data = pd.read_csv(\"\/kaggle\/input\/uncover\/UNCOVER_v4\/UNCOVER\/ECDC\/current-data-on-the-geographic-distribution-of-covid-19-cases-worldwide.csv\")","072e83d0":"# Converting date string into datetime format\ndef convert_date_string(d):\n    new_date = datetime.strptime(d, '%Y-%m-%d')\n    return new_date\n\n# add a month column\ndef get_month(x):\n    m = x.split('-')[1]\n    return m","6798aa28":"# handling null values\ndf_google.fillna(0, inplace=True)\ndf_google['month'] = df_google['date'].apply(get_month)\n\ndf_apple = df_apple.dropna()\ndf_apple[\"month\"] = df_apple[\"date\"].apply(get_month).values\n\nfor col in df_mhsds.columns:\n    df_mhsds[col] = df_mhsds[col].apply(lambda x: 0 if x=='*' else x)","a14cddf6":"df_data['new_date'] = df_data[\"daterep\"].apply(convert_date_string)\ndf_google['new_date'] = df_google['date'].apply(convert_date_string)\ndf_apple['new_date'] = df_apple['date'].apply(convert_date_string)","d64954fb":"# Cases around the world\ndf_data.head()","76c88ad7":"# cases in countries wrt population data and number of deaths from Jan till may\nfig = px.scatter(df_data.drop(df_data[df_data['cases'] <0].index), \n                 x=\"popdata2018\", y=\"deaths\", \n                 animation_frame=\"daterep\", animation_group=\"countriesandterritories\",\n                 size=\"cases\", color=\"continentexp\", hover_name=\"countriesandterritories\",\n                 log_x=True, size_max=55, range_x=[500,3000000000], range_y=[-100, 6000])\n\nfig[\"layout\"].pop(\"updatemenus\") # optional, drop animation buttons\niplot(fig)","d6d9dbf3":"# get worst hit countries by number of cases and deaths\nprint(\"worst hit countries on \",df_data['new_date'].max(),\"\\n\", df_data.groupby('countriesandterritories')[['cases', 'deaths', 'new_date']].sum().sort_values(['deaths','cases'], ascending=False)[:5])\nprint(\"\\n\\nleast hit countries on \",df_data['new_date'].max(),\"\\n\", df_data.groupby('countriesandterritories')[['cases', 'deaths', 'new_date']].sum().sort_values(['deaths', 'cases'], ascending=False)[-5:])","072efc96":"# Google mobility has data for below countries\ndf_google['country'].nunique(), df_google['country'].unique()","65827fa7":"# Mobility data from google for people around the world\ndf_google.head()","37dba383":"# apple mobility has data for below countries\ndf_apple['region'].nunique()","85792dcc":"# Mobility data from apple for people around the world\ndf_apple.head()","e1e0dd3a":"df_apple.groupby(['new_date','transportation_type']).agg({\"value\":\"mean\"}).unstack().plot(figsize=(12,8),\n                                                                                         title=\"Model of transportation changed for people around the world as the days progressed\\n\\n\")\nplt.tight_layout()","b083222d":"# Model of transportation changed for people around the world as the months progressed\ndf_apple.groupby(['month','transportation_type']).agg({\"value\":\"mean\"}).unstack().plot(kind='bar',  \n                                                                                       figsize=(14,8),\n                                                                                      title=\"Model of transportation changed for people around the world as the months progressed\\n\\n\")\nplt.tight_layout()","f40a2cc4":"df_data[(df_data['countriesandterritories']=='China')][['cases', 'deaths','new_date']].plot(x='new_date', figsize=(12,8), title=\"Situation in China on {}\\n\\n\".format(df_data[\"daterep\"].max()))\nplt.tight_layout()","aa04feac":"df_data[(df_data['countriesandterritories']=='United_States_of_America')][['cases', 'deaths','new_date']].plot(x='new_date', figsize=(12,8), title=\"Situation in United States of America on {}\\n\\n\".format(df_data[\"daterep\"].max()))\nplt.tight_layout()","a588e775":"df_apple[df_apple['region'] == 'United States'].groupby(['new_date','transportation_type']).agg({\"value\":\"mean\"}).unstack().plot(figsize=(12,8),\n                                                                                                                        title=\"United States: Mode of transportation when going out\")\nplt.tight_layout()","460b80bb":"df_google[(df_google['country']=='United States')][['parks','grocery_and_pharmacy', 'workplaces','retail','residential', 'new_date']].plot(x='new_date', \n                                                                                                                                   figsize=(12,8),\n                                                                                                                                   title=\"Change in pattern of People spending time: United States\\n\\n\".format(df_google[\"date\"].max()))\nplt.tight_layout()","cc4e6508":"df_data[(df_data['countriesandterritories']=='Italy')][['cases', 'deaths','new_date']].plot(x='new_date', figsize=(12,8), title=\"Situation in Italy on {}\\n\\n\".format(df_data[\"daterep\"].max()))\nplt.tight_layout()","aae1d788":"df_apple[df_apple['region'] == 'Italy'].groupby(['new_date','transportation_type']).agg({\"value\":\"mean\"}).unstack().plot(figsize=(12,8),\n                                                                                                                        title=\"Italy: Mode of transportation when going out\\n\\n\")\nplt.tight_layout()","a65ab84d":"df_google[(df_google['country']=='Italy')][['parks','grocery_and_pharmacy', 'workplaces','retail', 'residential','new_date']].plot(x='new_date', \n                                                                                                                           figsize=(12,8),\n                                                                                                                          title=\"Change in pattern of People spending time: Italy\\n\\n\".format(df_google[\"date\"].max()))\nplt.tight_layout()","f3452a0a":"df_data[(df_data['countriesandterritories']=='India')][['cases', 'deaths','new_date']].plot(x='new_date', figsize=(12,8), title=\"Situation in India till {}\\n\\n\".format(df_data[\"daterep\"].max()))\nplt.tight_layout()","b96154d5":"df_apple[df_apple['region'] == 'India'].groupby(['new_date','transportation_type']).agg({\"value\":\"mean\"}).unstack().plot(figsize=(12,8),\n                                                                                                                        title=\"India: Mode of transportation when going out\\n\\n\")\nplt.tight_layout()","37ea297f":"df_google[(df_google['country']=='India')][['parks', 'grocery_and_pharmacy', 'workplaces','retail', 'residential','new_date']].plot(x='new_date', \n                                                                                                                           figsize=(12,8),\n                                                                                                                          title=\"Change in pattern of People spending time: India\\n\\n\".format(df_google[\"date\"].max()))\nplt.tight_layout()","6d067f59":"df_data[(df_data['countriesandterritories']=='South_Korea')][['cases', 'deaths','new_date']].plot(x='new_date', figsize=(12,8),  title=\"Situation in South Korea till {}\\n\\n\".format(df_data[\"daterep\"].max()))\nplt.tight_layout()","e562c439":"df_apple[df_apple['region'] == 'Republic of Korea'].groupby(['new_date','transportation_type']).agg({\"value\":\"mean\"}).unstack().plot(figsize=(12,8),\n                                                                                                                        title=\"South Korea: Mode of transportation when going out\\n\\n\")\nplt.tight_layout()","37f94d02":"df_google[(df_google['country']=='South Korea')][['parks', 'grocery_and_pharmacy','workplaces', 'retail', 'residential','new_date']].plot(x='new_date', \n                                                                                                                                 figsize=(12,8),\n                                                                                                                                title=\"Change in pattern of People spending time: South Korea\\n\\n\".format(df_google[\"date\"].max()))\nplt.tight_layout()","926e77f6":"df_data[(df_data['countriesandterritories']=='United_Kingdom')][['cases', 'deaths','new_date']].plot(x='new_date', figsize=(12,8), title=\"Situation in United Kingdom till {}\\n\\n\".format(df_data[\"daterep\"].max()))\nplt.tight_layout()","d824dad4":"df_apple[df_apple['region'] == 'United Kingdom'].groupby(['new_date','transportation_type']).agg({\"value\":\"mean\"}).unstack().plot(figsize=(12,8),\n                                                                                                                        title=\"United Kingdom: Mode of transportation when going out\\n\\n\")\nplt.tight_layout()","b8f11270":"df_google[(df_google['country']=='United Kingdom')][['parks', 'grocery_and_pharmacy','workplaces', 'retail', 'residential','new_date']].plot(x='new_date',\n                                                                                                                      figsize=(12,8),\n                                                                                                                     title=\"Change in pattern of People spending time: United Kingdom\\n\\n\".format(df_google[\"date\"].max()))\nplt.tight_layout()","ea9d1085":"# little more exploration on data of UK\n\nfacet=sns.FacetGrid(df_apple[(df_apple[\"transportation_type\"]=='walking') & (df_apple['region'] == 'United Kingdom')],hue='month',aspect=4)\nfacet.map(sns.kdeplot,'value',shade=True)\nfacet.add_legend()\nplt.ylabel(\"Fraction of people\")\nplt.title(\"United Kingdom: People choose walking over other modes as months progressed\\n\\n\", {'fontsize': 15})\nplt.tight_layout()","2dd23969":"facet=sns.FacetGrid(df_apple[(df_apple[\"transportation_type\"]=='driving') & (df_apple['region'] == 'United Kingdom')],hue='month',aspect=4)\nfacet.map(sns.kdeplot,'value',shade=True)\nfacet.add_legend()\nplt.ylabel(\"Fraction of people\")\nplt.title(\"United Kingdom: People choose driving over other modes as months progressed\\n\\n\", {'fontsize': 15})\nplt.tight_layout()","440db5ff":"facet=sns.FacetGrid(df_apple[(df_apple[\"transportation_type\"]=='transit') & (df_apple['region'] == 'United Kingdom')],hue='month',aspect=4)\nfacet.map(sns.kdeplot,'value',shade=True)\nfacet.add_legend()\nplt.ylabel(\"Fraction of people\")\nplt.title(\"United Kingdom: People choose transit over other modes as months progressed\\n\\n\",{'fontsize': 15})\nplt.tight_layout()","66cdd53b":"df_world.head()","a4e3f1d7":"fig, (ax1,ax3, ax4, ax5, ax6, ax7, ax8, ax9) = plt.subplots(nrows=8, ncols=1, figsize=(12,20))\n\nax1.set_title(\"World: Plot for Terms wrt Time\\n\\n\", {'fontsize': 20}  )\n\nax1.plot(df_world.index, df_world[\"depression\"], marker='o')\nax1.set_xlabel('time (months)')\nax1.set_ylabel('depression')\n\nax3.plot(df_world.index, df_world[\"panic attack\"], marker = '.')\nax3.set_xlabel('time (months)')\nax3.set_ylabel('panic attack')\n\nax4.plot(df_world.index, df_world[\"anxiety\"], marker='o')\nax4.set_xlabel('time (months)')\nax4.set_ylabel('anxiety')\n\nax5.plot( df_world.index, df_world[\"obsessive compulsive disorder\"], marker='_')\nax5.set_xlabel('time (months)')\nax5.set_ylabel('obsessive compulsive disorder')\n\nax6.plot(df_world.index, df_world[\"insomnia\"], marker = '.')\nax6.set_xlabel('time (months)')\nax6.set_ylabel('insomnia')\n\nax7.plot( df_world.index, df_world[\"mental health\"], marker='_')\nax7.set_xlabel('time (months)')\nax7.set_ylabel('mental health')\n\nax8.plot( df_world.index, df_world[\"counseling\"], marker='_')\nax8.set_xlabel('time (months)')\nax8.set_ylabel('counseling')\n\nax9.plot( df_world.index, df_world[\"psychiatrist\"], marker='_')\nax9.set_xlabel('time (months)')\nax9.set_ylabel('psychiatrist')\n\nplt.tight_layout()","0c1687b2":"# United States\nfig, (ax1,ax3, ax4, ax5, ax6, ax7, ax8, ax9) = plt.subplots(nrows=8, ncols=1, figsize=(12,20))\n\nax1.set_title(\"United States: Plot for Terms wrt Time\\n\\n\", {'fontsize': 20}  )\n\nax1.plot(df_us.index, df_us[\"depression\"], marker='o', color='C1')\nax1.set_xlabel('time (months)')\nax1.set_ylabel('depression')\n\nax3.plot(df_us.index, df_us[\"panic attack\"], marker = '.', color='C1')\nax3.set_xlabel('time (months)')\nax3.set_ylabel('panic attack')\n\nax4.plot(df_us.index, df_us[\"anxiety\"], marker='o', color='C1')\nax4.set_xlabel('time (months)')\nax4.set_ylabel('anxiety')\n\nax5.plot( df_us.index, df_us[\"obsessive compulsive disorder\"], marker='_', color='C1')\nax5.set_xlabel('time (months)')\nax5.set_ylabel('obsessive compulsive disorder')\n\nax6.plot(df_us.index, df_us[\"insomnia\"], marker = '.', color='C1')\nax6.set_xlabel('time (months)')\nax6.set_ylabel('insomnia')\n\nax7.plot( df_us.index, df_us[\"mental health\"], marker='_', color='C1')\nax7.set_xlabel('time (months)')\nax7.set_ylabel('mental health')\n\nax8.plot( df_us.index, df_us[\"counseling\"], marker='_', color='C1')\nax8.set_xlabel('time (months)')\nax8.set_ylabel('counseling')\n\nax9.plot( df_us.index, df_us[\"psychiatrist\"], marker='_', color='C1')\nax9.set_xlabel('time (months)')\nax9.set_ylabel('psychiatrist')\n\n\nplt.tight_layout()","85571817":"# Italy\nfig, (ax1,ax3, ax4, ax5, ax6, ax7, ax8, ax9) = plt.subplots(nrows=8, ncols=1, figsize=(12,20))\n\nax1.set_title(\"Italy: Plot for Terms wrt Time\\n\\n\", {'fontsize': 20}  )\n\nax1.plot(df_italy.index, df_italy[\"depression\"], marker='o', color='C3')\nax1.set_xlabel('time (months)')\nax1.set_ylabel('depression')\n\nax3.plot(df_italy.index, df_italy[\"panic attack\"], marker = '.', color='C3')\nax3.set_xlabel('time (months)')\nax3.set_ylabel('panic attack')\n\nax4.plot(df_italy.index, df_italy[\"anxiety\"], marker='o', color='C3')\nax4.set_xlabel('time (months)')\nax4.set_ylabel('anxiety')\n\nax5.plot( df_italy.index, df_italy[\"obsessive compulsive disorder\"], marker='_', color='C3')\nax5.set_xlabel('time (months)')\nax5.set_ylabel('obsessive compulsive disorder')\n\nax6.plot(df_italy.index, df_italy[\"insomnia\"], marker = '.', color='C3')\nax6.set_xlabel('time (months)')\nax6.set_ylabel('insomnia')\n\nax7.plot( df_italy.index, df_italy[\"mental health\"], marker='_', color='C3')\nax7.set_xlabel('time (months)')\nax7.set_ylabel('mental health')\n\nax8.plot( df_italy.index, df_italy[\"counseling\"], marker='_', color='C3')\nax8.set_xlabel('time (months)')\nax8.set_ylabel('counseling')\n\nax9.plot( df_italy.index, df_italy[\"psychiatrist\"], marker='_', color='C3')\nax9.set_xlabel('time (months)')\nax9.set_ylabel('psychiatrist')\n\n\nplt.tight_layout()","36e789c1":"# UK\nfig, (ax1,ax3, ax4, ax5, ax6, ax7, ax8, ax9) = plt.subplots(nrows=8, ncols=1, figsize=(12,20))\n\nax1.set_title(\"United Kingdom: Plot for Terms wrt Time\\n\\n\", {'fontsize': 20}  )\n\nax1.plot(df_uk.index, df_uk[\"depression\"], marker='o', color='C2')\nax1.set_xlabel('time (months)')\nax1.set_ylabel('depression')\n\nax3.plot(df_uk.index, df_uk[\"panic attack\"], marker = '.', color='C2')\nax3.set_xlabel('time (months)')\nax3.set_ylabel('panic attack')\n\nax4.plot(df_uk.index, df_uk[\"anxiety\"], marker='o', color='C2')\nax4.set_xlabel('time (months)')\nax4.set_ylabel('anxiety')\n\nax5.plot( df_uk.index, df_uk[\"obsessive compulsive disorder\"], marker='_', color='C2')\nax5.set_xlabel('time (months)')\nax5.set_ylabel('obsessive compulsive disorder')\n\nax6.plot(df_uk.index, df_uk[\"insomnia\"], marker = '.', color='C2')\nax6.set_xlabel('time (months)')\nax6.set_ylabel('insomnia')\n\nax7.plot( df_uk.index, df_uk[\"mental health\"], marker='_', color='C2')\nax7.set_xlabel('time (months)')\nax7.set_ylabel('mental health')\n\nax8.plot( df_uk.index, df_uk[\"counseling\"], marker='_', color='C2')\nax8.set_xlabel('time (months)')\nax8.set_ylabel('counseling')\n\nax9.plot( df_uk.index, df_uk[\"psychiatrist\"], marker='_', color='C2')\nax9.set_xlabel('time (months)')\nax9.set_ylabel('psychiatrist')\n\n\nplt.tight_layout()","8c9ffc90":"df_mhsds.head()","9895c125":"# Creating new columns\ndf_mhsds[\"TR\"] = np.sum(df_mhsds.drop(columns=['NR_T', 'Source', 'respondent_ID']), 1)\ndf_mhsds['FR_ET_T'] = df_mhsds['FR_ET_T00']+df_mhsds['FR_ET_T18']+df_mhsds['FR_ET_T35']\ndf_mhsds['FR_ET_W2M_T'] = df_mhsds['FR_ET_W2M_00']+df_mhsds['FR_ET_W2M_18']+df_mhsds['FR_ET_W2M_35']\ndf_mhsds[\"FR_ET_W2L_T\"] = df_mhsds[\"FR_ET_W2L_00\"]+df_mhsds[\"FR_ET_W2L_18\"]+df_mhsds[\"FR_ET_W2L_35\"]\ndf_mhsds['FR_ET_Tot'] = df_mhsds['FR_ET_T00']+df_mhsds['FR_ET_T18']+df_mhsds['FR_ET_T35']+\\\n                        df_mhsds['FR_ET_W2M_00']+df_mhsds['FR_ET_W2M_18']+df_mhsds['FR_ET_W2M_35']+\\\n                        df_mhsds[\"FR_ET_W2L_00\"]+df_mhsds[\"FR_ET_W2L_18\"]+df_mhsds[\"FR_ET_W2L_35\"]\ndf_mhsds[\"OR_TEIP_T\"] = df_mhsds[\"OR_TEIP_00\"]+df_mhsds[\"OR_TEIP_18\"]+df_mhsds[\"OR_TEIP_35\"]\ndf_mhsds[\"OR_NEIP_T\"] =df_mhsds[\"OR_NEIP_00\"] +df_mhsds[\"OR_NEIP_18\"] +df_mhsds[\"OR_NEIP_35\"] \ndf_mhsds[\"OR_RC_W2L_T\"] = df_mhsds[\"OR_RC_W2L_00\"]+df_mhsds[\"OR_RC_W2L_18\"]+df_mhsds[\"OR_RC_W2L_35\"]\ndf_mhsds[\"OR_RC_W2M_T\"] = df_mhsds[\"OR_RC_W2M_00\"]+df_mhsds[\"OR_RC_W2M_18\"]+df_mhsds[\"OR_RC_W2M_35\"]","88cd2597":"fig, (ax1,ax2, ax3, ax4) = plt.subplots(nrows=4, ncols=1, figsize=(14,12))\nax1.set_title(\"Referrals distribution across hospitals\\n\\n\", {'fontsize': 20})\n\nax1.bar(df_mhsds.index, height=df_mhsds[\"FR_ET_T\"])\nax1.set_xlabel('Finished referrals on EIP pathway entering treatment between 01\/02\/2020 to 30\/04\/2020')\n\nax2.bar(df_mhsds.index, height=df_mhsds[\"NR_T\"])\nax2.set_xlabel('New referrals during the reporting period on EIP pathway entering treatment between 01\/02\/2020 to 30\/04\/2020')\n\nax3.bar(df_mhsds.index, height=df_mhsds[\"OR_TEIP_T\"])\nax3.set_xlabel('Open referrals for people with a suspected FEP at the end of the reporting period on EIP pathway in treatment on 30\/04\/2020')\n\nax4.bar(df_mhsds.index, height=df_mhsds[\"OR_NEIP_T\"])\nax4.set_xlabel('Open referrals for people with a suspected FEP at the end of the reporting period not on EIP pathway')\n\nplt.tight_layout()","401fc026":"df = df_mhsds.loc[df_mhsds['FR_ET_T']>0, ['Source', 'FR_ET_T', \"NR_T\", \"NR_FEP\", \"NR_ED\"]][:20]\nax = df.plot(x='Source', y=\"NR_ED\", kind='bar', figsize=(12, 8))\ndf.plot(x = 'Source', y=\"NR_FEP\", kind='bar', ax=ax, color='C2')\nax.set_title(\"Hospitals vs New referrals for eating disorder and First episode of psychosis\\n\\n\", {'fontsize': 20} )\nplt.tight_layout()","4ce4078e":"df = df_mhsds.loc[df_mhsds['FR_ET_T']>0, ['Source', 'FR_ET_T', \"FR_ET_W2M_T\", \"FR_ET_W2L_T\"]][:15]\nax = df.plot(x='Source', y=\"FR_ET_T\", kind='bar', figsize=(12, 10))\ndf.plot(x = 'Source', y=\"FR_ET_W2M_T\", kind='bar', ax=ax, color='C2')\ndf.plot(x='Source', y=\"FR_ET_W2L_T\", kind='bar', ax=ax, color='C3')\nax.set_title(\"Hospitals vs Finished referrals on EIP pathway entering treatment between 01\/02\/2020 to 30\/04\/2020\\n\\n\", {'fontsize': 20} )\nax.legend(['People entered Treatment on time', 'People waited for more than 2 weeks', 'People waited for 2 weeks or less'],loc='upper right',bbox_to_anchor=(0, 1))\nplt.tight_layout()","c99eecb4":"df = df_mhsds.loc[df_mhsds['FR_ET_T']>0, ['Source', 'FR_ET_T', \"OR_TEIP_T\", \"OR_NEIP_T\"]][:20]\nax = df.plot(x='Source', y=\"OR_TEIP_T\", kind='bar', figsize=(12, 9))\ndf.plot(x = 'Source', y=\"OR_NEIP_T\", kind='bar', ax=ax, color='C2')\nax.set_title(\"Hospitals vs Open referrals with a suspected FEP at the end of the reporting period\\n\\n\", {'fontsize': 15} )\nax.legend(['on EIP pathway in treatment on 30\/04\/2020', 'not on EIP pathway in treatment on 30\/04\/2020'])\nplt.tight_layout()","0686b28f":"ref_id = 499\n\nfig, (ax1, ax2, ax3) = plt.subplots(nrows=3, ncols=1, figsize=(8,15))\n\nax1.set_title(\"Total Referrals acknowledged out of all New referrals made\", {'fontsize': 15} )\nax1.pie(df_mhsds.loc[ref_id, [\"NR_T\", \"TR\"]], labels=[\"New References\", \"acknowledged References\"], autopct=lambda pct: round(pct,2), shadow=True)\n\nax2.pie(df_mhsds.loc[ref_id, [\"OR_TEIP_T\",\"OR_NEIP_T\", \"OR_WT_T\", \"FR_ET_Tot\", \"OR_RC_W2M_T\"]], labels=[\"OR_TEIP_T\",\"OR_NEIP_T\", \"OR_WT_T\",\"FR_ET_Tot\", \"OR_RC_W2M_T\"], autopct=lambda pct: round(pct,2),shadow=True)\nax2.set_title(\"\\n\\ndistribution of all acknowledged referrals.\", {'fontsize': 15} )\n\nax3.pie(df_mhsds.loc[:, [\"FR_ET_T00\",\"FR_ET_T18\", \"FR_ET_T35\", \"FR_ET_W2M_00\", \"FR_ET_W2M_18\", \"FR_ET_W2M_35\", \"FR_ET_W2L_00\", \"FR_ET_W2L_18\", \"FR_ET_W2L_35\"]].sum(axis=0), \\\n        labels=[\"FR_ET_T00\",\"FR_ET_T18\", \"FR_ET_T35\", \"FR_ET_W2M_00\", \"FR_ET_W2M_18\", \"FR_ET_W2M_35\", \"FR_ET_W2L_00\", \"FR_ET_W2L_18\", \"FR_ET_W2L_35\"], autopct=lambda pct: round(pct,2), shadow=True)\nax3.set_title(\"\\n\\ndistribution of all finished referrals.\", {'fontsize': 15} )\n\nplt.tight_layout()","e77dadc8":"fig, (ax1) = plt.subplots(nrows=1, ncols=1, figsize=(8,5))\nax1.bar(x=[\"on EIP\"], \n        height=df_mhsds.loc[:, [\"OR_TEIP_00\", \"OR_TEIP_18\", \"OR_TEIP_35\", \"FR_ET_W2M_00\",\"FR_ET_W2L_00\",\"FR_ET_W2M_18\",\"FR_ET_W2L_18\",\"FR_ET_W2M_35\",\"FR_ET_W2L_35\"]].sum(axis=0).sum(),\n       width=0.1)\nax1.bar(x=[\"Not on EIP\"], \n        height=df_mhsds.loc[:, [\"OR_NEIP_35\",\"OR_NEIP_18\",\"OR_NEIP_00\", \"OR_RC_W2M_00\",\"OR_RC_W2M_18\", \"OR_RC_W2M_35\", \"OR_RC_W2L_00\", \"OR_RC_W2L_18\", \"OR_RC_W2L_35\"]].sum(axis=0).sum(),\n       width=0.1)\nax1.set_title(\"Open referrals with a suspected FEP at the end of the reporting period\\n\\n\", {'fontsize': 15} )\nax1.legend(['on EIP pathway in treatment on 30\/04\/2020', 'not on EIP pathway in treatment on 30\/04\/2020'])\nplt.tight_layout()","d87e1bbd":"fig, (ax1, ax2) = plt.subplots(nrows=1, ncols=2, figsize=(15,8), sharey=True)\n\nax1.bar(x=[\"00 < Age < 18, \\non EIP\"],\n       height=df_mhsds.loc[:, [\"OR_TEIP_00\", \"FR_ET_W2M_00\", \"FR_ET_W2L_00\"]].sum(axis=0).sum(), \n        width=0.1)\nax1.bar(x=[\"17 < Age < 35, \\non EIP\"],\n       height=df_mhsds.loc[:, [\"OR_TEIP_18\", \"FR_ET_W2M_18\", \"FR_ET_W2L_18\"]].sum(axis=0).sum(), \n        width=0.1)\nax1.bar(x=[\"34 < Age, \\non EIP\"],\n       height=df_mhsds.loc[:, [\"OR_TEIP_35\",\"FR_ET_W2M_35\", \"FR_ET_W2L_35\"]].sum(axis=0).sum(), \n        width=0.1)\n\nax2.bar(x=[\"00 < Age < 18, \\n not on EIP\"],\n       height=df_mhsds.loc[:, [\"OR_NEIP_00\", \"OR_RC_W2M_00\", \"OR_RC_W2L_00\"]].sum(axis=0).sum(), \n        width=0.1)\nax2.bar(x=[\"17 < Age < 35, \\n not on EIP\"],\n       height=df_mhsds.loc[:, [\"OR_NEIP_18\", \"OR_RC_W2M_18\", \"OR_RC_W2L_18\"]].sum(axis=0).sum(), \n        width=0.1)\nax2.bar(x=[\"34 < Age, \\n not on EIP\"],\n       height=df_mhsds.loc[:, [\"OR_NEIP_35\",\"OR_RC_W2M_35\", \"OR_RC_W2L_35\"]].sum(axis=0).sum(), \n        width=0.1)\nax1.set_title(\"Open referrals with a suspected FEP at the end of the reporting period on EIP vs not on EIP\\n\\n\", {'fontsize': 15} )\nplt.tight_layout()","a34e3106":"fig, (ax1, ax2, ax3) = plt.subplots(nrows=3, ncols=1, figsize=(7,10))\nax1.set_title(\"Open referrals On EIP vs Not on EIP pathway at the end of the reporting period\\n\\n\", {'fontsize': 15})\n\nax1.bar(x=[\"OR_TEIP_00\", \"OR_NEIP_00\"],\n       height=list(df_mhsds.loc[:, [\"OR_TEIP_00\", \"OR_NEIP_00\"]].sum(axis=0)), \n        width=0.1)\nax1.set_xlabel(\"00 < Age < 18\")\n\nax2.bar(x=[\"OR_TEIP_18\", \"OR_NEIP_18\"],\n       height=list(df_mhsds.loc[:, [\"OR_TEIP_18\", \"OR_NEIP_18\"]].sum(axis=0)),\n         width=0.1)\nax2.set_xlabel(\"17 < Age < 35\")\n\nax3.bar(x=[\"OR_TEIP_35\", \"OR_NEIP_35\"],\n       height=list(df_mhsds.loc[:, [\"OR_TEIP_35\", \"OR_NEIP_35\"]].sum(axis=0)),\n         width=0.1)\nax3.set_xlabel(\"34 < Age\")\n\nplt.tight_layout()","7f907c2d":"fig, (ax1, ax2, ax3) = plt.subplots(nrows=3, ncols=1, figsize=(10,12))\nax1.set_title(\"Finished Referrals on EIP pathway entering treatment between 01\/02\/2020 to 30\/04\/2020 \\nand Open referrals on 30\/04\/2020 waiting for treatment\\nacross different age groups\\n\\n\", {'fontsize': 14})\n\nax1.bar(x=[\"FR_ET_W2M_00\",\"FR_ET_W2L_00\", \"OR_WT_W2M_00\", \"OR_WT_W2L_00\", \"OR_TEIP_00\"],\n       height=list(df_mhsds.loc[:, [\"FR_ET_W2M_00\",\"FR_ET_W2L_00\", \"OR_WT_W2M_00\", \"OR_WT_W2L_00\", \"OR_TEIP_00\"]].sum(axis=0)), \n        width=0.3)\nax1.set_xlabel(\"00 < Age < 18\")\n\n\nax2.bar(x=[\"FR_ET_W2M_18\",\"FR_ET_W2L_18\", \"OR_WT_W2M_18\", \"OR_WT_W2L_18\", \"OR_TEIP_18\"],\n       height=list(df_mhsds.loc[:, [\"FR_ET_W2M_18\",\"FR_ET_W2L_18\", \"OR_WT_W2M_18\", \"OR_WT_W2L_18\", \"OR_TEIP_18\"]].sum(axis=0)),\n         width=0.3)\nax2.set_xlabel(\"17 < Age < 35\")\n\nax3.bar(x=[\"FR_ET_W2M_35\",\"FR_ET_W2L_35\", \"OR_WT_W2M_35\", \"OR_WT_W2L_35\", \"OR_TEIP_35\"],\n       height=list(df_mhsds.loc[:, [\"FR_ET_W2M_35\",\"FR_ET_W2L_35\", \"OR_WT_W2M_35\", \"OR_WT_W2L_35\", \"OR_TEIP_35\"]].sum(axis=0)),\n         width=0.3)\nax3.set_xlabel(\"34 < Age\")\n\nplt.tight_layout()","c88c2d43":"fig, (ax1, ax2, ax3) = plt.subplots(nrows=3, ncols=1, figsize=(10,12))\nax1.set_title(\"Open Referrals not on EIP pathway, Receiving a first contact and assigned a care co-ordinator\\n\\\n            with any team prior to 30\/04\/2020 more than two weeks after referral\\nor two weeks or less after referral\\n\\n\", {'fontsize': 14})\n\nax1.bar(x=[\"OR_RC_W2M_00\", \"OR_RC_W2L_00\"],\n       height=list(df_mhsds.loc[:, [\"OR_RC_W2M_00\", \"OR_RC_W2L_00\"]].sum(axis=0)), \n        width=0.1)\nax1.set_xlabel(\"00 < Age < 18\")\n\nax2.bar(x=[\"OR_RC_W2M_18\", \"OR_RC_W2L_18\"],\n       height=list(df_mhsds.loc[:, [\"OR_RC_W2M_18\", \"OR_RC_W2L_18\"]].sum(axis=0)),\n         width=0.1)\nax2.set_xlabel(\"17 < Age < 35\")\n\nax3.bar(x=[\"OR_RC_W2M_35\", \"OR_RC_W2L_35\"],\n       height=list(df_mhsds.loc[:, [\"OR_RC_W2M_35\", \"OR_RC_W2L_35\"]].sum(axis=0)),\n         width=0.1)\nax3.set_xlabel(\"34 < Age\")\n\nplt.tight_layout()","6cce23c4":"# <a id='vis_us'><h6>Analysis of Cases in United States<\/h6><\/a>\n\nAs the cases started going up in US people preferred not going out and driving was most preferred over other means of transportation.\n\nThere is increase of 20% in people staying indoors and a reduction of 40%-60% of people going out for work and retail. This also shows that most Americans shop when they commute.","0deec728":"Across the world there was an overlap of people preferring both driving and walking over transit and as the pandemic progressed, movement of people first increased as they rushed to buy groceries abd then decreased significantly. There is a clear preference of driving and it is only increasing as people have moved out of lockdown in various nations.","9e15e65a":"As the months progressed people came into action in Feb and started travelling more to prepare for impending lockdowns and then the movement activity reduced significantly","3abc4163":"We don't have mobility data of china as they have restrictions on google and apple there","8e1cd455":"# <a id='nhs'><h3>Exploring Mental Health Services NHS<\/h3><\/a>\n\nExploring **Mental Health Services NHS** Monthly Experimental Statistics Access and Waiting Times Data Tables\n\nDue to the coronavirus illness (COVID-19) disruption, it would seem that this is now starting to affect the quality and coverage of some of our statistics, such as an increase in non-submissions for some datasets. We are also starting to see some different patterns in the submitted data. For example, fewer patients are being referred to hospital and more appointments being carried out via phone\/telemedicine\/email. Therefore, data should be interpreted with care over the COVID-19 period.","4e5add49":"# <a id='vis_sk'><h6>Analysis of Cases in South Korea<\/h6><\/a>\n\nSouth Korea was successful in not hitting a high on lives lost. The country reached peak on cases around end of February but as people were taking all necessary precautions and had reduced travel to some extent they never peaked on lives lost. In April there were far fewer cases but still the dip in travel as a precautionary measure. Retail dipped by 40% and people choosing to stay indoor increased by a small percentage and life is back to normal for people there.","42ec4511":"# <a id='concl'><h3>Conclusion<\/h3><\/a>\n\n\nThe NHS data showed that most of the requests coming for consultation after FEP(First Episode of Psychosis) were resolved.\nMore referrals were finished for age group 18-34 and they were on EIP pathway entering treatment between 01\/02\/2020 to 30\/04\/2020. Age group 18-34 had to wait the least when entering treatment between 01\/02\/2020 to 30\/04\/2020.\nMore requests were Open for people in age group 18-34 with a suspected FEP at the end of the reporting period on EIP pathway in treatment on 30\/04\/2020.\nThe request which were still open had to wait 2 weeks and more. Out of these people over 34 waited most.\nThe request which were still open had to wait 2 weeks or less. Out of these people over 34 waited most.\n\nOther than this the reason could be derived from other datasets. As people's activity changes their need for mental health care chnaged along with it.\nAcross the world there was an overlap of people preferring both driving and walking over transit and as the pandemic progressed, movement of people first increased as they rushed to buy groceries abd then decreased significantly. There is a clear preference of driving and it is only increasing as people have moved out of lockdown in various nations.\n\npeople in Italy, UK were quick to respond than US and reduced travelling by a signifcant percentage.\nIn UK people are either staying in homes or going out to parks. Overall activity has reduced in the nation.\nIn Italy after seeing the nation go through a pretty rough month of April, people are more cautious about going out.\nPeople in India continued to travel for work. This may signify a lack of WFH options which was avaliable in developed nations. In entirety of April as the nation was under lockdown there is no activity in parks. Though people rushed to parks once lockdown was lifted, this number was still lower than numbers before pandemic.\nLife in South Korea was not affected as much and their life is back to new normal. People are rushing towards parks. This signifies that people in SK missed nature more than consumerism.  \nIn US activity in parks has increased 100 fold. \n\nThere is slight increase in people searching for depression, panic attack, insomnia and decrease in councelling and phychologist. The world as a whole was not seeking help on the internet.  \n\n","46477779":"Cases in countries wrt population data and number of deaths from Jan till may\nYou can stop the animation by clicking on slider and zoom into any segment using box select. Autoscale will bring it back to origional.","70750fac":"# <a id='abs'><h3>ABSTRACT<\/h3><\/a>\n\nThis notebook has an EDA of how people across the world had reacted to the pandemic. This includes shift in prefferable mode of transportation if and when people chose to travel and where were most of the visits made. I also explored how people's google search included terms related to Mental health as the epidemic turned into pandemic using dataset [search interest dataset of google trends](https:\/\/www.kaggle.com\/luckybro\/mental-health-search-term). \n \nAnother dataset that I have explored is from [NHS](https:\/\/www.kaggle.com\/rachnagupta\/mental-health-services-april-2020). I have collected Mental Health Services NHS, Monthly Experimental Statistics Access and Waiting Times Data Tables using google datasets resource. This explores referrals made for First Episode of Psychosis and gap or lack of it in Early Intervention in Psychosis. \n\nAssumptions- \n- NHS data only covers England, hence we are projecting it across globe.\n- Google search trends dataset assumes only english terms related to mental health hence it is also makes similar projection on non english speaking nations.\n\nTask criteria has been addressed as below-\n\n1. **Scientific rigor**\n    Is the solution evidence based? i.e. does it leverage robust data?\n    \n    Datasets used for this solution are European Centre for Disease Prevention and Control(ECDC) dataset on cases around the world, data collected from United Kingdom National Health Service(NHS) from all hospitals, google search trends, apple mobility data and google mobility data. Though these datasets only cover January till May. As the situation across globe is continuously changing this EDA will always be behind the current situation. \n\n2. **Scientific model\/strategy**\n    Did the solution employ a robust scientific method?\n    \n    This solution is more on the visual inspection of the trends and statistical measurements.\n\n3. **Unique and novel insight**\n    Does the solution identify information (new data, features, insights etc) that is yet to be \u201cuncovered?\u201d\n    \n    Till now there were mostly assumptions about how people of different nations responded to the pandemic based on few incedents covered on news. This statistical analysis provides an insight into how people actually responded and it brings back confidence that people were quick to respond to the situaltion as soon as it reached their country. The shopping patterns changed, the mode of mobility shifted and people across various nations also reacted differently from one another.\n\n4. **Market Translation and Applicability**\n    Does the solution resolve an existing market need for either an individual, health institution or policy maker?\n    \n    The search trends on Menta health shows that people in english speaking countries are feeling blue but that as not gone up significantly. It has almost followed similar pattern as the year before. That has only been a slight increase in interest. Also it gives a person a reflection into how everyone in their country is going through same shidt in aptterns and they are not alone in tis even though it looks like that.\n    \n    For a health institution and policy maker the NHS data shows that the number of people who received EIP within the time frame are much more than the people whi could not receive EIP. This can be improved but it is not as bad as assumed with no data analytics.\n\n5. **Speed to market**\n    Does it apply to an existing product vision such as a self assessment tool or policy decision-making tool?\n    \n    It can used by Health services of different nations to bring forth a dataset similar to NHS which can help in a similar analytics and improve on an existing tool using which they arrive at this data.\n\n6. Longevity of solution in market\n    Is the solution one that could be used in various markets through time?\n    \n    Once we have a straming dynamic data it will achieve that.\n\n7. Ability of user to collaborate and contribute to other solutions within the Kaggle community\n    Did the user provide expertise and or resources in the form of datasets or models to their fellow Kaggle members?\n    \n    I have shared the [Mental Health Services NHS dataset](https:\/\/www.kaggle.com\/rachnagupta\/mental-health-services-april-2020)  in kaggle","31952c30":"# Task 5: Mental health impact and support services\n\n## Task Details\n\nCan we predict changes in demand for mental health services and how can we ensure access? (by region, social\/economic\/demographic factors, etc). Are there signs of shifts in mental health challenges across demographies, whether improvements or declines, as a result of COVID-19 and the various measures implement to contain the pandemic?","19ee52ba":"# <a id='vis_worst'><h6>Worst hit countries till may<\/h6><\/a>","fe656b88":"# <a id='vis_google'><h6>Mobility data from google<\/h6><\/a>","bb4e05c3":"# <a id='vis_uk'><h6>Analysis of Cases in United Kingdom<\/h6><\/a>\n\nUK reached peak on cases in early April. In UK walking is the most preferred mode of traveling and it is still preferred once travelling restrictions were imposed. People staying indoors has increased 20%-40% and there are people who have either kept their retail patterns same or they have reduced drastically.","026487fd":"# <a id='data'><h3>Datasets used for analyses in this notebook<\/h3><\/a>\n\nThe various datasets that we take under consideration for this particular notebook are mentioned underneath:\n* [COVID-19 and Mental Health Search Terms](https:\/\/www.kaggle.com\/luckybro\/mental-health-search-term)\n* [Mental Health Services NHS](https:\/\/www.kaggle.com\/rachnagupta\/mental-health-services-april-2020)\n* Datasets under UNCOVER_v4-\n    - google mobility\n    - apple mobility\n    - ECDC","c91f31ba":"# <a id='vis_china'><h6>Analysis of Cases in China<\/h6><\/a>","b7b6ff3e":"# <a id='vis_search'><h6>Plot of Mental Health topics wrt Time<\/h6><\/a>\n","82eb563b":"# <a id='vis_nhs'><h3>Plotting referrals received after FEP<\/h3><\/a>","ec35ce0c":"# <a id='search'><h3>Increase in search interest on Mental Health topics<\/h3><\/a>\n","ebafb802":"# <a id='vis_apple'><h6>Mobility data from apple<\/h6><\/a>","b716a3c0":"# <a id='lib'><h3>Importing the essential libraries<\/h3><\/a>","d3a7bbec":"# <a id='pre'><h3>Processing data<\/h3><\/a>","f9cb2153":"# <a id='vis_italy'><h6>Analysis of Cases in Italy<\/h6><\/a>\n\nItaly reached peak in Late March and cases have reduced significantly. Here people prefer to walk then drive or use transit, though since the initial climbing up of cases the country responded proactively and stopped traveling. \n\nThere is a 80%-100% reduction in retail, 40%-60% reduction in people going out for work and 40% increase in people staying indoors.","c2062bd7":"# <a id='main'><h3>Table of Contents<\/h3><\/a>\n- [Abstract](#abs)\n- [Importing the Essential Libraries](#lib)\n- [Datasets used for analyses in this notebook](#data)\n- [Processing Data](#pre)\n- [Visualisation of data](#vis)\n    -  [Cases around world](#vis_world) \n    -  [Mobility data from google](#vis_google)\n    -  [Mobility data from apple](#vis_apple) \n    -  [Worst hit countries till may](#vis_worst)\n    -  [Analysis of Cases in China](#vis_china)\n    -  [Analysis of Cases in United States](#vis_us)\n    -  [Analysis of Cases in Italy](#vis_italy)\n    -  [Analysis of Cases in India](#vis_ind)\n    -  [Analysis of Cases in South Korea](#vis_sk)\n    -  [Analysis of Cases in United Kingdom](#vis_uk)\n- [Increase in search interest on Mental Health topics](#search)\n    -  [Plot of Mental Health topics wrt Time](#vis_search)\n- [Exploring Mental Health Services NHS](#nhs)\n    -  [Plotting referrals received after FEP on EIP pathway](#vis_nhs)\n- [Conclusion](#concl)","7b1e6b00":"After knowing how physically people reacted to the situation, we will see how their search history changed around the world.\n\nConsidering only countries with english as preferred language of communication","f6d773b5":"# <a id='vis'><h3>Visualisation of data<\/h3><\/a>\n\n# <a id='vis_world'><h6>Cases around world<\/h6><\/a>","b09dc46a":"# <a id='vis_ind'><h6>Analysis of Cases in India<\/h6><\/a>\n\nIndia has yet on reached peak in terms of cases. There was a countrywide lockdown in India in late Marc with access to essential services and groceries at certain times of the day, hence there is a huge drop in the mobility trend. Insiand were travelling more than other nations for retail and groceries and when the pandemic hit the country retail went down 100%. People in India are still travelling for work and for groceries."}}