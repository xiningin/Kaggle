{"cell_type":{"b9420096":"code","3b911e5f":"code","784bab32":"code","0de05f16":"code","49bce252":"code","4c4dbad5":"code","e8eb69ea":"code","fa6fa666":"code","f6fc2837":"code","0de69174":"code","9ad94e1d":"code","4ce2f1e2":"code","33973b0e":"code","536a18c2":"code","1099b28a":"markdown","76d33970":"markdown","feb5b4a3":"markdown","2e77dba3":"markdown","2d0d33ff":"markdown","b3ecd462":"markdown","ece8d0bb":"markdown","330fafe9":"markdown","62671852":"markdown","21485ebc":"markdown","2005bfd4":"markdown","412660c6":"markdown","5b967b9b":"markdown","a0353053":"markdown","fc6940a2":"markdown","45718654":"markdown","665bc9aa":"markdown"},"source":{"b9420096":"import pandas as pd\nimport numpy as np \nimport matplotlib.pyplot as plt \nimport matplotlib.dates as mdates\nfrom sklearn.linear_model import LinearRegression\nfrom sklearn.preprocessing import PolynomialFeatures\nfrom datetime import datetime\n\nplt.style.use('fivethirtyeight')\ndef ploting(y,z,media_de_semana,media_tres_dias,k,ind,casos):\n\n    \n    plt.figure(casos + ind,figsize=(12,6))\n    plt.title(casos + ind)\n    plt.plot_date(y,casos_dia,'-',label=casos + \"dia\")\n    plt.plot_date(y,media_de_semana,'-',label=\"m\u00e9dia m\u00f3vel de 7 dias\")\n    plt.plot_date(y,media_tres_dias,'-', label=\"m\u00e9dia movel de 3 dias\")\n    plt.plot_date(z,k,'-',label='previs\u00e3o')\n    plt.legend()\n    plt.show()\n\nprec=15\ndb = pd.read_csv('..\/input\/corona-virus-brazil\/brazil_covid19.csv')\nregioes=[]\ndatas=[]\ncasos_brasil = np.zeros(prec)\ncasos_dia=[]\ncases_sul=[0]\ncasos_geral_brasil= []\ncasos=db['cases']\nmortes=db['deaths']\nfor i in range(len(casos)):\n    if not(db['state'][i] in regioes):\n        regioes.append(db['state'][i])\n\nfor ind in regioes:\n\n    model=LinearRegression()\n    casos_dia=[]\n    cases_sul=[0]\n    for r in range(len(db['date'])):\n        if not(db['date'][r] in datas):\n            datas.append(db['date'][r]) \n    for r in range(len(casos)):\n        if db['state'][r]== ind:\n            cases_sul.append(casos[r])\n    for r in range(1,len(cases_sul)):\n        casos_dia.append(cases_sul[r]-cases_sul[r-1])\n\n    media_de_semana=[0,0,0,0,0,0]\n    media_tres_dias=[0,0]\n\n    for r in range(6,len(casos_dia)):\n        media_de_semana.append((casos_dia[r-6]+casos_dia[r-5]+casos_dia[r-4]+casos_dia[r-3]+casos_dia[r-2]+casos_dia[r-1]+casos_dia[r])\/7)\n    for r in range(2,len(casos_dia)):\n        media_tres_dias.append((casos_dia[r-2]+casos_dia[r-1]+casos_dia[r])\/\/3)\n\n    day_average_int,covariance=np.polyfit(np.linspace(0,len(media_de_semana),len(media_de_semana)),media_de_semana,deg=4,cov=True)\n    day_average_int=np.poly1d(day_average_int)\n\n    x=np.linspace(0,len(media_de_semana)+prec,len(media_de_semana)+prec)\n    y=[mdates.datestr2num(u) for u in datas ]\n    z=np.linspace(y[0],y[-1]+prec,len(y)+prec)\n    z2=np.linspace(0,len(media_de_semana),len(media_de_semana)).reshape(-1,1)\n    x_ = PolynomialFeatures(degree=4, include_bias=False).fit_transform(z2)\n    model.fit(x_ , (media_de_semana))\n    r_sq = model.score(x_, np.array(media_de_semana))\n    print(str(r_sq)+' Score do Estado '+ ind )\n    k=np.array(day_average_int(x))\n    print('Estado '+ ind)\n    print('Media de 7 dias esperada para os dias no Estado: '+ind)\n    for r in range(-prec,0):\n        casos_brasil[r]+=k[r]\n        print(mdates.num2date(z[r]).strftime('%d-%m-%Y')+'     '+ str((k[r])))\n    ploting(y,z,media_de_semana,media_tres_dias,k,ind,\"Casos \")\nprint('Geral casos Brasil')\nfor r in range(-prec,0):\n    print(mdates.num2date(z[r]).strftime('%d-%m-%Y')+'     '+ str((casos_brasil[r])))","3b911e5f":"mortes_brasil = np.zeros(prec)\nfor ind in regioes:\n\n    model=LinearRegression()\n    casos_dia=[]\n    cases_sul=[0]\n    for r in range(len(db['date'])):\n        if not(db['date'][r] in datas):\n            datas.append(db['date'][r]) \n    for r in range(len(casos)):\n        if db['state'][r]== ind:\n            cases_sul.append(mortes[r])\n    for r in range(1,len(cases_sul)):\n        casos_dia.append(cases_sul[r]-cases_sul[r-1])\n\n    media_de_semana=[0,0,0,0,0,0]\n    media_tres_dias=[0,0]\n\n    for r in range(6,len(casos_dia)):\n        media_de_semana.append((casos_dia[r-6]+casos_dia[r-5]+casos_dia[r-4]+casos_dia[r-3]+casos_dia[r-2]+casos_dia[r-1]+casos_dia[r])\/7)\n    for r in range(2,len(casos_dia)):\n        media_tres_dias.append((casos_dia[r-2]+casos_dia[r-1]+casos_dia[r])\/\/3)\n\n    day_average_int,covariance=np.polyfit(np.linspace(0,len(media_de_semana),len(media_de_semana)),media_de_semana,deg=4,cov=True)\n    day_average_int=np.poly1d(day_average_int)\n\n    x=np.linspace(0,len(media_de_semana)+prec,len(media_de_semana)+prec)\n    y=[mdates.datestr2num(u) for u in datas ]\n    z=np.linspace(y[0],y[-1]+prec,len(y)+prec)\n    z2=np.linspace(0,len(media_de_semana),len(media_de_semana)).reshape(-1,1)\n\n    x_ = PolynomialFeatures(degree=4, include_bias=False).fit_transform(z2)\n    model.fit(x_ , (media_de_semana))\n    r_sq = model.score(x_, np.array(media_de_semana))\n    print(str(r_sq)+' Score Mortes do Estado '+ ind )\n    k=day_average_int(x)\n    print('Estado '+ ind)\n    print('Media de mortes de 7 dias esperada para os dias no Estado: '+ind)\n    for r in range(-prec,0):\n        mortes_brasil[r]+=k[r]\n        print(mdates.num2date(z[r]).strftime('%d-%m-%Y')+'      '+ str((k[r])))\n    ploting(y,z,media_de_semana,media_tres_dias,k,ind,\"Mortes \")\nprint('Mortes em geral esperadas no Brasil')\nfor r in range(-prec,0):\n    print(mdates.num2date(z[r]).strftime('%d-%m-%Y')+'      '+ str((mortes_brasil[r])))","784bab32":"def append_region(regiao, db, ind):\n    lista = []\n    val = 0\n    teste = False\n    for r in range(len(db[ind])):\n        if db['region'][r] == regiao:\n            val += db[ind][r]\n            teste = True\n        elif teste:\n            lista.append(val)\n            val = 0\n            teste = False\n    return lista","0de05f16":"casos_sul = append_region('Sul', db, 'cases')\ncasos_sudeste = np.array(append_region('Sudeste', db, 'cases'))\ncasos_norte = np.array(append_region(\"Norte\", db, 'cases'))\ncasos_nordeste = np.array(append_region(\"Nordeste\", db, 'cases'))\ncasos_centro = np.array(append_region(\"Centro-Oeste\", db, 'cases'))\ncasos_sul.insert(0, 0)\ncasos_sul = np.array(casos_sul)","49bce252":"x=[mdates.datestr2num(u) for u in datas ]\nplt.figure(\"Casos\",figsize=(12,6))\n\nplt.title(\"Casos Acumulados por regi\u00f5es\")\nplt.plot_date(x, casos_sul, '-', label=\"Sul\")\nplt.plot_date(x, casos_sudeste, '-', label=\"Sudeste\")\nplt.plot_date(x, casos_centro, '-', label=\"Centro\")\nplt.plot_date(x, casos_nordeste, '-', label=\"Nordeste\")\nplt.plot_date(x, casos_norte, '-', label=\"Norte\")\n\nplt.xlabel(\"Dias\")\nplt.ylabel(\"Casos Acumulados\")\n\nplt.legend()\nplt.show()","4c4dbad5":"casos_geral = casos_sul+casos_sudeste+casos_centro+casos_nordeste+casos_norte\n\nplt.figure(figsize = (12,6))\nplt.title('Casos Acumulados Brasil')\nplt.plot_date(x, casos_geral, '-', label=\"Brasil\")\n\nplt.xlabel(\"Dias\")\nplt.ylabel(\"Casos Acumulados\")\n\nplt.legend()\nplt.show()","e8eb69ea":"mortes_sul = append_region('Sul', db, 'deaths')\nmortes_sudeste = np.array(append_region('Sudeste', db, 'deaths'))\nmortes_norte = np.array(append_region('Norte', db, 'deaths'))\nmortes_nordeste = np.array(append_region('Nordeste', db, 'deaths'))\nmortes_centro = np.array(append_region('Centro-Oeste', db, 'deaths'))\nmortes_sul.insert(0, 0)\nmortes_sul = np.array(mortes_sul)","fa6fa666":"plt.figure('Mortes',figsize=(12,6))\n\nplt.title(\"Mortes Acumuladas por Regi\u00e3o\")\nplt.plot_date(x, mortes_sul, '-', label=\"Sul\")\nplt.plot_date(x, mortes_sudeste, '-', label=\"Sudeste\")\nplt.plot_date(x, mortes_centro, '-', label=\"Centro\")\nplt.plot_date(x, mortes_nordeste, '-', label=\"Nordeste\")\nplt.plot_date(x, mortes_norte, '-', label=\"Norte\")\n\nplt.xlabel(\"Dias\")\nplt.ylabel(\"Mortes Acumuladas\")\n\nplt.legend()\nplt.show()","f6fc2837":"mortes_geral = mortes_sul+mortes_sudeste+mortes_centro+mortes_nordeste+mortes_norte\nplt.figure(figsize=(12,6))\nplt.title(\"Mortes acumuladas Brasil\")\nplt.plot_date(x, mortes_geral, '-', label=\"Brasil\")\n\nplt.xlabel(\"Dias\")\nplt.ylabel(\"Mortes Acumuladas\")\n\nplt.legend()\nplt.show()\n","0de69174":"def taxa_mortalidade(casos_acumulados, mortes_acumuladas):\n    lista = []\n    for r in range(len(casos_acumulados)):\n        try:\n            lista.append(mortes_acumuladas[r]\/casos_acumulados[r])\n        except:\n            lista.append(0)\n    return lista","9ad94e1d":"taxa_de_mortalidade_sul = taxa_mortalidade(casos_sul, mortes_sul)\ntaxa_de_mortalidade_norte = taxa_mortalidade(casos_norte, mortes_norte)\ntaxa_de_mortalidade_sudeste = taxa_mortalidade(casos_sudeste, mortes_sudeste)\ntaxa_de_mortalidade_Nordeste = taxa_mortalidade(casos_nordeste, mortes_nordeste)\ntaxa_de_mortalidade_Centro = taxa_mortalidade(casos_centro, mortes_centro)\ntaxa_de_mortalidade_Brasil = taxa_mortalidade(casos_geral,mortes_geral)","4ce2f1e2":"plt.figure('Taxa',figsize=(12,6))\n\nplt.title('Taxa de mortalidade por regi\u00e3o')\nplt.plot_date(x, taxa_de_mortalidade_sul, '-', label=\"Sul\")\nplt.plot_date(x, taxa_de_mortalidade_sudeste, '-', label=\"Sudeste\")\nplt.plot_date(x, taxa_de_mortalidade_Centro, '-', label=\"Centro\")\nplt.plot_date(x, taxa_de_mortalidade_Nordeste, '-', label=\"Nordeste\")\nplt.plot_date(x, taxa_de_mortalidade_norte, '-', label=\"Norte\")\nplt.plot_date(x, taxa_de_mortalidade_Brasil,'-',label = \"Brasil\")\nplt.xlabel(\"Dias\")\nplt.ylabel(\"taxa de mortalidade\")\n\nplt.legend()\nplt.show()","33973b0e":"# dados IBGE 2020 retirados de https:\/\/ftp.ibge.gov.br\/Estimativas_de_Populacao\/Estimativas_2020\/POP2020_20201030.pdf\npop_sul=30192315\npop_sudeste=89012240\npop_norte=18672591\npop_centro=16504303\npop_nordeste=57374243\npop_brasil = pop_sul+pop_sudeste+pop_centro+pop_norte+pop_nordeste\n\nmortes_por_100_NE=[100000*u\/pop_nordeste for u in mortes_nordeste]\nmortes_por_100_SD=[100000*u\/pop_sudeste for u in mortes_sudeste]\nmortes_por_100_SL=[100000*u\/pop_sul for u in mortes_sul]\nmortes_por_100_NO=[100000*u\/pop_norte for u in mortes_norte]\nmortes_por_100_CO=[100000*u\/pop_centro for u in mortes_centro]\nmortes_por_100 =  [100000*u\/pop_brasil for u in mortes_geral]\n\ncasos_por_100_NE=[100000*u\/pop_nordeste for u in casos_nordeste]\ncasos_por_100_SD=[100000*u\/pop_sudeste for u in casos_sudeste]\ncasos_por_100_SL=[100000*u\/pop_sul for u in casos_sul]\ncasos_por_100_NO=[100000*u\/pop_norte for u in casos_norte]\ncasos_por_100_CO=[100000*u\/pop_centro for u in casos_centro]\ncasos_por_100 =  [100000*u\/pop_brasil for u in casos_geral]","536a18c2":"plt.figure(\"Morte por 100 mil regi\u00f5es\",figsize=(12,6))\nplt.title('Mortes por 100 mil habitantes')\nplt.plot_date(x, mortes_por_100_SL, '-', label=\"Sul\")\nplt.plot_date(x, mortes_por_100_SD, '-', label=\"Sudeste\")\nplt.plot_date(x, mortes_por_100_CO, '-', label=\"Centro\")\nplt.plot_date(x, mortes_por_100_NE, '-', label=\"Nordeste\")\nplt.plot_date(x, mortes_por_100_NO, '-', label=\"Norte\")\nplt.plot_date(x, mortes_por_100,'-',label = 'Brasil')\n\nplt.xlabel('Dias')\nplt.ylabel(\"Mortes por 100 mil  habitantes\")\nplt.legend()\n\nplt.figure(\"Casos por 100 mil regi\u00f5es\",figsize=(12,6))\n\nplt.title('Casos por 100 mil habitantes')\nplt.plot_date(x, casos_por_100_SL, '-', label=\"Sul\")\nplt.plot_date(x, casos_por_100_SD, '-', label=\"Sudeste\")\nplt.plot_date(x, casos_por_100_CO, '-', label=\"Centro\")\nplt.plot_date(x, casos_por_100_NE, '-', label=\"Nordeste\")\nplt.plot_date(x, casos_por_100_NO, '-', label=\"Norte\")\nplt.plot_date(x, casos_por_100,'-',label = 'Brasil')\n\nplt.xlabel('Dias')\nplt.ylabel('Casos por 100 mil habitantes ')\nplt.legend()\n\n\nplt.show()\n","1099b28a":"Podemos tambem analisar o n\u00famero de casos em geral no brasil, que sera igual a soma do n\u00famero de casos acumulados no brasil","76d33970":"Lembrando que sou somente um estudante e estou disposto a aprender mais, sugest\u00f5es s\u00e3o muito bem vindas.","feb5b4a3":"# Dados Por regi\u00f5es.\nAgora podemos analisar os dados por regi\u00e3o e os dados acumulados por regi\u00e3o para isso \u00e9 construida uma fun\u00e7\u00e3o para preparar os dados","2e77dba3":"Em seguida plotamos os dados de mortes","2d0d33ff":"# Interpola\u00e7\u00e3o Polinomial em Casos Diarios da Covid 19 nos Estados Do Brasil e Apresenta\u00e7\u00e3o de Dados em diferentes regi\u00f5es do pa\u00eds\n\n\nLogo abaixo voc\u00ea vai ver a apresenta\u00e7\u00e3o de dados e a interpola\u00e7\u00e3o polinomial nos dados das m\u00e9dias de casos di\u00e1rios da covid 19 em todos os estados do Brasil, como a apresenta\u00e7\u00e3o das taxas de mortalidade n\u00famero de mortos e de casos acumulados nas diferentes regi\u00f5es do pa\u00eds.  ","b3ecd462":"Indo ao site do IBGE  em https:\/\/ftp.ibge.gov.br\/Estimativas_de_Populacao\/Estimativas_2020\/POP2020_20201030.pdf podemos retirar de informa\u00e7\u00e3o a estimativa de pessoas por regi\u00e3o e adicionar isto ao grafico e obter o n\u00famero de mortos por 100 mil habitantes, como o n\u00famero de casos acumulados por 100 mil habitantes. ","ece8d0bb":"Agora plotamos os valores da taxa de mortalidade em rela\u00e7\u00e3o ao tempo","330fafe9":"Acima \u00e9 poss\u00edvel visualizar os dados da Covid nos estados do Brasil e uma interpola\u00e7\u00e3o polinomial de grau 5, foi postado anteriormente usando grau 4, p\u00f3rem para alguns estados a previs\u00e3o foi muito contraria aos n\u00fameros reais da pandemia. A intepola\u00e7\u00e3o foi feita na m\u00e9dia m\u00f3vel de 7 dias em cada um deles, com o objetivo de diminuir outliers. A variavel preci determina a quantidade de dias da previs\u00e3o do modelo de interpola\u00e7\u00e3o. Sei que este modelo \u00e9 fraco pois n\u00e3o considera quest\u00f5es como movimenta\u00e7\u00e3o de pessoas e a taxa de transmisibilidade da doen\u00e7a. Existem alguns estados com n\u00fameros esquisitos que eu tenha percebido s\u00e3o SC,CE e RN que podem ter sido causados por corre\u00e7\u00f5es dos dados das secretar\u00edas ou de atrasos na divulga\u00e7\u00e3o, espero que estes dados n\u00e3o tenham grandes mudan\u00e7as na m\u00e9dia m\u00f3vel.Os dados com os casos por dia foram obtidos a partir da diferen\u00e7a da quantidade de casos registrados de um dia para o outro, por isso podem ocorrer oscila\u00e7\u00f5es inesperadas dos dados. Lembrando que quanto mais longe da data do valor obtido maior a possibilidade de varia\u00e7\u00f5es. Ainda assim, em alguns estados algumas previs\u00f5es n\u00e3o fazem sentido e uma previs\u00e3o de menor tempo pode ser mais precisa.Tambem foram feitas interpola\u00e7\u00f5es para o numero de mortes di\u00e1rias em cada Estado do Brasil.\nOutro problema do modelo \u00e9 que ele admite uma fun\u00e7\u00e3o continua e no periodo do estudo com derivada positiva e n\u00e3o toma em conta a sazonalidade da apari\u00e7\u00e3o dos dados que \u00e9 clara, nos finais de semana o n\u00famero de casos e mortes \u00e9 menor que em dias da semana, ent\u00e3o estes valores podem ser admitidos como as poss\u00edveis m\u00e9dias moveis para os proximos dias em rela\u00e7\u00e3o a casos e mortes. \n","62671852":"Plotamos agora os graficos com o n\u00famero de casos acumulados por regi\u00e3o.","21485ebc":"Podemos agora analisar o n\u00famero de mortes acumuladas no Brasil ","2005bfd4":"Agora construimos as listas com cada um dos valores por data. ","412660c6":"Podemos agora analisar o n\u00famero de \u00f3bitos acumulados causados pela Covid-19 por regi\u00e3o para isso organizamos os dados. ","5b967b9b":"Agora com os dados de mortes e casos podemos obter a taxa de mortalidade em rela\u00e7\u00e3o ao tempo para isso contruimos uma fun\u00e7\u00e3o para obter cada taxa por regi\u00e3o.","a0353053":"# Casos Di\u00e1rios de Covid nos Estados do Brasil e previs\u00e3o atrav\u00e9s da interpola\u00e7\u00e3o polinomial. ","fc6940a2":"# Mortes Di\u00e1rias de Covid nos Estados do Brasil e previs\u00e3o atrav\u00e9s da intepola\u00e7\u00e3o polinomial.","45718654":"Agora possuimos a varia\u00e7\u00e3o em rela\u00e7\u00e3o ao tempo do n\u00famero de casos por 100 mil habitantes, como tamb\u00e9m o n\u00famero de \u00f3bitos por 100 mil habitantes","665bc9aa":"Note que algns valores de casos podem ser zero por isso substitu\u00edmos pela taxa como sendo zero neste caso espec\u00edfico. \nEm seguida usaremos a fun\u00e7\u00e3o para obter os dados da taxa de mortalidade. Lembrando que determinamos a taxa de mortalidade como:\n*N\u00famero de mortos acumulado \/ N\u00famero de casos acumulados*"}}