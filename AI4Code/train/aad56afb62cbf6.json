{"cell_type":{"0c64d5ff":"code","338343b2":"code","e1df76d4":"code","15893fd2":"code","401f463d":"code","49d7b1a6":"code","1fdac70c":"code","e4253823":"code","62978ce8":"code","a9fdcc50":"code","000c5cba":"code","cd8c699b":"markdown","863064c5":"markdown","26cbbf07":"markdown","ca14a01c":"markdown","9195e7e3":"markdown","f77930bf":"markdown","fd220a0f":"markdown","eebca149":"markdown","761bff00":"markdown","8f0b0c53":"markdown","e635043f":"markdown","3df36b41":"markdown"},"source":{"0c64d5ff":"import numpy as np\nimport pandas as pd\nimport matplotlib.pyplot as plt\nfrom tqdm import tqdm\nfrom random import randint\nfrom nltk.corpus import stopwords\nimport string, re\n%matplotlib inline\nplt.style.use('ggplot')","338343b2":"df = pd.read_csv('..\/input\/nbme-score-clinical-patient-notes\/patient_notes.csv')\ndf.head()","e1df76d4":"df.info()","15893fd2":"df_label = df['case_num']\narr = plt.hist(df_label);\nplt.xticks(range(10));\nfor i in range(10):\n    plt.text(arr[1][i],arr[0][i],str(int(arr[0][i])))","401f463d":"abbreviations = {\n    \"ros\": \"review of systems\",\n    \"fh\": \"family history\",\n    \"fhx\": \"family history\",\n    \"pmh\": \"past medical history\",\n    \"nka\": \"no known allergies\",\n    \"nkda\": \"no known drug allergies\",\n    \"rx\": \"medical prescription\", #rx is actually short for recipe\n    \"lmp\": \"last menstrual period\",\n    \"etoh\": \"alcohol\",\n    \"sob\": \"shortness of breath\",\n    \"c\/o\": \"complains of\",\n    \"alls\": \"allergies\",\n    \"hpi\": \"history of present illness\",\n    \"f\/u\": \"follow up\",\n    \"htn\": \"hypertension\",\n    \"rlq\": \"right lower quadrant\",\n    \"llq\": \"left lower quadrant\",\n    \"ruq\": \"right upper quadrant\",\n    \"luq\": \"left upper quadrant\",\n    \n#     \"psh\": \"past surgical hisotry\",\n#     \"psh\": \"past social hisotry\",\n#     \"sh\": \"social history\",\n#     \"sh\": \"surgical history\",\n#     \"sh\": \"sexual history\",\n}","49d7b1a6":"len_sample = 300\npn_notes = df['pn_history']\nsample = pn_notes.sample(len_sample)","1fdac70c":"print(sample.iloc[12])","e4253823":"print(sample.iloc[14])","62978ce8":"print(sample.iloc[99])","a9fdcc50":"word_count = [ dict() for _ in range(10)] # 10 emmpty dicts\n\n# we are going to exclude stop words and punctuations\nexluded_words = [*stopwords.words('english'), *[x for x in string.punctuation], 'ago', 'per', 'day', 'days', 'month' , 'months']\n# patterns\npattern = re.compile('\\d{1,}[-\/]\\d{1,}')\n\nfor case_num, sentence in tqdm(zip(df['case_num'], df['pn_history'])):\n    for word in sentence.lower().split():\n        if (word not in exluded_words and not word.isdigit() and not re.match(pattern, word)):\n            word_count[int(case_num)].setdefault(word, 0)\n            word_count[int(case_num)][word] += 1\n","000c5cba":"fig, axes = plt.subplots(nrows=10,ncols=1, figsize=(15,60))\n\nfor i, ax in enumerate(axes):\n    wc = sorted(word_count[i].items(), key=lambda x : -x[1])[:15]\n    wc = wc[::-1]\n    counts = [x[1] for x in wc]\n    words = [x[0] for x in wc]\n    ax.barh(words,counts)\n    ax.set_title(f'case number {i} word count')\n    ax.tick_params(axis='both', which='major', labelsize=15)\n    ax.tick_params(axis='both', which='minor', labelsize=12)\n    for i, v in enumerate(counts):\n        ax.text(v + 1, i - .1, str(v), color='red', fontweight='bold')\n    ","cd8c699b":"From the histogram, we can see that case number 1 doesn't have a lot of examples","863064c5":"Here, I'll show some sentences so you can see the note structure and see some of the abbreviations in context","26cbbf07":"**N.B.** Some abbreviations might mean different things.\n\nsh could mean either social history or surgical history.\n\nED could be emergency department, erectile dysfunction or eating disorder.\n\nSo a direct table substition might not perform as well as you think, the optimal way is to predict which one it is based on something like a context window.","ca14a01c":"We can see that the patient_notes csv file doesn't contain any nulls and contains 42k notes.\n\nThis should be good to explore the data a bit.","9195e7e3":"****\n### Sentece 1 Notes\n\nYou can see the use of MHx -> medical hisotry, SH -> social history, ETOH -> alcohol, SHx -> surgical history\n\n****","f77930bf":"****\n### Sentence 2 Notes\n\nc\/o -> complains of , HPI -> history of present illness\n\nnkda -> no known drug allergies, ROS -> review of systems\n****","fd220a0f":"# Simple Histogram for case numbers","eebca149":"This will mainly list the different abbreviations with examples in addition to the word count","761bff00":"# Word count for each case number","8f0b0c53":"# Random notes and examples on abbreviations","e635043f":"### Sentence 1","3df36b41":"****\n### Sentece 3 Notes\n\nf\/u -> follow up, sob -> shortnes of breath\n\n****"}}