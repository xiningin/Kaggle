{"cell_type":{"5c9d0535":"code","4fd1928c":"code","42c16158":"code","03891e79":"code","83bfb308":"code","00ee6d52":"code","fbdac3c1":"code","d1acb738":"code","2b301844":"code","47593233":"code","e410ed53":"code","07b4f4c3":"code","38679154":"code","0d2d2840":"code","50f7a70a":"code","c736ef6d":"code","adc83240":"code","f5e719af":"code","72049040":"code","5561ab67":"code","861c9e08":"markdown"},"source":{"5c9d0535":"import numpy as np\nimport pandas as pd\nimport matplotlib.pyplot as plt\n%matplotlib inline\nfrom datetime import datetime\nplt.style.use('fivethirtyeight')\nimport seaborn as sns\n","4fd1928c":"df=pd.read_csv('..\/input\/tesla-stock-data-from-2010-to-2020\/TSLA.csv')","42c16158":"df=df.set_index(pd.DatetimeIndex(df['Date'].values))\ndf=df.tail(500)\ndf","03891e79":"df.head()","83bfb308":"plt.figure(figsize=(12.5,4.5))\nplt.plot(df['Adj Close'],label='Close Price')\nplt.title('TESLA Adj Close Price')\nplt.xlabel('Date')\nplt.ylabel('Price(USD)')\nplt.legend()\nplt.show()","00ee6d52":"ma30=pd.DataFrame()\nma30['AM']=df['Adj Close'].rolling(window=30).mean()\nma100=pd.DataFrame()\nma100['AM']=df['Adj Close'].rolling(window=100).mean()","fbdac3c1":"data=pd.DataFrame()\ndata['TESLA']=df['Adj Close']\ndata['MA30']=ma30['AM']\ndata['MA100']=ma100['AM']","d1acb738":" def signal(data):\n        signalBuy=[]\n        signalSell=[]\n        f=-1\n        for i in range(len(data)):\n            if data['MA30'][i]>data['MA100'][i]:\n                if f != 1:\n                    signalBuy.append(data['TESLA'][i])\n                    signalSell.append(np.nan)\n                    f=1\n                else:\n                    signalBuy.append(np.nan)\n                    signalSell.append(np.nan)\n\n            elif data['MA30'][i]< data['MA100'][i]:    \n                if  f!= 0:\n                    signalBuy.append(np.nan)\n                    signalSell.append(data['TESLA'][i])\n                    f=0\n                else:\n                    signalBuy.append(np.nan)\n                    signalSell.append(np.nan)\n            else :\n                signalBuy.append(np.nan)\n                signalSell.append(np.nan)\n                \n        return signalBuy, signalSell","2b301844":"buy_sell=signal(data)\ndata['buy signal']=buy_sell[0]\ndata['sell signal']=buy_sell[1]","47593233":"data","e410ed53":"\nplt.figure(figsize=(16,8))\nplt.plot(data['TESLA'],label='TESLA')\nplt.plot(data['MA30'],label='MA30')\nplt.plot(data['MA100'],label='MA100')\nplt.scatter(data.index,data['buy signal'],label='BUY',marker='^',color='g')\nplt.scatter(data.index,data['sell signal'],label='SELL',marker='.',color='r')\nplt.title('two moving average signal')\nplt.xlabel('DATE')\nplt.ylabel('PRICE(USD)')\nplt.legend()\nplt.show()\n","07b4f4c3":"plt.figure(figsize=(12.5,4.5))\nplt.plot(df['Close'],label='Close Price')\nplt.title('TESLA Close Price')\nplt.xlabel('Date')\nplt.ylabel('Price(USD)')\nplt.legend()\nplt.show()","38679154":"typical_price=(df['Close']+df['High']+df['Low'])\/3","0d2d2840":"period=14\nmoney_flow=typical_price*df['Volume']\nmoney_flow","50f7a70a":"positive_flow=[]\nnegative_flow=[]\nfor i in range(1,len(typical_price)):\n    if typical_price[i]>typical_price[i-1]:\n        positive_flow.append(money_flow[i-1])\n        negative_flow.append(0)\n    elif typical_price[i]< typical_price[i-1]:\n        positive_flow.append(0)\n        negative_flow.append(money_flow[i-1])\n    else:\n        positive_flow.append(0)\n        negative_flow.append(0)\n    ","c736ef6d":"positive_mf=[]\nnegative_mf=[]\nfor i in range(period-1, len(positive_flow)):\n    positive_mf.append(sum(positive_flow[i+1-period:i+1]))\nfor i in range(period-1, len(negative_flow)):\n    negative_mf.append(sum(negative_flow[i+1-period:i+1]))   ","adc83240":"#MFI equation\nmfi=100*(np.array(positive_mf)\/(np.array(positive_mf)+np.array(negative_mf)))\nmfi","f5e719af":"df1=pd.DataFrame()\ndf1['MFI']=mfi","72049040":"plt.figure(figsize=(12.5,4.5))\nplt.plot(df1['MFI'],label='MFI')\nplt.axhline(20,linestyle='--', color='r')\nplt.axhline(30,linestyle='--', color='b')\nplt.axhline(70,linestyle='--', color='b')\n\nplt.axhline(80,linestyle='--', color='r')\nplt.title('MFI')\nplt.xlabel('Date')\nplt.ylabel('MFI')\nplt.legend()\nplt.show()","5561ab67":"fig,(ax1,ax2)=plt.subplots(nrows=2,ncols=1,figsize=(12.5,6))\nax1.plot(df['Close'],label='Close Price')\nax2.plot(df1['MFI'],label='MFI')\nax2.axhline(20,linestyle='--', color='r', alpha=0.5)\nax2.axhline(30,linestyle='--', color='b',alpha=0.5)\nax2.axhline(70,linestyle='--', color='b',alpha=0.5)\nax2.axhline(80,linestyle='--', color='r',alpha=0.5)\nax1.set_title('MFI Visualizer')","861c9e08":"**MFI andicator**"}}