{"cell_type":{"92ac8b2e":"code","5b8cb29b":"code","07a75b82":"code","8bc53be8":"code","43ae1721":"code","4293ebe5":"code","96ca53cd":"code","5dc25b0e":"code","c770ffd8":"code","8bfbcf77":"code","4c712ce7":"code","33321f07":"code","fc335927":"code","594bbb1c":"code","cb9f93fd":"code","65e548b8":"code","717ac059":"code","30c25abe":"code","26df63fe":"code","e5474333":"code","e450a2dc":"code","5be73ab7":"code","a19bf7fa":"markdown","5e270294":"markdown","d10ec025":"markdown","a2679064":"markdown","4ae0e344":"markdown","fc335b75":"markdown","b925ac45":"markdown","13f727cc":"markdown","8861651e":"markdown","156c39d6":"markdown","bb214914":"markdown","0b569569":"markdown","3623a263":"markdown","07d573d7":"markdown","86d79470":"markdown"},"source":{"92ac8b2e":"# This Python 3 environment comes with many helpful analytics libraries installed\n# It is defined by the kaggle\/python docker image: https:\/\/github.com\/kaggle\/docker-python\n# For example, here's several helpful packages to load in \n\nimport numpy as np # linear algebra\nimport pandas as pd # data processing, CSV file I\/O (e.g. pd.read_csv)\nimport seaborn as sns\nimport matplotlib.pyplot as plt\nimport matplotlib.image as mpimg\nfrom wordcloud import WordCloud, STOPWORDS, ImageColorGenerator\nimport nltk\nfrom nltk.corpus import stopwords\nfrom nltk.util import ngrams\nfrom sklearn.feature_extraction.text import CountVectorizer\nfrom collections import defaultdict\nfrom collections import  Counter\nplt.style.use('ggplot')\nstop=set(stopwords.words('english'))\nimport re\nfrom nltk.tokenize import word_tokenize\n\n# Input data files are available in the \"..\/input\/\" directory.\n# For example, running this (by clicking run or pressing Shift+Enter) will list all files under the input directory\n\nimport os\nfor dirname, _, filenames in os.walk('\/kaggle\/input'):\n    for filename in filenames:\n        print(os.path.join(dirname, filename))\n\n        \n# Any results you write to the current directory are saved as output.","5b8cb29b":"airbnb = pd.read_csv('\/kaggle\/input\/new-york-city-airbnb-open-data\/AB_NYC_2019.csv')\nairbnb.head(10)","07a75b82":"boroughs = airbnb.groupby('neighbourhood_group')['host_id'].agg('count').reset_index().sort_values(by = ['host_id'])\nfig, ax1 = plt.subplots(1,1, figsize=(6,6)\n                       )\nsns.set_palette('Blues')\nsns.barplot(x='neighbourhood_group', y='host_id', data=boroughs, ax=ax1)\n\nax1.set_title('Number of Listings by Borough', fontsize=15)\nax1.set_xlabel('Borough', fontsize=12)\nax1.set_ylabel('Count', fontsize=12)\nax1.tick_params(axis='both', labelsize=10)\n","8bc53be8":"airbnb.isnull().sum()","43ae1721":"airbnb['name'].fillna(value=0, inplace=True)\nairbnb['reviews_per_month'].fillna(value=0, inplace=True)\nairbnb['host_name'].fillna(value=0, inplace= True)\nairbnb.drop('last_review', axis=1, inplace=True)\nairbnb.isnull().sum()","4293ebe5":"room_cat = airbnb.groupby(['room_type','neighbourhood_group'])['id'].agg('count').reset_index().sort_values(by = ['id'] )\nfig, ax2 = plt.subplots(1,1, figsize=(10,5))\n                       \nsns.set_palette('YlOrRd')\nsns.barplot( x='room_type',y = 'id',hue='neighbourhood_group', data=room_cat, ax=ax2)\n\nax2.set_title('Number of Listings by Room Type and Borough', fontsize=15)\nax2.set_xlabel('Borough', fontsize=12)\nax2.set_ylabel('Count', fontsize=12)\nax2.tick_params(axis='both', labelsize=10)","96ca53cd":"NY_neigh = airbnb[airbnb['neighbourhood_group'] == 'Manhattan'].groupby('neighbourhood')['id'].agg('count').reset_index().sort_values(by = ['id'],ascending = False).head(10)\nfig, ax3 = plt.subplots(1, 1, figsize=(16,6))\nsns.barplot(x='neighbourhood', y='id',data=NY_neigh,ax= ax3,palette='RdYlBu')\nax3.set_title('Neighbourhoods with the most listings in Manhattan')\nax3.set_xlabel('neighbourhood',fontsize = 12)\nax3.set_ylabel('Count',fontsize = 12)\nax3.tick_params(axis = 'both',labelsize = 10)","5dc25b0e":"Brook_neigh = airbnb[airbnb['neighbourhood_group'] == 'Brooklyn'].groupby('neighbourhood')['id'].agg('count').reset_index().sort_values(by = ['id'],ascending = False).head(10)\nfig, ax3 = plt.subplots(1, 1, figsize=(16,6))\nsns.barplot(x='neighbourhood', y='id',data=Brook_neigh,ax= ax3,palette='RdYlBu')\nax3.set_title('Neighbourhoods with the most listings in Brooklyn')\nax3.set_xlabel('neighbourhood',fontsize = 12)\nax3.set_ylabel('Count',fontsize = 12)\nax3.tick_params(axis = 'both',labelsize = 10)","c770ffd8":"plt.figure(figsize=(15,6))\nsns.boxplot(data=airbnb, x='neighbourhood_group', y='price', palette='GnBu_d')\nplt.title('Density and distribution of prices for each neighbourhood group', fontsize=15)\nplt.xlabel('Neighbourhood group')\nplt.ylabel(\"Price\")","8bfbcf77":"plt.figure(figsize=(15,6))\nsns.violinplot(data=airbnb[airbnb.price <700], x='neighbourhood_group', y='price', palette='Greens')\nplt.title('Density and distribution of prices for each neighbourhood group', fontsize=15)\nplt.xlabel('Neighbourhood group')\nplt.ylabel(\"Price\")","4c712ce7":"Man_price = airbnb[(airbnb['neighbourhood_group'] == 'Manhattan') & (airbnb['room_type'] == 'Entire home\/apt') & (airbnb.price < 700) & (airbnb.price > 0)].groupby('neighbourhood')['price'].agg('mean').reset_index().sort_values(by = ['price'],ascending = False).head(20)\nplt.figure(figsize=(15,6))\nsns.barplot(data=Man_price, y='neighbourhood', x='price', palette='RdGy')\nplt.title('Average Price of Entire apartments by Neighbourhood', fontsize=15)\nplt.ylabel('Neighbourhoods')\nplt.xlabel(\"Price\")\n","33321f07":"Brook_price = airbnb[(airbnb['neighbourhood_group'] == 'Brooklyn') & (airbnb['room_type'] == 'Entire home\/apt') & (airbnb.price < 700) & (airbnb.price > 0)].groupby('neighbourhood')['price'].agg('mean').reset_index().sort_values(by = ['price'],ascending = False).head(20)\nplt.figure(figsize=(15,6))\nsns.barplot(data=Brook_price, y='neighbourhood', x='price', palette='RdGy')\nplt.title('Average Price of Entire apartments by Neighbourhood', fontsize=15)\nplt.ylabel('Neighbourhoods')\nplt.xlabel(\"Price\")\n","fc335927":"top_host = airbnb.host_id.value_counts().head(10)\nsns.set(rc={'figure.figsize':(10,8)})\nviz_1=top_host.plot(kind='bar')\nviz_1.set_title('Hosts with the most listings in NYC')\nviz_1.set_ylabel('Listings')\nviz_1.set_xlabel('Host IDs')\nviz_1.set_xticklabels(viz_1.get_xticklabels(), rotation=45)","594bbb1c":"airbnb['new_name'] = airbnb['name'].str.lower()\ntext = airbnb.new_name.values\nwordcloud = WordCloud(\n    width = 3000,\n    height = 2000,\n    background_color = 'black',\n    stopwords = STOPWORDS).generate(str(text))\nfig = plt.figure(\n    figsize = (40, 30),\n    facecolor = 'k',\n    edgecolor = 'k')\nplt.imshow(wordcloud, interpolation = 'bilinear')\nplt.axis('off')\nplt.tight_layout(pad=0)\nplt.show()","cb9f93fd":"airbnb[(airbnb.price < 700) & (airbnb.price > 0)].price.describe()","65e548b8":"def price_group(row):\n    if row['price'] < 61:\n        val = 'Very Low'\n    elif row['price'] < 91:\n        val = 'Low'\n    elif row['price'] < 131:\n        val = 'Moderate'\n    elif row['price'] < 201:\n        val = 'High'\n    else:\n        val = 'Very High'\n    return val\n\nairbnb['price_group'] = airbnb.apply(price_group, axis=1)\n","717ac059":" airbnb.number_of_reviews.describe()\n","30c25abe":"def reviews_group(row):\n    if row['number_of_reviews'] < 1:\n        val = 'None'\n    elif row['number_of_reviews'] < 5:\n        val = 'Low'\n    elif row['number_of_reviews'] < 24:\n        val = 'High'\n    else:\n        val = 'Very High'\n    return val\n\nairbnb['review_group'] = airbnb.apply(reviews_group, axis=1)","26df63fe":"airbnb['total_revenue'] = airbnb.price * airbnb.number_of_reviews *airbnb.minimum_nights","e5474333":"stopwords = set(STOPWORDS)\nstopwords.update('NEW','YORK','York','room','Bedroom')\ntext = airbnb[(airbnb.price_group == 'Very High')| (airbnb.price_group =='High')].new_name.values\nwordcloud = WordCloud(stopwords = stopwords,max_words = 100,max_font_size = 100,min_font_size = 10,height = 600, width = 1000 ).generate(str(text))\nfig = plt.figure()\nplt.imshow(wordcloud, interpolation = 'bilinear')\nplt.axis('off')\nplt.tight_layout(pad=0)\nplt.show()","e450a2dc":"stopwords = set(STOPWORDS)\nstopwords.update('NEW','YORK','York','room','Bedroom')\ntext = airbnb[(airbnb.price_group == 'Very Low')].new_name.values\nwordcloud = WordCloud(stopwords = stopwords,max_words = 100,max_font_size = 100,min_font_size = 10,height = 600, width = 1000 ).generate(str(text))\nfig = plt.figure()\nplt.imshow(wordcloud, interpolation = 'bilinear')\nplt.axis('off')\nplt.tight_layout(pad=0)\nplt.show()","5be73ab7":"\nfig,(ax1,ax2)=plt.subplots(1,2,figsize=(10,5))\ntweet_len=airbnb[airbnb['price_group'] == 'Very High']['name'].str.len()\nax1.hist(tweet_len,color='blue')\nax1.set_title('Pricey Listings')\ntweet_len=airbnb[airbnb['price_group'] == 'Very Low']['name'].str.len()\nax2.hist(tweet_len,color='green')\nax2.set_title('Cheap listings')\nfig.suptitle('Characters in the description')\nplt.show()","a19bf7fa":"Lovely ,spacious,furnished and Sunny stand out.Now that we've found the most common unigrams. Let's look at a distribution of the number of characters in the description.","5e270294":"> 'name','host_name','last_review' and 'reviews_per_month' have null values. It makes sense to replace these with 0. Also, I dont think i need the column 'last_review'. So let's drop that.","d10ec025":"> The most popular type of listing is 'Entire home\/apt'. Let's see which neighbourhood has the most listings in Manhattan and in Brooklyn.Interestingly, Brooklyn has more private rooms listed than Entire apartments.","a2679064":"> Brooklyn has the most listings in Williamsburg. Bedford-Stuyvesant is not far behind. Manhattan has the most listings in Harlem. It appears that most of Brooklyn's listings are concentrated in Williamsburg and Bedford-Stuyvesant. Whereas Manhattan's listings seem to be distributed quite evenly amongst the top 5 neighbourhoods.Next, Let's look at a distribution of the price by borough.","4ae0e344":"> Castle,Skylit , Midtown,heart,Clean and Village pop out.","fc335b75":"Let's create a similar grouping for the number_of_reviews variable.","b925ac45":"> The top host has more than 300 listings to his name. Let's try to investigate the reason for his popularity. Let's see if we can extract some insights from the descriptions of the airbnbs. Do they impact revenue ? First, let's standardize all the text by converting it to lower case letters.","13f727cc":"> Much better. As expected, Manhattan has the highest range of prices. Queens,Staten Island and the Bronx follow a similar distribution. Most listings in these boroughs are priced between 40 and 70. Manhattan's median price appears to be around 150 and most of the listings are priced atleast around 100 per night. I'm guessing that a majority of these listings are in Harlem.Let's identify Manhattan's and Brooklyn's priciest neighbourhoods.Keep in mind that price varies by the size of the apartment , number of rooms ,amenities etc. So, the average price would not be an exact representation of the landscape. Since outliers can heavily skew the distribution , I've only considered prices below 700 and greater than 0. ","8861651e":"> The most expensive neighbourhoods in Manhattan and Brooklyn are Tribeca and Vinegar Hill. Vinegar Hill and DUMBO have similar prices. This makes sense as these neighbourhoods are right next to each other.Let's look at the hosts with the most number of listings.","156c39d6":"Let's also create a total revenue variable. Total revenue = price X minimum no of nights X number of reviews","bb214914":"> As expected, Manhattan has the most number of listings, followed closely by Brooklyn.Staten Island and Bronx do not seem to be very popular on airbnb.Let's check to see if there are any missing values.","0b569569":"> Quiet ,clean ,home and apt pop out of this word cloud. Let's see what pops out if we only include the pricey airbnbs. First let's create a new column in the dataframe called price_group.How do we determine if a price is a high or low? Let's check the percentile distributions.","3623a263":"Let's look at the word cloud for pricey apartments and for the cheapest apartments. But before we do, let's clean up the data a little bit.","07d573d7":"> There seem to be outliers in the data.Let's only look at listings where price < 700.","86d79470":"30 - 50 characters seems to be the most common in both categories. "}}