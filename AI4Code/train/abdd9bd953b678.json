{"cell_type":{"ca3dc252":"code","49a62f0c":"code","0d876577":"code","246d6676":"code","e08c80a9":"code","9664e80f":"code","8e04b8b2":"code","f6c4cb19":"code","bb30acd9":"code","64d67b1d":"code","ff7a8415":"code","8a28e5b3":"code","8d938007":"code","4daecfcb":"code","2eac7819":"code","700608c2":"code","a398dd04":"markdown","5c798e5e":"markdown","41e140d0":"markdown","de3bdda3":"markdown","d7950f19":"markdown","89694839":"markdown","e1178c7f":"markdown","37a1fcf9":"markdown","b7075688":"markdown","a86eb476":"markdown","bd8c981b":"markdown"},"source":{"ca3dc252":"import pandas as pd\nimport matplotlib.pyplot as plt\nimport seaborn as sn\nimport numpy as np\n\n\nsn.set_style('darkgrid')\n%matplotlib notebook","49a62f0c":"df = pd.read_csv('..\/input\/covid19-brasil-04122020\/caso_full.csv')\ndf","0d876577":"last_dates = df[df['place_type'] == 'state'].groupby('state')['last_available_date'].max()\nlast_dates","246d6676":"last_dates['RJ']","e08c80a9":"states = (df[(df['place_type'] == 'state')].sort_values(by='last_available_date')\n                                           .drop_duplicates(subset='state', keep='last'))\nstates.head()","9664e80f":"states = states[['state',\n                 'estimated_population', \n                 'last_available_confirmed', \n                 'last_available_confirmed_per_100k_inhabitants', \n                 'last_available_death_rate', \n                 'last_available_deaths']].set_index('state')\nstates","8e04b8b2":"initials = {'AC': 'Acre',\n            'AL': 'Alagoas',\n            'AP': 'Amap\u00e1',\n            'AM': 'Amazonas',\n            'BA': 'Bahia',\n            'CE': 'Cear\u00e1',\n            'DF': 'Distrito Federal',\n            'ES': 'Esp\u00edrito Santo',\n            'GO': 'Goi\u00e1s',\n            'MA': 'Maranh\u00e3o',\n            'MT': 'Mato Grosso',\n            'MS': 'Mato Grosso do Sul',\n            'MG': 'Minas Gerais',\n            'PA': 'Par\u00e1',\n            'PB': 'Para\u00edba',\n            'PR': 'Paran\u00e1',\n            'PE': 'Pernambuco',\n            'PI': 'Piau\u00ed',\n            'RJ': 'Rio de Janeiro',\n            'RN': 'Rio Grande do Norte',\n            'RS': 'Rio Grande do Sul',\n            'RO': 'Rond\u00f4nia',\n            'RR': 'Roraima',\n            'SC': 'Santa Catarina',\n            'SP': 'S\u00e3o Paulo',\n            'SE': 'Sergipe',\n            'TO': 'Tocantins'}","f6c4cb19":"states.rename(index=initials, inplace=True)\nstates","bb30acd9":"states_data = pd.read_csv('..\/input\/dados-demogrficos\/states.csv').set_index('state')\nstates_data","64d67b1d":"states = states.merge(states_data, how='left', left_index=True, right_index=True)\nstates.head()","ff7a8415":"states['PIB(R$ 1.000) per capita'] = states['PIB(R$ 1.000)']\/states['estimated_population']\nstates['Trabalhadores na ind\u00fastria per capita (2019)'] = states['N\u00famero de trabalhadores na ind\u00fastria (2019)']\/states['estimated_population']","8a28e5b3":"regions = {\n    'Acre': 'Norte',\n    'Alagoas': 'Nordeste',\n    'Amap\u00e1': 'Norte',\n    'Amazonas': 'Norte',\n    'Bahia': 'Nordeste',\n    'Cear\u00e1': 'Nordeste',\n    'Distrito Federal': 'Distrito Federal',\n    'Esp\u00edrito Santo': 'Sudeste',\n    'Goi\u00e1s': 'Centro-Oeste',\n    'Maranh\u00e3o': 'Nordeste',\n    'Mato Grosso': 'Centro-Oeste',\n    'Mato Grosso do Sul': 'Centro-Oeste',\n    'Minas Gerais': 'Sudeste',\n    'Par\u00e1': 'Norte',\n    'Para\u00edba': 'Nordeste',\n    'Paran\u00e1': 'Sul',\n    'Pernambuco': 'Nordeste',\n    'Piau\u00ed': 'Nordeste',\n    'Rio de Janeiro': 'Sudeste',\n    'Rio Grande do Norte': 'Nordeste',\n    'Rio Grande do Sul': 'Sul',\n    'Rond\u00f4nia': 'Norte',\n    'Roraima': 'Norte',\n    'Santa Catarina': 'Sul',\n    'S\u00e3o Paulo': 'Sudeste',\n    'Sergipe': 'Nordeste',\n    'Tocantins': 'Norte'\n}\n\nstates['Regi\u00e3o'] = pd.Series(regions)\nstates.head()","8d938007":"rename = {\n    'last_available_confirmed_per_100k_inhabitants': 'Casos confirmados por 100k hab.',\n    'last_available_death_rate': 'Taxa de mortes por caso confirmado',\n    'PIB(R$ 1.000) per capita': 'PIB(R$ 1.000) per capita (2018)',\n    'Nota IDEB 2019 (terceiro ano EM)': 'Nota IDEB 3\u00ba ano EM (2019)'\n}\n\nstates.rename(columns=rename, inplace=True)\nstates.head()","4daecfcb":"x_vars = ['Nota IDEB 3\u00ba ano EM (2019)', \n          'Trabalhadores na ind\u00fastria per capita (2019)',\n          'PIB(R$ 1.000) per capita (2018)']\n\ny_vars = ['Casos confirmados por 100k hab.', 'Taxa de mortes por caso confirmado']","2eac7819":"from itertools import product\n\n\nprod = list(product(y_vars, x_vars))\nprod","700608c2":"from scipy.stats import pearsonr\n\n\nfig, ((ax1, ax2, ax3, ax7), (ax4, ax5, ax6, ax8)) = plt.subplots(2, 4, \n                                                                 sharex='col', \n                                                                 sharey='row', \n                                                                 figsize=(10,6), \n                                                                 gridspec_kw={'width_ratios': [3,3,3,0.4]})\naxes = [ax1, ax2, ax3, ax4, ax5, ax6]\n\nfor ax in [ax7, ax8]:\n    ax.set_facecolor('white')\n    ax.grid(False)\n    ax.set_xticks([])\n\ngroups = states.groupby('Regi\u00e3o')\nfor ax, y, x in zip(axes, *zip(*prod)):\n    for region, group in groups:\n        ax.plot(group[x], \n                group[y], \n                marker='o', \n                linestyle='', \n                label=region,\n                alpha=0.75)\n        \n    ax.set_title('Corr = {:.3f}'.format(pearsonr(states[x], states[y])[0]))\n        \n\nax1.set_ylabel('Casos confirmados\\npor 100k hab.')\nax4.set_ylabel('Taxa de mortes por\\ncaso confirmado')\nax4.set_xlabel('Nota IDEB\\n3\u00ba ano EM (2019)')\nax5.set_xlabel('Trabalhadores na ind\u00fastria\\nper capita (2019)')\nax6.set_xlabel('PIB(R$ 1.000)\\nper capita (2018)')\n\nax4.set_xticks(np.arange(3.3, 5.3, 0.4))\n        \nhandles, labels = ax1.get_legend_handles_labels()\nfig.legend(handles, labels, loc='center right', title='Regi\u00e3o', frameon=False)\nfig.suptitle('COVID-19 no Brasil em rela\u00e7\u00e3o a fatores demogr\u00e1ficos por estado\\n(dados de 04\/12\/2020)', fontsize=11);\n\nplt.show();\nplt.savefig('covid.png');","a398dd04":"Agora, importaremos os dados demogr\u00e1ficos e os trataremos.","5c798e5e":"Em seguida, faremos o pr\u00e9-processamento necess\u00e1rio para obtermos os dados mais recentes para cada estado.","41e140d0":"Finalmente, plotaremos as dispers\u00f5es dos dados Casos confirmados por 100k hab. e Taxa de mortes por caso confirmado contra Nota IDEB 3\u00ba ano EM (2019), Trabalhadores na ind\u00fastria per capita (2019) e PIB(R$ 1.000) per capita (2018). Calcularemos tamb\u00e9m as respectivas correla\u00e7\u00f5es para termos uma ideia da influ\u00eancia de cada um desses fatores na forma como se espalha o COVID-19.","de3bdda3":"Ao contr\u00e1rio do que n\u00f3s esper\u00e1vamos, os fatores demogr\u00e1ficos analisados parecem n\u00e3o exercer grande influ\u00eancia nem sobre a quantidade de casos nem sobre a quantidade de mortes para o COVID-19. Correla\u00e7\u00f5es na faixa de $\\pm$0.2 s\u00e3o consideradas baixas.\n\nPodemos notar que existem alguns estados *outliers* tanto em taxa de mortes quanto em quantidade de casos. Prevemos que essas anomalias, n\u00e3o explicadas pelos fatores que analisamos, se devam a quantidade de testes elevada (para quantidade de casos) ou reduzida (para taxa de mortes).\n\nPortanto, conclu\u00edmos que o COVID-19 se espalha de forma independente dos fatores demogr\u00e1ficos que escolhemos analisar. Sugerimos, ainda assim, que an\u00e1lises mais complexas, que levem em conta taxa de urbaniza\u00e7\u00e3o e infraestrutura, e que analisem espa\u00e7os menores (como cidades ou at\u00e9 mesmo bairros) possam encontrar resultados mais expressivos.","d7950f19":"## Visualiza\u00e7\u00e3o","89694839":"# An\u00e1lise do Impacto de fatores demogr\u00e1ficos no espalhamento do COVID-19\n\n\nTrabalho da disciplina de Laborat\u00f3rio de Programa\u00e7\u00e3o do meu curso de Engenharia da Computa\u00e7\u00e3o. Feito em dupla com Pedro Martins.","e1178c7f":"## Pr\u00e9-processamento","37a1fcf9":"## An\u00e1lise","b7075688":"Inicialmente, importaremos os dados do [arquivo em csv](https:\/\/data.brasil.io\/dataset\/covid19\/caso.csv.gz) baixado do website fornecido no dia 04\/12\/2020.","a86eb476":"## Introdu\u00e7\u00e3o","bd8c981b":"Utilizando o dataset de [casos de COVID-19 no Brasil](https:\/\/brasil.io\/dataset\/covid19\/caso_full\/), faremos uma an\u00e1lise da quantidade de casos e mortes por estado de acordo com fatores demogr\u00e1ficos. Escolhemos os fatores Educa\u00e7\u00e3o, Industrializa\u00e7\u00e3o e PIB de cada estado para comparar com os casos. Esses dados foram extra\u00eddos da [Wikipedia](https:\/\/www.wikipedia.org\/)."}}