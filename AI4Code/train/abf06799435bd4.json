{"cell_type":{"36b6f773":"code","a3877a45":"code","9bf510a9":"code","1530e4e4":"code","ed7a17b2":"code","c638f777":"code","c54fd66f":"code","69ab16cd":"code","4558925f":"code","c198c525":"code","247ca900":"code","fdccdd3a":"code","d88b8eab":"code","1cbbf950":"code","1b3292f7":"code","7e5e74d3":"code","29c37783":"code","1a6270b6":"code","109f2ddc":"code","fb981081":"code","047aee33":"code","13d9b0ca":"markdown","bba66918":"markdown","bdb83c1d":"markdown","9b83f10c":"markdown","b55c2fb6":"markdown","2cfdc602":"markdown"},"source":{"36b6f773":"# This Python 3 environment comes with many helpful analytics libraries installed\n# It is defined by the kaggle\/python Docker image: https:\/\/github.com\/kaggle\/docker-python\n# For example, here's several helpful packages to load\n\nimport numpy as np # linear algebra\nimport pandas as pd # data processing, CSV file I\/O (e.g. pd.read_csv)\n\n# Input data files are available in the read-only \"..\/input\/\" directory\n# For example, running this (by clicking run or pressing Shift+Enter) will list all files under the input directory\n\nimport os\nfor dirname, _, filenames in os.walk('\/kaggle\/input'):\n    for filename in filenames:\n        print(os.path.join(dirname, filename))\n\n# You can write up to 20GB to the current directory (\/kaggle\/working\/) that gets preserved as output when you create a version using \"Save & Run All\" \n# You can also write temporary files to \/kaggle\/temp\/, but they won't be saved outside of the current session","a3877a45":"df1=pd.read_csv(\"\/kaggle\/input\/ipl-complete-dataset-20082020\/IPL Matches 2008-2020.csv\")\ndf1.head()","9bf510a9":"df2=pd.read_csv(\"\/kaggle\/input\/ipl-complete-dataset-20082020\/IPL Ball-by-Ball 2008-2020.csv\")\ndf2.head()","1530e4e4":"# We need two dataframes one is for whole tournament and other is for year 2020\n# Merge df1 and df2(onle two columns(id,date)) on 'id'\ndata = pd.merge(df2, df1[['id','date']], on='id',how='left')\n\n# Extract year from date column\ndata['year'] = pd.to_datetime(data['date']).dt.year\ndata.drop('date',axis=1,inplace=True)\n\n# This dataframe is only for year 2020\nseason_2020 = data[data['year']==2020]\n# This is basically copy of df2 because it contains data of whole tournament\ntournament = df2.copy()","ed7a17b2":"# It finds bat_score according to point system mentioned above.\ndef batsman_score(x):\n    x[\"bat_score\"]=1*x[\"runs\"]+1*x[\"fours\"]+2*x[\"sixes\"]+4*x[\"thirty\"]+8*x[\"fifty\"]+16*x[\"century\"]\n    return x\n\ndef get_bat_stats(df):\n    # Initialize batting dataframe.\n    batting_df = pd.DataFrame(columns=[\"player\",\"runs\",\"fours\",\"sixes\",\"thirty\",\"fifty\",\"century\"])\n\n    # Let's use groupby function. Our aim is to find batting score so we'll group our data by batsman.\n    for player,details in df.groupby(\"batsman\"):\n        total_runs = sum(details[\"batsman_runs\"])\n\n        # If batsman_runs is 4 then we count it as four.\n        fours=0\n        try:\n            fours=details[\"batsman_runs\"].value_counts()[4]\n        except:\n            fours=0      \n\n        # If batsman_runs is 6 then we count it as six.\n        sixes=0\n        try:\n            sixes=details[\"batsman_runs\"].value_counts()[6]\n        except:\n            sixes=0 \n\n        thirty=0\n        fifty=0\n        century=0\n\n        # To find thirty, fifty, century of the player we need to group our dataframe(details) by match id.\n        for match,match_details in details.groupby(\"id\"):\n\n            # Find total score of the player by sum up total runs.\n            match_score = sum(match_details[\"batsman_runs\"])\n\n            # Accourding to match_score this count thirties, fifties, centuries.\n            if match_score>=100:\n                century+=1\n            elif match_score>=50:\n                fifty+=1\n            elif match_score>=30:\n                thirty+=1\n\n        # Store all the data into batting dataframe.\n        batting_df = batting_df.append({\"player\":player,\"runs\":total_runs,\"fours\":fours,\"sixes\":sixes,\"thirty\":thirty,\"fifty\":fifty,\"century\":century},ignore_index=True)\n    \n    # To find bat_score we apply batsman_score function\n    batting_df=batting_df.apply(batsman_score,axis=1)\n    return batting_df","c638f777":"# Same as bat_score here we find bowl_score through point system mentioned above.\ndef bowler_score(x):\n    x[\"bowl_score\"]=25*x[\"wickets\"]+8*x[\"lbw_or_bowled\"]+4*x[\"three_wickets\"]+8*x[\"four_wickets\"]+16*x[\"five_wickets\"]\n    return x\n\ndef get_bowl_stats(df):\n    # Initialize bowling dataframe.\n    bowling_df = pd.DataFrame(columns=[\"player\",\"wickets\",\"lbw_or_bowled\",\"three_wickets\",\"four_wickets\",\"five_wickets\"])\n\n    # Let's use groupby function. Our aim is to find bowling score so we'll group our data by bowler.\n    for player,details in df.groupby(\"bowler\"):\n\n        # It finds the length of dataframe where dismissal kind is either lbw or bowled\n        lbw_or_bowled=len(details.query('dismissal_kind == \"lbw\" or dismissal_kind == \"bowled\"'))\n\n        total_wickets=0\n        three_wickets=0\n        four_wickets=0\n        fifer=0\n\n        # To find three wicket haul, four wicket haul and five wicket haul we should group dataframe(details) again by match id.\n        for match,match_details in details.groupby(\"id\"):\n            wickets = len(match_details.query('dismissal_kind in [\"caught\",\"bowled\",\"lbw\",\"stumped\",\"caught and bowled\"]'))\n            if wickets>=3:\n                three_wickets+=1\n            elif wickets>=4:\n                four_wickets+=1\n            elif wickets>=5:\n                fifer+=1\n            # Need to add every match wickets into total_wickets to find total wickets of bowler.\n            total_wickets+=wickets\n\n        # Store all the data into bowling dataframe.\n        bowling_df = bowling_df.append({\"player\":player,\"wickets\":total_wickets,\"lbw_or_bowled\":lbw_or_bowled,\"three_wickets\":three_wickets,\"four_wickets\":four_wickets,\"five_wickets\":fifer},ignore_index=True)\n        \n    # To find bowl_score we apply bowler_score function.\n    bowling_df=bowling_df.apply(bowler_score,axis=1) \n    return bowling_df","c54fd66f":"def get_wicketkeepers(df):\n    # Let's find out wicketkeepers from this dataset. To achieve this we'll check dismissal kind, if it is stumpout then store such fielders name into list\n    return list(df.query('dismissal_kind == \"stumped\"')['fielder'].unique())","69ab16cd":"batsmen_tournament = get_bat_stats(tournament)\nbatsmen_tournament.head()","4558925f":"bowlers_tournament = get_bowl_stats(tournament)\nbowlers_tournament.head()","c198c525":"merged_data_tournament = pd.merge(batsmen_tournament,bowlers_tournament,on=\"player\",how=\"outer\").fillna(0)\nmerged_data_tournament.head()","247ca900":"# Find allrounder score\nmerged_data_tournament['allrounder_score']=(merged_data_tournament['bat_score']*merged_data_tournament['bowl_score'])\/1000\nmerged_data_tournament.head()","fdccdd3a":"wicketkeeper_tournament = get_wicketkeepers(tournament)","d88b8eab":"# According to score in particular role we sort data and store players name into dictionary. This dictonary contains players name and players role.\ntotal_batsmen = 4\ntotal_bowlers = 3\ntotal_allrounders = 3\ntotal_wicketkeepers = 1\nplaying_XI_tournament = {}\n\nplaying_XI_tournament['BAT'] = merged_data_tournament.sort_values(by=\"bat_score\",ascending=False).head(total_batsmen)['player'].to_list()\nplaying_XI_tournament['WK'] = merged_data_tournament.query('player in @wicketkeeper_tournament').sort_values(by=\"bat_score\",ascending=False).head(total_wicketkeepers)['player'].to_list()\nplaying_XI_tournament['AR'] = merged_data_tournament.sort_values(by=\"allrounder_score\",ascending=False).head(total_allrounders)['player'].to_list()\nplaying_XI_tournament['BWL'] = merged_data_tournament.sort_values(by=\"bowl_score\",ascending=False).head(total_bowlers)['player'].to_list()","1cbbf950":"print('Fantasy dream team for the whole tournament\\n')\nfor player_role,players in playing_XI_tournament.items():\n    for player in players:\n        print(\"{:15} {}\".format(player,player_role))","1b3292f7":"batsmen_2020 = get_bat_stats(season_2020)\nbatsmen_2020.head()","7e5e74d3":"bowlers_2020 = get_bowl_stats(season_2020)\nbowlers_2020.head()","29c37783":"merged_data_2020 = pd.merge(batsmen_2020,bowlers_2020,on=\"player\",how=\"outer\").fillna(0)\nmerged_data_2020.head()","1a6270b6":"# Find allrounder score\nmerged_data_2020['allrounder_score']=(merged_data_2020['bat_score']*merged_data_2020['bowl_score'])\/1000\nmerged_data_2020.head()","109f2ddc":"wicketkeeper_2020 = get_wicketkeepers(season_2020)","fb981081":"# According to score in particular role we sort data and store players name into dictionary. This dictonary contains players name and players role.\ntotal_batsmen = 4\ntotal_bowlers = 3\ntotal_allrounders = 3\ntotal_wicketkeepers = 1\nplaying_XI_2020 = {}\n\nplaying_XI_2020['BAT'] = merged_data_2020.sort_values(by=\"bat_score\",ascending=False).head(total_batsmen)['player'].to_list()\nplaying_XI_2020['WK'] = merged_data_2020.query('player in @wicketkeeper_2020').sort_values(by=\"bat_score\",ascending=False).head(total_wicketkeepers)['player'].to_list()\nplaying_XI_2020['AR'] = merged_data_2020.sort_values(by=\"allrounder_score\",ascending=False).head(total_allrounders)['player'].to_list()\nplaying_XI_2020['BWL'] = merged_data_2020.sort_values(by=\"bowl_score\",ascending=False).head(total_bowlers)['player'].to_list()","047aee33":"print('Fantasy dream team for season 2020\\n')\nfor player_role,players in playing_XI_2020.items():\n    for player in players:\n        print(\"{:15} {}\".format(player,player_role))","13d9b0ca":"**Our Dream11 team will have different combinations of players...**\n\n**Batsman (BAT) - 4**\n\n**Wicket Keeper (WK) - 1**\n\n**All Rounder (AR) - 3**\n\n**Bowler (BWL) - 3**","bba66918":"# **For Season 2020**","bdb83c1d":"# **For whole Tournament**","9b83f10c":"# ****Bowling Points****\n\n **Wicket                  -> +25**\n \n **Bonus (LBW \/ Bowled)    -> +8**\n \n **3 Wicket Bonus          -> +4**\n \n **4 Wicket Bonus          -> +8**\n \n **5 Wicket Bonus          -> +16**","b55c2fb6":"<font size=\"+3\" color=red><b> <center><u> Fantasy IPL Dream Team\ud83c\udfcf for whole tournament and season 2020 <\/u><\/center><\/b><\/font>","2cfdc602":"# ****Batting Points****\n\n **Run                       -> +1**\n \n **Boundary Bonus            -> +1**\n \n **Six Bonus                 -> +2**\n \n **30 Run Bonus              -> +4**\n \n **Half-century Bonus        -> +8**\n \n **Century Bonus             -> +16**"}}