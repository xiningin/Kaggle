{"cell_type":{"2c1e9b23":"code","8ced110e":"code","5bf91c63":"code","adfe1504":"code","60afa68d":"code","55fef052":"code","69227f0f":"code","7862e186":"code","007caab1":"code","f2fd5fa1":"code","ff73919d":"code","c1ece573":"code","91274e14":"code","5084eb5a":"code","c7ad9ccc":"code","d297a93f":"code","6866e91a":"markdown","d09010a2":"markdown","b89a752d":"markdown","9113efee":"markdown","08fc95c8":"markdown","3c16ecd9":"markdown","e0c3d0f6":"markdown","ccfbd735":"markdown","7185f56f":"markdown","86f95ca8":"markdown","016d2a07":"markdown","9560d229":"markdown"},"source":{"2c1e9b23":"import pandas as pd\nimport matplotlib.pyplot as plt","8ced110e":"#Load all the CSV files and create dataframes\ncsv1=pd.read_csv('..\/input\/european-union-lgbt-survey-2012\/LGBT_Survey_DailyLife.csv')\ncsv2=pd.read_csv('..\/input\/european-union-lgbt-survey-2012\/LGBT_Survey_Discrimination.csv')\ncsv3=pd.read_csv('..\/input\/european-union-lgbt-survey-2012\/LGBT_Survey_RightsAwareness.csv')\ncsv4=pd.read_csv('..\/input\/european-union-lgbt-survey-2012\/LGBT_Survey_TransgenderSpecificQuestions.csv')\ncsv5=pd.read_csv('..\/input\/european-union-lgbt-survey-2012\/LGBT_Survey_ViolenceAndHarassment.csv')\nsubset=pd.read_csv('..\/input\/european-union-lgbt-survey-2012\/LGBT_Survey_SubsetSize.csv')","5bf91c63":"print(subset.head())","adfe1504":"print(subset.info())","60afa68d":"# having our X and Y for Bar & Pie chart ready\nlables = subset.columns\nlables=lables[2:]\nvalues=subset.iloc[0]\nvalues=values[2:]\n\n# plotting a figure\nfig=plt.figure()\nfig.set_figheight(4)\nfig.set_figwidth(10)\n\n# Figure A is for bar graph\na_fig=fig.add_subplot(1,2,1)\nl1=plt.bar(lables, values)\nl1[1].set_color('r')\nplt.xticks(fontsize=7, rotation=30)\nplt.xlabel('LGBT Groups')\nplt.ylabel('Total Number of people')\nplt.title('LGBT Metadata',fontsize=15)\n\n# Figure B is for pie chat\nb_fig=fig.add_subplot(1,2,2)\nexplode=(0,0.2,0,0,0)\nplt.pie(values,labels=lables,shadow=True, startangle=90,explode=explode)\nplt.title('LGBT Metadata',fontsize=15)\n","55fef052":"gay_countries=subset.groupby('CountryID').agg({'Gay men':'sum'})\ntop_10_gay_countries=gay_countries.sort_values('Gay men',ascending=False).head(11)\ntop_10_gay_countries=top_10_gay_countries.reset_index()\ntop_10_gay_x=top_10_gay_countries['CountryID'][1:]\ntop_10_gay_y=top_10_gay_countries['Gay men'][1:]\n\nfig1=plt.figure()\nfig1.set_figheight(4)\nfig1.set_figwidth(10)\n\na_fig1=fig1.add_subplot(1,2,1)\nl2=plt.bar(top_10_gay_x,top_10_gay_y)\nl2[0].set_color('r')\nplt.xticks(rotation=30,fontsize=10)\nplt.xlabel('Top 10 Gay Populated EU Countries')\nplt.ylabel('NO of Gay men')\nplt.title('Gay Men Countries', fontsize=15)\n\nb_fig1=fig1.add_subplot(1,2,2)\nexplode=(0.2,0.1,0.1,0.1,0.1,0.1,0.1,0.1,0.1,0.1)\nplt.pie(top_10_gay_y,labels=top_10_gay_x,shadow=True,explode=explode)\nplt.title('Gay Men Countries', fontsize=15)","69227f0f":"lesbian_women=subset.groupby('CountryID').agg({'Lesbian women':'sum'})\ntop_10_lesbian_countries=lesbian_women.sort_values('Lesbian women',ascending=False).head(11)\ntop_10_lesbian_countries=top_10_lesbian_countries.reset_index()\ntop_10_lesbian_x=top_10_lesbian_countries['CountryID'][1:]\ntop_10_lesbian_y=top_10_lesbian_countries['Lesbian women'][1:]\n\nfig2=plt.figure()\nfig2.set_figheight(4)\nfig2.set_figwidth(10)\n\na_fig2=fig2.add_subplot(1,2,1)\nl3=plt.bar(top_10_lesbian_x,top_10_lesbian_y)\nl3[0].set_color('r')\nplt.xticks(rotation=30,fontsize=10)\nplt.xlabel('Top 10 Lesbian Populated EU Countries')\nplt.ylabel('NO of Lesbian Women')\nplt.title('Lesbian Women Countries', fontsize=15)\n\nb_fig2=fig2.add_subplot(1,2,2)\nexplode=(0.2,0.1,0.1,0.1,0.1,0.1,0.1,0.1,0.1,0.1)\nplt.pie(top_10_lesbian_y,labels=top_10_lesbian_x,shadow=True,explode=explode)\nplt.title('Lesbian Women Countries', fontsize=15)","7862e186":"transgender=subset.groupby('CountryID').agg({'Transgender':'sum'})\ntop_10_ts_countries=transgender.sort_values('Transgender',ascending=False).head(11)\ntop_10_ts_countries=top_10_ts_countries.reset_index()\ntop_10_ts_x=top_10_ts_countries['CountryID'][1:]\ntop_10_ts_y=top_10_ts_countries['Transgender'][1:]\n\nfig3=plt.figure()\nfig3.set_figheight(4)\nfig3.set_figwidth(10)\n\na_fig3=fig3.add_subplot(1,2,1)\nl4=plt.bar(top_10_ts_x,top_10_ts_y)\nl4[0].set_color('r')\nplt.xticks(rotation=30,fontsize=10)\nplt.xlabel('Top 10 Transgender Populated EU Countries')\nplt.ylabel('NO of Transgender Women')\nplt.title('Transgender Countries', fontsize=15)\n\nb_fig3=fig3.add_subplot(1,2,2)\nexplode=(0.2,0.1,0.1,0.1,0.1,0.1,0.1,0.1,0.1,0.1)\nplt.pie(top_10_ts_y,labels=top_10_ts_x,shadow=True,explode=explode)\nplt.title('Transgender', fontsize=15)","007caab1":"LGBT=subset.groupby('CountryID').agg({'N':'sum'})\ntop_10_LGBT_countries=LGBT.sort_values('N',ascending=False).head(11)\ntop_10_LGBT_countries=top_10_LGBT_countries.reset_index()\ntop_10_LGBT_x=top_10_LGBT_countries['CountryID'][1:]\ntop_10_LGBT_y=top_10_LGBT_countries['N'][1:]\n\nfig4=plt.figure()\nfig4.set_figheight(4)\nfig4.set_figwidth(10)\n\na_fig4=fig4.add_subplot(1,2,1)\nl5=plt.bar(top_10_LGBT_x,top_10_LGBT_y)\nl5[0].set_color('r')\nplt.xticks(rotation=30,fontsize=10)\nplt.xlabel('Top 10 LGBT Populated EU Countries')\nplt.ylabel('NO of LGBT')\nplt.title('LGBT Countries', fontsize=15)\n\nb_fig4=fig4.add_subplot(1,2,2)\nexplode=(0.2,0.1,0.1,0.1,0.1,0.1,0.1,0.1,0.1,0.1)\nplt.pie(top_10_LGBT_y,labels=top_10_LGBT_x,shadow=True,explode=explode)\nplt.title('LGBT', fontsize=15)","f2fd5fa1":"# Classifying all of the answers in to 3 classes, Widespread, rare and Dont know\nWidespread=['Strongly agree', 'Agree','Most', 'All', '6 times or more in the last six months','Always open','Fairly open',\n       'Very open','Very widespread', 'Fairly widespread','6','7','8','9','10','Yes' ]\n\nRare=['Fairly rare', 'Very rare','Disagree','Strongly disagree', 'No','None', 'A few','Never happened in the last sixth months',\n       'Happened only once in the last six months','2-5 times in the last six months','selectively open','Never Open', 'Rarely Open','0','1','2','3','4']\n\ndont_know=['Don`t know','I do not have a partner (Does not apply to me)','Single',\n       'Married\/in a registered partnership', 'Divorced', 'Separated',\n       'Widowed', 'Living together with a partner \/spouse',\n       'Involved in a relationship without living together',\n       'Have no relationship \/ do not have a partner',\n       'I did not need or use any benefits or services',\n       'An ethnic minority (including of migrant background)',\n       'A sexual minority',\n       'A minority in terms of disability (excluding diagnosis of gender dysphoria\/gender identity disorder)',\n       'A religious minority', 'Other minority group',\n       'None of the above',\n       'I read about it in a newspaper (online or printed)',\n       'I received an email from an organisation or online network',\n       'Somebody told me about it or sent me the link',\n       'Through social media (facebook, twitter or etc.)',\n       'I saw an advertisement (banner) online, please specify where:',\n       'Somewhere else', 'hide LGBT identity','5','Current situation is fine']\n\nQ1=csv1.loc[csv1['question_code']=='b1_a']\nQ1['answer_1']=''","ff73919d":"# lets analyse b1_a question response\nfor ix,val in enumerate(Q1.answer):\n    if Q1['answer'].iloc[ix] in Widespread :\n        Q1['answer_1'].iloc[ix]='Widespread'\n    if Q1['answer'].iloc[ix] in Rare :\n        Q1['answer_1'].iloc[ix]='Rare'\n    if Q1['answer'].iloc[ix] in dont_know :\n        Q1['answer_1'].iloc[ix]=\"Don`t know\"","c1ece573":"Q1=Q1.replace(':','0')\nQ1=Q1[['CountryCode','answer_1','subset','percentage']]\nQ1['percentage']=Q1['percentage'].astype(str).astype(int)\n\nB1_a_rare=Q1.loc[Q1['answer_1']=='Rare']\nB1_a_rare=B1_a_rare.groupby(['CountryCode','answer_1','subset'])['percentage'].sum()\nB1_a_rare=B1_a_rare.reset_index()\nB1_a_rare=B1_a_rare.sort_values('percentage',ascending=False).head(11)\nprint('These are the top 10 communities in the respective country feel that their politician is not abusive about LGBT')\nprint('\\t')\nprint(B1_a_rare)","91274e14":"B1_a_WS=Q1.loc[Q1['answer_1']=='Widespread']\nB1_a_WS=B1_a_WS.groupby(['CountryCode','answer_1','subset'])['percentage'].sum()\nB1_a_WS=B1_a_WS.reset_index()\nB1_a_WS=B1_a_WS.sort_values('percentage',ascending=False).head(10)\n\nprint('These are the top 10 communities in the respective country feel that their politicians are really verbal about LGBT')\nprint('\\t')\nprint(B1_a_WS)","5084eb5a":"B1_a_nu=Q1.loc[Q1['answer_1']==\"Don`t know\"]\nB1_a_nu=B1_a_nu.groupby(['CountryCode','answer_1','subset'])['percentage'].sum()\nB1_a_nu=B1_a_nu.reset_index()\nB1_a_nu=B1_a_nu.sort_values('percentage',ascending=False).head(10)\n\nprint('These are the top 10 communities in the respective countries who do not know what their politicians feel about LGBT')\nprint('\\t')\nprint(B1_a_nu)","c7ad9ccc":"# lets analyze what LGBT from Denmark feel\nB1_a_den=Q1.loc[Q1['CountryCode']==\"Denmark\"]\nB1_a_den=B1_a_den.groupby(['CountryCode','answer_1','subset'])['percentage'].sum()\nB1_a_den=B1_a_den.reset_index()\nB1_a_den=B1_a_den.sort_values('percentage',ascending=False)\n\nprint('This is what LGBT from Denmark says about their politicans')\nprint('\\t')\nprint(B1_a_den)","d297a93f":"# lets analyze what LGBT from UK feel\nB1_a_UK=Q1.loc[Q1['CountryCode']==\"United Kingdom\"]\nB1_a_UK=B1_a_UK.groupby(['CountryCode','answer_1','subset'])['percentage'].sum()\nB1_a_UK=B1_a_UK.reset_index()\nB1_a_UK=B1_a_UK.sort_values('percentage',ascending=False)\n\nprint('This is what LGBT from UK says about their politicans')\nprint('\\t')\nprint(B1_a_UK)","6866e91a":"**# there are no null values and all 7 columns look good to go further**","d09010a2":"# like wise we can do it for bisexual populatin as well\n\n\n\n\n","b89a752d":"# Top 3 LGBT friendly countries are France, Italy and France: ","9113efee":"# Below Analysis shows Denmark,England and Italy are having more Transgender population","08fc95c8":"# lets us understand how subset data looks","3c16ecd9":"likewise we can get into info for all other questionaries and countries.","e0c3d0f6":"# Below Analysis shows Denmark, Italy and France are having more Lesbian population","ccfbd735":"# Total number of L,G,B & T people in EU and the below graph shows Gay men are majority in the group","7185f56f":"# let us analyze and visualize the metadata and have simple bar graphs and pie chart for the mentioned data\n","86f95ca8":"# let us plot graphs for Gay Men category top 10 countries and below Analysis shows Denmark, Italy and France are having more gay population","016d2a07":"****# Seems Like Denmark, Italy and France are top 3 LGBT friendly Countries in Europe**","9560d229":"# lets analyse b1_a question response"}}