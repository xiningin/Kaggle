{"cell_type":{"058a78e4":"code","9d205e09":"code","60cb0488":"code","ad83ddb4":"code","1d3979b9":"code","4388a13a":"code","eb74fdda":"code","bc433b91":"code","a9837a5c":"code","2ca56a77":"code","e082f161":"code","70e5f8e0":"code","13640ed7":"code","56268b96":"code","0fe25b78":"code","b26d0498":"code","9bad0ab0":"code","f84d0cde":"code","791955d9":"code","7436e7da":"code","cd29e964":"code","50f3301c":"code","4b64408c":"code","75f9ab59":"code","93f59ae7":"markdown","740cca20":"markdown","8683c3f6":"markdown","2c0a27e7":"markdown","36b0576a":"markdown","128288e5":"markdown","04a8bdc6":"markdown","a8b06d8c":"markdown","f1a52f0b":"markdown","442e6fb8":"markdown","c40f5065":"markdown","e4613c01":"markdown","cf23f2d7":"markdown","3eefccc8":"markdown","2de9d785":"markdown","ab99b043":"markdown","215c25fd":"markdown","da66bd28":"markdown","c95556f5":"markdown","8d0da7af":"markdown"},"source":{"058a78e4":"import pandas as pd","9d205e09":"tweets = pd.read_csv('\/kaggle\/input\/pfizer-vaccine-tweets\/vaccination_tweets.csv')\n\nprint(f'Esse dataset tem {tweets.id.count()} valores')\n\n# Descartando a coluna id pois n\u00e3o nos importa nesse momento\ntweets = tweets.drop('id', axis=1)\n\ntweets[5:10]","60cb0488":"tweets.describe()","ad83ddb4":"tweets[tweets['user_followers']<3000].user_followers.plot.hist();","1d3979b9":"tweets[tweets['user_friends']<7000].user_friends.plot.hist();","4388a13a":"tweets[tweets['user_favourites']<50000].user_favourites.plot.hist();","eb74fdda":"tweets[tweets['retweets']<20].retweets.plot.hist();","bc433b91":"tweets[tweets['favorites']<100].favorites.plot.hist();","a9837a5c":"tweets[['retweets', 'user_followers', 'user_friends', 'user_favourites', 'favorites', 'user_verified']].corr()","2ca56a77":"tweets[tweets['retweets']<30][tweets['favorites']<100].plot.scatter(x='retweets', y='favorites');","e082f161":"tweets[tweets['user_friends']<3000][tweets['user_favourites']<3000].plot.scatter(x='user_friends', y='user_favourites');","70e5f8e0":"print(f'A informa\u00e7\u00e3o `user_created` vai de {tweets[\"user_created\"].min()} a {tweets[\"user_created\"].max()}.')","13640ed7":"tweets['user_created_datetime'] = pd.to_datetime(tweets.user_created)\ntweets['user_created_date'] = tweets['user_created_datetime'].dt.date\ntweets.groupby(['user_created_date']).count().text.plot.line(rot='45');","56268b96":"print(f'A informa\u00e7\u00e3o `date` vai de {tweets[\"date\"].min()} a {tweets[\"date\"].max()}.')","0fe25b78":"tweets['datetime'] = pd.to_datetime(tweets.date)\ntweets['year'] = tweets['datetime'].dt.year\ntweets['month'] = tweets['datetime'].dt.month\ntweets['hour'] = tweets['datetime'].dt.hour\ntweets['date'] = tweets['datetime'].dt.date\ntweets.groupby(['date']).count().text.plot.line(rot='45');","b26d0498":"tweets.groupby(['month', 'year']).count().sort_values(['year']).text.plot.line();","9bad0ab0":"tweets.groupby(['hour']).count().text.plot.line();","f84d0cde":"tweets.groupby('user_verified').count().plot.barh(y='text')","791955d9":"tweets.groupby('is_retweet').count().plot.barh(y='text')","7436e7da":"by_source = tweets.groupby('source').count()\nby_source[by_source['text'] > 10].sort_values('text').plot.barh(y='text');","cd29e964":"# separando texto com hastags em uma lista de hashtags\ntweets_with_hashtags = tweets[tweets.hashtags.notnull()]\ntweets_with_hashtags['hashtags_list'] = tweets_with_hashtags.hashtags.apply(lambda x: x[1:-1].split(','))","50f3301c":"# criando um dicion\u00e1rio com a hashtag e a quantidade de ocorr\u00eancias da mesma\ndict_hashtags = dict()\nfor tweet in tweets_with_hashtags.hashtags_list:\n    for hashtag in tweet:\n        hashtag = hashtag.strip()\n        if hashtag in dict_hashtags.keys():\n            dict_hashtags[hashtag] += 1\n        else:\n            dict_hashtags[hashtag] = 1\n\ndict_hashtags = sorted(dict_hashtags.items(), key=lambda x: x[1], reverse=True)\ndict_hashtags[:10]","4b64408c":"import matplotlib.pyplot as plt\n\nplt.bar(*zip(*dict_hashtags[:10]))\nplt.xticks(rotation = 45)\nplt.show();","75f9ab59":"from sklearn.feature_extraction import","93f59ae7":"# An\u00e1lise explorat\u00f3ria do dataset \"Pfizer Vaccine Tweets\"\nAqui eu apresento uma an\u00e1lise explorat\u00f3ria simples do dataset \"Pfizer Vaccine Tweets\" dispon\u00edvel na plataforma Kaggle (https:\/\/www.kaggle.com\/gpreda\/pfizer-vaccine-tweets), que cont\u00e9m diversos tweets com informa\u00e7\u00f5es complementares sobre os usu\u00e1rios respons\u00e1veis por esses tweets. Utilizei a linguagem python juntamente com a biblioteca pandas, cuja documenta\u00e7\u00e3o na internet \u00e9 bem explicativa e completa (Link para a documenta\u00e7\u00e3o: https:\/\/pandas.pydata.org\/pandas-docs\/stable\/index.html).","740cca20":"#### Analisando `date`\nComo podemos separar o campo `date` em ano, m\u00eas, dia e hor\u00e1rio de cria\u00e7\u00e3o do tweet, achei interessante analisarmos essa informa\u00e7\u00e3o de diferentes maneiras.","8683c3f6":"#### Analisando `source`\n`source` \u00e9 a coluna que carrega a informa\u00e7\u00e3o da plataforma de origem do tweet.\n\nCom o gr\u00e1fico abaixo podemos observar que as tr\u00eas plataformas mais comuns s\u00e3o, nessa ordem:\n- Twitter for iPhone\n- Twitter Web App\n- Twitter for Android","2c0a27e7":"## Carregando biblioteca e dados","36b0576a":"#### Analisando `user_verified`\nEssa coluna traz para n\u00f3s a informa\u00e7\u00e3o se o usu\u00e1rio \u00e9 verificado ou n\u00e3o. Ou seja, em caso de contas muito grandes ou de pessoas famosas, o Twitter verifica se aquela conta \u00e9 a oficial e a conta recebe um \"selo\" de verificada.\n\nNo gr\u00e1fico abaixo podemos observar que temos muito mais tweets de pessoas que n\u00e3o t\u00eam conta verificada, ou seja, contas geralmente com um menor alcance.","128288e5":"Uma observa\u00e7\u00e3o interessante \u00e9 que esses valores n\u00e3o necessariamente tem apenas um pico, como podemos observar no aumento da frequ\u00eancia de valores pr\u00f3ximos de 5000 `user_friends`.","04a8bdc6":"No terceiro e \u00faltimo gr\u00e1fico vemos um aumento consider\u00e1vel na quantidade de tweets entre 5h e 15h, sendo que o maior pico \u00e9 no fim da tarde e in\u00edcio da noite, com a quantidade de tweets decrescendo bruscamente a partir das 18h.","a8b06d8c":"No gr\u00e1fico acima observamos as top 10 hastags que mais aparecem no nosso dataset.\n\n#### Analisando `text`\nEssa \u00e9 a coluna mais importante do dataset. \u00c9 daqui que tiraremos as informa\u00e7\u00f5es que realmente queremos encontrar com a an\u00e1lise desse dataset: o que foi twitado sobre a vacina da Pfizer. Construi um pipeline de extra\u00e7\u00e3o de informa\u00e7\u00f5es utilizando a biblioteca scikit learn <https:\/\/scikit-learn.org> (ou sklearn).\n\nPara a extra\u00e7\u00e3o de informa\u00e7\u00e3o desse texto escolhi a ","f1a52f0b":"#### Analisando `is_retweet`\nAqui temos a informa\u00e7\u00e3o se o tweet \u00e9 um retweet, ou seja, um \"compartilhamento\" do tweet original. Todos os tweets do nosso dataset n\u00e3o s\u00e3o retweets.","442e6fb8":"## Descrevendo as colunas\nAqui observaremos informa\u00e7\u00f5es b\u00e1sicas como valor m\u00ednimo, m\u00e1ximo, m\u00e9dia, desvio padr\u00e3o e distribui\u00e7\u00e3o dos valores das colunas do dataset analisado.\n\nPara isso, abaixo utilizo o m\u00e9todo `describe()` da biblioteca pandas (Link da documenta\u00e7\u00e3o: https:\/\/pandas.pydata.org\/pandas-docs\/stable\/reference\/api\/pandas.DataFrame.describe.html).","c40f5065":"Com os dois gr\u00e1ficos imediatamente acima, esses tweets foram pouco retwitados e pouco favoritados no geral.","e4613c01":"Abaixo, imprimi gr\u00e1ficos do tipo histograma (https:\/\/pt.wikipedia.org\/wiki\/Histograma). Ele nos ajuda a entender a distribui\u00e7\u00e3o dos dados dispon\u00edveis dentre os valores daquela coluna. O mesmo poderia ser feito com o gr\u00e1fico kde (um bom link com explica\u00e7\u00e3o de kernel density estimation: https:\/\/mathisonian.github.io\/kde\/), por exemplo, que mostra basicamente um histograma discreto (considerando valores cont\u00ednuos, e n\u00e3o apenas inteiros). Nos gr\u00e1ficos abaixo temos, no eixo x, os valores da coluna selecionada e, no eixo y, a densidade (ou concentra\u00e7\u00e3o) de ocorr\u00eancias para cada valor no eixo x. Para o estudo de cada vari\u00e1vel, realizei um filtro que limita os dados aos valores onde temos maior concentra\u00e7\u00e3o de ocorr\u00eancias. Busquei realizar esse recorte em valores que est\u00e3o apenas acima do 3\u00ba quartil, assim garantimos que estamos olhando pra pelo menos 75% dos dados totais e removemos apenas os outliers mais distantes.\n\n- Documenta\u00e7\u00e3o histograma pandas: https:\/\/pandas.pydata.org\/pandas-docs\/stable\/reference\/api\/pandas.DataFrame.hist.html\n- Documenta\u00e7\u00e3o kde pandas: https:\/\/pandas.pydata.org\/pandas-docs\/stable\/reference\/api\/pandas.DataFrame.plot.kde.html\n\nNos histogramas abaixo podemos observar os \"picos\" de concentra\u00e7\u00e3o em determinados valores das colunas. Por exemplo, na coluna `user_followers` temos uma concentra\u00e7\u00e3o significativa de tweets cujas contas t\u00eam entre 0 e 250 seguidores, sofrendo uma queda brusca conforme o valor da quantidade de seguidores (eixo x) vai crescendo.","cf23f2d7":"### Analisando colunas n\u00e3o num\u00e9ricas\nAl\u00e9m das colunas num\u00e9ricas acima, temos tamb\u00e9m as colunas de data `user_created` e `date`, booleanas (True ou False) `user_verified` e `is_retweet` e a coluna categ\u00f3rica `source`.","3eefccc8":"### Analisando como as colunas se relacionam\nUma das formas, \u00e9 utilizando o m\u00e9todo `.corr()` do pandas (Link da documenta\u00e7\u00e3o: https:\/\/pandas.pydata.org\/pandas-docs\/stable\/reference\/api\/pandas.DataFrame.corr.html). \nEm uma r\u00e1pida explica\u00e7\u00e3o, esse m\u00e9todo devolve um n\u00famero de -1 a 1. Quanto mais pr\u00f3ximo das extremidades (-1 e 1), mais forte a correla\u00e7\u00e3o entre as duas colunas, podendo ela ser negativa, ou positiva, e, quanto mais pr\u00f3ximo de zero, mais fraca a correla\u00e7\u00e3o.\n\nNo snippet de c\u00f3digo abaixo, eu selecionei as colunas de n\u00famero, onde podemos rodar uma opera\u00e7\u00e3o de correla\u00e7\u00e3o entre elas.","2de9d785":"A distribui\u00e7\u00e3o dos nossos dados olhando para `date` nos mostra que a coleta dos dados selecionou tweets de dezembro de 2020 a fevereiro de 2021, sendo que o \u00fanico m\u00eas completo \u00e9 janeiro de 2021. Alerto tamb\u00e9m para o fato de que coletamos apenas 10 dias de dados no m\u00eas de fevereiro, por isso, no segundo gr\u00e1fico (quantidade de tweets por m\u00eas e ano) podemos observar uma queda t\u00e3o brusca na quantidade de tweets.","ab99b043":"A segunda correla\u00e7\u00e3o mais forte \u00e9 entre `user_verified` e `user_followers` (0.32).\n\nA terceira, \u00e9 entre `user_friends` e `user_favourites`, mas ela ainda \u00e9 meio fraca (0.21).\n\nAbaixo o gr\u00e1fico de pontos pode nos mostrar que os dados t\u00eam valores bem mais dispersos do que o que vimos no gr\u00e1fico entre `favorites` e `retweets` acima.","215c25fd":"#### Analisando `user_created`\nCom o gr\u00e1fico abaixo podemos verificar que `user_created` varia bastante e vai desde 2006 at\u00e9 2021 com uns picos de cria\u00e7\u00e3o, mas acredito que n\u00e3o utilizaremos muito essa informa\u00e7\u00e3o.","da66bd28":"### Analisando colunas textuais\nAs colunas `user_name`, `user_description`, `user_location`, `text` e `hashtags` s\u00e3o colunas que carregam informa\u00e7\u00f5es de \nQuando n\u00f3s, humanos, interpretamos textos, para conseguirmos entender o que est\u00e1 sendo dito precisamos ter pelo menos algum conhecimento do vocabul\u00e1rio utilizado e da rela\u00e7\u00e3o entre as palavras escritas.\nQuando tratamos de an\u00e1lise textual, estamos falando de dados agregados de uma forma n\u00e3o estruturada e com s\u00edmbolos (letras), que para um computador n\u00e3o t\u00eam o mesmo significado que para n\u00f3s. Para podermos realizar opera\u00e7\u00f5es como de an\u00e1lise de similaridade e de sentimento textual, precisamos transformar o nosso texto em matrizes num\u00e9ricas que carreguem informa\u00e7\u00f5es sobre o significado das palavras e o posicionamento delas no texto. Uma das abordagens \n\nAcredito que as colunas mais importantes s\u00e3o `text` e `hashtags`, ent\u00e3o focarei minhas an\u00e1lises nelas.\n\n#### Analisando `hashtags`\nEssa coluna \u00e9 consideravelmente mais simples do que a text e carrega todas as hashtags citadas no tweet.","c95556f5":"Podemos observar uma alta correla\u00e7\u00e3o entre as colunas `retweets` e `favorites` (0.63).\n\nAbaixo, filtrei os dados com valores de `retweets` e `favoritos` com mais ocorr\u00eancias e podemos observar no gr\u00e1fico que temos uma distribui\u00e7\u00e3o \"diretamente proporcional\" entre os valores das duas colunas, ou seja, enquanto o valor de uma cresce, o comum \u00e9 que o valor da outra cres\u00e7a proporcionalmente.","8d0da7af":"Podemos observar, na tabela acima, que nenhuma das colunas `user_followers`, `user_friends`, `user_favourites`, `retweets` e `favorites` tem valores nulos (isso pode ser observado pela linha `count`). A que possui valores mais altos \u00e9 a coluna `user_followers` e a com valores mais baixos \u00e9 a `retweets` (linha `max`).\n\n#### Analisando `user_followers`\nTraz a quantidade de usu\u00e1rios da conta que enviou o tweet em quest\u00e3o.\nA m\u00e9dia dessa coluna se aproxima de 39.222 (coluna `mean`) com um desvio padr\u00e3o bem alto, de 347.174(coluna `std`), ou seja, h\u00e1 valores nessa coluna que est\u00e3o bem distantes da m\u00e9dia. Podemos observar tamb\u00e9m, pela an\u00e1lise de quartis (colunas `25%`, `50%` e `75%` - para entender mais sobre quartis: http:\/\/www.portalaction.com.br\/estatistica-basica\/23-quartis) que 75% dos usu\u00e1rios cujos tweets foram selecionados nesse dataset t\u00eam at\u00e9 2.117 seguidores.\n\n#### Analisando `user_friends`\nAcredito que seja o tipo de seguidor que o usu\u00e1rio em quest\u00e3o segue de volta.\nCom uma m\u00e9dia de 1187 e desvio padr\u00e3o de 2656, tamb\u00e9m temos muitos valores distantes da m\u00e9dia e 75% dos usu\u00e1rios se concentram na faixa de 1260 \"`user_friends`\".\n\n#### Analisando `user_favourites`\nPelo que eu pesquisei, essa coluna se refere \u00e0 antiga feature de favoritar um usu\u00e1rio e receber push notifications quando esse usu\u00e1rio realizar alguma postagem.\nNovamente vemos um desvio padr\u00e3o alto de 38.067 para uma m\u00e9dia de 13228. Observamos tamb\u00e9m que o 3\u00ba quartil (coluna `75%`) se encontra com valores de at\u00e9 9974 \"`user_favourites`\".\n\n#### Analisando `retweets`\nA quantidade de retweets do tweet.\nNessa coluna j\u00e1 vemos um comportamento diferente nos valores, onde, mesmo tendo 15 de desvio padr\u00e3o para 1,69 de m\u00e9dia, 75% dos tweets t\u00eam at\u00e9 1 retweet apenas, com um valor m\u00e1ximo de 678.\n\n#### Analisando `favorites`\nQuantidade de favoritos, equivalente a curtidas, do tweet.\nComo a coluna anterior, temos um m\u00e9dia baixa, igual a 10, mas com desvio padr\u00e3o alto, equivalente a 70. 75% dos tweets do dataset t\u00eam at\u00e9 5 favorita\u00e7\u00f5es apenas, mas o valor m\u00e1ximo encontrado \u00e9 de 2315."}}