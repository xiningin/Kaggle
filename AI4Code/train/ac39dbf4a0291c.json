{"cell_type":{"69a39a34":"code","a7374ff3":"code","7d036308":"code","8a4ab205":"code","041bf77f":"code","21ce52e4":"code","b664fe29":"code","bd26e643":"code","207f60c8":"code","f99d4014":"code","8e9040fd":"code","4f63cf84":"code","0bce2497":"code","2852a880":"code","cf3e5e6e":"code","82561461":"code","a462df68":"code","d6def039":"code","fd734fb2":"code","d5a27bcc":"code","88a26ed3":"code","32529c5d":"code","eb8622a4":"code","a6b14cd7":"code","a0b72753":"code","ad324a94":"code","237ea73c":"code","8725a0f8":"code","4d9c571c":"code","16be369d":"code","445d7465":"code","cfd0e81d":"code","139ec717":"code","c90a792a":"code","f3998441":"code","61fb220b":"code","3f8e6345":"code","9974a870":"code","d9071314":"code","5ac5024c":"code","0637565e":"code","95d77dbc":"code","2becc33e":"code","66cd9540":"code","894f5505":"code","33776e46":"code","7f4eb053":"code","051e69e9":"code","60e4cf1c":"code","f074ca83":"code","5a8226bb":"code","b12d229d":"code","e9ac8831":"code","92bc0984":"code","b68b8d83":"code","ebdeeadd":"code","ccaf0dac":"code","0e7479a9":"code","f3bc83c0":"code","b1d24ed3":"code","b84d1944":"code","aca42db1":"code","ecc6ca64":"code","ed83f1bb":"code","d8206fda":"code","99a01847":"code","9544b2a8":"code","f3d81539":"code","540df7f1":"code","94e59b9e":"code","ea8aee32":"code","a1b20521":"code","78950854":"code","d9f8a0ad":"code","21074f61":"code","c5590f4b":"code","098f9d76":"code","792a024f":"code","38256b77":"code","b604d54c":"code","18b84db4":"code","b3d80f98":"code","c923e1dc":"code","7d0f212d":"markdown","3d2bd79f":"markdown","69b09c82":"markdown","9def7274":"markdown","e5260d69":"markdown","4075ac2f":"markdown","183063eb":"markdown","332c82c6":"markdown","0b7c5117":"markdown","7a1fccc7":"markdown","b9cb00a5":"markdown","d0506556":"markdown","bb26b501":"markdown","aa25f7b4":"markdown","94691b36":"markdown","6e04ff3b":"markdown","3675a1c4":"markdown","c36145e3":"markdown","f666948a":"markdown","0ce9dd58":"markdown","886f071f":"markdown","9774f71b":"markdown","938b9315":"markdown","0f8716fc":"markdown","29cd6a82":"markdown","dd95ffae":"markdown","cac73e47":"markdown","d6e93738":"markdown","021a933a":"markdown","74e39cf4":"markdown","c5fa92f2":"markdown","a04234a4":"markdown","8cd735b8":"markdown","465fd601":"markdown","38d81b6c":"markdown","1150290d":"markdown","f9463cf5":"markdown","59c22ec1":"markdown","fdc24814":"markdown","e157da7a":"markdown","d197d438":"markdown","703ac158":"markdown","95286131":"markdown","bc6e565c":"markdown","21ecf3ce":"markdown","767d972f":"markdown","764b217d":"markdown","d6947988":"markdown","ec3282bd":"markdown","c0165034":"markdown","88424279":"markdown","6f7eac3a":"markdown","352f1f6e":"markdown","a7a4fdd0":"markdown","25a66dbc":"markdown","c3fb3d73":"markdown","d782bab9":"markdown","c11dc881":"markdown","f3b3ebdf":"markdown","f6203341":"markdown","6451ecc7":"markdown","4a6f69c4":"markdown","7df6efbb":"markdown","11e3851f":"markdown","5d6f258e":"markdown","7614a9bd":"markdown","3a560d09":"markdown","1b975d79":"markdown","6c15d14d":"markdown","ed06fcae":"markdown","40b93570":"markdown","079e86ca":"markdown","0e65f37e":"markdown","4121f891":"markdown","c30a97ff":"markdown","6b912299":"markdown"},"source":{"69a39a34":"!pip install -q klib\n","a7374ff3":"import numpy as np # linear algebra\nimport pandas as pd # data processing, CSV file I\/O (e.g. pd.read_csv)\nimport seaborn as sns # visualization\nfrom matplotlib import pyplot as plt # visualization\n%matplotlib inline\nimport warnings\nwarnings.filterwarnings(\"ignore\")\nimport klib\nimport missingno as msno","7d036308":"train=pd.read_csv(\"..\/input\/song-popularity-prediction\/train.csv\")\ntest=pd.read_csv(\"..\/input\/song-popularity-prediction\/test.csv\")","8a4ab205":"train.info()","041bf77f":"test.info()","21ce52e4":"train.isnull().sum()","b664fe29":"test.isnull().sum()","bd26e643":"train.head()","207f60c8":"song_popularity_map={1:\"Popular\",0:\"Not_Popular\"}\ntrain['song_popularity']=train['song_popularity'].map(song_popularity_map)","f99d4014":"plt.figure(figsize=(8,6))\n_=sns.countplot(train['song_popularity'],order=train['song_popularity'].value_counts().index)\n_=plt.title(\"Song Popularity Distribution\",fontsize=25)\n_=plt.xlabel('song_popularity',fontsize=20)\n_=plt.xticks(fontsize=14)","8e9040fd":"train.groupby(['song_popularity'])['song_popularity'].agg({'count'}).reset_index().sort_values('count',ascending=False)","4f63cf84":"def group_summary(df,groupcol,value):\n    return df.groupby(groupcol)[value].describe().reset_index().sort_values('mean',ascending=False)","0bce2497":"def side_by_side_plot(df,grp,valcol):\n  fig,(ax1,ax2) = plt.subplots(1,2,figsize=(15,8))\n  fig.tight_layout()\n  sns.kdeplot(x=df[valcol], hue=df[grp],ax=ax1)\n  ax1.set_title(grp.capitalize()+\" Wise \"+valcol.capitalize()+\" Distribution\",size=15)\n  sns.boxplot(x=df[grp],y=df[valcol],ax=ax2)\n  ax2.set_title(grp.capitalize()+\" Wise \"+valcol.capitalize()+\" Distribution\",size=15) ","2852a880":"train['song_duration_ms'].describe()","cf3e5e6e":"train['song_duration_ms']=train['song_duration_ms']\/60000","82561461":"klib.dist_plot(train['song_duration_ms']);\nplt.title(\"Song Duration Distribution\",fontsize=20);","a462df68":"train['song_duration_ms'].describe()","d6def039":"side_by_side_plot(train,'song_popularity','song_duration_ms')","fd734fb2":"group_summary(train,'song_popularity','song_duration_ms')","d5a27bcc":"klib.dist_plot(train['acousticness']);\nplt.title('Song Acousticness Distribution',fontsize=15);","88a26ed3":"train['acousticness'].describe()","32529c5d":"side_by_side_plot(train,'song_popularity','acousticness')","eb8622a4":"group_summary(train,'song_popularity','acousticness')","a6b14cd7":"klib.dist_plot(train['danceability']);\nplt.title('Danceability Scale Distribution',fontsize=15);","a0b72753":"train['danceability'].describe()","ad324a94":"side_by_side_plot(train,'song_popularity','danceability')","237ea73c":"group_summary(train,'song_popularity','danceability')","8725a0f8":"klib.dist_plot(train['energy']);\nplt.title('Energy Scale Distribution',fontsize=15);","4d9c571c":"train['energy'].describe()","16be369d":"side_by_side_plot(train,'song_popularity','energy')","445d7465":"group_summary(train,'song_popularity','energy')","cfd0e81d":"klib.dist_plot(train['instrumentalness']);\nplt.title('Instrumentalness Scale Distribution',fontsize=15);","139ec717":"train['instrumentalness'].describe()","c90a792a":"side_by_side_plot(train,'song_popularity','instrumentalness')","f3998441":"group_summary(train,'song_popularity','instrumentalness')","61fb220b":"plt.figure(figsize=(15,6))\n_=sns.countplot(train['key'],order=train['key'].value_counts().index)\n_=plt.title(\"Song's Integer Notation Distribution\",fontsize=25)\n_=plt.xlabel('Key',fontsize=20)\n_=plt.xticks(fontsize=14)","3f8e6345":"g = sns.FacetGrid(train, col=\"song_popularity\",hue='song_popularity',margin_titles=True,height=7)\ng.map_dataframe(sns.countplot, x=\"key\",order=train['key'].value_counts().index);\ng.set_titles(size=15);\n\n","9974a870":"train.groupby(['song_popularity','key'])['key'].agg({'count'}).reset_index().sort_values('count',ascending=False).pivot_table(index='key',columns='song_popularity',values='count')","d9071314":"klib.dist_plot(train['liveness']);\nplt.title('Liveness Scale Distribution',fontsize=15);","5ac5024c":"train['liveness'].describe()","0637565e":"side_by_side_plot(train,'song_popularity','liveness')","95d77dbc":"group_summary(train,'song_popularity','liveness')","2becc33e":"klib.dist_plot(train['loudness']);\nplt.title('Loudness(Decibel-dB)  Scale Distribution',fontsize=15);","66cd9540":"train['loudness'].describe()","894f5505":"side_by_side_plot(train,'song_popularity','loudness')","33776e46":"group_summary(train,'song_popularity','loudness')","7f4eb053":"plt.figure(figsize=(15,6))\n_=sns.countplot(train['audio_mode'],order=train['audio_mode'].value_counts().index)\n_=plt.title(\"Song's Tonality Mode Distribution\",fontsize=25)\n_=plt.xlabel('Mode',fontsize=20)\n_=plt.xticks(fontsize=14)","051e69e9":"_=sns.catplot(data=train.groupby(['song_popularity','audio_mode'])['audio_mode'].agg({'count'}).reset_index().sort_values('count',ascending=False),\n            x='audio_mode',y='count',col='song_popularity',kind='bar',sharex=False,col_wrap=2,height=5,aspect=.9)","60e4cf1c":"klib.dist_plot(train['speechiness']);\nplt.title('Speechiness(spoken word)  Scale Distribution',fontsize=15);","f074ca83":"train['speechiness'].describe()","5a8226bb":"side_by_side_plot(train,'song_popularity','speechiness')","b12d229d":"group_summary(train,'song_popularity','speechiness')","e9ac8831":"klib.dist_plot(train['tempo']);\nplt.title('Tempo(Beats per Minute) Scale Distribution',fontsize=15);","92bc0984":"train['tempo'].describe()","b68b8d83":"side_by_side_plot(train,'song_popularity','tempo')","ebdeeadd":"group_summary(train,'song_popularity','tempo')","ccaf0dac":"plt.figure(figsize=(15,6))\n_=sns.countplot(train['time_signature'],order=train['time_signature'].value_counts().index)\n_=plt.title(\"Time Signature Distribution\",fontsize=25)\n_=plt.xlabel('Time Signature ',fontsize=20)\n_=plt.xticks(fontsize=14)\n","0e7479a9":"train['time_signature'].value_counts()","f3bc83c0":"g = sns.FacetGrid(train, col=\"song_popularity\",hue='song_popularity',margin_titles=True,height=7)\ng.map_dataframe(sns.countplot, x=\"time_signature\",order=train['time_signature'].value_counts().index);\ng.set_titles(size=15);\n\n","b1d24ed3":"klib.dist_plot(train['audio_valence']);\nplt.title('Valence Scale Distribution',fontsize=15);","b84d1944":"train['audio_valence'].describe()","aca42db1":"side_by_side_plot(train,'song_popularity','audio_valence')","ecc6ca64":"group_summary(train,'song_popularity','audio_valence')","ed83f1bb":"g = sns.FacetGrid(train, col=\"time_signature\",row='audio_mode',hue='song_popularity',\n                  margin_titles=True,height=9,aspect=.9)\ng.map_dataframe(sns.countplot, x=\"key\",order=train['key'].value_counts().index);\ng.set_titles(size=20);\ng.add_legend()\n\n","d8206fda":"_=plt.figure(figsize=(15,10))\n_=sns.heatmap(train.iloc[:,np.r_[2:7,8:15]].corr(),annot=True,cmap='Blues')","99a01847":"for col in ['key', 'audio_mode','time_signature']:\n   df=(pd.crosstab(train[col],train['song_popularity'],normalize='columns',).\n            assign(woe=lambda dfr: np.log(dfr['Popular']\/dfr['Not_Popular'])).\n            assign(iv=lambda dfr: np.sum(dfr['woe']*\n                                           (dfr['Popular']-dfr['Not_Popular'])))).reset_index()\n   print(\"=\"*100)\n   print(f\"{col}'s WOE and IV\")                                        \n   print(df)","9544b2a8":"from scipy.stats import chi2_contingency","f3d81539":"chi={}\nfor i in ['key', 'audio_mode','time_signature']:\n  c, p, dof, expected=chi2_contingency(pd.crosstab(train[i],train['song_popularity'],normalize=True))\n  chi[i]=p\n  print(f\"{i}: {p}\")\n\n\n_=plt.figure(figsize=(15,5))\nplt.bar(chi.keys(),chi.values())\n_=plt.xticks(fontsize=14, rotation=90)","540df7f1":"msno.bar(train)","94e59b9e":"msno.matrix(train)","ea8aee32":"train.isnull().sum()","a1b20521":"train.columns[train.isnull().any()]","78950854":"from sklearn.ensemble import ExtraTreesClassifier\nfrom sklearn.preprocessing import LabelEncoder","d9f8a0ad":"clf = ExtraTreesClassifier(n_estimators=500, random_state=0,)","21074f61":"lbl=LabelEncoder()","c5590f4b":"train1=train","098f9d76":"train1.dropna(axis=0,inplace=True)","792a024f":"train1['song_popularity']=lbl.fit_transform(train1[['song_popularity']])","38256b77":"X=train1.iloc[:,1:14]\ny=train1['song_popularity']","b604d54c":"clf.fit(X,y)","18b84db4":"feat_imp=pd.DataFrame({'features':X.columns.values,'value':clf.feature_importances_})","b3d80f98":"feat_imp.sort_values('value',ascending=False,inplace=True)","c923e1dc":"plt.figure(figsize=(10,8));\nsns.barplot(y=feat_imp['features'],x=feat_imp['value']);\nplt.title(\"Feature Importance\",fontsize=15);","7d0f212d":"#### The above heat map explains that the feature energy and loudness are positively correlated.\n\n#### Features acousticness and energy are highly negatively correlated.\n\n#### Features acousticness and loudness are highly negatively correlated.\n","3d2bd79f":"### Let's see time signature distribution. The time signature is a musical notation to specify how many beats are contained in each measure.","69b09c82":"#### The above group-wise box plot explains that the mean of the song's valence is almost the same in the popularity group.\n\n##### There are no outliers.","9def7274":"#### Let's see song's time duration distribution.","e5260d69":"#### Let's see valence scale distribution. Valence measures the positivity of a song. \n\n#### High valance songs are sound positive(happy).\n\n#### Low valence songs are the sad ones.\n\n#### Valence measure scale from 0 to 1.","4075ac2f":"#### The above chart explains that there is no difference between popular and not-popular songs' tonality mode.","183063eb":"#### The above bar chart explains that the minor mode is widely used in songs.","332c82c6":"#### The above histogram explains that the song's energy scale distribution is left-skewed.\n\n#### The average energy scale value is 0.68.","0b7c5117":"#### Let's see instrumentalness feature distribution.Instrumentalness predicts whether song contain vocals.\n\n#### High Instrumentalness songs have less vocals.\n\n#### Instrumentalness measure scale from 0 to 1.","7a1fccc7":"### Missing value Analysis","b9cb00a5":"#### The above bar chart explains that most songs have 3 note.","d0506556":"#### The above information explains that all categorical columns have information values less than 0.02(less predictive power).","bb26b501":"#### The above histogram explains that the tempo feature is normally distributed.\n\n#### The average tempo of the song is 116.\n\n#### There is a two peaks(bimodal) in histogram.","aa25f7b4":"#### The above information shows that there are 10000 data entries and 14 columns.","94691b36":"#### The above group-wise box plot explains that there is a difference in the mean.\n\n##### There are outliers.","6e04ff3b":"#### The above group-wise box plot explains that the mean of the song duration is almost the same in the popularity group.\n\n##### There are outliers above the third quartile and below the first quartile.","3675a1c4":"#### Let's see popularity-wise song's energy distribution.","c36145e3":"### Let's see tempo feature distribution. Tempo measures the beat per minute(BPM) of a song.\n\n### A song with a higher tempo is a fast-paced one.\n\n### A song with a slower tempo means slower and has longer beats.\n\n","f666948a":"#### Let's see popularity-wise song's acousticness distribution.","0ce9dd58":"#### The target song_popularity is imbalanced.","886f071f":"#### The above group-wise box plot explains that there is a difference in the mean.\n\n##### There are outliers below the first quartile.","9774f71b":"#### Let's create a funtion for group summary and side by side plot.","938b9315":"#### The above chart explains that there is no difference between popular and not-popular songs' time signature.","0f8716fc":"### Let's see song popularity-wise danceability scale distribution.","29cd6a82":"### The above plot explains that all numerical features are important to predict the popularity of the song.","dd95ffae":"### Let's see popularity wise key notaion distribution.","cac73e47":"#### The above chart explains that the song's popularity is decided mostly based on whether the song has used the time signature 3 or 4.","d6e93738":"#### The above group-wise box plot explains that the mean of the song danceability is almost the same in the popularity group.\n\n##### There are no outliers.","021a933a":"#### The above histogram explains that the acousticness feature distribution is right(positive) skewed.\n\n#### The average acousticness values is 0.28.\n\n#### The boxplot explains that there are no outliers.","74e39cf4":"#### The above histogram explains that the speechiness feature distribution is right-skewed.\n\n#### The average speechiness value is 0.09.\n","c5fa92f2":"### Let's see popularity-wise time signature distribution.","a04234a4":"#### Let's see how the popularity of the song is changes across different music keys, time signature, and audio modes.","8cd735b8":"#### The above histogram explains that the valence feature is left skewed.\n\n#### The average valence value is 0.58.","465fd601":"#### There are outliers in the columns song_duration_ms, acousticness, danceability, energy, instrumentalness, key, liveness, loudness.","38d81b6c":"#### The above group-wise box plot explains that the mean of the song's liveness is almost the same in the popularity group.\n\n##### There are outliers above the third quartile.","1150290d":"#### Let's see popularity-wise livness scale distribution.","f9463cf5":"#### Let's see popularity-wise valence scale distribution.","59c22ec1":"#### The above group-wise box plot explains that the mean of the song acousticness is almost the same in the popularity group.\n\n##### There are no outliers.","fdc24814":"#### Let's see popularity-wise song's duration distribution.","e157da7a":"#### Let's see Acousticness feature distribution. The acoustics of a song represents how much instrumental music is used in the song without electronic amplification.\n\n#### Acousticness measure scale from 0 to 1.","d197d438":"### Let's see the information value of category columns.","703ac158":"#### Let's see speechiness feature distribution.Speechiness measures the presence of spoken words in song.\n\n#### Speechiness measure ranges from 0 to 1.","95286131":"#### Let's see is there any missing values in train and test dataset by column wise.","bc6e565c":"#### Let's see popularity-wise loudness(dB) level distribution.","21ecf3ce":"#### The above histogram explains that the song duration feature is normally distributed.\n\n#### The average song duration is 3.22  minutes.\n\n#### The song duaration ranges from 25 seconds to 7.8 minutes.","767d972f":"#### Let's see the glimpse of train dataset","764b217d":"### Import the necessary packages.","d6947988":"#### The above group-wise box plot explains that the mean of the song's loudness is almost the same in the popularity group.\n\n##### There are outliers below the first quartile.","ec3282bd":"### Let's see popularity wise instrumentalness scale distribution.","c0165034":"#### Based on p-value the above-chisquared test explains that there is no-significant relationship between the song popularity and categorical variables.\n","88424279":"#### Let's see mode feature distribution.Mode indicates tonality of the song and used to measure the melodic content.\n\n#### There are two types in mode.Major mode - 1,Minor mode - 0.","6f7eac3a":"#### The above histogram explains that the danceability scale is left(negative,mean<median) skewed.\n\n#### Danceability range from 0.04 (low danceability) to 0.96 (high danceability).\n\n#### The average danceability of songs in the dataset is 0.57.","352f1f6e":"### Let's see a quick feature importance by using extratree classifier.","a7a4fdd0":"### Structure of the train and test dataset.","25a66dbc":"#### The above histogram explains that the livness feature distribution is right skewed.\n\n#### The average liveness value is 0.2.\n","c3fb3d73":"### Import train and test dataset","d782bab9":"#### Let's see the correlation between the continuous variables by using heat map.","c11dc881":"#### The above information shows that there are 40000 data entries and 15 columns.\n\n#### The target column is **song_popularity**.","f3b3ebdf":"### Let's explore key feature. In music key used to represent the integer notation of the pitch of the song.\n\n### The pitch song key integer notation ranges from 0 to 11.","f6203341":"#### There are outliers in the columns song_duration_ms, acousticness, danceability, energy, instrumentalness, key, liveness, loudness.","6451ecc7":"#### The song duration in milliesecond format.For easy interpretation let's convert it into minutes.","4a6f69c4":"#### The above histogram explains that the instrumentalness feature distribution is right skewed.\n\n#### The average instrumentalness value is 0.04.","7df6efbb":"#### The above group-wise box plot explains that the mean of the song's speechiness is almost the same in the popularity group.\n\n##### There are outliers above the third quartile.","11e3851f":"### Let's see danceability scale distribution.danceability describes how suitable a song is for dancing.","5d6f258e":"#### The above group-wise box plot explains that the mean of the song's tempo is almost the same in the popularity group.\n\n##### There are outliers above the third quartile.","7614a9bd":"## Introduction\n#### Predict the popularity of the songs from tunable audio track features like energy, tempo, key, mode, and valence, and others.","3a560d09":"### Let's see liveness scale distribution. Liveness detects the presence of the audience in a song. Live performed Songs have Higher liveness.","1b975d79":"### Let's see songs' energy scale distribution. energy describes how a song is fast, loud, and noisy.","6c15d14d":"### Let's test for independecnce between the categorical variables.","ed06fcae":"### Let's explore and visualize each column of the train dataset.First,let's see the target column(**song_popularity**) distribution.","40b93570":"#### The above bar chart explains most tracks used key 0.","079e86ca":"#### There are outliers in the columns song_duration_ms, acousticness, danceability, energy, instrumentalness, key, liveness, loudness.","0e65f37e":"#### The above chart explains that there is no difference between popular and not-popular songs' pitch keys.","4121f891":"#### The above histogram shows that the loudness feature is left skewed.\n\n#### The average loudness(dB) value is -7.4 dB.","c30a97ff":"###  Let's see popularity-wise tempo(beats per minute) distribution.","6b912299":"### Let's see loudness feature distribution.Loudness measures the overall decibel level of a song."}}