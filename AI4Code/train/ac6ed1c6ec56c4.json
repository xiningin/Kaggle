{"cell_type":{"8c783a77":"code","3818140d":"code","a95fdc9e":"code","09687696":"code","3cb41ce6":"code","78445baf":"code","b97d0a56":"code","cc98b6ef":"code","e5ca962d":"code","f0d8bb7d":"code","51a9768a":"code","3101638c":"code","39c38256":"code","f8336e1e":"code","7da66025":"code","68bd95d6":"code","b5152b7f":"markdown","64974eb2":"markdown","40077be7":"markdown","e2c24f2c":"markdown","576f7a67":"markdown","61ea64e9":"markdown"},"source":{"8c783a77":"!pip install ht CoolProp fluids xlrd xlwt","3818140d":"import numpy as np # linear algebra\nimport pandas as pd # data processing, CSV file I\/O (e.g. pd.read_csv)\nimport xlwt as xw\n# Input data files are available in the read-only \"..\/input\/\" directory\n# For example, running this (by clicking run or pressing Shift+Enter) will list all files under the input directory\nlista_data = []\nimport os\nfor dirname, _, filenames in os.walk('\/kaggle\/input'):\n    for filename in filenames:\n        lista_data.append(os.path.join(dirname, filename))\nimport matplotlib.pyplot as plt\nimport ht\nimport CoolProp as cp\nimport fluids\nfrom shutil import copyfile\ncopyfile(src = \"..\/input\/prop-fluidos-intercambiadores\/prop_fluidos_intercambiadores.py\", dst = \"..\/working\/prop_fluidos_intercambiadores.py\")\nfrom prop_fluidos_intercambiadores import fluido_intercambiador\n# Carga Datos Excel\ndata_excel = pd.read_excel(lista_data[1],sheet_name=1)","a95fdc9e":"data = data_excel.to_numpy() # datos del archivo excel\n#constantes de calculo\ng = 9.8; cal2joule = 4.184\n###########################################################\n#           DATOS  del Intercambiador  \n#\n###########################################################\n# Definici\u00f3n de Flujos\nGases = fluido_intercambiador('Gases combustion') \nAire = fluido_intercambiador('Aire')\n# Temperaturas\nGases.temp_entrada = data[20,4]    \nGases.temp_salida = data[21,4]\nAire.temp_entrada = data[22,4]\nAire.temp_salida = data[12,5]\n# Calor\nCalor_ingreso = data[17,4]*cal2joule*1e3\/3600\nCalor_intercambiado = data[18,4]*cal2joule*1e3\/3600\nQ = Calor_intercambiado\nGases.calor_intercambiado, Aire.calor_intercambiado = [Q,Q]\n\n# Geometr\u00eda del Intercambiador\nTubo_dext = data[13,4]\nTubo_esp = data[13,6]*1e-3\nTubo_dint = Tubo_dext-Tubo_esp*2\nTubo_long = 2.68\npaso_tubos = data[47,4]\nNcarcasa = 2\nRf = data[58,4]  #factor de ensuciamiento. Ver Cao pag 524","09687696":"#Capacidad T\u00e9rmica M\u00ednima\nCmin = np.min((Aire.cp*Aire.caudal*Aire.rho,Gases.cp*Gases.caudal*Gases.rho))\n#Mayor Salto T\u00e9rmico del sistema\nDeltaT_max = Gases.temp_entrada-Aire.temp_entrada\n#Calor M\u00e1ximo disponible\nQmax = Cmin*DeltaT_max\n#ficiencia t\u00e9rmica\neficiencia = Q\/Qmax\n\nprint('Capacidad T\u00e9rmica M\u00ednima Cmin = %.1f W\/K'%Cmin)\nprint('Calor M\u00e1ximo disponible Qmax=%.1f kW'%(Qmax*1e-3))\nprint('Eficiencia t\u00e9rmica del equipo = %.2f'%eficiencia)","3cb41ce6":"psi  =  (Gases.temp_salida- Aire.temp_entrada) \/  (Gases.temp_entrada- Aire.temp_entrada) \nbeta = eficiencia*Gases.caudal*Gases.cp \/ (Aire.caudal*Aire.cp)\nprint('psi = %.2f'%psi)\nprint('beta = %.2f'%beta)\n\n#de pags 104, 105\ngamma = 0.989","78445baf":"LMTD = ht.LMTD(Tci=Aire.temp_entrada, Tco=Aire.temp_salida, Thi=Gases.temp_entrada, Tho=Gases.temp_salida)\n\n#Ft = ht.F_LMTD_Fakheri(Tci=Aire.temp_entrada, Tco=Aire.temp_salida, Thi=Gases.temp_entrada, Tho=Gases.temp_salida, shells=Ncarcasa)\n################\nFt = gamma\n\n\n#######################\nUA = Q\/(LMTD*Ft)\nUpropuesto = 15\nApropuesta = UA\/Upropuesto\nNtubos_0  = np.round(Apropuesta \/ (np.pi*Tubo_dext*Tubo_long))\nNtubos_0 = np.round(Ntubos_0\/4)*4\nprint('Temperatura logaritmica media %.1f C'%LMTD)\nprint('G_Gases =%.1f m3\/h'%Gases.caudal)\nprint('G_Aire =%.1f m3\/h '%Aire.caudal)\nprint('Area propuesta =%.1f'%Apropuesta)\nprint('Numero de tubos %0d'%Ntubos_0)\n\nNpasostubos = 1\nGases.area =  Tubo_dint**2\/4*np.pi*Ntubos_0 #* Npasostubos\nGases.long = Tubo_dint\nGases.veloc = Gases.caudal \/ Gases.area\nGases.Reynolds()\n#Npasotubos =  Re_design*(np.pi*Tubo_dext-Tubo_esp*2*Ntubos_0*m ) \/ (4*m_t)","b97d0a56":"###########################################################\n# Determinacion de Area de pasaje del aire por la carcasa\n# alrededor del paquete de tubos\n###########################################################\nTubo_area_ext = Tubo_dext**2\/4*np.pi\ncarcasa_huelgo = 20e-3\nnfilas = 4\nncolumnas = Ntubos_0\/nfilas\n\ncarcasa_xmax,carcasa_ymax = [paso_tubos*(ncolumnas-1)+carcasa_huelgo*2+Tubo_dext,\n                                                       paso_tubos*(nfilas-1)+carcasa_huelgo*2+Tubo_dext]\ncarcasa_area = carcasa_xmax*carcasa_ymax\n\nVeloc_aire_entrada  = Aire.caudal\/(carcasa_xmax*Tubo_long\/2)\nVeloc_aire_max = Veloc_aire_entrada*paso_tubos\/(paso_tubos-Tubo_dext) #esta expresi\u00f3n no toma en cuenta el area entre tubo y carcasa (huelgo)\n\n\nAire.area = (carcasa_xmax-Tubo_dext*ncolumnas)*Tubo_long\/2\nAire.long = Tubo_dext\nAire.veloc = Aire.caudal  \/ Aire.area\nprint('Area de pasaje del Aire %.3f m2'%Aire.area)\nprint('Velocidad del Aire %.3f m\/s'%Aire.veloc)","cc98b6ef":"Aire.Reynolds() \nRe = Aire.Re\npitch_parallel,pitch_normal = [paso_tubos,paso_tubos]\nPr = Aire.Pr\ntube_rows = ncolumnas\nAire.Nu = ht.conv_tube_bank.Nu_Zukauskas_Bejan(Re, Pr, tube_rows, pitch_parallel, pitch_normal, Pr_wall=None)\nAire.hc = Aire.Nu*Aire.long \/ Aire.k","e5ca962d":"Gases.Nu = ht.conv_internal.turbulent_Colburn(Gases.Re,Gases.Pr)\nGases.hc = Gases.Nu*Gases.k\/Gases.long\nprint('Reynolds gases = %.d'%Gases.Re)\nprint('Coeficiente conveccion gases = %.1f'%Gases.hc)","f0d8bb7d":"Twall = (Aire.hc*Aire.temp_media+Gases.hc*Gases.temp_media) \/ (Aire.hc+Gases.hc)\nPr_w = cp.CoolProp.PropsSI('Prandtl','T',273+Twall,'P',101.325e3,'Air')\nmu_w = cp.CoolProp.PropsSI('V','T',273+Twall,'P',101.325e3,'Air')\nAire.Nu = ht.conv_tube_bank.Nu_Zukauskas_Bejan(Re, Pr, tube_rows, pitch_parallel, pitch_normal, Pr_wall=Pr_w)\nAire.hc = Aire.Nu*Aire.long \/ Aire.k\n\nDeltaP_banco_tubos = Ncarcasa*ht.conv_tube_bank.dP_Zukauskas(Re, ncolumnas, pitch_normal, pitch_parallel, Tubo_dext, Aire.rho, Aire.veloc)\nAire.DeltaP = DeltaP_banco_tubos  #+ DeltaP_Codo\nprint('Banco de tubos Nu= %.2f'%Aire.Nu)\nprint('Banco de tubos h_c= %.2f'%Aire.hc)\nprint('Banco de tubos Delta P= %.2f'%Aire.DeltaP)","51a9768a":"Ulimpio = 1 \/ (Tubo_dext\/Tubo_dint\/Gases.hc+1\/Aire.hc )\nRf = 0.002\nU = 1 \/ (1\/Ulimpio + Rf *(1+Tubo_dext\/Tubo_dint))\n\nA_calculo = Q \/ (U*LMTD*Ft)\n\nprint('U=%.2f'%U)\nprint('Acalculo = %.2f'%A_calculo)\nprint('A propuesta inicial %.2f'%Apropuesta)","3101638c":"# Caida de presion\n\n# Calculo para flujo en tubos\nroughness = fluids.roughness_Farshad('Carbon steel, bare', D=Tubo_dint)\n\nf_c = fluids.friction.friction_factor(Re=Gases.Re, eD=roughness\/Tubo_dint)\n\nf_c2 = 1.2*(0.0014+0.125\/Gases.Re**.32)\n\n#Gtubos = m_c*Npasotubos*4 \/ (Ntubos*np.pi*Di**2)\nGtubos = Gases.caudal\n\nDelta_p_friccion = f_c*Npasostubos*Gases.veloc**2*Tubo_long\/Tubo_dint\/2 *(Gases.mu\/mu_w)**-0.14\n\n#Delta_p_cabezales = 4*Npasotubos*Gtubos**2\/rho_c\/2\n\nDelta_p_tubos = Delta_p_friccion#+Delta_p_cabezales\nGases.DeltaP = Delta_p_tubos\nprint('factor friccion tubos = %4f '%f_c)\nprint('Gtubos = %.1f'%Gtubos)\nprint('Delta p friccion = %.2f'%Delta_p_friccion)\n#print('Delta p cabezales = %.2f'%Delta_p_cabezales)\nprint('Delta p tubos = %.2f'%Delta_p_tubos)","39c38256":"print('Se puede volcar sobre un archivo Excel.')\n# Workbook is created \nwb = xw.Workbook() \nxw.add_palette_colour(\"gris\", 0x21)\nwb.set_colour_RGB(0x21, 200, 200,200)  \n# add_sheet is used to create sheet. \nsheet1 = wb.add_sheet('Performance Unidad') \nstyle = xw.easyxf('pattern: pattern solid, fore_colour gris;')\n# Input data into rows \nsheet1.write(3, 0, 'Nombre Fluido') \nsheet1.write(3, 1, 'Aire') \nsheet1.write(3, 2, 'Gases Combusti\u00f3n') \n\nsheet1.write(4, 0, 'Caudal masico (kg\/s)',style) \nsheet1.write(4, 1, '%.2f'%(Aire.caudal*Aire.rho),style) \nsheet1.write(4, 2, '%.2f'%(Gases.caudal*Gases.rho),style) \n\nsheet1.write(5, 0, 'Temperatura Entrada') \nsheet1.write(5, 1, '%.1f'%Aire.temp_entrada) \nsheet1.write(5, 2, '%.1f'%Gases.temp_entrada) \n\nsheet1.write(6, 0, 'Temperatura salida',style) \nsheet1.write(6, 1, '%.1f'%Aire.temp_salida,style) \nsheet1.write(6, 2, '%.1f'%Gases.temp_salida,style) \n\n\nsheet1.write(7, 0, 'Densidad kg\/m3') \nsheet1.write(7, 1, '%.2f'%Aire.rho) \nsheet1.write(7, 2, '%.2f'%Gases.rho) \n\nsheet1.write(8, 0, 'Viscosidad cP',style) \nsheet1.write(8, 1, '%.2f'%(1e3*Aire.mu),style) \nsheet1.write(8, 2, '%.2f'%(1e3*Gases.mu),style) \n\n\nsheet1.write(9, 0, 'Calor espec\u00edfico J\/Kg C')\nsheet1.write(9, 1, '%.1f'%Aire.cp)\nsheet1.write(9, 2, '%.1f'%Gases.cp)\n\nsheet1.write(10, 0, 'Conductividad t\u00e9rmica W\/Kg C',style) \nsheet1.write(10, 1, '%.3f'%Aire.k,style) \nsheet1.write(10, 2, '%.3f'%Gases.k,style) \n\nsheet1.write(11, 0, 'Presi\u00f3n de entrada kPa') \nsheet1.write(11, 1, '%.1f'%(101.3))\nsheet1.write(11, 2, '%.1f'%(101.3))\n\nsheet1.write(12, 0, 'Velocidad m\/s',style) \nsheet1.write(12, 1, '%.2f'%Aire.veloc,style)\nsheet1.write(12, 2, '%.2f'%Aire.veloc,style)\n\nsheet1.write(13, 0, 'Ca\u00edda de presi\u00f3n Pa') \nsheet1.write(13, 1, '%.3f'%(Aire.DeltaP))\nsheet1.write(13, 2, '%.3f'%(Gases.DeltaP))\n\n\nsheet1.write(14, 0, 'Resistencia de ensuciamiento m2C\/W',style) \nsheet1.write(14, 1, '%.4f'%(Rf\/2),style)\nsheet1.write(14, 2, '%.4f'%(Rf\/2),style)\n\nsheet1.write(15, 0, 'Calor intercambiado kW') \nsheet1.write(15, 1, '%.1f'%(Q\/1e3))\n\nsheet1.write(16, 0, 'Coeficiente Global de Transferencia',style)\nsheet1.write(16, 1, '%.1f'%U,style)\n\nsheet1.write(17, 0, 'N\u00famero de pasos por carcasa')\nsheet1.write(17, 1, '%0d'%Npasostubos)\n\nsheet1.write(18, 0, 'N\u00famero de pasos de carcasa',style)\nsheet1.write(18, 1, '%.1f'%Ncarcasa,style)\n\nsheet1.write(19, 0, 'Tubos Longitud m')\nsheet1.write(19, 1, '%.2f'%Tubo_long)\n\nsheet1.write(20, 0, 'Tubos D exterior mm',style)\nsheet1.write(20, 1, '%.2f'%(Tubo_dext*1e3),style)\n\nsheet1.write(21, 0, 'Tubos D interior mm')\nsheet1.write(21, 1, '%.2f'%(Tubo_dint*1e3))\n             \nsheet1.write(22, 0, 'Tubos espesor mm',style)\nsheet1.write(22, 1, '%.2f'%(Tubo_esp*1e3),style)\n             \nsheet1.write(23,0,'Carcasa Lx m')             \nsheet1.write(23,1,'%.2f'%carcasa_xmax)\n             \nsheet1.write(24,0,'Carcasa Ly m',style)             \nsheet1.write(24,1,'%.2f'%carcasa_ymax,style)\n\nnombre_salida = 'Intercambiador_salida_TEMA.xls'\nwb.save(nombre_salida)\ndata_salida_excel = pd.read_excel('.\/'+nombre_salida,skiprows=2)\ndata_salida_excel","f8336e1e":"print('Nusselt seg\u00fan paso transversal en nuestro banco de tubos.')\nfig0,ax0 = plt.subplots(figsize=(4,4))\npaso_longitudinal = Tubo_dext*1.5\npaso_transversal = np.linspace(Tubo_dext,Tubo_dext*3,100)\npaso_longitudinal2 = Tubo_dext*1.3\nfor i,paso_ti in enumerate(paso_transversal):\n    Nu = ht.conv_tube_bank.Nu_Zukauskas_Bejan(Re, Pr, tube_rows,paso_longitudinal,paso_ti, Pr_wall=None)\n    Nu2 = ht.conv_tube_bank.Nu_Zukauskas_Bejan(Re, Pr, tube_rows,paso_longitudinal,paso_ti*1.3\/1.5, Pr_wall=None)\n    if i==0:\n        lin1, = ax0.plot(paso_ti\/paso_longitudinal,Nu,'.',label = '$p_L=1.5D$')\n        lin2, = ax0.plot(paso_ti\/paso_longitudinal,Nu2,'.',label = '$p_L=1.3D$')\n    else:\n        ax0.plot(paso_ti\/paso_longitudinal,Nu,'.',color=lin1.get_color())\n        ax0.plot(paso_ti\/paso_longitudinal,Nu2,'.',color=lin2.get_color())\n\nax0.set_title('$paso_T = 1.5D$')\nax0.set_xlabel('$paso_T\/paso_L$')\nax0.set_ylabel('Nu')\nax0.grid()\nax0.legend();","7da66025":"#datos geometr\u00eda\n\nTubo_area_int = Tubo_dint**2\/4*np.pi\nTubo_area_ext = Tubo_dext**2\/4*np.pi\nNtubos = Ntubos_0\n\npaso_tubos =pitch_normal\ncarcasa_huelgo = 20e-3  #Cao pag 142 10mm\n","68bd95d6":"import matplotlib.patches as mpatches\nprop_cycle = plt.rcParams['axes.prop_cycle']\ncolors = prop_cycle.by_key()['color']\nescala = 1\/3\ncoord_tubo = []\nfor filai in np.arange(nfilas):\n    yi = filai*paso_tubos+carcasa_huelgo+Tubo_dext\/2\n    for columnai in np.arange(ncolumnas):\n        xi = columnai*paso_tubos+carcasa_huelgo+Tubo_dext\/2\n        coord_tubo.append([xi,yi])\n\ncarcasa_area = carcasa_xmax*carcasa_ymax\nArea_pasaje_aire = carcasa_area-Ntubos*Tubo_area_ext        \ncarcasa_espesor = 0\ncarcasa_paso = 2*Tubo_dext\nfig0,ax0  = plt.subplots(figsize=(12,12))\n\nfor i,coord_tuboi in enumerate(coord_tubo):\n    xi1,yi1 = coord_tuboi\n    xi1 +=2; \n    ax0.add_patch(plt.Circle((xi1, yi1), Tubo_dext\/2, color='k',fill=False))\n    ax0.plot([0,Tubo_long*escala],[yi1,yi1],color='k',linestyle='-.',linewidth=1)\n    ax0.plot([0,Tubo_long*escala],[yi1+Tubo_dext\/2,yi1+Tubo_dext\/2],color='k')\n    ax0.plot([0,Tubo_long*escala],[yi1-Tubo_dext\/2,yi1-Tubo_dext\/2],color='k')\nax0.set_aspect('equal')  \nlin, = ax0.plot([0,Tubo_long*escala],[0,0],linewidth=3)\ncolor_c = lin.get_color()\nax0.plot([0,Tubo_long*escala],[carcasa_ymax,carcasa_ymax],linewidth=3,color=color_c)\nax0.plot([0,0],[0,carcasa_ymax+carcasa_paso],linewidth=3,color=color_c)\nax0.plot([Tubo_long*escala\/2,Tubo_long*escala\/2],[0,carcasa_ymax],linewidth=3,color=color_c)\n\nax0.plot([Tubo_long*escala\/2,Tubo_long*escala],[carcasa_ymax,carcasa_ymax],linewidth=3,color=color_c)\nax0.plot([Tubo_long*escala\/2,Tubo_long*escala],[0,0],linewidth=3,color=color_c)\nax0.plot([Tubo_long*escala,Tubo_long*escala],[0,carcasa_ymax+carcasa_paso],linewidth=3,color=color_c)\n\nax0.plot([0,Tubo_long*escala],[carcasa_ymax+carcasa_paso,carcasa_ymax+carcasa_paso]\n         ,linewidth=3,color=color_c)\n\nax0.plot([2,2+carcasa_xmax],[0,0],linewidth=3,color=color_c)\n\nax0.plot([2,2+carcasa_xmax],[carcasa_ymax,carcasa_ymax],linewidth=3,color=color_c)\nax0.plot([2,2],[0,carcasa_ymax],linewidth=3,color=color_c)\nax0.plot([2+carcasa_xmax,2+carcasa_xmax],[0,carcasa_ymax],linewidth=3,color=color_c)\n\nax0.set_axis_off()\narrow0 = mpatches.FancyArrowPatch((Tubo_long*escala\/4,carcasa_ymax\/2), (-.2, carcasa_ymax\/2),\n                                 mutation_scale=50,color=colors[1],ec='k')\n\narrow1 = mpatches.FancyArrowPatch((Tubo_long*escala\/4, -.15), (Tubo_long*escala\/4, .0),\n                                 mutation_scale=50,color=colors[0],ec='k')\n\narrow2 = mpatches.FancyArrowPatch((3*Tubo_long*escala\/4, 0), (3*Tubo_long*escala\/4, -.15),\n                                 mutation_scale=50,color=colors[0],ec='k')\narrow3 = mpatches.FancyArrowPatch((Tubo_long*escala\/4, carcasa_ymax), \n                                  (2*Tubo_long*escala\/4, carcasa_ymax+carcasa_paso\/2),\n                                 mutation_scale=50,color=colors[0],ec='k',\n                                  connectionstyle=\"angle3, angleA=90, angleB=0\")\narrow4 = mpatches.FancyArrowPatch((2*Tubo_long*escala\/4, carcasa_ymax+carcasa_paso\/2),(3*Tubo_long*escala\/4, carcasa_ymax), \n                                 mutation_scale=50,color=colors[0],ec='k',\n                                  connectionstyle=\"angle3, angleA=0, angleB=120\")\nax0.add_patch(arrow0)\nax0.add_patch(arrow1)\nax0.add_patch(arrow2);\nax0.add_patch(arrow3);\nax0.add_patch(arrow4);\nax0.set_title('Esquema del Intercambiador',fontsize=18);","b5152b7f":"La estimaci\u00f3n del factor $F_T$ para este tipo de intercambiadores la podemos estimar en base a resultado como los presentados en: \n- Annaratone, Donatello. Handbook for heat exchangers and tube banks design. Springer Science & Business Media, 2010.\n\nAll\u00ed se definen los n\u00fameros adimensionales:\n\\begin{eqnarray}\n\\psi &=& \\frac{ T_{CS} - T_{FE}}{ T_{CE} - T_{FE}}\\\\\n\\beta &=& \\frac{ \\eta \\dot C_C}{ \\dot C_F}\\\\\n\\gamma &=& \\frac{US}{\\eta C_C}\n\\end{eqnarray}\nY surge el factor de correci\u00f3n \n\\begin{equation}\n\\chi_i = \\gamma_i \/ \\gamma\n\\end{equation}\nsiendo $\\gamma_i$ el estimado para un intercambiador en general y $\\gamma$ la referencia de contracorriente.","64974eb2":"Observaci\u00f3n: Se propone un paso de tubos p = 1.5 D. En intercambiadores casco y tubo, lo usual es encontrar pasos p= D o p = 1.3D. Ver pej \n- Shah, R. K., & Sekulic, D. P. (2003). Fundamentals of heat exchanger design. John Wiley & Sons. \n- Cao, E. (2010). Heat transfer in process engineering. McGraw-Hill Education. (pags 509-522)\n\nPero la elecci\u00f3n p = 1.5D tiene razones de facilidad en la limpieza, pej.","40077be7":"COLBURN, Allan P. A method of correlating forced convection heat-transfer data and a comparison with fluid friction. International Journal of Heat and Mass Transfer, 1964, vol. 7, no 12, p. 1359-1384.","e2c24f2c":"\u017dUKAUSKAS, A. Heat transfer from tubes in crossflow. En Advances in heat transfer. Elsevier, 1972. p. 93-160.","576f7a67":"### Arreglo de tubos. Geometr\u00eda","61ea64e9":"HIPOTESIS DE CALCULO:\n\n1. Intercambiador de calor tubular de tubos lisos (sin aletas)\n2. Flujo de gases de combusti\u00f3n de biomasa dentro de tubos\n3. Flujo cruzado de aire externo a tubos\n4. Distribuci\u00f3n de tubos alineados"}}