{"cell_type":{"a18dba42":"code","e2fefad5":"code","bb7e013d":"code","043f96bd":"code","a4211e4f":"code","e11bb31e":"code","e32ecee5":"code","ce7b5f8d":"code","85561da5":"code","ea52f886":"code","af05ca4b":"code","5f30c8ca":"code","b9a8aea7":"code","361cfd5e":"code","8fa4056d":"code","2c4886dc":"code","8744135e":"code","1e751b61":"code","ee5b1e78":"code","3fb0c879":"code","0b030298":"markdown","1777cba7":"markdown","83f2f905":"markdown","588c3d96":"markdown","80066087":"markdown","0c129fe5":"markdown","a08f8db3":"markdown","794fbe29":"markdown","88b5370b":"markdown","1445b96b":"markdown","580ec0c8":"markdown","f2d630fa":"markdown","cbcf0e1e":"markdown","c96247dc":"markdown","2636652c":"markdown"},"source":{"a18dba42":"import numpy as np \nimport pandas as pd \nimport csv\nfrom datetime import datetime\nimport re\nimport math\nimport matplotlib.pyplot as plt\nimport seaborn as sns\nimport plotly.express as px\n\n%matplotlib inline","e2fefad5":"data = pd.read_csv(\"..\/input\/nba2k20-player-dataset\/nba2k20-full.csv\")","bb7e013d":"data.head()","043f96bd":"def clean_data(data):\n    data['salary'] = data['salary'].apply(lambda x: int(x[1:]))\n    data['jersey'] = data['jersey'].apply(lambda x: int(x[1:]))\n    data['b_day'] = data['b_day'].apply(lambda x: datetime.strptime(x, '%m\/%d\/%y').date())\n    data['height'] = data['height'].apply(lambda x: float(x[2+x.find('\/'):]))\n    data['weight'] = data['weight'].apply(lambda x: float(x[2+x.find('\/'):-4]))\n    data['draft_round'] = data['draft_round'].apply(lambda x: int(x) if len(x) == 1 else 0)\n    data['draft_peak'] = data['draft_peak'].apply(lambda x: int(x) if 1<=len(x)<=2 else 0)\n    data['college'] = data['college'].fillna('no education')\n    data['team'] = data['team'].fillna('no team')","a4211e4f":"clean_data(data)","e11bb31e":"#find age of each player\n\ndef age_(birthday):\n    today = datetime.strptime(datetime.today().strftime('%Y-%m-%d'), '%Y-%m-%d').date()\n    age = today.year - birthday.year\n    return int(age)\n\ndata['age'] = data['b_day'].apply(lambda x: age_(x))\ndata","e32ecee5":"plt.figure(figsize=(20, 10))\nsns.heatmap(data.corr(),cmap='coolwarm',annot=True)","ce7b5f8d":"fig = px.scatter(\n    data,\n    x = 'salary',\n    y = 'rating',\n    color = 'position',\n    title=\"Rating and salary correlation\", \n    width=800,\n    height=500,\n    trendline=\"ols\"\n)\n\nfig.show()","85561da5":"fig = px.histogram(data, x=\"salary\", marginal=\"violin\", width=900,height=500)\nfig.show()","ea52f886":"ds = data['rating'].value_counts().reset_index()\nds.columns = ['rating', 'count']\nfig = px.bar(\n    ds, \n    x='rating', \n    y=\"count\", \n    orientation='v', \n    title='Players and their rating', \n    width=900,\n    color='rating',\n    height=500\n)\nfig.show()","af05ca4b":"data.loc[data['position'] == 'F-G', 'position'] = 'G-F'\ndata.loc[data['position'] == 'F-C', 'position'] = 'C-F'\nds = data['position'].value_counts().reset_index()\nds.columns = ['position', 'count of players']\nfig = px.bar(\n    ds, \n    x='position', \n    y=\"count of players\", \n    orientation='v', \n    title=\"Players on positions\", \n    width=800,\n    height=500\n)\nfig.show()","5f30c8ca":"fig = px.bar(\n    data, \n    x='age', \n    y=\"rating\", \n    orientation='v', \n    title=\"Age and rating \", \n    width=800,\n    height=500,\n    color = 'rating'\n)\nfig.show()","b9a8aea7":"ds = data['team'].value_counts().reset_index()\nds.columns = ['team', 'count']\nds['mean rating'] = ds['team'].apply(lambda x: data[data['team'] == x]['rating'].mean())\nds.sort_values('mean rating',inplace=True, ascending = True)\nax = px.bar(ds, x=\"mean rating\", y=\"team\", color = 'mean rating').update_xaxes(categoryorder = 'total ascending')\nax","361cfd5e":"def index_ketle(height, weight):\n    ik = float(weight)\/((float(height))**2)\n    if float(ik)<18.5:\n        return 'underweight'\n    elif 18.5<=float(ik)<=24.9:\n        return 'normal body weight'\n    else:\n        return 'overweight'\n\nds = data['height'].reset_index()\nds['weight'] = data['weight']\ndel ds['index']\n\nds['Index Ketle'] = 0\nfor i in range(len(ds)):\n    ds['Index Ketle'][i] = index_ketle(ds['height'][i], ds['weight'][i])\n\nds['Index Ketle'].unique()\nds\n\nplt.figure(figsize=(15, 6))\nb = sns.barplot(data=ds, x='height', y='weight', hue='Index Ketle', palette=\"Blues_d\")\nb.set_title(\"Index of body mass\", fontsize=20)\nb.set_xlabel(\"Height\",fontsize=15)\nb.set_ylabel(\"Weight\",fontsize=15)\nb","8fa4056d":"ds = data['college'].value_counts().reset_index()\nds.columns = ['college', 'count']\nds['mean reating'] = ds['college'].apply(lambda x: data[data['college'] == x]['rating'].mean())\nds.sort_values(\"mean reating\", axis = 0, ascending = False, \n                 inplace = True, na_position ='last') \n\nplt.figure(figsize=(15, 8))\nb = sns.barplot(data = ds.iloc[:10], x = 'college', y = 'mean reating', palette=\"Set3\")\nb.set_title(\"10 collages with top rated graduates\", fontsize=20)\nb.set_xlabel(\"College\",fontsize=15)\nb.set_ylabel(\"Mean reating\",fontsize=15)","2c4886dc":"ds = data['height'].value_counts().reset_index()\nds.columns = ['height', 'count']\nds.sort_values('height', ascending= False, inplace=True)\n\nplt.figure(figsize=(15, 8))\nb = sns.barplot(data = ds, x = ds['height'][:10], y = ds['count'][:10], palette=\"Set3\")\nb.set_title(\"How many players with great height\", fontsize=20)\nb.set_xlabel(\"Height\",fontsize=15)\nb.set_ylabel(\"Count\",fontsize=15)","8744135e":"ds = data['age'].value_counts().reset_index()\nds.columns = ['age', 'count']\nds['salary'] = ds['age'].apply(lambda x: data[data['age'] == x]['salary'].mean())\nds.sort_values('age', ascending= False, inplace=True)\n\nplt.figure(figsize=(15, 8))\nb = sns.barplot(data = ds, x = ds['age'], y = ds['salary'])\nb.set_title(\"Age and mean salary\", fontsize=20)\nb.set_xlabel(\"Age\",fontsize=15)\nb.set_ylabel(\"Mean salary\",fontsize=15)","1e751b61":"ds = data[data['college'] == 'no education']\nplt.figure(figsize=(15, 8))\nb = sns.barplot(data=ds, x='rating', y='salary')\nb.set_title(\"Rating and salary of players with no education\", fontsize=20)\nb.set_xlabel(\"Rating\",fontsize=15)\nb.set_ylabel(\"Salary\",fontsize=15)\nb","ee5b1e78":"ds = data['draft_year'].value_counts().reset_index()\nds.columns = ['draft year', 'count']\nds.sort_values('draft year', ascending = True)\n\nplt.figure(figsize=(15, 8))\nb = sns.barplot(data=ds, x='draft year', y='count')\nb.set_title(\"Amount of drafted players by the year\", fontsize=20)\nb.set_xlabel(\"Year\",fontsize=15)\nb.set_ylabel(\"Amount of players\",fontsize=15)\nb","3fb0c879":"ds = data['jersey'].value_counts().reset_index()\nds.columns = ['jersey', 'count']\n\n\nfig, ax = plt.subplots(figsize=(12, 6))\nax.pie(ds['count'][:10], labels=ds['jersey'][:10], autopct='%1.1f%%',\n        shadow=True, startangle=90)\nax.axis('equal')\n\nplt.show()","0b030298":"**This plot shows how many players on each position, it seems, that more than 160 players stand on G position.**","1777cba7":"**From this plot we can see, that players have heigh rating at the age of 26-32.**","83f2f905":"**This heatmap shows us correlation between all numeric columns in our dataset.**\n**Let's see the correlation plot between rating and salary of all playres by there positions.**","588c3d96":"**This plot shows index of body mass (overweight\/ normal) based on ration between weigth and height.**","80066087":"**A lot of players were drafted last few years, i would say, more than ever before.**","0c129fe5":"**The correlation is vert strong, all trandlines almost overlap.**","a08f8db3":"**It seems, that the heighest salary they have in 36 years old, and the lowest is in 38.**","794fbe29":"**As we know,there are a lot of players with no education, but they also can have great rating, so here we can see, that players with rating 97 and with no education can earn up to 3.7M.**","88b5370b":"**Here we can see all teams and there mean rating. it seems, that the best team is Los Angeles Clippers, with mean rating 79.28, and the worst are players with no team.**","1445b96b":"**Here we can see some info about salary: min salary - 50K, max salary - 40.23M, mediana - 4.38M.**","580ec0c8":"**Let's take a look at the data.**","f2d630fa":"**Here we can see top 10 collages with the most rated graduates.**","cbcf0e1e":"**Seems that the most popular jersey number is 0.**","c96247dc":"**Here we can see, that heighest rating 97 have only 2 players, most of the players rating is in the range of 70-80**","2636652c":"**In NBA there are a lot of heigh people, but there are most players with height 2.03, and least with height 2.24.**"}}