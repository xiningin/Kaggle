{"cell_type":{"a47a75b0":"code","733dc996":"code","e55752d5":"code","f0e1a24e":"code","67e97186":"code","2e6b5a80":"code","73f8315b":"code","316a4250":"code","0fa7fe3e":"code","9325ad51":"code","51d551d7":"code","64aa6db7":"code","3fd10331":"code","62532430":"code","45475fe6":"code","27c7396e":"code","c9422bf4":"markdown","8a641532":"markdown","54f680ba":"markdown","a5f4a45a":"markdown","e3731f69":"markdown","0eb34cdf":"markdown","26460785":"markdown","0b1ec526":"markdown","f31f6b8b":"markdown","6f3049c0":"markdown","47ebd2e5":"markdown","3c7e83ec":"markdown"},"source":{"a47a75b0":"import pandas as pd\n\ndf = pd.read_csv('..\/input\/titanic\/train.csv')","733dc996":"df[df.Embarked.isnull()].style.highlight_null(null_color='gainsboro')","e55752d5":"df.Embarked.value_counts()","f0e1a24e":"df[(df.Ticket == '113572') | (df.Cabin == 'B28')]","67e97186":"conditions = [df.Survived == 1, df.Survived == 1, df.Pclass == 1, df.Sex == 'female', df.Age > 30, df.SibSp == 0, df.Parch == 0, df.Fare > 50, df.Fare > 50, df.Cabin.notnull]\nsurvived_condition = df.Survived == 1\npclass_condition = df.Pclass == 1\nsex_condition = df.Sex == 'female'\nage_condition = df.Age > 30\nsibsp_condition = df.SibSp == 0\nparch_condition = df.Parch == 0\nfare_condition = df.Fare > 50\ncabin_condition = df.Cabin.notnull()\nembarked_condition = df.Embarked.notnull()\n\nsimilar_passengers_df = df[survived_condition & pclass_condition & sex_condition & age_condition & sibsp_condition & parch_condition & fare_condition & cabin_condition & embarked_condition]\nsimilar_passengers_df","2e6b5a80":"similar_passengers_df.Embarked.value_counts()","73f8315b":"df.Cabin.fillna('cabin_none',inplace=True)\ndf[df['Cabin'].str.contains(\"B\")].head(4)","316a4250":"df[df['Cabin'].str.contains(\"B\")].Embarked.value_counts()","0fa7fe3e":"df[\"SameTicketCounter\"] = df.Ticket.apply(lambda x: len(df[df.Ticket == x]))\ncondition_unique_ticket = df.SameTicketCounter == 1\ncondition_not_unique_ticket = df.SameTicketCounter > 1","9325ad51":"df[condition_unique_ticket].Embarked.value_counts()","51d551d7":"df[condition_not_unique_ticket].Embarked.value_counts()","64aa6db7":"two_passengers_names = 'Icard|Amelie|Stone|George|Nelson|Martha|Evelyn'\ndf[df.Name.str.contains(two_passengers_names, regex=True)].Embarked.value_counts()","3fd10331":"tickets_df = df.dropna(subset=[\"Embarked\"]).copy()\ntickets_df.sort_values('Ticket',inplace=True)\ntickets_df.head(4).style.set_properties(**{'background-color': 'gainsboro'}, subset=['Ticket'])","62532430":"first_index = tickets_df.index[0]\ncurrent_ticket = tickets_df.at[first_index,\"Ticket\"]\ncurrent_embarked = tickets_df.at[first_index,\"Embarked\"]\ncurrent_index = first_index\nbool_different_embarked = False\n\nprint(\"Tickets:\\n\")\nfor i in tickets_df.index:\n    \n    if tickets_df.at[i, \"Ticket\"] != current_ticket:\n#         print(tickets_df.at[i, \"Ticket\"])\n        current_ticket = tickets_df.at[i, \"Ticket\"]\n        current_embarked = tickets_df.at[i,\"Embarked\"]\n        \n    if  current_embarked != tickets_df.at[i,\"Embarked\"]:\n        bool_different_embarked = True\n        print(current_ticket)","45475fe6":"df[df[\"Ticket\"] == '113798'].style.set_properties(**{'background-color': 'gainsboro'}, subset=['Embarked'])","27c7396e":"df[df[\"Ticket\"] == 'PC 17760'].style.set_properties(**{'background-color': 'gainsboro'}, subset=['Embarked'])","c9422bf4":"Two passengers have missing info about they Embarked. Both have very similar data. They have same cabin and ticket. Seems that they came from the same port.","8a641532":"<h1 style=\"text-align:center;\">Titanic: Embarked Column Emputation \u24b8 vs \u24c8<\/h1>","54f680ba":"### Based on those findings. I lean toward that the two passengers came from \"C\".","a5f4a45a":"Surprise! There passengers that despite has same ticket come from different ports.","e3731f69":"Seems that they not from 'Q' and its favor \"C\". But it based on only a small number of passengers. So the question remains: 'C' vs 'S'. Is there correlation between cabin and port?","0eb34cdf":"Checking if there passengers that have same Ticket but different Embarked.","26460785":"\"S\" = 78.5%, \"C\" = 17.8%. There much more from \"S\". But there also more passengers from this port: \"S\" = 72.4% \"C\" = 18.8%. After taking it into acount the advantage of \"S\" is slim.","0b1ec526":"If take only this info into account. High probability that they from \"S\". Are there other passengers with same ticket or cabin? If yes, would be possible to assume that they came from the same port. No, only those two.","f31f6b8b":"#### Passengers with similar data to those with missing Embarked. ","6f3049c0":"## Farther exploration","47ebd2e5":"\"C\" have similar number of unique and not unique tickets. But for \"S\" it much more common to have unique ticket.\nThe two passengers have a not unique ticket. This info favor \"C\". Maybe some name are more common in some areas of the ports.","3c7e83ec":"Based on cabin, \"C\" and \"S\" are nearly the same. Will try to receive insights from the Ticket."}}