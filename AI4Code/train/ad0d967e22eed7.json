{"cell_type":{"34d319c8":"code","868ba948":"code","bcb42005":"code","6f40385d":"code","af494147":"code","213e608b":"code","0e560056":"code","c88be01a":"code","5f9ddc3c":"code","c36f4020":"code","8eabc05a":"code","cc94e0c6":"code","d9fc7ede":"code","3216a52a":"code","644f2093":"code","f0240b3b":"code","7c7ba81a":"code","eab1851b":"code","5b87933c":"code","5351e362":"code","137a80be":"code","0f7e66eb":"code","5c20d13c":"code","9770c901":"code","5ba1cff7":"code","1edb21ab":"code","ff9491a1":"code","86f90c8f":"code","00c60f2b":"code","4465d800":"code","9b2802cc":"code","ff5fb5e8":"code","d7c07f1f":"code","4c21bb9e":"code","cad0400c":"code","01264354":"code","ebb7d834":"markdown","8f086f8e":"markdown","c5560227":"markdown","ab113cc6":"markdown","83dd418a":"markdown","78e75ef4":"markdown","fd2737d5":"markdown","df9d0433":"markdown","1838fde3":"markdown","586d26ec":"markdown","67e2d85e":"markdown","d187bd8b":"markdown","c7dc6819":"markdown","00ddc95a":"markdown","1de6cc43":"markdown","201e47c9":"markdown","9bd25bd2":"markdown","3086b187":"markdown","83d07e0c":"markdown","53d3defa":"markdown","12d8259a":"markdown","9f53d7ab":"markdown","a1bdc5e4":"markdown","7d50fe3c":"markdown","07eff538":"markdown","745b6a5a":"markdown","d3c57685":"markdown","661ab40d":"markdown","4e60b819":"markdown","8cb1efa4":"markdown","ad5d63b2":"markdown"},"source":{"34d319c8":"import numpy as np \nimport pandas as pd\nimport seaborn as sns\nimport matplotlib.pyplot as plt\nimport re\nimport matplotlib.style as style\nstyle.use('seaborn-poster')\nsns.set_style('darkgrid')","868ba948":"#Getting the data\nmydata = pd.read_csv('..\/input\/mydata\/spotify_data.csv', index_col=0,parse_dates=['Date'])\nbtsdata = pd.read_csv('..\/input\/mydata\/bts.csv', index_col='index')","bcb42005":"mydata['trackName']= mydata['trackName'].map(lambda x: x.lower())\nmydata['minPlayed']= mydata['msPlayed'].map(lambda x: x\/60000)\nmydata['hrsPlayed']= mydata['msPlayed'].map(lambda x: x\/3600000)","6f40385d":"#Dropping unnecessary columns\nbtsdata.drop(columns={'time_signature','key','artist_name'}, inplace=True)","af494147":"btsdata['song_name']= btsdata['song_name'].map(lambda x: x.lower())\nbtsdata['duration_min']= btsdata['duration_ms'].map(lambda x: x\/60000)","213e608b":"#Number or artists discovered during Sept 2019-Sept 2020\nlen(mydata.artistName.unique())","0e560056":"#Number or artists discovered during March 2020-Sept 2020\npre_artist = mydata[mydata.Date < '2020-03-01'].artistName.unique()\nlen(mydata[mydata.Date > '2020-03-01'][~mydata.artistName.isin(pre_artist)].artistName.unique())","c88be01a":"def plotMean(data, mycolor, mylinestyle):\n    plt.axvline(np.mean(data), color=mycolor, linestyle=mylinestyle, linewidth=1.5, label='Mean({})'.format(round(np.mean(data),2)))\n    plt.legend(loc='best')\ndef plotMedian(data, mycolor, mylinestyle):\n    plt.axvline(np.median(data), color=mycolor, linestyle=mylinestyle, linewidth=1.5, label='Median({})'.format(round(np.median(data),2)))\n    plt.legend(loc='best')\ndef plotLabel(data,x):\n    plt.annotate(\"Count: {}\".format(round(data.max(),2)), (x, data.max()),bbox=dict(fc='yellow'))\ndef plotBar(data,palette):\n    sns.barplot(x=data,y=data.keys(),palette = palette)\n    plotMean(data,'r','-')\n    plotMedian(data,'g','--')\n    plt.show()","5f9ddc3c":"data = mydata.groupby(['Date','trackName'], as_index = False).size().groupby('Date').size()\ndata.plot.line()\nplotLabel(data,'2020-01-19')\nplt.title('Number of tracks streamed over time', fontweight='bold')\nplt.ylabel('Number of tracks')\nplt.show()","c36f4020":"data = mydata.groupby(['Date','hrsPlayed'])['hrsPlayed'].sum().groupby('Date').sum()\ndata.plot.line()\nplotLabel(data,'2020-01-19')\nplt.title('Number of hours streamed over time', fontweight='bold')\nplt.ylabel('Hours played')\nplt.show()","8eabc05a":"plotBar(mydata[mydata.Date < '2020-03-01'].trackName.value_counts()[:15],'inferno')","cc94e0c6":"plotBar(mydata[mydata.Date > '2020-03-01'].trackName.value_counts()[:15], 'inferno')","d9fc7ede":"mydata.groupby(['artistName'])['hrsPlayed'].sum().sort_values(ascending=False)[:15].plot.pie(figsize=(10,10), autopct='%1.0f%%')\nplt.title('Top 15 artists based on hours played in percentage', fontweight='bold')\nplt.ylabel('')\nplt.show()","3216a52a":"plt.figure(figsize=(15,8))\ndata = mydata[mydata.artistName.isin(['BTS','V','RM','BTSYOUNG4EVER'])].groupby(['Date','minPlayed'])['minPlayed'].sum().groupby('Date').sum()\nplt.scatter(x=data.keys(), y=data,c=data, cmap='autumn_r',s= 250, edgecolors='black')\nplt.ylabel('Minutes played')\nplt.show()","644f2093":"plotBar(mydata[mydata.Date < '2020-07-01'].groupby(['artistName'])['hrsPlayed'].sum().sort_values(ascending=False)[:20],'viridis')","f0240b3b":"plotBar(mydata[mydata.Date > '2020-07-01'].groupby(['artistName'])['hrsPlayed'].sum().sort_values(ascending=False)[:20],'viridis')","7c7ba81a":"plotBar(mydata[mydata.artistName.isin(['BTS','V','RM','BTSYOUNG4EVER'])].groupby(['trackName'])['minPlayed'].sum().sort_values(ascending=False)[:20],'nipy_spectral')","eab1851b":"from wordcloud import WordCloud \ncloud=''\nfor x in mydata['artistName'].unique():\n    x= x.replace(\" \", \"\")\n    cloud+= ''.join(x) +' '\nplt.figure(figsize=(12,8))\nwordcloud = WordCloud(background_color='white',max_font_size=50).generate(cloud)\nplt.imshow(wordcloud)\nplt.axis('off')\nplt.title('ARTISTS', fontweight='bold')\nplt.show()","5b87933c":"#My preferred values of audio features\npreference = pd.DataFrame()","5351e362":"def plotFeatures(feature):\n    data = btsdata[btsdata.song_name.isin(mydata[mydata.msPlayed>1].trackName.tolist())].groupby(['song_name'])[feature].mean().sort_values(ascending=False)\n    sns.barplot(x=data,y=data.keys(),palette = 'gnuplot')\n    plotMean(data,'r','--') \n    preference['{}'.format(feature)]= [round(np.mean(data),2)]\n    plt.show()","137a80be":"sns.heatmap(btsdata.corr(), annot=True, center=1)\nplt.show()","0f7e66eb":"sns.lmplot(x='acousticness',y='energy',data=btsdata, height=7,line_kws={'color': 'red'})\nplt.title('Acousticness - Energy', fontweight='bold')\nplt.show()","5c20d13c":"plotFeatures('danceability')","9770c901":"plotFeatures('energy')","5ba1cff7":"plotFeatures('speechiness')","1edb21ab":"plotFeatures('acousticness')","ff9491a1":"plotFeatures('instrumentalness')","86f90c8f":"plotFeatures('liveness')","00c60f2b":"plotFeatures('tempo')","4465d800":"plotFeatures('valence')","9b2802cc":"preference","ff5fb5e8":"kpop = pd.read_csv('..\/input\/mydata\/kpop.csv', index_col=0)\nkpop['song_name']= kpop['song_name'].map(lambda x: x.strip().lower())\nkpop.head()","d7c07f1f":"#Features\nkpop_features = kpop.loc[:,['acousticness','danceability','energy','instrumentalness','liveness','speechiness','tempo', 'valence']]\nkpop_features.head()","4c21bb9e":"from sklearn.metrics.pairwise import euclidean_distances\nkpop['Similarity'] = euclidean_distances(kpop_features, preference.to_numpy()).squeeze()","cad0400c":"kpop.sort_values(by= 'Similarity', inplace= True)\nsimilar = kpop[['artist_name', 'song_name', 'Similarity']]\nsimilar = similar.drop_duplicates(subset=['artist_name', 'song_name'])","01264354":"similar.head(20)","ebb7d834":"---\n### MY PREFERENCE:","8f086f8e":"---\n### DANCEABILITY OF BTS MUSIC","c5560227":"---\n### SPEECHINESS OF BTS MUSIC","ab113cc6":"## ANALYSING STREAMING ACTIVITY OF BTS'S MUSIC\nStreaming history shows high activity after July 2020.","83dd418a":"---\n### INSTRUMENTALNESS OF BTS MUSIC","78e75ef4":"### AUDIO FEATURES OF SONGS BY TOP K-POP ARTISTS","fd2737d5":"The audio features and their values are provided by Spotify.\nThey are explained in the [Spotify for Developers](https:\/\/developer.spotify.com\/documentation\/web-api\/reference\/tracks\/get-audio-features\/) documentation.","df9d0433":"# **SIMILAR K-POP TRACKS**","1838fde3":"### K-POP DATA OF TOP ARTISTS","586d26ec":"![](https:\/\/developer.spotify.com\/assets\/branding-guidelines\/logo@2x.png)","67e2d85e":"---\n### TEMPO OF BTS MUSIC","d187bd8b":"## EUCLIDEAN DISTANCE TO FIND TRACKS WITH SIMILAR VALUES OF FEATURES\n\n> The basis of many measures of similarity and dissimilarity is euclidean distance. The distance between vectors X and Y is defined as follows:\n![image](http:\/\/www.analytictech.com\/mb876\/handouts\/image001.gif)\nIn other words, euclidean distance is the square root of the sum of squared differences between corresponding elements of the two vectors. Note that the formula treats the values of X and Y seriously: no adjustment is made for differences in scale.\nEuclidean distance is only appropriate for data measured on the same scale.\nIn order to compute similarities or dissimilarities among rows, we do not need to (in fact, must not) try to adjust for differences in scale. Hence, Euclidean distance is usually the right measure for comparing cases.\n-[ source](http:\/\/www.analytictech.com\/mb876\/handouts\/distance_and_correlation.htm#:~:text=The%20basis%20of%20many%20measures,elements%20of%20the%20two%20vectors.)","c7dc6819":"**PREFERENCES:**\n 1. High danceability\n 2. High energy\n 3. Low speechiness\n 4. Low acousticness\n 5. Low instrumentalness\n 6. Low liveness\n 7. High Tempo\n 8. High Valence","00ddc95a":"# VISUALIZING MY SPOTIFY DATA\n---\n---","1de6cc43":"**HIGH POSITIVE CORRELATION:**\n 1. Acousticness - Speechiness\n 2. Liveness - Speechiness\n \n**HIGH NEGATIVE CORRELATION:**\n 1. Acousticness - Energy\n (Visualizing this: )","201e47c9":"## TOP STREAMED ARTISTS (SEPT'19-SEPT'20)","9bd25bd2":"---\n### LIVENESS OF BTS MUSIC","3086b187":"---\n### VALENCE OF BTS MUSIC","83d07e0c":"![](https:\/\/ibighit.com\/bts\/images\/bts\/profile\/profile-kv.png)","53d3defa":"# I ANALYSED MY SPOTIFY DATA\n---","12d8259a":"## TOP BTS TRACKS","9f53d7ab":"# UNDERSTANDING BTS's MUSIC:\n---\n---","a1bdc5e4":"---\n### ENERGY OF BTS MUSIC","7d50fe3c":"## TOP ARTISTS BEFORE JULY-2020","07eff538":"---\n### ACOUSTICNESS OF BTS MUSIC","745b6a5a":"# FINDING K-POP SONGS BASED ON MY PREFERENCES\n---\ninspo: https:\/\/www.kaggle.com\/ahmadal\/spotify-extensive-analysis-song-recommender","d3c57685":"## TOP TRACKS PRE-LOCKDOWN","661ab40d":"## TOP TRACKS POST-LOCKDOWN","4e60b819":"### **COVID-19 CHANGED MY MUSIC TASTE**\n\nAfter six months in lockdown and being one the privileged ones to experiment with new habits and lifestyles during the quarantine, I look back at my streaming history to identify the changes in my music tastes during the lockdown. During the process I identified the following:\n* I listened to **964** artists during a period of 12 months, out of which I discovered **313** of them only after the lockdown.\n* My top artists and tracks changed during the lockdown.\n* During the lockdown, I streamed **BTS**'s music the most.\n\nI further extended my analysis to dive deeper into BTS in an attempt to know what it was that changed my preferences drastically. During the process I identified that BTS's music has **high 'danceability' and energy**, which acted as a escape from the monotony of quarantine.\n\nLastly, I extracted some data of other [top K-Pop artists](https:\/\/www.koreaboo.com\/lists\/top-25-followed-kpop-artists-spotify\/) to find similar tracks based on my preference of audio features.","8cb1efa4":"## **RELATION BETWEEN AUDIO FEATURES:**","ad5d63b2":"## TOP ARTISTS AFTER JULY-2020"}}