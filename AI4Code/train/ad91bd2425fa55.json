{"cell_type":{"5a952eb1":"code","956d8b0d":"code","fa3ad8b1":"code","207eec3d":"code","24842173":"code","22ebb8cd":"code","b98fbb9c":"code","72106758":"code","bf7aa31c":"code","59474c6d":"code","514453b6":"code","46b3cc93":"code","58b5329c":"code","442c1ca9":"code","a64a5c7b":"code","9c09cc65":"code","826416a4":"code","5ccedd76":"markdown","75dc1c24":"markdown","1fd65315":"markdown","8dd28230":"markdown","76bea780":"markdown","54bffac7":"markdown","c90ff77a":"markdown","220afcde":"markdown","40db61ee":"markdown","0e49420c":"markdown","4171073e":"markdown","e77a1d68":"markdown","525054de":"markdown","b6ea407c":"markdown","05c991d3":"markdown"},"source":{"5a952eb1":"# This Python 3 environment comes with many helpful analytics libraries installed\n# It is defined by the kaggle\/python docker image: https:\/\/github.com\/kaggle\/docker-python\n# For example, here's several helpful packages to load in \n\n#importando as bibliotecas que dever\u00e3o ser utilizadas\nimport pandas as pd #manipula\u00e7\u00e3o de dados \nimport numpy as np #manipula\u00e7\u00e3o de arrays\nimport matplotlib.pyplot as plt #visualiza\u00e7\u00e3o\nimport seaborn as sns #viualoza\u00e7\u00e3o\nfrom sklearn.ensemble import RandomForestRegressor #Random Forest para detectar import\u00e2ncia de features\nfrom sklearn.preprocessing import LabelEncoder #codifoca\u00e7\u00e3o de dados categ\u00f3ricos em dados inteiros\n\n# Input data files are available in the \"..\/input\/\" directory.\nimport os\nfor dirname, _, filenames in os.walk('\/kaggle\/input'):\n    for filename in filenames:\n        print(os.path.join(dirname, filename))\n# For example, running this (by clicking run or pressing Shift+Enter) will list all files under the input directory\n\n\n# Any results you write to the current directory are saved as output.","956d8b0d":"colunas = ['SG_UF_RESIDENCIA','TP_SEXO','TP_COR_RACA','TP_ESCOLA','Q001','Q002', 'Q006', 'NU_NOTA_CN', 'NU_NOTA_CH', 'NU_NOTA_LC', \n          'NU_NOTA_MT', 'NU_NOTA_REDACAO']\nbase = pd.read_csv('\/kaggle\/input\/enem-2016\/microdados_enem_2016_coma.csv', encoding='latin-1', \n                 sep=',', usecols=colunas)","fa3ad8b1":"total_null = base.isnull().sum().sort_values(ascending = False)\nbase.info()\n\n# Elimina as linhas com nota m\u00e9dia NaN\nbase.dropna(inplace=True)\n\nprint(len(base))","207eec3d":"# Cria nota m\u00e9dia\nbase['NOTA_MEDIA'] = (\n    base['NU_NOTA_CN'] + base['NU_NOTA_CH'] + base['NU_NOTA_LC'] + base['NU_NOTA_MT'] + \n    base['NU_NOTA_REDACAO']) \/ 5.0","24842173":"#nota de corte para os melhores alunos\nnota_corte = base.NOTA_MEDIA.nlargest(round(len(base)*0.05)).min()\nbase_melhores_notas = base[base.NOTA_MEDIA >= nota_corte]\nprint(base_melhores_notas)","22ebb8cd":"notas_medias={'ci\u00eancias da natureza':np.mean(base['NU_NOTA_CN']),\n                                               'Ci\u00eancias Humanas':np.mean(base['NU_NOTA_CH']),\n                                               'Linguagens, C\u00f3digos':np.mean(base['NU_NOTA_LC']),\n                                               'Matem\u00e1tica':np.mean(base['NU_NOTA_MT']),\n                                               'Reda\u00e7\u00e3o':np.mean(base['NU_NOTA_REDACAO'])}\nlists = sorted(notas_medias.items()) \n\nx1, y1 = zip(*lists) \nplt.figure(figsize=(10,6))\n\nplt.bar(x1, y1)\nplt.title('Nota m\u00e9dia por Disciplina')\nplt.xlabel('Disciplina')\nplt.ylabel('Nota')\nplt.show()\n\nnotas_medias_melhores = {'Ci\u00eancias da natureza':np.mean(base_melhores_notas['NU_NOTA_CN']),\n                                               'Ci\u00eancias Humanas':np.mean(base_melhores_notas['NU_NOTA_CH']),\n                                               'Linguagens, C\u00f3digos':np.mean(base_melhores_notas['NU_NOTA_LC']),\n                                               'Matem\u00e1tica':np.mean(base_melhores_notas['NU_NOTA_MT']),\n                                               'Reda\u00e7\u00e3o':np.mean(base_melhores_notas['NU_NOTA_REDACAO'])}\n\nlists = sorted(notas_medias_melhores.items())\n\nx2, y2 = zip(*lists)\nplt.figure(figsize=(10,6))\n\nplt.bar(x2, y2)\nplt.title('Melhores Alunos - Nota m\u00e9dia por Disciplina')\nplt.xlabel('Disciplina')\nplt.ylabel('Nota')\nplt.show()","b98fbb9c":"# Histograma das m\u00e9dias\n\nplt.axes(sns.distplot(base.NOTA_MEDIA))\nplt.title('Histograma de m\u00e9dia das notas')\nplt.xlabel('Nota M\u00e9dia')","72106758":"#numero de alunos por estado\nbase.SG_UF_RESIDENCIA.value_counts().plot.bar(color='green')\nplt.title('N\u00famero de alunos por estado')\nplt.xlabel('Estado')\nplt.ylabel('N\u00famero de alunos')\nplt.show()\n\n #Melhores alunos - numero de alunos por estado\nbase_melhores_notas.SG_UF_RESIDENCIA.value_counts().plot.bar(color='green')\nplt.title('Melhores Alunos - N\u00famero de alunos por estado')\nplt.xlabel('Estado')\nplt.ylabel('N\u00famero de alunos')\nplt.show()","bf7aa31c":"plt.figure(figsize=(12,8))\n\nsns.barplot(\n    x=\"SG_UF_RESIDENCIA\",\n    y=\"NOTA_MEDIA\",\n    data=base, \n    )\nplt.title(\"Distribui\u00e7\u00e3o de notas por estado\")\nplt.xlabel('Estado')\nplt.ylabel('Nota M\u00e9dia')\nplt.show()","59474c6d":"#numero por etnia\nbase_TP_COR_RACA = pd.Series(base.TP_COR_RACA, dtype='category').cat.rename_categories({3:'Parda', 2:'Preta', 1:'Branca', 0:'N\u00e3o Declarado', 4:'Amarela', 5:'Ind\u00edgena', 6:'N\u00e3o dispor'})\nbase_TP_COR_RACA.value_counts().plot.bar(color='blue')\nplt.title('Numero de alunos por etnia')\nplt.xlabel('Etnia')\nplt.ylabel('N\u00famero de alunos')\nplt.show()\n\n#Melhores alunos - numero por etnia\nbase_TP_COR_RACA_m = pd.Series(base_melhores_notas.TP_COR_RACA, dtype='category').cat.rename_categories({3:'Parda', 2:'Preta', 1:'Branca', 0:'N\u00e3o Declarado', 4:'Amarela', 5:'Ind\u00edgena', 6:'N\u00e3o dispor'})\nbase_TP_COR_RACA_m.value_counts().plot.bar(color='blue')\nplt.title('Numero de alunos por etnia')\nplt.xlabel('Etnia')\nplt.ylabel('N\u00famero de alunos')\nplt.show()","514453b6":"#notas por Etnia\nbase['TP_COR_RACA_c'] = base_TP_COR_RACA\nsns.boxplot(x = 'TP_COR_RACA_c', y = 'NOTA_MEDIA', data = base)\nplt.title(\"Nota m\u00e9dia por ra\u00e7a\")\nplt.xlabel('Etnia')\nplt.ylabel('Nota M\u00e9dia')","46b3cc93":" # distribui\u00e7\u00e3o do n\u00famero de alunos por n\u00edvel de renda\nbase.Q006.value_counts().plot.bar(color='blue')\nsns.set_style(\"whitegrid\") \nplt.title('N\u00famero de alunos por renda')\nplt.xlabel('Classe social')\nplt.ylabel('N\u00famero de alunos')\nplt.show()\n\n # Melhores alunos - distribui\u00e7\u00e3o do n\u00famero de alunos por n\u00edvel de renda\nbase_melhores_notas.Q006.value_counts().plot.bar(color='blue')\nsns.set_style(\"whitegrid\") \nplt.title('Melhores Alunos - N\u00famero de alunos por renda')\nplt.xlabel('Classe social')\nplt.ylabel('N\u00famero de alunos')\nplt.show()","58b5329c":"#nota m\u00e9dia por renda\nimport string\nsns.set_style(\"whitegrid\") \nsns.boxplot(x = 'Q006', y = 'NOTA_MEDIA', data = base,\n           order=list(string.ascii_uppercase[:17]))\nplt.title('Nota m\u00e9dia por renda')\nplt.xlabel('Classe social')\nplt.ylabel('Nota M\u00e9dia')\nplt.show()\n","442c1ca9":" #numero de alunos por sexo\nbase.TP_SEXO.value_counts().plot.bar(color='green')\nplt.title('N\u00famero de alunos por g\u00eanero')\nplt.xlabel('Estado')\nplt.ylabel('N\u00famero de alunos')\nplt.show()\n\n #Melhores alunos - numero de alunos por sexo\nbase_melhores_notas.TP_SEXO.value_counts().plot.bar(color='green')\nplt.title('Melhores Alunos - N\u00famero de alunos por g\u00eanero')\nplt.xlabel('Estado')\nplt.ylabel('N\u00famero de alunos')\nplt.show()","a64a5c7b":"#notas por sexo\nsns.boxplot(x = 'TP_SEXO', y = 'NOTA_MEDIA', data = base)\nplt.title(\"Nota m\u00e9dia por sexo\")\nplt.xlabel('Sexo')\nplt.ylabel('Nota M\u00e9dia')","9c09cc65":"base_mulher = base.where(base['TP_SEXO'] == 'F')\nbase_homem = base.where(base['TP_SEXO'] == 'M')\nnotas_medias_mulheres = {'ci\u00eancias da natureza':np.mean(base_mulher['NU_NOTA_CN']),\n                                               'Ci\u00eancias Humanas':np.mean(base_mulher['NU_NOTA_CH']),\n                                               'Linguagens, C\u00f3digos':np.mean(base_mulher['NU_NOTA_LC']),\n                                               'Matem\u00e1tica':np.mean(base_mulher['NU_NOTA_MT']),\n                                               'Reda\u00e7\u00e3o':np.mean(base_mulher['NU_NOTA_REDACAO'])}\n\nlists = sorted(notas_medias_mulheres.items()) \n\nx1, y1 = zip(*lists) \nplt.figure(figsize=(10,6))\n\nplt.bar(x1, y1)\nplt.title('Mulheres - Nota m\u00e9dia por Disciplina')\nplt.xlabel('Disciplina')\nplt.ylabel('Nota')\nplt.show()\n\n\nnotas_medias_homens = {'ci\u00eancias da natureza':np.mean(base_homem['NU_NOTA_CN']),\n                                               'Ci\u00eancias Humanas':np.mean(base_homem['NU_NOTA_CH']),\n                                               'Linguagens, C\u00f3digos':np.mean(base_homem['NU_NOTA_LC']),\n                                               'Matem\u00e1tica':np.mean(base_homem['NU_NOTA_MT']),\n                                               'Reda\u00e7\u00e3o':np.mean(base_homem['NU_NOTA_REDACAO'])}\n\nlists = sorted(notas_medias_homens.items()) \n\nx1, y1 = zip(*lists) \nplt.figure(figsize=(10,6))\n\nplt.bar(x1, y1)\nplt.title('Homens - Nota m\u00e9dia por Disciplina')\nplt.xlabel('Disciplina')\nplt.ylabel('Nota')\nplt.show()","826416a4":"#random forest com 1600 \u00e1rvores.\nrfr = RandomForestRegressor(n_estimators = 1600,\n min_samples_split = 2,\n min_samples_leaf = 1,\n max_features = 'sqrt',\n max_depth = 100,\n bootstrap = False)\nfrom sklearn.preprocessing import LabelEncoder\nLE = LabelEncoder()\n#como a base \u00e9 muito grande, para acelerar o processamento e evitar falta de mem\u00f3ria, vamos amostrar 1% da base,\nbase2 = base.sample(n=round(len(base)*0.01), random_state=42)\nbase2['SG_UF_RESIDENCIA'] = LE.fit_transform(base2['SG_UF_RESIDENCIA'])\nbase2['TP_SEXO'] = LE.fit_transform(base2['TP_SEXO'])\nbase2['Q001'] = LE.fit_transform(base2['Q001'])\nbase2['Q002'] = LE.fit_transform(base2['Q002'])\nbase2['Q006'] = LE.fit_transform(base2['Q006'])\nrfr.fit(base2.drop(columns=['NOTA_MEDIA','NU_NOTA_CN', 'NU_NOTA_CH', 'NU_NOTA_LC', \n          'NU_NOTA_MT', 'NU_NOTA_REDACAO','TP_COR_RACA_c']),base2.NOTA_MEDIA)\n\nfeatures = ['SG_UF_RESIDENCIA','TP_SEXO','TP_COR_RACA','TP_ESCOLA','Q001','Q002', 'Q006']\ntmp = pd.DataFrame({'Feature': features, 'Import\u00e2ncia da feature': rfr.feature_importances_})\ntmp = tmp.sort_values(by='Import\u00e2ncia da feature',ascending=False)\nplt.figure(figsize = (7,4))\nplt.title('Import\u00e2ncia da feature - Random Forest',fontsize=14)\ns = sns.barplot(x='Feature',y='Import\u00e2ncia da feature',data=tmp)\ns.set_xticklabels(s.get_xticklabels(),rotation=90)\nplt.show() ","5ccedd76":"Comparando os gr\u00e1ficos abaixo, notamos que, em geral, a m\u00e9dia da nota em matem\u00e1tica \u00e9 maior entre os homens que as mulheres. Em reda\u00e7\u00e3o, o inverso ocorre, onde mulheres costumam ter uma nota maior. Devido a esses resultados, pode ser importanta que professores de matem\u00e1tica e l\u00edngua portuguesa incentivem mulheres e homens na diciplina em que atua, respectivamente. Esse incentivo pode incrementar o resultado m\u00e9dio final em tais mat\u00e9rias.","75dc1c24":"<h3> Base dos melhores alunos <\/h3>\nAqui vamos fazer uma base que selecionar\u00e1 os 5% dos alunos com as maiores notas m\u00e9dias. O objetivo \u00e9 fazer analise comparativas com a base geral de innscritos. A note de corte para os incristos estarem  na base dos 5% melhores alunos \u00e9 de 649 pontos.","1fd65315":"<h3> M\u00e9dia das notas por Estado <\/h3>\n\nAnalisando os gr\u00e1ficos de barra abaixo, podemos notar que S\u00e3o paulo, Cear\u00e1, Minas Gerais e Bahia possuem o maior n\u00famero de inscritos. Entre os melhores alunos, vamos uma grande parcela deles nos estados de S\u00e3o Paulo, Minas Gerais e Rio de Janeiro (lugares que concentram as melhores escolas do pa\u00eds). Analisando a nota m\u00e9dia por estado, podemos notar que todos os estado da regi\u00e3o Sul e Sudeste atingiram a m\u00e9dia de 500 pontos, ao contr\u00e1rio das regi\u00f5es Norte e Nordeste, onde apenas os estados de Roraima, Sergipe, Goi\u00e1s e Pernabumco alcan\u00e7aram a m\u00e9dia. Tal an\u00e1lise sugere que boa parcela dos investimentos sejam direcionados para os estados dessa regi\u00e3o. ","8dd28230":"<h3> Nota m\u00e9dia por Etnia <\/h3>\nNotamos que os pardos representam o grupo \u00e9tnico com a maior parcela de inscritos. Mas tal representatividade n\u00e3o \u00e9 refletida quando analisamos a base com os melhores alunos, onde a parcela de maior representatividade \u00e9 branca.","76bea780":"<h3> M\u00e9dia das notas por disciplina <\/h3>\n\nAnalisando a m\u00e9dia  das notas em cada disicplina da prova, vemos que na base geral, os inscritos perfomam melhor nas disciplinas de humanas (Ci\u00eancias Humanas, Linguagens e Reda\u00e7\u00e3o). O cen\u00e1rio \u00e9 diferente quando avaliamos os incristos com as melhores notas, com boa perfomence em matem\u00e1tica (atr\u00e1s apenas de Reda\u00e7\u00e3o). Esse resultado demonstra que os melhores alunos se preparam melhor para a mat\u00e9ria de matem\u00e1tica, mat\u00e9ria que possui a pior nota na avalia\u00e7\u00e3o geral.","54bffac7":"Deletamos todas inscritos com valores nulos. Provavelmente s\u00e3o alunos ausentes.","c90ff77a":"Criaremos uma nova coluna, que dever\u00e1 conter a nota m\u00e9dia das 5 disciplinas.","220afcde":"Pelo histograma, a m\u00e9dia das notas \u00e9 pr\u00f3xima de 450, variando entre aproximadamente 300 e 800 pontos (com exce\u00e7\u00e3o dos outliers). A curva norma tem assimetria negativa.","40db61ee":"<h3> Conclus\u00e3o <\/h3>\nA partir da an\u00e1lise do gr\u00e1fico de barras abaixo, notamos que a renda da fam\u00edlia \u00e9 o fator que mais impacta na nota final. Notamos tamb\u00e9m que o estado de origem do inscrito tamb\u00e9m influenccia diretamente no resultado. O grau de escolaridade dos pais tamb\u00e9m \u00e9 um fator que pode determinar a nota m\u00e9dia do inscrito. Podemos concluir a partir dessa e das outras an\u00e1lises anteriores que o investimento na educa\u00e7\u00e3o principalmente em fam\u00edlias menos favorecidas e em estados no Norte e Nordeste (estados que tamb\u00e9m possuem um IDH menor que a m\u00e9dia nacional, al\u00e9m de ter a maior concentra\u00e7\u00e3o de pardos, pretos e ind\u00edgenas no pa\u00eds), deve ser prioridade no gastos de investimentos em educa\u00e7\u00e3o no Brasil.  ","0e49420c":"<h3> Nota m\u00e9dia por n\u00edvel de renda <\/h3>\nNos gr\u00e1ficos de barras abaixo, a renda foi segmentado em letras de A a Q, que segmentam da menor renda (grupo A) at\u00e9 a maior (grupo Q). A maior parcela dos inscritos s\u00e3o representadas pelas classes B, C e D (renda at\u00e9 1760 reais). Com rela\u00e7\u00e3o \u00e0 base dos melhores alunos, nota-se que h\u00e1 boa representatividade dos grupo da grupos G, H, I (pertencentes \u00e0 classe m\u00e9dia alta). Isso ocorre devida a esse grupos terem maior representatividade na base geral, terem maiores oportunidades de investrem em educa\u00e7\u00e3o que a classe baixa e m\u00e9dia baixa e possuirem muitos alunos perfomando muito acima da m\u00e9dia (outliers). \n","4171073e":"<h3> M\u00e9dia das notas por g\u00eanero <\/h3>\nO n\u00famero de inscritos do g\u00eanero feminino \u00e9 maior na base geral e equivalente na base dos melhores alunos. No entanto, na an\u00e1lise da nota m\u00e9dia por sexo, n\u00e3o h\u00e1 nenhuma evid\u00eancia significativa para uma falta de investimento na educa\u00e7\u00e3o em nenhum dos dois g\u00eaneros.","e77a1d68":"<h3> Import\u00e2ncia das vari\u00e1veis na nota m\u00e9dia dos incritos <\/h3>\nPor fim, analisaremos o quanto as vari\u00e1veis (features) da base de dados dos inscritos no ENEM impactam na nota m\u00e9dia final. O m\u00e9todo utilizado \u00e9 o algoritmo de machine learning  random forest, um algoritmo bastante popular, que usa um ensemble de \u00e1rvores de decis\u00e3o para fazer a predi\u00e7\u00e3o. O objetivo \u00e9 encontrar as vari\u00e1veis que mais impactam na vari\u00e1vel preditora (a nota m\u00e9dia). As vari\u00e1veis selecionadas s\u00e3o:\n<ul>\n\n <li><b>Q006<\/b> (renda da fam\u00edlia) <\/li>\n <li><b>SG_UF_RESIDENCIA <\/b>(estado do inscrito) <\/li>\n <li><b>TP_SEXO<\/b> (g\u00eanero) <\/li>\n <li><b>Q002 <\/b> (escolaridade da m\u00e3e) <\/li>\n <li><b>Q001<\/b> (escolaridade do pai) <\/li>\n <li><b>TP_COR_RACA<\/b> (etnia) <\/li>\n <li><b>TP_ESCOLA<\/b> (Tipo de escola do inscrito) <\/li>\n<\/ul>","525054de":"A partir da an\u00e1lise do Boxplot abaixo, podemos verificar como a nota m\u00e9dia cresce linearmente ao aumento da renda da fam\u00edlia dos inscritos. Tamb\u00e9m podemos notar a grande quantidade de outliers superiores nos n\u00edvieis mais baixo de renda (pontos acima da linha dos boxplots). A raz\u00e3o disso \u00e9 o aumento de oportunidades para jovens talentos de baixa renda (classe C), a partir de competi\u00e7\u00f5es em olimp\u00edadas do conhecimento e acesso a escolas p\u00fablicas de qualidade (geralmente militares e federais). Apesar disso, deve-se buscar altos investimentos p\u00fablicos em parcelas da popula\u00e7\u00e3o de classe baixa e m\u00e9dia, com o objetivo n\u00e3o s\u00f3 de balancear a m\u00e9dia das notas por classe social, como tamb\u00e9m reduzir a desigualdade social a partir do acesso mais amplo ao ensino superior.","b6ea407c":"Adicionalmente, os inscritos que se auto-denominam branco tamb\u00e9m possuem uma nota m\u00e9dia melhor, contrastando com as parcelas parda e preta, com as piores notas m\u00e9dias. A justificativa \u00e9 que as etnias parda e preta s\u00e3o na maior parte pertencentes \u00e0 classe social baixa, que impacta diretamente no investimento em educa\u00e7\u00e3o dessa parcela da popula\u00e7\u00e3o.","05c991d3":"<h2> Objetivo <\/h2>\nPara an\u00e1lise explorat\u00f3ria dos dados da base, foi selecionado as vari\u00e1veis que mais representam a varia\u00e7\u00e3o m\u00e9dia das notas do Enem. Foi feita uma an\u00e1lise avaliando a nota  m\u00e9dia por cada categoria das vari\u00e1veis e tamb\u00e9m uma an\u00e1lise comparando a representatividade da categoria entre toda a base e base dos 5% melhores alunos. O objetivo  destas an\u00e1lies \u00e9 justamente avaliar em quais categorias os inscritos tem menor nota m\u00e9dia, o que tornaria poss\u00edvel segment\u00e1-los, justificando investimentos nessa parcela em espec\u00edfico. "}}