{"cell_type":{"98ad62a3":"code","6962c126":"code","18c16d2c":"code","a9b72311":"code","00c6be28":"code","c97dcf37":"code","52152f19":"code","5114008e":"markdown","129e30fd":"markdown","93048f37":"markdown","a43d0e75":"markdown","925904d6":"markdown","11f4608a":"markdown","c7dec855":"markdown","911e7485":"markdown","58ab4e9e":"markdown"},"source":{"98ad62a3":"!pip install ipyplot -q\nfrom fastai.vision.all import *\nimport pandas as pd\nimport numpy as np\nimport cv2\nimport ipyplot\nimport imageio\nimport matplotlib.pyplot as plt\nimport seaborn as sns\n%matplotlib inline\n\n#check dir's we have\nprint(os.listdir(\"..\/input\/hpa-single-cell-image-classification\/\"))\npath = Path('..\/input\/hpa-single-cell-image-classification')","6962c126":"#get train csv file and display what we have\ntrain_df = pd.read_csv(\"..\/input\/hpa-single-cell-image-classification\/train.csv\")\ntrain_df.tail()","18c16d2c":"'''\nColors are red for microtubule channels,\nblue for nuclei channels,\nyellow for Endoplasmic Reticulum (ER) channels,\nand green for protein of interest\n'''\nimage = cv2.imread(\"..\/input\/hpa-single-cell-image-classification\/train\/df00f6c6-bbb2-11e8-b2ba-ac1f6b6435d0_blue.png\")\nimage = cv2.cvtColor(image, cv2.COLOR_BGR2RGB)\nprint(image.shape)\nplt.imshow(image)\nplt.show()\n","a9b72311":"'''\nstacking three images: red, blue, yellow\n'''\nr = plt.imread(\"..\/input\/hpa-single-cell-image-classification\/train\/df00f6c6-bbb2-11e8-b2ba-ac1f6b6435d0_red.png\")\nb = plt.imread(\"..\/input\/hpa-single-cell-image-classification\/train\/df00f6c6-bbb2-11e8-b2ba-ac1f6b6435d0_blue.png\")\ny = plt.imread(\"..\/input\/hpa-single-cell-image-classification\/train\/df00f6c6-bbb2-11e8-b2ba-ac1f6b6435d0_yellow.png\")\nstacked = np.dstack((r,b,y))\nplt.imshow(stacked)","00c6be28":"train_df['num_classes'] = train_df['Label'].apply(lambda r: len(r.split('|')))\ntrain_df['num_classes'].value_counts().plot.bar(title='Multiple labels', xlabel='Labels per example', ylabel='# train examples')\nplt.show()","c97dcf37":"'''\nstacking three images: red, blue, green\n'''\nr = plt.imread(\"..\/input\/hpa-single-cell-image-classification\/train\/df00f6c6-bbb2-11e8-b2ba-ac1f6b6435d0_red.png\")\nb = plt.imread(\"..\/input\/hpa-single-cell-image-classification\/train\/df00f6c6-bbb2-11e8-b2ba-ac1f6b6435d0_blue.png\")\ny = plt.imread(\"..\/input\/hpa-single-cell-image-classification\/train\/df00f6c6-bbb2-11e8-b2ba-ac1f6b6435d0_green.png\")\nstacked = np.dstack((r,b,y))\nplt.imshow(stacked)","52152f19":"labels = [str(i) for i in range(19)]\nclass_img = []\nfor l in labels:\n    r_img = train_df[train_df.Label == l].reset_index(drop=True).ID.loc[0] + '_red.png'\n    y_img = train_df[train_df.Label == l].reset_index(drop=True).ID.loc[0] + '_yellow.png'\n    b_img = train_df[train_df.Label == l].reset_index(drop=True).ID.loc[0] + '_blue.png'\n    r = imageio.imread(path\/'train'\/r_img)\n    y = imageio.imread(path\/'train'\/y_img)\n    b = imageio.imread(path\/'train'\/b_img)\n    ryb = np.dstack((r,y,b))\n    class_img.append(PILImage.create(ryb))\n\ncodes = [\n'0. Nucleoplasm',\n'1. Nuclear membrane',\n'2. Nucleoli',\n'3. Nucleoli fibrillar center',\n'4. Nuclear speckles',\n'5. Nuclear bodies',\n'6. Endoplasmic reticulum',\n'7. Golgi apparatus',\n'8. Intermediate filaments',\n'9. Actin filaments',\n'10. Microtubules',\n'11. Mitotic spindle',\n'12. Centrosome',\n'13. Plasma membrane',\n'14. Mitochondria',\n'15. Aggresome',\n'16. Cytosol',\n'17. Vesicles and punctate cytosolic patterns',\n'18. Negative'\n]\n\nipyplot.plot_images(images=class_img, labels=codes, max_images=32, img_width=500)","5114008e":"**Let's now visualize only images representing single class**","129e30fd":"**Plot one image from train dir**","93048f37":"**Now let's try combining red, blue, green channels and see what we have**","a43d0e75":"# **EDA for HPA single cell classification**\n\nThis notebook is written for EDA, I will be updating in future as have more insights.\n","925904d6":"Let's have a look on combination of labels. ","11f4608a":"# Lets import some useful libraries first","c7dec855":"**As from above we see ID: for image ID we have in train folder, Label: image basis labels. Following below describe each label from total of 19.**\n> 0. Nucleoplasm \n> 1. Nuclear membrane \n> 2. Nucleoli \n> 3. Nucleoli fibrillar center \n> 4. Nuclear speckles \n> 5. Nuclear bodies \n> 6. Endoplasmic reticulum \n> 7. Golgi apparatus \n> 8. Intermediate filaments \n> 9. Actin filaments \n> 10. Microtubules \n> 11. Mitotic spindle \n> 12. Centrosome \n> 13. Plasma membrane \n> 14. Mitochondria \n> 15. Aggresome \n> 16. Cytosol \n> 17. Vesicles and punctate cytosolic patterns \n> 18. Negative ","911e7485":" **Please upvote if you found this helpful, I will be updating as explore more!**","58ab4e9e":"**Let's combine three channels together (red, blue, yellow) and plot.**"}}