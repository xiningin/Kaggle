{"cell_type":{"4a9fcc44":"code","50d70900":"code","31583998":"code","bf526e3e":"code","d01d93fc":"code","046c591b":"code","febad494":"code","0cb44cba":"code","e82ad863":"code","0f03b8a6":"code","d46a5d76":"code","86c1d009":"code","aad30f2a":"code","2fc2016f":"code","fbd4529b":"code","4d51546b":"code","37a7eeaf":"code","5b11889a":"code","bd6a077f":"code","33f205ec":"code","5078e8ed":"code","32f04e86":"code","a583414f":"code","5fb2e8bd":"code","21bbe126":"code","a7ca5ff4":"code","ed90f9da":"code","91cbe67b":"code","62553e0d":"code","80ef30ca":"code","1d7b5e5f":"code","f0361af1":"code","3d2caed9":"code","f4375b62":"code","819a7fa2":"code","cce20d42":"code","7c6f56aa":"code","9e3ce9c7":"code","5e727f84":"code","933097eb":"markdown","fb8ba128":"markdown","24a3eee8":"markdown","b8882abb":"markdown","9a525ed4":"markdown","061ef913":"markdown","a6a12ea4":"markdown","0f0c4a6f":"markdown","25293500":"markdown","7a0b1811":"markdown","1122732a":"markdown","6e4ee754":"markdown","1c166bc3":"markdown","46a996a5":"markdown","f708879c":"markdown","5d306606":"markdown","a04307be":"markdown","05dffeb9":"markdown","ab0d8a9f":"markdown","e2a19855":"markdown","11192c54":"markdown","c9c03767":"markdown","ecd740d6":"markdown","88ee0bb9":"markdown","617d805e":"markdown","284accaa":"markdown","15c7ecf0":"markdown","f5344ed6":"markdown","9cd02a52":"markdown","3040c70d":"markdown","cfac0117":"markdown","fecbed21":"markdown","8cf4b3d8":"markdown","7b1940fb":"markdown","eae37eff":"markdown","280d1880":"markdown","0fcc6062":"markdown","04f7a88d":"markdown"},"source":{"4a9fcc44":"import pandas as pd\nimport seaborn as sns\nimport matplotlib.pyplot as plt\nfrom scipy.stats import skew,norm\nimport numpy as np\n\n%matplotlib inline","50d70900":"def draw_countfig(data,x,hue=None, figs_num=1, figsize=(20,5), title1=\"\", title2=\"\",rotation = 90,order=None, legend_loc='upper right'):\n    if figs_num == 2:\n        f, ax = plt.subplots(1,2, figsize=(20,5))\n        ax1 = sns.countplot(x=data[x], order=order, ax=ax[0]);\n        ax2 = sns.countplot(x=x, hue=hue, data=data, order=order);\n        plt.legend(loc='upper right')\n        plt.xticks(rotation=rotation)\n        ax1.title.set_text(title1)\n        ax2.title.set_text(title2)\n        plt.show()\n    elif (figs_num==1) & (hue != None):\n        plt.figure(figsize=figsize)\n        ax = sns.countplot(x=data[x], data=data, hue=hue);        \n        ax.set_title(title1)\n        plt.legend(loc='upper right')\n        plt.xticks(rotation=rotation)\n        plt.show()\n    elif figs_num==1:\n        plt.figure(figsize=figsize)\n        ax = sns.countplot(x=data[x], data=data);        \n        ax.set_title(title1)\n        plt.xticks(rotation=rotation)\n        plt.show()\n    ","31583998":"# Load your data and print out a few lines. Perform operations to inspect data\n#   types and look for instances of missing or possibly errant data.\n\ndata = pd.read_csv(\"..\/input\/noshowappointments\/KaggleV2-May-2016.csv\")\n\ndata.head()","bf526e3e":"data.tail()","d01d93fc":"# get general information about the dataset\ndata.info()","046c591b":"# get some basic descriptive statistics about the dataset\ndata.describe()","febad494":"# check for duplicates\ndata.duplicated().sum()","0cb44cba":"data.columns","e82ad863":"#Renaming columns\ndata.rename(columns = lambda x: x.strip().lower().replace(\"-\", \"_\"), inplace=True)","0f03b8a6":"# check columns name change\ndata.head()","d46a5d76":"# convert both scheduleday and appointmentday to date.\ndata['scheduledday'] = pd.to_datetime(data['scheduledday']).astype('datetime64[ns]')\ndata['appointmentday'] = pd.to_datetime(data['appointmentday'].astype('datetime64[ns]'))","86c1d009":"#check if date changed from string into datetime type\ndata.info()","aad30f2a":"data['appointmentid'].nunique()","2fc2016f":"data['patientid'].nunique()","fbd4529b":"data['age'].unique()","4d51546b":"# patient with age less than 0\nprint(\"Number of patients with age less than zero: \", data[data['age'] <0].shape[0])","37a7eeaf":"# patient with age equal to 0\nprint(\"Number of patients with age less than zero: \", data[data['age'] == 0].shape[0])","5b11889a":"# patient with age larger than 100\nprint(\"Number of patients with age larger than 100: \",data[data['age'] > 100].shape[0])","bd6a077f":"# drop patient with -1 year old.\ndata.drop(data[data['age'] == -1].index, axis=0, inplace=True)","33f205ec":"# check for negative values\ndata['age'].unique()","5078e8ed":"# exploring the distribution of the target variable (no-show)\ndraw_countfig(data,'no_show',figs_num=1, title1='Patients show and no_show count',figsize=(6,4))","32f04e86":"# number of patients that missed the appointment\nprint(\"Number of patients that missed the appointments is: \", data[data['no_show'] == 'Yes'].shape[0],\n      \"Number of patients that have the appointments is: \", data[data['no_show'] == 'No'].shape[0])","a583414f":"f,ax = plt.subplots(1,2,figsize=(16,5))\nsns.distplot(data['age'],fit=norm,ax=ax[0], bins=20)\nsns.boxplot(data['age'])\nplt.show()","5fb2e8bd":"draw_countfig(data,'age','no_show',rotation=90, title1= \"Age Show \/ No show patients\")","21bbe126":"# bin the age with base 5 \nbin_ranges = np.arange(0,data['age'].max(),5)\n\ndata['age_bins'] = pd.cut(data['age'],bin_ranges)","a7ca5ff4":"draw_countfig(data,x='age_bins',hue='no_show')","ed90f9da":"fig_title = \"Number of Patients based on Gender\"\ndraw_countfig(data,x='gender', figsize=(6,4), rotation=0,title1=fig_title)","91cbe67b":"print(\"Number of Female patients: \", data[data['gender'] == 'F'].shape[0],\n      \"Number of Male patients: \", data[data['gender'] == 'M'].shape[0])","62553e0d":"fig_title = \"Show \/ No show patients based on Gender\"\ndraw_countfig(data,x='gender', hue='no_show', title1=fig_title, figsize=(8,5))","80ef30ca":"data.groupby('no_show')['gender'].value_counts()","1d7b5e5f":"draw_countfig(data,x='age_bins',hue='gender')","f0361af1":"data.columns","3d2caed9":"# get the name of the day from both schedule and appointment days\ndata['scheduledday_name'] = data['scheduledday'].dt.day_name()\n# data['appointmentday_name'] = data['appointmentday'].dt.day_name()\n\nweek_order = ['Monday','Tuesday','Wednesday','Thursday','Friday','Saturday','Sunday']","f4375b62":"# plot a count plot for schedule day and its relation with no_show\ntitle1 = 'Number of schedules in per week'\ntitle2 = 'Relationship between schedule day and show up'\ndraw_countfig(data,x='scheduledday_name', hue='no_show',title1= title1, title2=title2,figs_num=2)","819a7fa2":"title1 = \"Number of scholarships for patients\"\ntitle2 = \"Show \/ No show based on Scholarship\"\ndraw_countfig(data, x='scholarship',hue='no_show',figs_num=2, title1=title1, title2=title2)","cce20d42":"data.groupby('no_show')['scholarship'].value_counts()","7c6f56aa":"draw_countfig(data,x='age_bins',hue='scholarship')","9e3ce9c7":"data.tail(10)","5e727f84":"data.appointmentday.dt.month_name().unique()","933097eb":"We can see that our dataset has no duplicates","fb8ba128":"From the above figures, We can see that:\n\n- a little number of patients has a scholarship.\n\n- nearly 80% of patients without scholarship have a show up.\n\n- nearly 75% of patients with a scholarship have a show up.\n\n- patients in ages from 30 to 45 seems to miss their appointment.\n\n","24a3eee8":"\n\n# Project: Medical Appointment No Shows Data Analysis\n\n## Table of Contents\n<ul>\n<li><a href=\"#intro\">Introduction<\/a><\/li>\n<li><a href=\"#wrangling\">Data Wrangling<\/a><\/li>\n<li><a href=\"#eda\">Exploratory Data Analysis<\/a><\/li>\n<li><a href=\"#conclusions\">Conclusions<\/a><\/li>\n<\/ul>","b8882abb":"We will start by exploring the target variable (no-show)","9a525ed4":"From the distribution figure, we can see that **age** variable far a little from the normal distribution.\nThe distribution is nearly skew to right as there some age larger than 100 years old.\n\nFrom the box plot, it is clear that there are a few data points that can be considered as outliers.","061ef913":"> We can see that patients with age 0 and 1 shows a high count for appointment. They have a high rate for showing an appointment and also a high rate for not showing an appointment.\n\n> I think what will happened if we divided the age variable into categories.\n","a6a12ea4":"We can conclude from these two features that on average the patient has 2 visits for the hospital.","0f0c4a6f":"In this subsection, we will try to figure out if there are any relationships between gender and show up appointment","25293500":"To avoid repetitive code for visualizing figures such as count plot, I wrote draw_countfig method to overcome this issue.","7a0b1811":"<a id='eda'><\/a>\n## Exploratory Data Analysis\n\n\n### Who visits the physicians more? ","1122732a":"From the above figure, we can see that both females and males miss their appointments nearly equally.\nThus, after this exploration I think gender don't have any impact or slightly impact on the appointment show up.","6e4ee754":"**To conclude the results**\n\n> It is clear that **age** feature is an important feature and slightly has an impact on determination if the patient will take an appointment or not.\n\n> We found that Males at age 10 visit the doctor more than Females. After age 10, Females visit the doctors 2 times than Males.\n\n> Scholarship is a great motivation for the patients to take an appointment.","1c166bc3":"Well, I don't think it gives us more insights. But I can notice that age period (15,20) has the hightest rate of no-show.","46a996a5":"### Fixing Data","f708879c":"### Is the scholarship has an impact on show up?","5d306606":"#### Gender variable effect","a04307be":"#### Age variable effect","05dffeb9":"The First step after loading data is getting some information about our data.\n\n**From this info() method we can conclude that:**\n\n- The dataset consists of 110527 rows or records.\n- It has 14 columns (13 independent variable and 1 dependent variable).\n- There are no any missing values\n- Both ScheduledDay and AppointmentDay saved as string not date\n- The dataset size is 11.8 MB.","ab0d8a9f":"> It is clear that most of the patients are females, as they visit the doctors nearly 2 times than males. Thus, It may be an important factor.\n\n> I will dig in more to find any relationship between gender and show up an appointment. ","e2a19855":"Firstly, we will rename columns to lowercase to make names consistent and avoid confusing","11192c54":"In this subsection, we will try to figure out if scholarship has an impact on showing up or not.","c9c03767":"It is clear that, untill age 10 Males visit the doctor more than Females. After age 10, Females visit the doctors 2 times than Males.","ecd740d6":"**From this statistical information about the numerical data**\n\nWe can the Age variable has some negative values and large which is not realistic, we will do more exploration and handle this error.\nThere are binary variables. ","88ee0bb9":"<a id='wrangling'><\/a>\n## Data Wrangling\n\n\n### General Properties","617d805e":"**Some interesting Questions**\n\nThe first and the most important question is, why patient miss their show up?\n\nWe also, try to figure out if missing a show up has any relation or pattern with any of\nage, gender, the actual appointment day or financial aid or not.\nWho visits the doctors more?\n","284accaa":"From the preceding cells we can conclude that:\n\n- There is one patient with negative which doesn't make sense, thus we will drop it as it may be an error.\n- There are 3539 patients with age equal to zero, these patients could be babies with only months as age variable in years.\n- There are 7 patients with age larger than 100 years old, it may be error or real value. I prefer to test the model with and without it as it may be outliers.","15c7ecf0":"**Medical Appointment No Shows**\n\nI chose to work this dataset to explore and find why patients miss there appointments.\n \nThis dataset has information from 100k medical appointments in Brazil. A number of characteristics about the patient are\nincluded in each row. The dataset consists of some features that represent the patient appointment case such as age, schedule date, gender, and the most important variable show up.","f5344ed6":"<a id='conclusions'><\/a>\n## Conclusions\n","9cd02a52":"**Dataset Limitations**\n\nAfter Investigating the data, I see that there are some limitations:\n\n> The appointment spans in 3 months, April, May ,June for year 2016 which means that this is subset from a whole dataset, Thus it didn't provide us with more insights and make the analysis difficult. Thus, providing more data or the whole data will guide us to find more patterns and relationships between the features and target variables.\n\n> Also, The time of appointment during the day is missing, I think providing the time will help us in the analysis.\n\n> The dataset is imbalance and this is a serious problem in analysis.\n\n> I think that the patient is not exposed correctly.\n","3040c70d":"#### Target Variable ","cfac0117":"**I will try to find any correlation between age and gender in visiting doctors**\n\nIn the next cell, I will plot count of both genders to visit the doctors based on age.","fecbed21":"We converted both scheduleday and appointmentday from string to datatime type to be able to handle them and explore them more.","8cf4b3d8":"#### Schedule Day ","7b1940fb":"From the bar chart, we can see that nearly 25% of patients didn't have the change to show up.\nAnd this is our target.\n\nThe dataset is imbalance and this is a serious issue, that we will handle it in the classification step.","eae37eff":"The notebook is still under working for exploring more features :) ","280d1880":"**From the above visulization we can find that:**\n\n- It seems that the center or the hospital receive only 24 calls for appointments in Saturday and didn't receive any calls for an appointment in Sunday, the weekend.\n\n- It is slightly high that patients call for an appointments in day, Monday, Tuesday, Wendsday, to have a show up.","0fcc6062":"In this subsection, we will try to explore the schedule days to find more insights about the show up.","04f7a88d":"<a id='intro'><\/a>\n## Introduction"}}