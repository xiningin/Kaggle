{"cell_type":{"8a476d2f":"code","df6100e9":"code","0fcc1e0b":"code","f6c50fe1":"code","d0d81e95":"code","51ca5a0a":"code","7f53f083":"code","dea588db":"code","254dd486":"code","69f84257":"code","089b4484":"code","401b5aa8":"code","4d36638c":"code","9a536c4d":"code","f2d85287":"code","e3c0abdb":"code","e7a2988f":"code","082bfdd8":"code","8f7de163":"code","d03ffd7b":"code","73be5705":"code","11163faf":"code","090885ef":"markdown","f4905b85":"markdown","6cd970e7":"markdown","bcaba6ff":"markdown","ee5a64fe":"markdown","2ae87b4e":"markdown"},"source":{"8a476d2f":"import json\nfrom kaggle_environments.envs.halite.helpers import *\nfrom kaggle_environments import evaluate, make\nfrom kaggle_environments.envs.halite.helpers import *\nimport numpy as np\nimport pandas as pd\n","df6100e9":"with open('..\/input\/1235217json\/1235217.json') as file:\n    data = json.load(file)\n\nenv = make('halite', configuration=data['configuration'], steps=data['steps'])\nenv.render(mode=\"ipython\", width=800, height=600)\n","0fcc1e0b":"pre_count = 1\nsteps = []\nboard_halite = []\np0_halite = []\np1_halite = []\np2_halite = []\np3_halite = []\np0_cargo = []\np1_cargo = []\np2_cargo = []\np3_cargo = []\np0_ships = []\np1_ships = []\np2_ships = []\np3_ships = []\np0_shipyards = []\np1_shipyards = []\np2_shipyards = []\np3_shipyards = []\nconfiguration = env.configuration\n\nfor step_env in env.steps:\n    observation = step_env[0]['observation']\n    board = Board(observation, configuration)\n    steps.append(observation['step'])\n    last_step = observation['step']\n    board_halite.append(sum(observation['halite']))\n    p0_halite.append(board.players[0].halite)\n    p1_halite.append(board.players[1].halite)\n    p2_halite.append(board.players[2].halite)\n    p3_halite.append(board.players[3].halite)\n    p0_cargo.append(sum([ship.halite for ship in board.players[0].ships]))\n    p1_cargo.append(sum([ship.halite for ship in board.players[1].ships]))\n    p2_cargo.append(sum([ship.halite for ship in board.players[2].ships]))\n    p3_cargo.append(sum([ship.halite for ship in board.players[3].ships]))\n    p0_ships.append(len(board.players[0].ship_ids))\n    p1_ships.append(len(board.players[1].ship_ids))\n    p2_ships.append(len(board.players[2].ship_ids))\n    p3_ships.append(len(board.players[3].ship_ids))\n    p0_shipyards.append(len(board.players[0].shipyard_ids))\n    p1_shipyards.append(len(board.players[1].shipyard_ids))\n    p2_shipyards.append(len(board.players[2].shipyard_ids))\n    p3_shipyards.append(len(board.players[3].shipyard_ids))\n\ndf = pd.DataFrame(\n    data={'step': steps, 'board_halite': board_halite,\n          'p0_halite': p0_halite,\n          'p1_halite': p1_halite,\n          'p2_halite': p2_halite,\n          'p3_halite': p3_halite,\n          'p0_cargo': p0_cargo,\n          'p1_cargo': p1_cargo,\n          'p2_cargo': p2_cargo,\n          'p3_cargo': p3_cargo,\n          'p0_ships': p0_ships,\n          'p1_ships': p1_ships,\n          'p2_ships': p2_ships,\n          'p3_ships': p3_ships,\n          'p0_shipyards': p0_shipyards,\n          'p1_shipyards': p1_shipyards,\n          'p2_shipyards': p2_shipyards,\n          'p3_shipyards': p3_shipyards,\n          },\n    columns=['step', 'board_halite',\n             'p0_halite',\n             'p1_halite',\n             'p2_halite',\n             'p3_halite',\n             'p0_cargo',\n             'p1_cargo',\n             'p2_cargo',\n             'p3_cargo',\n             'p0_ships',\n             'p1_ships',\n             'p2_ships',\n             'p3_ships',\n             'p0_shipyards',\n             'p1_shipyards',\n             'p2_shipyards',\n             'p3_shipyards',\n             ]\n)\ndf['p0_total_halite']  = df['p0_halite'] + df['p0_cargo']\ndf['p1_total_halite']  = df['p1_halite'] + df['p1_cargo']\ndf['p2_total_halite']  = df['p2_halite'] + df['p2_cargo']\ndf['p3_total_halite']  = df['p3_halite'] + df['p3_cargo']\n\ndf","f6c50fe1":"df.describe()","d0d81e95":"import seaborn as sns\nimport numpy as np                             \nimport pandas as pd                              \nimport matplotlib.pyplot as plt\nimport seaborn as sns; sns.set() \nsns.set()\n","51ca5a0a":"df0 = pd.DataFrame(\ndata={'player':'p0','step': steps, 'board_halite': board_halite,\n    'halite': p0_halite,\n    'cargo': p0_cargo,\n    'ships': p0_ships,\n    'shipyards': p0_shipyards,\n},\ncolumns=['player','step', 'board_halite',\n     'halite',\n     'cargo',\n     'ships',\n     'shipyards',\n ]\n)\ndf1 = pd.DataFrame(\ndata={'player':'p1','step': steps, 'board_halite': board_halite,\n    'halite': p1_halite,\n    'cargo': p1_cargo,\n    'ships': p1_ships,\n    'shipyards': p1_shipyards,\n},\ncolumns=['player','step', 'board_halite',\n     'halite',\n     'cargo',\n     'ships',\n     'shipyards',\n ]\n)\ndf2 = pd.DataFrame(\ndata={'player':'p2','step': steps, 'board_halite': board_halite,\n    'halite': p2_halite,\n    'cargo': p2_cargo,\n    'ships': p2_ships,\n    'shipyards': p2_shipyards,\n},\ncolumns=['player','step', 'board_halite',\n     'halite',\n     'cargo',\n     'ships',\n     'shipyards',\n ]\n)\ndf3 = pd.DataFrame(\ndata={'player':'p3','step': steps, 'board_halite': board_halite,\n    'halite': p3_halite,\n    'cargo': p3_cargo,\n    'ships': p3_ships,\n    'shipyards': p3_shipyards,\n},\ncolumns=['player','step', 'board_halite',\n     'halite',\n     'cargo',\n     'ships',\n     'shipyards',\n ]\n)\n\ndf_merged = pd.concat([df0,df1,df2,df3])\n","7f53f083":"df_merged['total_halite'] = df_merged['halite'] + df_merged['cargo']\ndf_merged['cargo_average']  = df_merged['cargo'] \/ df_merged['ships']\ndf_merged['cargo_percentage'] = df_merged['cargo'] \/ df_merged['total_halite']","dea588db":"df_merged","254dd486":"plt.figure(figsize=(12,8))\nplt.title(\"player halite at game end\", fontsize=15)\nsns.barplot(data=df_merged[df_merged['step']==last_step],x='player',y='halite',ci=None)\nplt.ylabel('halite', fontsize=12)\nplt.xlabel('player', fontsize=12)\nplt.show()","69f84257":"plt.figure(figsize=(12,8))\nplt.title(\"average halite in game\", fontsize=15)\nsns.barplot(data=df_merged,x='player',y='halite',ci=None)\nplt.ylabel('mean halite', fontsize=12)\nplt.xlabel('player', fontsize=12)\nplt.show()","089b4484":"plt.figure(figsize=(12,8))\nplt.title(\"player cargo at game end\", fontsize=15)\nsns.barplot(data=df_merged[df_merged['step']==last_step],x='player',y='cargo',ci=None)\nplt.ylabel('cargo', fontsize=12)\nplt.xlabel('player', fontsize=12)\nplt.show()","401b5aa8":"plt.figure(figsize=(12,8))\nplt.title(\"player halite time line\", fontsize=15)\nsns.lineplot(data=df_merged,x='step',y='halite' ,hue='player')\nplt.ylabel('halite', fontsize=12)\nplt.show()","4d36638c":"plt.figure(figsize=(12,8))\nplt.title(\"player and board halite time line\", fontsize=15)\nsns.lineplot(data=df_merged,x='step',y='halite' ,hue='player')\nsns.lineplot(data=df,x='step',y='board_halite' ,color='black')\nplt.ylabel('halite', fontsize=12)\nplt.show()","9a536c4d":"plt.figure(figsize=(12,8))\nplt.title(\"player cargo time line\", fontsize=15)\nsns.lineplot(data=df_merged,x='step',y='cargo', hue='player')\nplt.ylabel('cargo', fontsize=12)\nplt.show()\n","f2d85287":"plt.figure(figsize=(12,8))\nplt.title(\"player cargo and board halite time line\", fontsize=15)\nsns.lineplot(data=df_merged,x='step',y='cargo', hue='player')\nsns.lineplot(data=df,x='step',y='board_halite' ,color='black')\nplt.ylabel('cargo', fontsize=12)\nplt.show()\n","e3c0abdb":"plt.figure(figsize=(12,8))\nplt.title(\"total halite (halite + cargo) time line\", fontsize=15)\nsns.lineplot(data=df_merged,x='step',y='total_halite', hue='player')\nplt.ylabel('halite (halite + cargo)', fontsize=12)\nplt.show()\n","e7a2988f":"plt.figure(figsize=(12,8))\nplt.title(\"cargo percentage (cargo \/ (halite + cargo)) time line\", fontsize=15)\nsns.lineplot(data=df_merged,x='step',y='cargo_percentage', hue='player')\nplt.ylabel('cargo percentage (cargo \/ (halite + cargo))', fontsize=12)\nplt.show()\n","082bfdd8":"plt.figure(figsize=(12,8))\nplt.title(\"total shipyard count time line\", fontsize=15)\nsns.lineplot(data=df_merged,x='step',y='shipyards', hue='player')\nplt.ylabel('shipyard count', fontsize=12)\nplt.show()","8f7de163":"plt.figure(figsize=(12,8))\nplt.title(\"average shipyard count in game\", fontsize=15)\nsns.barplot(data=df_merged,x='player',y='shipyards',ci=None)\nplt.ylabel('mean shipyard count', fontsize=12)\nplt.xlabel('player', fontsize=12)\nplt.show()","d03ffd7b":"plt.figure(figsize=(12,8))\nplt.title(\"total ship count time line\", fontsize=15)\nsns.lineplot(data=df_merged,x='step',y='ships', hue='player')\nplt.ylabel('ship count', fontsize=12)\nplt.show()\n","73be5705":"plt.figure(figsize=(12,8))\nplt.title(\"average ship count in game\", fontsize=15)\nsns.barplot(data=df_merged,x='player',y='ships',ci=None)\nplt.ylabel('mean ship count', fontsize=12)\nplt.xlabel('player', fontsize=12)\nplt.show()","11163faf":"plt.figure(figsize=(12,8))\nplt.title(\"cargo average(cargo \/ ship count)  time line\", fontsize=15)\nsns.lineplot(data=df_merged,x='step',y='cargo_average', hue='player')\nplt.ylabel('cargo average', fontsize=12)\nplt.show()\n","090885ef":"# What's this\n- Visualize battle results from leaderboard downloaded or\n- use this notebook with any local result json file \n\n\n![__results___17_0.png](attachment:__results___17_0.png)","f4905b85":"# change env to Dataframe","6cd970e7":"# make env from result json file","bcaba6ff":"# Visualization","ee5a64fe":"- next upload file to notebook (Add data button)\n\n\n![%E3%82%B9%E3%82%AF%E3%83%AA%E3%83%BC%E3%83%B3%E3%82%B7%E3%83%A7%E3%83%83%E3%83%88%202020-07-02%2023.02.10.png](attachment:%E3%82%B9%E3%82%AF%E3%83%AA%E3%83%BC%E3%83%B3%E3%82%B7%E3%83%A7%E3%83%83%E3%83%88%202020-07-02%2023.02.10.png)","2ae87b4e":"# Step\n- first download json here\n\n\nreplay.png![image.png](attachment:image.png)"}}