{"cell_type":{"c28fe270":"code","52dd8e2a":"code","5d9a46e0":"code","114a71f5":"code","2770b2d8":"code","eaf3636d":"code","f7df8e28":"code","ace0bb0d":"code","a943fb46":"code","73d84a46":"code","8b90139f":"code","aa2741c7":"code","c160effe":"code","9faf2e0b":"code","f458a0fa":"code","afa15d81":"code","bf46d14e":"code","f1a67a6f":"code","b83ff638":"code","8207b3f0":"code","3b69a818":"code","957cf241":"code","042c9724":"markdown","93e5774b":"markdown","5f6a0f2f":"markdown","a0a5ed7e":"markdown","ab1616fa":"markdown","16429c1b":"markdown","e796fd91":"markdown","b13f4266":"markdown","bba64781":"markdown","d73ec578":"markdown"},"source":{"c28fe270":"\nimport numpy as np\nfrom sklearn.pipeline import Pipeline\nimport matplotlib.pyplot as plt\nfrom sklearn import linear_model ,neighbors,preprocessing,svm,tree\nfrom sklearn.neighbors import NearestNeighbors\nfrom sklearn.preprocessing import StandardScaler,LabelEncoder\nimport pandas as pd\nfrom IPython.display import display\nfrom sklearn.utils import shuffle\nfrom sklearn.model_selection import train_test_split\nimport warnings\nfrom sklearn.naive_bayes import GaussianNB\nimport matplotlib.pyplot as plt\nfrom sklearn import linear_model , neighbors,preprocessing,svm,tree\nfrom sklearn.linear_model import LogisticRegression,LinearRegression\nfrom sklearn.neighbors import NearestNeighbors,KNeighborsClassifier\nfrom sklearn.preprocessing import StandardScaler\nfrom sklearn.metrics import r2_score,accuracy_score,make_scorer\nimport seaborn as sns\nfrom sklearn.model_selection import GridSearchCV\nfrom sklearn.ensemble import RandomForestClassifier,VotingClassifier,ExtraTreesClassifier,BaggingClassifier\nfrom sklearn.linear_model import Lasso, ElasticNet, LinearRegression\nimport sys\nfrom xgboost import XGBRegressor\npd.set_option('display.max_rows', 100)\npd.set_option('display.max_columns', 100)\n# plt.style.use('dark_background')\nimport vecstack\nfrom vecstack import stacking\nfrom xgboost import XGBClassifier\nwarnings.filterwarnings('ignore')\nfrom scipy.stats import probplot\nfrom itertools import combinations\nfrom sklearn.neighbors import NearestNeighbors\nfrom sklearn.metrics import r2_score,accuracy_score,make_scorer,log_loss,precision_score\nimport seaborn as sns\nfrom sklearn.model_selection import GridSearchCV,KFold,cross_val_score\nfrom sklearn.neural_network import MLPClassifier\nfrom sklearn.svm import NuSVC,SVC\nfrom scipy import std ,mean\nfrom scipy.stats import norm\nfrom scipy import stats\n\n\n\ndata=pd.read_csv ('..\/input\/new-york-city-airbnb-open-data\/AB_NYC_2019.csv')\n\n\nfrom pylab import rcParams\n\n\nsns.set_palette('dark')\nplt.rcParams['figure.figsize'] = [13, 6.5] \nsns.set_context(\"paper\", rc={\"font.size\":15,\"axes.titlesize\":22,\"axes.labelsize\":20,\"xtick.labelsize\":13,\"ytick.labelsize\":13,\"legend.fontsize\":12,\"figure.suptitlesize\":25}) ","52dd8e2a":"data.drop(['id','host_name','last_review'], axis=1, inplace=True)\n\npopular=data.host_id.value_counts()[data.host_id.value_counts()>50]\n\n\nprint('POPULAR HOSTS MEAN PRICE :',data[data.host_id.isin(popular.index)].price.mean(),' \\n GENERAL MEAN PRICE:',data.price.mean(),\n      ' \\n Popular hosts take more money. Reasons:  \\n 1) MORE houses so they increase the price \\n 2)If they can afford more houses they can afford better quality houses too'\n    );","5d9a46e0":"plt.rcParams['figure.figsize'] = [14, 7] \n\na=sns.boxplot(data.host_id[data.host_id.isin(popular.index)],data.price);\nplt.xticks(rotation=45);\na.set(title='POP HOSTS');","114a71f5":"popularData=data[data.calculated_host_listings_count>50]\n\na=sns.countplot(popularData.neighbourhood_group,palette='winter')\na.set(title='POP HOSTS');","2770b2d8":"fig,axes=plt.subplots(1,2)\n\n\nsns.distplot(data[(data['minimum_nights'] <= 40) & (data['minimum_nights'] > 0)]['minimum_nights'], bins=40,ax=axes[0])\n\n\naxes[0].set(title='GENERAL')\naxes[1].set(title='POPULAR HOSTS')\n\n\nsns.distplot(popularData[(popularData['minimum_nights'] <= 40) & (popularData['minimum_nights'] > 0)]['minimum_nights'], bins=40,ax=axes[1]);\n\n","eaf3636d":"fig,axes=plt.subplots(1,2,figsize=(16,8))\nsns.distplot(data.availability_365,ax=axes[0])\n\n\nsns.distplot(popularData.availability_365,ax=axes[1])\n\naxes[0].set(title='GENERAL')\naxes[1].set(title='POPULAR HOSTS');","f7df8e28":"print(\n    'Pop hosts availability mean and median:', popularData.availability_365.mean(),\n    popularData.availability_365.median(),\n    \n    \"\\n General mean and median:\",data.availability_365.mean(), \n    \n    data.availability_365.median(),\n    \n    \n    '\\n  Price and time spending of popular hosts on each house have impact here');","ace0bb0d":"\nsns.distplot(data[data.price<500].price);","a943fb46":"a=sns.boxplot(data.price)\na.set(xlim=(0,1000));","73d84a46":"unique_vals = data['neighbourhood_group'].unique()\ntargets = [data.loc[data['neighbourhood_group'] == val] for val in unique_vals]\ni=0\nfig,axes=plt.subplots(1,len(unique_vals),figsize=(16,8))\nfor t in targets:   \n  \n    a=sns.distplot(t.price,ax=axes[i],hist=False) \n    a.set(xlim=(0,600),ylim=(0,0.013),xlabel=str(t.neighbourhood_group.iloc[0]))\n    i+=1\n   ","8b90139f":"a=sns.boxplot(x='neighbourhood_group', y='price',data=data[data.price<1000])\n","aa2741c7":"sns.countplot(data.neighbourhood_group);","c160effe":"\nplt.figure(figsize=(14,6))\nsns.scatterplot(data.longitude,data.latitude,hue=data.neighbourhood_group);\n","9faf2e0b":"plt.figure(figsize=(15,7))\nplt.scatter(data.longitude, data.latitude, s=5,c=data.availability_365, cmap='winter' , alpha=0.9)\nbar = plt.colorbar()\nbar.set_label('AVAILABLE DAYS OF YEAR');","f458a0fa":"sns.barplot(data.neighbourhood_group,data.availability_365);","afa15d81":"price = pd.cut(data.price[data['price']<=1000], 33)\na=sns.barplot(price,data[data.price<=1000].availability_365)\na.set_xticklabels(a.get_xticklabels(),rotation=80);\n","bf46d14e":"popNeighb=data.neighbourhood.value_counts().head(17)\na=sns.countplot(y=data[data.neighbourhood.isin(popNeighb.index)].neighbourhood ,orient='h',order=popNeighb.index,hue=data.neighbourhood_group)","f1a67a6f":"data[data.neighbourhood.isin(popNeighb.index)].price.mean(),data.price.mean();","b83ff638":"\nsns.countplot(x = 'room_type',hue = \"neighbourhood_group\",data = data)\nplt.title(\"ROOM TYPES IN DIFFERENT AREAS\");","8207b3f0":"\na=sns.catplot(y='neighbourhood',orient='v', hue='neighbourhood_group', col='room_type', \n              \n              data=data[(data.neighbourhood.isin(popNeighb.index))&(data.room_type!='Shared room')],kind='count')\n\na.fig.set_size_inches(17,10);","3b69a818":"\nplt.figure(figsize=(15,8))\nsns.barplot(data.room_type,data.price);\n","957cf241":"sns.scatterplot(data.number_of_reviews,data.price);\n","042c9724":"# POP NEIGHBOURHOODS","93e5774b":"* As price goes up availability goes up, but owners of airbnbs with less cost   make less money ,so if you can invest you should invest (depending the neighborhood) ","5f6a0f2f":"invest in brooklyn","a0a5ed7e":"Manhattan's peak is the biggest and Bronxs the lowest","ab1616fa":"# Neigh_Groups","16429c1b":"# PRICE","e796fd91":"Manhattan and Brooklyn are way more popular","b13f4266":"MANHATTAN has the most popular hosts","bba64781":"# POP HOSTS","d73ec578":"# AVAILABLE DAYS OF YEAR"}}