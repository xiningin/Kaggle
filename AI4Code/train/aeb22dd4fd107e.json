{"cell_type":{"cef6d45b":"code","24a4454d":"code","0e831b5c":"code","9ecbac28":"code","dec453d2":"code","e4a6eb08":"code","10381864":"code","00d2bd19":"code","08947eea":"code","2603b37a":"code","cb79ef54":"code","92fd37ec":"code","0327cbf3":"code","cb8974a0":"code","96a85f72":"code","74088d1b":"code","734d6456":"code","e8bfb103":"code","35e4537f":"code","204db81d":"code","b9829103":"markdown","c1e02715":"markdown","8d9da4e9":"markdown","9721d662":"markdown","8fe47337":"markdown","4c5df8c1":"markdown","672c847f":"markdown","6109a5c5":"markdown","274411a1":"markdown","0c2d8a11":"markdown","37755482":"markdown","010decf0":"markdown","ff96d7f6":"markdown","81d7ece0":"markdown"},"source":{"cef6d45b":"import pandas as pd\nimport numpy as np\nimport matplotlib.pyplot as plt\nimport statsmodels.api as sm\nimport seaborn as sns\nsns.set()","24a4454d":"raw_data=pd.read_csv('..\/input\/health-care-data-set-on-heart-attack-possibility\/heart.csv')\nraw_data.head()","0e831b5c":"raw_data.describe(include='all') ### describing the data","9ecbac28":"plt.scatter(raw_data['age'],raw_data['target'])\nplt.xlabel('age')\nplt.ylabel('deaths from heart attack')\nplt.show()","dec453d2":"sns.distplot(raw_data['age'])","e4a6eb08":"data=raw_data.copy()\ndata.columns.values","10381864":"estimators=['age', 'sex', 'cp', 'trestbps', 'chol', 'fbs', 'restecg',\n       'thalach', 'exang', 'oldpeak', 'slope', 'ca', 'thal']","00d2bd19":"y=data['target'] ### defining the target value (dependent variable)\nx1=data[estimators] ### defining the features (independent variable)","08947eea":"x=sm.add_constant(x1) ### adding constant\nreg_log =sm.Logit(y,x) \nresult_log = reg_log.fit() ### fitting the regression","2603b37a":"result_log.summary() ### MLE table","cb79ef54":"#### DROPPING THE  INSIGNIFICANT VARIABLES\ndata_new=data.drop(['age','fbs'],axis=1)","92fd37ec":"data_new.head()","0327cbf3":"data_new.columns.values","cb8974a0":"estimators_new=['sex', 'cp', 'trestbps', 'chol', 'restecg', 'thalach',\n       'exang', 'oldpeak', 'slope', 'ca', 'thal']","96a85f72":"y_=data_new['target']\nx1_= data_new[estimators_new]","74088d1b":"x_=sm.add_constant(x1_)\nreg_log_ =sm.Logit(y_,x_)\nresult_log_ = reg_log_.fit()","734d6456":"result_log_.summary()","e8bfb103":"np.exp(-1.7640)","35e4537f":"def confusion_matrix(data,actual_values,model):\n        \n        # Confusion matrix \n        \n        # Parameters\n        # ----------\n        # data: data frame or array\n            # data is a data frame formatted in the same way as your input data (without the actual values)\n            # e.g. const, var1, var2, etc. Order is very important!\n        # actual_values: data frame or array\n            # These are the actual values from the test_data\n            # In the case of a logistic regression, it should be a single column with 0s and 1s\n            \n        # model: a LogitResults object\n            # this is the variable where you have the fitted model \n            # e.g. results_log in this course\n        # ----------\n        \n        #Predict the values using the Logit model\n        pred_values = model.predict(data)\n        # Specify the bins \n        bins=np.array([0,0.5,1])\n        # Create a histogram, where if values are between 0 and 0.5 tell will be considered 0\n        # if they are between 0.5 and 1, they will be considered 1\n        cm = np.histogram2d(actual_values, pred_values, bins=bins)[0]\n        # Calculate the accuracy\n        accuracy = (cm[0,0]+cm[1,1])\/cm.sum()\n        # Return the confusion matrix and \n        return cm, accuracy","204db81d":"confusion_matrix(x_,y_,result_log_)","b9829103":"# Loading the Data","c1e02715":"### Hence this model is 85% accurate","8d9da4e9":"## As we can see that p-value of AGE and FBS are high and hence they insignificant in our regression model","9721d662":"# Importing Libraries","8fe47337":"### From this we can conclude that, Given the same attributes, ODDS of getting a heart attack in male are 0.17 higher than that of female. \n## As this value is not very significant, but for knowledge purpose we can conclude that","4c5df8c1":"#### As per the statistical  table , we are able to conclude that their is no missing value in the data","672c847f":"## Confusion matrix","6109a5c5":"## Again running the regression after dropping insignificant variables","274411a1":"## Describing the features and target","0c2d8a11":"# Calculating the Accuracy of the model","37755482":"# LOGISTIC MODEL","010decf0":"### As we can clearly see that there is no relation between the age and the heart attack\n\n\n","ff96d7f6":"## Creating regression","81d7ece0":"# Analyzing the data"}}