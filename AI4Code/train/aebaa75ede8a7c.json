{"cell_type":{"0ae70e7b":"code","936af25e":"code","e94c13fd":"code","7bb45f33":"code","56371b41":"code","c213b3ce":"code","a36b2dfb":"code","4dcf8a1c":"code","7d8e970f":"code","ed47fb8e":"markdown","8d7ca8bf":"markdown","97533b4b":"markdown","9565c274":"markdown","c0a2d3ce":"markdown","4e071f5d":"markdown"},"source":{"0ae70e7b":"import numpy as np \nimport pandas as pd \nimport matplotlib.pyplot as plt \nfrom subprocess import check_output\nprint(check_output([\"ls\", \"..\/input\"]).decode(\"utf8\"))\nfrom datetime import datetime\nimport seaborn as sns \n\n%matplotlib inline \n\nsns.set_context('notebook',font_scale=1.5)\nsns.set_style('ticks')","936af25e":"data = pd.read_csv('..\/input\/party_in_nyc.csv')","e94c13fd":"data.head()","7bb45f33":"import folium\nfrom folium.plugins import MarkerCluster\n\nbars_map = folium.Map(location=[data['Latitude'].mean(), data['Longitude'].mean()],zoom_start=10)\nmc = MarkerCluster()\nfor ind,row in bar_locs.iterrows():\n    mc.add_child(folium.CircleMarker(location=[row['Latitude'],row['Longitude']],\n                        radius=1,color='#3185cc'))\nbars_map.add_child(mc)\nbars_map","56371b41":"complaints_by_city = data['Borough'].value_counts()\nplt.figure(figsize=(8,6))\nsns.barplot(y=complaints_by_city.index,x=complaints_by_city.values,palette=sns.color_palette('Blues_d'))\nplt.xticks(rotation=45);","c213b3ce":"complaints_by_loc_type = data['Location Type'].value_counts()\nplt.figure(figsize=(8,6))\nsns.barplot(y=complaints_by_loc_type.index,x=complaints_by_loc_type.values,palette=sns.color_palette('Blues_d'))\nplt.xticks(rotation=45);","a36b2dfb":"# Remove the data where closed date is not available\n\ndt = data[~(data['Closed Date'].isnull())]\n\ndt['Created Date'] = dt['Created Date'].apply(lambda x: datetime.strptime(x, '%Y-%m-%d %H:%M:%S'))\ndt['Closed Date'] = dt['Closed Date'].apply(lambda x: datetime.strptime(x, '%Y-%m-%d %H:%M:%S'))\ndt['dtime'] = dt['Closed Date'] - dt['Created Date']\ndt['dtime'] = dt['dtime'].apply(lambda x: x.total_seconds())\n\n# There are some rows where closed date is weird (i.e. year is 1900), remove them \ndt = dt[dt['dtime'] >= 0]","4dcf8a1c":"sns.distplot(dt['dtime'].apply(np.log10))\nplt.xlabel('$log_{10}(\\Delta seconds)$')\nplt.axvline(dt['dtime'].apply(np.log10).median(),color='grey',linestyle='--')\nprint(\"Median amount of hours to close the call: %.1f\" % (np.power(10,dt['dtime'].apply(np.log10).median())\/3600.))","7d8e970f":"dtlog = dt.copy()\ndtlog['dtime'] = dt['dtime'].apply(np.log10)\nplt.figure(figsize=(8,6))\nsns.boxplot(x='dtime',y='Borough',data=dtlog,palette=sns.color_palette('Blues_d'))\nplt.xlabel('$log_{10}(\\Delta seconds)$')\n","ed47fb8e":"Reading the input data","8d7ca8bf":"Try to show the map with bar locations ","97533b4b":"### How long did it take to respond to the complaints?","9565c274":"### What are the number of complaints by location type?","c0a2d3ce":"### What are the number of complaints by city?","4e071f5d":"This notebook is for the second version of the [2016 Parties in New York](https:\/\/www.kaggle.com\/somesnm\/partynyc\/version\/2) data set."}}