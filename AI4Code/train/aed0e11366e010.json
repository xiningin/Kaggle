{"cell_type":{"bec06abe":"code","94ba9643":"code","27a5df21":"code","79b493ba":"code","0cb22cbe":"code","5822950f":"code","39ba3e68":"code","a49cc675":"code","23121150":"code","7a61283b":"code","2c11a9fd":"code","977ad160":"code","98194056":"code","32c58e28":"code","d6a7b1a5":"code","ab26bc97":"code","02deb706":"code","a1472443":"code","e25ae622":"code","0c39ab60":"code","bf42b833":"code","22f7db73":"markdown","f81b310b":"markdown","9bef2181":"markdown","a7525991":"markdown","74903af3":"markdown","485d2af5":"markdown","5ebae92e":"markdown","a5128dd4":"markdown","c560b68a":"markdown","be99abf6":"markdown","260b7675":"markdown","bd63112f":"markdown","72f0ac32":"markdown","6b6a4dc4":"markdown","6eef6df3":"markdown","2f3d85ac":"markdown","a534f128":"markdown","6bbb8917":"markdown","73342efe":"markdown","e83418ae":"markdown","478fb7da":"markdown","c86cd855":"markdown","e630b295":"markdown","f8801497":"markdown","bc778bf7":"markdown","abee9bf4":"markdown"},"source":{"bec06abe":"import pandas as pd\nimport numpy as np\nimport matplotlib.pyplot as plt\nimport seaborn as sns","94ba9643":"df = pd.read_csv('..\/input\/telco-customer-churn\/WA_Fn-UseC_-Telco-Customer-Churn.csv')","27a5df21":"df.info()","79b493ba":"df.tail()","0cb22cbe":"df[(df.TotalCharges == \" \")]","5822950f":"df.drop('customerID', axis=1, inplace=True)","39ba3e68":"filter = lambda x: 'Yes' if x == 1 else 'No'\ndf['SeniorCitizen'] = df['SeniorCitizen'].apply(filter)","a49cc675":"df.drop(df[(df.TotalCharges == \" \")].index, axis=0, inplace=True)","23121150":"df.TotalCharges = pd.to_numeric(df.TotalCharges)","7a61283b":"df.info()","2c11a9fd":"df.tail()","977ad160":"for col in df.columns:\n    print(df[col].value_counts())\n    print()","98194056":"n_churn = df['Churn'].value_counts()['Yes']\nn_no_churn = df['Churn'].value_counts()['No']\n\nchurn_global_rate = n_churn\/(n_churn + n_no_churn)\nchurn_global_rate","32c58e28":"num_cols = df.select_dtypes(exclude=['object']).columns\ncat_cols = df.select_dtypes(include=['object']).columns\ncat_cols = cat_cols[cat_cols != 'Churn']\n\ncat_cols","d6a7b1a5":"sns.set_style('darkgrid')\nsns.set_palette('cubehelix')","ab26bc97":"for col in cat_cols:\n    plt.figure(figsize=(10, 6))\n    plt.title(col)\n    ax = sns.histplot(data=df, x=col, hue='Churn');\n    ax.set(xlabel='Values', ylabel='Count')\n    plt.show()","02deb706":"for col in cat_cols:\n    rates = []\n    for i in df[col].value_counts().index:\n        no_churn = df[df.Churn == 'No'][col].value_counts()[i]\n        churn = df[df.Churn == 'Yes'][col].value_counts()[i]\n        rate = churn\/(churn + no_churn)\n        rates.append(rate)\n    rates = np.array(rates)*100\n    plt.figure(figsize=(10, 6))\n    plt.title(col)\n    plt.axhline(churn_global_rate*100, ls='--' ,label='global churn rate')\n    plt.legend()\n    ax = sns.barplot(x=df[col].value_counts().index, y=rates);\n    ax.set(xlabel='Values', ylabel='Churn rate')\n    plt.show()","a1472443":"for col in num_cols:\n    plt.figure(figsize=(10, 6))\n    plt.title(col)\n    plt.axhline(churn_global_rate, ls='--' , label='global churn rate')\n    ax = sns.histplot(data=df, x=col, hue='Churn');\n    ax.set(xlabel='Values', ylabel='Count')\n    plt.show()","e25ae622":"for col in num_cols:\n    plt.figure(figsize=(10, 6))\n    plt.title(col)\n    plt.axhline(churn_global_rate, ls='--' , label='global churn rate')\n    ax = sns.histplot(data=df, x=col, hue='Churn', multiple='fill');\n    ax.set(xlabel='Values', ylabel='Count')\n    plt.show()","0c39ab60":"plt.figure(figsize=(10, 6))\nplt.title('Correlations of numerical columns')\nsns.heatmap(df.corr(), annot=True, cmap=sns.cubehelix_palette(start=.5, rot=-.75, as_cmap=True));","bf42b833":"sns.pairplot(df, hue='Churn');","22f7db73":"#### Plotes 1: classes de cada coluna categ\u00f3rica\n\n* Plote de barras;\n* Mapeado com quantidade de churns, pela coluna _'Churn'_.","f81b310b":"### Resultados\n\n* _'customerID'_ foi removida;\n* _'SeniorCitizen'_ teve seus valores mapeados para a forma padr\u00e3o;\n* _'TotalCharges'_ teve seus valores nulos removidos, e o tipo alterado para num\u00e9rico.\n","9bef2181":"### Bibliotecas","a7525991":"#### Plotes 3: classes de cada coluna num\u00e9rica\n\n* Plote de barras;\n* Mapeado com quantidade de churns, pela coluna _'Churn'_.","74903af3":"# Taxa _Churn_ - _Telecom_\n\nEstudo pr\u00e1tico de an\u00e1lise de dados de taxa de cancelamento de clientes (com *dataset* do [_Kaggle_](https:\/\/www.kaggle.com\/blastchar\/telco-customer-churn));\n\n---\n\n[Open In Colab](https:\/\/colab.research.google.com\/drive\/1GqrSHQwM4blaBalH53Y8O9IDwVyzNzNQ?usp=sharing)\n\n[Open in Kaggle](https:\/\/www.kaggle.com\/leonichel\/taxa-churn-telecom)\n\n---\n\n[Leonichel Guimar\u00e3es (PIBITI\/CNPq-FA-UEM)](https:\/\/github.com\/leonichel)\n\nProfessora Linnyer Ruiz (orientadora)\n\n---\n\nRefer\u00eancias bibliogr\u00e1ficas:\n\nG\u00c9RON, Aur\u00e9lien. _Hands-On Machine Learning with Scikit-Learn, Keras, and TensorFlow: Concepts, Tools, and Techniques to Build Intelligent Systems_. 2. ed. O'Reilly Media, 2019.\n\n---\n\nManna Team  |  UEM       |     CNPq\n:----------:|:----------:|:----------:|\n<img src=\"https:\/\/manna.team\/_next\/static\/images\/logo2-e283461cfa92b2105bfd67e8e530529e.png\" alt=\"Manna Team\" width=\"200\"\/> | <img src=\"https:\/\/marcoadp.github.io\/WebSiteDIN\/img\/logo-uem2.svg\" alt=\"UEM\" width=\"200\"\/> | <img src=\"https:\/\/www.gov.br\/cnpq\/pt-br\/canais_atendimento\/identidade-visual\/logo_cnpq.svg\" alt=\"CNPq\" width=\"200\"\/>","485d2af5":"## An\u00e1lise de dados","5ebae92e":"### Explora\u00e7\u00e3o inicial","a5128dd4":"### Explorando contegem dos valores de cada coluna","c560b68a":"### Resultados\n\n* A taxa de churn global \u00e9 26,58%;\n\n* Os Plotes 1 indicam o perfil majorit\u00e1rio dos clientes:\n  * Jovem ou adulto;\n  * Sem dependentes (filhos);\n  * Com servi\u00e7o de telefonia;\n  * Os demais atributos n\u00e3o apresentam preval\u00eancia relev\u00e2ncia: g\u00eanero, estado civil, tipos de servi\u00e7os adotados, e forma de contrato e pagamento.\n\n* Atrelado aos Plotes 1, os Plotes 2 indicam o perfil majorit\u00e1rio dos clientes que cancelam:\n  * Idosos: a taxa de churn em idosos \u00e9 acima da global, com um valor superior a 40%;\n  * Solteiros: a taxa em solteiros \u00e9 acima da global, com um valor superior a 35%; os clientes com parceiros (n\u00e3o solteiros) apresentam uma taxa inferior a 20%;\n  * Sem dependentes: a taxa em clientes sem dependentes \u00e9 acima da global, com um valor superior a 30%; os clientes com dependentes apresentam uma taxa inferior a 20%;\n  * Com fibra \u00f3tica: a taxa em clientes com fibra \u00e9 acima da global, com um valor superior a 40%; os clientes com as demais op\u00e7\u00f5es apresentam taxas inferiores a 20%; \n  * Sem servi\u00e7os adicionais (seguran\u00e7a e backup online, prote\u00e7\u00e3o de dispositivo, suporte t\u00e9cnico): as taxas para clientes que n\u00e3o assinam esses servi\u00e7os adicionais s\u00e3o superiores a global, com valores que variam entre 30% a 45%;\n  * Sem ou com servi\u00e7os de streaming (TV e filmes): as taxas dos clientes que utilizam e dos clientes que n\u00e3o utilizam s\u00e3o ambas superiores a global; \n  * Com contrato m\u00eas-a-m\u00eas: a taxa para esses clientes \u00e9 acima de 45%; os demais apresentam taxas inferiores a 15%;\n  * Com fatura virtual: a taxa para esses clientes \u00e9 acima de 30%; os que n\u00e3o t\u00eam apresentam taxa inferior a 20%;\n  * Com m\u00e9todo de pagamento de cheque eletr\u00f4nico: a taxa para esses clientes \u00e9 acima de 40%; as taxas dos demais m\u00e9todos variam entre 10% a 20%.\n\n* Atrelados aos Plotes 2, os Plotes 3 indicam:\n  * Um alto n\u00famero de clientes com 0 a 5 meses de contrato, e com mais de 65 (5,5 anos); Os demais clientes, com outros intervalos de contrato (5 ~ 65 meses) s\u00e3o bem mais minorit\u00e1rios;\n  * Um alto n\u00famero de clientes que realizam os valores m\u00ednimos de recarga;\n\n* Os Plotes 4 revelam:\n  * A taxa de churn diminu\u00ed significativamente de acordo com o n\u00famero de meses que os contratos t\u00eam; A taxa ca\u00ed de mais de 55% (0 ~ 5 meses) para um valor inferior a taxa global (20 ~ 25 meses);\n  * A taxa churn apresenta queda conforme o total de recargas que os cliente fazem aumentam.\n\n* Os Plotes 5 revelam:\n  * Uma alta correla\u00e7\u00e3o entre o n\u00famero de recargas totais e mensais com o tempo de contrato dos clientes.\n\n\n","be99abf6":"#### Plotes 5: correla\u00e7\u00f5es de entre colunas num\u00e9ricas \n\n* Plote de _heatmap_ e _pairplot_;\n* Compara\u00e7\u00e3o de coluna a coluna.","260b7675":"### Resultados\n\n* _'customerID'_ n\u00e3o \u00e9 necess\u00e1ria;\n* _'SeniorCitizen'_ est\u00e1 com nota\u00e7\u00e3o bin\u00e1ria '0' e '1', ao contr\u00e1rio dos demais atributos bin\u00e1rios; Para contornar esse problema, \u00e9 necess\u00e1rio mapear os '0' para 'No', e os '1' para 'Yes';\n* _'TotalChanges'_ est\u00e1 atribuida com tipo _'object'_, quando deveria estar com tipo _'float64'_; O motivo da ocorr\u00eancia \u00e9 pela exist\u00eancia de 11 linhas que cont\u00eam o valor nulo '\" \"' como _string_; Para contornar, \u00e9 necess\u00e1rio remover essas 11 linhas, e converter a coluna para o tipo num\u00e9rico.","bd63112f":"### Remover _'customerID'_","72f0ac32":"### Removendo linhas com valores nulos de _'TotalCharges'_","6b6a4dc4":"## Conclus\u00e3o\n\n* Mais de 1\/4 dos clientes s\u00e3o perdidos - ou seja, a empresa perde 1 a cada 4 de seus contratos;\n* O cliente t\u00edpico da empresa \u00e9: jovem, sem dependetes, e com servi\u00e7os de telefonia; \n* O cliente t\u00edpico que cancela \u00e9: idoso, solteiro, sem dependetes, com fibra \u00f3tica, sem servi\u00e7os adicionais, com contrato m\u00eas-a-m\u00eas, com fatura virtual, e que paga com cheque eletr\u00f4nico (forma manual); Os clientes est\u00e3o com fibra \u00f3tica est\u00e3o descontentes;\n* H\u00e1 na empresa um evidente e grave problema de reten\u00e7\u00e3o de clientes;\n* Os clientes que realizam recargas maiores cancelam menos;","6eef6df3":"#### Configura\u00e7\u00e3o de plotes","2f3d85ac":"### Visualiza\u00e7\u00e3o de dados","a534f128":"## Limpeza de dados","6bbb8917":"### Verificando resultado","73342efe":"### Leitura do banco de dados","e83418ae":"## Recomenda\u00e7\u00f5es\n\n* Recomenda-se fortemente a ado\u00e7\u00e3o de a\u00e7\u00f5es que diminuem essa taxa, que certamente aumentar\u00e1 a receita da empresa;\n* Recomenda-se a\u00e7\u00e3o para identificar o motivo de churn em idosos;\n* Recomenda-se a\u00e7\u00e3o para identificar o motivo de descontentamento com o servi\u00e7o de fibra \u00f3tica;\n* Recomenda-se ado\u00e7\u00e3o de pol\u00edticas de vendas de planos, a fim de insentivar os clientes a adquirirem servi\u00e7os adicionais;\n* Recomenda-se ado\u00e7\u00e3o de promo\u00e7\u00f5es, que incentivem os clientes a optarem por contratos anuais, por m\u00e9todos de pagamentos autom\u00e1ticos, e por valores de recargas mais altos;\n* Recomenda-se ado\u00e7\u00e3o de pol\u00edticas que melhorem a reten\u00e7\u00e3o de clientes;\n","478fb7da":"### Vari\u00e1veis que armazenam colunas num\u00e9ricas e categ\u00f3ricas","c86cd855":"### C\u00e1lculo da taxa de churn global","e630b295":"#### Plotes 2: taxas de churn das classes de cada coluna categ\u00f3rica\n\n* Plote de barras;\n* Taxa de churn em percentual (0 ~ 100%) para cada classe;\n* Com marca\u00e7\u00e3o horizontal da taxa churn global.","f8801497":"#### Plotes 4: propror\u00e7\u00e3o de taxas de churn das classes de cada coluna num\u00e9rica\n\n* Plote de barras;\n* Taxa de churn em percentual (0 ~ 1) para cada classe;\n* Com marca\u00e7\u00e3o horizontal da taxa churn global.","bc778bf7":"## Obten\u00e7\u00e3o de dados","abee9bf4":"### Alterar valores bin\u00e1rios de _'SeniorCitizen'_ para 'Yes' e 'No'"}}