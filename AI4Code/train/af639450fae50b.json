{"cell_type":{"96cce0cf":"code","159b4c87":"code","71b86b10":"code","232ab792":"code","51d30e4f":"code","aae7fc2e":"code","fc20cc7e":"code","d3ea3328":"code","2d77cc04":"code","3d25cf94":"code","955771ca":"code","7e19196f":"code","3b97eddf":"code","488c1b4f":"code","66ad3aea":"code","f21e5279":"code","0dd77100":"code","0237f310":"code","6a5358e7":"code","bc9f2179":"code","cb0e0fea":"code","d6e7d39e":"code","2fd7ad6c":"code","35420c3f":"code","2ca5b728":"code","497b2099":"code","52487667":"code","3d032692":"code","038fa4b0":"code","69125a1c":"code","942da5dd":"code","d801c152":"code","7f3748f6":"code","75969b3d":"code","0648d970":"code","9c4b1887":"code","b50e9b2b":"code","f1f3d59d":"code","fa7f12bf":"code","f45a95b7":"code","449f9878":"code","22ca73e9":"code","069c95b1":"code","cded7ce3":"code","5c532d37":"code","b4c5afc5":"code","894a609f":"code","14ac77aa":"code","89fb8a4f":"code","850aeae1":"code","e023cb04":"code","c2a3e06c":"code","6b2ca23e":"code","71ce2067":"code","79d865db":"code","948a8c8b":"code","16d161c3":"code","18bb9f03":"code","53859280":"code","b6d5fb61":"markdown","716addb0":"markdown","8948dac4":"markdown","7a317e8a":"markdown","0fd725ce":"markdown","224927fd":"markdown","9960f67d":"markdown","e6c1e0d8":"markdown","97085fba":"markdown","7567d3d3":"markdown","605a2ebe":"markdown","1e5c02f2":"markdown","58d6df93":"markdown","a4fb9cd6":"markdown","cd05596e":"markdown","8330b81e":"markdown","948f6a99":"markdown","e286836f":"markdown","9ca12cfc":"markdown","a8d56fe1":"markdown","a1959fd6":"markdown","1bfca77d":"markdown","c669c5f2":"markdown","b53fb2da":"markdown","1b28db66":"markdown","c25ea535":"markdown","0cfb9a76":"markdown","cbbfc38e":"markdown","bd0be9d1":"markdown","d1d50933":"markdown","73ce9d74":"markdown","3f45c02f":"markdown","8a2ce01f":"markdown","8ddeec6a":"markdown","8b163afe":"markdown","d34b9f33":"markdown","675d03d3":"markdown","dde95029":"markdown","3657871c":"markdown","991e319d":"markdown","466912cf":"markdown","bf8352f8":"markdown","d261223a":"markdown","58df5804":"markdown","794994dd":"markdown","805168be":"markdown","f872e670":"markdown","345d5992":"markdown","a94e2979":"markdown","18779193":"markdown","28178939":"markdown","78c6ade7":"markdown","a1f995ce":"markdown","86f21e20":"markdown","41ae92af":"markdown","18946195":"markdown","f3d53990":"markdown","9f70f904":"markdown","cf3220b5":"markdown","629230df":"markdown","8a8d698a":"markdown"},"source":{"96cce0cf":"# This Python 3 environment comes with many helpful analytics libraries installed\n# It is defined by the kaggle\/python docker image: https:\/\/github.com\/kaggle\/docker-python\n# For example, here's several helpful packages to load in \n\nimport numpy as np # linear algebra\nimport pandas as pd # data processing, CSV file I\/O (e.g. pd.read_csv)\n\n# Input data files are available in the \"..\/input\/\" directory.\n# For example, running this (by clicking run or pressing Shift+Enter) will list all files under the input directory\n\nimport os\nfor dirname, _, filenames in os.walk('\/kaggle\/input'):\n    for filename in filenames:\n        print(os.path.join(dirname, filename))\n\n# Any results you write to the current directory are saved as output.\npd.set_option('display.max_columns', 500)","159b4c87":"import seaborn as sns\nimport matplotlib.pyplot as plt","71b86b10":"from kaggle.competitions import nflrush\n\n# You can only call make_env() once, so don't lose it!\nenv = nflrush.make_env()","232ab792":"train_df = pd.read_csv('\/kaggle\/input\/nfl-big-data-bowl-2020\/train.csv', low_memory=False)","51d30e4f":"train_df.shape","aae7fc2e":"train_df.head()","fc20cc7e":"# train_df[train_df['PlayId']==20181007011551]","d3ea3328":"train_df[\"GameId\"].value_counts()","2d77cc04":"print(\"From \",train_df[\"GameId\"].astype(str).str[:6].min(),\"To \",train_df[\"GameId\"].astype(str).str[:6].max())","3d25cf94":"pd.Series(train_df[\"GameId\"].unique()).astype(str).str[:6].value_counts().sort_index().plot(kind=\"barh\")","955771ca":"print(len(train_df[\"PlayId\"].unique()))\nprint(int(509762\/22))","7e19196f":"team_df=train_df[['PlayId','Team','NflId','Yards']].merge(\n    train_df[['PlayId','NflIdRusher']].drop_duplicates(),left_on=['PlayId','NflId'],\n    right_on=['PlayId','NflIdRusher'],how='inner')","3b97eddf":"team_df['Team'].value_counts().plot(kind=\"barh\",title='Offense times', figsize=(10,2))","488c1b4f":"print('Average yards gained by home team : ',team_df[team_df[\"Team\"]=='home']['Yards'].mean())\nprint('Average yards gained by away team : ',team_df[team_df[\"Team\"]=='away']['Yards'].mean())\nprint('Median yards gained by home team :  ',team_df[team_df[\"Team\"]=='home']['Yards'].median())\nprint('Median yards gained by away team :  ',team_df[team_df[\"Team\"]=='away']['Yards'].median())","66ad3aea":"f, axes = plt.subplots(1, 2, figsize=(10,4))\nsns.distplot(team_df[team_df[\"Team\"]=='home']['Yards'],ax=axes[0],kde=None).set_title(\"Home\")\nsns.distplot(team_df[team_df[\"Team\"]=='away']['Yards'],ax=axes[1],kde=None).set_title(\"Away\")\nprint(\"Gained Yards Distplot:\")","f21e5279":"train_df[['X', 'Y', 'S', 'A', 'Dis', 'Orientation','Dir']].describe()","0dd77100":"print(\"Orientation: \",train_df[train_df[\"Orientation\"].isnull()][\"DisplayName\"].drop_duplicates().values)\n\nprint(\"Dir: \",train_df[train_df[\"Dir\"].isnull()][\"DisplayName\"].drop_duplicates().values)","0237f310":"f, axes = plt.subplots(2, 4, figsize=(18,9))\nsns.distplot(train_df[\"X\"],ax=axes[0,0])\nsns.distplot(train_df[\"Y\"],ax=axes[0,1])\nsns.distplot(train_df[\"S\"],ax=axes[0,2])\nsns.distplot(train_df[\"A\"],ax=axes[0,3])\nsns.distplot(train_df[\"Dis\"],ax=axes[1,0])\nsns.distplot(train_df[~train_df[\"Orientation\"].isnull()][\"Orientation\"],ax=axes[1,1])\nsns.distplot(train_df[~train_df[\"Dir\"].isnull()][\"Dir\"],ax=axes[1,2])","6a5358e7":"train_df[train_df[\"DisplayName\"]==\"Michael Thomas\"][[\"DisplayName\",\"NflId\"]].drop_duplicates()","bc9f2179":"sns.distplot(train_df[\"JerseyNumber\"],kde=None)","cb0e0fea":"train_df[\"Season\"].value_counts().plot(kind=\"barh\")","d6e7d39e":"sns.distplot(train_df[\"YardLine\"],kde=None)","2fd7ad6c":"print(\"The peak: \",train_df[\"YardLine\"].value_counts().max())","35420c3f":"train_df.groupby(\"PlayId\")[[\"YardLine\",\"Yards\"]].max().corr()","2ca5b728":"train_df[\"Quarter\"].value_counts().plot(kind=\"barh\")","497b2099":"train_df.groupby(\"PlayId\")[[\"Quarter\",\"Yards\"]].max().corr()","52487667":"train_df[\"GameClock\"].value_counts()[:5]","3d032692":"train_df[\"PossessionTeam\"].value_counts().plot(kind=\"bar\",figsize=(20,5))","038fa4b0":"train_df[[\"PlayId\",\"PossessionTeam\",\"Yards\"]].drop_duplicates().groupby([\"PossessionTeam\"])[\"Yards\"].mean().sort_values().plot(kind=\"bar\",figsize=(20,5))","69125a1c":"train_df[[\"PlayId\",\"PossessionTeam\",\"Yards\"]].drop_duplicates().groupby([\"PossessionTeam\"])[\"Yards\"].median().sort_values().plot(kind=\"bar\",figsize=(20,5))","942da5dd":"train_df[\"Down\"].value_counts().plot(kind=\"barh\")","d801c152":"train_df[[\"PlayId\",\"Down\",\"Yards\"]].drop_duplicates().groupby([\"Down\"])[\"Yards\"].mean().sort_values().plot(kind=\"barh\")","7f3748f6":"train_df[\"Distance\"].value_counts().sort_index().plot(kind=\"bar\",figsize=(20,5))","75969b3d":"train_df.groupby(\"PlayId\")[[\"Distance\",\"Yards\"]].max().corr()","0648d970":"print(\"Distance > 10 : \",sum(train_df[\"Distance\"]>10)\/len(train_df))","9c4b1887":"train_df[\"FieldPosition\"].value_counts().plot(kind=\"bar\",figsize=(20,5))","b50e9b2b":"f, axes = plt.subplots(1, 2, figsize=(10,4))\nsns.distplot(train_df[\"HomeScoreBeforePlay\"],ax=axes[0],kde=None)\nsns.distplot(train_df[\"VisitorScoreBeforePlay\"],ax=axes[1],kde=None)","f1f3d59d":"print(len(train_df[\"NflIdRusher\"].value_counts()),\"unique players\")","fa7f12bf":"train_df[\"OffenseFormation\"].value_counts().plot(kind=\"barh\")","f45a95b7":"train_df[\"OffensePersonnel\"].value_counts().plot(kind=\"bar\",figsize=(20,5))","449f9878":"train_df[\"DefendersInTheBox\"].value_counts().sort_index(ascending=False).plot(kind=\"barh\")","22ca73e9":"train_df[\"DefensePersonnel\"].value_counts().plot(kind=\"bar\",figsize=(20,5))","069c95b1":"train_df[\"PlayDirection\"].value_counts().plot(kind=\"barh\")","cded7ce3":"train_df[[\"TimeHandoff\",\"TimeSnap\"]][:5]","5c532d37":"sns.distplot(train_df[\"Yards\"],kde=None)","b4c5afc5":"f, axes = plt.subplots(1, 2, figsize=(10,4))\nsns.distplot((train_df[\"PlayerHeight\"].str[:1].astype(int)*12+train_df[\"PlayerHeight\"].str[-1:].astype(int)),kde=None,ax=axes[0])\nsns.distplot(train_df[\"PlayerWeight\"],kde=None,ax=axes[1])","894a609f":"train_df[\"PlayerCollegeName\"].value_counts().plot(kind=\"bar\",figsize=(20,5))","14ac77aa":"train_df[\"Position\"].value_counts().plot(kind=\"bar\",figsize=(20,5))","89fb8a4f":"train_df[\"HomeTeamAbbr\"].value_counts().plot(kind=\"bar\",figsize=(20,5))","850aeae1":"train_df[\"VisitorTeamAbbr\"].value_counts().plot(kind=\"bar\",figsize=(20,5))","e023cb04":"sns.distplot(train_df[\"Week\"],kde=None)","c2a3e06c":"train_df[\"Stadium\"].value_counts().plot(kind=\"bar\",figsize=(20,5))","6b2ca23e":"train_df[\"Location\"].value_counts().plot(kind=\"bar\",figsize=(20,5))","71ce2067":"train_df[\"StadiumType\"].value_counts().plot(kind=\"bar\",figsize=(20,5))","79d865db":"train_df[\"Turf\"].value_counts().plot(kind=\"bar\",figsize=(20,5))","948a8c8b":"train_df[\"GameWeather\"].value_counts().plot(kind=\"bar\",figsize=(20,5))","16d161c3":"f, axes = plt.subplots(1, 2, figsize=(10,4))\nsns.distplot(train_df[\"Temperature\"].fillna(0),kde=None,ax=axes[0])\nsns.distplot(train_df[\"Humidity\"].fillna(0),kde=None,ax=axes[1])","18bb9f03":"train_df[\"WindSpeed\"].value_counts().plot(kind=\"bar\",figsize=(20,5))","53859280":"train_df[\"WindDirection\"].value_counts().plot(kind=\"bar\",figsize=(20,5))","b6d5fb61":"Orientation and Dir have missing data (below)","716addb0":"**39----- VisitorTeamAbbr - visitor team abbreviation**\n","8948dac4":"**14----- Season - year of the seasonr**","7a317e8a":"Two peaks for both PlayerHeight and PlayerWeight, seems to be guard and forward","0fd725ce":"Why 15:00:00 is the most?","224927fd":"Median yards of each Team (mean looks better)","9960f67d":"PlayId which also could be called \"DownID\" has 23,171 unique values.\n\nIn this dataset, a row means a player(not a down, not a team). Since evrey down has 22 players \u21e8 23,171 \u00d7 22 = 509,762 (the len of dataset)\n\n**Attention:**  In this competition, we need to predict \"How many yards will an NFL player gain after receiving a handoff?\", since every 22 rows indicates a down, the 22 rows should always be the same result(Yards). Maybe it's better to group the rows when modeling. ","e6c1e0d8":"**38----- HomeTeamAbbr - home team abbreviation**\n","97085fba":"**24----- NflIdRusher - the NflId of the rushing player (Ball carrier)**","7567d3d3":"There are a few outliers","605a2ebe":"There are 512 games.\n\nThe records of each games are not really same, MAX is 1870 and MIN is 616.","1e5c02f2":"**28----- DefensePersonnel - defensive team positional grouping**\n","58d6df93":"But not every month has a game","a4fb9cd6":"**36----- PlayerCollegeName - where the player attended college**","cd05596e":"**27----- DefendersInTheBox - number of defenders lined up near the line of scrimmage, spanning the width of the offensive line**","8330b81e":"Both Temperature and Humidity have missing data","948f6a99":"**43----- StadiumType - description of the stadium environment**\n","e286836f":"corr : 0.071936","9ca12cfc":"**35----- PlayerBirthDate - birth date (mm\/dd\/yyyy)**","a8d56fe1":"**26----- OffensePersonnel - offensive team positional grouping**","a1959fd6":"Check it later","1bfca77d":"The first 8 digits of GameId are probably the date of game, so these games are from 201709 to 201812","c669c5f2":"**44----- Turf - description of the field surface**\n","b53fb2da":"**29----- PlayDirection - direction the play is headed**\n","1b28db66":"Nflld and name are almost one-to-one match, except Michael Thomas:","c25ea535":"**18----- PossessionTeam - team with possession**","0cfb9a76":"corr between YardLine and Yards is 0.064551","cbbfc38e":"**11----- NflId - a unique identifier of the player**\n\n**12----- DisplayName - player's name**","bd0be9d1":"**49----- WindDirection - wind direction**","d1d50933":"Mean yards for each down","73ce9d74":"Dir seems a very important feature:\n\nhttps:\/\/www.kaggle.com\/sudalairajkumar\/simple-exploration-notebook-nfl\n\nThe difference between Orientation and Dir:\n\nOrientation is the direction in which the player is facing.\n\nDir is the direction in which the player is moving.\n\nhttps:\/\/www.kaggle.com\/c\/nfl-big-data-bowl-2020\/discussion\/111918#latest-649659","3f45c02f":"**17----- GameClock - time on the game clock**","8a2ce01f":"Mean yards of each Team","8ddeec6a":"**20----- Distance - yards needed for a first down**","8b163afe":"**45----- GameWeather - description of the game weather**\n","d34b9f33":"**19----- Down - the down (1-4)**","675d03d3":"**21----- FieldPosition - which side of the field the play is happening on**","dde95029":"**1----- GameId - a unique game identifier**","3657871c":"**Distplot:**","991e319d":"Dis is the distance covered by each player in roughly the last 0.1 seconds of play\n\nhttps:\/\/www.kaggle.com\/c\/nfl-big-data-bowl-2020\/discussion\/112246#latest-647281","466912cf":"**3 -----Team - home or away**","bf8352f8":"**13----- JerseyNumber - jersey number**","d261223a":"**41----- Stadium - stadium where the game is being played**\n","58df5804":"> **2----- PlayId - a unique play identifier**","794994dd":"**4 -----X - player position along the long axis of the field. See figure below.**\n\n**5 -----Y - player position along the short axis of the field. See figure below.**\n\n**6 -----S - speed in yards\/second**\n\n**7 -----A - acceleration in yards\/second^2**\n\n**8 -----Dis - distance traveled from prior time point, in yards**\n\n**9 -----Orientation - orientation of player (deg)**\n\n**10 -----Dir - angle of player motion (deg)**","805168be":"**32----- Yards - the yardage gained on the play (you are predicting this)**","f872e670":"Very dirty, need to be cleaned","345d5992":"corr between Quarter and Yards is 0.064551, seems Quarter is not important","a94e2979":"\n**48----- WindSpeed - wind speed in miles\/hour**\n","18779193":"A little dirty, need to be cleaned","28178939":"**30----- TimeHandoff - UTC time of the handoff**\n\n**31----- TimeSnap - UTC time of the snap**\n","78c6ade7":"**42----- Location - city where the game is being player**\n","a1f995ce":"**46----- Temperature - temperature (deg F)**\n\n**47----- Humidity - humidity**\n","86f21e20":"**15----- YardLine - the yard line of the line of scrimmage**","41ae92af":"**16----- Quarter - game quarter (1-5, 5 == overtime)**","18946195":"**33----- PlayerHeight - player height (ft-in)**\n\n**34----- PlayerWeight - player weight (lbs)**","f3d53990":"Very dirty, need to be cleaned","9f70f904":"**22----- HomeScoreBeforePlay - home team score before play started**\n\n**23----- VisitorScoreBeforePlay - visitor team score before play started**","cf3220b5":"**40----- Week - week into the season**","629230df":"**37----- Position**\n","8a8d698a":"**25----- OffenseFormation - offense formation**"}}