{"cell_type":{"70c3df6e":"code","d497ca49":"code","bc366044":"code","0e284154":"code","f148402d":"code","d3d552f5":"markdown","c3a7d80a":"markdown","d638bec4":"markdown","e8195cbc":"markdown","b04da76b":"markdown"},"source":{"70c3df6e":"import pandas as pd\nfrom sklearn.ensemble import RandomForestRegressor\nfrom sklearn.linear_model import LinearRegression\nfrom sklearn.model_selection import train_test_split\n\n\n# Data manipulation code below here\ndata = pd.read_csv('..\/input\/new-york-city-taxi-fare-prediction\/train.csv', nrows=50000)\n\n# Remove data with extreme outlier coordinates or negative fares\ndata = data.query('pickup_latitude > 40.7 and pickup_latitude < 40.8 and ' +\n                  'dropoff_latitude > 40.7 and dropoff_latitude < 40.8 and ' +\n                  'pickup_longitude > -74 and pickup_longitude < -73.9 and ' +\n                  'dropoff_longitude > -74 and dropoff_longitude < -73.9 and ' +\n                  'fare_amount > 0'\n                  )\n\ny = data.fare_amount\n\nbase_features = ['pickup_longitude',\n                 'pickup_latitude',\n                 'dropoff_longitude',\n                 'dropoff_latitude']\n\nX = data[base_features]\n\n\ntrain_X, val_X, train_y, val_y = train_test_split(X, y, random_state=1)\nfirst_model = RandomForestRegressor(n_estimators=30, random_state=1).fit(train_X, train_y)\nprint(\"Data sample:\")\ndata.head()","d497ca49":"from matplotlib import pyplot as plt\nfrom pdpbox import pdp, get_dataset, info_plots","bc366044":"for feat_name in base_features:\n    pdp_dist = pdp.pdp_isolate(model=first_model, dataset=val_X, model_features=base_features, feature=feat_name)\n    pdp.pdp_plot(pdp_dist, feat_name)\n    plt.show()","0e284154":"from sklearn.inspection import plot_partial_dependence, partial_dependence","f148402d":"for i in range(4):\n    plot_partial_dependence(first_model, val_X, [i], base_features)","d3d552f5":"**[Machine Learning Explainability Home Page](https:\/\/www.kaggle.com\/learn\/machine-learning-explainability)**\n\n---\n","c3a7d80a":"I used both sklearn.plotpartialdependence and pdpbox.pdp.pdp_plot.\nIt looks the outcome graphs are pretty different.\n\nI assume they are using diffident algorithms. Could someone tell me why they are different and which to use upon the scenarios?","d638bec4":"## Here is the code to plot the partial dependence plot by **pdpbox**","e8195cbc":"## Here is the code to plot the partial dependence plot by **sklearn**","b04da76b":"## Load Data"}}