{"cell_type":{"0dea3819":"code","4f47b5cc":"code","6ee9c654":"code","bb531039":"code","fd844c3c":"code","d9a85ff0":"code","efaead4b":"code","a5d9829d":"code","217d984f":"code","0601499d":"code","e4ae8a85":"code","bc08744f":"code","26e7a157":"code","b9b2d0f3":"code","a44df4d0":"code","29437ff6":"code","d06bb0a4":"code","529dc6eb":"code","f2dd5542":"code","90448f57":"code","e8da7249":"code","9c94b573":"code","49162d9f":"code","4e5f5cf2":"code","c424d5af":"code","71c0611f":"code","2cdfa952":"code","20313fe4":"code","f1a4695c":"code","dbf74f18":"code","1adbb5c9":"code","459efc31":"code","6149f44d":"code","b9f72740":"code","f2bbbd82":"code","fc87546e":"code","b7ddfeaf":"code","ccb5b14c":"code","dca1c030":"markdown"},"source":{"0dea3819":"import pandas as pd\nimport statsmodels.api as sm\nimport statsmodels.formula.api as smf\nimport matplotlib.pyplot as plt\nimport seaborn as sns\nfrom sklearn.cluster import KMeans\ncolor = sns.color_palette()\nfrom IPython.core.display import display, HTML\ndisplay(HTML(\"<style>.container { width:100% !important; }<\/style>\"))\n%matplotlib inline","4f47b5cc":"attendance_valuation_elo_df = pd.read_csv(\"..\/input\/nba_2017_att_val_elo.csv\");attendance_valuation_elo_df.head()","6ee9c654":"sns.lmplot(y=\"VALUE_MILLIONS\", x=\"TOTAL\", data=attendance_valuation_elo_df)","bb531039":"sns.lmplot(y=\"VALUE_MILLIONS\", x=\"PCT\", data=attendance_valuation_elo_df)","fd844c3c":"sns.lmplot(y=\"VALUE_MILLIONS\", x=\"ELO\", data=attendance_valuation_elo_df)","d9a85ff0":"salary_df = pd.read_csv(\"..\/input\/nba_2017_salary.csv\");salary_df.head()\n","efaead4b":"pie_df = pd.read_csv(\"..\/input\/nba_2017_pie.csv\");pie_df.head()","a5d9829d":"plus_minus_df = pd.read_csv(\"..\/input\/nba_2017_real_plus_minus.csv\");plus_minus_df.head()","217d984f":"br_stats_df = pd.read_csv(\"..\/input\/nba_2017_br.csv\");br_stats_df.head()","0601499d":"\nplus_minus_df.rename(columns={\"NAME\":\"PLAYER\", \"WINS\": \"WINS_RPM\"}, inplace=True)\nplayers = []\nfor player in plus_minus_df[\"PLAYER\"]:\n    plyr, _ = player.split(\",\")\n    players.append(plyr)\nplus_minus_df.drop([\"PLAYER\"], inplace=True, axis=1)\nplus_minus_df[\"PLAYER\"] = players\nplus_minus_df.head()","e4ae8a85":"\nnba_players_df = br_stats_df.copy()\nnba_players_df.rename(columns={'Player': 'PLAYER','Pos':'POSITION', 'Tm': \"TEAM\", 'Age': 'AGE', \"PS\/G\": \"POINTS\"}, inplace=True)\nnba_players_df.drop([\"G\", \"GS\", \"TEAM\"], inplace=True, axis=1)\nnba_players_df = nba_players_df.merge(plus_minus_df, how=\"inner\", on=\"PLAYER\")\nnba_players_df.head()","bc08744f":"\npie_df_subset = pie_df[[\"PLAYER\", \"PIE\", \"PACE\", \"W\"]].copy()\nnba_players_df = nba_players_df.merge(pie_df_subset, how=\"inner\", on=\"PLAYER\")\nnba_players_df.head()","26e7a157":"salary_df.rename(columns={'NAME': 'PLAYER'}, inplace=True)\nsalary_df[\"SALARY_MILLIONS\"] = round(salary_df[\"SALARY\"]\/1000000, 2)\nsalary_df.drop([\"POSITION\",\"TEAM\", \"SALARY\"], inplace=True, axis=1)\nsalary_df.head()","b9b2d0f3":"diff = list(set(nba_players_df[\"PLAYER\"].values.tolist()) - set(salary_df[\"PLAYER\"].values.tolist()))","a44df4d0":"len(diff)\n","29437ff6":"\nnba_players_with_salary_df = nba_players_df.merge(salary_df); ","d06bb0a4":"\nplt.subplots(figsize=(20,15))\nax = plt.axes()\nax.set_title(\"NBA Player Correlation Heatmap:  2016-2017 Season (STATS & SALARY)\")\ncorr = nba_players_with_salary_df.corr()\nsns.heatmap(corr, \n            xticklabels=corr.columns.values,\n            yticklabels=corr.columns.values)","529dc6eb":"sns.lmplot(x=\"SALARY_MILLIONS\", y=\"WINS_RPM\", data=nba_players_with_salary_df)\n","f2dd5542":"results = smf.ols('W ~POINTS', data=nba_players_with_salary_df).fit()\n","90448f57":"print(results.summary())\n","e8da7249":"results = smf.ols('W ~WINS_RPM', data=nba_players_with_salary_df).fit()\n","9c94b573":"print(results.summary())\n","49162d9f":"results = smf.ols('SALARY_MILLIONS ~POINTS', data=nba_players_with_salary_df).fit()\n","4e5f5cf2":"print(results.summary())\n","c424d5af":"results = smf.ols('SALARY_MILLIONS ~WINS_RPM', data=nba_players_with_salary_df).fit()\n","71c0611f":"print(results.summary())\n","2cdfa952":"from ggplot import *\n","20313fe4":"\np = ggplot(nba_players_with_salary_df,aes(x=\"POINTS\", y=\"WINS_RPM\", color=\"SALARY_MILLIONS\")) + geom_point(size=200)\np + xlab(\"POINTS\/GAME\") + ylab(\"WINS\/RPM\") + ggtitle(\"NBA Players 2016-2017:  POINTS\/GAME, WINS REAL PLUS MINUS and SALARY\")","f1a4695c":"wiki_df = pd.read_csv(\"..\/input\/nba_2017_player_wikipedia.csv\");wiki_df.head()\n","dbf74f18":"wiki_df.rename(columns={'names': 'PLAYER', \"pageviews\": \"PAGEVIEWS\"}, inplace=True)\n","1adbb5c9":"median_wiki_df = wiki_df.groupby(\"PLAYER\").median()\n","459efc31":"\nmedian_wiki_df_small = median_wiki_df[[\"PAGEVIEWS\"]]","6149f44d":"median_wiki_df_small = median_wiki_df_small.reset_index()\n","b9f72740":"nba_players_with_salary_wiki_df = nba_players_with_salary_df.merge(median_wiki_df_small)\n","f2bbbd82":"twitter_df = pd.read_csv(\"..\/input\/nba_2017_twitter_players.csv\");twitter_df.head()\n","fc87546e":"nba_players_with_salary_wiki_twitter_df = nba_players_with_salary_wiki_df.merge(twitter_df)\n","b7ddfeaf":"nba_players_with_salary_wiki_twitter_df.head()","ccb5b14c":"\nplt.subplots(figsize=(20,15))\nax = plt.axes()\nax.set_title(\"NBA Player Correlation Heatmap:  2016-2017 Season (STATS & SALARY & TWITTER & WIKIPEDIA)\")\ncorr = nba_players_with_salary_wiki_twitter_df.corr()\nsns.heatmap(corr, \n            xticklabels=corr.columns.values,\n            yticklabels=corr.columns.values)","dca1c030":"Exploration of How Social Media Can Predict Winning Metrics Better Than Salary"}}