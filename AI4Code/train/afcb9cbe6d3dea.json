{"cell_type":{"0dba1638":"code","83445520":"code","5f4a58c8":"code","b64d6357":"code","697bb1f6":"code","d4781f5a":"code","6c08495d":"code","5423bd46":"code","c85d2449":"code","9b1686b3":"code","6e407ce3":"code","30546116":"code","b9036278":"code","00dcb4dd":"code","73fb7002":"code","6115c14a":"code","196fa7b3":"code","9125af9b":"code","ba3f136d":"code","7a8aaf93":"code","563b3802":"code","16fe9f50":"code","8541cf73":"code","9ba1e394":"code","6130e2f0":"code","a342b5fe":"code","233fbc7b":"code","924a79d7":"code","e566aa7e":"code","5ab58ab0":"code","f98044a4":"code","332b2b36":"code","49d9bdcf":"code","bdd3dd8d":"code","ef01aae6":"code","5187cd5e":"code","5d212594":"code","c67c8760":"code","17e47f51":"code","a6e740af":"code","25b1ffb3":"code","9ab911e4":"code","f87df034":"code","9241e375":"code","bbc4b4be":"code","d9d2f4e5":"code","2edad98c":"code","1867440a":"markdown","fa50a89e":"markdown","2bc42177":"markdown","e46c3b1c":"markdown","baee91f5":"markdown","422fcb74":"markdown","600d041f":"markdown","ccefe0f2":"markdown","194a5bf4":"markdown","24897abe":"markdown","d5cebd09":"markdown","2913e4c5":"markdown","04e81433":"markdown","d6421dc4":"markdown","a2c46ac2":"markdown","1ee26ec6":"markdown","fd5947fe":"markdown","e91c2fcf":"markdown","016ed28d":"markdown","932a9bbd":"markdown","0b3cbe30":"markdown","bcca6ea0":"markdown","e13004bb":"markdown","ed76d620":"markdown","034c7192":"markdown","d467f522":"markdown","8c0ff9d3":"markdown","c0a7e870":"markdown","3d9c83e2":"markdown","98fb71e9":"markdown","ea897424":"markdown","37817e1f":"markdown","1159b29f":"markdown","48e7fff2":"markdown"},"source":{"0dba1638":"import numpy as np # linear algebra\nimport pandas as pd # data processing, CSV file I\/O (e.g. pd.read_csv)\n\nimport seaborn as sns\nimport matplotlib.pyplot as plt\nimport plotly.express as px\nfrom plotly.subplots import make_subplots\n\nimport warnings\nwarnings.filterwarnings(\"ignore\")","83445520":"# read datasets\ndistricts_df = pd.read_csv(\"..\/input\/learnplatform-covid19-impact-on-digital-learning\/districts_info.csv\")\nproducts_df = pd.read_csv(\"..\/input\/learnplatform-covid19-impact-on-digital-learning\/products_info.csv\")","5f4a58c8":"# Functions for preprocessing\nclass GetDfForPreprocessing:\n    \"\"\"\n    this function will prepare data form dataframe for preprocessing\n    \n    Return\n    ------\n    dataframe\n    \"\"\"\n    def __init__(self, df:pd.DataFrame):\n        \n        self.df = df\n    \n    def get_info(self):\n        print('Info from data...')\n        #value = self.df.shape\n        print(f' There are {self.df.shape[0]} rows and {self.df.shape[1]} columns presnet in this data')\n        \n        #print('Columns in the data are: ', self.df.columns.tolist())\n        \n        #print(self.df.info())\n        \n        #print('Descriptive statistics: ', self.df.describe())\n        \n        missing = self.df.isnull().sum().sum()\n        print(f'The number of missing value(s): {missing}')\n        \n        total_cells = np.product(self.df.shape) # calculate total number of cells in dataframe\n        total_missing_count = self.df.isnull().sum().sum() # calculate total number of missing values\n        # cabm ulculate percentage missing\n        print('There are', round(((total_missing_count\/total_cells) * 100), 2), '%', 'missing values.')\n        \n        missing_columns = self.df.columns[self.df.isnull().any()]\n        print(f'Columns having missing value(s): {missing_columns}')\n    \n    def get_percentage_missing_columns(self):\n        '''a function to check for missing values count and percentage missing'''\n    \n        count_missing = self.df.isnull().sum() # calculate total sum of missing data\n        count_missing_percentage= round((self.df.isnull().sum()*100\/len(self.df))) # multiply sum of missing data by 100 and divide by length of the whole data and round up \n        missing_column_name= self.df.columns \n        missing_df=pd.DataFrame(zip(count_missing,count_missing_percentage,missing_column_name),\n            columns=['Missing Count', '%Missing', 'ColumnName']) # create a dataframe \n        missing_df = missing_df.set_index('ColumnName') # set missing columns as index\n        return missing_df\n        \n    def get_column_with_null(self):\n        '''\n        Return List of Columns which contain more than 30% of null values\n        '''\n        number_of_rows, number_of_columns = self.df.shape\n        df_size = number_of_rows * number_of_columns\n        df_size = self.df.shape[0]\n    \n        columns_list = self.df.columns\n        bad_columns = []\n    \n        for column in columns_list:\n            null_per_column = self.df[column].isnull().sum()\n            percentage = round( (null_per_column \/ df_size) * 100 , 2)\n        \n            if (percentage > 30 or percentage == 30):\n                bad_columns.append(column)\n    \n        return bad_columns","b64d6357":"districts_df.head()","697bb1f6":"prep_dist = GetDfForPreprocessing(districts_df)\nprep_dist.get_info()","d4781f5a":"prep_dist.get_percentage_missing_columns()","6c08495d":"district_null_columns = prep_dist.get_column_with_null()\nprint('Columns With Null Value more than 30% : ')\nprint(district_null_columns)","5423bd46":"# drop school districts with NaN states\ndistricts_df = districts_df[districts_df.state.notna()].reset_index(drop=True)","c85d2449":"# check size of data\ndistricts_df.shape","9b1686b3":"districts_df.isnull().sum()","6e407ce3":"districts_df.head()","30546116":"# Fill null values with Mode of the column\ndistricts_df = districts_df.copy()\n\n# columns with more than 30% null value    \ndistricts_df = districts_df[districts_df['state'].notna()] # data frame with state value.\n    \nfor col in district_null_columns:\n    freq = districts_df[col].mode()[0]\n    districts_df[col] = districts_df[col].fillna(freq)","b9036278":"products_df.head()","00dcb4dd":"prep = GetDfForPreprocessing(products_df)\nprep.get_info()","73fb7002":"# percentage of missing columns\nprep.get_percentage_missing_columns()","6115c14a":"products_null_columns = prep.get_column_with_null()\nprint('Columns With Null Value more than 30% : ')\nprint(products_null_columns)","196fa7b3":"# Return dataframe with non null 'Sector(s)''\nproducts_df = products_df[products_df['Sector(s)'].notna()]\nproducts_df.head()","9125af9b":"# Split 'Primary Essential Function' column\nproducts_df['primary_function_main'] = products_df['Primary Essential Function'].apply(lambda x: x.split(' - ')[0] if x == x else x)\nproducts_df['primary_function_sub'] = products_df['Primary Essential Function'].apply(lambda x: x.split(' - ')[1] if x == x else x)\n\nproducts_df.drop(\"Primary Essential Function\", axis=1, inplace=True)","ba3f136d":"products_df.head()","7a8aaf93":"# replaces 'Sites, Resources & References' column as 'Sites, Resources & Reference'\nproducts_df['primary_function_sub'] = products_df['primary_function_sub'].replace(\n    {'Sites, Resources & References' : 'Sites, Resources & Reference'})","563b3802":"# create engagement dataframe \n\nPATH = '..\/input\/learnplatform-covid19-impact-on-digital-learning\/engagement_data' \n\ntemp = []\n\nfor district in districts_df.district_id.unique():\n    df = pd.read_csv(f'{PATH}\/{district}.csv', index_col=None, header=0)\n    df[\"district_id\"] = district\n    if df.time.nunique() == 366:\n        temp.append(df)\n\nengagement_df = pd.concat(temp)\nengagement_df = engagement_df.reset_index(drop=True)","16fe9f50":"engagement_df.head()","8541cf73":"prep_eng = GetDfForPreprocessing(engagement_df)\nprep_eng.get_info()","9ba1e394":"# convert the time column to the datetime datatype\nengagement_df.time = engagement_df.time.astype('datetime64[ns]')","6130e2f0":"# Feature generation - generate more features from the engagement data\nengagement_df['month'] = engagement_df['time'].dt.month\nengagement_df['day']= engagement_df['time'].dt.day\nengagement_df['weekday']= engagement_df['time'].dt.weekday","a342b5fe":"# Ploting functions\ndef bar_plot(df, x_col, y_col, title=''):\n    plt.figure(figsize=(20, 7))\n    sns.barplot(data = df, x=x_col, y=y_col, palette=\"Set3\")\n    plt.title(title, size=16)\n    plt.xticks(fontsize=14)\n    plt.yticks(fontsize=14)\n    plt.show()\n    \ndef count_plot(df, col, title):\n    plt.figure(figsize=(20, 7))\n    sns.countplot(data = df,y = col, order=df[col].value_counts().index, palette=\"Set3\")\n    plt.title(title, size=16)\n    plt.xticks(fontsize=14)\n    plt.yticks(fontsize=14)\n    plt.show()\n    \ndef pie_plot(df, col, title=''):\n    count = df[col].value_counts()\n    plt.figure(figsize=(20, 7))\n    plt.pie(list(count), labels=count.index, pallete ='cubehelix',autopct='%1.2f%%')\n    plt.title(title, size=16)\n    plt.legend()\n    plt.show()\n    \ndef count_plot2(df,col,hue,title):\n    plt.figure(figsize=(20,10))\n    ax=sns.countplot(data=df,x=col,hue= hue,palette='Set3')\n    plt.xticks(rotation=90)\n    plt.title(title, size=16)\n    plt.show()\n\ndef time_plot(df, x_col, y_col, title=''):\n    plt.figure(figsize=(20, 7))\n    sns.cubehelix_palette(as_cmap=True)\n    sns.lineplot(data=df, x=x_col, y=y_col) #pallete='cubehelix_r')\n    plt.title(title, size=16)\n    plt.xticks(rotation=90, fontsize=14)\n    plt.yticks( fontsize=14)\n    plt.xlabel(x_col, fontsize=16)\n    plt.ylabel(y_col, fontsize=16)\n    plt.show()","233fbc7b":"# view the data\ndistricts_df.head()","924a79d7":"count_plot(districts_df, 'state', 'Count of State Distribution')","e566aa7e":"count_plot(districts_df, 'locale', 'Locale Distribution')","5ab58ab0":"count_plot(districts_df, 'pct_free\/reduced', \"Percentage Free or Reduced-price lunch Distribution\")","f98044a4":"count_plot(districts_df, 'pp_total_raw', 'Total Expenditure Per Pupil')","332b2b36":"count_plot2(districts_df,'state','locale','Locality in each State')","49d9bdcf":"products_df.head()","bdd3dd8d":"# top companies\nresult = products_df['Provider\/Company Name'].value_counts().head(15)\ntop_comp = pd.DataFrame({'Company': result.index, 'Count': result})\nbar_plot(top_comp,\"Count\" , \"Company\" , title='Top 15 Companies\/Providers')","ef01aae6":"products_sect=products_df['Sector(s)'].value_counts().reset_index()\n\nproducts_sect.columns = ['Sector(s)','percent']\n\nproducts_sect['percent'] \/= len(products_df)\nfig = px.pie(products_sect, names='Sector(s)',values='percent',\n             color_discrete_sequence=px.colors.qualitative.Set3,\n             title='Distribution of Sectors',width=700,height=500\n)\nfig.show()","5187cd5e":"count_plot(products_df, 'primary_function_main', 'Function of the Products')","5d212594":"count_plot(products_df, 'primary_function_sub', 'Sub-categories in Primary Function')","c67c8760":"engagement_df.head()","17e47f51":"plt.figure(figsize=(15,11))\nsns.lineplot(y=engagement_df['pct_access'],x=engagement_df[\"month\"],palette='rocket')\nplt.title(\"Average access per month\")","a6e740af":"plt.figure(figsize=(15,11))\nsns.lineplot(hue=engagement_df['weekday'],y=engagement_df['pct_access'],x=engagement_df[\"month\"],palette='rocket')\nplt.title(\"Average access per month per day\")","25b1ffb3":"plt.figure(figsize=(15,10))\nsns.lineplot(y=engagement_df['engagement_index'],x=engagement_df[\"month\"])\nplt.title(\"Engagement per month\")","9ab911e4":"plt.figure(figsize=(15,10))\nsns.lineplot(y=engagement_df['engagement_index'],x=engagement_df[\"weekday\"])\nplt.title(\"Engagement index per day\")","f87df034":"result = engagement_df.groupby('time').agg({'engagement_index': 'mean', 'pct_access': 'mean', 'lp_id': 'count'}).\\\n            reset_index()\n\ntime_plot(result, \"time\", \"engagement_index\", title='Engagement Over Time')","9241e375":"time_plot(result, \"time\", \"pct_access\", title='Percentage of access over time')","bbc4b4be":"# merge the districts and engagement data\ndistricts_engagement = pd.merge(districts_df, engagement_df, left_on='district_id', right_on='district_id')\ndistricts_engagement.head()","d9d2f4e5":"# merge the products and engagement data\nproducts_engagement = pd.merge(products_df, engagement_df, left_on='LP ID', right_on='lp_id')\nproducts_engagement.head()","2edad98c":"bar_plot(districts_engagement, 'locale', 'engagement_index', title='Engagements in each locale')","1867440a":"Google LLC is the top provider with a count more than 25, other companies\/providers are below 10.","fa50a89e":"## Problem Statement\nThe COVID-19 Pandemic has disrupted learning for more than 56 million students in the United States. In the Spring of 2020, most states and local governments across the U.S. closed educational institutions to stop the spread of the virus. In response, schools and teachers have attempted to reach students remotely through distance learning tools and digital platforms. Until today, concerns of the exacaberting digital divide and long-term learning loss among America\u2019s most vulnerable learners continue to grow.","2bc42177":"Sites, resources and refernece category has more products, then Digital learning platforms","e46c3b1c":"The Subhurb locale has the highest distribution of collected data and Town, the least","baee91f5":"* most states are made up of the suburbs \n* Tennesssee is made up of mainly tow locales\n* NorthDakota and New Hampshire has Rural locales\n* states like Minnesota,Arizona, District of Columbia, Michigan etc have only one locale","422fcb74":"Percentage of students in the districts eligible for free or reduced-price lunch has the most Schools provide about 20% - 40% of aid for their students.","600d041f":"There is more engagment at the begining of the week then it slowly drops as it gets to the weekend. Tuesday has the highest number of average engagment\n","ccefe0f2":"* ### Insights on Engagements data","194a5bf4":"#### Data overview and Preprocessing","24897abe":"The top 3 school district are Connecticut, Utah and Massachusets","d5cebd09":"The engagement per month has similar trend with the percentage access. Engagement took an uptrend in March and then dropped April.","2913e4c5":"The trend tends to break, which may be due to the summer break from June to Mid August. The trend also moves up afterwards.","04e81433":"* ### Products data","d6421dc4":"## Objective :\nUse digital learning data to analyze the impact of COVID-19 on student learning,explore the state of digital learning in 2020 and how the engagement of digital learning relates to factors such as district demographics, broadband access, and state\/national level policies and events.","a2c46ac2":"Rural Areas are highly engaged than the others. it could be the a case since most schools are outside rural areas and this could be the better means to education.","1ee26ec6":"* Only about 2% of the data contains missing values\n* Data contains only object datatypes","fd5947fe":"Perk-12 Sector of education is where the products are most used with a percentage of 48.3","e91c2fcf":"* ### Insights on Products data","016ed28d":"The above shows the used functionalities of the websites;\nLC - Learning and Curiculum, CM - Class Room Management, SDO - School and District Operation.\n\nMost products fall in the Learning and Curriculum category. Let's have a look at the sub-categories.","932a9bbd":"Above concatenates the engagement data from all remaining districts in one dataframe by adding the key column 'district_id' to each engagement file as shown below.","0b3cbe30":"### More analysis to perform:\n* Upload the external datasets- COVID-19 US State Policy database and KFF\n* Merge and perform analysis on the external, products, engagement and districts data\n* Uncover more insights impacting Covid-19\n* Draw conclusions","bcca6ea0":"* ### Insights on Districts data","e13004bb":"The Engagement is reduced from the 6th month to the 8th month, This is due to the school ends on this period and students are their break, and return to school on september","ed76d620":"All missing values are below 30%","034c7192":"The maximum per-pupil total expenditure is about8,000 to 10,000. ","d467f522":"# LearnPlatform COVID-19 Impact on Digital Learning","8c0ff9d3":"* 27.1% of the data contains missing values\n* Districts data  contains one integer datatype and 6 categorical datatypes\n* Apparently, all columns have missing values except the id column","c0a7e870":"The lineplot above shows the percentage access each day of the month. Interactions are quite low on the weekends. Engagement reached peek in months January and September, the trend starts dipping from february and takes a sharp drop in July.","3d9c83e2":"* ### Engagements data","98fb71e9":"#### Merge datasets","ea897424":"* ### Districts data","37817e1f":"#### Import libraries","1159b29f":"## Data Overview\n* engagement_data : is based on LearnPlatform\u2019s Student Chrome Extension. The extension collects page load events of over 10K education technology products in our product library, including websites, apps, web apps, software programs, extensions, ebooks, hardwares, and services used in educational institutions. The engagement data have been aggregated at school district level, and each file represents data from one school district.\n* products_info.csv : includes information about the characteristics of the top 372 products with most users in 2020.\n* districts_info.csv : file includes information about the characteristics of school districts, including data from NCES and FCC.\n\nExternal data :\nCOVID-19 US State Policy database and KFF","48e7fff2":"#### Exploratory Data Analysis:\nIn this analytics, trends in digital learning are uncovered; how engagement with digital learning relates to factors like district demographics, broadband access, and state\/national level policies and events."}}