{"cell_type":{"76dc1713":"code","90f31048":"code","fb2b289e":"code","91ac6bec":"code","325e3e21":"code","6e983e75":"code","c8082542":"code","bd40c064":"code","954b3b81":"code","64e45e20":"code","b3223fb3":"code","be4eaf01":"code","45b3d114":"code","e7aadeb9":"code","00269b20":"code","0b5adab2":"code","3998c29a":"code","f20d6893":"code","3c7bb9a6":"code","cbf36fe4":"code","852a3ed3":"code","c6448ee1":"markdown","f31a6113":"markdown","91ffb0a5":"markdown","fbd3951e":"markdown"},"source":{"76dc1713":"\nfrom plotly.offline import init_notebook_mode, iplot\nfrom plotly.graph_objs import *\ninit_notebook_mode(connected=True)\nimport plotly.graph_objs as go\nimport numpy as np # linear algebra\nimport pandas as pd # data processing, CSV file I\/O (e.g. pd.read_csv)\nimport os\nimport missingno as msno\nimport matplotlib.pyplot as plt\nimport seaborn as sns\ndf=pd.read_csv('..\/input\/traffic-collision-data-from-2010-to-present.csv')\ndf=df.drop(['DR Number','Date Reported','Address','Cross Street',\n            'MO Codes','Crime Code Description'],axis=1)\ndf['year'] = pd.DatetimeIndex(df['Date Occurred']).year\ndf['month'] = pd.DatetimeIndex(df['Date Occurred']).month\ndf['day'] = pd.DatetimeIndex(df['Date Occurred']).day\ndf['time']=df['year']+(1\/12)*df['month']+(1\/360)*df['day']","90f31048":"df.isnull().sum()","fb2b289e":"df1=df.drop(['Victim Age'],axis=1)","91ac6bec":"df2=df1.drop(df1[df1['Victim Sex'].isnull()].index)\ndf2=df2.drop(df2[df2['Premise Description'].isnull()].index)\ndf2=df2.drop(df2[df2['Victim Descent'].isnull()].index)\ndf2.isnull().sum()","325e3e21":"df2['logintude']=df2.Location.str[105:113]\ndf2['logintude']= df2['logintude'].str.replace(\"'\", \"\", regex=True).str.replace(\",\", \"\", regex=True).str.replace(\" \", \"\", regex=True).str.replace(\"l\", \"1\", regex=True)\ndf2.loc[df2['logintude'].str[1:3]!= '11',['logintude']]='-118'\ndf2['logintude']=df2['logintude'].astype(float) \n\ndf2['latitude']=df2.Location.str[130:136]\ndf2['latitude']= df2['latitude'].str.replace(\"'\", \"\", regex=True).str.replace(\",\", \"\", regex=True).str.replace(\" \", \"\", regex=True).str.replace(\"l\", \"1\", regex=True).str.replace(\"}\", \"\", regex=True)\n#df2.loc[(df2['latitude'].str[0]== '.')|(df2['latitude'].str[0]==' ')|(df2['latitude'].str[0]=='0'),(df2['latitude'].str[0]=='n') ,['latitude']]=0\ndf2.loc[(df2['latitude'].str[0:2]!= '33') & (df2['latitude'].str[0:2]!= '34'),['latitude']]='32'\ndf2['latitude']=df2['latitude'].astype(float) \n","6e983e75":"df2=df2[df2['logintude']< -118.15]\ndf2=df2[df2['latitude']> 33.6]\ndf2=df2[df2['latitude']< 34.38]\ndf2.head()","c8082542":"df2['Victim Descent'].unique()\ndf2.loc[df2['Victim Descent']=='H',['Victim Descent']]='Hispanic'\ndf2.loc[df2['Victim Descent']=='B',['Victim Descent']]='Black'\ndf2.loc[df2['Victim Descent']=='O',['Victim Descent']]='Other'\ndf2.loc[df2['Victim Descent']=='W',['Victim Descent']]='White'\ndf2.loc[df2['Victim Descent']=='X',['Victim Descent']]='Unknown'\ndf2.loc[df2['Victim Descent']=='A',['Victim Descent']]='Asian'\ndf2.loc[df2['Victim Descent']=='K',['Victim Descent']]='Korean'\ndf2.loc[df2['Victim Descent']=='C',['Victim Descent']]='Chinese'\ndf2.loc[df2['Victim Descent']=='F',['Victim Descent']]='Filipino'\ndf2.loc[df2['Victim Descent']=='U',['Victim Descent']]='Hawaian'\ndf2.loc[df2['Victim Descent']=='J',['Victim Descent']]='Japaniese'\ndf2.loc[df2['Victim Descent']=='P',['Victim Descent']]='Pacific Islanders'\ndf2.loc[df2['Victim Descent']=='V',['Victim Descent']]='Vietnamise'\ndf2.loc[df2['Victim Descent']=='V',['Victim Descent']]='Vietnamise'\ndf2.loc[df2['Victim Descent']=='Z',['Victim Descent']]='Asian Indian'\ndf2.loc[df2['Victim Descent']=='I',['Victim Descent']]='American Indian'\ndf2.loc[df2['Victim Descent']=='G',['Victim Descent']]='Guamanian'\ndf2.loc[df2['Victim Descent']=='S',['Victim Descent']]='Samoan'\ndf2.loc[df2['Victim Descent']=='D',['Victim Descent']]='Cambodian'\ndf2.loc[df2['Victim Descent']=='L',['Victim Descent']]='Laotian'\ndf2.loc[df2['Victim Descent']=='-',['Victim Descent']]='Unknown'","bd40c064":"df.time.hist()","954b3b81":"df3=df2.sort_values(by=['time'])\ndf3.shape\n","64e45e20":"import matplotlib.pyplot as plt \nfrom matplotlib.animation import FuncAnimation\nimport numpy as np\n\nx=df3.loc[:,'logintude'].values\ny=df3.loc[:,'latitude'].values\nxy=np.column_stack((x,y))\ndt = 0.005\nn=382600\nL = 1\nparticles=np.zeros(n,dtype=[(\"position\", float , 2),\n                            (\"velocity\", float ,2),\n                            (\"force\", float ,2),\n                            (\"size\", float , 1)])\n\nparticles[\"position\"]=(xy);\nparticles[\"velocity\"]=np.zeros((n,2));\nparticles[\"size\"]=0.5*np.ones(n);\n\nfig = plt.figure(figsize=(7,7))\nax = plt.axes(xlim=(-119,-118),ylim=(33.5,34.4))\nscatter=ax.scatter(particles[\"position\"][:,0], particles[\"position\"][:,1])\n\ndef update(frame_number):\n   # particles[\"force\"]=np.random.uniform(-2,2.,(n,2));\n   # particles[\"velocity\"] = particles[\"velocity\"] + particles[\"force\"]*dt\n   # particles[\"position\"] = particles[\"position\"] + particles[\"velocity\"]*dt\n\n    #particles[\"position\"] = particles[\"position\"]%L\n    scatter.set_offsets(xy[:100*frame_number,:])\n    return scatter, \n\nanim = FuncAnimation(fig, update, interval=100)","b3223fb3":"from IPython.display import HTML\nHTML(anim.to_jshtml())","be4eaf01":"mapbox_access_token='pk.eyJ1IjoiYW1tb24xIiwiYSI6ImNqbGhtdDNtNzFjNzQzd3J2aDFndDNmbmgifQ.-dt3pKGSvkBaSQ17qXVq3A'\ndf3=df2.sort_values('time')","45b3d114":"df3=df2[df2['Victim Sex']=='F'].head(2000)\ndf4=df2[df2['Victim Sex']=='M'].head(2000)\n\ndata = [\n    go.Scattermapbox(\n        lat=df3['latitude'],\n        lon=df3['logintude'],\n        mode='markers',\n        marker=dict(\n            size=5,\n            color='red',\n            opacity=0.3\n        )),\n    go.Scattermapbox(\n        lat=df4['latitude'],\n        lon=df4['logintude'],\n        mode='markers',\n        marker=dict(\n            size=5,\n            color='blue',\n            opacity=0.3\n        ))]\nlayout = go.Layout(\n    autosize=True,\n    hovermode='closest',\n    mapbox=dict(\n        accesstoken=mapbox_access_token,\n        bearing=0,\n        center=dict(\n            lat=34.052363,\n            lon=-117.960140\n        ),\n        pitch=0,\n        zoom=7.8,\n        style='light'\n    ),\n)\n\nfig = dict(data=data, layout=layout)\niplot(fig, filename='Crime')","e7aadeb9":"plt.figure(figsize=(15,20))\nax=sns.scatterplot(x=\"logintude\", y=\"latitude\", hue=\"Victim Sex\",data=df2)","00269b20":"plt.figure(figsize=(15,20))\nax=sns.scatterplot(x=\"logintude\", y=\"latitude\", hue=\"Victim Descent\",data=df2)","0b5adab2":"plt.figure(figsize=(15,20))\ndf3=df2[(df2[\"Premise Description\"]=='STREET')|(df2[\"Premise Description\"]=='PARKING LOT')|(df2[\"Premise Description\"]=='FREEWAY')|\n        (df2[\"Premise Description\"]=='SIDEWALK')]\nax=sns.scatterplot(x=\"logintude\", y=\"latitude\", hue=\"Premise Description\",data=df3)","3998c29a":"fig = plt.figure(figsize=(20,20))\nax = fig.add_subplot(111, projection='3d')\nax.scatter(df2['logintude'], df2['latitude'], df2['Time Occurred'], c='skyblue', s=60)\nax.view_init(30, 185)\nplt.show()","f20d6893":"sns.scatterplot(df2['logintude'],df2['Time Occurred'])","3c7bb9a6":"sns.scatterplot(df2['latitude'],df2['Time Occurred'])","cbf36fe4":"fig = plt.figure(figsize=(20,20))\nax = fig.add_subplot(111, projection='3d')\nax.scatter(df2['logintude'], df2['latitude'], df2['Premise Code'], c='skyblue', s=60)\nax.view_init(30, 185)\nplt.show()","852a3ed3":"df_premise=df.drop_duplicates('Premise Code',keep='first')\ndf_premise.sort_values('Premise Code')\ndf_premise_head=df_premise[['Premise Code','Premise Description']].copy()\ndf_premise_head.head(300)","c6448ee1":"<h2><a id=\"vis\">Visualizations<\/a><h2> ","f31a6113":"<h2><a id=\"dv\">Extracting X and Y<\/a><h2> ","91ffb0a5":"<h2><a id=\"cln\"> Data Cleaning<\/a><h2>","fbd3951e":"<h1>Work concentrated on finding corelations between different parameters of crime victims<h1>\n\n1. [Data ceaning](#cln)\n1. [Extracting X and Y](#dv)\n1. [Visualizations](#vis)"}}