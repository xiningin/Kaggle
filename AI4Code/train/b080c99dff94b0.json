{"cell_type":{"ead67e6a":"code","a580f859":"code","453a5d9b":"code","a3687fd8":"code","94b18916":"code","1fe73c71":"code","18a6f32c":"code","7e4534dc":"code","ca493a28":"code","228a69c8":"code","7fe4044e":"markdown"},"source":{"ead67e6a":"# - Libraries -\nimport numpy as np # linear algebra\nimport pandas as pd # data processing, CSV file I\/O (e.g. pd.read_csv)\nimport os\n\nimport plotly.graph_objects as go\nimport plotly.express as px","a580f859":"# - Data -\nurl = '..\/input\/earthquakenepal\/ISCOpenquake.csv'\ndata = pd.read_csv(url, header='infer')","453a5d9b":"#Shape\nprint(\"Total Records: \", data.shape[0])","a3687fd8":"#Drop EventId Column\ndata = data.drop('eventID',axis=1)","94b18916":"#Inspect\ndata.head()","1fe73c71":"#Seperate Dataframe to get aggregate earthquake count per year\nagg_func = {'latitude':'first', 'longitude':'first', 'magnitude':'count'}\ndf_year_count = data.groupby(['year']).agg(agg_func)\n\n#Convert Index to Column\ndf_year_count['year'] = df_year_count.index\n\n#Drop Previous Index\ndf_year_count.reset_index(drop=True, inplace=True)","18a6f32c":"fig = go.Figure(data=go.Scatter(x=df_year_count['year'], y=df_year_count['magnitude'], name='Earthquakes'))\nfig.update_layout(title=\"Number of Earthquakes in Nepal over the years\")\nfig.show()","7e4534dc":"#Seperate Dataframe to get aggregate earthquake per year\nagg_func = {'latitude':'first', 'longitude':'first', 'magnitude':'first'}\ndf_year_eq = data.groupby(['year']).agg(agg_func)\n\n#Convert Index to Column\ndf_year_eq['year'] = df_year_eq.index\n\n#Drop Previous Index\ndf_year_eq.reset_index(drop=True, inplace=True)","ca493a28":"fig = px.density_mapbox(df_year_eq, lat='latitude', lon='longitude', z='magnitude', radius=10,\n                        zoom=5,mapbox_style=\"stamen-terrain\")\nfig.update_layout(margin={\"r\":0,\"t\":0,\"l\":0,\"b\":0})\nfig.show()","228a69c8":"#Earthquakes in Nepal over the years (animated)\nfig = px.scatter_geo(df_year_eq, lat='latitude', lon='longitude', color = 'magnitude',\n                     hover_name='magnitude', size=\"magnitude\",\n                     animation_frame=\"year\", center=dict(lat=30.7593, lon=80.2794)\n                    )\nfig.update_layout(margin={\"r\":0,\"t\":0,\"l\":0,\"b\":0})\nfig.show()","7fe4044e":"# Nepal Earthquakes - Geospatial Analysis"}}