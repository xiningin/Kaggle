{"cell_type":{"52622bf7":"code","e6ccac3a":"code","be1db2f6":"code","81710197":"code","039d26b4":"code","3e0d5cc8":"code","ec130543":"code","2f6776c9":"code","f97ccd6e":"code","43d7b4d3":"code","2f68cdd5":"code","1f43cf76":"code","ddab7608":"code","3cc82158":"code","cbc81ab5":"code","b72a1d22":"code","d78e3580":"code","8a360250":"code","47c9cbb4":"code","7334f5a8":"code","51c2c8c6":"code","3666460a":"markdown","9126bcda":"markdown","e8efc556":"markdown","582bffc6":"markdown"},"source":{"52622bf7":"# GEREKL\u0130 K\u00dcT\u00dcPHANELER TANIMLANIR...\nimport pandas as pd\nimport numpy as np\nimport seaborn as sns\nimport matplotlib.pyplot as plt\n\n#to display all columns and rows:\npd.set_option('display.max_columns',None);\npd.set_option('display.max_rows',None);\n\n# virg\u00fclden sonra g\u00f6sterilecek olan basamak say\u0131s\u0131:\npd.set_option('display.float_format', lambda x:'%.2f' %x)","e6ccac3a":"# RFM ANAL\u0130Z\u0130 \u0130\u00c7\u0130N VER\u0130SET\u0130 OKUTULUR...\ndf_2010_2011 = pd.read_excel(\"..\/input\/online-retail-ii-data-set-from-ml-repository\/online_retail_II.xlsx\", sheet_name = \"Year 2010-2011\")","be1db2f6":"# HERHANG\u0130 B\u0130R DURUMDA VER\u0130SET\u0130N\u0130N ORJ\u0130NAL\u0130NE \u0130HT\u0130YA\u00c7 DUYULMASI HAL\u0130NDE  VER\u0130SET\u0130 KOPYALANIP B\u0130R YERDE SAKLANAB\u0130L\u0130R...\ndf = df_2010_2011.copy()","81710197":"# VER\u0130SET\u0130NDE HANG\u0130 G\u00d6ZLEM B\u0130R\u0130MLER\u0130NE SAH\u0130P OLDU\u011eUNA BAKILIR...\ndf.head()","039d26b4":"# VER\u0130SET\u0130NDEK\u0130 VER\u0130N\u0130N T\u00dcRLER\u0130 VE D\u0130\u011eER B\u0130LG\u0130LERE BAKILIR.\ndf.info()","3e0d5cc8":"# VER\u0130SET\u0130NDE KA\u00c7 ADET EKS\u0130K VER\u0130 OLDU\u011eUNA BAKILIR...\ndf.isnull().sum()","ec130543":"# EKS\u0130K VER\u0130LER \u0130\u015eLEM KOLAYLI\u011eI \u0130\u00c7\u0130N KALICI OLARAK S\u0130L\u0130N\u0130R...\ndf.dropna(inplace = True)\ndf.isnull().sum()","2f6776c9":"# VER\u0130SET\u0130NDE CUSTOMER ID'LER FLOAT OLARAK G\u00d6R\u00dcNMEKTE. BUNLARI \u0130NTEGER D\u00d6N\u00dc\u015e\u00dcM\u00dc YAPILIR.\ndf[\"Customer ID\"] = df[\"Customer ID\"].astype(int)\ndf.head()","f97ccd6e":"# VER\u0130SET\u0130NDE AYKIRI VER\u0130N\u0130N OLUP OLMADI\u011eINA BAKILIR.\ndf.describe([0.01,0.05,0.10,0.25,0.50,0.75,0.90,0.95,0.99]).T","43d7b4d3":"# MAX DE\u011eERLER\u0130 VE %99 DE\u011eERLER\u0130 ARASINDA B\u00dcY\u00dcK FARKLAR OLDU\u011eU G\u00d6R\u00dcLMEKTED\u0130R. MAX DE\u011eER QUANT\u0130T\u0130Y \u0130\u00c7\u0130N 80995 \u0130KEN %99 DE\u011eER\u0130 120'D\u0130R. AYNI \u0130\u015eLEM D\u0130\u011eERLER\u0130 \u0130\u00c7\u0130NDE GE\u00c7ERL\u0130D\u0130R.\n# KA\u00c7 ADET AYKIRI G\u00d6ZLEM OLDU\u011eUNU BULUNUR.\nfor feature in [\"Quantity\",\"Price\"]:\n    Q1 = df[feature].quantile(0.01)\n    Q3 = df[feature].quantile(0.99)\n    IQR = Q3 - Q1\n    upper = Q3 + 1.5 * IQR\n    lower = Q1 - 1.5 * IQR\n    \n    if df[(df[feature] > upper) | (df[feature] < lower)].any(axis = None):\n        print(feature,\"yes\")\n        print(df[(df[feature] > upper) | (df[feature] < lower)].shape[0])\n    else:\n        print(feature,\"no\")","2f68cdd5":"# \u0130\u015eLEMLER SADECE SATI\u015e YAPILAN \u00dcR\u00dcNLER \u0130\u00c7\u0130N HESAPLANMALIDIR. FATURA NUMALARININ BA\u015eINDA C OLANLAR \u0130PTAL ED\u0130LEN \u00dcR\u00dcNLER OLDU\u011eU \u0130\u00c7\u0130N BU \u00dcR\u00dcNLER VER\u0130SET\u0130NDEN KALDIRILMALIDIR.\ndf = df[~df[\"Invoice\"].str.contains(\"C\", na=False)]","1f43cf76":"# MON\u0130TERY DE\u011eER\u0130N\u0130N HESAPLANAB\u0130LMES\u0130 \u0130\u00c7\u0130N TOTAL PR\u0130CE DE\u011eERLER\u0130N\u0130N HESAPLANMASI GEREKMEKTED\u0130R.\ndf[\"TotalPrice\"] = df[\"Quantity\"] * df[\"Price\"]\ndf.head()","ddab7608":"# TEMEL OLARAK M\u00dc\u015eTER\u0130N\u0130N EN SON KA\u00c7 G\u00dcN \u00d6NCE ALI\u015eVER\u0130\u015e YAPTI\u011eI BULUNUR.\n# SON FATURA TAR\u0130H\u0130 REQUENCY'N\u0130N HESAPLANMASI \u0130\u00c7\u0130N KULLANILIR. SON FATURA TAR\u0130H\u0130N\u0130N BULUNUR...\ndf[\"InvoiceDate\"].max()","3cc82158":"# SON FATURA TAR\u0130H\u0130 BU G\u00dcN\u00dcN TAR\u0130H\u0130 OLARAK KABUL ED\u0130LER...\nimport datetime as dt\ntoday_date = dt.datetime(2011,12,9)\ntoday_date","cbc81ab5":"# SON FATURA TAR\u0130H\u0130 T\u00dcM TAR\u0130HLERDEN TEK TEK \u00c7IKARTILIR. \u00c7IKAN \u0130\u015eLEM SONU\u00c7LARI \"... DAYS ...\" OLDU\u011eU \u0130\u00c7\u0130N \u0130NTEGER DE\u011eERLERE D\u00d6N\u00dc\u015eT\u00dcR\u00dcL\u00dcR. BUNUN \u0130\u00c7\u0130N .DAYS KULLANILIR.\nrecency_df = df.groupby(\"Customer ID\").agg({\"InvoiceDate\": lambda x: (today_date - x.max()).days})\nrecency_df.rename(columns = {\"InvoiceDate\":\"Recency\"}, inplace = True)\nrecency_df.head()","b72a1d22":"# TEMEL OLARAK M\u00dc\u015eTER\u0130N\u0130N KA\u00c7 ADET ALI\u015eVER\u0130\u015e YAPTI\u011eI BULUNUR.\n# BU \u0130\u015eLEM \u0130\u00c7\u0130N CUSTOMER ID 'LERE G\u00d6RE FATURALARIN E\u015eS\u0130Z OLANLARI ALINIR. B\u00d6YLECE HANG\u0130 M\u00dc\u015eTER\u0130N\u0130N KA\u00c7 ADET ALI\u015eVER\u0130\u015e YAPTI\u011eI BULUNAB\u0130L\u0130R.\nfreq_df = df.groupby([\"Customer ID\"]).agg({\"InvoiceDate\":\"nunique\"})\nfreq_df.rename(columns = {\"InvoiceDate\": \"Frequency\"}, inplace = True)\nfreq_df.head()","d78e3580":"# TEMEL OLARAK M\u00dc\u015eTER\u0130LER\u0130N NE KADAR \u00dcCRET BIRAKTI\u011eI BULUNUR.\n# BU \u0130\u015eLEM \u0130\u00c7\u0130N CUSTOMER'ID LERE G\u00d6RE FATURALARIN TOPLAM TUTARINI ALINIR.\nmonetary_df = df.groupby(\"Customer ID\").agg({\"TotalPrice\":\"sum\"})\nmonetary_df.rename(columns = {\"TotalPrice\": \"Monetary\"}, inplace = True)\nmonetary_df.head()","8a360250":"# RFM puanlamas\u0131 olu\u015fturulur. Recency de\u011feri i\u00e7in en k\u00fc\u00e7\u00fck de\u011fer en b\u00fcy\u00fck puan oldu\u011fu i\u00e7in bu i\u015fleme dikkat edilir.\nrfm = pd.concat([recency_df,freq_df,monetary_df], axis=1)\nrfm[\"RecencyScore\"] = pd.qcut(rfm[\"Recency\"], 5, labels = [5, 4, 3, 2, 1])\nrfm[\"FrequencyScore\"] = pd.qcut(rfm[\"Frequency\"].rank(method=\"first\"), 5, labels = [1, 2, 3, 4, 5])\nrfm[\"MonetaryScore\"] = pd.qcut(rfm[\"Monetary\"], 5, labels = [1, 2, 3, 4, 5])\nrfm[\"RFM_Score\"] = (rfm['RecencyScore'].astype(str) + rfm['FrequencyScore'].astype(str)+ rfm['MonetaryScore'].astype(str))\nrfm.head()","47c9cbb4":"# M\u00dc\u015eTER\u0130LER\u0130N RFM PUANLARINA G\u00d6RE SINIFLANDIRILMASI YAPILIR. SINIFLANDIRMA \u0130\u00c7\u0130N R VE F DE\u011eERLER\u0130 KULLANILIR M\u00dc\u015eTERLER\u0130N M DE\u011eER\u0130NE \u0130HT\u0130YA\u00c7 YOKTUR.\n# REGEX KULLANILARAK \u0130S\u0130MLEND\u0130R\u0130LME YAPILIR.\nseg_map = {\n    r'[1-2][1-2]': 'Hibernating',\n    r'[1-2][3-4]': 'At Risk',\n    r'[1-2][5]'  : 'Cant Loose',\n    r'3[1-2]'    : 'About to Sleep',\n    r'33'        : 'Need Attention',\n    r'[3-4][4-5]': 'Loyal Customers',\n    r'41'        : 'Promising',\n    r'51'        : 'New Customers',\n    r'[4-5][2-3]': 'Potential Loyalists',\n    r'5[4-5]'    : 'Champions'    \n}\n\nrfm['Segment']=(rfm['RecencyScore'].astype(str) + rfm['FrequencyScore'].astype(str))\nrfm['Segment'] = rfm['Segment'].replace(seg_map, regex=True)\nrfm.head()","7334f5a8":"rfm[[\"Segment\",\"Recency\",\"Frequency\",\"Monetary\"]].groupby(\"Segment\").agg([\"mean\",\"count\",\"median\"])","51c2c8c6":"new_df = pd.DataFrame()\nnew_df[\"Loyal CustomersID\"] = rfm[rfm[\"Segment\"] == \"Loyal Customers\"].index\nnew_df.to_csv(\"Loyal_Customers.csv\")","3666460a":"# RFM ANAL\u0130Z\u0130\n- Bu \u00f6devde bir marketin sat\u0131\u015f 2010-2011 sat\u0131\u015f verilerinin \u00fczerinde RFM analizi uygulanm\u0131\u015ft\u0131r.\n\n**De\u011fi\u015fkenler**\n- InvoiceNo: Fatura numaras\u0131. Her i\u015fleme yani faturaya ait e\u015fsiz numara. E\u011fer bu kod C ile ba\u015fl\u0131yorsa i\u015flemin iptal edildi\u011fini ifade eder.\n- StockCode: \u00dcr\u00fcn kodu. Her bir \u00fcr\u00fcn i\u00e7in e\u015fsiz numara.\n- Description: \u00dcr\u00fcn ismi\n- Quantity: \u00dcr\u00fcn adedi. Faturalardaki \u00fcr\u00fcnlerden ka\u00e7ar tane sat\u0131ld\u0131\u011f\u0131n\u0131 ifade etmektedir.\n- InvoiceDate: Fatura tarihi ve zaman\u0131\n- UnitPrive: \u00dcr\u00fcn fiyat\u0131 (Sterlin Cinsinden)\n- CustomerID: E\u015fsiz m\u00fc\u015fteri numaras\u0131\n- Country: \u00dclke ismi. M\u00fc\u015fterinin ya\u015fad\u0131\u011f\u0131 \u00fclke.","9126bcda":"# FREQUENCY","e8efc556":"# YORUMLAR\n## \u015eampiyonlar \u0130\u00e7in Yorumlar\n\u015eampiyonlar bu i\u015fletmenin gelirlerinin %49'a yak\u0131n\u0131n\u0131 olu\u015fturuyor. Bu nedenle bu ki\u015fileri kaybetmememiz gerekiyor. Fakat bu ki\u015filer zaten bizden s\u0131k ve \u00e7ok al\u0131\u015fveri\u015f yap\u0131yorlar. Bu ki\u015filere \u00e7ok indirim yapmak, kazand\u0131rd\u0131klar\u0131 paray\u0131 d\u00fc\u015f\u00fcrebilir. Bir insan olarak s\u0131k al\u0131\u015fveri\u015f yapt\u0131\u011f\u0131m\u0131z yerden di\u011ferlerine g\u00f6re ayr\u0131cal\u0131k bekleriz. O halde bu i\u015fletme :\n\n- 1-\u015eampiyonlara \u00f6zel \u00fcyelik sistemi getirmeli. \u00dcyelik sisteminde %3-7 belki %10'lara varan indirimler yap\u0131labilir. Bu indirimler s\u00fcrekli olmamal\u0131 ve genel indirim zamanlar\u0131na da denk gelmemeli. Belki s\u00fcreli indirim olabilir. Her ay ba\u015flang\u0131c\u0131ndan itibaren 1 hafta gibi bir s\u00fcre bu indirimlerden yararlanabilirler.\n\n- 2-Bu ki\u015filere zaman zaman g\u00fczel dileklerde bulunmak, \u00f6nemli hissettirecek mesajlar atmak de\u011ferli hissettirecektir ve bu da kal\u0131c\u0131l\u0131\u011f\u0131 artt\u0131racakt\u0131r. Her insan, \u00f6nemli hissetmeyi sever.\n\n- 3-Promosyon linkleri olmal\u0131 ve bunlar da \u00f6d\u00fcllendirilmeli. Yeni bir m\u00fc\u015fteri getirme ba\u015f\u0131na bir hediye sistemi olabilir. Bu ayr\u0131ca yeni m\u00fc\u015fteri de \u00e7ekecektir.\n\n## Aksiyon Gerekli \u0130\u00e7in Yorumlar\nBu ki\u015filer i\u015fletmenin gelirlerinin yakla\u015f\u0131k %2'sini olu\u015fturmakta. Bu ki\u015filer bizden yeterince al\u0131\u015fveri\u015f yap\u0131yorlar fakat arzu etti\u011fimiz geliri bize kazand\u0131rm\u0131yorlar.\n\n- 1- Bu ki\u015filerin al\u0131\u015fveri\u015f faturalar\u0131 incelenmeli, apriori gibi algoritmalarla analiz edilmeliler. Bu \u015fekilde fazla \u00fcr\u00fcn almalar\u0131 sa\u011flanmaya \u00e7al\u0131\u015f\u0131labilir.\n\n- 2- Zaman zaman hat\u0131rlat\u0131c\u0131 mesajlar at\u0131lmal\u0131 fakat s\u0131k olursa bu ki\u015fide ho\u015fnutsuzlu\u011fa sebep olabilir. Bu y\u00fczden ayda 1 veya 2 mesaj at\u0131labilir. Bu mesajlar iyi dilekler i\u00e7ermeli belki de birka\u00e7 g\u00fcn ge\u00e7erli %10-15 indirim kuponu sa\u011flanmal\u0131 ya da 3 al 2 \u00f6de \u015feklinde kampanyalar\u0131n oldu\u011fu haber edilmeli.\n\n## Yeni M\u00fc\u015fteriler \u0130\u00e7in Yorumlar\nYeni m\u00fc\u015fteriler bir i\u015fletmede kan tazeletecektir. Yeni \u00fcr\u00fcnlerin sat\u0131lmas\u0131 imkan\u0131 sa\u011flayabilir, yeni pazar paylar\u0131 elde etmeye ara\u00e7 olabilirler. Her insan yeni bir yere girdi\u011finde bir gariplik hisseder ve ara\u015ft\u0131rmak, g\u00fcvende olma iste\u011fi duyar. Bu y\u00fczden bu ki\u015filere :\n\n- 1- G\u00fcvenlice al\u0131\u015fveri\u015f yapabileceklerine dair 1-2 bilgilendirici mesaj g\u00f6nderilebilir.\n\n- 2- Yeni gelenlere \u00f6zel k\u00fc\u00e7\u00fck promosyonlar yap\u0131labilir. X \u00fcr\u00fcn\u00fc alana Y \u00fcr\u00fcn\u00fc %10 indirimli gibi kampanyalar yap\u0131labilir.\n\n- 3- \u0130lk 3 al\u0131\u015fveri\u015fte %5-10 aras\u0131nda indirim uygulanabilir.\n\n- 4- \u00c7ok fazla reklam g\u00f6stermek m\u00fc\u015fteride negatif etki yapacakt\u0131r. Belli ba\u015fl\u0131 reklamlar veya haberler m\u00fc\u015fterinin ilgisini \u00e7ekebilir.","582bffc6":"# RECENCY"}}