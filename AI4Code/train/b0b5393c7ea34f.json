{"cell_type":{"9ade3fe2":"code","55f9a975":"code","4c237825":"code","aa3d2c6d":"code","c9d50dd7":"code","d2619bef":"code","4fb71b00":"code","e536b33e":"code","7e1ff3b4":"code","5e8db62f":"code","cfc05780":"code","646938ff":"code","7f6bd5d5":"code","1f91cdf4":"code","7e624594":"code","fc611708":"code","f38b7635":"code","51234a6b":"code","cb465624":"code","e27f0237":"code","ee617407":"code","e9eea9ed":"code","1051e0b8":"code","79f11234":"code","e6606b75":"code","e629d6b6":"code","784c012b":"code","74d533de":"code","161400a0":"code","5f879fd6":"code","ccae81d3":"code","2f8c0d7a":"code","b1b1f0f9":"code","d9d71112":"code","8f37a264":"code","b1994711":"code","74ef5ece":"code","614e7e07":"code","e55489d5":"code","2f8f53ba":"code","3566890c":"code","88510dfe":"code","a4cf3b9c":"code","e718cda9":"code","bd8c16c7":"code","d1767451":"code","b04b4c4d":"code","0ea0abc3":"code","7bfd7b9f":"code","a161ea8a":"code","0f83ade0":"code","c641426d":"code","cd373e91":"code","5962b641":"code","3174a6ff":"code","143e962e":"code","61ef2945":"code","1454b180":"code","7064fb94":"code","b3dfa70c":"code","d9a163b8":"code","c2814a38":"code","234bc01c":"code","578c17ea":"code","6e2f71d8":"code","789f3391":"code","391490aa":"code","cb39e46d":"code","055d1278":"markdown","5ee77cec":"markdown","5e185915":"markdown","4e1515b6":"markdown","7ac6ef4a":"markdown","8a4913cc":"markdown","f226aa55":"markdown","6165728c":"markdown","abb0c999":"markdown","c8d803d9":"markdown","3577c8b9":"markdown","e85f8bb9":"markdown","6c9762c8":"markdown","92c5bcdc":"markdown","39fa1209":"markdown","f1e7ca16":"markdown","861863a5":"markdown","4d92fbd5":"markdown","8b17a0a0":"markdown","f6b798c7":"markdown","13a5a6ac":"markdown","7b3af815":"markdown","5f5af2b3":"markdown","c1fae0cf":"markdown","d65e315b":"markdown","a7661253":"markdown","f4f78493":"markdown","4d18e802":"markdown","8828ebc9":"markdown","fe484203":"markdown","47fcbb69":"markdown","5a0134c5":"markdown","c70a0b7f":"markdown","4c0c6110":"markdown","04982489":"markdown","8d142eec":"markdown","532ed87c":"markdown","f64d4b88":"markdown","b9df1cfd":"markdown","9ff533eb":"markdown","2082a256":"markdown"},"source":{"9ade3fe2":"import pandas as pd                                 # Importing pandas\nimport numpy as np                                  # Importing numpy\nimport matplotlib.pyplot as plt                     # Importing matplotlib for visualization\n\n%matplotlib inline                      \nimport seaborn as sns                               # Importing seaborn for visualization\n\nimport matplotlib.ticker as ticker\nimport matplotlib.cm as cm\n\nimport pandas_profiling                             # AUtomatic EDA\n\nimport ipywidgets as widgets                        # Creating widgets\nfrom IPython.display import display                 # Displaying widgets","55f9a975":"zomato_df = pd.read_csv('..\/input\/zomato-restaurants-data\/zomato.csv',encoding = \"ISO-8859-1\")    # Reading file zomato.csv\n#\"utf-8\"","4c237825":"import pandas_profiling  \nreport = pandas_profiling.ProfileReport(zomato_df)                # Perform pandas profiling on the dataset    \n\nreport.to_file(\"zomato_data.html\")                                # covert profile report as html file","aa3d2c6d":"#Our observation oo Profiling \n  # Remove Resto ID --> Everything is unique\n  # Resturant Name --> It may be important, if we are predicting rating since some of them might be chains and brands\n        #You need to add one more column that adds if the name is a brand or not\n        #Column with two catagory Band or non Brand\n        #Add a column that says a name is catchy or not catchy\n        #Cusine, Votes, other variable except name --> Can i predict rating.\n            #There are new resturants which are added and we need to predict their rating for next 12 months\n  #Country code\n        #Just to analysis on India data which is major\n        #May be seperate India and other country\n        #only do analysis on outside India Data\n        # If the problem is to predict ratings ; maybe sepreating India from other country may make sense. \n        # since it is a discrete column, we need to categorize it.\n\n  # City Column \n      # Assuming we are only taking India \n        # Divide the data into North, Central, East, West South \n        # Take Delhi NCR, OtherIndianCities \n        # Tier1 Cities and Tier2 cities \n      # All Country Data \n        # Take Big Cities in INdia vs Big Cities outside \n\n # Address Column , Locality Column , Locality Verbose\n    # Unless we are only studying New Delhi, there's no pint of taking this column \n        # You will extract Localities - GK, Sectors etc \n\n # Lat & Long -> ideally Ignore - Too many Uniques \n    # YOu can take it if you create nearby zones (range)\n    # we can create category like; Posh,Happening,Corporate Areas,MiddleClass, Student,Residential?\n    # Ideally, we don't know these datapoints, you have to lookout for these datapoints eitehr from your Ops Team or maybe from Internet \n\n  # Cusines\n    # we need to take it \n    # see how you can address the distributional issues of cusines \n        # we can compeup with higher categorization of cusines \n            # <chinese, japense, thai> -> Asian Food \n    # Can we combine cuisine with locality - might give you prominant culture of food habits \n\n  # avergae Cost of 2\n    # assuming you are studying all countries \n      # Normalize the whole column into single currency \n    # if you studying only India, \n      # then no need of normalization \n\n# What subset of data is making sense based on initial analysis \n    # Country == India ; Curerncy == INR \n    # For India - You will have individual model and analysis \n    # For other country, unless you have good data - it won't make sense \n        # Models might not be good \n        # You can just do Simple EDA on those data \n        # You need to address the Bias issue in the data \n\n  # Has Table booking any effect on Ratings \n      # If a rest has a booking facility -- is there any correlation with Rating \n\n  # Has Online booking any effect on Ratings \n      # If a rest has a Online Order facility -- is there any correlation with Rating \n\n  # If you have categories -- ideal condition is to have good % distribution (equal)\n\n  # Delivering Now -- Ignore \n\n  # If all the values are same or if all the values are ditinct --  you ignore\/remove them \n\n  # Any column that needs to be predicted should be ideally normal (close)\n\n  # So, for the Rating -> Need to check who are these 0 rating restro \n      # If these are restro's which are not having any votes \n       # If that is the case, we need to ingnore 0 rating restro since they have not been rated\n       # but if they have been rated and still having zero rating, we need to consider them in analysis \n\n  # we don't need to take rating colour and rating text - both ; since they are the same data \n    # let's just take rating text \n\n  # Votes - -need to check 11% zero vote restr's - becuase they could be new restru's ","c9d50dd7":"zomato_df.head()  ","d2619bef":"country_df = pd.read_excel('..\/input\/zomato-restaurants-data\/Country-Code.xlsx')","4fb71b00":"country_df.head()","e536b33e":"import pandas as pd\npd.merge # --> this function helps us to merge two data set where one of the column is common\n","7e1ff3b4":"zomato_data=pd.merge(zomato_df,country_df, on='Country Code')\nzomato_data.head()","5e8db62f":"# Function to extract all the unique values\n# A column will have multiple values which can be repetative. We are extracting unique values and sorting them.\n\nALL='ALL'\ndef unique_sorted_values_plus_ALL(array):\n    unique = array.unique().tolist()\n    unique.sort()\n    unique.insert(0, ALL)\n    return unique","cfc05780":"output = widgets.Output()\n\n# Creating 3 dropdowns\n\n# Country dropdown\ndropdown_country = widgets.Dropdown(options = unique_sorted_values_plus_ALL(zomato_data['Country']), description='Country')\n\n# City dropdown\ndropdown_city = widgets.Dropdown(options = unique_sorted_values_plus_ALL(zomato_data['City']), description='City')\n\n# Rating dropdown\ndropdown_rating = widgets.Dropdown(options = unique_sorted_values_plus_ALL(zomato_data['Rating text']), description='Rating')\n\n# Define a function for common_filtering\n# Here we will define what output we can get for different dropdown options\ndef common_filtering(country, city, rating):\n    output.clear_output()\n    \n    if (country == ALL) & (city == ALL) & (rating == ALL):\n        common_filter = zomato_data\n    elif(city == ALL) & (rating == ALL):\n        common_filter = zomato_data[(zomato_data['Country'] == country)]\n    elif(country == ALL) & (rating == ALL):\n        common_filter = zomato_data[(zomato_data['City'] == city)]\n    elif(country == ALL) & (city == ALL):\n        common_filter = zomato_data[(zomato_data['Rating text'] == rating)]\n    elif (country == ALL):\n        common_filter = zomato_data[(zomato_data['City'] == city) & (zomato_data['Rating text'] == rating)]\n    elif (city == ALL):\n        common_filter = zomato_data[(zomato_data['Country'] == country) & (zomato_data['Rating text'] == rating)]\n    elif (rating == ALL):\n        common_filter = zomato_data[(zomato_data['City'] == city) & (zomato_data['Country'] == country)]\n    \n                                    \n    else:\n        common_filter = zomato_data[(zomato_data['City'] == city) & \n                                  (zomato_data['Country'] == country) &\n                                 (zomato_data['Rating text'] == rating)]\n    \n    with output:\n        display(common_filter)\n\n# Define the event handler\n\n# Country dropdown event handler\ndef dropdown_country_eventhandler(change):                         \n    common_filtering(change.new, dropdown_city.value, dropdown_rating.value)  # Here we need to accept country event change\n# City dropdown event handler\ndef dropdown_city_eventhandler(change):\n    common_filtering(dropdown_country.value, change.new, dropdown_rating.value) # Here we need to accept city event change\n# Rating Text dropdown event handler\ndef dropdown_rating_eventhandler(change):\n    common_filtering(dropdown_country.value, dropdown_city.value, change.new)  # Here we need to accept rating event change\n  \n\n# Bind the event handler to the drop downs\n\ndropdown_country.observe(dropdown_country_eventhandler, names='value')\ndropdown_city.observe(dropdown_city_eventhandler, names='value')\ndropdown_rating.observe(dropdown_rating_eventhandler, names='value')\n\n# Display the dropdowns\ninput_widgets = widgets.HBox([dropdown_country, dropdown_city, dropdown_rating])\ndisplay(input_widgets)\n\n","646938ff":"display(output)","7f6bd5d5":"zomato_data[['Average Cost for two', 'Price range', 'Aggregate rating', 'Votes']].describe()\n","1f91cdf4":"pip install currencyconverter","7e624594":"zomato_data['Currency']","fc611708":"zomato_data['Currency'].str.split('(', expand=True)[0]","f38b7635":"zomato_data['Currency_new'] = zomato_data['Currency'].str.split('(', expand=True)[0]","51234a6b":"zomato_data['Currency_new_code'] = zomato_data['Currency'].str.split('(', expand=True)[1].str.split(')', expand=True)[0]","cb465624":"from currency_converter import CurrencyConverter\nc = CurrencyConverter()\nc.convert(800000,'IDR','INR')","e27f0237":"currency_code=pd.read_csv('https:\/\/raw.githubusercontent.com\/datasets\/currency-codes\/master\/data\/codes-all.csv')","ee617407":"currency_code.head()","e9eea9ed":"from currency_converter import CurrencyConverter\nc = CurrencyConverter()\nc.convert(800000, currency_code [currency_code['Currency']=='Turkish Lira']['AlphabeticCode'].iloc[0],'INR')","1051e0b8":"zomato_data.info()","79f11234":"#filling missing values in Cuisines\n\n#Missing Value\n    # If its a category\n    # Mode of the column\n    # Fill it with some standard value\n\nzomato_data['Cuisines'].fillna(\"Other\",inplace=True)","e6606b75":"zomato_data['Aggregate rating'].mean()","e629d6b6":"zomato_data[zomato_data['Aggregate rating']>0]['Aggregate rating'].mean()","784c012b":"#Filling any missing value\nzomato_data['Aggregate rating'].fillna(zomato_data['Aggregate rating'].mean(),inplace=True)","74d533de":"zomato_data.shape","161400a0":"zomato_data.info()","5f879fd6":"correlation = zomato_data[['Average Cost for two','Price range','Aggregate rating','Votes']].corr()","ccae81d3":"correlation","2f8c0d7a":"import seaborn as sns\n# sns.heatmap ---> used to ideally plot correlations ","b1b1f0f9":"sns.heatmap(correlation,vmin= -1,vmax=1 )","d9d71112":"sns.distplot(zomato_data['Aggregate rating'])","8f37a264":"sns.distplot(zomato_data[zomato_data['Aggregate rating']>0]['Aggregate rating'])","b1994711":"# Relationship between aggregate rating and votes\n\nsns.scatterplot(x=zomato_data['Aggregate rating'], y=zomato_data['Votes'])","74ef5ece":"# Relationship between Aggregate Ratings and Votes\n\nsns.lineplot(x=zomato_data['Aggregate rating'], y= zomato_data['Votes'])","614e7e07":"# Relationship between Aggregate Ratings and Votes\n\nsns.lineplot(x=zomato_data['Votes'], y= zomato_data['Aggregate rating'])","e55489d5":"# Relationship between Price range and Aggregate Ratings\n\nsns.violinplot(x='Price range', y='Aggregate rating', data = zomato_data)","2f8f53ba":"\"\"\"\nThe background is whitegrid\nThe figure size is 14*6 \nThe x-axis labels are written with a rotation of 45 degree\nsetting the title to \"# of Restaurants registered in Zomato in different Countries \n\"\"\"\n\nsns.set_style('whitegrid')\nplt.figure(figsize = (14,6))\nsns.countplot(x= 'Country', data=zomato_data)\nplt.xticks(rotation=45)\nplt.title(\"# of Restaurants registered in Zomato in different Countries \");","3566890c":"zomato_india = zomato_data[zomato_data['Country']=='India']","88510dfe":"zomato_india.head()","a4cf3b9c":"zomato_india.groupby('Rating text').mean()\n","e718cda9":"#Relationship between avarage cost of two and rating\n\nsns.boxplot(y = 'Average Cost for two', x = 'Rating text', data=zomato_india)","bd8c16c7":"# Relationship between Price range and Rating text\n\nsns.boxplot(y = 'Price range', x = 'Rating text', data = zomato_india)","d1767451":"zomato_india['Price range'].value_counts()","b04b4c4d":"# Lets have a look at the expensive restaurants\n\nexp_india_restaurant = zomato_india[zomato_india['Price range'] == 4]\nexp_india_restaurant","0ea0abc3":"# Lets check the ratings of these restaurants\n\nexp_india_restaurant['Rating text'].value_counts()","7bfd7b9f":"# Low rated expensive restaurants\n\nexp_india_restaurant[exp_india_restaurant['Rating text'] == 'Poor']","a161ea8a":"list_of_cuisines = exp_india_restaurant[exp_india_restaurant['Rating text'] == 'Poor']['Cuisines']\nlist_of_cuisines.values","0f83ade0":"text = ' '.join([j for j in list_of_cuisines.values])\ntext","c641426d":"# Wordcloud of Cuisine\n\nfrom wordcloud import WordCloud\n\nplt.figure(figsize = (12, 6))\ntext = ' '.join([j for j in list_of_cuisines.values])\nwordcloud = WordCloud(max_font_size=None, background_color='white', collocations=False,\n                      width=1200, height=1000).generate(text)\nplt.imshow(wordcloud)\nplt.title('Top cuisines')\nplt.axis(\"off\")\nplt.show()","cd373e91":"bad_rated_restaurants = zomato_india[zomato_india['Rating text'] == 'Poor']\nbad_rated_restaurants","5962b641":"bad_rated_restaurants.shape","3174a6ff":"bad_rated_restaurants['Has Online delivery'].value_counts()","143e962e":"bad_rated_restaurants['Is delivering now'].value_counts()","61ef2945":"sns.countplot(x = 'City', data = bad_rated_restaurants)","1454b180":"# Total no. of bad restaurants\n\nbad_rated_restaurants['City'].value_counts()","7064fb94":"# Total number of restaurants\n\ntop_3_cities = zomato_india['City'].value_counts().head(3)\ntop_3_cities","b3dfa70c":"sns.barplot(y = top_3_cities, x = top_3_cities.index)","d9a163b8":"!pip install plotly_express","c2814a38":"import plotly_express as px","234bc01c":"# Scatter Plot\n\npx.scatter(zomato_data, x=\"Average Cost for two\", y=\"Votes\", size=\"Votes\", color=\"Rating text\", log_x=True, size_max=60,hover_name='City')","578c17ea":"# Scatter Plot\n\npx.scatter_matrix(zomato_data, dimensions=['Average Cost for two', 'Price range', 'Aggregate rating', 'Votes'], color='Rating text')","6e2f71d8":"# Box plot of Rating text and Average Cost for two\n\npx.box(zomato_india, x=\"Rating text\", y=\"Average Cost for two\", color=\"Price range\", notched=True)","789f3391":"# Relationship between Online Delivery and Aggregate rating\n\npx.histogram(zomato_data, x=\"Has Online delivery\", y=\"Aggregate rating\", histfunc=\"avg\")","391490aa":"px.histogram(zomato_data, x=\"Has Table booking\", y=\"Aggregate rating\", histfunc=\"avg\")","cb39e46d":"px.histogram(zomato_data, x=\"Is delivering now\", y=\"Aggregate rating\", histfunc=\"avg\")","055d1278":"# **Loading the datasets**\nThe csv file has encoding ISO-8859-1. Encoding defines what kind of characters(ASCII or non ASCII or something different) can be stored in a file.","5ee77cec":"**Observations**: Restaurants which have table booking available have more ratings in general","5e185915":"North Indian is the most popular cuisine. So we can infer that these North Indian restaurants in Gurgaon and Noida which do not provide authentic North Indian dishes and that is why customers are unhappy and rate them poorly.","4e1515b6":"**Observation** : There is not much correlation between the variables.","7ac6ef4a":"**Observation:**\nThere are 9551 rows in all column and there are no missing data in numeric columns","8a4913cc":"**Obeservation** : Here we can see the same inference. Aggregate Ratings and Votes have an increasing trend.","f226aa55":"**We have aggregate ratings and Rating text as two column of interest.**","6165728c":" **Obervation**\n \n \n From the above scatter plot we can see that As the quality of food increases, with as the aggregate rating increases, no of votes also increases","abb0c999":"Why are ratings of New Delhi, Noida and Gurgaon bad?","c8d803d9":"**Observation**: We can see how the Average Cost for two and the Votes are related and in which cities.","3577c8b9":"### Bivariate Analysis\n\nHere we check the relationship between two variables.","e85f8bb9":"**Observation 1** <br>\nHere we can clearly see that with increase in Price range, the median of ratings also increase.","6c9762c8":"**Hence we cannot conclude that these 3 cities have significantly large number of bad restaurants as the total number of restaurants is also high**","92c5bcdc":"**Excellent and Very Good** rating resturents have a higher price range\n\n**Average and Poor** rated resturent have a lower price range","39fa1209":"**Excellent and Very Good** food ratings are provided in restaurants which are slightly premium cost and high price range.\nThey also have huge number of votes. This can be due to high quality food or ambience due to which the price is high and so the ratings are good.","f1e7ca16":"# **Pandas Profiling**","861863a5":"**Average cost of two**\nStandard deviation is very high on Average cost for two. It is for different countries having different currency.\nThere are 15 countries in the data set currencies are not standardized.\n\nMax value for avarge cost of two is 800000","4d92fbd5":"### Lets identify restaurants which have high price range and low ratings","8b17a0a0":"The number of restaurants registered in Zomato is highest in India.\nSo lets look at the data of these restaurants.","f6b798c7":"**Observation**: Good and Very Good food have very high cost as compared to excellent and other types of food.","13a5a6ac":"Many of these restaurants are not available for delivery most of the time. Hence people provide poor rating to them.","7b3af815":"**Rating improves as avarage cost of two increases**","5f5af2b3":"# **Objective:**\nOur goal in this notebook is to explore the data provided in Zomato csv and to analyze which restaurants have poor ratings in Zomato and why?","c1fae0cf":"Zomato India:\n\nOur goal is to determine which resturent has the poor rating in Zomato and why ?\n","d65e315b":"# **City wise Analysis of Poor Rated restaurants**","a7661253":"**Missing value imputation**\n","f4f78493":"### Data Exploration\n\n**Description of the numeric columns of dataset**","4d18e802":"**Observation**:  <br>\nA lot of restaurants are rated 0. After this most of the restaurants have been rated between 3 and 4.","8828ebc9":"### Interactive Exploration of Data","fe484203":"**Observations**: These are 5 restaurants which are really expensive but do not have good ratings. <br>\n**Lets have a look at what is their cuisines.**","47fcbb69":"# **Observation**\nThere is a weak correlation between Aggregate rating and Price range\nOther then this there is no correlation\n\n\nIf the Price range is higher, people should rate the restaurant higher.","5a0134c5":"**Observations**: Restaurants which have online delivery have better ratings.","c70a0b7f":"As the price range is high, most of the ratings are good.\nSo if price is high, why will be there be 5 poor ratings?","4c0c6110":"**Observation**\n\n\nIndia has maximum resturents : 8652\n\n\nRest of the world : 9551","04982489":"**Correlation plot of Numeric columns**","8d142eec":"**Question: Which countries have the highest number of restaurants in Zomato?**","532ed87c":"# Let's make our plots interactive using Plotly-express","f64d4b88":"# **Distribution of aggregate rating**","b9df1cfd":"**Observation**: Restaurants which are delivering now have better ratings than the one which are not.","9ff533eb":"# **Obervation:**\nThere is no missing values in any column except in Cuisines. \nMost of the data types are object i.e. they are categorial ","2082a256":"Below lot shows rating after removing 0 rated entries"}}