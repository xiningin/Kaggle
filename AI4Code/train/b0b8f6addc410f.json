{"cell_type":{"e1698330":"code","a85743a3":"code","60aa13f7":"code","3e0605b2":"code","dfd2f045":"code","0fe8dd20":"code","daff0361":"code","e2fab961":"code","2764a432":"code","98d033d0":"code","aed7c3b6":"code","8e08a434":"code","36d3c18e":"code","c699e66b":"code","a50da94c":"code","ef3b01fc":"code","7f09e75c":"code","e43627a6":"code","5a338725":"code","2125c49e":"code","4f1cbbd7":"code","a4456cb1":"code","e60c37ae":"code","4df980bc":"code","c6f1ed44":"code","c8c2e528":"markdown","64bdb63f":"markdown","1d7d807b":"markdown","29833034":"markdown","3d8006ec":"markdown","45779b5a":"markdown","daf6de34":"markdown","35a56b01":"markdown","dcfa827b":"markdown","c4f20f74":"markdown","747bb6cf":"markdown","7ca7f6d4":"markdown","a1faf5f8":"markdown","fecb7127":"markdown","6b7599ca":"markdown","a552328f":"markdown","d061a415":"markdown","806a5701":"markdown","fa0add1e":"markdown","a56693fb":"markdown","50364091":"markdown","ef56cdee":"markdown","e2a62d27":"markdown","693a3a13":"markdown","ff0b582a":"markdown","884c294f":"markdown","1bfcee21":"markdown","278c4860":"markdown","74faa841":"markdown","f1a055dc":"markdown"},"source":{"e1698330":"import numpy as np # linear algebra\nimport pandas as pd # data processing, CSV file I\/O (e.g. pd.read_csv)\nimport plotly.express as px\nimport plotly.graph_objects as go\nfrom datetime import timedelta\n\n\nimport os\nfor dirname, _, filenames in os.walk('\/kaggle\/input'):\n    for filename in filenames:\n        print(os.path.join(dirname, filename))\n\npd.options.mode.chained_assignment = None","a85743a3":"data = pd.read_csv(\"\/kaggle\/input\/covid-world-vaccination-progress\/country_vaccinations.csv\")\ndata.head()","60aa13f7":"data.drop(['source_name', 'source_website'], axis = 1, inplace = True)\ndata.head()","3e0605b2":"data.isnull().sum(axis=0)","dfd2f045":"def fix_total(data_to_fix): \n    \n    data_to_fix['date'] = pd.to_datetime(data_to_fix['date'])\n    max_date = pd.to_datetime(data_to_fix['date']).max()\n    \n    for country in data_to_fix.country.unique():\n        interpolation = data_to_fix.loc[data_to_fix['country'] == country, 'total_vaccinations'].interpolate(dtype=pd.Int64Dtype()) \n        data_to_fix.loc[data_to_fix['country'] == country, 'total_vaccinations'] = interpolation.apply(np.floor)\n        cur_row = data_to_fix.loc[(data_to_fix['country'] == country) & (data_to_fix['date'] == \\\n                                      data_to_fix.loc[data_to_fix['country'] == country, 'date'].max())]\n        \n        for day in range(1, (max_date - data_to_fix.loc[data_to_fix['country'] == country, 'date'].max()).days + 1):\n            next_row = cur_row.copy()\n            next_row['date'] = cur_row['date'] + timedelta(days=day) \n            data_to_fix = data_to_fix.append(next_row)\n    \n    return data_to_fix","0fe8dd20":"vaccinations = fix_total(data[[\"country\", \"date\", \"total_vaccinations\", \"daily_vaccinations\", \"vaccines\"]])\nvaccinations[\"date\"] = pd.to_datetime(vaccinations[\"date\"])\nvaccinations = vaccinations.set_index([\"country\"])\nvaccinations.head()","daff0361":"total_vaccinations_top10 = vaccinations.groupby(['country']).max()[\"total_vaccinations\"]\ntotal_vaccinations_top10 = total_vaccinations_top10.sort_values(ascending=False)[:10]","e2fab961":"fig = px.bar(x=total_vaccinations_top10.index, y=total_vaccinations_top10.values,\n             color=total_vaccinations_top10.index,\n             labels={\"x\": \"country\", \"y\": \"total vaccinations\"},\n             color_discrete_sequence =px.colors.sequential.Viridis)\nfig.show()","2764a432":"def create_dropdown_scatter(feature,title):\n    fig=go.Figure()\n\n    country_plot_names = []\n    buttons=[]\n\n    default_country = \"Argentina\"\n    days_of_vacc = vaccinations.groupby('country').count()['date']\n\n    for country in days_of_vacc[days_of_vacc > 2].index.unique():\n        fig.add_trace(go.Scatter(x=vaccinations.loc[country][\"date\"], \n                                 y=vaccinations.loc[country][feature], \n                                 visible=(country==default_country),\n                                 name=country,\n                                 mode=\"lines+markers\",\n                                 hovertemplate=\"Date: %{x}<br>Value: %{y}\"))\n        country_plot_names.extend([country])\n\n    for country in vaccinations.index.unique():\n        buttons.append(dict(method='update',\n                            label=country,\n                            args = [{'visible': [country == r for r in country_plot_names]}]))\n\n    # Add dropdown menus to the figure\n    fig.update_layout(showlegend=False, \n                      updatemenus=[{\"buttons\": buttons, \"direction\": \"down\", \"active\": 0, \"showactive\": True, \"x\": 0.5, \"y\": 1.15}],\n                      title={\"text\": title})\n    fig.show()\n","98d033d0":"create_dropdown_scatter(\"daily_vaccinations\", \"Daily vaccinations by country\")","aed7c3b6":"create_dropdown_scatter(\"total_vaccinations\", \"Total vaccinations by country\")","8e08a434":"vaccines = vaccinations.groupby(['vaccines', 'date']).sum().reset_index()\nvaccines_top5 = vaccines.groupby(\"vaccines\").max()['total_vaccinations'].reset_index()\nvaccines_top5 = vaccines_top5.nlargest(5, columns=['total_vaccinations'])\nvaccines_top5","36d3c18e":"fig = px.bar(x = vaccines_top5['vaccines'], y=vaccines_top5['total_vaccinations'], \n             labels={\"x\": \"country\", \"y\": \"total vaccinations\"},\n             color=vaccines_top5['vaccines'],\n             color_discrete_sequence =px.colors.sequential.Viridis[1:][::2])\nfig.show()","c699e66b":"total_vaccinations = vaccinations.groupby(['country']).max()[[\"total_vaccinations\", \"vaccines\"]].reset_index()\ntotal_vaccinations","a50da94c":"fig = px.choropleth(total_vaccinations, locations = 'country',locationmode = 'country names',color = 'vaccines',\n                   title = 'Vaccines used for each country',hover_data= ['total_vaccinations'],\n                   color_discrete_map=dict(zip(total_vaccinations['vaccines'], px.colors.sequential.Viridis)),\n                   labels={'vaccines': 'Name of vaccine', 'country': 'Country', 'total_vaccinations': 'Number of vaccinations'})\nfig.update_geos(\n    visible=True, \n    resolution=50,\n    showcountries=True, \n    countrycolor=\"darkgrey\"\n    )\nfig.update_layout(\n    geo=dict(\n        showframe=False,\n        showcoastlines=False,\n        projection_type='equirectangular'\n    ),\n)\nfig.show()","ef3b01fc":"fig=go.Figure()\n\n\ntitle = \"Total vaccinations by vaccines\"\n\nfor vaccine in vaccines['vaccines'].unique():\n    data_vaccine = vaccines[vaccines['vaccines'] == vaccine]\n    # We have two traces we're plotting per state: a boxplot of the submission quartiles, and a line with the current data to-date\n    fig.add_trace(go.Scatter(x=data_vaccine['date'], \n                             y=data_vaccine['total_vaccinations'], \n                             name=vaccine,\n                             mode=\"lines+markers\",\n                             hovertemplate=\"Date: %{x}<br>Value: %{y}\"))\n\n# Add dropdown menus to the figure\nfig.update_layout(title={\"text\": title})\nfig.show()","7f09e75c":"total_vac_hundred = data[['country', 'iso_code', 'total_vaccinations_per_hundred']]\ntotal_vac_hundred['total_vaccinations_per_hundred'] = total_vac_hundred['total_vaccinations_per_hundred'].fillna(0)\ntotal_vac_hundred = total_vac_hundred.groupby(['country', 'iso_code']).max().reset_index()","e43627a6":"def create_choropleth(loc, z, text, title):\n    fig = go.Figure(data=go.Choropleth(\n        locations = loc,\n        z = z,\n        text = text,\n        colorscale = px.colors.sequential.speed[::-1][::2][1:5],\n        autocolorscale=False,\n        reversescale=True,\n        marker_line_color='darkgray',\n        marker_line_width=0.5,\n    ))\n    \n    fig.update_geos(\n        visible=True, \n        resolution=50,\n        showcountries=True, \n        countrycolor=\"darkgrey\"\n        )\n\n    fig.update_layout(\n        title_text=title,\n        geo=dict(\n            showframe=False,\n            showcoastlines=False,\n            projection_type='equirectangular'\n        )\n    )\n\n    fig.show()","5a338725":"create_choropleth(total_vac_hundred['iso_code'], \n                  total_vac_hundred['total_vaccinations_per_hundred'], \n                  total_vac_hundred['country'], \n                  'Total vaccinations per hundred')","2125c49e":"fully_vac_hundred = data[['country', 'iso_code', 'people_fully_vaccinated_per_hundred']]\nfully_vac_hundred['people_fully_vaccinated_per_hundred'] = fully_vac_hundred['people_fully_vaccinated_per_hundred'].fillna(0)\nfully_vac_hundred = fully_vac_hundred.groupby(['country', 'iso_code']).max().reset_index()","4f1cbbd7":"create_choropleth(fully_vac_hundred['iso_code'], \n                  fully_vac_hundred['people_fully_vaccinated_per_hundred'], \n                  fully_vac_hundred['country'], \n                  'People fully vaccinated per hundred')","a4456cb1":"dayly_vac_million = data[['country', 'iso_code', 'daily_vaccinations_per_million']]\ndayly_vac_million['daily_vaccinations_per_million'] = dayly_vac_million['daily_vaccinations_per_million'].fillna(0)\ndayly_vac_million = dayly_vac_million.groupby(['country', 'iso_code']).max().reset_index()","e60c37ae":"create_choropleth(dayly_vac_million['iso_code'], \n                  dayly_vac_million['daily_vaccinations_per_million'], \n                  dayly_vac_million['country'], \n                  'Daily vaccinations per million')","4df980bc":"dayly_vac = data[['country', 'iso_code', 'daily_vaccinations']]\ndayly_vac['daily_vaccinations'] = dayly_vac['daily_vaccinations'].fillna(0)\ndayly_vac = dayly_vac.groupby(['country', 'iso_code']).max().reset_index()","c6f1ed44":"create_choropleth(dayly_vac['iso_code'], \n                  dayly_vac['daily_vaccinations'], \n                  dayly_vac['country'], \n                  'Daily vaccinations')","c8c2e528":"<h1><center>COVID-19 World Vaccination Progress - data visualization and analysis<\/center><\/h1>\n\n<center><img width=\"800\" height=\"600\" src=\"https:\/\/www.aeccglobal.co.th\/wp-content\/uploads\/2020\/12\/shutterstock_1716494026.jpg\"><\/center>","64bdb63f":"<a id=\"3\"><\/a>\n<h2 class=\"list-group-item list-group-item-action active\" data-toggle=\"list\" style=\"color:white;\n           display:fill;\n           border-radius:5px;\n           background-color:#5642C5;\n           font-size:150%;\n           font-family:Verdana;\n           letter-spacing:0.5px\" role=\"tab\" aria-controls=\"home\"><center>Leaders in the number of vaccinations<\/center><\/h2>","1d7d807b":"This dataset includes information about:  \n\n* **Country** - this is the country for which the vaccination information is provided;     \n* **Country ISO Code** - ISO code for the country;   \n* **Date**- date for the data entry; for some of the dates we have only the daily vaccinations, for others, only the (cumulative) total;   \n* **Total number of vaccin ations** - this is the absolute number of total immunizations in the country;  \n* **Total number of people vaccinated** - a person, depending on the immunization scheme, will receive one or more (typically 2) vaccines; at a certain moment, the number of vaccination might be larger than the number of people;  \n* **Total number of people fully vaccinated** - this is the number of people that received the entire set of immunization according to the immunization scheme (typically 2); at a certain moment in time, there might be a certain number of people that received one vaccine and another number (smaller) of people that received all vaccines in the scheme;  \n* **Daily vaccinations (raw)** - for a certain data entry, the number of vaccination for that date\/country;  \n* **Daily vaccinations** - for a certain data entry, the number of vaccination for that date\/country;  \n* **Total vaccinations per hundred** - ratio (in percent) between vaccination number and total population up to the date in the country;  \n* **Total number of people vaccinated per hundred** - ratio (in percent) between population immunized and total population up to the date in the country;  \n* **Total number of people fully vaccinated per hundred** - ratio (in percent) between population fully immunized and total population up to the date in the country;   \n* **Number of vaccinations per day** - number of daily vaccination for that day and country;   \n* **Daily vaccinations per million** -  ratio (in ppm) between vaccination number and total population for the current date in the country;    \n* **Vaccines used in the country** - total number of vaccines used in the country (up to date);    \n* **Source name** - source of the information (national authority, international organization, local organization etc.);   \n* **Source website** - website of the source of information;  ","29833034":"<a id=\"top\"><\/a>\n\n<div class=\"list-group\" id=\"list-tab\" role=\"tablist\">\n<h3 class=\"list-group-item list-group-item-action active\" data-toggle=\"list\" style=\"color:white;\n           display:fill;\n           border-radius:5px;\n           background-color:#5642C5;\n           font-size:130%;\n           font-family:Verdana;\n           letter-spacing:0.5px\" role=\"tab\" aria-controls=\"home\"><center>Navigation<\/center><\/h3>\n\n[1. Data overview](#1)<br><br>\n[2. Data preparing](#2)<br><br>\n[3. Leaders in the number of vaccinations](#3)<br><br>\n[4. Day by day progress by country](#4)<br><br>\n[5. What vaccines are used and in which countries?](#5)<br><br>\n[6. Vaccination progress on choropleth](#6)<br><br>","3d8006ec":"<a id=\"6\"><\/a>\n<h2 class=\"list-group-item list-group-item-action active\" data-toggle=\"list\" style=\"color:white;\n           display:fill;\n           border-radius:5px;\n           background-color:#5642C5;\n           font-size:150%;\n           font-family:Verdana;\n           letter-spacing:0.5px\" role=\"tab\" aria-controls=\"home\"><center>Vaccination progress on choropleth<\/center><\/h2>","45779b5a":"More tha 1 million of people are vaccinated in USA and China. This is the best result among other countries, but due to large number of population this countries still have not big percent of vaccinated people.","daf6de34":"Some of columns are not important for vaccination progress analysis. So, let's drop it","35a56b01":"So, the most commonly used vaccination scheme is \"Moderna, Pfizer\/BioNTech\". And, as we can see, Pfizer\/BioNTech vaccine presents in 3\/5 the most used vaccination schemes.","dcfa827b":"As we can see, there are a lot of nan values in dataset. For correct visualization some of columns are needed to be interpolate ","c4f20f74":"To check progress of vaccination for some countries we need more data about daily vaccinations, number of fully vaccinated people and total vaccinations for some date. Now, we need to interpolate total_vaccinations column.","747bb6cf":"The most bright color have Israel and UAE. It means that this countries have the largest percent of vaccinated people in countrie. For Israel it is 53% and 30% for UAE. In USA there are only 9 people per hundred are vaccinated, for China it is 1.","7ca7f6d4":"Let's check daily progress of using each vaccinations scheme.","a1faf5f8":"We can see the large violet area of Sputnik V vaccine, but it is used only in Russia and in Argentina. The most European  Middle Eastern and North American countries use Pfizer\/BioNTech. CNBG, Sinovac is second most used vaccination scheme, but it is used only in China. The Oxford\/AstraZeneca vaccine is distributed in United Kingdom, Brazil, Myanmar and India. ","fecb7127":"Let's see how changes daily number of vaccinations in each country. Using drop down menu you can choose country for what you want see day by day progress.","6b7599ca":"<a id=\"1\"><\/a>\n<h2 class=\"list-group-item list-group-item-action active\" data-toggle=\"list\" style=\"color:white;\n           display:fill;\n           border-radius:5px;\n           background-color:#5642C5;\n           font-size:150%;\n           font-family:Verdana;\n           letter-spacing:0.5px\" role=\"tab\" aria-controls=\"home\"><center>Data overview<\/center><\/h2>","a552328f":"As we can see before, USA and China vaccinate the most people, but what about how many people are vaccinate per hundred of population?","d061a415":"Let's explore which countries have  daily vaccinations the most.","806a5701":"This plot shows how changes total number of vaccinations in each country. Don't forget to use drop down menu)","fa0add1e":"<a id=\"5\"><\/a>\n<h2 class=\"list-group-item list-group-item-action active\" data-toggle=\"list\" style=\"color:white;\n           display:fill;\n           border-radius:5px;\n           background-color:#5642C5;\n           font-size:150%;\n           font-family:Verdana;\n           letter-spacing:0.5px\" role=\"tab\" aria-controls=\"home\"><center>What vaccines are used and in which countries?<\/center><\/h2>","a56693fb":"Now, let's explore which vaccine is used in which countries.","50364091":"Let's take a look at the data","ef56cdee":"Let's explore what the most commonly used vaccination scheme. Here are top-5 that are the most used.","e2a62d27":"Fully vaccinated  is the number of people that received the entire set of immunization according to the immunization scheme (typically 2). Now, the largest percent of fully vaccinated people in Israel and UAE. But we have no data about fully vaccinated for other countries.","693a3a13":"Now, let's see what countries vaccinate the most people. Here is the top-10 countries by number of vaccinations.","ff0b582a":"As we can see, USA vaccinate the most people (27.8 millions). China has slightly less vaccinations than the United States, but many times more than other countries. In Europe leaders in number of vaccinations are Germany, Italy and United Kingdom, which includes England.","884c294f":"I will keep updating this notebook \u23f3","1bfcee21":"<a id=\"2\"><\/a>\n<h2 class=\"list-group-item list-group-item-action active\" data-toggle=\"list\" style=\"color:white;\n           display:fill;\n           border-radius:5px;\n           background-color:#5642C5;\n           font-size:150%;\n           font-family:Verdana;\n           letter-spacing:0.5px\" role=\"tab\" aria-controls=\"home\"><center>Data preparing<\/center><\/h2>","278c4860":"<center><h1>Upvote if you like this notebook! Looking forward for your feedback<\/h1><\/center>\n","74faa841":"<a id=\"4\"><\/a>\n<h2 class=\"list-group-item list-group-item-action active\" data-toggle=\"list\" style=\"color:white;\n           display:fill;\n           border-radius:5px;\n           background-color:#5642C5;\n           font-size:150%;\n           font-family:Verdana;\n           letter-spacing:0.5px\" role=\"tab\" aria-controls=\"home\"><center>Day by day progress by country<\/center><\/h2>","f1a055dc":"On the next choropleth you can see how many people per million are vaccinated every day in different countries."}}