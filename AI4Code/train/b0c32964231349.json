{"cell_type":{"ab0aa0aa":"code","b5504dfa":"code","6193a25e":"code","a5f402ac":"code","6801c449":"code","c53f7dc7":"code","205f8ecc":"code","7d5d5516":"code","5e1b149f":"markdown"},"source":{"ab0aa0aa":"import numpy as np\nimport pandas as pd\nimport matplotlib\nimport matplotlib.pyplot as plt\nfrom matplotlib.pyplot import figure\nimport seaborn as sns\ncolor = sns.color_palette()\n%matplotlib inline\n\nimport warnings\nwarnings.filterwarnings('ignore')","b5504dfa":"sns.set_context('talk')\nmatplotlib.rcParams['font.family'] = 'arial'","6193a25e":"df_water = pd.read_csv(\"..\/input\/chennai-water-management\/chennai_reservoir_levels.csv\")\ndf_water[\"Date\"] = pd.to_datetime(df_water[\"Date\"], format='%d-%m-%Y')\ndf_water[\"TOTAL_RESERVOIR\"] = df_water[\"POONDI\"] + df_water[\"CHOLAVARAM\"] + df_water[\"REDHILLS\"] + df_water[\"CHEMBARAMBAKKAM\"]\ncols = [\"Date\", \"TOTAL_RESERVOIR\"]\ndf_water = df_water[cols]\n\ndf_rainfall = pd.read_csv(\"..\/input\/chennai-water-management\/chennai_reservoir_rainfall.csv\")\ndf_rainfall[\"Date\"] = pd.to_datetime(df_rainfall[\"Date\"], format='%d-%m-%Y')\ndf_rainfall[\"AVG_RAINFALL\"] = 0.25*(df_rainfall[\"POONDI\"] + df_rainfall[\"CHOLAVARAM\"] + df_rainfall[\"REDHILLS\"] + df_rainfall[\"CHEMBARAMBAKKAM\"])\ncols = [\"Date\", \"AVG_RAINFALL\"]\ndf_rainfall = df_rainfall[cols]\n\n# http:\/\/worldpopulationreview.com\/world-cities\/chennai-population\/\ndf_population = pd.read_csv(\"..\/input\/chennai-population\/chennai_population.csv\")\ncols = [\"Year\", \"Population\"]\ndf_population = df_population[cols]\n\ndf = pd.merge(df_water, df_rainfall, left_on='Date', right_on='Date')\n\ndf[\"Year\"] = df[\"Date\"].dt.year\n\n# 1 mcft = 28316846.6 liters\ndf[\"TOTAL_RESERVOIR\"] *= 28316846.6\ndf.set_index(\"Date\", inplace=True)","a5f402ac":"fig = figure(num=None, figsize=(12, 6), dpi=80, facecolor='w', edgecolor='k')\n\nax = df[\"TOTAL_RESERVOIR\"].plot()\n# ax.set_xlabel('Date', weight='bold')\nax.set_ylabel('Liters of water', weight = 'bold')\nax.set_title('Total water stored in the reservoirs is alarmingly low')\n\nsns.despine()\nplt.tight_layout();","6801c449":"fig = figure(num=None, figsize=(12, 6), dpi=80, facecolor='w', edgecolor='k')\n\nax = df[\"AVG_RAINFALL\"].plot()\nax.set_xlabel('Date', weight='bold')\nax.set_ylabel('Rainfall (mm)', weight = 'bold')\nax.set_title('Chennai desperatly needs good rainfall to replenish')\n\nsns.despine()\nplt.tight_layout();","c53f7dc7":"df_agg = pd.DataFrame(df.groupby(\"Year\").agg({\"TOTAL_RESERVOIR\": \"mean\"})).reset_index()\ndf_year = pd.merge(df_agg, df_population, left_on='Year', right_on='Year')\n\ndf_year[\"LITERS_PER_PERSON\"] = df_year[\"TOTAL_RESERVOIR\"] \/ df_year[\"Population\"]","205f8ecc":"fig = figure(num=None, figsize=(12, 4), dpi=80, facecolor='w', edgecolor='k')\n\nplt.subplot(1, 2, 1)\nax1 = sns.barplot(y=\"Population\", x=\"Year\", data=df_year, palette=(\"Greys_d\"))\nax1.set_xlabel('')\nax1.set_ylabel('Population', weight = 'bold')\n\nplt.subplot(1, 2, 2)\nax2 = sns.barplot(y=\"LITERS_PER_PERSON\", x=\"Year\", data=df_year, palette=(\"Blues_d\"))\nax2.set_xlabel('')\nax2.set_ylabel('Liters per person', weight = 'bold')\nax2.set_title('Less than 2000 liters \\n of water per person this year')\n\nsns.despine()\nplt.tight_layout();","7d5d5516":"df_year","5e1b149f":"# Chennai has around 1 crore population with less than 2000 liters of water per person available in its reservoirs"}}