{"cell_type":{"864f8ef7":"code","5e982aaa":"code","c0c9beab":"code","6d229fcd":"code","19e482b8":"code","72802b82":"code","102f1176":"code","552ee8de":"code","583f7379":"code","135138d2":"markdown"},"source":{"864f8ef7":"# This Python 3 environment comes with many helpful analytics libraries installed\n# It is defined by the kaggle\/python docker image: https:\/\/github.com\/kaggle\/docker-python\n# For example, here's several helpful packages to load in \n\nimport numpy as np # linear algebra\nimport pandas as pd # data processing, CSV file I\/O (e.g. pd.read_csv)\n\n# Graphics\nimport matplotlib.pyplot as plt\nimport seaborn as sns\ncolor = sns.color_palette()\nfrom plotly.offline import init_notebook_mode, iplot\nimport plotly.offline as py\nimport plotly.graph_objs as go\nimport plotly.offline as offline\npy.init_notebook_mode(connected=True)\ninit_notebook_mode(connected=True)\noffline.init_notebook_mode()\n%matplotlib inline\n\n# Input data files are available in the \"..\/input\/\" directory.\n# For example, running this (by clicking run or pressing Shift+Enter) will list all files under the input directory\n\nimport os\nfor dirname, _, filenames in os.walk('\/kaggle\/input'):\n    for filename in filenames:\n        print(os.path.join(dirname, filename))\n\n# Any results you write to the current directory are saved as output.","5e982aaa":"file = \"\/kaggle\/input\/kaggle-survey-2019\/multiple_choice_responses.csv\"\ndf_multiple_choice = pd.read_csv(file)\nprint(df_multiple_choice.shape)\ndf_multiple_choice.head()","c0c9beab":"file = \"\/kaggle\/input\/kaggle-survey-2019\/questions_only.csv\"\ndf_questions = pd.read_csv(file)\nprint(df_questions.shape)\ndf_questions.head()","6d229fcd":"file = \"\/kaggle\/input\/kaggle-survey-2019\/survey_schema.csv\"\ndf_survey_schema = pd.read_csv(file)\nprint(df_survey_schema.shape)\ndf_survey_schema.head()","19e482b8":"file = \"\/kaggle\/input\/kaggle-survey-2019\/other_text_responses.csv\"\ndf_other_text = pd.read_csv(file)\nprint(df_other_text.shape)\ndf_other_text.head()","72802b82":"def get_country_codes(country_list, countries_errors=None):\n    import pycountry\n    code_list = []\n    for country in country_list:\n        try:\n            code = pycountry.countries.get(name=country).alpha_3\n        except:\n            try:\n                code = pycountry.countries.search_fuzzy(country)\n                if len(code) == 1:\n                    code = code[0].alpha_3\n                else:\n                    if countries_errors != None:\n                        if country in countries_errors.keys():\n                            code = countries_errors[country]\n                        else:\n                            print(\"{} isn't in countries_errors\".format(country))\n                            code = np.nan\n                    else:\n                        print(\"Error to get code for {}\".format(country))\n                        code = np.nan\n            except:\n                if countries_errors != None:\n                    if country in countries_errors.keys():\n                        code = countries_errors[country]\n                    else:\n                        print(\"{} isn't in countries_errors\".format(country))\n                        code = np.nan\n                else:\n                    print(\"Error to get code for {}\".format(country))\n                    code = np.nan\n        finally:\n            code_list.append(code)\n    return code_list\n\ncountries_errors = {\n    \"South Korea\": \"KOR\",\n    \"Iran, Islamic Republic of...\": \"IRN\",\n    \"Hong Kong (S.A.R.)\": \"HKG\",\n    \"Taiwan\": \"TWN\"\n}\n\ndf_temp = pd.DataFrame(df_multiple_choice[\"Q3\"][1:])\ndf_temp.rename(columns={\"Q3\": \"country\"}, inplace=True)\ndf_temp[\"respondents\"] = 1\ndf_temp = df_temp.groupby(\"country\").sum()\ndf_temp.reset_index(inplace=True)\ndf_temp.sort_values(by=\"respondents\", inplace=True, ascending=False)\ndf_temp[\"country_code\"] = get_country_codes(df_temp[\"country\"], countries_errors)\n\nprint(df_temp.shape)\ndf_temp.head()","102f1176":"import plotly.graph_objects as go\n\nfig = go.Figure(data=go.Choropleth(\n    locations = df_temp['country_code'],\n    z = df_temp['respondents'],\n    text = df_temp['country'],\n    colorscale = 'Blues',\n    autocolorscale=False,\n    reversescale=False,\n    marker_line_color='darkgray',\n    marker_line_width=0.5,\n    colorbar_title = 'Qty respondents'\n))\n\nfig.update_layout(\n    title_text=\"Kaggle's respondents in the world.\",\n    geo=dict(\n        showframe=False,\n        showcoastlines=False,\n        projection_type='equirectangular'\n    )\n)\n\nfig.show()","552ee8de":"df_temp = df_multiple_choice[1:][\"Q2\"].value_counts()\n\nfig = {\n  \"data\": [\n    {\n      \"values\": df_temp.values,\n      \"labels\": df_temp.index,\n      \"domain\": {\"x\": [0, .48]},\n      \"hole\": .7,\n      \"type\": \"pie\"\n    },\n    \n    ],\n  \"layout\": {\n        \"title\":\"Gender distribution\",\n    }\n}\n\nfig = go.Figure(fig)\nfig.update_layout(template=\"seaborn\")\niplot(fig)","583f7379":"df_temp = df_multiple_choice[1:][\"Q1\"].value_counts()\ndf_temp = pd.DataFrame(df_temp)\ndf_temp.reset_index(inplace=True)\ndf_temp.sort_values(by=\"index\", inplace=True)\ndf_temp.set_index(\"index\", inplace=True)\ndf_temp.index.names = [\"\"]\ndf_temp = df_temp[\"Q1\"]\n\nfig = {\n  \"data\": [\n    {\n      \"y\": df_temp.values,\n      \"x\": df_temp.index,\n      \"type\": \"bar\"\n    },\n    \n    ],\n  \"layout\": {\n        \"title\":\"Age distribution\",\n    }\n}\n\nfig = go.Figure(fig)\nfig.update_layout(template=\"seaborn\")\niplot(fig)","135138d2":"Exploratory Analysis"}}