{"cell_type":{"e38a0bba":"code","7e790a25":"code","87a51c34":"code","fe1d1576":"code","0a603c60":"code","e88f8b3d":"code","a1ad3fa1":"code","6b08ca83":"code","dbe2c446":"code","5a809351":"code","978f8c32":"code","0a5b9ffb":"code","110d9eb3":"code","92a115ad":"code","8d0ac922":"code","9bb8e995":"code","5d60fcfc":"code","cf5a1ab1":"code","03f5ccc6":"code","38953394":"code","dbd84fce":"code","ae84c65e":"code","a3907216":"code","5c7999ad":"code","84a3d92d":"code","b6dc0272":"code","b1916220":"code","2af33046":"code","c9466f5a":"code","fdd099d5":"code","e551f3a1":"code","cdad9351":"code","05276f8f":"code","9e504f3e":"code","a55ae346":"code","60be1c48":"code","f02075fa":"code","953c569b":"code","54aff80f":"code","b7f11000":"code","1645a9dd":"code","b6bc8a4d":"code","59ab064d":"code","63dcae6b":"code","f96c331d":"code","764c6a6b":"code","e7edb877":"code","6cd99986":"code","cec39b9a":"markdown","c8cf6ef2":"markdown","8481cff7":"markdown","b8c2175d":"markdown","f8b3def1":"markdown"},"source":{"e38a0bba":"import numpy as np\nimport pandas as pd \nimport matplotlib.pyplot as plt\nimport seaborn as sns\n","7e790a25":"raw_data=pd.read_csv(r'..\/input\/domestic-violence-in-colombia\/Reporte_Delito_Violencia_Intrafamiliar_Polic_a_Nacional.csv')\nraw_data.head()","87a51c34":"raw_data.info()","fe1d1576":"raw_data.isnull().sum()","0a603c60":"data=raw_data.copy()\ndata['ARMAS MEDIOS'].fillna(data['ARMAS MEDIOS'].mode()[0], inplace = True)\ndata['GENERO'].fillna(data['GENERO'].mode()[0], inplace = True)\ndata['GRUPO ETARIO'].fillna(data['GRUPO ETARIO'].mode()[0], inplace = True)\ndata['CODIGO DANE'].fillna(data['CODIGO DANE'].mode()[0], inplace = True)","e88f8b3d":"data.isnull().sum()","a1ad3fa1":"data['ARMAS MEDIOS'].unique()","6b08ca83":"data","dbe2c446":"plt.figure(figsize=(15,5))\nsns.countplot(x=data['DEPARTAMENTO'])\nplt.xticks(rotation=90)\nplt.show()","5a809351":"data2=data.copy()\ndata2=data2.drop(['FECHA HECHO', 'CODIGO DANE'], axis=1)\ndata2.head()","978f8c32":"data2['ARMAS MEDIOS'].unique()","0a5b9ffb":"plt.figure(figsize=(15,5))\nsns.countplot(x=data['ARMAS MEDIOS'])\nplt.xticks(rotation=90)\nplt.show()","110d9eb3":"plt.figure(figsize=(15,5))\nsns.countplot(x=data['CANTIDAD'])\nplt.xticks(rotation=90)\nplt.show()","92a115ad":"data2['ARMAS MEDIOS'] = data2['ARMAS MEDIOS'].map({'ARMA BLANCA \/ CORTOPUNZANTE': 1, 'ARMA DE FUEGO': 2, 'CONTUNDENTES':3, 'CORTANTES': 4, 'CORTOPUNZANTES': 5,'NO REPORTADO': 3, 'PUNZANTES': 6, 'SIN EMPLEO DE ARMAS': 7,\n        'NO REPORTA':3, 'ESCOPOLAMINA': 8 ,'-': 3})","8d0ac922":"data2['ARMAS MEDIOS']","9bb8e995":"data['MUNICIPIO'].mode()","5d60fcfc":"data2['MUNICIPIO']=data2['MUNICIPIO'].replace({'NO REPORTA':  'BOGOT\u00c1 D.C. (CT)', '-': 'BOGOT\u00c1 D.C. (CT)'})","cf5a1ab1":"data['DEPARTAMENTO'].mode()","03f5ccc6":"plt.figure(figsize=(15,5))\nsns.countplot(x=data2['DEPARTAMENTO'])\nplt.xticks(rotation=90)\nplt.show()","38953394":"data2['DEPARTAMENTO']=data2['DEPARTAMENTO'].replace({'NO REPORTA':  'CUNDINAMARCA', '-': 'CUNDINAMARCA'})","dbd84fce":"plt.figure(figsize=(15,5))\nsns.countplot(x=data['GRUPO ETARIO'])\nplt.xticks(rotation=90)\nplt.show()","ae84c65e":"data2['GRUPO ETARIO']=data2['GRUPO ETARIO'].replace({'NO REPORTA': 'ADULTOS'})","a3907216":"plt.figure(figsize=(15,5))\nsns.countplot(x=data2['GRUPO ETARIO'])\nplt.xticks(rotation=90)\nplt.show()","5c7999ad":"data2['GENERO']=data2['GENERO'].replace({'-': 'FEMENINO', 'NO REPORTA': 'FEMENINO'})","84a3d92d":"data2['GENERO'].unique()","b6dc0272":"data2.head()","b1916220":"plt.figure(figsize=(15,5))\nsns.countplot(x=data2['GENERO'])\nplt.xticks(rotation=90)\nplt.show()","2af33046":"trainx=data2.copy()\ntrainx=trainx.drop('ARMAS MEDIOS', axis=1)\n\ntrainy=data2['ARMAS MEDIOS']","c9466f5a":"trainx_encoded = pd.get_dummies(trainx, columns = ['MUNICIPIO', 'DEPARTAMENTO', 'GENERO','GRUPO ETARIO'])","fdd099d5":"trainx","e551f3a1":"trainx_encoded.columns.unique()","cdad9351":"trainx_encoded","05276f8f":"from sklearn.model_selection import train_test_split","9e504f3e":"X_train, X_test, y_train, y_test = train_test_split(trainx_encoded, trainy, test_size=0.2, random_state=42)","a55ae346":"X_train.info()","60be1c48":"X_test","f02075fa":"from sklearn.datasets import make_classification\nfrom sklearn.linear_model import LogisticRegression","953c569b":"X_train, y_train = make_classification(n_samples=381576, n_features=1059, n_informative=5, n_redundant=5, n_classes=3, random_state=12)\n# define the multinomial logistic regression model\nmodel = LogisticRegression(multi_class='multinomial', solver='lbfgs')\n# fit the model on the whole dataset\nmodel.fit(X_train, y_train)","54aff80f":"model.score(X_train, y_train)","b7f11000":"X_test, y_test = make_classification(n_samples=95394, n_features=1059, n_informative=5, n_redundant=5, n_classes=3, random_state=12)","1645a9dd":"y_pred = model.predict(X_test)","b6bc8a4d":"y_pred","59ab064d":"y_test","63dcae6b":"from sklearn.metrics import mean_squared_error\nmean_squared_error(y_test, y_pred)","f96c331d":"from sklearn.metrics import accuracy_score\naccuracy_score(y_test, y_pred)","764c6a6b":"from sklearn.metrics import r2_score\nr2_score(y_test, y_pred)","e7edb877":"model.score(X_test, y_test)","6cd99986":"print('Train Accuracy: %.2f' % (model.score(X_train, y_train)))\nprint('Test Accuracy: %.2f' % (model.score(X_test, y_test)))","cec39b9a":"**Data Cleansing**\n\nAll NA values were replaced with the most frequent value in their column","c8cf6ef2":"**Domestic violence in Colombia**\n\n* Data Cleansing\n* Data Visualization\n* Build the Model\n\n","8481cff7":"**In order to be able to work with the Weapon's data, it should be mapped with numbers**\n\n","b8c2175d":"**Visualising the Data**\n","f8b3def1":"**Building a Model**\n\nAs there are multiple discrete outputs, *multinomial logistic regression model* is used for this case\n\n\n"}}