{"cell_type":{"9e89ca77":"code","6678f045":"code","6ad85239":"code","19a40e93":"markdown"},"source":{"9e89ca77":"import numpy as np\nimport pandas as pd \nimport matplotlib.pyplot as plt\nimport plotly.express as px\nfrom google.cloud import bigquery\nclient = bigquery.Client()\ndataset = client.get_dataset('bigquery-public-data.covid19_google_mobility')\ntables = list(client.list_tables(dataset))","6678f045":"print('New York City')\nsql = '''\nSELECT\n  *\nFROM\n  `bigquery-public-data.covid19_google_mobility.mobility_report` \nWHERE\n  country_region = \"United States\"\n  AND sub_region_1 = \"New York\"\n  AND sub_region_2 = \"New York County\"\n  AND date BETWEEN \"2020-01-10\" AND \"2020-09-07\"\nORDER BY\n  date\n'''\nquery_job = client.query(sql)\ndf = query_job.to_dataframe()\nfig = plt.figure();\ndf.plot(x='date', rot=45, y=['retail_and_recreation_percent_change_from_baseline',                                  \n                             'grocery_and_pharmacy_percent_change_from_baseline',\n                             'parks_percent_change_from_baseline',\n                             'transit_stations_percent_change_from_baseline',\n                             'workplaces_percent_change_from_baseline',\n                             'residential_percent_change_from_baseline'])\nplt.legend(bbox_to_anchor=(1, 0.5), loc='lower left')\nplt.xlabel('Date')\nplt.ylabel('Percent Change From Baseline')\nplt.show()","6ad85239":"print('San Francisco')\nsql = '''\nSELECT\n  *\nFROM\n  `bigquery-public-data.covid19_google_mobility.mobility_report` \nWHERE\n  country_region = \"United States\"\n  AND sub_region_1 = \"California\"\n  AND sub_region_2 = \"San Francisco County\"\n  AND date BETWEEN \"2020-01-10\" AND \"2020-09-07\"\nORDER BY\n  date\n'''\nquery_job = client.query(sql)\ndf = query_job.to_dataframe()\nfig = plt.figure();\ndf.plot(x='date', rot=45, y=['retail_and_recreation_percent_change_from_baseline',                                  \n                             'grocery_and_pharmacy_percent_change_from_baseline',\n                             'parks_percent_change_from_baseline',\n                             'transit_stations_percent_change_from_baseline',\n                             'workplaces_percent_change_from_baseline',\n                             'residential_percent_change_from_baseline'])\nplt.legend(bbox_to_anchor=(1, 0.5), loc='lower left')\nplt.xlabel('Date')\nplt.ylabel('Percent Change From Baseline')\nplt.show()","19a40e93":"# Comparing recent mobility trends in New York City and San Francisco\n\nUsing data from Google's Community Mobility Reports: https:\/\/www.kaggle.com\/bigquery\/covid19-google-mobility\n\nand code that was adapted from https:\/\/www.kaggle.com\/annaepishova\/starter-google-community-mobility-reports"}}