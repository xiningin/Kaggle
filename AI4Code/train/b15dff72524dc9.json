{"cell_type":{"e36c3ff4":"code","1c7a31e9":"code","119b33d7":"code","74edc4c2":"code","41c04a2a":"code","e3acbad7":"code","e9e5cd9e":"code","984ccb89":"code","b18c5cd9":"code","3f487cf2":"code","a9e40eb3":"code","51842e45":"code","7305015a":"code","11537fbf":"code","e6c9a275":"code","f9db46f0":"code","99a6875f":"code","401ba254":"code","9642da4e":"code","a3a379be":"code","fb78e400":"code","2457022f":"code","0c024865":"code","55e21143":"code","1e33385c":"code","73b75f2f":"code","1a8f2c9a":"markdown","becf7c27":"markdown","be76f658":"markdown","601338ce":"markdown","46634665":"markdown","1eb72733":"markdown","65fd64e1":"markdown","df6eb68a":"markdown","18a381c7":"markdown","b571cffe":"markdown","04c98291":"markdown","c5375528":"markdown","74e9b3e0":"markdown","c31cce96":"markdown","51a4ae9b":"markdown","78e690a3":"markdown","d6de99eb":"markdown","ed75a4c2":"markdown","c5e99aed":"markdown","50e3fb0c":"markdown","0541b903":"markdown","ec66f8f1":"markdown","f9d70f91":"markdown","f4d237ca":"markdown","4223fdcf":"markdown","7010a313":"markdown"},"source":{"e36c3ff4":"import numpy as np # linear algebra\nimport pandas as pd # data processing, CSV file I\/O (e.g. pd.read_csv)\nimport os\nimport matplotlib.pyplot as plt\nimport warnings\nimport seaborn as sns\nimport folium\nimport folium.plugins\nimport io\nfrom mpl_toolkits.basemap import Basemap\nfrom matplotlib import animation,rc\nimport base64\n\nfrom IPython.display import HTML, display\nwarnings.filterwarnings('ignore')\nfor dirname, _, filenames in os.walk('\/kaggle\/input'):\n    for filename in filenames:\n        print(os.path.join(dirname, filename))\n        ","1c7a31e9":"data = pd.read_csv(\"..\/input\/gtd\/globalterrorismdb_0718dist.csv\",encoding='ISO-8859-1')","119b33d7":"data.head()","74edc4c2":"data.shape","41c04a2a":"data_new = data.dropna(thresh=160000,axis=1)","e3acbad7":"data_new","e9e5cd9e":"data_new.shape","984ccb89":"data_new.columns","b18c5cd9":"data_new.isnull().sum()","3f487cf2":"data_new['casualities']=data_new['nkill']+data_new['nwound']\n\nprint('Country with Highest Terrorist Attacks:',data_new['country_txt'].value_counts().index[0])\nprint('Regions with Highest Terrorist Attacks:',data_new['region_txt'].value_counts().index[0])\nprint('Maximum people killed in an attack are:',data_new['nkill'].max(),'that took place in',data_new.loc[data_new['nkill'].idxmax()].country_txt)\nprint(\"Year with the most attacks:\",data_new['iyear'].value_counts().idxmax())\nprint(\"Month with the most attacks:\",data_new['imonth'].value_counts().idxmax())\nprint(\"Most Attack Types:\",data_new['attacktype1_txt'].value_counts().idxmax())","a9e40eb3":"sns.barplot(data_new['gname'].value_counts()[1:10].values,data_new['gname'].value_counts()[1:10].index,palette='Set1')\nplt.xticks(rotation=90)\nfig=plt.gcf()\nfig.set_size_inches(10,8)\nplt.title('Terrorist Groups with Highest Terror Attacks')\nplt.show()","51842e45":"\nprint(f\"The highest terrorist attacks were commited in {data_new.country_txt.value_counts().index[0]} with {data_new.country.value_counts().max()} attacks\")\n\nprint('\\nThe other 9 countries with highest terrorist attacks are:')\nfor i in range(1,10):\n    print(f\"{i+1}. {data_new.country_txt.value_counts().index[i]} with {data_new.country_txt.value_counts()[i]} attacks\")\n\n#Visualization\nplt.subplots(figsize=(15,6))\nsns.barplot(data_new['country_txt'].value_counts()[:10].index,data_new['country_txt'].value_counts()[:10].values,palette='Set1')\nplt.title('Top Countries Affected')\nplt.xlabel('Countries')\nplt.ylabel('Count')\nplt.xticks(rotation= 90)\nplt.show()","7305015a":"f, ax = plt.subplots(figsize=(10, 7))\nplt.title('Number Of Terrorist Activities per Year')\nsns.despine(f)\nsns.distplot(data_new['iyear'], bins=20,color=\"g\")","11537fbf":"pd.crosstab(data_new.iyear, data_new.region_txt).plot(kind='area',figsize=(15,6))\nplt.title('Terrorist Activities by Region each Year')\nplt.ylabel('Number of Attacks')\nplt.show()","e6c9a275":"plt.subplots(figsize=(10,7))\nyear_casual = data_new.groupby('iyear').casualities.sum().to_frame().reset_index()\nyear_casual.columns = ['Year','Casualities']\nplt.title('Number Of Casualities Each Year')\nsns.lineplot(x='Year', y='Casualities', data=year_casual,palette=\"Set2\",color=\"g\")","f9db46f0":"plt.subplots(figsize=(15,6))\nsns.countplot(data_new['targtype1_txt'],palette='Set1',order=data_new['targtype1_txt'].value_counts().index)\nplt.xticks(rotation=90)\nplt.title('Most common target')\nplt.show()\n","99a6875f":"from wordcloud import WordCloud, STOPWORDS\nfrom scipy import signal\n\ndata_city = data_new.copy()\ndata_city.drop(data_city.index[data_city['city'] == 'Unknown'], inplace = True)\ncities = data_city.city.dropna(False)\nplt.subplots(figsize=(17,17))\n\nwordcloud = WordCloud(font_path= \"..\/input\/fontss\/Beneath_Your_Beautiful_Bold.ttf\", \n                     background_color = 'white', \n                     stopwords=STOPWORDS,\n                     width=1800,\n                     height=1400\n                     ).generate(' '.join(cities))\n\nplt.title(\"Most commonly attacked cities\")\nplt.axis('off')\nplt.imshow(wordcloud,interpolation='bilinear')\nplt.show()","401ba254":"terror_fol=data_new.copy()\nterror_fol.dropna(subset=['latitude','longitude'],inplace=True)\nlocation_fol=terror_fol[['latitude','longitude']][:8000]\ncountry_fol=terror_fol['country_txt'][:8000]\ncity_fol=terror_fol['city'][:8000]\nkilled_fol=terror_fol['nkill'][:8000]\nwound_fol=terror_fol['nwound'][:8000]\ndef color_point(x):\n    if x>=30:\n        color='red'\n    elif ((x>0 and x<30)):\n        color='blue'\n    else:\n        color='orange'\n    return color   \ndef point_size(x):\n    if (x>30 and x<100):\n        size=2\n    elif (x>=100 and x<500):\n        size=8\n    elif x>=500:\n        size=16\n    else:\n        size=0.5\n    return size   \nmap2 = folium.Map(location=[30,0],tiles='cartodbpositron',zoom_start=2)\nfor point in location_fol.index:\n    info='<b>Country: <\/b>'+str(country_fol[point])+'<br><b>City: <\/b>: '+str(city_fol[point])+'<br><b>Killed <\/b>: '+str(killed_fol[point])+'<br><b>Wounded<\/b> : '+str(wound_fol[point])\n    iframe = folium.IFrame(html=info, width=200, height=200)\n    folium.CircleMarker(list(location_fol.loc[point].values),popup=folium.Popup(iframe),radius=point_size(killed_fol[point]),color=color_point(killed_fol[point])).add_to(map2)\nmap2","9642da4e":"terror_india=data_new[data_new['country_txt']=='India']\nterror_india_fol=terror_india.copy()\nterror_india_fol.dropna(subset=['latitude','longitude'],inplace=True)\nlocation_ind=terror_india_fol[['latitude','longitude']][:5000]\ncity_ind=terror_india_fol['city'][:5000]\nkilled_ind=terror_india_fol['nkill'][:5000]\nwound_ind=terror_india_fol['nwound'][:5000]\ntarget_ind=terror_india_fol['targtype1_txt'][:5000]\n\nmap4 = folium.Map(location=[20.59, 78.96],tiles='cartodbpositron',zoom_start=4.5)\nfor point in location_ind.index:\n    folium.CircleMarker(list(location_ind.loc[point].values),popup='<b>City: <\/b>'+str(city_ind[point])+'<br><b>Killed: <\/b>'+str(killed_ind[point])+\\\n                        '<br><b>Injured: <\/b>'+str(wound_ind[point])+'<br><b>Target: <\/b>'+str(target_ind[point]),radius=point_size(killed_ind[point]),color=color_point(killed_ind[point]),fill_color=color_point(killed_ind[point])).add_to(map4)\nmap4","a3a379be":"fig = plt.figure(figsize = (10,8))\ndef animate(Year):\n    ax = plt.axes()\n    ax.clear()\n    ax.set_title('Terrorism In India '+'\\n'+'Year:' +str(Year))\n    m5 = Basemap(projection='lcc',resolution='l',llcrnrlon=67,llcrnrlat=5,urcrnrlon=99,urcrnrlat=37,lat_0=28,lon_0=77)\n    lat_gif=list(terror_india[terror_india['iyear']==Year].latitude)\n    long_gif=list(terror_india[terror_india['iyear']==Year].longitude)\n    x_gif,y_gif=m5(long_gif,lat_gif)\n    m5.scatter(x_gif, y_gif,s=[killed+wounded for killed,wounded in zip(terror_india[terror_india['iyear']==Year].nkill,terror_india[terror_india['iyear']==Year].nwound)],color = 'r')\n    m5.drawcoastlines()\n    m5.drawcountries()\n    m5.fillcontinents(color='coral',lake_color='aqua', zorder = 1,alpha=0.4)\n    m5.drawmapboundary(fill_color='aqua')\n\n\nani = animation.FuncAnimation(fig,animate,list(terror_india.iyear.unique()), interval = 1500)    \nani.save('animation.gif', writer='imagemagick', fps=1)\nplt.close(1)\nfilename = 'animation.gif'\nvideo = io.open(filename, 'r+b').read()\nencoded = base64.b64encode(video)\nHTML(data='''<img src=\"data:image\/gif;base64,{0}\" type=\"gif\" \/>'''.format(encoded.decode('ascii')))","fb78e400":"terror_india","2457022f":"plt.subplots(figsize=(15,6))\nsns.countplot('iyear',data=terror_india,palette='Set3',edgecolor=sns.color_palette('dark',10))\nplt.xticks(rotation=90)\nplt.title('Number Of terrorist activities each Year in India')\nplt.show()","0c024865":"plt.subplots(figsize=(15,6))\nyear_cas_india = terror_india.groupby('iyear').casualities.sum().to_frame().reset_index()\nyear_cas_india.columns = ['Year','Casualities']\n\nsns.barplot(x=year_cas_india.Year, y=year_cas_india.Casualities, palette='Set3',\n            edgecolor=sns.color_palette('dark',10))\nplt.xticks(rotation=90)\nplt.title('Number Of Casualities each year in India')\nplt.show()","55e21143":"plt.subplots(figsize=(15,6))\ncity_attacks_india = terror_india.city.value_counts()[:15].reset_index()\ncity_attacks_india.columns = ['City', 'Total Attacks']\ncity_attacks_india.drop(1, inplace=True)\nsns.barplot(x=city_attacks_india.City, y=city_attacks_india['Total Attacks'], palette='Set3',\n            edgecolor=sns.color_palette('dark',10))\nplt.xticks(rotation=30)\nplt.title('Number Of Total Attacks in Each Indian City')\nplt.show()","1e33385c":"sns.barplot(terror_india['gname'].value_counts()[1:10].values,terror_india['gname'].value_counts()[1:10].index,palette='Set3')\nplt.xticks(rotation=90)\nfig=plt.gcf()\nfig.set_size_inches(10,8)\nplt.title('Terrorist Groups with Highest Terror Attacks in India')\nplt.show()","73b75f2f":"ir_groups_10 = terror_india[terror_india.gname.isin(terror_india.gname.value_counts()[1:9].index)]\npd.crosstab(ir_groups_10.iyear, ir_groups_10.gname).plot(color=sns.color_palette('Set3', 10))\nfig=plt.gcf()\nfig.set_size_inches(18,6)\nplt.xticks(range(1970, 2017, 5))\nplt.ylabel('Total Attacks')\nplt.title('Top Terrorist Groups Activities in India from 1970 to 2017')\nplt.show()","1a8f2c9a":"### Number Of Casualities each year in India","becf7c27":"### Countries with highest terrorist attacks","be76f658":"### World-wide map of Terrorism","601338ce":"From the above figure its clearly visible, The peak of terrorist attacks in India started from 2008.","46634665":"### Wordcloud of most commonly attacked cities","1eb72733":"# Terrorism analysis globally and in India","65fd64e1":"### Definition of terrorism?\n\n\"The threatened or actual use of illegal force and violence by a non-state actor to attain a political, economic, religious, or social goal through fear, coercion, or intimidation.\"","df6eb68a":"### Terrorist Groups with most attacks","18a381c7":"### Number Of Casualities Each Year","b571cffe":"### Most common target","04c98291":"![fotolia_76477232_subscription_xl.jpg](attachment:fotolia_76477232_subscription_xl.jpg)","c5375528":"### Terror Activities in India","74e9b3e0":"Attacks have been grouped in three different size and three different color.The size and colors are based on the Killed numbers of each attack.You can check this logic in the code below:","c31cce96":"### Terrorist Activities by Region each Year","51a4ae9b":"### How did terrorism spread in India","78e690a3":"### Top Terrorist Groups Activities in India from 1970 to 2017","d6de99eb":"### Number Of terrorist activities each Year in India","ed75a4c2":"### Terrorist Groups with Highest Terror Attacks in India","c5e99aed":"**Objective**: The following notebook  is an analysis of terrorist attacks globally and in India from 1970 until 2015. It features detailed textual analysis, visual exploration and EDA","50e3fb0c":"### Number Of Terrorist Activities per Year","0541b903":"Click on markers for more information.","ec66f8f1":"## Some basic analysis","f9d70f91":"## Focussing on India\nFron this part on, we do the same activities and plots, for India.","f4d237ca":"### Load the dataset","4223fdcf":"### Dropping columns where more than 160000 records are empty","7010a313":"Here we can observe the number of terrorist activities have gone up sharply after 2010."}}