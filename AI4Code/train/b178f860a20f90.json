{"cell_type":{"3eacab9c":"code","3a81aae6":"code","4e1923a6":"code","06277dff":"code","4f6fc563":"code","16943f69":"code","1a8021cb":"code","3911c2c1":"code","9b5fb5ad":"code","88086306":"code","0fd495c4":"code","4685ab1f":"code","752ae418":"code","be6fa5ed":"code","701b922e":"code","2121dce1":"code","fff1998b":"code","3e55834f":"code","36d7b075":"code","9010db73":"code","1dd25a4f":"code","ec950a87":"code","1b3875c0":"code","7a756318":"code","12009c52":"code","0d89a496":"code","b6381d87":"code","01c2e9ff":"code","d07ca570":"code","1b614d0d":"code","7bc2822a":"code","08d23250":"code","52314e0a":"code","9a84d538":"markdown","21d806db":"markdown","5409a270":"markdown","e0b6868e":"markdown","0c1ec2c9":"markdown","7101d5a9":"markdown","91f5998a":"markdown","533001f1":"markdown","dce6da74":"markdown","a8c9aa29":"markdown","84847b23":"markdown","2c14bd8c":"markdown","53467e34":"markdown","206cd4d1":"markdown","5a900196":"markdown","3f6925c6":"markdown","e4e76a7a":"markdown","82f75b96":"markdown","f372b47e":"markdown","7769f6c8":"markdown","3ecbc41d":"markdown","399bce6e":"markdown","037aba61":"markdown"},"source":{"3eacab9c":"import sqlite3\nimport pandas as pd\nimport numpy as np\nimport matplotlib.pyplot as plt\n%matplotlib inline\nimport seaborn as sns\nfrom collections import Counter\n\nimport plotly.express as px","3a81aae6":"conn=sqlite3.connect('..\/input\/pitchfork-data\/database.sqlite')\n#conn=sqlite3.connect('..\/data\/database.sqlite')","4e1923a6":"cursor=conn.cursor()\ncursor.execute(\"SELECT name from sqlite_master where type='table';\")\nprint(cursor.fetchall())","06277dff":"reviews=pd.read_sql_query('SELECT * from reviews',conn)\nartists=pd.read_sql_query('SELECT * from artists',conn) ## already available as a column in reviews\ngenres=pd.read_sql_query('SELECT * from genres',conn)\nlabels=pd.read_sql_query('SELECT * from labels',conn)\nyears=pd.read_sql_query('SELECT * from years',conn) ## label year.\ncontent=pd.read_sql_query('SELECT * from content',conn)","4f6fc563":"reviews.head()","16943f69":"reviews.groupby('reviewid').filter(lambda x:len(x)>1)","1a8021cb":"reviews.drop_duplicates(ignore_index=True,inplace=True)","3911c2c1":"reviews.groupby('reviewid').filter(lambda x:len(x)>1)","9b5fb5ad":"reviews['pub_year'].value_counts().sort_index(ascending=True)","88086306":"reviews['score'].describe()","0fd495c4":"plt.figure(figsize=(8,8))\nsns.distplot(reviews['score'],color='blue')\nplt.title('Distribution of review score',fontsize=15)\nplt.xlabel('Review Score',fontsize=10)\nplt.ylabel('Frequency',fontsize=10)\nplt.show()","4685ab1f":"genres.head()","752ae418":"rev_gen=reviews.merge(genres,on=['reviewid'],how='left')","be6fa5ed":"reviews.shape,genres.shape,rev_gen.shape","701b922e":"rev_gen.head()","2121dce1":"gen_count=rev_gen.groupby('genre')['title'].nunique().sort_values(ascending=False).reset_index().rename(columns={\"title\":\"count\"})\ngen_count['perc']=(gen_count['count']\/rev_gen.shape[0])*100\ngen_count","fff1998b":"gen_count=rev_gen.groupby(['genre','pub_year'])['title'].nunique().reset_index().rename(columns={'title':\"count\"})","3e55834f":"gen_count","36d7b075":"fig=px.line(gen_count,x='pub_year',y='count',color='genre',line_group='genre',hover_name='genre',title=\"layout.hovermode='x unified'\",labels={\"genre\":\"Genre\",\"pub_year\":\"Review Year\",\"count\":\"Count\"})\nfig.update_traces(mode=\"lines\")\nfig.update_layout(title='Trend of Reviews by Genre between 1999-2000',xaxis_title='Review Year',yaxis_title='Review Count',margin=dict(l=20,r=20,t=30,b=20))\nfig.show()","9010db73":"rev_gen['artist'].nunique()","1dd25a4f":"rev_gen['mean_rating'] = rev_gen.groupby(['artist'])['score'].transform('mean')\nartist_genre=rev_gen.loc[~rev_gen['genre'].isna(),].groupby(['artist','mean_rating'])['genre'].apply(lambda x:\",\".join(x.unique().astype(str))).reset_index()\nartist_genre['genre_count']=[len(x) for x in artist_genre['genre'].str.split(\",\")]\nartist_genre['artist_count']=[len(x) for x in artist_genre['artist'].str.split(\",\")]","ec950a87":"artist_genre.head()","1b3875c0":"artist_genre['artist_count'].describe()","7a756318":"artist_genre.loc[artist_genre['artist_count']>=5,]","12009c52":"artist_genre['mean_rating'].describe()","0d89a496":"artist_genre.loc[artist_genre['mean_rating']==10,]","b6381d87":"rev_gen.head()","01c2e9ff":"rev_gen['review_yrs']=rev_gen.groupby('artist')['pub_year'].transform('nunique')","d07ca570":"review_yrs=rev_gen.loc[rev_gen['review_yrs']>3,]\nreview_yrs=review_yrs.sort_values(by=['artist','pub_date'],ascending=True)\nreview_yrs.head()","1b614d0d":"def inc_yoy(L):\n    return all(x<y for x,y in zip(L,L[1:]))","7bc2822a":"t=review_yrs.groupby('artist')['score'].apply(lambda x:inc_yoy(x)).reset_index()\nt.loc[t['score']==True,]","08d23250":"review_yrs.loc[rev_gen['artist']=='erykah badu',]","52314e0a":"review_yrs.loc[rev_gen['artist']=='chelsea wolfe',]","9a84d538":"The mean review score is around 7 where as we find that there are reviews in two extremes - 0 rated and 10 rated.25 % of the data has reviews less than 6 whereas another 25 % has review greater than 8.","21d806db":"From the interactive plot,we see that Rock genre has clearly dominated the review space over the years followed by electronic.There has been a strong growth for rap genre reviews starting from 2010 and 2011 where it overtakes pop and experimental genres.","5409a270":"To do this analysis,I am going to join the genre table with reviews.","e0b6868e":"#### Read the data & data quality check","0c1ec2c9":"There is only one album which has been contributed by 7 artists and the mean rating has been 6.5","7101d5a9":"**Work in progress**","91f5998a":"A quick look at the artist count shows that the maximum number of artist who have worked for an album is 7.Lets check the rows.","533001f1":"### Are there artists who have been consistent in the ratings over the years ","dce6da74":"6 Artists have a review rating of 10 and the majority are in pop & rock genres.","a8c9aa29":"A quick look at the rating shows that the mean rating has been 6.9 and 25 % of the review rating has been below 6.4.There have been few ratings where the rating is 10.Lets check those.","84847b23":"There are 8 instances where there review id lines have duplicated.Lets remove them.","2c14bd8c":"* Hmm,there are 2367 titles without any genre.\n* 41 % of the review belongs to rock genre whereas 17 % belongs to electronic.The diffference in percentage between the top 2 genre is very high whereas the subsequent genres the difference is not significant.","53467e34":"### How has the artists performed  ?","206cd4d1":"### What type of genres are reviewed regularly ?.How has this changed over the years?","5a900196":"Check again,","3f6925c6":"From the mean rating analysis,we see that the mean is 6.4.In this part of the analysis,we are going to check the number of artists who have been consistent in the ratings over the years. ie.check for the artist whose ratings have not decreased from first year and has only increased.For the purpose of this analysis,I consider artists who have had reviews for more than 3 years.","e4e76a7a":"Here we see that from 2003 to 2016,the artist has got an increasing ratings over the years.","82f75b96":"As the data description says,we have 18,393 reviews in total starting from 1999 to 2017.The maximum review is from the year 2007 whereas the least reviews is from the year 2017.","f372b47e":"Thus out of 1077 artist combination,we have 8 artists whose music ratings have only been increasing over the years.Lets take an example and confirm whether our logic is applied correctly.","7769f6c8":"### Pitchfork","3ecbc41d":"According to [Wikipedia](https:\/\/en.wikipedia.org\/wiki\/Pitchfork_(website)) Pitchfork is an American online music publication launched in 1995 by Ryan Schreiber.It began as a blog that developed during Schreiber's teenage years working at a record store. It quickly earned a reputation for its extensive coverage of indie music. It has since expanded and covers all kinds of music, including pop.\n\nThe site is best known for its daily output of music reviews but also regularly reviews reissues and box sets.The company also organizes an annual music festival called Pirchfork Music festival.The festival, which is normally held over three days (Friday, Saturday, and Sunday) in July, focuses primarily on artists and bands from alternative rock, hip hop, electronica, and dance music, although it has also ranged into hardcore punk, experimental rock, and jazz in its lineups. \n\nThis dataset has all info on the reviews by Pitchfork team - artist,content,genre,label and years.Few insights I am trying to get from this dataset include,\n\n1.What type of genres are reviewed regularly ?.How has this changed over the years?\n\n2.How has the artists performed over the years ? .\n\n3.Are there artists who have been consistent in the ratings over the years ?\n\n4.Were there any artists who have been top rated across the genre ?\n\nI will add questions to this list as I explore.Lets begin.","399bce6e":"reviewid must be unique.Lets check if there are any duplicate lines and remove them incase if there are any.","037aba61":"### Overview"}}