{"cell_type":{"4e5520f0":"code","4ba5368c":"code","a285671b":"code","38b93159":"code","5a0ce3ae":"code","06bdc58c":"code","824f1f12":"code","99d2d05a":"code","5b65f551":"code","84f8208f":"code","c79fff43":"code","5bf7cc12":"code","712700f2":"code","01b587d4":"code","df214368":"code","fabd4cad":"code","42cacc9c":"code","b4a5833e":"code","57514f02":"code","5073ad96":"code","176852b0":"markdown","b1c62f1d":"markdown","92801127":"markdown"},"source":{"4e5520f0":"from PIL import Image\nimport numpy as np\nimport pandas as pd \nimport matplotlib.pyplot as plt\nimport seaborn as sns\n\nimport os\nfor dirname, _, filenames in os.walk('\/kaggle\/input'):\n    for filename in filenames:\n        print(os.path.join(dirname, filename))\n        \nfrom tqdm import tqdm\nfrom wordcloud import WordCloud, STOPWORDS, ImageColorGenerator","4ba5368c":"tweets_df = pd.read_csv('..\/input\/tweet-sentiment-extraction\/train.csv')\ntweets_df.sample(10)","a285671b":"print(tweets_df.describe())\nprint('\\n')\nprint(tweets_df.info())","38b93159":"text_count = tweets_df.shape[0]\npercentage_selected = []\n\ntweets_df['text_len']         = tweets_df['text'].astype(str).apply(lambda x: len(x.split()))\ntweets_df['sel_text_len']     = tweets_df['selected_text'].astype(str).apply(lambda x: len(x.split()))\ntweets_df['% words selected'] =  tweets_df['text_len'] \/ tweets_df['sel_text_len'] ","5a0ce3ae":"tweets_df.sample(15)","06bdc58c":"mean_word_selection_ratio = tweets_df['% words selected'].mean()\nmean_word_selection_ratio","824f1f12":"plt.figure(figsize=(12, 6))\nsns.countplot(x='sentiment', data=tweets_df)\nplt.savefig('bar_plot_sns.png')","99d2d05a":"labels = tweets_df['sentiment'].unique().tolist() # [neutral, negative, positive]\ncounts = tweets_df['sentiment'].value_counts().tolist() # [neutral, positive, negative]\naux = counts[2]\ncounts[2] = counts[1]\ncounts[1] = aux\n\n# show bar plots of the target class distribution\nplt.figure(figsize=(12, 6))\nplt.bar(labels, counts, edgecolor='black', color='lightblue')\nplt.savefig('bar_plot.png')\nplt.show()","5b65f551":"# join all selected text \ntext_list = tweets_df['selected_text'].astype(str).tolist()\nall_text = ''\nfor new_text in tqdm(text_list):\n    all_text = all_text + ' ' + new_text","84f8208f":"# join positive selected text \npos_text_list = tweets_df[tweets_df['sentiment'] == 'positive']['selected_text'].astype(str).tolist()\npos_all_text = ''\nfor new_text in tqdm(pos_text_list):\n    pos_all_text = pos_all_text + ' ' + new_text","c79fff43":"# join negative selected text \nneg_text_list = tweets_df[tweets_df['sentiment'] == 'negative']['selected_text'].astype(str).tolist()\nneg_all_text = ''\nfor new_text in tqdm(neg_text_list):\n    neg_all_text = neg_all_text + ' ' + new_text","5bf7cc12":"# defining stopwords\nstopwords = set(STOPWORDS)\nstopwords.update(['to', 'im', 'will'])\n\n# generating wordcloud with no parameters\nwordcloud = WordCloud().generate(all_text)\nplt.imshow(wordcloud, interpolation='bilinear')\nplt.axis('off')\nplt.show()","712700f2":"# read ballon mask\nballon_mask = np.array(Image.open('..\/input\/ballon-render\/ballon.png'))\nprint(ballon_mask.shape)\nplt.imshow(ballon_mask[:][:][:])","01b587d4":"# transforms mask\ndef transform_format(val):\n    if val == 0:\n        return 255\n    else:\n        return 0","df214368":"# creates a ballon mask\ntransformed_ballon_mask = np.ndarray((ballon_mask.shape[0], ballon_mask.shape[1], ballon_mask.shape[2]), np.int32) \n\nfor i in tqdm(range(ballon_mask.shape[0])):\n    for j in range(ballon_mask.shape[1]):\n        if ballon_mask[i][j][3] == 0:\n            transformed_ballon_mask[i][j][:3] = list(map(transform_format, ballon_mask[i][j][:3]))\n            transformed_ballon_mask[i][j][3] = 255\n        else:\n            transformed_ballon_mask[i][j][3] = 0","fabd4cad":"plt.imshow(transformed_ballon_mask)\nplt.show()","42cacc9c":"# create and generate a word cloud image\nwordcloud = WordCloud(background_color='black', mask=transformed_ballon_mask, stopwords=stopwords, contour_width=3)\nwordcloud_white = WordCloud(background_color='white', mask=transformed_ballon_mask, stopwords=stopwords, contour_width=3)\n\npos_wordcloud = WordCloud(background_color='black', mask=transformed_ballon_mask, stopwords=stopwords, contour_width=3)\npos_wordcloud_white = WordCloud(background_color='white', mask=transformed_ballon_mask, stopwords=stopwords, contour_width=3)\n\nneg_wordcloud = WordCloud(background_color='black', mask=transformed_ballon_mask, stopwords=stopwords, contour_width=3)\nneg_wordcloud_white = WordCloud(background_color='white', mask=transformed_ballon_mask, stopwords=stopwords, contour_width=3)\n\n# generate texts\n## all\nwordcloud.generate(all_text)\nwordcloud_white.generate(all_text)\n\n## positive\npos_wordcloud.generate(pos_all_text)\npos_wordcloud_white.generate(pos_all_text)\n\n## negative\nneg_wordcloud.generate(neg_all_text)\nneg_wordcloud_white.generate(neg_all_text)\n\n# save wordcloud\n#wordcloud.to_file('masked_wordcloud.png')\n#wordcloud_white.to_file('masked_wordcloud_white.png')\n\n#pos_wordcloud.to_file('pos_masked_wordcloud.png')\n#pos_wordcloud_white.to_file('pos_masked_wordcloud_white.png')\n\n#neg_wordcloud.to_file('neg_masked_wordcloud.png')\n#neg_wordcloud_white.to_file('neg_masked_wordcloud_white.png')\n\n# show\nplt.figure(figsize=[10,20])\nplt.imshow(wordcloud, interpolation='bilinear')\nplt.axis('off')\nplt.show()","b4a5833e":"plt.imshow(wordcloud_white, interpolation='bilinear')\nplt.axis('off')\nplt.show()","57514f02":"plt.figure(figsize=[10,20])\nplt.imshow(pos_wordcloud, interpolation='bilinear')\nplt.axis('off')\nplt.show()","5073ad96":"plt.figure(figsize=[10,20])\nplt.imshow(neg_wordcloud, interpolation='bilinear')\nplt.axis('off')\nplt.show()","176852b0":"# Introduction","b1c62f1d":">Hello there! \n* The ballon mask I used was quickly made on gimp, use it however it fits you \n* The ideia here is to tell what are people are talking, so nothing more adequate than a talk balloon!\n* Wordclouds also help to tell what our models are learning (shoutout to all language models out there)","92801127":"## Selected text wordcloud"}}