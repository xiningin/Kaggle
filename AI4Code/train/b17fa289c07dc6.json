{"cell_type":{"69742f80":"code","9a5f2046":"code","1ffa3858":"code","6863566b":"code","ec46edcd":"code","a73faf30":"code","b33fd647":"code","49689b2e":"code","e3f85181":"code","88d2a401":"code","48f3ce1f":"code","010821dc":"code","02dfdbea":"code","5a4e51fa":"code","46ed5b50":"code","4358ffcf":"code","38426804":"code","fd275cbb":"code","0d6e9dd0":"code","7a9f5bee":"markdown","08e8b3b7":"markdown"},"source":{"69742f80":"# This Python 3 environment comes with many helpful analytics libraries installed\n# It is defined by the kaggle\/python Docker image: https:\/\/github.com\/kaggle\/docker-python\n# For example, here's several helpful packages to load\nimport requests\nimport numpy as np # linear algebra\nimport pandas as pd # data processing, CSV file I\/O (e.g. pd.read_csv)\n\n# Input data files are available in the read-only \"..\/input\/\" directory\n# For example, running this (by clicking run or pressing Shift+Enter) will list all files under the input directory\n\nimport os\nfor dirname, _, filenames in os.walk('\/kaggle\/input'):\n    for filename in filenames:\n        print(os.path.join(dirname, filename))\n\n# You can write up to 5GB to the current directory (\/kaggle\/working\/) that gets preserved as output when you create a version using \"Save & Run All\" \n# You can also write temporary files to \/kaggle\/temp\/, but they won't be saved outside of the current session","9a5f2046":"url = 'https:\/\/fantasy.premierleague.com\/api\/bootstrap-static\/'\nr = requests.get(url)\njson = r.json()\njson.keys()","1ffa3858":"elements_df = pd.DataFrame(json['elements'])\nelements_types_df = pd.DataFrame(json['element_types'])\nteams_df = pd.DataFrame(json['teams'])","6863566b":"slim_elements_df = elements_df[['second_name','team','element_type','selected_by_percent','now_cost','minutes','transfers_in','value_season','total_points']]\nslim_elements_df.head()","ec46edcd":"slim_elements_df['team'] = slim_elements_df.team.map(teams_df.set_index('id').name)","a73faf30":"slim_elements_df['position'] = slim_elements_df.element_type.map(elements_types_df.set_index('id').singular_name)","b33fd647":"slim_elements_df.head()","49689b2e":"slim_elements_df['value'] = slim_elements_df.value_season.astype(float)","e3f85181":"slim_elements_df.sort_values('total_points',ascending=False).head(10)","88d2a401":"slim_elements_df.pivot_table(index='position',values='value',aggfunc=np.mean).reset_index()","48f3ce1f":"pivot = slim_elements_df.pivot_table(index='position',values='value',aggfunc=np.mean).reset_index()\npivot.sort_values('value',ascending=False)","010821dc":"team_pivot = slim_elements_df.pivot_table(index='team',values='value',aggfunc=np.mean).reset_index()\nteam_pivot.sort_values('value',ascending=False)","02dfdbea":"fwd_df = slim_elements_df.loc[slim_elements_df.position == 'Forward']\nmid_df = slim_elements_df.loc[slim_elements_df.position == 'Midfielder']\ndef_df = slim_elements_df.loc[slim_elements_df.position == 'Defender']\ngoal_df = slim_elements_df.loc[slim_elements_df.position == 'Goalkeeper']","5a4e51fa":"goal_df.value.hist()","46ed5b50":"goal_df.sort_values('value',ascending=False).head(10)","4358ffcf":"fwd_df.sort_values('value',ascending=False).head(10)","38426804":"def_df.sort_values('value',ascending=False).head(10)","fd275cbb":"import matplotlib.pyplot as plt\n\nplt.rcParams.update({'font.size': 12})\nfig, ax = plt.subplots(figsize = (16,8))\nax.plot(team_pivot['team'], team_pivot['value'], color = 'red', marker='o', linewidth='1')\nplt.setp(ax.get_xticklabels(), rotation=90)\nax.set(xlabel=\"Teams\", ylabel=\"Avg. team value\")\n\nfor x,y in zip(team_pivot['team'],team_pivot['value']):\n    label = \"{:.2f}\".format(y)\n    plt.annotate(label,(x,y),textcoords=\"offset points\",xytext=(0,10),ha='center') \nplt.show()","0d6e9dd0":"slim_elements_df.to_csv('..\/file.csv')","7a9f5bee":"Value = Total points \/ Cost","08e8b3b7":"![PL-banner-1024x525.jpeg](https:\/\/www.freesupertips.com\/wp-content\/uploads\/2018\/11\/PL-banner-1024x525.jpeg)"}}