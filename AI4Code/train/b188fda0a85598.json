{"cell_type":{"e29247ab":"code","f53bd620":"code","9ebe7e87":"code","42d1653a":"code","8a0425fd":"code","6b06739f":"code","b662675c":"code","ad570346":"code","deb0bf15":"code","cf31c3e6":"code","738d068c":"code","d2546c2b":"code","63f64078":"code","f9afa153":"code","f5b69ed1":"code","cdc78232":"code","b278f7e3":"code","1f40af88":"code","b83c96d2":"code","0a5e0160":"code","5a1daa90":"code","9c2c09a2":"code","49a2c7d9":"code","29e4fbd2":"code","6c1405f4":"code","cf2d6e67":"code","9b286b6b":"code","0c485ae0":"code","807b3648":"code","dd34efc9":"code","c0760467":"code","26f58400":"code","fb58a556":"code","642eecf4":"code","15eb849c":"code","08a37ecb":"code","8148a913":"code","2e2752bc":"code","2a04b37b":"code","63a4f785":"code","8871de8f":"code","6938a09f":"code","6ab2d701":"code","4ef03581":"code","f9cbde10":"code","73c7ccf4":"code","f0aefb32":"code","3fea1070":"code","87a1f794":"code","e64f898e":"code","c66312a8":"code","6b913514":"code","1a6a5078":"code","73d6d9f3":"code","5f585890":"code","dd5db3bd":"code","0e290562":"code","2f725004":"code","b701d73f":"code","b67c2373":"code","3636dcb9":"code","d9f1e483":"code","eebe0102":"code","1e993784":"code","69ed9923":"code","0c740038":"code","d6a97a94":"code","b0bacd59":"markdown"},"source":{"e29247ab":"# This Python 3 environment comes with many helpful analytics libraries installed\n# It is defined by the kaggle\/python docker image: https:\/\/github.com\/kaggle\/docker-python\n# For example, here's several helpful packages to load in \n\nimport numpy as np # linear algebra\nimport pandas as pd # data processing, CSV file I\/O (e.g. pd.read_csv)\n\n# we are using the inline backend\n%matplotlib inline \n\nimport matplotlib as mpl\nimport matplotlib.pyplot as plt\n\nimport folium\n\n# Input data files are available in the \"..\/input\/\" directory.\n# For example, running this (by clicking run or pressing Shift+Enter) will list all files under the input directory\n'''\nimport os\nfor dirname, _, filenames in os.walk('\/kaggle\/input'):\n    for filename in filenames:\n        print(os.path.join(dirname, filename))\n\n# Any results you write to the current directory are saved as output.\n'''","f53bd620":"# Retriving Dataset\ndf_confirmed = pd.read_csv('https:\/\/raw.githubusercontent.com\/CSSEGISandData\/COVID-19\/master\/csse_covid_19_data\/csse_covid_19_time_series\/time_series_covid19_confirmed_global.csv')\ndf_deaths = pd.read_csv('https:\/\/raw.githubusercontent.com\/CSSEGISandData\/COVID-19\/master\/csse_covid_19_data\/csse_covid_19_time_series\/time_series_covid19_deaths_global.csv')\n\n# Depricated\n# df_recovered = pd.read_csv('https:\/\/raw.githubusercontent.com\/CSSEGISandData\/COVID-19\/master\/csse_covid_19_data\/csse_covid_19_time_series\/time_series_19-covid-Recovered.csv')\ndf_covid19 = pd.read_csv(\"https:\/\/raw.githubusercontent.com\/CSSEGISandData\/COVID-19\/web-data\/data\/cases_country.csv\")","9ebe7e87":"df_confirmed.head()","42d1653a":"df_confirmed.shape","8a0425fd":"df_deaths.head()","6b06739f":"df_deaths.shape","b662675c":"df_covid19.head()","ad570346":"df_covid19.shape","deb0bf15":"df_covid19.set_index('Country_Region',inplace= True)\ndf_covid19.head()","cf31c3e6":"df_covid19.loc[['US', 'India'], :]","738d068c":"world_map = folium.Map(location=[51.000, .1278], zoom_start=2)\n\ndeaths = folium.map.FeatureGroup()\n\n# loop through the 100 crimes and add each to the map\nfor lat, lng, label, country, confirmed in zip(df_covid19.Lat, df_covid19.Long_, df_covid19.Deaths, df_covid19.index.values, df_covid19.Confirmed):\n    folium.CircleMarker(\n        [lat, lng],\n        radius=5, # define how big you want the circle markers to be\n        color='yellow',\n        fill=True,\n        popup=country+' '+str(label)+'\/'+str(confirmed),\n        fill_color='blue',\n        fill_opacity=0.6\n    ).add_to(world_map)\n\nworld_map","d2546c2b":"df_tot = pd.DataFrame(df_covid19[['Confirmed','Deaths', 'Recovered', 'Active']].sum(axis=0))","63f64078":"df_tot.transpose()","f9afa153":"df_tot.transpose().style.background_gradient(cmap='Wistia',axis=1)","f5b69ed1":"df_covid19[['Confirmed','Deaths', 'Recovered', 'Active']].sort_values(by='Confirmed', ascending= False).style.background_gradient(cmap='Wistia',axis=0)","cdc78232":"df_confirmed.head()","b278f7e3":"df_confirmed[df_confirmed['Country\/Region'].str.contains('US')]","1f40af88":"tot_cols = df_confirmed.shape[1]\nprint('Tot cols=', tot_cols)\n\ndt_cols = tot_cols - 4\nprint('Date cols=', dt_cols)\n","b83c96d2":"#df_confirmed.iloc[:, 69]\n#The date column indexes are 4 to tot_cols-1\n\nstart_dt = df_confirmed.columns.values[4]\nend_dt = df_confirmed.columns.values[tot_cols-1]\nprint('Start Dt=', start_dt, ' End Dt=', end_dt)\n\n#Rename the date columns to integer sequence(days from start dt) for easy access\ncols=df_confirmed.columns.values\n#print(cols[0:5])\nnew_cols = list(cols[0:4]) + list(map(str, range(dt_cols)))\n#print(new_cols)\n#print(len(new_cols))\n\ndf_confirmed.columns = new_cols\nprint(df_confirmed.shape)","0a5e0160":"import os\n#os.remove(\"\/kaggle\/working\/top6-10.png\")","5a1daa90":"df_confirmed1 = df_confirmed.groupby('Country\/Region').sum(axis=0)\n#Lat and Long too got summed up..so not to use from here\n","9c2c09a2":"#Sort by the last column i.e. latest total\ntop5=df_confirmed1.sort_values(new_cols[-1]).tail()\n\ntop5_t = top5[list(list(map(str, range(dt_cols))))].transpose()\n\ntop5_t.plot(kind='line', figsize=(10, 6))\n#plt.ylim(0, 100000)\n#y_ticks = list(range(0, 100000, 5000))\n#plt.yticks(y_ticks)\n#plt.xticks(dates1) \n#plt.xticks(y_ticks) \n#plt.xticks(list(np.arange(0,len(d),int(len(d)\/5))),d[:-1:int(len(d)\/5)]+[d[-1]])\nplt.title('COVID-19 confirmed cases of Top 5 countries')\nplt.xlabel('Days (from 1\/22\/20 to ' + end_dt+')')\nplt.ylabel('Confirmed Cases')\n\n\n# Reference lines \n#threshold = 10000\nx1 = [40,57]\ny1 = [0, 131071]\nplt.plot(x1,y1,\"--\",linewidth =2,color = \"gray\")\nplt.annotate(\"Doubles\/Day\",xy=(52,130000),fontsize=10,alpha = 0.5, rotation=60.01)\n\nx2 = [40,73]\ny2 = [0, 131072]\nplt.annotate(\"Doubles\/2nd Day\",xy=(60,115000),fontsize=10,alpha = 0.5, rotation=46.00)\nplt.plot(x2,y2,\"--\",linewidth =2,color = \"gray\")\n\n\nplt.grid(True)\nplt.savefig('confirm_top5.jpg')\n\nplt.show()\n","49a2c7d9":"x = [0,17]\n#y = 2**(x+np.log2(threshold))\nlist(map(lambda x1 : 2**x1, x))\n","29e4fbd2":"#Top from 6 to 10 countries\n#Sort by the last column i.e. latest total\ntop5=df_confirmed1.sort_values(new_cols[-1]).tail(10).head()\n#top5\n\ntop5_t = top5[list(list(map(str, range(dt_cols))))].transpose()\ntop5_t.plot(kind='line', figsize=(10, 6))\n#plt.ylim(0, 100000)\n#y_ticks = list(range(0, 100000, 5000))\n#plt.yticks(y_ticks)\n#plt.xticks(dates1) \n#plt.xticks(y_ticks) \n#plt.xticks(list(np.arange(0,len(d),int(len(d)\/5))),d[:-1:int(len(d)\/5)]+[d[-1]])\nplt.title('COVID-19 confirmed cases of from #6 to #10 countries')\nplt.xlabel('Days (from 1\/22\/20 to ' + end_dt+')')\nplt.ylabel('Confirmed Cases')\nplt.grid(True)\nplt.savefig('confirm_top6_10.png')\n\nplt.show()\n","6c1405f4":"#select countries of interest\nsel_countries = df_confirmed1.loc[['India','Pakistan', 'Bangladesh', 'Sri Lanka', 'Burma', 'Nepal']]\n\ntop5_t = sel_countries[list(map(str, range(dt_cols)))].transpose()\ntop5_t.plot(kind='line', figsize=(10, 6))\n#plt.ylim(0, 100000)\n#y_ticks = list(range(0, 100000, 5000))\n#plt.yticks(y_ticks)\n#plt.xticks(dates1) \n#plt.xticks(y_ticks) \n#plt.xticks(list(np.arange(0,len(d),int(len(d)\/5))),d[:-1:int(len(d)\/5)]+[d[-1]])\nplt.title('COVID-19 confirmed cases - India and neighbors')\nplt.xlabel('Days (from 1\/22\/20 to ' + end_dt+')')\nplt.ylabel('Confirmed Cases')\nplt.grid(True)\nplt.savefig('confirm_india.png')\n\nplt.show()\n","cf2d6e67":"#df_confirmed.iloc[:, 69]\n#The date column indexes are 4 to tot_cols-1\n'''\nAs the df_death and df_confirmed have same structure will use the columns from df_confirmed\n\nstart_dt = df_confirmed.columns.values[4]\nend_dt = df_confirmed.columns.values[tot_cols-1]\nprint('Start Dt=', start_dt, ' End Dt=', end_dt)\n\n#Rename the date columns to integer sequence(days from start dt) for easy access\ncols=df_confirmed.columns.values\n#print(cols[0:5])\nnew_cols = list(cols[0:4]) + list(map(str, range(dt_cols)))\n#print(new_cols)\n#print(len(new_cols))\n'''\ndf_deaths.columns = new_cols\nprint(df_deaths.shape)","9b286b6b":"df_deaths.head()","0c485ae0":"df_death1 = df_deaths.groupby('Country\/Region').sum(axis=0)\n#Lat and Long too got summed up..so not to use from here\n\n#Sort by the last column i.e. latest total\ntop5=df_death1.sort_values(new_cols[-1]).tail()\n\ntop5_t = top5[list(list(map(str, range(dt_cols))))].transpose()\n\ntop5_t.plot(kind='line', figsize=(10, 6))\n#plt.ylim(0, 100000)\n#y_ticks = list(range(0, 100000, 5000))\n#plt.yticks(y_ticks)\n#plt.xticks(dates1) \n#plt.xticks(y_ticks) \n#plt.xticks(list(np.arange(0,len(d),int(len(d)\/5))),d[:-1:int(len(d)\/5)]+[d[-1]])\nplt.title('COVID-19 deaths in top 5 countries')\nplt.xlabel('Days (from 1\/22\/20 to ' + end_dt+')')\nplt.ylabel('Deaths')\nplt.grid(True)\nplt.savefig('death_count_top5.jpg')\n\nplt.show()\n","807b3648":"top5.head()","dd34efc9":"#Sort by the last column i.e. latest total\ntop5=df_death1.sort_values(new_cols[-1]).tail(10).head()\n\ntop5_t = top5[list(list(map(str, range(dt_cols))))].transpose()\n\ntop5_t.plot(kind='line', figsize=(10, 6))\n#plt.ylim(0, 100000)\n#y_ticks = list(range(0, 100000, 5000))\n#plt.yticks(y_ticks)\n#plt.xticks(dates1) \n#plt.xticks(y_ticks) \n#plt.xticks(list(np.arange(0,len(d),int(len(d)\/5))),d[:-1:int(len(d)\/5)]+[d[-1]])\nplt.title('COVID-19 deaths in top #6-#10 countries')\nplt.xlabel('Days (from 1\/22\/20 to ' + end_dt+')')\nplt.ylabel('Deaths')\nplt.grid(True)\nplt.savefig('death_count_top6_10.jpg')\n\nplt.show()\n","c0760467":"#Sort by the last column i.e. latest total\ntop5=df_death1.loc[['India','Pakistan', 'Bangladesh', 'Sri Lanka', 'Burma', 'Nepal']]\n\ntop5_t = top5[list(list(map(str, range(dt_cols))))].transpose()\n\ntop5_t.plot(kind='line', figsize=(10, 6))\n#plt.ylim(0, 100000)\n#y_ticks = list(range(0, 100000, 5000))\n#plt.yticks(y_ticks)\n#plt.xticks(dates1) \n#plt.xticks(y_ticks) \n#plt.xticks(list(np.arange(0,len(d),int(len(d)\/5))),d[:-1:int(len(d)\/5)]+[d[-1]])\nplt.title('COVID-19 deaths in India and neighboring countries')\nplt.xlabel('Days (from 1\/22\/20 to ' + end_dt+')')\nplt.ylabel('Deaths')\nplt.grid(True)\nplt.savefig('death_count_india.jpg')\n\nplt.show()\n","26f58400":"#Join df_confirmed1 and df_death1\ndf_merge=pd.merge(left=df_confirmed1, right=df_death1, on = 'Country\/Region')\n#df_merge.head()\n\n#df_top5_ratio = df_merge.sort_values(new_cols[-1]+'_x').tail(10)\ndf_top5_ratio = df_merge.sort_values(new_cols[-1]+'_x')\ndf_top5_ratio.head()","fb58a556":"\n#for col in map(str, list(range(dt_cols))):\n#df_ratio = pd.DataFrame(columns=new_cols)\n\nfor col in map(str, list(range(0, dt_cols))):\n    #print(df_top5_ratio[col+'_y'], \" \/ \", df_top5_ratio[col+'_x'])\n    #print(df_top5_ratio[col+'_y']\/df_top5_ratio[col+'_x'])\n    df_top5_ratio[col] = df_top5_ratio[col+'_y']\/df_top5_ratio[col+'_x']\n\ndf_top5_ratio.fillna(0, inplace=True)\n\ndf_top5_ratio[df_top5_ratio>0.25] = 0.000\n\ndf_top5_ratio1 = df_top5_ratio.loc[:, list(map(str, range(dt_cols)))].round(3)\n\ndf_top5_ratio1.loc[:, list(map(str, range(dt_cols)))]\n\n","642eecf4":"#Death ratio of top 5 countries\n\ntop5_t = df_top5_ratio1.tail()\ntop5_t = top5_t.transpose()\n\ntop5_t.plot(kind='line', figsize=(10, 6))\n#plt.ylim(0, 100000)\n#y_ticks = list(range(0, 100000, 5000))\n#plt.yticks(y_ticks)\n#plt.xticks(dates1) \n#plt.xticks(y_ticks) \n#plt.xticks(list(np.arange(0,len(d),int(len(d)\/5))),d[:-1:int(len(d)\/5)]+[d[-1]])\nplt.title('COVID-19 death ratio wrt confirmed cases in top 5 countries')\nplt.xlabel('Days (from 1\/22\/20 to ' + end_dt+')')\nplt.ylabel('Death Ratio')\nplt.grid(True)\nplt.savefig('death_ratio_top5.jpg')\n\nplt.show()\n","15eb849c":"#Death ratio of top #6 to #10 countries\n\ntop5_t = df_top5_ratio1.tail(10).head()\ntop5_t = top5_t.transpose()\n\ntop5_t.plot(kind='line', figsize=(10, 6))\n#plt.ylim(0, 100000)\n#y_ticks = list(range(0, 100000, 5000))\n#plt.yticks(y_ticks)\n#plt.xticks(dates1) \n#plt.xticks(y_ticks) \n#plt.xticks(list(np.arange(0,len(d),int(len(d)\/5))),d[:-1:int(len(d)\/5)]+[d[-1]])\nplt.title('COVID-19 death ratio wrt confirmed cases in top #6 to #10 countries')\nplt.xlabel('Days (from 1\/22\/20 to ' + end_dt+')')\nplt.ylabel('Death Ratio')\nplt.grid(True)\nplt.savefig('death_ratio_top6_10.jpg')\n\nplt.show()\n","08a37ecb":"#Death ratio of India and neighboring countries\n\ntop5_t = df_top5_ratio1.loc[['India','Pakistan', 'Bangladesh', 'Sri Lanka', 'Burma', 'Nepal']]\ntop5_t = top5_t.transpose()\n\ntop5_t.plot(kind='line', figsize=(10, 6))\n#plt.ylim(0, 100000)\n#y_ticks = list(range(0, 100000, 5000))\n#plt.yticks(y_ticks)\n#plt.xticks(dates1) \n#plt.xticks(y_ticks) \n#plt.xticks(list(np.arange(0,len(d),int(len(d)\/5))),d[:-1:int(len(d)\/5)]+[d[-1]])\nplt.title('COVID-19 death ratio wrt confirmed cases in India and neighboring countries')\nplt.xlabel('Days (from '+start_dt+' to ' + end_dt+')')\nplt.ylabel('Death Ratio')\nplt.grid(True)\nplt.savefig('death_ratio_India.jpg')\n\nplt.show()\n","8148a913":"# Retriving Dataset\ndf_confirmed = pd.read_csv('https:\/\/raw.githubusercontent.com\/CSSEGISandData\/COVID-19\/master\/csse_covid_19_data\/csse_covid_19_time_series\/time_series_covid19_confirmed_global.csv')\ndf_deaths = pd.read_csv('https:\/\/raw.githubusercontent.com\/CSSEGISandData\/COVID-19\/master\/csse_covid_19_data\/csse_covid_19_time_series\/time_series_covid19_deaths_global.csv')","2e2752bc":"df_confirmed.head()","2a04b37b":"del df_confirmed2","63a4f785":"tot_cols = df_confirmed.shape[1]\nprint('Tot cols=', tot_cols)\n\ndt_cols = tot_cols - 4\nprint('Date cols=', dt_cols)\n\nstart_dt = df_confirmed.columns.values[4]\nend_dt = df_confirmed.columns.values[tot_cols-1]\nprint('Start Dt=', start_dt, ' End Dt=', end_dt)\n\n#Rename the date columns to integer sequence(days from start dt) for easy access\ncols=df_confirmed.columns.values\n#print(cols[0:5])\nnew_cols = list(cols[0:4]) + list(map(str, range(dt_cols)))\nprint(new_cols)\n#print(len(new_cols))\n\n#df_confirmed.columns = new_cols\n#print(df_confirmed.shape)\n","8871de8f":"import datetime","6938a09f":"numdays=30\nbase = datetime.datetime.today()\ndate_list = [base - datetime.timedelta(days=x) for x in range(numdays)]\ndate_list","6ab2d701":"from datetime import datetime","4ef03581":"datelist = pd.date_range(start=\"2020-01-22\",end=\"2020-02-22\").tolist()\ndatelist","f9cbde10":"dts_delete=[date.strftime(\"%-m\/%-d\/%y\") for date in datelist]","73c7ccf4":"df_confirmed2 = df_confirmed.drop(dts_delete, 1)\ndf_confirmed2.head()","f0aefb32":"tot_cols = df_confirmed2.shape[1]\nprint('Tot cols=', tot_cols)\n\ndt_cols = tot_cols - 4\nprint('Date cols=', dt_cols)\n\nstart_dt = df_confirmed2.columns.values[4]\nend_dt = df_confirmed2.columns.values[tot_cols-1]\nprint('Start Dt=', start_dt, ' End Dt=', end_dt)\n\n#Rename the date columns to integer sequence(days from start dt) for easy access\ncols=df_confirmed2.columns.values\n#print(cols[0:5])\nnew_cols = list(cols[0:4]) + list(map(str, range(dt_cols)))\n#print(new_cols)\n#print(len(new_cols))\n\ndf_confirmed2.columns = new_cols\nprint(df_confirmed.shape)","3fea1070":"df_confirmed2.head()","87a1f794":"df_confirmed2['0dcount'] = df_confirmed2['0']  # First cols has base value\nfor col in map(str, list(range(1, dt_cols))):\n    #print(df_top5_ratio[col+'_y'], \" \/ \", df_top5_ratio[col+'_x'])\n    #print(df_top5_ratio[col+'_y']\/df_top5_ratio[col+'_x'])\n    #df_top5_ratio[col] = df_top5_ratio[col+'_y']\/df_top5_ratio[col+'_x']\n    #print(df_confirmed2[col].head())\n    #df_confirmed2[col+'dcount'] = df_confirmed2[]\n    df_confirmed2[col+'dcount'] = df_confirmed2[col]-df_confirmed2[str(int(col)-1)]\ndf_confirmed2.head()","e64f898e":"#delete original cumulative total cols\ndf_confirmed3 = df_confirmed2.drop(list(map(str, range(dt_cols))), 1)\ndf_confirmed3.head()","c66312a8":"df_confirmed3 = df_confirmed3.groupby('Country\/Region').sum(axis=0)\ndf_confirmed3.head()","6b913514":"list(map(str, range(dt_cols)))","1a6a5078":"#Death ratio of India and neighboring countries\n\nmy_countries = df_confirmed3.loc[['India','US', 'Italy', 'Spain']]\n#my_countries = df_confirmed3.loc[['Italy','India']]\nmy_countries = my_countries.drop(['Lat', 'Long'], 1)\nmy_countries.columns = list(map(str, range(dt_cols)))\nmy_countries = my_countries.transpose()\n\nsel={'US':0, 'Italy':1, 'India':2,  'Spain':3}\nfor k in sel:\n    f = plt.figure(sel[k])\n    my_countries[k].plot(kind='bar', figsize=(10, 6))\n    plt.title('COVID-19 daily confirmed counts of select countries - '+k)\n    plt.xlabel('Days (from '+start_dt+' to ' + end_dt+')')\n    plt.ylabel('Confirmed Counts')\n    plt.grid(True)\n    plt.savefig('daily_bar_'+k+'.png')\n    f.show()\n#plt.savefig('death_ratio_India.jpg')\n\n#plt.show()\n","73d6d9f3":"df_confirmed[df_confirmed.iloc[:, 0].notnull()]","5f585890":"df_confirmed.set_index('Country\/Region', inplace=True)\ndf_confirmed.head()","dd5db3bd":"df_sel=df_confirmed.loc[['China', 'Italy', 'Spain', 'India'], :].groupby(['Country\/Region']).sum(axis=0)\ndf_sel.head(50)","0e290562":"#df_confirmed.drop('Province\/State', axis=1, inplace=True)\n#df_confirmed.head()","2f725004":"df_sel.drop(['Lat', 'Long'], axis=1, inplace=True)\ndf_sel.head()","b701d73f":"df_sel = df_sel.transpose()\ndf_sel.head()","b67c2373":"print ('Matplotlib version: ', mpl.__version__) ","3636dcb9":"mpl.style.use(['ggplot'])","d9f1e483":"df_sel.dtypes","eebe0102":"type(df_sel)","1e993784":"dates = list(map(str, pd.date_range(start=\"2020-01-21\",end=\"2020-03-28\")))\ndates1 = list(map(lambda x:str(int(x[5:7]))+'\/'+str(int(x[8:10]))+'\/'+'20', dates))\ndates1[0:5]","69ed9923":"df_sel.plot(kind='line', figsize=(14, 8))\n#plt.ylim(0, 100000)\ny_ticks = list(range(0, 100000, 5000))\nplt.yticks(y_ticks)\n#plt.xticks(dates1) \n#plt.xticks(y_ticks) \nplt.xticks(list(np.arange(0,len(d),int(len(d)\/5))),d[:-1:int(len(d)\/5)]+[d[-1]])\nplt.title('COVID-19 of selected countries')\nplt.xlabel('Dates')\nplt.ylabel('Confirmed Cases')\nplt.show()","0c740038":"from datetime import datetime, timedelta,date","d6a97a94":"d = [datetime.strptime(date,'%m\/%d\/%y').strftime(\"%d %b\") for date in df_sel.index]\nd[0:6]","b0bacd59":"## Cell below are not used"}}