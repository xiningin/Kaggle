{"cell_type":{"3054ed91":"code","1838981e":"code","8e1ad2e2":"code","abd8c639":"code","a42d291f":"code","0ceaa069":"code","8c392af5":"code","a6843bf7":"code","110468bb":"code","35bcbfe9":"code","c25e8343":"code","10bd716a":"code","592b5727":"code","aa320317":"code","f760bbcc":"code","51abe17f":"code","7aa82b32":"code","23e489a9":"code","833ab8be":"code","eaeda317":"code","d6e6b4be":"code","0d9858ee":"code","a493eb2d":"code","fbc5028a":"code","a8e4f920":"code","77ebba7c":"code","88be581a":"code","36472952":"code","df97f090":"code","df76a32a":"code","4ec7e681":"code","074a51f0":"code","c6df4d8b":"code","1b2530a6":"code","893021d9":"code","3da282b3":"code","9ca1a866":"code","c4ebcfa0":"code","669fdc52":"code","84f7bf18":"code","3020ad76":"code","fb6aeb5f":"code","47e49b80":"code","77ff492a":"code","cc387444":"code","5ee67f6e":"code","6dcf9e74":"code","9f0ecc5a":"code","32cd4248":"markdown","1cacdae7":"markdown","f31416e2":"markdown"},"source":{"3054ed91":"import pandas as pd\nimport numpy as np\nimport plotly.express as px\nfrom string import punctuation","1838981e":"transaction_data = pd.read_excel('https:\/\/insidesherpa.s3.amazonaws.com\/vinternships\/companyassets\/32A6DqtsbF7LbKdcq\/QVI_transaction_data.xlsx')","8e1ad2e2":"customer_data = pd.read_csv('https:\/\/insidesherpa.s3.amazonaws.com\/vinternships\/companyassets\/32A6DqtsbF7LbKdcq\/QVI_purchase_behaviour.csv')","abd8c639":"transaction_data.head(5)","a42d291f":"transaction_data.info()","0ceaa069":"transaction_data.describe()","8c392af5":"transaction_data['DATE'] = pd.to_datetime(transaction_data['DATE'],errors='coerce',unit='d',origin='1900-01-01')","a6843bf7":"transaction_data['PROD_NAME'].value_counts()","110468bb":"chips = transaction_data[transaction_data['PROD_NAME'].str.contains('Salsa') == False].copy()","35bcbfe9":"chips.head(5)","c25e8343":"def remove_punc_digit_no_g(val):\n    val = [v for v in val if v not in punctuation]\n    result = ''.join([i for i in val if not i.isdigit()])\n    final = ''.join([e for e in result if e.isalnum() or e == ' '])\n    return final.replace('g','')","10bd716a":"chips['PROD_NAME'].apply(lambda x:remove_punc_digit_no_g(x)).str.split(expand=True).stack().value_counts()","592b5727":"def remove_punc_digit(val):\n    val = [v for v in val if v not in punctuation]\n    result = ''.join([i for i in val if not i.isdigit()])\n    final = ''.join([e for e in result if e.isalnum() or e == ' '])\n    return final","aa320317":"chips['PROD_NAME'] = chips['PROD_NAME'].apply(lambda x:remove_punc_digit(x))","f760bbcc":"chips.describe()","51abe17f":"chips[chips['PROD_QTY'] == 200]","7aa82b32":"chips[chips['LYLTY_CARD_NBR'] == 226000]","23e489a9":"final = chips[chips['LYLTY_CARD_NBR'] != 226000]","833ab8be":"customer_data.info()","eaeda317":"#merged = pd.merge(customer_data,transaction_data,on='LYLTY_CARD_NBR')","d6e6b4be":"bydate = final.groupby('DATE')[['TXN_ID']].count().reset_index()","0d9858ee":"bydate","a493eb2d":"fig = px.line(bydate,bydate['DATE'],bydate['TXN_ID'])\nfig.update_layout(title='Transactions over time',title_x=0.5)","fbc5028a":"december = bydate[bydate['DATE'].isin(list(bydate['DATE'][151:181]))]\nfig = px.bar(december,december['DATE'],december['TXN_ID'])\nfig.update_layout(title='Transactions of December 2018',title_x=0.5)","a8e4f920":"def pack_size(inp):\n    inp = ''.join([x for x in inp if x.isdigit()]) \n    return str(inp + 'g')","77ebba7c":"transaction_data['Pack Size'] = transaction_data['PROD_NAME'].apply(lambda d:pack_size(d))","88be581a":"transaction_data['Pack Size'].value_counts()","36472952":"transaction_data.head(5)","df97f090":"fig = px.histogram(transaction_data['Pack Size'])\nfig.update_layout(title='Histogram of Transaction Data',title_x=0.5)","df76a32a":"transaction_data['Brand Name'] = transaction_data['PROD_NAME'].str.split().apply(lambda x:x[0])\ntransaction_data['Brand Name'] = transaction_data['Brand Name'].replace('Red','RRD')\ntransaction_data['Brand Name'] = transaction_data['Brand Name'].replace('SNBTS','SUNBITES')\ntransaction_data['Brand Name'] = transaction_data['Brand Name'].replace('infzns','Infuzions')\ntransaction_data['Brand Name'] = transaction_data['Brand Name'].replace('WW','woolworths')\ntransaction_data['Brand Name'] = transaction_data['Brand Name'].replace('Smith','Smiths')\ntransaction_data['Brand Name'] = transaction_data['Brand Name'].replace('NCC','Natural')\ntransaction_data['Brand Name'] = transaction_data['Brand Name'].replace('Dorito','Doritos')\ntransaction_data['Brand Name'] = transaction_data['Brand Name'].replace('Grain','GrnWves')\ntransaction_data['Brand Name'].value_counts()\n\n\n#bypack = cleaned.groupby('Pack Size')[['TXN_ID']].count().reset_index()","4ec7e681":"customer_data.info()","074a51f0":"customer_data.describe()","c6df4d8b":"customer_data['LIFESTAGE'].value_counts()","1b2530a6":"customer_data['PREMIUM_CUSTOMER'].value_counts()","893021d9":"merged = pd.merge(transaction_data,customer_data,on='LYLTY_CARD_NBR')\nmerged.isnull().sum()","3da282b3":"byc = merged.groupby(['LIFESTAGE','PREMIUM_CUSTOMER'])[['TOT_SALES']].sum().reset_index()","9ca1a866":"fig = px.bar(byc,byc['LIFESTAGE'],byc['TOT_SALES'],byc['PREMIUM_CUSTOMER'],text=(byc['TOT_SALES']))\nfig.update_traces(texttemplate='%{text:.2s}', textposition='outside')\nfig.update_layout(title='Proportion of Sales',title_x=0.5)\n\nfig.show()","c4ebcfa0":"byc = merged.groupby(['LIFESTAGE','PREMIUM_CUSTOMER'])[['LYLTY_CARD_NBR']].count().reset_index()","669fdc52":"fig = px.bar(byc,byc['LIFESTAGE'],byc['LYLTY_CARD_NBR'].unique(),byc['PREMIUM_CUSTOMER'],text=byc['LYLTY_CARD_NBR'].unique())\nfig.update_traces(texttemplate='%{text:.2s}', textposition='outside')\nfig.update_layout(title='Proportion of Customers',title_x=0.5)\nfig.show()","84f7bf18":"unique_cust = merged[merged['LYLTY_CARD_NBR'].isin(list(pd.unique(merged['LYLTY_CARD_NBR'])))].copy()\nbyc = unique_cust.groupby(['LIFESTAGE','PREMIUM_CUSTOMER'])[['PROD_QTY','LYLTY_CARD_NBR']].sum().reset_index()\nbyc['AVG'] = byc['PROD_QTY'] \/ byc['LYLTY_CARD_NBR']","3020ad76":"fig = px.bar(byc,byc['LIFESTAGE'],byc['AVG'],byc['PREMIUM_CUSTOMER'])\n# Change the bar mode\nfig.update_layout(barmode='group',title='AVG Units per customer',title_x=0.5)\nfig.show()","fb6aeb5f":"byc = merged.groupby(['LIFESTAGE','PREMIUM_CUSTOMER'])[['TOT_SALES','PROD_QTY']].sum().reset_index()\nbyc['AVG'] = byc['TOT_SALES'] \/ byc['PROD_QTY']","47e49b80":"fig = px.bar(byc,byc['LIFESTAGE'],byc['AVG'],byc['PREMIUM_CUSTOMER'])\nfig.update_layout(barmode='group',title='AVG Sales per Unit',title_x=0.5)\nfig.show()","77ff492a":"import scipy.stats","cc387444":"merged['PricePerUnit'] = merged['TOT_SALES'] \/ merged['PROD_QTY']","5ee67f6e":"filter1 = merged[(merged['LIFESTAGE'].isin([\"YOUNG SINGLES\/COUPLES\", \"MIDAGE SINGLES\/COUPLES\"]))  & (merged['PREMIUM_CUSTOMER'] == 'Mainstream')]\nfilter2 = merged[(merged['LIFESTAGE'].isin([\"YOUNG SINGLES\/COUPLES\", \"MIDAGE SINGLES\/COUPLES\"]))  & (merged['PREMIUM_CUSTOMER'] != 'Mainstream')]","6dcf9e74":"filter2","9f0ecc5a":"scipy.stats.ttest_ind(filter1['PricePerUnit'],filter2['PricePerUnit'])","32cd4248":"<h1 style='text-align: center'> Quantium Data Analytics<\/h1>","1cacdae7":"[InsideSherpa](https:\/\/www.insidesherpa.com) is a company that has partnered with big corporations such as KPMG,Deloitte,Quantium and Commonwealth Bank. In doing this, they offer virtual work experiences in fields such as:\n\ndata analytics,\ndata science,cloud,\nsoftware engineering\nand much more. \n\nThey recently teamed up with Quantium to and introduced a virtual data analytics internship. For anybody interseted, please check out [this](https:\/\/www.insidesherpa.com\/virtual-internships\/prototype\/NkaC7knWtjSbi6aYv\/Data%20Analytics%20Virtual%20Experience%20Program) link","f31416e2":"For the first module, the task was to analyse customer transaction data and customer purchase behaviour. This is just a taster of the fun and challenging tasks that one will expect to find in the Internship. I hope you enjoy this kernel and please upvote, as I am one bronze medal away from being a kaggle expert!"}}