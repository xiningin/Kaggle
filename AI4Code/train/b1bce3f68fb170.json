{"cell_type":{"b8947cfe":"code","d57fe018":"code","723d384e":"code","d3cd65b7":"code","109707c0":"code","b86fe550":"code","95efe1bc":"code","463d0186":"code","a5cc5f6d":"code","1632f1c9":"code","8adc9225":"code","6f6f6fe5":"code","39467867":"code","a24d72e7":"code","6e487682":"code","8d16f816":"code","32bcd212":"code","68d8e1bd":"code","8d9d7d49":"code","90fe6688":"code","172ac505":"code","4cb43e0f":"code","57ae0aab":"code","2768f2ab":"code","84bc6fc6":"code","70a58d97":"code","6b900235":"code","4232b3a5":"code","de797477":"code","6bed72b9":"code","7110065c":"code","80120416":"code","1fef1b52":"code","2a988d03":"code","66bf0af9":"code","50a40ecc":"code","d9ceefbe":"code","217fcf3e":"code","4b97e39f":"code","aa8f88a4":"code","d111be00":"code","1b06ae90":"markdown","1c00c2b4":"markdown","21d572d2":"markdown","55adef0c":"markdown","e9c932ac":"markdown","083364e8":"markdown","184b768c":"markdown","22a82c94":"markdown","a166a70a":"markdown","cdb3f67d":"markdown","7fa99f09":"markdown","64fc5974":"markdown","c4f1a2c9":"markdown","bb30f713":"markdown","84f5c76d":"markdown","c9e71f50":"markdown","b75869ec":"markdown","ee5c6b14":"markdown","7649eb80":"markdown","7374a0c6":"markdown","578dc56c":"markdown","24247935":"markdown","fa95cdc7":"markdown","f954d2ed":"markdown","b126c139":"markdown","8c050b03":"markdown","a5ebd8bc":"markdown","a5aa9592":"markdown","6f839d91":"markdown","c948e8f0":"markdown"},"source":{"b8947cfe":"import ast\nimport numpy as np \nimport pandas as pd\nimport matplotlib.pyplot as plt\n%matplotlib inline\nimport seaborn as sns\nfrom wordcloud import WordCloud, STOPWORDS\n\nimport warnings\nwarnings.filterwarnings(\"ignore\")","d57fe018":"df = pd.read_csv('..\/input\/ted-talks\/ted_main.csv')\ndf.columns","723d384e":"df.head()","d3cd65b7":"# Convert film date and published date to human readable format\ndf['film_date'] = pd.to_datetime(df['film_date'],unit='s')\ndf['published_date'] = pd.to_datetime(df['published_date'],unit='s')","109707c0":"df.head()","b86fe550":"df['speaker_occupation'].fillna('', inplace=True)\ndf.info()","95efe1bc":"df.describe()","463d0186":"# Check for correlation between the numerical variables.\nsns.heatmap(df.corr(), annot=True)","a5cc5f6d":"unpopular_talks = df[['title', 'main_speaker', 'published_date', 'views', 'comments', 'ratings']].sort_values('views')[:15].reset_index(drop=True)\nunpopular_talks","1632f1c9":"sns.set_style(\"darkgrid\")\nplt.figure(figsize=(10,6))\nsns.barplot(x=unpopular_talks.index, y='views', data=unpopular_talks)\nplt.xlabel(\"Index\")\n ","8adc9225":"sns.boxplot(y=df.comments)","6f6f6fe5":"# Check author occupation and talk tags to see if there are any insights on why the views are low\nunpopular_talks_occupation = df[['title', 'main_speaker', 'speaker_occupation','tags', 'event', 'views']].sort_values('views')[:15].reset_index(drop=True)\nunpopular_talks_occupation","39467867":"unpopular_talks_occupation['tags'] = unpopular_talks_occupation['tags'].apply(lambda x: ast.literal_eval(x))\ncorpus = ' '\nfor x in unpopular_talks_occupation['tags']:\n    str = ' '.join(x)\n    corpus += ' ' + str","a24d72e7":"wordcloud = WordCloud(stopwords=STOPWORDS, background_color='white',width=2400,height=2000).generate(corpus)\nplt.figure(figsize=(12,15))\nplt.imshow(wordcloud)\nplt.axis('off')\nplt.show()","6e487682":"# convert stringified dictionary into python dictionary\n\nunpopular_talks['eval_ratings'] = unpopular_talks['ratings'].apply(lambda x: eval(x))\ncounter = {'Funny':0, 'Beautiful':0, 'Ingenious':0, 'Courageous':0, 'Longwinded':0, 'Confusing':0, 'Informative':0, 'Fascinating':0, 'Unconvincing':0, 'Persuasive':0, 'Jaw-dropping':0, 'OK':0, 'Obnoxious':0, 'Inspiring':0}\n\nfor i in range(len(unpopular_talks['eval_ratings'])):\n    for j in range(len(unpopular_talks['eval_ratings'][i])):\n        counter[unpopular_talks['eval_ratings'][i][j]['name']] += unpopular_talks['eval_ratings'][i][j]['count']\n    \nfrequencies = list(counter.values())\ndescr = counter.keys()\ndescriptors = [x for _,x in sorted(zip(frequencies,counter.keys()), reverse=True)]\nneg_descriptors = {\"Confusing\", \"Unconvincing\", \"Longwinded\", \"Obnoxious\", \"OK\"}\nneg_indices  = [x for x in range (len(descriptors)) if descriptors[x] in neg_descriptors]\nfrequencies.sort(reverse=True)\nbar_colors = ['blue' if desc not in neg_descriptors else 'red' for desc in descriptors]\nindices = np.arange(len(descriptors))\nbar = sns.barplot(x=indices, y=frequencies, palette=bar_colors)\nplt.xticks(indices, descriptors, rotation=45, ha=\"right\")\nplt.show()","8d16f816":"neg_desc_count = sum([counter[desc] for desc in neg_descriptors])\ntotal_desc_count = sum(frequencies)\nunpopular_talks_pct_negative = 100 * (neg_desc_count \/ total_desc_count)\nunpopular_talks_pct_negative","32bcd212":"df_no_tedex = df[~df['event'].str.contains('TEDx')].sort_values('views')[:15].reset_index(drop=True)\nunpopular_data_no_tedex = df_no_tedex[['title','event', 'main_speaker', 'published_date', 'views', 'tags', 'comments', 'ratings']]\nunpopular_data_no_tedex","68d8e1bd":"df_no_tedex = df[~df['event'].str.contains('TEDx') & ~df['event'].str.contains('TED-Ed')].sort_values('views')[:15].reset_index(drop=True)\nunpopular_data_no_tedex = df_no_tedex[['title','event', 'main_speaker','speaker_occupation', 'film_date','published_date', 'views', 'tags', 'comments', 'ratings']]\nunpopular_data_no_tedex","8d9d7d49":"unpopular_data_no_tedex['year'] = unpopular_data_no_tedex['published_date'].apply(lambda x: x.year)\nyear_df = pd.DataFrame(unpopular_data_no_tedex['year'].value_counts().reset_index())\nyear_df.columns = ['year', 'talks']\n\nplt.figure(figsize=(12,5))\n_ = sns.barplot(x='year', y='talks', data=year_df)\n\n\n","90fe6688":"unpopular_data_no_tedex.speaker_occupation.value_counts()","172ac505":"grid = sns.JointGrid(unpopular_data_no_tedex.index, unpopular_data_no_tedex.comments, space=0, size=6, ratio=50)\ngrid.plot_joint(plt.bar, color=\"y\")\ngrid.ax_joint.plot([0,len(unpopular_data_no_tedex.comments)], [df.comments.median(), df.comments.median()], 'b-', linewidth = 2, label='Overall comments median value')\ngrid.ax_joint.plot([0,len(unpopular_data_no_tedex.comments)], [unpopular_data_no_tedex.comments.mean(), unpopular_data_no_tedex.comments.mean()], 'r-', linewidth = 2, label='Unpopular comments median value')\nplt.xlabel(\"Index\")\n_ = plt.legend()","4cb43e0f":"unpopular_data_no_tedex['tags_converted'] = unpopular_data_no_tedex['tags'].apply(lambda x: ast.literal_eval(x))\ncorpus = ' '\nfor x in unpopular_data_no_tedex['tags_converted']:\n    str = ' '.join(x)\n    corpus += ' ' + str","57ae0aab":"wordcloud = WordCloud(stopwords=STOPWORDS, background_color='white',width=2400,height=2000).generate(corpus)\nplt.figure(figsize=(12,15))\nplt.imshow(wordcloud)\nplt.axis('off')\nplt.show()","2768f2ab":"unpopular_data_no_tedex['eval_ratings'] = unpopular_data_no_tedex['ratings'].apply(lambda x: eval(x))\ncounter = {'Funny':0, 'Beautiful':0, 'Ingenious':0, 'Courageous':0, 'Longwinded':0, 'Confusing':0, 'Informative':0, 'Fascinating':0, 'Unconvincing':0, 'Persuasive':0, 'Jaw-dropping':0, 'OK':0, 'Obnoxious':0, 'Inspiring':0}\n\nfor i in range(len(unpopular_data_no_tedex['eval_ratings'])):\n    for j in range(len(unpopular_data_no_tedex['eval_ratings'][i])):\n        counter[unpopular_data_no_tedex['eval_ratings'][i][j]['name']] += unpopular_talks['eval_ratings'][i][j]['count']\n    \nfrequencies = list(counter.values())\ndescr = counter.keys()\ndescriptors = [x for _,x in sorted(zip(frequencies,counter.keys()), reverse=True)]\nneg_descriptors = {\"Confusing\", \"Unconvincing\", \"Longwinded\", \"Obnoxious\", \"OK\"}\nneg_indices  = [x for x in range (len(descriptors)) if descriptors[x] in neg_descriptors]\nfrequencies.sort(reverse=True)\nbar_colors = ['blue' if desc not in neg_descriptors else 'red' for desc in descriptors]\nindices = np.arange(len(descriptors))\nbar = sns.barplot(x=indices, y=frequencies, palette=bar_colors)\nplt.xticks(indices, descriptors, rotation=45, ha=\"right\")\nplt.show() ","84bc6fc6":"neg_desc_count = sum([counter[desc] for desc in neg_descriptors])\ntotal_desc_count = sum(frequencies)\nunpopular_data_no_tedex_pct_negative = 100 * (neg_desc_count \/ total_desc_count)\nunpopular_data_no_tedex_pct_negative","70a58d97":"plt.figure(figsize=(10,5))\nsns.barplot(x = ['unpopular_talks_pct_negative', 'unpopular_data_no_tedex_pct_negative'], y = [unpopular_talks_pct_negative, unpopular_data_no_tedex_pct_negative])\n_ = plt.ylabel(\"% of negative rating count\")","6b900235":"df['year'] = df['published_date'].apply(lambda x: x.year)\nyear_df = pd.DataFrame(df['year'].value_counts().reset_index())\nyear_df.columns = ['year', 'talks']\n\nplt.figure(figsize=(12,5))\n_ = sns.barplot(x='year', y='talks', data=year_df)","4232b3a5":"views_per_year = df[['year', 'views']].groupby('year').sum().reset_index()\nplt.figure(figsize=(12,5))\n_ = sns.barplot(x='year', y='views', data=views_per_year)","de797477":"df.describe()","6bed72b9":"def cal_neg_rating_ratio(ratings):\n    counter = {'Funny':0, 'Beautiful':0, 'Ingenious':0, 'Courageous':0, 'Longwinded':0, 'Confusing':0, 'Informative':0, 'Fascinating':0, 'Unconvincing':0, 'Persuasive':0, 'Jaw-dropping':0, 'OK':0, 'Obnoxious':0, 'Inspiring':0}\n    neg_descriptors = {\"Confusing\", \"Unconvincing\", \"Longwinded\", \"Obnoxious\", \"OK\"}\n    for rating_list in ratings:\n        counter[rating_list['name']] += rating_list['count']\n    neg_desc_count = sum([counter[desc] for desc in neg_descriptors])\n    total_desc_count = sum(list(counter.values()))\n    unpopular_data_no_tedex_pct_negative = 100 * (neg_desc_count \/ total_desc_count)\n    return unpopular_data_no_tedex_pct_negative\n        \n    ","7110065c":"df['eval_ratings'] = df['ratings'].apply(lambda x: eval(x))","80120416":"df['neg_rating_ratio'] = df.eval_ratings.apply(cal_neg_rating_ratio)","1fef1b52":"large_unpop_df = df[(df.views < df.views.median()) & (df.neg_rating_ratio >= 24) & (~df['event'].str.contains('TEDx') & ~df['event'].str.contains('TED-Ed'))].reset_index(drop=True)","2a988d03":"large_unpop_df.info()","66bf0af9":"large_unpop_df.describe()","50a40ecc":"sns.boxplot(data=large_unpop_df.neg_rating_ratio)","d9ceefbe":"large_unpop_df.sort_values('neg_rating_ratio', ascending=False).iloc[0].description","217fcf3e":"large_unpop_df['tags_converted'] = large_unpop_df['tags'].apply(lambda x: ast.literal_eval(x))\ncorpus = ' '\nfor x in large_unpop_df['tags_converted']:\n    str = ' '.join(x)\n    corpus += ' ' + str","4b97e39f":"wordcloud = WordCloud(stopwords=STOPWORDS, background_color='white',width=2400,height=2000).generate(corpus)\nplt.figure(figsize=(12,15))\nplt.imshow(wordcloud)\nplt.axis('off')\nplt.show()","aa8f88a4":"year_df = pd.DataFrame(large_unpop_df['year'].value_counts().reset_index())\nyear_df.columns = ['year', 'talks']\n\nplt.figure(figsize=(12,5))\n_ = sns.barplot(x='year', y='talks', data=year_df)\n\n\n","d111be00":"occupation_count = large_unpop_df.speaker_occupation.value_counts()[:10]\n\nplt.figure(figsize=(25,5))\nsns.barplot(x=occupation_count.index, y=occupation_count.values)\n_ = plt.ylabel('Number of Occurrences', fontsize=12)","1b06ae90":"**It is clear that the unpopular dataset cleaned of local TED-Ex and TED-Ed talks contains almost twice as much negative ratings as the one containing that data.**","1c00c2b4":"**It will be intresting to check the viewers engagement about these talks. The mean number of comments is 191 with standard deviation of 292. This could mean that the mean value is skewed by outliers (\u0430nd the boxplot confirm that theory). The median number of comments per talk is 119 and I will use this value as representative. The first 4 unpopular talks have rather low viewers engament, reaching only about a third of the median number of comments, while the rest of list have almost 2\/3 of the median ammount of comments for only a 10th of the number of median number of views (1,12e+6), which suggests the the audience is rather involved in discussing those talks. \nIt will be intresiting to see how these unpopular talks are rated.**","21d572d2":"## The total amount of views per year and the amount of published talks in the range 2008-2010 is actually increasing meaning that the talks are getting more popular in general and therefore we cannot relate these statistics to the low amount of views of the unpopular talks happening over that time range.","55adef0c":"We can see that there are some missing values from speaker_occupation column. I will replace it with empty string.","e9c932ac":"## The unpopular talks in terms views and ratings in this dataset are mostly related to fields of technologies, design, culture and global issues.","083364e8":"### Every speaker has different occupation, so no direct connection can be made between unpopularity of a talk and the spearker occupation.","184b768c":"Checking the correlation matrix for numberic features, only medium positive correlation can be seen between views and comments. ","22a82c94":"## Looking at the time frame at which these unpopular videos were published we can see that the majority are between 2007 and 2010, which are again the years in which the world financial crysis was at its spike. ","a166a70a":"#### The talk with lragest negative rating ratio of 81 percent is 'Daniel Libeskind builds on very big ideas. Here, he shares 17 words that underlie his vision for architecture -- raw, risky, emotional, radical -- and that offer inspiration for any bold creative pursuit.'","cdb3f67d":"### I am going to use the median value as a cutoff because the standard deviation is nearly twice as big as the mean value for the views column.","7fa99f09":"**We can see that some of the talks are TED-Ed, which is the Educational program of TED. I am going to filter those out because they aimed at more specific audience which suggests the lesser amount of views. The amount of comments TED-Ed talks have received compared to the rest of the list also suggests that they is more user involvment **","64fc5974":"# From this analysis we can make an assumpion that TED talks published in the years of world crysis in the topics of Technologies, Design, Culture and Global issues given by a speaker with occupation of Designer, Inventor, Artist, Architect or Journalist will not be popular amongst the TED talks audience.","c4f1a2c9":"**Looking at the speaker occupation we can see that each of the authors has different occupation.\nTherefore we cannot say that the speaker occucpation has any effect on the unpoplarity of a talk.**","bb30f713":"# Initial dataset exploration.","84f5c76d":"** Looking at how the ratings are distributed we can see that the negative ones amount to a higher value in compared to the positive ratings.**","c9e71f50":"**But looking at the tags column we can see a pattern - 'TEDx' seems to appear in most of them.\nCreating wordcloud out of the unpopular talks tags we can see that indeed TEDx is the most frequent tag among them followed by music, global issues and disability. The TEDx program is targeting local communities (https:\/\/www.ted.com\/about\/programs-initiatives\/tedx-program) and this can explain the low number of views in our unpopular talks dataframe.**","b75869ec":"## Now I am going to remove the talks associated with TEDx and perform the unpopularity analysis on the rest of the data to see if any of the other features can be related to the popularity of a talk.","ee5c6b14":"Let's see the summary statistics of the numerical colimns.","7649eb80":"## Check which are talks that generated the least number of views and try to investigate on why that happened.\n### For the purpose of the analysis I will use the term \"unpopular\" for the talks that have generated least amount views.","7374a0c6":"#### Wow the median amount of comments for the current unpopular talks list is about a quater or the overall meadian comment value, so this suggests really low user engagement with the list of unpopular talks.","578dc56c":"**We can see that the amount of negative ratings is about 15% of all ratings which can be confirms my hypothesis above.**","24247935":"#### From the topics the ones that stand out are *\"global issues\", \"Africa\", \"compassion\", \"culture\", \"entertainment\", \"technology\".*","fa95cdc7":"### Visulalise the unpopular talks  by views.","f954d2ed":"**Stories of Haiti has the least number of views with only 20 comments. \nFrom the top 15 of least viewed talks it can be seen that the published date been too recent is not the cause of low view count due to the fact that the TED talks data spans to 21st of September 2017. From the 4th talk onward in our unpoplar dataset the number of views increase by very little as it can be observed from the plot (no big spikes in views).\n**","b126c139":"#### Next I will check the topics of the unpopular talks to see if anything stand out.","8c050b03":"**Looking at the raitings of the unpopular talks we can see that they are rather positive, which adds more value to the hypothesis that these talks are unpopular due to the locality of the event they have been presented at.**","a5ebd8bc":"#### The remaining dataset has 205 entries. We can see that on average the median value for the comments is about 70% of the median value for the comments column of the full dataset, so viewers were rather active in discussing the talks. The new column that I have created neg_rating_ratio has mean and median values that are arround 32%-35%. The intresting is that there are outliers which reach 81% negative ratio. Lets see which are those.\n","a5aa9592":"## Looking at the analysis so far one can think that in the years the world Financial crisis of 2007\u20132008, people were not very intrested in watching talks related to global issues, Afrika and compassion.","6f839d91":"#### From the plot we can see that the majority of the unpopular talks were published in 2008 followed by 2010. So the low amount of views on these talks should not be due to them been released too recent or too early in the history of TED talks.","c948e8f0":"## Next I will try to confim the hypothesis about why the videos related to global issues, Afrika and compassion on a larger dataset, containing the talks that have views bellow the median value for the entire dataset and negative ratings ratio equal or larger than 24% - which is the value calculated over the 15 most unpopular talks and have local and education events filtered out."}}