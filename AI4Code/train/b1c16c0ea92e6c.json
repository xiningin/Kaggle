{"cell_type":{"bbf66435":"code","197aeb49":"code","69c24e2d":"code","94946e8a":"code","3de7bc3b":"code","3dce240d":"code","12d52aa0":"code","d37e7d92":"code","a2d9e3d4":"code","6bf767ab":"code","2f89ccb6":"code","068b5efc":"code","b0e838cc":"code","72f55a2c":"code","a436bbc0":"code","1c3c07df":"code","10cd8934":"code","41b93dc6":"code","c20aa186":"code","e38304e4":"code","7ba8579e":"code","0742475a":"code","e466bc85":"code","36b48116":"code","2efd0f96":"code","bd1ef375":"code","8d7c7fc7":"markdown","a188ab6a":"markdown","15b34319":"markdown","7ab1c3a5":"markdown","a7d442bb":"markdown","83a3b85a":"markdown","b4309f29":"markdown","ce37e25f":"markdown","f9fa853d":"markdown","6a413e04":"markdown","f64c95a0":"markdown","d44a5750":"markdown","52efca0d":"markdown","a0044e94":"markdown","7e418417":"markdown","af9aa0e9":"markdown","ca59293a":"markdown"},"source":{"bbf66435":"import pandas as pd\nimport glob\nimport os\n\nfrom plotly.offline import download_plotlyjs, init_notebook_mode, plot, iplot\nimport plotly as py\nimport plotly.graph_objs as go\nimport seaborn as sns\n\nimport matplotlib.pyplot as plt\nimport plotly.express as px\n\ninit_notebook_mode(connected=True) ","197aeb49":"all_files = glob.glob(\"..\/input\/learnplatform-covid19-impact-on-digital-learning\/engagement_data\/*.csv\")\nengagments=[]\nfor i in all_files:\n    try:\n        engagement_frame=pd.read_csv(i)\n    except FileNotFoundError:\n        print(\"File Not Found\")\n    except:\n        print(\"Error Reading CSV\")       \n    engagement_frame[\"district_id\"]=os.path.splitext(os.path.basename(i))[0]\n    engagments.append(engagement_frame)\nengagements_frame=pd.concat(engagments)","69c24e2d":"del engagments","94946e8a":"engagements_frame.head()","3de7bc3b":"districts_info_frame=pd.read_csv('..\/input\/learnplatform-covid19-impact-on-digital-learning\/districts_info.csv')","3dce240d":"districts_info_frame.head(3)","12d52aa0":"products_info_frame=pd.read_csv(\"..\/input\/learnplatform-covid19-impact-on-digital-learning\/products_info.csv\")","d37e7d92":"def piePlot(data,title,legend):\n    plt=go.Pie(labels=data.index,values=data.values)\n    fig = go.Figure(data=plt)\n    fig.update_layout(\n    title=title,\n    legend_title=legend,\n    font=dict(\n        family=\"Roboto, monospace\",\n        size=18,\n        color=\"Black\"\n    )\n)\n    \n    py.offline.iplot(fig)\n    fig.data=[]","a2d9e3d4":"data=districts_info_frame.groupby('locale')[\"district_id\"].count()\n\npiePlot(data,\"Breakdown of locales of the districts\",\"Locale\")","6bf767ab":"data=districts_info_frame.groupby('pct_black\/hispanic')[\"district_id\"].count()\n\npiePlot(data,\"Breakdown of demographics of the districts\",\"pct_black\/hispanic\")","2f89ccb6":"data=districts_info_frame.groupby('pct_free\/reduced')[\"district_id\"].count()\n\npiePlot(data,\"Breakdown of districts by the percentage of students eligible for free or reduced lunch\",\"pct_free\/reduced\")","068b5efc":"districts_info_frame['district_id'] = districts_info_frame['district_id'].astype('str')\nengagements_frame['district_id'] = engagements_frame['district_id'].astype('str')","b0e838cc":"merged_data = pd.merge(engagements_frame, districts_info_frame, left_on = 'district_id', right_on = 'district_id')","72f55a2c":"merged_data=merged_data.dropna()","a436bbc0":"merged_data.isna().sum()\nmerged_data[\"time\"]=pd.to_datetime(merged_data[\"time\"])","1c3c07df":"districts_info_frame.isna().sum()","10cd8934":"clean_districts=districts_info_frame.dropna()","41b93dc6":"data=clean_districts.groupby(['locale', 'pct_black\/hispanic', 'pct_free\/reduced'],as_index=False).count()\ndata[\"District Count\"]=data[\"district_id\"]\nfig = px.sunburst(data, color_continuous_scale='Blues', path=['locale', 'pct_black\/hispanic', 'pct_free\/reduced'],width=750, height=750, values='District Count')\n# fig.update_layout(uniformtext=dict(minsize=10))\n\nfig.update_traces(textinfo=\"label+percent parent\")\nfig.update_layout(title=\"Breakdown locale, pct_black\/hispanic and pct_free\/reduced in respective rings\",\n    font=dict(\n        family=\"Roboto, monospace\",\n        size=14,\n        color=\"Black\"\n    )\n)\nfig.show()","c20aa186":"data=clean_districts.groupby(['pct_black\/hispanic', 'pct_free\/reduced'],as_index=False).count()\ndata[\"District Count\"]=data[\"district_id\"]\nfig = px.sunburst(data, color_continuous_scale='Blues', path=[ 'pct_black\/hispanic', 'pct_free\/reduced'],color='pct_free\/reduced',width=750, height=750, values='District Count')\n# fig.update_layout(uniformtext=dict(minsize=10))\n\nfig.update_traces(textinfo=\"label+percent parent\")\nfig.update_layout(title=\"Breakdown pct_black\/hispanic, pct_free\/reduced in respective rings\",\n    font=dict(\n        family=\"Roboto, monospace\",\n        size=14,\n        color=\"Black\"\n    )\n)\n\nfig.show()","e38304e4":"def lineTimePlot(column:str,value:str)->None:\n    line= merged_data.groupby([column,\"time\"],as_index=False).agg('mean')\n    fig = px.line(line, x ='time', y =value, color=column, width=1000,facet_col_wrap=1)\n#     fig.add_vrect(x0=\"2020-03-04\", x1=\"2020-03-14\",annotation_text=\"States Announce State of Emergency\",fillcolor=\"yellow\", opacity=0.25, annotation_position=\"top right\", line_width=0)\n    fig.add_vrect(x0=\"2020-04-02\", x1=\"2020-03-16\",annotation_text=\"States Close K-12 Public Schools\",fillcolor=\"red\", opacity=0.25, line_width=0, annotation_position=\"top left\")\n    fig.add_vrect(x0=\"2020-06-01\", x1=\"2020-08-23\",annotation_text=\"Summer Holidays\",fillcolor=\"green\", opacity=0.25, line_width=0, annotation_position=\"top right\")\n    \n    fig.add_hline(y=line[value].mean(),annotation_position=\"top right\",annotation_text=\"Average \"+value )\n    fig.update_xaxes(rangeslider_visible=True)\n    fig.update_layout(title= \"Time Analysis of \"+value+ \" by \"+column,\n    font=dict(\n        family=\"Roboto, monospace\",\n        size=14,\n        color=\"Black\"\n    )\n)\n    fig.add_annotation(xref='x domain',\n    x=0.5,\n    yref='y domain',\n    y=-0.4, font=dict(size=10),\n                       showarrow=False,\n    text=\"State Closure Data taken from <a href='https:\/\/www.openicpsr.org\/openicpsr\/project\/119446\/version\/V75\/view;jsessionid=851ECB80E6CB42252D396C29564184DC'>COVID-19 US State Policy Database by openICPSR<\/a>\")\n    fig.add_annotation(xref='x domain',\n    x=0.5,\n    yref='y domain',\n    y=-0.45, font=dict(size=10),\n                       showarrow=False,\n    text=\"Holiday Data taken from  <a href='https:\/\/www.fcps.edu\/sites\/default\/files\/media\/forms\/19-20-standard-school-year-calendar.pdf'>FCPS 2019-2020 Standard School Year Calendar<\/a>. It is used as a source for an estimate\")\n    \n    fig.show()\n","7ba8579e":"lineTimePlot(\"locale\",'pct_access')","0742475a":"lineTimePlot(\"pct_black\/hispanic\",'pct_access')","e466bc85":"lineTimePlot(\"pct_free\/reduced\",'pct_access')\n","36b48116":"lineTimePlot(\"locale\",'engagement_index')\n","2efd0f96":"lineTimePlot(\"pct_black\/hispanic\",'engagement_index')\n","bd1ef375":"lineTimePlot(\"pct_free\/reduced\",'engagement_index')\n","8d7c7fc7":"## Engagement Index by pct_free\/reduced\nWe can see that districts with a 0.8-1 percentage of pct_free\/reduced eligible students have a engagement index than their other counterparts on average. The districts with a 0.6-0.8 percentage of pct_free\/reduced eligible students had the worst access percentages. Districts with a 0.8-1 percentage oof pct_free\/reduced eligible students was hit the hardest with state closures but showed a rebound with school openings in the fall but never recovered to the level before the closure. ","a188ab6a":"## Locale Breakdown\nWe can see that the majority of our districts are in suburbs followed by rural,city then town. ","15b34319":"## Percentage of students eligible for free of reduced price lunch Breakdown\nThis can be an indicator of the economic level of the students at these districts and will be used as such in the following sections","7ab1c3a5":"## Preprocessing the data\nThe data will be processed as fits the specific purposes it is utilized for throughout the notebook. This is to preserve as much information as possible and to only make changes as is fitting for the specific scenario","a7d442bb":"## District data\nThe district file districts_info.csv includes information about the characteristics of school districts. Some of the identifaiable information in this file has been removed to remove risks of identification. The data in the file is in the format below\n\n| Name | Description |\n| :--- | :----------- |\n| district_id | The unique identifier of the school district |\n| state | The state where the district resides in |\n| locale | NCES locale classification that categorizes U.S. territory into four types of areas: City, Suburban, Town, and Rural. See [Locale Boundaries User's Manual](https:\/\/eric.ed.gov\/?id=ED577162) for more information. |\n| pct_black\/hispanic | Percentage of students in the districts identified as Black or Hispanic based on 2018-19 NCES data |\n| pct_free\/reduced | Percentage of students in the districts eligible for free or reduced-price lunch based on 2018-19 NCES data |\n| county_connections_ratio | `ratio` (residential fixed high-speed connections over 200 kbps in at least one direction\/households) based on the county level data from FCC From 477 (December 2018 version). See [FCC data](https:\/\/www.fcc.gov\/form-477-county-data-internet-access-services) for more information. |\n| pp_total_raw | Per-pupil total expenditure (sum of local and federal expenditure) from Edunomics Lab's National Education Resource Database on Schools (NERD$) project. The expenditure data are school-by-school, and we use the median value to represent the expenditure of a given school district. |","83a3b85a":"## Product Info \nThe product file products_info.csv includes information about the characteristics of the top 372 products with most users in 2020. The categories listed in this file are part of LearnPlatform's product taxonomy. The data is in the format below.\n\n\n| Name | Description |\n| :--- | :----------- |\n| LP ID| The unique identifier of the product |\n| URL | Web Link to the specific product |\n| Product Name | Name of the specific product |\n| Provider\/Company Name | Name of the product provider |\n| Sector(s) | Sector of education where the product is used |\n| Primary Essential Function | The basic function of the product. There are two layers of labels here. Products are first labeled as one of these three categories: LC = Learning & Curriculum, CM = Classroom Management, and SDO = School & District Operations. Each of these categories have multiple sub-categories with which the products were labeled |","b4309f29":"## Engagement data\nEach engagement file contains the aggregated engagement data for districts. The file is named with the district id. The data contained inside each file is in the format below\n\n| Name | Description |\n| :--- | :----------- |\n| time | date in \"YYYY-MM-DD\" |\n| lp_id | The unique identifier of the product |\n| pct_access | Percentage of students in the district have at least one page-load event of a given product and on a given day |\n| engagement_index | Total page-load events per one thousand students of a given product and on a given day |\n\n\nWe will be loading all the engagement data into a dataframe and add the district id for identification","ce37e25f":"## Breakdown of demographics overall\n\nThe plot show the number of districts by demographic, economic level as well as locale. For all locales except cities majority of the districts have a 0-0.2 percentage of students that are hispanic or black.Often we can see that a very high percentage of black or hispanic students(0.8-1) coincides with higher percentage of students eligible for lunch assistance than their lesser counterparts. This demonstrates racial bias to the economic status of the students.","f9fa853d":"## Percentage access by pct_free\/reduced\nWe can see that districts with a 0.8-1 percentage of pct_free\/reduced eligible students have a higher access percentage than their other counterparts on average. The districts with a 0.6-0.8 percentage of pct_free\/reduced eligible students had the worst access percentages. Districts with a 0.8-1 percentage oof pct_free\/reduced eligible students was hit the hardest with state closures but showed a rebound with school openings in the fall with rates that were only slightly lower than before. ","6a413e04":"## Percent Access By Locale\nThe figure shows that rural locales have a higher access percentage followed by towns with cities performing the worst. We can also see that cities were hit the hardest by state decisions for closure with access plummeting the hardest while the rest only showed a small decrease. The city shows almost half the access percentage to our highest access percentage(rural locale)","f64c95a0":"## Racial identity of students Breakdown\nWe can see that the majority of our districts have a percentage of 0%-0.2% hispanic\/black students with diminishing number of districts as we go up in the percentage of hispanic\/black students. ","d44a5750":"# Analysis","52efca0d":"# Loading Datasets\n\n<p>We need to load the different files that we will later need for our analysis<\/p>","a0044e94":"## Engagement Index by demogrpahics\nSimilar to its access counterpart the figure shows that  districts with a 0.8-1 percentage of black\/hispanic students have a higher access percentage than their other counterparts. The districts with a 0.4-0.6 percentage of black\/hispanic students performed the worst. Districts with a 0.8-1 percentage of black\/hispanic students was hit the hardest with state closures but showed a great rebound with school opening in the fall with rates similar to before.","7e418417":"## Engagement Index by locale\nThis is a similar pattern with the percentage access with cities being the lowest and rural being the highest. And the effects of the state closures being hardest on the cities","af9aa0e9":"# Will Be continued with spending breakdown and more specific engagement and access analysis","ca59293a":"## Percentage access by demogrphics\nWe can see that districts with a 0.8-1 percentage of black\/hispanic students have a higher access percentage than their other counterparts. The districts with a 0.4-0.6 percentage of black\/hispanic students performed the worst. Districts with a 0.8-1 percentage of black\/hispanic students was hit the hardest with state closures but showed a great rebound with school opening in the fall with rates higher than before. Another range that was affected heavily is the districts with  0.4-0.6 percentage of black\/hispanic students though it did rebound after the summer holidays.  "}}