{"cell_type":{"9bc081a7":"code","e677a8dd":"code","1af4302d":"code","0eeb8bb1":"code","09104520":"code","4c2d2aab":"code","daa10c5b":"code","7798ed3a":"code","474af6b0":"code","b2ad24de":"code","20387acf":"code","378e3c2d":"code","dd1d77e3":"code","46120c07":"code","27f61041":"code","f65ff98c":"code","1da5cd00":"markdown","3d3a390d":"markdown","e24346fc":"markdown","d777c310":"markdown","a85bbfaf":"markdown","2376e9ca":"markdown","7c6aa5fe":"markdown","eea44dcb":"markdown","5918cc60":"markdown","f1808693":"markdown","8ef17b11":"markdown","1a7c2a69":"markdown","7ddbcb06":"markdown","fa09309a":"markdown","9707e07a":"markdown"},"source":{"9bc081a7":"import numpy as np\nimport pandas as pd\nimport seaborn as sns\nimport random\nimport plotly.graph_objects as go\nimport plotly.express as px\nimport scipy.stats as stt\nimport matplotlib.pyplot as plt\nimport warnings\nwarnings.filterwarnings('ignore')\n%pylab inline","e677a8dd":"data15 = pd.read_csv('..\/input\/world-happiness\/2015.csv')\ndata15.head()","1af4302d":"fig = plt.figure(figsize=(20,20))\nsns.set(style=\"white\",font_scale=1);\nsns.pairplot(data15[['Happiness Score','Economy (GDP per Capita)', 'Family', 'Health (Life Expectancy)', \\\n    'Freedom', 'Trust (Government Corruption)']]);","0eeb8bb1":"fig = plt.figure(figsize=(13,10))\nsns.set(style=\"white\",font_scale=1.5)\nsns.heatmap(data15.dropna()[['Happiness Score','Economy (GDP per Capita)', 'Family', 'Health (Life Expectancy)', \\\n    'Freedom', 'Trust (Government Corruption)','Generosity', 'Dystopia Residual']].corr(), fmt='.2f',annot=True,\\\n             xticklabels=False,linewidth=2);","09104520":"vis15 = data15[['Happiness Score','Economy (GDP per Capita)','Family','Country']]\n\nfig = go.Figure()\n\nfor x in range(40):\n    fig.add_trace(go.Scatter(\n        x=[vis15.iloc[x,:]['Happiness Score'], vis15.iloc[x,:]['Happiness Score']],\n        y=[vis15.iloc[x,:]['Economy (GDP per Capita)'],vis15.iloc[x,:]['Family']],\n        mode=\"markers+lines+text\",\n        text = [vis15.iloc[x,:]['Country']],\n        textposition=\"bottom center\"\n    ))\n\n    fig.update_layout(  \n        showlegend=False,\n    )\nfig.show()","4c2d2aab":"fig = px.scatter(data15, x='Happiness Score', y='Economy (GDP per Capita)', text='Country')\nfig.update_traces(textposition='top center')\nfig.update_layout(\n    height=1000,\n)\nfig.show()","daa10c5b":"fig = plt.figure(figsize=(7,5))\nsns.set()\nsns.distplot(data15['Happiness Score'],bins=12);","7798ed3a":"from mpl_toolkits.basemap import Basemap","474af6b0":"concap = pd.read_csv('..\/input\/world-capitals-gps\/concap.csv')\nconcap.head()","b2ad24de":"data_full = pd.merge(concap[['CountryName', 'CapitalName', 'CapitalLatitude', 'CapitalLongitude']],\\\n         data15,left_on='CountryName',right_on='Country')","20387acf":"def mapWorld():\n    m = Basemap(projection='mill',llcrnrlat=-60,urcrnrlat=90,\\\n            llcrnrlon=-180,urcrnrlon=180,resolution='c')\n    #m.drawcoastlines()\n    m.drawcountries()\n    m.drawparallels(np.arange(-90,91.,30.))\n    m.drawmeridians(np.arange(-90,90.,60.))\n    \n    #m.drawmapboundary(fill_color='#FFFFFF')\n    lat = data_full['CapitalLatitude'].values\n    lon = data_full['CapitalLongitude'].values\n    a_1 = data_full['Happiness Rank'].values\n    a_2 = data_full['Economy (GDP per Capita)'].values\n    m.scatter(lon, lat, latlon=True,c=100*a_1,s=1000*a_2,linewidth=1,edgecolors='black',cmap='hot', alpha=1)\n    \n    m.fillcontinents(color='#072B57',lake_color='#FFFFFF',alpha=0.4)\n    cbar = m.colorbar()\n    cbar.set_label('Happiness Rank*1000')\n    #plt.clim(20000, 100000)\n    plt.title(\"World Happiness Rank\", fontsize=30)\n    plt.show()\nsns.set(style=\"white\",font_scale=1.5)\nplt.figure(figsize=(30,30))\nmapWorld()","378e3c2d":"data_full['Economy (GDP per Capita) color'] = data_full['Economy (GDP per Capita)'].apply(lambda x: int(100*x))\ndata_full['Happiness Rank size'] = data_full['Happiness Rank'].apply(lambda x: int(x\/\/5))\nfig = go.Figure()\n\nfig.add_trace(go.Scattergeo(\n                         lat = data_full['CapitalLatitude'],\n                     lon = data_full['CapitalLongitude'],\n                     text = data_full['CountryName'],\n#                     mode=\"markers+text\",|\n                     marker={\n                        \"color\": data_full['Economy (GDP per Capita) color'],\n                        \"line\": {\"width\": 1},\n                 \"size\": data_full['Happiness Rank size']}\n                           ))\n\nfig.update_layout(\n    title_text=\"World Happiness Rank\"\n)\n\nfig.show()","dd1d77e3":"contr_list = list(data15[data15['Region'].isin(['Western Europe','Central and Eastern Europe'])]['Country'].unique())\neu_gps = concap[concap['CountryName'].isin(contr_list)]\neu_data = data15[data15['Region'].isin(['Western Europe','Central and Eastern Europe'])]\neu_full = pd.merge(eu_gps[['CountryName', 'CapitalName', 'CapitalLatitude', 'CapitalLongitude']],\\\n         eu_data,left_on='CountryName',right_on='Country')","46120c07":"def mapEurope(column_color, column_size,colbar=True):\n    m = Basemap(projection='mill',llcrnrlat=30,urcrnrlat=72,\\\n                llcrnrlon=-20,urcrnrlon=55,resolution='l')\n    m.drawcountries()\n    m.drawstates()\n    #m.drawmapboundary()\n    m.drawparallels(np.arange(-90,91.,30.))\n    m.drawmeridians(np.arange(-90,90.,60.))\n    lat = eu_full['CapitalLatitude'].values\n    lon = eu_full['CapitalLongitude'].values\n    a_1 = eu_full[column_color].values\n    a_2 = eu_full[column_size].values\n    #s=1000*a_2\n    m.scatter(lon, lat, latlon=True,c=1000*a_1,s=1000*a_2,linewidth=2,edgecolors='black',cmap='hot', alpha=1)\n    m.fillcontinents(color='#072B57',lake_color='#FFFFFF',alpha=0.3)\n    if colbar:\n            m.colorbar(label='Happiness Rank*1000')\n    else:pass\nplt.figure(figsize=(15,15))\nplt.title('Europe - Happiness\\GDP', fontsize=30)\nmapEurope('Happiness Rank','Economy (GDP per Capita)')","27f61041":"fig = plt.figure(figsize=(30,15))\nax1 = fig.add_subplot(2,3,1)\nax1.set_title('Europe - Happiness\\Freedom', fontsize=20)\nmapEurope('Happiness Rank','Freedom',colbar=False)\nax2 = fig.add_subplot(2,3,2)\nax2.set_title('Europe - Happiness\\Government Corruption', fontsize=20)\nmapEurope('Happiness Rank','Trust (Government Corruption)')\nplt.tight_layout()","f65ff98c":"plt.figure(figsize=(8,8))\nplt.title('Europe - Happiness\\Family', fontsize=20)\nmapEurope('Happiness Rank','Family')","1da5cd00":"Here we can see, that freedom extend to the happiness less that GDP. I specially don't change scale. Also we can see a clear relation between the country's GDP and the level of trust to the government.","3d3a390d":"Consider in detail European region. Here you can see how much Western Europe stands out among its neighbors.","e24346fc":"We can observe visual high correlation. Economy\/Happiness graphics seems like ready model for linear regression. Check it with corrplot.","d777c310":"To visualize this map, I need capital's coordinates - latitude and longitude. I take this data from this site: http:\/\/techslides.com\/list-of-countries-and-capitals. Then you just have to join the tables.","a85bbfaf":"Dataset of happiness (2015).","2376e9ca":"From this map you can see happiness leaders regions - North America, Western Europe, Australia and New Zealand. Colors from this map reflects the level of happiness, and size - the effect of GDP on happiness rating. This map is quite interesting to consider, because you can understand a lot of new things about the world. For example - Immediately stand out the countries of the Persian Gulf in their region. In Africa, only a few have a large rank of happiness. Small size of round means little gdp per capita - including due to the large population.","7c6aa5fe":"How to change rating from Economy to Family:","eea44dcb":"Now start with interesting visual part of my kernel - map visualization. For this problem I use Basemap module - part of matplotlib. (https:\/\/matplotlib.org\/basemap\/users\/examples.html)","5918cc60":"The same graphic with interactive plotly:","f1808693":"On the other hand, almost all countries are the same in matters of family.","8ef17b11":"The most correlated features with Happiness Score are Economy, Family, Health and Freedom. It's logical, because these basic principles provide high level of happy. What about histogramm of happyness? From it's histogramm we can see something like bimodal distribution. Distribution tails arent equal - highly contented people more than unhappy.","1a7c2a69":"## Geographic map","7ddbcb06":"# Geography of happiness (map visualization)","fa09309a":"In this dataset we have some features, which depends on Happiness Score (it follows from their description). Thus let's start the analysis with jointplot.","9707e07a":"Thank you for reading! I hope this kernel was helpful for you. <br>\nIf you like same map visualization, you can see my other kernels: <br>\nhttps:\/\/www.kaggle.com\/nikitagrec\/kernels"}}