{"cell_type":{"f5fd79a9":"code","890a60a5":"code","07bd2efd":"code","378078b4":"code","92df2e40":"code","7cee6ae7":"code","3b613536":"code","d3f0d06c":"code","4e5f6cfe":"code","d54c6d92":"code","0895e6fe":"code","3ccf8aa9":"markdown","d9a5ae5b":"markdown"},"source":{"f5fd79a9":"import pandas as pd\nimport json\n\npath = '..\/input\/xqa-tamil\/'\ndev_ans = [json.loads(line) for line in open(\n    path + 'dev.json', 'r', encoding='utf8')]\ndev = [json.loads(line) for line in open(\n    path + 'dev_doc.json', 'r', encoding='utf8')]\n","890a60a5":"test_ans = [json.loads(line) for line in open(\n    path + 'test.json', 'r', encoding='utf8')]\ntest = [json.loads(line) for line in open(\n    path + 'test_doc.json', 'r', encoding='utf8')]\n","07bd2efd":"## Same format for ease of integration\ndef initcsv():\n    Data = {'context': list(),\n            'question': list(),\n            'answer_text': list(),\n            'answer_start': list(),\n            'language': list()  # tamil\n                }\n    return Data","378078b4":"def create_dataset(df,ans):\n    data = initcsv()\n    for i in range(len(df)):\n        for j in range(len(df[i])):\n            context = df[i][j]['document']\n            question = df[i][j]['question'].replace('<Query>', '') \n            answers = ans[i]['answers']\n            for a in range(len(answers)):\n                chk = context.find(answers[a])\n                chk2 = a\n                if chk >= 0:\n                    ans_start = chk ## check all\n                    continue\n                else:\n                    ans_start = -1\n            data['context'].append(context)\n            data['question'].append(question)\n            data['answer_text'].append(answers[chk2])\n            data['answer_start'].append(ans_start)\n            data['language'].append('tamil')\n    return data","92df2e40":"all_dev = create_dataset(dev, dev_ans)\nall_test = create_dataset(test, test_ans)","7cee6ae7":"csv_dev = pd.DataFrame.from_dict(all_dev)\ncsv_test = pd.DataFrame.from_dict(all_test)","3b613536":"csv_dev.to_csv('XQA_tamil_dev.csv', index = False)\ncsv_test.to_csv('XQA_tamil_test.csv', index = False)","d3f0d06c":"def create_dataset_query(df,ans):\n    data = initcsv()\n    for i in range(len(df)):\n        for j in range(len(df[i])):\n            context = df[i][j]['document']\n            question = df[i][j]['question']\n            answers = ans[i]['answers']\n            for a in range(len(answers)):\n                chk = context.find(answers[a])\n                chk2 = a\n                if chk >= 0:\n                    ans_start = chk ## check all\n                    continue\n                else:\n                    ans_start = -1\n            data['context'].append(context)\n            data['question'].append(question)\n            data['answer_text'].append(answers[chk2])\n            data['answer_start'].append(ans_start)\n            data['language'].append('tamil')\n    return data","4e5f6cfe":"all_dev_query = create_dataset_query(dev, dev_ans)\nall_test_query = create_dataset_query(test, test_ans)","d54c6d92":"csv_dev_query = pd.DataFrame.from_dict(all_dev_query)\ncsv_test_query = pd.DataFrame.from_dict(all_test_query)","0895e6fe":"csv_dev_query.to_csv('XQA_tamil_dev_query.csv', index = False)\ncsv_test_query.to_csv('XQA_tamil_test_query.csv', index = False)","3ccf8aa9":"## Without < Query >","d9a5ae5b":"## With < Query >"}}