{"cell_type":{"4fffd164":"code","af33cc5b":"code","0b51aacc":"code","315751a2":"code","f23f56e8":"code","950fe5dd":"code","2966df3c":"code","612f8d88":"code","8f1e5dcf":"code","b9b8ea0d":"code","3013d6bb":"code","b0450685":"code","e57125ae":"code","a0e70ac8":"code","1f73cc0a":"code","efc6761f":"code","c95ddd55":"code","7b50a590":"code","4ce8645b":"code","6989b31e":"code","cb3830b7":"code","6b2ff5a2":"code","12ab2350":"code","ca802cfc":"code","11acda49":"code","72bb55a7":"code","bda3b859":"code","93a3b037":"code","bc5a302e":"code","c06cb89e":"code","bbf62bc2":"code","4bf1fa43":"code","3c2a6c64":"code","6ff759bc":"code","e2ec3c89":"code","b7f1fc22":"code","7a5f11a2":"code","24e152a6":"code","eb86b6d2":"code","10be3308":"code","1b28ab54":"markdown","b6b709c0":"markdown","07bb2818":"markdown","82f227be":"markdown","ffdfa1ba":"markdown","3b2d7ba4":"markdown","2bc13fff":"markdown","3735296d":"markdown","d176a116":"markdown","1d810f9a":"markdown","50df70f3":"markdown","e0c3e8b2":"markdown","e19c0738":"markdown","0e2ca9f9":"markdown","256497e4":"markdown","4df4c6c1":"markdown","b0d8b7ee":"markdown","1b0a6ce6":"markdown","1ac4e223":"markdown","3838caae":"markdown","e66063ee":"markdown","295a29ea":"markdown","4689e163":"markdown","678babb7":"markdown","bef89ca6":"markdown","024706ec":"markdown","6686b813":"markdown","1fce73b5":"markdown","b3365cd8":"markdown","a99a09a0":"markdown","330b8cd2":"markdown","f2d47da7":"markdown","38101acb":"markdown","447d5c10":"markdown","e22853bf":"markdown","3021b39a":"markdown","ebb16d07":"markdown","b724d8b3":"markdown"},"source":{"4fffd164":"import numpy as np\nimport pandas as pd","af33cc5b":"data_path_2016 = '\/kaggle\/input\/inep-microdados-enade-2016\/microdados_enade2016\/3.DADOS\/MICRODADOS_ENADE_2016.txt'\n\ndf_2016 = pd.read_csv(data_path_2016, sep=';', encoding='latin1') # decimal=',' -> Existem inconsist\u00eancias na padroniza\u00e7\u00e3o dos arquivos, em 2016 \".\" \u00e9 utilizado como separador decimal, em 2017 e 2018 \u00e9 utilizada \",\"","0b51aacc":"df_2016['ENADE_ANO'] = 2016","315751a2":"df_2016.shape","f23f56e8":"data_path_2017 = '\/kaggle\/input\/inep-microdados-enade-2017\/3.DADOS\/MICRODADOS_ENADE_2017.txt'\n\ndf_2017 = pd.read_csv(data_path_2017, sep=';', encoding='latin1', decimal=',', low_memory=False)","950fe5dd":"df_2017['ENADE_ANO'] = 2017","2966df3c":"df_2017.shape","612f8d88":"data_path_2018 = '\/kaggle\/input\/inep-microdados-enade-2018\/2018\/3.DADOS\/microdados_enade_2018.txt'\n\ndf_2018 = pd.read_csv(data_path_2018, sep=';', encoding='latin1', decimal=',')","8f1e5dcf":"df_2018['ENADE_ANO'] = 2018","b9b8ea0d":"df_2018.shape","3013d6bb":"[c for c in df_2017.columns if c not in df_2018.columns]","b0450685":"[c for c in df_2018.columns if c not in df_2017.columns]","e57125ae":"[c for c in df_2016.columns if c not in df_2018.columns]","a0e70ac8":"df_2016['CO_TURNO_GRADUACAO'] = np.where(df_2016[['IN_MATUT', 'IN_VESPER', 'IN_NOTURNO',]].sum(axis=1) > 1, 3, df_2016[['IN_MATUT', 'IN_VESPER', 'IN_NOTURNO',]].idxmax(axis=1)) # 3 = Integral = mais de um periodo\n \ndf_2016['CO_TURNO_GRADUACAO'] = df_2016['CO_TURNO_GRADUACAO'].replace({'IN_MATUT':1, 'IN_VESPER': 2, 'IN_NOTURNO': 4}).astype(int)","1f73cc0a":"df_2016.drop(columns=['TP_SEMESTRE','AMOSTRA', 'IN_MATUT', 'IN_VESPER', 'IN_NOTURNO', 'IN_GRAD', 'ID_STATUS'], inplace=True)","efc6761f":"df_2016.rename(columns={'ANO_FIM_2G': 'ANO_FIM_EM'}, inplace=True)","c95ddd55":"[c for c in df_2016.columns if c not in df_2018.columns]","7b50a590":"[c for c in df_2018.columns if c not in df_2016.columns]","4ce8645b":"df = pd.concat([df_2016, df_2017, df_2018]).reset_index(drop=True)","6989b31e":"df.shape","cb3830b7":"df['TP_SEXO'].value_counts()","6b2ff5a2":"df = df.query(\"TP_SEXO != 'N'\").copy()","12ab2350":"df['CO_MODALIDADE'].value_counts()","ca802cfc":"df_2016['CO_MODALIDADE'].value_counts()","11acda49":"df_2017['CO_MODALIDADE'].value_counts()","72bb55a7":"df_2018['CO_MODALIDADE'].value_counts()","bda3b859":"df['CO_MODALIDADE'] = df['CO_MODALIDADE'].replace({0: 2})","93a3b037":"df.to_csv('dados_enade.csv', index=False)","bc5a302e":"data_dict_path_2018 = '\/kaggle\/input\/inep-microdados-enade-2018\/2018\/1.LEIA-ME\/Dicion\u00e1rio de Vari\u00e1veis dos Microdados do Enade_Edi\u00e7\u00e3o 2018.xlsx'\n\ndata_dict_2018 = pd.read_excel(data_dict_path_2018, sep=';', encoding='latin1', decimal=',', header=[1])\n\ndata_dict_2018['NOME'] = data_dict_2018['NOME'].fillna(method='ffill')","c06cb89e":"data_dict_path_2017 = '\/kaggle\/input\/inep-microdados-enade-2017\/1.LEIA-ME\/Dicion\u00e1rio de vari\u00e1veis dos Microdados do Enade_Edi\u00e7\u00e3o 2017.xlsx'\n\ndata_dict_2017 = pd.read_excel(data_dict_path_2017, sep=';', encoding='latin1', decimal=',', header=[1])","bbf62bc2":"data_dict_path_2016 = '\/kaggle\/input\/inep-microdados-enade-2016\/microdados_enade2016\/1.LEIA-ME\/Dicion\u00e1rio de vari\u00e1veis dos Microdados do Enade_Edi\u00e7\u255eo 2016.xlsx'\n\ndata_dict_2016 = pd.read_excel(data_dict_path_2016, sep=';', encoding='latin1', decimal=',', header=[1])","4bf1fa43":"def treat_data_dict_to_2018_stds(dd):\n    dd.columns = [c.upper() for c in dd.columns]\n    dd = pd.DataFrame(dd.iloc[:,-1].str.split('\\n', expand=True).values, index=dd['NOME']).stack()\n    dd = dd.reset_index().rename(columns = {0:'CATEGORIAS'})[['NOME', 'CATEGORIAS']]\n    dd['NOME'] = dd['NOME'].fillna(method='ffill')\n    return dd.query(\"NOME == 'CO_GRUPO'\")","3c2a6c64":"data_dict = pd.concat([treat_data_dict_to_2018_stds(data_dict_2016), treat_data_dict_to_2018_stds(data_dict_2017), data_dict_2018])","6ff759bc":"data_dict['CATEGORIAS'] = data_dict['CATEGORIAS'].str.strip().replace('', np.nan)","e2ec3c89":"data_dict = data_dict[~data_dict['CATEGORIAS'].isnull()].copy()","b7f1fc22":"def normalize(series):\n    return series.str.normalize('NFKD').str.encode('ascii', errors='ignore').str.decode('utf-8')","7a5f11a2":"data_dict['NOME'] = normalize(data_dict['NOME'])","24e152a6":"data_dict['NOME'].fillna(method='ffill', inplace=True)","eb86b6d2":"data_dict = data_dict[['NOME','CATEGORIAS']]","10be3308":"data_dict.to_csv('dicionario_categorias.csv', index=False)","1b28ab54":"# Pr\u00f3ximos passos\n\n<a href=\"\">Add link<\/a> ","b6b709c0":"# Carregando arquivos de 2017","07bb2818":"## Diferen\u00e7as de colunas entre 2017 vs 2018","82f227be":"# Resolvendo diferen\u00e7as entre arquivos:","ffdfa1ba":"**Criando a coluna \"ano\" em 2016:**","3b2d7ba4":"## Diferen\u00e7as de colunas entre 2018 vs 2017","2bc13fff":"** Remo\u00e7\u00e3o de outliers **","3735296d":"# Introdu\u00e7\u00e3o\n\nEsse caderno faz parte de um conjunto de an\u00e1lises sobre o <a href=\"http:\/\/portal.inep.gov.br\/enade\">ENADE<\/a>, que \u00e9 uma prova padronizada aplicada a formandos de ensino superior a fim de avaliar qu\u00e3o bem eles aprenderam o conte\u00fado do curso.\n\n## Links:\n\nPara acessar os outros conte\u00fados que tenho trabalhado:\n\n- <a href='https:\/\/www.kaggle.com\/joaoavf\/enade-01-juntando-arquivos'>1 - Juntando arquivos<\/a> [CADERNO ATUAL]\n- <a href='https:\/\/www.kaggle.com\/joaoavf\/enade-02-tratando-outliers'>2 - Tratando outliers<\/a>\n- <a href='https:\/\/www.kaggle.com\/joaoavf\/enade-03-explorando-dados'>3 - Explorando Dados<\/a> \n- <u>Pr\u00f3ximos cadernos ainda em progresso<\/u>\n\n## Outros recursos\n\nCaso tenha interesse em aprender as ferramentas que est\u00e3o sendo utilizadas aqui, segue um guia para iniciantes: \n\n<a href='https:\/\/www.kaggle.com\/joaoavf\/introducao-a-analise-de-dados-python-e-pandas'>Introdu\u00e7\u00e3o a An\u00e1lise de Dados usando Python e pandas<\/a>\n\n# Por que combinar o ENADE 2016, 2017 e 2018?\nUma vez que o ENADE para um mesmo curso normalmente \u00e9 feito de 3 em 3 anos, combinando 2016, 2017 e 2018 teremos dados sobre todos os cursos.\n\n\n*O ENADE 2016 n\u00e3o foi realizado com todos os alunos (cerca de 50% da popula\u00e7\u00e3o dos anos de 2017 e 2018). Uma vez que o ENADE 2019 for disponibilizado, vale a pena trocar o ano de 2016 pelo ano de 2019.*","d176a116":"## Alterando o nome da coluna de final do segundo grau","1d810f9a":"## Salvando o arquivo final","50df70f3":"## Diferen\u00e7as de colunas entre 2018 vs 2017","e0c3e8b2":"As colunas acima s\u00e3o perguntas relativas aos cursos de licenciatura, que s\u00f3 aparecem na vers\u00e3o de 2017. Ent\u00e3o podemos deixar como est\u00e1.","e19c0738":"# Montando o ambiente\n\nAdicionando todas as bibliotecas que v\u00e3o ser usadas para manipular os dados:","0e2ca9f9":"# Salvando o dicion\u00e1rio de dados","256497e4":"Temos 2 colunas adicionais em 2018 (e 2017) que n\u00e3o existem em 2016, por\u00e9m n\u00e3o h\u00e1 muito o que fazer nesta situa\u00e7\u00e3o. Iremos manter como est\u00e1.","4df4c6c1":"** Padronizando a coluna `CO_MODALIDADE` **","b0d8b7ee":"# Carregando arquivos de 2016","1b0a6ce6":"## Diferen\u00e7as resolvidas","1ac4e223":"** Verificando tamanho do arquivo: **","3838caae":"## Criando a coluna \"ano\" em 2017:","e66063ee":"Em 'CO_MODALIDADE' temos 3 valores, mas se observarmos individualmente os dicion\u00e1rios de dados de 2016, 2017 e 2018 veremos que existem apenas duas op\u00e7\u00f5es:\n1. Presencial\n2. Ensino a dist\u00e2ncia","295a29ea":"## Tirando colunas que n\u00e3o existem nas vers\u00f5es de 2017 e 2018","4689e163":"# Resolvendo diferen\u00e7as entre dicion\u00e1rios de dados:","678babb7":"** Verificando tamanho do arquivo: **","bef89ca6":"Todas as colunas de 2018 est\u00e3o contidas em 2017. ","024706ec":"## Limpeza no arquivo final","6686b813":"## Criando o c\u00f3digo do turno de gradua\u00e7\u00e3o","1fce73b5":"# Carregando arquivos de 2018","b3365cd8":"## Criando a coluna \"ano\" em 2018:","a99a09a0":"** Verificando tamanho do arquivo: **","330b8cd2":"Em 2018, 2 virou sin\u00f4nimo de EAD, enquanto nas edi\u00e7\u00f5es de 2016 e 2017, 0 representava EAD.\n\nComo o dicion\u00e1rio de dados prim\u00e1rio que usamos \u00e9 de 2018, vamos adequar os dados de 2016 e 2017 a esse padr\u00e3o.","f2d47da7":"# Carregando Dicion\u00e1rio de Dados de 2017","38101acb":"# Carregando Dicion\u00e1rio de Dados de 2018","447d5c10":"# Gerando o Arquivo Final","e22853bf":"Na categoria `TP_SEXO` temos 7 ocorr\u00eancias com valores `N`. Para simplificar as nossas an\u00e1lises posteriores, removerei esses registros dos nossos dados:","3021b39a":"## Diferen\u00e7as de colunas entre 2016 vs 2018","ebb16d07":"# Carregando Dicion\u00e1rio de Dados de 2016","b724d8b3":"** Verificando tamanho do arquivo: **"}}