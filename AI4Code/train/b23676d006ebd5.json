{"cell_type":{"4a18834c":"code","dcefda85":"code","58d8ed1f":"code","71c13a62":"code","1f3cb2af":"code","4cfd29b6":"code","4ecc74d3":"code","028c2910":"code","96a89a1e":"code","06ae5e6b":"code","331bdaee":"code","2b2a9db0":"code","83b3414a":"code","cc6d4869":"code","e869aaee":"code","e1eb6e75":"code","454fbf1a":"code","52d18aea":"code","e01816bd":"code","314bb0ca":"code","6c7ecb2b":"code","889dec5b":"code","156579c9":"code","bc1681d2":"code","63c53852":"code","6181f967":"code","37808250":"code","664609f8":"code","d7cf2f9d":"code","b7af5921":"code","c879381d":"code","7d56facf":"code","da507200":"code","cad4edf9":"markdown","2bad3f71":"markdown","5e47c836":"markdown"},"source":{"4a18834c":"# import libraries\n\nimport numpy as np\nimport pandas as pd\n%matplotlib inline\nimport matplotlib.pyplot as plt","dcefda85":"# using pandas read_csv\ndataset ='\/kaggle\/input\/novel-corona-virus-2019-dataset\/2019_nCoV_data.csv'\ndf = pd.read_csv(dataset, parse_dates=['Date'])","58d8ed1f":"df.tail()","71c13a62":"# On Jan.22,2020, row 0 was marked as \"China\", now change it to \"Mainland China\".\ndf.loc[df.Country == 'China', 'Country'] = 'Mainland China'","1f3cb2af":"df.loc[df.Country == 'Others', 'Country'] = 'Japan'# Others =Princess Diamond Cruise Ship","4cfd29b6":"# plot confirmed cases outside mainland China based on countries\n\nimport plotly.express as px\n# filter data based on the last update\ndf2=df[(df['Country']!= 'Mainland China') & (df['Date']=='2020-02-11 20:44:00')]\n\ndf3=df2.groupby(['Country'],as_index=False).sum().sort_values(by=['Confirmed'], ascending=False)\nfig = px.bar(df3, x='Country', y='Confirmed',\n             color='Confirmed', height=400)\nfig.update_layout(title_text='Coronavirus confirmed cases outside mainland China')\nfig.show()","4ecc74d3":"#!pip install chart-studio","028c2910":"\"\"\"\nimport chart_studio.plotly as py\nimport cufflinks as cf\ndf3.iplot(kind='bubble', x='Country', y='Confirmed', size='Confirmed', text='Country',\n             xTitle='Confirmed cases outside mainland China', yTitle='Confirmed',\n             filename='cufflinks\/simple-bubble-chart'\n\n\"\"\"\n","96a89a1e":"#Because the above cell code does not work on Kaggle, I imported the plotted picture. \nfrom IPython.display import Image\nImage(\"\/kaggle\/input\/firstonep\/first.png\")","06ae5e6b":"# Now I want to compare the trend of two areas in and outside mainland China\n#all the other regions\/countries grouped as outside (mainland)China\n\ndf.loc[df.Country != 'Mainland China', 'Country'] = 'OutsideChina'","331bdaee":"df4=df.groupby(['Date','Country'],as_index=False).sum().sort_values(by=['Confirmed'], ascending=False)","2b2a9db0":"#removed redundant column \"Sno(Serial Number)\"\n\ndf5=df4[['Date','Country','Confirmed','Deaths','Recovered']]","83b3414a":"#subset df2 (in Mainland China and Outside mainland china--> prepare for visulaization)\ndfChina=df5[df5['Country']== 'Mainland China'] ","cc6d4869":"import plotly.graph_objects as go\nfig = go.Figure()\n\n    \nfig.add_trace(go.Scatter(\n                x=dfChina['Date'],\n                y=dfChina['Confirmed'],\n                name=\"Confirmed\",\n                line_color='deepskyblue',\n                opacity=0.8))\n\nfig.add_trace(go.Scatter(\n                x=dfChina['Date'],\n                y=dfChina['Deaths'],\n                name=\"Deaths\",\n                line_color='red',\n                opacity=0.8))\n\nfig.add_trace(go.Scatter(\n                x=dfChina['Date'],\n                y=dfChina['Recovered'],\n                name=\"Recovered\",\n                line_color='dimgray',\n                opacity=0.8))\n\n# Use date string to set xaxis range\nfig.update_layout(title_text='Coronavirus Outbreak in Mainland China with Rangeslider',\n                  xaxis_rangeslider_visible=True)\nfig.show()","e869aaee":"dfOutChina=df5[df5['Country']== 'OutsideChina'] ","e1eb6e75":"import plotly.express as px #based on date\n\nfig = px.bar(dfOutChina, x='Date', y='Confirmed',\n             color='Confirmed', height=400)\nfig.update_layout(title_text='Coronavirus confirmed cases outside mainland China')\nfig.show()","454fbf1a":"import plotly.graph_objects as go\n\nfig = go.Figure()\nfig.add_trace(go.Bar(name='Confirmed', x=dfOutChina['Date'], y=dfOutChina['Confirmed']))\nfig.add_trace(go.Bar(name='Deaths', x=dfOutChina['Date'], y=dfOutChina['Deaths']))\nfig.add_trace(go.Bar(name='Recovered', x=dfOutChina['Date'], y=dfOutChina['Recovered']))\nfig.update_layout(title_text='Coronavirus Outbreak outside Mainland China with Rangeslider',\n                  xaxis_rangeslider_visible=True, xaxis_tickangle=-15,barmode='group')\nfig.show()","52d18aea":"\"\"\"\n##This is the second one that does not work on Kaggle. You can see the plotted picture under this cell\n\ndfOutChina.iplot(kind='scatter', mode='markers', x='Date', y='Confirmed', filename='cufflinks\/simple-scatter')\n\"\"\"","e01816bd":"#this is another picture which does not show on Kaggle\n\nfrom IPython.display import Image\nImage(\"\/kaggle\/input\/lastonep\/second.png\")","314bb0ca":"#The next, I would like to show the outbreak situation in mainland China. \n# The first, let's have a look at the confirmed cases. I will removed countries and regions outside mainland China. Then, I will \n#make a compariation between two groups: the outbreak center Hubei province and the other provinces.  \ndataset ='\/kaggle\/input\/novel-corona-virus-2019-dataset\/time_series_2019_ncov_confirmed.csv'\ndftimeCfm = pd.read_csv(dataset)\ndftimeCfm.head()\nsubset=dftimeCfm[dftimeCfm['Country\/Region']== 'Mainland China'] \nsubset.tail()","6c7ecb2b":"#now we have a subset that contains only date, confirmed cases in Hubei and other provinces\nimport warnings\nwarnings.filterwarnings('ignore')\nsubset.drop(['Lat','Long'], axis=1, inplace=True)\nsubset[\"Province\/State\"]=np.where(subset[\"Province\/State\"].eq(\"Hubei\"), \"Hubei\", \"Other\")\nsubsetCfmd=subset.groupby(['Province\/State'],as_index=False).sum()\nnew=subsetCfmd.set_index('Province\/State').T.reset_index()\nnew.columns = ['Date', 'HubeiCfmd', 'OtherCfmd']\nnew.head()","889dec5b":"#plot confirmed cases in mainland China\nfig = go.Figure()\nfig.add_trace(go.Scatter(x=new['Date'], y=new['HubeiCfmd'],\n                    mode='lines+markers',\n                    name='Hubei Province',\n                    line_color='Red'))\nfig.add_trace(go.Scatter(x=new['Date'], y=new['OtherCfmd'],\n                    mode='lines+markers',\n                    name='Other Provinces',\n                    line_color=\"Green\"))\nfig.update_layout(title_text='Confirmed cases in mainland China: Hubei Province VS Other Provinces')\n\nfig.show()","156579c9":"# We will do the same to compare deaths and recovered cases\ndataset ='\/kaggle\/input\/novel-corona-virus-2019-dataset\/time_series_2019_ncov_deaths.csv'\ndftimeDeaths = pd.read_csv(dataset)\ndftimeDeaths.head()\nsubset2=dftimeDeaths[dftimeDeaths['Country\/Region']== 'Mainland China'] \nsubset2.drop(['Lat','Long'], axis=1, inplace=True)\nsubset2[\"Province\/State\"]=np.where(subset2[\"Province\/State\"].eq(\"Hubei\"), \"Hubei\", \"Other\")\nsubDeaths=subset2.groupby(['Province\/State'],as_index=False).sum()\nnew2=subDeaths.set_index('Province\/State').T.reset_index()\nnew2.columns = ['Date', 'HubeiDeaths', 'OtherDeaths']\nnew2.head()\n","bc1681d2":"fig = go.Figure()\nfig.add_trace(go.Scatter(x=new2['Date'], y=new2['HubeiDeaths'],\n                    line=dict(color='firebrick', width=5,dash='dot'),\n                    name='Hubei Province'))\nfig.add_trace(go.Scatter(x=new2['Date'], y=new2['OtherDeaths'],\n                    line=dict(color='blue', width=5,dash='dot'),\n                    name='Other Provinces'))\nfig.update_layout(title_text='Deaths cases in mainland China: Hubei Province VS Other Provinces')\n\nfig.show()","63c53852":"dataset ='\/kaggle\/input\/novel-corona-virus-2019-dataset\/time_series_2019_ncov_recovered.csv'\ndftimeRec = pd.read_csv(dataset)\ndftimeRec.head()\nsubset3=dftimeRec[dftimeRec['Country\/Region']== 'Mainland China'] \nsubset3.drop(['Lat','Long'], axis=1, inplace=True)\nsubset3[\"Province\/State\"]=np.where(subset3[\"Province\/State\"].eq(\"Hubei\"), \"Hubei\", \"Other\")\nsubRec=subset3.groupby(['Province\/State'],as_index=False).sum()\nnew3=subRec.set_index('Province\/State').T.reset_index()\nnew3.columns = ['Date', 'HubeiRecovered', 'OtherRecovered']\nnew3.head()","6181f967":"fig = go.Figure()\nfig.add_trace(go.Scatter(x=new3['Date'], y=new3['HubeiRecovered'],\n                    line=dict(color='Orange', width=5,dash='dash'),\n                    name='Hubei Province'))\nfig.add_trace(go.Scatter(x=new3['Date'], y=new3['OtherRecovered'],\n                    line=dict(color='Brown', width=5,dash='dash'),\n                    name='Other Provinces'))\nfig.update_layout(title_text='Recovered cases in mainland China: Hubei Province VS Other Provinces')\n\nfig.show()","37808250":"fig = go.Figure()\n\n\n\nfig.add_trace(go.Scatter(x=new['Date'], y=new['HubeiCfmd'],\n                    mode='lines+markers',\n                   name='Confirmed',\n                    line_color='Red'))\n\nfig.add_trace(go.Scatter(x=new2['Date'], y=new2['HubeiDeaths'],\n                    line=dict(color='firebrick', width=5,dash='dot'),\n                    name='Deaths'))\n\nfig.add_trace(go.Scatter(x=new3['Date'], y=new3['HubeiRecovered'],\n                    line=dict(color='Orange', width=5,dash='dash'),\n                    name='Recovered'))\n\nfig.update_layout(title_text='Hubei Province, center of the coronavirus outbreak')\n\nfig.show()","664609f8":"#let's sum up those subsets and make some pies based on confirmed cases \/\/I will rewrite the code\nnewSum=new[new['Date'] =='02\/09\/20 23:20']\nnewSum=newSum.set_index('Date').T.reset_index()\nnewSum.columns = [ 'Province', 'Cases']\nnewSum.head()","d7cf2f9d":"df = px.data.tips()\ncolors=['green','Dark orange']\nfig = px.pie(newSum, values='Cases', names='Province')\nfig.update_traces(textposition='inside', textinfo='percent+label',marker=dict(colors=colors))\n\nfig.update_layout(title_text='Confirmed cases by Feb.09,2020 in Hubei Province compared with the other provinces')\nfig.show()","b7af5921":"#let's sum up those subsets and make some pies based on deaths cases in mainland China\/\/I will rewrite the code\nnew2Sum=new2[new2['Date'] =='02\/09\/20 23:20']\nnew2Sum=new2Sum.set_index('Date').T.reset_index()\nnew2Sum.columns = [ 'Province', 'Cases']\nnew2Sum.head()\n","c879381d":"df = px.data.tips()\ncolors = ['gold', 'mediumturquoise']\nfig = px.pie(new2Sum, values='Cases', names='Province')\n\nfig.update_traces(textposition='inside', textinfo='percent+label',marker=dict(colors=colors, line=dict(color='#000000', width=2)))\nfig.update_layout(title_text='Deaths cases by Feb.09,2020 in Hubei Province compared with the other provinces')\nfig.show()","7d56facf":"#let's sum up those subsets and make some pies based on recovered cases in mainland China\/\/I will rewrite the code\nnew3Sum=new3[new3['Date'] =='02\/09\/20 23:20']\nnew3Sum=new3Sum.set_index('Date').T.reset_index()\nnew3Sum.columns = [ 'Province', 'Cases']\nnew3Sum.head()\n","da507200":"df = px.data.tips()\n\nlabels = new3Sum['Province']\nvalues=new3Sum['Cases']\n\nfig = go.Figure(data=[go.Pie(labels=labels,values=values, hole=.3)])\nfig.update_traces(textposition='inside', textinfo='percent+label')\nfig.update_layout(title_text='Recovered cases by Feb.09,2020 in Hubei Province compared with the other provinces')\nfig.show()","cad4edf9":"As you can see, Hubei, where Wuhan city is the capital of the province, suffers a much more significant loss than anywhere else in the world. Based on the most recent report, Asian people are more likely to be infected by the Coronavirus. ","2bad3f71":"That's it. If you have any comments or suggestions, feel free to let me know. Thank you!","5e47c836":"Several days ago, I created one [notebook](https:\/\/www.kaggle.com\/latong\/zoomable-coronavirus-heatmap) showing Coronavirus heatmaps that track global cases in real-time. Now, I would like to try another approach i.e., plot time series data with [Plotly](https:\/\/plot.ly\/python\/animations\/) in Python."}}