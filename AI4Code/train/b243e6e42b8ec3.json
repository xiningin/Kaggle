{"cell_type":{"964c19a2":"code","f484f428":"code","0af02be3":"code","cee96d5f":"code","6b9c427f":"code","dd84240c":"code","76887467":"code","5fe41754":"code","72dc5545":"code","7a634bcd":"code","a34c911e":"code","fdc5517e":"code","ffc1adac":"code","ae2f6973":"code","d3c6dffb":"code","9bea849b":"code","b620ddb2":"code","cb62b5c3":"markdown","c8bb292f":"markdown","529bfce4":"markdown","afc9408e":"markdown","2faa6c9c":"markdown","15af26dd":"markdown","8d2f6501":"markdown","0571b48b":"markdown"},"source":{"964c19a2":"import pandas as pd\nimport numpy as np\nimport matplotlib.pyplot as plt\nimport seaborn as sns\n%matplotlib inline\n\nfrom sklearn.model_selection import train_test_split\nfrom sklearn.tree import DecisionTreeClassifier\nfrom sklearn.metrics import classification_report,confusion_matrix\nfrom sklearn.ensemble import RandomForestClassifier\nfrom sklearn.metrics import classification_report,confusion_matrix\nfrom pandas_profiling import ProfileReport","f484f428":"df = pd.read_csv('..\/input\/lending-club-loan-data-analysis\/loan_data.csv')\ndf.head()","0af02be3":"report = ProfileReport(df)\nreport","cee96d5f":"df.info()","6b9c427f":"df.describe()","dd84240c":"sns.set_style('whitegrid')\n\nplt.figure(figsize=(10,6))\ndf[df['credit.policy']==1]['fico'].hist(alpha=0.5,color='blue',\n                                              bins=30,label='Credit.Policy=1')\ndf[df['credit.policy']==0]['fico'].hist(alpha=0.5,color='red',\n                                              bins=30,label='Credit.Policy=0')\nplt.legend()\nplt.xlabel('FICO')","76887467":"plt.figure(figsize=(10,6))\ndf[df['not.fully.paid']==1]['fico'].hist(alpha=0.5,color='blue',\n                                              bins=30,label='not.fully.paid=1')\ndf[df['not.fully.paid']==0]['fico'].hist(alpha=0.5,color='red',\n                                              bins=30,label='not.fully.paid=0')\nplt.legend()\nplt.xlabel('FICO')","5fe41754":"plt.figure(figsize=(12,7))\nsns.countplot(x='purpose',hue='not.fully.paid',data=df,palette='Set1')","72dc5545":"sns.jointplot(x='fico',y='int.rate',data=df,color='purple')","7a634bcd":"cat_feats = ['purpose']\n\nfinal_data = pd.get_dummies(df,columns=cat_feats,drop_first=True)\nfinal_data.info()","a34c911e":"X = final_data.drop('not.fully.paid',axis=1)\ny = final_data['not.fully.paid']\nX_train, X_test, y_train, y_test = train_test_split(X, y, test_size=0.30, random_state=101)","fdc5517e":"dtree = DecisionTreeClassifier()\ndtree.fit(X_train,y_train)","ffc1adac":"predictions = dtree.predict(X_test)\nprint(classification_report(y_test,predictions))","ae2f6973":"print(confusion_matrix(y_test,predictions))","d3c6dffb":"rfc = RandomForestClassifier(n_estimators=600)\nrfc.fit(X_train,y_train)","9bea849b":"predictions = rfc.predict(X_test)\nprint(classification_report(y_test,predictions))","b620ddb2":"print(confusion_matrix(y_test,predictions))","cb62b5c3":"## Random Forest e Decision Tree\nNeste projeto foram utilizados dados p\u00fablicos do site LendingClub.com. Lending Club conecta pessoas que precisam de dinheiro (mutu\u00e1rios) com pessoas que tem dinheiro (investidores). Um investidor, por sua vez, gostaria de investir em pessoas que tenham uma grande probabilidade de pagar de volta. Com base nisso, sera feito um modelo que ira prever se o mutu\u00e1rio ira pagar o empr\u00e9stimo integralmente ou n\u00e3o.\n\n___\n\n## Os dados\n\no que as colunas representam:\n\n   - **credit.policy**: 1 se o cliente atender aos crit\u00e9rios de subscri\u00e7\u00e3o de cr\u00e9dito, e 0 caso contr\u00e1rio.\n   - **purpose**: O prop\u00f3sito do empr\u00e9stimo (leva os valores \"credit_card\", \"debt_consolidation\", \"educational\", \"major_purchase\", \"small_business\", and \"all_other\").\n   - **int.rate**: TA taxa de juros do empr\u00e9stimo, como propor\u00e7\u00e3o (uma taxa de 11% seria armazenada como 0,11). Os mutu\u00e1rios considerados pelo LendingClub.com como mais arriscados recebem taxas de juros mais altas.\n   - **installment**: As presta\u00e7\u00f5es mensais devidas pelo mutu\u00e1rio se o empr\u00e9stimo for financiado.\n   - **log.annual.inc**: renda anual auto-relatada do mutu\u00e1rio.\n   - **dti**: rendimento do mutu\u00e1rio (montante da d\u00edvida dividido pelo rendimento anual).\n   - **fico**: A pontua\u00e7\u00e3o de cr\u00e9dito FICO do mutu\u00e1rio.\n   - **days.with.cr.line**: O n\u00famero de dias que o mutu\u00e1rio tem uma linha de cr\u00e9dito.\n   - **revol.bal**: oOsaldo rotativo do mutu\u00e1rio (valor n\u00e3o pago no final do ciclo de faturamento do cart\u00e3o de cr\u00e9dito).\n   - **revol.util**: A taxa de utiliza\u00e7\u00e3o da linha rotativa do mutu\u00e1rio (o valor da linha de cr\u00e9dito usado em rela\u00e7\u00e3o ao cr\u00e9dito total dispon\u00edvel).\n   - **inq.last.6mths**: O n\u00famero de consultas do mutu\u00e1rio por credores nos \u00faltimos 6 meses.\n   - **delinq.2yrs**: O n\u00famero de vezes que o mutu\u00e1rio estava com mais de 30 dias de atraso em um pagamento nos \u00faltimos 2 anos.\n   - **pub.rec** : O n\u00famero de registros p\u00fablicos depreciativos do mutu\u00e1rio (pedidos de fal\u00eancia, gravames fiscais ou julgamentos).\n   - **not.fully.paid**: 0 pagou tudo, 1 falta pagar.","c8bb292f":"## Caracter\u00edsticas Categ\u00f3ricas\n\nA coluna de purpose \u00e9 categ\u00f3rica. Isso significa que \u00e9 necess\u00e1rio usar vari\u00e1veis dummy para que o sklearn seja capaz de interpret\u00e1-la.","529bfce4":"## Train Test Split","afc9408e":"## An\u00e1lise explorat\u00f3ria de dados","2faa6c9c":"## Treinando o Modelo de Decision Tree","15af26dd":"## Previs\u00f5es e avalia\u00e7\u00e3o da Random Forest","8d2f6501":"## Previs\u00f5es e avalia\u00e7\u00e3o da Decision Tree","0571b48b":"## Treinando o Modelo de Random Forest"}}