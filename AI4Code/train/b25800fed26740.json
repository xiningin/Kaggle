{"cell_type":{"15b11181":"code","0219b444":"code","51bf5f94":"code","a0ad1259":"code","1d7d3605":"code","ec00bfb2":"code","0010a153":"code","0fd8cd4c":"code","96ab767b":"code","2652a75a":"code","2f0fcb8f":"code","35d65404":"code","1b8156ab":"markdown","b9a745cd":"markdown","7383ba41":"markdown","9df99f6b":"markdown","69eb6493":"markdown","e9e27420":"markdown","b39e1610":"markdown","78a95b71":"markdown","901b33a4":"markdown","e16e1189":"markdown","d279dc94":"markdown","35af02d3":"markdown","4709fe57":"markdown","c2f48470":"markdown","05346d30":"markdown","e7e4cdf4":"markdown","3e4f747e":"markdown","e251dddb":"markdown","9257f682":"markdown","b81545cc":"markdown"},"source":{"15b11181":"import os\nimport pandas as pd \nimport numpy as np\nimport plotly.plotly as py \nimport plotly.graph_objs as go\nimport matplotlib.pyplot as plt\nfrom IPython.display import Image\ndf = pd.read_csv('..\/input\/UCIRiders0519_2x.csv', delimiter=',')\ndf.head(5)","0219b444":"df['Category']=df['Category'].replace({'CTM': 'Continental', 'WTT': 'WorldTeams', 'PCT': 'Pro Continental', 'CTW': \"Women's Teams\",'PRO':'WorldTeams'})\ndf.shape","51bf5f94":"#Build a count dataframe\nyear_count=pd.DataFrame(df.groupby(['Year','Gender']).size().unstack())\nyear_count['Total']=year_count['Female']+year_count['Male']\npercentfemale=round((year_count['Female']\/(year_count['Female']+year_count['Male']))*100, 1)\nyear_count2=pd.DataFrame(df.groupby(['Year','Category']).size().unstack())\nyear_count['% Female']=(percentfemale).astype(str)+'%'\nyear_count=pd.merge(year_count,year_count2, on = 'Year')\nyear_count=year_count[['Female','Male','Total','% Female',\"Women's Teams\", 'WorldTeams', 'Pro Continental', 'Continental']]\nyear_count\n\n#Format the dataframe\nd = dict(selector=\"th\",props=[('text-align', 'center')])\nyear_count.style.set_properties(**{'width':'6em', 'text-align':'center'}).set_table_styles([d])","a0ad1259":"age_average=pd.DataFrame(df.groupby(['Year','Category'])['Age'].mean().round(1).unstack())\nage_average=age_average[[\"Women's Teams\", 'WorldTeams', 'Pro Continental', 'Continental']]\nage_average\n\n\n#Format the dataframe\nd = dict(selector=\"th\",props=[('text-align', 'center')])\nage_average.style.set_properties(**{'width':'9em', 'text-align':'center'}).set_table_styles([d])","1d7d3605":"#Number of teams per year by gender\nteamcount=df.groupby(['Year','Category'])['Team Name'].nunique().unstack()\nteamcount = teamcount[[\"Women's Teams\", 'WorldTeams', 'Pro Continental', 'Continental']]\nteamcount\n#Format the dataframe\nd = dict(selector=\"th\",props=[('text-align', 'center')])\nteamcount.style.set_properties(**{'width':'9em', 'text-align':'center'}).set_table_styles([d])","ec00bfb2":"teamcount_average=df.groupby(['Year','Category'])['Team Name'].value_counts().reset_index(name='Count of Cyclists')\nteamcount_average=teamcount_average.groupby(['Year','Category'])['Count of Cyclists'].mean().unstack().round(1)\nteamcount_average=teamcount_average[[\"Women's Teams\", 'WorldTeams', 'Pro Continental', 'Continental']]\nteamcount_average\n\n#Format the dataframe\nd = dict(selector=\"th\",props=[('text-align', 'center')])\nteamcount_average.style.set_properties(**{'width':'9em', 'text-align':'center'}).set_table_styles([d])","0010a153":"df['Continent']=df['Continent'].replace({'AFR': 'Africa', 'AME': 'Americas', 'ASI': 'Asia', 'EUR': \"Europe\",'OCE':'Oceania'})\ncont=pd.DataFrame(df.groupby(['Year','Continent']).size().unstack().apply(lambda x: x*100\/x.sum(),axis=1).round(1).applymap('{:.1f}%'.format))\ncont=cont[['Europe','Americas','Oceania','Asia','Africa']]\ncont\n\nd = dict(selector=\"th\",props=[('text-align', 'center')])\ncont.style.set_properties(**{'width':'7em', 'text-align':'center'}).set_table_styles([d])","0fd8cd4c":"gendcont_year=pd.DataFrame(df.groupby(['Year','Continent','Gender']).size().unstack())\ngendcont_year=gendcont_year.fillna(0).astype(int)\ngendcont_year['Total']=gendcont_year['Female']+gendcont_year['Male']\ngendcont_year['% Female']=((gendcont_year['Female']\/gendcont_year['Total'])*100).round(1).astype(str)+'%'\ngendcont_year2=gendcont_year['% Female'].unstack()\ngendcont_year2=gendcont_year2[['Europe','Americas','Oceania','Asia','Africa']]\ngendcont_year2\n\nd = dict(selector=\"th\",props=[('text-align', 'center')])\ngendcont_year2.style.set_properties(**{'width':'7em', 'text-align':'center'}).set_table_styles([d])","96ab767b":"country=pd.DataFrame(df.groupby(['Year','Country']).size().unstack())\ncountry.fillna(0).astype(int)","2652a75a":"df['Country'].value_counts().head(15)","2f0fcb8f":"country1=country[['ITA','BEL','FRA','NED','ESP','USA','GER','AUS','GBR','DEN']]\ncountry1=country1.rename(columns={'ITA':'Italy','BEL':'Belgium','FRA':'France','NED':'Netherlands',\n                                 'ESP':'Spain','USA':'United States','GER':'Germany','AUS':'Australia',\n                                 'GBR':'Great Britain','DEN':'Denmark'})\ncountry1.astype(int)\nd = dict(selector=\"th\",props=[('text-align', 'center')])\ncountry1.style.set_properties(**{'width':'7em', 'text-align':'center'}).set_table_styles([d])","35d65404":"gendcountry=pd.DataFrame(df.groupby(['Year','Country','Gender']).size().unstack())\ngendcountry['% Female']=((gendcountry['Female']\/(gendcountry['Female']+gendcountry['Male']))*100).round(1).astype(str)+'%'\ngendcountry2=gendcountry['% Female'].unstack()\ngendcountry2=gendcountry2[['ITA','BEL','FRA','NED','ESP','USA','GER','AUS','GBR','DEN']]\ngendcountry2=gendcountry2.rename(columns={'ITA':'Italy','BEL':'Belgium','FRA':'France','NED':'Netherlands',\n                                 'ESP':'Spain','USA':'United States','GER':'Germany','AUS':'Australia',\n                                 'GBR':'Great Britain','DEN':'Denmark'})\ngendcountry2\nd = dict(selector=\"th\",props=[('text-align', 'center')])\ngendcountry2.style.set_properties(**{'width':'7em', 'text-align':'center'}).set_table_styles([d])","1b8156ab":"In professional road cycling, there are four categories of teams: Women's, WorldTeam, Pro Continental, and Continental. Women's is the only team category for women(IOW, where Gender==Female). For men, the categories are ranked with WorldTeam the highest and Continental the lowest, with Pro Continental in the middle. Over the past 15 years, the name for WorldTeams has changed, so I will first combine the variations to WorldTeam and change the abbreviations to the full name.","b9a745cd":"## Age of Pro Road Cyclists\nContinental and Women's Teams cyclists are the youngest categories, with an average age of 24.8 and 25.7 years old in 2019. WorldTeam cyclists are the oldest at 28.8 years old, which is a number that has increased from 27.8 since 2005. ","7383ba41":"This visualization shows the gender distribution for the most popular nationalities of 2019. It can be seen that Colombia is home to a large number of professional road cyclists, but has a very low percentage of females. \n![TopCountriesGenderDist-1.png](attachment:TopCountriesGenderDist-1.png)","9df99f6b":"![Tableau_Final_UCIAnalysis-06.png](attachment:Tableau_Final_UCIAnalysis-06.png)","69eb6493":"To combine my interest in professional cycling and statistics with my efforts to learn Python, I compiled data of cyclists racing for UCI-registered road teams from 2005 to 2019. The UCI is professional cycling's governing body and holds an online database of team members [here](https:\/\/www.uci.org\/road\/teams). After cleaning up some incorrect dates of birth and ages, I began playing around with the data. This is the result.\n\nTo begin, I'll import the data and various libraries. Then, take a look at the first few rows of data.","e9e27420":"![Tableau_Final_UCIAnalysis-01.png](attachment:Tableau_Final_UCIAnalysis-01.png)\n\nThe visualization below highlights the share of age groups for different categories. It's interesting to note that half of Women's Teams and Continental cyclists are between the ages of 18-24, in comparison to the approximate one-third of Pro Continental and WorldTeams. \n![Tableau_Final_UCIAnalysis2-2.png](attachment:Tableau_Final_UCIAnalysis2-2.png)","b39e1610":"The count of cyclists per country are shown in the table below. ","78a95b71":"![New_numberofteams-1.png](attachment:New_numberofteams-1.png)","901b33a4":"Additionally, we can look at the share of Women's Teams cyclists that come from each continent. The table below should be read as: In 2019, 17.6% of pro road cyclists from Europe are female. The Americas has seen a huge increase from 4.6% in 2005 to 16.4% in 2019. ","e16e1189":"![AvgCyclistperTeam-1.png](attachment:AvgCyclistperTeam-1.png)","d279dc94":"We can also look at the average size of a team. For WorldTeams, there have been 26 to 30 cyclists per team on average. Continental and Women's teams are considerable smaller at 11 to 13 per team on average. Pro Continental teams are in the middle, with around 19-21 per team. ","35af02d3":"From the following output, it can be seen that Italy, Belgium, and France are the nationalities of the most number of pro road cyclists for the past 15 years. ","4709fe57":"## Pro Road Cycling Teams\nSimilar to the total number of pro female road cyclists, the number of Women's Teams has doubled since 2005. Additionally, team opportunities for Continental cyclists has also increased significantly. The number of WorldTeams is dictated by the UCI and we can see that in 2005, they allowed 20 teams, but in 2019, the number is down to 18. ","c2f48470":"![New_numberofcyclists-1.png](attachment:New_numberofcyclists-1.png)","05346d30":"We can also take a look at the gender distribution by country. Italy, Spain, the Netherlands, and the United States have the largest share of pro female road cyclists. Its interesting to see which countries have a low share of females. Belgium, for example, is one of the largest cycling countries so to see only 10.2% of their professional road cyclists are female is.. not great. ","e7e4cdf4":"This next table shows the count of cyclists per year for the ten most popular nationalities. Great Britain's growth over the last fifteen years is showcased here, as the number of cyclists grew from 26 in 2005 to 135 in 2019. Some countries, however, have seen a decrease. The United States has seen one of the largest drops in pro cyclists; peaking with 204 in 2015, there are now 138 in 2019. ","3e4f747e":"![Tableau_Final_UCIAnalysis-07.png](attachment:Tableau_Final_UCIAnalysis-07.png)","e251dddb":"## Share of Cyclist Nationality\nFrom the first table below, we can see that cyclists from Europe make up the majority of the professional road cycling teams. The share of Europeans has decreased from 78.8% in 2005 to 64.4% in 2019, which is due to a larger share of cyclists from other continents. The largest change is in cyclists from Asia, as the percent of cyclists in 2005 from Asia was 5.4% but is 13% in 2019.","9257f682":"## Count of Pro Road Cyclists\nThe total number of professional road cyclists has been steadily increasing, as there are almost 1,200 more in 2019 than there were fifteen years ago. There are now two times as many professional female road cyclists as there were in 2005. With this growth, the gender share of females has shifted from 9.8% to 15.5%. ","b81545cc":"## Conclusion\nThe changes in pro road cycling over the last fifteen years is summarized below: \n* The number of pro road cyclists has risen by over 1,200 since 2005.  \n* The average age of a pro road cyclist is getting younger. \n* The number of female pro road cyclists and Women's Teams has doubled since 2005. \n* The majority of pro road cyclists are from Europe, but the share from the Americas and Asia has been increasing over the last fifteen years.  \n* The gender imbalance has been improving, and Italy, Canada, Spain, the Netherlands and the United States lead as the countries with the highest share of females."}}