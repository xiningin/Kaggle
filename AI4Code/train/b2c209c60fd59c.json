{"cell_type":{"d8f2bd52":"code","5c03e9d7":"code","e8800461":"code","32dc9c8a":"code","84b95cb8":"code","0df9e929":"markdown","4ced4ea5":"markdown"},"source":{"d8f2bd52":"import pandas as pd\nimport matplotlib.pylab as plt\n%matplotlib inline","5c03e9d7":"train_df = pd.read_csv('..\/input\/train.csv')\nN_FEATURES = 200","e8800461":"def ecdf(s):\n    \"\"\" An ECDF computation function using pandas methods.\"\"\"\n    value_counts_s = s.value_counts()\n    return value_counts_s.sort_index().cumsum().div(len(s))\n","32dc9c8a":"\n\ndef optimal_fd_bins(s):\n    \"\"\" \n    Optimal number of bins using the FD rule of thumb: \n    https:\/\/en.wikipedia.org\/wiki\/Freedman%E2%80%93Diaconis_rule\n    \"\"\"\n    #\u00a0Computeing the interquartile range: \n    #\u00a0https:\/\/en.wikipedia.org\/wiki\/Interquartile_range\n    q1 = s.quantile(0.25)\n    q3 = s.quantile(0.75)\n    iqr = q3 - q1\n    width = 2 * iqr \/ (len(s) ** 0.33)\n    return int((s.max() - s.min()) \/ width)","84b95cb8":"for i in range(N_FEATURES):\n    col = 'var_' + str(i)\n    fig, ax = plt.subplots(1, 2, figsize=(12, 6))\n    \n    # ECDF\n    ecdf(train_df.loc[lambda df: df.target == 0, col]).plot(ax=ax[0], label=\"0\")\n    ecdf(train_df.loc[lambda df: df.target == 1, col]).plot(ax=ax[0], label=\"1\")\n    ax[0].set_title(f\"ECDF for {col}\")\n    ax[0].legend()\n    \n    # Histogram\n    bins = optimal_fd_bins(train_df[col])\n    train_df.loc[lambda df: df.target == 0, col].plot(kind=\"hist\", bins=bins, ax=ax[1], \n                                                      label=\"0\")\n    train_df.loc[lambda df: df.target == 1, col].plot(kind=\"hist\", bins=bins, ax=ax[1], \n                                                      label=\"1\")\n    ax[1].set_title(f\"Freedman\u2013Diaconis histogram for {col}\")\n    ax[1].legend()      \n    \n    plt.show()\n    fig.clf()","0df9e929":"Based on the above plots, it appears that:\n\n* it is indeed easier to see how much two distriubtions differ by inspecting\nthe ecdfs.  \n* median values (and othe statistics) are easier to observe. \n\nSomething to try: plot the ECDF for a normal distribution having the same mean\nand standard deviation and compare it with the ones plotted above. \n\nIf you have more suggestions, leave them in the comments section. \n\nThanks. :)","4ced4ea5":"I have recently checked the following tweet:\n\n<blockquote class=\"twitter-tweet\" data-lang=\"fr\"><p lang=\"en\" dir=\"ltr\">stop plotting histograms.<\/p>&mdash; Hugo Bowne-Anderson (@hugobowne) <a href=\"https:\/\/twitter.com\/hugobowne\/status\/1111657955248783366?ref_src=twsrc%5Etfw\">29 mars 2019<\/a><\/blockquote>\n<script async src=\"https:\/\/platform.twitter.com\/widgets.js\" charset=\"utf-8\"><\/script>\n\n\n\nIndeed, an [ECDF](https:\/\/en.wikipedia.org\/wiki\/Empirical_distribution_function) \nis often easier to explore and think about. Here is a [**blog post**](https:\/\/ericmjl.github.io\/blog\/2018\/7\/14\/ecdfs\/) explaining some of the logic behind this claim.   \n\nLet's see how it translates to this competition's dataset!"}}