{"cell_type":{"4823906f":"code","35778a2a":"code","4709f5a3":"code","0686a20e":"code","749d4db4":"code","c2052daa":"code","657d2c59":"code","09b6c6c2":"code","ad18b3c6":"code","385311ca":"code","9887455e":"code","c14a4bf2":"code","0006755c":"code","bde42315":"code","7095bdbc":"code","2146b540":"code","2c660c45":"code","a2b9f518":"code","590363a3":"code","66bdff6f":"code","e819b3ed":"code","e7089c74":"code","67feb9a6":"code","0314a6c2":"code","3d5c24c6":"code","6b5268cd":"code","a5782900":"code","a0ec2421":"code","92078d4a":"code","6944430c":"code","5de8ef56":"markdown","bfc52aa8":"markdown","28cfafb8":"markdown","fcc69861":"markdown","566543e9":"markdown","a7f59963":"markdown","765ed2c2":"markdown","1ff6c021":"markdown","fced7183":"markdown","22c073ed":"markdown","322d2a8a":"markdown","94bf86d4":"markdown","599c207d":"markdown","83f0606f":"markdown","18782d68":"markdown","77f756c4":"markdown","69ea3b13":"markdown","b2774de2":"markdown","2bf68ba8":"markdown","c1f74790":"markdown","e1034267":"markdown","7f08b667":"markdown","0143723b":"markdown","4ec3031f":"markdown","b83b1310":"markdown","6c36e398":"markdown","a481d9f3":"markdown","808f4669":"markdown","42952739":"markdown","1e8fe45a":"markdown","0a989cd3":"markdown"},"source":{"4823906f":"import pandas as pd\nimport matplotlib.pyplot as plt\nimport seaborn as sns\nimport statsmodels.api as sm\nfrom statsmodels.formula.api import ols\nimport numpy as np","35778a2a":"data = pd.read_csv('..\/input\/house-prices-advanced-regression-techniques\/train.csv')\ndata.head()","4709f5a3":"data.shape","0686a20e":"data.columns","749d4db4":"data.dtypes","c2052daa":"data.isnull().sum().sort_values(ascending=False)[:20]","657d2c59":"data = data.drop(columns=['Id','Street'],axis=1)","09b6c6c2":"data = data.drop(columns=['PoolQC','MiscFeature'],axis=1)","ad18b3c6":"data['TotalBathrooms'] = (data['FullBath'] + (0.5 * data['HalfBath']) + data['BsmtFullBath'] + (0.5 * data['BsmtHalfBath']))","385311ca":"for col in ('FireplaceQu',\n            'Fence',\n            'Alley',\n            'GarageType', \n            'GarageFinish', \n            'GarageQual', \n            'GarageCond'):\n    data[col]=data[col].fillna('None')","9887455e":"data.loc[data['GarageType']!='None', \"GarageYrBlt\"] = data[\"GarageYrBlt\"].fillna(data['GarageYrBlt'].median())\ndata[\"GarageYrBlt\"]=data[\"GarageYrBlt\"].fillna(0)","c14a4bf2":"data[\"LotFrontage\"] = data.groupby(\"Neighborhood\")[\"LotFrontage\"].transform(lambda x: x.fillna(x.median()))","0006755c":"data['YrSold'] = data['YrSold'].astype(str)\ndata['OverallCond'] = data['OverallCond'].astype(str)\ndata['MoSold'] = data['MoSold'].astype(str)\ndata['MSSubClass'] = data['MSSubClass'].apply(str)","bde42315":"encoded_data = pd.get_dummies(data)\nencoded_data.head()","7095bdbc":"data['SalePrice'].describe()","2146b540":"data['SalePrice'].hist(bins=50)","2c660c45":"encoded_data['SalePrice_skewed'] = np.log1p(data['SalePrice']) \nencoded_data['SalePrice_skewed'].hist(bins=50)","a2b9f518":"encoded_data[encoded_data.columns[1:]].corr()['SalePrice_skewed'][:].sort_values(ascending=False)[2:12]","590363a3":"plt.figure(figsize=(20,8))\nsns.regplot(x='GrLivArea', y=\"SalePrice_skewed\", data=encoded_data, color='green')","66bdff6f":"encoded_data[(encoded_data['GrLivArea']> 4000) & (encoded_data['SalePrice_skewed']<13)]","e819b3ed":"encoded_data.drop([523,1298], inplace=True)","e7089c74":"plt.figure(figsize=(10,8))\nsns.boxplot(x=\"OverallQual\", y=\"SalePrice_skewed\", data=encoded_data)","67feb9a6":"plt.figure(figsize=(20,8))\nsns.regplot(x='YearBuilt', y=\"SalePrice_skewed\", data=encoded_data)","0314a6c2":"plt.figure(figsize=(20,10))\nsns.regplot(x='TotalBsmtSF', y=\"SalePrice_skewed\", data=encoded_data, color='purple')","3d5c24c6":"plt.figure(figsize=(10,8))\nsns.boxplot(x=\"TotalBathrooms\", y=\"SalePrice_skewed\", data=encoded_data)","6b5268cd":"from math import exp\npd.set_option('display.max_columns', 500)\noutliers = data[(data['TotalBathrooms']>= 5) & (data['SalePrice']<exp(13))]\noutliers","a5782900":"plt.figure(figsize=(20,10))\nsns.regplot(x='1stFlrSF', y=\"SalePrice_skewed\", data=encoded_data, color='orange')","a0ec2421":"X = sm.add_constant(encoded_data[['GrLivArea','TotalBathrooms','OverallQual','GarageCars']])\nY = encoded_data['SalePrice_skewed']\n\nmodel = sm.OLS(Y, X).fit()\npredictions = model.predict(X) \n\nprint_model = model.summary()\nprint(print_model)","92078d4a":"plt.figure(figsize=(30,10))\nsns.boxplot(x=data['Neighborhood'], y=data['SalePrice'], data=data)","6944430c":"model = ols('SalePrice ~ Neighborhood', data = data).fit()\n                \nanova_result = sm.stats.anova_lm(model, typ=2)\nprint (anova_result)","5de8ef56":"Adding a new feature TotalBathrooms with sum of FullBath and HalfBath + in basement\n","bfc52aa8":"I choose to study the impact of OverallQual on Sale Price.","28cfafb8":"The reason is that the SaleCondition = Partial (means Home was not completed when last assessed)\nI delete those rows.","fcc69861":"Even if the correlation coefficient didn't show it, I presumed that the neighborhood had an impact on the Sale Price.","566543e9":"I choose to study the existence and surface of a first floor vs Sale Price. There is a linear regression ","a7f59963":"I choose to study the Ground Live Area vs Sale Price. There is a linear regression","765ed2c2":"Adjusting skewed data distribution","1ff6c021":"The model explains 82% of the variance of Sale Price !","fced7183":"Using ANOVA to test H0:the mean SalePrice of every neighborhoods are equals","22c073ed":"Checking R-squared with the 4 most correlated features","322d2a8a":"Checking the reasons of outlier : GrLivArea > 4000","94bf86d4":"I choose to study the existence and surface of the basement vs Sale Price. There is a linear regression ","599c207d":"After reading the description.txt, I choose to delete columns that has no interest in my research or are in duplicates","83f0606f":"<br>The BsmtFinType2 indicates Unfinished, this could explain the low sale price. Moreover, the values in YearBuilt are below 1990 : the houses are old\n<br>Finally, the OverallQual values are medium (5\/10)","18782d68":"Checking why there are outliers when +5 bathrooms","77f756c4":"I fill the missing values of the column LotFrontage by the median value","69ea3b13":"When NA means 'none' in the description.txt I fill the missing values of the features by 'None'","b2774de2":"Displaying distribution of the target variable","2bf68ba8":"I also delete the column PoolQC which has a lot of missing values","c1f74790":"Encoding the dataframe into another one","e1034267":"Impact of Full Bathrooms on Sale Price :","7f08b667":"# Statistical Analysis","0143723b":"H0 is rejected : the means are not equal, there is a difference of SalePrice between neighborhoods\nBut based on our correlation result, it is not the main features to influence the SalePrice","4ec3031f":"Study of the Base variable = SalePrice","b83b1310":"# <center>House Price<\/center><br>\n<img src='http:\/\/clipart-library.com\/images_k\/houses-silhouette\/houses-silhouette-5.png'>","6c36e398":"After checking if the house has a garage, I fill the missing values of GarageYrBlt by the median value. \nIf there is no garage I fill GarageYrBlt by 0","a481d9f3":"Making false numerical variables into categorical","808f4669":"# Data exploration and cleaning","42952739":"# Data research","1e8fe45a":"I choose to study the Year of construction vs Sale Price. There is a linear regression ","0a989cd3":"Displyaing top 10 of data correlated to SalePrice"}}