{"cell_type":{"45823f68":"code","c277c350":"code","36502ba0":"code","2844b6ea":"code","7e2ba3fe":"code","a4e90f4c":"code","3d438589":"code","f73c473c":"code","2d292cd1":"code","7b8bc394":"code","358f2e7c":"markdown","d24902de":"markdown"},"source":{"45823f68":"# This Python 3 environment comes with many helpful analytics libraries installed\n# It is defined by the kaggle\/python docker image: https:\/\/github.com\/kaggle\/docker-python\n# For example, here's several helpful packages to load in \n\nimport numpy as np # linear algebra\nimport pandas as pd # data processing, CSV file I\/O (e.g. pd.read_csv)\nimport matplotlib.pyplot as plt\nimport seaborn as sns\nimport plotly\nimport plotly.offline as py\npy.init_notebook_mode(connected=True)\nimport plotly.tools as tls\nimport plotly.graph_objs as go\n\nimport plotly.figure_factory as fig_fact\nplotly.tools.set_config_file(world_readable=True, sharing='public')\n\n# Input data files are available in the \"..\/input\/\" directory.\n# For example, running this (by clicking run or pressing Shift+Enter) will list the files in the input directory\n\nimport os\nprint(os.listdir(\"..\/input\"))\n\n# Any results you write to the current directory are saved as output.","c277c350":"df = pd.read_csv('..\/input\/country_partner_hsproduct4digit_year_2016.csv')","36502ba0":"df.info()","2844b6ea":"df.head()","7e2ba3fe":"# Get total export and import value of each location\ndf_total_export = df.groupby([df.location_code, df.location_name_short_en])['export_value'].sum().reset_index(name = 'total_export')","a4e90f4c":"df_total_export.info()","3d438589":"df_total_import = df.groupby([df.location_code, df.location_name_short_en])['import_value'].sum().reset_index(name = 'total_import')","f73c473c":"def choroplethMap(df_to_draw, value_to_draw, cb_title, plot_title):\n    data = [ dict(\n            type = 'choropleth',\n            locations = df_to_draw['location_code'],\n            z = df_to_draw[value_to_draw],\n            colorscale = [[0,\"rgb(5, 10, 172)\"],[0.35,\"rgb(40, 60, 190)\"],[0.5,\"rgb(70, 100, 245)\"],\\\n                [0.6,\"rgb(90, 120, 245)\"],[0.7,\"rgb(106, 137, 247)\"],[1,\"rgb(220, 220, 220)\"]],\n            autocolorscale = False,\n            reversescale = True,\n            marker = dict(\n                line = dict (\n                    color = 'rgb(180,180,180)',\n                    width = 0.5\n                ) ),\n            colorbar = dict(\n                autotick = False,\n                tickprefix = '$',\n                title = cb_title),\n          ) ]\n\n    layout = dict(\n        title = plot_title,\n        geo = dict(\n            showframe = False,\n            showcoastlines = False,\n            projection = dict(\n                type = 'Mercator'\n            )\n        )\n    )\n\n    fig = dict( data=data, layout=layout )\n    py.iplot( fig, validate=False, filename='d3-world-map' )","2d292cd1":"df_trade_us = df[df['location_code'] == 'USA']","7b8bc394":"choroplethMap(df_trade_us, 'export_value', 'Export value', 'Export value between US and other countries')","358f2e7c":"**Analyze the total export and import globally** by choropleth map","d24902de":"Next, we investigate the trade of the US with other countries"}}