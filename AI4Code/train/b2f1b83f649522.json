{"cell_type":{"d05ab1d9":"code","7e2c4670":"code","9eae5979":"code","9ef66fbe":"code","ab3fda9c":"code","aa83f889":"code","37150d8f":"code","16406959":"code","ad2d3160":"markdown","ca33fca8":"markdown","74ea3f6f":"markdown"},"source":{"d05ab1d9":"import pandas as pd # data processing, CSV file I\/O (e.g. pd.read_csv)\nimport os\nprint(os.listdir(\"..\/input\"))","7e2c4670":"# uninteresting columns\nDROP_COLS = [\"driver_age_raw\",'search_type_raw','id']","9eae5979":"df = pd.read_csv('..\/input\/SC.csv',parse_dates=['stop_date'],infer_datetime_format=True)\nprint(\"# rows:\",df.shape[0])  # RAW data has : 8,440,935 rows\nprint(\"\\n Raw: # columns:\",df.shape[1])\ndf.dropna(how=\"all\",axis=1,inplace=True)\nprint(\"\\n # columns with values:\",list(df.columns))\nprint(\"\\n nunique:\", df.nunique())\ndf.head()","9ef66fbe":"print(df.shape)\nprint(\"\\n nunique:\", df.nunique())","ab3fda9c":"df.drop(DROP_COLS,axis=1,inplace=True)\n## Drop all nan columns. Could drop unary column (State)\n# df.dropna(how=\"all\",axis=1,inplace=True)\ndf.shape","aa83f889":"df.isna().sum()","37150d8f":"df.dropna(subset=[\"stop_date\",\"driver_gender\",\"stop_purpose\",\"driver_race_raw\",\"driver_race\",\"driver_age\",\"location_raw\",\n                  \"officer_id\", \"officer_race\",\"county_fips\",\"stop_outcome\",\"is_arrested\",\"road_number\",\"police_department\"],inplace=True)\ndf.shape","16406959":"df.sample(n=112345).to_csv(\"SC_trafficStops_v1_100k.csv.gz\",index=False,compression=\"gzip\")","ad2d3160":"### Export random sample of data\n* Future: predict stops per road\/location\/geohash + Time\n* Will identify more leaks","ca33fca8":"* Basic data filtering, remove some duplicates, remove some leaks\n    * Example analysis for chicago (text): https:\/\/blog.dominodatalab.com\/bias-policing-analysis-traffic-stop-data\/","74ea3f6f":"## Drop some columns\n* could remove more\/less.\n* data may need mroe cleaning in some cases"}}