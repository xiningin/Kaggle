{"cell_type":{"f3ebb384":"code","af6c70b2":"code","1f4036a4":"code","0fe4f536":"code","39327adc":"code","ee76f2cc":"code","8a2ca7ed":"code","03be1bdc":"code","bc139610":"code","c72a743e":"code","8b4d9a24":"code","f1282d59":"code","b203a153":"code","68c8dd9e":"code","12675298":"code","0dfc1986":"code","fbc469ee":"code","b407e6e2":"code","635230a9":"code","8ee13d0f":"code","3c4ebdd6":"code","94471fc9":"code","a8334524":"code","2e7f12ed":"code","169071e3":"code","637e5a33":"code","34e80aec":"code","ecdc992e":"markdown","90d572cb":"markdown","74687bab":"markdown","32b3334c":"markdown","99222838":"markdown","351b298a":"markdown","c8cc1722":"markdown","35086e33":"markdown","4ba3b8c2":"markdown","f6c0c028":"markdown","ebf12c55":"markdown","4347360c":"markdown","baf8173a":"markdown","ea5ad931":"markdown","719e33b4":"markdown","34c374be":"markdown","9687099d":"markdown","e9ee2057":"markdown","a75decf4":"markdown","d39a3666":"markdown","edf36d1f":"markdown"},"source":{"f3ebb384":"import pandas as pd\nimport numpy as np\nimport seaborn as sns\nimport matplotlib.pyplot as plt\nimport warnings\nwarnings.filterwarnings('ignore')\npd.set_option('max_columns',None)","af6c70b2":"customer = pd.read_csv(\"..\/input\/customer-personality-analysis\/marketing_campaign.csv\", sep = \"\\t\")\n\ncustomer.head()","1f4036a4":"customer.shape","0fe4f536":"customer.dtypes","39327adc":"customer.isnull()","ee76f2cc":"customer.isnull().sum() ","8a2ca7ed":"plt.figure(figsize=(30,20))\nsns.heatmap(customer.isnull(), yticklabels=False, cmap=\"viridis\")","03be1bdc":"print('Is there any missing value? ', customer.isnull().values.any())\nprint('How many missing values? ', customer.isnull().values.sum())\ncustomer = customer.dropna()\nprint('Number of participants after eliminating missing values: ', len(customer))","bc139610":"customer[\"Kids\"] = customer[\"Kidhome\"] + customer[\"Teenhome\"]","c72a743e":"plt.figure(figsize=(20,10))\nsns.countplot(x = \"Education\", data = customer)","8b4d9a24":"plt.figure(figsize=(20,10))\nsns.countplot(x = \"Marital_Status\", data = customer)","f1282d59":"plt.figure(figsize=(20,10))\nsns.countplot(x = \"Education\", hue = \"Kids\",  data = customer)","b203a153":"pal = [\"#682F2F\",\"#B9C0C9\", \"#9F8A78\",\"#F3AB60\"]\nplt.figure(figsize=(30, 30))\n\n\nplt.subplot(321)\ncustomer.groupby([\"Education\"])[\"Kids\"].value_counts().loc[\"Graduation\"].plot.pie(shadow=True,fontsize=20, colors = pal, explode = (0.1,0,0,0), autopct = \"%1.1f%%\")\nplt.title(\"Graduation kategorisindeki ki\u015filerin \u00e7ocuk sahip olma oranlar\u0131\",fontsize=20)\nplt.legend()\n\nplt.subplot(322)\ncustomer.groupby([\"Education\"])[\"Kids\"].value_counts().loc[\"Master\"].plot.pie(shadow=True,fontsize=20, colors = pal, explode = (0.1,0,0,0), autopct = \"%1.1f%%\")\nplt.title(\"Master kategorisindeki ki\u015filerin \u00e7ocuk sahip olma oranlar\u0131\",fontsize=20)\nplt.legend()\n\nplt.subplot(323)\ncustomer.groupby([\"Education\"])[\"Kids\"].value_counts().loc[\"2n Cycle\"].plot.pie(shadow=True,fontsize=20, colors = pal, explode = (0.1,0,0,0), autopct = \"%1.1f%%\")\nplt.title(\"2n Cycle kategorisindeki ki\u015filerin \u00e7ocuk sahip olma oranlar\u0131\",fontsize=20)\nplt.legend()\n\nplt.subplot(324)\ncustomer.groupby([\"Education\"])[\"Kids\"].value_counts().loc[\"PhD\"].plot.pie(shadow=True,fontsize=20, colors = pal, explode = (0.1,0,0,0), autopct = \"%1.1f%%\")\nplt.title(\"PhD kategorisindeki ki\u015filerin \u00e7ocuk sahip olma oranlar\u0131\",fontsize=20)\nplt.legend()\n\nplt.subplot(325)\ncustomer.groupby([\"Education\"])[\"Kids\"].value_counts().loc[\"Basic\"].plot.pie(shadow=True,fontsize=20, colors = pal, explode = (0.1,0,0), autopct = \"%1.1f%%\")\nplt.title(\"Basic kategorisindeki ki\u015filerin \u00e7ocuk sahip olma oranlar\u0131\",fontsize=20)\nplt.legend()","68c8dd9e":"plt.figure(figsize = (20,10))\n\nname_count_graph = sns.countplot(\"Year_Birth\", data=customer, palette=\"Set1\")\nname_count_graph.set_xticklabels(name_count_graph.get_xticklabels(),rotation=45)\nname_count_graph.set_title(\"Veri setindeki ya\u015f aral\u0131\u011f\u0131\", fontsize=15)\nname_count_graph.set_xlabel(\"\", fontsize=12)\nname_count_graph.set_ylabel(\" Ki\u015fi say\u0131s\u0131\", fontsize=12)","12675298":"plt.figure(figsize=(20,10))\ncustomer.groupby(\"Year_Birth\").sum()[[\"Kids\"]]\n\nAge_Kids = sns.barplot(x = \"Year_Birth\", y = \"Kids\", data = customer, orient = \"v\")\nAge_Kids.set_xticklabels(Age_Kids.get_xticklabels(),rotation=45)\nplt.show() ","0dfc1986":"re_marital = {\n    'Single': 'Not in relationship',\n    'Together': 'In relationship',\n    'Married': 'In relationship',\n    'Divorced': 'Not in relationship',\n    'Widow': 'Not in relationship',\n    'Alone': 'Not in relationship',\n    'Absurd': 'Not in relationship',\n    'YOLO': 'Not in relationship'\n}\n\ncustomer['Marital_Status'] = customer['Marital_Status'].map(re_marital)","fbc469ee":"plt.figure(figsize=(5,10))\nsns.countplot(x = \"Marital_Status\", data = customer)","b407e6e2":"plt.figure(figsize=(15, 20))\n\nplt.subplot(231)\nsns.countplot(x = \"AcceptedCmp1\", data = customer)\n\n\nplt.subplot(232)\nsns.countplot(x = \"AcceptedCmp2\", data = customer)\n\n\nplt.subplot(233)\nsns.countplot(x = \"AcceptedCmp3\", data = customer)\n\n\nplt.subplot(234)\nsns.countplot(x = \"AcceptedCmp4\", data = customer)\n\nplt.subplot(235)\nsns.countplot(x = \"AcceptedCmp5\", data = customer)","635230a9":"customer[\"MntTotal\"] = customer[\"MntWines\"] + customer[\"MntFruits\"] + customer[\"MntMeatProducts\"] + customer[\"MntFishProducts\"] + customer[\"MntSweetProducts\"] + customer[\"MntGoldProds\"]\ncustomer[\"NumAllPurchases\"] = customer[\"NumWebPurchases\"] + customer[\"NumCatalogPurchases\"] + customer[\"NumStorePurchases\"]","8ee13d0f":"customer.drop([\"ID\",\"Kidhome\",\"Teenhome\",\"Z_CostContact\",\"Z_Revenue\"], axis = 1, inplace = True)","3c4ebdd6":"customer.head()","94471fc9":"plt.figure(figsize=(20,10))\n\nMntTotal = customer[\"MntTotal\"]\nIncome = customer[\"Income\"]\n\nplt.scatter(Income,MntTotal)\n\nplt.title(\"gelire g\u00f6re toplam harcama\")\nplt.xlabel(\"Income\")\nplt.ylabel(\"MntTotal\")","a8334524":"\nfrom sklearn.preprocessing import StandardScaler\nfrom sklearn.cluster import KMeans\n\ncustomer_clust = customer[['MntTotal', 'Kids', 'NumAllPurchases']].copy()\n\nfor i in customer_clust.columns:\n    customer_clust[i] = StandardScaler().fit_transform(np.array(customer_clust[[i]]))","2e7f12ed":"wcss = []\nfor i in range(1, 10):\n    km = KMeans(n_clusters = i, random_state = 69)\n    km.fit(customer_clust)\n    wcss.append(km.inertia_)\n\na = sns.lineplot(x = range(1, 10), y = wcss, linewidth = 3)\nb = sns.scatterplot(x = range(1, 10), y = wcss,ax=a ,s = 60, edgecolor = 'black', zorder = 5)\n\nplt.ylabel('WCSS')\nplt.xlabel('No.of Cluster')\n\n\nplt.show()","169071e3":"kmeans = KMeans(init = \"k-means++\", n_clusters = 4, n_init = 69)\n\nkmeans.fit(customer_clust)\n\ny = kmeans.predict(customer_clust)\n\ncustomer['Cluster'] = y","637e5a33":"pal = [\"#682F2F\",\"#B9C0C9\", \"#9F8A78\",\"#F3AB60\"]\nplt.figure(figsize=(10,5))\na=sns.barplot(y=customer['Cluster'].value_counts().values,x=customer['Cluster'].value_counts().index,linewidth=0.5,ec='black',zorder=2, palette= pal)\na.set_title(\"K\u00fcmelerin Da\u011f\u0131l\u0131m\u0131\")","34e80aec":"pal = [\"#682F2F\",\"#B9C0C9\", \"#9F8A78\",\"#F3AB60\"]\nplt.figure(figsize=(20,20))\npl = sns.scatterplot(data = customer,x=customer[\"MntTotal\"], y=customer[\"Income\"],hue=customer[\"Cluster\"], palette= pal)\npl.set_title(\"Gelir ve Harcamaya G\u00f6re K\u00fcmelerin Da\u011f\u0131l\u0131m\u0131\")\nplt.legend()\nplt.show()","ecdc992e":"Clustering yaparken en \u00e7ok fayda sa\u011flanak \"k\" de\u011ferinin se\u00e7ilmesi gerekir. Bu grafikte dirsek metodu kullanarak k de\u011ferinin 4 oldu\u011fu anla\u015f\u0131lm\u0131\u015ft\u0131r.","90d572cb":"Gerekli k\u00fct\u00fcphaneler \u00e7a\u011f\u0131r\u0131ld\u0131 ve se\u00e7ilen k\u00fcmeler i\u00e7in standardize i\u015flemi yap\u0131ld\u0131.","74687bab":"Veri setindeki bireylerin medeni durumlar\u0131 g\u00f6sterilmi\u015ftir.","32b3334c":"Veri setinde bulunan e\u011fitim \u00e7e\u015fitlerindeki ki\u015fi say\u0131s\u0131 \u00e7ubuk grafi\u011fine d\u00f6k\u00fcld\u00fc.","99222838":"Ki\u015filerin yap\u0131lan teklifleri ka\u00e7\u0131nc\u0131 seferde kabul ettiklerini g\u00f6sterir. (1: kabul edildi, 0: reddedildi)","351b298a":"E\u011fitim seviyelerinin sahip olunan \u00e7ocuk say\u0131s\u0131na g\u00f6re say\u0131lar\u0131 g\u00f6sterilmi\u015ftir.","c8cc1722":"Her ya\u015f grubundaki toplam ki\u015fi say\u0131s\u0131 g\u00f6sterildi.","35086e33":"Se\u00e7ilen k de\u011feri ile tahmin yap\u0131ld\u0131 ve bir column olarak eklendi.","4ba3b8c2":"Eksik verileri g\u00f6steren \u0131s\u0131 haritas\u0131 \u00e7\u0131kart\u0131larak eksik verilerin nerelerde oldu\u011funu g\u00f6rmek kolayla\u015ft\u0131r\u0131ld\u0131.","f6c0c028":"Toplam \u00e7ocuk say\u0131s\u0131 hesaplanarak yeni bir column olarak eklendi ve ileride yap\u0131lacak i\u015flemler i\u00e7in kolayl\u0131k sa\u011fland\u0131.","ebf12c55":"\u015eekildeki grafiklerde farkl\u0131 e\u011fitim seviyelerine sahip gruplar\u0131n \u00e7ocuk sahibi olma e\u011filimleri g\u00f6sterilmi\u015ftir.","4347360c":"Gelire g\u00f6re toplam harcama da\u011f\u0131l\u0131m garfi\u011fi \u00e7izildi.","baf8173a":"Her ya\u015f grubunun ortalama sahip oldu\u011fu \u00e7ocuk say\u0131s\u0131 g\u00f6sterildi.","ea5ad931":"Eksik veriler az say\u0131da ve sadece tek column'da oldu\u011fu i\u00e7in silme tercih edildi.","719e33b4":"Gereksiz g\u00f6r\u00fclen s\u00fctunlar silindi","34c374be":"**Clustering**","9687099d":"M\u00fc\u015fterilerin toplamda ne kadar \u00fcr\u00fcn harcamas\u0131 yapt\u0131\u011f\u0131 ve al\u0131mlar\u0131 yapt\u0131\u011f\u0131 yerlerin toplam\u0131 g\u00f6sterildi","e9ee2057":"\u0130li\u015fkisi olan ve olmayan ki\u015filerin toplam say\u0131s\u0131 g\u00f6sterildi","a75decf4":"K\u00fcmelerin da\u011f\u0131l\u0131m grafikleri g\u00f6sterildi.","d39a3666":"\u00c7ok \u00e7e\u015fitli say\u0131da medeni durum sadece 2 de\u011fi\u015fkene indirildi.","edf36d1f":"Gelir ve harcamaya g\u00f6re k\u00fcmelerin da\u011f\u0131l\u0131m\u0131 g\u00f6sterildi.\n0: Y\u00fcksek harcama ve y\u00fcksek gelir.\n1: D\u00fc\u015f\u00fck harcama ve d\u00fc\u015f\u00fck gelir.\n2: Y\u00fcksek harcama ve ortalama gelir.\n3: D\u00fc\u015f\u00fck harcama ve ortalama gelir."}}