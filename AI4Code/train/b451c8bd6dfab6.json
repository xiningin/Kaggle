{"cell_type":{"1efd90f3":"code","e75ad72a":"code","ab1f49bd":"code","95f2c3a1":"markdown"},"source":{"1efd90f3":"!cp -r ..\/input\/detoxify\/detoxify-master detoxify\n!pip install -q .\/detoxify\n!rm -rf .\/detoxify","e75ad72a":"from transformers import AutoTokenizer\nfrom detoxify import Detoxify","ab1f49bd":"max_len = 300\nhuggingface_config_path = '..\/input\/bert-base-uncased'\ndetox = Detoxify(model_type='original',  \n                 checkpoint='..\/input\/detoxify-models\/toxic_original-c1212f89.ckpt',\n                 device='cpu',\n                 huggingface_config_path=huggingface_config_path)\n\n# A little trick allowing us to set max_len\ndetox.tokenizer = AutoTokenizer.from_pretrained(huggingface_config_path,\n                    local_files_only=True,\n                    model_max_length=max_len)\n\nresults = detox.predict('I am not toxic, sorry!')\nprint(results)","95f2c3a1":"This simple notebook shows how *detoxify* package can be used in an offline mode.\n\n**Changelog:**\n* V3 - specified a device to use\n* V2 - max_len can be now set to a desired  value"}}