{"cell_type":{"2288aa0f":"code","9bb830ee":"code","e2edb5b8":"code","ef25b92a":"code","6ee0a592":"code","613d09f5":"code","723a081b":"code","87f53e54":"code","0b4e769f":"code","54af5825":"code","43c3a4b5":"code","9e410e82":"code","0735f307":"code","88a40092":"code","032b4143":"code","86c6796d":"code","6427ec04":"code","7e1f9e7e":"code","1c1c4943":"code","7b575c8e":"code","cf0f7c78":"code","ccb032fd":"code","1b20ae11":"code","aa1d0d77":"code","70713764":"code","a96e52bb":"code","b3e31a54":"code","b885ef86":"code","04935be7":"code","68340509":"code","4ddaf601":"code","1a85b653":"code","f79e7aa3":"code","d53e80db":"code","8783cd81":"code","da237c54":"code","b73bf3e0":"code","14404016":"code","6b008f89":"code","a0412f47":"code","c033af97":"code","ab51fcdc":"code","8d9bffcb":"code","1b2add99":"code","9ff4990d":"code","507f494e":"code","92c875c3":"code","1ecb2953":"code","65884f47":"code","3cfbc22d":"code","ce461b70":"code","b1174381":"code","67c3ce2a":"code","940de902":"code","55de5b0f":"code","a89051a2":"code","bd081619":"code","2bebf6aa":"code","c1b3f7d1":"markdown","437939f3":"markdown","751d66ae":"markdown","e3b417e7":"markdown","308da216":"markdown","c0c09277":"markdown","da7be2a4":"markdown","50bdd8d3":"markdown","b19d4e7a":"markdown","8c257c06":"markdown","5c55a0bb":"markdown","de1dd662":"markdown","f5b357ee":"markdown","d39398c1":"markdown","3c8f2c3f":"markdown","4408536d":"markdown","c32a3eb0":"markdown","9222d4b0":"markdown","a5f383c4":"markdown","0977c0b5":"markdown","48750885":"markdown","acaa477b":"markdown","8d7f8d22":"markdown","bd22ef1e":"markdown","5f4b94f1":"markdown","fc247dc7":"markdown","aae3844e":"markdown"},"source":{"2288aa0f":"pip install xgboost","9bb830ee":"import numpy as np #Mengolah matrix\nimport pandas as pd #Read structured data\nimport matplotlib.pyplot as plt #Data plot visualization\nimport seaborn as sns\n\n#Machine Learning\nimport statsmodels.api as sm\nfrom statsmodels.stats.outliers_influence import variance_inflation_factor\nfrom sklearn.preprocessing import StandardScaler  #Feature Scaling\nfrom sklearn.model_selection import train_test_split #Data Partition\nfrom sklearn.linear_model import LogisticRegression\nfrom sklearn.metrics import accuracy_score\nfrom sklearn.metrics import confusion_matrix,accuracy_score,roc_curve,classification_report\nfrom sklearn.linear_model import LogisticRegression \nfrom sklearn.svm import SVC\nfrom sklearn.tree import DecisionTreeClassifier\nfrom sklearn.neighbors import KNeighborsClassifier\nfrom sklearn.naive_bayes import GaussianNB\nfrom sklearn.ensemble import  RandomForestClassifier\nimport warnings\nwarnings.filterwarnings(\"ignore\")\nfrom xgboost import XGBClassifier\nfrom xgboost import plot_importance\n\n#ensembling\nfrom sklearn.ensemble import VotingClassifier","e2edb5b8":"eshop = pd.read_csv('..\/input\/eshop-clothing-dataset\/e-shop clothing 2008.csv', delimiter=',')","ef25b92a":"eshop.shape","6ee0a592":"eshop","613d09f5":"# filter vriable page\npage = eshop[(eshop['page']==2)]\npage","723a081b":"# filter vriable page\npage3 = eshop[(eshop['page']==3)]\npage3","87f53e54":"harga_no = eshop[(eshop['price 2']==2)]\nharga_no","0b4e769f":"harga_yes = eshop[(eshop['price 2']==1)]\nharga_yes","54af5825":"numerik= eshop.select_dtypes(exclude='O')\nbaju = eshop.select_dtypes(include='O')","43c3a4b5":"baju.columns","9e410e82":"# encoding for categorical data\nfrom sklearn.preprocessing import OrdinalEncoder","0735f307":"oe = OrdinalEncoder()\nenkode = oe.fit_transform(baju)\nenkode","88a40092":"dat_cat = pd.DataFrame(enkode,columns=baju.columns).astype('int')\ndat_cat","032b4143":"# reconstruct data\neshop2 = pd.concat([numerik,dat_cat],axis=1)\neshop2","86c6796d":"harga_yes2 = eshop2[(eshop2['price 2']==1)]\nharga_yes2","6427ec04":"harga_no2 = eshop2[(eshop2['price 2']==2)]\nharga_no2","7e1f9e7e":"beige = eshop2[(eshop2['colour']==1)]\nbeige","1c1c4943":"eshop2.info()","7b575c8e":"cols= [\"#C2C4E2\",\"#EED4E5\"]\nplt.figure(figsize=(10,10))\nsns.countplot(x= eshop2['price 2'], palette = 'Blues')\n\nplt.show()","cf0f7c78":"cols= [\"#C2C4E2\",\"#EED4E5\"]\nplt.figure(figsize=(10,10))\nsns.barplot(x= eshop2['page 1 (main category)'], y= eshop2['price'],palette = 'Blues')\nplt.xlabel('Kategori Pakaian')\nplt.ylabel('Harga (Dalam Dollar)')\nplt.show()","ccb032fd":"plt.figure(figsize=(15,15))\nsns.barplot(x=eshop2['country'],y=eshop2['colour'])\nplt.show()","1b20ae11":"plt.figure(figsize=(10,10))\nsns.countplot(x=beige['country'])\nplt.show()","aa1d0d77":"category1 = eshop2[(eshop2['page 1 (main category)']==1)]\ncategory1","70713764":"plt.figure(figsize=(10,10))\nsns.countplot(x=category1['country'])\n\nplt.show()","a96e52bb":"corr = eshop2.corr(method = 'pearson')","b3e31a54":"colormap = plt.cm.PuBu \nplt.figure(figsize=(15,5)) \nplt.title(\"Person Correlation of Features\", y = 1, size = 20) \nsns.heatmap(corr.astype(float).corr(), linecolor = \"white\", cmap = colormap, annot = True)","b885ef86":"eshop2.isnull().sum()","04935be7":"eshop.describe()","68340509":"sns.boxplot(eshop2[\"day\"])","4ddaf601":"sns.boxplot(eshop2[\"session ID\"])","1a85b653":"sns.boxplot(eshop2[\"page 1 (main category)\"])","f79e7aa3":"sns.boxplot(eshop2[\"page 2 (clothing model)\"])","d53e80db":"sns.boxplot(eshop2[\"colour\"])","8783cd81":"sns.boxplot(eshop2[\"price\"])","da237c54":"sns.boxplot(eshop2[\"page\"])","b73bf3e0":"#Data 'price' diisi dengan median\nfill=eshop2[\"price\"].median()\neshop2[\"price\"]=eshop2[\"price\"].fillna(fill)","14404016":"#lihat outlier observasi pada variabel 'price'\nQ1 =eshop2[\"price\"].quantile(0.25)\nQ3 =eshop2[\"price\"].quantile(0.75)    \nIQR=Q3-Q1\nlower_range = Q1 -(1.5 * IQR)\nupper_range = Q3 +(1.5 * IQR)\neshop2.loc[(eshop2[\"price\"]>upper_range),:]","6b008f89":"#Ganti outlier observations dengan upper bound dan lower bound\neshop2.loc[(eshop2[\"price\"]>upper_range),\"price\"]=upper_range","a0412f47":"sns.boxplot(eshop2[\"price\"])","c033af97":"#Data 'page' diisi dengan median\nfill=eshop2[\"page\"].median()\neshop2[\"page\"]=eshop2[\"page\"].fillna(fill)","ab51fcdc":"#lihat outlier observasi pada variabel 'page'\nQ1 =eshop2[\"page\"].quantile(0.25)\nQ3 =eshop2[\"page\"].quantile(0.75)    \nIQR=Q3-Q1\nlower_range = Q1 -(1.5 * IQR)\nupper_range = Q3 +(1.5 * IQR)\neshop2.loc[(eshop2[\"page\"]>upper_range),:]","8d9bffcb":"#Ganti outlier observations dengan upper bound dan lower bound\neshop2.loc[(eshop2[\"page\"]>upper_range),\"page\"]=upper_range","1b2add99":"sns.boxplot(eshop2[\"page\"])","9ff4990d":"eshop2.duplicated()","507f494e":"\ny = eshop2[\"price 2\"]\nX = eshop2.drop('price 2',axis=1)\nX_train, X_test, y_train, y_test = train_test_split(X, y, train_size=0.20, random_state = 0)","92c875c3":"scaler = StandardScaler()\nX_train = scaler.fit_transform(X_train)\nX_test = scaler.transform(X_test)\n\n#https:\/\/www.megabagus.id\/feature-scaling\/","1ecb2953":"m1 = 'Logistic Regression'\nlr = LogisticRegression()\nmodel = lr.fit(X_train, y_train)\nlr_predict = lr.predict(X_test)\nlr_conf_matrix = confusion_matrix(y_test, lr_predict)\nlr_acc_score = accuracy_score(y_test, lr_predict)\nprint(\"confussion matrix\")\nprint(lr_conf_matrix)\nprint(\"\\n\")\nprint(\"Accuracy of Logistic Regression:\",lr_acc_score*100,'\\n')\nprint(classification_report(y_test,lr_predict))","65884f47":"m2 = 'Naive Bayes'\nnb = GaussianNB()\nnb.fit(X_train,y_train)\nnbpred = nb.predict(X_test)\nnb_conf_matrix = confusion_matrix(y_test, nbpred)\nnb_acc_score = accuracy_score(y_test, nbpred)\nprint(\"confussion matrix\")\nprint(nb_conf_matrix)\nprint(\"\\n\")\nprint(\"Accuracy of Naive Bayes model:\",nb_acc_score*100,'\\n')\nprint(classification_report(y_test,nbpred))","3cfbc22d":"m3 = 'Random Forest Classfier'\nrf = RandomForestClassifier(n_estimators=20, random_state=12,max_depth=5)\nrf.fit(X_train,y_train)\nrf_predicted = rf.predict(X_test)\nrf_conf_matrix = confusion_matrix(y_test, rf_predicted)\nrf_acc_score = accuracy_score(y_test, rf_predicted)\nprint(\"confussion matrix\")\nprint(rf_conf_matrix)\nprint(\"\\n\")\nprint(\"Accuracy of Random Forest:\",rf_acc_score*100,'\\n')\nprint(classification_report(y_test,rf_predicted))","ce461b70":"m4 = 'K-NeighborsClassifier'\nknn = KNeighborsClassifier(n_neighbors=10)\nknn.fit(X_train, y_train)\nknn_predicted = knn.predict(X_test)\nknn_conf_matrix = confusion_matrix(y_test, knn_predicted)\nknn_acc_score = accuracy_score(y_test, knn_predicted)\nprint(\"confussion matrix\")\nprint(knn_conf_matrix)\nprint(\"\\n\")\nprint(\"Accuracy of K-NeighborsClassifier:\",knn_acc_score*100,'\\n')\nprint(classification_report(y_test,knn_predicted))","b1174381":"m5 = 'DecisionTreeClassifier'\ndt = DecisionTreeClassifier(criterion = 'entropy',random_state=0,max_depth = 6)\ndt.fit(X_train, y_train)\ndt_predicted = dt.predict(X_test)\ndt_conf_matrix = confusion_matrix(y_test, dt_predicted)\ndt_acc_score = accuracy_score(y_test, dt_predicted)\nprint(\"confussion matrix\")\nprint(dt_conf_matrix)\nprint(\"\\n\")\nprint(\"Accuracy of DecisionTreeClassifier:\",dt_acc_score*100,'\\n')\nprint(classification_report(y_test,dt_predicted))","67c3ce2a":"m6 = 'Support Vector Classifier'\nsvc =  SVC(kernel='rbf', C=2)\nsvc.fit(X_train, y_train)\nsvc_predicted = svc.predict(X_test)\nsvc_conf_matrix = confusion_matrix(y_test, svc_predicted)\nsvc_acc_score = accuracy_score(y_test, svc_predicted)\nprint(\"confussion matrix\")\nprint(svc_conf_matrix)\nprint(\"\\n\")\nprint(\"Accuracy of Support Vector Classifier:\",svc_acc_score*100,'\\n')\nprint(classification_report(y_test,svc_predicted))","940de902":"model = XGBClassifier()\nmasuk = model.fit(X,y)\nprint(model.feature_importances_)","55de5b0f":"plot_importance(model)\nplt.show()","a89051a2":"model_ev = pd.DataFrame({'Model': ['Logistic Regression','Naive Bayes','Random Forest',\n                    'K-Nearest Neighbour','Decision Tree','Support Vector Machine'], 'Accuracy': [lr_acc_score*100,\n                    nb_acc_score*100,rf_acc_score*100,knn_acc_score*100,dt_acc_score*100,svc_acc_score*100]})\nmodel_ev","bd081619":"colors = ['red','green','blue','purple','yellow','orange',]\nplt.figure(figsize=(12,5))\nplt.title(\"barplot Represent Accuracy of different models\")\nplt.xlabel(\"Accuracy % \\n\")\nplt.ylabel(\"Algorithms \\n\")\nplt.bar(model_ev['Model'],model_ev['Accuracy'],color = colors)\nplt.show()","2bebf6aa":"m1 = LogisticRegression()\nm2 = GaussianNB()\nm3 = RandomForestClassifier()\nm4 = KNeighborsClassifier()\nm5 = DecisionTreeClassifier()\nm6 = SVC()\n\nmodel = VotingClassifier(estimators\n    =[('lr', m1), ('nb', m2), ('rf', m3),\n      ('knn', m4), ('dt', m5), ('svc', m6)], voting='hard')\nmodel.fit(X_train,y_train)\nmodel.score(X_test,y_test)","c1b3f7d1":"Finding Duplicate Data","437939f3":"# MODEL FITTING\n\nDi sini saya mengambil Algoritma Machine Learning yang berbeda dan mencoba menemukan algoritma yang memprediksi secara akurat.\n\n>1. Logistic Regression\n2. Naive Bayes\n3. Random Forest Classifier\n4. K-Nearest Neighbour\n5. Decision Tree\n6. Support Vector Machine","751d66ae":"# DATA PREPARATION\n\nMissing Value Checking","e3b417e7":"# CONCLUSION","308da216":"# EXPLORATORY AND VISUAIZATION DATA ANALISYS","c0c09277":"***DATA DESCRIPTIONS***\n\nIndependent Variables (x):\n1. year : (2008)\n\n2. month : from April (4) to August (8)\n\n3. day : day number of the month\n\n4. order : sequence of clicks during one session\n\n5. country : \n\n1-Australia\n2-Austria\n3-Belgium\n4-British Virgin Islands\n5-Cayman Islands\n6-Christmas Island\n7-Croatia\n8-Cyprus\n9-Czech Republic\n10-Denmark\n11-Estonia\n12-unidentified\n13-Faroe Islands\n14-Finland\n15-France\n16-Germany\n17-Greece\n18-Hungary\n19-Iceland\n20-India\n21-Ireland\n22-Italy\n23-Latvia\n24-Lithuania\n25-Luxembourg\n26-Mexico\n27-Netherlands\n28-Norway\n29-Poland\n30-Portugal\n31-Romania\n32-Russia\n33-San Marino\n34-Slovakia\n35-Slovenia\n36-Spain\n37-Sweden\n38-Switzerland\n39-Ukraine\n40-United Arab Emirates\n41-United Kingdom\n42-USA\n43-biz (.biz) 44-com (.com)\n45-int (.int) 46-net (.net)\n47-org (*.org)\n\n6. session ID :\n\n7. page 1 (main category) : \n\n1-trousers \n\n2-skirts\n\n3-blouses\n\n4-sale \n\n8. page 2 (clothing model 1) : contains information about the code for each product (217 products)\n\n9. colour : \n\n1-beige\n\n2-black\n\n3-blue\n\n4-brown\n\n5-burgundy\n\n6-gray\n\n7-green\n\n8-navy blue\n\n9-of many colors\n\n10-olive\n\n11-pink\n\n12-red\n\n13-violet\n\n14-white\n\n10. location : \n\n1-top left\n\n2-top in the middle\n\n3-top right\n\n4-bottom left\n\n5-bottom in the middle\n\n6-bottom right\n\n11. model photography : 1-en face, 2-profile\n\n12. price : price in US dollars\n\n13. page : page number within the e-store website (from 1 to 5)\n\n\n\nDependent Variable (y):\n\n14. target : price 2 (1-yes, 2-no)","da7be2a4":"# LOADING LIBRARIES AND DATA SET","50bdd8d3":"-> price","b19d4e7a":"# MODEL EVALUATION","8c257c06":"# ENSEMBLING\n>In order to increase the accuracy of the model we use ensembling. Here I use Max Voting technique (BASIC).\n\nMetode max voting umumnya digunakan untuk masalah klasifikasi. Dalam teknik ini, beberapa model digunakan untuk membuat prediksi untuk setiap titik data. Prediksi oleh masing-masing model dianggap sebagai 'suara'. Prediksi yang didapatkan dari sebagian besar model digunakan sebagai prediksi akhir.","5c55a0bb":"1. Serangkaian model yang beragam cenderung membuat keputusan yang lebih baik dibandingkan dengan dengan model tunggal.\n2. Data yang paling besar pengaruhnya terhadap harga rata-rata diantaranya adalah price, page 1(main category), page 2(clothing model), location, colour, page.","de1dd662":">Dari tabel korelasi dapat dilihat bahwa age mempunyai hubungan linear positif yang sangat kuat dengan target jika dibandingkan yang lain. Nilai korelasi variabel lain hampir mendekati nol yang menandakan bahwa variable2 tersebut kurang berpengaruh terhadap nilai target.","f5b357ee":"Di atas adalah beberapa faktor yang mempengaruhi apakah suatu nilai pakaian lebih mahal dari harga rata-rata pakaian di toko tersebut. Selain harga, ada pula kategori dari pakaian tersebut. Warna juga mempengaruhi apakah pakaian tersebut lebih mahal dari rata-rata barang lain atau tidak.","d39398c1":"# E-SHOP CLOTHING 2008\n***DATA UNDERSTANDING***\n\nPrediksi terhadap e-store website untuk mengetahui harga pakaian yang diatas harga rata-rata berdasarkan variable-variable penentunya.","3c8f2c3f":"Max Voting","4408536d":"Fill Missing Values\n\n-> Dataset hasn't any missing value.","c32a3eb0":"Normalization \/ Feature Scaling\n\nMembuat tiap fitur memiliki nilai rata-rata 0 dan variansi 1.","9222d4b0":"Outlier Fixing (price, page)","a5f383c4":"Mengidentifikasi tipe data dan keberadaan nilai yang hilang","0977c0b5":"Dataset yang akan saya gunakan yaitu data mengenai e-shop website pada tahun 2008 berisikan tanggal, model pakaian, negara, dan lain-lain yang saya unduh langsung pada kaggle https:\/\/www.kaggle.com\/adityawisnugrahas\/eshop-clothing-dataset","48750885":"Langkah selanjutnya adalah memperoleh pengetahuan tentang statistik ringkasan data dasar menggunakan metode .describe(), yang menghitung nilai count, mean, standar deviasi, minimum, maksimum dan persentil (25, 50 dan 75). Ini membantu kita mendeteksi anomali apa pun dalam kumpulan data kita. Seperti variabel dengan varians tinggi atau data yang sangat miring.","acaa477b":"Negara Polandia adalah negara terbanyak yang membeli kategori 1 yaitu celana panjang (Trousers)","8d7f8d22":"Plot warna pakaian beige paling banyak di negara mana?","bd22ef1e":"Negara Polandia adalah negara yang paling banyak membeli pakaian berwarna beige","5f4b94f1":"-> page","fc247dc7":">Sebelum menerapkan algoritma kita harus memeriksa apakah data dibagi rata atau tidak, karena jika data tidak dibagi rata akan menyebabkan masalah ketidakseimbangan data\n\nTrain and Test Split\n\nUntuk dibawah ini, sample untuk data latih sebesar 20% dan nantinya akan diujikan dengan data uji sebesar 80%.","aae3844e":"Outlier Finding"}}