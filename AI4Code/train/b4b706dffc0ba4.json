{"cell_type":{"97aa119a":"code","fc7e279e":"code","1924a796":"code","110c215e":"code","818d3a08":"code","8e1f9ca7":"code","d4e70ab3":"code","f58527f2":"code","ef827b97":"code","a53e3bc6":"code","187a2d38":"code","eee40dea":"code","ec5e7b3b":"code","a7280f72":"code","b95b70a0":"code","d6f6049f":"code","20849b80":"code","6aadab89":"code","52ddd71d":"code","26a50282":"code","8455870f":"code","9f8377d8":"code","9746a93f":"code","b512dfa7":"code","bde8079f":"code","d2faff3e":"code","ab3cf563":"code","0c9c58fa":"code","7a064a73":"code","e791c566":"code","e9afc20e":"code","35f4b65e":"code","441bbcab":"code","ec4d6609":"code","c2b885ad":"code","4f94c0c6":"code","0158a6f5":"code","dededd22":"code","2e187da9":"code","6c22d8c3":"code","a9d9bf19":"code","9b96dec0":"code","3f831e1b":"code","9987c681":"code","74ce378f":"code","00bbe9f0":"code","153b665b":"code","b4edbda8":"code","38775327":"code","44114f57":"code","c1e32651":"code","48091667":"code","745a372b":"code","6eb9a61d":"code","eb5ebdd0":"code","dd5cd7a1":"code","3da36e94":"code","9733d4a3":"code","72b9fccf":"code","c63c054e":"code","fd3cab0e":"code","7274450a":"code","ab34d3bc":"code","1bfb5c71":"code","1ae66ad7":"code","6b54c16c":"code","0dbd15cb":"code","18c8906e":"code","f9126c44":"markdown","df66bb0b":"markdown","251c12a4":"markdown","fc21f14b":"markdown","6fe361ad":"markdown","7b9662ec":"markdown","43e38aa1":"markdown","9ed1bdf1":"markdown","4cdedcb5":"markdown","09497234":"markdown","4271d46f":"markdown","c11c9461":"markdown","c8ab98ff":"markdown","01c42731":"markdown","1d29583d":"markdown","33e96e53":"markdown","056cea56":"markdown","e8db0ab0":"markdown","a709ee64":"markdown","bcba1de5":"markdown","2d10482e":"markdown","58a33908":"markdown","c3d5e6e8":"markdown","80f87b79":"markdown","c01820e5":"markdown","0716e201":"markdown","ac16b856":"markdown","773641c6":"markdown","31038a4b":"markdown","17615607":"markdown","e877a9d1":"markdown","b8e1c405":"markdown"},"source":{"97aa119a":"from IPython.display import YouTubeVideo","fc7e279e":"YouTubeVideo(id=\"mZ7Vefzh2hU\",width=1000,height=400)","1924a796":"from IPython.display import clear_output \n!pip install fast_ml \nclear_output()","110c215e":"import pandas as pd \nimport seaborn as sns  \nimport plotly.express as px \nimport matplotlib.pyplot as plt\nimport warnings \nwarnings.filterwarnings(\"ignore\")","818d3a08":"from fast_ml.outlier_treatment import OutlierTreatment \nfrom sklearn.feature_selection import VarianceThreshold \nfrom sklearn.preprocessing import LabelEncoder \nfrom sklearn.tree import DecisionTreeClassifier   \nfrom sklearn.model_selection import train_test_split\nfrom sklearn import tree","8e1f9ca7":"df = pd.read_csv(r\"..\/input\/customer-analytics\/Train.csv\")","d4e70ab3":"df.head()","f58527f2":"df.dtypes","ef827b97":"df.info()","a53e3bc6":"df.isna().sum()","187a2d38":"df.shape","eee40dea":"object_columns = df.select_dtypes(include=['object'])","ec5e7b3b":"object_columns = df.select_dtypes(include=['object'])\nwarehouse = object_columns[\"Warehouse_block\"].value_counts().reset_index() \nwarehouse.columns = ['warehouse',\"values\"] \nfig = px.pie(warehouse,names='warehouse',values='values',color_discrete_sequence=px.colors.sequential.matter_r) \nfig.show()","a7280f72":"gender = object_columns['Gender'].value_counts().reset_index() \ngender.columns = [\"Gender\",\"Counts\"]  \ngender.drop(\"Gender\",axis=1,inplace=True)\ngender[\"Gender\"] = [\"Male\",\"Female\"]\nfig = px.pie(gender,names='Gender',values='Counts',color_discrete_sequence=px.colors.sequential.Electric) \nfig.update_traces(textinfo='percent+label')","b95b70a0":"transport = object_columns[\"Mode_of_Shipment\"].value_counts().reset_index() \ntransport.columns = [\"Mode\",\"Values\"] \nfig = px.pie(transport,names='Mode',values='Values',color_discrete_sequence=px.colors.sequential.Magenta_r) \nfig.update_traces(textinfo='percent+label')","d6f6049f":"product = object_columns['Product_importance'].value_counts().reset_index() \nproduct.columns = ['Importance','Values'] \nfig = px.pie(product,names='Importance',values='Values',color_discrete_sequence=px.colors.sequential.Emrld_r) \nfig.update_traces(textinfo='percent+label')","20849b80":"integer_columns = df.select_dtypes(include=['int64'])","6aadab89":"integer_columns","52ddd71d":"customer = df[\"Customer_care_calls\"].value_counts().reset_index() \ncustomer.columns = [\"Number of times\",\"Value\"] \nfig = px.pie(customer,names=\"Number of times\",values=\"Value\") \nfig.update_traces(textinfo='percent+label')","26a50282":"customer = df[\"Customer_rating\"].value_counts().reset_index() \ncustomer.columns = [\"Ratings\",\"Value\"]  ","8455870f":"customer[\"Ratings\"] = [\"Rating_\"+str(i) for i in customer[\"Ratings\"].tolist()]","9f8377d8":"fig = px.pie(customer,names=\"Ratings\",values=\"Value\",color_discrete_sequence=px.colors.sequential.algae_r) \nfig.update_traces(textinfo='percent+label')","9746a93f":"Prior_purchases = df[\"Prior_purchases\"].value_counts().reset_index() \nPrior_purchases.columns = [\"Prior_purchases\",\"Value\"] \nPrior_purchases = Prior_purchases[[\"Prior_purchases\",\"Value\"]]","b512dfa7":"text1 = [\"Experienced \"+str(i)+\" times before ordering\" for i in Prior_purchases[\"Prior_purchases\"].values.tolist()]","bde8079f":"Prior_purchases[\"Prior_purchases\"] = text1\nfig = px.pie(Prior_purchases,names=\"Prior_purchases\",values=\"Value\",color_discrete_sequence=px.colors.sequential.Darkmint_r) \nfig.update_traces(textinfo='percent+label')","d2faff3e":"Reached = df[\"Reached.on.Time_Y.N\"].value_counts().reset_index() \nReached.columns = [\"Reached\",\"Value\"]  \nReached.drop(\"Reached\",axis=1,inplace=True) \nReached[\"Reached\"] = [\"successfully Reached\",\"Not Successfully Reached\"]\nfig = px.pie(Reached,names=\"Reached\",values=\"Value\",color_discrete_sequence=px.colors.sequential.Darkmint_r) \nfig.update_traces(textinfo='percent+label')","ab3cf563":"sns.displot(data=df,x=\"Cost_of_the_Product\",height=8,aspect=3,kde=True)","0c9c58fa":"df.columns","7a064a73":"sns.displot(data=df,x=\"Discount_offered\",height=8,aspect=3,kde=True)","e791c566":"sns.displot(data=df,x=\"Weight_in_gms\",height=8,aspect=3,kde=True)","e9afc20e":"ots = OutlierTreatment() \nots.fit(df,[\"Discount_offered\"])  \ndf = ots.transform(df)","35f4b65e":"plt.figure(figsize=(20,8))\ndf.boxplot(column=\"Discount_offered\")","441bbcab":"df.columns","ec4d6609":"df","c2b885ad":"mode = df.groupby([\"Mode_of_Shipment\"])[\"Warehouse_block\"].value_counts().to_frame()","4f94c0c6":"mode.columns = [\"Count\"] \ndf1 = mode.reset_index(level=[0,1]) \ndf1.head()","0158a6f5":"px.sunburst(df1,path=[\"Mode_of_Shipment\",\"Warehouse_block\"],values=\"Count\",color_discrete_sequence=px.colors.sequential.Greys_r)","dededd22":"importance = df.groupby([\"Mode_of_Shipment\"])[\"Product_importance\"].value_counts().to_frame() \nimportance.columns = [\"Count\"] \nimportance = importance.reset_index(level=[0,1]) \n","2e187da9":"px.sunburst(importance,path=[\"Mode_of_Shipment\",\"Product_importance\"],values=\"Count\",color_discrete_sequence=px.colors.sequential.GnBu_r)","6c22d8c3":"load = df.groupby([\"Mode_of_Shipment\"])[\"Weight_in_gms\"].sum().reset_index() \npx.bar(load,x=\"Mode_of_Shipment\",y=\"Weight_in_gms\",color_discrete_sequence=px.colors.sequential.ice)","a9d9bf19":"reach = df.groupby([\"Mode_of_Shipment\"])[\"Reached.on.Time_Y.N\"].sum().reset_index() \nfig = px.pie(reach,names=\"Mode_of_Shipment\",values=\"Reached.on.Time_Y.N\") \nfig.update_traces(textinfo='percent+label')","9b96dec0":"gender = df.groupby([\"Mode_of_Shipment\"])[\"Gender\"].value_counts().to_frame() \ngender.columns = [\"Values\"] \n#gender[\"Values\"] = [\"Male\",\"Female\",\"Male\",\"Female\",\"Male\",\"Female\"] \ngender = gender.reset_index(level=[0,1]) \ngender[\"Gender\"] = [\"Male\",\"Female\",\"Female\",\"Male\",\"Female\",\"Male\"] \nfig = px.sunburst(gender,path=[\"Mode_of_Shipment\",\"Gender\"],values=\"Values\",color_discrete_sequence=px.colors.sequential.Blackbody)  \nfig.show()","3f831e1b":"df","9987c681":"Product_importance = df.groupby([\"Product_importance\"])[\"Reached.on.Time_Y.N\"].value_counts().to_frame() \nProduct_importance.columns = [\"Count\"] \nProduct_importance = Product_importance.reset_index(level=[0,1]) \nProduct_importance[\"Reached.on.Time_Y.N\"] = [\"Reached\",\"Not Reached\",\"Reached\",\"Not Reached\",\"Reached\",\"Not Reached\"] \npx.sunburst(Product_importance,path=[\"Product_importance\",\"Reached.on.Time_Y.N\"],values=\"Count\")","74ce378f":"plt.figure(figsize=(20,8))\nsns.histplot(data=df,x=\"Weight_in_gms\",hue=\"Reached.on.Time_Y.N\",element='poly')","00bbe9f0":"plt.figure(figsize=(20,8))\nsns.histplot(df,x=\"Cost_of_the_Product\",hue=\"Reached.on.Time_Y.N\",element=\"poly\",color=\"g\")","153b665b":"plt.figure(figsize=(20,8))\nsns.catplot(data=df,x=\"Customer_rating\",y=\"Cost_of_the_Product\",color=\"darkblue\",kind=\"swarm\")","b4edbda8":"values = [\"Reached\",\"Not Reached\"]*8","38775327":"successful = df.groupby(['Prior_purchases'])[\"Reached.on.Time_Y.N\"].value_counts().to_frame() \nsuccessful.columns = [\"Count\"] \nsuccessful = successful.reset_index(level=[0,1]) \nsuccessful[\"Reached.on.Time_Y.N\"] = values \npx.sunburst(successful,path=[\"Prior_purchases\",\"Reached.on.Time_Y.N\"],values=\"Count\")","44114f57":"reaches = df.groupby([\"Customer_care_calls\"])[\"Reached.on.Time_Y.N\"].value_counts().to_frame() \nreaches.columns = [\"Count\"] \nreaches = reaches.reset_index(level=[0,1]) \nreaches[\"Reached.on.Time_Y.N\"] = values[0:12] \npx.sunburst(reaches,path=[\"Customer_care_calls\",\"Reached.on.Time_Y.N\"],values=\"Count\")","c1e32651":"figure = plt.figure(figsize=(15,8))\nsns.scatterplot(x=\"Cost_of_the_Product\",y=\"Discount_offered\",hue=\"Reached.on.Time_Y.N\",style=\"Customer_rating\",\n               data=df)\nplt.show()","48091667":"plt.figure(figsize=(20,8)) \nsns.heatmap(df.corr(),annot=True,vmin=-1,vmax=1,center=0,linewidths=3,linecolor='darkgreen')","745a372b":"le = LabelEncoder()","6eb9a61d":"ls = object_columns.columns.tolist() \nfor i in ls:\n    df[i] = le.fit_transform(df[i])","eb5ebdd0":"vt  = VarianceThreshold(threshold=0.5) ","dd5cd7a1":"vt.fit_transform(df.drop(\"Reached.on.Time_Y.N\",axis=1))","3da36e94":"vt.get_support()","9733d4a3":"features = df.drop(\"Reached.on.Time_Y.N\",axis=1) \ntarget   = df[\"Reached.on.Time_Y.N\"]","72b9fccf":"x_train,x_test,y_train,y_test = train_test_split(features,target,random_state=32,test_size=0.30)","c63c054e":"clf = DecisionTreeClassifier() \nclf.fit(x_train,y_train)","fd3cab0e":"clf.score(x_test,y_test)","7274450a":"df","ab34d3bc":"new_df = df.iloc[:,[0,1,2,3,4,5,6,9,10,11]]","1bfb5c71":"features = new_df.drop(\"Reached.on.Time_Y.N\",axis=1) \ntarget   = new_df[\"Reached.on.Time_Y.N\"]","1ae66ad7":"x_train,x_test,y_train,y_test = train_test_split(features,target,random_state=32,test_size=0.30)","6b54c16c":"clf = DecisionTreeClassifier() \nclf.fit(x_train,y_train)","0dbd15cb":"clf.score(x_test,y_test)","18c8906e":"print(\"Training score:\",clf.score(x_train,y_train)*100) \nprint(\"Testing score :\",clf.score(x_test,y_test)*100)","f9126c44":"<h2 style='border:3px solid DodgerBlue;'><center>At what range of cost of product reaches on delivery time<\/center><\/h2>","df66bb0b":"<h2 style='border:3px solid DodgerBlue;'><center>whether reaching delivery increases with number of customer_calls?<\/center><\/h2>","251c12a4":"<img src=\"https:\/\/clevylinks.com\/wp-content\/uploads\/2019\/12\/Clevy_Map-opt.jpg\"><\/img>","fc21f14b":"<h2 style='border:3px solid DodgerBlue;'><center>Information about data<\/center><\/h2>","6fe361ad":"<h2 style='border:3px solid DodgerBlue;'><center>Cost of the product<\/center><\/h2>","7b9662ec":"<h2 style='border:3px solid DodgerBlue;'><center>Customer ratings<\/center><\/h2>","43e38aa1":"<h2 style='border:3px solid DodgerBlue;'><center>Data types<\/center><\/h2>","9ed1bdf1":"<h2 style='border:3px solid DodgerBlue;'><center>Product importance<\/center><\/h2>","4cdedcb5":"<h2 style='border:3px solid DodgerBlue;'><center>How many items are delivered on time based on product_importance<\/center><\/h2>","09497234":"# E- Commerce shipping : \n\nEcommerce shipping encompasses all services required to transport products purchased online from a retailer to the customer\u2019s delivery destination. With the right partner, ecommerce shipping can be manageable, affordable, and fast.","4271d46f":"<h2 style='border:3px solid DodgerBlue;'><center>Mode of shipment<\/center><\/h2>","c11c9461":"<h1 style=\"background-color:green;font-family:newtimeroman;font-size:350%;text-align:center;border-radius: 15px 50px;\">Basic undertsanding about E-Commerce<\/h1>","c8ab98ff":"<h2 style='border:3px solid DodgerBlue;'><center>which type fo shipment can deliver more items to the customers?<\/center><\/h2>","01c42731":"<h2 style='border:3px solid DodgerBlue;'><center>Customer_care calls<\/center><\/h2>","1d29583d":"<h2 style='border:3px solid DodgerBlue;'><center>Reached On time delivery<\/center><\/h2>","33e96e53":"<h2 style='border:3px solid DodgerBlue;'><center>Checking null Values<\/center><\/h2>","056cea56":"<h2 style='border:3px solid DodgerBlue;'><center>At what range of product_weight reaches delivery on time?<\/center><\/h2>","e8db0ab0":"<h2 style='border:3px solid DodgerBlue;'><center>Before Feature Selection<\/center><\/h2>","a709ee64":"<h2 style='border:3px solid DodgerBlue;'><center>Weight in grams<\/center><\/h2>","bcba1de5":"<h2 style='border:3px solid DodgerBlue;'><center>Prior_Purchases<\/center><\/h2>","2d10482e":"<h2 style='border:3px solid DodgerBlue;'><center>Mode_of_shipment related to their product_importance<\/center><\/h2>","58a33908":"<h2 style='border:3px solid DodgerBlue;'><center>Whether rating depends upon the cost_of_the_product<\/center><\/h2>","c3d5e6e8":"<h2 style='border:3px solid DodgerBlue;'><center>After Feature Selection<\/center><\/h2>","80f87b79":"<h2 style='border:3px solid DodgerBlue;'><center>Mode of shipment belongs to Various ware_house blocks<\/center><\/h2>","c01820e5":"<h2 style='border:3px solid DodgerBlue;'><center>Whether Reaching delivery based on prior_purchasing?<\/center><\/h2>","0716e201":"<h2 style='border:3px solid DodgerBlue;'><center>gender<\/center><\/h2>","ac16b856":"<h2 style='border:3px solid DodgerBlue;'><center>Basic Requirements<\/center><\/h2>","773641c6":"<h2 style='border:3px solid DodgerBlue;'><center>which type of shipment getting more contributed by male\/female?<\/center><\/h2>","31038a4b":"<h2 style='border:3px solid DodgerBlue;'><center>which type of shipment can carry more weight?<\/center><\/h2>","17615607":"<h2 style='border:3px solid DodgerBlue;'><center>Data Overview<\/center><\/h2>","e877a9d1":"<h2 style='border:3px solid DodgerBlue;'><center>Ware_house block<\/center><\/h2>","b8e1c405":"<h2 style='border:3px solid DodgerBlue;'><center>Feature Selection<\/center><\/h2>"}}