{"cell_type":{"b8ddaf1e":"code","ba51dbe4":"code","eb39fe28":"code","c0e1ef22":"code","f425b63c":"code","2fce4ee4":"code","6c206bf6":"code","64fca08d":"code","c0d60702":"code","f45dbe80":"code","315dbfc1":"code","c93c0e19":"code","0bb120b0":"code","aad5ddee":"code","d9431b81":"code","2614fc9e":"code","ab03330d":"code","b2b3b138":"code","a7ab2da7":"code","95cfd27a":"code","e59274d4":"code","e3106cce":"code","cbf984ea":"code","cc2e2eba":"code","0d6bf631":"code","3558f884":"code","d39e102f":"code","eaa98dae":"code","977c7202":"code","7048bca8":"code","236990de":"code","31a9f5c4":"code","8fd809ac":"code","1d934b81":"code","3c552824":"code","e4fc9f7c":"code","35222ca5":"markdown","70fd7fda":"markdown","18188265":"markdown","0aba881a":"markdown","d7801882":"markdown","bf17f981":"markdown","16397150":"markdown","1d4307ba":"markdown","f0875344":"markdown","2b14be45":"markdown","0fa7ed5d":"markdown","edd13e21":"markdown","50812e7c":"markdown","41355d48":"markdown","d902d3c0":"markdown","c4bd6b96":"markdown","b25df95a":"markdown","87d310fb":"markdown","5473fb7e":"markdown","67c8b7ab":"markdown","4b56c8e0":"markdown","7d3eadfa":"markdown","0edd5c91":"markdown","61b37a84":"markdown","758b955f":"markdown"},"source":{"b8ddaf1e":"#Importing Relevant Packages\n%matplotlib inline\nimport pandas as pd\nimport numpy as np\nimport matplotlib.pyplot as plt\nimport seaborn as sns\nrc = {'axes.facecolor':'white',\n      'axes.grid' : True,\n      'grid.color': '.8'}\nplt.rcParams.update(rc)\nfrom scipy import stats\nfrom ast import literal_eval\nimport math\nfrom datetime import datetime\nimport warnings\nwarnings.filterwarnings(\"ignore\")\n","ba51dbe4":"# Reading the CSV files into the notebook\n\nmd = pd.read_csv('..\/input\/movies_metadata.csv')\nmd.head()","eb39fe28":"md.info()","c0e1ef22":"# Dropping the unnecessary columns \nmd.drop(['adult','belongs_to_collection','homepage','imdb_id','original_title','overview','poster_path','tagline','video','status'],axis=1,inplace = True)","f425b63c":"#Extracting the year and month to a seperate column from release_date\n\nmd['year'] = np.nan\nmd['month'] = np.nan\nfor j in range(0,len(md['release_date'])):\n    if md['release_date'][j] != md['release_date'][j]:\n        pass\n    elif len(md['release_date'][j]) != 10:\n        md.drop(j,axis=0,inplace=True)\n    else:\n        md['year'][j] = datetime.strptime(md['release_date'][j], '%Y-%m-%d').year\n        md['month'][j] = datetime.strptime(md['release_date'][j], '%Y-%m-%d').month\n        \nmd.drop(['release_date'],axis=1,inplace = True)","2fce4ee4":"#Resetting index to continue pre-processing\nmd.reset_index(drop = True,inplace=True)","6c206bf6":"#Converting the dictionary style columns into lists\n\nmd['genres'] = md['genres'].fillna('[]').apply(literal_eval).apply(lambda x: [i['name'] for i in x] if isinstance(x, list) else [])\nmd['production_companies'] = md['production_companies'].fillna('[]').apply(literal_eval).apply(lambda x: [i['name'] for i in x] if isinstance(x, list) else [])\nmd['production_countries'] = md['production_countries'].fillna('[]').apply(literal_eval).apply(lambda x: [i['name'] for i in x] if isinstance(x, list) else [])\nmd['spoken_languages'] = md['spoken_languages'].fillna('[]').apply(literal_eval).apply(lambda x: [i['name'] for i in x] if isinstance(x, list) else [])","64fca08d":"md.head()","c0d60702":"#Saving the first value of the list only from the genres column\nfor j in range(0,len(md['genres'])):\n    if len(md['genres'][j]) ==0:\n        md['genres'][j] = np.nan\n    else:\n        md['genres'][j] = md['genres'][j][0]","f45dbe80":"#Saving the first value of the list only from the production_companies column\nfor j in range(0,len(md['production_companies'])):\n    if len(md['production_companies'][j]) ==0:\n        md['production_companies'][j] = np.nan\n    else:\n        md['production_companies'][j] = md['production_companies'][j][0]","315dbfc1":"#Saving the first value of the list only from the production_countries column\nfor j in range(0,len(md['production_countries'])):\n    if len(md['production_countries'][j]) ==0:\n        md['production_countries'][j] = np.nan\n    else:\n        md['production_countries'][j] = md['production_countries'][j][0]","c93c0e19":"#Saving the first value of the list only from the spoken_languages column\nfor j in range(0,len(md['spoken_languages'])):\n    if len(md['spoken_languages'][j]) ==0:\n        md['spoken_languages'][j] = np.nan\n    else:\n        md['spoken_languages'][j] = md['spoken_languages'][j][0]","0bb120b0":"md.head()","aad5ddee":"#Dropping duplicate values\nmd.drop_duplicates(inplace=True)","d9431b81":"#Dropping NaN values from these specific columns\ncol = ['budget','genres','id','original_language','popularity','year','revenue',\n       'runtime','spoken_languages','title','vote_average','vote_count']\nmd.dropna(subset = col,how = 'any',inplace=True)","2614fc9e":"md.info()","ab03330d":"#Setting the proper data type\nmd = md.astype({'budget':'float64'})\nmd = md.astype({'popularity':'float64'})\nmd = md.astype({'year':'int64'})\nmd = md.astype({'month':'int64'})","b2b3b138":"#Selecting movies after 1970\nmd = md.query('year > 1970 & year <2017')","a7ab2da7":"# Replacing 0 with NaN \nmd['budget'] = md['budget'].replace(0,np.nan)\nmd['revenue'] = md['revenue'].replace(0,np.nan)","95cfd27a":"md.head()","e59274d4":"#Copying the dataset and dropping the remaining NaN values so that profit can be calculated accurately\nmd1 = md.copy()\nmd1.dropna(inplace=True)\nmd1['profit'] = md1['revenue'] - md1['budget']","e3106cce":"md1.head()","cbf984ea":"# Plotting Number of Movies Released Per Year\nplt.figure(figsize=(25, 10))\nplt.title(\"Number of Movies Released Per Year\")\nsns.countplot(x=\"year\", data=md,palette = 'Blues')\nplt.ylabel('Number of Movies')\nplt.show()","cc2e2eba":"# Plotting Number of Movies Released According to Genre\nplt.figure(figsize=(23, 10))\nplt.title(\"Number of Movies Released According to Genre\")\nsns.countplot(x=\"genres\", data=md,order = md['genres'].value_counts().index)\nplt.ylabel('Number of movies')\nplt.show()","0d6bf631":"# Plotting Number of Movies Released According to Genre\nplt.figure(figsize=(20, 10))\nplt.title(\"Number of Movies Released by the Top Ten Countries\")\nsns.countplot(x=\"production_countries\", data=md,order = md['production_countries'].value_counts()[0:10].index)\nplt.xlabel('Countries')\nplt.ylabel('Number of movies')\nplt.show()","3558f884":"# Plotting Number of Movies Released According to Genre\nplt.figure(figsize=(20, 10))\nplt.title(\"Number of Movies by the Top Ten Language\")\nsns.countplot(x=\"original_language\", data=md,order = md['original_language'].value_counts()[0:10].index)\nplt.xlabel('Language')\nplt.ylabel('Number of movies')\nplt.show()","d39e102f":"# Plotting Number of Movies Released According to Genre\nplt.figure(figsize=(30, 10))\nplt.title(\"Number of Movies Released by Top Ten Production Companies\")\nplt.xlabel('Production Companies')\nplt.ylabel('Number of movies')\nsns.countplot(x=\"production_companies\", data=md,order = md['production_companies'].value_counts()[0:10].index)\nplt.show()","eaa98dae":"# Plotting Number of Movies Released According to Genre\n\nplt.figure(figsize=(25, 15))\nplt.subplot(311)\nplt.title(\"Scatter plot of Average Vote and Popularity\")\nplt.ylim(0,80)\nsns.regplot(x='vote_average', y ='popularity',data=md)\n\n\nplt.subplot(312)\nplt.title(\"Scatter plot of average vote and Profit\")\n#sns.regplot(x='revenue', y ='vote_average',data=md)\nsns.regplot(x='profit', y ='vote_average',data=md1)\n\n\nplt.subplot(313)\nplt.title(\"Scatter plot of Profit and Popularity\")\nplt.ylim(0,80)\nsns.regplot(x='profit', y ='popularity',data=md1)\n\nplt.show()","977c7202":"plt.figure(figsize=(25, 15))\nplt.subplot(311)\nplt.title(\"Popularity Trend\")\nsns.lineplot(x='year', y ='popularity' ,data=md, ci = None,color = 'r')\n\n\nplt.subplot(312)\nplt.title(\"Average Vote Trend\")\nsns.lineplot(x='year', y ='vote_average',data=md, ci = None)\n\n\nplt.subplot(313)\nplt.title(\"Profit Trend\")\nsns.lineplot(x='year', y ='profit',data=md1, ci = None,color = 'g')\n\nplt.show()","7048bca8":"plt.figure(figsize=(25, 15))\nplt.subplot(311)\nplt.title(\"Average Vote with Genre\")\nsns.barplot(x='month', y ='vote_average',data=md,estimator=np.median,ci=None,palette = ('Paired'))\n\n\nplt.subplot(312)\nplt.title(\"Profit with Genre\")\nsns.barplot(x='month', y ='profit',data=md1,estimator=np.median,ci=None,palette = ('Paired'))\n\n\nplt.subplot(313)\nplt.title(\"Popularity with Genre\")\nsns.barplot(x='month', y ='popularity',data=md,estimator=np.median,ci=None,palette = ('Paired'))\n\nplt.show()\n\n","236990de":"plt.figure(figsize=(25, 15))\nplt.subplot(311)\nplt.title(\"Average Vote with Genre\")\nsns.barplot(x='genres', y ='vote_average',data=md,estimator=np.median,ci=None)\n\n\nplt.subplot(312)\nplt.title(\"Profit with Genre\")\nsns.barplot(x='genres', y ='profit',data=md1,estimator=np.median,ci=None)\n\n\nplt.subplot(313)\nplt.title(\"Popularity with Genre\")\nsns.barplot(x='genres', y ='popularity',data=md,estimator=np.median,ci=None)\n\nplt.show()","31a9f5c4":"plt.figure(figsize=(25, 15))\nplt.subplot(311)\nplt.title(\"Average vote with length of the movie\")\nplt.xlim(60,200)\nsns.lineplot(x='runtime', y ='vote_average',data=md,ci=None)\n\n\nplt.subplot(312)\nplt.title(\"profit with length of the movie\")\nplt.xlim(60,200)\nsns.lineplot(x='runtime', y ='profit',data=md1,ci=None)\n\n\nplt.subplot(313)\nplt.title(\"popularity with length of the movie\")\nplt.xlim(60,200)\nsns.lineplot(x='runtime', y ='popularity',data=md,ci=None)\n\nplt.show()","8fd809ac":"PC_by_profit = md1[['profit','production_companies']]\nPC_by_profit.groupby(['production_companies']).median().sort_values(by = ['profit'],ascending = False).head(10).plot(kind = 'barh',figsize=(10,5))\nplt.show()","1d934b81":"PC_by_popularity = md[['popularity','production_companies']]\nPC_by_popularity.groupby(['production_companies']).median().sort_values(by = ['popularity'],ascending = False).head(10).plot(kind = 'barh',figsize=(10,5))\nplt.show()\n","3c552824":"PC_by_profit.groupby(['production_companies']).median().sort_values(by = ['profit'],ascending = False).tail(10).plot(kind = 'barh',figsize=(10,5))\nplt.show()","e4fc9f7c":"PC_by_popularity.groupby(['production_companies']).median().sort_values(by = ['popularity'],ascending = False).tail(10).plot(kind = 'barh',figsize=(10,5))\nplt.show()","35222ca5":"### Now Let's see how genre effects the success of a film ","70fd7fda":"### Does the length of the movie have any noticeable effect?","18188265":"#### Drama is the most produced film followed by Comedy, Action, Documentary, Horror and so on ","0aba881a":"### Now let's take a look at the most successful and the least successful production companies\n### Starting with the top ten successful ones \n","d7801882":"# Topic - Factors that Determines the Success of a Movie","bf17f981":"#### There are some peaks and troughs but each of the success factors are on the increase. So a movie released today is more likely to be successful than a movie released back in 1970","16397150":"#### It is without question that the number of movies released per year is on the rise and will continue to follow this trend","1d4307ba":"### The key variables to use in order to find out the success of a film would be the  profit, popularity and average vote. Lets see how they relate to each other at first.\n","f0875344":"#### There is a clear correlation with the revenue generated and popularity but a comparatively small one of them with the vote average","2b14be45":"#### Universal Pictures and Paramount Pictures are close, followed by Twentieth Century fox, Columbia Picture, Warner Bros and so forth","0fa7ed5d":"### and the bottom ten successful ones ","edd13e21":"# DATS6103 - Intoduction to Data Mining\n## Individual Project 2\n\n### By Fahim Ishrak\n","50812e7c":"### Now let's see how each of the factor affects the success of a movie, starting with month","41355d48":"#### The vote average remains constant throughout the year.\n#### However the films released for the month of June(6), July(7) and December(12) tend to have a higher profit.\n#### Also the films released for the month of July(7) and December(12) tend to have a higher popularity.","d902d3c0":"# Part 3- Conclusion\n### The movie industry is truly robust and success depends on a lot of factors. The above insights gives us a sense of how some of the variables tend to be associated with success. If someone is deciding to make or invest in the movie industry then certain factors such as choosing the adventure or animation genre, releasing the movie in the month of June or July or December, using good production companies like Heydey Films or 1492 Pictures  and finally keeping the original language as English will likely make a good movie  ","c4bd6b96":"#### Once again the average vote remains constant for each genre\n#### Animation and Adventure is the most profitable genre\n#### Adventure has the highest popularity, followed by Fantasy, Action, Animation","b25df95a":"# Part 2- Visualization and Observations\n","87d310fb":"### Let's see the general trend of the success of the movie industry as a whole","5473fb7e":"# Part 1- Loading the data and Pre-processing","67c8b7ab":"### Now lets look at what effects the success of a movie","4b56c8e0":"#### There aren't any noticeable relation with the length and the success of a movie expect for the uptick of profit around the 190 min mark ","7d3eadfa":"#### Once again it's no surprise that most films are released in English, however the next ones in order are French, Japanese, Italian, Spanish and so on ","0edd5c91":"#### The United States produced the most film while the rest produced less than 1\/6th of the film compared to it","61b37a84":"## The following csv file was downloaded from https:\/\/www.kaggle.com\/rounakbanik\/the-movies-dataset#movies_metadata.csv \n### This dataset is an ensemble of data collected from TMDB (The Movie DataBase) and GroupLens. The Movie Details, Credits and Keywords have been collected from the TMDB Open API. This dataset is made using the TMDb API and their API also provides access to data on many additional movies, actors and actresses, crew members, and TV shows. The API source can be found here https:\/\/www.themoviedb.org\/documentation\/api","758b955f":"### Before Diving into the successful films, let's see some general figures at first"}}