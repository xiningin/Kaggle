{"cell_type":{"c7fcc757":"code","29beb674":"code","c9a3a469":"code","e0709a19":"code","121b8005":"code","e95a15bf":"code","b8159ab6":"code","5a2fb3a9":"code","f207993f":"code","87322ad7":"code","fce018de":"code","838154ae":"code","5573cd69":"code","609637f1":"code","6d256d87":"code","388e6cf5":"code","7f397215":"code","31304360":"code","63797501":"code","4c9d3dae":"code","def87878":"code","6990a050":"code","339da8c3":"code","c93ad656":"code","fc3d5844":"code","255fef91":"code","277dcdab":"code","b2536ce0":"code","b76455be":"code","d2b16bdc":"code","25caedaf":"code","86f959bc":"code","14c1f2f0":"code","d3fc5e73":"code","15177d2a":"code","cff8d0e8":"code","69473775":"code","ad9278e1":"code","6ea471ed":"code","fabc564d":"code","13bf4d59":"code","6147156e":"code","a4133eea":"code","a8c559a2":"code","27c83806":"code","cda4efad":"code","81513b1e":"code","1b03b3a3":"code","5f2d0fd2":"code","cb136482":"code","db10aa5a":"code","b65bfefa":"code","f3781c21":"code","ae1a70c0":"code","4da772ec":"code","9fb45a98":"code","46e38344":"code","8df743b3":"code","a170ae82":"code","6e15bd58":"code","5e0d3e67":"code","6fb4fd16":"code","c5d4417b":"code","7e2b3381":"code","4e24863b":"code","007e9e44":"code","bba53a28":"code","0d0d16c7":"code","2ae768c3":"code","78b61ab8":"code","db630096":"code","2561dfff":"code","898640c9":"markdown","8e3a978d":"markdown","4e199d69":"markdown","60e6d8b9":"markdown","7485dc58":"markdown","d93ae315":"markdown","b506a1ed":"markdown","9efc598d":"markdown","c6673619":"markdown","848d864c":"markdown","c2c8e61f":"markdown","bc42d529":"markdown","70cf6b76":"markdown","185566fc":"markdown","54b501c7":"markdown","2b29a580":"markdown","f845e792":"markdown","ee2e786d":"markdown","75fb37f3":"markdown","6f28daad":"markdown","6948bb97":"markdown","28d62810":"markdown","09c936fc":"markdown","8c810558":"markdown","8690aadd":"markdown","be55728e":"markdown","2c813354":"markdown","3768b5ad":"markdown","542ff281":"markdown","046199d0":"markdown","8ee9e2bd":"markdown","da93d39a":"markdown","be3080a6":"markdown","6eeab3ae":"markdown","e5f2f05c":"markdown","8b8a0eba":"markdown","527ff3a4":"markdown","65b08899":"markdown","68686113":"markdown","95a8e8a1":"markdown","bf03f6d3":"markdown","6cefd6c2":"markdown","bae0571c":"markdown","92f76c76":"markdown","b5f10f05":"markdown","a37ad709":"markdown","db55d0a9":"markdown","d41678a3":"markdown","4d91fcd2":"markdown","f0cec87a":"markdown","734fe967":"markdown","4db7160f":"markdown","bfd7bdad":"markdown","4a4c742f":"markdown","6e67cfc3":"markdown","5b6f5f52":"markdown","ed9f592a":"markdown","ce92edf3":"markdown","5a932184":"markdown","f9583076":"markdown","db0b3612":"markdown","6fe0e0f8":"markdown","49fad392":"markdown","febf79d5":"markdown","87178b77":"markdown","d68e2b00":"markdown"},"source":{"c7fcc757":"\nlibrary(tidyverse)\nlibrary(dplyr)\ndumpdata <- read_csv(\"..\/input\/dumpdata\/dumpdata.csv\", col_types = cols(\n  Obs = col_double(),\n  year = col_integer(),\n  price = col_double(),\n  real_price = col_double(),\n  neighbourhood = col_factor(),\n  area = col_number(),\n  land = col_number(),\n  rooms = col_integer(),\n  baths = col_integer(),\n  houseage = col_integer(),\n  dist2citycntr = col_number(),\n  dist2ringroad = col_number(),\n  dist2dump = col_number()\n))\n# packages for grid.arrange and ggplot\nlibrary(gridExtra)\nlibrary(grid)\nlibrary(ggplot2)\nlibrary(lattice)\nlibrary(lmtest)\nlibrary(estimatr)\nlibrary(car) #vif\nlibrary(olsrr) #normality of residuals\nlibrary(MASS) #robust\nlibrary(robustbase)\nlibrary(sandwich)\nlibrary(lmtest)\nlibrary(modelr)\nlibrary(broom)\n\nhead(dumpdata)","29beb674":"str(dumpdata)","c9a3a469":"# See whether there is outlier or not.\nbx_rprice<- boxplot(dumpdata$real_price,main=\"Boxplot of real_price\" , ylab=\"real_price\", col=\"blue\", outcol=\"red\")","e0709a19":"dumpdata$lreal_price <- log(dumpdata$real_price)","121b8005":"bx_l_rprice<- boxplot(dumpdata$lreal_price,main=\"Boxplot of log of real_price\" , ylab=\"real_price\", col=\"blue\", outcol=\"red\")","e95a15bf":"bx_area<- boxplot(dumpdata$area,main=\"Boxplot of area\" , ylab=\"area\", col=\"blue\", outcol=\"red\")","b8159ab6":"dumpdata$l_area <- log(dumpdata$area)","5a2fb3a9":"bx_larea<- boxplot(dumpdata$l_area,main=\"Boxplot of log of area\" , ylab=\"log of area\", col=\"blue\", outcol=\"red\")","f207993f":"bx_land<- boxplot(dumpdata$land,main=\"Boxplot of land\" , ylab=\"land\", col=\"blue\", outcol=\"red\")","87322ad7":"dumpdata$l_land <- log(dumpdata$land)","fce018de":"bx_l_land<- boxplot(dumpdata$l_land,main=\"Boxplot of log of land\" , ylab=\"log of land\", col=\"blue\", outcol=\"red\")","838154ae":"bx_rooms<- boxplot(dumpdata$rooms,main=\"Boxplot of rooms\" , ylab=\"number of rooms\", col=\"blue\", outcol=\"red\")","5573cd69":"bx_houseage<- boxplot(dumpdata$houseage,main=\"Boxplot of houseage\" , ylab=\"houseage\", col=\"blue\", outcol=\"red\")","609637f1":"dumpdata$houseage_sq <- dumpdata$houseage^2","6d256d87":"bx_houseage_sq<- boxplot(dumpdata$houseage_sq,main=\"Boxplot of houseage square\" , ylab=\"houseage square\", col=\"blue\", outcol=\"red\")","388e6cf5":"bx_dist2dump<- boxplot(dumpdata$dist2dump,main=\"Boxplot of distance to dump\" , ylab=\"dist2dump\", col=\"blue\", outcol=\"red\")","7f397215":"bx_dist2ringroad<- boxplot(dumpdata$dist2ringroad,main=\"Boxplot of distance to ringroad\" , ylab=\"dist2ringroad\", col=\"blue\", outcol=\"red\")","31304360":"bx_dist2cintycntr<- boxplot(dumpdata$dist2citycntr,main=\"Boxplot of distance to city center\" , ylab=\"dist2citycntr\", col=\"blue\", outcol=\"red\")","63797501":"(sc_dist2dump <- ggplot(dumpdata, aes(dist2dump, lreal_price)) + geom_point() + geom_smooth(color=\"darkred\", fill=\"blue\")+\n    labs(title=\"Scatter Plot of distance to dump and lreal_price\"))","4c9d3dae":"(sc_dist2ringroad <- ggplot(dumpdata, aes(dist2ringroad , lreal_price)) + geom_point() + geom_smooth(color=\"darkred\", fill=\"blue\")+\n    labs(title=\"Scatter Plot of distance to ringroad  and lreal_price\"))\n\n(sc_dist2citycntr <- ggplot(dumpdata, aes(dist2citycntr , lreal_price)) + geom_point() + geom_smooth(color=\"darkred\", fill=\"blue\")+\n    labs(title=\"Scatter Plot of distance to city center  and lreal_price\"))","def87878":"# see correlation between variables which represents distance.\ncor(dumpdata[11:13])","6990a050":"# Creating dummy variable for distance to dump.\ndumpdata$near_dump <- ifelse(dumpdata$dist2dump < 15000, 1, 0)\nhead(dumpdata)","339da8c3":"model1<- lm(formula = lreal_price ~ near_dump, data = dumpdata)\nsummary(model1)","c93ad656":"# To use difference in difference model, we are creating a dummy variable for year\ndumpdata$d89 <- ifelse(dumpdata$year == 1989, 1, 0)\n# Then, multiply dummy variable for year with near_dump variable\ndumpdata$dnear_dump <- dumpdata$near_dump * dumpdata$d89\nhead(dumpdata)","fc3d5844":"# make difference-in-difference model.\nmodel2 <- lm(lreal_price ~ near_dump + d89 + dnear_dump, data = dumpdata)\nsummary(model2)","255fef91":"# to see relationship between independent variables  and lreal_price variables, check the plot below.\n(sc_houseage <- ggplot(dumpdata, aes(houseage, lreal_price)) + geom_point() + geom_smooth(color=\"darkred\", fill=\"blue\")+\n    labs(title=\"Scatter Plot of houseage and lreal_price\"))","277dcdab":"(sc_houseage_sq <- ggplot(dumpdata, aes(houseage_sq, lreal_price)) + geom_point() + geom_smooth(color=\"darkred\", fill=\"blue\")+\n    labs(title=\"Scatter Plot of houseage square and lreal_price\"))\n","b2536ce0":"(sc_area <- ggplot(dumpdata, aes(area, lreal_price)) + geom_point() + geom_smooth(color=\"darkred\", fill=\"blue\")+\n    labs(title=\"Scatter Plot of area and lreal_price\"))\n\n(sc_l_area <- ggplot(dumpdata, aes(l_area, lreal_price)) + geom_point() + geom_smooth(color=\"darkred\", fill=\"blue\")+\n    labs(title=\"Scatter Plot of log area and lreal_price\"))","b76455be":"(sc_land <- ggplot(dumpdata, aes(land, lreal_price)) + geom_point() + geom_smooth(color=\"darkred\", fill=\"blue\")+\n    labs(title=\"Scatter Plot of land and lreal_price\"))\n\n(sc_l_land <- ggplot(dumpdata, aes(l_land, lreal_price)) + geom_point() + geom_smooth(color=\"darkred\", fill=\"blue\")+\n    labs(title=\"Scatter Plot of log of land and lreal_price\"))","d2b16bdc":"# One hot encodings\nfor(unique_value in unique(dumpdata$neighbourhood)){\n \n\ndumpdata[paste(\"nbh\", unique_value, sep = \"_\")] <- ifelse(dumpdata$neighbourhood == unique_value, 1, 0)\n\n}\n\nhead(dumpdata)","25caedaf":"nb0_0 <- dumpdata$lreal_price[dumpdata$nbh_0 == 0]\nnb0_1 <- dumpdata$lreal_price[dumpdata$nbh_0 == 1]\nt.test(nb0_0,nb0_1)","86f959bc":"nb1_0 <- dumpdata$lreal_price[dumpdata$nbh_1 == 0]\nnb1_1 <- dumpdata$lreal_price[dumpdata$nbh_1 == 1]\nt.test(nb1_0,nb1_1)","14c1f2f0":"nb2_0 <- dumpdata$lreal_price[dumpdata$nbh_2 == 0]\nnb2_1 <- dumpdata$lreal_price[dumpdata$nbh_2 == 1]\nt.test(nb2_0,nb2_1)","d3fc5e73":"nb3_0 <- dumpdata$lreal_price[dumpdata$nbh_3 == 0]\nnb3_1 <- dumpdata$lreal_price[dumpdata$nbh_3 == 1]\nt.test(nb3_0,nb3_1)","15177d2a":"nb4_0 <- dumpdata$lreal_price[dumpdata$nbh_4 == 0]\nnb4_1 <- dumpdata$lreal_price[dumpdata$nbh_4 == 1]\nt.test(nb4_0,nb4_1)","cff8d0e8":"nb5_0 <- dumpdata$lreal_price[dumpdata$nbh_5 == 0]\nnb5_1 <- dumpdata$lreal_price[dumpdata$nbh_5 == 1]\nt.test(nb5_0,nb5_1)","69473775":"nb6_0 <- dumpdata$lreal_price[dumpdata$nbh_6 == 0]\nnb6_1 <- dumpdata$lreal_price[dumpdata$nbh_6 == 1]\nt.test(nb6_0,nb6_1)","ad9278e1":"model3 <- lm(lreal_price ~ near_dump + d89 + houseage + houseage_sq + l_area + l_land + nbh_0 +rooms +baths , data = dumpdata)\n\nsummary(model3)","6ea471ed":"resettest(model3)\n","fabc564d":"model4 <- lm(lreal_price ~ l_area, data = dumpdata)\nsummary(model4)","13bf4d59":"resettest(model4)","6147156e":"dumpdata$l_area_sq <- (dumpdata$l_area)^2","a4133eea":"model5 <- lm(lreal_price ~ houseage + houseage_sq + baths + d89 +  near_dump + + l_land + rooms  + nbh_0 +  l_area + l_area_sq , data = dumpdata)\n\nsummary(model5)","a8c559a2":"bptest(model5)","27c83806":"resettest(model5)","cda4efad":"all_vif<- vif(model5)\nprint(all_vif)","81513b1e":"ols_test_normality(model5)\nols_plot_resid_hist(model5)","1b03b3a3":"plot(d1, pch=\"*\", cex=2, main=\"Influential Obs by Cooks distance\")  # plot cook's distance\nabline(h = 4*mean(d1, na.rm=T), col=\"red\")  # add cutoff line\ntext(x=1:length(d1)+1, y=d1, labels=ifelse(d1>4*mean(d1, na.rm=T),names(d1),\"\"), col=\"red\")  # add labels","5f2d0fd2":"d1 <- cooks.distance(model5)\nr <- stdres(model5)\na <- cbind(dumpdata, d1, r)\na[d1 > 4\/321, ]","cb136482":"rabs <- abs(r)\na <- cbind(dumpdata, d1, r, rabs)\nasorted <- a[order(-rabs), ]\nasorted[1:20, 1:13]","db10aa5a":"model6 <- lm(lreal_price ~ houseage + houseage_sq + baths + d89 +\n     near_dump + l_area + l_area_sq + rooms + nbh_0 + \n    l_land, data = dumpdata, subset = Obs != 168 & Obs != 230 & \n    Obs != 157 & Obs != 46 & Obs != 259 & Obs != 315 & Obs != \n    303 & Obs != 227 & Obs != 52 & Obs != 34 & Obs != 182 & Obs != 166 )\n\nsummary(model6)","b65bfefa":"bptest(model6)","f3781c21":"resettest(model6)","ae1a70c0":"print(vif(model6))","4da772ec":"ols_test_normality(model6)\nols_plot_resid_hist(model6)","9fb45a98":"model7 <- rlm(lreal_price ~ near_dump + d89 + houseage + houseage_sq + l_area +l_area_sq + l_land + nbh_0 +rooms +baths , data = dumpdata)\n\nsummary(model7)","46e38344":"resettest(model7)","8df743b3":"bptest(model7)","a170ae82":"print(vif(model7))","6e15bd58":"shapiro.test(model7$residuals)","5e0d3e67":"opar <- par(mfrow = c(2,2), oma = c(0, 0, 1.1, 0))\nplot(model7, las = 1)\npar(opar)\n","6fb4fd16":"qnt1 <- quantile(dumpdata$houseage, probs=c(.0, .05, .25, 0.5, .75, .95), na.rm = T)\nprint(qnt1)","c5d4417b":"ggplot(dumpdata, aes(houseage, lreal_price)) + geom_point() + geom_smooth(color=\"darkred\", fill=\"blue\")+\n    labs(title=\"Scatter Plot of houseage and lreal_price\")","7e2b3381":"# Before capping\nsummary(lm(lreal_price ~ houseage + houseage_sq, data = dumpdata))","4e24863b":"x <- dumpdata$houseage\nqnt <- quantile(x, probs=c(.25, .75), na.rm = T)\ncaps <- quantile(x, probs=c(.05, .95), na.rm = T)\nH <- 1.5 * IQR(x, na.rm = T)\nx[x < (qnt[1] - H)] <- caps[1]\nx[x > (qnt[2] + H)] <- caps[2]\n\ndumpdata$houseage <- x\nhead(dumpdata)\nqnt\ncaps","007e9e44":"# After capping\nsummary(lm(lreal_price ~ houseage + houseage_sq, data = dumpdata))","bba53a28":"# Create a model after capping.\nmodel8 <- lm(lreal_price ~  near_dump + d89 + l_area + l_area_sq + l_land + houseage + houseage_sq +rooms + baths + nbh_0, data = dumpdata)\n\nsummary(model8)","0d0d16c7":"bptest(model8)","2ae768c3":"resettest(model8)","78b61ab8":"print(vif(model8))","db630096":"ols_test_normality(model8)","2561dfff":"summary(model6)","898640c9":"When we look at the result for the population which we sample, we see that the most explanatory variable for house price are the age of the house, the number of bathrooms, and the neighborhoods where it is located. Then, the area of the house, the land of the property and the number of rooms come. The distance to the dumpsite turned out to be an insignificant variable.\n\nWhen we start building model, we see that we have a problem with non-normality of residuals. This could make our interpretation biased. This bias may be stemming from the outliers, variables not listed or insufficient information about the dump sites. To mitigate the effects of the outliers, we performed log transformations for many variables and a square root transformation for houseage (due to its values of 0). About the dump site, we don\u2019t know if there is a new dump site installed between years 1989 and 1992 for sure. If we had a chance to see the impact of a new dump site, better with the prices of the same houses (panel data), the effects of the dump site could be more obvious.\n\nTo solve this non-normality of residuals problem we encountered, we conducted several approaches.\n\nFirstly, we observed influential observations and examined why these observations could be tagged as influential. Then, we dropped them from our regression model step by step from the top. As a conclusion, we decided to remove 12 observations from the model due to fixing all linear model assumptions.\n\nSecondly, we used robust estimation to solve the problem. We conducted the same linear model as we explained above and put into robust regression, but this did not help to fix the problem.\nFinally, we used capping method for houseage outliers, but this couldn\u2019t solve the problem too.\n\nIt seems like the only alternative we have is the removal of influential observations. Other methods we tried are good solutions to the non-normality of the residuals problem but not effective on this dataset.","8e3a978d":"According to the result above, in the difference-in-difference model, near_dump and the d89 variables, which is the dummy of the year variable, are significant and the model's R-square is 0.28, this result was 0.22 in the previous model.  But dnear_dump is not significant, and this means that there is not significant difference on house prices between the years. ","4e199d69":"## SOLUTIONS\n\n### 1 - REMOVAL OF INFLUENTIAL OBSERVATIONS","60e6d8b9":"# ANALYSIS","7485dc58":"When we see boxplot of area, we saw that there are some outlier and If we have outliers, we may need a log transformation that could reduce the influence of those observations. On the other hand, the logarithm transformation is usually needed when the dependent and independent variables do not have a linear relationship, and probably a logarithmic relationship. As seen above, there is a non-linear relationship between area and lreal_price. As we know, the area of house is related to the price of the house. The increase in the area will affect the price of the house positively until a specific level, and after that, price of house will either flatten out or even it might decrease. This is the relationship between area and lreal_price. That is the other reason why we need transformed the area. So, we plotted it again. We could not literally change the non-linear relationship, but we have a better outcome.","d93ae315":"### DISCUSSION","b506a1ed":"After capping, the model has gone even worse. We decided to stick with our previous model where we removed the outliers. And see below.","9efc598d":"From the above table, we can say that we have same strongly correlated values for houseage, houseage_sq, l_area and l_area_sq which are normal.","c6673619":"As in the table above, we can say that even if we transformed area to logarithm, it is non-linear. Therefore, we create square of log area and include it in the model.","848d864c":"The price distribution of neighbourhood 0 is significantly different than the price difference of all the other neighbourhoods at a significance level of 0.01. we add this variable to our regressors.","c2c8e61f":"When we made a regression model with lreal_price and new near_dump variable, as explain above if distance lower than 15.000 m it will be 1 and otherwise 0, our model becomes significant and R-squared is 0.23.  Coefficient of near_dump is -0.41 and this is a strong value. We have achieved a good model, as will be seen in the above results. ","bc42d529":"The overall F-statistic of the model is 84.15 and the corresponding p-value is approximately 0 which is similar to our previous model. This indicates that the overall model is statistically significant. In other words, the regression model is useful. However, houseage_sq and near_dump variables are not significant anymore as opposed to the previous model. Coefficient of housage variable changed because its squared term is now insignificant.\n\n* D89, houseage and baths are statistically significant at the 0.01 significance level. In particular, the coefficients from the model output tells that;\n    * When year is 1989, in other words when d89 variables is 1, then d89 is associated with an approximately 10.91% decrease in lreal_price on average, assuming all other variables are held constant.\n    * An increase in houseage by one year is associated with an approximately 0.35% decrease in real_price on average, assuming all other variables are held constant.\n    * An increase in number of baths by 1 is associated with a 13.16% increase in real_price on average, assuming all other variables are held constant.\n* L_land and rooms are statistically significant at the 0.05 significance level. In particular, the coefficient from the model output tells that;\n    * An increase in land by 1% is associated with an approximately 6.157% increase in real_price on average, assuming all other variables are held constant.\n    * An increase in rooms by 1 is associated with an approximately 4.766% increase in real_price on average, assuming all other variables are held constant.\n* L_area, l_area_sq and nbh_0 are statistically significant at the 0.10 significance level. In particular, the coefficient from the model output tells that;\n    * An increase in area by 1% is associated with a 261.8% increase in real_price on average, assuming all other variables are held constant. \n    * An increase in area_sq by 1% is associated with a 19.64% increase in real_price on average, assuming all other variables are held constant. \n    * When neighbourhood is 0, in other words when nbh_0 variable is 1, then nbh_0 is associated with an approximately 6.435% increase in real_price on average, assuming all other variables are held constant.\n\nThe adjusted R-squared is 0.7221. This indicates that 72.21% of the variance in lreal_price can be explained by the predictors in the model.\n","70cf6b76":"Above table represents the observations with the highest absolute residual values to lowest one. When we started removing observations one by one, we found out that Obs 168, 230, 157, 46, 259, 315, 303, 227, 52, 34, 182, and 166 as possibly problematic to our model. Observations 168, 157, 303, 230 and 34 are outliers and rest of the observations (46, 259, 315, 227, 52, 182, 166) should be either high leverage points or influential observations.\n\n* Obs 168 seems to be the highest extreme value which has very low real_price. (range of real_price is from 26004 to 299981), whereas Obs 157 and 303 have very high real_price.\n* Obs 230 has the maximum value for area. (range of area is from 739 to 5136). \n* Obs 34 has very high value of houseage. (range of houseage is from 0 to 189). \n\nWe drop them from the regression and fit the model without them to see how the results change.\n","185566fc":"### Test for Multicollinearity\n\nWe include as independent variables what we tested to see whether they are highly correlated. From the below table we can conclude that houseage and houseage_sq, l_area and l_area_sq are strongly correlated with each other which are normal.","54b501c7":"As a conclusion we used variables in our model what we explained so far. And build a model.","2b29a580":"### 3- CAPPING\n\nWe assume that outliers of houseage variable generate a problem.  Outlier is any data point more than 1.5 interquartile ranges (IQRs) below the first quartile or above the third quartile. Therefore, we look at its quartiles. ","f845e792":"#### Identifying outliers\nIf the studentized residuals are far from the equation, and are an outlier on the predictors, then it can overly influence the equation. A general measurement for influence is Cook\u2019s Distance. Cook\u2019s distance helps to identify points that negatively affect your regression model. If a data point has a large cook\u2019s d, the data point indicates that strongly influences the fitted values. The measurement is a combination of each observation\u2019s leverage and residual values; the higher the leverage and residuals, the higher the Cook\u2019s distance.\n\nFor computing Cook\u2019s distance, we firstly generate a new variable which is the absolute value of the residuals. To see the observations with the highest absolute residual values to the lowest one. Then examine rows one by one to find out why these rows could be tagged as influential observations and how to affect the regression model when remaining (n-1) observations.\n","ee2e786d":"This is our final model. We still have non-normality of residuals problem. We will now try to solve this issue with different approaches using this model as a base model.","75fb37f3":"P-value is lower than 0.05 we do not have constant variance of residuals so there is a heteroskedasticity in the model.","6f28daad":"Problem is going on. Robust estimation did not fix the normality of residuals problem. Even though when we remove all extreme outliers from the model as we did for OLS model, it did not work well.","6948bb97":"**IQR (Interquartile range) = Q3-Q1 = 22 - 0 = 22\n\nfirst quartile \u2013 1.5 \u00b7 IQR = 0 \u2013 33 = \u201333\nthird quartile + 1.5 \u00b7 IQR = 22 + 33 = 55\n\nTo determine if there are outliers we must consider the numbers that are 1.5\u00b7IQR or 22 beyond the quartiles.\n\nSince some of the data are outside the interval from \u201333 to 55, there are outliers. Therefore, we use capping to replace outliers with 5th and 95th percentile values.\n\nHouseage which is greater than 75th percentile + 1.5IQR (55) turn into 95th percentile (80). We can observe it with the plot below.\n","28d62810":"### Testing for Non-Linear Functional Form \nTo understand whether the model is linear, we use Ramsey\u2019s RESET test. \n\n*Hypothesis:* \n> Ho: the model is linear.\n\n> H1: the model is non-linear. \n","09c936fc":"#### We can conclude that removing outliers works well. Our model has no problem anymore.","8c810558":"If we need to locate a new garbage dump site near our city, we must look for the optimal location to minimize its impact on house prices in the area. This report estimates the impact of a dump site\u2019s vicinity on house prices. We are going to take the available historical data about house prices in our city for two available years, which are 1989 and 1992, and present an econometric model. Determinants measured are distance to dump site, property area, the land associated with a property, number of rooms, number of baths, age of the house, distance to the city center, and distance to the ring road. On the base of this analysis, a model for predicting the prices of a house is constructed. \n\nIn this report, the dataset is analyzed, and a multiple regression model is constructed to determine how large the impact of a dumpsite on house prices in the area is. Dataset is analyzed and model is developed in R.\n\nThe problem declaration of this report can be divided into two questions:\n1. What factors are important when valuing a house?\n2. Is vicinity to the dumpsite an important aspect when valuing a house?\n\nFor this reason, the hypothesis of this report will be as follows:\n\nH0: Distance to the dumpsite an important aspect of house prices.\n\nH1: Distance to the dumpsite is not an important aspect of house prices.","8690aadd":"We want to transform neighbourhoods variable to a binary format that works better with classification and regression algorithms. This process is also known as One Hot Encoding.","be55728e":"We used Ramsey Reset test to check linearity.","2c813354":"Above table showed that we have same strongly correlated values for houseage, houseage_sq, l_area and l_area_sq which are normal.","3768b5ad":"The p-value is higher than 0.05 we have constant variance of residuals so there is no heteroskedasticity in the model.","542ff281":"To see whether house prices changed over time we use difference-in-difference model. Therefore, we are creating a dummy variable for year. Then, multiply dummy variable for year with near_dump variable.","046199d0":"We transformed neighbourhood variable to a binary format that works better with classification and regression algorithms. This process is also known as one hot encoding. We think of introducing neighbourhood 0 dummy to the model. The t-test results for the prices in neighbourhood 0 and all the other neighbourhood is as above.","8ee9e2bd":"We consider checking linearity of log area.","da93d39a":"We can see above on left plot lreal_price and houseage have a quadratic relationship. lreal_price decreases with the age of house grows but after some point, lreal_price starts to increase (the houses become older and they will be historical). So, the relationship between lreal_price and age are inverted U-shaped. As usual, the coefficient of age is expected to be positive and then on age^2 to be negative. The aim here is that there is a theoretical explanation of the empirical reason for including the square of the feature also as shown above there are some outliers. Therefore, we created houseage_sq variable and now as shown above on the right plot, there is an almost linear relationship.","be3080a6":"If the house is near the dump site, house prices go down about 41%. Another issue is that whether the house prices have changed within the years or not, in other words, is the coefficient of the near_dump variables are same in both years?","6eeab3ae":"The p-value is 0.011 which means lower than 0.05. So, we do reject the null hypothesis. Our model is non-linear.","e5f2f05c":"Similar to area, there is a nonlinear relationship between land and lreal_price, so the logarithm of this variable was again plotted, and a nearly linear relationship was obtained.","8b8a0eba":"The p-value of the shapiro test which is above 0.05 so we do not reject null hypothesis. Our residuals are normally distributed. ","527ff3a4":"### Testing for Heteroskedasticity\nHeteroskedasticity happens while the standard errors of a variable, observed over a particular amount of time, are non-constant. Heteroskedasticity is a violation of the assumptions for linear regression modeling, and so it can influence the validity of our model.\n\n*Hypothesis:* \n\n> Ho: There is no heteroskedasticity. \n\n> H1: There is heteroskedasticity\n","65b08899":"The p-value is 0.089 which means greater than 0.05. So, we do not reject the null hypothesis. Our model is linear now.","68686113":"Distance to dump, distance to ring road and distance to city center variables don\u2019t have any outliers, so we keep these variables as they are.","95a8e8a1":"When we look at the plot, we can see that until distance to dump is approximately 17000 meters, the price of houses is increasing, but after that point, distance does not affect prices at all. When distance reached up approx. 25000 meters, the price of houses starts to decrease. We thought that what could have caused this situation might have been the home away from the city center. We can prove this situation by looking at the correlations of distance to the city center and distance to dump variables.","bf03f6d3":"Now, the p-value of the test is 0.055 which is higher than 0.05. So, we do not reject the null hypothesis. Our model is linear","6cefd6c2":"We could inspect this phenomenon by looking at the histogram below which looks skewed. Also, we can check it with the p-value of the Shapiro-Wilk test which is below 0.05 so we reject null hypothesis. Our residuals are non-normally distributed.","bae0571c":"As we guessed, there is a 0.96 high positive correlation between distance to dump site and distance to city center. So, as distance to dump site increases, distance to city center also increases. While doing this correlation test, we also checked the correlation for the distance to ring road variable, which is an important variable for house prices, and it came out with a high correlation of 92 percent. In other words, as dump site distance increases, ring road distance increases. Thus, we can say that the location of the dump site is might be in the same area with city center and ring road. On the other hand, since we have a correlation between the distance variables in our dataset, we can use only one to mitigate having multicollinearity. We use dist2dump variable because we are investigating the effect of dump site to house prices.\n\nFurthermore, the effect of the distance to dump site variable on prices disappears when the distance increases too much, because the discomfort limit given by the dump site is not infinite. Then, it might be due to the increase in the distance of the house to the city center and to the ring road. Therefore, we can create a dummy variable by accepting the distance as the limit for the distance to dump-site variable to make our model stable. If distance of house to dump site lower than that point, variable be 1 and otherwise, it becomes 0. For this reason, we created a dummy variable dist2dump lower than 15000 which we found by trial and error. We took different cut points and looked for the point, which we have higher absolute value (higher difference in means of the two group) of the coefficient of the dummies. When dist2dump lower than 10000, coefficient of near_dump is -0.32366 at 0.01 significance level. When dist2dump lower than 15000, coefficient of near_dump is -0.41254 at 0.01 significance level. When dist2dump lower than 17000, coefficient of near_dump is -0.32516 at 0.1 significance level. It seems like the distance to dump site affects house prices.\n","92f76c76":"The p-value of the shapiro-wilk test which is lower than 0.05 so we do reject null hypothesis. Our residuals are non-normally distributed. ","b5f10f05":"P-value is above 0.05 we have constant variance of residuals so there is no heteroskedasticity in the model.","a37ad709":"Above table show that we have strongly correlated values for l_area and l_area_sq which are normal. ","db55d0a9":"House age variable has so many outliers but here we cannot apply log transformation due to some house age values of 0. We tried to handle the outliers with capping method. This method takes all the outliers and puts them 1.5 times interquartile range away from the interquartile range.","d41678a3":"### Testing for Non-normally Distributed Residuals \n\n*Hypothesis: *\n> Ho: There is no non-normally distributed residuals. \n\n> H1: There is non-normally distributed residuals.\n","4d91fcd2":"The p-value of the shapiro-wilk test which is lower than 0.05 so we do reject null hypothesis. Our residuals are non-normally distributed. ","f0cec87a":"When we look at boxplot of real_price variable we can see that there are some outliers. Since we have outliers in our dependent or independent variables, a log transformation could reduce the influence of those observations. Therefore, we will create new variable for logarithmic price.","734fe967":"The p-value is 0.055 which means greater than 0.05. So, we do not reject the null hypothesis. Our model is linear now.","4db7160f":"# DATA DESCRIPTION","bfd7bdad":"### 2- Robust Estimation \n\nTo solve the non-normality of residuals problem, we used robust estimation. For Robust regression model we will use the same OLS model and what we examined for residuals and Cook\u2019s distance.","4a4c742f":"The main purpose of this report is to develop a model which can help us understand how vicinity to a dump site affects house prices.\n\nIn the first model, we built which has only one variable, being in vicinity of a dump site was significant at 1% significance level but at 10% significance level in the last model. We believe that this is a result for adding significant variables to the model. The other models we developed all had some OLS assumption problems. In our model, we eliminated all of these problems using removal of influential observation method. \n\nThe variables that are able to explain the variance in the house prices are age of the house, number of bathrooms and neighborhood. We found out that being in vicinity of a dump site is significant at 10% level in determining the house prices, although not as significant as aforementioned properties of a house. This is a result that we expected to get.\n","6e67cfc3":"In the new model, we have 309 observations left. From the output we can see the following:\n\n* The overall F-statistic of the model is 137.9 and the corresponding p-value is approximately 0. This indicates that the overall model is statistically significant. In other words, the regression model as a whole is useful.\n* houseage, houseage_sq, baths and d89 are statistically significant at the 0.01 significance level. In particular, the coefficients from the model output tells that;\n\n    * An increase in houseage by one year is associated with an approximately 0.75% decrease in lreal_price on average, assuming all other variables are held constant.\n\t* An increase in houseage_sq by 1 is associated with an approximately 0.003% increase in lreal_price on average, assuming all other variables are held constant.\n    * An increase in number of baths by 1 is associated with a 10.27% increase in lreal_price on average, assuming all other variables are held constant.\n    * When year is 1989, in other words when d89 variables is 1, then d89 is associated with an approximately 9.17% decrease in lreal_price on average, assuming all other variables are held constant.\n    \n* L_area, l_area_sq and nbh_0 are statistically significant at the 0.05 significance level. In particular, the coefficient from the model output tells that;\n    \n    * An increase in l_area by 1% is associated with a 275.2% decrease in lreal_price on average, assuming all other variables are held constant.\n    * An increase in l_area_sq by 1 is associated with a 20.91% increase in lreal_price on average, assuming all other variables are held constant.\n    * When neighbourhood is 0, in other words when nbh_0 variable is 1, then nbh_0 is associated with an approximately 6.04% increase in lreal_price on average, assuming all other variables are held constant.\n    \n* Rooms, near_dump and l_land are statistically significant at the 0.10 significance level. In particular, the coefficient from the model output tells that;\n\n    * An increase in rooms by 1 is associated with an approximately 3.05% increase in lreal_price on average, assuming all other variables are held constant.\n    * The houses near the dump site are 5.07% cheaper than the ones that are far to the dump site.\n    * An increase in l_land by 1% is associated with an approximately 3.27% increase in lreal_price on average, assuming all other variables are held constant.\n\nThe adjusted R-squared is 0.8164. This indicates that 81.64% of the variance in lreal_price can be explained by the predictors in the model.\n","5b6f5f52":"As we examine the data, we see that the inflation adjusted price of one of the houses may be calculated incorrectly. We see that all the inflation adjusted (real) prices in 1992 are lower by 30.2%, but observation 179 has a price of 84191 and a real price of 84211 although it is a house sold in 1989. We made a correction because these two values should be the same. Real (inflation adjusted) price is a calculated value, we assumed that real price is the wrong value and we change it to 84191.\n\nWe construct boxplots of the numeric variables to see outliers if there are any. We may also consider removing some of the outliers at a later stage of our analysis.\n","ed9f592a":"# INTRODUCTION","ce92edf3":"The overall F-statistic of the model dropped to 86.81 but the corresponding p-value is still very close to 0. This indicates that the overall model is statistically significant. In other words, the regression model as a whole is useful.\n\n* D89, houseage and baths are statistically significant at 0.01 significance level. In particular, the coefficients from the model output doesn\u2019t change much.\n*\tHouseage_sq, nbh_0 and rooms are statistically significant at 0.05 significance level. The significance of l_land dropped to 0.05 significance level. In particular, the coefficient from the model output doesn\u2019t change much.\n*\tL_area_sq is statistically significant at 0.10 significance level. The significance of l_area dropped to 0.10 significance level. In particular, the coefficients from the model output tells that;\n* An increase in area by 1% is associated with an approximately 263.8% increase in real_price on average, assuming all other variables are held constant.\n* An increase in area_sq by 1% is associated with an approximately 19.8% increase in real_price on average, assuming all other variables are held constant.\n\nThe adjusted R-squared is 0.7284. This indicates that 72.84% of the variance in lreal_price can be explained by the predictors in the model.\n","5a932184":"Also, rooms and baths variables will be included in the model. Below is our final model with the variables we discussed so far. We will test this model for linear regression assumptions.","f9583076":"Our data consists of houses sold in 1989 and 1992, their features, prices and inflation adjusted prices. This is a pooled cross-sectional data. We have 13 features and 321 observations.  ","db0b3612":"We tested our model for linearity. The p-value of the test is 0.0009 which is lower than 0.05. So, we do reject the null hypothesis. Our model is non-linear so maybe we need to introduce some squares to our model. ","6fe0e0f8":"P-value is above 0.05 we have constant variance of residuals so there is no heteroskedasticity in the model.","49fad392":"### Testing for Non-Linear Functional Form ","febf79d5":"### CONCLUSION","87178b77":"We tried to see if our model gets better using capped houseage variable but R-squared value of the model using capped houseage is lower. It shows that this model is not better than our previous model whatsoever. We are suspicious to adopt this new model.","d68e2b00":"From the output we can see the following:\nThe overall F-statistic of the model is 94.11 and the corresponding p-value is approximately 0. This indicates that the overall model is statistically significant. In other words, the regression model as a whole is useful.\n\nD89, houseage, l_area, l_land and baths are statistically significant at the 0.01 significance level. In particular, the coefficients from the model output tells that;\n* When year is 1989, in other words when d89 variables is 1, then d89 is associated with an approximately 11.8% decrease in real_price on average, assuming all other variables are held constant.\n* An increase in houseage by one year is associated with an approximately 0.63% decrease in real_price on average, assuming all other variables are held constant.\n* An increase in area by 1% is associated with a 35.42% increase in real_price on average, assuming all other variables are held constant.\n* An increase in land by 1% is associated with an approximately 6.925% increase in real_price on average, assuming all other variables are held constant.\n* An increase in number of baths by 1 is associated with a 10.72% increase in real_price on average, assuming all other variables are held constant.\n\nHouseage_sq, nbh_0 and rooms are statistically significant at the 0.05 significance level. In particular, the coefficient from the model output tells that;\n* An increase in houseage_sq by 1 is associated with an approximately 0.003% increase in real_price on average, assuming all other variables are held constant.\n* When neighbourhood is 0, in other words when nbh_0 variable is 1, then nbh_0 is associated with an approximately 6.829% increase in real_price on average, assuming all other variables are held constant.\n* An increase in rooms by 1 is associated with an approximately 4.609% increase in real_price on average, assuming all other variables are held constant.\n\nThe adjusted R-squared is 0.7237. This indicates that 72.37% of the variance in lreal_price can be explained by the predictors in the model.\n"}}