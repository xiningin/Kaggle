{"cell_type":{"c806bdc3":"code","e881592b":"code","62c30f8a":"code","acbc05d4":"code","94631fca":"code","87da027f":"code","4e17bd93":"code","c3fbb7b1":"code","c1e1467b":"code","af3e2059":"code","2c38665e":"code","86a86d30":"code","ef3e83c7":"code","5fb5faaf":"code","86f7c353":"code","818ff2c9":"code","f07b269f":"code","546ee321":"code","f8be87b5":"code","cc1b6ba1":"code","fcba0384":"code","a0490c5f":"code","07308690":"code","6da227ac":"code","0a55d5b3":"code","d96d1095":"code","ba96220b":"code","fa9b5b5a":"markdown","29b751d2":"markdown","b972aabc":"markdown","c19063c4":"markdown","2a23cd7d":"markdown"},"source":{"c806bdc3":"import pandas as pd\nimport numpy as np\nimport seaborn as sns\nimport matplotlib.pyplot as plt","e881592b":"# Load data\ndata = pd.read_csv('..\/input\/kaggle-survey-2021\/kaggle_survey_2021_responses.csv')","62c30f8a":"# subset data with an initial list of a few features\ndf = data.iloc[:,list(range(1,20))+[127]]","acbc05d4":"# rename columns\ncols = ['Age', 'Gender', 'Country_of_residence', 'Education', 'Job_title', 'Experience',\\\n        'Python', 'R', 'SQL', 'C', 'C++', 'Java', 'Javascript', 'Julia',\\\n        'Swift', 'Bash', 'MATLAB', 'None', 'Other', 'Salary_range']\n\ndf.columns = cols","94631fca":"# get rid of the first (questions) row\ndf = df.drop(0)","87da027f":"# filter USA data\ndf = df[df.Country_of_residence=='United States of America']","4e17bd93":"# keep just non-null values of salary\ndf = df[df['Salary_range'].notna()]","c3fbb7b1":"# checking out unique caegories of categorical columns\ncat_cols = df.select_dtypes(include = ['object', 'category']).columns\n\nfor column in cat_cols:\n    print(column)\n    print('***********')\n    print(df[column].value_counts())\n    print('--'*20)","c1e1467b":"# an attempt to convert categorical salary range into a single numeric value\ntemp1 = df['Salary_range'].str.split('-', expand=True)\ndf['Salary_min'] = temp1[0]\ndf['Salary_max'] = temp1[1]","af3e2059":"# some cleanups\ndef replace_symbols(x):\n    return x.replace(',', '').replace('$', '').replace('>', '')\n\ndf['Salary_min'] = df['Salary_min'].apply(replace_symbols).astype('int')","2c38665e":"# additional cleanups\ndef clean_text(x):\n    if x == None:\n        x = '0,000'\n    return x\n\ndf['Salary_max'] = df.Salary_max.apply(clean_text)\ndf['Salary_max'] = df['Salary_max'].apply(replace_symbols).astype('int')","86a86d30":"# estimated salary (mid value of the range)\ndf['Salary_est'] = (df['Salary_min'] + df['Salary_max'] + 1)\/2","ef3e83c7":"# filter data for salary range 30-300k\ndf = df[(df['Salary_est']>30000) & (df['Salary_est']<300000)]","5fb5faaf":"# recode rows of language columns\nlanguages = ['Python', 'R', 'SQL', 'C', 'C++', 'Java', 'Javascript', \\\n             'Julia', 'Swift', 'Bash', 'MATLAB', 'None', 'Other']\n\nfor i in languages:\n    df[i].replace({i: 1, np.nan:0}, inplace=True)","86f7c353":"plt.figure(figsize=(10,5))\nsns.boxplot(x='Salary_est', y = 'Gender', data = df);","818ff2c9":"plt.figure(figsize=(10,5))\nsns.boxplot(x='Salary_est', y = 'Education', data = df);","f07b269f":"plt.figure(figsize=(10,5))\nsns.boxplot(x='Salary_est', y = 'Job_title', data = df);","546ee321":"plt.figure(figsize=(10,5))\nsns.boxplot(x='Salary_est', y = 'Experience', data = df);","f8be87b5":"plt.figure(figsize=(10,5))\nsns.boxplot(x='Salary_est', y = 'Experience', data = df);","cc1b6ba1":"from sklearn.linear_model import LinearRegression\nfrom sklearn.model_selection import train_test_split\nfrom sklearn.metrics import mean_squared_error, r2_score, mean_absolute_error","fcba0384":"X = df.drop(['Gender', 'Salary_range', 'Salary_range', 'Salary_min', 'Salary_max', 'Salary_est'], axis=1)\ny = df['Salary_est']","a0490c5f":"X = pd.get_dummies(X, drop_first=True)","07308690":"X_train, X_test, y_train, y_test = train_test_split(X,y, random_state=1)","6da227ac":"# instantiate\nmodel = LinearRegression()\n\n# fit\nmodel.fit(X_train, y_train)\n\n# predict\ny_pred = model.predict(X_test)\n\n# evaluate\nmean_squared_error(y_test, y_pred)","0a55d5b3":"np.sqrt(mean_squared_error(y_test, y_pred))","d96d1095":"r2_score(y_test, y_pred)","ba96220b":"mean_absolute_error(y_test, y_pred)","fa9b5b5a":"## Base model","29b751d2":"### Improved models forthcoming ........","b972aabc":"## Some visualization","c19063c4":"# Predicting salary of the US data scientists","2a23cd7d":"#### If salaries of data scientists are determined by their education, experience and job title etc. then we should be able to make hiring manager's life easier by building a predictive model. This is a first attempt to build such a model."}}