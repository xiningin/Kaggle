{"cell_type":{"713ad4ae":"code","abfe2b8c":"code","6525f357":"code","cc100c56":"code","0553f5c8":"code","b59a620f":"code","1a136bdd":"code","5d9420ea":"code","28ce1a0b":"code","32f47f11":"code","4612fb62":"code","3299462d":"code","21acffe7":"code","06682b04":"code","5a137ab5":"code","e79244f6":"code","c622c818":"code","a2064418":"code","535e30d2":"code","c41e461b":"code","1262c91a":"code","f2204673":"code","9ee4784e":"code","3e5dae13":"code","d2d95bc2":"code","25b6e1fa":"code","a684ccde":"code","cccc1155":"code","ff715a11":"code","0bc2175d":"code","10e33e89":"code","dd92b29b":"code","cfeb2ba8":"code","512411ad":"code","7779601f":"code","c30ae3b1":"code","d3c71424":"code","e0da220a":"code","67281949":"code","a4574a15":"code","b3827421":"code","3d8e20d7":"code","a2ae5b71":"code","bb2d3c78":"code","acdd8bca":"code","73ade189":"code","e1b678c5":"code","8a6d1f0e":"code","b083c4d7":"code","7ae4f272":"code","07b12c65":"code","019ff7e6":"code","0759c2fd":"code","daaa800b":"code","7968fa43":"code","37664be7":"code","13395638":"code","d5aa9921":"code","08fd05da":"code","930343f7":"code","7be06eb0":"code","963b522d":"code","50d64996":"code","0c0a9353":"markdown","7ceb5079":"markdown","a56ad45c":"markdown","dc6c2211":"markdown","6cead826":"markdown","f2d48665":"markdown","6858afa7":"markdown","220b449e":"markdown","b21e5093":"markdown","9b76c97d":"markdown","a5a8a9c6":"markdown","52b449af":"markdown","888c0153":"markdown","15ebe77c":"markdown","cc594fb3":"markdown","2b3f4847":"markdown","b4da79f5":"markdown","c3c30970":"markdown","6934e834":"markdown","21614995":"markdown","14d96331":"markdown","eda89a30":"markdown","c4e8ee0b":"markdown","3beaa36e":"markdown","125d1da8":"markdown","d57e05fa":"markdown","a16a44c7":"markdown","7f22d2b2":"markdown","f966021c":"markdown","c14f251b":"markdown","a557c6c0":"markdown","f0229247":"markdown","d1444dea":"markdown","9ac1af7a":"markdown","0011600f":"markdown","554950a9":"markdown","c8d27c94":"markdown"},"source":{"713ad4ae":"import numpy as np \nimport pandas as pd \nimport seaborn as sns\nimport matplotlib.pyplot as plt\n\nimport os\nfor dirname, _, filenames in os.walk('\/kaggle\/input'):\n    for filename in filenames:\n        print(os.path.join(dirname, filename))","abfe2b8c":"# Loading datasets\ntrain = pd.read_csv('\/kaggle\/input\/task-04\/training_data.csv')\nprint(train.shape)\ntrain.info()","6525f357":"train.head()","cc100c56":"sns.countplot(x=\"sepse\", data=train);","0553f5c8":"def missing_percentage(df):\n    \n    \"\"\"A function for returning missing ratios.\"\"\"\n    \n    total = df.isnull().sum().sort_values(\n        ascending=False)[df.isnull().sum().sort_values(ascending=False) != 0]\n    percent = (df.isnull().sum().sort_values(ascending=False) \/ len(df) *\n               100)[(df.isnull().sum().sort_values(ascending=False) \/ len(df) *\n                     100) != 0]\n    return pd.concat([total, percent], axis=1, keys=['Total', 'Percent'])","b59a620f":"# Checking 'NaN' values.\n\nmissing = missing_percentage(train)\n\nfig, ax = plt.subplots(figsize=(20, 5))\nsns.barplot(x=missing.index, y='Percent', data=missing, palette='Reds_r')\nplt.xticks(rotation=90)\n\ndisplay(missing.T.style.background_gradient(cmap='Reds', axis=1))","1a136bdd":"test = pd.read_csv('\/kaggle\/input\/task-04\/test_data_without_label.csv')\nprint(test.shape)\ntest.info()","5d9420ea":"target = train['sepse']\ntrain = train.drop(['id', 'num_atend', 'sepse'], axis=1)\n#vamos guardar os ids para fazer a submiss\u00e3o\ntest_id = test['id']\ntest = test.drop(['id', 'num_atend'], axis=1)","28ce1a0b":"def engine_temperature (df: pd.DataFrame) -> pd.DataFrame:\n    strange_temperature = df[(df['temperatura'] <30) | (df['temperatura']>42)].temperatura\n    df.loc[strange_temperature.index.tolist(), ['temperatura']] =np.nan\n    negative_temperature = df[(df['temperatura'] < -20) & (df['temperatura'] > -42)].temperatura\n    df.loc[negative_temperature.index.tolist(), ['temperatura']] = negative_temperature.apply(abs).values.tolist()\n    \n    return df","32f47f11":"train = engine_temperature(train)\ntest = engine_temperature(test)","4612fb62":"sns.displot(train[\"temperatura\"]);","3299462d":"sns.boxplot(x=\"temperatura\", data=train);","21acffe7":"sns.boxplot(x=\"sepse\", y='temperatura',data=pd.concat([train, target], axis=1));","06682b04":"sns.displot(train[\"pulso\"]);","5a137ab5":"sns.boxplot(x=\"pulso\", data=train);","e79244f6":"def engine_pulse (df: pd.DataFrame) -> pd.DataFrame:\n    strange_pulse = df[(df['pulso'] <20) | (df['pulso']>200)].pulso\n    df.loc[strange_pulse.index.tolist(), ['pulso']] =np.nan \n    return df","c622c818":"train = engine_pulse(train)\ntest = engine_pulse(test)","a2064418":"train_with_target = pd.concat([train, target], axis=1)\nsns.boxplot(x=\"sepse\", y='pulso',data=train_with_target);","535e30d2":"sns.histplot(train['pulso']);","c41e461b":"sns.boxplot(x=\"pulso\", data=train);","1262c91a":"sns.histplot(train['respiracao']);","f2204673":"def engine_respiratory_frequency (df: pd.DataFrame) -> pd.DataFrame:\n    df['respiracao'] = df['respiracao'].replace(0, np.nan) \n    return df","9ee4784e":"train = engine_respiratory_frequency(train)\ntest = engine_respiratory_frequency(test)","3e5dae13":"train_with_target = pd.concat([train, target], axis=1)\nsns.boxplot(x=\"sepse\", y='respiracao',data=train_with_target);","d2d95bc2":"sns.boxplot(x=\"respiracao\", data=train);","25b6e1fa":"train['pa_min'].describe()","a684ccde":"train['pa_max'].describe()","cccc1155":"def engine_pa (df: pd.DataFrame) -> pd.DataFrame:\n    strange_pa_min = df[(df['pa_min'] <30) | (df['pa_min']>250)].pa_min\n    df.loc[strange_pa_min.index.tolist(), ['pa_min']] =np.nan\n    \n    strange_pa_max = df[(df['pa_max'] <30) | (df['pa_max']>160)].pa_max\n    df.loc[strange_pa_max.index.tolist(), ['pa_max']] =np.nan\n    \n    return df","ff715a11":"train = engine_pa(train)\ntest = engine_pa(test)","0bc2175d":"train_with_target = pd.concat([train, target], axis=1)\nsns.boxplot(x=\"sepse\", y='pa_min',data=train_with_target);","10e33e89":"sns.histplot(train['pa_min']);","dd92b29b":"sns.boxplot(x=\"sepse\", y='pa_max',data=train_with_target);","cfeb2ba8":"sns.histplot(train['pa_max']);","512411ad":"# Checking 'NaN' values.\n\nmissing = missing_percentage(train)\n\nfig, ax = plt.subplots(figsize=(20, 5))\nsns.barplot(x=missing.index, y='Percent', data=missing, palette='Reds_r')\nplt.xticks(rotation=90)\n\ndisplay(missing.T.style.background_gradient(cmap='Reds', axis=1))","7779601f":"# Checking 'NaN' values.\n\nmissing = missing_percentage(test)\n\nfig, ax = plt.subplots(figsize=(20, 5))\nsns.barplot(x=missing.index, y='Percent', data=missing, palette='Reds_r')\nplt.xticks(rotation=90)\n\ndisplay(missing.T.style.background_gradient(cmap='Reds', axis=1))","c30ae3b1":"sns.set(font_scale=1.1)\ncorrelation_train = train_with_target.corr()\nmask = np.triu(correlation_train.corr())\nplt.figure(figsize=(7, 7))\nsns.heatmap(correlation_train,\n            annot=True,\n            fmt='.1f',\n            cmap='coolwarm',\n            square=True,\n            mask=mask,\n            linewidths=1,\n            cbar=False)\n\nplt.show()","d3c71424":"sns.set_theme(style=\"ticks\")\nsns.pairplot(train_with_target, hue=\"sepse\");","e0da220a":"!pip install impyute","67281949":"from impyute.imputation.cs import median","a4574a15":"#median target encoding to fillna\ntrain_with_target = train_with_target.fillna(train_with_target.groupby('sepse').transform('median'))","b3827421":"columns_names = test.columns.tolist()\nmedian_test = median(test.to_numpy())\ndf_test = pd.DataFrame(median_test, columns=columns_names)","3d8e20d7":"df_test.describe()","a2ae5b71":"from sklearn.model_selection import (GridSearchCV, StratifiedKFold,\n                                     cross_val_score, cross_validate, train_test_split)\nfrom sklearn.ensemble import RandomForestClassifier\nfrom sklearn.metrics import balanced_accuracy_score\nfrom lightgbm import LGBMClassifier","bb2d3c78":"# Split the data into training\/testing sets\nX = train_with_target.drop(['sepse'], axis=1)\nX_train, X_test, y_train, y_test = train_test_split(X, target, test_size=0.2, random_state=17)","acdd8bca":"X = X_train.values\ny = y_train.values\nfolds = StratifiedKFold(n_splits=5, shuffle=True, random_state=17)\ntrain_score = []\nval_score = []\nfor train_index, test_index in folds.split(X, y):\n    X_train, X_val = X[train_index], X[test_index]\n    y_train, y_val = y[train_index], y[test_index]\n    rfc = RandomForestClassifier(class_weight=\"balanced\", random_state=17)\n    rfc.fit(X_train, y_train)\n    train_score.append(balanced_accuracy_score(y_train, rfc.predict(X_train)))\n    val_score.append(balanced_accuracy_score(y_val, rfc.predict(X_val)))\nprint(np.mean(train_score))\nprint(np.mean(val_score))","73ade189":"sorted_feature_importance = rfc.feature_importances_.argsort()\nplt.barh(train_with_target.columns.values[sorted_feature_importance], \n        rfc.feature_importances_[sorted_feature_importance], \n        color='turquoise')\nplt.xlabel('Model Feature Importance')","e1b678c5":"X = train_with_target.drop(['sepse'], axis=1)\nX_train, X_test, y_train, y_test = train_test_split(X, target, test_size=0.2, random_state=17)\nX = X_train.values\ny = y_train.values\nfolds = StratifiedKFold(n_splits=5, shuffle=True, random_state=17)\ntrain_score = []\nval_score = []\nfor train_index, test_index in folds.split(X, y):\n    X_train, X_val = X[train_index], X[test_index]\n    y_train, y_val = y[train_index], y[test_index]\n    lgbm_clf = LGBMClassifier(is_unbalance = True, random_state=17)\n    lgbm_clf.fit(X_train, y_train)\n    train_score.append(balanced_accuracy_score(y_train, lgbm_clf.predict(X_train)))\n    val_score.append(balanced_accuracy_score(y_val, lgbm_clf.predict(X_val)))\nprint(np.mean(train_score))\nprint(np.mean(val_score))","8a6d1f0e":"skf = StratifiedKFold(n_splits=5, shuffle=True, random_state=17)\n\nresults = cross_validate(lgbm_clf, X, y, scoring= 'balanced_accuracy',cv=skf, verbose=True, return_train_score=True)\n\nprint(\"CV accuracy score: {:.2f}% +- {:.2f}%\".format(results['train_score'].mean() * 100, results['train_score'].std() * 100))","b083c4d7":"param_grid = {'num_leaves': [7, 15, 31, 63], \n              'max_depth': [3, 4, 5, 6, -1]}\ngrid_searcher = GridSearchCV(estimator=lgbm_clf, param_grid=param_grid, scoring='balanced_accuracy',\n                             cv=skf, verbose=1, n_jobs=4)","7ae4f272":"grid_searcher.fit(X, y)\ngrid_searcher.best_params_, grid_searcher.best_score_","07b12c65":"balanced_accuracy_score(y_test, grid_searcher.predict(X_test))","019ff7e6":"num_iterations = 100\nlgb_clf2 = LGBMClassifier(random_state=17, is_unbalance = True, max_depth=grid_searcher.best_params_['max_depth'], \n                          num_leaves=grid_searcher.best_params_['num_leaves'], n_estimators=num_iterations,\n                          n_jobs=1)\n\nparam_grid2 = {'learning_rate': np.logspace(-3, 0, 10)}\ngrid_searcher2 = GridSearchCV(estimator=lgb_clf2, param_grid=param_grid2,\n                               cv=5, scoring=('balanced_accuracy'), verbose=1, n_jobs=4)\n\ngrid_searcher2.fit(X, y)\nprint(grid_searcher2.best_params_, grid_searcher2.best_score_)\nprint(balanced_accuracy_score(y_test, grid_searcher2.predict(X_test)))","0759c2fd":"final_lgb = LGBMClassifier(random_state=17, is_unbalance = True, n_estimators=num_iterations, num_leaves=grid_searcher.best_params_['num_leaves'],\n                           learning_rate=grid_searcher2.best_params_['learning_rate'], max_depth=grid_searcher.best_params_['max_depth'],\n                         n_jobs=-1)","daaa800b":"final_lgb","7968fa43":"scores = cross_validate(final_lgb, X, y, cv=skf,\n                         scoring=('balanced_accuracy'),\n                         return_train_score=True)","37664be7":"print(\"CV train balanced_accuracy: {:.2f}% +- {:.2f}%\".format(scores['train_score'].mean() * 100, scores['train_score'].std() * 100))\nprint(\"CV validation balanced_accuracy: {:.2f}% +- {:.2f}%\".format(scores['test_score'].mean() * 100, scores['test_score'].std() * 100))","13395638":"final_lgb","d5aa9921":"final_lgb.fit(X, y)\nprint(balanced_accuracy_score(y_test, final_lgb.predict(X_test)))","08fd05da":"test_predictions = final_lgb.predict(df_test)","930343f7":"pd.DataFrame(test_predictions).value_counts(normalize=True)","7be06eb0":"sorted_feature_importance = final_lgb.feature_importances_.argsort()\nplt.barh(train_with_target.columns.values[sorted_feature_importance], \n        final_lgb.feature_importances_[sorted_feature_importance], \n        color='turquoise')\nplt.xlabel('Model Feature Importance')","963b522d":"final_predictions = pd.DataFrame(data = {\"id\": test_id.values, \"sepse\": test_predictions})\nfinal_predictions.to_csv(\"predictions.csv\", index = False)","50d64996":"pd.read_csv(\"predictions.csv\", sep=',')","0c0a9353":"Como podemos observar \u00e9 um problema **desbalanceado**:","7ceb5079":"## Lidando com valores faltantes","a56ad45c":"- O corpo humano n\u00e3o aguenta grandes varia\u00e7\u00f5es em sua temperatura interna. Aos 42 \u00baC, apenas 5 graus acima do normal, as prote\u00ednas come\u00e7am a cozinhar e todo o organismo entra em pane. J\u00e1 o frio faz o metabolismo diminuir, mas n\u00e3o \u00e9 t\u00e3o fatal quanto o calor. O term\u00f4metro precisa descer at\u00e9 20 \u00baC para acontecer uma parada card\u00edaca irrevers\u00edvel. \n\nFonte: https:\/\/super.abril.com.br\/mundo-estranho\/qual-e-o-nivel-maximo-e-o-minimo-que-a-temperatura-do-corpo-pode-atingir\/\n\n- Para detectar sepse: ``Temperatura``: (> 38\u00b0C ou < 36\u00b0C)","dc6c2211":"#### **Press\u00e3o**\n\nA hipertens\u00e3o, ou press\u00e3o alta, acontece quando a press\u00e3o arterial, ap\u00f3s ser medida por diversas vezes, \u00e9 igual ou superior a 14 por 9. Isso acontece porque os vasos por onde o sangue circula se contraem e fazem com que a press\u00e3o do sangue se eleve. Ela \u00e9 considerada normal quando a press\u00e3o sist\u00f3lica (m\u00e1xima) n\u00e3o ultrapassa 130 mmHg e a diast\u00f3lica (m\u00ednima) \u00e9 inferior a 85 mmHg.","6cead826":"Pacientes com sepse tem maiores pulsos comparados com pacientes sem essa doen\u00e7a.","f2d48665":"Parace  que as press\u00f5es est\u00e3o invertidas, a pa_min \u00e9 a press\u00e3o arterial sist\u00f3lica e pa_max \u00e9 a press\u00e3o dist\u00f3lica:","6858afa7":"Em repouso, a frequ\u00eancia card\u00edaca normal apresenta uma varia\u00e7\u00e3o entre 60 e 100 batimentos por minuto (bpm). A acelera\u00e7\u00e3o dos batimentos (acima de 100 bpm) indica que a pessoa est\u00e1 com taquicardia. J\u00e1 uma frequ\u00eancia card\u00edaca baixa, inferior a 60 bpm, \u00e9 considerada uma condi\u00e7\u00e3o de bradicardia:\n\n- at\u00e9 2 anos \u2014 120 a 140 bpm;\n- 8 at\u00e9 17 anos \u2014 80 a 100 bpm;\n- adulto sedent\u00e1rio \u2014 70 a 80 bpm;\n- adultos que praticam atividades f\u00edsicas e idosos \u2014 50 a 60 bpm.","220b449e":"A matriz de correla\u00e7\u00e3o mostra que o pulso e a respira\u00e7\u00e3o s\u00e3o os atributos mais correlacionados com a sepse. Os atributos pa_min e pa_max est\u00e3o altamente correlacionados entre si, isso pode ser ruim para o modelo, mas como a a anormalidade em um desses atributos pode ser importante para detectar sepse usaremos ambos mesmo assim","b21e5093":"Os exemplos dos pacientes com sepse n\u00e3o est\u00e3o muito bem distribu\u00eddos no espa\u00e7o. Fica dificil fazer a imputa\u00e7\u00e3o dos dados faltantes usando algoritmos como mice e knn. Tentamos usar ambos mas os resultados n\u00e3o foram satisfat\u00f3rios devido \u00e0 dificuldade para encontrar vizinhos similares, exemplos duplicados com o valor de target diferente e alta porcentagem de valores faltantes. Usamos a abordagem da mediana dos atributos para preencher os dados faltantes. No treino usamos a mediana do atributo referente \u00e0 classe que ele pertence. No teste apenas a mediana do atributo. Isso pode causar um certo n\u00edvel de overfitting por estarmos usando informa\u00e7\u00e3o do target, mas devido \u00e0s dificuldades encontradas a estrat\u00e9gia foi adotada:  ","9b76c97d":"Agora nosso modelo final deu maior import\u00e2ncia para respira\u00e7\u00e3o e temperatura e pa_min. Mas pa_max e pulso tamb\u00e9m tiveram bastante import\u00e2ncia o que faz muito mais sentido comparado com a solu\u00e7\u00e3o do Random Forest. Portanto, essa ser\u00e1 nossa solu\u00e7\u00e3o final, os resultados parecem satisfat\u00f3rios.","a5a8a9c6":"Em geral, consideramos crise hipertensiva quando a press\u00e3o arterial sist\u00f3lica (valor mais alto alto, chamado de press\u00e3o arterial m\u00e1xima) encontra-se acima de 180 mmHg ou quando a press\u00e3o diast\u00f3lica (valor mais alto baixo, chamado de press\u00e3o arterial m\u00ednima) encontra-se acima de 110 mmHg. Portanto, um paciente com press\u00e3o arterial de 190\/90 mmHg ou 175\/115 apresenta crise hipertensiva. Quanto mais alto for o valor da press\u00e3o arterial, mais grave \u00e9 a crise. Alguns pacientes chegam a ter 240 ou 250 mmHg de press\u00e3o m\u00e1xima durante um pico hipertensivo.","52b449af":"### ","888c0153":"N\u00e3o sabemos a idade dos pacientes, mas provavelmente s\u00e3o adultos, ent\u00e3o esperamos que os valores estejam em torno de 50-80 bpm na m\u00e9dia. Valores superiores a 90-100 bpm indicam alguma anomalia no paciente:","15ebe77c":"#### **Respira\u00e7\u00e3o**","cc594fb3":"**COMO DETECTAR SEPSE**\n\n- **INFEC\u00c7\u00c3O**\n > resposta inflamat\u00f3ria reacional a um microorganismo ou invas\u00e3o de tecido est\u00e9ril;\n\n- **BACTEREMIA**\n > presen\u00e7a de bact\u00e9ria vi\u00e1vel no sangue; SEPTICEMIA: termo que, pela sua imprecis\u00e3o, deve ser abandonado;\n\n- **S\u00cdNDROME DA RESPOSTA INFLAMAT\u00d3RIA SIST\u00caMICA (SIRS)**\n > resposta inflamat\u00f3ria inespec\u00edfica do organismo a v\u00e1rios tipos de agress\u00e3o (pancreatite, trauma, infarto agudo do mioc\u00e1rdio, entre outras), manifestada por duas ou mais das seguintes condi\u00e7\u00f5es:\n\n    > ``Temperatura``: (> 38\u00b0C ou < 36\u00b0C)\n``Freq\u00fc\u00eancia card\u00edaca``: (> 90 bpm)\n``Freq\u00fc\u00eancia respirat\u00f3ria``: (> 20\/irpm ou PaCO2 < 32 mm Hg)\n``Leuc\u00f3citos``: (> 12.000\/mm\u00b3 ou < 4.000\/mm\u00b3 ou > 10% de formas jovens)\n\n- **SEPSE**: \n > resposta sist\u00eamica \u00e0 infec\u00e7\u00e3o grave; o paciente \u00e9 portador de sepse caso apresente SIRS deflagrada por infec\u00e7\u00e3o;\n\n- **SEPSE GRAVE**:\n  > \u00e9 a sepse associada com disfun\u00e7\u00e3o de \u00f3rg\u00e3os, hipoperfus\u00e3o ou hipotens\u00e3o, podendo haver acidose l\u00e1tica, olig\u00faria ou altera\u00e7\u00f5es agudas do n\u00edvel de consci\u00eancia;\n\n- **CHOQUE S\u00c9PTICO**\n > sepse com hipotens\u00e3o, a despeito de adequada ressuscita\u00e7\u00e3o h\u00eddrica, associada \u00e0 presen\u00e7a de anormalidades de perfus\u00e3o;\n\n- **S\u00cdNDROME DA DISFUN\u00c7\u00c3O ORG\u00c2NICA M\u00daLTIPLA**: presen\u00e7a de fun\u00e7\u00e3o org\u00e2nica alterada em pacientes agudamente enfermos, nos quais a homeostase n\u00e3o pode ser mantida sem interven\u00e7\u00e3o.\n\nfonte: http:\/\/www.fmt.am.gov.br\/manual\/sepse.htm\n","2b3f4847":"**FREQU\u00caNCIA RESPIRAT\u00d3RIA**\nA frequ\u00eancia respirat\u00f3ria \u00e9 o n\u00famero de respira\u00e7\u00f5es que uma pessoa realiza por minuto. Valores normais:\n\n- Mulher: \u2013 18 a 20 mpm;\n- Homem: \u2013 16 a 18 mpm;\n- Crian\u00e7a: \u2013 20 a 25 mpm;\n- Lactantes: \u2013 30 a 40 mpm.","b4da79f5":"Como podemos observar os resultados do Random Forest foram bastante positivos para o Cross Validation. Al\u00e9m disso podemos observar que a respir\u00e3o e pa_max foram os atributos mais importantes para o modelo. A seguir tentaremos um m\u00e9todo de Boosting devido ao sucesso do Bagging para o conjunto de dados em an\u00e1lise:","c3c30970":"## Modelos","6934e834":"#### **Temperatura**","21614995":"### Como m\u00e9dicos detectam sepse?","14d96331":"**Random Forest**","eda89a30":"Como podemos observar ap\u00f3s a transforma\u00e7\u00e3o dos dados a distribui\u00e7\u00e3o da temperatura est\u00e1 concentrada entre 35 e 39 graus, o que faz sentido:","c4e8ee0b":"Portanto o trabalho est\u00e1 em verificar valores discrepantes (n\u00e3o podem ocorrer na realidade) dos atributos e substituir os valores faltantes de modo a poder fazer um modelo usando os dados que temos dispon\u00edveis: temperatura, frequ\u00eancia, pulso,press\u00e3o m\u00ednima e pres\u00e3o m\u00e1xima. Vamos explorar cada um desses atributos, mas antes disso vamos a excluir o Id e n\u00famero de atendimento, pois n\u00e3o faz sentido usar na vida real essas vari\u00e1veis: ","3beaa36e":"Infelizmente o tuning n\u00e3o melhorou muito o modelo, mas usaremos ele como modelo de submiss\u00e3o final:","125d1da8":"Como podemos observar ainda temos muitos dados faltantes principalmente nos atributos respira\u00e7\u00e3o, pa_min e pa_max tanto no treino quanto no teste:","d57e05fa":"A nossa temperatura normal fica entre 36\u00b0C e 37,5\u00b0C, a distribui\u00e7\u00e3o dos pacientes sem sepse atesta isso. J\u00e1 pacientes com sepse podem apresentar temperaturas maiores a 38\u00b0C ou inferiores a 36\u00b0C, mas n\u00e3o necessariamente a temperatura tem que estar nesse intervalo. Um valor de temperatura fora da normalidades pode ter alguma associa\u00e7\u00e3o com alguma doen\u00e7a.","a16a44c7":"Vamos fazer um pouco de tuning nos par\u00e2metros:\n\n- 1) Tuning da complexidade do modelo:","7f22d2b2":"## EDA e Feature Engineering","f966021c":"\u00c9 esperado que maiores valores de frequ\u00eancia respirat\u00f3ria sejam encontrados em pacientes que foram diagnosticados com sepse:","c14f251b":"**Lightgbm**","a557c6c0":"Portanto, faz sentido colocar como Nan: as temperaturas que sejam maiores a 42 \u00baC e menores a 20 \u00baC, pois s\u00e3o valores discrepantes. Al\u00e9m disso temperaturas negativas que estejam nesse intervalo provavelmente foram um erro de digita\u00e7\u00e3o, ent\u00e3o substituir pelo m\u00f3dulo:","f0229247":"Vamos ver o comportamento da temperatura com rela\u00e7\u00e3o ao target:","d1444dea":"Como decidimos imitar o comportamente de um m\u00e9dico baseado em regras para detectar sepse de acordo com os valores dos atributos, fez sentido come\u00e7ar um ensemble de v\u00e1rias \u00e1rvores de decis\u00e3o (vota\u00e7\u00e3o de diferentes classificadores). A primeira estrat\u00e9gia foi usar o Random Forest:","9ac1af7a":"Pulso maior que 180 bpm indica perigo de morte. O pulso ficar abaixo dos 60 bpm pode indicar que o paciente est\u00e1 em repouso, dormindo ou bradicardia:","0011600f":"Al\u00e9m disso h\u00e1 muitos valores faltantes nos poucos atributos que existem. O trabalho est\u00e1 em como lidar com esses dados faltantes:","554950a9":"- 2) Converg\u00eancia","c8d27c94":"#### **Pulso**"}}