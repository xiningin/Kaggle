{"cell_type":{"c3caf023":"code","b277ebc8":"code","64ebcb2d":"code","d684d1d2":"code","3b36420d":"code","dc416d48":"code","d207af4d":"code","87c9fdcf":"code","29ccf95d":"code","b3d11088":"code","d48c857a":"code","d171cc93":"code","d3893a10":"code","ae89f561":"code","8aabd7e5":"code","703237dc":"code","2fab2a5b":"code","62e3e121":"code","9b8fda8a":"code","9a773ce3":"code","ebec44d0":"code","559bbf6e":"code","c5cfcb6f":"code","b56db0af":"markdown","ec67e237":"markdown","947818e6":"markdown","a95e9c5d":"markdown","cff3c2f8":"markdown","62a03610":"markdown","cb793380":"markdown","024ba8ef":"markdown","4daf33a6":"markdown","f0d9db4f":"markdown","77bea48f":"markdown"},"source":{"c3caf023":"import os\nimport matplotlib.pyplot as plt\nimport numpy as np\nimport pandas as pd\nimport seaborn as sns\nimport os\n# print(os.listdir(\"..\/input\"))\n%matplotlib inline\nsns.set({'figure.figsize':(16,8)})","b277ebc8":"train_data=pd.read_csv(\"..\/input\/train.csv\")\ntest_data=pd.read_csv(\"..\/input\/test.csv\")\n#train_data=pd.read_csv(\"\/Users\/mbp\/Desktop\/HETIC\/KAGGLE\/nyc-taxi-trip-duration\/train.csv\")\n#test_data=pd.read_csv(\"\/Users\/mbp\/Desktop\/HETIC\/KAGGLE\/nyc-taxi-trip-duration\/test.csv\")\n\ntrain_data.describe()","64ebcb2d":"train_data.head()","d684d1d2":"print(test_data.shape)\nprint(train_data.shape)","3b36420d":"print(f\"Data Frame a {train_data.shape[0]} lignes et {train_data.shape[1]} colonnes\")\nprint(f\"La colonne d'id a {train_data.id.nunique()} de la valeur identique\")\ntrain_data.duplicated().sum()","dc416d48":"train_data.isna().sum()","d207af4d":"fig, ax = plt.subplots(7, sharex=True)\nfor i,c in enumerate([\"vendor_id\",\"passenger_count\",\"pickup_longitude\",\"pickup_latitude\",\"dropoff_longitude\",\"dropoff_latitude\",\"trip_duration\"]):\n    sns.boxplot(train_data[c],ax=ax[i],width=1.5)\n    ax[i].set_xscale(\"log\")\n    ax[i].set_xlabel(\"\")\n    ax[i].set_ylabel(c, fontsize=15,rotation=45)\nfig.suptitle('Analyse des outliers', fontsize=20)\n","87c9fdcf":"train_data['pickup_datetime'] = pd.to_datetime(train_data['pickup_datetime'])\ntrain_data['dropoff_datetime'] = pd.to_datetime(train_data['dropoff_datetime'])\ntrain_data.info()","29ccf95d":"train_data[\"store_and_fwd_flag\"]=np.where(train_data[\"store_and_fwd_flag\"] == \"N\",0,1)\ntrain_data.head()","b3d11088":"X=train_data[['vendor_id',\n       'passenger_count', 'pickup_longitude', 'pickup_latitude',\n       'dropoff_longitude', 'dropoff_latitude']]\nX.head()","d48c857a":"y=train_data['trip_duration']\ny.head()","d171cc93":"from sklearn.ensemble import RandomForestRegressor\nfrom sklearn.model_selection import train_test_split, cross_val_score;","d3893a10":"X_train, X_test, y_train, y_test = train_test_split(X,y, test_size=0.2, random_state=42)\nX_train.shape, y_train.shape, X_test.shape, y_test.shape\n","ae89f561":"rf = RandomForestRegressor(n_estimators=70)\n","8aabd7e5":"rf.fit(X_train,y_train)","703237dc":"pred = rf.predict(X_test)\npred","2fab2a5b":"from sklearn.metrics import mean_squared_log_error ","62e3e121":"print(mean_squared_log_error(y_test,pred))","9b8fda8a":"submission =pd.read_csv(\"..\/input\/sample_submission.csv\")\n#submission =pd.read_csv(\"\/Users\/mbp\/Desktop\/HETIC\/KAGGLE\/nyc-taxi-trip-duration\/train.csv\")\nsubmission.head()","9a773ce3":"test_pred = rf.predict(test_data[['vendor_id',\n       'passenger_count', 'pickup_longitude', 'pickup_latitude',\n       'dropoff_longitude', 'dropoff_latitude']])\nprint(test_pred)","ebec44d0":"submission['trip_duration'] = test_pred","559bbf6e":"submission.head()","c5cfcb6f":"# my_submission.to_csv('\/Users\/mbp\/Desktop\/HETIC\/KAGGLE\/nyc-taxi-trip-duration\/submission.csv', index=False)\nsubmission.to_csv('submission_file.csv', index=False)","b56db0af":"## 4. Verification des donn\u00e9es manquantes","ec67e237":"## 3. Verification des doublons","947818e6":"On n'a aucun doublon dans le Dataset","a95e9c5d":"## 1. Import des librairies","cff3c2f8":"On a beaucoup de outliers dans des colonnes num\u00e9riques, mais on ne pourrait pas les supprimer parce qu'ils influencent sur la pr\u00e9diction du projet\n\n- De plus 'Trip duration' en compte le plus et c'est la feature qu'on cherche \u00e0 pr\u00e9dire\n\n","62a03610":"## 7. Train\/Test Split","cb793380":"## 5. Analyse des outliers","024ba8ef":"## 2. Chargement et exploration du Dataset","4daf33a6":"## 8. Modeling","f0d9db4f":"## 6. Conversion des donn\u00e9es et attribution des variables","77bea48f":"## 9. Prediction"}}