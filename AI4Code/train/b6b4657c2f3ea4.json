{"cell_type":{"dc735f27":"code","e735562e":"code","e753633e":"code","d4cc419b":"code","c2e94a1b":"code","3851fae1":"code","e81bdcc8":"code","c6204527":"markdown","33a8df42":"markdown","6e4b3d72":"markdown","333dc98a":"markdown","7c65399d":"markdown"},"source":{"dc735f27":"import pandas as pd\nimport pandasql as ps\nimport matplotlib.pyplot as plt\nimport seaborn as sns\nfrom matplotlib.ticker import MaxNLocator\nimport plotly.graph_objects as go\n%matplotlib inline","e735562e":"df = pd.read_csv('..\/input\/oscars-major-award-nominees-winners-19282020\/oscarnominees.csv',encoding='latin1').drop_duplicates()","e753633e":"d1 = ps.sqldf(\"select Title as movie_star,sum(case when Winner = 'Y' then 1 else 0 end) as wins,count(*) as nominations from df where Award not in ('Picture') group by 1\", locals())\nd1['win_%'] = round((d1['wins']*1.00\/d1['nominations'])*100,0).astype(int)\nd1 = d1.sort_values(['nominations', 'win_%','movie_star'], ascending=False)[:20].reset_index(drop=True)\nd1['movie_star'] = d1['movie_star'].apply(lambda x : x.replace(' ','\\n',1))\n\nfig, ax1 = plt.subplots(figsize=(20,7))\ncolor = 'tab:green'\nax1.set_title('Win % of top 20 movie stars by Nominations', fontsize=16)\nax1.set_xticklabels(ax1.get_xticklabels(),rotation=40)\nax1.yaxis.set_major_locator(MaxNLocator(integer=True))\nax1 = sns.barplot(x='movie_star', y='nominations', data=d1, palette='summer', alpha=1)\nax1.tick_params(axis='y')\nax1.tick_params(axis='x', which='major', labelsize=12)\nax2 = ax1.twinx()\ncolor = 'tab:red'\nax2.set_ylabel('Win %', fontsize=16)\nax2 = sns.lineplot(x='movie_star', y='win_%', data = d1, sort=False, color=color, marker='o')\nax2.tick_params(axis='y', color=color)\nax2.yaxis.set_major_locator(MaxNLocator(integer=True))\nax1.set_xlabel('Movie Star', fontsize=20)\nax1.set_ylabel('Nominations', fontsize=16)\nax2.set_ylabel('Win %', fontsize=16)\nplt.show()","d4cc419b":"d1 = ps.sqldf(\"select Title as movie_star,sum(case when Winner = 'Y' then 1 else 0 end) as wins,count(*) as nominations from df where Award in ('Actor','Actress') group by 1\", locals())\nd1['win_%'] = round((d1['wins']*1.00\/d1['nominations'])*100,0).astype(int)\nd1 = d1.sort_values(['wins', 'win_%','movie_star'], ascending=False)[:20].reset_index(drop=True)\nd1['movie_star'] = d1['movie_star'].apply(lambda x : x.replace(' ','\\n',1))\n\nfig, ax1 = plt.subplots(figsize=(20,7))\ncolor = 'tab:green'\nax1.set_title('Win % of top 20 movie stars by Wins (Best Actor\/Actress)', fontsize=16)\nax1.set_xticklabels(ax1.get_xticklabels(),rotation=40)\nax1.yaxis.set_major_locator(MaxNLocator(integer=True))\nax1 = sns.barplot(x='movie_star', y='wins', data=d1, palette='winter', alpha=1)\nax1.tick_params(axis='y')\nax1.tick_params(axis='x', which='major', labelsize=12)\nax2 = ax1.twinx()\ncolor = 'tab:red'\nax2.set_ylabel('Win %', fontsize=16)\nax2 = sns.lineplot(x='movie_star', y='win_%', data = d1, sort=False, color=color, marker='o')\nax2.tick_params(axis='y', color=color)\nax2.yaxis.set_major_locator(MaxNLocator(integer=True))\nax1.set_xlabel('Movie Star', fontsize=16)\nax1.set_ylabel('Wins', fontsize=16)\nax2.set_ylabel('Win %', fontsize=16)\nplt.show()","c2e94a1b":"d2 = ps.sqldf(\"select Title as movie_star,sum(case when Winner = 'Y' then 1 else 0 end) as wins,count(*) as nominations from df where Award != 'Picture' group by 1\", locals())\nd2 = d2[d2['wins']==0].drop(columns={'wins'})\nd2 = d2.sort_values(['nominations','movie_star'], ascending=[False, True])[:10].reset_index(drop=True)\nd2['movie_star'] = d2['movie_star'].apply(lambda x : x.replace(' ','\\n'))\n\nfig, ax1 = plt.subplots(figsize=(17,7))\ncolor = 'tab:green'\nax1.set_title('Most Nominated Stars without an Oscar', fontsize=16)\nax1.set_xticklabels(ax1.get_xticklabels(),rotation=0)\nax1.yaxis.set_major_locator(MaxNLocator(integer=True))\nax1 = sns.barplot(x='movie_star', y='nominations', data=d2, palette='OrRd_r', alpha=1)\nax1.tick_params(axis='y')\nax1.set_xlabel('Movie Star', fontsize=16)\nax1.set_ylabel('Nominations', fontsize=16)\n\nfor p in ax1.patches:\n    height = p.get_height()\n    ax1.text(x = p.get_x()+(p.get_width()\/2), \n    y = height+0.15, \n    s = '{:.0f}'.format(height), \n    ha = 'center',weight='bold')\n    \nplt.show()","3851fae1":"d3 = pd.merge(df[(df['Award']!='Picture') & (df['Winner']=='Y')][['Title']].drop_duplicates(),df[df['Award']!='Picture'].groupby(by=['Title'])['Year'].min().reset_index(drop=False).rename(columns={'Year':'First Nomination'}),on=['Title'],how='left')\nd3 = pd.merge(d3,df[(df['Award']!='Picture') & (df['Winner']=='Y')].groupby(by=['Title'])['Year'].min().reset_index(drop=False).rename(columns={'Year':'First Oscar'}),on=['Title'],how='left')\nd3['Difference'] = d3['First Oscar'] - d3['First Nomination']\nd3 = d3.sort_values(by=['Difference'],ascending=False)[:20]\nd3['Title'] = d3['Title'].apply(lambda x : x.replace(' ','\\n'))\n\n\nfig, ax1 = plt.subplots(figsize=(17,5))\ncolor = 'tab:green'\nax1.set_title('Longest time b\/w First Nomination & Oscar', fontsize=16)\nax1.set_xticklabels(ax1.get_xticklabels(),rotation=0)\nax1.yaxis.set_major_locator(MaxNLocator(integer=True))\nax1 = sns.barplot(x='Title', y='Difference', data=d3, palette='mako', alpha=1)\nax1.tick_params(axis='y')\nax1.set_xlabel('Movie Star', fontsize=16)\nax1.set_ylabel('Time Period (in yrs)', fontsize=16)\n\nfor p in ax1.patches:\n    height = p.get_height()\n    ax1.text(x = p.get_x()+(p.get_width()\/2), \n    y = height+1, \n    s = '{:.0f}'.format(height), \n    ha = 'center',weight='bold')\n\nplt.show()    ","e81bdcc8":"remakes = df[df['Award']=='Picture'].groupby(by=['Title']).size().reset_index(drop=False).rename(columns={0:'Count'})\nremakes = remakes[remakes['Count']>1]['Title'].tolist()\nd4 = pd.merge(df[df['Title'].isin(remakes)].groupby(by=['Title'])['Year'].min().reset_index(drop=False).rename(columns={'Year':'First Nomination'}),\n              df[df['Title'].isin(remakes)].groupby(by=['Title'])['Year'].max().reset_index(drop=False).rename(columns={'Year':'Second Nomination'}),\n              on=['Title'],how='left')\nd4 = pd.merge(d4,\n             df[(df['Title'].isin(remakes) & (df['Winner']=='Y'))].groupby(by=['Title'])['Year'].max().reset_index(drop=False).rename(columns={'Year':'Oscar'}),\n             on=['Title'],how='left').fillna('')\nd4 = d4.sort_values(by=['First Nomination','Second Nomination','Oscar']).rename(columns={'Title':'Movie'}).reset_index(drop=True)\nd4","c6204527":"Meryl Streep is the movie star with most nominations. With her first nomination for Supporting Actress in 1978, she is one of the most successful movie stars of her generation with 3 Oscars.","33a8df42":"* Frances McDormand is one the most successful movie stars by winning it's all 3 nominations for Best Actress.\n* Interesting to see that Meryl Streep doesn't show up among in this chart due to her low Wins\/Nominations ratio.","6e4b3d72":"Henry Fonda had to wait for 41 years to receive his first Academy Award for Best Actor in 1981.","333dc98a":"* Gleen Close & Peter O'Toole are some of the most unlucky movie stars with very high nominations but zero Oscars.\n* Peter O'Toole received his first nomination in 1962 and last in 2006. Thus, having one of the longest involvements in Academy Awards i.e 44 years.","7c65399d":"7 movies with similar title have recived nominations for best picture."}}