{"cell_type":{"540d04a9":"code","1e2e221c":"code","4668137d":"code","603ed073":"code","f90f49c2":"code","49a33d76":"code","02c04b8f":"code","74f074e1":"code","b5f56a69":"code","8f900d6c":"code","5a59e08f":"code","ef393d58":"code","8e483c30":"code","c2f55616":"code","fb3a7a7f":"code","325637ad":"code","27c8bf28":"code","441b3559":"code","5467fff0":"code","5e671726":"code","53c214e5":"code","2677173b":"code","49657006":"code","3fc9f3a5":"code","c96fce93":"code","ef738e27":"code","1e718b71":"code","1cdbffa3":"code","b5fff361":"code","d7728f93":"code","43e31076":"code","e0327aae":"code","a01533fc":"code","788d8d71":"code","33811431":"code","cbc845f5":"code","cde6d4c3":"code","32cd7f0e":"code","65be8b2d":"code","2ced3534":"code","930fcb10":"markdown"},"source":{"540d04a9":"import pandas as pd\nwater= pd.read_csv(\"..\/input\/nyc-beach-water-quality-data\/dohmh-beach-water-quality-data-1.csv\")\nwater.head(9)","1e2e221c":"water['Sample Location'].value_counts()","4668137d":"water['Sample Location']= water['Sample Location'].replace('Rigth','Right')\nround(water['Sample Location']. value_counts()*100\/len(water),2)","603ed073":"water.nunique()","f90f49c2":"water.info()","49a33d76":"water['Sample Date']=pd.to_datetime(water['Sample Date'])\nwater.info()","02c04b8f":"water.isnull().sum()*100\/len(water)","74f074e1":"missing=water[water.isna().any(axis=1)]\nmissing.head()","b5f56a69":"missing.isnull().sum()*100\/len(missing)","8f900d6c":"missing.nunique()","5a59e08f":"missing['Units or Notes'].value_counts()*100\/len(missing)","ef393d58":"water[water['Units or Notes']=='Result below detection limit'].head()","8e483c30":"water[water['Units or Notes']=='Result below detection limit'].info()","c2f55616":"water[water['Units or Notes']!='Result below detection limit'].head()","fb3a7a7f":"water[water['Units or Notes']!='Result below detection limit'].info()","325637ad":"water['Enterococci Results']=water['Enterococci Results'].fillna(0)\nwater.isnull().sum()*100\/len(missing)","27c8bf28":"water=water.dropna()\nwater.info()","441b3559":"water.nunique()","5467fff0":"water.head()","5e671726":"water=water.drop(['Units or Notes'],axis=1)\nwater.head()","53c214e5":"#paper : https:\/\/www.environment.nsw.gov.au\/-\/media\/OEH\/Corporate-Site\/Documents\/Water\/Beaches\/state-of-beaches-2019-2020-statewide-summary-200302.pdf\nwater.loc[water['Enterococci Results'] <= 50, 'Category'] = 'open'\nwater.loc[water['Enterococci Results'] >500, 'Category'] = 'closed'\nwater.loc[(water['Enterococci Results'] >50) & (water['Enterococci Results'] <=500), 'Category'] = 'advisory'\nround(water['Category'].value_counts()*100\/len(water))","2677173b":"water.rename(columns = {'Enterococci Results':'Enterococci Results (MPN\/100 ml)'}, inplace = True)\nwater.head()","49657006":"!pip install pandas-profiling","3fc9f3a5":"from pandas_profiling import ProfileReport\nProfileReport(water, title=\"EDA Report\")","c96fce93":"!pip install pycaret","ef738e27":"data = water.sample(frac=0.8, random_state=42)\ndata_unseen = water.drop(data.index)\ndata.reset_index(inplace=True, drop=True)\ndata_unseen.reset_index(inplace=True, drop=True)\nprint('Data for Modeling: ' + str(data.shape))","1e718b71":"print('Unseen Data For Predictions: ' + str(data_unseen.shape))","1cdbffa3":"from pycaret.classification import *","b5fff361":"water= setup(data = data, target = 'Category', session_id=42,\n                  normalize = True, \n                  transformation = True, \n                  log_experiment = True,\n                  handle_unknown_categorical = True, \n                  unknown_categorical_method = 'most_frequent',\n                  remove_multicollinearity = True, #drop one of the two features that are highly correlated with each other\n                  ignore_low_variance = True,#all categorical features with statistically insignificant variances are removed from the dataset.\n                  combine_rare_levels = True,# all levels in categorical features below the threshold defined in rare_level_threshold param are combined together as a single level\n                  numeric_imputation='median',\n           ignore_features=['Sample ID'],\n            date_features=['Sample Date'],\n             high_cardinality_features =['Beach Name'],           \n           fix_imbalance = True,\n            train_size = 0.8\n          )","d7728f93":"dt = create_model('dt')","43e31076":"print(dt)","e0327aae":"tuned_dt = tune_model(dt,optimize = 'Recall')","a01533fc":"plot_model(tuned_dt, plot = 'auc')","788d8d71":"plot_model(tuned_dt, plot = 'pr')","33811431":"plot_model(tuned_dt, plot='feature')","cbc845f5":"plot_model(tuned_dt, plot = 'confusion_matrix')","cde6d4c3":"evaluate_model(tuned_dt)","32cd7f0e":"predict_model(tuned_dt)","65be8b2d":"unseen_predictions = predict_model(tuned_dt, data=data_unseen)\nunseen_predictions.head()","2ced3534":"print(\"Confidence Score :   {}\".format(round(unseen_predictions.Score.mean(),2)))#Confidence Score","930fcb10":"# Sample Location"}}