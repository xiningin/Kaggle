{"cell_type":{"ba6bc7e4":"code","b2bf7873":"code","71b99a13":"code","410043c6":"code","cb3f4ca4":"code","d2abeaf2":"code","36a7eec3":"code","67bfe9b7":"code","baa598b5":"code","ca557d5e":"code","d5d7ccf3":"code","c69ba0a2":"code","fae0ab68":"code","d33f5b82":"code","19d71455":"code","34d22cde":"code","f917e722":"code","a7756291":"code","d5fb2028":"code","869b34cf":"code","364d1931":"code","296534ab":"code","2761d6a7":"markdown","78e000fc":"markdown"},"source":{"ba6bc7e4":"import numpy as np\nimport pandas as pd\nfrom sklearn.linear_model import LinearRegression\nfrom sklearn.metrics import mean_squared_error, r2_score\nfrom sklearn.model_selection import train_test_split\nfrom sklearn.tree import DecisionTreeRegressor\nimport matplotlib.pyplot as plt\nfrom sklearn.model_selection import cross_val_score\nfrom sklearn.tree import DecisionTreeClassifier\nfrom skompiler import skompile\nfrom sklearn.metrics import accuracy_score\nfrom sklearn import preprocessing\nfrom sklearn.model_selection import GridSearchCV\nfrom sklearn.ensemble import RandomForestRegressor","b2bf7873":"df = pd.read_csv('..\/input\/fish-market\/Fish.csv')\ndf.rename(columns= {'Length1':'LengthVer', 'Length2':'LengthDia', 'Length3':'LengthCro'}, inplace=True)\ndf","71b99a13":"dmy = pd.get_dummies(df, columns = ['Species'], drop_first=True)\nX = dmy.drop(['Weight'], axis=1)\ny = dmy['Weight']","410043c6":"X_train, X_test, y_train, y_test = train_test_split(X, y, test_size = 0.25, random_state =42)","cb3f4ca4":"rf_model = RandomForestRegressor(random_state = 42)","d2abeaf2":"rf_model.get_params()","36a7eec3":"rf_model.fit(X_train,y_train)","67bfe9b7":"y_pred_test = rf_model.predict(X_test)\ny_pred_train =  rf_model.predict(X_train)","baa598b5":"rf_model.score(X_train,y_train), rf_model.score(X_test,y_test)","ca557d5e":"np.sqrt(mean_squared_error(y_train, y_pred_train)) , np.sqrt(mean_squared_error(y_test, y_pred_test))","d5d7ccf3":"prm= {'max_depth' : list(range(1,10)),\n      'max_features':[3,5,7,9,11],\n      'n_estimators':[100,200,500,1000,2000]}","c69ba0a2":"rf_model = RandomForestRegressor(random_state = 42)","fae0ab68":"rf_cv_model = GridSearchCV(rf_model, prm, cv=10, n_jobs = -1)","d33f5b82":"rf_cv_model.fit(X_train, y_train)","19d71455":"rf_cv_model.best_params_","34d22cde":"rf_tuned = RandomForestRegressor (random_state = 42, max_depth =9, max_features = 3 , n_estimators = 100)","f917e722":"rf_tuned.fit(X_train, y_train)","a7756291":"rf_tuned.score(X_train, y_train), rf_tuned.score(X_test, y_test)","d5fb2028":"y_predtuned_test = rf_tuned.predict(X_test)\ny_predtuned_train =  rf_tuned.predict(X_train)","869b34cf":"np.sqrt(mean_squared_error(y_train, y_predtuned_train)) , np.sqrt(mean_squared_error(y_test, y_predtuned_test))","364d1931":"Importance = pd.DataFrame({\"Importance\": rf_tuned.feature_importances_*100}, index = X_train.columns)","296534ab":"Importance.sort_values(by= \"Importance\", axis=0, ascending = True).plot(kind='barh', color = 'r')\nplt.xlabel(\"Degisken Onem Duzeyleri\")","2761d6a7":"### Model Tuning ","78e000fc":"### Modelimizi Kural\u0131m"}}