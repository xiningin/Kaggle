{"cell_type":{"417c516b":"code","2bba4062":"code","98facb18":"code","999034f2":"code","09dd3519":"code","dd95e7c2":"code","e2905d2b":"code","8cd51c76":"code","45db8260":"code","fddb457d":"code","6aa28e70":"code","1ea78565":"code","0985b729":"code","16709d02":"code","ebecc316":"code","c8328377":"code","55791803":"code","b5042eb7":"code","d5b36bcf":"markdown","c43347ed":"markdown","6d00278a":"markdown","d9b999b3":"markdown","454b69ae":"markdown","bb9b56f4":"markdown","a76fbe6b":"markdown","f86199ec":"markdown","7db4ee9c":"markdown","437d5edf":"markdown","00142aa3":"markdown","5ba47aee":"markdown","f9fac3da":"markdown","4265b75c":"markdown","497e65ad":"markdown"},"source":{"417c516b":"local_path=\"..\/input\/\"\nimport numpy as np\nimport pandas as pd\nimport seaborn as sns\nimport matplotlib.pyplot as plt\nimport datetime\n%matplotlib inline\nimport warnings\nwarnings.filterwarnings(\"ignore\")","2bba4062":"col = ['Country', 'League', 'Season', 'Date', 'Time', 'Home', 'Away', 'HG', 'AG', 'Res']\ndf = pd.read_csv('..\/input\/brazilsoccerleague\/BRA.csv', usecols=col)\ndf.head()","98facb18":"df.shape","999034f2":"df.isnull().sum()","09dd3519":"values = {'HG': 0, 'AG': 0, 'Res': 'D'}\ndf.fillna(value=values, inplace=True)\n#df.dropna(axis=0,inplace=True)\n","dd95e7c2":"df.describe()","e2905d2b":"from collections import Counter\nhtmc=Counter(df.Home)\nprint('Home Team Match:',htmc)","8cd51c76":"df.groupby('Home').count()['Res'].sort_values(ascending=False)","45db8260":"df.groupby('Away').count()['Res'].sort_values(ascending=False)","fddb457d":"df['Winner']='NA'\ndf.head()","6aa28e70":"df['Winner'][df['Res']=='H']=df['Home']\ndf['Winner'][df['Res']=='A']=df['Away']\n","1ea78565":"df.head()","0985b729":"df.head()\nx=100*df.groupby('Res').count()['Home']\/len(df)\ncolors = ['lightgreen', 'lightcoral', 'lightskyblue']\nplt.pie(x,explode=[.05,0,.05],labels=['AwayTeam Win%='+str(x.iloc[0].round(1)),\n                                    'Draw%='+str(x.iloc[1].round(1)),'HomeTeam Win%='+str(x.iloc[2].round(1))],\n        startangle=90,shadow=True,colors=colors,textprops={'Fontsize':'large', 'fontweight':'bold'})\nplt.axis('equal')\nplt.title('Win Percentage Home and Away',fontsize=14,fontweight='bold');","16709d02":"plt.figure(figsize=(18,10))\nplt.subplots_adjust(hspace=0.2,wspace=0.4)\nplt.suptitle(\"Matches Won by Team Insight\",fontsize=18,fontweight='bold')\n                    \nplt.subplot(1,3,1)\ndf.groupby('Winner').count()['Res'].sort_values(ascending=True).iloc[1:-1].plot(kind='barh',grid=True)\nplt.axvline(np.mean(df.groupby('Winner').count()['Res']),color='r')\n#df_win.ix[1:-1]\nplt.title('All season combined winners')\nplt.xlabel('Count of matches')\n#plt.tight_layout()\n\nplt.subplot(1,3,2)\ndf_home_team=df.pivot_table(values='Away',index='Home',columns='Res',aggfunc='count')\nTotal=df_home_team.sum(axis=1)\nfor i in df_home_team.columns.tolist():\n    df_home_team['Percent:'+i]=100*df_home_team[i]\/Total\nsns.heatmap(df_home_team[['Percent:A','Percent:D','Percent:H']],cmap='coolwarm',annot=True,cbar=False)\nplt.title('Percentage of Win\/Loss\/Draw at Home Ground')\n#plt.tight_layout()\n\nplt.subplot(1,3,3)\ndf_away_team=df.pivot_table(values='Home',index='Away',columns='Res',aggfunc='count')\nTotal=df_away_team.sum(axis=1)\nfor i in df_away_team.columns.tolist():\n    df_away_team['Percent:'+i]=100*df_away_team[i]\/Total\nsns.heatmap(df_away_team[['Percent:A','Percent:D','Percent:H']],cmap='coolwarm',annot=True)\nplt.title('Percentage of Win\/Loss\/Draw at Away Ground')\n#plt.tight_layout()\n                    ","ebecc316":"pd.set_option('display.max_columns',500)\ndf_goal=df.pivot_table(values=['HG','AG'],index='Home',columns='Away',aggfunc='sum')\n#df_goal","c8328377":"plt.figure(figsize=(10,10))\nplt.subplots_adjust(wspace= .6)\nplt.suptitle('Total goals made by teams',fontsize=18)\nplt.subplot(1,2,1)\ndf_goal.xs('HG',level=0,axis=1).sum(axis=1).sort_values(ascending=True).plot(kind='barh')\nplt.title('Total goal at Home Ground')\nplt.subplot(1,2,2)\ndf_goal.xs('AG',level=0,axis=1).sum(axis=0).sort_values().plot(kind='barh',color='g')\nplt.title('Total goal at Away Ground')","55791803":"plt.figure(figsize=(20,10))\nplt.subplots_adjust(wspace=0.1)\nplt.suptitle('Goal made by team against each team',fontsize=20)\nplt.subplot(1,2,1)\nsns.heatmap(df_goal.xs('HG',level=0,axis=1),cmap='coolwarm',annot=True)\nplt.title('Score of Teams at Home Ground', fontsize=16)\n#sns.heatmap(df_HGgoal.xs)\nplt.subplot(1,2,2)\nsns.heatmap(df_goal.xs('AG',level=0,axis=1),cmap='Blues',annot=True)\nplt.title('Score of Teams at Away Ground',fontsize=16)","b5042eb7":"df_win=df.groupby('Winner').count()['Res']\ndf_total_goals=df_goal.xs('HG',level=0,axis=1).sum(axis=1)+df_goal.xs('AG',level=0,axis=1).sum(axis=0)\ndf_win_goal=pd.concat({'Count_Win':df_win,'Total_goal':df_total_goals},axis=1, sort=False).dropna()\n#plt.scatter(df_win_goal.Count_Win,df_win_goal.Total_goal)\nsns.regplot('Count_Win','Total_goal',df_win_goal)\nplt.title('Corelation of Win vs Score',fontsize=16)","d5b36bcf":"### List of Matches played by each team on Away ground","c43347ed":"### Which team is best performing? Most Winner to Lowest Winner\n\n### How is the Percentage of Win, Loss,Draw of Team on Home ground?\n\n### How is the percentage of Win, Loss, Draw of teams when played on Away Ground\n","6d00278a":"### Which team is best performing? Most Winner to Lowest Winner\n**Conclusion:**\n1) Flamengo, Gremio, Atletico MG, S\u00e3o Paulo e Santos are the best winners\n\n### How is the Percentage of Win, Loss,Draw of Team on Home ground?\n**Conclusion:**\n1) Atletico MG, Gremio, Santos, Flamengo are the best team on Home Ground respectively in order\n2) Santa Cruz and Juventude are lowest performing team on Home Ground,respectively in order, they loose close to 50% of matches\n3) Paran\u00e1 is the team who makes most draws on Home ground\n\n### How is the percentage of Win, Loss, Draw of teams when played on Away Ground\n**Conclusion:**\n1) Best teams in away ground: Flamengo, Atletico PR, S\u00e3o Paulo, Palmeiras\n2) Worst teams in away ground: Paran\u00e1, Joinville, America MG, Nautico\n3) Most draws made by Cuiaba on away ground","d9b999b3":"### What is Win% in Home and Away Ground?","454b69ae":"### Local path and importing packages","bb9b56f4":"### Is there any correlation between Number of matches won verses goal scored?\n**Conclusion:**\n1) There are strong positive correlation between Goals scored and Matches won.","a76fbe6b":"### List of teams and match count","f86199ec":"### Goal made by team in Home Ground and Away Ground\n","7db4ee9c":"### Is there any correlation between Number of matches won verses goal scored?\n","437d5edf":"\n# Exploratory Data Analysis of Brazilian National League\n\n![brasileirao.jpg](attachment:7517d712-a12d-4fc3-908c-5a7f7db1ff75.jpg)\n\n### Data:\n\nThe dataset contains soccer league data of Brazil from 2012-21.\n\n### Variables:\n| Sl No | Field Name | Description |\n|-|-|-|\n|1|HomeTeam\t|Name of team playing in home ground|\n|2\t|AwayTeam\t|Name of team playing in away ground|\n|3\t|HG\t|Home team goals at the end of match|\n|4\t|AG\t|Away team goals at the end of match|\n|5\t|Res\t|Match results (h:home team win, a:away team win, d:draw)|\n\n\n### Exploration ideas:\nSummary Stat: Matches, Team, %Home Win, Away Win\n\nBest\/Worst Performing teams\n\n\n","00142aa3":"### Which team score how many goals against which team on both Home and Away Ground ","5ba47aee":"### Dropping single row with NULL value","f9fac3da":"### Goal made by team in Home Ground and Away Ground\n\n**Conclusion:**\n\n1) Atletico MG, Santos, Flamengo, Gremio, Palmeiras in Home Ground respectively\n\n2) Flamengo, Atletico MG, S\u00e3o Paulo, Fluminense, Gremio at Away Ground respectively","4265b75c":"### Load Data","497e65ad":"### Match Count of each Team played on Home ground"}}