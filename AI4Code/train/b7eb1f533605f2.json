{"cell_type":{"619f8a29":"code","88b3e9ac":"code","c2a77c8c":"code","97a5b557":"code","569e29b8":"code","64621105":"code","34bac35f":"code","47c9e787":"code","08427705":"code","93d6d1a3":"code","2e65a8aa":"code","a6cf3cf0":"code","63dbdd0d":"markdown","78dcb97d":"markdown","e8b83ffe":"markdown","8e6de15b":"markdown","14ff96e2":"markdown","4de41fd3":"markdown","0d6d05b9":"markdown","dec26c9c":"markdown","d844822a":"markdown"},"source":{"619f8a29":"import numpy as np\nimport pandas as pd\nimport matplotlib.pyplot as plt\nimport seaborn as sns\nimport math\nsns.set()\n\nfrom sklearn.linear_model import LogisticRegression\nfrom sklearn.preprocessing import StandardScaler","88b3e9ac":"raw_data = pd.read_csv('..\/input\/titanic-preprocessed-data\/train.csv')\ntest_data = pd.read_csv('..\/input\/titanic-preprocessed-data\/test.csv')\nraw_data.head()","c2a77c8c":"raw_data.describe(include='all')","97a5b557":"test_data.describe(include='all')","569e29b8":"lInterval = math.floor(29.7 - 1.96 * (14.5\/26.7))\nhInterval = math.ceil(29.7 + 1.96 * (14.5\/26.7))\nprint('---Train data---')\nprint('low','high')\nprint(lInterval,hInterval)\n\n# For test data\nlInterval = math.floor(30.3 - 1.96 * (14.2\/18.2))\nhInterval = math.ceil(30.3 + 1.96 * (14.2\/18.2))\nprint('---Test data---')\nprint('low','high')\nprint(lInterval,hInterval)","64621105":"preProcessed_data = raw_data.drop(['PassengerId','Name','Ticket','Cabin','Fare'],axis=1)\npreProcessed_data['Sex'] = preProcessed_data['Sex'].map({'male':0,'female':1})\npreProcessed_data['Embarked'] = preProcessed_data['Embarked'].map({'C':0,'Q':1,'S':2})\npreProcessed_data['Embarked'].fillna(1,inplace = True)\n\n\n# For test data \ntest_data = test_data.drop(['Name','Ticket','Cabin','Fare'],axis=1)\ntest_data['Sex'] = test_data['Sex'].map({'male':0,'female':1})\ntest_data['Embarked'] = test_data['Embarked'].map({'C':0,'Q':1,'S':2})\n\npreProcessed_data.describe(include='all')","34bac35f":"reg = LogisticRegression()\nscaler = StandardScaler()\n\nfeatures = preProcessed_data[['Pclass','Sex','Age','SibSp','Parch','Embarked']]\nsurvived = preProcessed_data['Survived']\n\nscaler.fit(features)\nscaled_features = scaler.transform(features)\n\nreg.fit(scaled_features,survived)","47c9e787":"test_features = test_data[['Pclass','Sex','Age','SibSp','Parch','Embarked']]\ntest_features_scaled = scaler.transform(test_features)\ntest_features_scaled","08427705":"# test_data = pd.DataFrame(data=[[1,1,35,0,0,0],[1,0,19,3,2,2]],columns=['Pclass','Sex','Age','SibSp','Parch','Embarked'])\n# test_data_transformed = scaler.transform(test_data)\n# survived_prediction = reg.predict(test_data_transformed)","93d6d1a3":"survived_prediction = reg.predict(test_features_scaled)\nfor i in range(survived_prediction.size):\n    if(survived_prediction[i] >= 0.6):\n        survived_prediction[i] = 1\n    else:\n        survived_prediction[i] = 0\ntest_data['Survived'] = survived_prediction\ntest_data","2e65a8aa":"final_result = test_data.drop(['Pclass','Sex','Age','SibSp','Parch','Embarked'],axis=1)\nfinal_result","a6cf3cf0":"final_result.to_csv('.\/predictions.csv')\n# Prediction accuracy : 76%","63dbdd0d":"## Cleaning data\n1. Cabin feature has too less observations and thus can be removed.\n2. PassengerId, Name, Ticket have unique values and so they won't be contributing substantially to the regression.\n3. Fare can be excluded too as we will be considering Pclass. This will avoid multicolinearity and the PClass is better feature than fare to determine survival of any individual.\n\n# Idea behind choosing features\n1. Sex : It might be possible that males\/females were given preference to board the lifeboats. \n2. Pclass : Depending upon the class of seat preference to board lifeboat could be determined. ( PS. As seen in the movie as well )\n3. Age : Generally, children and elder are given preference in disaster situation and thus makes sense to include the variable.\n4. SibSp \/ Parch : Having dependents to look after will certainly impact the survival of one.\n5. Embarked : The port of boarding might as well play a role in survival, as people who have spent more time on the boat are more accustomed to the exit routes and overall architecture of the boat.","78dcb97d":"## Prediction !\n\nAs from the test data we can infer that approximately 40% of the people survived. Thus, I have set the condition as, if the predicted value is above 0.6 only then the passenger is considered as survived. ","e8b83ffe":"## For single data frame testing","8e6de15b":"## Excel Pre-Processing\nI have used the z-score distribution to find the confidence interval of Age. As there are 177 records with missing age values, the missing values have been populated using random number generated between the below interval.\n\nWe cannot exclude 177 records as they are almost 20% of the current data samples. Hard-coded values are used in the below formula as the values are the ones before performing excel pre-processing.","14ff96e2":"## Summary of training data","4de41fd3":"## Load the training and testing data","0d6d05b9":"## Time to test !\n\nWe are done with the regression part, lets process and transform the test data to make some predictions.","dec26c9c":"## Summary of testing data","d844822a":"## Dropping the excess columns and making the final output"}}