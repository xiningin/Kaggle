{"cell_type":{"8dc56189":"code","1f5af00f":"code","99009e9f":"code","aff2e49e":"code","f0b0907c":"code","95ee6e84":"code","677bef74":"code","e758f2ce":"code","833cb9d7":"code","90e099f7":"code","a7241625":"code","8dcc7451":"code","65fcbb1c":"code","650cea22":"code","f672b151":"code","0d385baf":"code","8ab0e74d":"code","1914667f":"code","d2b2afa5":"code","c2168f03":"code","82287b1c":"code","88c61a09":"code","d232cbb9":"code","ab8b8d3f":"code","ca2de033":"code","6c42a628":"code","3453da00":"code","de237915":"code","3f7b7ebf":"code","6edb9608":"code","76c9ae97":"code","94f12796":"code","b6d4b726":"code","320ddfd8":"code","3f395f99":"code","1b7ddde6":"code","e56d176d":"code","cff503b0":"code","d464582a":"code","2703b3f5":"code","627862bf":"code","9572262c":"code","3c12494c":"code","233c79b2":"code","8ab70d41":"code","8de3cac1":"code","137edea9":"code","fd121feb":"code","ef72f9b0":"code","24080756":"code","7eed00db":"code","e41523e2":"code","91125c55":"code","40f6ed21":"code","160e87f0":"code","af393c4e":"code","63c8dc02":"code","7e2efd98":"code","b0aeabb5":"code","0fdf378a":"code","5ca4fb53":"code","4e53b85b":"code","00daa65f":"code","ff4280af":"code","671a4ad4":"code","413e4a43":"code","448faeaf":"code","44397414":"code","3b09c22a":"code","d45011c1":"code","f792ed5a":"code","c64af553":"code","7a9e7b1e":"code","7593e8e6":"code","12b5380a":"code","0983aa10":"code","af8b9400":"code","128bc6d3":"code","53cdd708":"code","4553ca4b":"code","2d7a9305":"code","74997a87":"code","ce0a6b19":"code","ff07b561":"code","30b4f642":"code","bda634ed":"code","9a1401d9":"code","54b0e1db":"code","6b445eaa":"code","98508e7a":"code","b398807f":"code","42cc24a6":"code","06bec30c":"code","a04f100c":"code","4be8b01a":"code","c7713b85":"code","7f6523dc":"code","4f8319ae":"code","ac2f0c7a":"code","733d4fb8":"code","6849cbbd":"code","5e958f32":"code","a7cbeafb":"code","d4de172c":"code","5ac3ca66":"code","9ca7a866":"code","54b4513a":"code","f36154c4":"code","92e47b2d":"code","d8e583fb":"code","d2920312":"code","3c89d38c":"code","f5f28df9":"code","54b69bda":"code","34f1479a":"code","f4c132ee":"code","db4387d2":"code","0ba830ae":"code","badf610a":"code","1f34876a":"code","cac6ecd5":"code","6539fcf4":"code","0da7dfba":"code","1b3c0b0c":"markdown","391b1868":"markdown","f6874e59":"markdown","c859c3ae":"markdown","1c726cc2":"markdown","c15192df":"markdown","de4f2f91":"markdown","d6ad8822":"markdown","29688195":"markdown","a4e7cda3":"markdown","62c3399f":"markdown","c487e43e":"markdown","60121f07":"markdown","42c5fc71":"markdown","f9be00d2":"markdown","0bde9622":"markdown","c4cdc2dd":"markdown","1ace3c36":"markdown","b5d5eae4":"markdown","06871270":"markdown","3ddf215c":"markdown","6dfdb265":"markdown","b7451b1c":"markdown","01bd64f8":"markdown","42f05b7d":"markdown","13433ca2":"markdown","5b0521ae":"markdown","6a2ee3b9":"markdown","be945f53":"markdown","e773fa39":"markdown","b5308b76":"markdown","3de73e0f":"markdown","b3aa4195":"markdown","5f744de4":"markdown","0dceb0b4":"markdown","004cdd66":"markdown","965bd7e2":"markdown","2e23e281":"markdown","22928c4b":"markdown","5c5badb5":"markdown","1e9afa3f":"markdown","4820fa5b":"markdown","dbae423d":"markdown","5371201f":"markdown","b8056bb8":"markdown","bb8ac4be":"markdown","4b92d01b":"markdown","3a102e6f":"markdown","ee6f8573":"markdown","6dddf41e":"markdown","6e803b9b":"markdown","468b0b6f":"markdown","dc644bfa":"markdown","955270f4":"markdown","2155b4d8":"markdown","1fa3b01b":"markdown","14732ac1":"markdown","0e2de6ff":"markdown","9a250338":"markdown","c177b637":"markdown","ba3399dc":"markdown","50ba3c15":"markdown","5485b03f":"markdown","534f29e9":"markdown","b84f38f0":"markdown","54e5dfe6":"markdown","86154078":"markdown","76426db1":"markdown","d65a408c":"markdown","6c380dc7":"markdown","8f0c56c7":"markdown","120e19eb":"markdown","d6394cbc":"markdown","99816437":"markdown","1f0fbfe6":"markdown","f601eafe":"markdown","6cb8b254":"markdown","0aadcff2":"markdown","a7118a7c":"markdown","f57134a0":"markdown"},"source":{"8dc56189":"import numpy as np\nimport pandas as pd\nimport matplotlib.pyplot as plt\nimport seaborn as sns","1f5af00f":"App_Data=pd.read_csv('..\/input\/credit-eda-case-study\/application_data.csv')\n","99009e9f":"Pre_Data=pd.read_csv('..\/input\/credit-eda-case-study\/previous_application-1.csv\/previous_application-1.csv')\n","aff2e49e":"pd.set_option('display.max_rows',500)\npd.set_option('display.max_columns',500)\npd.set_option('display.width',1000)","f0b0907c":"App_Data.head()","95ee6e84":"App_Data.shape","677bef74":"App_Data.info(verbose = True)","e758f2ce":"# Checking for float type\nApp_Data.select_dtypes('float').columns","833cb9d7":"# Numbers of days and numbers of Enquires can not be float.\n\nApp_Data['DAYS_REGISTRATION']=App_Data['DAYS_REGISTRATION'].astype(int,errors='ignore')\nApp_Data['CNT_FAM_MEMBERS']=App_Data['CNT_FAM_MEMBERS'].astype(int,errors='ignore')\nApp_Data['OBS_30_CNT_SOCIAL_CIRCLE']=App_Data['OBS_30_CNT_SOCIAL_CIRCLE'].astype(int,errors='ignore')\nApp_Data['DEF_30_CNT_SOCIAL_CIRCLE']=App_Data['DEF_30_CNT_SOCIAL_CIRCLE'].astype(int,errors='ignore')\nApp_Data['DAYS_LAST_PHONE_CHANGE']=App_Data['DAYS_LAST_PHONE_CHANGE'].astype(int,errors='ignore')\nApp_Data['AMT_REQ_CREDIT_BUREAU_HOUR']=App_Data['AMT_REQ_CREDIT_BUREAU_HOUR'].astype(int,errors='ignore')","90e099f7":"# Changing the dtypes for object type\nfor col in ['TARGET','CODE_GENDER', 'FLAG_OWN_CAR', 'FLAG_OWN_REALTY', 'NAME_TYPE_SUITE','NAME_INCOME_TYPE','NAME_EDUCATION_TYPE','NAME_FAMILY_STATUS','NAME_HOUSING_TYPE','OCCUPATION_TYPE','ORGANIZATION_TYPE','WALLSMATERIAL_MODE','EMERGENCYSTATE_MODE']:\n    App_Data[col] = App_Data[col].astype('category')","a7241625":"#Checking the dtypes again\nApp_Data.dtypes","8dcc7451":"App_Data.describe()","65fcbb1c":"Pre_Data.head()","650cea22":"Pre_Data.shape","f672b151":"Pre_Data.info()","0d385baf":"# Changing the dtypes\nfor col in ['NAME_CONTRACT_TYPE', 'FLAG_LAST_APPL_PER_CONTRACT', 'NAME_CONTRACT_STATUS', 'NAME_PAYMENT_TYPE','NAME_TYPE_SUITE','NAME_CLIENT_TYPE','NAME_PRODUCT_TYPE','CHANNEL_TYPE','NAME_SELLER_INDUSTRY','NAME_YIELD_GROUP','PRODUCT_COMBINATION']:\n    Pre_Data[col] = Pre_Data[col].astype('category')","8ab0e74d":"#Checking dtypes once again\nPre_Data.dtypes","1914667f":"Pre_Data.describe()","d2b2afa5":"#Calculating the percentage of missing values\npercent_App = App_Data.isnull().sum()*100\/len(App_Data)\npercent_App","c2168f03":"App_Data=App_Data.loc[:,App_Data.isnull().mean()<=.50]","82287b1c":"#Checking App_Data again\n\npercent_App = (App_Data.isnull().sum()*100\/len(App_Data)).round(2)\npercent_App","88c61a09":"#Calculating the percentage of missing values in Previous data\npercent_Pre = Pre_Data.isnull().sum()*100\/len(Pre_Data)\npercent_Pre\n\n","d232cbb9":"Pre_Data=Pre_Data.loc[:,Pre_Data.isnull().mean()<=.50]","ab8b8d3f":"# Checking the Previous Data Again\n\n(100*Pre_Data.isnull().sum()\/len(Pre_Data)).round(2)","ca2de033":"#Checking the columns having missing values less than 13%\npercent_App_13 = percent_App[percent_App <= 13]\npercent_App_13","6c42a628":"#checking the data again\nApp_Data.head()","3453da00":"Pre_Data.head()","de237915":"App_Data.head()","3f7b7ebf":"App_Data.describe()","6edb9608":"# For AMT_INCOME_TOTAL\nplt.figure(figsize=(8,2))\nsns.boxplot(App_Data.AMT_INCOME_TOTAL)\nplt.show()","76c9ae97":"App_Data.AMT_INCOME_TOTAL.median()","94f12796":"App_Data.AMT_INCOME_TOTAL.max()","b6d4b726":"# For DAYS_EMPLOYED\nplt.figure(figsize=(10,2))\nsns.boxplot(App_Data.DAYS_EMPLOYED)\nplt.show()","320ddfd8":"App_Data.DAYS_EMPLOYED.median()","3f395f99":"App_Data.DAYS_EMPLOYED.max()","1b7ddde6":"# For AMT_CREDIT\nplt.figure(figsize=(10,2))\nsns.boxplot(App_Data.AMT_CREDIT)\nplt.show()","e56d176d":"App_Data.AMT_CREDIT.median()","cff503b0":"App_Data.AMT_CREDIT.max()","d464582a":"# For AMT_ANNUITY\nplt.figure(figsize=(10,2))\nsns.boxplot(App_Data.AMT_ANNUITY)\nplt.show()","2703b3f5":"App_Data.AMT_ANNUITY.median()","627862bf":"App_Data.AMT_ANNUITY.max()","9572262c":"# For OBS_30_CNT_SOCIAL_CIRCLE\nplt.figure(figsize=(10,2))\nsns.boxplot(App_Data.OBS_30_CNT_SOCIAL_CIRCLE)\nplt.show()","3c12494c":"App_Data.OBS_30_CNT_SOCIAL_CIRCLE.median()","233c79b2":"App_Data.OBS_30_CNT_SOCIAL_CIRCLE.max()","8ab70d41":"App_Data['AMT_INCOME_TOTAL'].describe()","8de3cac1":"# Creating  first binned variable\n\nApp_Data.loc[:,'Range_Income']=pd.qcut(App_Data.loc[:,'AMT_INCOME_TOTAL'],q=[0,0.20,0.50,0.90,1],labels=['Low','Medium','High','Very_High'])","137edea9":"# Checking the binned variable\n\nApp_Data['Range_Income'].value_counts()","fd121feb":"# Creating second binned variable 'EXT_SOURCE_2' which contained Normalized score it could be used  for Rating \n\n\nApp_Data['EXT_SOURCE_2'].describe()\n\n","ef72f9b0":"App_Data.loc[:,'Rating']=pd.qcut(App_Data.loc[:,'EXT_SOURCE_2'],q=[0,0.20,0.50,0.90,1],labels=['Low','Medium','High','Very_High'])","24080756":"#checking second binned variable \n\nApp_Data['Rating'].value_counts()","7eed00db":"App_Data['DAYS_BIRTH'].describe()","e41523e2":"# Age in years can be converted by dividing by 365.25\n#  Also have negative values which needs to be fixed\n\nApp_Data['Age']=App_Data['DAYS_BIRTH']\/\/-365.25\nApp_Data.drop(['DAYS_BIRTH'],axis=1,inplace=True)","91125c55":"App_Data.Age.describe()","40f6ed21":"# now we can creat a binned varibale for 'Age' column\n\nApp_Data.head()","160e87f0":"App_Data['Age_Group']=pd.cut(App_Data.Age,bins=np.linspace(20,70,num=11))","af393c4e":"# checking  binned variable \n\nApp_Data.Age_Group.value_counts()","63c8dc02":"# checking imbalance for target variable as per columns description file 'TARGET 'has two values 0 and 1 \n\n# 1 comes under defaulters not able to make payments on time and rest comes under 0 means non defaulters\n\ncount1=0\ncount0=0\nfor i in App_Data['TARGET'].values:\n    if i ==1:\n        count1+=1\n    else:\n        count0+=1\ncount1=(count1\/len(App_Data['TARGET']))*100\ncount0=(count0\/len(App_Data['TARGET']))*100\n\nx=['Defaulter(TARGET=1)','Non-Defaulter(TARGET=0)']\ny=[count1,count0]\n\nfig1,ax1=plt.subplots()\nax1.pie(y,labels=x,shadow=True,autopct='%1.1f%%')\nplt.title('Data imbalance',fontsize=30)\nplt.show()","7e2efd98":"App_Data.head()","b0aeabb5":"App_Data_t0 = App_Data[App_Data.TARGET==0]\nApp_Data_t1 = App_Data[App_Data.TARGET==1]","0fdf378a":"# creating a function for plotting categorical varibales \ndef plotfunc(var):\n    plt.figure(figsize=(15,5))\n    plt.subplot(1,2,1)\n    sns.countplot(var,data=App_Data_t0)\n    plt.title('Distribution of '+'%s'%var+' for Non-Defaulter',fontsize=14)\n    plt.xlabel(var)\n    plt.xticks(rotation=90)\n    plt.ylabel('No of case for  Non-Defaulter')\n    plt.subplot(1,2,2)\n    sns.countplot(var,data=App_Data_t1)\n    plt.title('Distribution of '+'%s'%var+' for Defaulter',fontsize=14)\n    plt.xlabel(var)\n    plt.xticks(rotation=90)\n    plt.ylabel('No of case for  Defaulter')\n    plt.show()\n    \n    ","5ca4fb53":"plotfunc('NAME_TYPE_SUITE')","4e53b85b":"plotfunc('NAME_CONTRACT_TYPE')","00daa65f":"plotfunc('NAME_INCOME_TYPE')","ff4280af":"plotfunc('NAME_HOUSING_TYPE')","671a4ad4":"plotfunc('NAME_FAMILY_STATUS')","413e4a43":"plotfunc('NAME_EDUCATION_TYPE')","448faeaf":"plotfunc('CNT_FAM_MEMBERS')","44397414":"plotfunc('Range_Income')","3b09c22a":"# we can simply check the actual figure of non-defaulter with respest to defaulter population\n\nDefault=App_Data_t1.Range_Income.value_counts(normalize=True)\nNonDefault=App_Data_t0.Range_Income.value_counts(normalize=True)\nprint(Default,NonDefault)","d45011c1":"plotfunc('Rating')","f792ed5a":"plotfunc('Age_Group')","c64af553":"# we can simply check the actual figure of non-defaulter with respest to defaulter population\n\nDefault=App_Data_t1.Age_Group.value_counts(normalize=True)\nNonDefault=App_Data_t0.Age_Group.value_counts(normalize=True)\nprint(Default,NonDefault)","7a9e7b1e":"App_Data.head()","7593e8e6":"# Selecting float and int for correlation\ncol_int=list(App_Data_t0.select_dtypes('int64').columns)\ncol_float=list(App_Data_t0.select_dtypes('float').columns)\ncol=col_int+col_float\nNonDef_num=App_Data_t0[col]\nNonDef_corr=NonDef_num.corr()\nround(NonDef_corr,3)","12b5380a":"l1=NonDef_corr.unstack()\n\nl1.sort_values(ascending=False).drop_duplicates().head(11)","0983aa10":"# Selecting float and int for correlation\ncol_int=list(App_Data_t1.select_dtypes('int64').columns)\ncol_float=list(App_Data_t1.select_dtypes('float').columns)\ncol=col_int+col_float\nNonDef_num=App_Data_t1[col]\nNonDef_corr=NonDef_num.corr()\nround(NonDef_corr,3)","af8b9400":"l1=NonDef_corr.unstack()\n\nl1.sort_values(ascending=False).drop_duplicates()","128bc6d3":"# defining function for plotting contnous variables\ndef plotcont(var):\n    plt.figure(figsize=(15,5))\n    plt.subplot(1, 2, 1)\n    App_Data_t0[var].plot.hist()\n    plt.title('Distribution for Non-Defaulters', fontsize=12)\n    plt.xlabel(var)\n    plt.subplot(1, 2, 2)\n    App_Data_t1[var].plot.hist()\n    plt.title('Distribution for Defaulters', fontsize=12)\n    plt.xlabel(var)\n    plt.show()","53cdd708":"plotcont('REGION_POPULATION_RELATIVE')","4553ca4b":"App_Data.AMT_GOODS_PRICE.mean()","2d7a9305":"plotcont('AMT_GOODS_PRICE')","74997a87":"plt.figure(figsize=(20,6))\nplt.subplot(121)\nsns.countplot(data= App_Data_t0 ,x='TARGET',hue='CODE_GENDER')\nplt.legend()\nplt.subplot(122)\nsns.countplot(data= App_Data_t1 ,x='TARGET',hue='CODE_GENDER')\nplt.legend()\nplt.show()","ce0a6b19":"# code for non-defaulter Male and female with mean value \nAva_income_t_0_m=App_Data_t0[App_Data_t0.CODE_GENDER=='M']['AMT_INCOME_TOTAL'].median()\nAva_income_t_0_f=App_Data_t0[App_Data_t0.CODE_GENDER=='F']['AMT_INCOME_TOTAL'].median()\n\n# code for defaulter Male and female with mean value \n\nAva_income_t_1_m=App_Data_t1[App_Data_t1.CODE_GENDER=='M']['AMT_INCOME_TOTAL'].median()\nAva_income_t_1_f=App_Data_t1[App_Data_t1.CODE_GENDER=='F']['AMT_INCOME_TOTAL'].median()\n\nx_Male=['AMT_INCOME_mean_T_0_Male','AMT_INCOME_mean_T_1_Male']\n\ny_Male=[Ava_income_t_0_m,Ava_income_t_1_m]\n\nx_Female=['AMT_INCOME_mean_T_0_Female','AMT_INCOME_mean_T_1_Female']\n\ny_Female=[Ava_income_t_0_f,Ava_income_t_1_f]\n\nplt.figure(figsize=(14,6))\n\nplt.subplot(121)\nplt.bar(x_Male,y_Male)\nplt.subplot(122)\nplt.bar(x_Female,y_Female)\n\nplt.show()","ff07b561":"App_Data.head()","30b4f642":"Pre_Data.head()","bda634ed":"#continuos-continuos variables\ndef bivariate_contcont(var1, var2):\n    \n    plt.figure(figsize=(15,5))\n\n    plt.subplot(1,2,1)\n    plt.title('Non-Default')\n    sns.boxplot(x=var1,y=var2 ,data=App_Data_t0)\n    plt.xticks(fontsize = 15, rotation =90)\n\n    plt.subplot(1,2,2)\n    plt.title('Default')\n    sns.boxplot(x=var1,y=var2 ,data=App_Data_t1)\n    plt.xticks(fontsize = 15, rotation =90)\n    plt.show()","9a1401d9":"# continuos-continuos variables (barplot)\ndef bivariate_contcont_bar(var1, var2):\n    \n    plt.figure(figsize=(15,5))\n\n    plt.subplot(1,2,1)\n    plt.title('Non-Default')\n    sns.barplot(x=var1,y=var2 ,data=App_Data_t0)\n    plt.xticks(fontsize = 15, rotation =90)\n\n    plt.subplot(1,2,2)\n    plt.title('Default')\n    sns.barplot(x=var1,y=var2 ,data=App_Data_t1)\n    plt.xticks(fontsize = 15, rotation =90)\n    plt.show()","54b0e1db":"# continuos-continuos variables (scatterplot)\ndef bivariate_contcont_scatter(var1, var2):\n    \n    plt.figure(figsize=(15,5))\n\n    plt.subplot(1,2,1)\n    plt.title('Non-Default')\n    sns.scatterplot(x=var1,y=var2 ,data=App_Data_t0)\n    plt.xticks(fontsize = 15, rotation =90)\n\n    plt.subplot(1,2,2)\n    plt.title('Default')\n    sns.scatterplot(x=var1,y=var2 ,data=App_Data_t1)\n    plt.xticks(fontsize = 15, rotation =90)\n    plt.show()\n    \ndef plotbivarcontcont(var1,var2):\n    plt.figure(figsize=(15,5))\n    plt.subplot(1, 2, 1)\n    sns.scatterplot(x=var1,y=var2,data=App_Data_t0)\n    plt.title('TARGET=0')\n    plt.xlabel(var1)\n    plt.xticks(rotation=90)\n    plt.subplot(1, 2, 2)\n    sns.scatterplot(x=var1,y=var2,data=App_Data_t1)\n    plt.title('TARGET=1')\n    plt.xlabel(var1)\n    plt.xticks(rotation=90)\n    plt.show()","6b445eaa":"#category-category variable\ndef bivariate_catcat(var1, var2):\n    #Table for Non Default\n    crosstab_0 = pd.crosstab(index=App_Data_t0.var1,columns=App_Data_t0.var2)\n    # Table for Default\n    crosstab_1 = pd.crosstab(index=App_Data_t1.var1, \n                          columns=App_Data_t1.var2)\n    #plot\n    fig, axes = plt.subplots (nrows = 1, ncols = 2, figsize=(15,5))\n\n    crosstab_0.plot(ax = axes[0], kind=\"bar\", stacked=True)\n    crosstab_1.plot(ax = axes[1], kind=\"bar\", stacked=True)\n\n    axes[0].legend(prop={'size': 10}, loc='upper left')\n    axes[1].legend(prop={'size': 10}, loc='upper left')\n\n    axes[0].title.set_text('Non - Defaulters')\n    axes[1].title.set_text('Defaulters')","98508e7a":"bivariate_contcont_bar('NAME_EDUCATION_TYPE','AMT_CREDIT')","b398807f":"# Creating two way tables(Count) for Category-Category bivariate analysis - For Non-Default\neducation_RangeIncome_0 = pd.crosstab(index=App_Data_t0[\"Range_Income\"], \n                          columns=App_Data_t0[\"NAME_EDUCATION_TYPE\"])\n\neducation_RangeIncome_0","42cc24a6":"# Table for Default\neducation_RangeIncome_1 = pd.crosstab(index=App_Data_t1[\"Range_Income\"], \n                          columns=App_Data_t1[\"NAME_EDUCATION_TYPE\"])\n\neducation_RangeIncome_1","06bec30c":"fig, axes = plt.subplots (nrows = 1, ncols = 2, figsize=(15,5))\n\neducation_RangeIncome_0.plot(ax = axes[0], kind=\"bar\", stacked=True)\neducation_RangeIncome_1.plot(ax = axes[1], kind=\"bar\", stacked=True)\n\naxes[0].legend(prop={'size': 10}, loc='upper left')\naxes[1].legend(prop={'size': 10}, loc='upper left')\n\naxes[0].title.set_text('Non - Defaulters')\naxes[1].title.set_text('Defaulters')\n\n","a04f100c":"# Creating two way tables(Count) for Category-Category bivariate analysis - For Non-Default\ngender_edu_0 = pd.crosstab(index=App_Data_t0[\"CODE_GENDER\"], \n                          columns=App_Data_t0[\"NAME_EDUCATION_TYPE\"])\n\ngender_edu_0","4be8b01a":"# Table for Default\ngender_edu_1 = pd.crosstab(index=App_Data_t1[\"CODE_GENDER\"], \n                          columns=App_Data_t1[\"NAME_EDUCATION_TYPE\"])\n\ngender_edu_1","c7713b85":"fig, axes = plt.subplots (nrows = 1, ncols = 2, figsize=(15,5))\n\ngender_edu_0.plot(ax = axes[0], kind=\"bar\", stacked=True)\ngender_edu_1.plot(ax = axes[1], kind=\"bar\", stacked=True)\n\naxes[0].legend(prop={'size': 10}, loc='upper left')\naxes[1].legend(prop={'size': 10}, loc='upper left')\n\naxes[0].title.set_text('Non - Defaulters')\naxes[1].title.set_text('Defaulters')","7f6523dc":"bivariate_contcont('CODE_GENDER','AMT_CREDIT')","4f8319ae":"bivariate_contcont('NAME_EDUCATION_TYPE','AMT_ANNUITY')","ac2f0c7a":"bivariate_contcont('Range_Income','REGION_POPULATION_RELATIVE')","733d4fb8":"bivariate_contcont('OCCUPATION_TYPE','AMT_GOODS_PRICE')","6849cbbd":"bivariate_contcont('NAME_FAMILY_STATUS','AMT_ANNUITY')","5e958f32":"bivariate_contcont('NAME_HOUSING_TYPE','REGION_POPULATION_RELATIVE')","a7cbeafb":"bivariate_contcont('FLAG_OWN_REALTY','AMT_CREDIT')","d4de172c":"bivariate_contcont('NAME_FAMILY_STATUS', 'AMT_CREDIT')","5ac3ca66":"plotbivarcontcont('AMT_CREDIT','AMT_INCOME_TOTAL')","9ca7a866":"plotbivarcontcont('AMT_CREDIT','AMT_GOODS_PRICE')","54b4513a":"Pre_Data.shape","f36154c4":"Pre_Data.info()","92e47b2d":"Pre_Data.dtypes.value_counts()","d8e583fb":"#Checking missng values\n((Pre_Data.isnull().sum()*100)\/len(Pre_Data)).round(2)","d2920312":"Pre_Data = Pre_Data.loc[:, Pre_Data.isnull().mean() <= .5]\nPre_Data.info()","3c89d38c":"# Since the Previous application data is very large, we are deleting some rows so that it could be easily merged\n# Number can be changed as per analysis\nPre_Data=Pre_Data.loc[0:70000]","f5f28df9":"Pre_Data.shape","54b69bda":"Combined = pd.merge(App_Data, Pre_Data, how='left', on=['SK_ID_CURR'])\nCombined.shape","34f1479a":"Combined.columns","f4c132ee":"# Checking at the distribution of Contract status column visially\nsns.countplot(Combined.NAME_CONTRACT_STATUS)\nplt.xlabel(\"Contract Status\")\nplt.ylabel(\"Count of Contract Status\")\nplt.title(\"Distribution of Contract Status\")\nplt.show()\n\n","db4387d2":"#Making seperate dataframes for these four catgories\napproved=Combined[Combined.NAME_CONTRACT_STATUS=='Approved']\nrefused=Combined[Combined.NAME_CONTRACT_STATUS=='Refused']\ncanceled=Combined[Combined.NAME_CONTRACT_STATUS=='Canceled']\nunused=Combined[Combined.NAME_CONTRACT_STATUS=='Unused Offer']","0ba830ae":"# DEfining a function for plotting target variables with these categories\ndef plot_func(var):\n    fig, (ax1, ax2, ax3) = plt.subplots(ncols=3, figsize=(15,5))\n    \n    s1=sns.countplot(ax=ax1,x=refused[var], data=refused, order= refused[var].value_counts().index,)\n    ax1.set_title(\"Refused\", fontsize=10)\n    ax1.set_xlabel('%s' %var)\n    ax1.set_ylabel(\"Count of Loans\")\n    s1.set_xticklabels(s1.get_xticklabels())\n    \n    s2=sns.countplot(ax=ax2,x=approved[var], data=approved, order= approved[var].value_counts().index,)\n    s2.set_xticklabels(s2.get_xticklabels())\n    ax2.set_xlabel('%s' %var)\n    ax2.set_ylabel(\"Count of Loans\")\n    ax2.set_title(\"Approved\", fontsize=10)\n    \n    \n    s3=sns.countplot(ax=ax3,x=canceled[var], data=canceled, order= canceled[var].value_counts().index,)\n    ax3.set_title(\"Canceled\", fontsize=10)\n    ax3.set_xlabel('%s' %var)\n    ax3.set_ylabel(\"Count of Loans\")\n    s3.set_xticklabels(s3.get_xticklabels())\n    plt.show()","badf610a":"plot_func('TARGET')","1f34876a":"refused.TARGET.value_counts(normalize=True)","cac6ecd5":"approved.TARGET.value_counts(normalize=True)","6539fcf4":"canceled.TARGET.value_counts(normalize=True)","0da7dfba":"plt.figure(figsize=(18,6))\nplt.subplot(1,2,1)\nsns.scatterplot(x='AMT_APPLICATION',y='AMT_INCOME_TOTAL',data=refused)\nplt.title('Refused')\n\nplt.subplot(1,2,2)\nsns.scatterplot(x='AMT_APPLICATION',y='AMT_INCOME_TOTAL',data=approved)\nplt.title('Approved')\nplt.show()\n\n","1b3c0b0c":"#### Inferences:\n#### 1. Defaulters are less if price of goods is up and amount credit is also less.","391b1868":"#### Inference:\n#### 1. We can observe that people don't own realty have taken less credit. \n#### 2.This could mean they might be living on rent which would already be burdening them with add-on expenses, lower their risk appetite therefore might lead to not taking credit.","f6874e59":"#### 1) Singles are higher defaulter becasue Single\/not married is higher in defaulter population if you compare to Non-Defaulter population this could probably due to single earning capacity of the person.","c859c3ae":"#### Inference:\n#### 1. Although there isn't much difference on the basis of gender, we can still notice that men who dont default have taken credit even above 30 lac while those who tend to default dont take credit more than 30 lac","1c726cc2":"##### Defaulter rate is higher in between 0.0 to 0.5 Goods_Price","c15192df":"### Own realty vs credit","de4f2f91":"### Missing value check and Data Quality Check for Previous Data","d6ad8822":"#### Taking a look at the individual data types.\n###### So we have three Data Types with us i.e int64,object and float64\n###### A few Object types need to be converted to Category type which will help us reduce memory usage and therefore increasing efficiency","29688195":"### Unordered Categorical Variables","a4e7cda3":"### Univariate Analysis on continuous variables","62c3399f":"### Doing the above mentioned imputations will help us improve the usability of our analysis by taking a hollistic view into account.","c487e43e":"#### As we can see now that Application data has high imbalance(positive) with Defaulters being just 8.1% as compare to non-Defaulters i.e 91.9% \n### Percentage ratio of imbalance would be 91.9 : 8.1\n#### This is a good sign and means that the bank is able to recover most of their loan repayments.","60121f07":"#### Inference:\n#### 1. From the above plot we can observe that amoung the defaulters, higher numbers are of Academic degree holders.\n#### 2. One possible reason could be that these people might be taking educational loans.","42c5fc71":"##### The same logic could be used for previous application data as well and the columns can be dropped.","f9be00d2":"### Education type vs amount for credit taken [Default:Non-Default]","0bde9622":"#### Inference:\n#### Loans which were previously refused or cancelled have a higher default rate","c4cdc2dd":"#### Splitting Data with respect to TARGET =0 AND TARGET =1","1ace3c36":"### Merging the data","b5d5eae4":"#### Median among male and female defaulters do have less income compared to non-defaulters.","06871270":"# PREVIOUS APPLICATION DATA ANALYSIS","3ddf215c":"##### Here the outlier doesn't look that extreme. Also, there is a concentration of few values towards the extreme. Such amount of credit would have been taken by business men and entrepreneurs.","6dfdb265":"### Housing type vs region population","b7451b1c":"#### People with a  Low Rating are defaulting more which speaks for itself as the sole reason they have a low rating is because they are not able to pay their payments.","01bd64f8":"### Checking for imputation of values having less than 13% missing values","42f05b7d":"### Making functions for repetitive plots","13433ca2":"#### Inference:\n#### 1. From the plot we can make out that people from higher income categories are living in high populated regions (ex: Metro cities)\n#### 2. Out of the high income category who live in densely populated cities, there are greater number of non defaulters from ","5b0521ae":"### Gender vs Credit","6a2ee3b9":"### Population relative vs Income range","be945f53":"### Credit amount vs Goods price","e773fa39":"##### After checking columns_description file found few columns which can not be float so needs to be int\n##### DAYS_REGISTRATION, CNT_FAM_MEMBERS, OBS_30_CNT_SOCIAL_CIRCLE, DEF_30_CNT_SOCIAL_CIRCLE, DAYS_LAST_PHONE_CHANGE, AMT_REQ_CREDIT_BUREAU_HOUR","b5308b76":"#### 1) Highest numbers of defaulters comes from working class\n#### 2) Pensioners seem to default less due to the lower expenses associated with their routine","3de73e0f":"#### 1) When Unaccompanied client is applying for the loan does not have any impact on the default.\n#### 2)Both populations have same proportions","b3aa4195":"##### Here the value could be possibly due to human errors as such a deviation is quite unlikely.","5f744de4":"### Top 10 correlations for non default population\n#### We took out these value with the help of head and tail code\n\n\n###### OBS_60_CNT_SOCIAL_CIRCLE    -         OBS_30_CNT_SOCIAL_CIRCLE              0.998269\n###### FLOORSMAX_AVG             -                      FLOORSMAX_MEDI                                 0.997187\n###### YEARS_BEGINEXPLUATATION_MEDI-  YEARS_BEGINEXPLUATATION_AVG       0.996124\n###### FLOORSMAX_MODE               -               FLOORSMAX_MEDI                                 0.989195\n###### FLOORSMAX_AVG                 -                 FLOORSMAX_MODE                                0.986594\n###### AMT_CREDIT                   -                       AMT_GOODS_PRICE                               0.983103\n###### YEARS_BEGINEXPLUATATION_AVG   -YEARS_BEGINEXPLUATATION_MODE   0.980466\n###### YEARS_BEGINEXPLUATATION_MODE -YEARS_BEGINEXPLUATATION_MEDI    0.978073\n###### REGION_RATING_CLIENT_W_CITY   -   REGION_RATING_CLIENT                       0.956637\n###### CNT_CHILDREN                  -                    CNT_FAM_MEMBERS                              0.885484\n###### DEF_30_CNT_SOCIAL_CIRCLE      -        DEF_60_CNT_SOCIAL_CIRCLE              0.868994\n###### DAYS_EMPLOYED                -                   FLAG_EMP_PHONE                               -0.999702 it is a negative value","0dceb0b4":"###### Again here we can observe the max value isn't that far away from the median value which indicates there isn't any human error of sorts.","004cdd66":"### BiVariate Analysis","965bd7e2":"##### People living in higher density areas are less defaulter","2e23e281":"##### 365243 is a very big number and looks strange. Such a number is usualy used when data is not available. This value is as good as NA. Therefore we can change it to Null values for futher analysis.","22928c4b":"##### Inference:\n##### 1. From the above chart of non-defaulters we can observe that people having higher eduaction level have are able to repay their greater more than those who have lower education mainly because people with higher education tend to earn more.\n##### 2. People with lower education level are clearly not going to be the bank's target.","5c5badb5":"#### Inferrence:\n#### 1. Comparatively, married people are defaulting more than others which could be due to the additional expenses related to family which can hinder their cash flow.\n#### 2. People usually having an annuity more than 60,000 are defaulting more as compared to non-Defaulters","1e9afa3f":"### Annuity vs Family status","4820fa5b":"### Checking Outliers","dbae423d":"#### 1) Here we can see revolving loans as lesser in defaulter population.\n#### 2) Revolving loans are comparatively safer.","5371201f":"#### Inference:\n#### 1. From the above table we can look at the breakdown of number of non defaulters according to the Education type within each income range. \n#### 2. The numbers are high for Higher education and Secondary Education.\n#### 3. Furthermore most of the people are from the Income range of Medium-High stating the reason for their low level of default.","b8056bb8":"### Education Type vs Income Range","bb8ac4be":"### Combining","4b92d01b":"#### We cannot decide much on basis of gender as defaulters and non defaulters both follow same pattern\n#### So in this case we will  plot a graph for defaulter and non defaulter by taking a median value.","3a102e6f":"### Ordered Categorical Variables","ee6f8573":"## Analysis -\n\n##### -Univariate\n        - Categorical\n        - Continous\n        \n##### -Bivariate \n        - Categorical Categorical\n        - Categorical Continous\n        - Continous Continous Univariate ","6dddf41e":"### Imputation should be done for  columns where missing values are less than around 13%\n##### Our strategy is as followes:\n##### 1. Missing value in categorical variables Name_Type_Suites could be replaced with Mode value 'Unaccompained '\n###### 2. [AMT_REQ_CREDIT_BUREAU_HOUR,   AMT_REQ_CREDIT_BUREAU_DAY,    AMT_REQ_CREDIT_BUREAU_WEEK ] we can impute the missing values in these columns with  0 because they have more 0 values (Mode).\n##### 3. Missing values in 'AMT_GOODS_PRICE' can be imputed by mean\/Avarage  value becasue this columns has continous float variables.\n\n","6e803b9b":"### Finding correlation for numerical columns for both 0 and 1 case","468b0b6f":"###  Segmented Analysis of Male vs Female","dc644bfa":"#### 1) As higher count of children proportion is more in defaulter population as compare to Non-defaulter \n#### 2) Children count is impacted the Defaulter Rate as larger the family, greater will be the expenses.","955270f4":"#### Low Range has slightly higher defaulter population than the  Non-defaulter population it means Low Income has higher defaulters ","2155b4d8":"## First we will check The Structure of the Application Data","1fa3b01b":"#### Inference:\n#### 1. People residing in rented apartments are comparatively on the lower side of defaulting.\n#### 2. These are the same people who are residing in less populated areas.\n#### 3. Reason for this could be cheaper property rates on the outskirts of the main city.","14732ac1":"### Let us check the Percentage of each categories displayed above","0e2de6ff":"### Credit amount vs Income","9a250338":"###  Third binned variable could be 'DAYS_BIRTH' columns\n#### As we can see, only no of days has been given for the customers, here we can derive the age in years which could be binned in columns.","c177b637":"### Family status vs credit","ba3399dc":"### Top 10 correlations for  defaulter population\n#### We took out these value with the help of head and tail code\n\n###### OBS_60_CNT_SOCIAL_CIRCLE     -      OBS_30_CNT_SOCIAL_CIRCLE             0.998269\n##### FLOORSMAX_AVG                 -                  FLOORSMAX_MEDI                               0.997187\n##### YEARS_BEGINEXPLUATATION_MEDI  - YEARS_BEGINEXPLUATATION_AVG     0.996124\n##### FLOORSMAX_MODE               -                 FLOORSMAX_MEDI                               0.989195\n##### FLOORSMAX_AVG                -                   FLOORSMAX_MODE                                0.986594\n##### AMT_CREDIT                   -                       AMT_GOODS_PRICE                                   0.983103\n##### YEARS_BEGINEXPLUATATION_AVG -   YEARS_BEGINEXPLUATATION_MODE    0.980466\n##### YEARS_BEGINEXPLUATATION_MODE - YEARS_BEGINEXPLUATATION_MEDI    0.978073\n##### REGION_RATING_CLIENT_W_CITY  -    REGION_RATING_CLIENT                            0.956637\n##### DAYS_EMPLOYED               -                   FLAG_EMP_PHONE                                      -0.999702 it is a negative value\n\n","50ba3c15":"### Business Objectives\n> The loan providing companies find it hard to give loans to the people due to their insufficient or non-existent credit history. Because of that, some consumers use it as their advantage by becoming a defaulter. Suppose you work for a consumer finance company which specialises in lending various types of loans to urban customers. You have to use EDA to analyse the patterns present in the data. This will ensure that the applicants capable of repaying the loan are not rejected.\n\n> The company wants to understand the driving factors (or driver variables) behind loan default, i.e. the variables which are strong indicators of default. The company can utilise this knowledge for its portfolio and risk assessment.\n\n> The Data has been taken from three files viz. -\n\n> 1. 'application_data.csv' contains all the information of the client at the time of application. The data is about whether a client has payment difficulties.\n\n> 2. 'previous_application.csv' contains information about the client\u2019s previous loan data. It contains the data whether the previous application had been Approved, Cancelled, Refused or Unused offer.\n\n> 3. 'columns_description.csv' is a data dictionary which describes the meaning of the variables.","5485b03f":"### Occupation vs goods price","534f29e9":"### Education vs Annuity amount","b84f38f0":"#### Since there are many columns in our dataframe wherein the missing value percentage is more than 50%, such values should be straightaway dropped as it can reduce the efficiency of our analysis.","54e5dfe6":"### Gender vs education","86154078":"#### 1)  Those who are living in Rented appartment and living with parents have higher defaulter rate as compared to Non-Defaulter population\n#### 2) There is a Difficulty of paying loan becasue they might not have high salary package and living cost is high for those who are living with parents and  in rented appartment (flow of money is high)","76426db1":"#### Here we can see there is an extreme income value which could be of the Rich. This value should ideally be removed as it would distort our data and might give false results.","d65a408c":"### Binning in Continuous Variable","6c380dc7":"#### Inference:\n#### 1. It is clearly visible that males especially having secondary level  education are amoung the most defaulters.\n#### 2. While females tend to default lesser as comparaed to males.","8f0c56c7":"#### Based on the above observation, the merged data has been divided into the following categories:\n1) Approved\n2) Refused\n3) Canceled\n4) Unused Offer","120e19eb":"### Checking Imbalance","d6394cbc":"### Importing Libraries","99816437":"### Missing value check and Data Quality Check for Application Data","1f0fbfe6":"#### Lower the age group, higher is the default rate this is because young people are greater risk takers.","f601eafe":"### Application amount vs income","6cb8b254":"#### Note: Few functions might look repeatative this is because each team member has done different sets of analysis which was combined late.","0aadcff2":"### Univariate Analysis with respect to target=1 and target=0 for catergorical variables","a7118a7c":"#### 1) Higher Education count is less in Defaulter Population as compare to Non-Defaulter Population \n#### 2) Higher the education lower the Defaulter rate becasue they earn more and they can pay loan easily ","f57134a0":"### Now we will check The Structure of the Previous_Application Data"}}