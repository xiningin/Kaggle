{"cell_type":{"52a79a1a":"code","7928597e":"code","a74ffaf6":"code","a11dfebf":"code","88c211fc":"code","d4bbf8fb":"code","b85e782b":"code","995e0e3e":"code","b63ccf50":"code","287f966d":"code","044df865":"code","856c0b02":"code","cbb80dbb":"code","3b97421b":"code","988c1525":"code","1c5ca8c5":"code","f2c5c7bc":"code","b4042178":"code","f769f396":"markdown","8e80cdfb":"markdown","12145a5e":"markdown","f856ce4c":"markdown","b7855fcc":"markdown","22f4ba1a":"markdown","5b37b69e":"markdown","a1893475":"markdown","6277f760":"markdown","1b03cba9":"markdown","d145a4a5":"markdown","43ece248":"markdown","b5fc2d2c":"markdown","907aa317":"markdown","c52c01c1":"markdown","5a4ff562":"markdown","dc978809":"markdown","fbf295c1":"markdown","0ebaa108":"markdown"},"source":{"52a79a1a":"# This Python 3 environment comes with many helpful analytics libraries installed\n# It is defined by the kaggle\/python Docker image: https:\/\/github.com\/kaggle\/docker-python\n# For example, here's several helpful packages to load\n\nimport numpy as np # linear algebra\nimport pandas as pd # data processing, CSV file I\/O (e.g. pd.read_csv)\n\n# Input data files are available in the read-only \"..\/input\/\" directory\n# For example, running this (by clicking run or pressing Shift+Enter) will list all files under the input directory\n\nimport os\nfor dirname, _, filenames in os.walk('\/kaggle\/input'):\n    for filename in filenames:\n        print(os.path.join(dirname, filename))\n\n# You can write up to 20GB to the current directory (\/kaggle\/working\/) that gets preserved as output when you create a version using \"Save & Run All\" \n# You can also write temporary files to \/kaggle\/temp\/, but they won't be saved outside of the current session","7928597e":"import os\nimport pandas as pd\nimport numpy as np\nimport warnings\nimport re\nfrom textblob import TextBlob\nimport nltk\nnltk.download('all')\n\nwarnings.filterwarnings(\"ignore\")\n\ntweets = pd.read_csv(\"\/kaggle\/input\/pfizer-vaccine-tweets\/vaccination_tweets.csv\")","a74ffaf6":"tweets.head()","a11dfebf":"print(\"There are total {} tweets in our data\".format(tweets.shape[0]))","88c211fc":"print(\"Number of unique twitter ids is {}\".format(len(tweets[\"id\"].unique())))","d4bbf8fb":"print(\"There are total of {} unique locations from where these tweets have been made\".format(len(tweets[\"user_location\"].unique())))","b85e782b":"most_common_loc = list(tweets[\"user_location\"].value_counts()[0:10].keys())\nprint(\"The top 10 places from where most tweets have been made are :-\")\nprint([loc for loc in most_common_loc])","995e0e3e":"def text_preprocessing(text):\n    text = text.lower()\n    text = re.sub(r\"https:\/\/.*\",\"\",text)\n    text = re.sub(r\"\\n\",\"\",text)\n    text = re.sub(r\"#\",\"\",text)\n    text = re.sub(r\"@\\w+\",\"\",text)\n    text = re.sub(r'\\d+(.*?)[\\u263a-\\U0001f645]',\"\",text)\n    text = re.sub(r'\\d+','',text)\n    return text","b63ccf50":"verified_user_tweets = tweets.loc[(tweets[\"user_verified\"]==True),\"text\"].values","287f966d":"unverified_user_tweets = tweets.loc[(tweets[\"user_verified\"]==False),\"text\"].values","044df865":"def get_sentiment_for_tweets(tw):\n    total_polarity = 0\n    total_subjectivity = 0\n    avg_pol = 0\n    avg_sub = 0\n    for i in range(len(tw)):\n        blob = TextBlob(text_preprocessing(tw[i]))\n        total_polarity += blob.polarity\n        total_subjectivity += blob.subjectivity\n    avg_pol = total_polarity\/len(tw)\n    avg_sub = total_subjectivity\/len(tw)\n    print(\"Polarity : {} | Subjectivity : {}\".format(avg_pol,avg_sub))","856c0b02":"get_sentiment_for_tweets(verified_user_tweets)","cbb80dbb":"get_sentiment_for_tweets(unverified_user_tweets)","3b97421b":"def find_location_for_sentiment(dataset,sentiment,threshold):\n    try:\n        for location in dataset[\"user_location\"].unique():\n            total_polarity = 0\n            total_subjectivity = 0\n            avg_pol = 0\n            avg_sub = 0\n            tw = dataset.loc[(dataset[\"user_location\"]==location),\"text\"].values\n            if(len(tw)>0):\n                for i in range(len(tw)):\n                    blob = TextBlob(text_preprocessing(tw[i]))\n                    total_polarity += blob.polarity\n                    total_subjectivity += blob.subjectivity\n                avg_pol = total_polarity\/len(tw)\n                avg_sub = total_subjectivity\/len(tw)\n                if(sentiment.lower()==\"pos\"):\n                    if(avg_pol>threshold):\n                        print(\"Location : {} | Polarity : {} | Subjectivity : {}\".format(location,avg_pol,avg_sub))\n                elif(sentiment.lower()==\"neg\"):\n                    if(avg_pol<threshold):\n                        print(\"Location : {} | Polarity : {} | Subjectivity : {}\".format(location,avg_pol,avg_sub))\n    except Exception as e:\n        print(e)","988c1525":"find_location_for_sentiment(tweets,'pos',0.9)","1c5ca8c5":"find_location_for_sentiment(tweets,'neg',-0.5)","f2c5c7bc":"tweets.loc[tweets[\"user_location\"]==\"British Columbia\",\"text\"].values[0]","b4042178":"tweets.loc[tweets[\"user_location\"]==\"Hampshire\",\"text\"].values[0]","f769f396":"### Let us analyze the tweets of a verified account and find if they are positive in negetive in nature","8e80cdfb":"### Let us have a look at a negetive tweet","12145a5e":"### Has any user tweeted twice??","f856ce4c":"### Custom function for text preprocessing","b7855fcc":"### Indeed the tweet has the word happy with a happy smiley. No wonder it has got a positive sentiment","22f4ba1a":"### Custom function for getting the polarity and subjectivity","5b37b69e":"### Let us have a look at the data","a1893475":"### Let us have a look at a positive tweet","6277f760":"### The tweet contains word like \"I don't agree\" which justifies it being classified as negative sentiment.","1b03cba9":"# id","d145a4a5":"# user_location\t","43ece248":"### Thus we see that for both verified and unverified tweeter accounts the tweets are having a positive sentiment regarding Covid-19 vaccine and a low subjectivity shows that the tweets are based on facts and does not represent much personal opinion.","b5fc2d2c":"### Locations from where negative tweets regarding Covid19 vaccine has been tweeted\n\n### Negative tweets of polarity < -0.5 (negative tweets have polarity between 0 and -1)","907aa317":"### Polarity and Subjectivity of tweets of verified accounts","c52c01c1":"### Polarity and Subjectivity of tweets of unverified accounts","5a4ff562":"### Let us see the locations where we are having positive and negative tweets along with the factor of subjectivity of them","dc978809":"### Custom made function for fetching location based on sentiment","fbf295c1":"### Since the number of tweets is same as number of unique twitter ids we can be sure that no user has tweeted twice","0ebaa108":"### Locations from where highly positive tweets regarding Covid19 vaccine has been tweeted\n\n### Highly positive (polarity>0.9) a positive tweet would have polarity between 0 and 1. We are selecting the threshold as 0.9 to account for the most positive tweets"}}