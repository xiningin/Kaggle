{"cell_type":{"c0e87ebd":"code","204f993c":"code","ada4da8d":"code","24232362":"code","11ffba4a":"code","7f5c82d7":"code","78a763b7":"code","0c826557":"code","004d0a0b":"code","9b48244f":"code","f277499a":"code","78c51f1a":"code","7e2e2a4b":"code","c33f6fbb":"code","71639314":"code","84feb75f":"code","fb045616":"code","7e3a7c55":"code","30fccf9f":"code","e8b90828":"code","9a5c0504":"code","a33ccdec":"code","79d0d1de":"code","f9f9a255":"code","669a1dde":"code","09f6c41b":"code","08956c3d":"code","29c2d8c1":"code","5f815d76":"code","33399926":"code","e1d704c0":"code","eac8f36d":"code","81f503e8":"code","81578551":"code","357b9262":"code","f53c0acd":"code","4c72ca75":"code","7053c499":"code","b188d4ea":"code","30119ad0":"code","b51a70fe":"code","7b77c43a":"code","b1b9b6ee":"code","15248288":"code","b2f84c9a":"code","26beda0e":"code","0926cc10":"code","6f98c8e8":"code","13f0533e":"code","52ab848a":"code","19596946":"code","38c17503":"code","01f9baa0":"code","74d38eea":"markdown","b15744b4":"markdown","f62a1838":"markdown","9b376731":"markdown","89c5e83c":"markdown","1c7e7d10":"markdown","f3d51471":"markdown","c0f84af1":"markdown","040aa85b":"markdown","1747fc53":"markdown","1f37dc98":"markdown","2e4a21ae":"markdown","21bc4b75":"markdown","f78c3dec":"markdown","b1ddf9a0":"markdown","0be549dd":"markdown","3776f85e":"markdown","7b189b50":"markdown","3f72bad3":"markdown","d7d28f47":"markdown","c99b06bd":"markdown","d2ae73e1":"markdown","e8a4b4b2":"markdown","d8bcc42b":"markdown","ea4788de":"markdown","0ed495d1":"markdown","5c18ba8d":"markdown","ebadceaa":"markdown","b74ba5f7":"markdown","99986d44":"markdown","3b2ff123":"markdown","989223b4":"markdown","81ffb1f5":"markdown","51b26b6d":"markdown","207f36f9":"markdown","7f4092d8":"markdown","06228d19":"markdown","26bef357":"markdown","fc709687":"markdown","f187da26":"markdown","f9f8ca31":"markdown","4e325a32":"markdown","ed8c4c8c":"markdown","b919c1d9":"markdown","7f578133":"markdown","bbbbfafd":"markdown"},"source":{"c0e87ebd":"# This Python 3 environment comes with many helpful analytics libraries installed\n# It is defined by the kaggle\/python docker image: https:\/\/github.com\/kaggle\/docker-python\n# For example, here's several helpful packages to load in \n\nimport numpy as np # linear algebra\nimport pandas as pd # data processing, CSV file I\/O (e.g. pd.read_csv)\n\n# Input data files are available in the \"..\/input\/\" directory.\n# For example, running this (by clicking run or pressing Shift+Enter) will list all files under the input directory\n\nimport os\nfor dirname, _, filenames in os.walk('\/kaggle\/input'):\n    for filename in filenames:\n        print(os.path.join(dirname, filename))\n\n# Any results you write to the current directory are saved as output.","204f993c":"build_meta = pd.read_csv(\"..\/input\/ashrae-energy-prediction\/building_metadata.csv\")\ntest = pd.read_csv(\"..\/input\/ashrae-energy-prediction\/test.csv\")\ntrain_df = pd.read_csv(\"..\/input\/ashrae-energy-prediction\/train.csv\")\nweat_train = pd.read_csv(\"..\/input\/ashrae-energy-prediction\/weather_train.csv\")\nweat_test = pd.read_csv(\"..\/input\/ashrae-energy-prediction\/weather_test.csv\")","ada4da8d":"## Function to reduce the DF size\ndef reduce_mem_usage(df, verbose=True):\n    numerics = ['int16', 'int32', 'int64', 'float16', 'float32', 'float64']\n    start_mem = df.memory_usage().sum() \/ 1024**2    \n    for col in df.columns:\n        col_type = df[col].dtypes\n        if col_type in numerics:\n            c_min = df[col].min()\n            c_max = df[col].max()\n            if str(col_type)[:3] == 'int':\n                if c_min > np.iinfo(np.int8).min and c_max < np.iinfo(np.int8).max:\n                    df[col] = df[col].astype(np.int8)\n                elif c_min > np.iinfo(np.int16).min and c_max < np.iinfo(np.int16).max:\n                    df[col] = df[col].astype(np.int16)\n                elif c_min > np.iinfo(np.int32).min and c_max < np.iinfo(np.int32).max:\n                    df[col] = df[col].astype(np.int32)\n                elif c_min > np.iinfo(np.int64).min and c_max < np.iinfo(np.int64).max:\n                    df[col] = df[col].astype(np.int64)  \n            else:\n                if c_min > np.finfo(np.float16).min and c_max < np.finfo(np.float16).max:\n                    df[col] = df[col].astype(np.float16)\n                elif c_min > np.finfo(np.float32).min and c_max < np.finfo(np.float32).max:\n                    df[col] = df[col].astype(np.float32)\n                else:\n                    df[col] = df[col].astype(np.float64)    \n    end_mem = df.memory_usage().sum() \/ 1024**2\n    if verbose: print('Mem. usage decreased to {:5.2f} Mb ({:.1f}% reduction)'.format(end_mem, 100 * (start_mem - end_mem) \/ start_mem))\n    return df","24232362":"print(\"Shape of building_metadata is: \", build_meta.shape)\nprint(\"Shape of train is: \", train_df.shape)\nprint(\"Shape of weat_train is: \", weat_train.shape)\nprint(\"Shape of test is: \", test.shape)\nprint(\"Shape of weat_test is: \", weat_test.shape)","11ffba4a":"sub = pd.read_csv(\"..\/input\/ashrae-energy-prediction\/sample_submission.csv\")\nprint(\"Shape of submission is: \", sub.shape)\nsub.head()","7f5c82d7":"build_meta.head()","78a763b7":"train_df.head()","0c826557":"weat_train.head()","004d0a0b":"test.head()","9b48244f":"weat_test.head()","f277499a":"import gc","78c51f1a":"build_meta = reduce_mem_usage(build_meta)\ntrain_df = reduce_mem_usage(train_df)\nweat_train = reduce_mem_usage(weat_train)\n","7e2e2a4b":"del test, sub, weat_test\ngc.collect()","c33f6fbb":"train = pd.merge(train_df, build_meta, on=\"building_id\", how=\"left\")\nprint(\"Shape after merging train and build train is:\", train.shape)\n\ndel train_df\ngc.collect()\n\ntrain = pd.merge(train, weat_train, on=['site_id','timestamp'], how=\"left\")\nprint(\"Shape after merging all train data is:\", train.shape)\n\ndel weat_train\ngc.collect()\n","71639314":"import seaborn as sns\ndef bar_plot(feature, df):\n    sns.set(style=\"darkgrid\")\n    ax = sns.countplot(x=feature , data=df)\n    \n","84feb75f":"train.head()","fb045616":"train.isna().sum()","7e3a7c55":"#bar_plot(\"meter_reading\", train)\nprint(\"total different value of meter_reading is:\", train.meter_reading.value_counts().shape)","30fccf9f":"bar_plot(\"site_id\", train)","e8b90828":"print(\"total different value of meter is:\", train.meter.value_counts())\n\nbar_plot(\"meter\", train)","9a5c0504":"print(\"total different value of primary use is:\", train.primary_use.value_counts())\nbar_plot(\"primary_use\", train)","a33ccdec":"print(\"total different value of square feet is:\", train.square_feet.value_counts().shape)\nbar_plot(\"square_feet\", train)","79d0d1de":"print(\"total different value of year built is:\", train.year_built.value_counts())\nbar_plot(\"year_built\", train)","f9f9a255":"print(\"total different value of floor count is:\", train.floor_count.value_counts())\nbar_plot(\"floor_count\", train)","669a1dde":"print(\"total different value of air temperature is:\", train.air_temperature.value_counts().shape)\nbar_plot(\"air_temperature\", train)","09f6c41b":"print(\"total different value of cloud coverage is:\", train.cloud_coverage.value_counts())\nbar_plot(\"cloud_coverage\", train)","08956c3d":"print(\"total different value of dew temperature is:\", train.dew_temperature.value_counts().shape)\nbar_plot(\"dew_temperature\", train)","29c2d8c1":"print(\"total different value of precip_depth_1_hr is:\", train.precip_depth_1_hr.value_counts().shape)\nbar_plot(\"precip_depth_1_hr\", train)","5f815d76":"print(\"total different value of sea_level_pressure is:\", train.sea_level_pressure.value_counts().shape)\nbar_plot(\"sea_level_pressure\", train)","33399926":"print(\"total different value of wind_direction is:\", train.wind_direction.value_counts().shape)\nprint(train.wind_direction.value_counts())\nbar_plot(\"wind_direction\", train)","e1d704c0":"print(\"total different value of wind_speed is:\", train.wind_speed.value_counts().shape)\nprint(train.wind_speed.value_counts())\nbar_plot(\"wind_speed\", train)","eac8f36d":"import datetime\n\n#convert into datetime\ntrain[\"timestamp\"] = pd.to_datetime(train[\"timestamp\"])\n\n#Extarct year, month, weeks etc from timestamp\ntrain[\"year\"] = pd.DatetimeIndex(train[\"timestamp\"]).year\ntrain[\"month\"] = pd.DatetimeIndex(train[\"timestamp\"]).month\ntrain[\"day\"] = pd.DatetimeIndex(train[\"timestamp\"]).day\ntrain[\"week\"] = pd.DatetimeIndex(train[\"timestamp\"]).week\n","81f503e8":"train.head(2)","81578551":"print(\"total different value of year is:\", train.year.value_counts().shape)\nprint(train.year.value_counts())\nbar_plot(\"year\", train)","357b9262":"train.drop(\"year\", axis=1, inplace=True)","f53c0acd":"print(\"total different value of month is:\", train.month.value_counts().shape)\n#print(train.month.value_counts())\nbar_plot(\"month\", train)","4c72ca75":"print(\"total different value of day is:\", train.day.value_counts().shape)\n#print(train.day.value_counts())\nbar_plot(\"day\", train)","7053c499":"print(\"total different value of week is:\", train.week.value_counts().shape)\n#print(train.week.value_counts())\nbar_plot(\"week\", train)","b188d4ea":"train.sort_values(by='timestamp', inplace=True)","30119ad0":"import matplotlib.pyplot as plt\n\n\ntrain['timestamp'].plot()\n","b51a70fe":"test_df = pd.read_csv(\"..\/input\/ashrae-energy-prediction\/test.csv\")\nweat_test = pd.read_csv(\"..\/input\/ashrae-energy-prediction\/weather_test.csv\")","7b77c43a":"test_df = reduce_mem_usage(test_df)\nweat_test = reduce_mem_usage(weat_test)\n","b1b9b6ee":"test = pd.merge(test_df, build_meta, on=\"building_id\", how=\"left\")\nprint(\"Shape after merging test and build test is:\", train.shape)\n\ndel test_df\ngc.collect()\n\ntest = pd.merge(test, weat_test, on=['site_id','timestamp'], how=\"left\")\nprint(\"Shape after merging all test data is:\", train.shape)\n\ndel weat_test, build_meta\ngc.collect()\n","15248288":"#convert into datetime\ntest[\"timestamp\"] = pd.to_datetime(test[\"timestamp\"])\n\n#Extarct year, month, weeks etc from timestamp\n#train[\"year\"] = pd.DatetimeIndex(train[\"timestamp\"]).year\ntest[\"month\"] = pd.DatetimeIndex(test[\"timestamp\"]).month\ntest[\"day\"] = pd.DatetimeIndex(test[\"timestamp\"]).day\ntest[\"week\"] = pd.DatetimeIndex(test[\"timestamp\"]).week\n","b2f84c9a":"test.head(2)","26beda0e":"train.drop([\"timestamp\"], axis=1, inplace=True)\ntest.drop([\"timestamp\"], axis=1, inplace=True)","0926cc10":"target = train[\"meter_reading\"]\ndel train[\"meter_reading\"]","6f98c8e8":"gc.collect()","13f0533e":"from category_encoders import *\n\ndef target_encoder(feature):\n    cat_vectorizer = TargetEncoder().fit(train[feature].astype(str), target)\n\n    train[feature] = cat_vectorizer.transform(train[feature].astype(str))\n    test[feature] = cat_vectorizer.transform(test[feature].astype(str))\n    print(\"Done\")\n    ","52ab848a":"cols = [\"primary_use\"]\nfor i in cols:\n    target_encoder(feature = i)","19596946":" #cols = [\"floor_count\", \"year_built\", \"floor_count\", \"air_temperature \", \"cloud_coverage\",\\\n  #     \"dew_temperature\", \"precip_depth_1_hr\", \"sea_level_pressure\", \"wind_direction\", \"ind_speed\"]\n","38c17503":"train.fillna(-99, inplace=True)\ntest.fillna(-99, inplace=True)","01f9baa0":"feat_cols = [cols for cols in train.columns]","74d38eea":"**dew temperature **","b15744b4":"**Submission**","f62a1838":"1. From the above plot we can conclude that there are total 16 different site_id\n2. id 2,3,9,13,14,15 has appeared most number of times\n3. id 7,11,12 has appeared least number of times","9b376731":"> here too 0 has appeared a lot of times","89c5e83c":"> from above we can see that there are total 619 different temperature","1c7e7d10":"Q: How much does it cost to cool a skyscraper in the summer?\nA: A lot! And not just in dollars, but in environmental impact.\n\nThankfully, significant investments are being made to improve building efficiencies to reduce costs and emissions. The question is, are the improvements working? That\u2019s where you come in. Under pay-for-performance financing, the building owner makes payments based on the difference between their real energy consumption and what they would have used without any retrofits. The latter values have to come from a model. Current methods of estimation are fragmented and do not scale well. Some assume a specific meter type or don\u2019t work with different building types.\n\nIn this competition, you\u2019ll develop accurate models of metered building energy usage in the following areas: chilled water, electric, hot water, and steam meters. The data comes from over 1,000 buildings over a three-year timeframe. With better estimates of these energy-saving investments, large scale investors and financial institutions will be more inclined to invest in this area to enable progress in building efficiencies.\n\nAbout the Host\n\n\nFounded in 1894, ASHRAE serves to advance the arts and sciences of heating, ventilation, air conditioning refrigeration and their allied fields. ASHRAE members represent building system design and industrial process professionals around the world. With over 54,000 members serving in 132 countries, ASHRAE supports research, standards writing, publishing and continuing education - shaping tomorrow\u2019s built environment today.\n\nBanner photo by Federico Beccari on Unsplash","f3d51471":"**Date**","c0f84af1":"**primary_use**","040aa85b":"# Feature Engineering","1747fc53":"> year 1994 has maximum built","1f37dc98":"**Reduce Memory usage****","2e4a21ae":"> From above we can see that year is 2016 for all rows so we donot need to consider it","21bc4b75":"1. From the above plot we can conclude that there are total 4 different meter category\n2. 0 has appeared most number of times\n3. 3 has appeared least number of times\n","f78c3dec":"**square feet**","b1ddf9a0":"**floor count**","0be549dd":"1. From above we can conclude that\n2. floor 1 has maximum number of count and floor 14 and 16 has least","3776f85e":"**year_build**","7b189b50":"**Sorting dataframe on basis of timestamp**","3f72bad3":"**Checking shapes of all the files**","d7d28f47":"**Before we move further let's visualize**","c99b06bd":"**Model**","d2ae73e1":"> this too is a categorical variable with 128 different values\n> and we can see that 1 value has appeared a lot of times","e8a4b4b2":"# work in progress. will update this kernel with few more beautiful insights","d8bcc42b":"> there are total 1397 different types of square feet","ea4788de":"**cloud_coverage**","0ed495d1":"1. this is a categorical variable\n2. From above we can see that office has maximum number of count and Religious worship has lowest","5c18ba8d":"**precip_depth_1_hr**","ebadceaa":"**wind_direction**","b74ba5f7":"> From above we can see that there is a lot of nan values present which we have to carefully handle","99986d44":"**Label (meter_reading)**","3b2ff123":"**Merging Train**","989223b4":"**Importing text data**","81ffb1f5":"**DAtetime year for test**","51b26b6d":"**Target Encoding For categorical words**","207f36f9":"> here too wind speed 0 has occured a lot of time","7f4092d8":"**sea_level_pressure**","06228d19":"> from above we can see that there are 10 different types of cloud coverage ranging from 0 to 9 and 0 has occured most of the time ","26bef357":"**site_id**","fc709687":"**Please upvote if you like my work and give your suggestion on where I need to improve**","f187da26":"**Taking a quick look at all the files**","f9f8ca31":"**air_temperature**","4e325a32":"**Importing necessary files**","ed8c4c8c":"**Visualizing train**","b919c1d9":"> there are 522 different dew temperture categories","7f578133":"**meter**","bbbbfafd":"**wind_speed **"}}