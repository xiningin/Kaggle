{"cell_type":{"29fa853a":"code","671e72f6":"code","9e475828":"code","c8935e2d":"code","ab77a148":"code","38bc9b16":"code","b1da3cb1":"code","6e785804":"code","fdf98c33":"code","16d171b8":"code","6458551b":"code","20004a62":"code","d496d447":"code","defcb627":"code","ee083fd0":"code","c0d4feb4":"code","a868c480":"code","bed005c1":"code","72f59f1a":"code","0b30f767":"code","0eb2e4dd":"code","d9a9c493":"code","ae73e9f8":"code","e125ba07":"code","6870cbb3":"code","b3b87545":"code","0c977157":"code","7f4f5f66":"code","0363c5b5":"code","2967912d":"code","3da2af3e":"code","acd70e4f":"code","d1534441":"code","0fafc514":"code","f4179de9":"code","f3d3bbdc":"code","d61ae154":"code","2894a143":"code","990a8ddf":"code","c8f82343":"code","820a4b0d":"code","6d4a6ec7":"code","14a75e6f":"code","6edf8343":"code","c6b5987c":"code","cef7f95e":"code","0faf95b9":"code","5fcf230c":"code","ecfc45fd":"code","73d4f655":"code","061af0b9":"code","c7a3837d":"markdown","afd12049":"markdown","bd0d6d1f":"markdown","9168545e":"markdown","dad1f0f8":"markdown","8fc22e5d":"markdown","a1ed3afe":"markdown","225cc06c":"markdown","07344e58":"markdown","74841612":"markdown","dc4dec08":"markdown","674ae8f9":"markdown","67a9754c":"markdown","f046e714":"markdown","a054f5f8":"markdown"},"source":{"29fa853a":"# This Python 3 environment comes with many helpful analytics libraries installed\n# It is defined by the kaggle\/python Docker image: https:\/\/github.com\/kaggle\/docker-python\n# For example, here's several helpful packages to load\n\nimport numpy as np # linear algebra\nimport pandas as pd # data processing, CSV file I\/O (e.g. pd.read_csv)\n\n# Input data files are available in the read-only \"..\/input\/\" directory\n# For example, running this (by clicking run or pressing Shift+Enter) will list all files under the input directory\n\nimport os\nfor dirname, _, filenames in os.walk('\/kaggle\/input'):\n    for filename in filenames:\n        print(os.path.join(dirname, filename))\n\n# You can write up to 20GB to the current directory (\/kaggle\/working\/) that gets preserved as output when you create a version using \"Save & Run All\" \n# You can also write temporary files to \/kaggle\/temp\/, but they won't be saved outside of the current session","671e72f6":"import pandas as pd\nscc = pd.read_csv('\/kaggle\/input\/supplychainconcentrationmediation\/upload data final - Csv.csv')\nscc","9e475828":"scc.describe()","c8935e2d":"scc.describe(include=['object'])","ab77a148":"missing_data = scc.isnull()\nmissing_data","38bc9b16":"for column in missing_data.columns.values.tolist():\n    print(column)\n    print(missing_data[column].value_counts())\n    print('')","b1da3cb1":"# tobinq is dependent variable here,we drop null \n# drop observations where tobinq is null\n# drop observations with tobinq > 10 or tobinq < 0\nscc.dropna(subset=['tobinq'],axis=0,inplace=True)\nscc.drop(scc.loc[scc['tobinq']>10].index,inplace=True)\nscc.drop(scc.loc[scc['tobinq']<0].index,inplace=True)\nscc.reset_index(drop=True,inplace=True)\nscc.describe()","6e785804":"missing_data = scc.isnull()\nfor column in missing_data.columns.values.tolist():\n    print(column)\n    print(missing_data[column].value_counts())\n    print('')","fdf98c33":"# since ito and bw is also dependent variable, we drop null\nscc.dropna(subset=['ito'],axis=0,inplace=True)\nscc.dropna(subset=['bw'],axis=0,inplace=True)\nscc.reset_index(drop=True,inplace=True)\nscc.describe()","16d171b8":"missing_data = scc.isnull()\nfor column in missing_data.columns.values.tolist():\n    print(column)\n    print(missing_data[column].value_counts())\n    print('')","6458551b":"scc.rename(columns={'age ':'age'},inplace=True)","20004a62":"# drop null of control variable (only 4observations of age)\nscc.dropna(subset=[\"age\"],axis=0,inplace=True)\nscc.reset_index(drop=True,inplace=True)\nscc","d496d447":"scc.describe()","defcb627":"scc.columns","ee083fd0":"# split data into customer concentration dataset and supplier concentration dataset for remain as much observations as possible.\ncc = scc[['year', 'code', 'industry', 'cc', 'ito', 'cccc', 'bw', 'tobinq', 'age', 'cap', 'gm', 'growth', 'cash', 'lev', 'roa','daysap']].copy()\ncc.dropna(subset=[\"cc\"],axis=0,inplace=True)\ncc.describe()","c0d4feb4":"sc = scc[['year', 'code', 'industry', 'sc', 'ito', 'sccc','bw', 'tobinq', 'age', 'cap', 'gm', 'growth', 'cash', 'lev', 'roa','daysap']].copy()\nsc.dropna(subset=[\"sc\"],axis=0,inplace=True)\nsc.describe()","a868c480":"# winsorizing\nimport pandas as pd\nimport numpy as np\nfrom scipy.stats.mstats import winsorize\n\ndef winsord(df):\n    for column in df._get_numeric_data().columns.values.tolist():\n        df[column] = winsorize(df[column].values,limits=[0.1,0.1])\n    return df","bed005c1":"cc = winsord(cc.copy())\ncc.describe()","72f59f1a":"sc = winsord(sc.copy())\nsc.describe()","0b30f767":"cc.reset_index(drop=True,inplace=True)\ncc","0eb2e4dd":"sc.reset_index(drop=True,inplace=True)\nsc","d9a9c493":"cc.dtypes","ae73e9f8":"cc['age'].describe()","e125ba07":"# data normalization(scaling)\ncc['age'] = cc['age'].copy()\/cc['age'].copy().max()\ncc['gm'] = cc['gm'].copy()\/cc['gm'].copy().max()\ncc['lev'] = cc['lev'].copy()\/cc['lev'].copy().max()\ncc['roa'] = cc['roa'].copy()\/cc['roa'].copy().max()\ncc['daysap'] = cc['daysap'].copy()\/cc['daysap'].copy().max()\ncc['ito_norm'] = cc['ito'].copy()\/cc['ito'].copy().max()\ncc['cccc_norm'] = cc['cccc'].copy()\/cc['cccc'].copy().max()","6870cbb3":"cc.describe()","b3b87545":"sc['age'] = sc['age']\/sc['age'].max()\nsc['gm'] = sc['gm']\/sc['gm'].max()\nsc['lev'] = sc['lev']\/sc['lev'].max()\nsc['roa'] = sc['roa']\/sc['roa'].max()\nsc['daysap'] = sc['daysap']\/sc['daysap'].max()\nsc['ito_norm'] = sc['ito']\/sc['ito'].max()\nsc['sccc_norm'] = sc['sccc']\/sc['sccc'].max() \nsc.describe()","0c977157":"# data cleaning done, customer concentration dataset with 5714 observations,supplier 3270\ncc.to_csv(\"clean customer concentration dataset\")\nsc.to_csv(\"clean supplier concentration dataset\")","7f4f5f66":"cc","0363c5b5":"sc","2967912d":"cc.describe(include='all')","3da2af3e":"sc.describe(include='all')","acd70e4f":"cc.corr()","d1534441":"sc.corr()","0fafc514":"import seaborn as sns\nimport matplotlib.pyplot as plt\n%matplotlib inline","f4179de9":"sns.regplot(x='cc',y='tobinq',data=cc)\nplt.ylim(0,)\n\n# as we know, firm value is determined by so mamy factors\n# the relationship is not that strong between firm value and customer concentration\n# we'll examine later if this relationship is significant","f3d3bbdc":"sns.regplot(x='sc',y='tobinq',data=sc)\nplt.ylim(0,)","d61ae154":"ax = sns.boxplot(x='industry',y='cc',data=cc)\nax.set_xticklabels(ax.get_xticklabels(),rotation=60)\n# as we can see in the figure, customer concentration have much difference between industries","2894a143":"ax = sns.boxplot(x='industry',y='sc',data=sc)\nax.set_xticklabels(ax.get_xticklabels(),rotation=60)","990a8ddf":"# pearson \nfrom scipy import stats\npearson_coef,p_value = stats.pearsonr(cc['cc'],cc['tobinq'])\nprint(\"pearson_coef\",pearson_coef,'p_value',p_value)","c8f82343":"pearson_coef,p_value = stats.pearsonr(sc['sc'],sc['tobinq'])\nprint(\"pearson_coef\",pearson_coef,'p_value',p_value)","820a4b0d":"from sklearn.linear_model import LinearRegression\nlm = LinearRegression()\nX = cc[['cc','age','cap','gm','growth']]\nY = cc[['tobinq']]\nlm.fit(X,Y)\nprint(\"coef: \",lm.coef_)","6d4a6ec7":"import statsmodels.api as sm\nx = cc[['cc','age','cap','gm','growth']].values\ny = cc['tobinq'].values\nx2 = sm.add_constant(x)\nest = sm.OLS(y,x2).fit()\nprint(est.summary())\n# the hypothesis is confirmed, customer concentration has a positive impact on firm value","14a75e6f":"cc.columns\n","6edf8343":"import statsmodels.api as sm\nimport statsmodels.genmod.families.links as links\nfrom statsmodels.stats.mediation import Mediation\n\nprobit = links.probit\noutcome_model = sm.GLM.from_formula('tobinq ~ ito_norm + cc + age + cap + gm + growth + cash + lev + roa + daysap',cc, family=sm.families.Binomial(link=probit()))\nmediator_model = sm.OLS.from_formula('ito_norm ~ cc + age + cap + gm + growth + cash + lev + roa + daysap', cc)\nmed = Mediation(outcome_model, mediator_model, 'cc','ito_norm').fit()\nmed.summary()\n\n# ACME: average causal mediation effects\n# ADE: average direct effects\n# Total Effect: two of these effects added together\n# Proportion mediated : the proportion of the total effect that is due to the mediation effect\n\n# the conclusion is : ito is not a mediator","c6b5987c":"probit = links.probit\noutcome_model = sm.GLM.from_formula('tobinq ~ cccc_norm + cc + age + cap + gm + growth + cash + lev + roa + daysap',cc, family=sm.families.Binomial(link=probit()))\nmediator_model = sm.OLS.from_formula('cccc_norm ~ cc + age + cap + gm + growth + cash + lev + roa + daysap', cc)\nmed = Mediation(outcome_model, mediator_model, 'cc','cccc_norm').fit()\nmed.summary()\n# the conclusion is : the ccc is not a mediator","cef7f95e":"probit = links.probit\noutcome_model = sm.GLM.from_formula('tobinq ~ bw + cc + age + cap + gm + growth + cash + lev + roa + daysap',cc, family=sm.families.Binomial(link=probit()))\nmediator_model = sm.OLS.from_formula('bw ~ cc + age + cap + gm + growth + cash + lev + roa + daysap', cc)\nmed = Mediation(outcome_model, mediator_model, 'cc','bw').fit()\nmed.summary()\n# the conclusion is : bw is an mediator","0faf95b9":"lm = LinearRegression()\nX = sc[['sc','age','cap','gm','growth']]\nY = sc[['tobinq']]\nlm.fit(X,Y)\nprint(\"coef: \",lm.coef_)","5fcf230c":"import statsmodels.api as sm\nx = sc[['sc','age','cap','gm','growth']].values\ny = sc['tobinq'].values\nx2 = sm.add_constant(x)\nest = sm.OLS(y,x2).fit()\nprint(est.summary())\n# the supplier concentration has a positive impact on firm value","ecfc45fd":"probit = links.probit\noutcome_model = sm.GLM.from_formula('tobinq ~ ito_norm + sc + age + cap + gm + growth + cash + lev + roa + daysap',sc, family=sm.families.Binomial(link=probit()))\nmediator_model = sm.OLS.from_formula('ito_norm ~ sc + age + cap + gm + growth + cash + lev + roa + daysap', sc)\nmed = Mediation(outcome_model, mediator_model, 'sc','ito_norm').fit()\nmed.summary()\n# the conclusion is : ito is not a mediator","73d4f655":"probit = links.probit\noutcome_model = sm.GLM.from_formula('tobinq ~ sccc_norm + sc + age + cap + gm + growth + cash + lev + roa + daysap',sc, family=sm.families.Binomial(link=probit()))\nmediator_model = sm.OLS.from_formula('sccc_norm ~ sc + age + cap + gm + growth + cash + lev + roa + daysap', sc)\nmed = Mediation(outcome_model, mediator_model, 'sc','sccc_norm').fit()\nmed.summary()\n# the conclusion is : ccc is a mediator","061af0b9":"probit = links.probit\noutcome_model = sm.GLM.from_formula('tobinq ~ bw + sc + age + cap + gm + growth + cash + lev + roa + daysap',sc, family=sm.families.Binomial(link=probit()))\nmediator_model = sm.OLS.from_formula('bw ~ sc + age + cap + gm + growth + cash + lev + roa + daysap', sc)\nmed = Mediation(outcome_model, mediator_model, 'sc','bw').fit()\nmed.summary()\n# the conclusion is : bw is not a mediator","c7a3837d":"2.3 operational performance is mediating among this relationship: information flow\n\nModel 4:  \n\n$Tobins_Q = i_1+cCC+\u03b2_1 Ctrl_1+e_1$\n\n$BW = i_2+aCC+\u03b2_2 Ctrl_4+e_2$\n\n$Tobins_Q = i_3+c'CC+bBW+\u03b2_3 Ctrl_1+e_3$","afd12049":"2.2 operational performance is mediating among this relationship: financial flow\n\nModel 3:  \n\n$Tobins_Q = i_1+cCC+\u03b2_1  Ctrl_1+e_1$\n\n$CCC = i_2+aCC+\u03b2_2 Ctrl_3+e_4$\n\n$Tobins_Q = i_3+c'CC+bCCCC+\u03b2_3 Ctrl_1+e_3$","bd0d6d1f":"4.2 operational performance is mediating among this relationship: financial flow\n\nModel 7:  \n\n$Tobins_Q=i_1+cSC+\u03b2_1 Ctrl_1+e_1$\n\n$CCC=i_2+aSC+\u03b2_2 Ctrl_3+e_2$\n\n$Tobins_Q=i_3+c'SC+bSCCC+\u03b2_3 Ctrl_1+e_3$","9168545e":"4.3 operational performance is mediating among this relationship: information flow\n\nModel 8:  \n\n$Tobins_Q=i_1+cSC+\u03b2_1 Ctrl_1+e_1$\n\n$BW=i_2+aSC+\u03b2_2 Ctrl_4+e_2$\n\n$Tobins_Q=i_3+c'SC+bBW+\u03b2_3 Ctrl_1+e_3$ ","dad1f0f8":"1. does customer concentration have positive impact on firm value ?\n\nModel 1\uff1a $Tobins_Q=\u03b1_1 CC+\u03b1_2 Ctrl_1+c+e$","8fc22e5d":"2.1 operational performance is mediating among this relationship: material flow\n\nModel 2:  \n\n$Tobins_Q = i_1+cCC+\u03b2_1 Ctrl_1+e_1$\n\n$ITO = i_2+aCC+\u03b2_2 Ctrl_2+e_2$\n\n$Tobins_Q=i_3+c'CC+bITO+\u03b2_3 Ctrl_1+e_3$","a1ed3afe":"# 1. Data Wangling","225cc06c":"# 4. Conclusion\n\nCusotmer concentration and supplier concentration both impact firm value positively.\nBullwhip effect is a mediator between cutomer concentration and firm value.\nCash conversion cycle is a mediator between supplier concentration and firm value.\n","07344e58":"# 3. Model Development\n","74841612":"# Is Supply Chain Concentration a good thing?\n\nThis is a case I studied before with Stata. I'm redoing this with python. \n\nMany companies formed a long-term stable cooperation with major suppliers and customers in the process of their growth. Suppliers, customers gradually concentrated and promoted a vertical integration trend in the supply chain from both quantity and resource perspectives. However, is this concentration trend a benefit for the company or not? \n\nTo examine this question, I pulled data to test customer concentration and supplier concentration\u2019s impact on firm value respectively, and to find out if operational performance is mediating between this relationship. \n\n**Hypothesis:**\n1. customer concentration have positive impact on firm value.\n2. operational performance is mediating among this relationship.\n3. supplier concentration have positive impact on firm value.\n4. operational performance is mediating among this relationship.\n\n**Indicators:**\n1. customer concentraion & supplier concentration\n    * customer concentrationis: sum of the sales ratio of top five major customers (cc)\n    * customer concentrationis: sum of the purchase ratio of top five major suppliers (sc)\n2. firm value\n    * tobin's q: the ratio between a physical asset's market value and its replacement value (tobinq)\n3. operational performance\n    * material flow pov: inventory turnover ratio (ito)\n    * financial flow pov: cash conversion cycle (ccc)\n        customer related cash conversion cycle(cccc), days of inventory outstanding - days of payables outstanding \n        supplier related cash conversion cycle(sccc), days of inventory outstanding + days of sales outstanding\n    * informationflow pov: bullwhip effect\n        the variability of upstream demand \u2013 measured by the standard deviation of demand \u2013 divided by the variability of downstream demand. \n4. control variables\n    * age of firm (age)\n    * capital intensity (cap)\n    * gross margin (gm)\n    * growth of sales (growth)\n    * cash holdings (cash)\n    * asset-liability ratio(lev)\n    * return on assets (roa)\n    * days of sales outstanding (daysap)\n\n**Data:**\n\nfrom selected manufacturing company\u2019s annual reports and Wind database\n\n**Models:**\n\n* short-panel multiple linear regression\n\n* mediation testing: \nTingley, Yamamoto, Hirose, Keele, Imai (2014). mediation : R package for causal mediation analysis. Journal of Statistical Software 59:5. http:\/\/www.jstatsoft.org\/v59\/i05\/paper\n\n\n1. customer concentration have positive impact on firm value.\n\nModel 1\uff1a $Tobins_Q=\u03b1_1 CC+\u03b1_2 Ctrl_1+c+e$\n\n2. operational performance is mediating among this relationship.\n\nModel 2:  \n\n$Tobins_Q = i_1+cCC+\u03b2_1 Ctrl_1+e_1$\n\n$ITO = i_2+aCC+\u03b2_2 Ctrl_2+e_2$\n\n$Tobins_Q=i_3+c'CC+bITO+\u03b2_3 Ctrl_1+e_3$\n\nModel 3:  \n\n$Tobins_Q = i_1+cCC+\u03b2_1  Ctrl_1+e_1$\n\n$CCC = i_2+aCC+\u03b2_2 Ctrl_3+e_4$\n\n$Tobins_Q = i_3+c'CC+bCCCC+\u03b2_3 Ctrl_1+e_3$\n            \nModel 4:  \n\n$Tobins_Q = i_1+cCC+\u03b2_1 Ctrl_1+e_1$\n\n$BW = i_2+aCC+\u03b2_2 Ctrl_4+e_2$\n\n$Tobins_Q = i_3+c'CC+bBW+\u03b2_3 Ctrl_1+e_3$\n\n3. supplier concentration have positive impact on firm value.\n\nModel 5:  $Tobins_Q = \u03b1_1 SC+\u03b1_2Ctrl_1+c+e$\n\n4. operational performance is mediating among this relationship.\n\nModel 6:  \n\n$Tobins_Q=i_1+cSC+\u03b2_1 Ctrl_1+e_1$\n\n$ITO=i_2+aSC+\u03b2_2 Ctrl_2+e_2$\n\n$Tobins_Q=i_3+c'SC+bITO+\u03b2_3 Ctrl_1+e_3$\n\nModel 7:  \n\n$Tobins_Q=i_1+cSC+\u03b2_1 Ctrl_1+e_1$\n\n$CCC=i_2+aSC+\u03b2_2 Ctrl_3+e_2$\n\n$Tobins_Q=i_3+c'SC+bSCCC+\u03b2_3 Ctrl_1+e_3$\n\nModel 8:  \n\n$Tobins_Q=i_1+cSC+\u03b2_1 Ctrl_1+e_1$\n\n$BW=i_2+aSC+\u03b2_2 Ctrl_4+e_2$\n\n$Tobins_Q=i_3+c'SC+bBW+\u03b2_3 Ctrl_1+e_3$ \n\nCtrl_1 : control variables group including 'age','cap','gm','growth'\n\nCtrl_2 : control variables group including 'age','cash','growth'\n\nCtrl_3 : control variables group including 'age','growth','lev','roa'\n\nCtrl_4 : control variables group including 'age','gm','daysap'","dc4dec08":"# 5. Further development\n\n1. the measurements for supply chain concentraion benefitsthe\n2. selection of contral variable(covariates)\n3. more mediator candidates\n4. robust testing: eg. top 3 major customer or supplier\n5. time series\n6. short panel regression\n7. fixed or randome effects\n8. certain control variable could use observations of a year ahead t-1\n9. moderating analysis hybrid\n10. More Business Side argue on Model Development and Conclusion.","674ae8f9":"3. supplier concentration have positive impact on firm value.\n\nModel 5:  $Tobins_Q = \u03b1_1 SC+\u03b1_2Ctrl_1+c+e$","67a9754c":"4.1 operational performance is mediating among this relationship: material flow\n\nModel 6:  \n\n$Tobins_Q=i_1+cSC+\u03b2_1 Ctrl_1+e_1$\n\n$ITO=i_2+aSC+\u03b2_2 Ctrl_2+e_2$\n\n$Tobins_Q=i_3+c'SC+bITO+\u03b2_3 Ctrl_1+e_3$","f046e714":"# 2. Data Exploring","a054f5f8":"**1. Data Wrangling**"}}