{"cell_type":{"8d69d0e3":"code","a01a03b6":"code","4c910f87":"code","30788c8a":"code","78c282c1":"code","0edc09a9":"code","031d86d1":"code","5d7da750":"code","07210c8a":"code","38e54fcf":"code","d027c030":"markdown","aafcda5c":"markdown","6621a6a9":"markdown","f242c502":"markdown","74497330":"markdown","3d09f05e":"markdown","fb773b23":"markdown","f1388d51":"markdown"},"source":{"8d69d0e3":"import pandas as pd\nimport seaborn as sns \nimport os\nfrom pandas import DataFrame\nimport matplotlib.pyplot as plt","a01a03b6":"vax= pd.read_csv('..\/input\/vaxxed\/vaccinations.csv')\n#print(vax)","4c910f87":"#parse index\nvax['date']=pd.to_datetime(vax['date'], infer_datetime_format=True)\nindexeddf=vax.set_index(['date'])\n#print(indexeddf)\n\n#parsing to time format and extracting dates \nx=vax['date']=pd.to_datetime(vax['date'], format='%d-%m-%y')\n\nDay=vax['date'].dt.day_name()\nMonth=vax['date'].dt.month_name()\nYear=vax['date'].dt.year","30788c8a":"vax['Year']=vax['date'].dt.year\nvax['Month']=vax['date'].dt.month_name()\nvax['Day']=vax['date'].dt.day_name()\n#print(vax)","78c282c1":"cmap = sns.diverging_palette(200,374, as_cmap=True)\nvaccine_order = vax['vaccines'].value_counts().index\ncountry_order = vax['country'].value_counts().index\nmonth_order = vax['Month'].value_counts().index\nvax =vax.loc[vax['country'].isin(country_order[:35])]\nvax =vax.loc[vax['vaccines'].isin(vaccine_order[:10])]","0edc09a9":"country_count = vax.groupby(['country', 'vaccines']).size()\ncountry_count = country_count.reset_index(name='count')\ncountry_count = country_count.pivot(index = 'country', columns = 'vaccines', values = 'count')\ncountry_count.head()","031d86d1":"plt.figure(figsize=(25,7))\nsns.heatmap(country_count, annot = True, cmap =  sns.diverging_palette(212,375, as_cmap=True), center = 86)\nplt.xticks(rotation=15)","5d7da750":"month_counts = vax.groupby(['vaccines', 'Month']).size()\nmonth_counts = month_counts.reset_index(name='sum')\nmonth_counts = month_counts.pivot(index = 'vaccines', columns = 'Month', values = 'sum')\nmonth_counts.head()","07210c8a":"plt.figure(figsize=(10,8))\nsns.heatmap(month_counts, annot = True, fmt = '.1f', cmap =  sns.diverging_palette(212,375, as_cmap=True), center = 218)\nplt.xticks(rotation=15)","38e54fcf":"sns.set_style(\"whitegrid\")\ndf = vax.groupby('country').agg({'total_vaccinations': 'sum'}).sort_values('total_vaccinations', ascending=False)\n\nOTHERS = df.iloc[15:].sum()\ndf.drop(df.iloc[15:].index.tolist(), inplace=True)\ndf.loc['OTHERS'] = OTHERS\n\n\nax = df.plot.pie(y='total_vaccinations', figsize=(10,20), colormap= sns.diverging_palette(213,375, as_cmap=True))\nhandles, labels = ax.get_legend_handles_labels()\nlgd = ax.legend(handles, labels, bbox_to_anchor=(1.0, 0.8), loc=2, borderaxespad=0., fontsize=14)\nplt.ylabel(' ')\nplt.title('World fully vaccinated', fontsize=17)\nplt.show()","d027c030":"Parse date series","aafcda5c":"Pie chart with total vaccinations in key countruies","6621a6a9":"Since there are too many countries, we'll filter just the key countries","f242c502":"Creating country count for heatmap","74497330":"Filter data","3d09f05e":"Subset Month Year Day","fb773b23":"Heatmap","f1388d51":"Open file"}}