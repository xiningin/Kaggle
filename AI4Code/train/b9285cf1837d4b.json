{"cell_type":{"6ebcc176":"code","03cba69c":"code","1dea2870":"code","a040a1cb":"code","97d3e129":"code","4562ca06":"code","fd77fbb0":"code","2beb735c":"code","b64b22e7":"code","72db9618":"code","ccb9fbcb":"code","a6428356":"code","573d67fd":"code","3463c38a":"code","a9e438ab":"code","9d62abf5":"code","8f8140c3":"code","7dda8629":"code","9ee39d87":"markdown","ac9a2c92":"markdown","0e6b0dff":"markdown","5f6a07be":"markdown","02dde73d":"markdown","49a2485a":"markdown","a10ab64d":"markdown","87f2dfd6":"markdown","10a56bde":"markdown","b58582c6":"markdown","f3392f3c":"markdown","a172b270":"markdown","c881da72":"markdown","631af7b8":"markdown","45ee6435":"markdown","489e4e29":"markdown","ea2a54b4":"markdown","ed0351b5":"markdown","6774432d":"markdown","6304afc5":"markdown","24ae5c7c":"markdown","242553b0":"markdown","13d3ea47":"markdown","29a16077":"markdown","9ea255a8":"markdown","b9a95bb2":"markdown"},"source":{"6ebcc176":"import numpy as np\nimport pandas as pd\nimport matplotlib.pyplot as plt\nimport seaborn as sns\n\n%matplotlib inline","03cba69c":"df = pd.read_csv(\"..\/input\/hotel-booking\/hotel_booking.csv\");","1dea2870":"df.info()","a040a1cb":"pd.DataFrame([df.shape],columns=['number_of_rows','number_of_columns'],index=['0'])","97d3e129":"# Q4-1 - Checking missing data\ncheckMD = df.isnull().values.any();\n\n# Q4-2 - The column with most missing data\ncolumnMD = df.isnull().sum().idxmax();\n\n# Get the output\npd.DataFrame({\n    'check_missing_data_existance': checkMD,\n    'column_with_maximum_missing_data': columnMD.upper()\n},index=['0'])","4562ca06":"# Calculating number of missing data by percentage\nmissing_values = 100*(df.isnull().sum() \/ len(df));\n\n# Creating a DataFrame for the columns\nmissing_values = missing_values.to_frame();\nmissing_values.columns = ['Total missing data'];\nmissing_values.index.names = ['Columns'];\nmissing_values = missing_values.reset_index();\n\n# Displaying the results in a bar-plot using Seaborn library\nplt.figure(figsize=(36,4), dpi=100);\nsns.set_style(style='ticks');\nsns.barplot(data=missing_values, x='Columns', y='Total missing data');\nplt.xticks(rotation = 45);\nplt.ylabel('Total missing data (%)');","fd77fbb0":"# Drop the desired column\ndf.drop('company',axis=1, inplace=True);\n\n# Display the list of dataset's column\ndf.columns.tolist()","2beb735c":"df['total_passengers'] = (df['adults'] + df['children'] + df['babies']) - df['is_canceled'];\n\ndf_passengers = df[['country','adults','children','babies','is_canceled','total_passengers']].groupby('country').sum().nlargest(5,'total_passengers');\ndf_passengers","b64b22e7":"# Displaying in a bar plot\nsns.set_style(style='whitegrid');\nsns.barplot(data=df_passengers.reset_index(), x='country', y='total_passengers');\nplt.xticks(rotation=45);","72db9618":"name = df['name'][df['adr'].idxmax()];\nprice = df['adr'].max();\n\npd.DataFrame({\n    'Name': name,\n    'Price': price\n},index=['Max(ADR)'])","ccb9fbcb":"df['adr'].mean().round(2)","a6428356":"df['total_stays_in_nights'] = df['stays_in_week_nights'] + df['stays_in_weekend_nights'];\n\ndf['total_stays_in_nights'].mean().round(2)","573d67fd":"plt.figure(figsize=(16,8));\nsns.countplot(data=df, x='total_stays_in_nights', hue='hotel');\nplt.xticks(rotation=45);\n\nplt.xlim(0,16);\nplt.legend(loc=(0.3,0.9));","3463c38a":"df[df['total_of_special_requests'] == 5][['name','email']]","a9e438ab":"lastname_count = df['name'].apply(lambda lname:lname.split()[1]).value_counts().head().to_frame('value_counts');\nlastname_count","9d62abf5":"# Displaying via bar plot\nsns.barplot(data=lastname_count.reset_index(), y='value_counts', x='index');\nplt.xticks(rotation=45);","8f8140c3":"df['total_babies_and_children'] = df['babies'] + df['children'];\n\ndf[['name','email','phone-number','total_babies_and_children']].loc[df['total_babies_and_children'].idxmax()].to_frame('Content')","7dda8629":"df['phone-number'].apply(lambda phone_no:phone_no[:3]).value_counts().nlargest(3).to_frame('Value counts')","9ee39d87":"At first, to get the total number of stays in nights, I summed *stays_in_week_nights* and *stays_in_weekend_nights* columns together. <br>\nTo get the average of it, the *mean()* function is used. Also, to round the number to 2 decimals, I used the *round()* function.\n\nTo view the total stays in nights classified by hotels, expand the cell below. Because the plot was too big, I limited it to the numbers with most stays using *xlim()* function.","ac9a2c92":"For checking the existance of missing data in any record, I used the 'isnull()' function. The result will show \"NaN\" (Not a number). To present the result as boolean, the 'values' attribute is added. <br>\nNow, we had found the records with missing data. There are several records founded whereas only one is enough to check for the existance. In this case, I used the 'any()' function to say if there is atleast one missing data, return true, else return false. At last, the result is stored in 'checkMD' variable.\n\nTo find the column with the most missing data, I used the 'isnull()' again but this time, I summed the missing data exist in a column using 'sum()' function. To show the column name which have the most missing data, I used the 'idxmax()' function.\n\nTo visualize the total missing data of each column, expand the cell below. (Source: [yun.ir\/h4j3m6](yun.ir\/h4j3m6))","0e6b0dff":"The info() function displays the base informations of the dataframe which contains type of the dataframe, total number of records and range of indexes, columns name, total number of not null (non-null) values and types of columns and the memory usage of the dataframe.\n","5f6a07be":"In order to get the last names, at the first step, we should <u>split<\/u> the names via *split()* function. Hopefully, the prefixes (Such as Mr, Mrs, Dr, etc) are at the end of the names. But I don't know if anyone's name is in two parts or not (E.g. 'Mohammad Ali', a Persian name). If any exists, I don't know what to do. So, lets assume that the first and last names are in single part. :-)\n\nTo split each name in the column, I created a function and applied it via *apply()* function.\n\nSince the indexes start from 0, then:\n* 0 => First names\n* 1 => Last names\n* 2 => Prefixes\n\nSo, the index 1 will be choosed to have the last names.\n\nAt last, we should count the last names via *value_counts()* function, i.e. how much of each last name exists. <br>\nTo view the results in a bar plot, expand the cell below.","02dde73d":"# Q3 - Dataset's number of rows","49a2485a":"Since the question wants the people with <u>most number of *babies* and *children*<\/u>, I summed the two columns *babies* and *children* together and stored them in a new column named *total_babies_and_children*.\n\nTo show the people's informations, the index number of their record is needed. So, I used the *idxmax()* function to find the maximum result and give its index number. <br>\nI putted the above result in *loc()* function to locate the specified record and then, display its other informations.","a10ab64d":"By using Pandas library and read_csv() function, the dataset's csv file is called and added as a dataframe into a variable named 'df'.","87f2dfd6":"The question wants the top 5 contries with the most total passengers. <br>\nAt first, I summed the 'adults', 'children' and 'babies' columns together. Since some passengers in the dataset had canceled their tickets, the 'is_canceled' column should be subtracted from the summation. The calculation's result is stored in a new column named 'total_passengers'.\n\nThen, beside displaying the results, they need to be grouped by the 'country' column and sum the columns with the 'sum()' function.\n\nIf I use the 'max()' function to display the top 5 contries, since I displayed the dataframe with more than 1 column, it doesn't know which column should be sorted by. In this case, I used the 'nlargest()' function to tell it I want the *top 5* records sorted by the *'total_passengers'* column.\n\nHere we go. The top 5 countries with the most total passengers are displayed in a dataframe.\n\nTo view the results in a plot, expand the cell below.","10a56bde":"# Q10 - Define the name and e-mail of people who had 5 special requests.","b58582c6":"In order to get the regions national phone code, we need the first 3 digits of each number. To do this, I'd got the first 3 digits of each number via an inline function (lambda). Then, to count them, I used *value_counts()* function. <br>\nSince the dataset's records are a lot, I just wanted to display the top 3 national phone codes with most reservations via *nlargest()* function.\n\nThe *to_frame()* function is for displaying the results in a dataframe. The string in the function, is the name of the column.","f3392f3c":"# Introduction\n> The hotel-booking dataset contains 119390 observations for a City Hotel and a Resort Hotel. Each observation represents a hotel booking between the 1st of July 2015 and 31st of August 2017, including booking that effectively arrived and booking that were canceled. <br>\nThe data is originally from the article Hotel Booking Demand Datasets, written by Nuno Antonio, Ana Almeida, and Luis Nunes for Data in Brief, Volume 22, February 2019.\n\nIn this notebook, I have done some exercises with this dataset given from [Filoger](filoger.com)'s AI Bootcamp which I had signed up before. <br>\nSome plots are displayed using Seaborn library, also.\n\n# Dataset's Content\n> Since this is hotel real data, all data elements pertaining hotel or costumer identification were deleted.\nFour Columns, 'name', 'email', 'phone number' and 'credit_card' have been artificially created and added to the dataset.","a172b270":"# Q1 - Reading the dataset's CSV file","c881da72":"# Importing necessary libraries","631af7b8":"# Q13 - Define the phone number of regions which had the most reservations.","45ee6435":"# Q7 - Define the name of the passenger who have the maximum average daily rate (ADR). How much is its price?","489e4e29":"The shape attribute represents the total number of columns and rows as a tuple. <br>\nI decided to show them as tabular data, so I putted them in a dataframe function.","ea2a54b4":"# Q8 - Average of total ADRs with 2 decimals.","ed0351b5":"# Q9 - Define the average of number of nights stayed.","6774432d":"# Q11 - Which first names have the most frequency of last name? Define 5 most frequent family.","6304afc5":"# Q2 - Dataset's Base information","24ae5c7c":"# Q6 - Which country have the most passengers? Define the top 5 countries.","242553b0":"The question wants to know who have the maximum ADR. For this, I first searched for the location of the maximum ADR using 'idxmax()' function. Then, I searched for the name of that passenger in the 'name' column and stored it in the 'name' variable. <br>\nThe question also wants to know the price. For this case, I found the maximum ADR and displayed it as the price.\n\nAt last, I represented the results in a dataframe.","13d3ea47":"# Q4 - Does the dataset have any missing data? If the answer is positive, which column have the most missing data?\n> Solution source: [yun.ir\/dxig38](yun.ir\/dxig38)","29a16077":"# Q5 - Drop 'company' column from DataFrame.","9ea255a8":"Using the 'drop()' function, the specified column (at here is 'company' column) will be removed. To remove it permanently, I used the 'inplace=true' attribute in the 'drop()' function. <br>\nI added 'columns' attribute to display the columns as an array while the company column is removed. Also, I added 'tolist()' function to display the columns as a list.","b9a95bb2":"# Q12 - Define the people whom reserved a hotel with most number of babies and children."}}