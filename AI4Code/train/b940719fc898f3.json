{"cell_type":{"7fa2d517":"code","5cb297e1":"code","49a9f61d":"code","a7e86bf5":"code","cca18fc5":"markdown","5dac0056":"markdown","0e069f42":"markdown","52ce67d0":"markdown"},"source":{"7fa2d517":"import numpy as np\nimport pandas as pd\nfrom sklearn.metrics import roc_auc_score\n\nnp.random.seed(0)\n\nleaderboard = pd.read_csv('..\/input\/final-lb-rsnamiccai-brain-tumor-classification\/rsna-private.csv')\nteam_n = leaderboard.shape[0]\nentries = np.array(leaderboard['Entries'], dtype=np.int32)\n\n# Size of the public test set\npublic_n = 87\n# Size of the complete test set\ntotal_n = 400","5cb297e1":"labels = np.random.random(total_n).round()\nbest_scores = np.empty(team_n, dtype=np.float32)\n\nfor team in range(team_n):\n    public_scores = np.empty(entries[team], dtype=np.float32)\n    private_scores = np.empty_like(public_scores)\n    for entry in range(entries[team]):\n        preds = np.random.random(total_n)\n        public_auc = roc_auc_score(labels[:public_n], preds[:public_n])\n        private_auc = roc_auc_score(labels[public_n:], preds[public_n:])\n        public_scores[entry] = public_auc\n        private_scores[entry] = private_auc\n\n    # Get the private score for the entry that scored the best on public LB\n    idx = np.argmax(public_scores)\n    best_scores[team] = round(private_scores[idx], 5)","49a9f61d":"# Get the top scores in the private LB\nsorted_scores = -np.sort(-best_scores)\nsimulated_top_ten = sorted_scores[:10]\nactual_top_ten = leaderboard['Score'].values[:10]\nprint(f'Simulated top 10: {simulated_top_ten}')\nprint(f'Actual top 10   : {actual_top_ten}')","a7e86bf5":"import seaborn as sns\ndata = pd.DataFrame({'actual':leaderboard['Score'].values, 'simulated':best_scores})\nsns.histplot(data, kde=True)","cca18fc5":"## While the top scores on the actual leaderboard seem to line up with that of the simulated leaderboard, the score distributions are different.","5dac0056":"# What would the leaderboard look like if the private test labels were inadvertently shuffled?","0e069f42":"![](https:\/\/emojipedia-us.s3.dualstack.us-west-1.amazonaws.com\/thumbs\/120\/apple\/285\/relieved-face_1f60c.png)","52ce67d0":"![](https:\/\/emojipedia-us.s3.dualstack.us-west-1.amazonaws.com\/thumbs\/120\/apple\/285\/thinking-face_1f914.png)"}}