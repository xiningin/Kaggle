{"cell_type":{"eb37b620":"code","d636d33c":"code","a66556df":"code","0470b084":"code","3f57eaeb":"code","0a1cb66a":"code","f3f83b45":"code","d5608c7d":"code","c0b36642":"code","ae32c7bb":"markdown","7f576db3":"markdown","8f3a3a01":"markdown","ba07b62e":"markdown","15e486a3":"markdown","59c0e70f":"markdown"},"source":{"eb37b620":"import numpy as np \nimport pandas as pd\nimport plotly\nimport plotly.graph_objects as go","d636d33c":"train_df = pd.read_pickle('..\/input\/ashrae-data-minification\/train.pkl')\nbuilding_df = pd.read_pickle('..\/input\/ashrae-data-minification\/building_metadata.pkl')\ntrain_weather_df = pd.read_pickle('..\/input\/ashrae-data-minification\/weather_train.pkl')","a66556df":"temp_df = train_df[['building_id']]\ntemp_df = temp_df.merge(building_df, on=['building_id'], how='left')\ndel temp_df['building_id']\ntrain_df = pd.concat([train_df, temp_df], axis=1)\n\ndel building_df, temp_df\n\ntemp_df = train_df[['site_id','timestamp']]\ntemp_df = temp_df.merge(train_weather_df, on=['site_id','timestamp'], how='left')\ndel temp_df['site_id'], temp_df['timestamp']\ntrain_df = pd.concat([train_df, temp_df], axis=1)\n\ndel train_weather_df, temp_df","0470b084":"meter_dict = {0: 'electricity', 1: 'chilledwater', 2: 'steam', 3: 'hotwater'}\n\ndef plot_meter_reading_for_site(df, site_id):\n    building_id_list = df[df.site_id == site_id].building_id.unique().tolist()\n    for building_id in building_id_list:\n        fig = go.Figure()\n        df_subset = df[(df.site_id == site_id) & (df.building_id == building_id)]\n        meter_list = df_subset.meter.unique().tolist()\n        for meter in meter_list:\n            df_super_subset = df_subset[df_subset.meter == meter]\n            fig.add_trace(go.Scatter(\n                 x=df_super_subset.timestamp,\n                 y=df_super_subset.meter_reading,\n                 name=f\"{meter_dict[meter]}\",\n                 hoverinfo=f'x+y+name',\n                 opacity=0.7))\n\n            fig.update_layout(width=700,\n                            height=500,\n                            title_text=f\"Meter Reading for Site [{site_id}] Building [{building_id}]\",\n                            xaxis_title=\"timestamp\",\n                            yaxis_title=\"meter_reading\",)\n        fig.show()","3f57eaeb":"plot_meter_reading_for_site(train_df, 6)","0a1cb66a":"plot_meter_reading_for_site(train_df, 7)","f3f83b45":"plot_meter_reading_for_site(train_df, 8)","d5608c7d":"plot_meter_reading_for_site(train_df, 9)","c0b36642":"plot_meter_reading_for_site(train_df, 10)","ae32c7bb":"# meter_reading site 10","7f576db3":"# meter_reading site 9","8f3a3a01":"# meter_reading site 6","ba07b62e":"# meter_reading site 8","15e486a3":"# meter_reading site 7","59c0e70f":"This is the 1st out of 3 notebooks where I have plotted the **meter_reading over the year 2016 (duration of training data) for different types of meters for all the buildings across sites 6 to 10**. The goal is to quickly refer to the meter_reading for all the sites to identify outliers and gaps.\n\n- [Plot for Site 0 to 5](https:\/\/www.kaggle.com\/arnabbiswas1\/eda-meter-reading-for-site-0-5)\n- [Plot for Site 11 to 15](https:\/\/www.kaggle.com\/arnabbiswas1\/eda-meter-reading-for-sites-11-15)\n\nNote: I have used plotly for this EDA so that the exact value of meter reading at a particular time stamp can be quickly referred from the figure. For the buildings which just have only one type of meter, to display the meter type, please hover the mouse over the line plot. For buildings with multiple meter types, different types of meters are explicitly mentioned along with the color code.\n\n**Unfortunately, because of the size, this notebook takes few minutes to get rendered completely. So, please wait for sometime once you open the page.**"}}