{"cell_type":{"1d50c46e":"code","4f07d590":"code","06b9c72a":"code","78f71542":"code","99a96553":"code","639b94cd":"code","4e12a6bf":"code","95a1d8bf":"code","94343925":"code","6b20c3d7":"code","ca5f5689":"code","1632e8dc":"code","40e12d05":"code","286f44dc":"code","21dcac84":"code","dcc3bca7":"code","6f274cd0":"code","b28fc508":"code","8bdc6fb9":"code","ca49df33":"code","e91af9c0":"code","84690366":"code","280624f9":"markdown","06d7ebe6":"markdown"},"source":{"1d50c46e":"# Importando as bibliotecas que v\u00e3o nos ajudar a processar e visualizar os dados.\nimport numpy as np \nimport pandas as pd \nimport warnings\nwarnings.filterwarnings(\"ignore\")        \nimport matplotlib\nimport matplotlib.pyplot as plt\nimport matplotlib.ticker as mtick\nimport matplotlib.gridspec as grid_spec\nimport seaborn as sns\nimport squarify\n\n# Importando os dados\nimport os\nfor dirname, _, filenames in os.walk('\/kaggle\/input'):\n    for filename in filenames:\n        print(os.path.join(dirname, filename))\n","4f07d590":"# Pegando os dados de 2021 e o hist\u00f3rico\ndf = pd.read_csv('\/kaggle\/input\/world-happiness-report-2021\/world-happiness-report-2021.csv')\ndf2 = pd.read_csv('\/kaggle\/input\/world-happiness-report-2021\/world-happiness-report.csv')\n# Fazendo a mesma coisa, mas utilizando os pa\u00edses como \u00edndices.\ndf_1 = pd.read_csv('\/kaggle\/input\/world-happiness-report-2021\/world-happiness-report-2021.csv',index_col=0) # pa\u00edses como index\ndf_2 = pd.read_csv('\/kaggle\/input\/world-happiness-report-2021\/world-happiness-report.csv',index_col=0) # pa\u00edses como index\n\n# Renomenado as colunas para facilitar o trabalho\ndf.rename(columns={'Country name': 'Country'}, inplace=True)\ndf2.rename(columns={'Country name': 'Country'}, inplace=True)\ndf_1.rename(columns={'Country name': 'Country'}, inplace=True)\ndf_2.rename(columns={'Country name': 'Country'}, inplace=True)","06b9c72a":"# Vis\u00e3o Geral dos Dados de pa\u00edses como \u00edndice\ndf_1.head()","78f71542":"# Analisando o passado recente (2021 - 2020)\nfelicidade_2021 = df_1['Ladder score']\n# felicidade_2021\nfelicidade_2020 = df_2.loc[df_2['year'] == 2020]['Life Ladder']\nfelicidade_2020","99a96553":"# Criando um dataframe com as diferen\u00e7as de um ano para outro e retirando os valores que n\u00e3o s\u00e3o n\u00fameros.\ndiff = pd.DataFrame(felicidade_2021 - felicidade_2020,columns=['diff']).dropna()\ndiff.describe()","639b94cd":"# Mostrar qual pa\u00eds subiu mais no ranking\nprint((felicidade_2021['Philippines'] - felicidade_2020['Philippines']).round(2))\nprint(diff['diff'].idxmax())\nprint(diff['diff']['Philippines'].round(2))","4e12a6bf":"# Mostrar qual pa\u00eds desceu mais no ranking\nprint(diff['diff'].idxmin())\nprint(diff['diff']['Zambia'].round(2))","95a1d8bf":"df[['Country','Ladder score','Generosity']].head(10)","94343925":"df.iloc[df['Generosity'].idxmax()]","6b20c3d7":"# Mostrar a correla\u00e7\u00e3o entre Felicidade x Generosidade\ndf.corrwith(df['Generosity'],method='pearson')['Ladder score']","ca5f5689":"# Correla\u00e7\u00e3o geral\ncorr = df.corr()\ncorr.style.background_gradient(cmap='coolwarm').set_precision(2).set_properties(**{'font-size': '12pt'})","1632e8dc":"# Comparar o Brasil com o Brics\ndf_1.loc[['Brazil','Russia','India','China','South Africa']].sort_values(['Ladder score'], ascending = False)","40e12d05":"# ser\u00e1 considerado o dataset criado anteriormente. Primeiro uma c\u00f3pia \u00e9 feita para evitar \n# problemas com o dataset original.\n\ndfm_2807 = df.copy(deep=True)\ndfm_2807.head(5)","286f44dc":"# Obtendo os pa\u00edses extremos em felicidade\nsubset1 = dfm_2807.loc[:,['Country','Ladder score']] # Separo a regi\u00e3o do dataframe que quero\nsubset1 = subset1.sort_values(by='Ladder score', ascending=False) # Ordeno os valores do maior para o menor Ladder Score\nprint('Pa\u00eds mais feliz:')\nprint(subset1.iloc[0]) # Imprimindo o pa\u00eds mais feliz\nprint('\\nPa\u00eds menos feliz:')\nprint(subset1.iloc[-1]) # Imprimindo o pa\u00eds menos feliz","21dcac84":"# Obtendo como o Brasil est\u00e1 colocado quando comparado com o restante da Am\u00e9rica do Sul\ndfm_2807['Regional indicator'].drop_duplicates() # Obtendo todas as poss\u00edveis regi\u00f5es","dcc3bca7":"# Como visto, n\u00e3o h\u00e1 uma entrada espec\u00edfica para a Am\u00e9rica Latina. Logo, devemos filtrar estes pa\u00edses.\nsubset2 = dfm_2807[dfm_2807['Regional indicator'] == 'Latin America and Caribbean'] # Obtendo os pa\u00edses da Am\u00e9rica Latina\nsubset2 = subset2[subset2['Country'].isin(['Brazil','Argentina','Uruguay',\\\n                                           'Chile','Colombia','Peru',\\\n                                           'Ecuador','Paraguay','Venezuela',\\\n                                           'Bolivia'])] # Restringindo aos pa\u00edses da Am\u00e9rica do Sul\nsubset2 = subset2.sort_values(by='Ladder score', ascending=False) # Ordenando os dados do maior para o menor Ladder Score\nprint('Pa\u00edses mais felizes na Am\u00e9rica do Sul:')\nprint(subset2.reset_index()[['Country','Ladder score']]) # Mostrando o resultado, ordenado do mais feliz para o menos Feliz","6f274cd0":"# Comparando a Felicidade com a Corrup\u00e7\u00e3o\nsubset3 = dfm_2807[['Country','Ladder score','Perceptions of corruption']] # Retirando os dados de interesse\nsubset3.plot(kind='scatter', x='Ladder score', y='Perceptions of corruption') # Plotando com o Matplotlib\n\n# Sobre o gr\u00e1fico: \u00e9 um gr\u00e1fico de duas coordenadas, que permite tra\u00e7ar curvas anal\u00edticas para encontrar uma rela\u00e7\u00e3o.","b28fc508":"# Para encontrar os pontos fora da curva:\nimport plotly.express as px\n\npx.scatter(subset3, y='Ladder score', x='Perceptions of corruption', hover_data=['Country'],\n          title = 'Rela\u00e7\u00e3o entre felicidade (eixo vertical) com a percep\u00e7\u00e3o da corrup\u00e7\u00e3o (eixo horizontal).') # PLotando um gr\u00e1fico interativo","8bdc6fb9":"print(\"Maior percep\u00e7\u00e3o de corrup\u00e7\u00e3o:\",df.iloc[df['Perceptions of corruption'].idxmax()]['Perceptions of corruption'])\ndf.iloc[df['Perceptions of corruption'].idxmax()]","ca49df33":"df[['Country','Ladder score','Perceptions of corruption']].head(10)","e91af9c0":"# Mostrar a correla\u00e7\u00e3o entre Felicidade x Corrup\u00e7\u00e3o\ndf.corrwith(df['Perceptions of corruption'],method='pearson')['Ladder score'].round(2)","84690366":"# Como visto, n\u00e3o h\u00e1 uma entrada espec\u00edfica para a Am\u00e9rica Latina. Logo, devemos filtrar estes pa\u00edses.\nsubset2 = dfm_2807[dfm_2807['Regional indicator'] == 'Latin America and Caribbean'] # Obtendo os pa\u00edses da Am\u00e9rica Latina\nsubset2 = subset2[subset2['Country'].isin(['Brazil','Argentina','Uruguay',\\\n                                           'Chile','Colombia','Peru',\\\n                                           'Ecuador','Paraguay','Venezuela',\\\n                                           'Bolivia'])] # Restringindo aos pa\u00edses da Am\u00e9rica do Sul\nsubset2 = subset2.sort_values(by='Perceptions of corruption', ascending=False) # Ordenando os dados do maior para o menor percep\u00e7\u00e3o.\nprint('Pa\u00edses com maior percep\u00e7\u00e3o da corrup\u00e7\u00e3o na Am\u00e9rica do Sul:')\nsubset2.reset_index()[['Country','Perceptions of corruption','Ladder score']]","280624f9":"# Setup dos Dados\nVamos transformar os dados em DataFrames do Pandas. Al\u00e9m disso, vamos renomear algumas colunas para ficar mais f\u00e1cil e nos DataFrames df_1 e df_2, vamos usar os nomes dos pa\u00edses como os \u00edndices do DataFrame.","06d7ebe6":"# Projeto Don - Desafio Felicidade 2021\nUma vis\u00e3o geral mundial e uma an\u00e1lise um pouco mais profunda sobre o Brasil no Relat\u00f3rio de Felicidade Mundial de 2021.  \nFAQ: https:\/\/worldhappiness.report\/faq\/  \n\nProjetos que nos inspiraram:\n* https:\/\/www.kaggle.com\/joshuaswords\/awesome-eda-2021-happiness-population\/ \n* https:\/\/www.kaggle.com\/ajaypalsinghlo\/world-happiness-report-2021\n\n## Introdu\u00e7\u00e3o\n\nA principal inten\u00e7\u00e3o deste projeto \u00e9 aprender mais sobre a \u00e1rea de Ci\u00eancia de dados e testar nosso conhecimento atrav\u00e9s de publica\u00e7\u00f5es e troca de conhecimento. O tema desse projeto \u00e9 como est\u00e1 o mundo em rela\u00e7\u00e3o a felicidade e, em espec\u00edfico, como o Brasil est\u00e1 neste cen\u00e1rio em rela\u00e7\u00e3o aos outros. O _notebook_ baseia-se no Relat\u00f3rio de Felicidade Mundial de 2021 e dos anos anteriores."}}