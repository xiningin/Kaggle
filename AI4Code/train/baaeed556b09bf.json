{"cell_type":{"fdbb7984":"code","7e5711d9":"code","cf282f08":"code","ccbb5a8e":"code","2aad53c3":"code","f102fb1e":"markdown"},"source":{"fdbb7984":"# This Python 3 environment comes with many helpful analytics libraries installed\n# It is defined by the kaggle\/python Docker image: https:\/\/github.com\/kaggle\/docker-python\n# For example, here's several helpful packages to load\n\nimport numpy as np # linear algebra\nimport pandas as pd # data processing, CSV file I\/O (e.g. pd.read_csv)\nimport io\nimport requests\nimport datetime as dt\nimport matplotlib.pyplot as plt\n\nimport datetime\nimport matplotlib.dates as mdates\n\n# Input data files are available in the read-only \"..\/input\/\" directory\n# For example, running this (by clicking run or pressing Shift+Enter) will list all files under the input directory\n\nimport os\nfor dirname, _, filenames in os.walk('\/kaggle\/input'):\n    for filename in filenames:\n        print(os.path.join(dirname, filename))\n\n# You can write up to 5GB to the current directory (\/kaggle\/working\/) that gets preserved as output when you create a version using \"Save & Run All\" \n# You can also write temporary files to \/kaggle\/temp\/, but they won't be saved outside of the current session","7e5711d9":"# Read the meta data from NY Times Github page\nurl=\"https:\/\/raw.githubusercontent.com\/nytimes\/covid-19-data\/master\/us-counties.csv\"\ns=requests.get(url).content\ndf_Meta=pd.read_csv(io.StringIO(s.decode('utf-8')))","cf282f08":"window1=7\nlag_window1=3\nwindow2=14\nlag_window2=7\ndf_MP=df_Meta.loc[(df_Meta[\"county\"]==\"New York City\")]\ndf_MP=df_Meta.loc[(df_Meta[\"county\"]==\"Multnomah\")]\n\ndf_MP[\"cases_MA\"+'_{}'.format(window1)]=df_MP[\"cases\"].rolling(window1).mean()\ndf_MP[\"cases_MA\"+'_{}'.format(window1)+\"_Diff\"]=df_MP[\"cases\"].diff().rolling(window1).mean()\ndf_MP[\"cases_MA\"+'_{}'.format(window1)+\"_Diff\"]=df_MP[\"cases_MA\"+'_{}'.format(window1)+\"_Diff\"].shift(-lag_window1)\n\n\ndf_MP[\"cases_MA\"+'_{}'.format(window2)]=df_MP[\"cases\"].rolling(window2).mean()\ndf_MP[\"cases_MA\"+'_{}'.format(window2)+\"_Diff\"]=df_MP[\"cases\"].diff().rolling(window2).mean()\ndf_MP[\"cases_MA\"+'_{}'.format(window2)+\"_Diff\"]=df_MP[\"cases_MA\"+'_{}'.format(window2)+\"_Diff\"].shift(-lag_window2)\n\ndf_MP['date'] = pd.to_datetime(df_MP['date'], errors='coerce')\ndf_MP['time'] = df_MP['date'].dt.strftime('%m\/%d')\ndf_MP.head(5)","ccbb5a8e":"plt.figure(figsize=(20,10)) \nplt.xticks(np.arange(0, df_MP.date.shape[0]+1, 7.0))\nplt.plot(df_MP.time.iloc[50:], df_MP[\"cases_MA\"+'_{}'.format(window1)+\"_Diff\"].iloc[50:],label='Minus '+'{}'.format(lag_window1)+'-day lagged time derivative of '+'{}'.format(window1)+' day moving average of Confirmed cases')\nplt.plot(df_MP.time.iloc[50:], df_MP[\"cases_MA\"+'_{}'.format(window2)+\"_Diff\"].iloc[50:],label='Minus '+'{}'.format(lag_window2)+'-day lagged time derivative of '+'{}'.format(window2)+' day moving average of Confirmed cases')\n#plt.axvline(x=\"03\/26\",color=\"b\",linewidth=0.5,linestyle=\"-.\",label='03\/26 Minnesota Stay at home order announced')\nplt.axvline(x=\"06\/15\",color=\"k\",linewidth=0.5,linestyle=\"-.\",label='06\/15 Phase 1 reopening')\nplt.axvline(x=\"05\/25\",color=\"r\",linewidth=0.5,linestyle=\"-.\",label='05\/25 George Floyd died')\nplt.axvline(x=\"06\/22\",color=\"k\",linewidth=0.75,linestyle=\"--\",label='06\/22 Phase 2 reopening')\nplt.ylabel('Time derivative of confirmed cases',fontsize=16)\nplt.title('Lagged moving averaged of New York City time derivative confirmed cases',fontsize=16)\nplt.legend(loc=2, prop={'size': 16})","2aad53c3":"df_Meta.loc[(df_Meta[\"county\"]==\"Multnomah\")]","f102fb1e":"### Did BLM protests cause a spike in the confirmed COVID-19 cases in Minneapolis?\nTo answer the above question in this notebook, the daily confirmed cases data is imported from NY times' Github page (a database that is updated daily) and some data analytics is apllied to the combined Hennepin and Ramsey County's confirmed case data. It is shown that: while the protests have minor effects on the spreading of the virus and the minor rising of the number of confirmed cases, the phase 1 and 2 of the reopening was the major factor behind the current spike.\n\n# **The approach:**\n\nSince the Sars-Cov-2 virus has an incubation period of 5-14 days, two different windows of 7 and 14 days are considered in this work. The 7 and 14-day moving average plots are lagged for -3 and -7 days, respectively, to show the effect of current events on future reported cases. Note that an n-sample moving average delays the data by (n-1)\/2 samples."}}