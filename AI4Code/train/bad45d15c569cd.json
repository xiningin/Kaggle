{"cell_type":{"baf94045":"code","15661cc1":"code","d1b87aea":"code","c0b48593":"code","12dc214d":"code","1fdf26a5":"code","d9a4e34e":"code","9111c069":"markdown","b13987f2":"markdown","b4b228c5":"markdown","0d90bbb0":"markdown","3a5cdb09":"markdown","91514136":"markdown","4d8a33dc":"markdown","0399a6ac":"markdown","f8586f3a":"markdown"},"source":{"baf94045":"import pandas as pd\ndata = pd.read_csv(\"..\/input\/telco-customer-churn\/WA_Fn-UseC_-Telco-Customer-Churn.csv\") ","15661cc1":"data = data[[i for i in data.columns if i not in ('customerID','Churn','tenure','MonthlyCharges', 'TotalCharges')]]\n\ndata.head()","d1b87aea":"from sklearn import preprocessing\n\nlabel = preprocessing.LabelEncoder()\ndata_encoded = pd.DataFrame() \n\nfor i in data.columns :\n  data_encoded[i]=label.fit_transform(data[i])","c0b48593":"data_encoded.head()","12dc214d":"from scipy.stats import chi2_contingency\nimport numpy as np\n\n\n\n\ndef cramers_V(var1,var2) :\n  crosstab =np.array(pd.crosstab(var1,var2, rownames=None, colnames=None)) # Cross table building\n  stat = chi2_contingency(crosstab)[0] # Keeping of the test statistic of the Chi2 test\n  obs = np.sum(crosstab) # Number of observations\n  mini = min(crosstab.shape)-1 # Take the minimum value between the columns and the rows of the cross table\n  return (stat\/(obs*mini))","1fdf26a5":"rows= []\n\nfor var1 in data_encoded:\n  col = []\n  for var2 in data_encoded :\n    cramers =cramers_V(data_encoded[var1], data_encoded[var2]) # Cramer's V test\n    col.append(round(cramers,2)) # Keeping of the rounded value of the Cramer's V  \n  rows.append(col)\n  \ncramers_results = np.array(rows)\ndf = pd.DataFrame(cramers_results, columns = data_encoded.columns, index =data_encoded.columns)\n\n\n\ndf","d9a4e34e":"import seaborn as sns\nimport matplotlib.pyplot as plt\n\n\n\nmask = np.zeros_like(df, dtype=np.bool)\nmask[np.triu_indices_from(mask)] = True\n\n\n\n\nwith sns.axes_style(\"white\"):\n  ax = sns.heatmap(df, mask=mask,vmin=0., vmax=1, square=True)\n\nplt.show()\n","9111c069":"**Label encoding**","b13987f2":"Source : https:\/\/www.kaggle.com\/blastchar\/telco-customer-churn","b4b228c5":"**Keeping of categorical features**","0d90bbb0":"# Cramer's V correlation matrix ","3a5cdb09":"**Building of the Cramer's V function**","91514136":"**Building of the matrix**","4d8a33dc":"We will see here how to create a matrix of correlation for categorical features with the Cramer's V","0399a6ac":"**Add a heatmap to the matrix**","f8586f3a":"**Dataset import**"}}