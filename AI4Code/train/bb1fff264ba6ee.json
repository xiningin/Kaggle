{"cell_type":{"1bfc7970":"code","f3028d2c":"code","c4694644":"code","fc2e1bb3":"code","98fc14a1":"code","9df0a30e":"code","2f4d53d9":"markdown"},"source":{"1bfc7970":"%matplotlib notebook\nimport matplotlib.pyplot as plt\nimport matplotlib\n\nimport numpy as np\nimport pandas as pd\npd.set_option('display.max_rows', 500)\npd.set_option('display.max_columns', 100)\npd.set_option('max_colwidth', 120)\n\nimport warnings\nwarnings.filterwarnings(\"ignore\", message=\"More than 20 figures have been opened\")\n\nimport datetime,itertools","f3028d2c":"dataTemp = '..\/input\/data-science-bowl-2019\/{}.csv'\ntrain             = pd.read_csv(dataTemp.format('train'))\ntrain_labels      = pd.read_csv(dataTemp.format('train_labels'))\ntrain = train[train.installation_id.isin(train_labels.installation_id.values)].copy()","c4694644":"train.timestamp = pd.to_datetime(train.timestamp).dt.tz_localize(None)","fc2e1bb3":"alldf = train.sort_values('timestamp')\nalldf = alldf.iloc[::100].copy()","98fc14a1":"np.random.seed(50)\nids = np.random.choice(train.installation_id.unique(),size=50,replace=False)\ntrain = train[train.installation_id.isin(ids)].copy()","9df0a30e":"day = 24 * 3600\nfor iid,df in itertools.chain(train.groupby('installation_id'), [('all',alldf)]):\n    \n    \n\n        t0 = df.timestamp.min()\n\n        timeSincet0 = (df.timestamp - datetime.datetime(t0.year,t0.month,t0.day)).dt.total_seconds().values\n        assert all(np.diff(timeSincet0) >=0)\n\n        def plotOnCircles(v,*args,**kwargs):\n            r = v\/timeSincet0[-1]\n            plt.plot(r * np.cos(v\/day*2*np.pi),r * np.sin(v\/day*2*np.pi),*args,**kwargs)\n\n\n        plt.figure(figsize=(10,10))\n\n        plt.axvline(0,color='y',alpha=0.2)\n        plt.axhline(0,color='y',alpha=0.2)\n\n\n        plotOnCircles(np.linspace(0,timeSincet0[-1],10000),'k-',alpha=0.3)\n        \n        for t,c in zip(['Clip', 'Activity', 'Game', 'Assessment'],['y','c','g','r']):\n            plotOnCircles(timeSincet0[(df.type==t).values],c+'o',alpha=0.3,label=t,ms=10)\n\n        for o in range(24):\n            plt.text(1.05 * np.cos(o\/24.*np.pi*2),1.05 * np.sin(o\/24.*np.pi*2),str(o))\n\n        plt.xlim(-1.1,1.1)\n        plt.ylim(-1.1,1.1)\n        plt.gca().set_aspect('equal')\n        plt.axis('off')\n        plt.title(str(iid))\n        plt.legend()\n","2f4d53d9":"I visualize when kids play\n- every 24 hours of a day is represented by a circle\n- I don't think I find a lot from the plots\n\nPlease let me know if anything is wrong."}}