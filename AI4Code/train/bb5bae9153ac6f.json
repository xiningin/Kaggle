{"cell_type":{"d920e3fe":"code","17d163fe":"code","80e3191e":"code","c0505467":"code","69802380":"code","0b874487":"code","40d7ea7d":"code","11077722":"code","ef95d7ea":"code","ff4b9937":"code","5fd5d3c2":"code","91a4aab0":"code","e6228643":"code","380299d3":"code","d878aa3a":"code","13a30833":"code","956fb9fe":"code","97a8ef0b":"markdown","1dc13f30":"markdown","c443b94c":"markdown","3b99c142":"markdown","3736bc10":"markdown","0cd5272c":"markdown","1fc981bc":"markdown","b3abc240":"markdown","979805ce":"markdown","5e643579":"markdown","26c561a0":"markdown","446df734":"markdown","b0124edb":"markdown"},"source":{"d920e3fe":"\nimport matplotlib.pyplot as plt\nimport numpy as np # linear algebra\nimport pandas as pd # data processing, CSV file I\/O (e.g. pd.read_csv)\nimport seaborn as sns\n\n# Input data files are available in the \"..\/input\/\" directory.\n# For example, running this (by clicking run or pressing Shift+Enter) will list all files under the input directory\n","17d163fe":"df= pd.read_csv('\/kaggle\/input\/german-election-2017\/2017_german_election_overall.csv')\nparty = pd.read_csv('\/kaggle\/input\/german-election-2017\/2017_german_election_party.csv')\nprint(df.shape,party.shape)","80e3191e":"df['vote_on_voter']=df['total_votes']\/df['registered.voters']\nplt.figure(figsize=(10,16))\nsns.boxenplot(y='state',x = 'vote_on_voter',data= df,palette='Set1')\nplt.axvline(x =0.76,linewidth =2.5, linestyle ='--',color = 'grey')\nplt.text(0.77,1,'The median rate:0.76',color ='black',fontsize = 14)","c0505467":"# find the top5 supported parties\nparty.groupby(['party'])['votes_first_vote'].sum().sort_values(ascending =False)[:5]","69802380":"party[party['party'] == 'Freie.Demokratische.Partei']['votes_first_vote'].describe()","0b874487":"tmp=party.loc[(party['party']=='Christlich.Demokratische.Union.Deutschlands') |(party['party']=='Sozialdemokratische.Partei.Deutschlands')\n             |(party['party']=='Alternative.f\u00fcr.Deutschland')|(party['party']=='DIE.LINKE')|(party['party']=='B\u00dcNDNIS.90.DIE.GR\u00dcNEN') | (party['party']=='Freie.Demokratische.Partei') ]\n\ng = sns.FacetGrid(tmp, col=\"state\", col_wrap=4, height=3)\ng.map(sns.barplot, \"votes_first_vote\", \"party\",  palette ='GnBu_d', ci=None);","40d7ea7d":"#load and read geo data\nimport geopandas as gpd\nshapefile = gpd.read_file(\"\/kaggle\/input\/german-election-2017\/Geometrie_Wahlkreise_19DBT_VG250_geo.shp\")\n","11077722":"shapefile.rename(columns = {'LAND_NAME':'state'},inplace =True)\n#shapefile","ef95d7ea":"merged = shapefile.set_index('state').join(tmp.set_index('state'))\nmerged = merged.reset_index()\nmerged.head(5)","ff4b9937":"fig, ax = plt.subplots(1, figsize=(16, 15))\nax.axis('off')\nax.set_title(' Distribution of CDU supporters ', fontdict={'fontsize': '20', 'fontweight' : '8'})\n\ncolor = 'Greens'\nvmin, vmax = 10000, 100000\nsm = plt.cm.ScalarMappable(cmap=color, norm=plt.Normalize(vmin=vmin, vmax=vmax))\nsm._A = []\ncbar = fig.colorbar(sm)\ncbar.ax.tick_params(labelsize=12)\nCDU = merged[merged['party'] =='Christlich.Demokratische.Union.Deutschlands']\n\nCDU.plot('votes_first_vote', cmap=color, linewidth=0.8, ax=ax, edgecolor='0.8', figsize=(16,15))\n","5fd5d3c2":"fig, ax = plt.subplots(1, figsize=(16, 16))\nax.axis('off')\nax.set_title('Distribution of AfD supporters', fontdict={'fontsize': '20', 'fontweight' : '8'})\n\ncolor = 'Reds'\nvmin, vmax = 10000, 100000\nsm = plt.cm.ScalarMappable(cmap=color, norm=plt.Normalize(vmin=vmin, vmax=vmax))\nsm._A = []\ncbar = fig.colorbar(sm)\ncbar.ax.tick_params(labelsize=12)\nAFD= merged[merged['party'] =='Alternative.f\u00fcr.Deutschland']\n\nCDU.plot('votes_first_vote', cmap=color, linewidth=0.8, ax=ax, edgecolor='0.8', figsize=(16,16))","91a4aab0":"df= df[df['vote_on_voter']>0]\nmerged_df = shapefile.set_index('state').join(df.set_index('state'))\n#merged_df['vote_on_voter'] =df['vote_on_voter']\nmerged_df = merged_df.reset_index()\nmerged_df.columns","e6228643":"# just curious about FDP\nfig, ax = plt.subplots(1, figsize=(16, 16))\nax.axis('off')\nax.set_title('Distribution of FDP supporters', fontdict={'fontsize': '20', 'fontweight' : '8'})\n\ncolor = 'Purples'\nvmin, vmax = 3000, 30000\nsm = plt.cm.ScalarMappable(cmap=color, norm=plt.Normalize(vmin=vmin, vmax=vmax))\nsm._A = []\ncbar = fig.colorbar(sm)\ncbar.ax.tick_params(labelsize=12)\nFDP= merged[merged['party'] =='Freie.Demokratische.Partei']\n\nFDP.plot('votes_first_vote', cmap=color, linewidth=0.8, ax=ax, edgecolor='0.8', figsize=(16,16))","380299d3":"fig, ax = plt.subplots(1, figsize=(16, 16))\nax.axis('off')\nax.set_title('voter popularity', fontdict={'fontsize': '20', 'fontweight' : '8'})\n\ncolor = 'Blues'\nvmin, vmax = 150000, 260000\nsm = plt.cm.ScalarMappable(cmap=color, norm=plt.Normalize(vmin=vmin, vmax=vmax))\nsm._A = []\ncbar = fig.colorbar(sm)\ncbar.ax.tick_params(labelsize=12)\n\nmerged_df.plot('registered.voters', cmap=color, linewidth=0.8, ax=ax, edgecolor='0.8', figsize=(16,16))","d878aa3a":"merged_1 = shapefile.set_index('state').join(party.set_index('state'))\nmerged_1 = merged_1.reset_index()\nmerged.head(5)","13a30833":"Bayern = merged_1[merged_1['state']== 'Bayern']\nBayern.groupby(['party'])['votes_first_vote'].sum().sort_values(ascending = False)[:10]","956fb9fe":"Bayern_CSU = Bayern[Bayern.party == 'Christlich.Soziale.Union.in.Bayern.e.V.']\nBayern_SPD = Bayern[Bayern.party == 'Sozialdemokratische.Partei.Deutschlands']\nBayern_AFD = Bayern[Bayern.party == 'Alternative.f\u00fcr.Deutschland']\nplt.figure(figsize=(10,16))\nsns.barplot(y='area_name',x = 'votes_first_vote',data= Bayern_CSU,color = 'firebrick',label = 'Bayern_CSU')\nsns.barplot(y='area_name',x = 'votes_first_vote',data= Bayern_SPD,color = 'yellow',label = 'Bayern_SPD')\nsns.barplot(y='area_name',x = 'votes_first_vote',data= Bayern_AFD,color = 'blue',alpha = 0.8,label = 'Bayern_ARD')\nplt.legend()\n","97a8ef0b":"### I'm curious of several questions:###\n* where are the registered voters?\n* How much do they like voting?\n* Which parties are mainstream?\n* Which area supports which party  more?","1dc13f30":"### 2. The supporting of mainstream parties in 16 states","c443b94c":"**People said AFD is a far-right party and they dislike it. Human being may lie but the vote does not.**","3b99c142":"### 3. Distribution of CDU Supporter ","3736bc10":"### 6. Distribution of Registered Voters","0cd5272c":"\n### 5. Distribution of FDP supporters","1fc981bc":"![](https:\/\/www.europeanea.org\/wp-content\/uploads\/2017\/09\/German-flag_voting.jpg)","b3abc240":"**Bayern seems have the most registered-voter. Which party do they support?**","979805ce":"# Germany Election in 2017","5e643579":"**The End**","26c561a0":"### 4. Distribution of AFD Supporter ","446df734":"### 1. The voting rate in 16 states","b0124edb":"### 7.What parties do Bayern people support?"}}