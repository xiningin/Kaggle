{"cell_type":{"14575c73":"code","84987b86":"code","942b6bee":"code","0fa0370f":"code","48fd24ea":"code","92c34274":"code","a4a6f1da":"code","f399b5bc":"code","e738be14":"code","8ccc227a":"code","b722a2c1":"code","fcfabcc4":"code","9c75aa6d":"code","8a993d1c":"code","682fcc5e":"code","64edd5e5":"code","5a341187":"code","4cbaebc5":"code","c699fe37":"code","f51a6e40":"code","8c339219":"code","5551876c":"code","f1e1250e":"code","7961743c":"code","9b4b4bb4":"code","e10b2ab4":"code","380d11e0":"code","7811c9a7":"code","611c04ab":"code","75460c25":"code","9a62e938":"code","13b7c72b":"code","197d6a08":"code","84867678":"code","3b92ee03":"code","e0aeadc5":"markdown","1b6df45a":"markdown","748110b5":"markdown","3ac69969":"markdown","430c957f":"markdown","85f95daf":"markdown","68d02354":"markdown","e84ce79c":"markdown","b5ee6e06":"markdown","7fe2e196":"markdown","4d3c2c15":"markdown","bfc2870c":"markdown","a895efba":"markdown"},"source":{"14575c73":"import pandas as pd","84987b86":"import plotly.express as px","942b6bee":"import numpy as np","0fa0370f":"import plotly.figure_factory as ff","48fd24ea":"df=pd.read_csv('..\/input\/starbucks-customer-retention-malaysia-survey\/Starbucks satisfactory survey.csv')","92c34274":"df.rename(columns={\"1. Your Gender\": 'Gender',\n                                \"2. Your Age\": \"ageGroup\",\n                                \"3. Are you currently....?\":\"status\",\n                                \"4. What is your annual income?\":\"annualIncome\",\n                                \"5. How often do you visit Starbucks?\":\"visitFrequency\",\n                                \"6. How do you usually enjoy Starbucks?\":\"Method\",\n                                \"7. How much time do you normally  spend during your visit?\":\"timeCost\",\n                                \"8. The nearest Starbucks's outlet to you is...?\":\"location\",\n                                \"9. Do you have Starbucks membership card?\":\"membership\",\n                                \"10. What do you most frequently purchase at Starbucks?\":\"mostPurchase\",\n                                \"11. On average, how much would you spend at Starbucks per visit?\":\"moneySpend\",},inplace=True)","a4a6f1da":"df.columns","f399b5bc":"tempdf=df.groupby('ageGroup').size().reset_index(name='count').sort_values('count',ascending=False)","e738be14":"fig=px.bar(tempdf,x='ageGroup',y='count',title=\"Visits by age\",labels={'ageGroup':\"Age Group\",'count':\"Number of visits\"},text='count',height=500,width=600)\nfig.update_traces(textposition='outside')\nfig.update_layout(uniformtext_minsize=8, uniformtext_mode='hide')\nfig.show()","8ccc227a":"pur_df=df['mostPurchase'].value_counts().reset_index().rename(columns={\"index\":\"Most Purchased Item\",'mostPurchase':\"Count\"}).sort_values('Count',ascending=False).head(5)","b722a2c1":"fig=px.bar(pur_df,y='Most Purchased Item',x='Count',title=\"Most purchased items\",text='Count', orientation='h')\nfig.update_traces(textposition='outside')\n# fig.update_layout(uniformtext_minsize=8, uniformtext_mode='hide')\nfig.show()","fcfabcc4":"meth_df=df['Method'].value_counts().reset_index().rename(columns={\"index\":\"Method\",'Method':\"Count\"}).sort_values('Count',ascending=False).head(3)","9c75aa6d":"fig=px.bar(meth_df,x='Method',y='Count',title=\"How customers enjoy starbucks\",text='Count',height=500,width=500)\nfig.update_traces(textposition='outside')\n# fig.update_layout(uniformtext_minsize=8, uniformtext_mode='hide')\nfig.show()","8a993d1c":"status_df=df['status'].value_counts().reset_index().rename(columns={\"index\":\"Status\",'status':\"Count\"})","682fcc5e":"fig=px.bar(status_df,y='Status',x='Count',title=\"Which group of people purchase more frequently?\",text='Count')\nfig.update_traces(textposition='outside')\n# fig.update_layout(uniformtext_minsize=8, uniformtext_mode='hide')\nfig.show()","64edd5e5":"mem_df=df['membership'].value_counts().reset_index().rename(columns={\"index\":\"Have membership ?\",'membership':\"status\"}).sort_values('Have membership ?',ascending=False)\n","5a341187":"fig = ff.create_table(mem_df)\nfig.show()","4cbaebc5":"ann_df=df['annualIncome'].value_counts().reset_index().rename(columns={\"index\":\"Annual Income\",'annualIncome':\"count\"})\n","c699fe37":"fig=px.bar(ann_df,y='Annual Income',x='count',title=\"Annual Income of people purchasing at starbucks\",text='count')\nfig.update_traces(textposition='outside')\n# fig.update_layout(uniformtext_minsize=8, uniformtext_mode='hide')\nfig.show()","f51a6e40":"mem_pur_df=df.groupby(['mostPurchase','membership'],as_index=False).size().rename(columns={'size':\"count\"}).sort_values('count',ascending=False).head(10)","8c339219":"fig=px.bar(mem_pur_df,x='count',y='mostPurchase',title=\"Purchasing with & without membership\",text='count',color='membership',barmode='group')\nfig.update_traces(textposition='outside')\nfig.show()","5551876c":"mem_met_df=df.groupby(['Method','membership'],as_index=False).size().rename(columns={'size':\"count\"}).sort_values('count',ascending=False).head(5)","f1e1250e":"fig=px.bar(mem_met_df,y='count',x='Method',title=\"Membership vs Method of purchase\",text='count',color='membership',barmode='group',height=540,width=500)\nfig.update_traces(textposition='outside')\nfig.show()","7961743c":"df['moneySpend']=df['moneySpend'].replace({'Zero':0,'Less than RM20':10,'Around RM20 - RM40':30,'More than RM40':50})\n","9b4b4bb4":"pur_mon_df=df.groupby(['mostPurchase']).sum()['moneySpend'].reset_index(name='total').sort_values('total',ascending=False).head(5)\n\n# .size().rename(columns={'size':\"count\"}).sort_values('count',ascending=False).head(5)","e10b2ab4":"fig=px.bar(pur_mon_df,y='mostPurchase',x='total',title=\"Top 5 revenue foods\",text='total')\nfig.update_traces(textposition='outside')\nfig.update_xaxes(tickprefix=\"RM\")\nfig.show()","380d11e0":"mem_mon_df=df.groupby(['membership']).sum()['moneySpend'].reset_index(name='total')","7811c9a7":"fig=px.bar(mem_mon_df,y='total',x='membership',title=\"Revenue with & without membership\",text='total',color='membership',height=500,width=500)\nfig.update_traces(textposition='outside')\nfig.update_yaxes(tickprefix=\"RM\")\nfig.show()","611c04ab":"df['timeCost']=df['timeCost'].replace({'Between 2 hours to 3 hours':np.round(np.random.uniform(2,3),2),'Below 30 minutes':np.round(np.random.uniform(0,0.5),2),'More than 3 hours':np.round(np.random.uniform(3,6),2),'Between 30 minutes to 1 hour':np.round(np.random.uniform(0.5,2)),'Between 1 hour to 2 hours':np.round(np.random.uniform(1,2),2)}).reset_index()","75460c25":"mean_group_df=df.groupby('status')['timeCost'].mean().reset_index(name='total time')\nmean_group_df['total time']=mean_group_df['total time'].round()","9a62e938":"fig=px.bar(mean_group_df,y='total time',x='status',title=\"Average time spent by different groups\",text='total time',color='status',height=600,width=600)\nfig.update_traces(textposition='outside')\nfig.update_yaxes(ticksuffix=\" Hours\")\nfig.show()","13b7c72b":"vis_mem_df=df.groupby(['membership','visitFrequency']).size().reset_index(name='count').sort_values('count',ascending=False\n                                                                                                   )","197d6a08":"fig=px.bar(vis_mem_df,y='count',x='visitFrequency',title=\"Membership vs visit frequency\",text='count',color='membership',barmode='group',height=540,width=500)\nfig.update_traces(textposition='outside')\nfig.show()","84867678":"inc_prod_df=df.groupby(['annualIncome','mostPurchase']).size().reset_index(name='count').sort_values('count',ascending=False\n                                                                                                   ).head(10)","3b92ee03":"fig=px.bar(inc_prod_df,x='count',y='mostPurchase',title=\"Annual Income vs Products\",labels={'mostPurchase':'Products','count':'Total'},text='count',color='annualIncome',barmode='group')\nfig.update_traces(textposition='outside')\nfig.show()","e0aeadc5":"# Does having a membership card makes any difference","1b6df45a":"# How many customers have membership card","748110b5":"# How customers enjoy starbucks","3ac69969":"# Most purchased item","430c957f":"# Which foods contibute to more revenue.?","85f95daf":"# Visits by age","68d02354":"# Do people with membership card visiti more often than others.","e84ce79c":"# Mean time of groups visting the starbucks","b5ee6e06":"# Does having a membership card affects revenue.?","7fe2e196":"# Membership vs Method","4d3c2c15":"# Which group of people purchase more frequently?","bfc2870c":"# Annual Income vs Products purchased.","a895efba":"\n# Annual Income of people who purchase at starbucks"}}