{"cell_type":{"d953ddb7":"code","69511899":"code","ae44fb66":"code","5a27b854":"code","d3205971":"markdown","64250ee3":"markdown","7203bd8e":"markdown"},"source":{"d953ddb7":"#Libraries Needed\nimport pandas as pd\n\n#Settings to display pandas\npd.set_option('display.max_columns', None)\n\n#Some basic set up\nbase_path = \"\/kaggle\/input\/uncover\/UNCOVER\/\"\n\n#Using the Coders Against COVID as example\nCAC_path = base_path + \"coders_against_covid\/\"\nCAC_file = CAC_path + \"crowd-sourced-covid-19-testing-locations.csv\"\nCAC_df = pd.read_csv(CAC_file)\n#Get one row as example\nCAC_df.head(1)","69511899":"import folium\nfrom folium import plugins\n\ndef simple_folium(df:pd.DataFrame, lat_col:str, lon_col:str, text_cols:list, map_name:str):\n    \"\"\"\n    Descrption\n    ----------\n        Returns a simple Folium HeatMap with Markers\n    ----------\n    Parameters\n    ----------\n        df : padnas DataFrame, required\n            The DataFrane with the data to map\n        lat_col : str, required\n            The name of the column with latitude\n        lon_col : str, required\n            The name of the column with longitude\n        test_cols: list, optional\n            A list with the names of the columns to print for each marker\n\n    \"\"\"\n    #Preprocess\n    #Drop rows that do not have lat\/lon\n    df = df[df[lat_col].notnull() & df[lon_col].notnull()]\n\n    # Convert lat\/lon to (n, 2) nd-array format for heatmap\n    # Then send to list\n    df_locs = list(df[[lat_col, lon_col]].values)\n\n    # Add the location name to the markers\n    text_cols = [\"location_name\", \"location_contact_url_main\",\"location_address_street\"]\n    text_feature_list = list(zip(*[df[col] for col in text_cols]))\n    text_formated = []\n    for text in text_feature_list:\n        text = [str(feat) for feat in text]\n        text_formated.append(\"<br>\".join(text))\n    marker_info = text_formated\n\n    #Set up folium map\n    fol_map = folium.Map([41.8781, -87.6298], zoom_start=4)\n\n    # plot heatmap\n    heat_map = plugins.HeatMap(df_locs, name=map_name)\n    fol_map.add_child(heat_map)\n\n    # plot markers\n    markers = plugins.MarkerCluster(locations = df_locs, popups = marker_info, name=\"Testing Site\")\n    fol_map.add_child(markers)\n\n    #Add Layer Control\n    folium.LayerControl().add_to(fol_map)\n\n    return fol_map\n\nsimple_folium(CAC_df, \"lat\", \"lng\", [\"location_name\",\"location_address_street\"], \"COVID Testing Sites\")","ae44fb66":"from simple_folium import simple_folium\nhelp(simple_folium)","5a27b854":"simple_folium(df=CAC_df.head(100), lat_col=\"lat\", lon_col=\"lng\", \n              text_cols=[\"location_name\",\"location_address_street\"], \n              map_name=\"COVID Testing Sites\")","d3205971":"# Load simple_folium from utility\nThis code is also available as a [Kaggle Utility Script.](https:\/\/www.kaggle.com\/product-feedback\/91185)\nIt can be loaded form url under File->Add Utility Script\nUrl: https:\/\/www.kaggle.com\/dannellyz\/simple-folium\/","64250ee3":"## Simple Folium method for mapping","7203bd8e":"# \u046a Start Here: Simple Folium Heatmap for Geo-Data\nThis notebook is the first in a series trying to help those looking at the data for the first time with tools and Exploratory Data Analysis on each of the dataset.\n\n## Exploring the Coders Against COVID Data\nThis data maps current testing sites with Lat\/Lon and has info on the sites."}}