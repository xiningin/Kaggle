{"cell_type":{"9dee2dd5":"code","d945c52b":"code","3f7efe38":"code","3292191e":"code","f9afd3a5":"code","9e5c182d":"code","58058746":"code","0e21cc22":"code","ac3b763e":"code","8a49db96":"code","8499ef44":"code","bac002cb":"code","76c3d03b":"code","a3cf925a":"code","4bae3ae5":"code","e9483944":"code","940f3775":"code","95626afc":"markdown","7157f95f":"markdown","b6c38f19":"markdown","b528b98e":"markdown","0bc4b425":"markdown","5d3ffc40":"markdown","3577d4af":"markdown","a968028b":"markdown","bfa1b19b":"markdown","2d377433":"markdown","bdc6d45f":"markdown","f18de084":"markdown","de7320a6":"markdown"},"source":{"9dee2dd5":"import pandas as pd\nimport numpy as np\nimport matplotlib.pyplot as plt\nimport seaborn as sns","d945c52b":"survey=pd.read_excel('..\/input\/sample-survey-bihar-election-2021\/Sample Survey.xlsx',sheet_name='Data')\nsurvey.head()","3f7efe38":"survey['collection_date'].value_counts()","3292191e":"survey['age'].replace('24ko',24,inplace=True)\nsurvey['age']= survey['age'].astype('int')\nprint('There are {} % of people in survey less than age 45'.format(len(survey[survey['age']<45])\/len(survey)*100))","f9afd3a5":"# ans d\nml1=list(range(18,26))\nmydict1=dict.fromkeys(ml1,'18-25')\nml2=list(range(25,41))\nmydict2=dict.fromkeys(ml2,'25-40')\nml3=list(range(40,56))\nmydict3=dict.fromkeys(ml3,'40-55')\nml4=list(range(56,100))\nmydict4=dict.fromkeys(ml4,'55+')\nmydict1.update(mydict2)\nmydict1.update(mydict3)\nmydict1.update(mydict4)\nsurvey['age_group']=survey['age'].map(mydict1)\nsurvey.head()","9e5c182d":"survey['age_group'].value_counts()","58058746":"# so age group of 25-40 has the most samples with total 3844 respondent.","0e21cc22":"x6=len(survey[(survey['Vote_Now']=='RJD')  & (survey['Past_Vote']=='RJD')])\/len(survey)\nprint('There are {} % of respondent for RJD both in Vote_Now & Past_Vote'.format(x6*100))","ac3b763e":"survey.groupby(by='collection_date')[['CM_satisfaction']].apply(lambda x:np.sum(x=='Fully Satisfied')\/len(x)*100)","8a49db96":"x8=pd.DataFrame(survey.groupby(by='collection_date')[['MLA_satisfaction']].apply(lambda x:np.sum(x=='Fully Dissatisfied')\/len(x)*100))\nx8","8499ef44":"import datetime\nx8.index.date\nx8.plot()","bac002cb":"pd.pivot_table(data=survey,index='Past_Vote',columns='Vote_Now',aggfunc='count',values='response_id')","76c3d03b":"pd.pivot_table(data=survey,index='Past_Vote',columns='Vote_Now',aggfunc='sum',values='weight')","a3cf925a":"x11=pd.DataFrame(survey.groupby(by='age_group')[['response_id']].agg('count'))\nx11","4bae3ae5":"x12=pd.DataFrame(survey.groupby(by='age_group')[['Vote_Now']].apply(lambda x:np.sum(x=='JD(U)')))\nx12","e9483944":"df13=pd.merge(x11,x12,on='age_group')\ndf13","940f3775":"### end","95626afc":"**In a similar fashion create a day-wise proportion of respondents that opted fully\ndissatisfied with their MLA. Create a line plot of the result with date on x-axis and\nproportions on the y-axis.**","7157f95f":"**Create a dataframe by performing a group by over age_group and finding the count of\ntotal samples for each age_group that opted for the JD(U) party in Vote_Now.**","b6c38f19":"**Load the dataset into a pandas dataframe. Name the variable as \u201csurvey\u201d.**","b528b98e":"**What proportion of the respondents had opted for the RJD party in both the Vote_Now\nand the Past_Vote questions.**","0bc4b425":"**Join\/Merge the two dataframes from questions 12 and 13 with the common column as\nage_group.**","5d3ffc40":"**How many samples were collected for each age-group? Which age-group had the most\nsamples.**","3577d4af":"**Create a dataframe by performing a group by over age_group and calculate the count of\ntotal samples under each age_group.**","a968028b":"**Create a new column in the dataframe \u201cage_group\u201d. This column should contain the age\ngroup the respondent belongs to. The age groups are 18-25, 25-40, 40-55 and 55+.**","bfa1b19b":"**How many samples were collected on each day.**","2d377433":"**For each day of sample collection, determine the proportion of respondents who were\nfully satisfied with the performance of the CM. So if there were a total of 1000 samples\non day 1 and 300 out of those said they were fully satisfied, then our answer for that day\nwould be 0.3.**","bdc6d45f":"**What proportion of the total respondents were aged less than 45.**","f18de084":"**Create a pivot-table (or crosstab) with index as Past_Vote, Column as Vote_Now and\ncell values as the count of samples.**","de7320a6":"**Repeat the above question with the cell values as the sum of \u201cweight\u201d.**"}}