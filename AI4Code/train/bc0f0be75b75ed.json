{"cell_type":{"fe256c5a":"code","4b3453bd":"code","68f2b211":"code","ea5c40f2":"code","113542b6":"code","20012662":"code","2c42dcda":"code","f1019cc1":"code","cfc88175":"code","2e8ecf83":"code","9fcf10b1":"code","6951131c":"code","4d261744":"code","79877531":"code","8c4ab106":"code","a9405a5a":"code","12d118c5":"code","c154ca2e":"code","e1ed12a0":"code","09faa3a2":"code","8b2570dd":"code","8c4970c3":"code","4873c8f7":"code","7b5431c7":"code","9f7fc5ba":"code","d3e98af3":"code","39bf2b49":"code","32df2a51":"code","53c0ec6d":"code","0424ef2a":"code","44302120":"code","4dbca793":"code","6cc85038":"code","c55ba49d":"code","bc89cf8f":"code","f8ab9cd4":"code","1090a31e":"code","c2ea0537":"code","27d9f428":"code","e2892661":"code","c1de2d0d":"code","bf544f42":"code","bf33ff51":"code","e81e96cd":"code","d330c52d":"code","0ceaa45c":"code","4ad98a54":"code","b426fee6":"code","a1db855a":"code","8bd14370":"code","151c0a37":"code","a40bc726":"code","be4a5340":"code","da88057e":"code","00b4e729":"code","c3a2a6cb":"markdown","889f6971":"markdown","52ab51f1":"markdown","1bc2d47a":"markdown","97d7258f":"markdown","dc39ec1c":"markdown","a11ee72a":"markdown","5f1bb309":"markdown","2c8f4cfb":"markdown","7d478a58":"markdown","871c7554":"markdown","d23d72eb":"markdown","c462d0d2":"markdown","f88c456b":"markdown","5a6f4dad":"markdown","850ba05a":"markdown","6acb07c1":"markdown","265d898a":"markdown","06cd2f53":"markdown","ec7869ad":"markdown","97cc3d35":"markdown","331a0f69":"markdown","883b098d":"markdown","6a590546":"markdown","9f78712b":"markdown","e9c36ee9":"markdown","46d9c687":"markdown","0946412c":"markdown","7f2b697d":"markdown","7f4697aa":"markdown","43d3dcd2":"markdown","20109cdd":"markdown","4d05b47a":"markdown","1e4ae562":"markdown","83b51da6":"markdown","1736b2c2":"markdown","40b0f904":"markdown","a96a420a":"markdown","15796aff":"markdown","4d3b9862":"markdown","12a17296":"markdown","69b7100b":"markdown","f67812de":"markdown","22ffdfe7":"markdown","dcd5e2c8":"markdown","30600a09":"markdown","a4fbe58d":"markdown","eb0682ad":"markdown","dab35dc6":"markdown","dbf5a88e":"markdown","e1c7cf67":"markdown","82886a2c":"markdown","0a033917":"markdown","d714715d":"markdown","20b2af19":"markdown","991f4e6b":"markdown","c10b1949":"markdown","0e82b66d":"markdown","e5cf361d":"markdown","b798fd86":"markdown","a08d099b":"markdown","4e5556bb":"markdown","39072670":"markdown","04587858":"markdown","e40a4c24":"markdown"},"source":{"fe256c5a":"import matplotlib.pyplot as plt\nimport pandas as pd\nimport numpy as np\nimport seaborn as sns\nimport warnings\nwarnings.filterwarnings('ignore')\n%matplotlib inline","4b3453bd":"df = pd.read_csv('\/kaggle\/input\/india-air-quality-data\/data.csv' , encoding='mac_roman')","68f2b211":"df.head()","ea5c40f2":"df.info()","113542b6":"missing_ratio = np.round(df.isna().sum()\/len(df)*100,2)\nmissing_ratio = pd.DataFrame(missing_ratio , columns=['Missing_Ratio'])\nmissing_ratio.sort_values('Missing_Ratio',ascending=False)","20012662":"list(df.columns)","2c42dcda":"df.drop(['stn_code','sampling_date','pm2_5','spm'] , axis=1 , inplace=True)","f1019cc1":"cat_cols = list(df.select_dtypes(include=['object']).columns)\nnum_cols = list(df.select_dtypes(exclude=['object']).columns)","cfc88175":"print('\\nNumerical Columns : ' , num_cols)\nprint('\\nCategorical Columns : ' , cat_cols)","2e8ecf83":"df['date'] = pd.to_datetime(df['date'])","9fcf10b1":"df['date'].isna().sum()","6951131c":"df = df[df['date'].isna()==False]","4d261744":"print('The number of missing values are : ',df['type'].isna().sum())","79877531":"df['type'] = df['type'].fillna('NA')","8c4ab106":"df['type'].value_counts()","a9405a5a":"res_str='Residential|RIRUO'\nind_str = 'Industrial'\nsen_str = 'Sensitive'\n\nrro_mask = df['type'].str.contains(res_str , regex=True)\nind_mask = df['type'].str.contains(ind_str)\nsen_mask = df['type'].str.contains(sen_str)","12d118c5":"df['type'][rro_mask] = 'RRO'\ndf['type'][ind_mask] = 'Industrial'\ndf['type'][sen_mask] = 'Sensitive'","c154ca2e":"df['type'].value_counts()","e1ed12a0":"print('The number of missing values are : ',df['agency'].isna().sum())","09faa3a2":"df['agency'].fillna('NA',inplace=True)","8b2570dd":"print('The number of missing values are : ',df['location_monitoring_station'].isna().sum())","8c4970c3":"df['location_monitoring_station'].fillna('NA',inplace=True)","4873c8f7":"print('The number of missing values are : ',df['location'].isna().sum())","7b5431c7":"print('The number of missing values are : ',df['state'].isna().sum())","9f7fc5ba":"num_cols","d3e98af3":"df['so2'].describe()","39bf2b49":"print('Distribution of SO2')\nfig,ax=plt.subplots(1,2,figsize=(13,4))\nsns.distplot(df['so2'].dropna() , ax=ax[0])\nsns.boxplot(df['so2'].dropna() , ax=ax[1])\n\nso2_skew = df['so2'].skew()\nplt.show()\nprint('Skewness = ',so2_skew)","32df2a51":"Q1=df['so2'].quantile(0.25)\nQ3=df['so2'].quantile(0.75)\nIQR=Q3-Q1\ndf=df[~((df['so2']<(Q1-1.5*IQR))|(df['so2']>(Q3+1.5*IQR)))]","53c0ec6d":"print('Distribution of SO2')\nsns.distplot(df['so2'].dropna())\n\nso2_skew = df['so2'].skew()\nplt.show()\nprint('Skewness = ',so2_skew)","0424ef2a":"print('The number of missing values in SO2 are : ' , df['so2'].isna().sum())","44302120":"print('Distribution of SO2')\nsns.kdeplot(df['so2'].dropna())\nplt.axvline(df['so2'].mean(), color='r')\nplt.axvline(df['so2'].median(), color='g')\n\nplt.legend(['So2','Mean','Median'])\nplt.show()","4dbca793":"df1= df.copy()\ndf2=df.copy()","6cc85038":"df1['so2'] = df1['so2'].fillna(df1['so2'].mean())","c55ba49d":"df2['so2'] = df2['so2'].fillna(method='ffill')","bc89cf8f":"print('Distribution of SO2')\n\nfig,ax=plt.subplots(1,2,figsize=(13,4))\n\nsns.kdeplot(df1['so2'] , ax=ax[0])\nax[0].axvline(df1['so2'].mean(), color='r' )\nax[0].axvline(df1['so2'].median(), color='g')\nax[0].set_title('Mean Imputation')  \nax[0].legend(['So2','Mean','Median'])\n\nsns.kdeplot(df2['so2'] , ax=ax[1])\nax[1].axvline(df2['so2'].mean(), color='r')\nax[1].axvline(df2['so2'].median(), color='g')\nax[1].set_title('Forward Fill')\nax[1].legend(['So2','Mean','Median'])\n                    \n                    \nplt.show()","f8ab9cd4":"df['so2'] = df['so2'].fillna(method='ffill')","1090a31e":"df['no2'].describe()","c2ea0537":"print('Distribution of NO2')\nfig,ax=plt.subplots(1,2,figsize=(13,4))\nsns.distplot(df['no2'].dropna() , ax=ax[0])\nsns.boxplot(df['no2'].dropna() , ax=ax[1])\nno2_skew = df['no2'].skew()\nplt.show()\nprint('Skewness = ',no2_skew)","27d9f428":"Q1=df['no2'].quantile(0.25)\nQ3=df['no2'].quantile(0.75)\nIQR=Q3-Q1\ndf=df[~((df['no2']<(Q1-1.5*IQR))|(df['no2']>(Q3+1.5*IQR)))]","e2892661":"print('Distribution of NO2')\nfig,ax=plt.subplots(1,2,figsize=(13,4))\nsns.distplot(df['no2'].dropna() , ax=ax[0])\nsns.boxplot(df['no2'].dropna() , ax=ax[1])\nno2_skew = df['no2'].skew()\nplt.show()\nprint('Skewness = ',no2_skew)","c1de2d0d":"print('The number of missing values in NO2 are : ' , df['no2'].isna().sum())","bf544f42":"print('Distribution of NO2')\nsns.kdeplot(df['no2'])\nplt.axvline(df['no2'].mean(), color='r')\nplt.axvline(df['no2'].median(), color='g')\nplt.legend(['No2','Mean','Median'])\nplt.show()","bf33ff51":"df1 = df.copy()\ndf2 = df.copy()","e81e96cd":"#Mean Imputation\ndf1['no2'] = df1['no2'].fillna(df1['no2'].mean())\n#Forward Fill\ndf2['no2'] = df2['no2'].fillna(method='ffill')","d330c52d":"print('Distribution of NO2')\n\nfig,ax=plt.subplots(1,2,figsize=(13,4))\n\nsns.kdeplot(df1['no2'] , ax=ax[0])\nax[0].axvline(df1['no2'].mean(), color='r' )\nax[0].axvline(df1['no2'].median(), color='g')\nax[0].set_title('Mean Imputation')    \nax[0].legend(['No2','Mean','Median'])\n\nsns.kdeplot(df2['no2'] , ax=ax[1])\nax[1].axvline(df2['no2'].mean(), color='r')\nax[1].axvline(df2['no2'].median(), color='g')\nax[1].set_title('Forward Fill')\nax[1].legend(['no2','Mean','Median'])\n                    \n                    \nplt.show()","0ceaa45c":"df['no2'] = df['no2'].fillna(method='ffill')","4ad98a54":"df['rspm'].describe()","b426fee6":"print('Distribution of RSPM')\nfig,ax=plt.subplots(1,2,figsize=(13,4))\nsns.distplot(df['rspm'].dropna() , ax=ax[0])\nsns.boxplot(df['rspm'].dropna() , ax=ax[1])\nplt.show()\nprint('Skewness = ',df['rspm'].skew())","a1db855a":"Q1=df['rspm'].quantile(0.25)\nQ3=df['rspm'].quantile(0.75)\nIQR=Q3-Q1\ndf=df[~((df['rspm']<(Q1-1.5*IQR))|(df['rspm']>(Q3+1.5*IQR)))]","8bd14370":"print('Distribution of RSPM')\nfig,ax=plt.subplots(1,2,figsize=(13,4))\nsns.distplot(df['rspm'].dropna() , ax=ax[0])\nsns.boxplot(df['rspm'].dropna() , ax=ax[1])\nplt.show()\nprint('Skewness = ',df['rspm'].skew())","151c0a37":"print('The number of missing values in RSPM are : ' , df['rspm'].isna().sum())","a40bc726":"df1 = df.copy()\ndf2 = df.copy()","be4a5340":"#Mean Imputation\ndf1['rspm'] = df1['rspm'].fillna(df1['rspm'].mean())\n#Forward Fill\ndf2['rspm'] = df2['rspm'].fillna(method='ffill')","da88057e":"print('Distribution of RSPM')\n\nfig,ax=plt.subplots(1,2,figsize=(13,4))\n\nsns.kdeplot(df1['rspm'] , ax=ax[0])\nax[0].axvline(df1['rspm'].mean(), color='r' )\nax[0].axvline(df1['rspm'].median(), color='g')\nax[0].set_title('Mean Imputation')    \nax[0].legend(['rspm','Mean','Median'])\n\nsns.kdeplot(df2['rspm'] , ax=ax[1])\nax[1].axvline(df2['rspm'].mean(), color='r')\nax[1].axvline(df2['rspm'].median(), color='g')\nax[1].set_title('Forward Fill')\nax[1].legend(['rspm','Mean','Median'])\n                    \n                    \nplt.show()","00b4e729":"df['rspm'] = df['rspm'].fillna(method='ffill')","c3a2a6cb":"<h5>The above information shows that the Missing Ratio is very high for some variables<br>\n    Since 'pm_2' has a Missing Ratio of 97.86% and 'spm' has a Missing Ratio of 54.48%, we have to drop the Columns,<br>\n    Other Columns can be treated","889f6971":"Missing Values","52ab51f1":"##### Treating Missing Values","1bc2d47a":"> #### Import Data","97d7258f":"The above information shows that 75% of the values are within the value 13.7 and the maximum value is 909.0<br>\nThis means that there are outliers ","dc39ec1c":"<h4> <u> 'type' - column","a11ee72a":"#### Import Libraries","5f1bb309":"The above information shows that 75% of the values are within the value 135.0 and the maximum value is 6307.03<br>\nThis means that there are outliers ","2c8f4cfb":"<h5> There are a lot of Missing Values in the data","7d478a58":"<h5> At this point we have cleaned all the Categorical Columns in the dataset ","871c7554":"Forward Fill","d23d72eb":"#### Data Description","c462d0d2":"<h5>From the above information we can see that data belonging to the same Type of Area is given different names\n<br>We need replace the different names that means the same Type of Area\n<br> The Types of Area can be categorized together as : 'Residential,Rural and Others(RRO)' , 'Industrial' , 'Sensitive' & 'NA'<br>","f88c456b":"---","5a6f4dad":"<h5>We have now categorised the 'type' column into 4 main categories","850ba05a":"The above distribution plot shows that 'no2' values are significantly Right Skewed(Positively Skewed)<br>\nand the box plot shows that there are significant amount of outliers","6acb07c1":"<h4> <u> 'location monitoring station' - column","265d898a":"<br><br>","06cd2f53":"---","ec7869ad":"The 'date' column in an object type , we need to convert it to datetime type","97cc3d35":"<h5> These Columns can be dropped from the dataset<br>\n     - 'stn_code' : As it is just a code and is not important for the Analysis <br>\n     - 'sampling_date' : There are two date columns in this dataset, we are dropping this column because the values in this column are in different formats<br>\n     - 'pm_2' : Since more than 97% of data is Missing \n     - 'spm' : Since more than 50% of data is Missinf","331a0f69":"The above plots show that filling the missing values with Forward Fill dosen't cause any variation on the data, so we can choose Forward Fill","883b098d":"The above distribution plot shows the significant Positive Skewness has been reduced to acceptable level","6a590546":"---","9f78712b":"<h4> <u> 'rspm' - column","e9c36ee9":"<h3> <u> Getting Categorical and Numerical Columns","46d9c687":"Since we saw that 75% of the values lie under 135.0\nwe can calculate the upper limit using IQR(Inter Quartile Range) and\nconsider values outside upper limit as outliers and remove them","0946412c":"<h3> <u> Handeling Categorical columns ","7f2b697d":"Since this column has only 7 Missing Values , we can drop the observations","7f4697aa":"Since there are many missing values , we will replace the missing values as 'NA' (Not Available)","43d3dcd2":"The above distribution plot shows that 'rspm' values are significantly Right Skewed(Positively Skewed)<br>\nand the box plot shows that there are significant amount of outliers","20109cdd":"<h4> <u> 'no2' - column","4d05b47a":"<h4> <u> 'so2' - column","1e4ae562":"---","83b51da6":"---","1736b2c2":"<h3> <u> Handeling Numerical columns ","40b0f904":"<br><br>","a96a420a":"The above plots show that filling the missing values with Forward Fill dosen't cause any variation on the data, so we can choose Forward Fill","15796aff":"The above information shows that 75% of the values are within the value 30.8 and the maximum value is 876.0<br>\nThis means that there are outliers ","4d3b9862":"<h4> <u> 'agency' - column","12a17296":"<h4> <u> 'state' - column","69b7100b":"The above distribution plot shows the significant Positive Skewness has been reduced to acceptable level","f67812de":"<br>","22ffdfe7":"---","dcd5e2c8":"Since we saw that 75% of the values lie under 13.7<br>\nwe can calculate the upper limit using IQR(Inter Quartile Range) and <br>\nconsider values outside upper limit as outliers and remove them","30600a09":"##### Removing Outliers","a4fbe58d":"##### Treating Missing Values","eb0682ad":"##### Removing Outliers","dab35dc6":"<h3> <u>  Dropping columns that are not necessary ","dbf5a88e":"<h4> <u> 'location' - column","e1c7cf67":"<h4> <u> 'date' - column","82886a2c":"The above plots show that filling the missing values with Forward Fill dosen't cause any variation on the data, so we can choose Forward Fill","0a033917":"The above distribution plot shows that 'so2' values are significantly Right Skewed(Positively Skewed)<br>\nand the box plot shows that there are significant amount of outliers","d714715d":"---","20b2af19":"Since we saw that 75% of the values lie under 31.0<br>\nwe can calculate the upper limit using IQR(Inter Quartile Range) and <br>\nconsider values outside upper limit as outliers and remove them","991f4e6b":"stn_code\nsampling_date\nstate          : State\nlocation       : City\nagency<br>\ntypeArea       : category\nso2            : Sulphur dioxde\nno2            : Nitrogen dioxide\nrspm           : Respirable Suspended Particulate Matter\nspm            : Suspended Particulate Matter\nlocation_monitoring_station : location of monitoring area\npm2_5          : PSI 2.5\ndate           : Date of recording","c10b1949":"<h2> <u> Data Cleaning - India Air Quality Data","0e82b66d":"<h5> Missing Value Treatment","e5cf361d":"A huge part of this data is missing so we will treat the missing values as a new category call it 'NA' (Not Available)","b798fd86":"A huge part of this data is missing so we will treat the missing values as a new category call it 'NA' (Not Available)","a08d099b":"The above plots show that significant Positiv Skwewness is reduced and the outliers are removed","4e5556bb":"##### Treating Missing Values","39072670":"Mean Imputation","04587858":"---","e40a4c24":"##### Removing Outliers"}}