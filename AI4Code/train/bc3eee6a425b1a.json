{"cell_type":{"0f11887a":"code","a1b2053e":"code","94bdd9f1":"code","9801b6e4":"code","6a06182f":"code","615da801":"code","3119d688":"code","c95def32":"code","b0936e2c":"code","0372579c":"code","abf3b270":"code","6cdd61aa":"code","87b03c59":"code","7b3c7166":"code","354ee6b1":"code","cb8db366":"code","fc174274":"code","fecae0a9":"code","89f87ca9":"code","a5d437dc":"code","e22f2be4":"code","846189d4":"code","0b0ec716":"code","55c3d97e":"code","f588766b":"code","becd62b8":"code","240fa81e":"code","ae9f97ab":"code","21fe3704":"code","a0fb0fbd":"code","da2f9a6c":"code","f52d44b3":"code","85b6049f":"code","1c53ebe8":"code","bffb056b":"code","0a639bf3":"code","9e24e99f":"code","2ab58ef8":"code","a30562d4":"code","567e4bc0":"markdown","020c0646":"markdown","1904eed4":"markdown","2438f304":"markdown","3b30f19a":"markdown","55b506cf":"markdown","0eac3b48":"markdown","fa419a4f":"markdown","2b169ced":"markdown","afb26dc6":"markdown","6a3e054c":"markdown","ef240ea5":"markdown","c60019c2":"markdown","86fb1a5e":"markdown","67196945":"markdown","c5a77af0":"markdown","30cc90b6":"markdown","fcbbe563":"markdown","cfbec2c1":"markdown","1d8d8854":"markdown","bb1a8891":"markdown","3d47c2ea":"markdown","8d095035":"markdown","6ff9bc56":"markdown","30a0d26e":"markdown","740ed9ef":"markdown","cd40d06a":"markdown","ba3fbdde":"markdown","1afb3b60":"markdown","28749db7":"markdown","65606140":"markdown","3fea0296":"markdown","dbfb92dc":"markdown"},"source":{"0f11887a":"# This Python 3 environment comes with many helpful analytics libraries installed\n# It is defined by the kaggle\/python Docker image: https:\/\/github.com\/kaggle\/docker-python\n# For example, here's several helpful packages to load\n\nimport numpy as np # linear algebra\nimport pandas as pd # data processing, CSV file I\/O (e.g. pd.read_csv)\n\n# Input data files are available in the read-only \"..\/input\/\" directory\n# For example, running this (by clicking run or pressing Shift+Enter) will list all files under the input directory\n\nimport os\nfor dirname, _, filenames in os.walk('\/kaggle\/input'):\n    for filename in filenames:\n        print(os.path.join(dirname, filename))\n\n# You can write up to 5GB to the current directory (\/kaggle\/working\/) that gets preserved as output when you create a version using \"Save & Run All\" \n# You can also write temporary files to \/kaggle\/temp\/, but they won't be saved outside of the current session","a1b2053e":"# Importing required libraries\nimport pandas as pd\nimport numpy as np\nimport seaborn as sns\nimport matplotlib.pyplot as plt\nimport plotly\nimport plotly.express as px\nimport plotly.graph_objects as go\nfrom wordcloud import WordCloud, STOPWORDS, ImageColorGenerator\nfrom sklearn.linear_model import LinearRegression\nfrom sklearn.model_selection import train_test_split\nfrom sklearn import metrics\nfrom sklearn.tree import DecisionTreeRegressor","94bdd9f1":"# Reading the data set\nairbnb = pd.read_csv('..\/input\/new-york-city-airbnb-open-data\/AB_NYC_2019.csv')","9801b6e4":"# Let us take a look at the dimensions of the data\nairbnb.shape","6a06182f":"# Visualizing the top 5 rows of the data set\nairbnb.head(5)","615da801":"# Check the data types of each attribute\nairbnb.dtypes","3119d688":"# Removing the attributes which are not required for the analysis\nairbnb.drop(['id','host_name','last_review'], axis = 1, inplace = True)","c95def32":"# Let us now check for missing values in the data set\nairbnb.isnull().sum()","b0936e2c":"# Replacing missing values in the reviews_per_month column\nairbnb.fillna({'reviews_per_month':0}, inplace = True)\n\n# Replacing missing values in the name column\nairbnb.fillna({'name':'Not Mentioned'}, inplace = True)","0372579c":"# Let us again check whether all the missing values have been removed or not\nairbnb.isnull().sum()","abf3b270":"# Plotting the correlation matrix\nplt.figure(figsize = (15,15))\nsns.heatmap(airbnb.corr(), annot=True)\nplt.show()","6cdd61aa":"# Let us now take a look at the different neighborhood groups\nairbnb['neighbourhood_group'].unique()","87b03c59":"# Let us now take a look at how many properties are there in each neighbourhood group\nsns.countplot(x = 'neighbourhood_group', data = airbnb) ","7b3c7166":"# Let us now take a look at different room types being offered at the properties\nairbnb['room_type'].unique()","354ee6b1":"# Let us now look at what type of rooms do most properties offer\nsns.countplot(x = 'room_type', data = airbnb) ","cb8db366":"# Let us now take a look at the price range of the properties\nprint(\"--- Price Per Night ---\")\nprint(\"Minimum Price in $:\", min(airbnb['price']))\nprint(\"Maximum Price in $:\", max(airbnb['price']))\nprint(\"Average Price in $:\", airbnb['price'].mean())","fc174274":"# Let us take a look at the minimum number of nights required to be booked at the properties\nairbnb['minimum_nights'].unique()","fecae0a9":"# No of listings a particular host has\nprint(\"Minimum number of listings a particular host has:\", airbnb['calculated_host_listings_count'].min())\nprint(\"Maximum number of listings a particular host has:\", airbnb['calculated_host_listings_count'].max())","89f87ca9":"# Let us take a look at the number of listings a host has on Airbnb\nairbnb['calculated_host_listings_count'].unique()","a5d437dc":"# Visualizing the percentage of listings most host have\nlabels = airbnb['calculated_host_listings_count'].unique()\nsizes = airbnb['calculated_host_listings_count'].value_counts()*100\n\nplt.figure(figsize = (30,30))\nfig, ax = plt.subplots()\nax.pie(sizes, labels = labels, autopct = '%1.1f%%')\nax.axis('equal')  # Equal aspect ratio ensures the pie chart is circular.\nax.set_title('Listings a host has on Airbnb')\n\n\nplt.show()","e22f2be4":"fig = px.scatter_mapbox(airbnb, lat = \"latitude\", lon = \"longitude\", hover_name = \"neighbourhood\", hover_data = [\"neighbourhood_group\", \"price\"],\n                        color_discrete_sequence = [\"fuchsia\"], zoom = 3, height = 300)\nfig.update_layout(mapbox_style = \"open-street-map\")\nfig.update_layout(margin = {\"r\":0,\"t\":0,\"l\":0,\"b\":0})\nfig.show()","846189d4":"# Grouping based on neighbourhood\nbronx = airbnb['neighbourhood_group'] == 'Bronx'\nstaten_island = airbnb['neighbourhood_group'] == 'Staten Island'\nqueens = airbnb['neighbourhood_group'] == 'Queens'\nbrooklyn = airbnb['neighbourhood_group'] == 'Brooklyn'\nmanhattan = airbnb['neighbourhood_group'] == 'Manhattan'\n\n# Calculating the avergae price in each neighbourhood\nbronx_avg = airbnb[bronx]['price'].mean()\nstatenisland_avg = airbnb[staten_island]['price'].mean()\nqueens_avg = airbnb[queens]['price'].mean()\nbrooklyn_avg = airbnb[brooklyn]['price'].mean()\nmanhattan_avg = airbnb[manhattan]['price'].mean()\n\n\nprint(\"--- Average Price in the Neighbourhood Group ---\")\nprint(\"Bronx:\",bronx_avg)\nprint(\"Staten Island:\",statenisland_avg)\nprint(\"Quuens:\", queens_avg)\nprint(\"Brooklyn:\",brooklyn_avg)\nprint(\"Manhattan:\",manhattan_avg)","0b0ec716":"# Grouping based on room types\nprivate_room = airbnb['room_type'] == 'Private room'\nentire_home = airbnb['room_type'] == 'Entire home\/apt'\nshared_room = airbnb['room_type'] == 'Shared room'\n\n# Calculating the avergae price in each neighbourhood\nprivate_avg = airbnb[private_room]['price'].mean()\nentire_avg = airbnb[entire_home]['price'].mean()\nshared_avg = airbnb[shared_room]['price'].mean()\n\n\nprint(\"--- Average Price of the Room Types ---\")\nprint(\"Private Room:\",private_avg)\nprint(\"Entire Home\/Apt:\",entire_avg)\nprint(\"Shared room:\", shared_avg)","55c3d97e":"# Most expensive Airbnbs in Brooklyn\nexpensive = airbnb[airbnb['neighbourhood_group'] == 'Brooklyn'].sort_values(by = 'price', ascending = False)\nexpensive.head(10)","f588766b":"# Visualizing the most used words in the names of the most expensive Airbnbs in Brooklyn\nairbnb_brooklyn = airbnb[airbnb['neighbourhood_group'] == 'Brooklyn']\nword_cloud = WordCloud(width = 1000,\n                       height = 800,\n                       colormap = 'GnBu', \n                       margin = 0,\n                       max_words = 200,  \n                       min_word_length = 4,\n                       max_font_size = 120, min_font_size = 15,  \n                       background_color = \"white\").generate(\" \".join(airbnb_brooklyn['name']))\n\nplt.figure(figsize = (10, 15))\nplt.imshow(word_cloud, interpolation = \"gaussian\")\nplt.axis(\"off\")\nplt.show()","becd62b8":"expensive2 = airbnb[airbnb['neighbourhood_group'] == 'Manhattan'].sort_values(by = 'price', ascending = False)\nexpensive2.head(10)","240fa81e":"# Visualizing the most used words in the names of the most expensive Airbnbs in Manhattan\nairbnb_manhattan = airbnb[airbnb['neighbourhood_group'] == 'Manhattan']\nword_cloud = WordCloud(width = 1000,\n                       height = 800,\n                       colormap = 'twilight_shifted', \n                       margin = 0,\n                       max_words = 200,  \n                       min_word_length = 4,\n                       max_font_size = 120, min_font_size = 15,  \n                       background_color = \"white\").generate(\" \".join(airbnb_manhattan['name']))\n\nplt.figure(figsize = (10, 15))\nplt.imshow(word_cloud, interpolation = \"gaussian\")\nplt.axis(\"off\")\nplt.show()","ae9f97ab":"most_reviews = airbnb.sort_values(by = 'number_of_reviews', ascending = False)\nmost_reviews.head(10)","21fe3704":"cheapest = airbnb.sort_values(by = 'price', ascending = True)\ncheapest.head(10)","a0fb0fbd":"luxury = airbnb.sort_values(by = 'price', ascending = False)\nluxury.head(10)","da2f9a6c":"# Storing the names of the 100 cheapest airbnbs in New York in a separate variable\n\ncheapest = cheapest.head(100)\n\n# Visualizing the most used words in the names of the cheapest Airbnbs in New York City\nword_cloud = WordCloud(width = 1000,\n                       height = 800,\n                       colormap = 'twilight_shifted', \n                       margin = 0,\n                       max_words = 200,  \n                       min_word_length = 4,\n                       max_font_size = 120, min_font_size = 15,  \n                       background_color = \"white\").generate(\" \".join(cheapest['name']))\n\nplt.figure(figsize = (10, 15))\nplt.imshow(word_cloud, interpolation = \"gaussian\")\nplt.axis(\"off\")\nplt.show()","f52d44b3":"# Storing the names of the 100 luxurious airbnbs in New York in a separate variable\nluxury = luxury.head(100)\n\n# Visualizing the most used words in the names of the cheapest Airbnbs in New York City\nword_cloud = WordCloud(width = 1000,\n                       height = 800,\n                       colormap = 'twilight_shifted', \n                       margin = 0,\n                       max_words = 200,  \n                       min_word_length = 4,\n                       max_font_size = 120, min_font_size = 15,  \n                       background_color = \"white\").generate(\" \".join(luxury['name']))\n\nplt.figure(figsize = (10, 15))\nplt.imshow(word_cloud, interpolation = \"gaussian\")\nplt.axis(\"off\")\nplt.show()","85b6049f":"# Selecting features for building the model\nfeature_columns = ['neighbourhood_group','room_type','price','minimum_nights', 'number_of_reviews',\n                   'calculated_host_listings_count','availability_365']","1c53ebe8":"# Visualizing the selected features\nmodel_features = airbnb[feature_columns]\nmodel_features.head(5)","bffb056b":"# Separatign numerical and categorical features\nnumerical_features = model_features.dtypes[model_features.dtypes!=\"object\"].index\n\nprint(\"Number of numerical features\",len(numerical_features))\nprint(numerical_features)\n\n#Pulling out names of categorical variables by conditioning dtypes\n#Equal to object type\n\ncategorical_features = model_features.dtypes[model_features.dtypes==\"object\"].index\nprint(\"Number of categorical features\",len(categorical_features))\nprint(categorical_features)","0a639bf3":"# Generating dummies for the categorical variables and concatenating them\nneighbourhood_dummies = pd.get_dummies(model_features['neighbourhood_group'], drop_first = True)\nroom_dummies = pd.get_dummies(model_features['room_type'], drop_first = True)\nall_data = pd.concat([model_features, neighbourhood_dummies, room_dummies ], axis = 1)\nall_data.head(3)","9e24e99f":"# Removing the variables for which dummy values have been generated\nall_data.drop('neighbourhood_group', axis = 1, inplace = True)\nall_data.drop('room_type', axis = 1, inplace = True)\nall_data.head(3)","2ab58ef8":"# Splitting the data into train and test\ny = all_data['price']\nx = all_data.drop(['price'], axis = 1)\nx_train, x_test, y_train, y_test = train_test_split(x,y,test_size = 0.20, random_state = 200)","a30562d4":"# Building a linear regression model\nlin_model = LinearRegression()\nlin_model.fit(x_train,y_train)\n\n# Making the predictions\ny_pred = (lin_model.predict(x_test))","567e4bc0":"### Airbnbs Having most number of Reviews","020c0646":"Airbnb, Inc. is an American vacation rental online marketplace company based in San Francisco, California, United States. The company was founded in August 2008 by Brian Chesky (Current CEO),Joe Gebbia and Nathan Blecharczyk. Airbnb offers arrangement for lodging, primarily homestays, or tourism experiences.<br> The company was conceived after its founders rented out an air mattress in their living room, effectively turning their apartment into a bed and breakfast, to offset the high cost of rent in San Francisco. Airbnb is a shortened version of its original name, AirBedandBreakfast.com.","1904eed4":"### Building the prediction model","2438f304":"We can see that the Shared rooms are the cheapest and most affordable in Airbnbs, while renting an entire apartment\/home is more expensive. The price of renting a Private room is reasonable and hence is preferred by people who are travelling solo or as a couple.","3b30f19a":"### Most Expensive Airbnbs in Manhattan","55b506cf":"### Visualizing the Airbnbs in New York City on the Map","0eac3b48":"We can see here that the neighbourhood groups Manhattan, Brooklyn and Staten Island have high values for the average price of the properties. While Bronx has the lowest value for average price. This can be because Manhattan, Brooklyn and Staten Islands are the most expensive neighbourhoods in the New York City.","fa419a4f":"### Min and maximum no of listings a host has on Airbnb","2b169ced":"We can see here, that majority of the hosts have 6 properties listed on Airbnb, while few have 1 or 2 properties listed. ","afb26dc6":"### Count of properties available in each neighbourhood","6a3e054c":"We can see here, that most of the properties fall in the Brooklyn or Manhattan neighbourhood group, while there very few properties in Bronx and Staten Island.","ef240ea5":"### Count of room types available in Airbnb properties","c60019c2":"### Cheapest Airbnbs in New York City ","86fb1a5e":"### Average price of Airbnb based on the room types ","67196945":"### Visualizing the most used words in the names of Airbnbs in Manhattan","c5a77af0":"As we can see above, the 'last_review' attribute contains only the dates for which the airbnb property was last reviewed or the date when the last review was generated. And if there was no review generated, then there is no date and so we have a missing value in the column.","30cc90b6":"There are only 3 categories for the room types, which are: Private Room- a single room, Entire home\/apt: the entire house or apartment will be available for the visitors and they will be the only ones living there at that time, and Shared Room: the room can be shared with other visitors as well.","fcbbe563":"### Most Expensive Airbnbs in New York City","cfbec2c1":"So in the data set we have 48895 observations and 16 attributes. Let us now take a look at the attributes of the data set.","1d8d8854":"### Feature Engineering","bb1a8891":"Comparing the words used in the names of the cheapest and most expensive Airbnbs in New York, we can see that the cheapest Airbnbs use words like'Subway', 'Studio', 'Room', 'Beautiful', 'Cozy', 'Spacious', 'Shared' and 'Cheap' while the expensive Airbnbs use words like 'Townhouse', 'Luxury', 'Location', 'Hidden', 'Park', 'SOHO' and 'Penthouse'. <br>\nPeople who choose cheap Airbnbs generally look for properties which are spacious, cosy, cheap and near to the subway station as it reduces the transport cost and brings down the overall cost of their trip while people who prefer luxurious Airbnbs opt them because of privacy (peaceful and secluded from crowded places), comfort and location (close to famous landmarks such as 'Central Park').","3d47c2ea":"### Visualizing the most used words in the names of the cheapest Airbnbs in New York City","8d095035":"### Visualizing the most used words in the names of the most expensive Airbnbs in New York City","6ff9bc56":"### Visualizing the most used words in the names of Airbnbs in Brooklyn","30a0d26e":"Attributes such as 'id', 'host_name', and 'last_review' do not contribute much to our data analysis so we can drop these columns. ","740ed9ef":"We can see here that most of the Airbnbs in Manhattan use 'Central Park' in their name as Manhattan is only at a 5 minute walking distance from Central Park, which is the fifth largest park in the city by area covering 843 acres. Central Park has turtles, fish, squirrels and chipmunk among its permanent residents and home to more than 230 different species of birds. The park ranks as a symbol of New York City after Statue of Liberty and Empire State Building. Hence, most of the Airbnbs mention the name of the park in the name of their listing as it is considered to be a great landmark.","cd40d06a":"So there are only 5 neighbourhood groups in the data set.","ba3fbdde":"### Average price of the properties based on the neighbourhood group","1afb3b60":"![](https:\/\/ewscripps.brightspotcdn.com\/dims4\/default\/42baba2\/2147483647\/strip\/true\/crop\/1024x538+0+19\/resize\/1200x630!\/quality\/90\/?url=https%3A%2F%2Fmediaassets.ksby.com%2Fcordillera-network%2Fwp-content%2Fuploads%2Fsites%2F2%2F2018%2F08%2F16050429%2F17424991_G.png)","28749db7":"### Most Expensive Airbnbs in Brooklyn","65606140":"### Visualizing the percentage of listings most host have","3fea0296":"So most of the properties are offering either a Private room or the Entire home\/apt, there are very few properties which are offering a Shared room. The reason for this can be that most of the tourists or visitors want privacy and prefer either a private room or to have the entire home\/apt for themselves for their convenience. ","dbfb92dc":"We can see here that the expensive Airbnbs in Brooklyn use the words such as 'Charming', 'Cozy', 'Studio', 'Modern', 'Beautiful', and'Luxury' in the names."}}