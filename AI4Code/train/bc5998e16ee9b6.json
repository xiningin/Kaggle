{"cell_type":{"3cc58a80":"code","71be776b":"code","d0fd89df":"code","a5076b0f":"code","d363d4a6":"code","98b18ead":"code","8d7115dd":"code","5e6e3a2b":"code","d6f4ba04":"code","9b4978d5":"code","b154d374":"code","0dc8107e":"code","3d4321c7":"code","1b396fad":"code","b2d30fac":"code","05a38aa7":"code","716d6e8a":"code","e0706641":"code","75e94e60":"code","3e60c317":"code","c553b02f":"code","3c62dd21":"code","26ecc7c0":"code","f73c7665":"code","0342aea0":"code","3a4c724e":"code","dc2c4cb8":"code","eaa41596":"code","2aef6b16":"code","204594be":"code","6541d91e":"code","ff01a46f":"code","bd839a99":"code","80a47671":"code","387ae520":"code","c401490e":"code","edfee064":"code","eca134fd":"code","198748d1":"code","ad2e64a6":"code","b0af0036":"code","70b908ec":"code","1a36eea6":"markdown","7374db65":"markdown","2caa18d3":"markdown","24adc2e6":"markdown","40cda60c":"markdown","4da9c795":"markdown","8905fe99":"markdown","e41f3281":"markdown","539dc893":"markdown","a58c16ec":"markdown","6eaa179f":"markdown","125d776b":"markdown","96da2623":"markdown","5cbefdf9":"markdown","eeb09fd4":"markdown","025b1ddb":"markdown","7321bbf5":"markdown","f09fbf23":"markdown","ac1e01e4":"markdown","c56cef63":"markdown","d7942804":"markdown","a9093809":"markdown","060d0e5f":"markdown","b447a783":"markdown","ce831067":"markdown","5c8acc72":"markdown","74061a25":"markdown","0ca01c45":"markdown","40a98210":"markdown","5cf6c8ae":"markdown"},"source":{"3cc58a80":"import numpy as np\nimport pandas as pd\nimport matplotlib.pyplot as plt\nimport seaborn as sns\nimport sklearn\nfrom scipy import stats\nimport webbrowser","71be776b":"import os\nfor dirname, _, filenames in os.walk('\/kaggle\/input'):\n    for filename in filenames:\n        print(os.path.join(dirname, filename))        \n\ndf = pd.read_csv(\"..\/input\/healthcare-cost\/HospitalCosts.csv\")\n\ndf.info()","d0fd89df":"#shape of dataset\ndf.shape","a5076b0f":"#columns in df\ndf.columns","d363d4a6":"df.rename({\"TOTCHG\":\"COST\"}, axis=1, inplace=True)\ndf.head()","98b18ead":"df.sort_values(by=[\"AGE\",\"FEMALE\"], ascending=False, inplace=True)\ndf","8d7115dd":"# df.to_html(\"frame.html\")\n# url = \"frame.html\"\n# webbrowser.open(url, new=2)","5e6e3a2b":"df_NaN = df[df.isnull().any(axis=1)]\ndf_NaN\n\n#dropping row with NaN value\ndf.dropna(inplace=True)","d6f4ba04":"#describe data\ndf.describe()[[\"AGE\", \"LOS\", \"COST\"]]\n","9b4978d5":"'''indirect way'''\nunique, count = np.unique(df[\"AGE\"], return_counts=True) #return count of each unique value in two separate lists\nunique_lst = list(zip(unique,count)) #zip noth lists into a single list\nprint(unique_lst)","b154d374":"'''direct way'''\ndf[\"AGE\"].value_counts().sort_index(ascending=False) #sorting the unique values in descending order","0dc8107e":"df[\"SCPD\"] = df[\"COST\"] \/ df[\"LOS\"] #SCPD = staying cost per day\ndf","3d4321c7":"plt.figure(figsize=(16,12))\nsns.boxplot(data=df, x=\"AGE\", y=\"COST\")\nplt.tight_layout()\nplt.show()","1b396fad":"sns.barplot(data=df, x=\"AGE\", y=\"COST\")","b2d30fac":"df.groupby(df[\"AGE\"]).mean()[\"COST\"].sort_index(ascending=False)  # you can also sort values using sort_values","05a38aa7":"df.groupby(df[\"AGE\"]).sum()[\"COST\"].sort_index(ascending=False) #you can also sort values using sort_values","716d6e8a":"df[\"APRDRG\"].value_counts().sort_values(ascending=False)","e0706641":"plt.figure(figsize=(20,12))\nplt.xticks(rotation=90)\nsns.countplot(data=df, x=\"APRDRG\")","75e94e60":"plt.figure(figsize=(18,10), dpi=400)\nsns.scatterplot(data=df, x=\"LOS\", y=\"COST\", hue=\"APRDRG\", palette=\"BuPu\")\n","3e60c317":"df.groupby([\"APRDRG\"]).mean()[\"COST\"].sort_values(ascending=False)","c553b02f":"df.groupby([\"APRDRG\"]).mean()[\"LOS\"].sort_values(ascending=False)","3c62dd21":"df.groupby([\"APRDRG\"]).mean()[\"SCPD\"].sort_values(ascending=False)","26ecc7c0":"# url = \"frame.html\"\n# df.to_html(url)\n# webbrowser.open(url, new=2)","f73c7665":"df[\"RACE\"].value_counts().sort_index()","0342aea0":"plt.figure(figsize=(18, 10))\nsns.boxplot(data=df, x=\"RACE\", y=\"COST\")","3a4c724e":"df[\"COST\"].describe()","dc2c4cb8":"df.groupby([\"RACE\"]).mean()[\"COST\"].sort_values(ascending=False)","eaa41596":"df.groupby([\"RACE\"]).describe()[\"COST\"][2:3]","2aef6b16":"def detect_outlier(x, limit=1.3):\n    percentile_25 = np.percentile(x, 25)\n    percentile_75 = np.percentile(x, 75)\n    iqr =  percentile_75 - percentile_25\n    limit_inf = np.maximum(percentile_25 - limit * iqr, np.min(x))\n    limit_sup = np.minimum(percentile_75 + limit * iqr, np.max(x))\n    print(\"limit_inf : \", limit_inf)\n    print(\"limit_sup : \", limit_sup)\n    return np.where((x < limit_inf) | (x > limit_sup), True, False) # bitwise OR operator = |  \n","204594be":"outlier = detect_outlier(df.COST)\noutlier","6541d91e":"np.asarray(df[\"RACE\"])[outlier]","ff01a46f":"sns.barplot(data=df, x=\"FEMALE\", y=\"COST\")","bd839a99":"df.groupby([\"FEMALE\"]).describe()[\"COST\"]","80a47671":"plt.figure(figsize=(18,10))\nsns.barplot(data=df, x=\"AGE\", y=\"COST\", hue=\"FEMALE\")","387ae520":"plt.figure(figsize=(12,8))\nsns.regplot(data=df, x=\"AGE\", y=\"LOS\")","c401490e":"plt.figure(figsize=(12,8))\nsns.regplot(data=df, x=\"FEMALE\", y=\"LOS\")","edfee064":"plt.figure(figsize=(12,8))\nsns.regplot(data=df, x=\"RACE\", y=\"LOS\", ci=None)","eca134fd":"slope, intercept, r_value, p_value, std_err = stats.linregress(df[\"AGE\"], df[\"COST\"])\n\nplt.figure(figsize=(12,8))\nsns.regplot(data=df, x=\"AGE\", y=\"COST\", ci=None, label=\"y={0:.2f}x+{1:.2f}\".format(slope, intercept)).legend(loc=\"best\")","198748d1":"slope, intercept, r_value, p_value, std_err = stats.linregress(df[\"FEMALE\"], df[\"COST\"])\n\nplt.figure(figsize=(12,8))\nsns.regplot(data=df, x=\"FEMALE\", y=\"COST\", ci=None, label=\"y={0:.2f}x+{1:.2f}\".format(slope, intercept)).legend(loc=\"best\")\n","ad2e64a6":"slope, intercept, r_value, p_value, std_err = stats.linregress(df[\"LOS\"], df[\"COST\"])\n\nplt.figure(figsize=(12, 8))\nsns.regplot(data=df, x=\"LOS\", y=\"COST\", ci=None, label=\"y={0:.2f}x+{1:.2f}\".format(slope, intercept)).legend(loc=\"best\")\n","b0af0036":"slope, intercept, r_value, p_value, std_err = stats.linregress(df[\"RACE\"], df[\"COST\"])\n\nplt.figure(figsize=(12, 8))\nsns.regplot(data=df, x=\"RACE\", y=\"COST\", ci=None, label=\"y={0:.2f}x+{1:.2f}\".format(slope, intercept)).legend(loc=\"best\")\n","70b908ec":"slope, intercept, r_value, p_value, std_err = stats.linregress(df[\"APRDRG\"], df[\"COST\"])\n\nplt.figure(figsize=(12, 8))\nsns.regplot(data=df, x=\"APRDRG\", y=\"COST\", ci=None,\n            label=\"y={0:.2f}x+{1:.2f}\".format(slope, intercept)).legend(loc=\"best\")\n","1a36eea6":"# Result --> Task 2:\n911 has highest expenditure whereas 640 frequent hospital the most and 602 has highest LOS among all. ","7374db65":"create a new column to calculate cost of stay per day for each patient","2caa18d3":"total COST for each AGE sorted in decreased order of AGE","24adc2e6":"count of patients v\/s APRDRG","40cda60c":"# RESULT --> Task1 : \nAge category between 0-1 and 12-17 frequent hospital the most and 3-6 has maximum expenditure.","4da9c795":"Creating a separate Dataframe for viewing rows with null values","8905fe99":"# Description\n\nA nationwide survey of hospital costs conducted by the US Agency for Healthcare\nconsists of hospital records of inpatient samples. The given data is restricted to\nthe city of Wisconsin and relates to patients in the age group 0-17 years. The\nagency wants to analyze the data to research on the healthcare costs and their\nutilization.\n\nThe goals of this project are:\n\n> 1. To record the patient statistics, the agency wants to find the age category\nof people who frequent the hospital and has the maximum expenditure.\n\n> 2. In order of severity of the diagnosis and treatments and to find out the\nexpensive treatments, the agency wants to find the diagnosis related group\nthat has maximum hospitalization and expenditure.\n\n> 3. To make sure that there is no malpractice, the agency needs to analyze if\nthe race of the patient is related to the hospitalization costs.\n\n> 4. To properly utilize the costs, the agency has to analyze the severity of the\nhospital costs by age and gender for proper allocation of resources.\n\n> 5. Since the length of stay is the crucial factor for inpatients, the agency wants\nto find if the length of stay can be predicted from age, gender, and race. \n> 6. To perform a complete analysis, the agency wants to find the variable that\nmainly affects the hospital costs.","e41f3281":"## **APR-DRGs**\n\nEarly patient classification systems, such as the\nMedicare DRGs and All Patient (AP) DRGs were developed\nto provide patient classification systems that relate the\ntypes of patients treated to the resources they consume.\n\\\nThus, these systems focus exclusively on resource\nintensity.\n\\\nSome drawbacks of these systems:\n> \u2013 Medicare DRGs were designed for the Medicare population only.\\\n> \u2013 Neither system is severity adjusted and therefore does not\\\n> provide an incentive to care for higher need patients.\\\n> \u2013 Higher complexity DRGs (with CC) are formed based on resource\\\nintensity and do not address severity of illness nor risk of\nmortality.\\\n> \u2013 Medicare addressed these needs by developing MS-DRGs.\\\n\n**APR-DRG address these deficiencies**\\\n\u2022 All APR DRGs have 4 severity levels\\\n\u2022 Patient age is used in severity leveling\\\n\u2022 Significant pediatric and adult problems have a\nseparate APR-DRG\\\n\n**What makes APR-DRG\u2019s Relevant?**\\\n\u2022 APR-DRGs make clinical sense. The clinical logic\nof APR-DRGs has undergone the most intensive\nscrutiny of any severity system on the market.\\\n\u2022 The logic is open and available. APR-DRGs are not\na \u201cblack box\u201d.\\\n\u2022 The system was designed to be fully\ncomprehensive and account for all payers,\npatients, and ages (including pediatrics).\\","539dc893":"mean of COST for each AGE sorted in decreasing order of AGE","a58c16ec":"# **Task 3:**\n\n**To make sure that there is no malpractice, the agency needs to analyze if the race of the patient is related to the hospitalization costs.**","6eaa179f":"scatterplot of COST v\/s LOS hued according to APRDRG","125d776b":"# RESULT --> Task 5:\nSince, regression plot for AGE,GENDER and RACE are almost straight line parallel to x axis, there is no correlation between LOS and AGE,GENDER and RACE.","96da2623":"# Result --> Task 3:\nRACE 2.0 has higher mean of COST than other races and is also considerably higher than overall mean of COST. Thus, RACE 2.0 people might be unjustly treated and hospital should look into this matter.","5cbefdf9":"plotting boxplot and barplot of COST v\/s AGE","eeb09fd4":"##### Changing Column names of TOTCHG","025b1ddb":"# RESULT --> Task 6:\nWe can easily see that the two factors that affect COST the most are LOS and FEMALE with slope 720.3 and -462.34.","7321bbf5":"# **Task 4:**\n**To properly utilize the costs, the agency has to analyze the severity of the hospital costs by age and gender for proper allocation of resources.**","f09fbf23":"There are many outliers of RACE 1.0 but mean is almost as overall mean whereas RACE 2.0 has 2 outliers and has a very high mean.","ac1e01e4":"# **Task 1:**\n**To record the patient statistics, the agency wants to find the age category of people who frequent the hospital and has the maximum expenditure.**","c56cef63":"To find the independant variable that most affects the COST, we need to plot regplots and see which variable has highest positive correlation with COST.","d7942804":"**Sorting df by \"AGE\" in descending order**","a9093809":"# **Task 2:**\n**In order of severity of the diagnosis and treatments and to find out the expensive treatments, the agency wants to find the diagnosis related group that has maximum hospitalization and expenditure.**","060d0e5f":"From overall mean of COST, we can see that RACE 2.0 and 3.0 has higher average cost. Thus, we will examine RACE 2.0 and 3.0.","b447a783":"LOS = Length of Stay\\\nTOTCHG = Hospital Dsicharge Cost\\\nAPRDRG = All Patient Refined Diagnosis Related Groups\\","ce831067":"# **Task 6:**\n**To perform a complete analysis, the agency wants to find the variable that mainly affects the hospital costs.**","5c8acc72":"# **Task 5:**\n**Since the length of stay is the crucial factor for inpatients, the agency wants to find if the length of stay can be predicted from age, gender, and race.**","74061a25":"### **Loading Dataset**","0ca01c45":"# RESULT --> Task 4:\nThe cost for men is larger for all ages except 5, 17 and 11 to 13.","40a98210":"### **Importing relevant libraries**","5cf6c8ae":"#### Viewing the dataset in another tab\n\nwebbrowser.open(url, new=0, autoraise=True)\n> Display url using the default browser.\\\nIf new is 0, the url is opened in the same browser window if possible.\\\nIf new is 1, a new browser window is opened if possible.\\\nIf new is 2, a new browser page (\u201ctab\u201d) is opened if possible.\\\nIf autoraise is True, the window is raised if possible (note that under many window managers this will occur regardless of the setting of this variable)."}}