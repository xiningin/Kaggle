{"cell_type":{"3533b6cf":"code","42c58404":"code","ed6b8121":"code","0f04bb69":"code","1e1802c6":"code","be662ddc":"code","49ac30af":"code","2d2ae9ab":"code","3c4ffe17":"code","a69be449":"code","931646f1":"code","cf2058ec":"code","640cc9d6":"code","28804489":"code","fdfdf121":"code","96a67663":"code","233faa3e":"code","3b7e0a64":"code","91f1f8e0":"code","303514a3":"markdown"},"source":{"3533b6cf":"import geopandas as gpd","42c58404":"import pandas as pd","ed6b8121":"import folium\nfrom folium import Choropleth","0f04bb69":"def embed_map(m, file_name):\n    from IPython.display import IFrame\n    m.save(file_name)\n    return IFrame(file_name, width='100%', height='500px')","1e1802c6":"CA_high_earners = pd.read_csv(\"..\/input\/geospatial-learn-course-data\/CA_county_high_earners.csv\", index_col='GEOID')\nCA_high_earners.head()","be662ddc":"CA_pop = pd.read_csv(\"..\/input\/geospatial-learn-course-data\/CA_county_population.csv\", index_col='GEOID')\nCA_pop.head()","49ac30af":"CA_stats = CA_high_earners.join(CA_pop)\nCA_stats.head()","2d2ae9ab":"CA_stats[\"rate_of_rich\"] = CA_stats[\"high_earners\"] \/ CA_stats[\"population\"]\nCA_stats.head()","3c4ffe17":"CA_counties = gpd.read_file(\"..\/input\/geospatial-learn-course-data\/CA_county_boundaries\/CA_county_boundaries\/CA_county_boundaries.shp\")\nCA_counties.head()","a69be449":"CA_stats2 = pd.merge(CA_counties, CA_stats, on='GEOID')\nCA_stats2.head()","931646f1":"# key_on = \"feature.id\" requires a string-type column. Here we use \"name\" for it.","cf2058ec":"name_geometry = CA_stats2.drop(columns=['GEOID', 'area_sqkm', 'high_earners', 'population', 'rate_of_rich']).set_index('name')\nname_geometry.head()","640cc9d6":"name_rate_of_rich = CA_stats2.drop(columns=['GEOID', 'area_sqkm', 'high_earners', 'population', 'geometry']).set_index('name')\nname_rate_of_rich.head()","28804489":"# name_geometry.__geo_interface__","fdfdf121":"name_rate_of_rich","96a67663":"type(name_rate_of_rich)","233faa3e":"# Converting to pd.Series via Python lists.\n\nrate_of_rich_Series = pd.Series(name_rate_of_rich['rate_of_rich'].values.tolist(), index=name_rate_of_rich.index.tolist())\ntype(rate_of_rich_Series)","3b7e0a64":"rate_of_rich_Series","91f1f8e0":"m_9 = folium.Map(location=[36.5,-120], tiles='cartodbpositron', zoom_start=5)\nChoropleth(geo_data=name_geometry.__geo_interface__, \n           data=rate_of_rich_Series, \n           key_on=\"feature.id\", \n           fill_color='YlGnBu', \n           legend_name='Rate of high earners'\n          ).add_to(m_9)\nembed_map(m_9, 'q_9.html')","303514a3":"# data in Chropleth should be pd.Series."}}