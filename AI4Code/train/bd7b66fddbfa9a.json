{"cell_type":{"e512eb0a":"code","1cbc6771":"code","5bc6ddfb":"code","0d45c0f4":"code","dc0b6325":"code","0ac88e50":"code","497435ba":"code","86a3306f":"code","e53aefea":"code","09d0b1ce":"code","065162fc":"code","dcfc9004":"code","2d947949":"code","0db11e27":"code","07dc5a3d":"code","811d7f61":"markdown","c530dbc2":"markdown","a49a13d3":"markdown","9bd4949a":"markdown","f6020e04":"markdown"},"source":{"e512eb0a":"import numpy as np\nimport pandas as pd\nimport seaborn as sns\nsns.set(color_codes=True)\nsns.set_palette('pastel')\n%matplotlib inline \nimport matplotlib.pyplot as plt\nplt.rcParams['axes.unicode_minus']=False\nconfig = {\n    \"font.family\":'serif',\n    \"font.size\": 20,\n    \"mathtext.fontset\":'stix',\n    \"font.serif\": ['SimSun'],\n}\nplt.rcParams.update(config)","1cbc6771":"train=pd.read_csv('\/kaggle\/input\/titanic\/train.csv')\ntrain.head()","5bc6ddfb":"train.info()","0d45c0f4":"train.describe()","dc0b6325":"train['Survived_YN']=np.where(train['Survived']==1,'YES','NO')\ntrain.head(1)","0ac88e50":"data_o=train.groupby(['Survived_YN'])['Survived_YN'].count()\npatches,texts,autotexts=plt.pie(data_o.values,\n                                labels=data_o.index,labeldistance=1.2,\n                                textprops={'fontsize':15},\n                                autopct='%.2f%%',pctdistance=0.5,\n                                startangle=70,\n                               )\n[autotext.set_size(15) for autotext in autotexts]\nplt.title('Survival Overview',fontdict={'fontsize':20,'fontweight':'extra bold'},pad=5)\nplt.show()","497435ba":"# preprocess 'Pclass'\ntrain['Ticket_Class']=train['Pclass'].map({1:'Upper',2:'Middle',3:'Lower'})\n# preprocess 'Embarked'\ntrain['Embarked'].fillna('unknown',inplace=True)\ntrain['Port_of_Embarkation']=train['Embarked'].map({'C':'Cherbourg','Q':'Queenstown','S':'Southampton','unknown':'unknown'})\n# preprocess 'Cabin'\ntrain['Cabin_exist']=np.where(train['Cabin'].isnull(),'NO','YES')\n\ntrain.head(1)","86a3306f":"fig,axes=plt.subplots(3,4,figsize=(16,12),dpi=72,gridspec_kw={'width_ratios':(1,1,1,1),'height_ratios':(1,1,1)})\n\nsns.countplot(ax=axes[0,0],data=train,x='Sex')\nsns.barplot(ax=axes[1,0],data=train, x='Sex',y='Survived',estimator=sum,ci=None)\nsns.barplot(ax=axes[2,0],data=train, x='Sex',y='Survived',ci=None)\n\nticket_class_order=['Upper','Middle','Lower']\nsns.countplot(ax=axes[0,1],data=train,x='Ticket_Class',order=ticket_class_order)\nsns.barplot(ax=axes[1,1],data=train, x='Ticket_Class',y='Survived',order=ticket_class_order,estimator=sum,ci=None)\nsns.barplot(ax=axes[2,1],data=train, x='Ticket_Class',y='Survived',order=ticket_class_order,ci=None)\n\nsns.countplot(ax=axes[0,2],data=train[train['Port_of_Embarkation']!='unknown'],x='Port_of_Embarkation')\nsns.barplot(ax=axes[1,2],data=train[train['Port_of_Embarkation']!='unknown'], x='Port_of_Embarkation',y='Survived',estimator=sum,ci=None)\nsns.barplot(ax=axes[2,2],data=train[train['Port_of_Embarkation']!='unknown'], x='Port_of_Embarkation',y='Survived',ci=None)\n\nsns.countplot(ax=axes[0,3],data=train,x='Cabin_exist')\nsns.barplot(ax=axes[1,3],data=train, x='Cabin_exist',y='Survived',estimator=sum,ci=None)\nsns.barplot(ax=axes[2,3],data=train, x='Cabin_exist',y='Survived',ci=None)\n\n# set title\naxes[0,0].set_title('Sex',va='bottom')\naxes[0,1].set_title('Ticket_Class',va='bottom')\naxes[0,2].set_title('Port_of_Embarkation',va='bottom')\naxes[0,3].set_title('Cabin_exist',va='bottom')\n# set xaxis\nfor row in [0,1]:\n    for col in [0,1,2,3]:\n        axes[row,col].set_xlabel('')\n# set yaxis\naxes[0,0].set_ylabel('Total Numbe Of People On Board')\naxes[1,0].set_ylabel('Survival Number')\naxes[2,0].set_ylabel('Survival Rates')\nfor row in [0,1,2]:\n    for col in [1,2,3]:\n        axes[row,col].set_ylabel('')\n# set the numeric values shown on the bars        \nfor row in [0,1,2]:\n    for col in [0,1,2,3]:\n        for p in axes[row,col].patches:\n            axes[row,col].text(\n                x=p.get_x()+p.get_width()*0.5,\n                y=p.get_height()+axes[row,col].get_ylim()[1]*0.015,\n                s=f'\\n{round(p.get_height(),2)}',\n                size=13,\n                ha='center'\n            )\n\nplt.tight_layout()","e53aefea":"train.Age.unique()","09d0b1ce":"# preprocess 'Age'\ntrain['Age'].fillna(-1,inplace=True)\nbin_Age_Group_es=np.append(list(np.append(-1,list(np.arange(0,76,5)))),81)\ntrain['Age_Group_es']=pd.cut(train['Age'],bins=bin_Age_Group_es,right=False)\n\ntrain.head(1)","065162fc":"train.Fare.unique()","dcfc9004":"sns.displot(train['Fare'],height=5,aspect=5,bins=500)","2d947949":"sns.displot(train[(train['Fare']>0) & (train['Fare']<50)]['Fare'],height=5,aspect=5,bins=50)","0db11e27":"# preprocess 'Fare'\nbin_Fare_Group_es=[0,10,20,30,40,50,100,200,600]\ntrain['Fare_Group_es']=pd.cut(train['Age'],bins=bin_Fare_Group_es,right=False)\n\ntrain.head(1)","07dc5a3d":"fig,axes=plt.subplots(3,2,figsize=(20,12),dpi=72,gridspec_kw={'width_ratios':(3,2),'height_ratios':(1,1,1)})\n\nsns.histplot(ax=axes[0,0],data=train,x='Age',kde=True,bins=bin_Age_Group_es)\nsns.histplot(ax=axes[1,0],data=train[train['Survived']==1],x='Age',kde=True,bins=bin_Age_Group_es)\nsns.barplot(ax=axes[2,0],data=train,x='Age_Group_es',y='Survived',ci=None)\n\nsns.histplot(ax=axes[0,1],data=train,x='Fare',kde=True,bins=bin_Fare_Group_es)\nsns.histplot(ax=axes[1,1],data=train[train['Survived']==1],x='Fare',kde=True,bins=bin_Fare_Group_es)\nsns.barplot(ax=axes[2,1],data=train,x='Fare_Group_es',y='Survived',ci=None)\n\n# set xaxis\nfor row in [0,1]:\n    for col in [0,1]:\n        axes[row,col].set_xlabel('')\nfor row in [0,1]:\n    axes[row,0].set(xticks=bin_Age_Group_es)\n    axes[row,1].set(xticks=bin_Fare_Group_es)\n# set yaxis\naxes[0,0].set_ylabel('Total Number Of People On Board')\naxes[1,0].set_ylabel('Survival Number')\naxes[2,0].set_ylabel('Survival Rates')\nfor row in [0,1]:\n    axes[row,1].set(xticks=[0,50,100,200,600])\nfor row in [0,1,2]:\n    axes[row,1].set_ylabel('')\n\nplt.tight_layout()","811d7f61":"# DATA ANALYSIS","c530dbc2":"### 'Pclass' & 'Embarked' & 'Cabin'","a49a13d3":"## Detailed Relations ","9bd4949a":"### 'Age' & 'Fare'","f6020e04":"## Overview of Survival"}}