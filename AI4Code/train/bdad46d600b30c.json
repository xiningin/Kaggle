{"cell_type":{"3aeb607b":"code","c8d112be":"code","071acbbe":"code","4c1dbdff":"code","1f85966f":"code","aa315879":"code","9454af93":"code","fa4f4303":"code","8adc3758":"code","9cd4b0b9":"code","1cb1cc76":"code","774c3444":"code","86f72e4c":"code","8da89e41":"code","8db47f5a":"code","06536800":"code","0e7cdefe":"code","65e5bc54":"code","db094489":"code","54836f93":"code","83af8658":"code","d4178ae8":"code","babd7951":"code","fcca94ad":"code","e2910fa3":"code","1175c548":"code","e9118595":"code","85acaded":"code","573e540e":"code","e6a625c0":"code","d2ff4a16":"code","b3004990":"code","9638aa35":"code","2c7bda9c":"code","47264210":"code","1659aebc":"code","be6d44cd":"code","2bf0e622":"markdown","be60e83a":"markdown","9c236454":"markdown","93285b9d":"markdown","982e5523":"markdown","d70bcfd7":"markdown","31eec1e8":"markdown","4dfcede6":"markdown","f721cf85":"markdown","3c353988":"markdown","e3ef0ebe":"markdown"},"source":{"3aeb607b":"import pandas as pd\nimport numpy as np\nimport sklearn\nfrom sklearn.model_selection import *\nfrom xgboost import XGBRegressor","c8d112be":"date_converter = {'Prod. year':pd.to_datetime}\n\ntrain=pd.read_csv(\"..\/input\/mathcohack\/train.csv\",converters=date_converter)\ntest=pd.read_csv(\"..\/input\/mathcohack\/test.csv\",converters=date_converter)","071acbbe":"train.head()","4c1dbdff":"X=train.copy()\nX['Current Year'] = pd.to_datetime('2021')\nX['Age'] = X['Current Year'].dt.year-X['Prod. year'].dt.year\nX.drop([\"Price\",\"Levy\",\"ID\",\"Current Year\",\"Prod. year\"],axis=1,inplace=True)","1f85966f":"X.replace(\"\u10e1\u10ee\u10d5\u10d0\",\"Other\",inplace=True)","aa315879":"X[[\"Engine volume\",\"Turbo\"]]=X[\"Engine volume\"].str.split(expand=True)","9454af93":"X[\"Leather interior\"]=X[\"Leather interior\"].map({\"Yes\":1,\"No\": 0})","fa4f4303":"X[\"Turbo\"]=X[\"Turbo\"].map({None:0,\"Turbo\":1})","8adc3758":"#X[\"Leather interior\"]=X[\"Leather interior\"].map({\"Yes\":1,\"No\": 0})\n#X[\"Turbo\"]=X[\"Turbo\"].map({\"None\":0,\"Turbo\":1})\nX[\"Wheel\"]=X[\"Wheel\"].map({\"Left wheel\":0,\"Right-hand drive\":1})\nX[\"Doors\"]=X[\"Doors\"].map({\"04-May\":0,\"02-Mar\":1,\">5\":2})\nX[\"Drive wheels\"]=X[\"Drive wheels\"].map({\"4x4\":0,\"Front\":1,\"Front\":2})\nX[\"Gear box type\"]=X[\"Gear box type\"].map({\"Automatic\":0,\"Tiptronic\":1,\"Variator\":2,\"Manual\":3})\nX[\"Fuel type\"]=X[\"Fuel type\"].map({\"Hybrid\":0,\"Petrol\":1,\"Diesel\":2,\"CNG\":3,\"Plug-in Hybrid\":4,\"LPG\":5,\"Hydrogen\":6})\nX[\"Category\"]=X[\"Category\"].map({\"Jeep\":0,\"Hatchback\":1,\"Sedan\":2,\"Microbus\":3,\"Goods wagon\":4,\"Universal\":5,\"Coupe\":6,\"Minivan\":7,\"Cabriolet\":8,\"Limousine\":9,\"Pickup\":10})\n","9cd4b0b9":"X[\"Drive wheels\"].fillna(1, inplace=True)","1cb1cc76":"X[\"Mileage\"]=X[\"Mileage\"].str.split(expand=True)[0].astype(\"int\")","774c3444":"X[[\"Drive wheels\",\"Cylinders\"]]=X[[\"Drive wheels\",\"Cylinders\"]].astype(\"int\")","86f72e4c":"X[\"Engine volume\"]=X[\"Engine volume\"].astype(\"float\")","8da89e41":"h=X.copy()\nh.drop([\"Manufacturer\",\"Model\",\"Color\"], axis=1, inplace=True)","8db47f5a":"y=train.Price","06536800":"x_train,x_test,y_train,y_test=train_test_split(h,y,train_size=0.8)","0e7cdefe":"xgb=XGBRegressor(max_depth=100,\n    learning_rate=0.1,\n    n_estimators=1000,\n    verbosity=0,\n    silent=None,\n    objective='reg:linear',\n    booster='gbtree',\n    n_jobs=-1,\n    nthread=None,\n    gamma=0,\n    min_child_weight=1,\n    max_delta_step=0,\n    subsample=0.8,\n    colsample_bytree=1,\n    colsample_bylevel=1,\n    colsample_bynode=1,\n    reg_alpha=0,\n    reg_lambda=1,\n    scale_pos_weight=1,\n    base_score=0.5,\n    random_state=0,\n    seed=None,)\nxgb.fit(x_train,y_train)","65e5bc54":"p=xgb.predict(x_test)","db094489":"np.sqrt(sklearn.metrics.mean_squared_log_error(y_test, abs(p)))","54836f93":"R=test.copy()\nR['Current Year'] = pd.to_datetime('2021')\nR['Age'] = R['Current Year'].dt.year-R['Prod. year'].dt.year\nR.drop([\"Price\",\"Levy\",\"ID\",\"Current Year\",\"Prod. year\"],axis=1,inplace=True)","83af8658":"R.replace(\"\u10e1\u10ee\u10d5\u10d0\",\"Other\",inplace=True)","d4178ae8":"R[[\"Engine volume\",\"Turbo\"]]=R[\"Engine volume\"].str.split(expand=True)\nR[\"Leather interior\"]=R[\"Leather interior\"].map({\"Yes\":1,\"No\": 0})\nR[\"Turbo\"]=R[\"Turbo\"].map({None:0,\"Turbo\":1})","babd7951":"R[\"Engine volume\"]=R[\"Engine volume\"].astype(\"float\")","fcca94ad":"R[\"Category\"]=R[\"Category\"].map({\"Jeep\":0,\"Hatchback\":1,\"Sedan\":2,\"Microbus\":3,\"Goods wagon\":4,\"Universal\":5,\"Coupe\":6,\"Minivan\":7,\"Cabriolet\":8,\"Limousine\":9,\"Pickup\":10})","e2910fa3":"R[\"Fuel type\"]=R[\"Fuel type\"].map({\"Hybrid\":0,\"Petrol\":1,\"Diesel\":2,\"CNG\":3,\"Plug-in Hybrid\":4,\"LPG\":5,\"Hydrogen\":6})\n","1175c548":"R[\"Gear box type\"]=R[\"Gear box type\"].map({\"Automatic\":0,\"Tiptronic\":1,\"Variator\":2,\"Manual\":3})\n","e9118595":"R[\"Drive wheels\"]=R[\"Drive wheels\"].map({\"4x4\":0,\"Front\":1,\"Front\":2})\n","85acaded":"R[\"Doors\"]=test[\"Doors\"].map({\"04-May\":0,\"02-Mar\":1,\">5\":2})\n","573e540e":"R[\"Wheel\"]=R[\"Wheel\"].map({\"Left wheel\":0,\"Right-hand drive\":1})\n","e6a625c0":"R[\"Mileage\"]=R[\"Mileage\"].str.split(expand=True)[0].astype(\"int\")","d2ff4a16":"R.head()","b3004990":"R[\"Drive wheels\"].fillna(1, inplace=True)","9638aa35":"R[\"Engine volume\"]=R[\"Engine volume\"].astype(\"float\")","2c7bda9c":"R.drop([\"Manufacturer\",\"Model\",\"Color\"], axis=1, inplace=True)","47264210":"l=xgb.predict(R)","1659aebc":"prediction=pd.DataFrame(abs(l),columns=['Price'])","be6d44cd":"prediction.to_csv(\"solh.csv\")","2bf0e622":"### Spliting train data\n","be60e83a":"## Loading Data","9c236454":"### Preprocession the test data","93285b9d":"### Predicting","982e5523":"### Evalution using RMSLE metric","d70bcfd7":"## Preprocessing","31eec1e8":"### Viewing the first 5 rows of train","4dfcede6":"## Test\n","f721cf85":"### Training XGB Model","3c353988":"### Predicting on test data using using the xgb model","e3ef0ebe":"## Importing Libraries"}}