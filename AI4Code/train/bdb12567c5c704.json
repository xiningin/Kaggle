{"cell_type":{"b7de93ae":"code","3d224854":"code","af08c0b2":"code","9dc1a3a4":"code","f447b804":"code","616152c1":"code","9e91c701":"code","41b720e5":"code","2ad662fa":"code","3c0af7e0":"code","8d6784be":"code","330986cd":"code","4b689072":"code","a437198e":"code","3dfbf149":"code","ff1c2b02":"code","a18bccdc":"code","11dbb8af":"code","84b0fcf2":"code","3c5ee231":"code","298c7934":"code","e7cd17f1":"code","c001d72c":"code","83f6debf":"code","7ccae886":"code","4ec2032c":"code","558b47f8":"code","c7fdaa54":"code","32bc7620":"code","c267f352":"code","73b4c6be":"code","69566f87":"code","72d0b0ab":"code","6ca4ccde":"code","7254299e":"code","27a9c4b4":"code","8e58a584":"code","65e1fc29":"code","1f49754c":"code","bc155a3a":"code","58c01009":"code","4a143563":"code","83130522":"code","2a989b7a":"code","703d00c6":"code","fd5fbe8c":"code","ec26ce16":"code","6798fc2a":"code","14797bbe":"code","387639dc":"code","c3a257bc":"code","00806c51":"code","54cfaaf9":"code","fe75311e":"code","b06c75c1":"code","597ffc9d":"code","c26b30f2":"code","9ec6ab31":"code","eb314b67":"code","51ca38c9":"code","37fe376f":"code","46933ab4":"code","3580d005":"code","59b484c7":"code","4515e25a":"code","581260fa":"code","044dd419":"code","9e84cf79":"code","99ae0191":"code","f423966b":"code","bbb38a01":"code","21a5cf06":"code","f5c8e8b5":"code","ea37af73":"code","e3ef8afd":"code","b86460b0":"code","74fb3282":"code","a19f398e":"code","cdfc472b":"code","e4b523f1":"code","4b8fa2a0":"code","ea13cd72":"code","d1040522":"code","fdd613d3":"code","c228c6a5":"code","da0191bf":"code","ed28e442":"code","0d13f883":"code","69a912bd":"code","8f27cc8a":"code","dc0457c2":"code","0cb86446":"code","0cd1757d":"code","03075eca":"code","f214bcd2":"code","1d1ea6c9":"code","25e6ae99":"code","74957465":"code","fc3a4a25":"code","e6a6395d":"code","8f197841":"code","cb370b63":"code","6ea1dc52":"code","5471e60c":"code","98a85aed":"code","d9a9dd80":"code","15bcad4d":"code","2886e96c":"markdown","c21c7400":"markdown","9fce4d5b":"markdown","154aeb71":"markdown","4f8f2f5c":"markdown","f0be0e18":"markdown","313ee20c":"markdown","692c4adb":"markdown","94528b24":"markdown","209622ae":"markdown","36b790d6":"markdown","46fa3a45":"markdown","1c7dfd35":"markdown","b23cb81f":"markdown","809c5cdf":"markdown","7c5cf26d":"markdown","fec12df2":"markdown","a5695c4d":"markdown","28bd615b":"markdown","5cb4b2cc":"markdown","4ed421af":"markdown","e1d3ad80":"markdown","6162ea63":"markdown","b6eaf7b9":"markdown","1c4b699e":"markdown","6e22f5d3":"markdown","185205c2":"markdown"},"source":{"b7de93ae":"import pandas as pd\nimport numpy as np","3d224854":"import warnings\nwarnings.filterwarnings(\"ignore\")\nloan=pd.read_csv('..\/input\/lending-club-loan-data-set\/loan.csv')\nloan.sample(10)","af08c0b2":"loan.shape","9dc1a3a4":"loan.info()","f447b804":"# checking the null value in term of percentages for each columns\n((loan.isnull().sum()\/len(loan))*100).sort_values(ascending= False).head(60)","616152c1":"# checking the columns having more than 90% null values.\nloan.columns[loan.apply(lambda loan:(loan.isnull().sum()\/len(loan))*100>=90)]","9e91c701":"# Dropping the columns with more than 90% null values\nloan=loan.drop(loan.columns[loan.apply(lambda loan:(loan.isnull().sum()\/len(loan))*100>=90)],axis=1)\nloan.shape","41b720e5":"((loan.isnull().sum()\/len(loan))*100).sort_values(ascending= False)","2ad662fa":"loan['loan_status'].value_counts()","3c0af7e0":"loan=loan[loan['loan_status']!='Current']\nloan['loan_status'].value_counts()","8d6784be":"# Dropping the columns which are associated with current status of Loan of the applicant.\nloan=loan.drop(['installment','last_pymnt_d','revol_util','earliest_cr_line', 'total_pymnt', 'last_pymnt_amnt',\n       'last_credit_pull_d',],axis=1)\nloan.shape","330986cd":"import matplotlib.pyplot as plt\n%matplotlib inline\nimport seaborn as sns","4b689072":"# Checking the distribution ratio of Loan status attributes.\nloan['loan_status'].value_counts().plot.pie(autopct='%1.1f%%')\nplt.show()","a437198e":"loan.shape","3dfbf149":"((loan.isnull().sum()\/len(loan))*100).sort_values(ascending= False)","ff1c2b02":"loan['mths_since_last_delinq'].dtype","a18bccdc":"loan['mths_since_last_delinq'].describe()","11dbb8af":"loan['mths_since_last_delinq'].sample(10)","84b0fcf2":"loan['mths_since_last_delinq'].nunique()","3c5ee231":"loan.groupby(['loan_status'])['mths_since_last_delinq'].count()","298c7934":"loan.groupby(['loan_status'])['mths_since_last_delinq'].mean().plot.bar()\nplt.show()","e7cd17f1":"loan.groupby(['loan_status'])['mths_since_last_delinq'].count()","c001d72c":"100*loan.groupby(['loan_status'])['mths_since_last_delinq'].count()\/loan['mths_since_last_delinq'].count()","83f6debf":"#Dropping the coloumn mths_since_last_delinq\nloan= loan.drop('mths_since_last_delinq',axis=1)\nloan.shape","7ccae886":"loan['desc'].sample(10)","4ec2032c":"loan['desc'].dtype","558b47f8":"loan['desc'].value_counts()","c7fdaa54":"loan['desc'].describe()","32bc7620":"(loan['desc'].describe()[1]\/loan['desc'].describe()[0])*100","c267f352":"loan = loan.drop('desc',axis=1)\nloan.shape","73b4c6be":"loan['emp_title'].sample(10)","69566f87":"loan['emp_title'].value_counts()","72d0b0ab":"loan['emp_title'].describe()","6ca4ccde":"loan.groupby(['loan_status'])['emp_title'].describe()","7254299e":"loan=loan.drop('emp_title', axis=1)\nloan.shape","27a9c4b4":"((loan.isnull().sum()\/len(loan))*100).sort_values(ascending= False)","8e58a584":"loan.groupby(['loan_status'])['emp_length'].describe()","65e1fc29":"loan['emp_length'].value_counts()","1f49754c":"loan['emp_length'].value_counts().plot.bar()\nplt.show()","bc155a3a":"len(loan['loan_status'])","58c01009":"(loan.groupby(['loan_status'])['emp_length'].value_counts()\/loan.groupby(['emp_length'])['loan_status'].count())*100","4a143563":"plt.figure(figsize = (16,8))\n(loan.groupby(['loan_status'])['emp_length'].value_counts()\/loan.groupby(['emp_length'])['loan_status'].count()).plot.bar(rot=95)\nplt.show()","83130522":"loan.info()","2a989b7a":"# Checking the correlation between numricals features to get more insights\nloan.corr()","703d00c6":"# From the above correlation matrix, we could observe few NaN as the correlation result between numerical features.\n# Understanding one of the numerical feature having NaN as a correlation result.\nloan['collections_12_mths_ex_med'].describe()","fd5fbe8c":"# Accessing the Numerical columns from the Loan Dataset\nloan_Numerical=loan.select_dtypes(include=np.number)\nloan_Numerical.shape","ec26ce16":"# Accessing all such numericals columns having sum of all entries as 0.\nloan_Numerical.columns[loan_Numerical.apply(lambda loan: loan.sum()==0)]","6798fc2a":"# Dropping such numerical columns from loan Dataset\nloan=loan.drop(['out_prncp', 'out_prncp_inv', 'collections_12_mths_ex_med',\n       'acc_now_delinq', 'chargeoff_within_12_mths', 'delinq_amnt',\n       'tax_liens'],axis=1)\nloan.shape","14797bbe":"# Checking the correlation between remaining numerical columns\nloan.corr()","387639dc":"#From the above correlation we could observe NaN for the 'policy_code' feature. Hence verifying further to know the reason behind.\nloan['policy_code'].describe()","c3a257bc":"loan['policy_code'].value_counts()","00806c51":"loan= loan.drop('policy_code',axis=1)\nloan.shape","54cfaaf9":"# Checking the corrleation using heatmap for more insights\nimport seaborn as sns\nplt.figure(figsize=(18,10))\nsns.heatmap(loan.corr(), annot=True, linewidth=0.5)","fe75311e":"loan=loan.drop(['funded_amnt','funded_amnt_inv','total_pymnt_inv', 'total_rec_prncp','total_rec_int'],axis=1)\nloan.shape","b06c75c1":"loan_Numerical.columns","597ffc9d":"# Dropping the columns which are irrelevant from business point of view as thease are not having significant impact in the Loan Approval Process.\nloan=loan.drop(['id', 'member_id', 'delinq_2yrs', 'inq_last_6mths','open_acc', 'pub_rec', 'revol_bal', \n                'total_acc', 'total_rec_late_fee', 'recoveries','collection_recovery_fee',\n                 'pub_rec_bankruptcies'],axis=1)\nloan.shape","c26b30f2":"loan.sample(10)","9ec6ab31":"loan['initial_list_status'].value_counts()","eb314b67":"loan=loan.drop('initial_list_status',axis=1)\nloan.shape","51ca38c9":"loan['application_type'].value_counts()","37fe376f":"loan=loan.drop('application_type',axis=1)\nloan.shape","46933ab4":"loan[['zip_code','addr_state']].describe()","3580d005":"loan=loan.drop(['zip_code','addr_state'], axis=1)\nloan.shape","59b484c7":"# Understanding the 'purpose' feature\nloan['purpose'].value_counts()","4515e25a":"100*(loan.groupby(['purpose'])['loan_status'].value_counts(normalize=True)).sort_values(ascending=False)","581260fa":"plt.figure(figsize = (16, 6))\nloan.groupby(['purpose'])['loan_status'].value_counts(normalize=True).plot.bar(rot=60)\nplt.show()","044dd419":"loan.columns","9e84cf79":"# Understanding the Feature 'term'\n# term:The number of payments on the loan. Values are in months and can be either 36 or 60.\nloan['term'].value_counts()","99ae0191":"(loan.groupby(['term'])['loan_status'].value_counts(normalize=True))*100","f423966b":"plt.figure(figsize = (10, 6))\nloan.groupby(['term'])['loan_status'].value_counts(normalize=True).plot.bar(rot=20)\nplt.ylabel('Loan Proportion')\nplt.title('Loan Term vs. Proportion')\nplt.show()","bbb38a01":"# Undersatnding the feature 'int_rate'\n# int_rate: Interest Rate on the loan\nloan['int_rate'].value_counts()","21a5cf06":"# Removing the % interest rate entries in order to convert them into the numerical values for univariant analysis\nloan['int_rate']=loan['int_rate'].apply(lambda x:float(x.strip('%')))\nloan['int_rate'].head()                                 ","f5c8e8b5":"sns.boxplot(loan['int_rate'])\nplt.show()","ea37af73":"sns.distplot(loan['int_rate'],bins=15)\nplt.show()","e3ef8afd":"# As we could see the presence of outliers, we are using median plot.\nloan.groupby(['loan_status'])['int_rate'].median().plot.bar(rot=0)\nplt.title('Interest Rate', fontsize=15)\n\nplt.show()","b86460b0":"# Understanding the Feature 'grade'\n# grade:LC assigned loan grade\nloan.grade.head()","74fb3282":"100*(loan.groupby(['grade'])['loan_status'].value_counts(normalize=True)).sort_values(ascending=False)","a19f398e":"plt.figure(figsize = (12, 6))\n(loan.groupby(['grade'])['loan_status'].value_counts(normalize=True)).sort_values(ascending=False).plot.bar(rot=45,stacked=True)\nplt.ylabel(\"Proportion\")\nplt.title(\"Grade,Loan Status Vs Proportion\")\nplt.xlabel('Grade')\nplt.show()","cdfc472b":"loan.columns\n","e4b523f1":"loan=loan.drop(['url'],axis=1)","4b8fa2a0":"#  Understanding sub_grade Feature\nloan['sub_grade'].head()","ea13cd72":"100*(loan.groupby(['sub_grade'])['loan_status'].value_counts(normalize=True)).sort_values(ascending=False)","d1040522":"loan=loan.drop('sub_grade',axis=1)\nloan.shape","fdd613d3":"# Understanding the Feature 'home_ownership' \nloan['home_ownership'].value_counts()","c228c6a5":"loan.groupby(['home_ownership'])['loan_status'].value_counts()","da0191bf":"(loan.groupby(['home_ownership'])['loan_status'].value_counts(normalize=True))*100","ed28e442":"plt.figure(figsize=(16,6))\nsns.countplot(x ='home_ownership', data = loan, hue='loan_status')\nplt.show()","0d13f883":"# Understanding the Feature 'annual_inc'\n# 'annual_inc': The self-reported annual income provided by the borrower during registration\nloan['annual_inc'].sample(5)","69a912bd":"# As the Incomes are very high,reducing the scale in order to have clear visibility. \nloan['annual_inc']=loan['annual_inc']\/1000","8f27cc8a":"sns.boxplot(loan['annual_inc'])\nplt.show()","dc0457c2":"loan['annual_inc'].describe()","0cb86446":"# As we found the presence of outliers, so we are considering median plot.\nloan.groupby(['loan_status'])['annual_inc'].median().plot.bar()\nplt.axhline(y=59)\nplt.title('''Annual Income( annual_inc)''', fontsize=15)\nplt.show()","0cd1757d":"# understanding the Feature 'verification_status'\n# 'verification_status': Indicates if income was verified by LC, not verified, or if the income source was verified\nloan['verification_status'].sample(5)","03075eca":"(loan.groupby(['verification_status'])['loan_status'].value_counts(normalize=True))*100","f214bcd2":"plt.figure(figsize=(12,6))\n(loan.groupby(['verification_status'])['loan_status'].value_counts(normalize=True)).plot.bar(rot=40)\nplt.show()","1d1ea6c9":"# Understanding Feature 'dti'\n# 'dti': A ratio calculated using the borrower\u2019s total monthly debt payments on the total debt obligations,\n# excluding mortgage and the requested LC loan, divided by the borrower\u2019s self-reported monthly income.\nloan['dti'].describe()","25e6ae99":"sns.boxplot(loan['dti'])\nplt.show()","74957465":"# As there are no oulier in the DTI Feature so we can consider a mean plot.\nloan.groupby(['loan_status'])['dti'].mean().plot.bar()\nplt.axhline(y=13.27)\nplt.title('''Debt to Income Ratio( DTI)''', fontsize=15)\nplt.show()","fc3a4a25":"# Understanding the feature 'issue_d'\n# 'issue_d':The month which the loan was funded\nloan['issue_d'].sample(5)","e6a6395d":"loan[['Issue_Month','Issue_Year']]=loan['issue_d'].str.split('-',expand=True)","8f197841":"loan['Issue_Year'].value_counts(normalize=True)*100","cb370b63":"loan_year=loan['Issue_Year'].value_counts(normalize=True)*100\nloan_year.plot.bar()\nplt.xlabel('Loan Issue Year')\nplt.ylabel('Percentage of Loan Application')\nplt.show()\n","6ea1dc52":"loan.groupby(['loan_status'])['Issue_Year'].value_counts()","5471e60c":"loan.groupby(['loan_status'])['Issue_Month'].value_counts()","98a85aed":"plt.figure(figsize=(12,6))\nsns.countplot(data=loan,x='Issue_Month',hue='loan_status')\nplt.show()","d9a9dd80":"loan['loan_status_Numerical']=loan['loan_status'].apply(lambda x:1 if x=='Charged Off' else 0)\nloan.sample(5)","15bcad4d":"loan.describe()","2886e96c":"> As 99% loan Description are unique and hence it can't be a influencing feature in loan approval process","c21c7400":"> We can drop the feature 'zip_code' and 'addr_state', because address of borrower can't be a deciding factor in the loan approval process.","9fce4d5b":"> As we can see the Employment length having 10+ Years are more likely to Charged off and \nEmployment length having 9 Years are more likely to Fully Paid. Hence Employement Length (emp_length)\ncan be an influential feature in the loan approval process.","154aeb71":"#### understanding emp_length feature\n#### emp_length: Employment length in years. Possible values are between 0 and 10 where 0 means less \n#### than one year and 10 means ten or more years. ","4f8f2f5c":"***Now we will check the impact of each feature with respect to loan_status (Target Variable)***\n","f0be0e18":"> As there are 28K+ unique values out of 36K+ and there is no significant impact by any specific employment title.\nHence it can't be an influential feature in the loan approval process.","313ee20c":"> Borrowers with 3 Years tenure are most likely to Fully Pay where as Borrowers with 5 Years tenure are most likely to Charged off","692c4adb":"***As we can't predict the result of Current brrower loan status whether they will end up\nwith fully paid or charged off so we can drop the records related to it.***","94528b24":"> If the DTI Ratio is more than 13.27 then Borrowers are most likely to Default.","209622ae":"> As all values of policy code are 1 and it doesn't have any impact on loan approval process. Hence dropping the column.","36b790d6":"> Grade is having singnificant impact on Loan Approval Process. Higher the Grade are more likely to Fully Pay and lower the Grade are more likely to Charged Off (A>B>C>D>E>F>G).","46fa3a45":"> Purpose is important Feature as we can see borrower having purpose of major purchase are more likely to Fully Pay and purose of small business are most like to Charged Off.","1c7dfd35":"> sub_grade column is having similar behaviour compared to Grade Feature. so we can drop the sub_grade column to reduce the redundancy.","b23cb81f":"> **Around 14.6% Borrower got defaulted who's average annual income is below 59K USD for the average loan amount of around 11K USD. Hence Lending Club should check before approving such kind of Loan profile.**","809c5cdf":"#### Understanding emp_title\n#### emp_title :The job title supplied by the Borrower when applying for the loan.","7c5cf26d":"> The feature home_ownership reflect an interesting insights, that most of the borrower who stays in Rent or Mortgage are the loan applicant and out of these two who stays in Rent is having higher percentage of Fully Paid.","fec12df2":"> From the Above analysis it is clear than Borrowers having Annual Income less than 59K USD are Most likely to Default.","a5695c4d":"> As all the applicant are using same leanding club url for the loan hence the feature 'url' don't have any impact on Loan approval\nprocess.","28bd615b":"> We could obsere that for the column 'collections_12_mths_ex_med', all the entries are 0 and hence the correlation is NaN.\n\n> Now verfying further for such features.","5cb4b2cc":"> It is really surprising to see that Borrowers who's Income Source are not Verified are most likely to Fully Pay. Where as the Borrowers having a verfied income are most like Charged Off.","4ed421af":"> Most of the Applicant has been issued the Loan in the December Month.","e1d3ad80":"> As the effect of mths_since_last_delinq is almost negligible on the loan status column hence we can drop it.","6162ea63":"#### Understanding the feature desc\n#### desc: loan description provided by the borrower","b6eaf7b9":"> As all values of initial_list_status are 'F' and it doesn't seems to have any impact in the loan approval process. ","1c4b699e":"> The column int_rate is an influential feature in the approval of loan process as the analysis clearly shows that interest rate below 12%\nare most likely to Fully Pay where as interest rate above 12% are most like to Charged off.\n","6e22f5d3":">  Features such as 'loan_amnt', 'funded_amnt', 'funded_amnt_inv' are Highly correlated so any one of the Feature can be chosen,\n Similarly, Features such as total_pymnt', 'total_pymnt_inv', 'total_rec_prncp','total_rec_int' are Highly correlated anyone can be chosen.","185205c2":"##### Undersatnding the Feature 'mths_since_last_delinq'\n##### mths_since_last_delinq: The number of months since the borrower's last delinquency."}}