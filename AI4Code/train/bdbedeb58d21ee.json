{"cell_type":{"977b659d":"code","e39379cc":"code","9788362a":"code","d91adbc2":"code","b26e7880":"code","c71d8f65":"code","f36328aa":"code","66b0dab1":"code","c51bd7f9":"code","e4d355bb":"code","7009b4fc":"code","3d8e228c":"markdown","745de8db":"markdown","570150c2":"markdown","86b1a434":"markdown","0558ae44":"markdown","218aca8d":"markdown","b392a486":"markdown"},"source":{"977b659d":"import numpy as np\nimport pandas as pd\nimport os\nimport matplotlib.pyplot as plt\nimport seaborn as sns\n%matplotlib inline\nimport re\nimport time\nfrom datetime import datetime\nimport matplotlib.dates as mdates\nimport seaborn as sns\nimport matplotlib.ticker as ticker\nfrom urllib.request import urlopen\nfrom bs4 import BeautifulSoup\nimport requests\nfrom datetime import datetime\nimport warnings\nwarnings.filterwarnings('ignore')\nfor dirname, _, filenames in os.walk('\/kaggle\/input'):\n    for filename in filenames:\n        print(os.path.join(dirname, filename))","e39379cc":"def get_data(url):  \n    page = requests.get(url)\n    soup = BeautifulSoup(page.content, 'html.parser')\n    real_estate_data = soup.find_all(\"dl\", class_='dl-horizontal-border')\n    is_property_found = \"Yes\"\n    data_dict = {}\n    data_dict[\"URL\"] = url\n    if real_estate_data:\n        for d in real_estate_data:\n            dt = d.find_all('dt')\n            dd = d.find_all('dd')\n            \n            for i,j in zip(dt, dd):\n                i = i.contents[0].strip()\n                j = j.contents[0].strip()\n                if i == \"Unit Number\":\n                    if j == \"-\":\n                        data_dict[\"Unit Number\"] = np.nan\n                    else:\n                        data_dict[\"Unit Number\"] = j\n                elif i == \"Price\":\n                    data_dict[\"Price(\u00a5)\"] = float(j.replace(\",\",\"\").replace(\"\u00a5\",\"\").strip())\n                elif i == \"Building Name\":\n                    data_dict[\"Building Name\"] = j\n                elif i == \"Available From\":\n                    if \"Please Inquire\" in j:\n                        data_dict[\"Available From\"] = np.nan\n                    else:\n                        data_dict[\"Available From\"] = datetime.strptime(j, '%b %d, %Y')\n                elif i == \"Type\":\n                    data_dict[\"Type\"] = j.replace(\" \", \"\")\n                elif i == \"Size\":\n                    data_dict[\"Size(m\u00b2)\"] = float(j.replace(\"m\u00b2\", \"\").replace(\",\", \"\").strip())\n                elif i == \"Gross Yield\":\n                    data_dict[\"Gross Yield(%)\"] = float(j.replace(\"%\", \"\").strip())\n                elif i == \"Land Rights\":\n                    data_dict[\"Land Rights\"] = j\n                elif i == \"Maintenance Fee\":\n                    data_dict[\"Maintenance Fee(\u00a5\/mnt)\"] = float(j.replace(\"\u00a5\", \"\").replace(\" \/ mth\", \"\").strip().replace(\",\",\"\"))\n                elif i == \"Location\":\n                    data_dict[\"Location\"] = j.replace(\",\", \"\")\n                elif i == \"Occupancy\":\n                    data_dict[\"Occupancy\"] = j\n                elif i == \"Floor\":\n                    data_dict[\"Floor\"] = j.replace(\" \", \"\")\n                elif i == \"Nearest Station\":\n                    data_dict[\"Nearest Station\"] = j.split(\"(\")[0].strip()\n                    if len(j.split(\"(\")) > 1:\n                        if \"walk\" in j:\n                            data_dict[\"Way to Nearest Station\"] = \"Walk\"\n                            data_dict[\"Distance From Station(min)\"] = j.split(\"(\")[1].split(\"min\")[0].strip()\n                        elif \"bus\" in j:\n                            data_dict[\"Way to Nearest Station\"] = \"Bus\"\n                            data_dict[\"Distance From Station(min)\"] = j.split(\"(\")[1].split(\"min\")[0].strip()\n                elif i == \"Layout\":\n                    data_dict[\"Layout\"] = j\n                elif i == \"Year Built\":\n                    data_dict[\"Year Built\"] = j\n                elif i == \"Direction Facing\":\n                    data_dict[\"Direction Facing\"] = j.replace(\",\", \"\")\n                elif i == \"Transaction Type\":\n                    data_dict[\"Transaction Type\"] = j\n                elif i == \"Balcony Size\":\n                    data_dict[\"Balcony Size(m\u00b2)\"] = float(j.replace(\"m\u00b2\", \"\").replace(\",\", \"\").strip())\n                elif i == \"Building Description\":\n                    data_dict[\"Building Description\"] = j.replace(\",\", \"\")\n                elif i == \"Other Expenses\":\n                    j = j.replace(\",\", \"\").replace(\" \", \"\").replace(\"\uff0c\", \"\")\n                    lst = re.findall(r'\\d+', j)\n                    if len(lst) > 0:\n                        lst = [int(i) for i in lst] \n                        data_dict[\"Other Expenses\"] = sum(lst)\n                elif i == \"Parking\":\n                    data_dict[\"Parking Available\"] = j.split()[0].replace(\",\", \"\")\n                    if len(j.split()) > 1:\n                        if j.split()[0].replace(\",\", \"\") == \"Available\":\n                            data_dict[\"Parking Fee(\u00a5\/mnt)\"] = float(j.split()[1].replace(\",\", \"\").replace(\"\u00a5\", \"\").strip())\n                elif i == \"Date Updated\":\n                    if \"Please Inquire\" in j:\n                        data_dict[\"Date Updated\"] = np.nan\n                    else:\n                        data_dict[\"Date Updated\"] = datetime.strptime(j, '%b %d, %Y')\n                elif i == \"Next Update Schedule\":\n                    if \"Please Inquire\" in j:\n                        data_dict[\"Next Update Schedule\"] = np.nan\n                    else:\n                        data_dict[\"Next Update Schedule\"] = datetime.strptime(j, '%b %d, %Y')\n                    \n    else:\n        is_property_found = \"No\"\n    data_dict[\"Is_Prop_Avl\"] = is_property_found\n    return data_dict\n        ","9788362a":"df = pd.read_csv(\"\/kaggle\/input\/japanese-property-urls\/tokyo_property_urls.csv\")\nprint(df.shape)\ndf.drop_duplicates(inplace=True)\ndf.shape","d91adbc2":"urls = df.URL.tolist()\nlen(urls)","b26e7880":"real_estate_df = pd.DataFrame(columns=[\"URL\", \"Is_Prop_Avl\", \"Unit Number\", \"Price(\u00a5)\", \"Building Name\", \"Floor\", \"Available From\", \"Type\", \"Size(m\u00b2)\", \"Gross Yield(%)\",\n                                      \"Land Rights\", \"Maintenance Fee(\u00a5\/mnt)\", \"Location\", \"Occupancy\", \"Nearest Station\", \"Way to Nearest Station\", \"Distance From Station(min)\",\n                                      \"Layout\", \"Year Built\", \"Direction Facing\", \"Transaction Type\", \"Balcony Size(m\u00b2)\", \"Building Description\", \"Other Expenses\",\n                                      \"Parking Available\", \"Parking Fee(\u00a5\/mnt)\", \"Date Updated\", \"Next Update Schedule\"])\nfor url in urls:\n    res = get_data(url)\n    real_estate_df = real_estate_df.append(res, ignore_index=True)\n\n","c71d8f65":"real_estate_df.to_csv(\"real_estate.csv\")\nreal_estate_df.head(10)","f36328aa":"df = real_estate_df[real_estate_df.Is_Prop_Avl == \"Yes\"]\ndf.shape","66b0dab1":"df.head()","c51bd7f9":"df.describe()","e4d355bb":"df[\"Price(\u00a5)\"].hist()","7009b4fc":"df[\"Size(m\u00b2)\"].hist(bins=10)","3d8e228c":"## Save to file ","745de8db":"## Scrape Data","570150c2":"## BeautifulSoup","86b1a434":"## Histogram","0558ae44":"## Data Cleaning","218aca8d":"# Web Scraping for real estate tokyo.\nThis dataset is really great to start with web scraping. I would like to thank Author of this dataset for providing this dataset.\n* Beatifulsoup\n* Data Cleaning\n* Scrape Data\n* Save to file\n* Histogram","b392a486":"## Please **UPVOTE** if you like the work. It will motivate me!"}}