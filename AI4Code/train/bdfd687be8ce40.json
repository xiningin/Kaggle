{"cell_type":{"d736b3ca":"code","c128bfa6":"code","e9e574f4":"code","428c5086":"code","970aa76a":"code","d7e474e7":"code","747d9be3":"code","59fe49bc":"code","70397bbb":"code","e5f32578":"code","e960b0d2":"code","1f397576":"code","ff72cb18":"code","3fa0d1cb":"code","a2d42bc6":"code","689f8547":"code","dc79b7eb":"code","7f8583b4":"code","d5106dc1":"code","a91558a5":"code","09555666":"code","461c536a":"code","8acd72ae":"code","3d46428a":"code","091f14ba":"code","88357c61":"code","2c23c33d":"code","db7d3481":"code","e63c5da3":"code","6b74aad1":"code","c94d1d1b":"code","e09752f3":"code","438a397a":"code","db97f6ac":"code","9f040c9f":"code","e52b9bbe":"code","df56f199":"code","e6ce3920":"code","77cfd153":"code","01e730e9":"code","d443f571":"code","c61b0d1e":"code","68e098d8":"code","9edb3dd2":"code","ec77e400":"code","ccf9471b":"code","15f51985":"code","093ef7a5":"code","dbcbe333":"code","5bb2c2be":"code","1eb63b2d":"code","74b0bf9c":"code","f3ce6904":"code","4cb537d4":"code","0a8d30f0":"code","3baf466c":"code","1ff0dfe1":"code","0686d325":"code","37d617e5":"code","e5e839da":"code","59842d93":"code","bfb2b890":"code","26428b82":"code","5ef850b5":"code","5a227e26":"code","31137bbd":"code","71ad5089":"code","60d13a0b":"code","a6130662":"code","93803781":"code","1790d607":"code","4aedc07b":"code","29bbccb4":"code","1a5239b8":"code","d7da348c":"code","6c938528":"code","6f7c64ed":"code","51c582f5":"code","667c77e8":"code","8a932598":"code","35b012b4":"code","f34c649f":"code","7101155a":"code","bac72e84":"code","965e87ca":"code","99665657":"code","08c47d99":"code","f7eff26e":"code","0fe06f6e":"code","4a1f5dfe":"code","bd44301b":"code","25f21ce7":"code","47a2b792":"code","73274a63":"code","5d4edb5f":"code","8337cfa5":"code","93fd8a81":"code","a9a3f144":"code","795cd34c":"code","c3439e58":"code","bf2d895c":"code","e5d82bc0":"code","365eaa57":"code","4ec7e509":"code","016e718c":"code","04601f81":"code","96b43c69":"code","64c63310":"code","48f46c87":"code","8aaf20ad":"code","2e1305a7":"code","a270a73c":"code","8b879609":"code","52dd235b":"code","6a889631":"code","2529ea9b":"code","382641f3":"code","0553d658":"code","b4cd6bc1":"code","dafab020":"code","b31f98a8":"code","c7f2e7aa":"code","5f6a56e0":"code","0ddab8fd":"code","408b6452":"code","33d606e7":"code","e29a1860":"code","2c56747e":"code","13b44b15":"code","026d5e6a":"code","b323fe7b":"code","cfdffc76":"code","0e704d99":"code","e5ac413d":"code","7eb8adf1":"code","4c6e0bb5":"code","21b10f19":"code","31e69417":"code","acb15c67":"code","355d56eb":"code","8240ad4f":"code","f41d0d32":"code","c3deeb75":"code","66dc9da3":"code","754ba431":"code","3c3b8207":"code","546473c6":"code","cc3ab75c":"code","471d19a5":"code","4cd3dd8c":"code","1f4e0665":"code","160a4fd2":"code","61b58db4":"code","389404d0":"code","c97f3325":"code","6407b814":"code","f073bff0":"code","df216e3b":"code","c9597aa7":"code","b8eb0b62":"code","0842fe74":"code","00a74a6e":"code","1c3d4bee":"code","e975940b":"code","3d0908d1":"code","a3ad9b08":"code","026081fa":"code","33c1d739":"code","a6476fa9":"code","0f0b991c":"code","e5f4b4c4":"code","fe444e88":"code","8ca121cc":"code","c62218da":"code","6ce67964":"code","4aaf4e5e":"code","8a5b330c":"code","e0e04236":"code","a40ee1ef":"code","931989a4":"code","f05c6e9a":"code","32629112":"code","6563f37f":"code","4e5f72c7":"code","ac4034e6":"code","6043be7f":"code","c7372a4a":"code","505b179f":"code","0213b694":"code","9838a707":"code","9d34b60d":"code","58870f37":"code","ee522a7e":"code","a4ee82b2":"code","a9e9f2fb":"code","0bef5732":"code","f0547dc1":"code","e8248d6d":"code","aa36f8d4":"code","b525bc4f":"code","d4d1cfe8":"code","59d5e698":"code","d4336725":"markdown","f15dea83":"markdown","275010ed":"markdown","4821117f":"markdown","dfe193b0":"markdown","470eea30":"markdown","046545a2":"markdown","7420344e":"markdown","73956572":"markdown","c70e25e6":"markdown","089f6422":"markdown","985cea03":"markdown","2a2f50ac":"markdown","86058cbd":"markdown","89877348":"markdown","fb22e534":"markdown","e18a4781":"markdown","324c12f9":"markdown","b40eaf7c":"markdown","40db825a":"markdown","613ec3f9":"markdown","ed83de70":"markdown","064f15bd":"markdown","6d1efeec":"markdown","34485da9":"markdown","b75abb37":"markdown","e9f5ef02":"markdown","918bd3c5":"markdown","4dd3d970":"markdown","5374993d":"markdown","351af099":"markdown","262666e4":"markdown","5efd99d1":"markdown","bf40f062":"markdown","fab6778e":"markdown","5c8c6d8c":"markdown","5e87c181":"markdown","26be9c62":"markdown","c69cb270":"markdown","6e3f6fe6":"markdown","1f766dd9":"markdown","2377ca1b":"markdown","58fb30f0":"markdown","dc7f2379":"markdown","ef7bf1eb":"markdown","d91d1ff7":"markdown","177c7275":"markdown","fac8ceae":"markdown","cfa5c1d1":"markdown","990abf81":"markdown","46895e66":"markdown","cf744705":"markdown","d134720b":"markdown","55a9804f":"markdown","e40c5302":"markdown","90e413f9":"markdown","9c36b4d1":"markdown","cf8290da":"markdown","893a1ca4":"markdown","4a998336":"markdown","c3d5b993":"markdown","d9b55349":"markdown","e6f703cf":"markdown","dc9ba354":"markdown","dcf788af":"markdown","45bfb076":"markdown","679bd0d6":"markdown","602875aa":"markdown","579b8124":"markdown","c2501cf3":"markdown","74d8c4e9":"markdown","fed8165b":"markdown","72c31c92":"markdown","d135a1ec":"markdown","3547ee37":"markdown","d25e7ad2":"markdown","eab44227":"markdown","4bfd7bca":"markdown","04d506ef":"markdown","7caaf2ff":"markdown","5dfc999c":"markdown","6634a540":"markdown","bc1c708c":"markdown","8dd099aa":"markdown","77274cdd":"markdown","bcb12b1c":"markdown","4d68cb09":"markdown","d7e3dc83":"markdown","453b70ff":"markdown","940a1c75":"markdown","07c0a202":"markdown","572f9b09":"markdown","6ccbddfb":"markdown","fef7ffce":"markdown","6af01a1e":"markdown","e04d87f6":"markdown","5dba8344":"markdown","0830c273":"markdown","1d1ee449":"markdown","8c52b1f8":"markdown","655681f5":"markdown","f1eb5c0a":"markdown","c25d2258":"markdown","05fc3222":"markdown","fec4be71":"markdown","22aae4c5":"markdown","8c02282c":"markdown","3a8426aa":"markdown","633e5076":"markdown","85ec9e95":"markdown","035b8c2a":"markdown","4074dc77":"markdown","505709b8":"markdown","e452661e":"markdown","0eb824b3":"markdown","8ae9f24d":"markdown","dc8248e4":"markdown","736ca72d":"markdown","e6a0c2e0":"markdown","ea715435":"markdown","a432512b":"markdown","5b5e508c":"markdown","ad41081b":"markdown","edd12d9c":"markdown","bd644fde":"markdown","4615ad12":"markdown","c08a28c1":"markdown","3663f45d":"markdown","a20c91c5":"markdown","7c2f99ff":"markdown","4d149d8f":"markdown","99c2323f":"markdown","373d90b0":"markdown","ae0c6795":"markdown","f9228b0c":"markdown","69068581":"markdown","ac1d5765":"markdown","50625690":"markdown","a8bd8893":"markdown","672c1a07":"markdown","7aba727b":"markdown","9c70e9c9":"markdown","2c4e300a":"markdown","7a099b6d":"markdown","7373ffde":"markdown","2cebc8d6":"markdown","414ffe8c":"markdown","037225f0":"markdown","bdacdbcb":"markdown","582bde95":"markdown","96a2682b":"markdown","eda40dfe":"markdown","cdda2dfd":"markdown","61f13ac7":"markdown","a2e71cc2":"markdown","57c2c295":"markdown","f28551f3":"markdown","e49feeb2":"markdown","f26fbe8c":"markdown","f1728bba":"markdown","16c03360":"markdown","27efd0d1":"markdown","cbb70a6f":"markdown","771dd555":"markdown","c3286fa3":"markdown","e85c3495":"markdown","caa147e2":"markdown","2c8e4d07":"markdown","8951905f":"markdown","a2980733":"markdown","5f8d14e6":"markdown","0032a5f7":"markdown","00ebc49b":"markdown","869f68a5":"markdown","e079154c":"markdown","2d532d11":"markdown","535a394e":"markdown","2b73d447":"markdown","69671e11":"markdown","a3c7c38d":"markdown","42249627":"markdown","61b8a7db":"markdown","d9609e58":"markdown","3f0b414b":"markdown","41e052fb":"markdown","dc856b3f":"markdown","c3b5247e":"markdown","e3d64370":"markdown","1839d71d":"markdown","bbcc5e35":"markdown","0bf24e30":"markdown","7160f18b":"markdown","288b5d22":"markdown","b7d8c285":"markdown","b8828903":"markdown","73e87a4d":"markdown","55261308":"markdown","789b7b8c":"markdown","8a21c454":"markdown","6f77d607":"markdown","07dc0df5":"markdown","d8f06fc7":"markdown","f8cace6c":"markdown","ef8bdf6c":"markdown","0084ac86":"markdown","a3a97459":"markdown","a69cdab2":"markdown","65ab44e0":"markdown","00de7061":"markdown","c6e4e33e":"markdown","9beeb222":"markdown","37c6b628":"markdown","58b8961a":"markdown","1ffe7b44":"markdown","90a36eae":"markdown","3e7b0321":"markdown","1c8ba056":"markdown","1ef57b43":"markdown","0043afc8":"markdown","38893074":"markdown","dc532eba":"markdown","3840d006":"markdown","96d1d579":"markdown","5ef05c5d":"markdown","f4e166df":"markdown","abe60494":"markdown","ec93ba96":"markdown","98162624":"markdown","0a3feaea":"markdown","7c244e1f":"markdown","6f36c0dd":"markdown","0e7c0a40":"markdown","1b2e298a":"markdown","dd2c4aee":"markdown","bc9053f3":"markdown","5b04ab0e":"markdown","514518a8":"markdown","f147ace0":"markdown","bbae2de2":"markdown","69854420":"markdown","2fbbf97f":"markdown","81d8e221":"markdown","64629f08":"markdown","4990b1df":"markdown","5404fc55":"markdown","6a8c878d":"markdown","5d28f1c1":"markdown","f4c1d870":"markdown","80a631f0":"markdown","8ea227cb":"markdown","34ae7f73":"markdown","56119e82":"markdown","773698c6":"markdown","646e2e45":"markdown","9cb56022":"markdown","1fc5a9eb":"markdown","0a7995ab":"markdown","d45fbe3d":"markdown","02d2a520":"markdown","89e2b503":"markdown","9794ef36":"markdown","0b92fbf1":"markdown","690913fe":"markdown","f271c785":"markdown","e78b67d6":"markdown","250a7b56":"markdown","d7ac544c":"markdown"},"source":{"d736b3ca":"# Import libraries\nimport pandas as pd\nimport numpy as np\n\nimport seaborn as sns\nimport matplotlib.pyplot as plt\nimport matplotlib.ticker as ticker\n%matplotlib inline\n\nimport json\nimport ast\n\nfrom wordcloud import WordCloud, STOPWORDS\nimport nltk\nfrom nltk.probability import FreqDist\n\nfrom collections import Counter\n\nimport plotly.graph_objs as go\nfrom plotly.offline import init_notebook_mode, iplot\n\ninit_notebook_mode(connected=True)","c128bfa6":"# Load train and test data\ntrain = pd.read_csv('..\/input\/tmdb-box-office-prediction\/train.csv')\ntest = pd.read_csv('..\/input\/tmdb-box-office-prediction\/test.csv')\n\n# Print shape of train and test data\nprint('Train data shape: ', train.shape)\nprint('Test data shape: ', test.shape)","e9e574f4":"# Lets inspect some sample rows from train data\ntrain.sample(3)\n\n# Lots of features are dictionaries so we will need to take closer look to them.\n# Some features like homepage cound be binarized.","428c5086":"# Describe train data\ntrain.describe()","970aa76a":"# Inspect test data\ntest.sample(3)","d7e474e7":"# Check missing data\npd.concat([train.isnull().sum(), test.isnull().sum()], keys=['train','test'], axis=1, sort=False)","747d9be3":"# How many missing values have feature in train and test set.\ndef how_many_missing_values(feature):\n    print('Missing {} in train set: {}\/{} ({}%)'.format(feature,\n                                                        train[feature].isnull().sum(), \n                                                        train[feature].size,\n                                                        train[feature].isnull().sum()\/train[feature].size))\n\n    print('Missing {} in test set: {}\/{} ({}%)'.format(feature,\n                                                       test[feature].isnull().sum(), \n                                                       test[feature].size,\n                                                       test[feature].isnull().sum()\/test[feature].size))","59fe49bc":"# Remove id feature\n#train.drop(labels=['id'], axis=1, inplace=True)\n#test.drop(labels=['id'], axis=1, inplace=True)","70397bbb":"# Count uniqe values for belongs_to_collection\ntrain['belongs_to_collection'].value_counts().head(10)","e5f32578":"# Get the collection name\ndef get_collection_name(dataset):\n    return dataset['belongs_to_collection'].fillna(0).apply(lambda x: eval(x)[0]['name'] if x != 0 else 0)\n\n# Check if movie belongs to collection\ndef is_belonging_to_collection(dataset):\n    return dataset['belongs_to_collection'].fillna(0).apply(lambda x: 1 if x != 0 else 0)\n\n# New feature collection name\ntrain['collection_name'] = get_collection_name(train)\ntest['collection_name'] = get_collection_name(test)\n\n# Change belongs_to_collection to bool\ntrain['belongs_to_collection'] = is_belonging_to_collection(train)\ntest['belongs_to_collection'] = is_belonging_to_collection(test)","e960b0d2":"sns.countplot(train['belongs_to_collection'])\ntrain['belongs_to_collection'].value_counts()","1f397576":"# train['collection_name'].value_counts()\ntrain[train['belongs_to_collection'] == 1]['collection_name'].value_counts().head(10).plot(kind='bar')","ff72cb18":"sns.boxplot(x='belongs_to_collection', y='revenue', data=train)","3fa0d1cb":"(train[train['belongs_to_collection'] == 1].groupby('collection_name')['revenue']\n .agg('sum').sort_values(ascending=False).head(20).plot(kind='bar'))","a2d42bc6":"g = sns.catplot(x='collection_name', y='revenue', data=train[train['belongs_to_collection'] == 1],\n                order=train[train['belongs_to_collection'] == 1].groupby('collection_name')['revenue']\n                .agg('sum').sort_values(ascending=False).head(20).index, aspect=3)\ng.set_xticklabels(rotation=90)","689f8547":"(train[train['belongs_to_collection'] == 1].groupby('collection_name')['revenue']\n .agg('mean').sort_values(ascending=False).head(20).plot(kind='bar'))","dc79b7eb":"train[['title','budget']].sort_values(by='budget',ascending=False).head(10)","7f8583b4":"sns.lmplot(x='budget', y='revenue', data=train, height=5, aspect=2)","d5106dc1":"sns.boxplot(x='belongs_to_collection', y='budget', data=train)","a91558a5":"# Create new features for ratio and profit\ntrain = train.assign(ratio = lambda df: df['revenue']\/df['budget'])\ntrain = train.assign(profit = lambda df: df['revenue']-df['budget'])","09555666":"# Get Top 10 movies with biggest revenue\/budget ratio.\ntrain[train['budget'] > 0][['title','budget','revenue','ratio','profit']].sort_values(by='ratio', ascending=False).head(10)","461c536a":"# Get Top 10 movies with the biggest budget\ntrain[['title','budget','revenue','ratio','profit']].sort_values(by='budget', ascending=False).head(10)","8acd72ae":"# Plot movies with the biggest profit\ntrain.sort_values(by='profit', ascending=False).head(10).plot(x='title', y='profit', kind='barh')","3d46428a":"# Get movies that made profit\ntrain['made_profit'] = train['profit'] > 0\nsns.countplot(x='made_profit', data=train)\ntrain['made_profit'].value_counts()","091f14ba":"# Show top five rows\ntrain['genres'].head(5)","88357c61":"# Parse json data\ndef parse_json(x):\n    try: return json.loads(x.replace(\"'\", '\"'))\n    except: return ''\n    \n# Parse genres\ntrain['genres'] = train['genres'].apply(parse_json)","2c23c33d":"# Get number of genres for movies\ntrain['genres'].apply(len).hist(bins=8)\nprint('Mean: ', train['genres'].apply(len).mean())","db7d3481":"# Get the number of genres as a new feature\ntrain['number_of_genres'] = train['genres'].apply(len)","e63c5da3":"# Get budget, revenue, profit data for movies based on number of genres\n(train.groupby('number_of_genres')[['budget','revenue','profit']].agg(['mean','median','count'])\n .sort_values(by=('profit','mean'), ascending=False))","6b74aad1":"# Get top 4 genres\ndef top_genres(genres):\n    if len(genres) == 1:\n        return pd.Series([genres[0]['name'], '', '', ''], \n                         index=['genre1', 'genre2', 'genre3', 'genre4'])\n    if len(genres) == 2:\n        return pd.Series([genres[0]['name'], genres[1]['name'], '', ''], \n                         index=['genre1', 'genre2', 'genre3', 'genre4'])\n    if len(genres) == 3:\n        return pd.Series([genres[0]['name'], genres[1]['name'], genres[2]['name'], ''], \n                         index=['genre1', 'genre2', 'genre3', 'genre4'])\n    if len(genres) > 3:\n        return pd.Series([genres[0]['name'], genres[1]['name'], genres[2]['name'], genres[3]['name']], \n                         index=['genre1', 'genre2', 'genre3', 'genre4'])\n    return pd.Series(['','','',''], index=['genre1','genre2','genre3','genre4'])\n\ntrain[['genre1', 'genre2', 'genre3', 'genre4']] = train['genres'].apply(top_genres)","c94d1d1b":"genres_df = pd.concat([train['genre1'].value_counts(), train['genre2'].value_counts(), \n                       train['genre3'].value_counts(), train['genre4'].value_counts()], \n                      axis=1, sort=False)\ngenres_df['sum'] = genres_df.sum(axis=1)\n\n# Show genres data\ngenres_df","e09752f3":"genres_df[~genres_df.index.isin([''])]['sum'].plot(kind='pie', figsize=(9,9))","438a397a":"genres_df[~genres_df.index.isin([''])][['genre1','genre2','genre3','genre4']].plot(kind='pie', subplots='True', \n                                                                                   figsize=(15,15), layout=(2,2), \n                                                                                   legend=False, \n                                                                                   title=['Genre 1','Genre 2',\n                                                                                          'Genre 3','Genre 4'])","db97f6ac":"sns.catplot(x='genre1', y='revenue', data=train, \n            order=train.groupby('genre1')['revenue'].mean().sort_values(ascending=False).index, \n            kind='box', height=4, aspect=5)","9f040c9f":"sns.catplot(x='genre1', y='budget', data=train, \n            order=train.groupby('genre1')['budget'].mean().sort_values(ascending=False).index, \n            kind='box', height=4, aspect=5)","e52b9bbe":"sns.catplot(x='genre1', y='profit', data=train, \n            order=train.groupby('genre1')['profit'].mean().sort_values(ascending=False).index, \n            kind='box', height=4, aspect=5)","df56f199":"train['homepage'].notnull().value_counts().plot(kind='pie', autopct='%1.1f%%')","e6ce3920":"# Create new feature describing if a movie have a homepage.\ntrain['has_homepage'] = train['homepage'].notnull()\ntest['has_homepage'] = test['homepage'].notnull()","77cfd153":"# Remove homepage feature\n#train.drop(labels=['homepage'], axis=1, inplace=True)\n#test.drop(labels=['homepage'], axis=1, inplace=True)","01e730e9":"sns.boxplot(x='has_homepage', y='revenue', data=train)","d443f571":"sns.boxplot(x='has_homepage', y='budget', data=train)","c61b0d1e":"plt.figure(figsize=(15,5))\nsns.lineplot(x='budget', y='profit', hue='has_homepage', data=train, style='has_homepage')","68e098d8":"# Delete imdb_id feature\n# train.drop(labels=['imdb_id'], axis=1, inplace=True)\n# test.drop(labels=['imdb_id'], axis=1, inplace=True)","9edb3dd2":"plt.figure(figsize=(15,5))\nsns.countplot(x='original_language', data=train, order=train['original_language'].value_counts().index)","ec77e400":"(train.groupby('original_language')['revenue'].mean().sort_values(ascending=False)\n .plot(kind='barh', figsize=(12,6), title='Which original language had the highest revenue?'))","ccf9471b":"(train.groupby('original_language')['profit'].mean().sort_values(ascending=False)\n .plot(kind='barh', figsize=(12,6), title='How original language affects profit?'))","15f51985":"# Get all orginal titles\ntext = ' '.join(train['original_title'])\n\n# Generate WordCloud from titles\nwordcloud = WordCloud(max_font_size=None, background_color='white', width=1200, height=600).generate(text)\n\n# Display wordcloud\nplt.figure(figsize=(12,6))\nplt.imshow(wordcloud, interpolation='bilinear')\nplt.axis('off')\nplt.show()","093ef7a5":"# Get top 10 words in orginal title\nstopwords = set(STOPWORDS)\nwords = text.lower().split(' ')\nwords = [word for word in words if (word not in stopwords and len(word) > 2)]\ntop_words = FreqDist(words).most_common(10)\ntop_words","dbcbe333":"# Get only words from top_words\nwords = []\nfor word, _ in top_words:\n    words.append(word)\n\nhas_popular_words = train['original_title'].apply(lambda title: len([True for word in words if (word in title.lower())]))\n(pd.concat([train['revenue'], has_popular_words], axis=1).groupby('original_title')['revenue'].mean()\n .plot(kind='bar', title='Popular words in title vs revenue'))","5bb2c2be":"text = ' '.join(train['overview'].astype(str))\n\nwordcloud = WordCloud(max_font_size=None, background_color='white', width=1200, height=600).generate(text)\n\nplt.figure(figsize=(12,6))\nplt.imshow(wordcloud, interpolation='bilinear')\nplt.axis('off')\nplt.show()","1eb63b2d":"train['popularity'].describe()","74b0bf9c":"train[['original_title','popularity']].sort_values(by='popularity', ascending=False).head(10)","f3ce6904":"sns.jointplot(x='budget', y='popularity', data=train, kind='reg')","4cb537d4":"sns.lmplot(x='popularity', y='revenue', data=train)","0a8d30f0":"sns.lmplot(x='popularity', y='profit', data=train)","3baf466c":"# Drop poster_path feature\n#train.drop(labels=['poster_path'], axis=1, inplace=True)\n#test.drop(labels=['poster_path'], axis=1, inplace=True)","1ff0dfe1":"train['production_companies'] = train['production_companies'].apply(parse_json)\ntrain['production_companies'].apply(len).value_counts().sort_index().plot(kind='bar')","0686d325":"# Get only list of names from list of directories\ndef parse_to_names(l):\n    return [str(x['name']) for x in l]\n\ncompanies = Counter(','.join(train['production_companies'].apply(parse_to_names)\n                             .apply(lambda x: ','.join(x))).split(',')).most_common(21)\nc = []\nv = []\nfor x in companies[1:-1]:\n    c.append(x[0])\n    v.append(x[1])\n\ndf = pd.DataFrame(data={'company':c, 'count':v})\n\ng = sns.barplot(x='company', y='count', data=df).set_xticklabels(rotation=90, labels=df['company'])","37d617e5":"# Get full list of unique values from selected json feature\ndef get_list(df, feature):\n    l = []\n    for row in df[feature].apply(parse_to_names):\n        l.extend(x for x in row if x not in l)\n    return l\n\n# Get companies names\ncompanies = get_list(train, 'production_companies')\n\n# Show five top entries\ncompanies[:5]","e5e839da":"# One hot encode all elements from list l with all movies based on json feature\n# Returns new dataframe with one hot encoded data\ndef list_one_hot_encoding(df, feature, l):\n    new_df = df.copy()\n    for x in l:\n        new_df[x] = df[feature].apply(parse_to_names).apply(lambda y: 1 if x in y else 0)\n    return new_df\n            \n# One hot encoding of prodction companies\ncompanies_df = list_one_hot_encoding(train, 'production_companies', companies)","59842d93":"# Show top rows of encoded production companies\ncompanies_df[companies[:5]].head()","bfb2b890":"# Create new dataframe with aggregated data for passed list 'l' based on 'df' dataframe.\n# name - name of elements in list\n# Return new dataframe(name, movies_produced, most_popular_genre1, genre_1_count, top_language, language_count,\n#                      mean_popularity, mean_budget, mean_revenue, mean_profit)\ndef aggregate_data(df, l, name):\n    aggregated_df = pd.DataFrame(columns=[name, 'movies_produced', 'most_popular_genre1', 'genre1_count',\n                                          'top_language', 'language_count', 'mean_popularity', 'mean_budget', \n                                          'mean_revenue', 'mean_profit'])\n    for x in l:\n        # Group data by element from the list and get its group\n        group_df = df.groupby(x).get_group(1)\n        \n        # Create new row data and append it to dataframe\n        aggregated_df = aggregated_df.append({name: x,\n                                              'movies_produced': group_df['id'].count(),\n                                              'most_popular_genre1': group_df['genre1'].value_counts().index[0],\n                                              'genre1_count': group_df['genre1'].value_counts()[0],\n                                              'top_language': group_df['original_language'].value_counts().index[0],\n                                              'language_count': group_df['original_language'].value_counts()[0],\n                                              'mean_popularity': group_df['popularity'].mean(),\n                                              'mean_budget': group_df['budget'].mean(),\n                                              'mean_revenue': group_df['revenue'].mean(),\n                                              'mean_profit': group_df['profit'].mean()},\n                                             ignore_index=True)\n        \n    # Return dataframe with aggregate data\n    return aggregated_df\n        \n# Get aggregate companies data\ncompanies_df = aggregate_data(companies_df, companies, 'company')\n\n# Show top rows of companies dataframe\ncompanies_df.head()","26428b82":"# Plot with number of movies produced by each company was done earlier by different method.\n# Which company produced the most movies?\n#sns.barplot(x='company', y='movies_produced', data=companies_df.sort_values(by='movies_produced', ascending=False).head(20))","5ef850b5":"g = sns.catplot(x='company', y='genre1_count', hue='most_popular_genre1', \n                data=companies_df.sort_values(by='movies_produced', ascending=False).head(20), aspect=3)\ng.set_xticklabels(rotation=90)","5a227e26":"plt.figure(figsize=(15,5))\ng = (sns.barplot(x='company', y='mean_popularity', \n                data=companies_df.sort_values(by='mean_popularity', ascending=False).head(20))\n     .set_xticklabels(rotation=90, labels=companies_df.sort_values(by='mean_popularity', ascending=False)\n                      .head(20)['company']))","31137bbd":"companies_df.sort_values(by='mean_popularity', ascending=False)[['company','movies_produced']].head(20)","71ad5089":"tmp = companies_df[companies_df['movies_produced'] > 5].sort_values(by='mean_popularity', ascending=False).head(20)\n\nplt.figure(figsize=(15,5))\ng = sns.barplot(x='company', y='mean_popularity', data=tmp).set_xticklabels(rotation=90, labels=tmp['company'])","60d13a0b":"tmp = companies_df[companies_df['movies_produced'] > 5].sort_values(by='mean_budget', ascending=False).head(20)\n\nplt.figure(figsize=(15,5))\ng = sns.barplot(x='company', y='mean_budget', data=tmp).set_xticklabels(rotation=90, labels=tmp['company'])","a6130662":"tmp = companies_df[companies_df['movies_produced'] > 5].sort_values(by='mean_revenue', ascending=False).head(20)\n\nplt.figure(figsize=(15,5))\ng = sns.barplot(x='company', y='mean_revenue', data=tmp).set_xticklabels(rotation=90, labels=tmp['company'])","93803781":"tmp = companies_df[companies_df['movies_produced'] > 5].sort_values(by='mean_profit', ascending=False).head(20)\n\nplt.figure(figsize=(15,5))\ng = sns.barplot(x='company', y='mean_profit', data=tmp).set_xticklabels(rotation=90, labels=tmp['company'])","1790d607":"# Delete companies dataframe from memory\ndel companies_df","4aedc07b":"# Show random values\ntrain['production_countries'].sample(5)","29bbccb4":"train['production_countries'].apply(parse_json).apply(len).value_counts().plot(kind='bar')","1a5239b8":"# Create new feature 'number of production countries'\ntrain['production_countries_count'] = train['production_countries'].apply(parse_json).apply(len)\ntest['production_countries_count'] = test['production_countries'].apply(parse_json).apply(len)","d7da348c":"# Parse countries to json\ntrain['production_countries'] = train['production_countries'].apply(parse_json)","6c938528":"# Get list of unique production countries\ncountries = get_list(train, 'production_countries')\n\n# Get countries data\ncountries_df = aggregate_data(list_one_hot_encoding(train, 'production_countries', countries), countries, 'country')\n\n# Show top rows of countries dataframe\ncountries_df.head(5)","6f7c64ed":"len(countries)","51c582f5":"tmp = countries_df[countries_df['movies_produced'] > 5].sort_values(by='mean_popularity', ascending=False).head(20)\n\nplt.figure(figsize=(15,5))\ng = sns.barplot(x='country', y='mean_popularity', data=tmp).set_xticklabels(rotation=90, labels=tmp['country'])","667c77e8":"tmp = countries_df[countries_df['movies_produced'] > 5].sort_values(by='mean_budget', ascending=False).head(20)\n\nplt.figure(figsize=(15,5))\ng = sns.barplot(x='country', y='mean_budget', data=tmp).set_xticklabels(rotation=90, labels=tmp['country'])","8a932598":"tmp = countries_df[countries_df['movies_produced'] > 5].sort_values(by='mean_revenue', ascending=False).head(20)\n\nplt.figure(figsize=(15,5))\ng = sns.barplot(x='country', y='mean_revenue', data=tmp).set_xticklabels(rotation=90, labels=tmp['country'])","35b012b4":"tmp = countries_df[countries_df['movies_produced'] > 5].sort_values(by='mean_profit', ascending=False).head(20)\n\nplt.figure(figsize=(15,5))\ng = sns.barplot(x='country', y='mean_profit', data=tmp).set_xticklabels(rotation=90, labels=tmp['country'])","f34c649f":"# Delete coutries dataframe from memory\ndel countries_df","7101155a":"# Top 'release_date' rows\ntrain['release_date'].head(10)","bac72e84":"# Convert correctly year from YY to YYYY format.\ndef convert_date(date):\n    date = date.split('\/')\n    if int(date[2]) < 19:\n        date[2] = '20' + date[2]\n    else:\n        date[2] = '19' + date[2]\n    return '\/'.join(date)","965e87ca":"# Convert year (when you only use pandas to_datatime function, you will get wrong dates)\ntrain['release_date'] = train['release_date'].apply(convert_date)\n\n# Convert data to daytime64 type\ntrain['release_date'] = pd.to_datetime(train['release_date'])\n\n# Show converted data\ntrain['release_date'].head(5)","99665657":"# Split data to parts as new features\ntrain['release_date_year'] = train['release_date'].map(lambda x: x.year)\ntrain['release_date_month'] = train['release_date'].map(lambda x: x.month)\ntrain['release_date_day'] = train['release_date'].map(lambda x: x.day)\ntrain['release_date_day_of_week'] = train['release_date'].apply(lambda x: x.dayofweek)","08c47d99":"tmp = train['release_date_year'].value_counts()\n\nplt.figure(figsize=(15,5))\nax = sns.lineplot(x=tmp.index, y=tmp.values)\nax.xaxis.set_major_locator(ticker.MultipleLocator(5))\nax.xaxis.set_minor_locator(ticker.MultipleLocator(1))","f7eff26e":"sns.countplot(x='release_date_month', data=train)","0fe06f6e":"plt.figure(figsize=(10,5))\nsns.countplot(x='release_date_day', data=train)","4a1f5dfe":"sns.countplot(x='release_date_day_of_week', data=train)","bd44301b":"tmp = train.groupby(by='release_date_year')['popularity'].agg('mean')\n\nplt.figure(figsize=(15,5))\nax = sns.lineplot(x=tmp.index, y=tmp.values)\nax.xaxis.set_major_locator(ticker.MultipleLocator(5))\nax.xaxis.set_minor_locator(ticker.MultipleLocator(1))","25f21ce7":"tmp = train.groupby(by='release_date_month')['popularity'].agg('mean')\n\nplt.figure(figsize=(15,5))\nax = sns.barplot(x=tmp.index, y=tmp.values)","47a2b792":"tmp = train.groupby(by='release_date_day')['popularity'].agg('mean')\n\nplt.figure(figsize=(15,5))\nax = sns.barplot(x=tmp.index, y=tmp.values)","73274a63":"tmp = train.groupby(by='release_date_day_of_week')['popularity'].agg('mean')\n\nplt.figure(figsize=(15,5))\nax = sns.barplot(x=tmp.index, y=tmp.values)","5d4edb5f":"tmp = train.groupby(by='release_date_year')['budget'].agg('mean')\n\nplt.figure(figsize=(15,5))\nax = sns.lineplot(x=tmp.index, y=tmp.values)\nax.xaxis.set_major_locator(ticker.MultipleLocator(5))\nax.xaxis.set_minor_locator(ticker.MultipleLocator(1))","8337cfa5":"tmp = train.groupby(by='release_date_month')['budget'].agg('mean')\n\nplt.figure(figsize=(15,5))\nsns.barplot(x=tmp.index, y=tmp.values)","93fd8a81":"fig, ax = plt.subplots(2, 1, figsize=(15,10))\n\ntmp = train.groupby(by='release_date_day')['budget'].agg('mean')\nsns.barplot(x=tmp.index, y=tmp.values, ax=ax[0])\nax[0].set_title('Average budget in case of day of releasing a movie')\n\ntmp = train.groupby(by='release_date_day_of_week')['budget'].agg('mean')\nsns.barplot(x=tmp.index, y=tmp.values, ax=ax[1])\nax[1].set_title('Average budget in case of releasing a movie in different day of the week')","a9a3f144":"plt.figure(figsize=(15,5))\n\ntmp = train.groupby(by='release_date_year')['revenue'].agg('mean')\nax = sns.lineplot(x=tmp.index, y=tmp.values, label='Revenue')\n\ntmp = train.groupby(by='release_date_year')['profit'].agg('mean')\nax = sns.lineplot(x=tmp.index, y=tmp.values, label='Profit')\n\nax.xaxis.set_major_locator(ticker.MultipleLocator(5))\nax.xaxis.set_minor_locator(ticker.MultipleLocator(1))","795cd34c":"fix, ax = plt.subplots(2, 1, figsize=(15,10))\n\nsns.set_color_codes('pastel')\ntmp = train.groupby(by='release_date_month')['revenue'].agg('mean')\nsns.barplot(x=tmp.index, y=tmp.values, ax=ax[0], label='Revenue', color='r')\n\nsns.set_color_codes('muted')\ntmp = train.groupby(by='release_date_month')['profit'].agg('mean')\nsns.barplot(x=tmp.index, y=tmp.values, ax=ax[0], label='Profit', color='r')\n\nax[0].legend(loc=\"upper left\")\nax[0].set_title('Revenue and profit difference over the months')\n\nsns.set_color_codes('pastel')\ntmp = train.groupby(by='release_date_day')['revenue'].agg('mean')\nsns.barplot(x=tmp.index, y=tmp.values, ax=ax[1], label='Revenue', color='b')\n\nsns.set_color_codes('muted')\ntmp = train.groupby(by='release_date_day')['profit'].agg('mean')\nsns.barplot(x=tmp.index, y=tmp.values, ax=ax[1], label='Profit', color='b')\n\nax[1].legend(loc=\"upper left\")\nax[1].set_title('Revenue and profit difference over the days')","c3439e58":"plt.figure(figsize=(15,5))\n\nsns.set_color_codes('pastel')\ntmp = train.groupby(by='release_date_day_of_week')['revenue'].agg('mean')\nax = sns.barplot(x=tmp.index, y=tmp.values, label='Revenue', color='r')\n\nsns.set_color_codes('muted')\ntmp = train.groupby(by='release_date_day_of_week')['profit'].agg('mean')\nax = sns.barplot(x=tmp.index, y=tmp.values, label='Profit', color='r')\n\nax.legend(loc=\"upper left\")","bf2d895c":"train['runtime'].hist(bins=15)\nprint('Average runtime: ', train['runtime'].mean())\nprint('Std of runtime: ', train['runtime'].std())\nprint('Maximum runtime: ', train['runtime'].max())","e5d82bc0":"plt.figure(figsize=(20, 6))\nsns.lineplot(x='runtime', y='budget', data=train, label='budget')\nsns.lineplot(x='runtime', y='revenue', data=train, label='revenue')\nsns.lineplot(x='runtime', y='profit', data=train, label='profit').set_title('Impact of runtime to budget, revenue and profit')","365eaa57":"plt.figure(figsize=(20,5))\ntmp = train.groupby(by='genre1')['runtime'].mean()\nsns.barplot(x=tmp.index, y=tmp.values)","4ec7e509":"# Show top rows of spoken_languages\ntrain['spoken_languages'].head()","016e718c":"# Parse spoken_languages to json\ntrain['spoken_languages'] = train['spoken_languages'].apply(parse_json)","04601f81":"train['spoken_languages'].apply(len).hist(bins=10)\nprint('Average: ', train['spoken_languages'].apply(len).mean())\nprint('Maximum languages used: ', train['spoken_languages'].apply(len).max())","96b43c69":"# Create new feature representing number of languages spoken in a movie\ntrain['spoken_languages_count'] = train['spoken_languages'].apply(len)","64c63310":"train[train['spoken_languages_count'] >= 6][['original_title','release_date','spoken_languages_count']].sort_values(by='spoken_languages_count')","48f46c87":"sns.barplot(x='spoken_languages_count', y='budget', data=train)","8aaf20ad":"plt.figure(figsize=(15,5))\nsns.barplot(x='spoken_languages_count', y='revenue', data=train, label='revenue')\nsns.lineplot(x='spoken_languages_count', y='profit', data=train, label='profit')","2e1305a7":"train.groupby(by='genre1')['spoken_languages_count'].mean()","a270a73c":"# Get list of languages\nlanguages = get_list(train, 'spoken_languages')\n\n# Get languages data\nlanguages_df = aggregate_data(list_one_hot_encoding(train, 'spoken_languages', languages), languages, 'language')\n\n# Show top rows of languages dataframe\nlanguages_df.head(5)","8b879609":"tmp = languages_df[languages_df['movies_produced'] > 20].sort_values(by='mean_popularity', ascending=False)\n\nplt.figure(figsize=(20,5))\ng = sns.barplot(x='language', y='mean_popularity', data=tmp).set_xticklabels(rotation=90, labels=tmp['language'].values)\n\ntmp[['language','mean_popularity','movies_produced']]","52dd235b":"tmp = languages_df[languages_df['movies_produced'] > 20].sort_values(by='mean_budget', ascending=False)\n\nplt.figure(figsize=(20,5))\ng = sns.barplot(x='language', y='mean_budget', data=tmp).set_xticklabels(rotation=90, labels=tmp['language'].values)\n\ntmp[['language','mean_budget','movies_produced']]","6a889631":"tmp = languages_df[languages_df['movies_produced'] > 20].sort_values(by='mean_profit', ascending=False)\n\nplt.figure(figsize=(20,5))\n\nsns.set_color_codes('pastel')\nax = sns.barplot(x='language', y='mean_revenue', data=tmp, label='mean revenue', color='b')\n\nsns.set_color_codes('muted')\nax = sns.barplot(x='language', y='mean_profit', data=tmp, label='mean profit', color='b')\n\nax.legend(loc='upper right')\n\ntmp[['language','movies_produced','mean_revenue','mean_profit']]","2529ea9b":"# Print unique values for status\nprint('From train set: ', train['status'].unique().tolist())\nprint('From test set: ', test['status'].unique().tolist())","382641f3":"train[train['status'] == 'Rumored'][['original_title','release_date','revenue','status']]","0553d658":"test[test['status'] == 'Rumored'][['original_title','release_date','status']]","b4cd6bc1":"test[test['status'] == 'Post Production'][['original_title','release_date','status']]","dafab020":"test[test['status'].isnull()][['original_title','release_date','status']]","b31f98a8":"# Delete status feature\n#train = train.drop(labels=['status'], axis=1)\n#test = test.drop(labels=['status'], axis=1)","c7f2e7aa":"how_many_missing_values('tagline')","5f6a56e0":"# Create new feature indicating if a movie has a tagline\ntrain['has_tagline'] = train['tagline'].notnull()\ntest['has_tagline'] = test['tagline'].notnull()","0ddab8fd":"# Print sample taglines\ntrain[train['has_tagline']][['original_title','tagline']].sample(10)","408b6452":"# Get all taglines\ntext = ' '.join(train[train['has_tagline']]['tagline'])\n\n# Generate WordCloud from titles\nwordcloud = WordCloud(max_font_size=None, background_color='white', width=1200, height=600).generate(text)\n\n# Display wordcloud\nplt.figure(figsize=(12,6))\nplt.imshow(wordcloud, interpolation='bilinear')\nplt.axis('off')\nplt.show()","33d606e7":"sns.boxplot(x='has_tagline', y='revenue', data=train)","e29a1860":"print('Movies with different titles: ', train[train['title'] != train['original_title']].shape[0])\n\n# Print sample movies with different titles\ntrain[train['title'] != train['original_title']][['original_title', 'title']].sample(10)","2c56747e":"# Create new feature indicating if a movie has different original title and title\ntrain['has_different_titles'] = train['original_title'] != train['title']\ntest['has_different_titles'] = test['original_title'] != test['title']","13b44b15":"sns.boxplot(x='has_different_titles', y='revenue', data=train)","026d5e6a":"how_many_missing_values('Keywords')","b323fe7b":"# Parse to json\ntrain['Keywords'] = train['Keywords'].apply(parse_json)","cfdffc76":"print('Train set Keywords parameters:\\n', train['Keywords'].apply(len).describe())\nax = train['Keywords'].apply(len).hist(bins=30)\nax = test['Keywords'].apply(parse_json).apply(len).hist(bins=30)\n\nax.legend(labels=['train','test'])","0e704d99":"train[train['Keywords'].apply(len) > 100][['original_title','release_date','production_countries','Keywords']]","e5ac413d":"# Get all keywords\ntext = ','.join(train['Keywords'].apply(parse_to_names).apply(lambda x: ','.join(x)))\n\n# Generate WordCloud from titles\nwordcloud = WordCloud(max_font_size=None, background_color='white', width=1200, height=600).generate(text)\n\n# Display wordcloud\nplt.figure(figsize=(12,6))\nplt.imshow(wordcloud, interpolation='bilinear')\nplt.axis('off')\nplt.show()\n","7eb8adf1":"keywords = Counter(text.split(',')).most_common(201)[1:]\n\n# Print keywords\nkeywords","4c6e0bb5":"# Get only keywords from most common keywords list\nkeywords = [x[0] for x in keywords]","21b10f19":"# One hot encode most common keywords\nkeywords_df = list_one_hot_encoding(train, 'Keywords', keywords)","31e69417":"fig, ax = plt.subplots(40,5, figsize=(20,160))\nfor x in range(40):\n    for y in range(5):\n        sns.boxplot(x=keywords[(x*5)+y], y='revenue', data=keywords_df, ax=ax[x][y])","acb15c67":"# From above list let's select keywords that I thought have some impact on revenue.\nkeywords = ['woman director',\n            'independent film',\n            'duringcreditsstinger',\n            'based on novel',\n            'violence',\n            'dystopia',\n            'aftercreditsstinger',\n            'sequel',\n            'los angeles',\n            'new york',\n            '3d',\n            'based on comic',\n            'escape',\n            'alien',\n            'london england',\n            'superhero',\n            'corruption',\n            'martial arts',\n            'dying and death',\n            'brother sister relationship',\n            'soldier',\n            'future',\n            'lawyer',\n            'post-apocalyptic',\n            'magic',\n            'explosion',\n            'time travel',\n            'romantic comedy',\n            'monster',\n            'helicopter',\n            'rescue',\n            'assassin',\n            'cia',\n            'terrorist',\n            'fight',\n            'fbi',\n            'scientist',\n            'zombie',\n            'psychopath',\n            'survival',\n            'competition',\n            'spy',\n            'found footage',\n            'sister sister relationship',\n            'motorcycle',\n            'england',\n            'conspiracy',\n            'fbi agent',\n            'island',\n            'faith',\n            'amnesia',\n            'undercover',\n            'baby',\n            'marvel comic',\n            'california',\n            'assassination',\n            'government',\n            'military',\n            'army',\n            'mountain',\n            'animation',\n            'holiday',\n            'comedy',\n            'robot',\n            'police officer',\n            'parent child relationship',\n            'car crash',\n            'car chase',\n            'jungle',\n            'usa president',\n            'fire',\n            'secret identity',\n            'based on young adult novel',\n            'christmas',\n            'washington d.c.',\n            'super powers',\n            'snow',\n            'mutant',\n            'restaurant',\n            'hero',\n            'dancing',\n            'space',\n            'airport'\n           ]\n\n# List is longer than I assume.","355d56eb":"# Create from selected keywords new features\ntrain = list_one_hot_encoding(train, 'Keywords', keywords)","8240ad4f":"# Remove keywords_df from memory\ndel keywords_df","f41d0d32":"# Parse cast data.\ntrain['cast'] = train['cast'].replace('\\'','\\\"').apply(lambda x: ast.literal_eval(x) if pd.notna(x) else {})","c3deeb75":"print(train['cast'].apply(len).describe())\ntrain['cast'].apply(len).hist(bins=15)","66dc9da3":"(train[train['cast'].apply(len) >= 80][['original_title','release_date','revenue','cast']]\n .assign(cast_count=lambda x: x['cast'].apply(len)).sort_values(by='cast_count'))","754ba431":"# Get all character names\ntext = ','.join(train['cast'].apply(lambda x: [actor['character'] for actor in x]).apply(lambda x: ','.join(x)))\n\n# Generate WordCloud from characters names\nwordcloud = WordCloud(max_font_size=None, background_color='white', width=1200, height=600).generate(text)\n\n# Display wordcloud\nplt.figure(figsize=(12,6))\nplt.imshow(wordcloud, interpolation='bilinear')\nplt.axis('off')\nplt.show()","3c3b8207":"Counter(text.split(',')).most_common(25)","546473c6":"# Count gender values form 'df' dataframe from 'feature' column.\n# Returns Series with gender value counts.\ndef gender_counts(df, feature):\n    gender_count = pd.Series(data=[0,0,0], index=[0,1,2])\n    for row in df[feature]:\n        for person in row:\n            gender_count.loc[person['gender']] += 1\n    return gender_count","cc3ab75c":"tmp = gender_counts(train, 'cast')\nprint(tmp)\n\nsns.barplot(x=tmp.index, y=tmp.values)","471d19a5":"# Create new dataframe with aggregated actors data.\n# Returns new dataframe with columns:\n#  [id, name, movies_played, mean_gender, mean_order, start_year, end_year, \n#   mean_movie_popularity, mean_movie_budget, mean_movie_revenue, mean_movie_profit]\ndef aggregate_actors_data(df):\n    \n    #Create new dataframe for actors data\n    actors_df = pd.DataFrame(columns=['id','name','movies_played','mean_gender','mean_order',\n                                      'start_year','end_year','mean_movie_popularity','mean_movie_budget',\n                                      'mean_movie_revenue','mean_movie_profit'])\n    \n    # Iterate through movies\n    for index, movie in df.iterrows():\n        \n        #Iterate through cast list\n        for actor in movie['cast']:\n            \n            #Chack if actor is already in dataframe\n            if actors_df['id'].isin([actor['id']]).sum() == 0:\n                \n                # If not create new entry for actor\n                actors_df = actors_df.append({'id': actor['id'],\n                                              'name': actor['name'],\n                                              'movies_played': 1,\n                                              'mean_gender': actor['gender'],\n                                              'mean_order': actor['order'],\n                                              'start_year': movie['release_date_year'],\n                                              'end_year': movie['release_date_year'],\n                                              'mean_movie_popularity': movie['popularity'],\n                                              'mean_movie_budget': movie['budget'],\n                                              'mean_movie_revenue': movie['revenue'],\n                                              'mean_movie_profit': movie['profit']\n                                             },\n                                             ignore_index=True)\n            else:\n                # If exists, then update values\n                actors_df.loc[actors_df['id'] == actor['id'], 'movies_played'] += 1\n                actors_df.loc[actors_df['id'] == actor['id'], 'mean_gender'] += actor['gender']\n                actors_df.loc[actors_df['id'] == actor['id'], 'mean_order'] += actor['order']\n                actors_df.loc[actors_df['id'] == actor['id'], 'start_year'] = min(actors_df.loc[actors_df['id'] == actor['id'], 'start_year'].values[0], \n                                                                                  movie['release_date_year'])\n                actors_df.loc[actors_df['id'] == actor['id'], 'end_year'] = max(actors_df.loc[actors_df['id'] == actor['id'], 'end_year'].values[0], \n                                                                                  movie['release_date_year'])\n                actors_df.loc[actors_df['id'] == actor['id'], 'mean_movie_popularity'] += movie['popularity']\n                actors_df.loc[actors_df['id'] == actor['id'], 'mean_movie_budget'] += movie['budget']\n                actors_df.loc[actors_df['id'] == actor['id'], 'mean_movie_revenue'] += movie['revenue']\n                actors_df.loc[actors_df['id'] == actor['id'], 'mean_movie_profit'] += movie['profit']\n\n    # Get mean values\n    actors_df['mean_gender'] = actors_df['mean_gender'] \/ actors_df['movies_played']\n    actors_df['mean_order'] = actors_df['mean_order'] \/ actors_df['movies_played']\n    actors_df['mean_movie_popularity'] = actors_df['mean_movie_popularity'] \/ actors_df['movies_played']\n    actors_df['mean_movie_budget'] = actors_df['mean_movie_budget'] \/ actors_df['movies_played']\n    actors_df['mean_movie_revenue'] = actors_df['mean_movie_revenue'] \/ actors_df['movies_played']\n    actors_df['mean_movie_profit'] = actors_df['mean_movie_profit'] \/ actors_df['movies_played']\n    \n    # Change data types to numeric ones.\n    actors_df['id'] = actors_df['id'].astype('int64')\n    actors_df['movies_played'] = actors_df['movies_played'].astype('int64')\n    actors_df['mean_gender'] = actors_df['mean_gender'].astype('float64')\n    actors_df['mean_order'] = actors_df['mean_order'].astype('float64')\n    actors_df['mean_movie_popularity'] = actors_df['mean_movie_popularity'].astype('float64')\n    actors_df['mean_movie_budget'] = actors_df['mean_movie_budget'].astype('float64')\n    actors_df['mean_movie_revenue'] = actors_df['mean_movie_revenue'].astype('float64')\n    actors_df['mean_movie_profit'] = actors_df['mean_movie_profit'].astype('float64')\n    \n    # Return new dataframe\n    return actors_df","4cd3dd8c":"# Get aggregated actors data\n#actors_df = aggregate_actors_data(train)\n\n# Save actors dataframe to file\n#actors_df.to_csv('..\/actors.csv', index=False)\n\n# Load actors dataframe from file\nactors_df = pd.read_csv('..\/input\/tmdb-box-office-prediction-cast-crew\/actors.csv')\n\n# Show sample actors data\nactors_df.sample(10)","1f4e0665":"# Get all actors names\ntext = ','.join(actors_df['name'])\n\n# Generate WordCloud from actors names\nwordcloud = WordCloud(max_font_size=None, background_color='white', width=1200, height=600).generate(text)\n\n# Display wordcloud\nplt.figure(figsize=(12,6))\nplt.imshow(wordcloud, interpolation='bilinear')\nplt.axis('off')\nplt.show()","160a4fd2":"print('Actors number: ', actors_df.shape[0])","61b58db4":"print('Number of actors that played in only one movie: ', actors_df[actors_df['movies_played'] == 1].shape[0])","389404d0":"# Lets drop all actors that played in only one movie.\n# (Those actors have no meaningful informations. Would only obscure the real picture)\nactors_df = actors_df.drop(actors_df[actors_df['movies_played'] == 1].index, axis=0)","c97f3325":"g = sns.barplot(y='name', x='movies_played', hue='mean_gender', \n                data=actors_df.sort_values(by='movies_played', ascending=False).head(20), palette='rocket')","6407b814":"actors_df['mean_gender'].value_counts()","f073bff0":"actors_df.groupby(by='mean_gender')['movies_played'].mean().plot(kind='pie', legend=False, autopct='%1.0f%%', \n                                                                 labels=['unknown','female','male'])","df216e3b":"sns.barplot(x='mean_gender', y='mean_order', data=actors_df)","c9597aa7":"tmp = actors_df[actors_df['movies_played'] > 7].sort_values(by='mean_order').head(25)\n\nplt.figure(figsize=(10,10))\nsns.barplot(x='mean_order', y='name', data=tmp)","b8eb0b62":"# Calculate years of professional activity\nactors_df = actors_df.assign(years_active=lambda x: x['end_year'] - x['start_year'])\n\nplt.figure(figsize=(10,10))\ntmp = actors_df[actors_df['movies_played'] > 7].sort_values(by='years_active', ascending=False).head(25)\n\nsns.barplot(x='years_active', y='name', data=tmp)","0842fe74":"sns.barplot(x='mean_movie_popularity', y='name', data=actors_df.sort_values(by='mean_movie_popularity', \n                                                                            ascending=False).head(25))","00a74a6e":"actors_df.sort_values(by='mean_movie_popularity',ascending=False).head(25)[['name','movies_played']]","1c3d4bee":"tmp = actors_df[actors_df['movies_played'] >= 10].sort_values(by='mean_movie_popularity', ascending=False).head(40)\nplt.figure(figsize=(10,10))\nsns.barplot(x='mean_movie_popularity', y='name', data=tmp)","e975940b":"tmp = actors_df[actors_df['movies_played'] > 8].sort_values(by='mean_movie_revenue', ascending=False).head(50)\n\ntraces = []\nfor _, row in tmp.iterrows():\n    traces.append(go.Scatter(\n        x=[row['mean_movie_budget']],\n        y=[row['mean_movie_revenue']],\n        name=row['name'],\n        mode='markers'\n    ))\n\nlayout = go.Layout(\n    title = go.layout.Title(text='Actors based on mean movies revenue and budget'),\n    xaxis = go.layout.XAxis(title=go.layout.xaxis.Title(text='Mean movie budget')), \n    yaxis = go.layout.YAxis(title=go.layout.yaxis.Title(text='Mean movie revenue'))\n)\n\nfig = go.Figure(data=traces, layout=layout)\niplot(fig, show_link=False)\n\n# Seaborn version (no interactive)\n#plt.figure(figsize=(16,10))\n#sns.stripplot(x='mean_movie_budget', y='mean_movie_revenue', hue='name', data=tmp)","3d0908d1":"tmp = actors_df[actors_df['movies_played'] > 7].sort_values(by='mean_movie_profit', ascending=False).head(25)\n\nplt.figure(figsize=(10,10))\nsns.barplot(x='mean_movie_profit', y='name', data=tmp)","a3ad9b08":"# Get IDs for top 100 actors that have biggest mean movie revenue.\n# Excluding all actros that played in less than nine movies.\nids = (actors_df[actors_df['movies_played'] > 8]\n       .sort_values(by='mean_movie_revenue', ascending=False)['id'].head(100).values.tolist())","026081fa":"# Check if person worked in a movie.\ndef is_person_in_cast(cast, ids):\n    for person in cast:\n        if person['id'] in ids:\n            return True\n    return False","33c1d739":"# Create new feature indicating if in a movie played any of actors from the above list.\ntrain['has_top_actor'] = train['cast'].apply(lambda x: is_person_in_cast(x, ids))","a6476fa9":"# Get top 6 actors\ndef top_actors(cast):\n    actors = pd.Series(data=['', '', '', '', '', ''],\n                       index=['actor0', 'actor1', 'actor2', 'actor3', 'actor4', 'actor5'])\n    for n in range(min(6, len(cast))):\n        actors.loc['actor{}'.format(n)] = cast[n]['name']\n    return actors","0f0b991c":"# Create new feature for top 6 actors in the cast\ntrain[['actor0', 'actor1', 'actor2', 'actor3', 'actor4', 'actor5']] = train['cast'].apply(top_actors)","e5f4b4c4":"# Remove actors dataframe to free memory\ndel actors_df","fe444e88":"tmp = train.groupby(by='has_top_actor')['revenue'].mean()\nsns.barplot(x=tmp.index, y=tmp.values)\n\nprint('How numerous each group are:\\n', train['has_top_actor'].value_counts())","8ca121cc":"# Parse crew data\ntrain['crew'] = train['crew'].replace('\\'','\\\"').apply(lambda x: ast.literal_eval(x) if pd.notna(x) else {})","c62218da":"# Show histogram\ntrain['cast'].apply(len).hist()\n\n# Describe data\ntrain['cast'].apply(len).describe()","6ce67964":"gender = gender_counts(train, 'crew')\n\nprint('Gender counts:\\n', gender)\n\nsns.barplot(x=gender.index, y=gender.values)","4aaf4e5e":"# Return list of departments\ndef get_departments(df):\n    departments = set()\n    for crew in df:\n        for person in crew:\n            departments.add(person['department'])\n    return list(departments)","8a5b330c":"# Return list of jobs by departments\ndef get_jobs_by_department(df, departments):\n    jobs = {department:set() for department in departments}\n    for crew in df:\n        for person in crew:\n            jobs[person['department']].add(person['job'])\n    return jobs","e0e04236":"# Get list of departments\ndepartments = get_departments(train['crew'])\n\n# Get list of jobs by departments\njobs = get_jobs_by_department(train['crew'], departments)\n\n# Print jobs\njobs","a40ee1ef":"['{}: {}'.format(x, len(jobs[x])) for x in jobs]","931989a4":"# I manually selected below jobs (by my intuition)\nselected_jobs =  ['Casting', 'Original Music Composer', 'Screenplay', 'Director', 'Director of Photography', \n                  'Editor', 'Costume Design', 'Producer', 'Executive Producer']","f05c6e9a":"# Get list of person jobs from crew data\ndef get_person_jobs(df, person_id):\n    person_jobs = set()\n    for crew in df:\n        for person in crew:\n            if person['id'] == person_id:\n                person_jobs.add(person['job'])\n    return list(person_jobs)","32629112":"# Aggregate crew data and return new dataframe with features:\n# [id, name, gender, job, movies_created, start_year, end_year, \n#  mean_movie_popularity, mean_movie_budget, mean_movie_revenue, mean_movie_profit]\ndef aggregate_crew_data(df, jobs):\n    \n    # Create new dataframe\n    crew_df = pd.DataFrame(columns=['id', 'name', 'gender', 'job', 'movies_created', 'start_year', 'end_year',\n                                    'mean_movie_popularity', 'mean_movie_budget','mean_movie_revenue',\n                                    'mean_movie_profit'])\n    \n    # Iterate through movies\n    for index, movie in df.iterrows():\n        \n        # Iterate through crew members\n        for person in movie['crew']:\n            \n            # Check if person works in one of selected jobs\n            if person['job'] in jobs:\n            \n                # Chack if person is already in dataframe\n                if crew_df['id'].isin([person['id']]).sum() == 0:\n\n                    # If not, then add new entry for crew member\n                    crew_df = crew_df.append({'id': person['id'],\n                                              'name': person['name'],\n                                              'gender': person['gender'],\n                                              'job': get_person_jobs(df['crew'], person['id']),\n                                              'movies_created': 1,\n                                              'start_year': movie['release_date_year'],\n                                              'end_year': movie['release_date_year'],\n                                              'mean_movie_popularity': movie['popularity'],\n                                              'mean_movie_budget': movie['budget'],\n                                              'mean_movie_revenue': movie['revenue'],\n                                              'mean_movie_profit': movie['profit']\n                                             },\n                                             ignore_index=True)\n\n                else:\n\n                    # If exists, then update values\n                    crew_df.loc[crew_df['id'] == person['id'], 'movies_created'] += 1\n                    crew_df.loc[crew_df['id'] == person['id'], 'start_year'] = min(crew_df.loc[crew_df['id'] == person['id'], 'start_year'].values[0],\n                                                                                   movie['release_date_year'])\n                    crew_df.loc[crew_df['id'] == person['id'], 'end_year'] = max(crew_df.loc[crew_df['id'] == person['id'], 'end_year'].values[0],\n                                                                                   movie['release_date_year'])\n                    crew_df.loc[crew_df['id'] == person['id'], 'mean_movie_popularity'] += movie['popularity']\n                    crew_df.loc[crew_df['id'] == person['id'], 'mean_movie_budget'] += movie['budget']\n                    crew_df.loc[crew_df['id'] == person['id'], 'mean_movie_revenue'] += movie['revenue']\n                    crew_df.loc[crew_df['id'] == person['id'], 'mean_movie_profit'] += movie['profit']\n            \n    # Get mean values\n    crew_df['mean_movie_popularity'] = crew_df['mean_movie_popularity'] \/ crew_df['movies_created']\n    crew_df['mean_movie_budget'] = crew_df['mean_movie_budget'] \/ crew_df['movies_created']\n    crew_df['mean_movie_revenue'] = crew_df['mean_movie_revenue'] \/ crew_df['movies_created']\n    crew_df['mean_movie_profit'] = crew_df['mean_movie_profit'] \/ crew_df['movies_created']\n    \n    # Change data types to numeric ones\n    crew_df['id'] = crew_df['id'].astype('int64')\n    crew_df['gender'] = crew_df['gender'].astype('int64')\n    crew_df['movies_created'] = crew_df['movies_created'].astype('int64')\n    crew_df['mean_movie_popularity'] = crew_df['mean_movie_popularity'].astype('float64')\n    crew_df['mean_movie_budget'] = crew_df['mean_movie_budget'].astype('float64')\n    crew_df['mean_movie_revenue'] = crew_df['mean_movie_revenue'].astype('float64')\n    crew_df['mean_movie_profit'] = crew_df['mean_movie_profit'].astype('float64')\n    \n    # Return crew dataframe\n    return crew_df","6563f37f":"# Get aggregated crew data\n#crew_df = aggregate_crew_data(train, selected_jobs)\n\n# Save crew dataframe to file\n#crew_df.to_csv('..\/crew.csv', index=False)\n\n# Load crew dataframe from file\ncrew_df = pd.read_csv('..\/input\/tmdb-box-office-prediction-cast-crew\/crew.csv')\n\n# Show sample crew data\ncrew_df.sample(10)","4e5f72c7":"# Remove all crew members with only one movie created and with popularity less than 9.\ncrew_df = crew_df[~((crew_df['movies_created'] == 1) & (crew_df['mean_movie_popularity'] < 9))]","ac4034e6":"tmp = crew_df[['name','job','movies_created']].sort_values('movies_created', ascending=False).head(25)\ntmp['job'] = tmp['job'].apply(lambda x: x[0])\n\nfig, ax = plt.subplots(1,2, figsize=(16,10), gridspec_kw = {'width_ratios':[1, 2]})\nsns.barplot(x='movies_created', y='name', data=tmp, ax=ax[0])\n\nax[1].axis('off')\ntable = ax[1].table(cellText=tmp.values, \n                  rowLabels=tmp.index, \n                  colLabels=tmp.columns, \n                  bbox=[0,0,1,1])\ntable.auto_set_font_size(False)\ntable.set_fontsize(14)","6043be7f":"crew_df = crew_df.assign(years_active=lambda x: x['end_year'] - x['start_year'])\n\ntmp = crew_df[['name','start_year','end_year','years_active']].sort_values(by='years_active', ascending=False).head(25)\n\nfig, ax = plt.subplots(1,2, figsize=(16,10), gridspec_kw = {'width_ratios':[1, 2]})\nsns.barplot(x='years_active', y='name', data=tmp, ax=ax[0])\n\nax[1].axis('off')\ntable = ax[1].table(cellText=tmp.values, \n                  rowLabels=tmp.index, \n                  colLabels=tmp.columns, \n                  bbox=[0,0,1,1])\ntable.auto_set_font_size(False)\ntable.set_fontsize(14)","c7372a4a":"tmp = crew_df[crew_df['movies_created'] > 7].sort_values('mean_movie_popularity', ascending=False).head(50)\n\nplt.figure(figsize=(10,10))\nsns.barplot(x='mean_movie_popularity', y='name', data=tmp)","505b179f":"# Get the list of 'popular' crew members IDs\ncrew_popularity_ids = tmp['id'].values.tolist()","0213b694":"# Create new feature indicating if a movie was created by one of 'popular' crew members\ntrain['has_popular_crew'] = train['crew'].apply(lambda x: is_person_in_cast(x, crew_popularity_ids))","9838a707":"tmp = crew_df[crew_df['movies_created'] > 7].sort_values(by='mean_movie_revenue', ascending=False).head(50)\n\ntraces = []\nfor _, row in tmp.iterrows():\n    traces.append(go.Scatter(\n        x=[row['mean_movie_budget']],\n        y=[row['mean_movie_revenue']],\n        name=row['name'],\n        mode='markers'\n    ))\n\nlayout = go.Layout(\n    title = go.layout.Title(text='Crew members based on mean movies revenue and budget'),\n    xaxis = go.layout.XAxis(title=go.layout.xaxis.Title(text='Mean movie budget')), \n    yaxis = go.layout.YAxis(title=go.layout.yaxis.Title(text='Mean movie revenue'))\n)\n\nfig = go.Figure(data=traces, layout=layout)\niplot(fig, show_link=False)","9d34b60d":"# Get IDs for top 100 crew members that have biggest mean movie revenue.\n# Excluding all crew members that worked on less than eight movies.\ncrew_revenue_ids = crew_df[crew_df['movies_created'] > 7].sort_values(by='mean_movie_revenue', ascending=False).head(100)","58870f37":"# Create new feature indicating if a movie was created by one of crew members with biggest mean revenue\ntrain['has_top_crew'] = train['crew'].apply(lambda x: is_person_in_cast(x, crew_revenue_ids))","ee522a7e":"tmp = crew_df[crew_df['movies_created'] > 7].sort_values(by='mean_movie_profit', ascending=False).head(50)\n\nplt.figure(figsize=(15,10))\n\nsns.set_color_codes('pastel')\nax = sns.barplot(x='mean_movie_revenue', y='name', data=tmp, label='mean revenue', color='b')\n\nsns.set_color_codes('muted')\nax = sns.barplot(x='mean_movie_profit', y='name', data=tmp, label='mean profit', color='b')\n\nax.legend(loc='lower right')","a4ee82b2":"fig = plt.figure(figsize=(15,30))\n\nfor x, job in enumerate(selected_jobs):\n    tmp = (crew_df[(crew_df['job'].apply(lambda x: job in x)) & (crew_df['movies_created'] > 7)]\n           .sort_values('mean_movie_revenue', ascending=False).head(5))\n\n    ax = fig.add_subplot(5,2,x+1)\n    sns.barplot(x='mean_movie_revenue', y='name', data=tmp, ax=ax)\n    ax.set_title(job)","a9e9f2fb":"tmp = (crew_df[(crew_df['job'].apply(lambda x: 'Director' in x)) & (crew_df['movies_created'] > 7)]\n       .sort_values('mean_movie_revenue', ascending=False).head(25))\n\nplt.figure(figsize=(10,10))\nsns.barplot(x='mean_movie_revenue', y='name', data=tmp)","0bef5732":"tmp = (crew_df[(crew_df['job'].apply(lambda x: 'Casting' in x)) & (crew_df['movies_created'] > 7)]\n       .sort_values('mean_movie_revenue', ascending=False).head(25))\n\nplt.figure(figsize=(10,10))\nsns.barplot(x='mean_movie_revenue', y='name', data=tmp)","f0547dc1":"tmp = (crew_df[(crew_df['job'].apply(lambda x: 'Director of Photography' in x)) & (crew_df['movies_created'] > 7)]\n       .sort_values('mean_movie_revenue', ascending=False).head(25))\n\nplt.figure(figsize=(10,10))\nsns.barplot(x='mean_movie_revenue', y='name', data=tmp)","e8248d6d":"tmp = (crew_df[(crew_df['job'].apply(lambda x: 'Costume Design' in x)) & (crew_df['movies_created'] > 7)]\n       .sort_values('mean_movie_revenue', ascending=False).head(25))\n\nplt.figure(figsize=(10,10))\nsns.barplot(x='mean_movie_revenue', y='name', data=tmp)","aa36f8d4":"# Get person name of job role for the movie\ndef get_crew_role_name(crew, job):\n    for person in crew:\n        if person['job'] == job:\n            return pd.Series(data=[person['name']], index=[job])\n    return pd.Series(data=[''], index=[job])","b525bc4f":"# Create new feature for director\ntrain['director'] = train['crew'].apply(lambda x: get_crew_role_name(x,'Director'))","d4d1cfe8":"directors = train.groupby('director')['revenue'].mean().sort_values(ascending=False).head(50)\n\nplt.figure(figsize=(10, 10))\nsns.barplot(x=directors.values, y=directors.index)","59d5e698":"# Remove crew dataframe from memory\ndel crew_df","d4336725":"Movies have bigger revenue in summer and in the end of the year. They also have bigger revenue around  the middle of the month and on the last day of the month. As you can see the difference in revenue and profit is stable over the passing months and days.","f15dea83":"It is some Hungarian production released in year 2000.","275010ed":"## The End\n\nJust kidding. It is the end of EDA, I think. In the future I will try to engineer some new features and try to predict box office revenue.\n\nSee you soon.","4821117f":"Top 3 places belongs to The Lord of the Rings.","dfe193b0":"**How each of selected 200 keywords affects revenue?**","470eea30":"The most numerous gender is the unknown gender. They are probably not decision making crew members. Among the remaining people, men prevail. We could even say that crew mostly consists of men. I would assume that women in the crew are responsibe for more creative jobs, such as directing, writing, casting.","046545a2":"The bigger the budget the higher the revenue (in general).","7420344e":"One could suspect that James Bond Collection will have number one spot. But when you closely look at the plot you will see that it did not reflect the true revenue, because some collections (like James Bond) have many movies and other (like Finding Nemo Collection) only couple. \n\nSo which collection really had the biggest revenue?\n\nLets plot collections revenue with the selection of individual films.","73956572":"Still on number one spot adventure movies. What is different is that family movies are in second place. I think it is not surprising because a lot of parents take kids to cinema. Even when parents do not like a movie or it got bad reviews, kids will still want to go to the cinema and in most cases that will happen.\n\nAs I metioned before, action movies are unstable in case of their profits (looking at this data you can't be sure if profits will be hight or low).","c70e25e6":"**What are the top 25 most popular character names?**","089f6422":"Now it is much more clear that some collections with only couple of movies had much more bigger revenue per movie.","985cea03":"As we can see, if a movie belongs to collection, then it have greater chances of bigger box office revenue.","2a2f50ac":"A larger increase in produced movies began just before the 1980s, when movies began to gain in popularity. Since then, more movies have been made with each year.","86058cbd":"When most movies are released on Friday, more popular ones are released on Tuesday and Wednesday.","89877348":"Avy Kaufman is the leader with 50 movies in which she was responsible for casting. \n\nType of job shown in the table corresponds to the first value from the list of jobs that given person ever did. It some cases, position is not correspond to job that given person is most famous for, for example Robert Rodriguez - Steadicam Operator (director would be more appropriate).","fb22e534":"**How many movies were produced every year?**","e18a4781":"The largest group represents actors (2 - male). The actresses are half as much (1 - female). Group describe as 0 represents unknown gender (male or female) which is probably connected with people that play extras in mostly one movie.","324c12f9":"## runtime\n\nRuntime of a movie.","b40eaf7c":"I will not mention the New Zealand and the Czech Republic this time. The United Arab Emirates are that high because in this country they also shot Mission: Impossible - Ghost Protocol (like in the Czech Republic). The UK is on fourth place in case of profit and was in eighth place in case of revenue.","40db825a":"**Which language has the average largest budget for a movie?**\n\nConsidering the languages used in at least 21 movies.","613ec3f9":"**In which production country movies had the biggest budget on average?**\n\n\nI am taking into consideration production countries with minimum six movies.","ed83de70":"**Which actor played in movies with the largest profits?**\n\nExcluding all actors that played in less than 8 productions.","064f15bd":"**How orginal language affects profit?**","6d1efeec":"**How many people are on average in the crew?**","34485da9":"**Which movies have status 'rumored' in test set?**","b75abb37":"**Does a budget decide about having a homepage?**","e9f5ef02":"**Which keywords are the most popular?**","918bd3c5":"**How budget and heving homepage affects profit?**","4dd3d970":"More movies released in September and October could be connected with Academy Awards. Later released movies are 'fresh' in memory so it have greater chance that academy nominates them. Personaly I thought that more movies would be released on summer when kids, teens have vacation and more time to go to a cinema.","5374993d":"**How genre 1 affects budget?**","351af099":"Based on the plot Paul Newman was the longest professionally active actor (63 years difference between his first movie and last). But when we take a closer look, his last movie in which he was credited was released in 2017 and he died in 2008. So this movie contains his archival footage not his live work. Taking this into account, the longest professionally active actor or should I say actress, should be Lois Smith. She is still living (she's 88 years old) and still playing in the movies. From our data she has been professionally active for 61 years.","262666e4":"**In how many countries single movie is produced?**","5efd99d1":"Conclusion: after examining unique values other than 'Released' in both train and test set, I can state that all movies should have status set to 'Released'. By doing this I will get feature with only one possible value and this feature will not give any information during training the model, so it should be removed.","bf40f062":"**Which movies have over 80 actors in the cast?**","fab6778e":"**Which genre is the most popular from all fourth first genres of a movie (excluding missing genre)?**","5c8c6d8c":"The unquestionable king is Andy Serkis. Movies in which he plays have the biggest budget and the biggest revenue. Just to remind you, he played among others Gollum in The Lord of the Rings trilogy and in Hobbit trilogy, Caesar in Planet of the Apes trilogy or in Avengers: Age of Ultron. Movies with Andy Serkis have around 50M dollars advantage over movies with Orlando Bloom who is in second place.","5e87c181":"**How many movies belongs to collection?**","26be9c62":"Movies with different titles have lower revenues. As with tagline, there are only few movies with different titles, so it is difficult to generalize to all cases. ","c69cb270":"John Travolta, Clint Eastwood, Michael Douglas almost allways play the main characters.","6e3f6fe6":"**How genre 1 affects profit?**","1f766dd9":"The most popular character name is for 'actors' that don't even get a character name (probably extras). Next places are for Himself\/Herself. Generally, most character names from the list are names describing job position. Probably they are characters that play meaningless roles in the movie. \n\nThe most popular name on the list is Jack.","2377ca1b":"**Which actor most often played the most important roles?**\n\nExcluding all actors that played in less than 8 productions.","58fb30f0":"**Which day is the most popular when releasing a movie?**","dc7f2379":"Warner Bros produced the largest number of movies. Second place belongs to Universal Pictures.\nOnly four companies have produced more than 100 movies.","ef7bf1eb":"In most cases movie is produce by one to three companies, sometimes by four. But in dataset we have movies that are produce by even 16 companies.","d91d1ff7":"It will be wise to select only jobs that matter in production (jobs that have creative impact on the movie), for example 'Director'.","177c7275":"**How many movies our top companies produced?**","fac8ceae":"At the beginning revenue and profit were almost the same till the 1980 when they began to diverge. Since then revenue and profit difference is more or less constant.","cfa5c1d1":"Revenues and profits from movies using one to four languages are stable. Starting from five languages there are large deviations in revenues and profits (it is difficult to say whether a movie will have commercial success). Moreover, in case of six and more languages there is a possibility of a loss of money.","990abf81":"**Which companies produce the most movies?**","46895e66":"The biggest average revenue have companies that produce blockbuster movies (comics adaptations, Pirates of the Caribbean, The Lord of the Rings, Star Wars or animations).","cf744705":"**Who are the best crew member from directors of photography in case of movie revenue?**\n\nExcluding all crew members that worked in less than eight movies.","d134720b":"## id\n\nJust the id of the movie. Starts from number 1. Feature not important and can be deleted.","55a9804f":"In prevoius plot I mention movies produced in New Zealand, so it is not surprise that they are still in number one place. This huge advantage over other countries, such as  the USA and the UK (with exception of the Czech Republic), results from the small number of produced movies. Strangely, the Czech Republic is in second place with small loss to New Zealand. Movies shot in Czech Republic with a bigger budget are: Casino Royale, The Chronicles of Narnia: Prince Caspian, Van Helsing and Mission: Impossible - Ghost Protocol.","e40c5302":"# TMDB Box Office Prediction\n\nIn this competition we need to predict overall worldwide box office revenue for movies.\n\nMy main goal is to conduct exploratory data analysis (EDA) of dataset and answer to below questions:\n- What movies makes the most money at the box office?\n- How much does a director matter?\n- How much does the budget matter?\n\nBefore we will dive into code you need to know a little bit about me, so you will know what to expect. I am new to data science and before this kernel I only tried to predict survivals of the Titanic, prices of houses and digit recognition (MNIST). As you see I do not have much experience, so if you have any suggestions or find mistakes let me know.\n\nMoreover I am not a native English speaker so you need to expect some mistakes.","90e413f9":"## homepage\n\nURL address of movie homepage.","9c36b4d1":"**Which actor played in movies with the biggest revenue and the biggest budget?**\n\nExcluding all actors that played in less than nine movies.","cf8290da":"Movies that contains top popular words in their titles have higher revenue. Having one word increases revenue, and having two words increases revenue even more.","893a1ca4":"There are three very clear leaders in this job with huge advantage over the rest costume designers.\n 1. Lindy Hemming - Wonder Woman, The Dark Knight Trilogy\n 2. Deborah Lynn Scott - Titanic, Avatar, Transformers\n 3. Judianna Makovsky - latest Marvel movies","4a998336":"**Which actor\/actress has played in largest number of movies?**","c3d5b993":"**Does a popularity of a movie affects box office revenue?**","d9b55349":"**Did movies from collection had bigger budget?**","e6f703cf":"**And what about profit?**","dc9ba354":"Top 3 places:\n 1. Andrew Lesine - The Lord of the Rings\n 2. Dariusz Wolski - Pirates of the Caribbean\n 3. Amir Mokri - Man of Steel, Transformers 3, Trnasformers: Age of Extinction","dcf788af":"Popular movies are released more often in summer and in March.","45bfb076":"## spoken_languages\n\nDictionary of languages used in a movie.","679bd0d6":"**Which gender is the most popular among actors?**","602875aa":"**How many different production countries are there?**","579b8124":"**Which movie has 149 keywords?**","c2501cf3":"In data there are movies with budget equal to 0, which probably means that budget is unknown. I won't be using those movies in analysis below.","74d8c4e9":"**How popularity rating looks like?**","fed8165b":"**How many people are in the cast?**","72c31c92":"Generally, movies with homepage have higher box office revenue.","d135a1ec":"**Which movies have different original title and title?**","3547ee37":"**How many taglines are missing?**","d25e7ad2":"There are 3000 movies in train data and 4398 movies in test data. Both sets have 22 features (train have +1 because of box office revenue).","eab44227":"**Which month has more poppular movies released?**","4bfd7bca":"**How the budget affects revenue?**","04d506ef":"All these movies have been released. So we need to update their status.","7caaf2ff":"## tagline\n\nMovie tagline - a catchphrase or slogan (short, memorable description) that becomes identified with a movie. Used in ads.","5dfc999c":"**How many people are each gender?**","6634a540":"**Do movies with top actors really have bigger revenue?**","bc1c708c":"**Which crew members worked on movies with the biggest profits?**\n\nExcluding all crew members that worked on less then eight movies.","8dd099aa":"On average, movies have almost seven keywords that describe them (+\/- 6 keywords). One movie has 149 keywords, which is strange. Let's see which movie is it.","77274cdd":"**Which company had the biggest average profit from its movies?**\n\nAs before, I skip companies that have produced less than six movies.","bcb12b1c":"Adventure movies have the highest mean revenue. Surprisingly drama is not in the top 5 (it is in the six spot from the end). Movies that are filled in some capacity with action or are family\/animation have the highest revenue. It is worth mention that action movies are highly unstable in box office revenue (very high number of outliers). So if you want to make a movie that will have higher revenue, you should make adventure or animated movie.","4d68cb09":"You need the biggest budget for adventure, science fiction and animated movies.\n\nThis plot shows the same conclusion with the one stated before, that bigger budget means higher revenue.\n\nOn the other hand, to make adventure\/science fiction\/(animated ?) movies you need a lot money for scenography to make them look realistic.","d7e3dc83":"**How many movies made profit?**","453b70ff":"**How are average movie box office revenue and profit changes over months?**","940a1c75":"**Which movie had the biggest profit?**","07c0a202":"Most movies made profit. If this wouldn't be the case movies wouldn't be popular and the number of movies released every year would be low.","572f9b09":"**How does the runtime change for main (first) movie genre?**","6ccbddfb":"Popularity of a movie has a positive impact on box office revenue.","fef7ffce":"## original_language\n\nOriginal language in which movie was released.","6af01a1e":"**Who are the best crew member based on job type in case of movie revenue?**\n\nExcluding all crew members that worked in less than eight movies.","e04d87f6":"**In which production country movies had the biggest profit on average?**\n\nI am taking into consideration production countries with minimum six movies.","5dba8344":"**Which gender is the most popular in the crew?**","0830c273":"## budget\n\nBudget of a movie.","1d1ee449":"**How has the average budget of movies changed over the years?**","8c52b1f8":"**What are the most popular tagline words?**","655681f5":"Stan Lee with his cameo appearances in Marvel movies based on his comics is in first place with huge advantage. Second place belongs to Jess Harnell who played in Transformers movies. In third is Tyrese Gibson who played in Fast & Furious movies.","f1eb5c0a":"**References**:\n - [medium.com\/@nagalr_63588\/tmdb-box-office-prediction-kaggle-com-6e14e013955b](https:\/\/medium.com\/@nagalr_63588\/tmdb-box-office-prediction-kaggle-com-6e14e013955b)\n - [kaggle.com\/artgor\/eda-feature-engineering-and-model-interpretation](https:\/\/www.kaggle.com\/artgor\/eda-feature-engineering-and-model-interpretation)","c25d2258":"And that will be all for production companies. It is worth mention that this analysis is not so accurate because some movies are produce by many companies which have different number of shares. Thay give diffrent amount of money for budget and then gets suitable percentage of revenues. And in this analysis I treated that if a company produces a movie, it givens the whole budget and has all revenues for itself. In other words, every movie data is included in whole in every company that produced it.","05fc3222":"## imdb_id\n\nURL address of IMDB page related to a movie.\n\nThis feature could be used to gather more data or fill in missing ones but in this kernel I won't be doing this.\nSo feature can be safely removed.","fec4be71":"**Which day of the week is the most popular when releasing a movie?**\n\nDay of week with Monday = 0 and Sunday = 6.","22aae4c5":"The day of the month is not important in case of budget size, but day of the week is. Movies have bigger budget on Tuesday and Wednesday which is probably connected with their popularity (popular movies are more often released on these days and what is more popular movies in most cases are blockbusters).","8c02282c":"On the 1st of each month more movies are released. Also around the middle of the month, more movies appear than usual.","3a8426aa":"**How many companies take part in producing a single movie?**","633e5076":"**Which genre is the most popular based on its position (excluding missing genre)?**","85ec9e95":"On average, Jerry Bruckheimer Films gives biggest budget to its movies. Reason for that is that this company produced Pirates of the Caribbean movies which are the most expensive. In the leading places, we also have companies that produce comics adaptarions and Pixar which produces animations.","035b8c2a":"It is worth mention Jurassic Park on the list because it was released in 1993. Respect.","4074dc77":"In most cases, these are the same people as before. Just in a slightly different order. Still LotR and Marvel in front.","505709b8":"Actresses (1) are half as numerous as actors (2). Also, there is a third group (0) that represents unknown gender.","e452661e":"There are no surprises. When the summer begins, it is the time for blockbusters productions to hit the cinema. And these movies generaly have the largest budget. At the end of the year, the budget is also bigger, which is probably also releated to blockbuster productions (for example the Hobbit movies that where released in December).","0eb824b3":"Average movie has 2-3 genres, but there are some exaples of films with more categories. For example movies with 7 genres. \nAlso there are some movies with 0 genres which means that data is missing.","8ae9f24d":"To be sure let's check in how many movies all of above actors played.","dc8248e4":"The most popular are movies in which Latin is used. The second place belongs to German and the third to Arabic. Movies that have used Russian are not that popular (fourth place from the end), taking into account that there are 152 movies in this language.","736ca72d":"If a movie belongs to a collection, then it probably has bigger budget.\n\nTo really see if budget matters the most in box office revenue, we need to see what ratio between budget and revenue movies have. Also, I will create feature representing profit of the movie.","e6a0c2e0":"The runtime doesn't have huge impact on budget, revenue and profit. Maybe in case of movies longer than 190 minutes, because they have low revenue and profit. In addition, movies longer than 275 minuts have more costs than profits. Conclusion: you should not create movies that are too long because you will not have profit of them.","ea715435":"**How many movies do not have keywords?**","a432512b":"**In which movies actors are speaking with more than five languages?**","5b5e508c":"**Which original language is the most used?**","ad41081b":"As before, these movies were released.","edd12d9c":"First two names on the list are wrong. Raoul Walsh died in 1980 so he couldn't have work till 2015. In reality he worked 51 years as a director. Philip Glass was born in 1937 and started working as a composer in 1964 (he is still professionally active). So he shouldn't be able to start working in 1931. So proper leader should be Ennio Morricone  with 49 years of working as a composer.\n\nOn the list are three female crew members. The highest place among them belongs to Dede Allen with 41 years. She worked as an editor.","bd644fde":"No surprises, English is the most popular original language. Probably the reasons for that is that most movies are produced by studios in USA and their movies are the most popular worldwide.\nAnother reason may be that they mainly collected English movies from TMDB to this dataset.","4615ad12":"Typically, one to two languages are used in each genre.","c08a28c1":"The biggest profit have those movies that use Latin, Thai, Swedish, Standard Mandarin and Arabic. Swedish has lower revenue than Standard Mandarin and Arabic, but has better profit.","3663f45d":"## Keywords\n\nKeywords describing a movie.\n\nDictionary of IDs and names. ","a20c91c5":"Emma Thompson is in the lead. Second and third places belongs to actors that played in The Lord of the Rings Trilogy. Andy Serkis is before Ian McKellen probably because he also played in Planet of the Apes movies. Jon Hamm is surprise to me in his fourth position. It is probably connected with popularity of Baby Driver. Jamie Foxx also played in this movie and he is also in high place. Between them is Vin Disel with his popularity based on Fast & Furious series. There are also numerous actors that played in superheros movies which was obvious.","7c2f99ff":"Movies with tagline have bigger revenue. But proportion of movies with and without tagline is not equal, so you can't be 100% sure.","4d149d8f":"Looking at this data we can see that some movies with top budget didn't bring big profit.","99c2323f":"Movies that use Latin have the largest budget. Next are: Thai, Arabic and Standard Mandarin.","373d90b0":"The popularity of the oldest movies is unstable. After 1950, the average popularity of movies begins to smooth around the value 9. Only new movies (released over the last year) have sky-high popularity (unlike other years).","ae0c6795":"In most cases, movies are produced in one country. Sometimes in two, rarely in more then two (max 8). 0 production countries for a movie means missing value.","f9228b0c":"Honestly, I do not know these companies except DC Entertainment and Marvel Studios. I assume that these companies have only a few movies and are therefore at the top of the list.","69068581":"**Which movies have missing status in test set?**","ac1d5765":"**How is the runtime related to budget, revenue and profit, if it is at all?**","50625690":"The results are generally the same as before. Maybe with one reservation which is that Jerry Bruckheimer Films are the most expensive and should have bigger profits.\n\nConclusion: it is not worth to overpay for the production of movies. Above a certain budget value, profit does not go hand in hand.","a8bd8893":"**How many languages are used in the movie?**","672c1a07":"**Which names are the most popular among actors names?**","7aba727b":"**Which movies are the most popular on average beased on actor that played in it?**\n\nExcluding all actors that played in less than 10 productions.","9c70e9c9":"**How many different jobs are in each department?**","2c4e300a":"Future work: We could try to rate tagline in case of revenue. Which tagline has positive impact on box office revenue?\nGenerally, the same as with overviews and movie posters.","7a099b6d":"**Which keywords are the most popular?**\n\nRepresented as a list of 200 most common keywords.\n\nI will skip first element because it represents missing keyword.","7373ffde":"The result coincides with what I predicted earlier. Almost all companies have produced only one movie.","2cebc8d6":"There are 40 movies with 80 or more actors. Each cast includes all actors who played in the movie, no matter how big or small their role were.","414ffe8c":"**Do movies with homepage have higher revenue?**","037225f0":"**How does the popularity of movies change with their release year?**","bdacdbcb":"**In which production country movies had the biggest revenue on average?**\n\nI am taking into consideration production countries with minimum six movies.","582bde95":"**How many genres movies have?**","96a2682b":"**In what days do movies have a larger budget?**","eda40dfe":"**Which genre is most popular?**","cdda2dfd":"**Who are the best crew member from casting in case of movie revenue?**\n\nExcluding all crew members that worked on less than eight movies.","61f13ac7":"**Which movies have the highest popularity? Are there any outliers (anomalies)?**","a2e71cc2":"**Which language has the average biggest profit\/revenue for a movie?**\n\nConsidering the languages used in at least 21 movies.","57c2c295":"**Who are the best crew member from directors in case of movie revenue?**\n\nExcluding all crew members that worked in less than eight movies.","f28551f3":"## poster_path\n\nPath to image of the movie poster.\n\nYou could analyse posters to find out what features are important for movies with high revenue.\nHow poster should look like to draw a viewer to watch a movie?\n\nI will skip this feature and delete it.","e49feeb2":"It is just a confirmation of what I said earlier. If actor from the list plays in the movie, then movie have bigger revenue. ","f26fbe8c":"Actresses slightly often play more important roles than actors. But we need to remember how numerous each group is. In this plot we can see that unknown group (0) genrerally should be treated as extras. And this is the confirmation of what I already said earlier about this group.","f1728bba":"FUTURE WORKS: try to rate overview in case of popularity\/revenue of the movie. Which overviews have positive impact on revenue? How overview should look like to interest viewer?","16c03360":"Robert De Niro and Samuel L. Jackson played in the largest number of movies, which is 30. It is worth mentioning that on the top 25 list there are only two actresses: Susan Sarandon (4th place with 25 movies) and Sigourney Weaver (20th place with 21 movies). The rest are male actors.","27efd0d1":"The most popular genres in companies are Action, Comedy and Drama. One different value is for Adventure movies which Walt Disney Pictures produces the most.","cbb70a6f":"## title\n\nInternational movie title.","771dd555":"**Which movies are more popular based on the language used?**\n\nConsidering the languages used in at least 21 movies.","c3286fa3":"**Does the number of languages used affect the budget?**","e85c3495":"On average there are 20 people (+\/- 16) in movie crew.","caa147e2":"Double check. Directors that are in this list are different from the earlier list. This is the case because in earlier list I show all 'directors' that worked on more than seven movies and what is also important I classify them as directors no matter how many movies they directed.\n\nTop 5:\n 1. Joss Whedon (Avengers)\n 2. Byron Howard (Zootopia, Tangled, Bolt)\n 3. David Yates (Harry Potter)\n 4. James Gunn (Guardians of the Galaxy)\n 5. Roger Allers (The Lion King)\n\nIn general, the movie's revenue depends on the choice of the person responsible for directing. Directors that are popular, that created movies that viewer seen, have bigger chance for bigger movie revenue in future.","2c8e4d07":"## overview\n\nMovie overwiew.","8951905f":"On average, movies last 108 minutes +\/- 22 minutes. The longest movie is 338 minutes long.","a2980733":"In most movies, the actors speak only in one language. Sometimes they speak in two languages. There is a movie that uses nine languages. This is the maximum number of languages in one movie. Movies without spoken language mean missing data.","5f8d14e6":"The highest revenue have movies with English original language but movies with Chinese language are only slighty behind. Chinese language is maybe not that surprising considering China population but the next languages on the list are (third place belongs to Turkish ?!). I suspected that Hindi will be higher on the list because of Bollywood and that Spanish language movies will have higher revenue.\n\nThe most important thing is that these data is not precise due to the small number of other movies than English.","0032a5f7":"This is probably not what I suspected. I need to select only actors that played in more movies than only just a couple.","00ebc49b":"**How many homepage addresses are filled?**","869f68a5":"In all cases, top places belongs to people that worked on movies based on comics (one DC, rest Marvel) or on The Lord of the Rings trilogy.\n\nOriginal Music Composer and Producer are aligned categories. There are no big differences between the leaders. Casting, Director of Photography and Costume Design have clear leader.","e079154c":"If a movie has a bigger budget, it means it should have a homepage. ","2d532d11":" - No data missing. \n - Average popularity rating is 8.463274.\n - Standard deviation is 12.104.\n - Max value looks wierd (anomaly like) based on mean +\/- std.","535a394e":"## production_companies\n\nCompanies that produce a movie.","2b73d447":"**How budget affect popularity?**","69671e11":"Low budget for those movies probably indicate corrupted data. For the Top 5 movies data is definitely corrupted.\n\nLet see how ratio looks like for movies with top budget.","a3c7c38d":"**How runtime distribution looks like?**","42249627":"**Which movies are the most popular on average beased on actor that played in it?**","61b8a7db":"The first bar represents movies with missing genre data. The longest movies by genre are history and war. The shortest movies by genre are animation, tv movie and foreign.","d9609e58":"Popular movies tend to have bigger profits. I check this data because high revenue does not always mean high profit.","3f0b414b":"All 'post production' movies were also released, so we need to update their status.","41e052fb":"**Which crew member has the highest mean popularity of movies in which he\/she worked?**\n\nExcluding all crew that worked on less than 8 movies.","dc856b3f":"Top 5 names on the list:\n 1. Craig Wood (editor) - Pirates of the Caribbean series, Guardians of the Galaxy movies.\n 2. David Hoberman (producer) - Beauty and the Beast\n 3. Kevin Feige (producer) - movies from Marvel Universe.\n 4. Christopher Nolan (director) - no need to introduce.\n 5. Stan Lee (screenplay by his comic books, producer) - no need to introduce.\n\nGenerally, most of them worked on blockbuster movies.","c3b5247e":"## belongs_to_collection\n\nThis feature represents if a movie belongs to a series of movies. For example James Bond Collection.","e3d64370":"As before, we should not be sure of these results, given the small number of non-English films. But while working on what we have, we see that Chinese and Turkish films have slightly higher profits than English. Another funny thing is that movies with some languages do not bring profit, but losses. Conclusion: you should never produce movies in these languages.","1839d71d":"## production_countries\n\nCountries where movie was made.\n\nDictionary with names of countries and their ISO codes.","bbcc5e35":"**What are the most popular words in orginal title?**","0bf24e30":"All of them played only in 2 movies.","7160f18b":"There is even one movie from James Bond Collection (Die Another Day) on the list.","288b5d22":"**Will movie make more money on box office if belongs to collection?**","b7d8c285":"One world, one life, one love.","b8828903":"I will go through all features keeping the order form above table and try to analyze the data.","73e87a4d":"More popular movies were released at the end of the month (30th) or in the middle of the month (16th).","55261308":"# EDA","789b7b8c":"**What departments exist and what positions do they have?**","8a21c454":"**How many movies are in each collection?**","6f77d607":"**Having a tagline affects revenue?**","07dc0df5":"Most movies are released on Friday when weekend starts. Sometimes movies are released on Thursday or Wednesday. Almost no movies are released on Monday, Tuesday, Saturday and Sunday.","d8f06fc7":"**Which actor is\/was the longest professionally active?**\n\nExcluding all actors that played in less than 8 productions.","f8cace6c":"If in a movie actors are speaking multiple languages, budget of that movie must be larger. In case of one, two, three or even four languages there is no that much of a difference in a budget, but in case of five languages budget grows exponentially. It is also worth mentioning that the grater the number of used languages, the greater deviations from the average budget.","ef8bdf6c":"**In which months do movies have an average higher budget?**","0084ac86":"**Who are the best crew member from costume design in case of movie revenue?**\n\nExcluding all crew members that worked in less than eight movies.","a3a97459":"From this point forward all analysis for crew will be restricted only to selected jobs.","a69cdab2":"**How first choice genre (genre1) affects revenue?**","65ab44e0":"Movies with four genres had the highest revenue and profit. Movies with six genres had secend best result in revenue, but based on profit they are on third position. In case of movies with three genres their revenue is number three in chart, but they had a bigger profit, so their final position is number two.\n\nThe rest of the movies are in correct places based on both mean revenue and mean profit.\n\nConclusion: it is worth to get top 4 genres as new features.","00de7061":"Having a bigger budget and having a homepage increases chances of getting bigger profit.","c6e4e33e":"**Does the number of languages used affect revenue\/profit?**","9beeb222":"**Which crew member worked on movies with the biggest revenue and the biggest budget?**\n\nExcluding all crew members that worked on less than eight movies.","37c6b628":"**How many actors played in only one movie?**","58b8961a":"**How many actors are in dataframe?**","1ffe7b44":"**Based on companies that produced the most movies which genre was most popular?**","90a36eae":"**Which crew member works the longest in business?**","3e7b0321":"**How many languages are used based on genre?**","1c8ba056":"## release_date\n\nDate when movie was released.\n\nMM\/DD\/YY","1ef57b43":"**Which day of the week has more poppular movies released?**","0043afc8":"High popularity of some movies means that is buzz around them (people talking about them). We can see on the list movies that are released in last decade or are critically acclaimed. Conclusion: no outliers.","38893074":"**Which movies have status 'rumored' in train set?**","dc532eba":"We can see top 10 biggest collections. Not suprisingly 'James Bond Collection' is in the first place.","3840d006":"**Who played in more movies, actors or actresses?**","96d1d579":"**Which company had the biggest average revenue form its movies?**\n\nAs before, I skip companies that have produced less than six movies.","5ef05c5d":"**Which movies have status 'rumored' in test set?**","f4e166df":"**Having different titles affects revenue?**","abe60494":"Top 5 places:\n 1. Joss Whedon - Avengers\n 2. Peter Jackson - The Lord of the Rings trilogy, Hobbit movies\n 3. John Lasseter - Toy Story series\n 4. Michael Bay - Transformers collection\n 5. George Lucas - Star Wars movies, Indiana Jones","ec93ba96":"**Which company has the best mean movie popularity?**","98162624":"**Which collection had the biggest revenue?**","0a3feaea":"Slight advantage in favour of actors. But we need to remember that in unknown group may be more actresses and the plot would look differently and about that actresses are less numerous than actors.","7c244e1f":"**Which words in overviews are most frequent?**","6f36c0dd":"Looking at this data we can say that budget is not that important in case of movie popularity despite slightly positive slope. We need to take into account distribution of the data (low number of movies with high budget in contrast to high number of movies with low budget). Movies with the biggest budget are almost all under regression line.","0e7c0a40":"**Which day of month has more poppular movies released?**","1b2e298a":"Three out of five people with more than 600M revenue worked on The Lord of the Rings Trilogy:\n - Fran Walsh (screenplay) [wife of Peter Jackson]\n - Peter Jackson (director)\n - Liz Mullane (casting)\nThe other two: Joss Whedon and Kevin Feige worked together on Avengers and Avengers: Age of Ultron.\n\nJust below 600M revenue there is Andrew Lesnie (Director Of Photography) that also worked on The Lord of the Rings Trilogy.\n\nThe biggest budget have movies that Craig Wood produced.","dd2c4aee":"**Which collection made the most money per movie?**","bc9053f3":"It is a lot of boxplots. Let's find meaningful keywords based on those plots.\n\n - women director: it is the most popular keyword and as we can see movies with women director have lower box office revenue.\n - independent film: second most popular keyword. If a movie is independent film, there is no chance for a real profit.\n - duringcreditsstinger: if a movie have scene after some credits, its revenue is way higher.\n - murder: [skip it]\n - based on novel: if a movie is based on novel, its revenue is higher.\n - violence: if a movie is violent, it has a slightly higher revenue.\n - sport: [skip it]\n - biography: doesn't really matter.\n - dystopia: if it is a dystopian movie, it will make more money.\n - revenge: doesn't really matter. (There is only one movie about revange that had huge box office revenue.)\n - aftercreditsstinger: if there is a scene after all credits, then movie will have a bigger revenue.\n - sequel: if a movie is a sequel, it will make more money.\n - frendship: doesn't really matter.\n - suspense: doesn't really matter. (There is only one suspense movie that had huge box office revenue.)\n - sex: [skip it]\n - love: [skip it]\n - police: doesn't really matter.\n - teenager: doesn't really matter.\n - nudity: [skip it]\n - drug: [skip it]\n - female nudity: [skip it]\n - los angeles: if action of the movie takes place in Los Angeles, then the movie has greater chance for a little bigger revenue.\n - high school: doesn't really matter.\n - new york: if action of the movie takes place in New York, then movie has greater chance for a little bigger revenue.\n - prison: doesn't really matter.\n - musical: doesn't really matter.\n - kidnapping: doesn't really matter.\n - invastigation: doesn't really matter.\n - family: doesn't really matter.\n - father son relationship: doesn't really matter.\n - 3d: if a movie is in 3D, it will definitely have a bigger revenue.\n - wedding: doesn't really matter.\n - detective: doesn't really matter.\n - paris: doesn't really matter.\n - based on comic: if movie is based on comic, it will definitely have a bigger revenue.\n - robbery: doesn't really matter.\n - brother brother relationship: doesn't really matter.\n - prostitute: doesn't really matter.\n - escape: if a movie have keyword 'escape', then it has small chance for a slightly bigger revenue.\n - rape: doesn't really matter.\n - alien: if a movie is about alien(s), it should have bigger revenue.\n - based on true story: doesn't really matter. (I thought this keyword would make a difference.)\n - london england: if action of a movie takes place in London, England, then movie should have a bigger revenue. It is probably connected with the fact that movies produced in UK have bigger revenue.\n - death: doesn't really matter.\n - superhero: if a movie is about superhero, it will definitely have a bigger revenue. In most cases connected with 'based on comic'.\n - corruption: if a movie is about corruption, it should have a slightly bigger revenue.\n - new york city: doesn't really matter. ('new york' and 'new york city' should have been merge into one keyword.)\n - martial arts: if there are some martial arts in a movie, then movie has a very small chance for a slightly better revenue.\n - dying and death: if a movie is about dying and death, it has small chance for a slightly bigger revenue. (probably most films should have this keyword.)\n - serial killer: [skip it]\n - suicide: [skip it]\n - brother sister relationship: if a movie is about brother sister relationship, it has a small chance for a slightly bigger revenue.\n - soldier: if a movie is about soldier, it has a small chance for a slightly bigger revenue.\n - vampire: doesn't really matter.\n - world war ii: doesn't really matter. (and should have!)\n - hospital: doesn't really matter.\n - future: if a movie is about future times, it has a chance for bigger revenue.\n - best friend: doesn't really matter.\n - remake: doesn't really matter.\n - party: doesn't really matter.\n - blood: [skip it]\n - friends: doesn't really matter.\n - male nudity: [skip it]\n - adultery: doesn't really matter.\n - lawyer: if a movie is about lawyer, it has a chance for bigger revenue.\n - daughter: doesn't really matter. (maybe a little bit.)\n - small town: doesn't really matter.\n - war: doesn't really matter.\n - jealousy: doesn't really matter.\n - post-apocalyptic: if it is a post-apocalyptic movie, it has a slightly better chance for a small improvement with revenue.\n - magic: if a movie is about magic, it has a slightly better chance for a slightly bigger revenue.\n - explosion: if a movie contains explosions, it has a chance for bigger revenue.\n - time travel: if a movie is about time travel, it has a slightly better chance for slightly bigger revenue.\n - hitman: doesn't really matter.\n - dog: doesn't really matter.\n - money: doesn't matter at all.\n - wife husband relationship: doesn't really matter.\n - divorce: doesn't really matter.\n - romantic comedy: if a movie is a romantic comedy, then it has a chance for bigger revenue.\n - love triangle: doesn't really matter.\n - hostage: doesn't really matter.\n - journalist: doesn't really matter.\n - monster: if a movie is about monster, it has a chance for bigger revenue.\n - gay: doesn't matter.\n - secret: doesn't really matter.\n - helcopter: if there is a helicopter in a movie, then movie has a slight chance for bigger revenue.\n - rescue: if a movie is about rescue, it should have a bigger revenue.\n - assassin: if a movie is about assassin, it should have a bigger revenue.\n - cia: if a movie is about cia, it should have bigger revenue.\n - airplane: doesn't really matter.\n - infidelity: [skip it]\n - terrorist: if a movie is about terrorist, it has a chance for bigger revenue.\n - fight: if a movie has any fights in it, it has a slightly higher chance for a slightly bigger revenue.\n - gang: doesn't matter.\n - fbi: if a movie is about fbi, it should have a bigger revenue.\n - scientist: if a movie is about scientists, it should have a bigger revenue.\n - zombie: if a movie is about zombie, it will definitely have a bigger revenue.\n - ghost: doesn't matter.\n - hotel: [skip it]\n - college: doesn't matter.\n - psychopath: if a movie is about psychopath, it has a slightly higher chance for a slightly bigger revenue.\n - survival: if a movie is about surviving, it should have a bigger revenue.\n - romance: doesn't really matter.\n - chace: doesn't matter.\n - marriage: doesn't matter. (maybe a little bit.)\n - dark comedy: [skip it]\n - competition: if a movie is about competition, it has a slightly higher chance for a slightly bigger revenue.\n - relationship: doesn't really matter.\n - alcohol: doesn't matter.\n - spy: if it is a spy movie, it should have a bigger revenue.\n - teacher: doesn't matter.\n - flashback: doesn't matter.\n - slasher: doesn't matter.\n - found footage: if in a movie someone finds some footage, then movie has a slightly higher chance for a slightly bigger revenue.\n - drug dealer: doesn't matter.\n - shootout: doesn't matter. (maybe a little bit.)\n - doctor: doesn't really matter.\n - blackmail: doesn't matter.\n - desert: [skip it]\n - crime: doesn't really matter.\n - sister sister relationship: if a movie is about sisters relationship, it has a chance for bigger revenue.\n - dream: [skip it]\n - motorcycle: if a movie has any\/is about motorcycle, then it has a slightly higher chance for a slightly bigger revenue.\n - gangster: doesn't matter.\n - gore: [skip it]\n - new love: doesn't matter.\n - pregnancy: doesn't matter.\n - extramarital affair: doesn't matter.\n - criminal: doesn't matter.\n - england: if action of a movie takes place in England (or is somehow connected to it), then movie should have a bigger revenue.\n - conspiracy: if a movie is about conspiracy, it should have a bigger revenue.\n - fbi agent: if a movie is about fbi agent, it has a chance for bigger revenue.\n - reporter: doesn't matter. (maybe a little bit.)\n - island: if action of a movie takes place on island, it has a chance for slightly bigger revenue.\n - neo-noir: [skip it]\n - faith: if a movie is about faith, it has a chance for slightly bigger revenue.\n - amnesia: if in a movie someone has amnesia, it should have a bigger revenue.\n - undercover: if a movie is about someone undercover, it should have a bigger revenue.\n - baby: if a movie is about baby, it has a chance for bigger revenue.\n - texas: [skip it]\n - marvel comic: if a movie is based on Marvel comic, it will definitely have a big revenue.\n - gun: doesn't matter.\n - california: if action of a movie takes place in California, it should have a bigger revenue.\n - assassination: if a movie is about assassination, it should have a bigger revenue.\n - government: if a movie is about government, it has a chance for slightly bigger revenue.\n - music: doesn't matter.\n - military: if action of a movie is connected with military, then movie has a small chance for slightly higher revenue.\n - based on play or musical: doesn't matter.\n - coming of age: [skip it]\n - army: if a movie is about army, it should have a bigger revenue.\n - mountain: if action of a movie takes place in mountain, then movie should have a bigger revenue.\n - torture: doesn't matter.\n - road trip: doesn't matter.\n - animation: if it is an animated movie, it will definitely have a bigger revenue.\n - holiday: if action of a movie takes place on holiday, then movie has a chance for bigger revenue.\n - comedy: if it is comedy movie, it has a chance for slightly higher revenue.\n - politics: doesn't matter.\n - robot: if a movie is about robot(s), it has a small chance for slightly higher revenue.\n - baseball: doesn't matter.\n - alcoholic: doesn't matter.\n - forest: doesn't matter.\n - writer: doesn't matter.\n - priest: doesn't matter.\n - police officer: if a movie is about police officer, it has a vary small chance for slightly higher revenue.\n - parent child relationship: if a movie is about parent child relationship, it has a small chance for slightly higher revenue.\n - male female relationship: doesn't matter.\n - car crash: if a movie is about car crash, then it has a very small chance for slightly higher revenue.\n - car chase: if in a movie is car chase, then movie has a chance for slightly higher revenue.\n - japan: doesn't matter.\n - jungle: if action of a movie takes place in jungle, then movie has a chance for slightly higher revenue.\n - ship: doesn't matter.\n - usa president: if a movie is about USA president, then it has a small chance for slightly higher revenue.\n - fire: if movie contains fire, then it has a small chance for slightly higher revenue.\n - australia: [skip it]\n - secret identity: if a movie is about someone with secret identity, then it should have a bigger revenue.\n - thief: doesn't matter.\n - based on young adult novel: if a movie is based on young adult novel, then it has a chance for bigger revenue.\n - christmas: if action of a movie takes place on Christmas, then movie has a small chance for bigger revenue.\n - kiss: doesn't matter.\n - satire: doesn't matter.\n - marijuana: doesn't matter.\n - washington d.c.: if action of a movie takes place in Washington D.C., then movie has a small chance for slightly bigger revenue.\n - super powers: if a movie is about super powers, then it definitely have a bigger revenue.\n - train: doesn't matter.\n - killer: doesn't matter.\n - training: doesn't matter.\n - snow: if there is snow in a movie, then movie has a small chance for slightly bigger revenue.\n - mutant: if a movie is about mutant, then it will definitely have a bigger revenue.\n - restaurant: if a movie is about restaurant, then it has a small chance for slightly bigger revenue.\n - sheriff: [skip it]\n - artificial intelligence: unfortunately, it doesn't matter.\n - movster: doesn't matter.\n - hero: if a movie is about some hero, then it will definitely have a bigger revenue.\n - dancting: if a movie is about dancing, than it has a chance for bigger revenue.\n - world war i: [skip it]\n - wilderness: doesn't matter.\n - student: [skip it]\n - space: if action of a movie takes place in space, then movie has a chance for bigger revenue.\n - airport: if action of a movie takes place in airport, then movie has a small chance for slightly higher revenue.","5b04ab0e":"**Which production country has the greatest mean popularity?**\n\nI am taking into consideration production countries with minimum six movies.","514518a8":"New Zealand has the greatest mean popularity, but it only produced 17 movies. For example United Kingdom (3rd place) produced 380 movies. It is worth to remember that because of different number of produced movies it is hard to say that movies produced in one country are more popular than movies produced in other country. However in case of New Zealand first place in the list could be true because in this country they shot movies like: The Lord of the Rings trilogy, Hobbit trilogy or King Kong.","f147ace0":"**Who worked in the largest number of movies?**","bbae2de2":"**Which movies had the biggest budget?**","69854420":"**Which company gives the biggest average budget to its movies?**\n\nAs before, I skip companies that have produced less than six movies.","2fbbf97f":"No surprises, the New Zealand in first place. With only couple of **such** films there couldn't be any other winner.","81d8e221":"**How number of genres affects budget, revenue and profit?**","64629f08":"**Which month is the most popular when releasing a movie?**","4990b1df":"## popularity\n\nPopularity of the movie.","5404fc55":"There are 604 movies that belongs to collection.","6a8c878d":"**Which director have the biggest mean movie revenue?**","5d28f1c1":"As I mention before some collections had big revenue because had multiple movies. In case of revenue per movie in collection it all looks differently. \n\nWhat can't be surprise that almost all movies are from last two decades. This is because of inflation (changes in prices of currency). I wonder where James Bond Collection would be if price of currency would be the same in all past years. ","f4c1d870":"**How many keywords does the movie have?**","80a631f0":"All these movies have been released. So we need to update their status.","8ea227cb":"There are 351 movies with a different original title and title. In most cases, non-English movies have different titles.","34ae7f73":"**Which original language has the highest revenue?**","56119e82":"**How are average movie box office revenue and profit changes over months and days?**","773698c6":"**How has the average movie box office revenue and profits changed over the years?**","646e2e45":"So once again. \n\n**Which company has the best mean movie popularity from companies that have produced minimum six movies?**","9cb56022":"On average, there are 20 actors in the cast (+\/- 16). The maximum number of actors in the cast is 156 people.","1fc5a9eb":"Now, in my opinion, this plot looks better. After removing companies with less then six movies, we get more recognizable companies. What is more, we get results that are more accurate, because the production of only one popular movie can be a coincidence. In general, top places are for companies associated with production of movies based on comic books. Including Syncopy, which is Chrstopher Nolan's company, which produced The Dark Knight Trilogy, Man of Steel and Justic League, which are from DC Universe.","0a7995ab":"## status\n\nStatus of the movie.","d45fbe3d":"## cast\n\nCast of a movie.\n\nDictionary of: \n - cast_id:\n - character: character name.\n - credit_id:\n - gender: gender of character\/actor. (1 - female, 2 - men, 0 - unknown (male or female))\n - id: id of an actor.\n - name: name of an actor.\n - order: importance of a character (from most to less important).\n - profile_path: path to photo of an actor.\n ","02d2a520":"**Who plays more important roles on average, acotrs or actresses?**","89e2b503":"**Having in orginal title popular words increases revenue?**","9794ef36":"## original_title\n\nMovie orginal title.","0b92fbf1":"Movies have higher revenue\/profit at the beginning of the week, especially on Wednesday. As before, revenue and profit difference is stable.","690913fe":"The budget over the years grow gradually until 1995, when in the blink of the eye it doubles. This is probably related to the greater popularity of movies and the production of more movies.","f271c785":"## genres\n\nWhat genre the film belongs to.\n\nList of dictionaries (id of genre, genre name).","e78b67d6":"**What are the most popular words in characters names?**","250a7b56":"## crew\n\nCrew responsible for producing a movie.\n\nDictionary of:\n - credit_id:\n - department: department to which job belongs to\n - gender: gender of crew member\n - id: id of crew member\n - job: job name\n - name: name of crew member\n - profile_path: path to image of crew member","d7ac544c":"There are only 31.5% of filled homepage addresses (68.5% is missing). Lets create new feature indicating if a movie has homepage or not. After that this feature (with homepage addresses) can be dropped."}}