{"cell_type":{"8cd722be":"code","dcbe1fad":"code","7f277325":"code","6fbc4f86":"code","29d3950f":"code","f29f3793":"code","b91fabe8":"code","b4c4a916":"code","b234d82e":"code","0f07dab8":"code","97451bd4":"code","1d5625d8":"code","36d9bcb1":"code","f27d43d6":"code","a0d3b242":"code","0c67731e":"code","d992ba88":"code","a5274a11":"code","d32b9418":"code","2ac850b1":"code","e464e821":"code","d6711dd3":"code","9bcbda84":"code","8747a923":"code","92118fb1":"code","02128265":"code","0cce80a3":"code","5c2cca4b":"code","2c9526de":"code","f8a5e0b3":"code","f35fcc06":"code","18ba9768":"code","8685ccc8":"code","7369a264":"code","0f3a2608":"code","b2c4f0bc":"code","c50ce5a3":"code","0e153215":"code","3104c458":"code","734c20a5":"code","cbf803f5":"code","d47f9255":"code","d8ba1422":"code","ebc2a19a":"code","1a23a0ca":"code","8334c4f3":"code","f5bbbe1a":"code","54561cca":"code","58d72e14":"code","06549e5f":"code","f363efd3":"code","58e5ceec":"code","1563257c":"code","0592fa18":"code","38cfa0cc":"markdown","8426ac00":"markdown","e19dc7bf":"markdown","c7f22289":"markdown","7585cf4d":"markdown","0a92cec5":"markdown","bcc6df1a":"markdown","25c3e86a":"markdown","a4be3eec":"markdown","37b5654b":"markdown","98ca21e8":"markdown","ba31af0f":"markdown","5ed5ba8e":"markdown","71393204":"markdown","79ad1fcd":"markdown","08401204":"markdown"},"source":{"8cd722be":"# This Python 3 environment comes with many helpful analytics libraries installed\n# It is defined by the kaggle\/python Docker image: https:\/\/github.com\/kaggle\/docker-python\n# For example, here's several helpful packages to load\n\nimport numpy as np # linear algebra\nimport pandas as pd # data processing, CSV file I\/O (e.g. pd.read_csv)\nimport datetime as dt\n\n\n# Input data files are available in the read-only \"..\/input\/\" directory\n# For example, running this (by clicking run or pressing Shift+Enter) will list all files under the input directory\n\nimport os\nfor dirname, _, filenames in os.walk('\/kaggle\/input'):\n    for filename in filenames:\n        print(os.path.join(dirname, filename))\n\n# You can write up to 20GB to the current directory (\/kaggle\/working\/) that gets preserved as output when you create a version using \"Save & Run All\" \n# You can also write temporary files to \/kaggle\/temp\/, but they won't be saved outside of the current session","dcbe1fad":"pip install openpyxl","7f277325":"from pathlib import Path\nDATA_DIR = Path(\"\/kaggle\/input\/online-retail-ii-uci\/online_retail_II.xlsx\")\n#\u00c7al\u0131\u015fma i\u00e7in Year2010-2011 sheeti kullan\u0131lacak!\ndataset_ = pd.read_excel(DATA_DIR, sheet_name=\"Year 2010-2011\")","6fbc4f86":"dataset = dataset_.copy()","29d3950f":"dataset.head()","f29f3793":"dataset.tail()","b91fabe8":"dataset.describe().T","b4c4a916":"dataset.shape","b234d82e":"dataset.index","0f07dab8":"dataset.columns","97451bd4":"dataset.isnull().values.any()","1d5625d8":"dataset.isnull().sum()","36d9bcb1":"dataset.dropna(inplace = True)","f27d43d6":"dataset.shape","a0d3b242":"dataset[\"Description\"].nunique()","0c67731e":"dataset[\"Description\"].value_counts()","d992ba88":"dataset.groupby(\"Description\").agg({\"Quantity\": \"max\"}).sort_values(\"Quantity\", ascending = False).head()","a5274a11":"dataset = dataset[~dataset[\"Invoice\"].str.contains(\"C\", na=False)]","d32b9418":"dataset.shape","2ac850b1":"dataset[\"TotalPrice\"] = dataset[\"Quantity\"]*dataset[\"Price\"]","e464e821":"dataset.head()","d6711dd3":"dataset[\"InvoiceDate\"].max()","9bcbda84":"today = dt.datetime(2011, 12, 11)\nrfm = dataset.groupby(\"Customer ID\").agg({\"InvoiceDate\": lambda d: today - d.max(), \n                                    \"Invoice\": lambda n: n.nunique(),\n                                    \"TotalPrice\": lambda TotalPrice: TotalPrice.sum()})","8747a923":"rfm.head()","92118fb1":"rfm.columns = [\"recency\", \"frequency\", \"monetary\"]","02128265":"rfm.head()","0cce80a3":"rfm = rfm[rfm[\"monetary\"] > 0]","5c2cca4b":"rfm.head()","2c9526de":"rfm[\"recency_score\"] = pd.qcut(rfm[\"recency\"], 5, labels = ([5,4,3,2,1]))","f8a5e0b3":"rfm[\"frequency_score\"] = pd.qcut(rfm[\"frequency\"].rank(method=\"first\"), 5, labels=[1, 2, 3, 4, 5])","f35fcc06":"rfm[\"monetary_score\"] = pd.qcut(rfm[\"monetary\"], 5, labels = ([1,2,3,4,5]))","18ba9768":"rfm.head(10)","8685ccc8":"rfm[\"RFM_SCORE\"] = (rfm['recency_score'].astype(str) + rfm['frequency_score'].astype(str))","7369a264":"rfm.head(8)","0f3a2608":"seg_description = {\n    r'[1-2][1-2]': 'hibernating',\n    r'[1-2][3-4]': 'at_risk',\n    r'[1-2]5': 'cant_loose',\n    r'3[1-2]': 'about_to_sleep',\n    r'33': 'need_attention',\n    r'[3-4][4-5]': 'loyal_customers',\n    r'41': 'promising',\n    r'51': 'new_customers',\n    r'[4-5][2-3]': 'potential_loyalists',\n    r'5[4-5]': 'champions'     \n}","b2c4f0bc":"rfm[\"segment\"] = rfm[\"RFM_SCORE\"].replace(seg_description, regex = True) ","c50ce5a3":"rfm.head()","0e153215":"rfm[\"segment\"].head(15)","3104c458":"rfm[rfm[\"segment\"] == \"need_attention\"].head()","734c20a5":"df1 = rfm[rfm[\"segment\"] == \"need_attention\"]","cbf803f5":"df1.head()","d47f9255":"df2 = rfm[rfm[\"segment\"] == \"new_customers\"]","d8ba1422":"df2.head()","ebc2a19a":"df3 = rfm[rfm[\"segment\"] == \"cant_loose\"]","1a23a0ca":"frames = [df1,df2,df3]","8334c4f3":"result = pd.concat(frames)","f5bbbe1a":"result.head()","54561cca":"#result.reset_index(inplace = True)","58d72e14":"result.shape","06549e5f":"result.columns","f363efd3":"result.head(10)","58e5ceec":"result.tail(10)","1563257c":"  loyal_customers_id = pd.DataFrame(rfm[rfm[\"segment\"] == \"loyal_customers\"].index)","0592fa18":"loyal_customers_id.to_excel(\"loyal_customers.xlsx\",sheet_name = \"loyalists\")","38cfa0cc":"3. Veri setinde eksik g\u00f6zlem var m\u0131? Varsa hangi de\u011fi\u015fkende ka\u00e7 tane eksik g\u00f6zlem vard\u0131r?","8426ac00":"8. Faturalardaki \u2018C\u2019 iptal edilen i\u015flemleri g\u00f6stermektedir. \u0130ptal edilen i\u015flemleri veri setinden \u00e7\u0131kart\u0131n\u0131z.","e19dc7bf":"## G\u00f6rev 5\n* \u00d6nemli buldu\u011funuz 3 segmenti se\u00e7iniz. Bu \u00fc\u00e7 segmenti;\n* * Hem aksiyon kararlar\u0131 a\u00e7\u0131s\u0131ndan\n* * Hem de segmentlerin yap\u0131s\u0131 a\u00e7\u0131s\u0131ndan (ortalama RFM de\u011ferleri) yorumlay\u0131n\u0131z.  \n* \"Loyal Customers\" s\u0131n\u0131f\u0131na ait customer ID'leri se\u00e7erek excel \u00e7\u0131kt\u0131s\u0131n\u0131 al\u0131n\u0131z","c7f22289":"5. E\u015fsiz \u00fcr\u00fcn say\u0131s\u0131 ka\u00e7t\u0131r?","7585cf4d":"*  Recency, Frequency ve Monetary metriklerini qcut yard\u0131m\u0131 ile 1-5 aras\u0131nda skorlara \u00e7eviriniz.\nBu skorlar\u0131 recency_score, frequency_score ve monetary_score olarak kaydediniz.\n*  Olu\u015fan 2 farkl\u0131 de\u011fi\u015fkenin de\u011ferini tek bir de\u011fi\u015fken olarak ifade ediniz ve RFM_SCORE olarak kaydediniz.\n* * \u00d6rne\u011fin; Ayr\u0131 ayr\u0131 de\u011fi\u015fkenlerde s\u0131ras\u0131yla 5, 2 olan recency_score, frequency_score skorlar\u0131n\u0131 RFM_SCORE de\u011fi\u015fkeni isimlendirmesi ile olu\u015fturunuz.\n# D\u0130KKAT! Monetary skoru dahil etmiyoruz.","0a92cec5":"7. En \u00e7ok sipari\u015f edilen 5 \u00fcr\u00fcn\u00fc \u00e7oktan aza do\u011fru s\u0131ralay\u0131n\u0131z.","bcc6df1a":"9. Fatura ba\u015f\u0131na elde edilen toplam kazanc\u0131 ifade eden \u2018TotalPrice\u2019 ad\u0131nda bir de\u011fi\u015fken olu\u015fturunuz.","25c3e86a":"## G\u00f6rev 1 (Veriyi anlama ve haz\u0131rlama)","a4be3eec":"1. Online Retail II excelindeki 2010-2011 verisini okuyunuz. Olu\u015fturdu\u011funuz dataframe\u2019in kopyas\u0131n\u0131 olu\u015fturunuz.\n","37b5654b":"## G\u00f6rev 4\nRFM skorlar\u0131n\u0131n segment olarak tan\u0131mlanmas\u0131\n* Olu\u015fturulan RFM skorlar\u0131n daha a\u00e7\u0131klanabilir olmas\u0131 i\u00e7in segment tan\u0131mlamalar\u0131\nyap\u0131n\u0131z.\n","98ca21e8":"## RFM\n* Recency: S\u0131cakl\u0131kt\u0131r. M\u00fc\u015fterinin s\u0131cakl\u0131\u011f\u0131d\u0131r. M\u00fc\u015fterinin en son ka\u00e7 g\u00fcn \u00f6nce geldi\u011fini g\u00f6sterir.\n* Frequency: S\u0131kl\u0131kt\u0131r. M\u00fc\u015fteri ka\u00e7 tane al\u0131\u015fveri\u015f yapt\u0131 demektir.\n* Monetary: M\u00fc\u015fterinin b\u0131rakt\u0131\u011f\u0131 toplam parad\u0131r.\n","ba31af0f":"6. Hangi \u00fcr\u00fcnden ka\u00e7ar tane vard\u0131r?","5ed5ba8e":"Quantity ve Price de\u011fi\u015fkenlerinin %75 ve max de\u011ferleri aras\u0131nda \u00e7ok fazla fark var bu normal de\u011fil.","71393204":"4. Eksik g\u00f6zlemleri veri setinden \u00e7\u0131kart\u0131n\u0131z. \u00c7\u0131karma i\u015fleminde \u2018inplace=True\u2019 parametresini kullan\u0131n\u0131z.","79ad1fcd":"## G\u00f6rev 3\nRFM skorlar\u0131n\u0131n olu\u015fturulmas\u0131 ve tek bir de\u011fi\u015fkene \u00e7evrilmesi","08401204":"2. Veri setinin betimsel istatistiklerini inceleyiniz."}}