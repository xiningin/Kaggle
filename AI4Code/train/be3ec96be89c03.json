{"cell_type":{"f91d4b8f":"code","ef6deaa0":"code","9d01c8f4":"code","b2e0f0d7":"code","84ed6e14":"code","27fd8e84":"code","699c7c61":"code","33aa4d00":"code","dcd97ff6":"code","c45cf09d":"code","8e198166":"code","4c836138":"code","65e0b2bb":"code","c6621eb2":"code","777edb12":"code","7c3b5576":"code","a6bf0920":"code","a31b6494":"code","5bde43cc":"code","0082005c":"code","7acdab1d":"code","9342489f":"code","8b69cd77":"code","74a00586":"code","e38260e3":"code","36443848":"code","c7599a69":"code","36b7f58a":"code","fc80f31f":"code","5848e6b5":"code","512fe5fb":"code","93e2163f":"code","93361278":"code","99026685":"code","20322d9d":"code","ffbae730":"code","7ccbf687":"code","93ebbfac":"code","736c82d6":"code","0e2b3485":"code","1f8142df":"code","2d79d7aa":"markdown","e194ee1c":"markdown","b8da7608":"markdown","f63d9b22":"markdown","73a643dd":"markdown","746e0eae":"markdown","ffdefc9f":"markdown","da2006a9":"markdown","5a94cd5d":"markdown","838e6091":"markdown","9e197039":"markdown","0efc4828":"markdown","ab3ff6a1":"markdown","81955c4d":"markdown","c95eee2f":"markdown","25fa7c40":"markdown","60ca5895":"markdown","407a9672":"markdown","53b6dc8a":"markdown","7682920c":"markdown","02fc20d5":"markdown","918ffe96":"markdown","e6cd6a07":"markdown","00f98041":"markdown","36defae1":"markdown","6909b6db":"markdown","5e2847fe":"markdown","5c01e549":"markdown","e11a1ea5":"markdown","378be471":"markdown","9c137179":"markdown","4995b85c":"markdown","4ce231f7":"markdown"},"source":{"f91d4b8f":"# This Python 3 environment comes with many helpful analytics libraries installed\n# It is defined by the kaggle\/python docker image: https:\/\/github.com\/kaggle\/docker-python\n# For example, here's several helpful packages to load in \n\nimport numpy as np # linear algebra\nimport pandas as pd # data processing, CSV file I\/O (e.g. pd.read_csv)\n\n# Input data files are available in the \"..\/input\/\" directory.\n# For example, running this (by clicking run or pressing Shift+Enter) will list all files under the input directory\n\nimport os\nfor dirname, _, filenames in os.walk('\/kaggle\/input'):\n    for filename in filenames:\n        print(os.path.join(dirname, filename))\n\n# Any results you write to the current directory are saved as output.","ef6deaa0":"import pandas as pd \n  \ndata = {'State':['WA', 'OR', 'CA', 'NV', 'CO', 'MA'], 'Sales':[1100000000, 752000000, 3100000000, 639000000, 1747990628, 394000000], \n        'Tax Revenue':[407000000, 127840000, 288000000, 99184974, 262198594, 42158000]} \n  \ndf = pd.DataFrame(data) \ndf","9d01c8f4":"df.info()","b2e0f0d7":"df.describe()","84ed6e14":"a=df.corr()\na","27fd8e84":"import numpy as np\nimport seaborn as sns\nimport matplotlib.pyplot as plt\nfrom scipy import stats","699c7c61":"sns.heatmap(a, annot=True)","33aa4d00":"x=df['Sales']\ny=df['Tax Revenue']","dcd97ff6":"sns.kdeplot(x, label=\"Sales\")\nsns.kdeplot(y, label=\"Tax\")\nplt.legend()","c45cf09d":"sns.jointplot(x, y, data=df, kind=\"kde\", color='salmon')","8e198166":"sns.pairplot(df)","4c836138":"sns.set_color_codes()\nax = sns.distplot(x, color=\"y\")","65e0b2bb":"ax = sns.distplot(y, color=\"r\")","c6621eb2":"plt.plot(x, x + 0, '-g')  # solid green\nplt.plot(y, x + 1, '--c') # dashed cyan","777edb12":"plt.scatter(x, y, c='orange', marker='*', data=df)","7c3b5576":"sns.set(style=\"whitegrid\")\nax = sns.barplot(x, y, data=df, color=\"green\")","a6bf0920":"# getting Difference \ndf['Revenue after taxes'] = x-y\ndf","a31b6494":"#difference with previous row\ndf1= df.drop('State', axis=1)\ndf1=df1.diff()\ndf1","5bde43cc":"data1 = {'State':['NM', 'SD', 'AZ', 'AR', 'MO', 'MD'], 'Violent crime rate per 100,000 people':[856.6, 404.7, 474.9, 541.1, 502.1, 468.7]} \n  \ndf2 = pd.DataFrame(data1) \ndf2","0082005c":"data2 = {'State':['WA', 'OR', 'CA', 'NV', 'CO', 'MA'], 'Violent crime rate per 100,000 people':[311.5, 285.5, 447.4, 543.6, 397.2, 338.1]} \n  \ndf3 = pd.DataFrame(data2) \ndf3","7acdab1d":"stateCrime = pd.concat([df2, df3])\n\nstateCrime","9342489f":"p1 = stateCrime.plot(kind='bar')","8b69cd77":"stateCrime.plot.bar(color='orange')","74a00586":"data3 = {'State':['WA', 'OR', 'CA', 'NV', 'CO', 'MA'],  'Other industry revenue':[7000000000, 1030279086, 14419579138, 8700000000, 286300000, 3000000000], 'Industry':['Wine', 'Liquor', 'Wine', 'Casinos', 'Tobacco', 'Beer Wine & Liquor Stores']} \n  \nother = pd.DataFrame(data3) \nother","e38260e3":"up = other['Other industry revenue']\nlabels = other['State']\nplt.style.use('ggplot')\nplt.xticks(range(len(up)), labels)\nplt.xlabel('State')\nplt.ylabel('Other industry revenue')\nplt.title('Other industries')\nplt.bar(range(len(up)), up) \nplt.show()","36443848":"compareAll= pd.concat([df, df1, df2, df3, other], axis=1)\ncompareAll","c7599a69":"columns1 = [x for x in range(compareAll.shape[1])]  # list of columns' integer indices\n\n#remove the data for illegal states\ncolumns1.remove(7) #removing column integer index 7\ncolumns1.remove(8) #index 8\n#remove the repeated columns with state names\ncolumns1.remove(9)\ncolumns1.remove(11)\n#remove row differentiation columns\ncolumns1.remove(4)\ncolumns1.remove(5)\ncolumns1.remove(6)\nLegal=compareAll.iloc[:, columns1] #return all columns except the defined column\nLegal","36b7f58a":"stats=Legal.corr()\nstats","fc80f31f":"plt.matshow(stats)\nplt.xticks(range(len(Legal.columns)), Legal.columns)\nplt.yticks(range(len(Legal.columns)), Legal.columns)\nplt.colorbar()\nplt.show()","5848e6b5":"s=Legal['Sales']\nt=Legal['Revenue after taxes']\nplt.scatter(s, t, color='green')\nplt.show()","512fe5fb":"#label Encode \n# Import label encoder \nfrom sklearn import preprocessing \n  \n# encode objects\nlabel_encoder = preprocessing.LabelEncoder() \n  \n# Encode labels of specific columns\nLegal['State']= label_encoder.fit_transform(Legal['State']) \nLegal['Industry']= label_encoder.fit_transform(Legal['Industry']) \nLegal","93e2163f":"sns.pairplot(Legal, hue=\"State\")","93361278":"Legal.plot.bar()","99026685":"n=Legal[['Sales','Tax Revenue','Revenue after taxes', 'Other industry revenue']]\nn","20322d9d":"##Normalize dataframe\nfrom sklearn import preprocessing\nmin_max_scaler = preprocessing.MinMaxScaler()\nnp_scaled = min_max_scaler.fit_transform(n)\nnormalzd = pd.DataFrame(np_scaled)\nnormalzd","ffbae730":"n.plot.bar()","7ccbf687":"sns.pairplot(n, hue=\"Tax Revenue\")","93ebbfac":"Legal","736c82d6":"Legal['Tax Revenue'].plot.bar()","0e2b3485":"# merge dataframes: other + df\ninds=pd.merge(df, other, on='State', how='left')\ninds","1f8142df":"stateCrime","2d79d7aa":"### **Comparison:** ###  \n  \n**Crime rate**( based on the FBI\u2019s 2018 Uniform Crime Report; the 2019 wont be available until fall 2020):   \nsources: https:\/\/www.usatoday.com\/story\/money\/2020\/01\/13\/most-dangerous-states-in-america-violent-crime-murder-rate\/40968963\/    \nMassachusetts was at 338.1 per 100,000 people violent crimes, compared to Maryland with 468.7 per 100,000 people.      \n\nCalifornia experienced 447.4 violent crimes per 100,000 people, while Arizona experienced 474.9.   \n\nWashington reported a 311.5 per 100,000 people violent crime rate and New Mexico reported a 856.6 violent crime rate.  \n\nOregon reported a violent crime rate of 285.5 per 100,000 people and South Dakota 404.7.     \n\nNevada had 541.1 per 100,000 people and Arkansas 543.6.     \nColorado reported 397.2, while Missouri reported 502.1 violent crimes per 100,000 people.   \n","e194ee1c":"East coast states: Massachussetts had a lower violent crime rate than Maryland.   \nMiddle America: Colorado reported a lower violent crime rate than Missouri, Oregon reported significantly less violent crimes than South Dakota, and Nevada had a slightly higher violent crime rate than Arkansas did for 2019.   \nSouthwest states: California had slighly less violent crimes than Arizona.   \nWashington state had a significantly lower violent crime rate compared to New Mexico.   ","b8da7608":"Concatenate a dataframe","f63d9b22":"### Compare to **other industries** ###   \n\nMassachussets' Beer, Wine & Liquor Stores brought 3 billion in 2019.   \nSource: https:\/\/www.ibisworld.com\/industry-trends\/market-research-reports\/massachusetts\/retail-trade\/beer-wine-liquor-stores-in-massachusetts.html      \n   \nColorado's Tobacco industry generated 286.3 million in 2019.   \nSource: https:\/\/truthinitiative.org\/research-resources\/smoking-region\/tobacco-use-colorado-2019      \n    \nNevada's casino gaming generated 8.76 billion.    \nSource: https:\/\/www.statista.com\/statistics\/418686\/nevada-casino-gaming-revenue\/   \n  \nCalifornia reported 14,419,579,138 billion in sales from the Wine industry in 2019.   \nSource: Nielsen Beverage Report of October 5, 2019 https:\/\/www.nielsen.com\/us\/en\/insights\/report\/2019\/total-consumer-report-2019\/   \n  \nOregon's Liquor brought 1,030,279,086 billion.   \nSource: Oregon Liquor Control Commission, Biennial Allocation of Liquor Revenue report.      \n    \nWashington's wine industry reported 7 billion dollars in sale for 2019.   \nSource: https:\/\/www.washingtonwine.org\/wine\/facts-and-stats\/state-facts      \n","73a643dd":"Remove specific columns based on index position and remove repeated columns and extra data","746e0eae":"Look for correlation","ffdefc9f":"Pairplot of the dataframe","da2006a9":"1. Create and display a dataframe with the data above","5a94cd5d":"Answer hypotheses   \n1) Which state brings the most in tax revenue?   \n ","838e6091":"Label-encode object data ","9e197039":"Vizualize sales revenues in relation to Tax Revenue","0efc4828":"   **2019**   \nBelow, there are some of the data from states with legal recreational cannabis industries.      \n\n**Washington state** reported in 2019 1.1 billion in sales     \nand collected about 407 million in taxes. (At 37 percent sales tax)   \nSource: https:\/\/www.tre.wa.gov\/portfolio-item\/washington-state-marijuana-revenues-and-health\/         \n      \n**Oregon** reported 752 million in sales and 127,840,000 million in taxes (at 17 percent).   \nSource: https:\/\/www.fool.com\/investing\/2019\/12\/15\/the-10-top-selling-marijuana-states-in-2019.aspx      \n\n**Colorado** reported 1,747,990,628 billion in sales and about 262,198,594 million in taxes (at 15 percent).   \nSource: https:\/\/www.colorado.gov\/pacific\/revenue\/colorado-marijuana-sales-reports      \n  \n**Nevada** reported 639 million in sales and 99,184,973 collected in taxes.     \nSource: https:\/\/mjbizdaily.com\/nevada-marijuana-sales-rise-to-639-million-in-fiscal-year-2019\/   \n  \n**California** reported 3.1 billion, with 288 million paid for taxes.   \nSources: https:\/\/www.fool.com\/investing\/2019\/12\/15\/the-10-top-selling-marijuana-states-in-2019.aspx   \nand       \nhttps:\/\/www.npr.org\/2019\/08\/23\/753791322\/california-says-its-cannabis-revenue-has-fallen-short-of-estimates-despite-gains      \n\n**Massachussetts** reported 394 million of which 42,158,000 million went to taxes (at 10.75 percent).      \nSource: https:\/\/www.wbur.org\/bostonomix\/2019\/12\/27\/massachusetts-legalized-marijuana-sales-420-million-dollars               \n    \n ","ab3ff6a1":"2. Study the data","81955c4d":"**KDE: Kernel Density Estimate** helps visualize the Probability Density of a continuous variable.","c95eee2f":"Vizualization of data distribution","25fa7c40":"The MA's Beer Wine & Liquor Stores, the Oregon liquor industry, and the NV's casino gaming brought more money than the cannabis industry in those state.   \nWA's wine industry, CO's tobbaco industry, and CA's wine brought less money than the cannabis industry in those states.   ","60ca5895":"Pairplot and color to the the column **State**","407a9672":"Vizualize the difference in revenue","53b6dc8a":"**Conclusion**   \n\n\nFindings:    \n1) While Colorado and California had higher sales-profits, Washington received the most in tax revenue.     \n2) The CA and WA wine industries underperformed compared to their cannabis sales profits.      \n3) Except in the case of Nevada, states with recreational cannabis industries had lower violent crime rates than comparable states without that industry.         \n\nThere are several limitation to the data used here, but it is useful for the intended purpose: To show the potential of a small dataframe for data analysis by exploring US cannabis sales.         \n  ","7682920c":"3) Do states with recreational cannabis industries have lower crime rate than similar states without that industry?","02fc20d5":"Concatanate different dataframes along columns (attach to the side)   ","918ffe96":"Create dataframe from collected data.","e6cd6a07":"Correlate","00f98041":"Differentiation between columns, create a column, and add to the dataframe","36defae1":"Scatter plot of correlation of two columns","6909b6db":"Display correlation with matrix","5e2847fe":"Difference between row and the previous row","5c01e549":"**Kernel density estimation** visualizing a bivariate distribution.","e11a1ea5":"2) Did the cannabis industry earned more than other popular industries?    ","378be471":"**Preprocess data**   \nScale the data and replot.      ","9c137179":"Vizualization of bar plots","4995b85c":"Visualize correlation","4ce231f7":"Purpose: To show the potential small dataframes have for data analysis using data on US cannabis sales and revenue in 6 states with recreational cannabis.      \nHypotheses:    \n1) Which state brings the most in tax revenue?   \n2) Did the cannabis industry earned more than other popular industries?   \n3) Do states with recreational cannabis industries have lower crime rate than similar states without that industry?      \n\nLimitation of data:   \nThe sources vary, from official to approximates by popular websites. This means that it may not be reliable.   \nThere are other states with cannabis industries. So, the data here limits to 5 of 11 with recreational legal status. Therefore, the scope is limited.     \nThe data used for comparison, such as other state's crime rates and other industries may not be the most appropriate 'comparable'.   \n\n\n\n   "}}