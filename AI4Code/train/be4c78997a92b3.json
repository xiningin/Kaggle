{"cell_type":{"4558d280":"code","e127e479":"code","a7d6a67d":"code","57635f3d":"code","f109c4e5":"code","1f56fc42":"code","b97e3aa5":"code","54dc1da6":"code","4b7939fd":"code","c4f04e85":"code","6b217d61":"code","7a543dc0":"code","0bc75483":"code","d36558c8":"code","8789eab0":"code","842abf58":"code","e4e04405":"code","68540fb4":"markdown","89116713":"markdown","cf643446":"markdown","5920618f":"markdown","6d4ad522":"markdown","a4a73891":"markdown","be56f9b8":"markdown","5fe47b19":"markdown","ae599027":"markdown","a6a82982":"markdown","0cab62fd":"markdown","531ca5b7":"markdown","3eb21a7f":"markdown","b2bdb38b":"markdown","cd9da257":"markdown"},"source":{"4558d280":"import sklearn\nimport pandas as pd\nimport seaborn as sns\nimport matplotlib.pyplot as plt\nimport numpy as np","e127e479":"# This Python 3 environment comes with many helpful analytics libraries installed\n# It is defined by the kaggle\/python Docker image: https:\/\/github.com\/kaggle\/docker-python\n# For example, here's several helpful packages to load\n\nimport numpy as np # linear algebra\nimport pandas as pd # data processing, CSV file I\/O (e.g. pd.read_csv)\n\n# Input data files are available in the read-only \"..\/input\/\" directory\n# For example, running this (by clicking run or pressing Shift+Enter) will list all files under the input directory\n\nimport os\nfor dirname, _, filenames in os.walk('\/kaggle\/input'):\n    for filename in filenames:\n        print(os.path.join(dirname, filename))\n\n# You can write up to 5GB to the current directory (\/kaggle\/working\/) that gets preserved as output when you create a version using \"Save & Run All\" \n# You can also write temporary files to \/kaggle\/temp\/, but they won't be saved outside of the current session","a7d6a67d":"filepath = r'\/kaggle\/input\/league-of-legends-ranked-matches\/matches.csv'\nmatches = pd.read_csv(filepath)\nfilepath = r'\/kaggle\/input\/league-of-legends-ranked-matches\/champs.csv'\nchamps = pd.read_csv(filepath)\nfilepath = r'\/kaggle\/input\/league-of-legends-ranked-matches\/participants.csv'\nparticipants = pd.read_csv(filepath)\nfilepath = r'\/kaggle\/input\/league-of-legends-ranked-matches\/stats1.csv'\nstats1 = pd.read_csv(filepath)\nfilepath = r'\/kaggle\/input\/league-of-legends-ranked-matches\/stats2.csv'\nstats2 = pd.read_csv(filepath)\nstats = stats1.append(stats2)\nfilepath = r'\/kaggle\/input\/league-of-legends-ranked-matches\/teamstats.csv'\nteamstats = pd.read_csv(filepath)","57635f3d":"df = pd.merge(participants, stats, how = 'left', on = ['id'], suffixes=('', '_y'))\ndf = pd.merge(df, champs, how = 'left', left_on = 'championid', right_on = 'id', suffixes=('', '_y'))\ndf = pd.merge(df, matches, how = 'left', left_on = 'matchid', right_on = 'id', suffixes=('', '_y'))\ndf.head()","f109c4e5":"pd.options.display.max_columns = None\ndf.columns","1f56fc42":"# selecting a smaller subset of factors to look at\n# using the describe function as a preliminary way to check the data seems alright (i.e. spot any errors)\n\ndf = df[['matchid', 'player', 'name', 'position', 'win', 'kills', 'deaths', 'assists', 'largestkillingspree', 'largestmultikill', 'longesttimespentliving', 'totdmgdealt', 'totdmgtochamp', 'totdmgtaken', 'turretkills', 'totminionskilled', 'goldearned', 'wardsplaced', 'duration', 'firstblood', 'seasonid']]\ndf.describe()","b97e3aa5":"# roughly 150k rows removed i.e. ~ 15,000 matches\n\nprint(df.shape)\ndf = df[df['seasonid'] == 8]\ndf = df[df['duration'] >= 300]\ndf = df[df['totdmgdealt'] >= 0]\n\nprint(df.shape)","54dc1da6":"pd.options.display.float_format = '{:,.1f}'.format\n\ndf_win_rate = df.groupby('name').agg({'win': 'sum', 'name': 'count', 'kills': 'mean', 'deaths': 'mean', 'assists': 'mean'})\ndf_win_rate.columns = ['win matches', 'total matches', 'K', 'D', 'A']\ndf_win_rate['win rate'] = df_win_rate['win matches'] \/  df_win_rate['total matches'] * 100\ndf_win_rate['KDA'] = (df_win_rate['K'] + df_win_rate['A']) \/ df_win_rate['D']\ndf_win_rate = df_win_rate.sort_values('win rate', ascending = False)\ndf_win_rate = df_win_rate[['total matches', 'win rate', 'K', 'D', 'A', 'KDA']]\n\n# adding position that champions are most commonly played in\n\ndf_test = df.groupby('name').position.apply(lambda x: x.mode())\ndf_new = pd.merge(df_win_rate, df_test, how = 'left', on = ['name'], suffixes=('', '_y'))\ndf_new\n\nprint('Top 10 win rate')\nprint(df_new.head(10))\nprint('Bottom 10 win rate')\nprint(df_new.tail(10))","4b7939fd":"# this cell allows visulisation of the distribution of positions played for each champion. Shows most champions have a clear\n# favorite lane that they are played in.\n\nchamp = 'Anivia'\n\ndf_test = df[df['name'] == champ]\nprint(df_test['position'].value_counts())\nplt.figure(figsize=(12,8))\nplt.title('Distribution of position played for '+str(champ))\nplt.ylabel('# of games position picked')\nsns.countplot(df_test['position'])","c4f04e85":"df_corr = df._get_numeric_data()\ndf_corr = df_corr.drop(['matchid', 'player'], axis = 1)","6b217d61":"corr = df_corr.corr()\nplt.figure(figsize=(15,10))\nax= plt.subplot()\n\nmask = np.zeros_like(df_corr.corr(), dtype=np.bool)\nmask[np.triu_indices_from(mask)] = True\ncmap = sns.diverging_palette(240, 10, n=9, as_cmap=True)\n\nsns.heatmap(corr, ax=ax, annot=True,square=True, linewidths=.5, center = 0, mask = mask, cmap=cmap, fmt = '.2f')","7a543dc0":"# average game time is ~ 31 minutes\n\ndf.loc[:,'duration'].describe()","0bc75483":"df.hist(column='duration', bins=40)","d36558c8":"df_corr_2 = df._get_numeric_data()\ndf_corr_2 = df_corr_2.drop(['matchid', 'player'], axis = 1)\n# for games less than 25mins\ndf_corr_2 = df_corr_2[df_corr_2['duration'] <= 1500]","8789eab0":"corr = df_corr_2.corr()\nplt.figure(figsize=(15,10))\nax= plt.subplot()\n\nmask = np.zeros_like(df_corr_2.corr(), dtype=np.bool)\nmask[np.triu_indices_from(mask)] = True\ncmap = sns.diverging_palette(240, 10, n=9, as_cmap=True)\n\nsns.heatmap(corr, ax=ax, annot=True,square=True, linewidths=.5, center = 0, mask = mask, cmap=cmap, fmt = '.2f')","842abf58":"df_corr_3 = df._get_numeric_data()\ndf_corr_3 = df_corr_3.drop(['matchid', 'player'], axis = 1)\ndf_corr_3 = df_corr_3[df_corr_3['duration'] >= 2400]","e4e04405":"corr = df_corr_3.corr()\nplt.figure(figsize=(15,10))\nax= plt.subplot()\n\nmask = np.zeros_like(df_corr_3.corr(), dtype=np.bool)\nmask[np.triu_indices_from(mask)] = True\ncmap = sns.diverging_palette(240, 10, n=9, as_cmap=True)\n\nsns.heatmap(corr, ax=ax, annot=True,square=True, linewidths=.5, center = 0, mask = mask, cmap=cmap, fmt = '.2f')","68540fb4":"# Shorter Game Analysis\nLooking at games a chunk of time less than average (<25mins)","89116713":"# Conclusions  \n1. Overall conclusions can be made that the longer the game drags on, the lower the importance of individual things dictating the overall result. This makes inuitive sense, as longer games are likely to be more even stats wise (if one team has much better stats than the other it is likely to win quickly). Still, the same correlation patterns are seen with what is indicative of a winning team member e.g. turret kills, gold earned, kills, less deaths, etc.\n2. Interesting -ve correlation between wards placed and kills. Perhaps having more vision makes you a more cautious player and less likely to get into positions where you get kills. Also -ve correlation with total damage dealt; again, there is possibly less engagment with increased vision.","cf643446":"# Conclusions  \n1. As hypothesised, there is magnification of correlation of certain factors (e.g. gold earned, kills, deaths). Implies in short games actions are more meaningful e.g. a kill\/death is what tips the balance that allows a team to win a short game. On the other hand, in longer, slower games, each death isn't as meaningful to the overall result.\n2. Jump in first blood\/win correlation. Makes sense, reiterates previous notion.\n3. There is the implication that increased vision from warding seems to aid positioning for assists, as well as enabling you to stay alive for longer.\n4. Gold earned strongly correlates with a lot of attributes that indicate the benefits of having good items e.g. you can deal more damage, get more kills, fo on big killing sprees. Still doesn't as strongly correlate to overall win, implying teamwork is important in league.","5920618f":"# Dataset cleaning\n\n1. Will use just season 8, as makes up majority of data, and is most relevant.\n2. Will remove anomalous totdmgdealt value (shouldn't be -ve).\n3. Remove games that are under 5 minutes long, as they probably include afk players.","6d4ad522":"# Longer Games\nLonger than 40 mins","a4a73891":"# Conclusions  \n1. Turret kills strongest correlation with being on winning team. There is also positive correlation with gold earned, kills (and related stats), and negative correlation with deaths (obviously).  \n2. Wards placed, minions killed, first blood, and damage taken have little correlation with winning.  \n  \nGame duration has no correlation with winning (makes sense) - would be interesting to see how correlation changes when different game lengths are looked at. Maybe for shorter games things like gold earned\/kills\/deaths will be more important, as can get stronger items before other team and use advantage to win. Also, maybe things like first blood more important for shorter games.","be56f9b8":"# Conclusions  \n\n1. The game is overall pretty well balanced.  \n2. Ryze is a trash pick. I don't know much about the game, but I hope he's recieved a buff by now.","5fe47b19":"# Match duration distribution","ae599027":"# Correlation between factors","a6a82982":"# **Read in data**","0cab62fd":"(The early peak might be due to games ending early when people are AFK.) --> this got removed by adjustment to data cleaning\n\nNext bit of analysis will look at short games vs long games i.e. above and below the average time.","531ca5b7":"# Champions position and win-rate anlysis","3eb21a7f":"![Image of Yaktocat](https:\/\/images.contentstack.io\/v3\/assets\/blt731acb42bb3d1659\/blt45d6c2043ff36e28\/5e21837f146ca8115b2d3332\/Champion-List.jpg)\n\n# Gameplan  \n1. Clean data + make it relevant to info to be extracted.\n2. Visualisation - Will first do Champion specific stuff (win rates and positional pick frequency), then game wide what factors are important for winning overall, and in short and long games.","b2bdb38b":"# Merging together the bits of data I want to use","cd9da257":"Please let me know if you agree\/disagree with any of the conclusions, + if there any other things that'd be of interest to analyse\/visualise."}}