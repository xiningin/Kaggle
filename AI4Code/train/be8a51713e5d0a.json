{"cell_type":{"09dc561c":"code","a64a598d":"code","f8b627a3":"code","1426de68":"code","753269d0":"code","5db12d4e":"code","6b33a7cf":"code","300a3709":"code","925c7a28":"code","fc9414ec":"code","82574cf6":"code","357f73c2":"code","e0b5a793":"markdown","3e5f3dd8":"markdown","1ea7199c":"markdown","f6575d22":"markdown","fac97912":"markdown","28d39a31":"markdown","45397f34":"markdown","556b81a0":"markdown","0c0703be":"markdown","2e6dd1c1":"markdown"},"source":{"09dc561c":"import pandas as pd\nimport os\nimport json\nimport cv2\nimport matplotlib.pyplot as plt\n\nplt.rcParams[\"figure.figsize\"] = (30,10)","a64a598d":"clahe = cv2.createCLAHE(clipLimit=2.0, tileGridSize=(8,8))","f8b627a3":"base_folder='..\/input\/ranzcr-clip-catheter-line-classification'\nimage_folder='..\/input\/ranzcr-clip-catheter-line-classification\/train'","1426de68":"df_train=pd.read_csv(os.path.join(base_folder, 'train.csv'))\ndf_mask=pd.read_csv(os.path.join(base_folder, 'train_annotations.csv'))","753269d0":"df_train.head()","5db12d4e":"df_mask.head()","6b33a7cf":"df_NGT_ab=df_mask[df_mask['label']=='NGT - Abnormal'].reset_index(drop=True)","300a3709":"df_NGT_ab","925c7a28":"def showing_img(df, index):\n    print (df.iloc[index].StudyInstanceUID)\n    data=df.iloc[index]['data']\n    coors=json.loads(data)\n    images=cv2.imread(os.path.join(image_folder, df.iloc[index]['StudyInstanceUID']+'.jpg'),0)\n    images=cv2.cvtColor(clahe.apply(images),cv2.COLOR_GRAY2RGB)\n\n    images_ori=images.copy()\n    h,w=images.shape[0:2]\n    blue = (0, 0, 255)\n    for n, j in enumerate(coors):\n        if n != len(coors)-1:\n            print (coors[n])\n            cv2.line(images, tuple(coors[n]), tuple(coors[n+1]), blue, 3)\n    \n    plt.subplot(121)\n    plt.imshow(images_ori)\n    plt.subplot(122)\n    plt.imshow(images)","fc9414ec":"showing_img(df_NGT_ab, 3)","82574cf6":"showing_img(df_NGT_ab, 43)\n\n#43, 51, 57, 79, 86, 96, 100, 106","357f73c2":"showing_img(df_NGT_ab, 18)","e0b5a793":"# RANZCR CLiP - Catheter and Line Position Challenge","3e5f3dd8":"There are only 107 NGT-abnormal cases (total 111, wrong 4)\n\nIt is realatively small datasets to learn abnormal NGT position.","1ea7199c":"**Wrong annotations - NOT NGT**\n\n1.2.826.0.1.3680043.8.498.12545979153892772426852721449004507757\n1.2.826.0.1.3680043.8.498.75269816256944932004789976844599885553\n1.2.826.0.1.3680043.8.498.11935284122896798228836385959451625327\n1.2.826.0.1.3680043.8.498.83574817573978660270935463700320068005\n","f6575d22":"# 3. Knotted - one","fac97912":"# 1. TOO shallow example - almost","28d39a31":"# The abnormal tip position of nasogastric tube\n    1. TOO shallow - almost\n    2. U shaped - a few\n    3. Knotted - one","45397f34":"The tip of nasogatric tube is located in mid-esophagus (superior to the diaphragm).","556b81a0":"Before we start, please check out domain knowledge from dr. Konya's great article (https:\/\/www.kaggle.com\/c\/ranzcr-clip-catheter-line-classification\/discussion\/204790)","0c0703be":"The nasogastric tube is showing U-shape.","2e6dd1c1":"# 2. U shaped example - A few"}}