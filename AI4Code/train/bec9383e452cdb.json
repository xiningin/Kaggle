{"cell_type":{"50c9c7a2":"code","6f882a60":"code","cc9de396":"code","4c2df6c6":"code","065fab7c":"code","e7700042":"code","e3334fb6":"code","8508e98d":"code","abb8ce59":"code","1910fa3a":"code","3d001692":"code","bfab98cc":"code","db472f36":"code","0d356869":"code","10edd7ba":"code","101d48ab":"code","b2a5bf6f":"code","be7ba3de":"code","44aaaf2b":"code","ad8d4bb7":"code","b1a55bff":"code","82ccf05b":"code","32c07208":"code","b5bd85a7":"code","7fe8a7e5":"code","fc9bf81b":"code","80b4d14d":"code","275697f9":"code","b435ae8f":"code","a6efa67d":"code","b8e2b61d":"code","6daf2b71":"code","c7dc0f2f":"code","d4af33b7":"code","c4e5c0a8":"code","3d055e67":"code","26b47904":"code","6751f8e7":"code","7f6f4872":"code","79691bb3":"code","45925f16":"code","51e2fdae":"code","aca0c173":"code","770fdeb0":"code","37207172":"code","cce45d97":"code","2d6d584f":"code","ecb1ab14":"code","2660828e":"code","f1e81f54":"code","33374b94":"code","b8c04057":"code","a633c777":"code","86e90428":"code","cdc2d95c":"code","39e19d31":"code","41bf03ba":"code","feb54eb0":"code","b3a285ce":"code","e494fa2c":"code","7ff81868":"code","c25f6f39":"code","b1eaf596":"code","7ef51369":"code","123e541b":"code","95775866":"code","4de1f672":"code","75c49da9":"code","62881fad":"code","041205b0":"code","68c57403":"code","409b5453":"code","d2964564":"code","26764c12":"code","b9d110b4":"code","5fdd0b9f":"code","62afdd47":"code","38bf0ff1":"markdown","16bc1b5e":"markdown","f192a820":"markdown","0c688ee1":"markdown","55580c63":"markdown","d818547f":"markdown","5d195306":"markdown","c2bc383e":"markdown","a70671a2":"markdown","0dcf92d4":"markdown","6caa4048":"markdown","1a3833cd":"markdown","92bd1588":"markdown","be7e2bd2":"markdown","9976ab70":"markdown","48b4340c":"markdown","2ee4cd0c":"markdown","aaf82724":"markdown","3a2f8311":"markdown","cc462b11":"markdown","3ef62948":"markdown","1a533596":"markdown","bb139f2f":"markdown","3063ccc9":"markdown","4c47c8b2":"markdown","de8f3eaf":"markdown","9901a0a3":"markdown","fe839a48":"markdown","27e0fca8":"markdown","3d212da1":"markdown","03aa729c":"markdown","1d6c1666":"markdown","e441a92d":"markdown","3dde891b":"markdown","28e0bc5b":"markdown","53123c85":"markdown","8690a2c6":"markdown","13b5f04f":"markdown","ee73f996":"markdown"},"source":{"50c9c7a2":"# This Python 3 environment comes with many helpful analytics libraries installed\n# It is defined by the kaggle\/python docker image: https:\/\/github.com\/kaggle\/docker-python\n# For example, here's several helpful packages to load in \n\nimport pandas as pd\nimport matplotlib.pyplot as plt\nimport numpy as np\nimport seaborn as sns\nfrom bs4 import BeautifulSoup as bs\nfrom IPython.display import Image \nimport requests\n\n%matplotlib inline  \n# Input data files are available in the \"..\/input\/\" directory.\n# For example, running this (by clicking run or pressing Shift+Enter) will list the files in the input directory\n\nimport os\nprint(os.listdir(\"..\/input\"))\n\n# Any results you write to the current directory are saved as output.","6f882a60":"#read csv files\n\ndfShotsLog = pd.read_csv('..\/input\/nba-shot-logs\/shot_logs.csv')\n#remove unnecessary columns\ndfShotsLog=dfShotsLog.drop(['MATCHUP','CLOSEST_DEFENDER_PLAYER_ID','PTS','player_id'],axis=1)\nplayers_stats_2014_2015=pd.read_csv('..\/input\/nba-players-stats-20142015\/players_stats.csv')# file with players details\n","cc9de396":"#remove unnecessary columns\nplayers_stats_2014_2015=players_stats_2014_2015.drop([ 'Games Played', 'MIN', 'PTS', 'FGM', 'FGA', 'FG%', '3PM', '3PA',\n'3P%', 'FTM', 'FTA', 'FT%', 'OREB', 'DREB', 'REB', 'AST', 'STL', 'BLK',\n'TOV', 'PF', 'EFF', 'AST\/TOV', 'STL\/TOV', 'Age','Birth_Place',\n'Birthdate', 'Collage','Experience','Team','Weight',\n'BMI'],axis=1)\n\n","4c2df6c6":"#clean data\n# function that gets input string (represents first name and last name )and indecation if reverse first name and last name\n#return formated name\ndef formatPlayersName(inputString,isReverse=False):\n    splitString=inputString.split()\n    if(len(splitString)==1):\n        return cleanStr(splitString[0],[\".\",\"-\",\"'\"])\n    if(isReverse==True):\n        newStr=cleanStr(splitString[1],[\".\",\"-\",\",\",\"'\"])+\" \"+cleanStr(splitString[0],[\".\",\"-\",\",\",\"'\"])\n    else:\n        newStr=cleanStr(splitString[0],[\".\",\"-\",\",\",\"'\"])+\" \"+cleanStr(splitString[1],[\".\",\"-\",\",\",\"'\"])\n    \n    return newStr\n    \n#help function that gets input string and list of chars to remove \n#return string with listChar removed\ndef cleanStr(inputString,listChar):\n    newStr=inputString\n    for char in listChar:\n        newStr = newStr.replace(char, \"\")\n    return newStr.lower()\n\n# formating names in all columns that represent basket ball players name (we will use the names as key to merge data frame)\nplayers_stats_2014_2015['Name'] = players_stats_2014_2015.apply(lambda x: formatPlayersName(x['Name']), axis=1)\ndfShotsLog['player_name'] = dfShotsLog.apply(lambda x: formatPlayersName(x['player_name']), axis=1)\ndfShotsLog['CLOSEST_DEFENDER'] = dfShotsLog.apply(lambda x: formatPlayersName(x['CLOSEST_DEFENDER'],True), axis=1)","065fab7c":"# merging data 2 files based on players name (the data contain unique players names)\nmergedWithShooterName=pd.merge(dfShotsLog, players_stats_2014_2015, how='inner', left_on=['player_name'], right_on=['Name'])\nmergedWithDefenderName=pd.merge(mergedWithShooterName, players_stats_2014_2015, how='inner', left_on=['CLOSEST_DEFENDER'], right_on=['Name'])\n","e7700042":"#renaming data frame columns\nmergedWithDefenderName.columns = ['GAME_ID','SHOOTERS_COURT_LOCATION', 'SHOOTERS_TEAM_FINAL_RESULT', 'SHOOTERS_FINAL_RESULT_DIFF', 'SHOT_NUMBER_IN_GAME', 'PERIOD',\n       'GAME_CLOCK', 'SHOT_CLOCK', 'DRIBBLES', 'TOUCH_TIME','SHOT_DIST', 'PTS_TYPE',\n       'SHOT_RESULT', 'DEFENDER_NAME','CLOSE_DEF_DIST','SHOT_RESULT_INT',\n     'SHOOTER_NAME', 'SHOOTER_NAME_FROM_MERGE', 'SHOOTERS_HEIGHT',\n    'SHOOTERS_POS', 'DEFENDER_NAME_FROM_MERGE', 'DEFENDER_HEIGHT',\n      'DEFENDER_POS']\n#remove unnecessary columns\n\ndfWithRelevantColumns=mergedWithDefenderName.drop(['SHOOTER_NAME_FROM_MERGE','DEFENDER_NAME_FROM_MERGE'],axis=1)","e3334fb6":"leftHanded = pd.read_fwf('..\/input\/left-handed-players\/leftPlayers.txt',headers=True)\nplayers=leftHanded['Names'].tolist()\nplayers=[x.lower() for x in players if type(x) is str]\n#adding to data columns that indicates if shooter\/defender is left handed based .txt file with left handed players\ndfWithRelevantColumns['SHOOTER_STRONG_HAND'] = dfWithRelevantColumns.apply(lambda x: 'LEFT' if x['SHOOTER_NAME'] in players else 'RIGHT', axis=1)\ndfWithRelevantColumns['DEFENDER_STRONG_HAND'] = dfWithRelevantColumns.apply(lambda x: 'LEFT' if x['DEFENDER_NAME'] in players  else 'RIGHT', axis=1)\n","8508e98d":"#reindex data frame with GAME_ID for performance Considerations for the following function\ngameIdAsIndex=dfWithRelevantColumns.set_index('GAME_ID',drop=False)\n\n#function that gets game_id data frame a record and break condition\n#returns Sequence of basket made before current shot in current game if breakCondition=0\n#returns Sequence of basket miss before current shot in current game if breakCondition=1\n\ndef calculateShotSequence(dfByGameId,record,breakCondition=0):\n    if(record[\"SHOT_NUMBER_IN_GAME\"]==1):\n        return -1\n    sortedDf=dfByGameId[(dfByGameId[\"SHOOTER_NAME\"]==record[\"SHOOTER_NAME\"]) & (dfByGameId[\"SHOT_NUMBER_IN_GAME\"]<record[\"SHOT_NUMBER_IN_GAME\"])][[\"SHOT_NUMBER_IN_GAME\",\"SHOT_RESULT_INT\"]].sort_values(\"SHOT_NUMBER_IN_GAME\", ascending=False)\n    count=0\n    for index, row in sortedDf.iterrows():\n        if(row[\"SHOT_RESULT_INT\"]==breakCondition):\n            break\n        count=count+1\n    return count\n\n#adding column with information of Sequence of basket made before current shot in current game\ngameIdAsIndex['SHOTS_IN_ROW'] = gameIdAsIndex.apply(lambda x: calculateShotSequence(gameIdAsIndex.loc[x[\"GAME_ID\"]],x), axis=1)\n#adding columns with information of Sequence of basket miss before current shot in current game\ngameIdAsIndex['MISS_IN_ROW'] = gameIdAsIndex.apply(lambda x: calculateShotSequence(gameIdAsIndex.loc[x[\"GAME_ID\"]],x,1), axis=1)\n\n","abb8ce59":"#sorting data frame by [\"GAME_ID\",\"SHOOTERS_NAME\",\"SHOT_NUMBER_IN_GAME\"]\ngameIdAsIndex=gameIdAsIndex.sort_values([\"GAME_ID\",\"SHOOTER_NAME\",\"SHOT_NUMBER_IN_GAME\"])\n#resteing index\ndfReIndexef=gameIdAsIndex.reset_index(drop=True)\n#saving data frame\ndfReIndexef.to_csv(\"shotsLog.csv\",index=False)\n","1910fa3a":"#reading df\nshotsLogDf= pd.read_csv('shotsLog.csv')\ncolumnsWithNa=shotsLogDf.columns[shotsLogDf.isna().any()].tolist()\n#removing rows where data is na\nshotsLogDf = shotsLogDf.dropna(subset=columnsWithNa)\n#saving data frame\nshotsLogDf.to_csv(\"shotsLogFile.csv\",index=False)\n","3d001692":"shotsLogDf= pd.read_csv('shotsLogFile.csv')\n#convert feet to meter\nshotsLogDf['SHOT_DIST'] = shotsLogDf.SHOT_DIST.apply(lambda x: x*0.3048)\n#convert feet to meter\nshotsLogDf['CLOSE_DEF_DIST'] = shotsLogDf.CLOSE_DEF_DIST.apply(lambda x:x*0.3048)\n#converting time to seconds\nshotsLogDf['GAME_CLOCK'] = shotsLogDf.GAME_CLOCK.apply(lambda x:int(x.split(\":\")[0])*60+int(x.split(\":\")[1]))\n# creating columns with HEIGHT_DIFF\nshotsLogDf['HEIGHT_DIFF']=shotsLogDf['SHOOTERS_HEIGHT']-shotsLogDf['DEFENDER_HEIGHT']\n","bfab98cc":"#function that returns if shot is money time (default is if shot was taken 150 seconds to end of game and final result is under 5)\ndef isMoneyTime(record,finalScoreDiff=3,secondsToEnd=120):\n    if((record[\"PERIOD\"]>4) | (record[\"PERIOD\"]==4 & abs(int(record[\"SHOOTERS_FINAL_RESULT_DIFF\"]))<=finalScoreDiff & record[\"GAME_CLOCK\"]<=secondsToEnd)):\n        return 1\n    else:\n        return 0\n# creating columns with IS_MONEY_TIME value\nshotsLogDf['IS_MONEY_TIME'] = shotsLogDf.apply(lambda x: isMoneyTime(x), axis=1)\nshotsLogDf.to_csv(\"shotsLogData.csv\",index=False)\n","db472f36":"\nshotsLogData= pd.read_csv('shotsLogData.csv')\n#function that gets integer and number to round and returns rounded number\n#example:roundNumber(5.3,0.5) will return 5.5  ,roundNumber(13,5) will return 5\ndef roundNumber(x,n):\n    return round((1\/float(n))*float(x))*n\ndef isHomeTeanWin(x):\n    if((x.SHOOTERS_COURT_LOCATION==\"H\") & (x.SHOOTERS_FINAL_RESULT_DIFF>0)):\n        return 1\n    elif ((x.SHOOTERS_COURT_LOCATION==\"A\") & (x.SHOOTERS_FINAL_RESULT_DIFF<0)):\n        return 1\n    else:\n        return 0\ndef isMoneyTimeGame(x,scoreDiff=5):\n    if(abs(int(x[\"SHOOTERS_FINAL_RESULT_DIFF\"]))<scoreDiff):\n        return True\n    else:\n        return False             \n    \n    \n#adding labeled columns\nshotsLogData['HEIGHT_DIFF'] = shotsLogData.HEIGHT_DIFF.apply(lambda x: roundNumber(x,5))\nshotsLogData['SHOT_CLOCK'] = shotsLogData.SHOT_CLOCK.apply(lambda x: roundNumber(x,0.5))\nshotsLogData['DRIBBLES'] = shotsLogData.DRIBBLES.apply(lambda x: roundNumber(x,1))\nshotsLogData['TOUCH_TIME'] = shotsLogData.TOUCH_TIME.apply(lambda x: roundNumber(x,1))\nshotsLogData['SHOT_DIST'] = shotsLogData.SHOT_DIST.apply(lambda x: roundNumber(x,0.5))\nshotsLogData['CLOSE_DEF_DIST'] = shotsLogData.CLOSE_DEF_DIST.apply(lambda x: roundNumber(x,0.5))\nshotsLogData['SHOOTERS_TEAM_FINAL_RESULT'] = shotsLogData.SHOOTERS_TEAM_FINAL_RESULT.apply(lambda x: 1 if x=='W' else 0)\nshotsLogData['IS_HOME_TEAM_WIN']=shotsLogData.apply(lambda x: isHomeTeanWin(x), axis=1)\nshotsLogData['IS_MONEY_TIME_GAME']=shotsLogData.apply(lambda x: isMoneyTimeGame(x), axis=1)\n#creating df per match includes game id,indication if home team won,indication if money time game\ndfByMatch=shotsLogData.groupby(['GAME_ID', 'IS_HOME_TEAM_WIN','IS_MONEY_TIME_GAME']).count().reset_index()[['GAME_ID', 'IS_HOME_TEAM_WIN','IS_MONEY_TIME_GAME']]\ndfByMatch.to_csv(\"dfByMatch.csv\",index=False)\n","0d356869":"#renaming data frame columns\nshotsLogData=shotsLogData.drop(['GAME_ID','SHOOTERS_FINAL_RESULT_DIFF','GAME_CLOCK','SHOT_NUMBER_IN_GAME','SHOOTERS_HEIGHT','DEFENDER_HEIGHT','SHOT_RESULT'],axis=1)\nshotsLogData.to_csv(\"shotsLogData.csv\",index=False)","10edd7ba":"#reading shots log df and games df csv to df\nshotsLogData= pd.read_csv('shotsLogData.csv')#, index_col='PassengerId')\ndfByGame= pd.read_csv('dfByMatch.csv')#, index_col='PassengerId')\nshotsLogData.describe().T","101d48ab":"\nnumericColumnsDf = shotsLogData.select_dtypes(include=[np.number])\nplt.rcParams['figure.figsize'] = (10.0, 8.0)\nsns.set_style()\ncorr = numericColumnsDf.corr()\nsns.heatmap(corr,cmap=\"RdYlBu\",vmin=-1,vmax=1)\nplt.savefig('corrMap.png')\n","b2a5bf6f":"\n#show box plot of 'strange behaviour' columns)\nshotsLogData.boxplot(column=['TOUCH_TIME'])\nplt.savefig('BoxPlotTouchTime.png')","be7ba3de":"#show number of records by dribbles\n\nshotsLogData.groupby(['DRIBBLES']).size()\n","44aaaf2b":"\n\n# removing shots that are errors\/outliers shots\ncleanedDataShots=shotsLogData[(shotsLogData['SHOT_DIST']<=9) & (shotsLogData['DRIBBLES']<=21) & (shotsLogData['CLOSE_DEF_DIST']<=7) & (shotsLogData['TOUCH_TIME']>=0) & (shotsLogData['TOUCH_TIME']<18) & (shotsLogData['PERIOD']<=5) & (shotsLogData['SHOT_CLOCK']<=20)]\n\ncleanedDataShots.to_csv(\"cleanedDataShots.csv\",index=False)\ncleanedDataShots= pd.read_csv('cleanedDataShots.csv')","ad8d4bb7":"\n\n\nax=cleanedDataShots.groupby(['SHOOTERS_COURT_LOCATION','IS_MONEY_TIME']).mean()['SHOT_RESULT_INT'].unstack().plot.bar(yticks=np.linspace(0,0.5,20),figsize=(12, 5),rot=0)\nax.set_title('Shot Percenteage by court location and Money Time')\nax.set_ylabel('Shot Percenteage')\nplt.savefig('ShotPercenteageByCourtLocationMoneyTime.png')","b1a55bff":"\n\nax=cleanedDataShots.groupby(['SHOOTERS_COURT_LOCATION']).mean()['SHOT_RESULT_INT'].plot.bar(yticks=np.linspace(0,0.5,20),figsize=(12, 5),rot=0)\nax.set_title('Shot Percenteage by court location')\nax.set_ylabel('Shot Percenteage')\nplt.savefig('ShotPercenteageByCourtLocation.png')","82ccf05b":"\n\nax=cleanedDataShots.groupby(['IS_MONEY_TIME']).mean()['SHOT_RESULT_INT'].plot.bar(yticks=np.linspace(0,0.5,20),figsize=(12, 5),rot=0)\nax.set_title('Shot Percenteage by Money Time')\nax.set_ylabel('Shot Percenteage')\nax.set_xticklabels(['Money Time=No','Money Time=Yes'])\nplt.savefig('ShotPercenteageByMoneyTime.png')","32c07208":"\n\nax=cleanedDataShots.groupby(['IS_MONEY_TIME','SHOOTERS_POS']).mean()['SHOT_RESULT_INT'].unstack().plot.bar(yticks=np.linspace(0,0.5,20),figsize=(12, 5),rot=0)\nax.set_title('Shot Percenteage by Position and Money Time')\nax.set_ylabel('Shot Percenteage')\nax.set_xticklabels(['Money Time=No','Money Time=Yes'])\nplt.savefig('ShotPercenteageByPositionMoneyTime.png')","b5bd85a7":"\nax=cleanedDataShots.groupby(['SHOOTERS_TEAM_FINAL_RESULT']).mean()['SHOT_RESULT_INT'].plot.bar(yticks=np.linspace(0,0.5,20),figsize=(12, 5),rot=0)\nax.set_title('Shot Percenteage by win\/lose')\nax.set_ylabel('Shot Percenteage')\nax.set_xticklabels(['Lost','Won'])\nplt.savefig('ShotPercenteageByWinLose.png')","7fe8a7e5":"\nax=cleanedDataShots.groupby(['PERIOD','SHOOTERS_POS']).mean()['SHOT_RESULT_INT'].unstack().plot(xticks=cleanedDataShots['PERIOD'].unique(),yticks=np.linspace(0.3,0.6,20),figsize=(15,7),rot=0)\nax.set_title('Shot Percenteage by period and position')\nplt.savefig('ShotPercenteageByPeriodPosition.png')","fc9bf81b":"\n\nax=cleanedDataShots.groupby(['SHOOTERS_POS']).mean()['SHOT_RESULT_INT'].plot.bar(yticks=np.linspace(0,0.6,20),figsize=(12, 5),rot=0)\nax.set_title('Shot Percenteage by position')\nax.set_ylabel('Shot Percenteage')\nplt.savefig('ShotPercenteageByPosition.png')","80b4d14d":"\nax=cleanedDataShots.groupby(['DRIBBLES']).mean()['SHOT_RESULT_INT'].plot(xticks=cleanedDataShots['DRIBBLES'].unique(),yticks=np.linspace(0,0.7,20),figsize=(15,7),rot=0)\nax.set_title('Shot Percenteage by dribbles ')\nplt.savefig('ShotPercenteageByDribbles.png')","275697f9":"\nax=cleanedDataShots.groupby(['SHOT_CLOCK']).mean()['SHOT_RESULT_INT'].plot(xticks=cleanedDataShots['SHOT_CLOCK'].unique().round(),yticks=np.linspace(0,0.7,20),figsize=(15,7),rot=0)\nax.set_title('Shot Percenteage by 24 shot clock')\nplt.savefig('ShotPercenteageBy24Clock.png')","b435ae8f":"\nax=cleanedDataShots.groupby(['TOUCH_TIME']).mean()['SHOT_RESULT_INT'].plot(xticks=cleanedDataShots['TOUCH_TIME'].unique(),yticks=np.linspace(0,0.7,20),figsize=(15,7),rot=0)\nax.set_title('Shot Percenteage by touch time ')\nplt.savefig('ShotPercenteageTouchTime.png')","a6efa67d":"\ncleanedDataShots= pd.read_csv('cleanedDataShots.csv')#, index_col='PassengerId')\nax=cleanedDataShots.groupby(['SHOT_DIST']).mean()['SHOT_RESULT_INT'].plot.bar(yticks=np.linspace(0,0.7,20),figsize=(12, 5),rot=0)\nax.set_title('Shot Percenteage by shot dist')\nax.set_ylabel('Shot Percenteage')\nplt.savefig('ShotPercenteageShotDist.png')","b8e2b61d":"\n\ncleanedDataShots= pd.read_csv('cleanedDataShots.csv')#, index_col='PassengerId')\n\n\nax=cleanedDataShots.groupby(['CLOSE_DEF_DIST']).mean()['SHOT_RESULT_INT'].plot.bar(yticks=np.linspace(0,0.7,20),figsize=(12, 5),rot=0)\nax.set_title('Shot Percenteage by defender dist')\nax.set_ylabel('Shot Percenteage')\nplt.savefig('ShotPercenteageDefenderDist.png')","6daf2b71":"\nax=cleanedDataShots.groupby(['SHOT_DIST','SHOOTERS_POS']).mean()['SHOT_RESULT_INT'].unstack().plot.bar(stacked=True,xticks=cleanedDataShots['SHOT_DIST'].unique(),yticks=np.linspace(0,3.5,20),figsize=(12, 5),rot=0)\nax.set_title('Shot Percenteage shot dist and position')\nax.set_ylabel('Shot Percenteage')\nplt.savefig('ShotPercenteageShotDistPosition.png')","c7dc0f2f":"\nax=cleanedDataShots.groupby(['SHOOTER_STRONG_HAND']).mean()['SHOT_RESULT_INT'].plot.bar(yticks=np.linspace(0,0.5,10),figsize=(12, 5),rot=0)\nax.set_title('Shot Percenteage by shooter strong hand')\nax.set_ylabel('Shot Percenteage')\nplt.savefig('ShotPercenteageByShooterStrongHand.png')\n","d4af33b7":"\nax=cleanedDataShots.groupby(['DEFENDER_STRONG_HAND']).mean()['SHOT_RESULT_INT'].plot.bar(yticks=np.linspace(0,0.5,10),figsize=(12, 5),rot=0)\nax.set_title('Shot Percenteage by defenders strong hand')\nax.set_ylabel('Shot Percenteage')\nplt.savefig('ShotPercenteageByDefendersStrongHand.png')\n","c4e5c0a8":"\nax=cleanedDataShots.groupby(['SHOTS_IN_ROW','SHOOTERS_POS']).mean()['SHOT_RESULT_INT'].unstack().plot(xticks=cleanedDataShots['SHOTS_IN_ROW'].unique(),yticks=np.linspace(0,0.7,20),figsize=(15,7),rot=0)\nax.set_title('Shot Percenteage position and shots made in a row')\nax.set_xlim((-1, 7))\nplt.savefig('ShotPercenteagePositionAndShotsMadeInRow.png')","3d055e67":"\nax=cleanedDataShots.groupby(['MISS_IN_ROW','SHOOTERS_POS']).mean()['SHOT_RESULT_INT'].unstack().plot(xticks=cleanedDataShots['SHOTS_IN_ROW'].unique(),yticks=np.linspace(0,0.7,10),figsize=(15,7),rot=0)\nax.set_title('Shot Percenteage position and shots miss in a row')\nax.set_xlim((-1, 7))\nplt.savefig('ShotPercenteagePositionAndShotsMissInRow.png')\n","26b47904":"\nax=cleanedDataShots.groupby(['HEIGHT_DIFF','SHOOTERS_POS']).mean()['SHOT_RESULT_INT'].unstack().plot.bar(stacked=True,xticks=cleanedDataShots['SHOT_DIST'].unique(),yticks=np.linspace(0,3.5,20),figsize=(12, 5),rot=0)\nax.set_title('Shot Percenteage by Height diff and position')\nax.set_ylabel('Shot Percenteage')\nplt.savefig('ShotPercenteageByHeightDiffPosition.png')\n","6751f8e7":"fig = plt.figure()\nax = fig.gca()\nax.hist(cleanedDataShots['SHOT_DIST'], bins=40, color='blue')\nax.set_xticks(cleanedDataShots['SHOT_DIST'].unique().round())\nax.set_yticks(np.linspace(0,13000,10))\n\n\nax.set_title('Histogram of shots dist')\nax.set_xlabel('Shot Dist [meters]')\nplt.savefig('HistogramShotsDist.png')\n","7f6f4872":"dfByGame= pd.read_csv('dfByMatch.csv')\n\nax=dfByGame.groupby(['IS_MONEY_TIME_GAME']).mean()['IS_HOME_TEAM_WIN'].plot.bar(yticks=np.linspace(0,0.6,20),figsize=(12, 5), rot=0)\nax.set_xticklabels(['Money Time Game=False','Money Time Game=True'])\nax.set_title('Percenteage of Home Team Win by Money Time')\nax.set_ylabel('Percenteage of Home Team')\nplt.savefig('PercenteageHomeTeamWinMoneyTime.png')","79691bb3":"playersData=cleanedDataShots[(cleanedDataShots.SHOOTER_NAME==\"kobe bryant\") | (cleanedDataShots.SHOOTER_NAME==\"lebron james\") ]\nplayersData.to_csv(\"playersData.csv\",index=False)\nplayersData= pd.read_csv('playersData.csv')","45925f16":"ax=playersData.groupby(['SHOOTER_NAME']).mean()['SHOT_RESULT_INT'].plot.bar(yticks=np.linspace(0,0.5,20),figsize=(12, 5),rot=0)\nax.set_title(' kobe bryant vs lebron james')\nax.set_ylabel('Shot Percenteage')\nplt.savefig('ShotPercenteageByPlayer.png')","51e2fdae":"ax=playersData.groupby(['SHOOTER_NAME','IS_MONEY_TIME']).mean()['SHOT_RESULT_INT'].unstack().plot.bar(yticks=np.linspace(0,0.5,20),figsize=(12, 5),rot=0)\nax.set_title(' kobe bryant vs lebron james Money Time')\nax.set_ylabel('Shot Percenteage')\nplt.savefig('ShotPercenteageByPlayerMoneyTime.png')","aca0c173":"ax=playersData.groupby(['SHOOTER_NAME','SHOOTERS_COURT_LOCATION']).mean()['SHOT_RESULT_INT'].unstack().plot.bar(yticks=np.linspace(0,0.5,20),figsize=(12, 5),rot=0)\nax.set_title(' kobe bryant vs lebron court')\nax.set_ylabel('Shot Percenteage')\nplt.savefig('ShotPercenteageByPlayerCourt.png')","770fdeb0":"Image(filename='..\/input\/image-files-for-presentation\/nba.PNG')\n","37207172":"Image(filename='..\/input\/image-files-for-presentation\/nba_court.jpg')","cce45d97":"Image(filename='..\/input\/image-files-for-presentation\/basket_ball_positions.PNG')","2d6d584f":"Image(filename='..\/input\/image-files-for-presentation\/shot_clock.PNG')","ecb1ab14":"Image(filename='..\/input\/image-files-for-presentation\/michael_jordan.PNG')","2660828e":"Image(filename='..\/input\/image-files-for-presentation\/record_example.PNG')","f1e81f54":"Image(filename='..\/input\/image-files-for-presentation\/naValues.PNG')","33374b94":"Image(filename='..\/input\/image-files-for-presentation\/desc_plot.png')\n","b8c04057":"Image(filename='..\/input\/image-files-for-presentation\/BoxPlotTouchTime.png')\n","a633c777":"Image(filename='..\/input\/image-files-for-presentation\/DribblesStatistic.png')\n","86e90428":"Image(filename='..\/input\/image-files-for-presentation\/corrMap.png')\n","cdc2d95c":"Image(filename='..\/input\/image-files-for-presentation\/ShotPercenteageByCourtLocation.png')\n","39e19d31":"Image(filename='..\/input\/image-files-for-presentation\/ShotPercenteageByMoneyTime.png')\n","41bf03ba":"Image(filename='..\/input\/image-files-for-presentation\/ShotPercenteageByCourtLocationMoneyTime.png')\n","feb54eb0":"Image(filename='..\/input\/image-files-for-presentation\/ShotPercenteageByPositionMoneyTime.png')\n","b3a285ce":"Image(filename='..\/input\/image-files-for-presentation\/ShotPercenteageByPeriodPosition.png')\n","e494fa2c":"Image(filename='..\/input\/image-files-for-presentation\/ShotPercenteageByPosition.png')\n","7ff81868":"Image(filename='..\/input\/image-files-for-presentation\/ShotPercenteageByDribbles.png')\n","c25f6f39":"Image(filename='..\/input\/image-files-for-presentation\/ShotPercenteageBy24Clock.png')\n","b1eaf596":"Image(filename='..\/input\/image-files-for-presentation\/ShotPercenteageTouchTime.png')\n","7ef51369":"Image(filename='..\/input\/image-files-for-presentation\/ShotPercenteageShotDist.png')\n","123e541b":"Image(filename='..\/input\/image-files-for-presentation\/ShotPercenteageDefenderDist.png')\n","95775866":"Image(filename='..\/input\/image-files-for-presentation\/ShotPercenteageShotDistPosition.png')\n","4de1f672":"Image(filename='..\/input\/image-files-for-presentation\/ShotPercenteageByShooterStrongHand.png')\n","75c49da9":"Image(filename='..\/input\/image-files-for-presentation\/ShotPercenteageByDefendersStrongHand.png')\n","62881fad":"Image(filename='..\/input\/image-files-for-presentation\/ShotPercenteagePositionAndShotsMadeInRow.png')\n","041205b0":"Image(filename='..\/input\/image-files-for-presentation\/ShotPercenteagePositionAndShotsMissInRow.png')\n","68c57403":"Image(filename='..\/input\/image-files-for-presentation\/ShotPercenteageByHeightDiffPosition.png')\n","409b5453":"Image(filename='..\/input\/image-files-for-presentation\/HistogramShotsDist.png')\n","d2964564":"Image(filename='..\/input\/image-files-for-presentation\/PercenteageHomeTeamWinMoneyTime.png')\n","26764c12":"Image(filename='..\/input\/image-files-for-presentation\/lebronVsKobe.PNG')\n","b9d110b4":"Image(filename='..\/input\/image-files-for-presentation\/ShotPercenteageByPlayer.png')\n","5fdd0b9f":"Image(filename='..\/input\/image-files-for-presentation\/ShotPercenteageByPlayerMoneyTime.png')\n","62afdd47":"Image(filename='..\/input\/image-files-for-presentation\/ShotPercenteageByPlayerCourt.png')\n","38bf0ff1":"## Money Time \n**What is 'Money Time'?**<br>\nIn basketball (or in sports), the \"money time\" is the period during the game,( mostly last minutes of play or sometimes the last quarter ) where the score game is close and  each successful pass, each basket or any action  affects the final result of the game.<br>","16bc1b5e":"### Shot Percenteage By Money Time","f192a820":"## Goals:\n### Gain initial insights on the parameters that affect the shooting percentage in a basketball game according to various parameters:\n* **Physical players skills parameters:** Player Height, Players Strong shooting Hand, position\n* **Technical shot skills parameters:** Shooting quickness,Shot off dribble, Shot distance\n* **Mental skills parameters:** Money time shots, shot clock time,shot after sequence of shots made,shot after sequence of shots miss\n* **Defenders skills parameters:** Defenders Height, Defenders Strong shooting Hand , Defenders from shooter \n* **Court parameters:** Crowd (Home or Away Game)","0c688ee1":"# Basketball basic Terminology and basic details:","55580c63":"### Percenteage Kobe Bryant vs lebron james in Money Time Games\n","d818547f":"### Shot Percenteage By Court Location Money Time","5d195306":"### Percenteage Kobe Bryant vs lebron james by Court\n","c2bc383e":"### Shot Percenteage by Touch Time before shot","a70671a2":"### Shot Percenteage By Position and Money Time","0dcf92d4":"### Shot Percenteage By 24 Clock","6caa4048":"### Percenteage Kobe Bryant vs lebron james\n","1a3833cd":" ### Record Example\n","92bd1588":"### Shot Percenteage by Position And Shots Miss In Row","be7e2bd2":"##  Variables Added\n* **SHOOTER_STRONG_HAND**- indicates shooters strong hand (right,left)\n* **DEFENDER_STRONG_HAND**- indicates defenders strong hand (right,left)\n* **SHOTS_IN_ROW**- indicates shoot in a row made in current game before current shot\n* **MISS_IN_ROW**- indicates shoot in a row missed in current game before current shot\n* **HEIGHT_DIFF** - indicates height diff between shooters name and defender height rounded to closest 5 cm\n* **IS_MONEY_TIME** - indicates if a shoot made is money time shot\n* **IS_HOME_TEAM_WIN** - indicates if home time win\n","9976ab70":"### Shot Percenteage By Defenders Strong Hand","48b4340c":"### Shot Percenteage By Shooter Strong Hand","2ee4cd0c":"### Shot Percenteage by Shot Dist","aaf82724":"#  Visualization Lebron James vs Kobe Bryant","3a2f8311":"### Shot Percenteage By Position","cc462b11":"### Shot Percenteage Shot Dist and Position","3ef62948":"#  Data columns ","1a533596":" **NBA Shots log exploratory data analysis** <br>\n presentation of results will be followed after the scripts","bb139f2f":"### Shot Percenteage Defender Dist","3063ccc9":"#  Visualization","4c47c8b2":"## NBA \n    \nThe National Basketball Association (NBA) is a men's professional basketball league in North America; composed of 30 teams (29 in the United States and 1 in Canada). It is widely considered to be the premier men's professional basketball league in the world. <br>\nFrom https:\/\/en.wikipedia.org\/wiki\/National_Basketball_Association","de8f3eaf":"### Shot Percenteage By Height Diff and Position","9901a0a3":"### Shot Percenteage By Period and Position","fe839a48":"\n ## Players positions (from wikipedia) \n * The point guard (PG) ,also known as the one, is typically the team's best ball handler and passer.\n * The shooting guard (SG) is also known as the two or the off guard.As the name suggests, most shooting guards are good shooters from three-point range.\n * The small forward (SF), also known as the three, is considered to be the most versatile of the main five basketball positions. \n * The power forward (PF), also known as the four, often plays a role similar to that of the center, down in the \"post\" or \"low blocks\". The power forward is often the team's most versatile scorer\n * The center (C), also known as the five or the pivot, usually plays near the baseline, close to the basket (the \"low post\"). They are usually the tallest players on the floor <br>\n From https:\/\/en.wikipedia.org\/wiki\/Basketball_positions#Point_guard","27e0fca8":"## Shot clock \n**What is Shot Clock?**<br>\nThe amount of time an offense is given to shoot the ball. The shot clock is 24 seconds in the NBA and 35 seconds in NCAA men's basketball. Other amateur leagues sometimes use a 30-second shot clock,The shot clock resets when the ball touches the rim.<br>\nFrom: https:\/\/www.sportingcharts.com\/dictionary\/nba\/shot-clock.aspx","3d212da1":" # Data Cleaning \n ### decisions\n\n\n* removed rows where one of the  columns **value is NA**\n* removed rows where  **TOUCH_TIME<0** (recognized some negative values)\n* removed rows where value of  **SHOT_DIST>9** (if 3 point shot is ~7 and half court dist is ~14  ,9 seems to be a good limit where we get good indication on shot precentege)\n* removed rows  **PERIOD>5** (regular game is 4 periods 5 periods are when the game is tie after 4 periods)\n* removed rows where value of  **CLOSE_DEF_DIST>7** ( I took threshold of 8 that seems that above this value where defender is  > 7 meter from shooter (for example if defence still the ball and passes fast to a shooter that goes alone to shoot the basket from 0-1 meters - probably will score) ,are rare situations that dont give indication on shot precentege )\n* removed rows where **TOUCH_TIME> 18** (outliers)\n* removed rows where  **SHOT_CLOCK > 16** (outliers)\n* removed rows where  **DRIBBLES > 21** (outliers)\n<br>\n\n ### **Total records after cleaning data :82524**","03aa729c":"## Transformed variables\n* **SHOOTER_NAME,DEFENDER_NAME**- all players name from all 3 data sources (shot_logs_2014_2015.csv,players_stats_2014_2015.csv,Web site with left handed basketball players) where transformed to the same format ,as they used as key's for merging between data sets.\n* **SHOT_DIST**-transformed from feets to closest 0.5 meters\n* **CLOSE_DEF_DIST**-transformed from feets to closest 0.5 meters\n* **CLOSE_DEF_DIST**-transformed from feets to closest 0.5 meters\n* **SHOOTERS_TEAM_FINAL_RESULT** - transformed from 'W' 'L' to 0 1","1d6c1666":"##  Final Data Variables \n \n * **SHOOTERS_COURT_LOCATION**- indication of shooters court.H for home A for away\n * **SHOOTERS_TEAM_FINAL_RESULT**- shooters team final result 1 for win 0 for lose\n * **SHOOTERS_FINAL_RESULT_DIFF**- shooters team final result diff (for example if shooters team win 82:70 the value will be 12,if shooters team lose 82:70 the value will be -12)\n * **PERIOD**- period when shot was taken 1-4 (in case of over time period >4)\n * **SHOT_CLOCK**-time remaing for 24 clock (rounded to closest 0.5)\n * **DRIBBLES**- dribbles before shooting\n * **TOUCH_TIME** - touching in seconds time of the ball before shooting (rounded to closest 1)\n * **SHOT_DIST**- distance in meters of shooter from basket (rounded to closest 0.5)\n * **PTS_TYPE** - 2 for 2 point shot 3 for 3 point shot\n * **SHOT_RESULT**- 'made' for shot made 'missed' for shot miss\n * **CLOSE_DEF_DIST**- distance in meters of closest defender from shooter (rounded to closest 0.5)\n * **SHOT_RESULT_INT**- 1 for shot made 0 for shot miss\n * **SHOOTER_NAME**- shooters name\n * **DEFENDER_NAME**- defenders name\n * **SHOOTERS_HEIGHT**- shooters height in centimeters\n * **SHOOTERS_POS** - shooters position (PG,SG,SF,PF,C)\n * **DEFENDER_HEIGHT** - defenders height in  centimeters\n * **DEFENDER_POS** - defenders position (PG,SG,SF,PF,C)\n * **SHOOTER_STRONG_HAND** -shooters strong hand right or left\n * **DEFENDER_STRONG_HAND** -defenders strong hand right or left\n * **SHOTS_IN_ROW**-shots in a row made in the current game before current shot (-1 indicates for first shot in the current game)\n * **MISS_IN_ROW** -shots in a row miss in the current game before current shot (-1 indicates for first shot in the current game)\n * **HEIGHT_DIFF** - height diff in centimeters between shooters height and defenders height-rounded to closest 5 (if shooter higher than defender the value will be positive if shooter lower than defender value will be negative)\n * **IS_MONEY_TIME** - indicates if the shot was taken in 'money time' 1 indicates for money time 0 indicates for not money time","e441a92d":"### Percenteage Home Team Win in MoneyTime games","3dde891b":"# Nba Shots Log Presentation","28e0bc5b":"### Shot Percenteage By Dribbles before shot","53123c85":" # Data\n * **shot_logs_2014_2015.csv** -contains shots log data from NBA basketball 2014-2015 season https:\/\/www.kaggle.com\/dansbecker\/nba-shot-logs\n * **players_stats_2014_2015.csv** - contains NBA players information data from 2014-2015 season https:\/\/www.kaggle.com\/drgilermo\/nba-players-stats-20142015\n * **Web site with left handed basketball players**- contains left handed NBA players data  http:\/\/www.apbr.org\/lefties.html ","8690a2c6":"### Histogram Shots Dist","13b5f04f":"### Shot Percenteage by Position And Shots Made In Row","ee73f996":"### Shot Percenteage By Court Location"}}