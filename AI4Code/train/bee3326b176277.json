{"cell_type":{"bc4bcbe4":"code","66cfaf2f":"code","08ab2895":"code","99f86d60":"code","9b2c136b":"code","8d7780bf":"code","80883bc6":"code","7babe77f":"code","0414d1fa":"code","6cc71374":"code","677a3593":"code","ed4cf177":"code","21c69d62":"code","8bc80936":"code","5404b06f":"code","aae2d69b":"code","05ad9d2c":"code","85da381d":"code","ee60cb15":"code","6c6377f3":"code","730ebb97":"code","6f52af6a":"code","e8a23a8c":"code","ae7c0119":"code","805a3c97":"code","05a5926a":"code","4e982533":"code","2309bb44":"code","166885a9":"code","5d76fe02":"code","41dfc8dc":"code","a6324b35":"code","f1897ebd":"code","a29550f0":"code","e1d7a496":"code","fae0e788":"code","a06b2113":"code","b57ab383":"code","888d525c":"code","e5593724":"code","4f51a223":"code","4bc91bfa":"code","895e2737":"code","f9af9a18":"code","4abb0f70":"code","7d9b83a3":"code","74cb8294":"code","72a35891":"markdown","539afb1a":"markdown","af4b3640":"markdown","df77f2e9":"markdown","c6a89b3f":"markdown","a187963e":"markdown","f4fd9ca0":"markdown","3fbe4865":"markdown","77790de0":"markdown","e89f6d1b":"markdown","e4c21e5b":"markdown"},"source":{"bc4bcbe4":"import pandas as pd\nimport numpy as np\nimport matplotlib.pyplot as plt\n% matplotlib inline","66cfaf2f":"df = pd.read_csv(\"..\/input\/FAO.csv\", encoding='latin1')","08ab2895":"df.head()","99f86d60":"df['Element'].unique()","9b2c136b":"# Extracting all the year data\nyear_list = df.iloc[:,df.columns.str.startswith('Y')].columns\nyear_list","8d7780bf":"# Extracting the last ten years\nyear_list = year_list[len(year_list)-10:len(year_list)]\nyear_list","80883bc6":"# Getting a general idea of Food and Feed of all Countries yearwise\ndf_new = df.pivot_table(values=year_list, columns='Element',index=['Area'], aggfunc='sum')","7babe77f":"df_new.head()","0414d1fa":"# Applying transpose to the above data to get it ready for work\ndf_foody = df_new.T","6cc71374":"df_foody.head()","677a3593":"# Extracting only food produced\ndf_food = df_foody.xs('Food', level=1, axis=0)\ndf_food.head()","ed4cf177":"# Finding the Top 5 food producer countries over the 10 years\ndf_food_total = df_food.sum(axis=0).sort_values(ascending=False).head()\ndf_food_total","21c69d62":"df_food_total.plot(kind='bar', title='Top 5 Food Producers', color='green')","8bc80936":"# Visualising the food produced by top 5 countries over the 10 years\nplt.figure(figsize = (10,6))\nfor i in df_food_total.index:\n    year = df_food[i]\n    plt.plot(year, marker='p')\n    plt.xticks(df_food.index, rotation='vertical')\n    plt.legend(loc='right')","5404b06f":"# extracting the food consumers\ndf_feed =  df_new.T.xs('Feed',level=1, axis=0)\ndf_feed.head()","aae2d69b":"# Top 5 food consumers\ndf_feed_total = df_feed.sum(axis=0).sort_values(ascending=False).head()","05ad9d2c":"df_feed_total.plot(kind='bar', title=\"Top 5 Food Consumers\", color='red')","85da381d":"# to compare the food production and food consumption of top 5 food producers\nfor j in df_food_total.index:\n    plt.figure(figsize=(6,3))\n    plt.plot(df_feed[j], marker='o', color='b')\n    plt.plot(df_food[j], marker='o', color='r')\n    plt.xticks(df_feed.index, rotation='vertical')\n    plt.legend(loc='best')\n    plt.show()","ee60cb15":"df.dropna(axis=0, how='any', inplace=True)","6c6377f3":"# dropping the unnecessary Columns\ndf.drop(['Area Abbreviation', 'Area Code', 'Item Code', 'Element Code', 'Unit', 'latitude', 'longitude'], axis=1, inplace=True)","730ebb97":"df.head()","6f52af6a":"df_temp = df.set_index(['Element','Area','Item'])","e8a23a8c":"df_temp.head()","ae7c0119":"food = df_temp.xs('Food', level=0)","805a3c97":"df_item = (df.pivot_table(values =year_list, columns='Element',index=['Item'], aggfunc='sum')).T","05a5926a":"df_top_food = df_item.xs('Food',level=1).sum(axis=0).sort_values(ascending=False).head(10)","4e982533":"# Top 10 highest produced food\ndf_top_food","2309bb44":"df_top_food.plot(kind='bar', title='Top 10 highest produced Food', color='green')","166885a9":"feed = df_temp.xs('Feed', level=0)","5d76fe02":"df_top_feed = df_item.xs('Feed',level=1).sum(axis=0).sort_values(ascending=False).head(10)","41dfc8dc":"# Top 10 highest consumed food\ndf_top_feed","a6324b35":"df_top_feed.plot(kind='bar', title='Top 10 highest Food consumed', color='red')","f1897ebd":"# top most produced food\ntop_food = df_top_food.head(1).index[0]\ntop_food","a29550f0":"# Extracting the Top 10 countries producing 'Milk - Excluding Butter'\ntop_food_producing_countries = df_temp.xs('Food',level=0).xs(top_food, level=1).sum(axis=1).sort_values(ascending=False).head(10)\ntop_food_producing_countries","e1d7a496":"top_food_producing_countries.plot(kind='bar',title=f'Top 10 Countries producing top produced food ({top_food})', color='green')","fae0e788":"# Here are the Top 10 countries consuming 'Milk - Excluding Butter'\ntop_food_consuming_countries = df_temp.xs('Feed',level=0).xs(top_food, level=1).sum(axis=1).sort_values(ascending=False).head(10)\ntop_food_consuming_countries","a06b2113":"top_food_consuming_countries.plot(kind='bar',title=f'Top 10 Countries consuming top produced food ({top_food})', color='red')","b57ab383":"# top most consumed food\ntop_feed = df_top_feed.head(1).index[0]\ntop_feed","888d525c":"# Here are the Top 10 countries producing 'Cereals - Excluding Beer'\ntop_feed_producing_countries = df_temp.xs('Food',level=0).xs(top_feed, level=1).sum(axis=1).sort_values(ascending=False).head(10)\ntop_food_producing_countries","e5593724":"top_food_producing_countries.plot(kind='bar',title=f'Top 10 Countries producing top Consumed food ({top_feed})', color='green')","4f51a223":"# Here are the Top 10 Countries consuming 'Cereals - Excluding Beer'\ntop_feed_consuming_countries = df_temp.xs('Feed',level=0).xs(top_feed, level=1).sum(axis=1).sort_values(ascending=False).head(10)\ntop_feed_consuming_countries","4bc91bfa":"top_feed_consuming_countries.plot(kind='bar',title=f'Top 10 Countries Consuming the top consumed food -> {top_feed}', color='red')","895e2737":"df_india_food = df_temp.xs('Food',level=0).xs('India',level=0).sum(axis=1).sort_values(ascending=False).drop_duplicates().head(10)\ndf_india_food","f9af9a18":"df_india_food.plot(kind='bar', title='Top 10 Food Item produced', color='green')","4abb0f70":"df_india_feed = df_temp.xs('Feed',level=0).xs('India',level=0).sum(axis=1).sort_values(ascending=False).drop_duplicates().head(10)\ndf_india_feed","7d9b83a3":"df_india_feed.plot(kind='bar', title='Top 10 Food Item Consumed',color='red')","74cb8294":"df_temp.xs('India', level=1).xs('Food', level=0).sum(axis=0).tail(10).plot(kind='line', color='green')\ndf_temp.xs('India', level=1).xs('Feed', level=0).sum(axis=0).tail(10).plot(kind='line',title='Food vs Feed in India', color='red')","72a35891":"## Top 10 countries consuming the top most Produced Food","539afb1a":"*We have data from 1961 to 2013. But I am more interested in the last 10 years data. Plus data visualisation of such a huge data will not look good.*","af4b3640":"## Top 10 Food Consumed","df77f2e9":"## Top 10 countries producing the top most Produced Food","c6a89b3f":"## Top 10 countries Consuming the top most Consumed Food","a187963e":"## Analysing data for India.","f4fd9ca0":"### Cleaning the data, removing all NaN values","3fbe4865":"## Top 10 Highest produced food","77790de0":"## India Food vs Feed in last 10 years","e89f6d1b":"**So we have got two types of elements i.e Food ( which implies Food production ) and Feed (which implies Food consumption)**","e4c21e5b":"## Top 10 countries Producing the top most Consumed Food"}}