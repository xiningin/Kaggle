{"cell_type":{"d3dd3f22":"code","326d6ac8":"code","33efba32":"code","5eace513":"code","305d9237":"code","11c2934b":"code","746814ad":"code","e0dc81c1":"code","e2206807":"code","ac2a9bfd":"code","9842e5be":"code","746c6370":"code","9f090de2":"code","7228f7fc":"code","028af610":"code","ccad633d":"code","9b54436a":"code","70bb7d9e":"code","bb84c9e0":"markdown","af595603":"markdown","9bed5b43":"markdown","aa447f7e":"markdown","0afae0fd":"markdown","c8571719":"markdown","9620bd21":"markdown","d07f2348":"markdown","10891533":"markdown","f8e9fb0e":"markdown","03b4b18f":"markdown","3cfe1dd0":"markdown","332b99a0":"markdown"},"source":{"d3dd3f22":"from datetime import datetime as dt\nimport warnings\n\nimport plotly.express as px\nimport matplotlib.pyplot as plt\nimport numpy as np # linear algebra\nimport pandas as pd # data processing, CSV file I\/O (e.g. pd.read_csv)\nimport seaborn as sns\nimport statsmodels.api as sm\n\nwarnings.filterwarnings('ignore')","326d6ac8":"!ls ..\/input\/covid19-data-from-john-hopkins-university","33efba32":"df_global_confirmed_cases = pd.read_csv(\"..\/input\/covid19-data-from-john-hopkins-university\/CONVENIENT_global_confirmed_cases.csv\")\ndf_global_confirmed_cases = df_global_confirmed_cases[1:]\ndf_global_confirmed_cases = df_global_confirmed_cases.rename(columns={\"Country\/Region\": \"Date\"})\n\ndef convert_date(date_str):\n    return dt.strptime(date_str, '%m\/%d\/%y')\n\ndf_global_confirmed_cases[\"Date\"] = df_global_confirmed_cases[\"Date\"].map(convert_date)\n\ncountry_cols = [col for col in df_global_confirmed_cases.columns if col not in [\"Date\"]]\n\ndf_global_confirmed_cases.head()","5eace513":"df_global_deaths = pd.read_csv(\"..\/input\/covid19-data-from-john-hopkins-university\/CONVENIENT_global_deaths.csv\")\ndf_global_deaths = df_global_deaths[1:]\ndf_global_deaths = df_global_deaths.rename(columns={\"Country\/Region\": \"Date\"})\n\ndef convert_date(date_str):\n    return dt.strptime(date_str, '%m\/%d\/%y')\n\ndf_global_deaths[\"Date\"] = df_global_deaths[\"Date\"].map(convert_date)\n\ndf_global_deaths.head()","305d9237":"df_global_confirmed_cases = pd.melt(df_global_confirmed_cases, id_vars=['Date'], value_vars=country_cols,\n                                    var_name='Country', value_name='Count')","11c2934b":"df_global_confirmed_cases.head()","746814ad":"fig = px.line(df_global_confirmed_cases, x=\"Date\", y=\"Count\", color=\"Country\", \n              title='Transition in the number of confirmed cases of each countries',\n              template=\"simple_white\")\nfig.update_layout(showlegend=False)\nfig.show()","e0dc81c1":"selected_countries  = [\"US\", \"India\", \"Spain\", \"Brazil\", \"United Kingdom\", \"Japan\"]\ndf_global_confirmed_cases_selected = df_global_confirmed_cases[df_global_confirmed_cases[\"Country\"].isin(selected_countries)].reset_index(drop=True)","e2206807":"fig = px.line(df_global_confirmed_cases_selected, x=\"Date\", y=\"Count\", color=\"Country\", \n              title='Transition in the number of confirmed cases of each countries',\n              template=\"simple_white\")\nfig.update_layout(showlegend=False)\nfig.show()","ac2a9bfd":"#Assume a one-week cycle.\nfreq = 7\n\ndf_trends = pd.DataFrame(columns=df_global_confirmed_cases_selected.columns)\nfor col in selected_countries:\n    df_country = df_global_confirmed_cases_selected[df_global_confirmed_cases_selected[\"Country\"] == col]\\\n                 .reset_index(drop=True).reset_index()\n    df_country = df_country[[\"index\", \"Count\"]]\n    res = sm.tsa.seasonal_decompose(df_country.values, freq=freq)\n    trend = [item[1] for item in res.trend]\n    df_tmp = df_global_confirmed_cases_selected.iloc[df_global_confirmed_cases_selected[df_global_confirmed_cases_selected[\"Country\"] == col].index,:]\n    df_tmp[\"Count\"] = trend\n    df_trends = pd.concat([df_trends, df_tmp])","9842e5be":"fig = px.line(df_trends, x=\"Date\", y=\"Count\", color=\"Country\", \n              title='Trend component of transition in the number of confirmed cases of each countries',\n              template=\"simple_white\")\nfig.update_layout(showlegend=False)\nfig.show()","746c6370":"df_global_deaths = pd.melt(df_global_deaths, id_vars=['Date'], value_vars=country_cols,\n                           var_name='Country', value_name='Count')","9f090de2":"df_global_deaths.head()","7228f7fc":"fig = px.line(df_global_deaths, x=\"Date\", y=\"Count\", color=\"Country\", \n              title='Transition in the number of deaths of each countries',\n              template=\"simple_white\")\nfig.update_layout(showlegend=False)\nfig.show()","028af610":"selected_countries  = [\"US\", \"India\", \"Spain\", \"Brazil\", \"United Kingdom\", \"Japan\"]\ndf_global_deaths_selected = df_global_deaths[df_global_deaths[\"Country\"].isin(selected_countries)].reset_index(drop=True)","ccad633d":"fig = px.line(df_global_deaths_selected, x=\"Date\", y=\"Count\", color=\"Country\", \n              title='Transition in the number of death of each countries',\n              template=\"simple_white\")\nfig.update_layout(showlegend=False)\nfig.show()","9b54436a":"#Assume a one-week cycle.\nfreq = 7\n\ndf_trends = pd.DataFrame(columns=df_global_deaths_selected.columns)\nfor col in selected_countries:\n    df_country = df_global_deaths_selected[df_global_deaths_selected[\"Country\"] == col]\\\n                 .reset_index(drop=True).reset_index()\n    df_country = df_country[[\"index\", \"Count\"]]\n    res = sm.tsa.seasonal_decompose(df_country.values, freq=freq)\n    trend = [item[1] for item in res.trend]\n    df_tmp = df_global_deaths_selected.iloc[df_global_deaths_selected[df_global_deaths_selected[\"Country\"] == col].index,:]\n    df_tmp[\"Count\"] = trend\n    df_trends = pd.concat([df_trends, df_tmp])","70bb7d9e":"fig = px.line(df_trends, x=\"Date\", y=\"Count\", color=\"Country\", \n              title='Trend component of transition in the number of death of each countries',\n              template=\"simple_white\")\nfig.update_layout(showlegend=False)\nfig.show()","bb84c9e0":"In this notebook, I'll try simple visualization with plotly.\n\nNow, I visualize following 2 data, \n\n- CONVENIENT_global_confirmed_cases.csv \n\n- CONVENIENT_global_deaths.csv\n\nAnd I try to visualize trend of their data.","af595603":"### Selected countries","9bed5b43":"# global_death","aa447f7e":"### Check trends","0afae0fd":"# global_confirmed_cases","c8571719":"### Visualize all data","9620bd21":"### tyding","d07f2348":"### Check trends","10891533":"### Selected countries","f8e9fb0e":"# Load library and check data\n\nFirst, I load library. And check data I use. To visualize, I do some preprocess.","03b4b18f":"### <div class=\"alert alert-block alert-warning\">There are some interactive plot. Please wait loading\u23f3<\/div>","3cfe1dd0":"### Visualize all data","332b99a0":"### tyding"}}