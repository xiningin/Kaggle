{"cell_type":{"7431b172":"code","712d6dd4":"code","974ca9fe":"code","dde01d08":"code","944dd1f2":"code","5c7c7b5f":"code","558d9806":"code","6357ab2a":"code","76d0648a":"code","cfa1f9e6":"code","9ea3555d":"code","4bdea24a":"code","bd6d8767":"code","a18a5d7c":"code","b5428def":"code","1c3230f7":"code","e314369d":"code","534b2b66":"code","91cd081e":"code","3638e9ba":"code","06f520be":"code","be0af39d":"code","0fdd0771":"code","5468498c":"code","271dc7ea":"code","2ddba8e2":"code","1b5bd2d9":"markdown","f9b6eaf5":"markdown","59e0bd71":"markdown","fd32eeb3":"markdown","83512277":"markdown","31f59cbc":"markdown"},"source":{"7431b172":"import pandas as pd\nimport numpy as np\nimport matplotlib.pyplot as plt\nimport seaborn as sns\nimport warnings\nwarnings.filterwarnings('ignore')\n\nfrom sklearn.preprocessing import StandardScaler\nfrom sklearn.model_selection import train_test_split\nfrom sklearn.metrics import mean_squared_error,r2_score,mean_absolute_error\nfrom sklearn.linear_model import LinearRegression\nfrom sklearn.tree import DecisionTreeRegressor\nfrom sklearn.ensemble import RandomForestRegressor\nfrom lightgbm import LGBMRegressor","712d6dd4":"df=pd.read_csv(r'..\/input\/seoul-bike-sharing-demand-prediction\/SeoulBikeData.csv',encoding = 'unicode_escape')","974ca9fe":"df.head()","dde01d08":"df.info()","944dd1f2":"df.columns=['Date','Rent_Bike_Count', 'Hour', 'Temperature', 'Humidity',\n       'Wind_speed', 'Visibility', 'DPT',\n       'Solar_Radiation', 'Rainfall', 'Snowfall', 'Seasons',\n       'Holiday', 'Functioning_Day']","5c7c7b5f":"#Convert the Date column in Datetime Dtype\ndf['Date']=pd.to_datetime(df['Date'])\n\n#Breaking Down the Date into 3 Components\ndf['Day']=df['Date'].dt.day\ndf['Month']=df['Date'].dt.month\ndf['Year']=df['Date'].dt.year","558d9806":"df.head()","6357ab2a":"#Converting Contionus variable to categorical variable for ease in prediction\ndf['IsVisibility']=df['Visibility'].apply(lambda x: 1 if x>=2000 else 0)\ndf['IsRainfall']=df['Rainfall'].apply(lambda x:1 if x>=0.148687 else 0)\ndf['IsSnowfall']=df['Snowfall'].apply(lambda x:1 if x>=0.075068 else 0)\ndf['IsSolar_Radiation']=df['Solar_Radiation'].apply(lambda x:1 if x>=0.56911 else 0)\n\n#Mapping the Variables\ndf['Functioning_Day']=df['Functioning_Day'].map({'Yes':1,'No':0})\ndf['IsHoliday']=df['Holiday'].map({'No Holiday':0,'Holiday':1})\n\n#Ater Conversion of numerical variable to categorical droping the original columns to avoid ambiguity\ndf.drop(['Date','Visibility','Rainfall','Snowfall','Solar_Radiation','Holiday'],axis=1,inplace=True)","76d0648a":"df.Functioning_Day.value_counts()","cfa1f9e6":"df.head()","9ea3555d":"def barplots(x,y,hue):\n    plt.figure(figsize=(10,5))\n    sns.barplot(x=x,y=y,hue=hue,data=df);","4bdea24a":"barplots('Hour','Rent_Bike_Count','Functioning_Day')","bd6d8767":"hue=['IsRainfall','IsSnowfall','IsSolar_Radiation','IsVisibility','Seasons']\nfor i in hue:\n    barplots('Hour','Rent_Bike_Count',i)\n    plt.show()","a18a5d7c":"barplots('Hour','Rent_Bike_Count','IsHoliday')","b5428def":"barplots('Hour','Rent_Bike_Count','Year')","1c3230f7":"#Since there was no bike rented in Non Functioning Day we gonna drop the rows \ndf=df[df['Functioning_Day']!=0]","e314369d":"Seasons=pd.get_dummies(df['Seasons'],drop_first=True)","534b2b66":"final_df=df.append(Seasons)","91cd081e":"final_df.fillna(0,inplace=True)\nfinal_df.drop('Seasons',axis=1,inplace=True)","3638e9ba":"final_df.isnull().sum()","06f520be":"X=final_df.drop('Rent_Bike_Count',axis=1)\ny=final_df['Rent_Bike_Count']","be0af39d":"def predict(ml_model,X,y):\n    X_train,X_test,y_train,y_test=train_test_split(X,y,test_size=0.25,random_state=12)\n    sc=StandardScaler()\n    X_train=sc.fit_transform(X_train)\n    X_test=sc.transform(X_test)\n    model=ml_model.fit(X_train,y_train)\n    y_pred=model.predict(X_test)\n    plt.scatter(y_pred,y_test,color='b')\n    plt.xlabel('Predicted')\n    plt.ylabel('Actual')\n    overlay=(f'R^2 is {model.score(X_test,y_test)}\\n Adj R^2 is {1-(1-model.score(X_test,y_test))*(len(y_test)-1)\/(len(y_test)-X_test.shape[1]-1)}\\n RMSE is: {mean_squared_error(y_test,y_pred,squared=False)}')\n    plt.annotate(s=overlay,xy=(0,2500),size='x-large')","0fdd0771":"predict(LinearRegression(),X,y)","5468498c":"predict(DecisionTreeRegressor(),X,y)","271dc7ea":"predict(RandomForestRegressor(),X,y)\n","2ddba8e2":"predict(LGBMRegressor(),X,y)\n","1b5bd2d9":"Compare to 2017 there was a increase in count of bike rent in 2018","f9b6eaf5":"from the above bar graph we also get to know that factor like rainfall,snowfall,visibility,solar radiation\nand season affect the count of bike rents.","59e0bd71":"#### A primary goal of bicycle-renting systems has been to reduce traffic congestion, particularly in large urban areas. Some empirical evidence indicates that this goal has been achieved to varying degrees in different cities.","fd32eeb3":"Holiday also affect the count of bike rent and variation of count of bike rent drastically changes.","83512277":"![image.png](attachment:image.png)","31f59cbc":"From above bar graph we get to know that there was no bike rent on non functioning day"}}