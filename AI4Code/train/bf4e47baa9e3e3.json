{"cell_type":{"c687594d":"code","3514f1c0":"code","dc44b8d4":"code","b7c85ee1":"code","2851ca5d":"code","e298941a":"code","cba970dc":"code","bdefec29":"code","f16d8364":"code","64e298c7":"code","8b603dcc":"code","605d4df1":"code","9212fcd1":"code","3a7e0334":"code","429c780d":"code","c65fd6cb":"code","1e7859f9":"code","5ea73d0b":"code","cb8ce873":"code","8c666c4a":"markdown","89cf9d02":"markdown","597ab919":"markdown","2d78cfe3":"markdown","6617115a":"markdown","c086ab60":"markdown","fe13834e":"markdown","37fc9744":"markdown","b2ffe23c":"markdown","93f13dc5":"markdown"},"source":{"c687594d":"import pandas as pd \nfrom geopy.geocoders import Nominatim\nimport matplotlib.pyplot as plt\nimport seaborn as sns \n\n","3514f1c0":"data = pd.read_csv('..\/input\/nyc-taxi-trip-duration\/train.csv')\ndata.head()\n","dc44b8d4":"print(data.describe(),data.info())\n","b7c85ee1":"data['trip_duration'] = data['trip_duration']\/60\ndata['trip_duration'] = round(data.trip_duration,2)\ndata.head()","2851ca5d":"from math import radians, sin, cos, sqrt, asin\ndef haversine(columns):\n  lat1, lon1, lat2, lon2 = columns\n  R = 6372.8 # Earth radius in kilometers\n \n  dLat = radians(lat2 - lat1)\n  dLon = radians(lon2 - lon1)\n  lat1 = radians(lat1)\n  lat2 = radians(lat2)\n \n  a = sin(dLat\/2)**2 + cos(lat1)*cos(lat2)*sin(dLon\/2)**2\n  c = 2*asin(sqrt(a))\n \n  return R * c\ncols = ['pickup_latitude','pickup_longitude','dropoff_latitude','dropoff_longitude']\ndistances = data[cols].apply(\n    lambda x: haversine(x),axis = 1\n)\ndata['distance'] = distances.copy()\ndata['distance'] = round(data.distance,2)\ndata.head()","e298941a":"data['pickup_datetime'] = pd.to_datetime(data['pickup_datetime'])\ndata['pu_hour'] = data['pickup_datetime'].dt.hour\ndata['pu_day'] = data['pickup_datetime'].dt.dayofyear\ndata['pu_wday'] = data['pickup_datetime'].dt.dayofweek\ndata['pu_month'] = data['pickup_datetime'].dt.month\ndata.head()\n","cba970dc":"rush_hour_morning = data[(data['pu_hour'] >= 7) & (data['pu_hour'] < 9)]\nafternoon = data[(data['pu_hour'] >= 9) & (data['pu_hour'] < 16)]\nrush_hour_evening = data[(data['pu_hour'] >= 16) & (data['pu_hour'] < 18)]\nevening = data[(data['pu_hour'] >= 18) & (data['pu_hour'] <= 23)]\nlatenight =data[(data['pu_hour'] >=0 ) & (data['pu_hour'] < 7)]\n\nprint(\"7am and 9 am average distance :\",rush_hour_morning.distance.mean(),\n\"9am and 4 P.M average distance :\",afternoon.distance.mean(),\n\"4 PM and 6 PM average distance : \",rush_hour_evening.distance.mean(),\n\"6 pm and 11pm average distance :\",evening.distance.mean(),\n\"11pm and 7 am average distance :\",latenight.distance.mean(),)\n\n","bdefec29":"passengers = data['passenger_count'].value_counts().sort_index()\npassengers.plot(kind = 'bar',logy = True)\nplt.xlabel('Number of passengers')\nplt.ylabel('Frequency')\nplt.title('Distribution of passenger counts, log scaling')\nplt.show()","f16d8364":"import matplotlib.pyplot as plt\nfig, ax = plt.subplots(ncols=1, nrows=1,figsize=(12,10))\nplt.ylim(40.6, 40.9)\nplt.xlim(-74.1,-73.7)\nax.scatter(data['pickup_longitude'],data['pickup_latitude'], s=0.02, alpha=1)","64e298c7":"import matplotlib.pyplot as plt\nfig, ax = plt.subplots(ncols=1, nrows=1,figsize=(12,10))\nplt.ylim(40.6, 40.9)\nplt.xlim(-74.1,-73.7)\nax.scatter(data['dropoff_longitude'],data['dropoff_latitude'], s=0.02, alpha=1)","8b603dcc":"byWday = rush_hour_morning.groupby('pu_wday').count()['trip_duration']\nbyWday.plot()\nplt.tight_layout()\n","605d4df1":"byWday = afternoon.groupby('pu_wday').count()['trip_duration']\nbyWday.plot()\nplt.tight_layout()","9212fcd1":"byWday = rush_hour_evening.groupby('pu_wday').count()['trip_duration']\nbyWday.plot()\nplt.tight_layout()","3a7e0334":"byWday = evening.groupby('pu_wday').count()['trip_duration']\nbyWday.plot()\nplt.tight_layout()","429c780d":"byWday = latenight.groupby('pu_wday').count()['trip_duration']\nbyWday.plot()\nplt.tight_layout()","c65fd6cb":"byWday = latenight.groupby('pu_wday').count()['distance']\nbyWday.plot()\nplt.tight_layout()","1e7859f9":"sns.countplot(x='pu_wday',data=data,hue='vendor_id')\nplt.tight_layout()","5ea73d0b":"data.corr()","cb8ce873":"a=data.groupby('passenger_count').count()['distance']\na.plot()","8c666c4a":"# \u0130mporting Libs","89cf9d02":"## There is no correlation between group size and Distance\n## Generally, Passenger prefer to use taxi from center to their hood\n## Latenight trip has an effect on distance\n","597ab919":"## Time of Day And Average distance","2d78cfe3":"# Passenger road map for drop off","6617115a":"## Trip duration for part of day time ","c086ab60":"#  Passenger road map for picking up","fe13834e":"## Understanding data ","37fc9744":"## Get trip duration as  minute","b2ffe23c":"# Conclusion ,","93f13dc5":"## Getting Distance as Km"}}