{"cell_type":{"2cd190fd":"code","409171c7":"code","74b231c9":"code","f1df5987":"code","4a71ad17":"code","17278cb7":"code","2efc55c4":"code","a1982fbd":"code","87ea58a2":"code","460a35fa":"code","772656dd":"code","8eef6d93":"code","d952e78e":"code","063f3537":"code","9c945759":"code","6bb334b7":"code","d1c80ed4":"code","8119ac8c":"code","561f1eb5":"code","9301d8c0":"code","19258ede":"code","61bb405c":"code","55124fc4":"code","c51f6970":"code","52cdf7bc":"code","24f170a3":"code","81faf60b":"code","08dca9cb":"code","f07589ed":"code","14409784":"code","16e1d182":"code","5f8c2cea":"code","d60818dc":"code","496256a7":"code","ea520564":"code","3eaec66a":"code","15d06d5a":"code","581f1059":"code","455c1c62":"code","8228fc31":"code","c0bd59d7":"code","670a184a":"code","df302045":"code","b54536a2":"code","0148f3f6":"code","f4785e4b":"code","16420426":"markdown","8346126a":"markdown"},"source":{"2cd190fd":"import numpy\nimport pandas as pd\nfrom pandas import DataFrame\nfrom pandas.io.json import json_normalize\nimport calendar\nimport os\nimport seaborn as sns\nimport matplotlib as mpl\nimport matplotlib.pyplot as plt","409171c7":"# To plot pretty figures\n%matplotlib inline","74b231c9":"# load dataset\nraw_data = pd.read_json(\"https:\/\/api.rootnet.in\/covid19-in\/stats\/history\")\nraw_data.shape","f1df5987":"my_state = [\"Delhi\"] # The state for which analysis is to be conducted.","4a71ad17":"framed_data = DataFrame(raw_data)\nframed_data = framed_data['data']","17278cb7":"original_data = json_normalize(framed_data,'regional',['day'])","2efc55c4":"original_data = original_data.rename(columns={\"day\": \"date_report\"})\noriginal_data[\"date_report\"] = pd.to_datetime(original_data[\"date_report\"])\n","a1982fbd":"original_data.shape\noriginal_data.info()","87ea58a2":"#original_data = original_data[(original_data['confirmedCasesIndian'] > 2000)]","460a35fa":"my_state_data = original_data[(original_data['loc'].isin(my_state))]\nmy_state_data.info()","772656dd":"original_data.set_index('date_report')","8eef6d93":"my_state_data['total_active_cases'] = my_state_data['totalConfirmed'] - my_state_data['deaths'] - my_state_data['discharged']","d952e78e":"my_state_data['daily_new_cases'] = my_state_data['confirmedCasesIndian'] - my_state_data['confirmedCasesIndian'].shift()","063f3537":"my_state_data.describe()","9c945759":"g1_states_data = my_state_data[['date_report','totalConfirmed','deaths','discharged','total_active_cases']]","6bb334b7":"g1_states_data.head(100)","d1c80ed4":"g1_states_data.set_index(['date_report'], inplace=True)","8119ac8c":"import matplotlib.ticker as ticker\n\ncolors = {'totalConfirmed':'#045275', 'deaths':'#089099', 'discharged':'#7CCBA2', 'total_active_cases':'#7C1D6F'}\n\nplt.style.use('fivethirtyeight')\n\nplot = g1_states_data.plot(figsize=(8,8), color=list(colors.values()), linewidth=5, legend=False, kind=\"line\")\n\nplot.yaxis.set_major_formatter(ticker.StrMethodFormatter('{x:,.0f}'))\n\nplot.grid(color='#d4d4d4')\n\nplot.set_xlabel('report date')\n\nplot.set_ylabel('# of cases')\nplot.set_title('Covid situation in '+ my_state[0])\n\n# Section 8 - Assigning Colour\n\nfor case_type in list(colors.keys()):\n\n    plot.text(x = g1_states_data.index[-1], y = g1_states_data[case_type].max(), color = colors[case_type], s = case_type, weight = 'bold')\n    ","561f1eb5":"g2_states_data = my_state_data[['date_report','daily_new_cases']]\n","9301d8c0":"g2_states_data = g2_states_data[g2_states_data['daily_new_cases']>= 200]","19258ede":"g2_states_data.set_index(['date_report'], inplace=True)\n#g2_states_data.head(100)","61bb405c":"#x = DataFrame(g2_states_data.groupby([g2_states_data['date_report'].dt.strftime('%W')])['daily_new_cases'].sum())\nsns.set_style(\"whitegrid\")\nplt.style.use('fivethirtyeight')\nplot = g2_states_data.plot.bar(rot=\"45\",figsize=(20,20))\n\nplot.yaxis.set_major_formatter(ticker.StrMethodFormatter('{x:,.0f}'))\n\nplot.grid(color='#089099')\n\nplot.set_xlabel('date report')\n\nplot.set_ylabel('# of cases')\nplot.set_title('Daily new cases in ' + my_state[0])","55124fc4":"fig = plt.figure(figsize=(12,8))\n\nplot = sns.kdeplot(my_state_data['total_active_cases'],my_state_data['discharged'])\nplot.set_xlabel('Total Active Cases')\n\nplot.set_ylabel('# of Discharged')\nplot.set_title('Total Active & Discharged in ' + my_state[0])","c51f6970":"fig = plt.figure(figsize=(12,8))\n\nplot = sns.kdeplot(my_state_data['confirmedCasesIndian'],my_state_data['deaths'])\nplot.set_xlabel('Total Confirmed Cases')\n\nplot.set_ylabel('# of Deaths')\nplot.set_title('Total Confirmed Cases & Deaths in ' + my_state[0])","52cdf7bc":"mobility_data = pd.read_csv(\"https:\/\/www.gstatic.com\/covid19\/mobility\/Global_Mobility_Report.csv\")\ncountries = [\"India\"]\ni_m_d = mobility_data[mobility_data['country_region'].isin(countries)]\ni_m_d = i_m_d.drop(columns=['country_region_code','country_region','sub_region_2'])","24f170a3":"top_states = [\"Delhi\",\"Maharashtra\",\"Tamil Nadu\",\"Gujarat\",\"Kerala\"]\n\ni_m_d = i_m_d[i_m_d['sub_region_1'].isin(top_states)]\ni_m_d['date_report'] = pd.to_datetime(i_m_d['date'])\ni_m_d.drop(columns= ['date'])","81faf60b":"i_m_d_states = i_m_d.copy()","08dca9cb":"i_m_d_states = i_m_d_states.drop(columns=['iso_3166_2_code','census_fips_code','date'])\n","f07589ed":"i_m_d_states = i_m_d_states[i_m_d_states['sub_region_1'].isin(my_state)]","14409784":"i_m_d_states.set_index(['date_report'], inplace=True)","16e1d182":"plot = i_m_d_states.plot(figsize=(18,12), linewidth=5, legend=True)\nplot.set_xlabel('report date')\n\nplot.set_ylabel('Change in mobility')\nplot.set_title('Change in mobilities since lockdwon in ' + my_state[0])","5f8c2cea":"g5_states_data = original_data[original_data['loc'].isin(top_states)]\n","d60818dc":"cases_mobility_data = pd.merge(g5_states_data,i_m_d,how=\"right\",left_on=['loc','date_report'],right_on=['sub_region_1','date_report'])","496256a7":"cases_mobility_data[\"average_mobility\"] = cases_mobility_data[['retail_and_recreation_percent_change_from_baseline','grocery_and_pharmacy_percent_change_from_baseline','parks_percent_change_from_baseline','transit_stations_percent_change_from_baseline','workplaces_percent_change_from_baseline','residential_percent_change_from_baseline']].mean(axis=1)","ea520564":"cases_mobility_data = cases_mobility_data[['date_report','sub_region_1','average_mobility']]","3eaec66a":"cases_mobility_data = cases_mobility_data.pivot(index='date_report',columns='sub_region_1', values='average_mobility')","15d06d5a":"state_columns = list(cases_mobility_data.columns)","581f1059":"cases_mobility_data = cases_mobility_data.reset_index('date_report')","455c1c62":"cases_mobility_data.set_index(['date_report'], inplace=True)","8228fc31":"colors = {'Delhi':'#045275', 'Gujarat':'#089099', 'Kerala':'#7CCBA2', 'Maharashtra':'#7C1D6F','Tamil Nadu':'#DC3977'}\n\nplot = cases_mobility_data.plot(figsize=(18,12), color=list(colors.values()), linewidth=5, legend=True)\n\nplot.set_xlabel('report date')\n\nplot.set_ylabel('change in mobility')\nplot.set_title('Change in average mobility from basline in top 5 states')\n","c0bd59d7":"g6_states_data = original_data[original_data['loc'].isin(state_columns)]","670a184a":"g6_states_data = g6_states_data.pivot(index='date_report', columns='loc', values='confirmedCasesIndian')","df302045":"covid = g6_states_data.reset_index('date_report')","b54536a2":"covid.set_index(['date_report'], inplace=True)","0148f3f6":"covid.columns = state_columns","f4785e4b":"import matplotlib.ticker as ticker\n\ncolors = {'Delhi':'#045275', 'Maharashtra':'#089099', 'Tamil Nadu':'#7CCBA2', 'Gujarat':'#7C1D6F', 'Kerala':'#DC3977'}\n\nplt.style.use('fivethirtyeight')\n\nplot = covid.plot(figsize=(12,8), color=list(colors.values()), linewidth=5, legend=False, kind=\"line\")\n\nplot.yaxis.set_major_formatter(ticker.StrMethodFormatter('{x:,.0f}'))\n\nplot.grid(color='#d4d4d4')\n\nplot.set_xlabel('report date')\n\nplot.set_ylabel('# of new Cases')\nplot.set_title('New Cases in Top 5 States')\n\n\nfor state in list(colors.keys()):\n\n    plot.text(x = covid.index[-1], y = covid[state].max(), color = colors[state], s = state, weight = 'bold')\n\n","16420426":"This notebook analyses the COVID-19 cases in Delhi in comparison to top 5 states of India. It also provides overview of how mobility has impacted number of COVID cases. \n\nThe COVID data is taken from https:\/\/api.rootnet.in\/.\nThe mobility data is taken from https:\/\/www.google.com\/covid19\/mobility\/.\n","8346126a":"No cases in "}}