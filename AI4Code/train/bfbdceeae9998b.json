{"cell_type":{"b3ea12b8":"code","72186951":"code","caa72e2e":"code","d05ded6f":"code","ea62abfd":"code","c464ea1b":"code","ee4e66a5":"code","a949be38":"code","82d38d36":"code","d0f38677":"code","83039560":"code","7c2c9cae":"code","caf129d6":"code","7865e4ff":"code","7d4d3be0":"code","9f30cd43":"code","ea8c6b7f":"code","b6cf41d8":"code","26356646":"code","388d5172":"code","deda5823":"code","9e0fbfee":"code","63741fed":"code","a8a77fc9":"code","340e7da9":"code","b9dfd265":"code","237ae371":"code","58f17148":"code","7b140f28":"code","3ecb0c62":"code","eefc5140":"code","688c4b92":"code","509e9f0c":"code","0335f082":"code","86cf84ca":"code","afdcbd28":"code","36bbb830":"markdown","77476cdb":"markdown","ae30d72c":"markdown","22f95e5e":"markdown","a704dce9":"markdown","b9c92798":"markdown","b96c9c60":"markdown"},"source":{"b3ea12b8":"# This Python 3 environment comes with many helpful analytics libraries installed\n# It is defined by the kaggle\/python docker image: https:\/\/github.com\/kaggle\/docker-python\n# For example, here's several helpful packages to load in \n\nimport numpy as np # linear algebra\nimport pandas as pd # data processing, CSV file I\/O (e.g. pd.read_csv)\n\n# Input data files are available in the \"..\/input\/\" directory.\n# For example, running this (by clicking run or pressing Shift+Enter) will list all files under the input directory\n\nimport os\nfor dirname, _, filenames in os.walk('\/kaggle\/input'):\n    for filename in filenames:\n        print(os.path.join(dirname, filename))\n\n# Any results you write to the current directory are saved as output.","72186951":"ames=pd.read_csv('\/kaggle\/input\/house-prices-advanced-regression-techniques\/train.csv')","caa72e2e":"ames.head()\names.info()","d05ded6f":"ames.shape","ea62abfd":"ames.info()","c464ea1b":"import seaborn as sns\nimport matplotlib.pyplot as plt\nf,ax=plt.subplots(figsize=(12,9))\n_=plt.hist(x='SalePrice',data=ames,bins=50)","ee4e66a5":"ames['SalePrice']=np.log(ames['SalePrice'])\n_=plt.hist(x='SalePrice',data=ames)","a949be38":"# Understand the relationship between Gr living area and Sale price\nsns.jointplot(x='GrLivArea',y='SalePrice',data=ames,kind='reg')\nprint(ames.loc[:,['GrLivArea','SalePrice']].corr())\nplt.show()","82d38d36":"f,ax=plt.subplots(figsize=(22,9))\names_neighborhood=ames.groupby('Neighborhood')['SalePrice'].mean().sort_values(ascending=False)\n_=plt.plot(ames_neighborhood,marker='.',linestyle='none')","d0f38677":"def NeighborClass(series):\n    if series=='NoRidge' or series=='NridgHt' or series=='StoneBr':\n        return 'High_Val'\n    elif series=='BrDale' or series=='MeadowV' or series=='IDOTRR' or series=='Sawyer' or series=='OldTown' or series=='Edwards':\n        return 'Low_val'\n    else: return'Mid_val'","83039560":"ames['Neighbor_class']=ames['Neighborhood'].apply(NeighborClass)\names['Neighbor_class'].value_counts()","7c2c9cae":"ames_dummies=pd.get_dummies(data=ames,columns=['Neighbor_class'],drop_first=True)\n","caf129d6":"sns.boxplot(x='Neighbor_class',y='SalePrice',data=ames)","7865e4ff":"f,ax=plt.subplots(figsize=(22,9))\ngroupby_year=ames_dummies.groupby('YearBuilt')['SalePrice'].median()\n_=plt.plot(groupby_year,linestyle='none',marker='.')","7d4d3be0":"# lets understand the correlations between the variables\ncorr_mat=ames_dummies.loc[:,['GrLivArea','TotalBsmtSF','GarageArea','1stFlrSF','YearBuilt','2ndFlrSF','GarageCars']].corr()\nf,ax=plt.subplots(figsize=(12,9))\nsns.heatmap(corr_mat,vmax=0.8,square=True,annot=True)","9f30cd43":"def series_dum(series):\n    if series==0:\n        return 0\n    else: return 1\n","ea8c6b7f":"ames_dummies['TotSF']=ames_dummies['GrLivArea']+ames_dummies['2ndFlrSF']+ames_dummies['TotalBsmtSF']","b6cf41d8":"ames_dummies['Pool_P']=ames_dummies['PoolArea'].apply(series_dum)","26356646":"ames_dummies['CentralAir_P']=ames_dummies['CentralAir'].map({'Y':1,'N':0})","388d5172":"sns.boxplot(x='CentralAir_P',y='SalePrice',data=ames_dummies)\nprint(ames_dummies['CentralAir_P'].value_counts())\nplt.show()","deda5823":"ames_dummies.info()","9e0fbfee":"ames_short=ames_dummies.loc[:,['TotSF','YearBuilt']]","63741fed":"X=ames_short.values\nprint(X)\ny=ames['SalePrice'].values\nfrom sklearn.tree import DecisionTreeRegressor\nfrom sklearn.model_selection import train_test_split,cross_val_score,GridSearchCV\nX_train,X_test,y_train,y_test=train_test_split(X,y,test_size=0.2,random_state=42)\nparam_grid={'max_depth':np.arange(1,6)}\ndt=DecisionTreeRegressor()\ndt_cv=GridSearchCV(dt,param_grid,cv=5)\ndt_cv.fit(X_train,y_train)\n","a8a77fc9":"dt_cv.score(X_test,y_test)","340e7da9":"test=pd.read_csv('\/kaggle\/input\/house-prices-advanced-regression-techniques\/test.csv')\n","b9dfd265":"test['TotalBsmtSF'].fillna(0,inplace=True)\ntest['TotalSF']=test['GrLivArea']+test['2ndFlrSF']+test['TotalBsmtSF']\ntest.info()","237ae371":"def tranform(df,col):\n    df[col]=df[col].apply(series_dum)\n    print(df[col].value_counts())\n    return df","58f17148":"test=tranform(test,'PoolArea')\ntest['CentralAir']=test['CentralAir'].map({'Y':1,'N':0})\ntest.info()","7b140f28":"test['Neighbor_class']=test_features['Neighborhood'].apply(NeighborClass)\ntest['Neighbor_class'].value_counts()","3ecb0c62":"test_d=pd.get_dummies(data=test,columns=['Neighbor_class'],drop_first=True)\ntest_d.info()","eefc5140":"test_features_d=test_d.loc[:,['TotalSF','YearBuilt']]\n","688c4b92":"test_features_d.info()","509e9f0c":"X_test2=test_features_d.values\nlog_predict=dt_cv.predict(X_test2)\nsales=np.e**log_predict\nsales","0335f082":"Id=test['Id']\npredictions=pd.DataFrame({'Id':Id,'SalePrice':sales})","86cf84ca":"predictions.head()","afdcbd28":"predictions.to_csv('submission.csv',index=False)","36bbb830":"Highly righ skewed data. To fit to a linear model better to take Log of the Slae proice","77476cdb":"## Data Exploration","ae30d72c":"Some key clusters emerge amongst neighborhoods\n* NoRidge,StoneBr,NridgHt- Cluster 1 high value\n* BrDale,MeadowV IDOTRR -: Cluster2 low value\n* Everyone else Mid value","22f95e5e":"### Lets understand the realtionship between neighborhood and sale price","a704dce9":"Right Skew is removed. We will use this as the target variable going forward","b9c92798":"*Looks like a somewhat linear relationship especially in the period 1940 onwards *","b96c9c60":"Correlation between Greater Living Area and the Sale Price is quite high (0.7) and the scatter plot also shows a strong linear relationship"}}