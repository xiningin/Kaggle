{"cell_type":{"5faaca1b":"code","03a71156":"code","bf12226b":"code","6c989dff":"code","5f62330d":"code","e025847c":"code","f439f5cd":"code","a467bab4":"code","1f050741":"code","0a0c43b6":"code","63bf3025":"code","29e89e1b":"code","00501f65":"code","7b744264":"code","5ff3f504":"code","c2aa1db2":"code","b546216d":"code","75dd0964":"code","ba463a7f":"code","ce1e821e":"code","8a1e4843":"code","62211fd7":"code","d7f5dea9":"code","94480fe5":"code","9620fc5c":"code","6c39b64a":"code","0f796700":"code","3b66cb1b":"code","3328329e":"code","49d0e159":"code","2b74dc64":"code","f93beaf4":"code","6b39ea6a":"code","96198069":"code","0af10398":"code","399798fc":"code","af1385f4":"markdown","feb59d44":"markdown","4ab32512":"markdown","be62df4e":"markdown","0f9fac98":"markdown","bd0e75c5":"markdown","f58927fb":"markdown","c163fa82":"markdown","7a7c9124":"markdown","112cb4a4":"markdown","b244474a":"markdown","bd040ecf":"markdown","8119ef7e":"markdown","21519727":"markdown","6f7263e6":"markdown","65fba6c4":"markdown","be85c7f7":"markdown","60897539":"markdown","be840018":"markdown","15ade396":"markdown","1aecf279":"markdown","fd816201":"markdown","bece667c":"markdown","446ab84f":"markdown","ca58042e":"markdown","8f53afcc":"markdown","42fd1a92":"markdown","37fcb532":"markdown","843022d0":"markdown","65576f14":"markdown","5f0cd339":"markdown","197ed31a":"markdown","18e57a76":"markdown","2ee0f425":"markdown","b60f9493":"markdown","bc4e590b":"markdown","7e4b3096":"markdown","f51b9aae":"markdown"},"source":{"5faaca1b":"#setup imports \n\nimport numpy as np\nimport pandas as pd \nimport matplotlib.pyplot as plt\nimport matplotlib.gridspec as gridspec\nimport seaborn as sns\nimport numpy as np\n%matplotlib inline \nimport os\n\nimport warnings\nwarnings.filterwarnings('ignore')","03a71156":"#there are two different hotels being Resort and City hotel ","bf12226b":"#read CSV\nhotel = pd.read_csv('..\/input\/hotel-booking-demand\/hotel_bookings.csv')\nhotel.head()","6c989dff":"#search for null values in the dataframe \nhotel.isnull().sum()","5f62330d":"#this opens up the notebook so that you can view all the columns with no limits. \npd.set_option('display.max_columns', None)\n\n#replace missing values and dropping columns.  \nNan = {'country': 'Unknown', 'children': 0, 'agent': 0}\nhotel = hotel.fillna(Nan)\n\n#changing values from unknown to SC in meal column\nhotel['meal'].replace('Undefined', 'SC', inplace=True)","e025847c":"#dropping columns that have too many null values: Company column has 94% null values so it is dropped for analysis) \nhotel = hotel.drop(['company'], 1)\nhotel.head()","f439f5cd":"hotel.isnull().sum()","a467bab4":"#describing categorical data \nhotel.describe(include=[\"O\"])","1f050741":"#viewing the measures of tendency \nhotel.describe()","0a0c43b6":"#finding the anomly \nhotel[hotel['adr'] == (-6.38)] ","63bf3025":"#find the anomly's and replace \nhotel = hotel.drop([48515])\n\nhotel = hotel.drop([14969])","29e89e1b":"#there are some a few records that have zero average daily rate(ADR) and are a no-show\n#These type of records will be excluded from the dataset since they dont provide any insight. \nhotel.loc[(hotel[\"adr\"]==0) & (hotel[\"reservation_status\"]==\"No-Show\")]","00501f65":"#checking for data quality \nhotel.is_canceled.value_counts()","7b744264":"#removing data that has values of 0 for ADR and status of no-show for reseveration status\ndf = hotel.loc[(hotel[\"adr\"]!=0) & (hotel[\"reservation_status\"]!=\"No-Show\")]\ndf","5ff3f504":"#view the data to see what is left after preprocessing\ndf.shape","c2aa1db2":"df.describe(include=[\"O\"])","b546216d":"df = df.reset_index(drop=True)\ndf","75dd0964":"#creating Dataframe that excludes the large number of cancelations \ndf2 = df[df.is_canceled == 0]\ndf2","ba463a7f":"df.groupby('arrival_date_month')['arrival_date_year'].unique()","ce1e821e":"#getting the data\n#create split DF for city and resort hotel \nresortdf = df[df['hotel'] == 'Resort Hotel']\nresortdf\n\ncitydf = df[df['hotel'] == 'City Hotel']\ncitydf\n\n#get total counts for each month for each city \nmresortdata = resortdf.groupby('arrival_date_month')['hotel'].count()\nmcitydata =  citydf.groupby('arrival_date_month')['hotel'].count()\n\nmresortdf = pd.DataFrame({'hotel': 'Resort Hotel','month': list(mresortdata.index),\n                          'guests':list(mresortdata.values)})\nmcitydf = pd.DataFrame({'hotel': 'City Hotel','month': list(mcitydata.index),\n                          'guests':list(mcitydata.values)})\n#concat to combine the two hotel data for easy viewing \nmonthlydf = pd.concat([mresortdf, mcitydf], ignore_index = True)\n\n#order the months for appropriate ordered viewing \nmonths = [\"January\", \"February\", \"March\", \"April\", \"May\", \"June\", \n\"July\", \"August\", \"September\", \"October\", \"November\", \"December\"]\n\nmonthlydf['month'] = pd.Categorical(monthlydf['month'], categories = months, ordered= True)\n\n#normalizing the data \n\nmonthlydf.loc[(monthlydf[\"month\"] == \"July\") | (monthlydf[\"month\"] == \"August\"),\n                    \"guests\"] \/= 3\nmonthlydf.loc[(monthlydf[\"month\"] != \"July\") | (monthlydf[\"month\"] != \"August\"),\n                    \"guests\"] \/= 2\n#graphing\nplt.figure(figsize=(10, 8))\nsns.set(style = 'darkgrid')\nsns.lineplot(x='month', y= 'guests', hue = 'hotel' , data = monthlydf, sort = False)\nplt.xticks( rotation= 50)\nplt.legend(loc='upper right')\nplt.title('Number of Guests Per Month')\nplt.show()","8a1e4843":"#distribution of average daily rates\nprint(\"Skewness: %.2f\" % df['adr'].skew())\nprint(\"Kurtosis: %.2f\" % df['adr'].kurt())\nplt.figure(figsize=(10, 8))\nsns.distplot(df['adr'])\nsns.set(style = 'darkgrid')\nplt.title('Average Daily Rate Distribution')\nplt.xlabel('ADR (EUR\u20ac)')\nplt.ion()\nplt.show()","62211fd7":"plt.figure(figsize=(10, 8))\nsns.set(style=\"darkgrid\")\nhtc = sns.catplot(x=\"customer_type\", y=\"adr\", hue=\"hotel\", data=df,\nheight=6, kind=\"bar\", palette=\"muted\")\nhtc.despine(left=True)\nhtc.set_ylabels(\"ADR (EUR\u20ac)\")\nhtc.set_xlabels(\"Cusotmer Type\")\nplt.title('Customer Type Prices')\nplt.ion()\nplt.show()","d7f5dea9":"plt.figure(figsize=(10, 8))\nsns.jointplot(x=\"lead_time\", y=\"adr\", data=df, s = 10)\nplt.show()","94480fe5":"months = [\"January\", \"February\", \"March\", \"April\", \"May\", \"June\", \n\"July\", \"August\", \"September\", \"October\", \"November\", \"December\"]\n\nmonth_revenue = pd.Categorical(df['arrival_date_month'], categories = months, ordered= True)\nplt.figure(figsize=(10, 8))\nsns.lineplot(x=month_revenue, y= df.adr, hue = 'hotel' , data = df, sort = False)\nplt.xticks( rotation= 50)\nplt.ylabel('ADR (EUR\u20ac)')\nplt.title('Average Daily Rate Per Month')\nplt.show()","9620fc5c":"#barplot \nsns.set(style=\"darkgrid\", palette=\"pastel\")\nplt.figure(figsize=(10, 8))\nhtc = sns.catplot(x=\"total_of_special_requests\", y=\"adr\", hue=\"hotel\", data=df,\nheight=6, kind=\"bar\", palette=\"muted\")\nhtc.despine(left=True)\nhtc.set_ylabels(\"ADR (EUR\u20ac)\")\nhtc.set_xlabels(\"Number of Special Requests\")\nplt.show()","6c39b64a":"#reserveed room type and average daily rate \nsns.set(style=\"darkgrid\")\nplt.figure(figsize=(10, 8))\nhtc = sns.catplot(x=\"reserved_room_type\", y=\"adr\", hue=\"hotel\", data=df,\n                height=6, kind=\"bar\", palette=\"muted\")\nhtc.despine(left=True)\nhtc.set_ylabels(\"ADR (EUR\u20ac)\")\nhtc.set_xlabels(\"Reserved Room Type\")\nplt.title('Average Daily Rate of Room Types')\nplt.show()","0f796700":"#leadtime cancelations using df\nplt.figure(figsize=(10, 8))\nsns.lineplot(x=month_revenue, y= 'is_canceled', hue = 'hotel' , data = df, sort = False)\nplt.xticks( rotation= 50)\nplt.ylabel('Cancelations')\nplt.title('Cancelations Per Month')\nplt.show()","3b66cb1b":"#finding values of top visitors for both resorts\ntopc_resort = df[df['hotel']==\"Resort Hotel\"][\"country\"].value_counts().head(10)\ntopc_city = df[df['hotel']==\"City Hotel\"][\"country\"].value_counts().head(10)\ntopc = pd.concat([topc_city,topc_resort],axis=1)\ntopc.columns = [\"city\",\"resort\"]\ntopc","3328329e":"new_topc = topc.rename_axis('country').reset_index()\n#create df for resort values \nnew_topr = new_topc.drop('city', 1)\nnew_topr.sort_values(['resort'], ascending=False, inplace= True)\nnew_topr.reset_index(drop=True)","49d0e159":"plt.figure(2, figsize=(20,15))\nthe_grid = gridspec.GridSpec(2, 2)\n\nplt.subplot(the_grid[0, 1],  title='Top Visitors from City Hotel')\nsns.barplot(x='country',y='city', data=new_topc, palette='Spectral')\nplt.ylabel('Number of Visitors')\n\nplt.subplot(the_grid[0, 0], title='Top Visitors from Resort Hotel',)\nsns.barplot(x='country',y='resort', data=new_topr, palette='Spectral')\nplt.ylabel('Number of Visitors')\n\nplt.suptitle('Top Countries Visiting ', fontsize=16)\nplt.show()","2b74dc64":"pie = df['country'].value_counts().head(10)\n\nlabels = ['PRT','GBR','FRA','ESP','DEU','ITA','IRL','BEL','BRA','NLD']\n\nfig, ax = plt.subplots()\nax.pie(pie, labels = labels ,autopct='%1.1f%%', shadow=True)\nplt.title('Top 10 Vistitors')\nplt.figure(figsize=(10, 8))\nplt.show()","f93beaf4":"#duration of stay  \ndf2['totalday'] = df2['stays_in_weekend_nights'] + df2['stays_in_week_nights']\ndf2.head()","6b39ea6a":"print(\"Skewness: %.2f\" % df2['totalday'].skew())\nprint(\"Kurtosis: %.2f\" % df2['totalday'].kurt())\nplt.figure(figsize=(10, 8))\nsns.distplot(df2['totalday'])\nplt.xlabel('Total Days Spent')\nplt.show()","96198069":"#creating revenue column \n#average daily rate times days spent = room revenue \n\ndf2['Revenue'] = df2.adr * df2.totalday\ndf2.groupby(\"hotel\")[\"Revenue\"].describe()","0af10398":"#show figure \nplt.figure(figsize=(10, 8))\nf, ax = plt.subplots(figsize=(6.5, 6.5))\nsns.scatterplot(x='totalday', y= 'adr', hue = 'hotel',palette=\"ch:r=-.2,d=.3_r\", \n                data = df2 , ax = ax, sizes=(1,10))\nplt.xlabel('Total Days Spent')\nplt.ylabel('ADR (EUR\u20ac)')\nplt.show()","399798fc":"plt.figure(figsize=(10, 8))\nsns.lineplot(x=df['assigned_room_type'], y= df2.Revenue, hue = 'hotel' , data = df2)\nplt.xlabel('Assigned Room Type')\nplt.show()","af1385f4":"<b> How does customer type effect the Average Daily Rate (ADR) across the two hotels. <b\/>","feb59d44":"---","4ab32512":"<b> What is the average daily rate per month <\/b>","be62df4e":"<h1> Hotel Booking Exploratory Data Analysis <h1>\n   ","0f9fac98":"Room types G and F demand the highest Average Daily Rate. \n\nNote: the room types are anonymized for both types of hotels as mentioned before. ","bd0e75c5":"The graph shows that ADR is higher for shorter length of stay. This means that prices are more favourable for people who purchace longer stay packages when compared with shorter stays.","f58927fb":"<B> Preprocessing Data <\/B>","c163fa82":"<br>","7a7c9124":"<b>How are the cancelations distributed over a month to month basis ?<\/b>","112cb4a4":"<br>","b244474a":"The graph indicates that as the number of special requests increases so does the cost for daily rate. People who purchase hotel better hotel rooms tend to demand more special requests ","bd040ecf":"<b>What does the distribution of guests look like month to month <b\/>","8119ef7e":"Some important considerations in regards to cancelations is to understand that a considerable portion if the data given has these cancelations and the EDA was done removing these variables. These removed data reduce the effectiveness of the EDA.\n\nSome recommendations would be for limiting of the time one can book out for hotels, the data shows that the vast majority of guests who booked far in advance canceled.\n\n<b> If you have any suggestions for what I should take a look at for this dataset please feel free to comment! <\/b>","21519727":"<B> How does lead time influence the ADR <B\/>","6f7263e6":"The joint plot shows that increased lead time is associated with lower ADR, this would suggest that people who book far in advance enjoy lower costs for Hotels as compared to shorter bookings. ","65fba6c4":"the graph shows that the summer months generate the most average daily rates for bookings acorss hotels.\n\nwhat is important to note is that when you compare this graph with the number of guests graph which had larger numbers for fall and spring,  those same dates show this lowest ADR's. This would clearly suggest that prices are better during fall and spring months and the volume of guests are also highest during these months. ","be85c7f7":"Majority of the guests are from Portugal, Great Britan, and Spain. (Both Hotels are located in Portugal) ","60897539":"<B> Where are majority of the guests from ? <B\/>","be840018":"<h1> Recommendations and Considerations <\/h1>","15ade396":"<h1> Exploratory Data Analysis <\/h1>","1aecf279":"This graph shows that transient type customers generate the highest average daily rate. ","fd816201":"<b> How long are people staying at the Hotels? <\/b>","bece667c":"The cancelations are highest in the summer months for both types of hotels, and these months are also the lowest guest volume for both hotels. In general, City hotel sees more ccancelations than resort hotels do.","446ab84f":"<b>What does the distribution of Average Daily Rates look like <b\/>","ca58042e":"load CSV file  and check to ensure that data has loaded correctly ","8f53afcc":"<b> Revenue <b\/>","42fd1a92":"wiewing the data we can see that there are some particular outliers in the data that we can presume are entry errors and are nonsensical. these few outliers will be removed from the dataset ","37fcb532":"<b>Which room types demands the highest Average Daily Rate?<b\/>","843022d0":"<b>How does number of special requests influence ADR costs?<b\/>","65576f14":"Removing data that has values of 0 for ADR and status of no-show for reseveration status. no revenue was obtained and the persons did not stay so it is a poor data point.","5f0cd339":"The there are several columns where values are not in a format that is appropriate for exploritory anaylsis. To correct this we will have to replace the NaN values or drop unneeded columns (setting the children NaN to 0, setting the agent NaN to 0 indicating no agent, and setting country to unknown because that information is not avaiable). The meal column has a description from the input csv that indicates the mealtype \"undefined\" is interchangable with \"SC\"(which both signify no meal), consindering the other meal types in the dataset are BB and HB we will convert the undefined into SC for clarity sake.\n\nNOTE: there are some variables that have been anonmyized for privacy sake.","197ed31a":"The highest generating revenue room types are 'G' and 'H' for both resort and city hotel.","18e57a76":"The months August and July show an additional record that can skew analysis. For all analysis invovling this feature we will normalize the data","2ee0f425":"<b> How does assinged room type influence total revenue from a guest over length of stay? <b\/>","b60f9493":"<b> How does length of stay influnce ADR <b\/>","bc4e590b":"<b> Summary\n\nThe major questions answered in this EDA are as follows: \n<ul>\n  <li>Distribution of guests in relation to both Hotels<\/li>\n  <li>What factors influence the Average Daily Rate (ADR)<\/li>\n  <li>Length of stay for guests<\/li>\n<\/ul>\n    This dataset examines the differences between two Resort and City hotels based in Portugal over a period of time from July 15 2015 to August 31st 2017\n  \n    ","7e4b3096":"We see here that just over one third of our entries resulted in cancellations. For the EDA it is important to remove these features when analysing factors with a strong relationship to cancelations as they can heavily skew the  analysis(although for some features in the data it will not have a large impact).","f51b9aae":"The vast majority of people stay under 10 days at both types of hotels "}}