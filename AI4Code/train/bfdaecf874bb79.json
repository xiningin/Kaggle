{"cell_type":{"2e413091":"code","ee09e918":"code","a45aa8af":"code","38ab0c3c":"code","f10c8395":"code","90bf9981":"code","e7022fce":"code","8383fff8":"code","d6639398":"code","015a30b2":"markdown","5d80228b":"markdown","367c09df":"markdown","0024d1eb":"markdown"},"source":{"2e413091":"import os\nimport pandas as pd\nimport nibabel as nib\nimport matplotlib.pyplot as plt","ee09e918":"images1 = '\/kaggle\/input\/liversegtrainimages1'\ntrain_images = [os.path.join(images1, image_name) for image_name in os.listdir(images1) if image_name.endswith('.nii')]","a45aa8af":"images2 = '\/kaggle\/input\/liversegtrainimages2'\ntrain_images += [os.path.join(images2, image_name) for image_name in os.listdir(images2) if image_name.endswith('.nii')]","38ab0c3c":"labels = '\/kaggle\/input\/liversegtrainlabels'\ntrain_labels = [os.path.join(labels, image_name) for image_name in os.listdir(labels) if image_name.endswith('.nii')]","f10c8395":"train_images = sorted(train_images, key=lambda path: path.split('\/')[-1])","90bf9981":"train_labels = sorted(train_labels, key=lambda path: path.split('\/')[-1])","e7022fce":"train_df = pd.DataFrame({\n    'image_path': train_images,\n    'label_path': train_labels\n})","8383fff8":"img = nib.load(train_df.iloc[0].image_path).get_fdata()\nlabel = nib.load(train_df.iloc[0].label_path).get_fdata()","d6639398":"%matplotlib notebook\nfrom matplotlib.colors import from_levels_and_colors\nfig, ax = plt.subplots(1,1)\nfig.set_figheight(8)\nfig.set_figwidth(8)\ncurr_slice = 0\nmy_cmap, _ = from_levels_and_colors(levels=[0, 1, 2], colors=[[0., 0., 0., 0.],  [0., 1., 0., 1], [0.8, 0., 0.8, 1]], extend='max')\nim1 = ax.imshow(img[:, :, curr_slice], cmap='gray')\nim2 = ax.imshow(label[:, :, curr_slice].astype('int'), cmap=my_cmap, vmin=0., vmax=1.)\ntext = plt.text(img.shape[1] \/\/ 2 - 50, 0, \"Slice 1\", va=\"bottom\", ha=\"left\", fontsize=20)\ndef change_slice(e):\n    global curr_slice\n    global im\n    global fig\n    global img\n    if e.key == 'right' and curr_slice < img.shape[2]:\n        curr_slice += 1\n    if e.key == 'left' and curr_slice > 0:\n        curr_slice -= 1\n    text.set_text('Slice {}'.format(curr_slice+1))\n    im1.set_data(img[:, :, curr_slice])\n    im2.set_data(label[:, :, curr_slice].astype('int'))\n    fig.canvas.draw()\n        \na = fig.canvas.mpl_connect('key_press_event', change_slice)","015a30b2":"Making a dataframe of images and corresponding labels.","5d80228b":"<h3>Visualizing Series<\/h3>","367c09df":"The image labels are in 2 datasets liversegtrainimages1 and liversegtrainimages2, we shall concatenate them.","0024d1eb":"Use Arrow keys to change slice"}}