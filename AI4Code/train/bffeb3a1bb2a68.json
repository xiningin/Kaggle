{"cell_type":{"5d277058":"code","8518565e":"code","9511ebf6":"code","922874e7":"code","5d292131":"code","0b1f3251":"code","74e89538":"code","65eb5420":"code","032b0589":"code","a6d7fe52":"code","98128d83":"code","c23833a9":"code","b4995290":"code","58befa99":"code","ffb77853":"code","d1c32801":"code","27441028":"markdown","e9cdc36d":"markdown","29ce0db7":"markdown","226af85c":"markdown","eea67c98":"markdown","814a5ad7":"markdown","7fa6b881":"markdown","2165784c":"markdown","0feff1fe":"markdown","86ff08cd":"markdown","499aea6b":"markdown","c1fe51e9":"markdown","c5352110":"markdown","f447062e":"markdown","d5913b34":"markdown","d56db6b2":"markdown","c72f217a":"markdown","9e095c2b":"markdown","c40ed31c":"markdown","cd9a695e":"markdown","a8b5f212":"markdown","dda00f50":"markdown","ff8d1665":"markdown","0215fe0c":"markdown","dc4278de":"markdown","eb738ff7":"markdown","b71771d4":"markdown","8aa3630a":"markdown","6bc91d0e":"markdown","94f55a6f":"markdown","cbcc110c":"markdown","baca9475":"markdown","e41d8847":"markdown","cb5efa7c":"markdown","ae48b20e":"markdown"},"source":{"5d277058":"import numpy as np\nimport pandas as pd \nimport matplotlib.pyplot as plt\n%matplotlib inline\nimport seaborn as sns\nplt.style.use('seaborn')","8518565e":"Crime1 = pd.read_csv('..\/input\/Chicago_Crimes_2005_to_2007.csv',error_bad_lines=False)\nCrime2 = pd.read_csv('..\/input\/Chicago_Crimes_2008_to_2011.csv',error_bad_lines=False)\nCrime3 = pd.read_csv('..\/input\/Chicago_Crimes_2012_to_2017.csv',error_bad_lines=False)\n\nCrimes = pd.concat([Crime1, Crime2, Crime3], ignore_index=False, axis=0)\n\ndel Crime1\ndel Crime2\ndel Crime3\n\nprint('Dataset ready..')\n\nprint('Dataset Shape before drop_duplicate : ', Crimes.shape)\nCrimes.drop_duplicates(subset=['ID', 'Case Number'], inplace=True)\nprint('Dataset Shape after drop_duplicate: ', Crimes.shape)","9511ebf6":"Crimes.drop(['Unnamed: 0', 'Case Number', 'IUCR','Updated On','Year', 'FBI Code', 'Beat','Ward','Community Area', 'Location'], inplace=True, axis=1)","922874e7":"#Let's have a look at the first 5 rows of the dataframe 'Crimes'\n\nCrimes.head(5)","5d292131":"# converting dates to pandas datetime format\nCrimes.Date = pd.to_datetime(Crimes.Date, format='%m\/%d\/%Y %I:%M:%S %p')\n\n\n# setting the index to be the date will help us a lot later on\nCrimes.index = pd.DatetimeIndex(Crimes.Date)","0b1f3251":"Crimes.shape","74e89538":"Crimes.info()","65eb5420":"loc_to_change  = list(Crimes['Location Description'].value_counts()[20:].index)\ndesc_to_change = list(Crimes['Description'].value_counts()[20:].index)\ntype_to_change = list(Crimes['Primary Type'].value_counts()[20:].index)\n\nCrimes.loc[Crimes['Location Description'].isin(loc_to_change) , Crimes.columns=='Location Description'] = 'OTHER'\nCrimes.loc[Crimes['Description'].isin(desc_to_change) , Crimes.columns=='Description'] = 'OTHER'\nCrimes.loc[Crimes['Primary Type'].isin(type_to_change) , Crimes.columns=='Primary Type'] = 'OTHER'","032b0589":"Crimes['Primary Type']         = pd.Categorical(Crimes['Primary Type'])\nCrimes['Location Description'] = pd.Categorical(Crimes['Location Description'])\nCrimes['Description']          = pd.Categorical(Crimes['Description'])","a6d7fe52":"plt.figure(figsize=(11,5))\nCrimes.resample('M').size().plot(legend = False)\nplt.title('Number of Crimes per month (2005 - 2016)')\nplt.xlabel('Months')\nplt.ylabel('Number of Crimes')\nplt.show()","98128d83":"plt.figure(figsize=(11,6))\nCrimes.resample('D').size().rolling(365).sum().plot()\nplt.title('Rolling sum of all Crimes from 2005 - 2016')\nplt.ylabel('Number of Crimes')\nplt.xlabel('Days')\nplt.show()","c23833a9":"Crimes_count_date = Crimes.pivot_table('ID', aggfunc=np.size, columns='Primary Type', index=Crimes.index.date, fill_value=0)\nCrimes_count_date.index = pd.DatetimeIndex(Crimes_count_date.index)\nplo = Crimes_count_date.rolling(365).sum().plot(figsize=(12, 30), subplots=True, layout=(-1, 3), sharex=False, sharey=False)","b4995290":"days = ['Monday','Tuesday','Wednesday', 'Thursday', 'Friday', 'Saturday', 'Sunday']\nCrimes.groupby([Crimes.index.dayofweek]).size().plot(kind='barh')\nplt.ylabel('Days of the week')\nplt.yticks(np.arange(7), days)\nplt.xlabel('Number of Crimes')\nplt.title('Number of Crimes by day of the week')\nplt.show()","58befa99":"Crimes.groupby([Crimes.index.month]).size().plot(kind='barh')\nplt.ylabel('Months of the year')\nplt.xlabel('Number of Crimes')\nplt.title('Number of Crimes by month of the year')\nplt.show()","ffb77853":"plt.figure(figsize=(8,10))\nCrimes.groupby([Crimes['Primary Type']]).size().sort_values(ascending=True).plot(kind='barh')\nplt.title('Number of Crimes by type')\nplt.ylabel('Crime Type')\nplt.xlabel('Number of Crimes')\nplt.show()","d1c32801":"plt.figure(figsize=(8,10))\nCrimes.groupby([Crimes['Location Description']]).size().sort_values(ascending=True).plot(kind='barh')\nplt.title('Number of Crimes by Location')\nplt.ylabel('Crime Location')\nplt.xlabel('Number of Crimes')\nplt.show()","27441028":"Converting those columns in 'Categorical' data type","e9cdc36d":"Now we're ready to go for Data Exploration","29ce0db7":"Before we go further and explore other features, the first question that arises is that <b>How crime has changed over the years? is it decreasing? <\/b> \nLet's have a look of what we have from 2005-2016\n\nIn a previous chart, we looked at the number of weekly crime records. Although it didn't give the clear idea about how crimes have changed over the years, it still gives somehow similar numbers between 2015 and 2016. Here, we will take a finer scale to get the visualization right. I decided to look at the rolling sum of crimes of the past year. The idea is, for each day, we calculate the sum of crimes of the past year. If this rolling sum is decreasing, then we know for sure that crime rates have been decreasing during that year. On the other hand, if the rolling sum stays the same during a given year, then we can conclude that crime rates stayed the same.","226af85c":"In this part we'll see how crimes differ between different places at different times\n\nThe first thing we are going to look at is if there is a difference in the number of crimes during specific days of the week. Are there more crimes during weekdays or weekend?","eea67c98":"And similarly for Crime Location","814a5ad7":"## A general view of crime records by time, type and location","7fa6b881":"As 'Location Description', 'Description' and 'Primary Type' columns are Categorical columns (or factors in R), we will keep the most frequent categories and then cast them to a categorical data type.","2165784c":"This chart clearly shows a \"periodic\" pattern in the crimes over many years, which shows why crimes are very predictable activity.\n","0feff1fe":"Importing Datasets from 2005-2017 and joining them in a single data","86ff08cd":"Checking the data type of each columns and rows in the Dataframe","499aea6b":"Great, Since we are dealing with dates, we need to convert the 'Date' column into a date format that can be interpret by Python (and pandas).","c1fe51e9":"Crime in Chicago is a very interesting topic for exploration for all kinds of reasons. Another reason is the availability of huge amounts of publicly available (high quality) crime datasets open for data scientists to mine and investigates such as this one.","c5352110":"<p  p>\n    \n\nThis is My first ever Notebook created by me and ofcourse by taking some help from other sources.\\\n    \n    An upvote would be much appreciated.\n    \nThanks for Reading !!","f447062e":"Checking the No. of records (i.e, the no. of rows) and Features for each records (i.e, the no. of columns)","d5913b34":"Importing required Data Science libraries and modules for EDA  Analysis | In this analysis i'll explore the 2005-2016 Crimes data","d56db6b2":"At first i started to wonder how the crime trend was decreasing but is not the case. Some crime of particular types are actually increasing all along like interference with public officer and deceptive practice. Other types started to increase slightly before 2016 like theft, robbery and stalking (which may be the reason behind the trend we saw earlier).","c72f217a":"Let's begin by some general queries like - how many records we have for each month ?","9e095c2b":"Analyzing Crimes in Chicago ","c40ed31c":"<p  p>","cd9a695e":"From the first few rowswe can see that, we have several columns that will help us answer our questions. We will use the 'Date' column to explore temporal patterns, 'Primary Type' and 'Location Description' to investigate their relationship with time (month of the year, time of the day, hour of the day, .. etc).","a8b5f212":"## Data Cleaning and Formatting","dda00f50":"<p p>\nNow Let's look at crimes per month and see if certain months show more crimes than others.","ff8d1665":"Filtering the Data out by dropping those columns which would not be of use for analysis","0215fe0c":"In this notebook, I am going to explore more about crime in Chicago and try to find answers to few questions:\n\nHow has crime in Chicago changed across years? Was 2016 really the bloodiest year in two decades?\nAre some types of crimes more likely to happen in specific locations or specific time of the day or specific day of the week than other types of crimes?","dc4278de":"Let's seperate the Crimes and see what is the actual rate of Crime in a particular type","eb738ff7":"<p p>","b71771d4":"<p p>\nCrimes rate seems to be at peak in summer time","8aa3630a":"## EDA of Crimes in Chicago 2005-2016 with Python","6bc91d0e":"<p \n   p >","94f55a6f":"#### A Quick introduction\n","cbcc110c":"We see the line decreasing from 2006 up to some point around 2016 after which it stays around the same number of crimes. This all means that 2016 is really no better than 2015, but both years show a much better crime record (in total) than the previous years. ","baca9475":"<p  p>","e41d8847":"At this point, I think we are done with all the Data preprocessing and cleaning. Now it is time to see what we got. In this section, I will make use of many of pandas functionality like resampling by a time frame and pivot_table etc.","cb5efa7c":"Let's have a look at the distribution of crime by their types, which crimes are most common among the top 20 most frequent crime types ?","ae48b20e":"## Data Exploration and Visualization"}}