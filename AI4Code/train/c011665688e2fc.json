{"cell_type":{"1fb48e9d":"code","8aba3594":"code","2ddea73f":"code","5bc04f0c":"code","0f83a4f3":"code","23b2edc8":"code","53475c4d":"code","954fc402":"code","03b39696":"code","2a8932a0":"code","079fa2ee":"code","ed0ecc60":"code","36e59fe6":"code","03c5a8ad":"code","3d2d4c7e":"markdown","f536a080":"markdown","2d2564fc":"markdown","46734ddc":"markdown","637d3f6a":"markdown","a5b6eb6c":"markdown","28334c73":"markdown","61d6542f":"markdown","4eee74f4":"markdown","d7878419":"markdown","20f42902":"markdown"},"source":{"1fb48e9d":"import librosa\nimport soundfile as sf\nimport scipy.signal as signal\nimport matplotlib.pyplot as plt\nimport numpy as np\nimport pandas as pd\nfrom librosa import display as ld\nfrom matplotlib.patches import Rectangle","8aba3594":"data_dir = '\/kaggle\/input\/rfcx-species-audio-detection\/'\n\ndf_t = pd.read_csv(data_dir+'train_tp.csv')\ndf_t[\"t_dif\"] = df_t[\"t_max\"] - df_t[\"t_min\"]\ndf_t[\"f_dif\"] = df_t[\"f_max\"] - df_t[\"f_min\"]\n\ndf_f = pd.read_csv(data_dir+'train_fp.csv')\ndf_f[\"t_dif\"] = df_f[\"t_max\"] - df_f[\"t_min\"]\ndf_f[\"f_dif\"] = df_f[\"f_max\"] - df_f[\"f_min\"]\n\ndf_t.head()","2ddea73f":"example = df_t.iloc[0]\ndata, samplerate = sf.read(data_dir+'train\/'+example.recording_id+'.flac')","5bc04f0c":"import IPython.display as ipd\nipd.Audio(data,rate=samplerate)","0f83a4f3":"times = np.linspace(0,len(data),len(data))\/samplerate\nplt.figure(figsize=(30, 10))\nplt.plot(times,data)\nplt.show()","23b2edc8":"plt.figure(figsize=(30, 10))\nPxx, freqs, bins, im = plt.specgram(data, Fs=samplerate)\n\nplt.ylabel('Frequency [Hz]')\nplt.xlabel('Time [sec]')\n# Add the audio position\nax = plt.gca()\naudio_position = Rectangle((example['t_min'],example['f_min']),example['t_dif'],example['f_dif'],linewidth=3,edgecolor='g',facecolor='none')\nax.add_patch(audio_position)\n\nplt.colorbar()\nplt.show()","53475c4d":"sftf = librosa.stft(data)\n\nplt.figure(figsize=(30, 10))\nld.specshow(sftf, sr=samplerate, x_axis='time', y_axis='hz')\n\n# Add the audio position\nax = plt.gca()\naudio_position = Rectangle((example['t_min'],example['f_min']),example['t_dif'],example['f_dif'],linewidth=3,edgecolor='g',facecolor='none')\nax.add_patch(audio_position)\n\nplt.colorbar()\nplt.show()","954fc402":"sftf = librosa.stft(data)\nsftf_xdb = librosa.amplitude_to_db(abs(sftf))\n\nplt.figure(figsize=(30, 10))\nld.specshow(sftf_xdb, sr=samplerate, x_axis='time', y_axis='hz')\n\n# Add the audio position\nax = plt.gca()\naudio_position = Rectangle((example['t_min'],example['f_min']),example['t_dif'],example['f_dif'],linewidth=3,edgecolor='g',facecolor='none')\nax.add_patch(audio_position)\n\nplt.colorbar()\nplt.show()","03b39696":"melspec = librosa.feature.melspectrogram(data, sr=samplerate)\n\nplt.figure(figsize=(30, 10))\nld.specshow(melspec, sr=samplerate, x_axis='time', y_axis='hz')\n\n# Add the audio position\nax = plt.gca()\naudio_position = Rectangle((example['t_min'],example['f_min']),example['t_dif'],example['f_dif'],linewidth=3,edgecolor='g',facecolor='none')\nax.add_patch(audio_position)\nplt.colorbar()\n\nplt.show()\n","2a8932a0":"melspec = librosa.feature.melspectrogram(data, sr=samplerate)\nmelspec_xdb = librosa.amplitude_to_db(abs(melspec))\n\nplt.figure(figsize=(30, 10))\nld.specshow(melspec_xdb, sr=samplerate, x_axis='time', y_axis='hz')\n\n# Add the audio position\nax = plt.gca()\naudio_position = Rectangle((example['t_min'],example['f_min']),example['t_dif'],example['f_dif'],linewidth=3,edgecolor='g',facecolor='none')\nax.add_patch(audio_position)\nplt.colorbar()\n\nplt.show()","079fa2ee":"mfcc = librosa.feature.mfcc(data, sr=samplerate)\n\nplt.figure(figsize=(30, 10))\nld.specshow(mfcc, sr=samplerate, x_axis='time', y_axis='hz')\n\n# Add the audio position\nax = plt.gca()\naudio_position = Rectangle((example['t_min'],example['f_min']),example['t_dif'],example['f_dif'],linewidth=3,edgecolor='g',facecolor='none')\nax.add_patch(audio_position)\nplt.colorbar()\n\nplt.show()","ed0ecc60":"mfcc = librosa.feature.mfcc(data, sr=samplerate)\nmfcc_xdb = librosa.amplitude_to_db(abs(mfcc))\n\nplt.figure(figsize=(30, 10))\nld.specshow(mfcc_xdb, sr=samplerate, x_axis='time', y_axis='hz')\n\n# Add the audio position\nax = plt.gca()\naudio_position = Rectangle((example['t_min'],example['f_min']),example['t_dif'],example['f_dif'],linewidth=3,edgecolor='g',facecolor='none')\nax.add_patch(audio_position)\nplt.colorbar()\n\nplt.show()","36e59fe6":"chroma = librosa.feature.chroma_stft(data, sr=samplerate)\n\nplt.figure(figsize=(30, 10))\nld.specshow(chroma, sr=samplerate, x_axis='time', y_axis='hz')\n\n# Add the audio position\nax = plt.gca()\naudio_position = Rectangle((example['t_min'],example['f_min']),example['t_dif'],example['f_dif'],linewidth=3,edgecolor='g',facecolor='none')\nax.add_patch(audio_position)\nplt.colorbar()\n\nplt.show()","03c5a8ad":"chroma = librosa.feature.chroma_stft(data, sr=samplerate)\nchroma_xdb = librosa.amplitude_to_db(abs(chroma))\n\nplt.figure(figsize=(30, 10))\nld.specshow(chroma_xdb, sr=samplerate, x_axis='time', y_axis='hz')\n\n# Add the audio position\nax = plt.gca()\naudio_position = Rectangle((example['t_min'],example['f_min']),example['t_dif'],example['f_dif'],linewidth=3,edgecolor='g',facecolor='none')\nax.add_patch(audio_position)\nplt.colorbar()\n\nplt.show()","3d2d4c7e":"### Get example","f536a080":"# MFCC","2d2564fc":"### Audio sound","46734ddc":"# CHROMA_STFT","637d3f6a":"# SFTF (amplitude_to_db)","a5b6eb6c":"# MEL SPECTOGRAM (amplitude_to_db)","28334c73":"# MFCC (amplitude_to_db)","61d6542f":"# MEL SPECTOGRAM","4eee74f4":"# SPECTOGRAM","d7878419":"# SFTF","20f42902":"# CHROMA_STFT (amplitude_to_db)"}}