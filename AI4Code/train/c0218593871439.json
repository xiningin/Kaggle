{"cell_type":{"c6a707c1":"code","5991455c":"code","d1d53222":"code","6cfb8302":"code","72953776":"code","635abe4f":"code","595bafe3":"code","4f6bfd6d":"code","a9c15837":"code","d7e5ddc9":"code","7c596882":"code","19499f6b":"code","d3e69ce9":"code","c050872e":"code","faa8e528":"code","07daa67d":"code","404de19f":"code","4ce77f7c":"code","00985eee":"code","f4cd6398":"code","1de022f8":"code","1721ba5b":"code","5be7fa04":"code","d5a14217":"code","eba425b7":"code","afebdba4":"code","2f0a2bb8":"code","509a382b":"code","3f3c42f9":"code","7b02f867":"code","35b7ebc9":"code","809f7654":"code","519e54bf":"code","126cfa24":"markdown","feb281e6":"markdown","3802f89d":"markdown","6e149f6a":"markdown","5b923a3f":"markdown","cbf3905c":"markdown","74b4e4ce":"markdown","98091c20":"markdown","b346c174":"markdown","54b05092":"markdown","34542ba3":"markdown","4b9098ba":"markdown","41b0f8f9":"markdown","76599496":"markdown","9e104553":"markdown","99e2edcf":"markdown","f25e8e23":"markdown","375e800c":"markdown","bb150982":"markdown","904d677b":"markdown","7edb6025":"markdown"},"source":{"c6a707c1":"import numpy as np\nimport pandas as pd \nimport os\nimport matplotlib.pyplot as plt\nimport seaborn as sns\nfrom sklearn.tree import DecisionTreeClassifier\nfrom sklearn.model_selection import train_test_split\nfrom sklearn import metrics","5991455c":"df = pd.read_csv('\/kaggle\/input\/ibm-hr-analytics-employee-attrition-performance\/WA_Fn-UseC_-HR-Employee-Attrition.csv')\ndf.head()","d1d53222":"df.describe()","6cfb8302":"df.info()","72953776":"df = df.drop(['EmployeeCount', 'Over18', 'StandardHours'], axis = 1)\ndf.head()","635abe4f":"df.tail()","595bafe3":"sns.set(style=\"darkgrid\")\nsns.set(rc={\"figure.figsize\":(15, 8)})\nax = sns.countplot(x='Age', hue=\"Attrition\", data=df)\nplt.title('Attrition Distribution by Age', fontsize=24)\nplt.xlabel('Age', fontsize=18)\nplt.show()","4f6bfd6d":"sns.set(style=\"darkgrid\")\nsns.set(rc={\"figure.figsize\":(15, 8)})\nax = sns.countplot(x='BusinessTravel', hue=\"Attrition\", data=df)\nplt.title('Attrition Distribution by Business Travel Frequency', fontsize=24)\nplt.xlabel('Business Travel', fontsize=18)\nplt.show()","a9c15837":"sns.set(style=\"darkgrid\")\nsns.set(rc={\"figure.figsize\":(15, 8)})\nax = sns.countplot(x='Gender', hue=\"Attrition\", data=df)\nplt.title('Attrition Distribution by Gender', fontsize=24)\nplt.xlabel('Gender', fontsize=18)\nplt.show()","d7e5ddc9":"sns.set(style=\"darkgrid\")\nsns.set(rc={\"figure.figsize\":(15, 8)})\nax = sns.countplot(x='EnvironmentSatisfaction', hue=\"Attrition\", data=df)\nplt.title('Attrition Distribution by Environment Satisfaction', fontsize=24)\nplt.xlabel('Environment Satisfaction', fontsize=18)\nplt.show()","7c596882":"sns.set(style=\"darkgrid\")\nsns.set(rc={\"figure.figsize\":(15, 8)})\nax = sns.countplot(x='Department', hue=\"Attrition\", data=df)\nplt.title('Attrition Distribution by Department', fontsize=24)\nplt.xlabel('Department', fontsize=18)\nplt.show()","19499f6b":"sns.set(style=\"darkgrid\")\nsns.set(rc={\"figure.figsize\":(15, 8)})\nax = sns.countplot(x='JobInvolvement', hue=\"Attrition\", data=df)\nplt.title('Attrition Distribution by Job Involvement', fontsize=24)\nplt.xlabel('Job Involvement', fontsize=18)\nplt.show()","d3e69ce9":"sns.set(style=\"darkgrid\")\nsns.set(rc={\"figure.figsize\":(15, 8)})\nax = sns.countplot(x='PerformanceRating', hue=\"Attrition\", data=df)\nplt.title('Attrition Distribution by Performance Rating', fontsize=24)\nplt.xlabel('Performance Rating', fontsize=18)\nplt.show()","c050872e":"fig,ax = plt.subplots(figsize=(15,7))\nstockoption_group = df.groupby(['StockOptionLevel','Attrition']).size().reset_index(name='number')\nstockoption_group = stockoption_group.pivot(columns='Attrition', index='StockOptionLevel', values = 'number')\nstockoption_group.plot.bar(ax=ax, color=['orange', 'green'])\nplt.xticks(rotation=0)\nplt.title('Attrition Distribution by Stock Option Level', fontsize=20)\nplt.xlabel('Stock Option Level', fontsize=16)\nplt.show() ","faa8e528":"fig,ax = plt.subplots(figsize=(15,7))\nworking_years_group = df.groupby(['TotalWorkingYears','Attrition']).size().reset_index(name='number')\nworking_years_group = working_years_group.pivot(columns='Attrition', index='TotalWorkingYears', values = 'number')\nworking_years_group.plot.bar(ax=ax, color=['orange', 'green'])\nplt.xticks(rotation=0)\nplt.title('Attrition Distribution by Total Working Years', fontsize=20)\nplt.xlabel('Total Working Years', fontsize=16)\nplt.show() ","07daa67d":"fig,ax = plt.subplots(figsize=(15,7))\ntraining_times_group = df.groupby(['TrainingTimesLastYear','Attrition']).size().reset_index(name='number')\ntraining_times_group = training_times_group.pivot(columns='Attrition', index='TrainingTimesLastYear', values = 'number')\ntraining_times_group.plot.bar(ax=ax, color=['orange', 'green'])\nplt.xticks(rotation=0)\nplt.title('Attrition Distribution by Training Times Last Year', fontsize=20)\nplt.xlabel('Training Times Last Year', fontsize=16)\nplt.show() ","404de19f":"fig,ax = plt.subplots(figsize=(15,7))\nwork_life_balance = df.groupby(['WorkLifeBalance','Attrition']).size().reset_index(name='number')\nwork_life_balance = work_life_balance.pivot(columns='Attrition', index='WorkLifeBalance', values = 'number')\nwork_life_balance.plot.bar(ax=ax, color=['orange', 'green'])\nplt.xticks(rotation=0)\nplt.title('Attrition Distribution by Work-Life Balance', fontsize=20)\nplt.xlabel('Work-Life Balance', fontsize=16)\nplt.show() ","4ce77f7c":"fig,ax = plt.subplots(figsize=(15,7))\njob_role = df.groupby(['JobRole','Attrition']).size().reset_index(name='number')\njob_role = job_role.pivot(columns='Attrition', index='JobRole', values = 'number')\njob_role.plot.bar(ax=ax, color=['orange', 'green'])\nplt.xticks(rotation=45)\nplt.title('Attrition Distribution by Job Role', fontsize=20)\nplt.xlabel('Job Role', fontsize=16)\nplt.show() ","00985eee":"fig,ax = plt.subplots(figsize=(15,7))\nmarital_status = df.groupby(['MaritalStatus','Attrition']).size().reset_index(name='number')\nmarital_status = marital_status.pivot(columns='Attrition', index='MaritalStatus', values = 'number')\nmarital_status.plot.bar(ax=ax, color=['orange', 'green'])\nplt.xticks(rotation=0)\nplt.title('Attrition Distribution by Marital Status', fontsize=20)\nplt.xlabel('Marital Status', fontsize=16)\nplt.show() ","f4cd6398":"df_2 = df.copy()\ndf_2['Attrition'] = df_2['Attrition'].apply(lambda x: 0 if x=='No' else 1)\ndf_2['Gender'] = df_2['Gender'].apply(lambda x: 0 if x=='Male' else 1)\ndf_2['OverTime'] = df_2['OverTime'].apply(lambda x: 0 if x=='No' else 1)\n\nBusinessTravel_map = {'Non-Travel':0, 'Travel_Rarely':1, 'Travel_Frequently':2}\ndf_2['BusinessTravel'] = df_2['BusinessTravel'].map(BusinessTravel_map)\n\nMaritalStatus_map = {'Single':0, 'Divorced':1, 'Married':2}\ndf_2['MaritalStatus'] = df_2['MaritalStatus'].map(MaritalStatus_map)\n\nEducationField_map = {'Other':0, 'Life Sciences':1, 'Medical':2, 'Marketing':3, 'Technical Degree':4,\n                     'Human Resources':5}\ndf_2['EducationField'] = df_2['EducationField'].map(EducationField_map)\n\nJobRole_map = {'Sales Executive':0,'Sales Representative':1,'Laboratory Technician':2,'Manufacturing Director':3,\n              'Healthcare Representative':4,'Manager':5,'Research Scientist':6,'Research Director':7,'Human Resources':8}\ndf_2['JobRole'] = df_2['JobRole'].map(JobRole_map)\n\nDepartment_map = {'Sales':0, 'Research & Development':1, 'Human Resources':2}\ndf_2['Department'] = df_2['Department'].map(Department_map)\ndf_2.info()","1de022f8":"plt.figure(figsize=(30,15))\ncorrelation = sns.heatmap(df_2.corr(), vmin=-1, vmax=1, annot=True, linewidths=1)\ncorrelation.set_title('Correlation Graph', fontdict={'fontsize': 24})","1721ba5b":"X = df_2.drop('Attrition', axis = 1)\ny = df_2['Attrition']\nfrom sklearn.model_selection import train_test_split\nX_train, X_test, y_train, y_test = train_test_split(X,y,test_size=0.3)","5be7fa04":"from sklearn.ensemble import RandomForestClassifier\nclf=RandomForestClassifier(n_estimators=100, max_depth=3)\nclf.fit(X_train,y_train)\ny_pred=clf.predict(X_test)","d5a14217":"from sklearn import metrics\nprint(\"Accuracy:\",metrics.accuracy_score(y_test, y_pred))","eba425b7":"result = pd.DataFrame({'Actual': y_test, 'Predicted': y_pred})\nresult","afebdba4":"feature_imp = pd.Series(clf.feature_importances_,index=X.columns).sort_values(ascending=False)\nfeature_imp","2f0a2bb8":"sns.barplot(x=feature_imp, y=feature_imp.index)\nsns.set(rc={\"figure.figsize\": (20,15)})\nplt.xlabel('Feature Importance Score')\nplt.ylabel('Features')\nplt.title(\"Visualizing Important Features\")\nplt.legend()\nplt.show()","509a382b":"X = df_2.drop('Attrition', axis = 1)\ny = df_2['Attrition']\nfrom sklearn.model_selection import train_test_split\nX_train, X_test, y_train, y_test = train_test_split(X,y,test_size=0.3,random_state=0)","3f3c42f9":"from sklearn.linear_model import LogisticRegression\nlogreg = LogisticRegression(solver='liblinear')","7b02f867":"logreg.fit(X_train, y_train)\ny_pred = logreg.predict(X_test)","35b7ebc9":"result_2 = pd.DataFrame({'Actual': y_test, 'Predicted': y_pred})\nresult_2","809f7654":"print(\"Accuracy:\",metrics.accuracy_score(y_test, y_pred))\nprint(\"Precision:\",metrics.precision_score(y_test, y_pred))\nprint(\"Recall:\",metrics.recall_score(y_test, y_pred))","519e54bf":"y_pred_proba = logreg.predict_proba(X_test)[::,1]\nfpr, tpr, _ = metrics.roc_curve(y_test, y_pred_proba)\nauc = metrics.roc_auc_score(y_test, y_pred_proba)\nplt.plot(fpr,tpr,label=\"data 1, auc=\"+str(auc))\nplt.legend(loc=4)\nplt.show()","126cfa24":"# **Load data and inspection**","feb281e6":"# **Use Random Forest Classifier for Prediction**","3802f89d":"# **Plot the Feature Importance Score**","6e149f6a":"The age under 22 employees are more likely to leave, followed by the age group between 22 and 29. After 30, employees' attrition rate goes down.","5b923a3f":"Sales Representatives have the highest attrition rate among all job roles in the company, followed by Laboratory Technicians.","cbf3905c":"No significant difference shows between attrition rates of different genders. ","74b4e4ce":"No significant difference shows between attrition rates of different performance ratings. ","98091c20":"The employees who worked for less than two years have the highest attrition rate (almost 50%), followed by those who worked for 2 to 7 years.","b346c174":"# **Import Libraries**","54b05092":"# **Preprocessing**","34542ba3":"The most important features that affect the attrition rate are monthly income, over time, and total working year.","4b9098ba":"The employees who have the lowest satisfaction with the working environment are more likely to leave the company.","41b0f8f9":"# **Use Logistic Regression for Prediction**","76599496":"The lower the job involvement, the higher the attrition rate.","9e104553":"# **Data Visualization**","99e2edcf":"# **Now prepare the dataset for heatmap**","f25e8e23":"Sales Department has the highest attrition rate.","375e800c":"The employees who travel frequently have a higher possibility to leave.","bb150982":"Medium work-life balance brings down the attrition rate.","904d677b":"The single employees are more likely to leave.","7edb6025":"The employees without a stock option have the highest attrition rate, followed by those with the highest stock-option level.   "}}