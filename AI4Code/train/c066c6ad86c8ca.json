{"cell_type":{"622035f3":"code","01146f37":"code","83573531":"code","fc5ccfa1":"code","54787551":"code","ab6f1865":"code","0a0377f3":"code","37b5d099":"code","cc577534":"code","bebb7fd8":"code","6b4f7f41":"code","ed88c123":"code","97ae55a5":"code","979dbffe":"code","144759c7":"code","dea97174":"code","c8d50330":"code","5cb2589f":"code","63fb7753":"code","cc0a8bf2":"markdown","489a0f97":"markdown","b660027e":"markdown","5a5998cc":"markdown","a418f9b6":"markdown","a0818755":"markdown","7ad512e5":"markdown","b930fc20":"markdown"},"source":{"622035f3":"import pandas as pd\nimport numpy as np\nfrom pandas.api.types import is_string_dtype, is_numeric_dtype\nimport plotly.express as px","01146f37":"df = pd.read_csv('..\/input\/world-cities-average-internet-prices-2020\/cities_internet_prices.19-10-2021.csv')","83573531":"df.head()","fc5ccfa1":"df.shape","54787551":"df.isna().sum() \/ len(df) * 100","ab6f1865":"df.dtypes","0a0377f3":"# rename columns\ncols = ['city', 'region', 'country', 'internet_price']\ndf.columns = map(str.lower, cols)\n\nfor col in df:\n  if is_string_dtype:\n    df[col] = df[col].apply(lambda x: str(x).replace('\"', ''))\n\n\ndf['internet_price'] = df['internet_price'].astype('float64')\ndf['internet_price'] = round(df['internet_price'], ndigits=2)\n\ndf['region'] = df['region'].replace(\" \",  np.nan)","37b5d099":"df_city = df.nlargest(15, 'internet_price')","cc577534":"fig = px.bar(df_city, x='city', y='internet_price', color='country')\nfig.update_layout(title=\"15 cities with the most expensive internet average in the world\")\nfig.update_yaxes(title=\"average internet prices (USD)\")\nfig.show()","bebb7fd8":"df_city2 = df.nsmallest(15, 'internet_price')","6b4f7f41":"fig = px.bar(df_city2, x='city', y='internet_price', color='country')\nfig.update_layout(title=\"15 cities with the cheapest internet average in the world\")\nfig.update_yaxes(title=\"average internet prices (USD)\")\nfig.show()","ed88c123":"df_country = df.groupby('country', as_index=False)['internet_price'].mean()\ndf_country = pd.DataFrame(df_country)\naux1 = df_country.nlargest(20, 'internet_price')","97ae55a5":"fig = px.bar(aux1, x='country', y='internet_price')\nfig.update_layout(title=\"Countries with the most expensive average internet price in the world\")\nfig.update_yaxes(title=\"average internet prices (USD)\")\nfig.show()","979dbffe":"aux2 = df_country.nsmallest(20, 'internet_price')","144759c7":"fig = px.bar(aux2, x='country', y='internet_price')\nfig.update_layout(title=\"Countries with the cheapest average internet price in the world\")\nfig.update_yaxes(title=\"average internet prices (USD)\")\nfig.show()","dea97174":"from geopy.geocoders import Nominatim\n\ngeolocator = Nominatim(user_agent='my_email')\ndef get_latitude(country):\n    try:\n        # Geolocate the center of the country\n        loc = geolocator.geocode(country)\n        # And return latitude and longitude\n        return loc.latitude\n    except:\n        # Return missing value\n        return np.nan\n  \ndef getlongitude(country):\n    try:\n        # Geolocate the center of the country\n        loc = geolocator.geocode(country)\n        # And return latitude and longitude\n        return loc.longitude\n    except:\n        # Return missing value\n        return np.nan","c8d50330":"df_country['lat'] = df_country['country'].apply(lambda x: get_latitude(x))\ndf_country['lon'] = df_country['country'].apply(lambda x: getlongitude(x))","5cb2589f":"df_country.head()","63fb7753":"import plotly.express as px\n\nfig = px.scatter_geo(df_country, lat='lat', lon='lon', color=\"country\",\n                     hover_name=\"country\", size=\"internet_price\",\n                     projection=\"natural earth\")\nfig.show()","cc0a8bf2":"## **Countries with the cheapest average internet price in the world**","489a0f97":"## **FIND YOUR COUNTRY**","b660027e":"## **15 cities with the cheapest internet average in the world**","5a5998cc":"## **15 cities with the most expensive internet average in the world**","a418f9b6":"##**Countries with the most expensive average internet price in the world**","a0818755":"# **PREPROCESSSING**","7ad512e5":"## **MAP**","b930fc20":"#**EXPLORATORY DATA ANALYSIS**"}}