{"cell_type":{"9969b831":"code","0bf316b0":"code","7725a426":"code","257ca80a":"code","f6b5a75e":"code","22968811":"code","fd732e6c":"code","06eab87a":"code","cc4d268b":"code","1df36e78":"code","5b85f9ed":"code","25858c5c":"code","ea3ecf4b":"code","b94bc238":"markdown","b99e5c27":"markdown","ea33200b":"markdown","13fcb0d4":"markdown","20662b05":"markdown","0f6fb9df":"markdown","fcef4595":"markdown","8764f4ee":"markdown","b9e88c3e":"markdown","146bed6f":"markdown","5e009a76":"markdown"},"source":{"9969b831":"!pip install ecg-plot","0bf316b0":"# # wfdb.io.get_dbs()\n# wfdb.dl_database('vfdb', os.getcwd())","7725a426":"# import physionet_challenge_utility_script as pc\nimport ecg_plot\n\nimport numpy as np \nimport pandas as pd \nimport os\n\nimport matplotlib.pyplot as plt\nimport csv\nimport itertools\nimport collections\n\nimport pywt\nfrom scipy import stats\n\nfrom sklearn.utils import resample\nfrom sklearn.model_selection import train_test_split\n\nimport tensorflow.keras\nfrom tensorflow.keras.models import Sequential\nfrom tensorflow.keras.layers import Conv1D, AvgPool1D, Flatten, Dense, Dropout, Softmax\nfrom tensorflow.keras.optimizers import Adam \n# from tensorflow.keras.utils.np_utils import to_categorical\n# from tensorflow.keras.utils.vis_utils import plot_model\nfrom tensorflow.keras import regularizers\n\nimport wfdb\nfrom wfdb import processing\n\nfrom tqdm import tqdm\n\n%matplotlib inline","257ca80a":"dat_files_all = []\n\nfor dirname, _, filenames in os.walk('\/kaggle\/input'):\n    dat_files = [ fi for fi in filenames if fi.endswith(\".dat\") ]\n    for filename in dat_files:\n        dat_files_all.append(filename)\nprint('Number of Files: '+str(len(dat_files_all)))\ndat_files_all","f6b5a75e":"record = wfdb.rdrecord('..\/input\/mit-bih-malignant-ventricular-fibrillation\/418', sampto=5000)\nann = wfdb.rdann('..\/input\/mit-bih-malignant-ventricular-fibrillation\/418', 'atr', sampto=5000)\n\nwfdb.plot_wfdb(record, ann)\ndisplay(record.__dict__)","22968811":"plt.plot(record.p_signal)\nprint(\"Signal length: \" + str(len(record.p_signal)))","fd732e6c":"wfdb.io.show_ann_labels()\nwfdb.io.show_ann_classes()","06eab87a":"ecg_plot.plot_1(record.p_signal[:,0], sample_rate=250, title='Malignant Ventricular Fibrillation')\necg_plot.plot_1(record.p_signal[:,1], sample_rate=250, title='')\necg_plot.show()","cc4d268b":"dirs = [612  ,424  ,419  ,425  ,422  ,614  ,611  ,615  ,430  ,423  ,420  ,421  ,426  ,428  ,427  ,429 ,602  ,607  ,605  ,609 ,418] # 610\nfor ii in dirs:\n    print(ii)\n    path = ['..\/input\/mit-bih-malignant-ventricular-fibrillation\/'+str(ii)]\n    record = wfdb.rdrecord(path[0], sampto=5000)#, sampfrom=800,   channels=[1, 3])\n    ann = wfdb.rdann(path[0], 'atr', sampto=5000)\n\n    wfdb.plot_wfdb(record, ann)\n    ","1df36e78":"record = wfdb.rdrecord(path[0], sampto=500000)#, sampfrom=800,   channels=[1, 3])\nann = wfdb.rdann(path[0], 'atr', sampto=500000)\n\nwfdb.plot_wfdb(record, ann)","5b85f9ed":"print('Number of Available Annotations: '+str(len(ann.sample)))\nann.sample","25858c5c":"step = 5000\nfor ii in range(10):\n    ecg_plot.plot_1(record.p_signal[ii*step:ii*step+step,0], sample_rate=500, title='')\n\necg_plot.show()","ea3ecf4b":"step = 5000\nfor ii in tqdm(ann.sample):\n    ecg_plot.plot_1(record.p_signal[ii:ii+step,0], sample_rate=500, title='')\n\necg_plot.show()","b94bc238":"With the following line we can the starting point of annotations:\n","b99e5c27":"It is possible to load more data like this:","ea33200b":"## Plot ECG Signals","13fcb0d4":"We can load all files and plot them in a loop:","20662b05":"The MIT-BIH Malignant Ventricular Fibrillation Database can be downloaded using the following commands:","0f6fb9df":"## Plot Data with ECG Plot","fcef4595":"## Read and Plot One File","8764f4ee":"## Dataset from:\nhttps:\/\/archive.physionet.org\/physiobank\/database\/vfdb\/","b9e88c3e":"## Import Libraries","146bed6f":"## Read Files and Directories from Dataset","5e009a76":"## Checking Labels and Classes"}}