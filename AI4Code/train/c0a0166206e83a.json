{"cell_type":{"1763a91a":"code","e251056f":"code","49ecf453":"code","8b4f62aa":"code","6aa4eb71":"code","9103e5eb":"code","d2cd56ea":"code","a75465d7":"code","5d831f1f":"code","6bd3d587":"code","70dca03d":"code","933e1b90":"markdown","fb9d9af2":"markdown","796063bd":"markdown","415b3e86":"markdown","bf82c529":"markdown","64ae02b8":"markdown"},"source":{"1763a91a":"import os,sys,time\nimport numpy as np\nimport pandas as pd\nimport matplotlib.pyplot as plt\nimport seaborn as sns\n\n%matplotlib inline","e251056f":"fpath = '\/kaggle\/input\/santa-2019-workshop-scheduling\/family_data.csv'\ndata = pd.read_csv(fpath, index_col='family_id')\n\nfpath = '\/kaggle\/input\/santa-2019-workshop-scheduling\/sample_submission.csv'\nsubmission = pd.read_csv(fpath, index_col='family_id')","49ecf453":"data.head()","8b4f62aa":"submission.head()","6aa4eb71":"data['cost_0'] = 0\ndata['cost_1'] = 50\ndata['cost_2'] = data[['choice_2','n_people']].apply(lambda row:50+9*row.n_people, axis=1)\ndata['cost_3'] = data[['choice_3','n_people']].apply(lambda row:100+9*row.n_people, axis=1)\ndata['cost_4'] = data[['choice_4','n_people']].apply(lambda row:200+9*row.n_people, axis=1)\ndata['cost_5'] = data[['choice_5','n_people']].apply(lambda row:200+18*row.n_people, axis=1)\ndata['cost_6'] = data[['choice_6','n_people']].apply(lambda row:300+18*row.n_people, axis=1)\ndata['cost_7'] = data[['choice_7','n_people']].apply(lambda row:300+36*row.n_people, axis=1)\ndata['cost_8'] = data[['choice_8','n_people']].apply(lambda row:400+36*row.n_people, axis=1)\ndata['cost_9'] = data[['choice_9','n_people']].apply(lambda row:500+36*row.n_people+199*row.n_people, axis=1)\ndata['cost_otherwise'] = data[['choice_9','n_people']].apply(lambda row:500+36*row.n_people+398*row.n_people, axis=1)","9103e5eb":"data['visit_idx'] = -1\ndata['visit_day'] = -1\ndata['actual_cost'] = -1\nworkshop = {day:0 for day in range(1,101,1)}\ndata = data.sort_index(by=['n_people'],ascending=False)\nfor idx in range(len(data)):\n    row = data.iloc[idx]\n    checked = False\n    for _choice in range(0,10,1):\n        _idx = _choice\n        _choice = 'choice_'+str(_choice)\n        _day = row[_choice]\n        if workshop[_day]+row['n_people']<300:\n            row['visit_idx'] = _idx\n            row['visit_day'] = _day\n            row['actual_cost'] = row['cost_'+str(_idx)]\n            workshop[_day] += row['n_people']\n            checked = True\n            break","d2cd56ea":"data['actual_cost'] = data[['visit_day','cost_otherwise','actual_cost']].apply(lambda row:row['cost_otherwise'] if row['visit_day']==-1 else row['actual_cost'], axis=1)\ndef illegal_day(row):\n    if row['visit_day']!=-1:\n        return row['visit_day']\n    for day in range(1,101,1):\n        if workshop[day]+row['n_people']<300:\n            workshop[day] += row['n_people']\n            return day\ndata['visit_day'] = data[['visit_day','n_people']].apply(illegal_day, axis=1)","a75465d7":"workshop","5d831f1f":"data.actual_cost.sum()","6bd3d587":"data[data.visit_day==2].n_people.sum()","70dca03d":"submission['assigned_day'] = data['visit_day'].tolist()\nscore = data.actual_cost.sum()\nsubmission.to_csv(f'submission_{score}.csv')\nprint(f'Score: {score}')","933e1b90":"### Check Result","fb9d9af2":"### Otherwise","796063bd":"## Make Submission File","415b3e86":"# Santa`s Workshop Tour 2019!!!\n\n5000 families, 100 days, Santa get a huge problem, he need us, the Santa's knight, charge, to the workshop.\n\n## Load Lib, Load Data","bf82c529":"### algorithm\n\nIdea: big family first, small family next, like throw rock to bottle, big first, small next, then you can full it.","64ae02b8":"## Something\n\n- families:5000\n- days:100\n- round:125~300 people\n- cost rules:\n    - choice_0: no consolation gifts\n    - choice_1: one \\$50 gift card to Santa's Gift Shop\n    - choice_2: one \\$50 gift card, and 25% off Santa's Buffet (value \\$9) for each family member\n    - choice_3: one \\$100 gift card, and 25% off Santa's Buffet (value \\$9) for each family member\n    - choice_4: one \\$200 gift card, and 25% off Santa's Buffet (value \\$9) for each family member\n    - choice_5: one \\$200 gift card, and 50% off Santa's Buffet (value \\$18) for each family member\n    - choice_6: one \\$300 gift card, and 50% off Santa's Buffet (value \\$18) for each family member\n    - choice_7: one \\$300 gift card, and free Santa's Buffet (value \\$36) for each family member\n    - choice_8: one \\$400 gift card, and free Santa's Buffet (value \\$36) for each family member\n    - choice_9: one \\$500 gift card, and free Santa's Buffet (value \\$36) for each family member, and 50% off North Pole Helicopter Ride tickets (value \\$199) for each family member\n    - otherwise: one \\$500 gift card, and free Santa's Buffet (value \\$36) for each family member, and free North Pole Helicopter Ride tickets (value \\$398) for each family member"}}