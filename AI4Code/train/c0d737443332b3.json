{"cell_type":{"496b4b5a":"code","9e7331a9":"code","2f22e01b":"code","af284164":"code","63a5b251":"code","8594bb4b":"code","be95db50":"markdown","91c02383":"markdown","d965754e":"markdown"},"source":{"496b4b5a":"!yes '' | cpan -i Graph\n!git clone https:\/\/github.com\/hendrixlab\/bpRNA","9e7331a9":"import pandas as pd\nimport numpy as np\nimport json","2f22e01b":"def get_predicted_loop_type(sequence, structure, debug=False):\n    !echo $sequence > a.dbn\n    !echo \"$structure\" >> a.dbn\n    !export PERL5LIB=\/root\/perl5\/lib\/perl5 && perl bpRNA\/bpRNA.pl a.dbn\n    result = [l.strip('\\n') for l in open('a.st')]\n    if debug:\n        print(sequence)\n        print(structure)\n        print(result[5])\n    return result","af284164":"train = pd.read_json('..\/input\/stanford-covid-vaccine\/train.json', lines=True)\nsequence = train.sequence.values[0]\nstructure = train.structure.values[0]\npredicted_loop_type = train.predicted_loop_type.values[0]\n\nresult = get_predicted_loop_type(sequence, structure, debug=True)\nprint(predicted_loop_type)","63a5b251":"for i in range(20):\n    result = get_predicted_loop_type(sequence, structure)\n    if predicted_loop_type == result[5]:\n        print(f'{i} ok')\n        print(result[5])\n        print(predicted_loop_type)\n    elif predicted_loop_type.replace('X','M') == result[5].replace('X','M'):\n        print(f'{i} ok except X and M difference')\n        print(result[5])\n        print(predicted_loop_type)\n    else:\n        print(f'{i} ng')\n        print(result[5])\n        print(predicted_loop_type)","8594bb4b":"for i, arr in enumerate(train[['sequence', 'structure', 'predicted_loop_type', 'id']].values):\n    if i >= 100:\n        break\n    result = get_predicted_loop_type(arr[0], arr[1])\n    \n    if result[5] == arr[2]:\n        print(f'{i} ok for {arr[3]}')\n    elif result[5].replace('X','M') == arr[2].replace('X','M'):\n        print(f'{i} ok for {arr[3]} except X and M difference')\n    else:\n        print(f'{i} predicted_loop_type is not same for {arr[3]}')\n        print(result[5])\n        print(arr[2])\n        break","be95db50":"Apart from this X <-> M difference, the results can be reproduced.","91c02383":"This result seems to be indefinite for 'X' and 'M'.\nI dont know why...","d965754e":"Let's find out if the first 100 samples can be reproduced."}}