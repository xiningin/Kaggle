{"cell_type":{"21e393d8":"code","14de2c22":"code","2f910b35":"code","63b07047":"code","32ecb095":"code","03f8de25":"code","9bb50e9f":"code","309cfc2f":"code","acc2aafe":"code","af3baeb6":"code","7dc5809c":"code","32091092":"code","d5f8a348":"markdown","439f5411":"markdown","c9fb4c52":"markdown","12275492":"markdown","0ca8ab8e":"markdown","16c0b8da":"markdown","f03f5b5f":"markdown"},"source":{"21e393d8":"import numpy as np \nimport pandas as pd\nimport matplotlib.pyplot as plt\nimport seaborn as sns\nimport datetime as dt\n#Prophet :producing high-quality forecast data\nfrom fbprophet import Prophet","14de2c22":"data = pd.read_csv(\"..\/input\/amazon-stock-5-years\/all_stocks_5yr.csv\")\ndata.tail(20)","2f910b35":"# Here I will replace the column name from name to ticks:\n# For this simple Facebook Prophet Model tutorial with Python, I\u2019ll analyze the Amazon stock and see what the trend for the near future of that stock will look like based on past stock prices:\ndata = data.rename(columns = {'Name' : 'Ticks'})\ndata.head()","63b07047":"amzn = data.loc[data['Ticks'] == 'AMZN']\namzn.head()","32ecb095":"\namzn_data = amzn.copy()","03f8de25":"amzn_data.loc[:, 'date'] = pd.to_datetime(amzn.loc[:, 'date'], format= \"%Y\/%m\/%d\")","9bb50e9f":"# First Subplot\nf, (ax1, ax2) = plt.subplots(1, 2, figsize=(14,5))\nax1.plot(amzn_data[\"date\"], amzn_data[\"close\"], color= \"red\")\nax1.set_xlabel(\"Date\", fontsize=12)\nax1.set_ylabel(\"Stock Price\")\nax1.set_title(\"Amazon Close Price History\")\n\n# Second Subplot\nax2.plot(amzn_data[\"date\"], amzn_data[\"high\"], color=\"green\")\nax2.set_xlabel(\"Date\", fontsize=12)\nax2.set_ylabel(\"Stock Price\")\nax2.set_title(\"Amazon High Price History\")\n\n#f,(ax1,ax2)= plt.subplots(1,2,figsize =(14,8))\n\n# third subplot\n\nax1.plot(amzn_data[\"date\"], amzn_data[\"low\"],color='blue')\nax1.set_xlabel(\"Date\", fontsize= 14)\nax1.set_ylabel(\"Stock Price\")\nax1.set_title(\"Amazon Low Price History\")\n\n# fourth subplot\nax2.plot(amzn_data['date'],amzn_data[\"volume\"], color= 'orange')\nax2.set_xlabel(\"Date\")\nax2.set_ylabel(\"Stock Price\", fontsize= 14)\nax2.set_title(\"Amazon's Volume History\")\nplt.show()","309cfc2f":"\n#Drop the columns\nph_data = amzn_data.drop(['open', 'high', 'low', 'volume', 'Ticks'], axis= 1)\nph_data.rename(columns= {'close': 'y', 'date': 'ds'}, inplace = True)\nph_data.head()","acc2aafe":"m= Prophet()\nm.fit(ph_data)\n# create future date\nfuture_prices = m.make_future_dataframe(periods= 365)\n#future_prices.head()\n","af3baeb6":"\n\n\nforecast = m.predict(future_prices)\n\nimport matplotlib.dates as mdates\n\n#Dates\nstarting_date = dt.datetime(2018, 4, 7)\nstarting_date1 = mdates.date2num(starting_date)\n\ntrend_date = dt.datetime(2018, 6, 7)\ntrend_date1 = mdates.date2num(trend_date)\n\npointing_arrow = dt.datetime(2018, 4, 7)\npointing_arrow1 = mdates.date2num(pointing_arrow)\n\n\n\nfig = m.plot(forecast)\nax1 = fig.add_subplot(111)\nax1.set_title(\"Amazon stock price forecast\", fontsize= 16)\nax1.set_xlabel(\"Date\", fontsize= 14)\nax1.set_ylabel(\"Close\", fontsize= 14)\n\n\n\n\n#Forecast initialization arrow\nax1.annotate('Forecast \\n Initialization', xy=(pointing_arrow1, 1350), xytext=(starting_date1, 1700),\n            arrowprops = dict(facecolor='#ff7f50', shrink=0.1),)\n\n# Trend emphasis arrow\nax1.annotate('Upward Trend', xy= (trend_date1, 1225), xytext=(trend_date1, 950),\n            )\n\nax1.axhline(y=1260, color='b', linestyle= '-')\nplt.show()","7dc5809c":"fig2 = m.plot_components(forecast)\nplt.show()","32091092":"\nm = Prophet(changepoint_prior_scale = 0.01).fit(ph_data)\nfuture = m.make_future_dataframe(periods = 12, freq= 'M')\nfcst = m.predict(future)\nfig= m.plot(fcst)\nplt.title(\"Monthly Prediction 1 year time frame\")\n\nplt.show()","d5f8a348":"## **importing Dataset**","439f5411":"## create a copy","c9fb4c52":"# change our datatype to datetime\n","12275492":"## Predict Price","0ca8ab8e":"## Steps","16c0b8da":"## Reading Dataset","f03f5b5f":"Thnaks Aman Kharwal I learn from this notebook"}}