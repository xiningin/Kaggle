{"cell_type":{"659e5a2a":"code","030ed06a":"code","88dbd4c4":"code","0e837ce0":"code","6dc20e61":"code","61223617":"code","49d4862c":"code","e8ea066c":"code","efed3ef0":"code","ab02b650":"code","52e680c6":"code","1c46d838":"code","ce0ce804":"code","cea16a28":"code","a01e6375":"code","d9e6a460":"markdown","3d69742b":"markdown"},"source":{"659e5a2a":"!pip install japanize-matplotlib","030ed06a":"%matplotlib inline\nfrom IPython.display import SVG, Image\nfrom keras.utils.vis_utils import model_to_dot\n\nimport re\nimport itertools\nimport random\n\nimport numpy as np\nimport scipy\nimport pandas as pd\nimport gensim\n\nfrom sklearn import datasets\nfrom sklearn import preprocessing\nfrom sklearn.decomposition import PCA\nfrom sklearn import cluster, datasets, mixture\nfrom sklearn.datasets import load_digits\nfrom sklearn.preprocessing import StandardScaler, OneHotEncoder\nfrom sklearn.metrics import f1_score, classification_report, confusion_matrix\nfrom sklearn.model_selection import train_test_split\nfrom sklearn import decomposition\n\nimport matplotlib.pyplot as plt\nfrom matplotlib.colors import ListedColormap\nimport seaborn as sns\n\nfrom keras.utils import to_categorical","88dbd4c4":"plt.style.use('seaborn')\n%config InlineBackend.figure_format = 'retina'","0e837ce0":"import japanize_matplotlib\nplt.rcParams['font.family']","6dc20e61":"img_cnt = 0","61223617":"def save_img():\n    global img_cnt\n    img_cnt += 1\n    img_name = 'img_{0:03}.png'.format(img_cnt)\n    print(img_name)\n    plt.savefig(img_name)","49d4862c":"def hexbin(x, y, color, **kwargs):\n    cmap = sns.light_palette(color, as_cmap=True)\n    plt.hexbin(x, y, cmap=cmap, **kwargs)\ndef scatter(x, y, color, **kwargs):\n    plt.scatter(x, y, marker='.')","e8ea066c":"df_part = pd.read_csv('..\/input\/sample-data-wordanddoc2vec\/actual_survey_data_jp.csv', index_col=0)\ndf_part.head()","efed3ef0":"df_out_wgt_user = pd.read_csv('..\/input\/lowcol-actual-survey-data-fet12-randinit01\/out_user.csv', index_col=0)\nwgt_user = df_out_wgt_user.values\ndf_out_wgt_user.head()","ab02b650":"df_out_wgt_col = pd.read_csv('..\/input\/lowcol-actual-survey-data-fet12-randinit01\/out_col.csv', index_col=0)\nwgt_prod = df_out_wgt_col.values\ndf_out_wgt_col.head()","52e680c6":"wgt = np.r_[wgt_prod, wgt_user]\nfrom sklearn import decomposition\npca = decomposition.PCA(n_components=12)\npca.fit(wgt)","1c46d838":"f = pca.transform(wgt)\nf_prod = f[:wgt_prod.shape[0],]\nf_user = f[wgt_prod.shape[0]:,]","ce0ce804":"sns.pairplot(pd.DataFrame(f[:,:5]), markers=['.'], height=2.2)\nsave_img()","cea16a28":"ix, jx = 0,1\nplt.figure(figsize=(12,12))\nax = sns.kdeplot(f_user[:,ix], f_user[:,jx],\n                 cmap=\"Blues\", shade=True, thresh=0.05)\nax.scatter(f_prod[:,ix], f_prod[:,jx], c='orange')\nfor ii, col in enumerate(df_part.columns):\n    text = col\n    xy = (f_prod[ii,ix], f_prod[ii,jx])\n    ax.annotate(text, xy=xy, size=12)\nsave_img()","a01e6375":"ix, jx = 0,2\nplt.figure(figsize=(12,12))\nax = sns.kdeplot(f_user[:,ix], f_user[:,jx],\n                 cmap=\"Blues\", shade=True, thresh=0.05)\nax.scatter(f_prod[:,ix], f_prod[:,jx], c='orange')\nfor ii, col in enumerate(df_part.columns):\n    text = col\n    xy = (f_prod[ii,ix], f_prod[ii,jx])\n    ax.annotate(text, xy=xy, size=12)\nsave_img()","d9e6a460":"[WordAndDoc2vec](https:\/\/github.com\/darecophoenixx\/wordroid.sblo.jp\/wiki\/WordAndDoc2vec)","3d69742b":"## PCA"}}