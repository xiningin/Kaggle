{"cell_type":{"ba4351e8":"code","4ff35281":"code","97ab294a":"code","a73712f3":"code","1477d560":"code","fa57d446":"code","7b5233bc":"code","ee9f4907":"code","c613785d":"code","856d4278":"code","c93876d7":"code","5d36db82":"code","dae3fef7":"code","c3730bcb":"code","68bfd24c":"code","e3d19434":"code","3ba892b7":"code","c53fea0d":"code","f211cd91":"code","c54f3710":"code","3e640362":"code","769317fe":"code","53b9395b":"code","0f4a01c8":"code","1abcaea8":"code","7cb2a357":"code","e43414a8":"code","e45b4850":"markdown","648df57d":"markdown","efce8c98":"markdown","5ad082f4":"markdown","46d0baf7":"markdown","f314d927":"markdown","bb5f67e2":"markdown","78888f2e":"markdown","03a202aa":"markdown","6899df92":"markdown","90bc2eef":"markdown","8890b351":"markdown","d383d201":"markdown","986b58a4":"markdown","2a946403":"markdown","cf1daa8c":"markdown","c34889b7":"markdown","3353a71f":"markdown","8e920e40":"markdown","c3b9455e":"markdown","3faa28b6":"markdown","ffdf7ec9":"markdown","2380499f":"markdown"},"source":{"ba4351e8":"import numpy as np \nimport pandas as pd  \nimport matplotlib.pyplot as plt\nimport os\nfrom collections import Counter\n","4ff35281":"data = pd.read_csv('\/kaggle\/input\/online-retail-business\/OnlineRetail.csv', encoding= 'unicode_escape')","97ab294a":"data.head(5)","a73712f3":"print(data.shape)","1477d560":"print(data.info())","fa57d446":"data['InvoiceDate'] = pd.to_datetime(data['InvoiceDate'], format='%d-%m-%Y %H:%M')","7b5233bc":"data['Description'].isna().sum()","ee9f4907":"data['CustomerID'].isna().sum()","c613785d":"data['Total'] = data['UnitPrice'] * data['Quantity']","856d4278":"sales = data['Total']","c93876d7":"data['InvoiceDate'] = pd.to_datetime(data['InvoiceDate'])\ndata['Month'] = data['InvoiceDate'].dt.month\n#data['Month'] = data['Month'].astype('int32')\ndata.head(5)","5d36db82":"sales = data.groupby('Month').sum()\nsales","dae3fef7":"months = range(1,13)\nplt.figure(figsize=(15,4))\nplt.bar(months, sales['Total'], color='#d9534f')\nplt.xticks(months)\nplt.ylabel('Sales in USD $')\nplt.xlabel('Month')\nplt.show()","c3730bcb":"sales_by_country = data[['Country', 'Total']]","68bfd24c":"sales_by_country","e3d19434":"salesA=sales_by_country.groupby('Country').sum()","3ba892b7":"salesC = salesA.sort_values(by=['Total'], ascending=False)","c53fea0d":"salesC.head(5)","f211cd91":"df = data[data['InvoiceNo'].duplicated(keep=False)]\n\ndf['Grouped'] = df.groupby('InvoiceNo')['Description'].transform(lambda x: ','.join(x))\n\ndf.head(5)\n","c54f3710":"pd.set_option(\"display.max_colwidth\", -1)","3e640362":"df['Grouped']","769317fe":"df = df[['InvoiceNo', 'Grouped']].drop_duplicates()\ndf.head(10)","53b9395b":"from itertools import combinations\ncount = Counter()\n\nfor row in df['Grouped']:\n    row_list = row.split(',')\n    count.update(Counter(combinations(row_list, 2)))\n    \ncount.most_common(10)","0f4a01c8":"product_group = data.groupby('Description')\nqty = (product_group.sum()['Quantity']).sort_values(ascending=False)\n\n\nqty.head(5)\n","1abcaea8":"data['Hour'] = data['InvoiceDate'].dt.hour\ndata['Minute'] = data['InvoiceDate'].dt.minute","7cb2a357":"data.head(5)","e43414a8":"hours = [hour for hour, df in data.groupby('Hour')]\nproducts_c = data.groupby(['Hour']).count()\nplt.figure(figsize=(15,4))\nplt.plot(hours, data.groupby(['Hour']).count()['Quantity'], color='#d9534f')\nplt.ylabel('Number of purchased items')\nplt.xlabel('Hour')","e45b4850":"### Conclusion","648df57d":"##### 1. Which month had the highest \"Total\"? How much was earned that month?","efce8c98":"#### The dataset contains 541909 rows and 8 columns.","5ad082f4":"##### We will check 2 x items that are usually bought together","46d0baf7":"##### The products that are usually brought together are displayed above, and as it can be observed they are usually related, eg. key fob and back door.","f314d927":"##### The country that made the most purchases is United Kinngdom, followed by Netherlands, Ireland, Germany and France.","bb5f67e2":"##### From the table above we can see that the month that had the highest total is November with 1461756.250$. \n\n\n#### Data visualization","78888f2e":"##### The figure above indicates that most of the items were purchased at 12am and at around 3-4pm. ","03a202aa":"####  5. What time should the company display advertisements to maximize the likelyhood of customers buying products?","6899df92":"#### The first step was to get familiar with the date, trying to identify missing and null values and decide wether to remove them or not. As the analysis was not focused on the Customer ID or description, but rather on the quantity and amount bought by each client, all values were kept for the completion of the data analysis.\n#### The first question was \"1. Which month had the highest \"Total\"? How much was earned that month?\". We used the \"groupby\" function in order to group the items by the time (Month) when they were purchased. It can be observed from the graph above that the months that had the highest \"Total\" were November and December, both having a value higher than 1.2 mil $.\nThis indicates that the sales were as expected highly influenced by the time of the year as people tend to buy more items\/presents right before Christmas. \n","90bc2eef":"#### The column \"InvoiceDate\" needs to be \"datetime\"","8890b351":"##### 2.Which country made the most orders?","d383d201":"#### The second question was \" 2. Which country made the most orders?\", and to answer this question we used the \"group by\" function again together with the column that was added at the beginning of the analysis, \"Total\". The column \"Total\" was calculated by multiplying the quantity of each item by the price. By using the group by function we could sum the Total of all the items bought by each country and build a simple table. As it can be observed, United Kingdom is the country that purchased the most items, followed by Netherlands and Ireland.","986b58a4":"#### The third question was about items that are usually bought together, and for the analysis we joined the items that had the same InvoiceNo as this indicates that they were bought by the same customer in one order. As expected, the results show that most of the items that were bought together are somehow related (eg. key fob and back door) and therefore, should be advertised together to ensure maximum selling.","2a946403":"#### The fourth question was about the product that was bought the most. In this situation was used the group by function again on \"Description\" and \"Quantity\". The result was: WORLD WAR 2 GLIDERS ASSTD DESIGNS  which was bought 53847 times.\n\n#### The fifth and last question was focused on marketing. We wanted to identify when the customers are more likely to access the website and make a purchase. In the graph above we can see that most popular hours of the day were at 12am and between 3pm and 4pm. This data can be used for marketing strategies as we can identify when are people more likely to see ads regarding the items provided by the company. The same idea applies to the graph showing the sales from Jan to December, which can be used to increase the sales by increasing the ads and visibility of the company's website when the sales are lower than expected.","cf1daa8c":"#### Augment data with additional columns","c34889b7":"#### Getting familiar with the data","3353a71f":"#### The columns \"Description\" and \"Customer ID\" have missing values. We will keep all values for now as it may not affect the analysis in the future.","8e920e40":"##### 4. Which product was bought the most?\nThe initial idea was to use a bar chart to display the data but there are more than 4k products for sale and it would be impossible to show them all in one graph.","c3b9455e":"#####  3. Which items are mostly purchased together?\n##### We can figure this out by checking the items that have the same Invoice No as the Order ID is not provided.","3faa28b6":"#### Questions:\n##### 1. Which month had the highest \"Total\"? How much was earned that month?\n##### 2. Which country made the most orders?\n##### 3. Which items are mostly purchased together?\n##### 4. Which product was bought the most?\n##### 5. What time should the company display advertisements to maximize the likelyhood of customers buying products?","ffdf7ec9":"#### The column \"Total\" will be added which will be calculated by multiplying \"UnitPrice\" by \"Quantity\".","2380499f":"##### The top 5 most popular products are displayed above. The procust that was bought the most is the Word War 2 gliders assid design with 53847 purchases over one year."}}