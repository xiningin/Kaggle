{"cell_type":{"5cb935a9":"code","13085630":"code","2c319dcb":"code","0e069054":"code","1c83eab9":"code","8cc4cd87":"code","ed9b70f0":"code","ace356e1":"code","6ab8c8f3":"code","4f4d849a":"code","dcfa21c1":"code","6e579bcb":"code","2e3f8581":"code","5d19c884":"code","054176c0":"code","573573c4":"code","1fc05e18":"code","dd923628":"code","d53ac5a7":"code","49fc936d":"code","36648120":"code","dc38d65e":"code","095b8521":"code","a37cea53":"code","182acaff":"markdown","e248700b":"markdown","d2a434ef":"markdown","891361f0":"markdown","036d4af6":"markdown","ddea246c":"markdown","fd87115f":"markdown","cef22a68":"markdown","efba8bf8":"markdown","a9564a50":"markdown","92897136":"markdown","37cbf429":"markdown","fcbe5733":"markdown","20c72c19":"markdown","5cf72bdf":"markdown","a5c946fb":"markdown","d3f6545a":"markdown","cbd373db":"markdown","b099c0ab":"markdown","442800b8":"markdown","0d0cc894":"markdown","7afa2339":"markdown","761b4b42":"markdown","db252114":"markdown","d89c7513":"markdown","125fd417":"markdown","307903f3":"markdown","5900a4a3":"markdown","9f5950f1":"markdown","9b7bbdad":"markdown","5c52c2b8":"markdown","f90bf602":"markdown","fdaaff30":"markdown","8b4679bf":"markdown","e550a859":"markdown","d477ad11":"markdown","7ea89854":"markdown","4c74de2a":"markdown","08ee5119":"markdown","641f3539":"markdown"},"source":{"5cb935a9":"import numpy as np\nimport pandas as pd\nimport matplotlib.pyplot as plt\nimport seaborn as sns\nplt.style.use('fivethirtyeight')\nimport re ","13085630":"df = pd.read_csv('..\/input\/scotch-whiskey-reviews-update-2020\/scotch_review2020.csv', index_col='id')\ndisplay(df.head())","2c319dcb":"df.rename(columns={\"review.point\": \"points\",\"description.1.2247.\":\"description\"},inplace=True)\ndf.head()","0e069054":"dimensions=df.shape\nprint (\"The dataframe has\",dimensions[1],\" columns and \",dimensions[0],\" rows\")","1c83eab9":"df.info()","8cc4cd87":"df.currency.unique()","ed9b70f0":"df.drop(['currency'], axis=1,inplace=True)\ndf['price'] = df['price'].replace('[\\$,]', '', regex=True)","ace356e1":"symbol_idx = pd.to_numeric(df['price'], errors = 'coerce').isnull() # errors = 'coerce' results in NaNs for non-numeric values\ndf[symbol_idx][['name','price']].head(50)","6ab8c8f3":"df.at[[34, 187,740, 1549, 1815], 'price'] = 15000   # instances with '60,000\/set' which equals 15000 dollars per bottle","4f4d849a":"df.at[[93], 'price']=300\ndf.at[[95,360], 'price']=100 #Note that this is a Clue to check for double\ndf.at[[779], 'price']=200\ndf.at[[1011], 'price']=44*.75\ndf.at[[1281], 'price']=132*1.07\ndf.at[[1826], 'price']=39*.4285\ndf.at[[2028], 'price']=35*.75\ndf.at[[2201], 'price']=18*.4285\n","dcfa21c1":"df['price'] =df['price'].astype(int)","6e579bcb":"dups=df[df.duplicated(subset='name', keep=False)]\ndups.head()","2e3f8581":"df.sort_values('points', ascending=False,inplace=True)\ndf.drop_duplicates(subset='name', keep='first',inplace=True)\ndf.head()\n","5d19c884":"dups=df[df.duplicated(subset='name', keep=False)]\ndups.head()","054176c0":"# Thanks to Orfanakis Konstantinos' Notebook for this bit of code\n\ndf['age'] = df['name'].str.extract(r'(\\d+) year')[0].astype(float) # extract age and convert to float\n\ndf['name'] = df['name'].str.replace(' ABV ', '')\ndf['alcohol%'] = df['name'].str.extract(r\"([\\(\\,\\,\\'\\\"\\\u2019\\\u201d\\$] ? ?\\d+(\\.\\d+)?%)\")[0]\ndf['alcohol%'] = df['alcohol%'].str.replace(\"[^\\d\\.]\", \"\").astype(float) # keep only numerics and convert to float\n\ndf[['name', 'age', 'alcohol%']].sample(10, random_state = 42)","573573c4":"df['price_per_point'] = df['price']\/df['points']\ndf.head()","1fc05e18":"df.describe()","dd923628":"sns.set_style('whitegrid')\nplt.figure(figsize=(13, 5))\nax=df['points'].plot(kind='hist',xticks=[65,70,75,80,85,90,95,100],figsize = (13, 5),title=\"Frequency of Review Grades\")\nax.set_xlabel(\"Review Points\")\nax.set_ylabel(\"Number of Whiskys Receiving Grade\")","d53ac5a7":"sns.set_style('whitegrid')\nplt.figure(figsize=(10, 5))\nax = sns.boxplot(x=\"category\", y=\"points\", data=df)\n ","49fc936d":"sns.set_style('whitegrid')\nplt.figure(figsize=(10, 5))\nax = sns.boxplot(x='category', y='price', data=df,showfliers = False)\nax.set_ylabel('Price (USD)')","36648120":"dr=df[df['price'] <600].copy()\ndr.reset_index(drop=True,inplace=True)\ndr.shape","dc38d65e":"g = sns.lmplot(x=\"age\", y=\"price\",  col=\"category\",hue=\"category\",\n               data=dr, height=6)","095b8521":"g = sns.lmplot(x=\"age\", y=\"points\",  col=\"category\",hue=\"category\",\n               data=dr, height=6)","a37cea53":"d90=df[df['points'] >90].copy()\nd90.reset_index(drop=True,inplace=True)\nd90.sort_values(by=['price_per_point'],ascending=[True],inplace=True)\nd90.head(10)","182acaff":"Let us look at the shape of our data","e248700b":"Let us look for duplicate entries","d2a434ef":"To find the best value, we select all Whiskys above a 90 Review score and then sort by price per point","891361f0":"Wow, look at those range of values and standard deviation on price. We will need to factor that in when we do plotting.  A graph ranging from \\\\$1,570,000 to \\\\$7.00 is not going to be pretty","036d4af6":"We look at the relation of the age of the whisky to review score","ddea246c":"OK, we have wrangled the data to the point where we can ask some questions","fd87115f":"## Load and Process Data","cef22a68":"Let us look at the price column for nonnumeric values","efba8bf8":"Import the standared libraries ","a9564a50":"![](Header.jpg)","92897136":"From the name column we can get some additional data such as age and percentage alcohol","37cbf429":"Very good, no missing data.  Let's look at the catagoricals, starting with currency","fcbe5733":"So again a correlation, and with the more definitive correlation for the Single Malts.","20c72c19":"Let us take a highlevel view of our data ","5cf72bdf":"We see there is a correlation, and it is most pronounced for Single malts","a5c946fb":"## Analysis","d3f6545a":"# Using Python and Pandas in Pursuit of a Good Scotch","cbd373db":"We next look at price.  From looking at the summary metrics, we now that prices vary wildly, and that is going to distort graphs.  Again, we use a boxplot to look at the distribution of data with outliers turned off.","b099c0ab":"## So what is the Best Scotch Whisky Value? ","442800b8":"Finally, lets create a metric of how much we are paying per review point ","0d0cc894":"Look for missing data","7afa2339":"Hmmm, for all three classes of whiskey, 75% of the whiskys are in the \"85-89 points\u2014Very good: a whisky with special qualities\" category.  If that is the case, then logically those \"special qualities\" are not that special. I realize that Raymnond Chandler once said  <i>\"There is no bad whiskey. There are only some whiskeys that aren\u2019t as good as others\"<\/i>, but this seems a bit much.  We will continue our analysis, but concern has to be raised as to the objectivity of the reviews.\n\nThat said, we really don't see a marked review superiority between the different classes of whisky, the median for all three is about a score of 89 with Single malt being slightly scored lower.","761b4b42":"## Preliminaries ","db252114":"Looking back at the original data source, the default bottle size is 750ml, these bottles represent larger and smaller size containers.  So we can fairly compare, let's normalize these prices to 750ml bottles. Given that there is only a handful and no consistent pattern, we will just brute force the adjustment","d89c7513":"I think I will need to conduct some field research to validate my finding ;-)","125fd417":"The winner is:","307903f3":"This notebook was created to as an assignment for the University of California San Diego Course <i>\"Basic Data Processing and Visualization\"<\/i> as part of the University of California San Diego, part of the <i>\"Python Data Products for Predictive Analytics Specialization\"<\/i>.  The assignment was <i>For this project, you will load a real-world dataset of consumer activities (e.g. product reviews) from the web, compute basic statistics about the data, and perform some visualizations of the data.<\/i>\n\nFor my assignment,  I decided to do an analysis of reviews of Scotch Whiskys, using the dataset <a href='https:\/\/www.kaggle.com\/koki25ando\/22000-scotch-whisky-reviews'>2,2k+ Scotch Whisky Reviews<\/a> of Kaggle.  I noticed that the dataset was over 3 years old, but the data scrapping script was still available, so I executed it come up with an up to date listing of reviews as my source.   ","5900a4a3":"We examing the correlation between Price and the Age of the Whisky per Category","9f5950f1":"<ol>\n<li> What is the review differences between different categories of Scotch?  Are Single Malts supeior to Blends?\n<li> What is the relation of the Scotch's Age to its final review rating?\n<li> Which Scotch is the best value, where value is defined as the highest review at the lowest price per point.\n<\/ol>","9b7bbdad":"That title column \"review.points\" with the periods is going to cause heartache; let us just make it \"points\".  Also clean up description","5c52c2b8":"From this, we see that a large majority of our Whiskys are under $600, so let us cull our data set down to whisky's under that value.  ","f90bf602":"## Introduction ","fdaaff30":"![](black_bottle.jpg)","8b4679bf":"We have some very generous reviewers or we are to believe there is no bad Scotch Whisky?  According to Whiskey Review, the range of review scores are as follow:\n<ul>\n<li>95-100 points\u2014Classic: a great whisky<\/li>\n<li>90-94 points\u2014Outstanding: a whisky of superior character and style<\/li>\n<li>85-89 points\u2014Very good: a whisky with special qualities<\/li>\n<li>80-84 points\u2014Good: a solid, well-made whisky<\/li>\n<li>75-79\u2014Mediocre: a drinkable whisky that may have minor flaws<\/li>\n<li>50-74\u2014Not recommended<\/li>\n<\/ul>\n\nPer above, we have no mediocre whiskys, which is hard to believe. Let's look at a boxplot of review scores by category of whisky.","e550a859":"Let us look at the Distribution of Review Scores","d477ad11":"Confirm we got all the duplicates","7ea89854":"OK, it seems that everything is in dollars, so that column is not providing us much. Let us drop it while renaming \"price\" to \"price (usd)\"","4c74de2a":" Let's be generous. We will sort by points, and then drop the duplicates saving the highest rating when there is a difference","08ee5119":"## Questions","641f3539":"We lost some date, but this may be a far more practicle exercise (anyone who can spend over \\\\$600 for a bottle of Scotch is likely not concerned with a price analysis)"}}