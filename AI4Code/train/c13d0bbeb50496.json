{"cell_type":{"d1f6bbd9":"code","25553536":"code","568c1187":"code","751efae9":"code","e2a9087d":"code","49e5935f":"code","0f10de5d":"code","45fb9d64":"code","ed94451a":"code","45fa26d1":"code","103474b2":"code","b0491455":"code","336ac9db":"code","d1b21d30":"code","3d89246f":"code","ce31d58e":"code","0e298ea5":"code","0b856410":"code","2af7490c":"code","9640e3b6":"code","b0756af4":"code","58a90f22":"code","b94a12b1":"code","68c29180":"code","4a7aa364":"code","629fddd5":"code","ebb2b7bb":"code","caac8202":"code","2e3284f2":"code","2614042e":"code","bb829c3c":"code","dce401e0":"code","7ec65462":"code","f75a51cc":"code","c7a40133":"markdown","8f88af2c":"markdown","1d7888d6":"markdown","7136ba5b":"markdown","7314b1cd":"markdown","65758a9c":"markdown","33c49b3b":"markdown","7536b573":"markdown","74943b24":"markdown","38a8d223":"markdown","42d0cce7":"markdown","02c628ef":"markdown","660805d9":"markdown","cf71021f":"markdown","636a7b85":"markdown","12bb3d8f":"markdown","69181eba":"markdown","b77fd76c":"markdown","7d04ef39":"markdown","82665a4f":"markdown"},"source":{"d1f6bbd9":"import numpy as np # linear algebra\nimport pandas as pd # data processing, CSV file I\/O (e.g. pd.read_csv)","25553536":"### Preview the data \nri = pd.read_csv('..\/input\/stanford-open-policing-project\/police_project.csv')\nri.head(3)","568c1187":"#Locate the missing data\nri.isnull().head(3)\n","751efae9":"#View the total sum of missing values in the data set \nri.isnull().sum()\n","e2a9087d":"ri.shape","49e5935f":"#Drop the \"county_name\" and \"state\" columns \nri.drop(['county_name'], axis='columns', inplace = True)\nri.shape","0f10de5d":"ri.dropna(subset=['driver_gender', 'driver_age_raw', 'driver_age'], inplace = True)\nri.isnull().sum()","45fb9d64":"ri.head(3)","ed94451a":"ri.dtypes","45fa26d1":"#concatnate \"stop_time\" and \"stop_date\" (separate by a space)\ncombined = ri.stop_date.str.cat(ri.stop_time, sep=\" \")\nri['stop_datetime'] = pd.to_datetime(combined)\nri.dtypes","103474b2":"#Set \"stop_datetime\" as the index \nri.set_index(\"stop_datetime\", inplace = True)\nri.index","b0491455":"#Create a dataframe for both male and female drivers \nfemale = ri[ri['driver_gender'] == 'F']\n\nmale = ri[ri['driver_gender'] == 'M']\n\n#Compute the violations by female drivers \nfemale.violation.value_counts(normalize = True)","336ac9db":"male.violation.value_counts(normalize = True)","d1b21d30":"female.shape","3d89246f":"female_and_arrested = ri[(ri.driver_gender == 'F') & (ri.violation == 'Speeding')]\nmale_and_arrested = ri[(ri.driver_gender == 'M') & (ri.violation == 'Speeding')]\n\nfemale_and_arrested.stop_outcome.value_counts(normalize = True)","ce31d58e":"male_and_arrested.stop_outcome.value_counts(normalize = True)","0e298ea5":"#Calculate the percentage of all stops that result in a vehicle search \nri.search_conducted.dtype","0b856410":"ri.search_conducted.value_counts(normalize = True)","2af7490c":"#compare the search rate for female drivers \nri[ri.driver_gender == \"F\"].search_conducted.mean()","9640e3b6":"ri.groupby('driver_gender').search_conducted.mean()","b0756af4":"ri.groupby(['violation', 'driver_gender']).search_conducted.mean()","58a90f22":"#Counte the 'search_type' values\nri.search_type.value_counts()","b94a12b1":"#Check if 'search_type' contains the string 'Protective Frisk'\nri['frisk'] = ri.search_type.str.contains('Protective Frisk', na = False)\nri.frisk.sum()","68c29180":"ri.head(3)","4a7aa364":"#Calculate the overall frisk rate by taking the mean of 'frisk'\nsearched = ri[ri.search_conducted == True]\nsearched.frisk.mean()","629fddd5":"searched.groupby('driver_gender').frisk.mean()","ebb2b7bb":"ri.is_arrested.mean()","caac8202":"ri.groupby(ri.index.hour).is_arrested.mean()","2e3284f2":"#save the hourly arrest rate\nhourly_arrest_rate = ri.groupby(ri.index.hour).is_arrested.mean()\n","2614042e":"ri.head(3)","bb829c3c":"#Import matplotlib\nimport matplotlib.pyplot as plt \n\nhourly_arrest_rate.plot()\nplt.xlabel('Hour')\nplt.ylabel('Arrest Rate')\nplt.title('Arrest Rate by Time of Day')\nplt.show()","dce401e0":"ri.drugs_related_stop.resample('A').mean()","7ec65462":"#Save the annual rate of drug-related stops\nannual_drug_rate = ri.drugs_related_stop.resample('A').mean()\n\n#create a line plot of \"annual_drug_rate\"\nannual_drug_rate.plot()\nplt.show()","f75a51cc":"#calculate and save the annual search rate\nannual_search_rate = ri.search_conducted.resample('A').mean()\n\n#Concatenate 'annual_drug_rate' and 'annual_search_rate'\nannual = pd.concat([annual_drug_rate, annual_search_rate], axis='columns')\n\n#create subplots for \"annual\"\nannual.plot(subplots = True)\nplt.show()","c7a40133":"The frisk rate is higher for males than for females, though you can't conclude that this difference is caused by the driver's gender \n\n","8f88af2c":"**Are drug-related stops on the rise?**\n\nIn a small portion of traffic stops, drugs are found in the vehicle during a search \n\nAccess whether these drug related stops are becoming more common over time. The boolean column \"drugs_related_stop\" indicates whether drugs were found during a stop. Calculate the annual drug rate by resampling the column. \n","1d7888d6":"**Does gender affect who gets a ticket for speeding?**","7136ba5b":"**Does gender affect whose vehicle is searched?**","7314b1cd":"## Introduction \n\nThe ground work for this analysis explores the Stanford Open Police dataset and analyzing the impact of gender on police behavior. The questions and format for my anaylsis has been provided by datacamp, focusing on the fundamentals of pandas.","65758a9c":"The date and time of each traffic stop is stored in separate object columns: stop_date and stop_time","33c49b3b":"**Hypothesis**: The search rate varies by violation type, and the difference in search rate between males and females is because they tend to commit different violations","7536b573":"For almost all violations, the search rate is higher for males than females, disproving the hypothesis","74943b24":"Compare the rates at which female and male drivers are frisked during a search \n","38a8d223":"**Does gender affect who is frisked during a search?**\n\nDuring a vehicle search. the police officer may pat down the driver to check if they have any weapons\n\n\nThis is known as a \"protective frisk\"","42d0cce7":"#           **Analyzing Police Activity with pandas**\n\n![image](https:\/\/exhibits.stanford.edu\/uploads\/spotlight\/attachment\/file\/998\/SOPP.png)","02c628ef":"The numbers are similar for males and females: about 95% of stops for speeding result in a ticket ","660805d9":"The rate of drug-related stops increased even though the search rate decreased, disproving the hypothesis ","cf71021f":"**Plot the hourly arrest rate**\n\nCreate a line plot from the hourly_arrest rate","636a7b85":"The \"driver_gender\" column will be critical for the analysis, but only a fraction of rows are missing. Therefore, I will remove those rows from the dataset","12bb3d8f":"## **Explore the relationship between gender and policing**\n\nQuestion: Do genders commit different violations?","69181eba":"About two-thirds of female traffic stops are for speeding, whereas stops of males are more balanced among the six categories ","b77fd76c":"**Calculate the hourly arrest rate**\n\nFind out whether the arrest rate varies by time of day\n\nCalculate the hourly arrest rate by using the hour attribute of the index \n\nThe hour ranges from 0 to 23:\n* 0 = midnight\n* 12 = noon\n* 23 = 11 PM ","7d04ef39":"The number of drug-related stops nearly doubled over the course of 10 years. Why might that be the case?\n\nOne hypothesis is that the rate of vehicle searches was also increased, which would have lead to an increase in drug-related stops even if more drivers were not carrying drugs. \n\nCalculate the annual search rate, and then plot it against the annual drug rate ","82665a4f":"The \"county_name\" has as many missing values as there is rows in the dataframe, meaning it only contains missing values "}}