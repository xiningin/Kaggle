{"cell_type":{"71595525":"code","bc4ae1e0":"code","12afe193":"code","ddbb06f7":"code","d4483f12":"markdown","7cce95a4":"markdown","4cf3a3df":"markdown","b74c060c":"markdown"},"source":{"71595525":"#!apt-get update\n!apt -y install --fix-missing libvips libvips-dev\n!pip install pyvips\n#!conda install --channel conda-forge pyvips","bc4ae1e0":"import pyvips\nimport numpy as np\nimport matplotlib.pyplot as plt\n\nformat_to_dtype = {\n    'uchar': np.uint8,\n    'char': np.int8,\n    'ushort': np.uint16,\n    'short': np.int16,\n    'uint': np.uint32,\n    'int': np.int32,\n    'float': np.float32,\n    'double': np.float64,\n    'complex': np.complex64,\n    'dpcomplex': np.complex128,\n}","12afe193":"%%timeit\nfor i in range(5):\n    image = pyvips.Image.new_from_file('..\/input\/hubmap-kidney-segmentation\/train\/0486052bb.tiff')\n    patch = image.crop(i*2048, i*2048, 2048, 2048)\n\n    np_img = np.ndarray(buffer=patch.write_to_memory(),\n                       dtype=format_to_dtype[patch.format],\n                       shape=[patch.height, patch.width, patch.bands])","ddbb06f7":"image = pyvips.Image.new_from_file('..\/input\/hubmap-kidney-segmentation\/train\/0486052bb.tiff')\npatch = image.crop(10000, 10000, 2048, 2048)\n\nnp_img = np.ndarray(buffer=patch.write_to_memory(),\n                   dtype=format_to_dtype[patch.format],\n                   shape=[patch.height, patch.width, patch.bands])\nplt.imshow(np_img)","d4483f12":"# Install Pyvips","7cce95a4":"# load region","4cf3a3df":"# Import libraries","b74c060c":"# Enjoy this competition !!"}}