{"cell_type":{"e01d7b34":"code","1c4caa87":"code","be27b6a8":"code","10311586":"code","d6eec6aa":"code","602fe2a5":"code","5865f9af":"code","0149a43b":"code","ff7ebb4a":"code","6fa53b6e":"code","12443d8b":"code","f51bb78b":"code","58b52d2a":"code","f863b40d":"code","5b388580":"code","5d244735":"code","260bddb6":"code","56607f19":"code","f8aafae1":"code","2b3f94e8":"code","dbc0e161":"code","666f18ee":"code","5bf9c0ac":"code","9ba57a3e":"code","d474fea5":"code","1ef85aea":"code","19396cd4":"code","24c004cd":"code","ad6c2f12":"code","ea2f0a79":"code","4de23aab":"code","e61ff6c6":"code","50131d19":"code","afb6b0b8":"code","eb8a4d07":"code","25f14dbb":"code","438a4b00":"code","1aaf9979":"code","317d27b3":"code","f8f69bf4":"code","afb580e7":"markdown"},"source":{"e01d7b34":"import pandas as pd\nwater= pd.read_csv(\"..\/input\/nyc-beach-water-quality-data\/dohmh-beach-water-quality-data-1.csv\")\nwater.head(9)","1c4caa87":"water['Sample Location'].value_counts()","be27b6a8":"water['Sample Location']= water['Sample Location'].replace('Rigth','Right')\nround(water['Sample Location']. value_counts()*100\/len(water),2)","10311586":"water.nunique()","d6eec6aa":"water.info()","602fe2a5":"water['Sample Date']=pd.to_datetime(water['Sample Date'])\nwater.info()","5865f9af":"water.isnull().sum()*100\/len(water)","0149a43b":"missing=water[water.isna().any(axis=1)]\nmissing.head()","ff7ebb4a":"missing.isnull().sum()*100\/len(missing)","6fa53b6e":"missing.nunique()","12443d8b":"missing['Units or Notes'].value_counts()*100\/len(missing)","f51bb78b":"water[water['Units or Notes']=='Result below detection limit'].head()","58b52d2a":"water[water['Units or Notes']=='Result below detection limit'].info()","f863b40d":"water[water['Units or Notes']!='Result below detection limit'].head()","5b388580":"water[water['Units or Notes']!='Result below detection limit'].info()","5d244735":"water['Enterococci Results']=water['Enterococci Results'].fillna(0)\nwater.isnull().sum()*100\/len(missing)","260bddb6":"water=water.dropna()\nwater.info()","56607f19":"water.nunique()","f8aafae1":"water.head()","2b3f94e8":"water=water.drop(['Units or Notes'],axis=1)\nwater.head()","dbc0e161":"#paper : https:\/\/www.environment.nsw.gov.au\/-\/media\/OEH\/Corporate-Site\/Documents\/Water\/Beaches\/state-of-beaches-2019-2020-statewide-summary-200302.pdf\nwater.loc[water['Enterococci Results'] <= 50, 'Category'] = 'open'\nwater.loc[water['Enterococci Results'] >500, 'Category'] = 'closed'\nwater.loc[(water['Enterococci Results'] >50) & (water['Enterococci Results'] <=500), 'Category'] = 'advisory'\nround(water['Category'].value_counts()*100\/len(water))","666f18ee":"water.rename(columns = {'Enterococci Results':'Enterococci Results (MPN\/100 ml)'}, inplace = True)\nwater.head()","5bf9c0ac":"!pip install pandas-profiling","9ba57a3e":"from pandas_profiling import ProfileReport\nProfileReport(water, title=\"EDA Report\")","d474fea5":"!pip install pycaret","1ef85aea":"data = water.sample(frac=0.8, random_state=42)\ndata_unseen = water.drop(data.index)\ndata.reset_index(inplace=True, drop=True)\ndata_unseen.reset_index(inplace=True, drop=True)\nprint('Data for Modeling: ' + str(data.shape))","19396cd4":"print('Unseen Data For Predictions: ' + str(data_unseen.shape))","24c004cd":"from pycaret.classification import *","ad6c2f12":"water= setup(data = data, target = 'Category', session_id=42,\n                  normalize = True, \n                  transformation = True, \n                  log_experiment = True,\n                  handle_unknown_categorical = True, \n                  unknown_categorical_method = 'most_frequent',\n                  remove_multicollinearity = True, #drop one of the two features that are highly correlated with each other\n                  ignore_low_variance = True,#all categorical features with statistically insignificant variances are removed from the dataset.\n                  combine_rare_levels = True,# all levels in categorical features below the threshold defined in rare_level_threshold param are combined together as a single level\n                  numeric_imputation='median',\n           ignore_features=['Sample ID'],\n            date_features=['Sample Date'],\n             high_cardinality_features =['Beach Name'],           \n           fix_imbalance = True,\n            train_size = 0.8\n          )","ea2f0a79":"dt = create_model('dt')","4de23aab":"print(dt)","e61ff6c6":"tuned_dt = tune_model(dt,optimize = 'Precision')","50131d19":"plot_model(tuned_dt, plot = 'auc')","afb6b0b8":"plot_model(tuned_dt, plot = 'pr')","eb8a4d07":"plot_model(tuned_dt, plot='feature')","25f14dbb":"plot_model(tuned_dt, plot = 'confusion_matrix')","438a4b00":"evaluate_model(tuned_dt)","1aaf9979":"predict_model(tuned_dt)","317d27b3":"unseen_predictions = predict_model(tuned_dt, data=data_unseen)\nunseen_predictions.head()","f8f69bf4":"print(\"Confidence Score :   {}\".format(round(unseen_predictions.Score.mean(),2)))#Confidence Score","afb580e7":"# Sample Location"}}