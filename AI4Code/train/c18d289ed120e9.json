{"cell_type":{"47bcbcd7":"code","2c74d689":"code","80b1d579":"code","bc559cb2":"code","750a690a":"code","f589cd82":"code","7d9fc8df":"code","ccd39b45":"code","a5341951":"code","11c4bd46":"code","98bb1711":"code","ba7a68cb":"code","384ab80f":"code","e093bc30":"code","88afea18":"code","abec8b1f":"code","06a46bbb":"code","1146fef2":"code","7e079572":"code","841668b6":"markdown","88fe2fc2":"markdown","7f39e50c":"markdown","fab6b709":"markdown","60f25f4a":"markdown","c69d01ce":"markdown","98ee906c":"markdown","c34c7c8e":"markdown","d93c7116":"markdown","d66af6a0":"markdown","9d19cfed":"markdown","223b7109":"markdown","f08bf7af":"markdown","41a041ec":"markdown"},"source":{"47bcbcd7":"import pandas as pd\nimport numpy as np\nimport re\n\ncalendarDF=pd.read_csv(\"..\/input\/seattle\/calendar.csv\")\n\n#replacing NaN values with 0\ncalendarDF.fillna(0, inplace=True)\ncalendarDF = calendarDF[calendarDF.price != 0]\n\n#Extracting prices from the table\nprice = calendarDF['price']\nprices=[]\n\nfor p in price:\n    p = re.sub('[^0-9.]+','', p)\n    prices.append(float(p))\n    \n#replace the price column with the new column\ncalendarDF['price']=prices\n\ncalendarDF = calendarDF[calendarDF.price >= 0]\n\n#separating date column into day month and year\ncalendarDF['Year'],calendarDF['Month'],calendarDF['Day']=calendarDF['date'].str.split('-',2).str\ncalendarDF.head()\n","2c74d689":"yearDF=calendarDF.groupby(['Year','Month']).price.mean()\nyearDF=yearDF.reset_index()\nyearDF=yearDF.rename(columns={'price':'average_Price'})\nyearDF['year-Month']=yearDF['Year'].map(str) + \"-\" + yearDF['Month'].map(str)\nyearDF.to_csv('.\/year_month_data.csv')\nyearDF.head()","80b1d579":"%matplotlib inline\n\nimport matplotlib\nimport matplotlib.pyplot as plt\nmatplotlib.style.use('ggplot')\n\nobjects = yearDF['year-Month']\ny_pos = yearDF['average_Price']\n\nyearDF.plot(kind='bar', \n           x='year-Month',\n           y='average_Price',\n           color = '#66c2ff', \n           figsize =(15,8), \n           title = 'Seattle Airbnb prices trend over months', \n           legend = False)\nplt.ylabel('Average Price')\n","bc559cb2":"!pip install holidays","750a690a":"#getting day name from date data and holidays\n\nfrom datetime import date\nimport datetime\nimport calendar\nimport holidays\n\ncalendarDF.fillna(0, inplace=True)\nus_holidays = holidays.UnitedStates()\n\ncalendarDF['day_Name']='default'\ncalendarDF['holiday']='False'\ncalendarDF['us_holidays_name']='working'\nfor index,row in calendarDF.iterrows():\n    sdate = datetime.date(int(row['Year']),int(row['Month']),int(row['Day']))\n    vall=date(int(row['Year']),int(row['Month']),int(row['Day'])) in us_holidays\n    calendarDF.at[index,'day_Name'] = calendar.day_name[sdate.weekday()]\n    calendarDF.at[index,'holiday'] = vall\n    calendarDF.at[index,'us_holidays_name'] = us_holidays.get(sdate)\ncalendarDF.to_csv('.\/holidays_data.csv')\ncalendarDF.head()\n","f589cd82":"#calculating Average price for each day\n\ndayDF=calendarDF.groupby('day_Name').price.mean()\ndayDF=dayDF.reset_index()\ndayDF['day_num']=0\n\nfor index,row in dayDF.iterrows():\n    if row['day_Name']=='Monday':\n        dayDF.at[index,'day_num']=1\n    if row['day_Name']=='Tuesday':\n        dayDF.at[index,'day_num']=2\n    if row['day_Name']=='Wednesday':\n        dayDF.at[index,'day_num']=3\n    if row['day_Name']=='Thursday':\n        dayDF.at[index,'day_num']=4\n    if row['day_Name']=='Friday':\n        dayDF.at[index,'day_num']=5\n    if row['day_Name']=='Saturday':\n        dayDF.at[index,'day_num']=6\n    if row['day_Name']=='Sunday':\n        dayDF.at[index,'day_num']=7\ndayDF=dayDF.sort_values('day_num',ascending=[1])\ndayDF=dayDF.rename(columns={'price':'Average_Price'})\ndayDF","7d9fc8df":"import matplotlib.pyplot as plt\ndayname = list()\nfor i in dayDF['day_Name']:\n    dayname.append(i)\navgprice = list()\nfor i in dayDF['Average_Price']:\n    avgprice.append(i)\ngraph_input = dict(zip(dayname,avgprice))\n\nplt.scatter(dayname,avgprice)\nplt.show()\n","ccd39b45":"#checking which holiday has maximum listings\n\nholidayDF=calendarDF.groupby('us_holidays_name').listing_id.count()\nholidayDF=holidayDF.reset_index()\nholidayDF=holidayDF.sort_values('listing_id',ascending=[0])\nholidayDF","a5341951":"# visualizing the same\nimport seaborn as sns\nimport matplotlib.pyplot as plt","11c4bd46":"def show_plot(x,y,dataframe):\n    plt.figure(figsize=(19,10))\n    ax = sns.barplot(x, y, data=dataframe,palette=\"Blues_d\")\n    if y == 'listing_id':\n        y_label = \"Total Number of Listings\"\n    elif y == 'price':\n        y_label = \"Average Price\"\n    ax.set(xlabel='US Holidays Name', ylabel = y_label)","98bb1711":"# visualizing the same\nimport seaborn as sns\nimport matplotlib.pyplot as plt\nshow_plot(\"us_holidays_name\", \"listing_id\", holidayDF)","ba7a68cb":"holidayPriceDF=calendarDF.groupby('us_holidays_name').price.mean()\nholidayPriceDF=holidayPriceDF.reset_index()\nholidayPriceDF=holidayPriceDF.sort_values('price',ascending=[0])\n\nholidayPriceDF.head(10)","384ab80f":"show_plot(\"us_holidays_name\",\"price\",holidayPriceDF)","e093bc30":"merger=pd.merge(holidayDF,holidayPriceDF,on='us_holidays_name')\nmerger=merger.rename(columns={'listing_id':'number_Of_Listings'})\nmerger=merger.rename(columns={'price':'average_Price'})\nmerger","88afea18":"checkHolidaysDF=calendarDF[((calendarDF['Year'] == '2016')|(calendarDF['Year'] == '2017')) & ((calendarDF['Month'] == '07') |(calendarDF['Month'] == '08') )]\ncheckHolidaysDF=checkHolidaysDF.groupby(['Year','Month','holiday']).price.mean()\ncheckHolidaysDF=checkHolidaysDF.reset_index()\ncheckHolidaysDF.head()","abec8b1f":"#analyzing longweekednd holiday days\n\ncolumbusDF=calendarDF[(calendarDF['Year'] == '2016') & ((calendarDF['Month'] == '07' )) & ((calendarDF['Day'] == '05'))]\ncolumbusDF.groupby('Month').price.mean()\n# columbusDF","06a46bbb":"#analyzing rest of the days\n\nNocolumbusDF=calendarDF[(calendarDF['Year'] == '2016') & (calendarDF['Month'] == '07' ) & ((calendarDF['Day'] != '05'))]\nNocolumbusDF.groupby('Month').price.mean()","1146fef2":"# analyzing data from date 4th of July to date 13th of July which includes both long weekend and normal workdays\n\nmarDF=calendarDF[(calendarDF['Year'] == '2016') & (calendarDF['Month'] == '07' )& ((calendarDF['Day'] == '04' )|(calendarDF['Day'] == '05' )|(calendarDF['Day'] == '06' )| (calendarDF['Day'] == '07' )| (calendarDF['Day'] == '08' )| (calendarDF['Day'] == '09' )| (calendarDF['Day'] == '10' )| (calendarDF['Day'] == '11' )| (calendarDF['Day'] == '12' )| (calendarDF['Day'] == '13' ))]\nmarDF=marDF.groupby('Day').price.mean()\nmarDF=marDF.reset_index()\nmarDF=marDF.sort_values('Day',ascending=[1])\nmarDF=marDF.rename(columns={'price':'Average_Price'})\nmarDF.head(10)","7e079572":"import numpy as np\nimport matplotlib.pyplot as plt\n\nx=marDF['Day'].tolist()\ny=marDF['Average_Price'].tolist()\n\nplt.plot(x,y, 'ro-')\nplt.ylabel('Average Price')\nplt.xlabel('Days')\nplt.show()","841668b6":"It can be clearly seen that the maximum average prices for listings were in the month of July, 2016 and August, 2016.\nTo analyze the data further, I have extracted the day from given date and checked whether that particular day was a holiday and the reason for holiday.","88fe2fc2":"It can be seen that the average price of listings increases on weekends and are usual on weekdays. Let's plot it to get a better understanding","7f39e50c":"This step added 3 new columns day_Name, holiday and us_holidays_name.","fab6b709":"From this chart, we can see that Independence day (July 4) has maximum average prices. That is the reason for increase of prices in July","60f25f4a":"- It can be seen that the data is available from Jan 2016 to Jan 2017.\n- On analyzing, it is seen that maximum prices for listings were in the month of July. ","c69d01ce":"# Part-2\n## Business Understanding: \u201cWhat is the seasonal pattern of prices?\u201d\nIn this part we\u2019ll be looking at variation of prices at different times of the year and what time is better for a traveler to visit Seattle. For this part, I used calendar.csv data.","98ee906c":"It can be analyzed that on a long weekend the average price is 178.97 while for the whole month the average price was 168.6. Hence, this suggests that the price of listings increase with respect to the presence of weekend.","c34c7c8e":"It can be seen that the maximum number of listings is for New Year's Day because its a very popular holiday. Let's dig in further to find which holiday has the maximum average price.","d93c7116":"#### Cleaning the data","d66af6a0":"Hence, it can be seen that weekends have higher prices of listings.","9d19cfed":"#### Visualizing the trend of year\/Month and average prices of the listing","223b7109":"- It can be seen that the prices are fairly high for the weekends than that of weekdays. \n- Now let us dig into July 2016 and Aug 2016 data to find the reason behind increase in average prices. <br>\n#### Analyzing all the holidays","f08bf7af":"After adding up all the analyis done so far for observing seasonal changes in prices,it can be concluded that:\n\n- If a traveler is visiting Seattle on a low budget then he\/she should avoid visiting in July and August as these are the times when average price of listings are fairly high as compared to the other months. Additionally, the traveler should also avoid visiting Seattle during weekends as the prices are high compared to that of weekdays.","41a041ec":"Cleaning of data has been done and added new columns namely Year,Month and Day by splitting date.I analyzed the data by group it on the basis of Year and Month to see the trend of prices"}}