{"cell_type":{"139d7cc9":"code","e6a08260":"code","b41d4fb0":"code","2be9884f":"code","10890097":"code","ee317345":"code","09c49ae8":"code","23654adb":"code","cca4a884":"code","cf0918b1":"code","cbe9259b":"code","218ef5b6":"code","61037fb6":"code","2ada665a":"code","d9b69dc5":"code","9f22e032":"code","101e0d73":"code","839f83bf":"code","1c39bdb2":"code","0b739a51":"code","484ae515":"code","36096daf":"code","ed260b03":"markdown","73cd0df8":"markdown","7bc26d01":"markdown","48c412b4":"markdown","c5f5ce59":"markdown","8ca35166":"markdown","e07f251e":"markdown","8713302a":"markdown","52df1285":"markdown","6ad85471":"markdown"},"source":{"139d7cc9":"import numpy as np\nimport pandas as pd\nimport matplotlib.pyplot as plt","e6a08260":"PATH = '\/kaggle\/input\/data-science-bowl-2019\/'","b41d4fb0":"df_train = pd.read_csv(f'{PATH}train.csv')","2be9884f":"all_installation_ids = df_train['installation_id'].drop_duplicates()\nall_installation_ids.count()","10890097":"ids_to_keep = df_train[df_train.type == 'Assessment']['installation_id'].drop_duplicates()","ee317345":"df_train = pd.merge(df_train, ids_to_keep, on='installation_id', how='inner')","09c49ae8":"ids_to_keep.count()","23654adb":"sample_installation_ids = ids_to_keep.sample(800)\ndf_sample = pd.merge(df_train, sample_installation_ids, on='installation_id', how='inner')","cca4a884":"df_sample.describe()","cf0918b1":"df_sample.head()","cbe9259b":"df_sample['timestamp'] = pd.to_datetime(df_sample['timestamp'])","218ef5b6":"df_sample.groupby('installation_id') \\\n    .count()['event_id'] \\\n    .plot(kind='hist',\n          bins=100,\n          figsize=(15, 5),\n         title='Count of Observations by installation_id')\nplt.show()","61037fb6":"df_sample.groupby('type') \\\n    .count()['event_id'] \\\n    .plot(kind='barh',\n          figsize=(15, 5),\n         title='Count of Event Types')\nplt.show()","2ada665a":"for act_type in ['Assessment', 'Clip', 'Game', 'Activity']:\n    df_sample[df_sample['type'] == act_type].groupby('installation_id') \\\n        .count()['event_id']\\\n        .plot(kind='hist',\n            bins=100,\n            figsize=(12, 4),\n            title=f'{act_type} by installation_id')\n    plt.show()","d9b69dc5":"df_sample.groupby('installation_id')['timestamp']\\\n    .transform(lambda x: (x.max() - x.min()).days)\\\n    .plot(kind='hist',\n          bins=100,\n          figsize=(12, 4),\n          title=f'Time played by installation_id')\nplt.show()","9f22e032":"df_sample.groupby('installation_id')['game_session']\\\n    .transform(lambda x: x.nunique())\\\n    .plot(\n        kind='hist',\n        bins=100,\n        figsize=(12, 4),\n        title='Game sessions per installation id')\nplt.show()","101e0d73":"game_sessions = df_sample.groupby('installation_id')['game_session'].nunique()","839f83bf":"dates_plaid = df_sample.groupby('installation_id')['timestamp'].apply(lambda x: (x.max() - x.min()).days)","1c39bdb2":"plt.scatter(\n    dates_plaid, \n    game_sessions)\nplt.xlabel('days played')\nplt.ylabel('game sessions')\nplt.title('Game sessions vs days played')","0b739a51":"sample_session_length = df_sample.groupby('game_session')['timestamp']\\\n    .transform(lambda x: (x.max() - x.min()).delta \/ 60_000_000_000)\nsample_session_length = sample_session_length[sample_session_length <= 40]\n\nsample_session_length.plot(kind='hist',\n    bins=100,\n    figsize=(12, 4),\n    title=f'Session length in minutes (sessions under 40 minutes)')\nplt.show()","484ae515":"session_length = df_sample.groupby('game_session')['timestamp']\\\n    .apply(lambda x: (x.max() - x.min()).delta \/ 60_000_000_000)\nsession_count = df_sample.groupby('game_session')['event_id']\\\n    .apply(lambda x: x.count())","36096daf":"scatter_index = (session_length <= 120)\nplt.figure(figsize=(15, 9))\nplt.scatter(\n    session_length[scatter_index], \n    session_count[scatter_index], \n    alpha=0.05)\nplt.title('Game session length vs game event count')\nplt.xlabel('Game session length in minutes')\nplt.ylabel('Game event count')\nplt.show()","ed260b03":"### For how long is the game played at a time?\nSince we have the ID of an individual game session, we can analyze how long the game is played at a time","73cd0df8":"### How to Sample Consistently?\nI should probably sample from installation ids to keep all observations from one installation ID together. How can I do that?\n\nOh, its actually relatively simple, I take all the installation ids and then I sample from them.","7bc26d01":"### How man game sessions are there per installation_id?","48c412b4":"### How is the Correlation Between Play Time and Event Count?","c5f5ce59":"### How many cases do we have where there is a single assessment without prior events?","8ca35166":"### For how many days do kids play the game?","e07f251e":"### What Kinds of Events Do We Have?","8713302a":"let's keep 800 installation IDs to make our analysis run faster (~20% of them)","52df1285":"### How is the relationship between number of game sessions and days plaid?","6ad85471":"# Exploring Game Sessions and Installations (2019 DSB EDA)"}}