{"cell_type":{"9b1b0b76":"code","055bb841":"code","2dc04127":"code","f9731090":"code","3a9fb31b":"code","2527c796":"code","d78671b8":"code","dfcbd451":"code","070d3c65":"code","3b935aa4":"code","7e89b9e7":"code","2cb56a62":"code","ec4d0188":"code","c3dfe702":"code","7c82099e":"markdown","67c80810":"markdown","0e5a15c4":"markdown","6803d116":"markdown","2e2928fb":"markdown","bb84e928":"markdown","8db2c9f8":"markdown","b64e1eed":"markdown","111bc9f5":"markdown","be3dde9e":"markdown","b5c3e1c0":"markdown","1a61f6c7":"markdown","3a5679ff":"markdown","42e2da72":"markdown","7fcc8210":"markdown","a35670cb":"markdown","1faee720":"markdown","01f62a91":"markdown","4a7807ad":"markdown","93ea364a":"markdown"},"source":{"9b1b0b76":"import pandas as pd \nimport matplotlib.pyplot as plt \nplt.style.use('ggplot')\n\nfrom IPython.display import display_html","055bb841":"import os\nprint(os.listdir(\"..\/\"))","2dc04127":"data = pd.read_excel(\"..\/input\/Kaggle_Sirio_Libanes_ICU_Prediction.xlsx\")\n\ncomorb_lst = [i for i in data.columns if \"DISEASE\" in i]\ncomorb_lst.extend([\"HTN\", \"IMMUNOCOMPROMISED\", \"OTHER\"])\n\ndemo_lst = [i for i in data.columns if \"AGE_\" in i]\ndemo_lst.append(\"GENDER\")\n\nvitalSigns_lst = data.iloc[:,193:-2].columns.tolist()\n\nlab_lst = data.iloc[:,13:193].columns.tolist()","f9731090":"print(f\"Number of Comorbities features: {len(comorb_lst)}\") \nprint(f\"Number of Demographics features: {len(demo_lst)}\") \nprint(f\"Number of Vital Signs features: {len(vitalSigns_lst)}\") \nprint(f\"Number of Laboratory features: {len(lab_lst)}\") ","3a9fb31b":"# ID is a identification number for each patient.\nprint(f\"Number of lines in the dataset: {len(data)}\")\nprint(f\"Number of inpatients: {len(data.PATIENT_VISIT_IDENTIFIER.unique())}\")","2527c796":"print(data.WINDOW.unique())","d78671b8":"data.groupby(\"PATIENT_VISIT_IDENTIFIER\", as_index = False).agg({\"ICU\":(list), \"WINDOW\":list}).iloc[[13,14,15,41,0,2]]","dfcbd451":"aux = abs(data.groupby(\"PATIENT_VISIT_IDENTIFIER\")[\"ICU\"].sum()-5)\naux = aux.value_counts().reset_index()\naux.sort_values(by = \"index\", inplace = True)\naux.reset_index(drop = True, inplace = True)","070d3c65":"tot_icu_inpatients = aux.ICU[0:5].sum()\ny = aux.ICU[0:5].cumsum()\/tot_icu_inpatients\nplt.plot(y, marker = \".\")\n\nplt.ylabel\nplt.xlabel(\"Window\")\nplt.yticks(round(y,2) )\nplt.xticks([0,1,2,3,4], [\"0-2\", \"2-4\", \"4-6\", \"6-12\", \"Above-12\"])\nplt.show()","3b935aa4":"missing_df = data.groupby(\"WINDOW\").count()\/249","7e89b9e7":"missing_df[vitalSigns_lst]","2cb56a62":"df1_styler = missing_df[demo_lst].style.set_table_attributes(\"style='display:inline'\").set_caption('Demographics')\ndf2_styler = missing_df[comorb_lst].style.set_table_attributes(\"style='display:inline'\").set_caption('Comorbities')\n\ndisplay_html(df1_styler._repr_html_()+df2_styler._repr_html_(), raw=True)","ec4d0188":"data[data[\"PATIENT_VISIT_IDENTIFIER\"] == 1]","c3dfe702":"data[data[\"PATIENT_VISIT_IDENTIFIER\"] == 0]","7c82099e":"For instance, the inpatient 1 was ICU addmited at window \"0-2\". So, if a bigger window was selected lines 6 to 9 should **not** be used.","67c80810":"Of the 249 inpatiens 124 $(49\\%)$ experienced ICU admission,in which:\n\n* 28 patients in the 0-2 window  $(23\\%)$ \n\n* 14 patients in the 2-4 window  $(28+14 \\approx 34\\%)$     \n\n* 20 patients in the 4-6 window  $(28+14+20 \\approx 50\\%)$   \n\n* 13 patients in the 6-12 window $(28+14+20+13 \\approx 60\\%)$ \n\n* 49 patients in the ABOVE_12 window $(28+14+20+13+49 \\approx 100\\%)$ \n\n* $249 - 124 = 125$ did not experienced ICU admission.","0e5a15c4":"### Questions  ","6803d116":"### Loading data ","2e2928fb":"The following features were created for each **vital signs** and time window:\n\n* mean\n* median\n* min \n* max\n* amplitude (diff): max-min\n* relative amplitude (rel): amplitude\/median\n\nThe following features were created for each **laboratory exam** and time window:\n\n* mean\n* median\n* min \n* max\n* amplitude (diff): max-min","bb84e928":"Presentation of COVID-19 range from asymptomatic\/mild symptoms, which can be treated at home, to severe illness that requires hospitalization. Patients with severe COVID-19 may become critically ill (e.g. acute respiratory distress syndrome) in few days (or even in few hours) demanding lengthy mechanical ventilation and intensive care in ICU beds. Despite the efforts in the clinical management, those patients have increased risk of mortality during follow-up. On the other hand, the early identification of those who will develop an adverse illness course may potentially guide more appropriate therapies and care. Moreover, the prediction of patients who may need ICU beds helps healthcare system providers in the capacity need (human resources, PPE and professionals are available) based in the predicted COVID influx.","8db2c9f8":"There is no missing values for comorbities and demographics features","b64e1eed":"There are 4 groups of features:\n* **Demographics** ($N^{\\underline{o}}: 3$)\n    * Percentil Age.\n    * Above 65 years old.\n    * Gender.\n* **Comorbities**  ($N^{\\underline{o}}: 9$)\n  * The features were created based on the historical ICD-10 codes of each patient using the Charlson and Elixhauser range of comorbid conditions (https:\/\/pubmed.ncbi.nlm.nih.gov\/16224307\/\nhttps:\/\/pubmed.ncbi.nlm.nih.gov\/9431328\/). Here, we have chosen the comorbid groups related to serious adverse outcomes in COVID-19.\n\n* **Vital Signs**  ($N^{\\underline{o}}: 36$) \n  * Diastolic blood pressure.\n  * Systolic blood pressure.\n  * Heart rate.\n  * Respiratory rate.\n  * Temperature.\n  * Oxygen saturation.\n\n* **Laboratory**   ($N^{\\underline{o}}: 180$)\n  * There are 36 laboratorys types.\n\nThe outcome variable is ICU admission.","111bc9f5":"0 stands for negative and 1 for positive. \nPlease refer to the bellow example\n\n* Patient with ID 13 experienced ICU admission in the first 2 hours from Hospital admission (0-2). \n\n* Patient with ID 14 experienced ICU admission between 2 and 4 hours from Hospital admission (2-4). \n\n* Patient with ID 15 experienced ICU admission between 4  and 6 hours from Hospital admission (4-6). \n\n* Patient with ID 41 experienced ICU admission between 6  and 12 hours from Hospital admission (6-12). \n\n* Patient with ID 0 experienced ICU admission after 12 hours from Hospital admission (ABOVE_12). \n* Patient with ID 2 did not experienced ICU admission.","be3dde9e":"### Missing Data","b5c3e1c0":"The inpatient 0 was addmited at window \"Above-12\". So, it could be used any window size.","1a61f6c7":"* Can we predict which inpatient will need intensive care unit (ICU)?\n\n* Can we predict which inpatient will need intensive care unit (ICU) using only (Vital signs + Demographics)?\n* Can we predict which inpatient will need intensive care unit (ICU) using only (Laboratory exams + Demographics)?\n* Can we predict which inpatient will need intensive care unit (ICU) using only (Comorbities + Demographics)?\n\n* What is the best time window for each previous question. Justify. ","3a5679ff":"**Patient Encounter -> ICU admission -> Target (Yes | No)**","42e2da72":"From hospital admission, there are five time windows. Please, observe that there is a flag pointing out whether the patient was or not admitted in the ICU as well as his\/her vital signs and laboratory results in that window.","7fcc8210":"### Window example ","a35670cb":"Example (BLOODPRESSURE_DIASTOLIC_MEAN).\nHave at least one vital sign. \n\n* 0-2 = $36\\%$\n* 2-4 = $45\\%$\n* 4-6 = $53\\%$\n* 6-12 = $82\\%$\n* Above-12 = $100\\%$","1faee720":"### Features\/Outcome","01f62a91":"### Dataset structure","4a7807ad":"**Population selection**:\n\n* Only COVID cases (A COVID patient was defined as rt-PCR positive).\n\n* Only admitted inpatients.\n\n* Only known outcome (dispatched, death).","93ea364a":"### Introduction"}}