{"cell_type":{"7b871c49":"code","13d70269":"code","d300a88b":"code","29a55438":"code","90b6dd01":"code","a1f6ecd5":"code","08a9fc19":"code","add2b2e6":"code","c9f70832":"code","f29acc27":"code","246296d6":"code","05a230a7":"code","970b38e5":"code","a8ff7cb3":"code","4cd421c8":"code","099f416a":"code","2e69c705":"code","dbb3d7f6":"code","eccc529c":"code","bfd2ae3f":"code","bf67d2e8":"code","a43aaa89":"code","68cd13e7":"markdown","3abc4f4a":"markdown","2b5d408c":"markdown","a4f82594":"markdown","f5ef3208":"markdown","0803df42":"markdown","95da161b":"markdown","c03d8d7d":"markdown","7e0c8941":"markdown","715fcf88":"markdown","efd973b8":"markdown","7ab8caa5":"markdown","40227707":"markdown","214a560f":"markdown","8940e4bd":"markdown","024f1cad":"markdown","726063ec":"markdown","2ab5cb04":"markdown","401ae646":"markdown"},"source":{"7b871c49":"# \u4e0a\u306eWAP\u3092\u8a08\u7b97\n\nbidsize = 251\nasksize = 221\nbidprice = 147\naskprice = 148\n\n(bidprice * asksize + askprice * bidsize) \/ (bidsize + asksize)","13d70269":"import pandas as pd\nimport numpy as np\nimport plotly.express as px\ntrain = pd.read_csv('..\/input\/optiver-realized-volatility-prediction\/train.csv')\ntrain.head()","d300a88b":"# time_id\u304c5\u306e\u6642\u306estock_id=0\u306e\u53d6\u5f15\u30c7\u30fc\u30bf\n\nbook_example = pd.read_parquet('..\/input\/optiver-realized-volatility-prediction\/book_train.parquet\/stock_id=0')\ntrade_example =  pd.read_parquet('..\/input\/optiver-realized-volatility-prediction\/trade_train.parquet\/stock_id=0')\nstock_id = '0'\nbook_example = book_example[book_example['time_id']==5]\nbook_example.loc[:,'stock_id'] = stock_id\ntrade_example = trade_example[trade_example['time_id']==5]\ntrade_example.loc[:,'stock_id'] = stock_id","29a55438":"# \u30aa\u30fc\u30c0\u30fc\u30d6\u30c3\u30af\n\nbook_example.head()","90b6dd01":"# \u30c8\u30ec\u30fc\u30c9\u5c65\u6b74\n\ntrade_example.head()","a1f6ecd5":"# stock_id = 0\u306e\u9298\u67c4\u306e\u79fb\u52d5\u5e73\u5747\u3092\u56f3\u793a  \n# \u6a2a\u8ef8\u306f1\u79d2(second_in_bucket)\n\nbook_example['wap'] = (book_example['bid_price1'] * book_example['ask_size1'] +\n                                book_example['ask_price1'] * book_example['bid_size1']) \/ (\n                                       book_example['bid_size1']+ book_example['ask_size1'])","08a9fc19":"fig = px.line(book_example, x=\"seconds_in_bucket\", y=\"wap\", title='WAP of stock_id_0, time_id_5')\nfig.show()","add2b2e6":"def log_return(list_stock_prices):\n    return np.log(list_stock_prices).diff()","c9f70832":"# book_exsample\u306b\u4e0a\u3067\u4f5c\u6210\u3057\u305f\u79fb\u52d5\u5e73\u5747\u306e\u5dee\u5206(diff())\u306e\u5217\u3092\u4f5c\u6210\nbook_example.loc[:,'log_return'] = log_return(book_example['wap'])\n\n# \u53d6\u5f15\u304c\u884c\u308f\u308c\u3066\u3044\u306a\u3044\u79d2\u6570\u306f\u6b20\u640d\u3067\u5165\u308b\u305f\u3081\u3001\u3000Flase\u306evalue\u3092\u6d88\u3057\u3066\u518d\u4ee3\u5165\nbook_example = book_example[~book_example['log_return'].isnull()]","f29acc27":"book_example.head()","246296d6":"fig = px.line(book_example, x=\"seconds_in_bucket\", y=\"log_return\", title='Log return of stock_id_0, time_id_5')\nfig.show()","05a230a7":"# log_return\u306e\u4e8c\u4e57\u306e\u30eb\u30fc\u30c8\u304c\u30dc\u30e9\u30c6\u30a3\u30ea\u30c6\u30a3\u306b\u306a\u308b\u306e\u3067\u6c42\u3081\u308b\u95a2\u6570\ndef realized_volatility(series_log_return):\n    return np.sqrt(np.sum(series_log_return**2))\n\n# \u4eca\u56de\u306e\u30aa\u30fc\u30c0\u30fc\u30d6\u30c3\u30af\u306b\u9069\u7528\nrealized_vol = realized_volatility(book_example['log_return'])\nprint(f'Realized volatility for stock_id 0 on time_id 5 is {realized_vol}')","970b38e5":"import os\nfrom sklearn.metrics import r2_score\nimport glob\nlist_order_book_file_train = glob.glob('..\/input\/optiver-realized-volatility-prediction\/book_train.parquet\/*')","a8ff7cb3":"def realized_volatility_per_time_id(file_path, prediction_column_name):\n    # file\u3092\u3057\u3066\u3044\u3057\u3066dataframe\u306b\n    df_book_data = pd.read_parquet(file_path)\n    \n    # \u79fb\u52d5\u5e73\u5747\u3092\u8a08\u7b97\n    df_book_data['wap'] =(df_book_data['bid_price1'] * df_book_data['ask_size1']+df_book_data['ask_price1'] * df_book_data['bid_size1'])  \/ (\n                                      df_book_data['bid_size1']+ df_book_data[\n                                  'ask_size1'])\n    \n    # time_id\u6bce\u306bdataframe\u3092\u66f8\u304d\u63db\u3048\u308b\u3001\u305d\u306e\u5f8clog_retuen\u306e\u8a08\u7b97\u7d50\u679c\u3092\u30b7\u30ea\u30fc\u30ba\u3068\u3057\u3066\u5f97\u3066dataframe\u306b\u8ffd\u52a0\u3059\u308b\u3002\n    df_book_data['log_return'] = df_book_data.groupby(['time_id'])['wap'].apply(log_return)\n    \n    # null(\u5909\u5316\u304c\u306a\u3044)\u884c\u3092\u524a\u9664\n    df_book_data = df_book_data[~df_book_data['log_return'].isnull()]\n    \n    # time_id\u6bce\u306e\u30dc\u30e9\u30c6\u30a3\u30ea\u30c6\u30a3\u3092\u7b97\u51fa\u3057\u3001time_id\u306bindex\u3092\u7d10\u3065\u3051\u308b\n    df_realized_vol_per_stock =  pd.DataFrame(df_book_data.groupby(['time_id'])['log_return'].agg(realized_volatility)).reset_index()\n    \n    # \u7b2c\u4e8c\u5f15\u6570\u306e\u540d\u524d\u306b\u30dc\u30e9\u30c6\u30a3\u30ea\u30c6\u30a3\u3092\u6c42\u3081\u305f\u5217\u306e\u540d\u524d\u3092\u5909\u66f4\n    df_realized_vol_per_stock = df_realized_vol_per_stock.rename(columns = {'log_return':prediction_column_name})\n    \n    # path\u540d\u306e\u5f8c\u308d\u304cstock_id\u306a\u306e\u3067\u305d\u3053\u304b\u3089\u540d\u524d\u3092\u5f97\u308b\n    stock_id = file_path.split('=')[1]\n    \n    # \u540d\u524d\u3092stock_id - time_id \u306b\u5909\u66f4\n    df_realized_vol_per_stock['row_id'] = df_realized_vol_per_stock['time_id'].apply(lambda x:f'{stock_id}-{x}')\n    \n    # \u4e8c\u5217\u3092dataframe\u3068\u3057\u3066\u8fd4\u3059\n    return df_realized_vol_per_stock[['row_id',prediction_column_name]]","4cd421c8":"def past_realized_volatility_per_stock(list_file,prediction_column_name):\n    # \u7a7adataframe\u3092\u4f5c\u6210\n    df_past_realized = pd.DataFrame()\n    \n    # \u4e0a\u3067\u4f5c\u3063\u305f\u3082\u306e\u306b\u8ffd\u52a0\n    for file in list_file:\n        df_past_realized = pd.concat([df_past_realized,\n                                     realized_volatility_per_time_id(file,prediction_column_name)])\n        \n    return df_past_realized","099f416a":"# \u5168\u30c7\u30fc\u30bf\u3067df\u3092\u4f5c\u6210\ndf_past_realized_train = past_realized_volatility_per_stock(list_file=list_order_book_file_train,\n                                                           prediction_column_name='pred')","2e69c705":"df_past_realized_train.head()","dbb3d7f6":"df_past_realized_train.info()","eccc529c":"# train\u30d5\u30a1\u30a4\u30eb\u306brow_id\u306e\u5217\u3092\u8ffd\u52a0\n# pred\u306e\u5217\u3092\u8ffd\u52a0\ntrain['row_id'] = train['stock_id'].astype(str) + '-' + train['time_id'].astype(str)\ntrain = train[['row_id','target']]\ndf_joined = train.merge(df_past_realized_train[['row_id','pred']], on = ['row_id'], how = 'left')","bfd2ae3f":"df_joined.head()","bf67d2e8":"# RMSPE\u3068R^2\u3092\u8a08\u7b97\n\nfrom sklearn.metrics import r2_score\ndef rmspe(y_true, y_pred):\n    return  (np.sqrt(np.mean(np.square((y_true - y_pred) \/ y_true))))\nR2 = round(r2_score(y_true = df_joined['target'], y_pred = df_joined['pred']),3)\nRMSPE = round(rmspe(y_true = df_joined['target'], y_pred = df_joined['pred']),3)\nprint(f'Performance of the naive prediction: R2 score: {R2}, RMSPE: {RMSPE}')","a43aaa89":"# \u63d0\u51fa\u65b9\u6cd5\n\nlist_order_book_file_test = glob.glob('..\/input\/optiver-realized-volatility-prediction\/book_test.parquet\/*')\ndf_naive_pred_test = past_realized_volatility_per_stock(list_file=list_order_book_file_test,\n                                                           prediction_column_name='target')\ndf_naive_pred_test.to_csv('submission.csv',index = False)","68cd13e7":"# Optiver Realized Volatility Prediction\n# Introduction to financial concepts and data\n# DIscottion\u3067\u6700\u3082vote\u3055\u308c\u3066\u3044\u308b\u30ab\u30fc\u30cd\u30eb\n\n\u30b9\u30b3\u30a2\u306f\u9ad8\u304f\u306a\u3044\u304c\u3001\u5c0e\u5165\u3068\u3057\u3066\u8aad\u3080\u3053\u3068\u306b\u3059\u308b  \nOptiver\u306e\u30c7\u30fc\u30bf\u30b5\u30a4\u30a8\u30f3\u30c6\u30a3\u30b9\u30c8\u306b\u3088\u308b\u30c1\u30e5\u30fc\u30c8\u30ea\u30a2\u30eb\u30ce\u30fc\u30c8\u30d6\u30c3\u30af\n\n[\u30ea\u30f3\u30af](https:\/\/www.kaggle.com\/jiashenliu\/introduction-to-financial-concepts-and-data)","3abc4f4a":"### \u30dc\u30e9\u30c6\u30a3\u30ea\u30c6\u30a3(\u76ee\u7684\u5909\u6570)\u306e\u6c42\u3081\u65b9","2b5d408c":"# \u30aa\u30fc\u30c0\u30fc\u30d6\u30c3\u30af\n\n\u8cb7\u3044\u3068\u58f2\u308a\u306e\u4fa1\u683c\u306b\u3088\u308b\u65e5\u672c\u3067\u3044\u3046\u3068\u3053\u308d\u306e\u677f\u3002  \n\u5bc6\u5ea6\u304c\u9ad8\u3044\u3082\u306e\u306f\u983b\u7e41\u306b\u30c8\u30ec\u30fc\u30c9\u3055\u308c\u3066\u3044\u308b\u304b\u3001\u52d5\u304d\u304c\u6fc0\u3057\u3044\u3068\u307f\u306a\u305b\u308b\u3002  \n\n## \u7591\u554f\n\u72b6\u614b\u3092\u793a\u3059\u30c7\u30fc\u30bf\u306b\u306a\u308b\u306f\u305a\u3002\u66f4\u65b0\u30bf\u30a4\u30df\u30f3\u30b0\u306f\u30c7\u30fc\u30bf\u306e\u521d\u3081\u304b\u4f55\u304b\u3060\u308d\u3046\u304b??  \n","a4f82594":"## time_id\u306b\u3064\u3044\u3066\n\n\u8907\u6570\u306e10\u5206\u9593\u306e\u5e02\u5834\u30c7\u30fc\u30bf\u3092\u4f7f\u7528\u3057\u3066\u3001\u4e88\u6e2c\u3092\u7acb\u3066\u3066\u3082\u826f\u3044\u306e\u304b\u3002  \ntime_id\u306f\u6642\u9593\u3068\u30ea\u30f3\u30af\u3057\u3066\u3044\u306a\u3044\u306e\u3067\u540ctime_id\u3067\u306a\u3044\u3068\u4e88\u6e2c\u306f\u4e0d\u53ef\u80fd  ","f5ef3208":"- time_id  \n    \u6642\u9593id,\u540d\u524d\u306f\u6642\u9593\u306b\u306f\u95a2\u4fc2\u306a\u3044\u306e\u3067\u6ce8\u610f  \n- seconds_in_bucket  \n    \u79d2\u6570, 0\u304b\u3089\u7d76\u5bfe\u59cb\u307e\u308b\u3002\u52d5\u304d\u304c\u3042\u308b\u3068\u884c\u304c\u8ffd\u52a0\u3055\u308c\u308b\u3002  \n- bid_size1, bid_size2  \n    \u7af6\u4e89\u529b\u306e\u9ad8\u3044\u8cb7\u3044\u306e\u682a\u5f0f\u6570  \n    \u548c\u8a33\u304c\u96e3\u3057\u3044\u304c\u3001\u73fe\u5728\u4fa1\u683c\u306b\u8fd1\u3044\u8cb7\u3044\u682a\u5f0f\u6570\u306e\u4e8b  \n- ask_size1, ask_size2  \n    \u540c\u69d8\u306b\u58f2\u308a\u306e\u682a\u5f0f\u6570  \n- bid_price1, ask_price1, bid_price2, ask_price2   \n    \u6700\u5c0f\u306e\u8cb7\u5024\/ \u73fe\u5728\u306e\u4fa1\u683c\u3068\u6700\u5c0f\u304b\u3089\uff12\u756a\u76ee\u306e\u8cb7\u5024\/ \u73fe\u5728\u306e\u4fa1\u683c  \n    \u6700\u5927\u306e\u58f2\u5024 \/ \u73fe\u5728\u306e\u4fa1\u683c\u3068\u6700\u5927\u304b\u30892\u756a\u76ee\u306e\u58f2\u5024 \/ \u73fe\u5728\u306e\u4fa1\u683c  \n- stock_id  \n    \u9298\u67c4\u306eid","0803df42":"# \u30aa\u30fc\u30c0\u30fc\u30d6\u30c3\u30af\u7d71\u8a08\n\nOptiver\u306e\u30c7\u30fc\u30bf\u30b5\u30a4\u30a8\u30f3\u30c6\u30a3\u30b9\u30c8\u63a8\u5968\u306e\u30aa\u30fc\u30c0\u30d6\u30c3\u30af\u304b\u3089\u62bd\u51fa\u3067\u304d\u308b\u7d71\u8a08\u5024\u3002  \n\n## bid\/ask spread\n\n\u6700\u9ad8\u58f2\u5024\u3068\u6700\u4f4e\u8cb7\u5024\u306e\u6bd4\u7387\u3092\u3068\u3063\u3066\u8a08\u7b97\u3055\u308c\u308b\u5024\u3002  \n\u5c0f\u3055\u3044\u3068\u6d41\u52d5\u6027\u304c\u9ad8\u3044\u3068\u898b\u306a\u305b\u308b\u3002  \n\n$$BidAskSpread = BestOffer\/BestBid -1$$  \n\n## Weighted averaged price\n\u65e5\u672c\u8a9e\u306e\u52a0\u91cd\u5e73\u5747\u4fa1\u683c  \n100\u5186\u306e\u30b1\u30fc\u30ad\u3068200\u5186\u306e\u30b1\u30fc\u30ad\u30921\u500b\u305a\u3064\u8cb7\u3048\u3070\u3001\u5e73\u5747\u306f150\u5186\u3002\u3067\u306f100\u5186\u306e\u30b1\u30fc\u30ad\u30927\u500b\u3068200\u5186\u306e\u30b1\u30fc\u30ad\u30923\u500b\u8cb7\u3048\u3070\u3001\uff08100\u5186\u00d77\u500b\uff09\uff0b\uff08200\u5186\u00d73\u500b\uff09\uff1d1,300\u5186\u3002\u3053\u308c\u309210\u500b\u3067\u5272\u3063\u305f\u3089130\u5186\u306b\u306a\u308b\u3002  \n\u3053\u308c\u3092\u5148\u7a0b\u306e\u30aa\u30fc\u30c0\u30fc\u30d6\u30c3\u30af\u306b\u9069\u7528\u3057\u305f\u3082\u306e\u306b\u306a\u308b\u3002  \n\n$$WAP = \\frac{BidPrice_{1}*AskSize_{1} + AskPrice_{1}*BidSize_{1}}{BidSize_{1} + AskSize_{1}}$$\n\n## \u682a\u5f0f\u8a55\u4fa1\u984d\n\n\u52a0\u91cd\u5e73\u5747\u304c\u540c\u3058\u306a\u5834\u5408\u3067\u3082\u3001\u682a\u5f0f\u8a55\u4fa1\u984d\u306f\u7570\u306a\u308b\u3002  \n\u3068\u3044\u3046\u306e\u3082\u3001\u30aa\u30d5\u30a1\u30fc\u30b5\u30a4\u30ba\u304c\u5927\u304d\u3044\u5834\u5408\u305d\u306e\u5e02\u5834\u306b\u306f\u58f2\u308a\u624b\u304c\u591a\u304f\u5b58\u5728\u3059\u308b\u3053\u3068\u306b\u306a\u308b\u3002\u305d\u3046\u306a\u308b\u3068\u4e00\u822c\u7684\u306b\u682a\u306e\u4fa1\u5024\u306f\u4e0a\u304c\u308a\u3065\u3089\u304f\u7d50\u679c\u3068\u3057\u3066\u682a\u5f0f\u8a55\u4fa1\u984d\u306f\u5c0f\u3055\u304f\u306a\u308b\u3002\n","95da161b":"train\u306fparquet\u3068\u547c\u3070\u308c\u308b\u5f62\u3067\u683c\u7d0d\u3055\u308c\u3066\u3044\u308b\u3002  \n\u4e2d\u8eab\u306f\u3053\u3093\u306a\u611f\u3058  \n![Imgur](https:\/\/i.imgur.com\/KHv7zq1l.png)","c03d8d7d":"# \u30c8\u30fc\u30ec\u30c9\n\n\u5b9f\u969b\u306b\u58f2\u8cb7\u304c\u884c\u308f\u308c\u305f\u3042\u3068\u306e\u30aa\u30fc\u30c0\u30fc\u30d6\u30c3\u30af\u3068\u306e\u5dee\u3002  \n\u3068\u3044\u3046\u3088\u308a\u3001\u30c8\u30ec\u30fc\u30c9\u306b\u3088\u3063\u3066\u4e0a\u8a18\u30aa\u30fc\u30c0\u30fc\u30d6\u30c3\u30af\u306e\u5024\u304c\u5909\u5316\u3059\u308b\u3053\u3068\u306b\u306a\u308b\u3002  \n\u65e5\u672c\u3068\u540c\u3058\u3067\u3001\u6700\u4f4e\u58f2\u5024\u304b\u3089\u8cb7\u308f\u308c\u308b\u3002  \n\n\u4e0b\u306e\u30aa\u30fc\u30c0\u30fc\u30d6\u30c3\u30af\u306e\u5834\u5408\u3001  \n\u4fa1\u683c : 148\u3001\u3000\u6570\u91cf : 20  \n\u306e\u30c8\u30fc\u30ec\u30c9\u304c\u884c\u308f\u308c\u305f\u3068\u63a8\u6e2c\u3067\u304d\u308b\u3002\n\n![Imgur](https:\/\/i.imgur.com\/16Qt255l.png)\n![Imgur](https:\/\/i.imgur.com\/jTuN081l.png)","7e0c8941":"## \u79fb\u52d5\u5e73\u5747\u306b\u3064\u3044\u3066\nbid*bid + ask*ask \/ ask + bit\u3000\u3058\u3083\u306a\u3044\u306e\uff1f  \n\u8cb7\u3044\u624b\u304c\u58f2\u308a\u624b\u3088\u308a\u3082\u591a\u3044\u5834\u5408\uff08bid_size >> ask_size\uff09\u3001\u4fa1\u683c\u304c\u4e0a\u6607\u3059\u308b\u3053\u3068\u304c\u4e88\u60f3\u3055\u308c\u3001\u8cb7\u3044\u624b\u304c\u591a\u3051\u308c\u3070\u591a\u3044\u307b\u3069\u3001WAP\u306fask_price\u306b\u8fd1\u3065\u304f\u3068\u3055\u308c\u3066\u3044\u308b\u3002  \n\u3082\u3057\u304b\u3057\u305f\u3089\u7279\u5fb4\u91cf\u306b\u3067\u304d\u308b\u304b\u3082","715fcf88":"## Realized volatility calculation\n### 1\u79d2\u3042\u305f\u308a\u306e\u79fb\u52d5\u5e73\u5747\n$$WAP = \\frac{BidPrice_{1}*AskSize_{1} + AskPrice_{1}*BidSize_{1}}{BidSize_{1} + AskSize_{1}}$$","efd973b8":"# Realized volatility\n\nLog return\u306e\u6a19\u6e96\u504f\u5dee\u3092\uff11\u5e74\u9593\u3068\u307f\u306a\u3057\u3066\u8a08\u7b97\u3059\u308b\u5e74\u9593\u6a19\u6e96\u504f\u5dee\u3092\u30dc\u30e9\u30c6\u30a3\u30ea\u30c6\u30a3\u3068\u3088\u3076\u3002  \n\u4eca\u56de\u306e\u76ee\u7684\u5909\u6570\u3002  \n$$\\sigma = \\sqrt{\\sum_{t}r_{t-1, t}^2}$$\n10\u5206\u523b\u307f\u3067Log return\u3092\u6c42\u3081\u3066\u3001\u305d\u308c\u3092\u4e00\u5e74\u5358\u4f4d\u3067\u884c\u3044\u6a19\u6e96\u504f\u5dee\u3092\u6c42\u3081\u308b\u3002  \n\n\u30b7\u30f3\u30d7\u30eb\u306aLog return\u3068\u306f\u9055\u3044\u3001\u6a19\u6e96\u504f\u5dee\u306b\u306a\u308b\u306e\u3067\u6700\u7d42\u5909\u52d5\u304c0\u3067\u3042\u3063\u3066\u308210\u5206\u523b\u307f\u3067\u52d5\u304d\u304c\u6fc0\u3057\u3051\u308c\u3070\u30dc\u30e9\u30c6\u30a3\u30ea\u30c6\u30a3\u306f\u9ad8\u3044\u5024\u3092\u3068\u308b\u3002  \n\u3064\u307e\u308a\u6d41\u52d5\u6027\u304c\u9ad8\u304f\u3001\u3044\u3044\u5e02\u5834\u306b\u306a\u3063\u3066\u3044\u308b\u3068\u3044\u3048\u308b\u3002","7ab8caa5":"# \u6700\u5f8c\u306b\n\u5b9f\u969b\u306b\u63d0\u51fa\u3057\u305f\u969b\u306e\u30d1\u30d6\u30ea\u30c3\u30af\u30ea\u30fc\u30c0\u30fc\u30dc\u30fc\u30c9\u306e\u5024\u306f\u904e\u53bb\u306e\u5e02\u5834\u306e\u30c7\u30fc\u30bf\u3068\u306a\u308b\u304c\u3001\u4eca\u56de\u4e88\u6e2c\u3059\u308b\u306e\u306f\u672a\u6765\u306e\u30c7\u30fc\u30bf\u306b\u306a\u308b\u306e\u3067\u30d7\u30e9\u30a4\u30d9\u30fc\u30c8\u30ea\u30fc\u30c0\u30fc\u30dc\u30fc\u30c9\u306e\u5024\u3068\u306f\u5927\u304d\u304f\u7570\u306a\u308b\u3002  \n\u30d1\u30d6\u30ea\u30c3\u30af\u3067\u3044\u3044\u30b9\u30b3\u30a2\u304c\u51fa\u3066\u3082\u5927\u304d\u306a\u610f\u5473\u3092\u306a\u3055\u306a\u3044....  \n\u3068\u3044\u3046\u304btest\u306b\u306f3\u3064\u306e\u30c7\u30fc\u30bf\u3057\u304b\u5165\u3063\u3066\u304a\u3089\u305a\u3001\u5b9f\u969b\u306b\u63d0\u51fa\u3057\u3066\u307f\u3066\u306e\u30b9\u30b3\u30a2\u3092\u307f\u308b\u5fc5\u8981\u304c\u3042\u308b\u304c\u3001\u3069\u306e\u7a0b\u5ea6\u306e\u30c7\u30fc\u30bf\u91cf\u3067\u691c\u8a3c\u3055\u308c\u3066\u3044\u308b\u306e\u3060\u308d\u3046....  \n\u904e\u5b66\u7fd2\u6291\u5236\u304c\u5927\u304d\u306a\u554f\u984c\u306b\u306a\u308a\u305d\u3046","40227707":"## \u4e88\u6e2c\n\u30dc\u30e9\u30c6\u30a3\u30ea\u30c6\u30a3\u306b\u3064\u3044\u3066\u4e00\u822c\u7684\u306b\u77e5\u3089\u308c\u3066\u3044\u308b\u4e8b\u5b9f\u306f\u3001\u81ea\u5df1\u76f8\u95a2\u3059\u308b\u50be\u5411\u304c\u3042\u308b\u3002\u3053\u306e\u7279\u6027\u3092\u5229\u7528\u3057\u3066\u3001\u6700\u521d\u306e10\u5206\u9593\u306e\u5b9f\u73fe\u30dc\u30e9\u30c6\u30a3\u30ea\u30c6\u30a3\u30fc\u3092\u4f7f\u7528\u3057\u3066\u3001\u5b9f\u73fe\u30dc\u30e9\u30c6\u30a3\u30ea\u30c6\u30a3\u30fc\u3092\u300c\u4e88\u6e2c\u300d\u3059\u308b\u30ca\u30a4\u30fc\u30d6\u30e2\u30c7\u30eb\u3092\u5b9f\u88c5\u3059\u308b  \n\u307e\u305f\u3001\u30e1\u30e2\u30ea\u524a\u6e1b\u306e\u305f\u3081\u5404\u9298\u67c4(stock_id)\u6bce\u306b\u8a08\u7b97\u3059\u308b\u5fc5\u8981\u304c\u3042\u308b\u3002\u305d\u308c\u3092\u307e\u3068\u3081\u3066\u3001\u63d0\u51fa\u3092\u884c\u3046\u3002","214a560f":"- price  \n    1\u79d2\u9593\u306b\u53d6\u5f15\u304c\u6210\u7acb\u3057\u305f\u5e73\u5747\u4fa1\u683c\u3002  \n    \u4fa1\u683c\u306f\u53d6\u5f15\u304c\u6210\u7acb\u3057\u305f\u682a\u5f0f\u6570\u3068\u91d1\u984d\u306e\u5e73\u5747\u5024\u3067\u52a0\u91cd\u5e73\u5747\u3092\u53d6\u3063\u305f\u3082\u306e\u3067\u6b63\u898f\u5316\u3055\u308c\u3066\u3044\u308b\n- size  \n    price\u306e\u4fa1\u683c\u3067\u3044\u304f\u3064\u306e\u682a\u5f0f\u6570\u304c\u53d6\u5f15\u3055\u308c\u305f\u304b  \n- order_count  \n    \u53d6\u5f15\u6ce8\u6587\u306e\u6570","8940e4bd":"# Market making and market efficiency\n\n![Imgur](https:\/\/i.imgur.com\/f5TOZJCl.png)\n\n\u4e0a\u306e\u8868\u306e\u5e02\u5834\u306e\u5834\u5408\u6d41\u52d5\u6027(\u52b9\u7387\u3068\u3082\u547c\u3070\u308c\u3066\u308b)\u306f\u4f4e\u3044\u3068\u3044\u3048\u308b\u3002  \n\u4fa1\u683c : 148  \n\u3067\u306f\u8cb7\u3048\u305a\u3001\u5f85\u3061\u306e\u72b6\u614b\u306b\u306a\u308b\u3002  \n\u4fa1\u683c : \u554f\u308f\u306a\u3044, \u6570\u91cf : 20 \u306e\u6ce8\u6587\u3092\u51fa\u3057\u305f\u5834\u5408  \n149 : 1  \n150 : 12  \n151 : 7  \n\u3068\u306a\u308a\u3001\u5e0c\u671b\u901a\u308a\u306e\u53d6\u5f15\u306f\u3067\u304d\u306a\u3044\u3002\u3053\u308c\u3092\u975e\u52b9\u7387\u7684\u306a\u5e02\u5834\u3068\u547c\u3076\u3002  \n\u3053\u308c\u3092\u89e3\u6c7a\u3055\u305b\u308b\u306e\u304c\u3001***\u30de\u30fc\u30b1\u30c3\u30c8\u30e1\u30fc\u30ab\u30fc***\u3068\u547c\u3070\u308c\u308b\u5b58\u5728\u306b\u306a\u308b\u3002  \n\u91d1\u878d\u6a5f\u95a2\u304c\u6d41\u52d5\u6027\u78ba\u4fdd\u306e\u305f\u3081\u306b\u3001\u3053\u3046\u3044\u3063\u305f\u682a\u306b\u5bfe\u3057\u3066\u58f2\u8cb7\u6c17\u914d\u7f6e\u3092\u793a\u3059\u3053\u3068\u3002\uff08\u56fd\u304b\u3089\u306e\u547d\u4ee4\uff09  \n\u3053\u308c\u306b\u3088\u3063\u3066\u4e00\u5b9a\u306e\u6d41\u52d5\u6027\u304c\u4fdd\u305f\u308c\u308b\u3002","024f1cad":"## \u8003\u5bdf\ntrain\u306b\u5165\u3063\u3066\u3044\u308b\u30c7\u30fc\u30bf\u306fstock_id\u306b\u5bfe\u3057\u3066600\u79d2(10\u5206\u3057\u304b\u306a\u3044)  \n\u3053\u306e\u30c7\u30fc\u30bf\u3067\u3000\u6b21\u306b\u6765\u308b600\u79d2\u306e\u30dc\u30e9\u30c6\u30a3\u30ea\u30c6\u30a3\u3092\u4e88\u6e2c\u3059\u308b\u3068\u3044\u3046\u306e\u304c\u4eca\u56de\u306e\u76ee\u7684\u306b\u306a\u308b\u3002  \n\u4e0a\u306e\u30b9\u30b3\u30a2\u306f\u524d\u306e600\u79d2\u306e\u30dc\u30e9\u30c6\u30a3\u30ea\u30c6\u30a3\u3092\u305d\u306e\u307e\u307e\u6b21\u306e600\u79d2\u306e\u30dc\u30e9\u30c6\u30a3\u30ea\u30c6\u30a3\u3068\u3057\u3066\u4e88\u6e2c\u3057\u305f\u969b\u306e\u30b9\u30b3\u30a2\u306b\u306a\u308b\u3002","726063ec":"# Competition data","2ab5cb04":"# \u3053\u306e\u30ab\u30fc\u30cd\u30eb\u306b\u3064\u3044\u3066\u3044\u305f\u30b3\u30e1\u30f3\u30c8","401ae646":"# Log retuen\n\n\u682a\u4fa1\u306e\u5272\u5408\u306e\u6bd4\u7387\u3092\u5bfe\u6570\u3067\u53d6\u3063\u305f\u3082\u306e\u3002  \n$$r_{t_1, t_2} = \\log \\left( \\frac{S_{t_2}}{S_{t_1}} \\right)$$\n$S_t $ : \u3042\u308b\u6642\u9593$t$\u3067\u306e\u682a\u4fa1\u683c$S$\n\n\u57fa\u672c\u7684\u306b\u306f10\u5206\u304c\u76ee\u5b89\u3068\u306a\u308b\u3002\u307e\u305f\n- \u6642\u9593\u3092\u307e\u305f\u3044\u3067\u52a0\u6cd5\u7684\u3067\u3042\u308b $r_{t1},r_{t2}+r_{t2},r_{t3}=r_{t1},r_{t3} $\n- \u901a\u5e38\u306e\u30ea\u30bf\u30fc\u30f3\u306f-100%\u4ee5\u4e0b\u306b\u306f\u306a\u3089\u306a\u3044\u304c\u3001Log return\u306f\u5883\u754c\u304c\u306a\u3044\n\nLog\u306e\u56f3  \n\u4fa1\u683c\u304c\u843d\u3061\u305f\u5834\u5408\u3001r\u306f\u5c11\u6570\u306b\u306a\u308b\u306e\u3067y\u306f-\u306e\u5024\u3092\u53d6\u308b\u3002  \n\u4fa1\u683c\u304c\u4e0a\u304c\u3063\u305f\u5834\u5408.r\u306f\u81ea\u7136\u6570\u306b\u304a\u306a\u308b\u306e\u3067y\u306f+\u306e\u5024\u3092\u53d6\u308b\u3002  \n\u3082\u3057\u6700\u7d42\u7684\u306b\u5909\u5316\u304c\u306a\u3051\u308c\u3070\u30010\u3092\u53d6\u308b\u3002\n\n![Imgur](https:\/\/i.imgur.com\/PieGDUqh.png)"}}