{"cell_type":{"99eedfad":"code","52c82abf":"code","5cd676c9":"code","6458f26a":"code","0fd69546":"code","12ceb2f0":"code","cc285194":"code","53b56f4e":"code","d874f9a1":"code","d50bee36":"code","f13cdbc7":"code","ae6f4032":"code","a488bf8c":"code","b06359da":"code","07ae9269":"code","9c836b13":"code","ecf89f39":"code","5fb3f277":"code","dbda161d":"code","a3a2fda4":"code","160b4af2":"code","70c43b52":"code","4e58d156":"code","f68a9b4a":"code","710663a7":"code","4f8c1a5e":"markdown","bb4c0fa4":"markdown","f1617b6f":"markdown","63bca1b4":"markdown","1cb0aaa5":"markdown","a61334fb":"markdown","13abd5a7":"markdown","a8389847":"markdown","78b789cf":"markdown","a2168ce5":"markdown","47aeeb18":"markdown","3b89468c":"markdown","a43c8c1d":"markdown","4418b9a2":"markdown","e4e6c7eb":"markdown","fca57a79":"markdown","d117fe77":"markdown","cb0df8e1":"markdown","51a7b282":"markdown","c9d44f4c":"markdown","3c8d68a1":"markdown","9b95ed07":"markdown","e59924eb":"markdown","6101c96a":"markdown","f6cd72c2":"markdown"},"source":{"99eedfad":"# This Python 3 environment comes with many helpful analytics libraries installed\n# It is defined by the kaggle\/python docker image: https:\/\/github.com\/kaggle\/docker-python\n# For example, here's several helpful packages to load in \n\nimport numpy as np # linear algebra\nimport pandas as pd # data processing, CSV file I\/O (e.g. pd.read_csv)\npd.plotting.register_matplotlib_converters()\nimport matplotlib.pyplot as plt\n%matplotlib inline\nimport seaborn as sns\n# Input data files are available in the \"..\/input\/\" directory.\n# For example, running this (by clicking run or pressing Shift+Enter) will list all files under the input directory\nfrom sklearn.metrics import mean_absolute_error\nfrom sklearn.tree import DecisionTreeRegressor\nimport os\nfor dirname, _, filenames in os.walk('\/kaggle\/input'):\n    for filename in filenames:\n        print(os.path.join(dirname, filename))\nprint (\"Set up complete\")\n# Any results you write to the current directory are saved as output.","52c82abf":"df = pd.read_csv(\"..\/input\/lianjia\/new.csv\",encoding='gbk')","5cd676c9":"df.describe()","6458f26a":"df.dtypes","0fd69546":"#\u63d0\u53d6\u4ea4\u6613\u5e74\u4efd\u5355\u72ec\u4f5c\u4e3a\u4e00\u5217:\ndf['tradeyear']=df.tradeTime.astype(str).str[0:4]","12ceb2f0":"#\u53bb\u9664livingRoom\u4e2d\u7684\u5f02\u5e38\u6570\u503c\uff0c\u66f4\u6539\u6570\u636e\u7c7b\u578b\ndf=df.loc[df.livingRoom!='#NAME?',:]\ndf.livingRoom=df.livingRoom.astype('int64')\ndf.livingRoom.value_counts()","cc285194":"#\u7edf\u4e00drawingRoom,bathRoom\u7684\u6570\u636e\u4e3a\u6574\u6570\ndf.drawingRoom=df.drawingRoom.astype('int64')\ndf.bathRoom=df.bathRoom.astype('int64')","53b56f4e":"#\u5c06floor\u5217\u4e2d\u7684\u6c49\u5b50\u53bb\u9664\uff0c\u4fdd\u7559\u697c\u5c42\u6570\u4e3a\u6574\u6570\ndf.floor=df.floor.apply(lambda df:df.split()[1])\ndf.floor=df.floor.astype('int64')","d874f9a1":"#\u5c06'constructionTime'\u5217\u4e2d\u7684\u672a\u77e5\u9879\u8df3\u8fc7,\u53ea\u8003\u86511950\u52302016\u5e74\u5efa\u6210\u7684\u623f\u5b50:\ndf.constructionTime=df.constructionTime.replace('\u672a\u77e5','9999').astype('int64')\ndf=df.loc[(df.constructionTime>=1950)&(df.constructionTime<=2016),:]","d50bee36":"df.head()","f13cdbc7":"df_year=df.groupby('tradeyear').price.mean()\nsns.lineplot(data=df_year)","ae6f4032":"#\u770b\u4e00\u4e0b\u6570\u636e\u5e93\u4e2d\u5386\u5e74\u4ea4\u6613\u8bb0\u5f55\u6570\u91cf\uff0c\u53d1\u73b02016\u5e74\u7684\u4ea4\u6613\u8bb0\u5f55\u6700\u4e3a\u9f50\u5168\ndf.tradeyear.value_counts()","a488bf8c":"df_2016=df.loc[df.tradeyear=='2016',:]","b06359da":"plt.figure(figsize=(5,5))\nsns.scatterplot(x=df_2016['Lng'],y=df_2016['Lat'],hue=df_2016['price'])","07ae9269":"sns.distplot(a=df_2016['square'],kde=False)","9c836b13":"sns.scatterplot(x=df_2016['square'],y=df_2016['followers'])","ecf89f39":"sns.distplot(a=df_2016['livingRoom'],kde=False,label='livingRoom_Num')\nsns.distplot(a=df_2016['bathRoom'],kde=False,label='bathRoom_Num')\nplt.xlabel('Room_Num')\nplt.ylabel('Qty')\nplt.legend()","5fb3f277":"livingRoom_Num=df_2016.groupby('livingRoom').price.mean()\nsns.barplot(x=livingRoom_Num.index,y=livingRoom_Num)","dbda161d":"sns.distplot(a=df_2016['constructionTime'],kde=False)","a3a2fda4":"plt.figure(figsize=(30,3))\nConstructionTime_price=df_2016.groupby('constructionTime').price.mean()\nsns.barplot(x=ConstructionTime_price.index,y=ConstructionTime_price)","160b4af2":"df_2016_filtered=df_2016.dropna(axis=0)\ny=df_2016_filtered.price\nPredict_features=['Lng','Lat','Cid','livingRoom','bathRoom','constructionTime','buildingType','renovationCondition','subway']\nX=df_2016_filtered[Predict_features]\nfrom sklearn.model_selection import train_test_split\ntrain_X, val_X, train_y, val_y = train_test_split(X, y,random_state = 0)","70c43b52":"def get_mae(max_leaf_nodes,train_X,train_y):\n    model=DecisionTreeRegressor(max_leaf_nodes=max_leaf_nodes,random_state=0)\n    model.fit(train_X,train_y)\n    pred_val=model.predict(val_X)\n    mae=mean_absolute_error(pred_val,val_y)\n    return(mae)","4e58d156":"for max_leaf_nodes in [500,1000,2000,3000,5000]:\n    my_mae=get_mae(max_leaf_nodes,train_X,train_y)\n    print(\"Max_leaf_nodes:%d \\t Mean absolute error:%d\"%(max_leaf_nodes,my_mae))","f68a9b4a":"final_model=DecisionTreeRegressor(max_leaf_nodes=1000,random_state=1)\nfinal_model.fit(X,y)\nfinal_pred=final_model.predict(X)\nfinal_mae=mean_absolute_error(final_pred,y)\nprint(final_mae)","710663a7":"\u6839\u636e\u6b64\u7b97\u6cd5\uff0c\u5e73\u5747\u9884\u6d4b\u5f97\u7684\u623f\u4ef7\u4e0e\u5b9e\u96452016\u5e74\u623f\u4ef7\u8bef\u5dee\u5e73\u5747\u4e3a6794\u5143\u3002","4f8c1a5e":"> \u7531\u6b64\u56fe\u53ef\u4ee5\u770b\u5230\u5317\u4eac\u5e02\u5747\u4ef7\u57282010\u5e74\u524d\u540e\u4e3a\u6700\u4f4e\uff0c\u968f\u540e\u4e00\u8def\u4e0a\u6da8\uff0c2017\u5e74\u8fbe\u5230\u9ad8\u5cf0\uff0c\u968f\u540e\u5411\u4e0b\u5c0f\u5e45\u6ce2\u52a8\u3002","bb4c0fa4":"> \u521d\u6b65\u89c2\u5bdf\u6570\u636e\u5e93\u7684\u5927\u81f4\u5206\u5e03\u60c5\u51b5:","f1617b6f":"> 3.\u5317\u4eac\u5386\u5e74\u7684\u5747\u4ef7\u8d70\u52bf:","63bca1b4":"> 4.\u5730\u6bb5\u5bf9\u623f\u5b50\u4ea4\u6613\u4ef7\u683c\u7684\u5f71\u54cd","1cb0aaa5":"> \u4e3a\u907f\u514d\u51fa\u73b0\u7b97\u6cd5\u8fc7\u5ea6\u62df\u5408\u6216\u62df\u5408\u4e0d\u8db3\u7684\u60c5\u51b5\uff0c\u5b9a\u4e49\u7b97\u6cd5\u6821\u9a8c\u51b3\u7b56\u6811\u6a21\u578b\uff0c\u5df2\u627e\u5230\u6700\u4f73\u7b97\u6cd5\u53c2\u6570:","a61334fb":"> \u5728\u5176\u5b83\u5206\u6790\u5f00\u59cb\u524d\uff0c\u9996\u5148\u6574\u4f53\u770b\u4e00\u4e0b\u5317\u4eac\u5e02\u4e8c\u624b\u5e02\u573a\u7684\u5386\u5e74\u6574\u4f53\u5747\u4ef7\u53d8\u5316\u60c5\u51b5:","13abd5a7":"> \u9996\u5148\u8f7d\u5165\u672c\u6b21\u5206\u6790\u7528\u5230\u7684Python\u6a21\u7ec4\uff08Pandas,Numpy,sklearn,seaborn\u7b49\uff09:","a8389847":"> \u8fdb\u4e00\u6b65\u770b\u4e00\u4e0b\u5367\u5ba4\/\u6d17\u624b\u95f4\u7684\u6570\u91cf\u5206\u5e03:","78b789cf":"> \u53ef\u4ee5\u770b\u5230\u5317\u4eac\u6838\u5fc3\u533a\u57df\u7684\u5206\u5e03\u60c5\u51b5\uff08\u4ee5\u5929\u5b89\u95e8\u4e3a\u4e2d\u5fc3\u5411\u5916\u8f90\u5c04\uff09\uff0c\u96c6\u4e2d\u533a\u57df\u5747\u4ef7\u8d85\u8fc7\u5341\u4e07\u3002","a2168ce5":"> \u53ef\u4ee5\u770b\u5230\u4e24\u5367\/\u4e00\u536b\u7684\u6237\u578b\u6570\u91cf\u6700\u591a\uff0c\u5367\u5ba4\u6570\u91cf\u57fa\u672c\u4e3a1~3\u5ba4\u3002","47aeeb18":"> 5.\u5317\u4eac\u623f\u4ef7\u9884\u6d4b:","3b89468c":"> \u5927\u5bb6\u597d\uff0c\u6211\u662f\u5362\u51a0\u9e4f\uff0c\u672c\u6b21\u6848\u4f8b\u901a\u8fc7\u4f7f\u7528\u5317\u4eac\u7684\u94fe\u5bb6\u4e8c\u624b\u623f\u6570\u636e\u5e93\uff0c\u7814\u7a76\u4e86\u623f\u578b\u7ed3\u6784\/\u623f\u9f84\/\u9762\u79ef\/\u57ce\u90ca\u65f6\u95f4\u7684\u96c6\u4e2d\u8d8b\u52bf\u4ee5\u53ca\u5bf9\u6210\u4ea4\u4ef7\u683c\u7684\u5f71\u54cd\u3002\u5e76\u5f15\u5165\u673a\u5668\u5b66\u4e60\u7684\u51b3\u7b56\u6811\u7b97\u6cd5\u6765\u9884\u6d4b\u623f\u4ef7\uff0c\u8fdb\u884c\u6a21\u578b\u8bc4\u4f30\u4ee5\u53ca\u6821\u51c6\uff0c\u4ee5\u5f97\u5230\u5bf9\u4e8e\u5317\u4eac\u623f\u4ef7\u7684\u6700\u4f73\u9884\u6d4b\u3002","a43c8c1d":"> 2.\u6570\u636e\u6e05\u6d17","4418b9a2":"> \u7531\u4e0a\u7ed3\u679c\u53ef\u89c1\uff0c\u5f53\u51b3\u7b56\u6811\u8282\u70b9\u6570\u91cf\u4e3a1000\u65f6\uff0c\u62df\u5408\u7ed3\u679c\u8bef\u5dee\u6700\u5c0f:\n\u6700\u7ec8\u7ed3\u679c\u62df\u5408\u5982\u4e0b:","e4e6c7eb":"> \u672c\u6b21\u623f\u4ef7\u9884\u6d4b\u7684\u6a21\u578b\u57fa\u4e8e\u51b3\u7b56\u6811\u7b97\u6cd5\uff0c\u5e76\u57fa\u4e8e\u7b97\u6cd5\u62df\u5408\u7ed3\u679c\u8fdb\u884c\u8c03\u8bd5\uff0c\u4f7f\u62df\u5408\u7ed3\u679c\u66f4\u52a0\u7cbe\u786e:","fca57a79":"> \u901a\u8fc7\u9010\u5e74\u6bd4\u8f83\u4e0d\u540c\u623f\u9f84\u7684\u6210\u4ea4\u5747\u4ef7\uff08\u5efa\u6210\u5e74\u4efd\u4e3a\u6a2a\u8f74\uff09\uff0c\u53d1\u73b0\u623f\u5b50\u7684\u5747\u4ef7\u4e0e\u623f\u9f84\u5e76\u65e0\u592a\u5927\u5173\u8054\uff0c\u751a\u81f3\u6709\u9ad8\u623f\u9f84\u4f34\u968f\u9ad8\u552e\u4ef7\u7684\u60c5\u51b5\uff0c\u5206\u6790\u53ef\u80fd\u662f\u7531\u4e8e\u5317\u4eac\u5e02\u5386\u53f2\u60a0\u4e45\u7684\u623f\u5b50\u5c24\u4e3a\u7a00\u7f3a\u6240\u81f4\uff08\u5982\u4e0a\u56fe\u6240\u793a\uff09","d117fe77":"> \u901a\u8fc7\u6bd4\u8f83\u4e0d\u540c\u5367\u5ba4\u6570\u91cf\u623f\u5b50\u7684\u6210\u4ea4\u5747\u4ef7\uff0c\u53d1\u73b01~3\u5367\u7684\u5747\u4ef7\u7565\u9ad8\u4e8e\u5176\u5b83\u6237\u578b\u3002","cb0df8e1":"> \u53ef\u4ee5\u770b\u5230\u5e02\u552e\u7684\u4e8c\u624b\u623f\u4ee550~100\u5e73\u65b9\u7684\u5c0f\u6237\u578b\u5c45\u591a\uff0c\u5360\u636e\u603b\u91cf\u5927\u534a\u3002\u800c\u4e14\u6536\u5230\u6700\u9ad8\u5173\u6ce8\u7684\u623f\u5b50\u4e5f\u90fd\u662f\u57281~100\u5e73\u65b9\u7684\u6237\u578b\u5185\u5206\u5e03\u3002","51a7b282":"> \u89c2\u5bdf\u5404\u5217\u7684\u6570\u636e\u7c7b\u578b\u53d1\u73b0'tradeTime','livingRoom','drawingRoom','bathRoom','floor','constructionTime'\u6570\u636e\u7c7b\u578b\u6709\u9519\u8bef,\u9700\u8981\u9996\u5148\u8fdb\u884c\u5904\u7406:","c9d44f4c":"> 1.\u6570\u636e\u5e93\u5bfc\u5165","3c8d68a1":"> \u89c2\u5bdf\u6bcf\u5217\u7684\u6570\u636e\u7c7b\u578b\u662f\u5426\u9519\u8bef:","9b95ed07":"> \u623f\u5b50\u7684\u5efa\u9020\u5e74\u4efd\u4e3b\u8981\u5206\u5e03\u57281980\u5e74\u524d\u540e\u81f3\u4eca\u3002","e59924eb":"> \u8bb2\u6570\u636e\u5e93\u5206\u4e3a\u7b97\u6cd5\u8bad\u7ec3\u6837\u672c\u548c\u62df\u5408\u68c0\u6d4b\u6837\u672c:","6101c96a":"> \u5bf9\u623f\u4ef7\u7684\u91cd\u8981\u5f71\u54cd\u56e0\u7d20\u4e4b\u4e00\u662f\u623f\u5b50\u6240\u5904\u5730\u6bb5\uff0c\u6b64\u6570\u636e\u5e93\u5305\u542b\u4ea4\u6613\u623f\u5b50\u7684\u7ecf\u7eac\u5750\u6807\uff0c\u901a\u8fc7\u5c06\u5730\u7406\u5750\u6807\u53ef\u89c6\u5316\uff0c\u53ef\u4ee5\u76f4\u89c2\u770b\u5230\u5730\u6bb5\u5bf9\u623f\u4ef7\u7684\u5f71\u54cd:","f6cd72c2":"> 5.\u623f\u578b\uff0c\u623f\u9f84\uff0c\u9762\u79ef\uff0c\u88c5\u4fee\u60c5\u51b5\u7684\u5206\u5e03\u60c5\u51b5"}}