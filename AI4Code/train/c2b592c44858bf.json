{"cell_type":{"f8525687":"code","50442659":"code","37021aae":"code","55f7631d":"code","96577c84":"code","d7675000":"code","2ba195e4":"code","ebe17991":"code","1ebdba23":"code","a36f4656":"code","d36bbf76":"code","c2831603":"code","0ca85770":"code","4334dd10":"code","65b4830c":"code","45548737":"code","b9755b9a":"code","64ce89c1":"code","89ba0420":"code","b83ec39b":"code","a07be132":"code","780d9a15":"code","aa3d3719":"code","62028922":"code","9b40af12":"code","0018fce9":"code","651b258d":"code","4a5a0b14":"code","7777306a":"code","ef0aefab":"code","547ad23c":"code","2dd8c40b":"code","eabef98c":"code","3927dfd8":"code","9fd99b6c":"code","120115a0":"code","447a247e":"code","0d89b41f":"code","0a260033":"code","3762cba6":"code","1322b2de":"code","b486e63c":"code","e4a1ab27":"code","a1fc7ca9":"code","e9162598":"code","d8db3ae0":"code","fddc5a52":"code","424ab49c":"code","ad4ab4c4":"code","117e0212":"code","b3e7a347":"code","3858f061":"code","0110bacc":"code","4bfbc5ad":"code","88a8d511":"code","80c222c1":"code","21110dca":"code","44b019e4":"code","b9634dd6":"code","69a34f1f":"code","b759188d":"code","09e70520":"code","56b40105":"code","c5d433ba":"code","f7840a5b":"code","26931771":"code","e0e39a7e":"code","205a8fb0":"code","e39f6f68":"code","5c38a7ea":"code","400a0ba5":"code","9356625a":"code","d98fe55a":"code","bd22e7a3":"code","b2db9edb":"markdown","d1129e48":"markdown","18288176":"markdown","8a4c1342":"markdown","aa64eae7":"markdown","0258d34d":"markdown","d34c7a27":"markdown","4dfbb950":"markdown","db3ddb84":"markdown","0a8dcd69":"markdown","a7482703":"markdown","b02430bd":"markdown","9d98a007":"markdown","0ce955b4":"markdown","bce4ba23":"markdown","43583d20":"markdown","f936d756":"markdown","b5d0305f":"markdown","f0084838":"markdown","0b8f0ec2":"markdown","d1a32753":"markdown","e1283ea0":"markdown","09c82c3c":"markdown","03edc240":"markdown","a46bfe09":"markdown","e730dea1":"markdown","00239cc5":"markdown","5c36f4e2":"markdown","05a5e8e4":"markdown"},"source":{"f8525687":"# This Python 3 environment comes with many helpful analytics libraries installed\n# It is defined by the kaggle\/python Docker image: https:\/\/github.com\/kaggle\/docker-python\n# For example, here's several helpful packages to load\n\nimport numpy as np # linear algebra\nimport pandas as pd # data processing, CSV file I\/O (e.g. pd.read_csv)\n\n# Input data files are available in the read-only \"..\/input\/\" directory\n# For example, running this (by clicking run or pressing Shift+Enter) will list all files under the input directory\n\nimport os\nfor dirname, _, filenames in os.walk('\/kaggle\/input'):\n    for filename in filenames:\n        print(os.path.join(dirname, filename))\n\n# You can write up to 20GB to the current directory (\/kaggle\/working\/) that gets preserved as output when you create a version using \"Save & Run All\" \n# You can also write temporary files to \/kaggle\/temp\/, but they won't be saved outside of the current session","50442659":"X_full = pd.read_csv('\/kaggle\/input\/house-prices-advanced-regression-techniques\/train.csv', index_col='Id')\nX_test = pd.read_csv('\/kaggle\/input\/house-prices-advanced-regression-techniques\/test.csv', index_col='Id')","37021aae":"X_full.head()","55f7631d":"X_test.head()","96577c84":"# X_full.info()","d7675000":"#X_test.info()","2ba195e4":"X_full.describe()","ebe17991":"X_test.describe()","1ebdba23":"X_full.describe(exclude=np.number)","a36f4656":"X_test.describe(exclude=np.number)","d36bbf76":"import seaborn as sns","c2831603":"X_full.corr(method='spearman').SalePrice.sort_values(ascending=False)","0ca85770":"X_full.OverallQual.hist()","4334dd10":"sns.pairplot(X_full[['SalePrice', 'OverallQual', 'GrLivArea', 'GarageCars', \n                    'YearBuilt', 'GarageArea', 'FullBath','TotalBsmtSF']])","65b4830c":"sns.pairplot(X_test[['OverallQual', 'GrLivArea', 'GarageCars', \n                    'YearBuilt', 'GarageArea', 'FullBath','TotalBsmtSF']])","45548737":"sns.boxplot(x=X_full.SalePrice)","b9755b9a":"X_full.SalePrice.describe()","64ce89c1":"SalePrice_outlier_conditional = X_full.SalePrice < 450000\n\nX_full_without_outliers = X_full[SalePrice_outlier_conditional ]","89ba0420":"sns.boxplot(x=X_full_without_outliers.SalePrice)","b83ec39b":"sns.boxplot(x=X_full_without_outliers.OverallQual)","a07be132":"OverallQual_Q1 = X_full.OverallQual.quantile(0.25)\nOverallQual_Q3 = X_full.OverallQual.quantile(0.75)\nOverallQual_IQR = OverallQual_Q3-OverallQual_Q1\nOverallQual_outlier_conditional =  ((X_full.OverallQual > OverallQual_Q1 - 1.5*OverallQual_IQR) & (X_full.OverallQual < OverallQual_Q3 + 1.5*OverallQual_IQR))","780d9a15":"X_full_without_outliers = X_full_without_outliers[OverallQual_outlier_conditional]","aa3d3719":"sns.boxplot(x=X_full_without_outliers.OverallQual)","62028922":"sns.boxplot(x=X_full.GrLivArea)","9b40af12":"sns.boxplot(x=X_full_without_outliers.GrLivArea)","0018fce9":"sns.boxplot(x=X_full.GarageCars)","651b258d":"sns.boxplot(x=X_full_without_outliers.GarageCars)","4a5a0b14":"GarageCars_Q1 = X_full.GarageCars.quantile(0.25)\nGarageCars_Q3 = X_full.GarageCars.quantile(0.75)\nGarageCars_IQR = GarageCars_Q3-GarageCars_Q1\nGarageCars_outlier_conditional =  ((X_full.GarageCars > GarageCars_Q1 - 1.5*GarageCars_IQR) & (X_full.GarageCars < GarageCars_Q3 + 1.5*GarageCars_IQR))","7777306a":"X_full_without_outliers = X_full_without_outliers[GarageCars_outlier_conditional]","ef0aefab":"sns.boxplot(x=X_full_without_outliers.GarageCars)","547ad23c":"sns.boxplot(x=X_full_without_outliers.YearBuilt)","2dd8c40b":"sns.boxplot(x=X_full_without_outliers.GarageArea)","eabef98c":"sns.boxplot(x=X_full_without_outliers.FullBath)","3927dfd8":"sns.boxplot(x=X_full_without_outliers.TotalBsmtSF)","9fd99b6c":"sns.histplot(X_full_without_outliers.SalePrice)","120115a0":"ordinal_features = ['ExterCond', 'BsmtQual','BsmtCond', 'HeatingQC', 'KitchenQual',\n                    'FireplaceQu','GarageQual', 'GarageCond','PoolQC']\nnominal_features= list(set(X_full_without_outliers.select_dtypes(include='object').columns.values) - set(ordinal_features))","447a247e":"X = X_full_without_outliers.drop(['SalePrice'], axis=1)\nfeature_names = X_full_without_outliers.columns.values\ny = X_full_without_outliers.SalePrice\n\nX_nums = X.select_dtypes(exclude='object')\nX_cats = X.select_dtypes(include='object')\nX_cats_names = X_cats.columns.values\n\nX_test_nums = X_test.select_dtypes(exclude='object')\nX_test_cats = X_test.select_dtypes(include='object')\nX_test_cats_names = X_test_cats.columns.values","0d89b41f":"from sklearn.impute import SimpleImputer","0a260033":"imp_mean = SimpleImputer(strategy='median')\nimp_most = SimpleImputer(strategy='most_frequent')","3762cba6":"X_cats = imp_most.fit_transform(X_cats)\nX_nums = imp_mean.fit_transform(X_nums)\nX_test_cats = imp_most.transform(X_test_cats)\nX_test_nums = imp_mean.transform(X_test_nums)","1322b2de":"from sklearn.preprocessing import OneHotEncoder, OrdinalEncoder","b486e63c":"one_hot_enc = OneHotEncoder(handle_unknown='ignore')\nordinal_enc = OrdinalEncoder(handle_unknown='ignore')","e4a1ab27":"X_cats_nominal = one_hot_enc.fit_transform(pd.DataFrame(X_cats, columns=[X_cats_names])[nominal_features])\nX_test_cats_nominal = one_hot_enc.transform(pd.DataFrame(X_test_cats, columns=[X_cats_names])[nominal_features])","a1fc7ca9":"X_cats_ordinal = ordinal_enc.fit_transform(pd.DataFrame(X_cats, columns=[X_cats_names])[ordinal_features])\nX_test_cats_ordinal = ordinal_enc.transform(pd.DataFrame(X_test_cats, columns=[X_cats_names])[ordinal_features])","e9162598":"X_cats_nominal.shape","d8db3ae0":"X_cats_ordinal.shape","fddc5a52":"X_nums.shape","424ab49c":"from scipy.sparse import hstack","ad4ab4c4":"X_transformed = hstack((X_cats_nominal,X_cats_ordinal, X_nums))\nX_test_transformed = hstack((X_test_cats_nominal,X_test_cats_ordinal, X_test_nums))","117e0212":"from sklearn.preprocessing import MaxAbsScaler","b3e7a347":"max_scaler = MaxAbsScaler()","3858f061":"X_transformed_max = max_scaler.fit_transform(X_transformed)\nX_test_transformed_max = max_scaler.transform(X_test_transformed)","0110bacc":"from sklearn import preprocessing","4bfbc5ad":"std_scaler = preprocessing.StandardScaler(with_mean = False)","88a8d511":"std_scaler.fit(X_transformed_max)\nX_transformed_stand = std_scaler.transform(X_transformed_max)\nX_test_transformed_stand = std_scaler.transform(X_test_transformed_max)","80c222c1":"X_transformed_stand.shape","21110dca":"from sklearn.model_selection import train_test_split","44b019e4":"X_train, X_val, y_train, y_val = train_test_split(X_transformed_stand, y, train_size=0.8, random_state=3)","b9634dd6":"from sklearn.tree import DecisionTreeRegressor","69a34f1f":"house_prices_model = DecisionTreeRegressor(random_state=0,\n                                           criterion='mse')","b759188d":"house_prices_model.fit(X_train,y_train)","09e70520":"val_predictions = house_prices_model.predict(X_val)","56b40105":"from sklearn.metrics import mean_squared_error, mean_absolute_error","c5d433ba":"mean_squared_error(y_val, val_predictions, squared=False)","f7840a5b":"mean_absolute_error(y_val, val_predictions)","26931771":"pd.DataFrame({'y_val': y_val,\n            'val_pred': val_predictions,\n             'abs_err': abs(val_predictions-y_val)}).describe()","e0e39a7e":"house_prices_model.feature_importances_","205a8fb0":"# feature_importance = pd.DataFrame({'feature_name': feature_names,\n#                       'feature_importance': house_prices_model.feature_importances_})\n","e39f6f68":"# feature_importance.sort_values(by='feature_importance', ascending=False)","5c38a7ea":"from sklearn import tree\nimport graphviz\n\ntree_graph = tree.export_graphviz(house_prices_model, out_file=None)\ngraphviz.Source(tree_graph)","400a0ba5":"test_predictions = house_prices_model.predict(X_test_transformed_stand)","9356625a":"test_predictions","d98fe55a":"output = pd.DataFrame({'Id': X_test.index,\n                      'SalePrice': test_predictions})\noutput.set_index('Id', inplace=True)\noutput.to_csv('submission.csv')","bd22e7a3":"output.describe()","b2db9edb":"O arquivo exportado ser\u00e1 submetido \u00e0 plataforma.","d1129e48":"**Nota:** existem m\u00f3dulos como sweetviz ou pandas-profiling que podem auxiliar nessa an\u00e1lise.","18288176":"Baseline: \n\n1. RMSE- 41206.010178103206\n1. MAE- 24401.085616438355","8a4c1342":"Quartis e percentis s\u00e3o medidas relativas pois s\u00e3o calculadas em rela\u00e7\u00e3o \u00e0 mediana da amostra. \nP25 = Q1; P50 = Q2; PN=maior que N% dos valores observados.\n\n**Box plots:** s\u00e3o gr\u00e1ficos que apresentam de forma visual as medidas de posi\u00e7\u00e3o relativa.","aa64eae7":"## Substitui\u00e7\u00e3o de valores ausentes\n\nhttps:\/\/scikit-learn.org\/stable\/modules\/preprocessing.html#imputation-of-missing-values","0258d34d":"## Padroniza\u00e7\u00e3o dos dados\n\nhttps:\/\/scikit-learn.org\/stable\/modules\/preprocessing.html#standardization-or-mean-removal-and-variance-scaling","d34c7a27":"## Generalizando para os dados de teste","4dfbb950":"|![Different parts of a boxplot - Towards Data Science](https:\/\/miro.medium.com\/max\/18000\/1*2c21SkzJMf3frPXPAR_gZA.png)|\n|:--:| \n| *Different parts of a boxplot - [Towards Data Science](https:\/\/towardsdatascience.com\/understanding-boxplots-5e2df7bcbd51)*|","db3ddb84":"1. Exclus\u00e3o ou Substitui\u00e7\u00e3o\n1. One-hot Encoding\n1. Ordinal Encoding\n1. Label Encoding","0a8dcd69":"## Tratando vari\u00e1veis categ\u00f3ricas\n\nhttps:\/\/scikit-learn.org\/stable\/modules\/preprocessing.html#encoding-categorical-features\n\nhttps:\/\/contrib.scikit-learn.org\/category_encoders\/","a7482703":"1. **Moda:** O valor mais frequente. Normalmente utilizada para vari\u00e1veis nominais.\n1. **M\u00e9dia aritm\u00e9tica simples:** soma dos valores divida pelo n\u00famero de elementos.\n1. **Mediana:** \u00e9 o valor central do conjunto de valores quando ordenados de forma crescente. Em caso de n\u00famero par, ser\u00e1 a m\u00e9dia dos dois valores centrais da amostra.\n1. **Vari\u00e2ncia:** \u00e9 a dist\u00e2ncia quadr\u00e1tica m\u00e9dia em rela\u00e7\u00e3o \u00e0 m\u00e9dia. E[(X-E(X))\u00b2]\n1. **Desvio-padr\u00e3o:** \u00e9 uma medida de dispers\u00e3o em torno da m\u00e9dia da vari\u00e1vel. Medida pela raiz quadrada da vari\u00e2ncia.","b02430bd":"## Separando dados de treino e valida\u00e7\u00e3o\n\nhttps:\/\/scikit-learn.org\/stable\/modules\/generated\/sklearn.model_selection.train_test_split.html","9d98a007":"## An\u00e1lise de Correla\u00e7\u00e3o\n\nPermite verificar o grau de rela\u00e7\u00e3o entre vari\u00e1veis.\n\n**Pearson:** indica o grau de rela\u00e7\u00e3o linear entre vari\u00e1veis quantitativas sim\u00e9tricas. >0 indica associa\u00e7\u00e3o positiva, ou seja as duas vari\u00e1veis crescem juntas; <0 indica associa\u00e7\u00e3o negativa, na medida que uma cresca a outra decresce. ~0 indica aus\u00eancia de rela\u00e7\u00e3o linear.\n\n**Spearman:** avalia rela\u00e7\u00f5es monot\u00f4nicas lineares ou n\u00e3o entre vari\u00e1veis cont\u00ednuas ou ordinais. \u00c9 calculada aplicando a medida do coeficiente de Pearson aplicado aos valores da ordem de duas vari\u00e1veis. N\u00e3o \u00e9 sens\u00edvel a assimetrias na distribui\u00e7\u00e3o.\n\nRodrigues, Francisco. An\u00e1lise Explorat\u00f3ria de Dados: Correla\u00e7\u00e3o de Pearson e Spearman. Dispon\u00edvel em: https:\/\/youtu.be\/qqRUsY2Fu0A\n\nhttps:\/\/towardsdatascience.com\/clearly-explained-pearson-v-s-spearman-correlation-coefficient-ada2f473b8","0ce955b4":"## Treinando modelo","bce4ba23":"1. Histograma: \u00e9 uma representa\u00e7\u00e3o da fun\u00e7\u00e3o de distribui\u00e7\u00e3o de probabilidades. (b.h=probabilidade|f(x).x=p(x))\n1. Gr\u00e1fico de frequ\u00eancia absoluta ou relativa: indica a distribui\u00e7\u00e3o das vari\u00e1veis.\n1. Rela\u00e7\u00e3o entre vari\u00e1vies\n\nhttps:\/\/seaborn.pydata.org\/generated\/seaborn.distplot.html\n\nhttps:\/\/seaborn.pydata.org\/tutorial\/distributions.html\n\nhttps:\/\/seaborn.pydata.org\/tutorial\/relational.html\n","43583d20":"## Normaliza\u00e7\u00e3o dos dados\nhttps:\/\/scikit-learn.org\/stable\/auto_examples\/preprocessing\/plot_all_scaling.html#","f936d756":"Pularemos a etapa de sele\u00e7\u00e3o do modelo nessa aula.","b5d0305f":"## Criando arquivo de submiss\u00e3o","f0084838":"## An\u00e1lise de Outliers (Medidas de posi\u00e7\u00e3o relativa)","0b8f0ec2":"Caracter\u00edsticas de uma distribui\u00e7\u00e3o normal\n* M\u00e1dia: 0\n* Vari\u00e2ncia: 1","d1a32753":"## Resumo descritivo","e1283ea0":"## Import\u00e2ncia de vari\u00e1veis\n\nhttps:\/\/towardsdatascience.com\/explaining-feature-importance-by-example-of-a-random-forest-d9166011959e","09c82c3c":"Os objetivos dessa descri\u00e7\u00e3o dos dados s\u00e3o:\n1. Investigar o comportamento das vari\u00e1veis\n1. Examinar a rela\u00e7\u00e3o entre vari\u00e1veis\n1. Enfatizar a ordena\u00e7\u00e3o de categorias\n1. Compreender a estrutura de organiza\u00e7\u00e3o das categorias\n1. Explorar a evolu\u00e7\u00e3o cronol\u00f3gica de uma vari\u00e1vel\n1. Revelar padr\u00f5es espaciais nos dados\n1. Descrever a conex\u00e3o entre categorias","03edc240":"Queremos eliminar as observa\u00e7\u00f5es que estejam fora dos limites m\u00e1ximo e m\u00ednimo do boxplot, ou seja se o valor \u00e9 menor que (Q1 - 1.5IQR) ou maior que (Q3 + 1.5IQR).","a46bfe09":"A an\u00e1lise explorat\u00f3ria de dados nos permite caracterizar os dados por meio da an\u00e1lise de medidas estat\u00edsticas descritivas extra\u00eddas dos dados.\u00a0\n\nEsse \u00e9 um processo importante da modelagem de dados, pois as descobertas feitas a respeito dos dados ir\u00e3o nortear as escolhas sobre os modelos preditivos com os quais iremos trabalhar.","e730dea1":"# Pr\u00e9-processamento dos Dados\n","00239cc5":"## An\u00e1lise Explorat\u00f3ria de\u00a0Dados","5c36f4e2":"## Validando o modelo","05a5e8e4":"## Carregando os dados"}}