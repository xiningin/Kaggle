{"cell_type":{"cdf1ce34":"code","cdf0a7c8":"code","dc8193f9":"code","2c4ff152":"code","1570d2ee":"code","a68c3196":"code","5e7e4f11":"code","5b7b739a":"code","3228cc15":"code","38a5239a":"code","bb86b919":"code","8fa18a4d":"code","7383a339":"code","870e0acc":"code","6026d366":"code","fa1bbc34":"code","1f1860f5":"code","74c6870a":"code","3be74121":"code","cf2eace4":"code","3ea357fa":"code","0b0f6b0a":"code","ba65440e":"code","049aeafb":"code","8906e28b":"code","6176ded8":"code","9c0d339a":"code","0054061e":"code","f8645267":"code","a3262516":"code","08c931c0":"code","173f195b":"code","a241de10":"code","3cd481c0":"code","bbe5689c":"code","cf74f622":"code","79103df6":"code","65c07e67":"code","11a0fd37":"code","a65e8a3e":"code","91c8a708":"code","731d5f4e":"code","338db9bd":"code","a2effca0":"code","6f2993fe":"code","799d4071":"code","9067cb06":"code","766cf3da":"code","344ccd77":"code","8e4aa147":"code","475bea56":"markdown","913b5e81":"markdown","377c61ab":"markdown","be38ea0b":"markdown","7d34159b":"markdown","a4533960":"markdown","de6a44b8":"markdown","efec4723":"markdown","1ecf5fea":"markdown","773c0361":"markdown","422beae6":"markdown","f77eb5c2":"markdown","798a1610":"markdown","49ed7485":"markdown","318d118b":"markdown","377c7f42":"markdown","235ba14b":"markdown","fada578b":"markdown","81cb706d":"markdown"},"source":{"cdf1ce34":"#1.1 Package import\n\nimport numpy as np \nimport pandas as pd\nimport operator \nfrom datetime import date, datetime\nfrom statsmodels.formula.api import ols\n\nimport matplotlib.pyplot as plt\nimport seaborn as sns\nimport plotly.express as px\nimport plotly.graph_objects as go\nfrom plotly.subplots import make_subplots\n\nimport os\nfor dirname, _, filenames in os.walk('\/kaggle\/input'):\n    for filename in filenames:\n        print(os.path.join(dirname, filename))","cdf0a7c8":"#1.2 Data upload\ngdpr = pd.read_csv('\/kaggle\/input\/gdpr-fines-20182020-updated-23012021\/all_fines.csv', index_col ='id' )\n","dc8193f9":"gdpr.info()","2c4ff152":" gdpr.head()","1570d2ee":"#droping not relevant columns\ngdpr = gdpr.drop(['picture','authority','source','summary'],axis=1)\ngdpr.info()","a68c3196":"#Country column review\nntypes =gdpr.country.unique().shape\nprint(f'There are {ntypes[0]} different countries according to the dataset')","5e7e4f11":"#Date column review\n# 290 missing values \ngdpr.sort_values('date').tail()","5b7b739a":"gdpr['date'].replace('1970-01-01', 'NaN' ,inplace=True) #1970-01-01 was replaced with NaN since it new regulation\ngdpr['date'] =pd.to_datetime(gdpr['date'],utc=False)\ngdpr.info()\n","3228cc15":"Earlist_date = gdpr.date.min()\nLatest_date = gdpr.date.max()\nprint(f'Earliest date {Earlist_date.date}')\nprint(f'Latest date {Latest_date}')","38a5239a":"# org_fined column review\norg =gdpr.org_fined.unique().shape\nprint(f'There are {org[0]} different organizations fined according to the dataset')","bb86b919":"gdpr.org_fined.value_counts()","8fa18a4d":"#type column review\nntypes =gdpr.type.unique().shape\n\nprint(f'There are {ntypes[0]} different types of violations according to the dataset')","7383a339":"gdpr.type.value_counts(normalize =True)","870e0acc":"# articleViolated column review\nnarticales = gdpr.articleViolated.nunique()\nprint(f'There are {narticales} different articals combination of violations according to the dataset')","6026d366":"gdpr.articleViolated.value_counts(normalize =True)","fa1bbc34":"#count number of violation per articale\n\nArt_dict = {}\nart_num =np.arange(1,100)\n\n\nfor num in art_num:\n    for index,row in gdpr.iterrows():\n        if operator.contains(row['articleViolated'],f'Art. {num} '):\n            if num in Art_dict:\n                Art_dict[num]  = Art_dict[num] + 1\n            else:\n                Art_dict[num] =1\nArticales = pd.DataFrame(Art_dict.items(), columns =['Articale','Violations']).sort_values('Violations')\nArticales['Articale'] = Articales['Articale'].astype(str) # articale number is string\nArticales.head()","1f1860f5":"Articales.info()","74c6870a":"fig = px.bar(data_frame = Articales,\n             x ='Articale',y='Violations',\n             text = 'Violations',\n             title ='Number of Violations per Article',\n             color= 'Violations',color_continuous_scale='aggrnyl',\n             log_y =True)\nfig.update_traces(textposition='outside')\nfig.update_xaxes(title_text ='GDPR Articale num')\nfig.update_yaxes(title_text ='Num. of Violations')\nfig.show()","3be74121":"top =Articales[Articales['Violations'] >= Articales['Violations'].quantile(0.9)]\ntop.head()","cf2eace4":"#Todo - chnage to loop \n\ngdpr['Art_5'] = np.where(gdpr['articleViolated'].str.contains('Art. 5'),True,False)\ngdpr['Art_6'] = np.where(gdpr['articleViolated'].str.contains('Art. 6'),True,False)\ngdpr['Art_32'] = np.where(gdpr['articleViolated'].str.contains('Art. 32'),True,False)\ngdpr.head()","3ea357fa":"unique = gdpr[gdpr['Art_5']]['type'].unique().shape\nprint(f'There are {unique[0]} different types of violation related to articale 5  according to the dataset')\ngdpr[gdpr['Art_5']]['type'].value_counts()","0b0f6b0a":"unique = gdpr[gdpr['Art_6']]['type'].unique().shape\nprint(f'There are {unique[0]} different types of violation related to articale 6  according to the dataset')\ngdpr[gdpr['Art_6']]['type'].value_counts()","ba65440e":"unique = gdpr[gdpr['Art_32']]['type'].unique().shape\nprint(f'There are {unique[0]} different types of violation related to articale 32  according to the dataset')\ngdpr[gdpr['Art_32']]['type'].value_counts()","049aeafb":"gdpr = gdpr.drop('type',axis=1)\ngdpr.info()","8906e28b":"country_count =gdpr.country.value_counts().reset_index()\ncountry_count.columns =['Country_Name','Number_of_Fines']\ncountry_count.head()","6176ded8":"# number of fines per country\nfig = px.bar(data_frame = country_count,\n             x ='Country_Name',y='Number_of_Fines',\n             text = 'Number_of_Fines',\n             title ='Number of Fines per Country',\n             color= 'Number_of_Fines',color_continuous_scale='aggrnyl',\n             log_y =True)\nfig.update_traces(textposition='outside')\nfig.update_xaxes(title_text ='Country')\nfig.update_yaxes(title_text ='Num. of Fines')\nfig.show()\n\n","9c0d339a":"fig = px.box(data_frame = country_count[1:], y='Number_of_Fines',hover_data =['Country_Name'], title= 'Number of fines distribution' )\nfig.show()","0054061e":"max_price = gdpr.groupby('country').max('price').reset_index()\nfig = px.box(data_frame = max_price, y='price',hover_data =['country'], title= 'Highest fine per country' )\nfig.show()","f8645267":"group_country = gdpr.groupby('country').agg({'price':['count','max','sum']}).reset_index().sort_values(by=('price','max'),ascending=False)\ngroup_country.head()","a3262516":"count = gdpr.groupby('country').count()['price'].to_frame()\ntotal = gdpr.groupby('country').sum()['price'].to_frame()\ncountry = count.join(total,lsuffix='_count', rsuffix='_sum')\ncountry =country.sort_values('price_count')\ncountry.tail()","08c931c0":"sns.scatterplot(x='price_count',y='price_sum',data= country)\nplt.show()","173f195b":"# with trend line excluding spain\nsns.regplot(x='price_count',y='price_sum',data= country[:-1], ci=None, scatter_kws ={'alpha':0.5})\nplt.show()","a241de10":"# vcts => violation count vs sum of fines\n\nvcts = ols('price_sum~price_count', data=country[:-1])\nvcts = vcts.fit()\nvcts.params","3cd481c0":"count = gdpr.groupby(['country','Art_5']).count()['price'].to_frame()\ntotal = gdpr.groupby(['country','Art_5']).sum()['price'].to_frame()\ncountry_Art5 = count.join(total,lsuffix='_count', rsuffix='_sum')\ncountry_Art5  =country_Art5.sort_values('country').reset_index()\ncountry_Art5 .tail()","bbe5689c":"sns.displot(data =country_Art5, x='price_sum',col='Art_5')","cf74f622":"summary_stats = country_Art5.groupby('Art_5')['price_sum'].mean()\nsummary_stats","79103df6":"mdl = ols('price_sum ~  Art_5 + 0',data = country_Art5).fit()\nmdl.params","65c07e67":"spain = gdpr[gdpr.country=='Spain'].drop(['country'],axis=1)\nspain.info()","11a0fd37":"spain.price.describe()","a65e8a3e":"#spain.boxplot('price')\nfig = px.box(data_frame = spain, y='price',hover_data =['org_fined'] )\nfig.show()","91c8a708":"#3 outliers according to boxplot \nspain_sort_price =spain.sort_values(by='price')\nspain_sort_price.tail(3)","731d5f4e":"#box plot exluding outliers\nfig = px.box(data_frame = spain_sort_price[:-3], y='price')\nfig.show()","338db9bd":"fig = px.histogram(data_frame = spain_sort_price[:-3], x= 'price', nbins =20)\nfig.show()","a2effca0":"# deep dive into under 10K price (median)\nfig = px.histogram(data_frame = spain_sort_price[0:80], x= 'price', nbins =20)\nfig.show()","6f2993fe":"spain.dropna(subset=['date'],inplace=True)\nspain['date'] = pd.to_datetime(spain['date'])\nspain = spain.drop(spain[spain.date == '1970-01-01'].index) #remove unknown dates\nspain = spain.drop(spain[spain.date == '2020-11-12'].index) #remove outlier\nspain=spain.sort_index()\nspain.head(10)","799d4071":"org =spain.org_fined.unique().shape\nprint(f'There are {org[0]} different Spanish organizations fined according to the dataset')","9067cb06":"spain.org_fined.value_counts().sort_index().tail(10)","766cf3da":"VE = ['Vodafone Espana, SAU','Vodafone Espana','Vodafone Espa\u00f1a, S.A.U.','Vodafone Espa\u00f1a, SAU']\nspain['org_fined'] = np.where(spain.org_fined.isin(VE),'Vodafone Espa\u00f1a',spain.org_fined)\n\nTM = ['Telefonica Moviles Espana, S.A.U.','Telef\u00f3nica M\u00f3viles Espa\u00f1a, SAU','Telef\u00f3nica SA']\nspain['org_fined'] = np.where(spain.org_fined.isin(TM),'Telef\u00f3nica M\u00f3viles Espa\u00f1a',spain.org_fined)\n\nXM = ['Xfera Movies S.A.','Xfera Moviles S.A']\nspain['org_fined'] = np.where(spain.org_fined.isin(XM),'Xfera Moviles',spain.org_fined)\n\nspain.org_fined.value_counts().sort_index().tail()","344ccd77":"Art_dict = {}\nart_num =np.arange(1,100)\n\n\nfor num in art_num:\n    for index,row in spain.iterrows():\n        if operator.contains(row['articleViolated'],f'Art. {num} '):\n            if num in Art_dict:\n                Art_dict[num]  = Art_dict[num] + 1\n            else:\n                Art_dict[num] =1\nArticales = pd.DataFrame(Art_dict.items(), columns =['Articale','Violations']).sort_values('Violations')\nArticales['Articale'] = Articales['Articale'].astype(str) \nArticales.tail()","8e4aa147":"fig1 =px.scatter(spain,x = 'date', y = 'price',color= spain['Art_5'])\nfig2 =px.scatter(spain,x = 'date', y = 'price',color= spain['Art_6'])\nfig1.show()\nfig2.show()\n","475bea56":"Spain has siginficant higher number of GDPR violation and fines reported in the dataset - unclear if its\n* data bias or \n* reflection on higher enforcment from Spainish Authority or\n* actual higher violation rate causing higer number of fines.\n\nNotebook Assumsion that its not data bias due to:\naccording to the website https:\/\/www.privacyaffairs.com\/gdpr-fines\/ shows the same results for Ireland(4) and Finland(5). low number of fines was also mentioned in the articale attached to the data set.\nchecking the Ireland Data Commision site - refeance for the fines were found in the latest news page: https:\/\/www.dataprotection.ie\/en\/news-media\/latest-news \nno addtional events were found in the commision site.\n\ntodo - check if avilable number of inspection with no findings ","913b5e81":"# 1 Imports & Data Upload","377c61ab":"Table's columns:\n* picture : link to country's flag. Not relevant in scope of this analysis - to drop\n* Country : Country name of the fined organization\n* price.  : Fine value in EU\n* authority : name of country's Authority respossible of GDPR enforcment. each country has 1 authority - to drop\n* date:  date of the fine (not of the violation)\n* articleViolated: GDPR articale that was referaned in the report(fine)\n* type : violation short description\n* source: link to report some of the missing data avilable in source - for example the report date for first entry is 2019-10-18 [https:\/\/uodo.gov.pl\/decyzje\/ZSPU.421.3.2019]. not in the scope of of this analysis\n* summary: detailed description of violation. not in the scope of of this analysis\n","be38ea0b":"same as Art. 5","7d34159b":"Articale 32 is percentage is  low in spain relativly to rest of EU","a4533960":"# 3 EDA by Articale","de6a44b8":"# 2 Data Initial Investigation","efec4723":"some of the vioaltons type in very low percentage and may be ingonred or move to \"other\" bucket \nsome of the violation are identical and should be merged - for example 'Failure to appoint a data protection officer' and 'No data protection officer appointed' \nTodo - cleanup required on this column","1ecf5fea":"same as Art.5 and 6 \n\nAnalysis per type column less insighful","773c0361":"# 5 Linear Regression","422beae6":"**Fine price is higher with time and for ones with refeance to Articale 5 and\/or 6**","f77eb5c2":"# 4 EDA by Country","798a1610":"# 6 Spain EDA","49ed7485":"305 unknown dates. keeping the rows for other columns analysis since most of them have no missing values","318d118b":"Hi :)\nthis is still work in progerss, appriciete any suggestion or commnet. \nThanks \nNoam","377c7f42":"all types looks the same for me \nmaybe differnce in sufficient measures Yes\/No. Security Yes\/No","235ba14b":"exluding Spain, 75% of countries has less than 15 fines.","fada578b":"According to the box plot there are 5 countries with outlier higest fine. \nSpain is not part of this list\n3\/5 max fines are under q3 number of fines.\n\n**Meaning - The country number of fines doesn't indicate the fine price **","81cb706d":"Its clear that Articles 5\/6\/32 are top to referance in fines, \naddtional clean up required , for example 'Art. 5 GPDR, Art. 6 GDPR' appears in 16% and .1%\n\nArt. 5- Principles relating to processing of personal data\nhttps:\/\/gdpr-info.eu\/art-5-gdpr\/\n\nArt. 6 - Lawfulness of processing\nhttps:\/\/gdpr-info.eu\/art-6-gdpr\/\n\nArt. 32 - Security of processing \nhttps:\/\/gdpr-info.eu\/art-32-gdpr\/"}}