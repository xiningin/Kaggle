{"cell_type":{"9b5033c3":"code","9229f4cd":"code","b65a80eb":"code","4c73960f":"code","28e50d2a":"code","5d3abca8":"code","e770184c":"code","3f0842e7":"code","072bce31":"code","87cbdc56":"code","2158349f":"markdown","e376d24d":"markdown","b0a4c018":"markdown","ae5b2c7d":"markdown","4fa5844a":"markdown","15fcdc57":"markdown","8389fbeb":"markdown","fdcb81c8":"markdown","39e01ae7":"markdown","0defd92e":"markdown","e4ef6f4c":"markdown","29222d38":"markdown","f5b95467":"markdown","be9f9049":"markdown","67855800":"markdown"},"source":{"9b5033c3":"import pandas as pd\nfrom mlxtend.frequent_patterns import association_rules, apriori, fpgrowth","9229f4cd":"data = pd.read_csv('..\/input\/onlineretail\/OnlineRetail.csv',encoding= 'cp1252',parse_dates=['InvoiceDate'])\ndata = data.sort_values(by='InvoiceDate')\ndata = data.set_index('InvoiceDate')\nprint('Dataset Shape :',data.shape)\nprint(data.info())\ndata.head()","b65a80eb":"data['selled'] = 1\npivot = data.pivot_table(values='selled',index='InvoiceNo',columns='Description').fillna(0)\nprint('Pivot Table Shape :',pivot.shape)\nprint(pivot.info())\npivot.head()","4c73960f":"pivot = pivot.iloc[:,:4104]\npivot.shape","28e50d2a":"freq_items = apriori(pivot,min_support=0.02,use_colnames=True).sort_values(by='support',ascending=False)\nfreq_items","5d3abca8":"rules = association_rules(freq_items,metric='lift',min_threshold=1).sort_values(by='lift',ascending=False)\nrules","e770184c":"rules[(rules['lift']>5) & (rules['confidence']>0.5)]","3f0842e7":"from mlxtend.frequent_patterns import fpgrowth","072bce31":"freq_items1 = fpgrowth(pivot,min_support=0.02,use_colnames=True).sort_values(by='support',ascending=False)\nfreq_items1","87cbdc56":"rules1 = association_rules(freq_items1,metric='lift',min_threshold=1).sort_values(by='lift',ascending=False)\nrules1","2158349f":"**Removing all features, that are not items**","e376d24d":"### **Asssoation Rules**\n\n<strong>Association rules analysis <\/strong>is a technique to uncover how items are associated to each other. There are three common ways to measure association.\n\n![image.png](attachment:799dcb4b-9159-48a1-a628-5dfc5e03cf11.png)\n\n\n\n<strong>Measure 1: Support. <\/strong>This says how popular an itemset is, as measured by the proportion of transactions in which an itemset appears. In Table 1 below, the support of {apple} is 4 out of 8, or 50%. Itemsets can also contain multiple items. For instance, the support of {apple, beer, rice} is 2 out of 8, or 25%.\nIf you discover that sales of items beyond a certain proportion tend to have a significant impact on your profits, you might consider using that proportion as your support threshold. You may then identify itemsets with support values above this threshold as significant itemsets.\n\n<strong>Measure 2: Confidence.<\/strong> This says how likely item Y is purchased when item X is purchased, expressed as {X -> Y}. This is measured by the proportion of transactions with item X, in which item Y also appears. In Table 1, the confidence of {apple -> beer} is 3 out of 4, or 75%. One drawback of the confidence measure is that it might misrepresent the importance of an association. This is because it only accounts for how popular apples are, but not beers. If beers are also very popular in general, there will be a higher chance that a transaction containing apples will also contain beers, thus inflating the confidence measure. To account for the base popularity of both constituent items, we use a third measure called lift.\n\n<strong>Measure 3: Lift.<\/strong> This says how likely item Y is purchased when item X is purchased, while controlling for how popular item Y is. In Table 1, the lift of {apple -> beer} is 1,which implies no association between items. A lift value greater than 1 means that item Y is likely to be bought if item X is bought, while a value less than 1 means that item Y is unlikely to be bought if item X is bought.","b0a4c018":"**Generate Association Rules on the frequent itemsets respect to the support**","ae5b2c7d":"***","4fa5844a":"### **What this results tells us ?**\n\nThis result shows all the support, confidence and lift respect to the antecedent items and consequent items. That means, if a person buy an antecedent item then what is the chances that he or she also buy the consequent item.","15fcdc57":"#### Importing Libraries and Dataset","8389fbeb":"![image.png](attachment:68351300-3b16-4f0b-8fbe-dbf299b79678.png)","fdcb81c8":"### What is **Market Basket Analysis** ?\n<strong>Market Basket Analysis<\/strong> is one of the key techniques used by large retailers to uncover associations between items. It works by looking for combinations of items that occur together frequently in transactions. To put it another way, it allows retailers to identify relationships between the items that people buy. identifies customer buying habits by finding associations between the different items that customers place in their \u201cshopping baskets\u201d . The discovery of this kind of association will be helpful for  retailers or marketers to develop marketing strategies by gaining insight into which items are frequently bought together by customers.\n\nFor example, if customers are buying milk, how probably are they to also buy bread (and which kind of bread) on the same trip to the supermarket? This information may lead to increase sales by helping retailers to do selective marketing and plan their ledge space. ","39e01ae7":"**Generating all the Frequent Itemsets from the Pivot Table using Apriori Algorithm. This will returns support values along with the itemsets**","0defd92e":"**Now, to generate all the frequent itemsets, I need a table that repesents each records as each basket, each features as each items and the values that tells wether an item selled or not.**","e4ef6f4c":"**We also can filter the result as per our needs. Like here I filtering the rules with 'lift' > 5 and 'confidence' > 0.5**","29222d38":"### **Frequent Pattern Mining**\nThe frequent pattern mining algorithm is one of the most important techniques of data mining to discover relationships between different items in a dataset. These relationships are represented in the form of association rules. It helps to find the irregularities in data.\n\nFPM has many applications in the field of data analysis, software bugs, cross-marketing, sale campaign analysis, market basket analysis, etc.\n\nFrequent itemsets discovered through Apriori have many applications in data mining tasks. Tasks such as finding interesting patterns in the database, finding out sequence and Mining of association rules is the most important of them.\n\n![image.png](attachment:49c4e15f-ec0b-4bd2-b738-9b3214a71efd.png)\n\nThe **Apriori algorithm** uses frequent itemsets to generate association rules, and it is designed to work on the databases that contain transactions. With the help of these association rule, it determines how strongly or how weakly two objects are connected. This algorithm uses a breadth-first search and Hash Tree to calculate the itemset associations efficiently. It is the iterative process for finding the frequent itemsets from the large dataset. It is mainly used for market basket analysis and helps to find those products that can be bought together. It can also be used in the healthcare field to find drug reactions for patients.","f5b95467":"**Let, do the same analysis using FP Growth Algorithm inplacce of Apriori**","be9f9049":"**In this notebook, I done a Market Basket Analysis on a Retail Dataset using the Frequent Pattern Mining Techniques from the mlxtend library**","67855800":"# <center> **Thank You**"}}