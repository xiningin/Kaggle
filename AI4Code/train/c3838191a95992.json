{"cell_type":{"3998073f":"code","1a4d9b44":"code","b8738f53":"code","41a710c8":"code","fb156c0e":"code","fbe41c10":"code","c6eb391e":"code","90c2b6f1":"code","8e1b1283":"code","7be3e56f":"code","fbbe4032":"code","f90ad7ab":"code","9d7d0359":"code","03031275":"code","975ffec2":"code","b1842d27":"code","bbb093d6":"code","e37df221":"code","cb003508":"code","31a40dc5":"code","7e20dbd9":"code","6d6881f8":"code","26d834c4":"code","62c8f815":"code","1d2ca944":"code","92658181":"code","363806ad":"code","d30893ce":"code","a65c080d":"code","92656b52":"code","44c0c58d":"code","ded218ad":"code","59d4ebda":"code","55849157":"code","36c78247":"code","eddafa2b":"code","db78454d":"code","fbdf5556":"code","4bc8208e":"code","7ed1720c":"code","ef711647":"code","a239800a":"code","6dc68c80":"code","e1015bc1":"code","25f4d939":"markdown","d2b69966":"markdown","c8dd12cc":"markdown","175a1176":"markdown","79a04ade":"markdown","9cc67086":"markdown","e39529c2":"markdown","59b650ef":"markdown","4d06b7ad":"markdown","ebd0ecc3":"markdown","96972424":"markdown","bde56c39":"markdown","328cae1a":"markdown","6a6e7a67":"markdown","a87217fa":"markdown","75a15df9":"markdown","806c76eb":"markdown","2e2fdea2":"markdown","94a449eb":"markdown","19711069":"markdown","d5a61958":"markdown","ff8d726e":"markdown","3c08b615":"markdown","1a86be24":"markdown","2e0a330c":"markdown","af323e6d":"markdown","18ae394e":"markdown","faa699fb":"markdown","6be62095":"markdown","582d1a6f":"markdown","b417e707":"markdown","c09def0c":"markdown","8db99361":"markdown","71791fed":"markdown","14c97471":"markdown","399f255a":"markdown","da5b922a":"markdown","29dac3c3":"markdown","3ca0fdde":"markdown","d90300c6":"markdown","966f5cc3":"markdown","c0eca221":"markdown","d102e7fa":"markdown","8d415d16":"markdown","f55eead2":"markdown","3554f378":"markdown","c2b76b64":"markdown","55b623c4":"markdown","bdb1e067":"markdown","cc36b5dc":"markdown","6c2da151":"markdown","3d5b286e":"markdown","1a11cde9":"markdown","de6ea753":"markdown"},"source":{"3998073f":"#importing the required libraries\nimport pandas as pd\nimport numpy as np\n\n#viz Libraries\nimport matplotlib.pyplot as plt\n\nplt.style.use('ggplot')\nimport seaborn as sns\n\n#warnings\nimport warnings\nwarnings.filterwarnings(\"ignore\")\n\n#datetime\nimport datetime as dt\n","1a4d9b44":"import os\n\nfor dirname, _, filenames in os.walk('\/kaggle\/input'):\n    for filename in filenames:\n        print(os.path.join(dirname, filename))","b8738f53":"#reading the data\ndf = pd.read_csv('..\/input\/noshowappointments\/KaggleV2-May-2016.csv')","41a710c8":"df.head()","fb156c0e":"df.shape","fbe41c10":"df.drop_duplicates()\ndf.shape","c6eb391e":"df.columns","90c2b6f1":" df = df.rename(columns={\"Hipertension\": \"Hypertension\", \"Handcap\":\"Handicap\"})","8e1b1283":"df.dtypes","7be3e56f":"#Converting to boolean\nfor each in [\"Scholarship\", \"Hypertension\", \"Diabetes\", \"Alcoholism\", \"Handicap\"]:\n    df[each] = df[each].astype(np.bool)","fbbe4032":"# Converting to Datetime\ndf['ScheduledDay'] = pd.to_datetime(df['ScheduledDay'])\ndf['AppointmentDay'] = pd.to_datetime(df['AppointmentDay'])\n\n#Removing the TimeZones\ndf['ScheduledDay'] = df['ScheduledDay'].dt.tz_localize(None)\ndf['AppointmentDay'] = df['AppointmentDay'].dt.tz_localize(None)","f90ad7ab":"df.isnull().sum()","9d7d0359":"unique_patienids = df['PatientId'].nunique()\nunique_appointmentids = df['AppointmentID'].nunique()\nrecurring_patients = (unique_appointmentids - unique_patienids)\/unique_appointmentids\n\nprint('Unique PatientIds :' + str(unique_patienids))\nprint('Unique AppointmentIds :' + str(unique_appointmentids))\nprint('% of recurring patients:'+ str(recurring_patients))","03031275":"print(df['Gender'].value_counts(normalize = True))\nprint('Total Patients:' + str(df['Gender'].value_counts().sum()))\n\nplt.figure(figsize=(10,6))\ndf['Gender'].value_counts().plot(kind= 'bar')\nplt.title('Distribution of Gender')\nplt.xlabel('Gender')\nplt.ylabel('Count')\nplt.show()","975ffec2":"df['Handicap'].value_counts()","b1842d27":"print('Descriptive Statistics for \"Age\"')\nprint(df['Age'].describe())","bbb093d6":"df = df[df['Age'] >= 0]","e37df221":"print(len(df[df['Age'] == 0]))\ndf[df['Age'] == 0].head()","cb003508":"plt.figure(figsize=(9,6))\nsns.distplot(df['Age'])\nplt.show()","31a40dc5":"sns.boxplot(df['Age'])\nplt.show()","7e20dbd9":"def age_category(col):\n    if (col >= 0) & (col <=14):\n        return 'Children'\n    elif (col >= 15) & (col <=24):\n        return 'Youth'\n    elif (col >= 25) & (col <=64):\n        return 'Adults'\n    else:\n        return 'Senior'\n\ndf['Age Category'] = df['Age'].apply(age_category)\nprint(df['Age Category'].value_counts(normalize = True))\n\nplt.figure(figsize=(10,6))\nsns.countplot(df['Age Category'])\nplt.title('Age Category Distribution')\nplt.show()","6d6881f8":"print('Number of Unique Neighbourhoods in the data: ' + str(df['Neighbourhood'].nunique()))\nprint('The top 10 neighbourhoods with highest number entries in the data are:')\nprint(df['Neighbourhood'].value_counts().head(10))","26d834c4":"plt.figure(figsize=(10,6))\nplt.subplot(1,2,1)\ntop_10_neighbhourhoods = df['Neighbourhood'].value_counts(normalize = True).head(10)\ntop_10_neighbhourhoods.plot(kind = 'bar')\nplt.title('Neighbourhoods with highest entries')\nplt.xlabel('Neighbourhood')\nplt.ylabel('% Proportion')\n\nplt.subplot(1,2,2)\nbottom_10_neighbhourhoods = df['Neighbourhood'].value_counts(normalize = True).tail(10)\nbottom_10_neighbhourhoods.plot(kind = 'bar')\nplt.title('Neighbourhoods with lowest entries')\nplt.xlabel('Neighbourhood')\nplt.ylabel('% Proportion')\n\n\nplt.tight_layout()\nplt.show()","62c8f815":"plt.figure(figsize=(10,6))\nplt.subplot(2,4,1)\ndf['Gender'].value_counts(normalize = True).plot(kind = 'bar',alpha=0.5,color='blue')\nplt.title('Gender')\n\nplt.subplot(2,4,2)\ndf['Scholarship'].value_counts(normalize = True).plot(kind = 'bar',alpha=0.7)\nplt.title('Scholarship')\n\nplt.subplot(2,4,3)\ndf['Hypertension'].value_counts(normalize = True).plot(kind = 'bar',alpha=0.5,color='cyan')\nplt.title('Hypertension')\n\nplt.subplot(2,4,4)\ndf['Diabetes'].value_counts(normalize = True).plot(kind = 'bar',alpha=0.5,color='magenta')\nplt.title('Diabetes')\n\nplt.subplot(2,4,5)\ndf['Alcoholism'].value_counts(normalize = True).plot(kind = 'bar',alpha=0.5,color='yellow')\nplt.title('Alcoholism')\n\nplt.subplot(2,4,6)\ndf['Handicap'].value_counts(normalize = True).plot(kind = 'bar',alpha=0.5,color='green')\nplt.title('Handicap')\n\n\nplt.subplot(2,4,7)\ndf['SMS_received'].value_counts(normalize = True).plot(kind = 'bar',alpha=0.5,color='red')\nplt.title('SMS_received')\n\nplt.subplot(2,4,8)\ndf['No-show'].value_counts(normalize = True).plot(kind = 'bar',alpha=0.5,color='orange')\nplt.title('No-show')\n\nplt.tight_layout()\nplt.show()","1d2ca944":"print(max(df['AppointmentDay']) - min(df['AppointmentDay']))\nprint(min(df['AppointmentDay']))\nprint(max(df['AppointmentDay']))","92658181":"df['Appointment_WeekDay'] = df['AppointmentDay'].dt.weekday_name\n\nprint(df['Appointment_WeekDay'].value_counts(normalize = True))\n\nplt.figure(figsize=(10,6))\nsns.countplot(df['Appointment_WeekDay'])\nplt.title('Appointment WeekDay Distribution')\nplt.show()","363806ad":"df['ScheduledDate']= df['ScheduledDay'].dt.date.astype('datetime64[ns]')\nprint(max(df['ScheduledDate']) - min(df['ScheduledDate']))\nprint(min(df['ScheduledDate']))\nprint(max(df['ScheduledDate']))","d30893ce":"df['Scheduled_WeekDay'] = df['ScheduledDay'].dt.weekday_name\n\nprint(df['Scheduled_WeekDay'].value_counts(normalize = True))\n\nplt.figure(figsize=(10,6))\nsns.countplot(df['Scheduled_WeekDay'])\nplt.title('Schedule Week Day Distribution')\nplt.show()","a65c080d":"plt.figure(figsize=(12,5))\n\nplt.subplot(121)\nsns.countplot(df['Age Category'],hue = df['No-show'])\n\nplt.subplot(122)\nsns.heatmap(pd.crosstab(df['Age Category'], df['No-show'],normalize='index'),cmap=\"RdYlBu\", annot=True)\nplt.show()","92656b52":"plt.figure(figsize=(10,6))\n\nplt.subplot(131)\ndf_Hipertension = df[df['Hypertension'] == 1]\ndf_Hipertension['Age Category'].value_counts().plot(kind = 'bar',alpha=0.5,color='magenta')\nplt.title('Hypertension')\n\nplt.subplot(132)\ndf_Diabetes = df[df['Diabetes'] == 1]\ndf_Diabetes['Age Category'].value_counts().plot(kind = 'bar',alpha=0.5,color='cyan')\nplt.title('Diabetes')\n\nplt.subplot(133)\ndf_Alcoholism = df[df['Alcoholism'] == 1]\ndf_Alcoholism['Age Category'].value_counts().plot(kind = 'bar',alpha=0.5,color='yellow')\nplt.title('Alcoholism')\n\nplt.tight_layout()\nplt.show()","44c0c58d":"plt.figure(figsize=(12,4))\nplt.subplot(131)\nsns.heatmap(pd.crosstab(df['Hypertension'], df['No-show'],normalize='index'),cmap=\"PiYG\", annot=True)\nplt.title('Hypertension')\n\nplt.subplot(132)\nsns.heatmap(pd.crosstab(df['Diabetes'], df['No-show'],normalize='index'),cmap=\"PRGn\", annot=True)\nplt.title('Diabetes')\n\nplt.subplot(133)\nsns.heatmap(pd.crosstab(df['Alcoholism'], df['No-show'],normalize='index'),cmap=\"RdGy\", annot=True)\nplt.title('Alcoholism')\n\nplt.tight_layout()\nplt.show()","ded218ad":"plt.figure(figsize=(10,6))\nsns.countplot(df['Neighbourhood'],hue = df['No-show'])\nplt.xticks(rotation = 90)\nplt.show()","59d4ebda":"# Scheduled to Show\/No-show Ratio\n\ndf['No-show'] = df['No-show'].map({'Yes': 1, 'No': 0})\ngrouped = df.groupby(['Neighbourhood']).agg({'PatientId':'count','No-show':'sum'}).reset_index()\ngrouped.rename(columns = {'PatientId':'Schedules','No-show':'No-shows'}, inplace = True) \ngrouped['No-Shows to Schedule Ratio'] = grouped['No-shows']\/grouped['Schedules']\n\nhigh_no_shows = grouped.sort_values(by = 'No-Shows to Schedule Ratio',ascending = False)[:10]\nprint(high_no_shows.head())\n\nplt.figure(figsize=(10,6))\nsns.barplot(x='Neighbourhood',y='No-Shows to Schedule Ratio',data=high_no_shows)\nplt.title('Top 10 Neighborhoods with high No-shows')\nplt.xticks(rotation = 90)\nplt.show()","55849157":"low_no_shows = grouped.sort_values(by = 'No-Shows to Schedule Ratio',ascending = True)[:10]\nprint(low_no_shows.head())\n\nplt.figure(figsize=(10,6))\nsns.barplot(x='Neighbourhood',y='No-Shows to Schedule Ratio',data=low_no_shows)\nplt.title('Top 10 Neighborhoods with low No-shows')\nplt.xticks(rotation = 90)\nplt.show()","36c78247":"plt.figure(figsize=(10,5))\nplt.subplot(121)\nsns.countplot(df['Scholarship'],hue=df['No-show'])\n\nplt.subplot(122)\nsns.heatmap(pd.crosstab(df['Scholarship'], df['No-show'],normalize='index'),cmap=\"RdYlBu\", annot=True)\n\nplt.tight_layout()\nplt.show()","eddafa2b":"plt.figure(figsize=(10,5))\nplt.subplot(1,2,1)\nsns.heatmap(pd.crosstab(df['Appointment_WeekDay'], df['No-show'],normalize='index'),cmap=\"Accent\", annot=True)\nplt.title('Appointment Week Day Vs No-Show')\n\nplt.subplot(1,2,2)\nsns.heatmap(pd.crosstab(df['Scheduled_WeekDay'], df['No-show'],normalize='index'),cmap=\"Accent\", annot=True)\nplt.title('Scheduled Week Day Vs No-Show')\n\nplt.tight_layout()\nplt.show()","db78454d":"df['SMS_received'].value_counts()","fbdf5556":"df['Wait_Days'] = (df['AppointmentDay']-df['ScheduledDay'])\ndf['Wait_Days'] = df['Wait_Days'].dt.days\ndf['Wait_Days'].describe()","4bc8208e":"df_wait = df[df['Wait_Days']<0]\ndf_wait.shape","7ed1720c":"df['AppointmentDay'] = np.where((df['AppointmentDay'] - df['ScheduledDay']).dt.days < 0, df['ScheduledDay'], df['AppointmentDay'])","ef711647":"df['Wait_Days'] = (df['AppointmentDay']-df['ScheduledDay'])\ndf['Wait_Days'] = df['Wait_Days'].dt.days\ndf['Wait_Days'].describe()","a239800a":"print(df.groupby(['No-show'])['Wait_Days'].mean())\n\nsns.boxplot(x='No-show',y='Wait_Days',data = df)\nplt.show()","6dc68c80":"print(df.groupby(['Age Category'])['Wait_Days'].mean())","e1015bc1":"plt.figure(figsize=(10,5))\nplt.subplot(121)\nsns.countplot(df['SMS_received'],hue=df['No-show'])\n\nplt.subplot(122)\nsns.heatmap(pd.crosstab(df['SMS_received'], df['No-show'],normalize='index'),cmap=\"Accent\", annot=True)\n#plt.title('Scheduled Day Vs No-Show')\n\nplt.tight_layout()\nplt.show()","25f4d939":"The average wait time among different age categories looks similar with no huge differences.","d2b69966":"Similar kind of trend is followed in Scheduled day as seen in Appointmet Day. Highest number of appointments are scheduled on Tuedsays followed by Wednesdays and Mondays.","c8dd12cc":"**ScheduledDay**","175a1176":"**Creating a new column \"Age Category\" for better understanding the age distribution.**","79a04ade":"It looks like there is no significant relation between the weekday and the probability of the patient showin\/not showing up for the appointment. But we can observe that the percentage of no shows is high during Saturdays. The number of days between Scheduled date and Appointment date could reveal more details.","9cc67086":"There are 110527 appointments in total. 65% of the appointments are reserved by Female and 35% are reserved by Male. This indicates that the probability of ill health is distributed disproportionately among the Male and Female. ","e39529c2":"# **Renaming the misspelt columns**","59b650ef":"# **Variable Indentification**\n\n**PatientId(Int)** - Identification of a patient<br>\n**AppointmentID** - Identification of each appointment<br>\n**Gender(Nominal)** - Male\/Female<br>\n**ScheduledDay(DateTime)** - The day someone called or registered the appointment<br>\n**AppointmentDay(DateTime)** - The day of the actual appointment<br>\n**Age(Continous)**-How old is the patient<br>\n**Neighbourhood(Nominal)** - Locality of the patient\/clinic<br>\n**Scholarship(Boolean)** - 1(Received)\/0(Not Received)<br>\n**Hipertension(Boolean)** - 1(Suffering)\/0(Not Suffering)<br>\n**Diabetes(Boolean)** - 1(Suffering)\/0(Not Suffering)<br>\n**Alcoholism(Boolean)** - 1(Suffering)\/0(Not Suffering)<br>\n**Handcap(Boolean)** - 1(Handicap)\/0(Not a Handicap)<br>\n**SMS_received(Boolean)** - 1 or more messages sent to the patient - 1(Recieved)\/0(Not Recieved)<br>\n**No-show** - True\/False<br>","4d06b7ad":"**Distribution of Age**","ebd0ecc3":"* Highest number of appointments are made from the neighbourhoods of JARDIM CAMBURI followed by MARIA ORTIZ and RESIST\u00caNCIA. \n* Lowest number of appointments are made from PARQUE INDUSTRIAL neighborhood.\n* Having the additional data of population of each neighborhood can help in making better assumptions of the neighborhoods and appointments.","96972424":"# **About the Data Set:**\n\nThe dataset contains a list of patients suffering from one or more of hypertension, diabetes, alcoholism and handicap, all of them binary variables, along with patient information (gender, age, neighbourhood) and information about appointment and scheduling times. There is also a no_show column which tells us if the patient visited the doctor.\n\nDimensions - 110527 rows, 14 columns\n","bde56c39":"* There are 100,000 patients with no scholarship and 80% of them are showing up for their appointment.\n* Out of 10,500 patients with Scholarship, 76% of them showe up for appointment.","328cae1a":"**Gender**","6a6e7a67":"# Age Category Vs No-Show","a87217fa":"**Other Boolean\/Categorical Variables**","75a15df9":"It is observed that the AppointmentDay ranges from 2016-04-29 to 2016-06-08, i.e., 40days.","806c76eb":"The above visualization does not give an clear idea of Neighbourhood Vs No-Show. Calculating the ratio of number of no-shows to the total number of scheduled appointments may present a clear picture. The lower the ratio, the lower are the no of no shows and vice versa.","2e2fdea2":"* The descriptive stats show that the minimum age of the patients is -1, which can be a data entry error. Removing the rows with negative age in the next step.\n* Age can have a value of zero because of posible presence of toddlers in the data.","94a449eb":"# SMS Received Vs No-Show","19711069":"There cannot be -ve number of wait days becauese scheduled date cannot be after appointment date. Checking how many number of such rows exist in the data before dropping them.","d5a61958":"# (Hypertension, Diabetes, Alcoholism) Vs No-show","ff8d726e":"**Extracting Day of the Week for AppointmentDay**","3c08b615":"# **Correcting the inconsistent datatypes**","1a86be24":"**Extracting Day of the Week for AppointmentDay**","2e0a330c":"There are 38567 number of rows in the data with schedule date later than appointment date. We cannot just drop this huge amount of data. Instead we can reset the schedule date to appointment date.","af323e6d":"**Unique PatientIds and AppointmentIds**","18ae394e":"* The assumption that patients with 0 age as toodlers can be considered appropriate, as we can above that they received no scholarships and are not suffering from any diseases. \n* There are 3539 toddler appointments in the data.","faa699fb":"# Neighbourhood Vs No-show","6be62095":"**Hypertension**\n\n* There are 88,000 patients not suffering from hypertension and 79% of the people are showing up for their appointment.\n* Out of 22,500 patients with Hypertension, 83% of them showe up for appointment.\n\n**Diabetes**\n* There are 102,000 patients not suffering from hypertension and 80% of the people are showing up for their appointment.\n* Out of 8,500 patients with Hypertension, 82% of them showe up for appointment.\n\n**Alcoholism**\n* 80% of both the alcoholics and non alcoholics are showing up for their appointments.\n\nThe above graphs clearly convey that probability of suffering\/not suffering from Hypertension or Diabetes has significant affect on patient's probability of showing up for their appointment. Where as,  Alcoholics or Non alcoholics have the same probability.\n\n","582d1a6f":"We can observe that 25% of the appointments are made on the same day of appointment. An average value of the wait days is around 9 days.","b417e707":"# **Data Cleaning and Transformation**","c09def0c":"There are only 62299 unique patient ids while the number of unique appointment ids are 110527. This shows that 43% of the appointments are made by the recurring patients.","8db99361":"# Scholarship Vs No-Show","71791fed":"# **Checking for null values**","14c97471":"# **Business Case**\n\nAnalyze data and know the impact of showing for appointments and receiving reminder SMS message. How many patients received an SMS and didn't show? What about the number of those who didn't show but also didn't receive a SMS. What are the other factors that affects the patient's no show?\n","399f255a":"* The above visual shows that 46% of the appointments are reserved on Tuesday and Wednesday.\n* The next favourable days for the appointments as observed above are MOnday, Friday and Thursday.\n* The least number of appointments are observed during Saturday, which is obvious as it is a weekend day.","da5b922a":"# **Verifying the data types**","29dac3c3":"The average wait among the patients with No-show is 14 days(2 weeks) and 8 days among the patient who show up at appointments.","3ca0fdde":"# Bi-variate Analysis","d90300c6":"* There are 35,500 patients who received SMS and 72% of those patients showed up for their appointment.\n* Out of around 75,000 patients who did not receive SMS, 83% of them showe up for appointment.","966f5cc3":"* **Scholarship** : 85% of people who reserved the appointments has no scholarship.\n* **Hypertension, Alcoholism & Diabetes** : 20% of the people are suffering from Hypertension. Less than 10% of people are suffering from Diabetes and Alcoholism.\n* **SMS_received** : Approximately 70% of the peole did not receive any SMS alerts about the appointments.\n* **No-Show**: Only 20% of the appointments made turned out to be a no-show.\n","c0eca221":"**Conclusion:**\n\nFrom the above analysis, it is clear that Gender, Age, Neighbourhood, Scholarship,Hypertension and Diabetes are the factors that have an notable affect on the probability of No-show\/show.\n","d102e7fa":"**AppointmentDay**","8d415d16":"# Calculating number of days between Scheduled date and Appointment date could reveal more details","f55eead2":"# **Uni-variate Analysis**","3554f378":"ScheduleDate varies from 2015-11-10 to 2016-06-08 i.e., around 7 months of time. It is interesting to note that, while appointment range is in the range of 40 days, the schedule date range is 7 months in contrast.","c2b76b64":"# (Appointment Day,Scheduled Day) Vs No-Show","55b623c4":"**Age**","bdb1e067":"53% of the patients in the data are Adults, 21% of children,13% of Seniors and 12% of Youth.","cc36b5dc":"On observing the bar plpot, we may infer that highest number of No-shows are observed in Adults. But the percentage values on the left gives the clear idea of the situation. Out of 100 appointments booked by the Youth, 25 of them turn out be NO-shows which is the highest in the age categories. Seniors are among the age group with less percentage of No-shows. This proves that Age can be an important factor in determing the probability of patient showing\/not showing up for his\/her appointment.","6c2da151":"There are no null values in the data.","3d5b286e":"**Neighbourhoods**","1a11cde9":"* The average age of the patients is approximately 37 years.\n* 50% of the patients are between the age of 18-55 years.\n* The highest age recorded is 115 years.","de6ea753":"**Handicap**"}}