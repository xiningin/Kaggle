{"cell_type":{"15df0867":"code","0a5e2513":"code","f9b36055":"code","645ae9d1":"code","3fbed5f4":"code","39e786ae":"code","7992410e":"code","1485a34c":"code","d8fba614":"code","c55f968c":"code","db824d4a":"code","fc65acc0":"code","a8111446":"code","689102e7":"code","df5ca33a":"code","a6d020d2":"code","b69e5904":"code","e7db8e3a":"code","1b8ed254":"code","d6c8c72d":"code","adf1abf3":"code","7548dba3":"code","a962f5af":"code","910284da":"code","59314db8":"code","01b95a58":"code","9e47c8f5":"code","a85be668":"code","33352684":"code","8d1a8bbd":"code","8bf1d4a9":"code","e7c0a346":"code","d61e1a0e":"code","c7e7b854":"code","7e01d449":"code","3f316d9a":"code","fcbd5eb8":"code","b71d1135":"code","311751ab":"code","aae293dd":"code","250c93e9":"code","66b9fbd3":"code","13c96abf":"code","a63b1e66":"code","7476c67b":"code","5009df17":"code","30f8d4f9":"code","671193f1":"code","accfbb14":"code","37b5d057":"code","639e2d71":"code","4a0e194b":"markdown","776eb533":"markdown","b9c4a4f3":"markdown","4500cf66":"markdown","5091ec02":"markdown","eee2f6bc":"markdown","29326778":"markdown","d8f8709c":"markdown","21b4ea72":"markdown","715f4616":"markdown","cc36d34b":"markdown","aa4a604f":"markdown","3192f3c3":"markdown","aac7b9ba":"markdown","de370586":"markdown","2bf302e8":"markdown","f544fdc8":"markdown","6c7d2e41":"markdown","6447657f":"markdown"},"source":{"15df0867":"#importing libaries\nimport numpy as np\nimport pandas as pd\nimport matplotlib.pyplot as plt\nimport seaborn as sns\n\n\nimport plotly.graph_objects as go\nimport plotly.express as px\nimport plotly.io as pio\npio.templates.default = \"plotly_dark\"\nfrom plotly.subplots import make_subplots\nimport seaborn as sns\n\n\nfrom sklearn.model_selection import RandomizedSearchCV , train_test_split\nfrom sklearn.svm import SVR\nfrom sklearn.linear_model import LinearRegression\nfrom sklearn.metrics import mean_squared_error, mean_absolute_error\nimport datetime\nplt.style.use('seaborn')\nimport math\nimport random\nimport time\nimport operator","0a5e2513":"covid19 = pd.read_csv('..\/input\/novel-corona-virus-2019-dataset\/covid_19_data.csv')","f9b36055":"covid19.head()","645ae9d1":"covid19['ObservationDate']=pd.to_datetime(covid19['ObservationDate'])\ncovid19['Last Update']=pd.to_datetime(covid19['Last Update'])","3fbed5f4":"covid19.dtypes","39e786ae":"grouped = covid19.groupby('ObservationDate')['Last Update', 'Confirmed', 'Deaths'].sum().reset_index()","7992410e":"grouped.head()","1485a34c":"\nfig = px.line(grouped, x=\"ObservationDate\", y=\"Confirmed\", \n              title=\"Worldwide Confirmed Cases Over Time\")\nfig.show()\n\nfig = px.line(grouped, x=\"ObservationDate\", y=\"Confirmed\", \n              title=\"Worldwide Confirmed Cases (Logarithmic Scale) Over Time\", \n              log_y=True)\nfig.show()","d8fba614":"fig = px.line(grouped, x=\"ObservationDate\", y=\"Deaths\", title=\"Worldwide Deaths Over Time\",\n             color_discrete_sequence=['#F42272'])\nfig.show()\n\nfig = px.line(grouped, x=\"ObservationDate\", y=\"Deaths\", title=\"Worldwide Deaths (Logarithmic Scale) Over Time\", \n              log_y=True, color_discrete_sequence=['#F42272'])\nfig.show()","c55f968c":"grouped_sl = covid19[covid19['Country\/Region'] == \"Sri Lanka\"].reset_index()\ngrouped_sl_date = grouped_sl.groupby('ObservationDate')['ObservationDate', 'Confirmed', 'Deaths'].sum().reset_index()","db824d4a":"grouped_sl_date.head()","fc65acc0":"fig = px.line(grouped_sl_date, x=\"ObservationDate\", y=\"Confirmed\", \n              title=\"Sri Lanka Confirmed Cases Over Time\")\nfig.show()","a8111446":"grouped_china = covid19[covid19['Country\/Region'] == \"Mainland China\"].reset_index()\ngrouped_ch_date = grouped_china.groupby('ObservationDate')['ObservationDate', 'Confirmed', 'Deaths'].sum().reset_index()","689102e7":"fig = px.line(grouped_ch_date, x=\"ObservationDate\", y=\"Confirmed\", \n              title=\"China Confirmed Cases Over Time\")\nfig.show()","df5ca33a":"grouped_italy = covid19[covid19['Country\/Region'] == \"Italy\"].reset_index()\ngrouped_italy_date = grouped_china.groupby('ObservationDate')['ObservationDate', 'Confirmed', 'Deaths'].sum().reset_index()","a6d020d2":"fig = px.line(grouped_italy_date, x=\"ObservationDate\", y=\"Confirmed\", \n              title=\"Italy Confirmed Cases Over Time\")\nfig.show()","b69e5904":"covid19['Active'] = covid19['Confirmed'] - (covid19['Deaths'] + covid19['Recovered'])\ncovid19_new = covid19\nwithout_china = covid19[covid19['Country\/Region'] != \"Mainland China\"]","e7db8e3a":"line_data = covid19_new.groupby(['ObservationDate'])['Confirmed', 'Deaths', 'Recovered', 'Active'].sum().reset_index()\nline_data = line_data.melt(id_vars=\"ObservationDate\", value_vars=['Confirmed', 'Active', 'Recovered', 'Deaths'], var_name='Case', value_name='Count')\nfig = px.line(line_data, x='ObservationDate', y='Count', color='Case', title='Whole World Cases over time')\nfig.show()","1b8ed254":"ch_data = covid19_new[covid19_new['Country\/Region'] == 'Mainland China'].reset_index(drop=True)\nch_line_data = ch_data.groupby(['ObservationDate'])['Confirmed', 'Deaths', 'Recovered', 'Active'].sum().reset_index()","d6c8c72d":"ch_line_data = ch_line_data.melt(id_vars=\"ObservationDate\", value_vars=['Confirmed', 'Active', 'Recovered', 'Deaths'], var_name='Case', value_name='Count')\nfig = px.line(ch_line_data, x='ObservationDate', y='Count', color='Case', title='China Cases over time')\nfig.show()","adf1abf3":"last_data = covid19_new.groupby(['ObservationDate'])['Confirmed', 'Deaths', 'Recovered', 'Active'].sum()\nlast_data = last_data.reset_index()\nlast_data = last_data[last_data['ObservationDate'] == max(last_data['ObservationDate'])]\nlast_data = last_data.reset_index(drop=True)\nlast_data['Deaths %'] = round(100 * last_data['Deaths'] \/ last_data['Confirmed'], 2)\nlast_data['Recovered %'] = round(100 * last_data['Recovered'] \/ last_data['Confirmed'], 2)\nlast_data['Active %'] = round(100 * last_data['Active'] \/ last_data['Confirmed'], 2)\nlast_data.style.background_gradient(cmap='Pastel1')","7548dba3":"pi_data = last_data.melt(id_vars=\"ObservationDate\", value_vars=['Active', 'Deaths', 'Recovered'], var_name='Case', value_name='Count')\nfig = px.pie(pi_data, values='Count', names='Case')\nfig.show()","a962f5af":"wc_data = without_china.groupby(['ObservationDate'])['Confirmed', 'Deaths', 'Recovered', 'Active'].sum()\nwc_data = wc_data.reset_index()\nwc_data = wc_data[wc_data['ObservationDate'] == max(wc_data['ObservationDate'])]\nwc_data = wc_data.reset_index(drop=True)\nwc_data['Deaths Rate'] = round(100 * wc_data['Deaths'] \/ wc_data['Confirmed'], 2)\nwc_data['Recovered Rate'] = round(100 * wc_data['Recovered'] \/ wc_data['Confirmed'], 2)\nwc_data['Active Rate'] = round(100 * wc_data['Active'] \/ wc_data['Confirmed'], 2)\nwc_data.style.background_gradient(cmap='Pastel1')","910284da":"pi_data = wc_data.melt(id_vars=\"ObservationDate\", value_vars=['Active', 'Deaths', 'Recovered'], var_name='Case', value_name='Count')\nfig = px.pie(pi_data, values='Count', names='Case')\nfig.show()","59314db8":"covid19['Province\/State'] = covid19['Province\/State'].fillna('')\ntemp = covid19[[col for col in covid19.columns if col != 'Province\/State']]\n\nlatest = temp[temp['ObservationDate'] == max(temp['ObservationDate'])].reset_index()\nlatest_grouped = latest.groupby('Country\/Region')['Confirmed', 'Deaths'].sum().reset_index()","01b95a58":"fig = px.choropleth(latest_grouped, locations=\"Country\/Region\", \n                    locationmode='country names', color=\"Confirmed\", \n                    hover_name=\"Country\/Region\", range_color=[1,5000], \n                    color_continuous_scale=\"peach\", \n                    title='Countries with Confirmed Cases')\n# fig.update(layout_coloraxis_showscale=False)\nfig.show()","9e47c8f5":"wc_bar_data = without_china.groupby(['ObservationDate', 'Country\/Region'])['Confirmed', 'Deaths', 'Recovered', 'Active'].sum().reset_index()\nwc_bar_data = wc_bar_data.drop_duplicates(subset=[\"Country\/Region\"], keep='last')\n\nwc_bar_data['Deaths Rate'] = round(100 * wc_bar_data['Deaths'] \/ wc_bar_data['Confirmed'], 2)\nwc_bar_data['Recovered Rate'] = round(100 * wc_bar_data['Recovered'] \/ wc_bar_data['Confirmed'], 2)\nwc_bar_data['Active Rate'] = round(100 * wc_bar_data['Active'] \/ wc_bar_data['Confirmed'], 2)","a85be668":"wc_bar_data = wc_bar_data[wc_bar_data['Confirmed'] > 1000]\nwc_daths_rate = wc_bar_data\nwc_daths_rate = wc_daths_rate.sort_values(by=['Deaths Rate'], ascending=False).reset_index(drop=True)\nwc_daths_rate.style.background_gradient(cmap='Reds')","33352684":"cases_per_Day = covid19.groupby([\"ObservationDate\"])['Confirmed','Deaths', 'Recovered'].sum().reset_index()\nsorted_By_Confirmed1=cases_per_Day.sort_values('ObservationDate',ascending=False)\n\nsorted_By_Confirmed1.style.background_gradient(cmap='Reds')","8d1a8bbd":"#Grouping different types of cases as per the date\ndatewise=covid19.groupby([\"ObservationDate\"]).agg({\"Confirmed\":'sum',\"Recovered\":'sum',\"Deaths\":'sum'})\ndatewise.head()","8bf1d4a9":"import seaborn as sns\nsns.set_style(\"whitegrid\")\nsns.kdeplot(datewise[\"Confirmed\"])\nplt.title(\"Density Distribution Plot for Confirmed Cases\")","e7c0a346":"\n\nsns.kdeplot(datewise[\"Deaths\"])\nplt.title(\"Density Distribution Plot for Death Cases\")","d61e1a0e":"sns.kdeplot(datewise[\"Recovered\"])\nplt.title(\"Density Distribution Plot for Death Cases\")","c7e7b854":"#Calculating the Mortality Rate and Recovery Rate\ndatewise[\"Mortality Rate\"]=(datewise[\"Deaths\"]\/datewise[\"Confirmed\"])*100\ndatewise[\"Recovery Rate\"]=(datewise[\"Recovered\"]\/datewise[\"Confirmed\"])*100\n \nfig, (ax1, ax2) = plt.subplots(1, 2,figsize=(20,6))\nax1.plot(datewise[\"Mortality Rate\"],label='Mortality Rate')\nax1.axhline(datewise[\"Mortality Rate\"].mean(),linestyle='--',color='black',label=\"Mean Mortality Rate\")\nax1.set_ylabel(\"Number of Patients\")\nax1.set_xlabel(\"Timestamp\")\nax1.legend()\n\nfor tick in ax1.get_xticklabels():\n    tick.set_rotation(90)\nax2.plot(datewise[\"Recovery Rate\"],label=\"Recovery Rate\")\nax2.axhline(datewise[\"Recovery Rate\"].mean(),linestyle='--',color='black',label=\"Mean Recovery Rate\")\nax2.set_ylabel(\"Number of Patients\")\nax2.set_xlabel(\"Timestamp\")\nax2.legend()\nfor tick in ax2.get_xticklabels():\n    tick.set_rotation(90)","7e01d449":"#load dataset\nconfirm_data = pd.read_csv('..\/input\/novel-corona-virus-2019-dataset\/time_series_covid_19_confirmed.csv') \ndeath_data = pd.read_csv('..\/input\/novel-corona-virus-2019-dataset\/time_series_covid_19_deaths.csv')\nrecoverd_data = pd.read_csv('..\/input\/novel-corona-virus-2019-dataset\/time_series_covid_19_recovered.csv')","3f316d9a":"cols = confirm_data.keys()\ncols","fcbd5eb8":"confirmed = confirm_data.loc[:,cols[4]:cols[-1]]\ndeaths = death_data.loc[:,cols[4]:cols[-1]]\nrecovered = recoverd_data.loc[:,cols[4]:cols[-1]]","b71d1135":"dates = confirmed.keys()\nworld_cases = []\ntotal_deaths = [] \nmortality_rate = []\nrecovery_rate = [] \ntotal_recovered = [] \ntotal_active = [] \n\nfor i in dates:\n    confirmed_sum = confirmed[i].sum()\n    death_sum = deaths[i].sum()\n    recovered_sum = recovered[i].sum()\n    world_cases.append(confirmed_sum)\n    total_deaths.append(death_sum)\n    mortality_rate.append(death_sum\/confirmed_sum)\n    recovery_rate.append(recovered_sum\/confirmed_sum)\n    total_recovered.append(recovered_sum)\n    total_active.append(confirmed_sum-death_sum-recovered_sum)","311751ab":"days_since_1_22 = np.array([i for i in range(len(dates))]).reshape(-1, 1)\nworld_cases = np.array(world_cases).reshape(-1, 1)\ntotal_deaths = np.array(total_deaths).reshape(-1, 1)\ntotal_recovered = np.array(total_recovered).reshape(-1, 1)","aae293dd":"#future forcasting for the next 10 days\n\ndays_in_future = 10\nfuture_forcast = np.array([i for i in range(len(dates)+days_in_future)]).reshape(-1,1)\nadjusted_dates = future_forcast[:-10]","250c93e9":"start = '1\/22\/2020'\nstart_date = datetime.datetime.strptime(start, '%m\/%d\/%Y')\nfuture_forcast_dates = []\nfor i in range(len(future_forcast)):\n    future_forcast_dates.append((start_date + datetime.timedelta(days=i)).strftime('%m\/%d\/%Y'))","66b9fbd3":"#split in to train test data\nX_train_confirmed, X_test_confirmed, y_train_confirmed, y_test_confirmed = train_test_split(days_since_1_22, world_cases, test_size=0.15, shuffle=False) ","13c96abf":"svm_confirmed = SVR(shrinking=True, kernel='poly',gamma=0.01, epsilon=1,degree=5, C=0.1)\nsvm_confirmed.fit(X_train_confirmed, y_train_confirmed)\nsvm_pred = svm_confirmed.predict(future_forcast)","a63b1e66":"# check against testing data\nsvm_test_pred = svm_confirmed.predict(X_test_confirmed)\nplt.plot(svm_test_pred)\nplt.plot(y_test_confirmed)\nprint('MAE:', mean_absolute_error(svm_test_pred, y_test_confirmed))\nprint('MSE:',mean_squared_error(svm_test_pred, y_test_confirmed))","7476c67b":"plt.figure(figsize=(12, 6))\nplt.plot(adjusted_dates, world_cases)\nplt.plot(future_forcast, svm_pred, linestyle='dashed', color='purple')\nplt.title('Number of Coronavirus Cases Over Time')\nplt.xlabel('Confirm cases vs SVM prediction')\nplt.ylabel('Number of Cases')\nplt.legend(['Confirmed Cases', 'SVM predictions'])\nplt.xticks(size=15)\nplt.show()","5009df17":"print('SVM future predictions for 10 Days:')\nset(zip(future_forcast_dates[-10:], svm_pred[-10:]))","30f8d4f9":"linear_model = LinearRegression(normalize=True, fit_intercept=False)\nlinear_model.fit(X_train_confirmed, y_train_confirmed)\ntest_linear_pred = linear_model.predict(X_test_confirmed)\nlinear_pred = linear_model.predict(future_forcast)\nprint('MAE:', mean_absolute_error(test_linear_pred, y_test_confirmed))\nprint('MSE:',mean_squared_error(test_linear_pred, y_test_confirmed))","671193f1":"print(linear_model.coef_)\nprint(linear_model.intercept_)","accfbb14":"plt.plot(test_linear_pred)\nplt.plot(y_test_confirmed)","37b5d057":"plt.figure(figsize=(12, 6))\nplt.plot(adjusted_dates, world_cases)\nplt.plot(future_forcast, linear_pred, linestyle='dashed', color='orange')\nplt.title('Number of Coronavirus Cases Over Time')\nplt.xlabel('Confirm cases vs Linear Regression')\nplt.ylabel('Number of Cases')\nplt.legend(['Confirmed Cases', 'Linear Regression Predictions'])\nplt.xticks(size=15)\nplt.show()","639e2d71":"# Future predictions using Linear Regression \nprint('Linear regression future 10 predictions:')\nprint(linear_pred[-10:])","4a0e194b":"### Making Prediction","776eb533":"### Italy Confirmed Cases Over Time","b9c4a4f3":"### predict using Linear Regression","4500cf66":"### Worldwide Confirmed Cases Over Time and Logarithmic Scale","5091ec02":"## Covid-19 Outbreak Analysis and Prediction","eee2f6bc":"### Distribution plot of confirmed cases around the world ","29326778":"### predict using Support Vector Machine","d8f8709c":"### Cases per day over the time","21b4ea72":"<img src=\"covid.jpg\"\/>","715f4616":"### Outside China, Rest of the World  recovered, deaths Percentage","cc36d34b":"### Moratality and Recovery Rate analysis around the World","aa4a604f":"### China Confirmed Cases Over Time","3192f3c3":"### Whole World active, recovered, deaths Percentage","aac7b9ba":"### Outside China Minimum 1000 Confirmed sorted by Deaths Rate","de370586":"### 2019 Novel Coronavirus (2019-nCoV) is a virus (more specifically, a coronavirus) identified as the cause of an outbreak of respiratory illness first detected in Wuhan, China. Early on, many of the patients in the outbreak in Wuhan, China reportedly had some link to a large seafood and animal market, suggesting animal-to-person spread. However, a growing number of patients reportedly have not had exposure to animal markets, indicating person-to-person spread is occurring. At this time, it\u2019s unclear how easily or sustainably this virus is spreading between people - CDC\n\n### This dataset has daily level information on the number of affected cases, deaths and recovery from 2019 novel coronavirus. Please note that this is a time series data and so the number of cases on any given day is the cumulative number.\n\n### The data is available from 22 Jan, 2020.","2bf302e8":"### Worldwide Deaths Cases Over Time and Logarithmic Scale","f544fdc8":"### Whole World Cases over time","6c7d2e41":"### Sri Lanka Confirmed Cases Over Time","6447657f":"### China Cases over time"}}