{"cell_type":{"c6218a09":"code","1fa69184":"code","a97f1273":"code","cd3f74bc":"code","367defe2":"code","224c7d1f":"code","63a758c4":"code","f4162817":"code","08bdd1e5":"code","e6e4e2f6":"code","880cd3b3":"code","a4de57a3":"code","34a45906":"code","c0554c2c":"code","9eeacbe2":"code","ed5346c2":"code","d3fcd2db":"code","5fb45d58":"code","91da14cb":"code","6193fff3":"code","14783617":"code","68ab9bfe":"code","5aaf62e9":"code","8abe5588":"code","c5d2f2c7":"code","e38a2838":"code","f1926fa8":"code","d19e34f8":"code","39028658":"code","821b077f":"code","4519542b":"code","198c003b":"code","fa914ba2":"code","00a7b090":"code","41b1fc0c":"code","fd467449":"code","ad5e9035":"code","f3d38730":"code","d29e608e":"code","843f95df":"code","fbe73cf3":"code","6b3e49d0":"code","7775a204":"code","dae4ce0c":"code","b2619787":"code","7e8090f2":"code","f34a2fbb":"code","2f3f975c":"code","3f8dd8cc":"code","4a296d27":"code","63694908":"code","f9867cbf":"code","40016adb":"code","ac62e6aa":"code","1eb74c84":"code","d4e93eba":"code","6d83ff77":"code","7f6d2d64":"code","0d95af2e":"code","66b264a8":"markdown","0172ca84":"markdown","f6fff073":"markdown","9ec79ae8":"markdown","455b6606":"markdown","4d45f4c0":"markdown","bd5c6452":"markdown","ef43a64d":"markdown","758ece8d":"markdown","6cb8b09d":"markdown"},"source":{"c6218a09":"import numpy as np # linear algebra\nimport pandas as pd # data processing, CSV file I\/O (e.g. pd.read_csv)\nimport os","1fa69184":"df = pd.read_csv('\/kaggle\/input\/kaggle-survey-2020\/kaggle_survey_2020_responses.csv')","a97f1273":"def eda(dfA, allEDA=False, desc='Exploratory Data Analysis'):\n    print(desc)\n    print(f'\\nShape:\\n{dfA.shape}')\n    print(f'\\nIs Null:\\n{dfA.isnull().mean().sort_values(ascending=False)}')\n    dup = dfA.duplicated()\n    print(f'\\nDuplicated: \\n{dfA[dup].shape}\\n')\n    try:\n        print(dfA[dfA.duplicated(keep=False)].sample(4))\n    except:\n        pass\n    if allEDA:  # here you put yours prefered analysis that detail more your dataset\n        \n        print(f'\\nDTypes - Numerics')\n        print(dfA.describe(include=[np.number]))\n        print(f'\\nDTypes - Categoricals')\n        print(dfA.describe(include=['object']))\n        \n        #print(df.loc[:, df.dtypes=='object'].columns)\n        print(f'\\nHead of dataframe:\\n{dfA.head()}')\n        print(f'\\nFive Samples :\\n{dfA.sample(5)}')\n        print(f'\\nTail of dataframe:\\n{dfA.tail()}')","cd3f74bc":"df.shape","367defe2":"pd.set_option('display.max_rows', df.shape[0]+1)\ndf.isnull().sum().sort_values(ascending=False)","224c7d1f":"df.head()","63a758c4":"df.sample(5)","f4162817":"df.tail()","08bdd1e5":"questions = [q for q in df.iloc[0]]\nquestions","e6e4e2f6":"col = [c for c in df.columns]\ncolumns = col.copy()\ncolumns[0] = 'time'","880cd3b3":"def getQuestion(element, txt):\n    return [x  for x in range(0, len(element)) if not element[x].find(txt)]\n","a4de57a3":"import plotly.express as px\n# Importing pygal and its styles\n!pip install pygal -q\nimport pygal\nfrom pygal.style import Style\nfrom IPython.display import display, HTML","34a45906":"# This is helper function to render plot in HTML format\n\nbase_html = \"\"\"\n<!DOCTYPE html>\n<html>\n  <head>\n  <script type=\"text\/javascript\" src=\"http:\/\/kozea.github.com\/pygal.js\/javascripts\/svg.jquery.js\"><\/script>\n  <script type=\"text\/javascript\" src=\"https:\/\/kozea.github.io\/pygal.js\/2.0.x\/pygal-tooltips.min.js\"\"><\/script>\n  <\/head>\n  <body>\n    <figure>\n      {rendered_chart}\n    <\/figure>\n  <\/body>\n<\/html>\n\"\"\"\ndef pygalplot(chart):\n    rendered_chart = chart.render(is_unicode=True)\n    plot_html = base_html.format(rendered_chart=rendered_chart)\n    display(HTML(plot_html))","c0554c2c":"def removeOutliers(out, varTarget):\n    cidgrp = out[varTarget]\n    # quantiles\n    qtl1 = cidgrp.quantile(.25)  \n    qtl3 = cidgrp.quantile(.75)\n    # calculating iqr\n    iqr = qtl3 - qtl1\n\n    # creating limits\n    baixo = qtl1 - 1.5 * iqr\n    alto = qtl3 + 1.5 * iqr\n\n    # removing outliers\n    novodf = pd.DataFrame()\n\n    limites = out[varTarget].between(left=baixo, right=alto, inclusive=True)\n    novodf = pd.concat([novodf, out[limites]])\n\n    return novodf","9eeacbe2":"# time\nndf = df[1:].copy()\nndf.columns = columns\nndf.time = ndf.time.apply(lambda x: int(x))\ntime = removeOutliers(ndf, 'time')\ntime = time.describe()\nf'Avg time (min): {time.time[1]\/60:.2f}'","ed5346c2":"# age\nages = ndf.groupby('Q1')['Q1'].count()\npie_chart = pygal.Pie()\npie_chart.title = 'Ages Survey (in qty)'\nfor p in range(0, len(ages)):\n    pie_chart.add(ages.index[p], ages.values[p])\npygalplot(pie_chart)","d3fcd2db":"# gender\ngender = ndf.groupby('Q2')['Q2'].count()\npie_chart = pygal.Pie()\npie_chart.title = 'Gender Survey (in qty)'\nfor p in range(0, len(gender)):\n    pie_chart.add(gender.index[p], gender.values[p])\npygalplot(pie_chart)","5fb45d58":"# country\n\ncountry = ndf.groupby('Q3')['Q3'].count().sort_values(ascending=False)\nline_chart = pygal.HorizontalBar()\nline_chart.title = 'Country Survey - top20 (in qty)'\nfor p in range(0, 20):\n    line_chart.add(country.index[p], country.values[p])\npygalplot(line_chart)\n\n","91da14cb":"# Level Education\n\nndf.Q4 = ndf.Q4.fillna('Unknow')\nlevEd = ndf.groupby('Q4')['Q4'].count().sort_values(ascending=False)\nline_chart = pygal.HorizontalBar()\nline_chart.title = 'Level Education (in qty)'\nfor p in range(0,len(levEd)):\n    line_chart.add(levEd.index[p], levEd.values[p])\npygalplot(line_chart)","6193fff3":"def plotGraphic(question, title, typeGraph='pie'):\n    \n    mychart = pygal.Pie()\n    if typeGraph=='barH':\n        mychart = pygal.HorizontalBar()\n    mychart.title = title\n    \n    myrange = getQuestion(columns, question)\n    if len(myrange) > 1:\n        QX = ndf[columns[myrange[0]: myrange[len(myrange)-1]+1]]\n\n        ansText = []\n        ansVal = []\n        for col in range(0, len(myrange)):\n            x = QX[columns[myrange[col]]].dropna()\n            ansText.append(x.unique()[0])\n            ansVal.append(x.count())\n\n\n        dfTemp = pd.DataFrame()\n        dfTemp['desc'] = ansText\n        dfTemp['value'] = ansVal\n        dfTemp['perc'] = dfTemp.value \/ dfTemp.value.sum() * 100\n        dfTemp = dfTemp.sort_values('perc', ascending=False)\n\n\n        \n        for p in dfTemp.index:\n            mychart.add(dfTemp.desc.values[p], round(dfTemp.perc.values[p], 2))\n            \n    else:\n        QY = ndf.groupby(question)[question].count().sort_values(ascending=False)\n\n        for p in range(0, QY.shape[0]):\n            mychart.add(QY.index[p], QY.values[p])\n\n        \n    pygalplot(mychart)","14783617":"plotGraphic(question='Q4', title='What is the highest level of formal education that you have attained or plan to attain within the next 2years')","68ab9bfe":"plotGraphic(question='Q5', title='Select the title most similar to your current role (or most recent title if retired)')","5aaf62e9":"plotGraphic(question='Q6', title='For how many years have you been writing code and\/or programming?')","8abe5588":"plotGraphic(question='Q7', typeGraph='barH', title='What programming languages do you use on a regular basis?')","c5d2f2c7":"plotGraphic(question='Q8', title='What programming language would you recommend an aspiring data scientist to learn first?')","e38a2838":"plotGraphic(question='Q9', typeGraph='barH', title='Which of the following integrated development environments (IDEs) do you use on a regular basis?')","f1926fa8":"plotGraphic(question='Q10', typeGraph='barH', title='Which of the following hosted notebook products do you use on a regular basis?')","d19e34f8":"plotGraphic(question='Q11', typeGraph='barH', title='What type of computing platform do you use most often for your data science projects?')","39028658":"plotGraphic(question='Q12', title='Which types of specialized hardware do you use on a regular basis?')","821b077f":"plotGraphic(question='Q13',  title='Approximately how many times have you used a TPU (tensor processing unit)?')","4519542b":"plotGraphic(question='Q14', typeGraph='barH', title='What data visualization libraries or tools do you use on a regular basis? ')","198c003b":"plotGraphic(question='Q15', typeGraph='barH', title='For how many years have you used machine learning methods?')","fa914ba2":"plotGraphic(question='Q16', typeGraph='barH', title='Which of the following machine learning frameworks do you use on a regular basis?')","00a7b090":"plotGraphic(question='Q17', typeGraph='barH', title='Which of the following ML algorithms do you use on a regular basis? (')","41b1fc0c":"plotGraphic(question='Q18', title='Which categories of computer vision methods do you use on a regular basis? ')","fd467449":"plotGraphic(question='Q19', typeGraph='barH', title='Which of the following natural language processing (NLP) methods do you use on a regular basis?')","ad5e9035":"plotGraphic(question='Q20',title='What is the size of the company where you are employed?')","f3d38730":"plotGraphic(question='Q21',title='Approximately how many individuals are responsible for data science workloads at your place of business?')","d29e608e":"plotGraphic(question='Q22', title='Does your current employer incorporate machine learning methods into their business?')","843f95df":"plotGraphic(question='Q23', typeGraph='barH', title='Select any activities that make up an important part of your role at work')","fbe73cf3":"plotGraphic(question='Q24', typeGraph='barH', title='What is your current yearly compensation (approximate $USD)?')","6b3e49d0":"plotGraphic(question='Q25', title='Approximately how much money have you (or your team) spent on machine learning and\/or cloud computing services at home (or at work) in the past 5 years (approximate $USD)?')","7775a204":"plotGraphic(question='Q26', typeGraph='barH', title='Which of the following cloud computing platforms do you use on a regular basis?')","dae4ce0c":"plotGraphic(question='Q27', typeGraph='barH', title='Do you use any of the following cloud computing products on a regular basis?')","b2619787":"plotGraphic(question='Q28', typeGraph='barH', title='Do you use any of the following machine learning products on a regular basis?')","7e8090f2":"plotGraphic(question='Q29', typeGraph='barH', title='Which of the following big data products (relational databases, data warehouses, data lakes, or similar) do you use on a regular basis?')","f34a2fbb":"plotGraphic(question='Q30', typeGraph='barH', title='Which of the following big data products (relational database, data warehouse, data lake, or similar)do you use most often?')","2f3f975c":"plotGraphic(question='Q31', typeGraph='barH', title='Which of the following business intelligence tools do you use on a regular basis?')","3f8dd8cc":"plotGraphic(question='Q32', typeGraph='barH', title='Which of the following business intelligence tools do you use most often?')","4a296d27":"plotGraphic(question='Q33', typeGraph='barH', title='Do you use any automated machine learning tools (or partial AutoML tools) on a regular basis?')","63694908":"plotGraphic(question='Q34', typeGraph='barH', title='Which of the following automated machine learning tools (or partial AutoML tools) do you use on aregular basis?')","f9867cbf":"plotGraphic(question='Q35', typeGraph='barH', title='Do you use any tools to help manage machine learning experiments?')","40016adb":"plotGraphic(question='Q36', title='Where do you publicly share or deploy your data analysis or machine learning applications?')","ac62e6aa":"plotGraphic(question='Q37', typeGraph='barH', title='On which platforms have you begun or completed data science courses?')","1eb74c84":"plotGraphic(question='Q38', typeGraph='barH', title='What is the primary tool that you use at work or school to analyze data?')","d4e93eba":"plotGraphic(question='Q39', typeGraph='barH', title='Who\/what are your favorite media sources that report on data science topics?')","6d83ff77":"# get genders\nyaxis = ndf.Q2.unique().tolist()\n# get countries\nxaxis = ndf[['Q2', 'Q3']].groupby(['Q3']).count().sort_values(by='Q2', ascending=False).index.tolist()[:15]\n# get only data\nndfTemp = ndf[ndf.Q3.isin(xaxis)][['time', 'Q2', 'Q3']].groupby(['Q2', 'Q3']).count()\n# plot graph\nmychart = pygal.StackedBar()\nmychart.title = 'Gender by Country (qty)'\nmychart.x_labels = xaxis\nfor a in yaxis:\n    vet = []\n    for b in xaxis:\n        try:\n            vet.append(ndfTemp.query(f'Q2 == \"{a}\" and Q3 == \"{b}\" ').values[0].reshape(-1)[0])\n        except:\n            vet.append(0)\n    mychart.add(a, vet)\npygalplot(mychart)","7f6d2d64":"# get level education\nyaxis = ndf['Q4'].unique().tolist()\n# get countries\nxaxis = ndf[['Q4', 'Q3']].groupby(['Q3']).count().sort_values(by='Q4', ascending=False).index.tolist()[:15]\n# get data\nndfTemp = ndf[ndf.Q3.isin(xaxis)][['time', 'Q4', 'Q3']].groupby(['Q4', 'Q3']).count()\n# plot graph\nmychart = pygal.StackedBar()\nmychart.title = 'Level Education by Country (qty)'\nmychart.x_labels = xaxis\nfor a in yaxis:\n    vet = []\n    for b in xaxis:\n        try:\n            vet.append(ndfTemp.query(f'Q4 == \"{a}\" and Q3 == \"{b}\" ').values[0].reshape(-1)[0])\n        except:\n            vet.append(0)\n    mychart.add(a, vet)\npygalplot(mychart)","0d95af2e":"# get level education\nyaxis = ndf['Q5'].dropna().unique().tolist()\n# get countries\nxaxis = ndf[['Q5', 'Q3']].groupby(['Q3']).count().sort_values(by='Q5', ascending=False).index.tolist()[:15]\n# get data\nndfTemp = ndf[ndf.Q3.isin(xaxis)][['time', 'Q5', 'Q3']].groupby(['Q5', 'Q3']).count()\n# plot graph\nmychart = pygal.StackedBar()\nmychart.title = 'Programming languages used vs Countries (qty)'\nmychart.x_labels = xaxis\nfor a in yaxis:\n    vet = []\n    for b in xaxis:\n        try:\n            vet.append(ndfTemp.query(f'Q5 == \"{a}\" and Q3 == \"{b}\" ').values[0].reshape(-1)[0])\n        except:\n            vet.append(0)\n    mychart.add(a, vet)\npygalplot(mychart)","66b264a8":"Question 32 (which specific product) was only asked to respondents that selected more than one choice for Question 31-A (which of the following products).","0172ca84":"**Level Education vx Country**","f6fff073":"# Insights - Dataviz","9ec79ae8":"**Programming languages used vs Countries**","455b6606":"# Conclusion\n\n* soon","4d45f4c0":"Question 34-A (which specific product) was only asked to respondents that answered affirmatively to Question 33-A (which of the following categories of products).","bd5c6452":"# ** Dataviz** - Basic visualization for all questions","ef43a64d":"# **Exploratory Data Analysis**","758ece8d":"# 2020 Kaggle Machine Learning & Data Science Survey\n\n1. basic exploratory (done)\n1. basic dataviz (done)\n1. insights dataviz (doing)\n1. conclusion (to do)\n  ","6cb8b09d":"**Gender vs Country**"}}