{"cell_type":{"5a8d1533":"code","63458225":"code","f1332d18":"code","2e6baf3a":"code","ef90355b":"code","db93411f":"code","5e8d191f":"code","4c49005d":"code","fd838944":"code","ba824b13":"code","ec34915e":"code","8011e6f3":"code","4eb2a145":"code","ae7e3612":"code","eb083552":"markdown","9d4a3d6b":"markdown","d0337e12":"markdown","97eee599":"markdown","a163a404":"markdown","d2e97fc2":"markdown","240b6ce8":"markdown","7bc04769":"markdown","5210106a":"markdown","584cd57f":"markdown","3c2c2c41":"markdown","ea8f40a6":"markdown","54bae55b":"markdown"},"source":{"5a8d1533":"zabt = \"Papers on Vaccines and Therapeutics\"\nznam = \"Papers_on_Vaccines_and_Therapeutics\"","63458225":"zwds = \"agents aid alternative animal antibody antiviral assays bench capabilities capacity challenge clarithromycin clinical common complication conjunction coronavirus covid-19 development disease distribute drugs effectiveness effects efforts enhancement equitable evaluation expanding exploration healthcare immune inhibitors investigate makers methods minocyclinethat models naproxen patients populations potential predictive prioritize process production prophylaxis ramps recipients replication response risk scarce standardize targeted therapeutic trials universal vaccination vaccine viral workers\"","f1332d18":"import os\nimport pandas as pd\nimport json\nfrom IPython.core.display import display, HTML\n# !pip uninstall spacy # Uncomment this if installed version of spacy fails.\n# !pip install spacy # Uncomment this if spacy package is not installed.\nimport spacy\n# !python -m spacy download en # Uncomment this if en language is not loaded in spacy package. \nnlp = spacy.load('en')","2e6baf3a":"zchk = nlp(zwds)","ef90355b":"ztop = '\/kaggle\/input\/CORD-19-research-challenge'","db93411f":"zdf0 = pd.DataFrame(columns=['Folder', 'File', 'Match'])","5e8d191f":"%%capture\n\nfor zsub, zdir, zfis in os.walk(ztop):\n\n    for zfil in zfis:\n        if zfil.endswith(\".json\"):\n            \n            with open(zsub + os.sep + zfil) as f:\n                zout = json.load(f)\n            f.close()\n            \n            zout = \" \".join([part['text'] for part in zout['abstract']])\n            zout = zchk.similarity(nlp(zout))\n            \n            zdf0 = zdf0.append({'Folder': zsub.replace(ztop, \"\"), 'File': zfil, 'Match': zout}, ignore_index=True)\n            \nprint(zdf0.head(4))","4c49005d":"zdf0.to_csv(znam + '_Check.csv', index = False)","fd838944":"zdf6 = zdf0[zdf0.Match > 0.6].sort_values(by=['Match'], axis=0, ascending=False, inplace=False)\nprint(zdf6.head(4))","ba824b13":"zdf6.to_csv(znam + '_Relevant.csv', index = False)","ec34915e":"%%capture\n\nzht0 = \"<html>\\n<head>\\n\"\nzht0 = zht0 + \"<title>Relevant Papers for Vaccines and Therapeutics<\/title>\\n\"\nzht0 = zht0 + \"<script>\\nfunction openPop(x) {\\nei = document.getElementById('pop_' + x);\\n\"\nzht0 = zht0 + \"ei.style.display='block';\\nec = document.getElementsByClassName('pip');\\nvar i;\\n\"\nzht0 = zht0 + \"for (i = 0; i < ec.length; i++) {\\nif ( ec[i] != ei) { ec[i].style.display='none'; }; }; }\\n\"\nzht0 = zht0 + \"function shutPop(x) { document.getElementById('pop_' + x).style.display='none'; }\\n<\/script>\\n\"\nzht0 = zht0 + \"<style>table, th, td { border: 1px solid black; }<\/style>\\n\"\nzht0 = zht0 + \"<\/head>\\n<body>\\n\"\nzht0 = zht0 + \"<h1>\" + zabt + \"<\/h1>\\n\"\nzht0 = zht0 + \"<p>The following is a list of relevant papers.<\/p><br \/>\\n\"\nzht0 = zht0 + \"<p>Click on a Title to pop up its Abstract.<\/p><br \/>\\n\"\nzht0 = zht0 + \"<table>\\n<tbody>\\n<tr><th>Title<\/th>\\n<th>Abstract<\/th><\/tr>\\n\"","8011e6f3":"zht6 = zht0 # zht6 is to be saved later as a file.\nzhtd = zht0 # zhtd is a smaller version of zht6, for displaying in this notebook.\n\nfor indx, cont in zdf6.iterrows():\n    \n    with open(ztop + os.sep + cont['Folder'] + os.sep + cont['File']) as f:\n        ztxt = json.load(f)\n        f.close()\n        \n    ztxt = \" \".join([part['text'] for part in ztxt['abstract']])\n    \n    zhta = \"<tr><td><div onClick=openPop(\" + str(indx) + \")>\" + str(cont['File']) + \"<\/div><\/td>\\n\"    \n    zhta = zhta + \"<td><div onClick=shutPop(\" + str(indx) + \") class='pip' id='pop_\" + str(indx) + \"' style='display:none;'>\" + ztxt + \"<\/div><\/td><\/tr>\\n\"\n    \n    zht6 = zht6 + zhta\n    if indx < 10:\n        zhtd = zhtd + zhta\n\nzht6 = zht6 + \"<\/body>\\n<\/html>\"\nzhtd = zhtd + \"<\/body>\\n<\/html>\"","4eb2a145":"%%capture\n\nzout = open(znam + \"_Relevant_10.html\",\"a\")\nzout.write(zht6)\nzout.close()","ae7e3612":"display(HTML(zhtd))","eb083552":"Save the webpage html as a file.","9d4a3d6b":"Specify the location of files of papers provided by this challenge.","d0337e12":"Make a subset dataframe of records with more than 60% relevance.","97eee599":"Import python packages: os, pandas, json, IPython, and spacy.","a163a404":"Display the smaller html as a webpage here.","d2e97fc2":"This notebook aims to:\n- Prepare a list of papers and their relevance to the task under consideration.\n- Prepare a list and a webpage of most relevant papers and their abstracts.\n- Display top 10 most relevant papers and their abstracts.","240b6ce8":"Export this dataframe as a csv file.","7bc04769":"Outside this notebook: take the task's specification; make a unique list of words; remove common words; and optionally sort them.","5210106a":"Go through each file, review the Abstract text contained in it, compute its relevance to the task, and add it to the dataframe.","584cd57f":"Make a webapage html of list and abstracts of papers with more than 60% relevance.","3c2c2c41":"Make an empty dataframe, to populate later.","ea8f40a6":"Export this subset dataframe as another csv file.","54bae55b":"\n\nApply spacy's nlp tool to the set of selected words."}}