{"cell_type":{"92730e3b":"code","dca7a83e":"code","2798dcd1":"code","8b17b24d":"code","bf85bb44":"code","f2b92958":"code","431eda1c":"code","d48ff50f":"code","7c90f6ab":"code","21a4a981":"code","3bec8cb4":"code","c516fb5f":"code","b88de19c":"code","4b48a13e":"code","ceb7ed05":"code","e32665c8":"code","0a465d9a":"code","b3053553":"code","1dcd6f6b":"code","420fae29":"code","0923067c":"code","191e3c83":"code","3b06177b":"code","e584a34a":"code","f31737d3":"code","b31c5dd2":"code","a53e16ea":"code","034e8c2d":"code","aeb4a300":"code","95dd883d":"code","a57a7428":"code","a8b15676":"code","9d27497a":"code","4305abcd":"code","6ab23c3c":"code","e388566c":"code","8a7a100e":"code","969803d3":"code","d1394f0a":"code","92d630c4":"code","2d0c932a":"code","3a4e1667":"code","1df16e76":"code","c1e5928c":"code","8c32b0da":"code","4365772d":"code","3cef8242":"code","72564c08":"code","096e59e7":"code","e17708a8":"code","29be30d4":"code","c1e8f07d":"code","01c38a7b":"code","a60e0390":"code","ec30028d":"code","a39045a3":"code","59edf4f0":"code","afb346d5":"code","170f1c25":"code","112d00f3":"code","9a8e1ce6":"code","aa965ee7":"code","5e98b6e1":"code","49e1035f":"code","dffd1dda":"code","a2336662":"code","1f92f622":"code","54a2f8c9":"code","f2736361":"code","915c3ce5":"markdown","9e29dab0":"markdown","a6b7a908":"markdown","3eb97fe8":"markdown","4a911263":"markdown","75555d90":"markdown","3bccff6e":"markdown","640d34b2":"markdown","06be3b6b":"markdown","ebfecb59":"markdown","8e180e55":"markdown","78e5d42d":"markdown","bb9388be":"markdown","0f51b675":"markdown","3056abd2":"markdown","231b9734":"markdown","760a03b1":"markdown","df046374":"markdown","86436018":"markdown","cc8b86e4":"markdown","c7f0bc5d":"markdown"},"source":{"92730e3b":"# This Python 3 environment comes with many helpful analytics libraries installed\n# It is defined by the kaggle\/python docker image: https:\/\/github.com\/kaggle\/docker-python\n# For example, here's several helpful packages to load in \n\nimport numpy as np # linear algebra\nimport pandas as pd # data processing, CSV file I\/O (e.g. pd.read_csv)\nimport seaborn as sns\nimport matplotlib.pyplot as plt\nimport json\nimport ast\nfrom wordcloud import WordCloud, STOPWORDS\nimport plotly.express as px \nimport plotly.offline as py\n# Input data files are available in the \"..\/input\/\" directory.\n# For example, running this (by clicking run or pressing Shift+Enter) will list all files under the input directory\n\nimport os\nfor dirname, _, filenames in os.walk('\/kaggle\/input'):\n    for filename in filenames:\n        print(os.path.join(dirname, filename))\n\n# Any results you write to the current directory are saved as output.","dca7a83e":"\nmovies=pd.read_csv('\/kaggle\/input\/the-movies-dataset\/movies_metadata.csv')\nratings=pd.read_csv('\/kaggle\/input\/the-movies-dataset\/ratings.csv')","2798dcd1":"movies.head().transpose()","8b17b24d":"movies.describe()","bf85bb44":"movies.info()","f2b92958":"missing_features=pd.DataFrame(movies.isnull().mean().sort_values(ascending=False),columns=['missing_Ratio'])\nmissing_features[missing_features['missing_Ratio']>0]","431eda1c":"movies['Year']=pd.to_datetime(movies['release_date'],errors='coerce').apply(lambda x:x.year)\nmovies['month']=pd.to_datetime(movies['release_date'],errors='coerce').apply(lambda x:x.month )","d48ff50f":"movies['budget']=pd.to_numeric(movies['budget'],errors='coerce')","7c90f6ab":"movies['return']=movies['revenue'].replace(0,np.nan)\/movies['budget'].replace(0,np.nan)","21a4a981":"movies['genres']=movies['genres'].apply(ast.literal_eval)\n#movies['genres']=movies['genres'].apply(lambda x:[d['name'] for d in x] if isinstance(x,list) else[])","3bec8cb4":"movies['genres']=movies['genres'].apply(lambda x:[d['name'] for d in x] if isinstance(x,list) else[])","c516fb5f":"df_genres=movies['genres'].apply(pd.Series).stack().reset_index(level=1,drop=True)","b88de19c":"df_genres.name='gen'\ndf_genres=movies.join(df_genres)","4b48a13e":"df_genres.gen.value_counts(ascending=False).plot(kind='bar',figsize=(15,5))","ceb7ed05":"df_genres['count']=1","e32665c8":"top_5_genres=df_genres['gen'].value_counts(ascending=False).index[:5]\npd.pivot_table(index='Year',columns='gen',values='count',aggfunc=sum,data=df_genres[df_genres['gen'].apply(lambda x: x in top_5_genres)]).plot(figsize=(15,5))\nplt.legend(bbox_to_anchor=[1.1,1])\n","0a465d9a":"for i in range(2010,2021):\n    print(i,':',movies[movies['Year']==i].shape[0])","b3053553":"movies['production_countries']=movies['production_countries'].fillna('[]').apply(ast.literal_eval)\nmovies['production_countries']=movies['production_countries'].apply(lambda x:[d['name'] for d in x] if isinstance(x,list) else[])","1dcd6f6b":"countries=movies['production_countries'].apply(pd.Series).stack().reset_index(level=1,drop=True)","420fae29":"countries.name='countries'\ndf_countries=movies.join(countries)","0923067c":"countries.value_counts(ascending=False)[:20].plot(kind='bar',figsize=(15,5))","191e3c83":"c=countries.value_counts(ascending=False)[1::]\nfig = px.choropleth( locations=c.index,\n                    locationmode='country names',\n                    color=c.values,\n                    hover_name=c.index, \n                    color_continuous_scale=px.colors.sequential.Plasma)\nfig.show()","3b06177b":"df_countries['count']=1\ntop_10_countries=c[:10].index\npd.pivot_table(index='Year',columns='countries',values='count',aggfunc=sum,data=df_countries[df_countries['countries'].apply(lambda x : x in top_10_countries)]).plot(figsize=(15,5))\nplt.legend(bbox_to_anchor=[1.1,1])\nplt.title('Production per country througout the Year (US not included)')","e584a34a":"df_countries[df_countries['countries']=='United States of America'].groupby('Year')['count'].sum().plot(figsize=(14,5))","f31737d3":"movies.head().transpose()","b31c5dd2":"movies['production_companies'] = movies['production_companies'].fillna('[]').apply(ast.literal_eval)\ndf_companies=movies['production_companies'].apply(lambda x:[d['name'] for d in x] if  isinstance(x,list) else [])\n","a53e16ea":"df_companies=df_companies.apply(pd.Series).stack().reset_index(level=1,drop=True)\ndf_companies.name='companies'","034e8c2d":"df_companies=movies.drop('production_companies',axis=1).join(df_companies)","aeb4a300":"df_companies['companies'].value_counts(ascending=False)[:20].plot(kind='bar',figsize=(15,5))","95dd883d":"df_companies['count']=1\ntop_5_companies=df_companies['companies'].value_counts(ascending=False)[:5].index\npd.pivot_table(index='Year',columns='companies',values='count',aggfunc=sum,data=df_companies[df_companies['companies'].apply(lambda x : x in top_5_companies)]).plot(figsize=(15,5))\nplt.legend(bbox_to_anchor=[1.1,1])","a57a7428":"df_companies.groupby(by='companies')['revenue'].mean().sort_values(ascending=False)[:20].plot(kind='bar',figsize=(15,5))","a8b15676":"df_companies.groupby(by='companies')['budget'].mean().sort_values(ascending=False)[:20].plot(kind='bar',figsize=(15,5))","9d27497a":"df_companies.groupby(by='companies')['return'].mean().sort_values(ascending=False)[:20].plot(kind='bar',figsize=(15,5))","4305abcd":"movies['belongs_to_collection'] = movies['belongs_to_collection'].fillna('[]').apply(ast.literal_eval)\ndf_collection=movies['belongs_to_collection'].apply(lambda x:x['name'] if  isinstance(x,dict) else [])","6ab23c3c":"df_collection=df_collection.apply(pd.Series).stack().reset_index(level=1,drop=True)","e388566c":"df_collection.name='collection'","8a7a100e":"df_collection=movies.drop('belongs_to_collection',axis=1).join(df_collection)","969803d3":"df_collection['collection'].value_counts(ascending=False)[:10].plot(kind='bar',figsize=(15,5))","d1394f0a":"df_collection.groupby(by='collection')['revenue'].sum().sort_values(ascending=False)[:10].plot(kind='bar',figsize=(15,5))","92d630c4":"df_collection.groupby(by='collection')['budget'].sum().sort_values(ascending=False)[:10].plot(kind='bar',figsize=(15,5))","2d0c932a":"movies.info()","3a4e1667":"def clean_numeric(x):\n    try:\n        return float(x)\n    except:\n        return np.nan","1df16e76":"movies['popularity']=movies['popularity'].apply(clean_numeric)","c1e5928c":"movies.columns","8c32b0da":"movies[['title','Year','popularity']].sort_values(by='popularity',ascending=False)","4365772d":"movies['vote_count']=movies['vote_count'].apply(clean_numeric)\nmovies['vote_average']=movies['vote_average'].apply(clean_numeric)","3cef8242":"movies[['title','vote_average','vote_count']].sort_values('vote_count',ascending=False)","72564c08":"title_corpus=' '.join(movies['title'].dropna())\noverview_corpus=' '.join(movies['overview'].dropna())","096e59e7":"title_worldcloud=WordCloud(stopwords=STOPWORDS,background_color='white',height=2000,width=4000).generate(title_corpus)\nplt.figure(figsize=(17,5))\nplt.axis('off')\nplt.imshow(title_worldcloud)\nplt.show()","e17708a8":"overview_worldcloud=WordCloud(stopwords=STOPWORDS,background_color='white',height=2000,width=4000).generate(overview_corpus)\nplt.figure(figsize=(17,5))\nplt.axis('off')\nplt.imshow(overview_worldcloud)\nplt.show()","29be30d4":"pd.DataFrame(movies['original_language'].value_counts(ascending=False))","c1e8f07d":"movies['original_language'].value_counts(ascending=False)[:10].plot(kind='bar',figsize=(15,10))\nplt.title('Top 10 Most popular languages')","01c38a7b":"df_countries.groupby('original_language')['countries'].nunique().sort_values(ascending=False)[:10].plot(kind='bar',figsize=(15,5))\nplt.title('Number of Producing countries per language')","a60e0390":"df_countries[df_countries['countries']=='Germany']['original_language'].value_counts().head()","ec30028d":"df_countries[df_countries['countries']=='Italy']['original_language'].value_counts().head()","a39045a3":"df_countries[df_countries['countries']=='Japan']['original_language'].value_counts().head()","59edf4f0":"movies['spoken_languages']=movies['spoken_languages'].fillna('[]').apply(ast.literal_eval)\nmovies['spoken_languages']=movies['spoken_languages'].apply(lambda x:[d['name'] for d in x] if isinstance(x,list) else [])","afb346d5":"df_languages=movies['spoken_languages'].apply(pd.Series).stack().reset_index(level=1,drop=True)","170f1c25":"df_languages.value_counts()[:10]","112d00f3":"movies.groupby('month')['adult'].count().plot(figsize=(10,5))\nplt.title('Movies per month 1870-2020')","9a8e1ce6":"movies[movies['Year']>2000].groupby('month')['adult'].count().plot(figsize=(10,5))\nplt.title('Movies per month 2000-2020')","aa965ee7":"movies['count']=1\ndf_year_month=pd.pivot_table(columns='Year',index='month',values='count',aggfunc=sum,data=movies[movies['Year']>2000])\n\n#sns.set(font_scale=1)\nf, ax = plt.subplots(figsize=(16, 8))\nsns.heatmap(df_year_month, annot=True, linewidths=.5, fmt='n',ax=ax)","5e98b6e1":"movies[movies['Year']<=2015].groupby('Year')['budget'].mean().plot(figsize=(14,5))","49e1035f":"movies[movies['Year']<=2015].groupby('Year')['revenue'].mean().plot(figsize=(14,5))","dffd1dda":"sns.jointplot(x=movies['budget'],y=movies['revenue'])","a2336662":"df_genres.groupby(by='gen')['budget'].mean().sort_values(ascending=False)[:10].plot(kind='bar',figsize=(13,5))","1f92f622":"df_genres.groupby(by='gen')['revenue'].mean().sort_values(ascending=False)[:10].plot(kind='bar',figsize=(13,5))","54a2f8c9":"movies[['original_title','revenue']].sort_values('revenue',ascending=False)[:10]","f2736361":"movies[['original_title','budget']].sort_values('budget',ascending=False)[:10]","915c3ce5":"#### The same Trend we saw in the plot which is the release date of the film is at the beginning of the month and last 3 months, but we see that only from 2011 the 11th month has raised up as one of the rush months ","9e29dab0":"#### There is a linear Trend between the Budget and the Revenue the more you invest the more the movie will gain money ","a6b7a908":"#### Based on our data set it is the same pattern all over the years , but something intresting this drop coming after around 2015 , well i guess maybe because there were not a lot of films that were produced the last years , let's check\n","3eb97fe8":"## Let's have a look at the budget,revenue and Return throught the years","4a911263":"#### Follow the same trend as the budget with some zigzags even before 1970 but unlike the budget the revenue hit a peak then kinda remain constant ","75555d90":"#### Based on this , the top  companies are american , MGM is quiet old company (as far as i know ) i'm kind surprised because it is coming in 2nd place , maybe because in the past they proudced a lot of films , let's have a look at the prudction of the top 5 companies throughout the years","3bccff6e":"#### well the 2nd Hypothesis is not correct because the number of producing countries that use deutsh is more important than all except En and Fr","640d34b2":"#### It looks like the Drama and comedy doesn't cost a lot maybe that's why they are on top from production","06be3b6b":"#### we stopped at 2015 because after that we don't have that much data points\n#### we see that the budget was low till around 1970 then it starts grow constantly to hit a peak around 2000 and then going down again :why the Budget is going down even though the films are getting more and more sophisticated ?\n#### This peak around 1930 is strange","ebfecb59":"# Report\n<ol><li>The Most produced type of films are Drama that was always the Trend<\/li>\n<li>As no surprise US come as 1st from the film Production , But europe also is great producer of films also<\/li>\n<li>The Growth of The film industry was not affected by The war that much ,The US film industry followed a constant trend till 1980 then it starts growing Fastly,The itlian industry has 1st small  peak between 1935 and 1940 due to the 1st golden age of the Italian cinema then it peaked again around 1965  and finally totally collapse due to 1980 film ctisis in italy <\/li>\n<li>The majority of the films are released at Januarry and in the 9th,10th,11th month of The year<\/li>\n<li>In general the film industry becomes a real industry starting from 1980<\/li>\n<li>The Leader company in the film industry MGM has totally lost its place starting from the 2000<\/li>\n    <li>There is correlation between the budget and the revenue it means that the more you invest in the film the more money the film will gain<\/li>\n    <li>Pirates of the Caribbean: On Stranger Tide was not that huge of a sucess financially even though it had by far the largest budget  <\/li>\n    <li>The popular movies from production point of view the don't cost a lot but a same time the have not much revenue maybe that's why they are produced a lot in 1st place<\/li><\/ol>","8e180e55":"#### It looks like the Drama ,the most popular from production point of view is not that big source of a money","78e5d42d":"#### as we see starting from 2015 the number of films is dropping","bb9388be":"#### we are kinda seeing the same pattern and also the same drop again whcih we know the reason now \n#### something intresting is the peak if italy around 1970\n#### also in the beginning only 2 countries:France and UK and also around 1910 there is  this discontinuity around 1910","0f51b675":"#### As expected English comes 1st but what is really intresting is that italy and japan comes behind germany in the Production but suprsingly Deutsh comes behind italian and japanese .Other than this weird thins the plot follow the same order as the plot of the Countries \n#### Hypothesis :\n<ol><li>Missing values<\/li>\n    <li>There is other countries that produce films in italian and japanese other than the countries themselves that pushed this number up <\/li>\n    <li>Germany Produce a lot but they don't produce mainly in their own language<\/li><\/ol>","3056abd2":"#### Drama movies are the most commomn based on our data set \n##### let's see if that was the case over the years or not","231b9734":"#### almost the same thing as the original but here Deutsh came in 3rd place which means that a lot of Films do include german or german charchters or smthg like that ","760a03b1":"#### our hypothesis is right in the past MGM was the leader of the industry that's why all in all it scores good but in the last decade it is becoming the last in the race , Also we can see this kinda shrink between 1960 and 1980 that for some reason took Paramount Pictures to the top  , maybe because of what was happening in the US in that period ,Also we notice that between 1950 and 1955 Universalpictures didn't produce any film","df046374":"#### No surprise US is the 1st producer of films ,in europe the Leaders are UK and France, japan and india lead asia ,the reults are not surprising","86436018":"#### The 2 plots Show the same trend which is usually the majority of the movies are released in the Beginning of The year or in Septmeber","cc8b86e4":"#### We got our answer which is that Germany doesn't produce mainly in its own language unlike the other Countries","c7f0bc5d":"##### There should be something wrong happening with the budget because it is supposed to be assigned as numeric but pandas is assigining as genenric object\n##### Also as far is this shows there is not a lot of missing values\n"}}