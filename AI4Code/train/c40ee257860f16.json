{"cell_type":{"2adcc850":"code","f326b47e":"code","751ad231":"code","626402f8":"code","fd10684e":"code","f4fa5195":"code","790de032":"code","e89c074b":"code","b6dd9d27":"code","dd3ef3fe":"code","baf81f4c":"code","ead7d29f":"code","f4f260c9":"code","3e4167b8":"code","81178b86":"code","32615c1d":"code","3c1ae42b":"code","7fdbe009":"code","2b415fc3":"code","d4767ed0":"code","4d81d565":"code","a6173a52":"code","5299bd3a":"code","35f9581f":"code","3fd521b5":"code","f5198914":"markdown","70234671":"markdown","17adc170":"markdown","ae0ce58b":"markdown","bf3c205c":"markdown","1406223e":"markdown","bf992995":"markdown","c7c83b2a":"markdown","5bee0e07":"markdown","955a37f2":"markdown","377908ee":"markdown","bc2f167a":"markdown","46267a3d":"markdown","15d52511":"markdown","9f36db7d":"markdown","292859ff":"markdown","e6ef8b4f":"markdown","9eb729d3":"markdown","a4e2b147":"markdown","e37d5a30":"markdown","4d20fe86":"markdown","55717702":"markdown","5aa192a7":"markdown","f6438822":"markdown","44e326a8":"markdown","28abfc04":"markdown","6b56ad56":"markdown","13e3db3b":"markdown","692a354a":"markdown","43fbce73":"markdown","fcc8c35b":"markdown","4b8d0fd8":"markdown","3c707e51":"markdown","43f99e7e":"markdown","baa8c2f2":"markdown","d8c69ecf":"markdown","54eda174":"markdown","e14ac1d1":"markdown"},"source":{"2adcc850":"import pandas as pd\nimport numpy as np\nimport seaborn as sns\nfrom matplotlib import pyplot as plt\nimport plotly.graph_objects as go\nfrom fbprophet import Prophet\nimport pycountry\nimport plotly.express as px\nfrom collections import namedtuple\nimport pandas_profiling\nfrom IPython.display import display\nimport collections, numpy","f326b47e":"df = pd.read_csv('..\/input\/up-crime-data-year-2019\/MR data - Compiled Data Set.csv')\ndf.head()","751ad231":"report = pandas_profiling.ProfileReport(df)\ndisplay(report)","626402f8":"df.shape","fd10684e":"null_rows = df[df.iloc[: , 3:12].isna().apply(lambda x: all(x), axis=1)]\nprint(\"Below are the Missing values for each column from 4 to 13:\")\nnull_rows.head()","f4fa5195":"df = df[~df.iloc[: , 3:12].isna().apply(lambda x: all(x), axis=1)]\ndf.shape","790de032":"duplicate = df[df.duplicated(subset = 'Title', keep = False)]\nprint(\"Below are the duplicate rows:\")\nduplicate","e89c074b":"df.drop_duplicates(subset='Title', inplace=True)\ndf.shape","b6dd9d27":"df = df.drop(['Title', 'Text'], axis = 1)\ndf.shape","dd3ef3fe":"df = df.rename(columns = {'Murder Happened with reason:\\n1:Property\/Land Disputes,\\n2:Family Dispute\\n3:Petty Quarrels,\\n4:Money Disputes, \\n5:Personal Vendetta, \\n6:Love Affairs, \\n7:Casteism\\n8: Unknown\/other':'Murder Reason', 'Crime Against Women ( Combined ):\\n1. Murder with Rape \\n2. Dowry Deaths(Sec. 3048)\\n3. Suicide(sec 305\/306)\\n4. Kidnapping(All)\\n5. Acid Attack(Sec. 326A IPC)\\n6. Cruelty by Husband\/in-laws((Sec.498 A IPC)\\n7. Rape only(Sec. 376 or 511 IPC)\\n8. Assault on Women with Intent to Outrage her Modesty (Sec. 354 IPC)\\n9. Cyber Crimes against Women\\n10. Protection of Children from Sexual Offences Act':'Crime Against Women (Act)'})\ndf = df.reset_index()\ndf.columns","baf81f4c":"df = df.fillna(0)\n\nact = df['Crime Against Women (Act)'].astype('string').values\n\nfor i in range(1,11):\n    df.insert(8+i,\"Act {}\".format(i),0)\n    \nfor j in range(len(act)):\n    splitted = act[j].split(',')\n    for x in splitted:\n        if x=='0':\n            continue\n        df.loc[int(j),'Act {}'.format(x.strip())]=1\ndf.shape","ead7d29f":"df = df.drop(['Act 11', 'index'], axis = 1)\ndf.shape","f4f260c9":"df = df.astype({\"Number of child victims\" : 'int', \n                    \"Number of male victims(adult)\" : 'int', \n                        \"Number of female victims(adult)\" : 'int', \n                                \"Kidnnaping:\\nNumber of child victims\" : 'int', \n                                    \"Number of male(adult) \"  : 'int',\n                                        \"Number of female(adult)\"  : 'int', \n                                            \"Number of adult victims\"  : 'int', \n                                                \"Number of childs invoved\" : 'int'}) \n\ndf.dtypes","3e4167b8":"df = df.rename(columns = {'City ': 'City', 'Number of child victims':'Childern Murder Victims', 'Number of male victims(adult)':'Male Murder Victims', 'Number of female victims(adult)':'Female Murder Victims', 'Kidnnaping:\\nNumber of child victims': 'Kidnapped Childern Victims', 'Number of male(adult) ':'Kidnapped Male Victims', 'Number of female(adult)':'Kidnapped Female Victims', 'Number of adult victims':'CAW Victims', 'Number of childs invoved': 'CAW Child Victims'})\ndf.columns","81178b86":"df_test = df.copy()\ndf_test = df_test.replace(0, np.nan)\ndf_test","32615c1d":"city = df['City'].value_counts().sort_index(ascending=True)\nfig = plt.figure(figsize=(20,8))\nax = fig.add_subplot(1,2,1)\nsns.countplot(x = df['City'], ax = ax)\nplt.xlabel('City')\nplt.ylabel('Count')\nplt.title('City Wise Crime Count in UP')\n\nfor i, v in city.reset_index().iterrows():\n    ax.text(i - 0.08, v.City +0.8 , v.City, color='red')\nplt.show()","3c1ae42b":"df_test.sort_values(by = ['Murder Reason'], ascending = True, inplace = True)\nreason = df_test['Murder Reason'].value_counts().sort_index(ascending = True)\n\nfig = plt.figure(figsize=(40,8))\nax = fig.add_subplot(1,2,1)\nsns.countplot(x = df_test['Murder Reason'], ax = ax)\nplt.xlabel('Murder Reason')\nplt.ylabel('Count')\nplt.title('Murder Reason in UP')\n\nfor i, v in reason.reset_index().iterrows():\n    ax.text(i - 0.08, v['Murder Reason'] +0.4 , v['Murder Reason'], color='red')\nplt.show()","7fdbe009":"fig = go.Figure()\nfig.add_trace(go.Bar(x=df['Murder Reason'],\n                y=df['Childern Murder Victims'],\n                name='Childern Murder Victims',\n                marker_color='Yellow'\n                ))\nfig.add_trace(go.Bar(x=df['Murder Reason'],\n                y=df['Male Murder Victims'],\n                name='Male Murder Victims',\n                marker_color='Blue'\n                ))\nfig.add_trace(go.Bar(x=df['Murder Reason'],\n                y=df['Female Murder Victims'],\n                name='Female Murder Victims',\n                marker_color='Pink'\n                ))\n\nfig.update_layout(\n    title='Murder Victims in UP (Reason and Gender wise)',\n    xaxis_tickfont_size=14,\n        height = 800,\n    yaxis=dict(\n        title='Number of Victims',\n        titlefont_size=16,\n        tickfont_size=14,\n    ),\n    legend=dict(\n        y=0,\n        x=1.0,\n        bgcolor='rgba(255, 255, 255, 0)',\n        bordercolor='rgba(255, 255, 255, 0)'\n    ),\n    barmode='group',\n    bargap=0.15, # gap between bars of adjacent location coordinates.\n    bargroupgap=0.1 # gap between bars of the same location coordinate.\n)\nfig.show()","2b415fc3":"city_group = df_test.groupby('City')\n\nGhaziabad = city_group.get_group('Ghaziabad').sort_values('Murder Reason').fillna(0)\nKanpur = city_group.get_group('Kanpur').sort_values('Murder Reason').fillna(0)\nLucknow = city_group.get_group('Lucknow').sort_values('Murder Reason').fillna(0)\n\ng2 = city_group.get_group('Ghaziabad').sort_values('Murder Reason')\ng2 = g2['Murder Reason'].value_counts().sort_index(ascending = True)\n\nk2 = city_group.get_group('Kanpur').sort_values('Murder Reason')\nk2 = k2['Murder Reason'].value_counts().sort_index(ascending = True)\n\nl2 = city_group.get_group('Lucknow').sort_values('Murder Reason')\nl2 = l2['Murder Reason'].value_counts().sort_index(ascending = True)\n\n\ng = Ghaziabad['Murder Reason']\ng1 = np.array([g])\ng1 = g1[g1!= 0]\n\nk = Kanpur['Murder Reason']\nk1 = np.array([k])\nk1 = k1[k1 != 0]\n\nl = Lucknow['Murder Reason']\nl1 = np.array([l])\nl1 = l1[l1 != 0]\n\n\nfig = plt.figure(figsize = (20,5))\nax1 = fig.add_subplot(1,3,1)\nsns.countplot(g1, color = 'Coral', ax = ax1)\nplt.ylabel('No of Cases Reported', fontsize = 20)\nplt.title('Ghaziabad')\nplt.xticks(rotation = 'vertical')\n\nfor i, v in g2.reset_index().iterrows():\n    ax1.text(i - 0.08, v['Murder Reason'] +0.1 , v['Murder Reason'], color='red')\n\nax2 = fig.add_subplot(1,3,2)\nsns.countplot(k1, color = 'limegreen', ax = ax2)\nplt.xlabel('Murder Reason', fontsize = 20)\nplt.ylabel(' ')\nplt.title('Kanpur')\nplt.xticks(rotation = 'vertical')\n    \nfor i, v in k2.reset_index().iterrows():\n    ax2.text(i - 0.08, v['Murder Reason'] +0.1 , v['Murder Reason'], color='red')\n\nax3 = fig.add_subplot(1,3,3)\nsns.countplot(l1, color = 'blue', ax = ax3)\nplt.title('Lucknow')\nplt.ylabel(' ')\nplt.xticks(rotation = 'vertical')\n    \nfor i, v in l2.reset_index().iterrows():\n    ax3.text(i - 0.08, v['Murder Reason'] +0.1 , v['Murder Reason'], color='red')\n    \nplt.suptitle('Murder Reason (City Wise)', fontsize = 25)\n    \nplt.show()","d4767ed0":"fig = go.Figure()\nfig.add_trace(go.Bar(x=df['City'],\n                y=df['Childern Murder Victims'],\n                name='Childern Murder Victims',\n                marker_color='Yellow'\n                ))\nfig.add_trace(go.Bar(x=df['City'],\n                y=df['Male Murder Victims'],\n                name='Male Murder Victims',\n                marker_color='Blue'\n                ))\nfig.add_trace(go.Bar(x=df['City'],\n                y=df['Female Murder Victims'],\n                name='Female Murder Victims',\n                marker_color='Pink'\n                ))\n\nfig.update_layout(\n    title='Murder Victims in UP (City and Gender wise)',\n    xaxis_tickfont_size=14,\n        height = 800,\n    yaxis=dict(\n        title='Number of Victims',\n        titlefont_size=16,\n        tickfont_size=14,\n    ),\n    legend=dict(\n        y=0,\n        x=1.0,\n        bgcolor='rgba(255, 255, 255, 0)',\n        bordercolor='rgba(255, 255, 255, 0)'\n    ),\n    barmode='group',\n    bargap=0.15, # gap between bars of adjacent location coordinates.\n    bargroupgap=0.1 # gap between bars of the same location coordinate.\n)\nfig.show()","4d81d565":"fig = go.Figure()\nfig.add_trace(go.Bar(x=df['City'],\n                y=df['Kidnapped Childern Victims'],\n                name='Kidnapped Childern Victims',\n                marker_color='Yellow'\n                ))\nfig.add_trace(go.Bar(x=df['City'],\n                y=df['Kidnapped Male Victims'],\n                name='Kidnapped Male Victims',\n                marker_color='Blue'\n                ))\nfig.add_trace(go.Bar(x=df['City'],\n                y=df['Kidnapped Female Victims'],\n                name='Kidnapped Female Victims',\n                marker_color='Pink'\n                ))\n\nfig.update_layout(\n    title='Kidnapped Victims in UP (City and Gender wise)',\n    xaxis_tickfont_size=14,\n        height = 800,\n    yaxis=dict(\n        title='Number of Victims',\n        titlefont_size=16,\n        tickfont_size=14,\n    ),\n    legend=dict(\n        y=0,\n        x=1.0,\n        bgcolor='rgba(255, 255, 255, 0)',\n        bordercolor='rgba(255, 255, 255, 0)'\n    ),\n    barmode='group',\n    bargap=0.15, # gap between bars of adjacent location coordinates.\n    bargroupgap=0.1 # gap between bars of the same location coordinate.\n)\nfig.show()","a6173a52":"act = df_test.iloc[:,8:(9+10)].sum().astype(int)\nfig = plt.figure(figsize=(30,8))\nax = fig.add_subplot(1,2,1)\nplt.bar(act.index, act.values, color = ['Red', 'Blue', 'Coral', 'Yellow', 'Green', 'Purple', 'Gold', 'Orange', 'Brown', 'limegreen'])\nplt.xlabel('Crime Against Women Act')\nplt.ylabel('Count')\nplt.title('Murder Reason in UP')\nplt.text(0, 40, \"1. Murder with Rape \\n2. Dowry Deaths(Sec. 3048)\\n3. Suicide(sec 305\/306)\\n4. Kidnapping(All)\\n5. Acid Attack(Sec. 326A IPC)\\n6. Cruelty by Husband\/in-laws((Sec.498 A IPC)\\n7. Rape only(Sec. 376 or 511 IPC)\\n8. Assault on Women with Intent to Outrage her Modesty (Sec. 354 IPC)\\n9. Cyber Crimes against Women\\n10. Protection of Children from Sexual Offences Act\")\nfor i, v in act.reset_index().iterrows():\n    ax.text(i - 0.08, v[0] +0.3, v[0], color='red')\n    \n\nplt.show()","5299bd3a":"fig = go.Figure()\nfig.add_trace(go.Bar(x=df['City'],\n                y=df['CAW Victims'],\n                name='Adult Victims',\n                marker_color='Red'\n                ))\nfig.add_trace(go.Bar(x=df['City'],\n                y=df['CAW Child Victims'],\n                name='Child Victims',\n                marker_color='Yellow'\n                ))\n\nfig.update_layout(\n    title='Crimes Against Women (City wise Adults and Children)',\n    xaxis_tickfont_size=14,\n        height = 800,\n    yaxis=dict(\n        title='Number of Victims',\n        titlefont_size=16,\n        tickfont_size=14,\n    ),\n    legend=dict(\n        y=0,\n        x=1.0,\n        bgcolor='rgba(255, 255, 255, 0)',\n        bordercolor='rgba(255, 255, 255, 0)'\n    ),\n    barmode='group',\n    bargap=0.15, # gap between bars of adjacent location coordinates.\n    bargroupgap=0.1 # gap between bars of the same location coordinate.\n)\nfig.show()","35f9581f":"fig = go.Figure()\nfig.add_trace(go.Bar(x=df['City'],\n                y=df['Act 1'],\n                name='Murder with Rape',\n                marker_color='Red'\n                ))\nfig.add_trace(go.Bar(x=df['City'],\n                y=df['Act 2'],\n                name='Dowry Deaths(Sec. 3048)',\n                marker_color='Blue'\n                ))\nfig.add_trace(go.Bar(x=df['City'],\n                y=df['Act 3'],\n                name='Suicide(sec 305\/306)',\n                marker_color='Coral'\n                ))\nfig.add_trace(go.Bar(x=df['City'],\n                y=df['Act 4'],\n                name='Kidnapping(All)',\n                marker_color='Yellow'\n                ))\nfig.add_trace(go.Bar(x=df['City'],\n                y=df['Act 5'],\n                name='Acid Attack(Sec. 326A IPC)',\n                marker_color='Green'\n                ))\nfig.add_trace(go.Bar(x=df['City'],\n                y=df['Act 6'],\n                name='Cruelty by Husband\/in-laws((Sec.498 A IPC)',\n                marker_color='Purple'\n                ))\nfig.add_trace(go.Bar(x=df['City'],\n                y=df['Act 7'],\n                name='Rape only(Sec. 376 or 511 IPC)',\n                marker_color='Gold'\n                ))\nfig.add_trace(go.Bar(x=df['City'],\n                y=df['Act 8'],\n                name='Assault on Women with Intent to Outrage her Modesty (Sec. 354 IPC)',\n                marker_color='Orange'\n                ))\nfig.add_trace(go.Bar(x=df['City'],\n                y=df['Act 9'],\n                name='Cyber Crimes against Women',\n                marker_color='Brown'\n                ))\nfig.add_trace(go.Bar(x=df['City'],\n                y=df['Act 10'],\n                name='Protection of Children from Sexual Offences Act',\n                marker_color='limegreen'\n                ))\n\nfig.update_layout(\n    title='Crimes Against Women (City wise)',\n    xaxis_tickfont_size=14,\n        height = 800,\n    yaxis=dict(\n        title='Number of Victims',\n        titlefont_size=16,\n        tickfont_size=14,\n    ),\n    legend=dict(\n        y=0,\n        x=1.0,\n        bgcolor='rgba(255, 255, 255, 0)',\n        bordercolor='rgba(255, 255, 255, 0)'\n    ),\n    barmode='group',\n    bargap=0.15, # gap between bars of adjacent location coordinates.\n    bargroupgap=0.1 # gap between bars of the same location coordinate.\n)\nfig.show()","3fd521b5":"df_test = df_test.sort_index()\nreport = pandas_profiling.ProfileReport(df_test)\ndisplay(report)","f5198914":"## Crime Against Women Act","70234671":"#### Changing the column names so it will be easier to plot","17adc170":"### Final Renaming the of the columns","ae0ce58b":"### Love Affair is the major known reason for crimes in UP.","bf3c205c":"# Task Details\nThis task is to create a simple visualization notebook and find relations between reasons.\nPS: Don't use title data and text data in your submission if you are a beginner.\n\n### Expected Submission\n##### 1. Imporing dataset and preprocessing column headers\n##### 2. Preprocessing Dataset for null and string to convert all to a standard representation.\n##### 3. Some Graphs Ideas :- Reason wise , Number of people wise,city data.\n        Find some intuitive results like:\n        (a) Is there a specific type(reason) of crime which has relation to another type(reason).\n        (b) Is there a specific type(reason) of crime which leads to more number of people getting victimized per case?\n        Please provide the graphs in support of (a) and (b).\n        (c) Can you think of some ways of using text data in your analysis. Dont code this just write the ideas.\n\n### Evaluation Criteria\nPreprocessing, Graph and Reasoning Quality.","1406223e":"## Murder Reason (City Wise)","bf992995":"#### After changing the column name we have also reset the index as we are going to fill the null data.\n\n\n\n#### Filling the Null data and plotting the Act columns","c7c83b2a":"# **Point 4**","5bee0e07":"## Murder Reason in UP","955a37f2":"#### Lucknow has the higest crime rate.","377908ee":"#### Showing the duplicate rows","bc2f167a":"## Murder Victims in UP (City and Gender wise)","46267a3d":"## City Wise Crime Count in UP","15d52511":"## Crimes Against Women (City wise Adults and Children)","9f36db7d":"### Creating a test copy for ploting use, this copy has no 0 values and Nan values instead","292859ff":"### Assult on women is the highest crime against women crime followed by rape.","e6ef8b4f":"# **Point 5**","9eb729d3":"### Casteism is the lowest reason for murder, where Lucknow and Kanpur each have 1 case and Ghaziabad has no cases at all.\n\n### Petty Quarrels is the number 1 know reason for murder in Ghaziabad.\n\n### Love Affairs are the number 1 known reason for murder in Kanpur and Lucknow.","a4e2b147":"### Lucknow has the higest rate of crime against women for adult.\n### Lucknow and Ghaziabad have the highest rate of crime against women for children.\n### Kanpur has the lowest rate of crime against women for adults and children.","e37d5a30":"### Lucknow has the highest murder cases for Male and Female and the lowest murder cases for children.\n### Ghaziabad and Kanpur have the highest murder cases for children.\n### Ghaziabad has the lowest murder cases for women.\n### Kanpur has the lowest murder cases for men.","4d20fe86":"## Crimes Against Women (City wise)","55717702":"#### Dropping the columns","5aa192a7":"#### Removing the duplicate rows.","f6438822":"# **Point 6**","44e326a8":"## Murder Victims in UP (Reason and Gender wise)","28abfc04":"# **Point 1**","6b56ad56":"### Converting the dtypes to int values for calculations","13e3db3b":"### Dropping Act 11 Column as it contains the null values which was converted to 0.","692a354a":"### Acid Attack is the lowest crime against women in all 3 cities.\n\n### Lucknow highest crime against women is Assault on Women.\n\n### Ghaziabad highest crime against women is rape, assault and Protection of Children from Sexual Offences.\n\n### Kanpur highest crime against women is Protection of Children from Sexual Offences and rape.","43fbce73":"# **Point 2**\n\n#### Finding these rows whice have null value throughout and removing them.\n\n##### There are 106 rows with missing values these rows will be removed leaving us with 360 rows.","fcc8c35b":"### ","4b8d0fd8":"# **POINTS**\n\n#### 1. After looking at the data from the below interactive graph I see there is no missing values in the data set according to the 'City Column.' (This is helpfull as I do not need to clean the data for missing values and I have a complete data set.)\n\n#### 2. After checking the missing values matrix or heatmap we can see that there are many cases where no parameter has been mentioned and only a discription of the crime and the city. Since there is no usable data I will be removing these rows.\n\n#### 3. I also come to an understanding that 'Title' and 'Text' column are 'High Cardinality' columns. This means that they have unique values and will not serve my purpose in regards to finding any correlation, but it does help in finding duplicate cases. I have identified 6 such cases as the same report were handled by two citys So I will keep the data with values and will be removing the duplicate rows and then removing these two columns. (These two columns are more usefull in understanding what happened in the case and not usefull for the analytics part.)\n\n#### 4. We will also need to change the column names, remove the null values, drop any unwanted row or column, create the 10 different acts and clean and manipulate the data to suit us better for plotting.\n\n#### 5. Finally Plotting the data\n\n#### 6. END","3c707e51":"# Thank you!!!!\n\n## Thank you for going though my code, please let me know what you think and where I can imporve.\n\n## Please excuse any spelling mistakes.","43f99e7e":"## Kidnapped Victims in UP (City and Gender wise)","baa8c2f2":"# ","d8c69ecf":"### Property Disputes is the number 1 known reason for murder for men.\n\n### Love Affairs is the number 1 known reason for murder for women.\n\n### Family dispute is the number 1 known reason for murder for children.","54eda174":"### Ghaziabad has the Highest rate of kidnapping for any gender.\n### Kanpur has the lowest rate of kidnapping for any gender.","e14ac1d1":"# **Point 3**\n\n#### **Removing duplicates. We have 360 rows and after removing the duplicate we will have 358 rows**"}}