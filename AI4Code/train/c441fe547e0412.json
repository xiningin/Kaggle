{"cell_type":{"0c786388":"code","577019f6":"code","3cd951ad":"code","9cd5e882":"code","177fc652":"code","0f99289b":"code","198c2693":"code","2f280cf6":"code","26e983a0":"code","8ddd604d":"code","1fbe2b5e":"code","6d925b02":"code","e9e656bc":"code","2d2785ef":"code","6a4c93ba":"markdown","cced7508":"markdown","ebe18d7c":"markdown","c197a95e":"markdown","a8bfa4cc":"markdown","4ab7dbdc":"markdown"},"source":{"0c786388":"import numpy as np # linear algebra\nimport pandas as pd # data processing, CSV file I\/O (e.g. pd.read_csv)\n\n","577019f6":"reaction=pd.read_csv('\/kaggle\/input\/canada-vigilance\/cvponline_extract_20200630\/reactions.txt',sep='$',header=None)","3cd951ad":"reaction","9cd5e882":"report=pd.read_csv('\/kaggle\/input\/canada-vigilance\/cvponline_extract_20200630\/reports.txt',sep='$',header=None)\nreport","177fc652":"indi=pd.read_csv('\/kaggle\/input\/canada-vigilance\/cvponline_extract_20200630\/report_drug_indication.txt',sep='$',header=None)\nindi","0f99289b":"ingred=pd.read_csv('\/kaggle\/input\/canada-vigilance\/cvponline_extract_20200630\/drug_product_ingredients.txt',sep='$',header=None)\ningred","198c2693":"ingred[ingred[2]=='ENBREL']","2f280cf6":"atc=pd.read_csv('..\/input\/ddx-diagnostic-data\/mrconso\/mrconsoatc.csv')\natc","26e983a0":"atc['14']=atc['14'].str.lower()\ningred[4]=ingred[4].str.lower()\ningred_atc=ingred.merge(atc,left_on=4,right_on='14')\ningred_atc=ingred_atc.groupby([2,4,'0','1','13','14','15']).count()\ningred_atc=ingred_atc.reset_index()\ningred_atc=ingred_atc.iloc[:,:8]\ningred_atc","8ddd604d":"mrconsou=pd.read_csv(\"..\/input\/ddx-diagnostic-data\/mrconso\/mrconsou.csv\",header=None)\nmrconsou","1fbe2b5e":"indi[4]=indi[4].str.lower()\nmrconsou[5]=mrconsou[5].str.lower()\nindi_cui=indi.merge(mrconsou,right_on=5,left_on=4)\nindi_cui=indi_cui.groupby([4,'3_x','0_y']).count()\nindi_cui=indi_cui.reset_index()\nindi_cui","6d925b02":"indi_ingr=indi_cui.iloc[:,:4].merge(ingred_atc,left_on='3_x',right_on=2)\nindi_ingr=indi_ingr.groupby(list(indi_ingr.columns)).sum()\n","e9e656bc":"indi_ingr=indi_ingr.reset_index()\nindi_ingr=indi_ingr[['4_x','0_y','3_x','4_y','0','1','13','14',0]]\nindi_ingr.columns=['disease','cui','medication','ingredient','cui_i','lan','atc','ingred','count']\nindi_ingr.to_csv('ind_ingr.csv')\nindi_ingr","2d2785ef":"#compacting further\n\nindi_ingr=indi_ingr.groupby(['disease','cui','ingredient','cui_i']).sum()\nindi_ingr=indi_ingr.reset_index()\nindi_ingr.to_csv('ind_ingr.csv')\nindi_ingr","6a4c93ba":"# merge ingredients datafile with mrconsu ATC file\nlinks atc, cui, with canadian ADR composition data","cced7508":"# ingredients\nfor all medication name, the different substances in detail \nwe filter out the active substance by simply linking the ATC","ebe18d7c":"# Canadian adverse drug reaction\n\ndoing some first database merging\n\nData structure information\n\n\nhttps:\/\/www.canada.ca\/en\/health-canada\/services\/drugs-health-products\/medeffect-canada\/adverse-reaction-database\/canada-vigilance-adverse-reaction-online-database-data-structures.html#a2\n","c197a95e":"# indication file\nhas 1.7million combinations of indication in French\/English for a medication name ","a8bfa4cc":"# merge indication datafile with mrconsou","4ab7dbdc":"# final merge indications ingredients\nfind ingredients and their indiciations registrered in ADR database\n\nproblem: ATC has multiple codes for the same substance as example, aspirine is painkiller in 500mg tablets, and blood thinner in 100mg tablets\n"}}