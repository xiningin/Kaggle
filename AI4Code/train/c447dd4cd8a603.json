{"cell_type":{"fcb3f6bc":"code","1ead2829":"code","37e10f2a":"code","3cdc33c5":"code","31ae2766":"code","e83ea1f7":"code","ee1922e5":"code","fdfa7ec4":"code","5e394b75":"code","efdbbf79":"code","7ab8425e":"code","1afbf900":"code","b7864f72":"code","d5178f4c":"code","d76b02a0":"code","c5aa40cd":"code","5da8af5a":"code","14fa1971":"code","6013fd0d":"code","348409c6":"markdown","bf9d4160":"markdown","44c7ad42":"markdown","9df2818e":"markdown","fecafa9f":"markdown","76ef45c4":"markdown","560cd167":"markdown","7345917b":"markdown","4b9e3659":"markdown","8ee6044b":"markdown","77739fd6":"markdown","1fa0b6be":"markdown","f74fdd3b":"markdown"},"source":{"fcb3f6bc":"import json \nimport datetime\n\nimport numpy as np \nimport pandas as pd\nimport plotly.express as px","1ead2829":"twitterData = pd.read_csv(\"\/kaggle\/input\/TwitterFriends\/data.csv\", sep=',(?=\\S)', engine='python')\ntwitterData.head()","37e10f2a":"def delete_quotes(x):\n    return x[1:-1]\nfor column in [\"id\", \"screenName\", \"avatar\", \"lang\", \"tweetId\"]:\n    twitterData[column] = twitterData[column].apply(delete_quotes)\n    \nfor column in [\"tags\", \"friends\"]:\n    twitterData[column] = twitterData[column].apply(lambda x: json.loads(x))","3cdc33c5":"twitterData.head()","31ae2766":"twitterData.info()","e83ea1f7":"twitterData.describe()","ee1922e5":"twitterData['lang'].value_counts()","fdfa7ec4":"twitterData.drop([\"lang\", 'avatar', 'tweetId'], axis=1)","5e394b75":"fig = px.histogram(twitterData, x=\"followersCount\", nbins=10000)\nfig.show()","efdbbf79":"fig = px.histogram(twitterData[(twitterData['followersCount'] > 1000) & (twitterData['followersCount'] < 100000)], x=\"followersCount\", nbins=1000)\nfig.show()","7ab8425e":"fig = px.histogram(twitterData, x=\"friendsCount\", nbins=1000)\nfig.show()","1afbf900":"rank = 100\nfollowersCount = -1\n\nfollowersRank = []\nfollowersCounts = []\n\nwhile True:\n    followersCount = twitterData[(twitterData[\"followersCount\"] >= rank) & (twitterData[\"followersCount\"] < rank * 10)].shape[0]\n    if followersCount == 0:\n        break\n        \n    followersRank.append(rank)\n    followersCounts.append(followersCount)\n    rank *= 10\n\nfollowersCountByRankDict = {\n    \"count\": followersCounts,\n    \"rank\": followersRank\n}\nfollowersCountByRank = pd.DataFrame(data=followersCountByRankDict)\n\nfig = px.scatter(followersCountByRank, x=\"rank\", y=\"count\")\nfig.show()","b7864f72":"rank = 100\nfriendsCount = -1\n\nfriendRank = []\nfriendsCounts = []\n\nwhile True:\n    friendsCount = twitterData[(twitterData[\"friendsCount\"] >= rank) & (twitterData[\"friendsCount\"] < rank * 10)].shape[0]\n    #print(friendsCount)\n    if friendsCount == 0:\n        break\n        \n    friendRank.append(rank)\n    friendsCounts.append(friendsCount)\n    rank *= 10\n\nfriendsCountByRankDict = {\n    \"count\": friendsCounts,\n    \"rank\": friendRank\n}\n#print(friendsCountByRankDict)\nfriendsCountByRank = pd.DataFrame(data=friendsCountByRankDict)\n\nfig = px.scatter(friendsCountByRank, x=\"rank\", y=\"count\")\nfig.show()","d5178f4c":"fig = px.scatter(twitterData, x=\"followersCount\", y=\"friendsCount\", hover_data=[\"screenName\"])\nfig.show()","d76b02a0":"def parse_date(x):\n    return datetime.datetime.fromtimestamp(x\/1000.0) \\\n            .strftime(\"%Y-%m-%d\")\n\n\ntwitterData['lastSeenDatetime'] = twitterData['lastSeen'].apply(parse_date)\n","c5aa40cd":"twitterData['lastSeenDatetime'].value_counts()","5da8af5a":"fig = px.histogram(twitterData, x=\"lastSeenDatetime\", nbins=100)\nfig.show()","14fa1971":"fig = px.scatter(twitterData, x=\"lastSeenDatetime\", y=\"followersCount\")\nfig.show()","6013fd0d":"fig = px.scatter(twitterData, x=\"lastSeenDatetime\", y=\"friendsCount\")\nfig.show()","348409c6":"Similarly for friends:","bf9d4160":"Interesting to see how many users with dozens of followers, hundreds, thousands, etc:","44c7ad42":"Look how the number of friends and followers is related","9df2818e":"Convert the date of the last tweet to a more informative form","fecafa9f":"The bar graph at the top is not very informative. But it is obvious that we have very many users with a small number of followers(<1000) and very few with a large number of followers(>100000). Look at users with followers from 1000 to 100000:","76ef45c4":"# Processing data\n\nNotice that stirngs and numbers are saved with extra quotes, remove it","560cd167":"In my opinion, columns `lang`, `avatar` and `tweetId` are unnecessary","7345917b":"# Visualization","4b9e3659":"# Base analyze ","8ee6044b":"A look at the distribution of the number of subscribers","77739fd6":"As we can see the dates of the last visit are very close","1fa0b6be":"The trend is the same: we have many users with few followers and few with many number of followers.","f74fdd3b":"Look how the number of friends and followers relates to the date of attendance"}}