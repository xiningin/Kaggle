{"cell_type":{"8abc46d5":"code","1b9f5adb":"code","d1ad625f":"code","f635af80":"code","b860d139":"code","02f69a95":"code","09010cb3":"code","10c08cda":"code","232c6acf":"code","7cf6adf2":"code","f3a3e11d":"code","a88b7926":"code","6cfedfa9":"code","71784440":"code","b9ba7ce3":"code","0b2637f0":"code","70484ecb":"code","eb3bf6af":"code","9f0c0935":"code","2d73a110":"code","0e3f51e1":"code","f8f767e7":"code","aa6b8a7b":"code","d390b9e4":"code","f6026ae7":"code","41745fd2":"code","bde32d91":"code","7dc14ce8":"code","dd2f4efb":"code","2025076b":"code","793c9332":"code","f04b2b0b":"code","73e48b6c":"code","cbb1b854":"code","202476a0":"code","57f0ae80":"code","f878c28c":"code","6f74329d":"code","66a1bad9":"code","1e5f1b69":"code","fd8f3146":"code","4385b395":"code","d901866d":"code","357deb18":"code","e50eb29c":"code","56ec7438":"code","94b4a2f8":"code","f15ac67d":"code","54c403bd":"code","12e03f72":"code","d9e24708":"code","d1de7fb9":"code","d4917811":"code","2bf71aff":"code","75a0a7b7":"code","9fa4417c":"code","c687e2e6":"code","81b28b35":"code","3a1f0787":"code","f3598e4c":"code","e4ef33d3":"code","9a912470":"code","7c7df00b":"code","1838fff1":"code","5cb73350":"code","857369f9":"code","b4829417":"code","8f6dd8ff":"code","f263da2a":"code","2b7cb567":"code","a9a09e21":"code","3d2607db":"code","a2e0e395":"code","64a0fa37":"code","5fe37832":"markdown","f2e27af6":"markdown","c850ee8c":"markdown","30c5ec39":"markdown","99f0e3b9":"markdown","863eeecb":"markdown","ee73e73e":"markdown","9a2def77":"markdown","5d86ece6":"markdown","f59dc1ec":"markdown","569e5983":"markdown","4d22c1d6":"markdown","6a64dd8c":"markdown","8dc55a60":"markdown","64e3e919":"markdown","58861db2":"markdown","64454faa":"markdown","e5759893":"markdown","01fa0ae4":"markdown","03b61d3e":"markdown","328cfaa2":"markdown"},"source":{"8abc46d5":"import pandas as pd\nimport seaborn as sns\nimport numpy as np\nimport matplotlib.pyplot as plt\nimport os","1b9f5adb":"uber_apr14= pd.read_csv(r'..\/input\/uber-pickups-in-ny-city\/uber-pickups-in-new-york-city\/uber-raw-data-apr14.csv',\n                        encoding='utf-8')\nuber_apr14.head()","d1ad625f":"files=os.listdir(r'..\/input\/uber-pickups-in-ny-city\/uber-pickups-in-new-york-city')\nfiles","f635af80":"files=[files for files in files if 'uber-raw-data' in files]\nfiles","b860d139":"files.remove('uber-raw-data-janjune-15.csv')\nfiles","02f69a95":"path=r'..\/input\/uber-pickups-in-ny-city\/uber-pickups-in-new-york-city'\n\n#blank dataframe\nfinal=pd.DataFrame()\n\nfor file in files:\n    df=pd.read_csv(path+\"\/\"+file,encoding='latin-1')\n    final=pd.concat([df,final])\nfinal.head()","09010cb3":"final.shape","10c08cda":"df=final.copy()\ndf.head()","232c6acf":"df.shape","7cf6adf2":"df.info()","f3a3e11d":"df['Date\/Time'] = pd.to_datetime(df['Date\/Time'], format=\"%m\/%d\/%Y %H:%M:%S\")\ndf.info()","a88b7926":"df['weekday']=df['Date\/Time'].dt.day_name()\ndf['day']=df['Date\/Time'].dt.day\ndf['minute']=df['Date\/Time'].dt.minute\ndf['month']=df['Date\/Time'].dt.month\ndf['hour']=df['Date\/Time'].dt.hour\ndf.info()","6cfedfa9":"df.head()","71784440":"df['Base'].unique()","b9ba7ce3":"df['day'].unique()","0b2637f0":"df['weekday'].unique()","70484ecb":"import plotly.express as px\npx.bar(x=df['weekday'].value_counts().index,\n      y=df['weekday'].value_counts().values\n      )","eb3bf6af":"px.bar(x=df['hour'].value_counts().index,\n      y=df['hour'].value_counts().values\n      )","9f0c0935":"for i,month in enumerate(df['month'].unique()):\n    print(month)","2d73a110":"plt.figure(figsize=(20,20))\nfor i,month in enumerate(df['month'].unique()):\n    plt.subplot(3,2,i+1)\n    plt.title(\"{}\".format(month))\n    df[df['month']==month]['hour'].hist(bins='auto')","0e3f51e1":"!pip install chart_studio","f8f767e7":"import chart_studio.plotly as py\nimport plotly.graph_objs as go\nfrom plotly.offline import download_plotlyjs, init_notebook_mode, plot, iplot","aa6b8a7b":"trace1 = go.Bar( \n        x = df.groupby('month')['hour'].sum().index,\n        y = df.groupby('month')['hour'].sum(),\n        name= 'Priority')\niplot([trace1])","d390b9e4":"plt.figure(figsize=(10,6))\nplt.hist(df['day'], bins=30, rwidth=.8, range=(0.5, 30.5))\nplt.xlabel('date of the month')\nplt.ylabel('Total Journeys')\nplt.title('Journeys by Month Day')\nplt.grid()","f6026ae7":"plt.figure(figsize=(20,20))\nfor i,month in enumerate(df['month'].unique(),1):\n    plt.subplot(3,2,i)\n    df_out=df[df['month']==month]\n    plt.title(\"{}\".format(month))\n    plt.hist(df_out['day'],bins='auto')\n    plt.xlabel('days in month'.format(i))\n    plt.ylabel('total rides')\n    plt.grid()","41745fd2":"plt.figure(figsize=(10,6))\nsns.set_style(style='whitegrid')\nsns.pointplot(x=\"hour\",y=\"Lat\",data=df)\nplt.grid()","bde32d91":"plt.figure(figsize=(10,6))\nax=sns.pointplot(x=\"hour\",y=\"Lat\", hue=\"weekday\",data=df)\nax.set_title('hoursoffday vs latiitide of passenger')\nplt.grid()","7dc14ce8":"df.head()","dd2f4efb":"df['Base'].head()","2025076b":"df.groupby(['Base','month'])['Date\/Time'].count()","793c9332":"base=df.groupby(['Base','month'])['Date\/Time'].count().reset_index()\nbase","f04b2b0b":"plt.figure(figsize=(10,6))\nsns.lineplot(x='month',y='Date\/Time',hue='Base',data=base);","73e48b6c":"def count_rows(rows):\n    return len(rows)","cbb1b854":"by_cross = df.groupby(['weekday','hour']).apply(count_rows)\nby_cross","202476a0":"pivot=by_cross.unstack()\npivot","57f0ae80":"plt.figure(figsize=(10,6))\nsns.heatmap(pivot, annot=False);","f878c28c":"df.head()","6f74329d":"def heatmap(col1,col2):\n    by_cross = df.groupby([col1,col2]).apply(lambda x:len(x))\n    pivot=by_cross.unstack()\n    plt.figure(figsize=(10,6))\n    return sns.heatmap(pivot,annot=False)","66a1bad9":"## validating above Analysis through Heatmap\nheatmap('day','hour');","1e5f1b69":"heatmap('day','month');","fd8f3146":"df[df['month']==4].head()","4385b395":"heatmap('weekday','month');","d901866d":"from folium.plugins import HeatMap","357deb18":"import folium\nfrom folium.plugins import HeatMap\nbasemap=folium.Map()","e50eb29c":"BBox = (df.Lon.min(),df.Lon.max(),\n         df.Lat.min(), df.Lat.max())\nBBox","56ec7438":"ny_m = plt.imread('..\/input\/new-york-city\/map.png')","94b4a2f8":"fig, ax = plt.subplots(figsize = (20,6))\nplt.plot(df['Lon'], df['Lat'],'r+', ms=0.5)\nax.set_title('Plotting Spatial Data on New York Map')\nax.set_xlim(BBox[0],BBox[1])\nax.set_ylim(BBox[2],BBox[3])\nax.imshow(ny_m, zorder=0, extent = BBox, aspect= 'equal')\nplt.show()","f15ac67d":"df.head()","54c403bd":"df_out=df[df['weekday']=='Sunday']\ndf_out.head()","12e03f72":"df_out.groupby(['Lat','Lon'])['weekday'].count().reset_index()","d9e24708":"HeatMap(df_out.groupby(['Lat','Lon'])['weekday'].count().reset_index(),zoom=20,radius=15).add_to(basemap)\nbasemap","d1de7fb9":"BBox = (df_out.Lon.min(),df_out.Lon.max(),\n         df_out.Lat.min(), df_out.Lat.max())\nBBox","d4917811":"fig, ax = plt.subplots(figsize = (20,6))\nplt.plot(df_out['Lon'], df_out['Lat'],'r+', ms=0.5)\nax.set_title('Plotting Spatial Data on New York Map')\nax.set_xlim(BBox[0],BBox[1])\nax.set_ylim(BBox[2],BBox[3])\nax.imshow(ny_m, zorder=0, extent = BBox, aspect= 'equal')\nplt.show()","2bf71aff":"def plot(df,day):\n    df_out=df[df['weekday']==day]\n    df_out.groupby(['Lat','Lon'])['weekday'].count().reset_index()\n    HeatMap(df_out.groupby(['Lat','Lon'])['weekday'].count().reset_index(),zoom=20,radius=15).add_to(basemap)\n    return basemap","75a0a7b7":"plot(df,'Saturday')","9fa4417c":"uber_15 = pd.read_csv(r'..\/input\/uber-pickups-in-ny-city\/uber-pickups-in-new-york-city\/uber-raw-data-janjune-15.csv',\n                      encoding='utf-8')\nuber_15.head()","c687e2e6":"uber_15.shape","81b28b35":"#Checking the minimum date in the uber_15\nuber_15['Pickup_date'].min()","3a1f0787":"#Checking the maximum date in the uber_15\nuber_15['Pickup_date'].max()","f3598e4c":"uber_15['Pickup_date'] =  pd.to_datetime(uber_15['Pickup_date'], format='%Y-%m-%d %H:%M:%S')\nuber_15.head()","e4ef33d3":"uber_15['weekday']=uber_15['Pickup_date'].dt.day_name()\nuber_15['day']=uber_15['Pickup_date'].dt.day\nuber_15['minute']=uber_15['Pickup_date'].dt.minute\nuber_15['month']=uber_15['Pickup_date'].dt.month\nuber_15['hour']=uber_15['Pickup_date'].dt.hour\nuber_15.head()","9a912470":"px.bar(x=uber_15['month'].value_counts().index,\n           y=uber_15['month'].value_counts().values)","7c7df00b":"plt.figure(figsize=(20,6))\nax=sns.countplot(data=uber_15,x='hour')\nplt.grid()","1838fff1":"uber_15.groupby(['weekday', 'hour'])['Pickup_date'].count()","5cb73350":"summary=uber_15.groupby(['weekday', 'hour'])['Pickup_date'].count().reset_index()\nsummary","857369f9":"summary=summary.rename(columns = {'Pickup_date':'Counts'})\nsummary","b4829417":"plt.figure(figsize=(20,6))\nsns.pointplot(x=\"hour\", y=\"Counts\", hue=\"weekday\", data=summary)\nplt.grid()","8f6dd8ff":"uber_foil=pd.read_csv(r'..\/input\/uber-pickups-in-ny-city\/uber-pickups-in-new-york-city\/Uber-Jan-Feb-FOIL.csv')\nuber_foil.head()","f263da2a":"uber_foil['dispatching_base_number'].unique()","2b7cb567":"plt.figure(figsize=(20,6))\nsns.boxplot(x = 'dispatching_base_number', y = 'active_vehicles', data = uber_foil)\nplt.show()","a9a09e21":"plt.figure(figsize=(20,6))\nsns.violinplot(x = 'dispatching_base_number', y = 'active_vehicles', data = uber_foil)\nplt.show()","3d2607db":"# Finding the ratio of trips\/active_vehicles\nuber_foil['trips\/vehicle'] = uber_foil['trips']\/uber_foil['active_vehicles']\nuber_foil.head()","a2e0e395":"uber_foil.set_index('date').head()","64a0fa37":"plt.figure(figsize=(20,6))\nuber_foil.set_index('date').groupby(['dispatching_base_number'])['trips\/vehicle'].plot()\nplt.ylabel('Average trips\/vehicle')\nplt.title('Demand vs Supply chart (Date-wise)')\nplt.legend();","5fe37832":"# Heatmap by Hour and Weekday.","f2e27af6":"# Analysis of Rush of each hour in each month","c850ee8c":"# To analyse which base number gets popular by month name","30c5ec39":"# Analysing Rush in New york City","99f0e3b9":"# Getting Rush in hour","863eeecb":"# Analysis of Jan-June uber_15","ee73e73e":"We can see that the number of Uber pickup has been steadily increasing throughout the first half of 2015 in NYC\n","9a2def77":"We observe that the number of trips increases each month, we can say that from April to September 2014, Uber was in a continuous improvement process.","5d86ece6":"# How Average trips\/vehicle inc\/decreases with dates with each of base number","f59dc1ec":"# Analysis of which month has max rides","569e5983":"# Analysing In-Depth Analysis of Rush in New york City Day & hour wise","4d22c1d6":"# To analyse which base number gets popular by month name","6a64dd8c":"# Perform Spatial Analysis using heatmap to get a clear cut of Rush on Sunday(Weekend)","8dc55a60":"# Analysis of journey by Week-days","64e3e919":"# Analysis by Hour","58861db2":"# Seems to have more number of Active Vehicles in B02764","64454faa":"Seems to have more number of trips in B02764","e5759893":"# Analysis of Total rides month wise","01fa0ae4":"Interestingly, after the morning rush, the number of Uber pickups doesn't dip much throughout the rest of the morning and early afternoon. There is significantly more demand in the evening than the daytime. Let's investigate to see if there's a difference in hourly pattern for different days of the week.","03b61d3e":"# Analysis of Journey of Each Day","328cfaa2":"# Analysis of Location data points"}}