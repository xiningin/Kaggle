{"cell_type":{"bb33b32d":"code","7aa96029":"code","0e1d5243":"code","518aaaa0":"code","143313e0":"code","ac78b2af":"code","30afa663":"code","de5e22a5":"code","1a0a963d":"code","167b5511":"code","731adc88":"code","30b15ba2":"code","ae0f4bf9":"code","0a5e53e0":"code","9721e34f":"code","1874ba1d":"code","19bf8734":"code","13ce516e":"code","38a37b89":"code","cdf89eea":"code","c09d2d02":"code","126e6127":"code","a4345f73":"code","4164852e":"code","efddbcfb":"code","74dcbd65":"code","5ace59fb":"code","734b5dcc":"code","30630d90":"code","20aded77":"code","5589ce7e":"code","ca194f28":"markdown","2204db43":"markdown","981c4852":"markdown","5a919108":"markdown","1a122476":"markdown","ed8eed68":"markdown","ec97ce72":"markdown","789e3c7a":"markdown","5374b744":"markdown","5e44ba2e":"markdown","1adb2a59":"markdown","f249febf":"markdown","c3ef6e4d":"markdown","4e45a533":"markdown","9741aace":"markdown","d0957e66":"markdown","c430cd1a":"markdown","aa8f46ee":"markdown","2a8bf051":"markdown","7975c0d8":"markdown","d66ecb34":"markdown","f19d89b4":"markdown","aec682d9":"markdown","c3b2a268":"markdown"},"source":{"bb33b32d":"import pandas as pd\nimport numpy as np","7aa96029":"data = pd.read_csv(\"..\/input\/military-expenditure-of-countries-19602019\/Military Expenditure.csv\", low_memory=False)","0e1d5243":"data.head(n=2)","518aaaa0":"data[\"Indicator Name\"].nunique()","143313e0":"data.drop(['Indicator Name'],axis=1,inplace=True)","ac78b2af":"data.fillna(0,inplace=True)\ndata[\"Total USD\"]=data.iloc[:,2:].sum(axis=1)","30afa663":"columns=[str(i) for i in list((range(1960,2019)))]\ncolumns=columns+[\"Total USD\"]\nfor i in columns:\n    data[i]=data[i]\/1.e+9\ndata=np.round(data, decimals=2)\ndata.head()","de5e22a5":"print(\"Number of rows before:\",len(data))\ndata.drop(data.loc[data[\"Total USD\"]<1].index,inplace=True)\nprint(\"Number of rows after:\",len(data))","1a0a963d":"data.groupby(['Type',\"Name\"])['Total USD'].sum()","167b5511":"data.sort_index(by=['Type','Total USD'],ascending=[False,False],inplace=True)\ndata=data[data['Type'].str.contains(\"Country\")]\ndata","731adc88":"contcodes = pd.read_csv(r\"..\/input\/continents-codes-and-number-of-wars\/country-and-continent-codes-list-csv_csv.csv\", sep=';',usecols=[\"Continent_Name\",\"Three_Letter_Country_Code\"])\ncontcodes=contcodes.rename(columns={\"Three_Letter_Country_Code\": \"Code\"})\ncontcodes.head()","30b15ba2":"contcodes.groupby('Code').agg(\"count\").sort_values([\"Continent_Name\"], ascending = False).head(n=10)","ae0f4bf9":"contcodes.drop_duplicates(subset='Code', keep=\"last\",inplace=True)","0a5e53e0":"data=pd.merge(data, contcodes , how='left')\ndata.head()","9721e34f":"import matplotlib.pyplot as plt\n%matplotlib inline\nimport seaborn as sns","1874ba1d":"df = pd.DataFrame(data, columns = [\"Name\", 'Total USD'])\ntop = df.iloc[:10,]\nx=top[\"Name\"]\ny=top[\"Total USD\"]","19bf8734":"sns.set_color_codes(\"pastel\")\nax = sns.barplot(y=x,  x=y, data=df)\nax.set_xlabel('Total USD')\nax.axes.xaxis.label.set_text(\"Total Spendings (billions)\")\nax.axes.yaxis.label.set_text(\"Countries\")\nplt.title('Total Millitary Spending from 1968 to 2018')\nfor p in ax.patches:\n    width = p.get_width()\n    plt.text(5+p.get_width(), p.get_y()+0.55*p.get_height(),\n             '{:1.2f}'.format(width),\n             ha='left', va='center')","13ce516e":"time=data.copy()\ntime=time.drop([\"Type\",\"Code\",\"Continent_Name\",\"Total USD\"],axis=1)\ntime=time.T\ntime=time.loc[:,:9]\nnew_header = time.iloc[0]\ntime = time[1:] \ntime.columns = new_header \ntime.head()","38a37b89":"plt.figure()\ntime.plot(linestyle='-', marker='*',legend=True)\nplt.title('Timeline of Millitary Spending of the top 10 countries (billions)')","cdf89eea":"df2 = pd.DataFrame(data, columns = [\"Name\", \"2018\"])\ndf2= df2.sort_values(['2018'],ascending=False).reset_index()\ntop18 = df2.iloc[:10,]\na=top18[\"Name\"]\nb=top18[\"2018\"]","c09d2d02":"sns.set_color_codes(\"pastel\")\nax1 = sns.barplot(y=a,  x=b, data=top18)\nax1.set_xlabel('2018')\nax1.axes.xaxis.label.set_text(\"Total Spendings (billions)\")\nax1.axes.yaxis.label.set_text(\"Countries\")\nplt.title('Total Millitary Spending in 2018')\nfor p in ax1.patches:\n    width = p.get_width()\n    plt.text(5+p.get_width(), p.get_y()+0.55*p.get_height(),\n             '{:1.2f}'.format(width),\n             ha='left', va='center')","126e6127":"df4 = pd.DataFrame(data, columns = [\"Continent_Name\", \"Name\",'Total USD'])\ndf4.groupby([\"Continent_Name\"]).apply(lambda x: x.sort_values([\"Total USD\"], ascending = False).head(5)).reset_index(drop=True)","a4345f73":"warscontinent = pd.read_csv(r\"..\/input\/continents-codes-and-number-of-wars\/wars.csv\", low_memory=False,sep=';')\nwarscontinent=pd.DataFrame(warscontinent, columns = [\"Continent_Name\", 'Year'])\nwarscontinent.head()","4164852e":"warscontinent=warscontinent.groupby([\"Continent_Name\"]).count()\nwarscontinent= warscontinent.sort_values(['Year'],ascending=False).reset_index()\nwarscontinent","efddbcfb":"height=warscontinent['Year']\nbars=warscontinent['Continent_Name']\ny_pos = np.arange(len(bars))\nplt.bar(y_pos, height)\nplt.xticks(y_pos, bars, rotation=60)\nplt.title ('Number of Wars by Continent 1968-2018')\nplt.show()","74dcbd65":"USDcontinent = pd.DataFrame(data, columns = [\"Continent_Name\", 'Total USD'])\nUSDcontinent=USDcontinent.groupby([\"Continent_Name\"]).sum()\nUSDcontinent= USDcontinent.sort_values(['Total USD'],ascending=False).reset_index()\nUSDcontinent","5ace59fb":"height=USDcontinent['Total USD']\nbars=USDcontinent['Continent_Name']\ny_pos = np.arange(len(bars))\nplt.bar(y_pos, height)\nplt.xticks(y_pos, bars, rotation=60)\nplt.title ('Spendings in Military by Continent (1968-2018)')\nplt.show()","734b5dcc":"final=pd.merge(USDcontinent, warscontinent , how='left')\nfinal.rename(columns={'Year': 'Number of Wars','Total USD':'Total Amount Spent (USD billions)'},inplace=True)\nfinal.set_index('Continent_Name')","30630d90":"x=final['Continent_Name']\ny1=final['Total Amount Spent (USD billions)']\ny2=final['Number of Wars']\n\n\nax = final.plot(secondary_y=\"Number of Wars\", kind=\"bar\")\nax.set_xlabel('Continents')\nax.set_ylabel('Total Amount Spent')\nax.right_ax.set_ylabel('Number of Wars', color='red')\nax.right_ax.tick_params(axis='y', labelcolor='red')\n\nax.set_xticklabels(x,rotation=25)\nplt.title ('Number of Wars & Military Spendings by Continent (1968-2018)')\n\nplt.show()","20aded77":"#Adding a world map picture form google\nruh_m = plt.imread('..\/input\/continents-codes-and-number-of-wars\/world.kpeg.jpg')\n\n#Defining the area of the picture\nBBox = ((0, 20, 0, 10)) \nprint(BBox)\n\nfinal['lat']=[3,14,10.5,5.0,10,17.5] #X\nfinal['long']=[8,8,8,3.0,5,2.2]  #Y\nfinal","5589ce7e":"import matplotlib.pyplot as plt\nfig, ax = plt.subplots()\nax.scatter(final.lat, final.long,color=\"orange\",marker=\"p\",s=(final[\"Number of Wars\"]*1.5))\nax.scatter(final.lat+0.7, final.long,color=\"blue\",alpha=0.5,s=(final[\"Total Amount Spent (USD billions)\"]\/100))\nax.set_title('Number of Wars (orange) and Military Spendings (blue) by continent (1968-2018)')\nax.set_xlim(BBox[0],BBox[1])\nax.set_ylim(BBox[2],BBox[3])\nax.imshow(ruh_m, zorder=0, extent = BBox, aspect= 'equal')","ca194f28":"We are going to add continents to the dataset. This information is necessary to compare wars and spendings by continent. \nWe are going to import the continents from [DataHub](http:\/\/https:\/\/datahub.io\/JohnSnowLabs\/country-and-continent-codes-list#resource-country-and-continent-codes-list-csv) and merge with the field \"Code\". ","2204db43":"Analysing how dataset can be cleaned.\nColumn \"Code\" identified with same information than field \"Name\", but we are going to use after to merge with another dataset to add continents information.","981c4852":"The number of wars from 1968 to 2018 by continent was get from Wikipedia. Each row of the dataset is a conflict. \nList of wars: \n[1945\u20131989](http:\/\/https:\/\/en.wikipedia.org\/wiki\/List_of_wars:_1945%E2%80%931989)\n[1990\u20132002](http:\/\/https:\/\/en.wikipedia.org\/wiki\/List_of_wars:_1990%E2%80%932002)\n[2003\u2013present](http:\/\/https:\/\/en.wikipedia.org\/wiki\/List_of_wars:_2003%E2%80%93present)","5a919108":"Creating a \"Total Spending\" column for all countries form 1968 to 2018.","1a122476":"### Some visualizations and exploration...","ed8eed68":"1. US is the biggest spender in military from 1968 to 2018, almost 8 times more than the second country, China.\n2. In 2018, US is still the first spender and China the second, but now US spends 3 times lesser than China.\n3. US increased its investments in military force at 1980's, with a pike at 2010's.\n4. We had more wars in Asia and Africa, but the biggest spender in military is North America. Its a great insight the see the existence of:\n    * Proxy war: an armed conflict between two states or non-state actors which act on the instigation or on behalf of other parties that are not directly involved. ([Wiki](http:\/\/https:\/\/en.wikipedia.org\/wiki\/Proxy_war))\n    * Power projection (or force projection): a term used in military to refer to the capacity of a state to deploy and sustain forces outside its territory. ([Wiki](http:\/\/https:\/\/en.wikipedia.org\/wiki\/Power_projection))\n    * Investments in military forces are made to \"show power\" and and to increase influence in many areas of the world.","ec97ce72":"#### Military Spendings by continent","789e3c7a":"Cleaning categories\/countries with insignificant spendings:","5374b744":"#### Top 5 biggest spenders by continent","5e44ba2e":"#### Number of Wars by Continent (conflicts that happened in a continent)","1adb2a59":"Adding latitute and lontitude in the dataset to plot a geospatial data visualization","f249febf":"#### Biggest spenders of all years","c3ef6e4d":"Importing dataset...","4e45a533":"#### Timeline of Spendings of top 10 countries","9741aace":"### Adding information about conflicts from 1968 to 2018","d0957e66":"Merging the spendings and number of wars in one dataset:","c430cd1a":"\nTranforming spendings scale to billions with one decimal place","aa8f46ee":"#### Biggest spenders of 2018","2a8bf051":"Merging the datasets:","7975c0d8":"Field \"Indicator Name\" identified with only one value, so its useless. Lets drop it.","d66ecb34":"The categories \"Semi Autonomous Region\",\"Regions Clubbed Geographically\" and \"Regions Clubbed Economically\" are not interesting for my analysis, so we are going to use only the category \"Country\"","f19d89b4":"## Conclusions","aec682d9":"### Ploting the comparison of number of wars and total spendings in military by continent:","c3b2a268":"Some countries are located in 2 continents, let's deduplicate:"}}