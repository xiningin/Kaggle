{"cell_type":{"e71431bf":"code","dc53cb37":"code","c89ffe0f":"markdown"},"source":{"e71431bf":"OFFSET = 1 # What is the ID of the first paperclip generated\nCOUNT  = 25000 # How many paperclips to generate\n","dc53cb37":"import PIL\nfrom PIL import Image\nfrom random import randint\nimport pandas as pd\nimport requests\nfrom io import BytesIO\nimport zipfile\n\nprint(\"Generating paperclips\")\n\n# Load the paperclip and background images\nresponse_paperclip = requests.get(\"https:\/\/github.com\/jeffheaton\/present\/raw\/master\/data_files\/paperclip.png\")\npaperclip = Image.open(BytesIO(response_paperclip.content))\n\nresponse_background = requests.get(\"https:\/\/github.com\/jeffheaton\/present\/raw\/master\/data_files\/background.png\")\nbackground = Image.open(BytesIO(response_background.content))\n\n# Resize the background\nbackground = background.resize((256,256),resample=PIL.Image.LANCZOS)\n\n# Keep the apsect ratio of the paperclips when they are scaled\naspect = paperclip.width\/paperclip.height\nclip_count = []\n\n# We will output to a ZIP file that can be easily downloaded\nz = zipfile.ZipFile('\/kaggle\/working\/clips.zip', 'w', zipfile.ZIP_DEFLATED)\n\nfor c in range(COUNT):\n    render_img = background.copy()\n    cnt = randint(0,75)\n    clip_count.append(cnt)\n    for i in range(cnt):\n        a = randint(0,360)\n        clip_size = randint(30,60)\n        w = int(clip_size*aspect)\n\n        paperclip2 = paperclip.resize((w,clip_size),resample=PIL.Image.LANCZOS)\n\n\n        x = randint(-int(paperclip2.width\/2),background.width - int(paperclip2.width\/2))\n        y = randint(-int(paperclip2.height\/2),background.height - int(paperclip2.height\/2))\n\n        paperclip2 = PIL.Image.Image.rotate(paperclip2,a,resample=PIL.Image.BICUBIC,expand=True)\n\n\n        render_img.paste(paperclip2,(x,y),paperclip2)\n\n    image_file = BytesIO()\n    render_img.save(image_file, 'PNG')\n    z.writestr(f'clips-{c+OFFSET}.png', image_file.getvalue())\n    \ndf = pd.DataFrame( {'id':range(OFFSET,len(clip_count)+OFFSET),'clip_count':clip_count})\nz.writestr('master.csv', df.to_csv(index=False))\nz.close()\nprint(\"done\")\n\ndf","c89ffe0f":"# Generate Random Paperclip Images\n\nThe following code was used to generate the [random paperclip](https:\/\/www.kaggle.com\/jeffheaton\/count-the-paperclips) images."}}