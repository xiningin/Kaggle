{"cell_type":{"e95c616a":"code","4c861a56":"code","372d7098":"code","20eea085":"code","d3342c52":"code","1c314e8c":"code","7d5dc2da":"code","0bc59b4b":"code","3665acab":"code","1480988e":"code","25a15df9":"code","1b0e937b":"code","7cff36d8":"code","df92c713":"code","37b91ab9":"code","7b24b768":"code","32df75a2":"code","c69f2666":"code","bdd38dbc":"code","4ad3f046":"code","b7f51a06":"code","ae2b4097":"code","cfcb290d":"code","46835b35":"code","dd60f8e5":"code","cab55c3c":"code","4f3ac5ae":"code","a58a80d7":"code","fc7c61ac":"code","097b5b48":"code","fbe64655":"code","e415d472":"code","20d94eed":"code","e2f7651b":"code","7229f98d":"markdown","8cb332c1":"markdown","1bc9c032":"markdown","29905249":"markdown","0d2da18c":"markdown","5e1624d0":"markdown","36de03d6":"markdown","87baa051":"markdown","ff47af58":"markdown","4ae9a6e1":"markdown","e367a004":"markdown","f80fa011":"markdown","61a7b520":"markdown","f8698fb9":"markdown","ec99d407":"markdown","af9f30fa":"markdown","cc341c4b":"markdown","b07773b7":"markdown","9a80801e":"markdown","5936257c":"markdown","8675c3b2":"markdown","e050ae7a":"markdown","dc820cd3":"markdown","ac7749a2":"markdown","296cfd65":"markdown","c08f6b1c":"markdown","7b28b3fa":"markdown","50d3a1c2":"markdown","88696581":"markdown","1a66d367":"markdown","f547febf":"markdown","0b80e8ef":"markdown","d568e35e":"markdown","96db6827":"markdown","5f6c0bdb":"markdown","bdca2fa5":"markdown"},"source":{"e95c616a":"import gc\nimport glob\nimport numpy as np\nimport pandas as pd\nimport seaborn as sns\nfrom tqdm import tqdm\nimport matplotlib.pyplot as plt\n\ntqdm.pandas()","4c861a56":"plt.style.use('seaborn-poster')\nplt.rcParams['font.family'] = 'serif'\nplt.rcParams['font.serif'] = 'Ubuntu'\nplt.rcParams['font.weight'] = 'bold'\nplt.rcParams['font.size'] = 16\nplt.rcParams['lines.linewidth'] = 2\nplt.rcParams['axes.labelsize'] = 14\nplt.rcParams['axes.titlesize'] = 16\nplt.rcParams['xtick.labelsize'] = 12\nplt.rcParams['ytick.labelsize'] = 12\nplt.rcParams['legend.fontsize'] = 14\nplt.rcParams['figure.titlesize'] = 20\nplt.rcParams['axes.spines.top'] = False\nplt.rcParams['axes.spines.right'] = False\nplt.rcParams['axes.labelweight'] = 'bold'\nplt.rcParams['axes.titleweight'] = 'bold'","372d7098":"district_info_df = pd.read_csv(\"..\/input\/learnplatform-covid19-impact-on-digital-learning\/districts_info.csv\")\nprint(f\"Number of samples: {district_info_df.shape[0]}\")\ndistrict_info_df.head(10)","20eea085":"pct_df = pd.DataFrame(district_info_df.count() * 100 \/ len(district_info_df), \n                      columns=['Percent Non-Missing'])\npct_df['Percent Non-Missing'] = np.round(pct_df['Percent Non-Missing'], 3)\n\npct_df.plot(kind='barh', figsize=(12, 6), legend=False)\nplt.title(\"Percentage of non-missing values per column\", pad=20)\n\nfor i, v in enumerate(pct_df['Percent Non-Missing']):\n    plt.text(v + 1, i - 0.07, str(v), color='k', fontsize=14)","d3342c52":"district_info_df.fillna('UNK', inplace=True)\n\ndistrict_info_df['pp_expenditure_group'] = district_info_df['pp_total_raw'].map({\n    '[4000, 6000[': '<= 8K',\n    '[6000, 8000[': '<= 8K',\n    '[8000, 10000[': '8K - 12K',\n    '[10000, 12000[': '8K - 12K',\n    '[12000, 14000[': '12K - 16K',\n    '[14000, 16000[': '12K - 16K',\n    '[16000, 18000[': '16K - 20K',\n    '[18000, 20000[': '16K - 20K',\n    '[20000, 22000[': '20K - 24K',\n    '[22000, 24000[': '20K - 24K',\n    '[32000, 34000[': '>= 32K'\n})\n\ndistrict_info_df.head()","1c314e8c":"product_info_df = pd.read_csv(\"..\/input\/learnplatform-covid19-impact-on-digital-learning\/products_info.csv\")\nprint(f\"Number of samples: {product_info_df.shape[0]}\")\nproduct_info_df.head(10)","7d5dc2da":"pct_df = pd.DataFrame(product_info_df.count() * 100 \/ len(product_info_df), \n                      columns=['Percent Non-Missing'])\npct_df['Percent Non-Missing'] = np.round(pct_df['Percent Non-Missing'], 3)\n\npct_df.plot(kind='barh', figsize=(12, 6), legend=False)\nplt.title(\"Percentage of non-missing values per column\", pad=20)\n\nfor i, v in enumerate(pct_df['Percent Non-Missing']):\n    plt.text(v + 1, i - 0.07, str(v), color='k', fontsize=14)","0bc59b4b":"product_info_df.fillna('UNK', inplace=True)\nproduct_info_df['Number of Sectors'] = product_info_df['Sector(s)'].progress_apply(lambda x: 0 if x=='UNK' else len(x.split('; ')))\nproduct_info_df['Sector_List'] = product_info_df['Sector(s)'].progress_apply(lambda x: x.split('; '))\nproduct_info_df = product_info_df.drop('Sector_List', 1).join(product_info_df.Sector_List.str.join('|').str.get_dummies())\n\nproduct_info_df['Essential Function Primary Category'] = product_info_df['Primary Essential Function'].progress_apply(lambda x: 'UNK' if x=='UNK' else x.split(' - ')[0])\nproduct_info_df['Number of Sub Categories'] = product_info_df['Primary Essential Function'].progress_apply(lambda x: 0 if x=='UNK' else len(x.split(' - ')[1:]))\nproduct_info_df['Essential Function Sub Category(1)'] = product_info_df['Primary Essential Function'].progress_apply(lambda x: 'None' if len(x.split(' - ')) < 2 else x.split(' - ')[1])\nproduct_info_df['Essential Function Sub Category(2)'] = product_info_df['Primary Essential Function'].progress_apply(lambda x: 'None' if len(x.split(' - ')) < 3 else x.split(' - ')[2])\n\nproduct_info_df.drop(['URL','Sector(s)','Primary Essential Function','UNK'], axis=1, inplace=True)\nproduct_info_df.head(10)","3665acab":"path = '..\/input\/learnplatform-covid19-impact-on-digital-learning\/engagement_data' \nengagement_df = pd.DataFrame()\n\nfor file in tqdm(glob.glob(path + \"\/*.csv\")):\n    df = pd.read_csv(file, parse_dates=['time'])\n    df[\"district_id\"] = np.int(file.split(\"\/\")[4].split(\".\")[0])\n    engagement_df = pd.concat([engagement_df, df])\n\nprint(f\"Number of samples: {engagement_df.shape[0]}\")\nengagement_df.head(10)","1480988e":"pct_df = pd.DataFrame(engagement_df.count() * 100 \/ len(engagement_df), \n                      columns=['Percent Non-Missing'])\npct_df['Percent Non-Missing'] = np.round(pct_df['Percent Non-Missing'], 3)\n\npct_df.plot(kind='barh', figsize=(12, 6), legend=False)\nplt.title(\"Percentage of non-missing values per column\", pad=20)\n\nfor i, v in enumerate(pct_df['Percent Non-Missing']):\n    plt.text(v + 1, i - 0.07, str(v), color='k', fontsize=14)","25a15df9":"engagement_df['lp_id'].fillna(-1, inplace=True)\n\nagg_cols = ['district_id','lp_id']\nagg_df = engagement_df[~engagement_df.duplicated(subset=['district_id','lp_id','engagement_index','pct_access'], keep='first')].copy()\nagg_df = agg_df.groupby(agg_cols).agg({'engagement_index':'mean','pct_access':'mean'}).reset_index()\nagg_df = agg_df.rename(columns={'engagement_index':'Mean_engagement_index', 'pct_access':'Mean_pct_access'})\nagg_df.fillna(0, inplace=True)\nagg_df['Mean_engagement_index'] = np.round(agg_df['Mean_engagement_index'], 2)\nagg_df['Mean_pct_access'] = np.round(agg_df['Mean_pct_access'], 2)\n\nengagement_df = pd.merge(engagement_df, agg_df, on=agg_cols, how='left', sort=False)\nengagement_df['engagement_index'].fillna(engagement_df['Mean_engagement_index'], inplace=True)\nengagement_df['pct_access'].fillna(engagement_df['Mean_pct_access'], inplace=True)\nengagement_df.drop(['Mean_engagement_index','Mean_pct_access'], axis=1, inplace=True)\n\ndel agg_df\ngc.collect()\n\nengagement_df['quarter'] = engagement_df['time'].dt.quarter\nengagement_df['month'] = engagement_df['time'].dt.month\nengagement_df['day_week'] = pd.DatetimeIndex(engagement_df['time']).dayofweek\nengagement_df['day_weekend'] = np.where(engagement_df['day_week'].isin([5,6]),1,0)\nengagement_df.head()","1b0e937b":"tmp = engagement_df\\\n        .groupby(['quarter','time'])\\\n        .agg({'engagement_index':'mean', 'pct_access':'mean'})\\\n        .reset_index()\\\n        .copy()\n\nfig, ax = plt.subplots(1, 2, figsize=(20, 6))\n\nax[0].plot(tmp[tmp['quarter']==1]['time'], tmp[tmp['quarter']==1]['pct_access'], color='b', label='QTR-1')\nax[0].plot(tmp[tmp['quarter']==2]['time'], tmp[tmp['quarter']==2]['pct_access'], color='r', label='QTR-2')\nax[0].plot(tmp[tmp['quarter']==3]['time'], tmp[tmp['quarter']==3]['pct_access'], color='g', label='QTR-3')\nax[0].plot(tmp[tmp['quarter']==4]['time'], tmp[tmp['quarter']==4]['pct_access'], color='m', label='QTR-4')\nax[0].axvspan('2020-03-01', '2020-05-31', color='g', alpha=0.15, label='Spring')\nax[0].axvspan('2020-06-01', '2020-08-31', color='r', alpha=0.15, label='Summer')\nax[0].axvspan('2020-09-01', '2020-11-30', color='y', alpha=0.15, label='Autumn')\nax[0].set_title(\"Digital Connectivity\", pad=15)\nax[0].set_xlabel(\"Date Range\", labelpad=15)\nax[0].set_ylabel(\"Percentage Access\", labelpad=15)\n\nax[1].plot(tmp[tmp['quarter']==1]['time'], tmp[tmp['quarter']==1]['engagement_index'], color='b', label='QTR-1')\nax[1].plot(tmp[tmp['quarter']==2]['time'], tmp[tmp['quarter']==2]['engagement_index'], color='r', label='QTR-2')\nax[1].plot(tmp[tmp['quarter']==3]['time'], tmp[tmp['quarter']==3]['engagement_index'], color='g', label='QTR-3')\nax[1].plot(tmp[tmp['quarter']==4]['time'], tmp[tmp['quarter']==4]['engagement_index'], color='m', label='QTR-4')\nax[1].axvspan('2020-03-01', '2020-05-31', color='g', alpha=0.15, label='Spring')\nax[1].axvspan('2020-06-01', '2020-08-31', color='r', alpha=0.15, label='Summer')\nax[1].axvspan('2020-09-01', '2020-11-30', color='y', alpha=0.15, label='Autumn')\nax[1].set_title(\"Digital Engagement\", pad=15)\nax[1].set_xlabel(\"Date Range\", labelpad=15)\nax[1].set_ylabel(\"Engagement Index\", labelpad=15)\n\nfig.tight_layout()\nplt.suptitle(\"Time-series trend analysis for 2020\",\n             y=1.07, fontweight='bold')\nplt.legend(loc=(1.02, 0));","7cff36d8":"tmp = engagement_df\\\n        .groupby(['month'])\\\n        .agg({'engagement_index':'mean', 'pct_access':'mean'})\\\n        .reset_index()\\\n        .copy()\n\ntmp['engagement_index_mtd'] = tmp['engagement_index'] - tmp['engagement_index'].shift(1)\ntmp['pct_access_mtd'] = tmp['pct_access'] - tmp['pct_access'].shift(1)\ntmp.fillna(0, inplace=True)\ntmp['month'] = tmp['month'].map({\n    1: 'Jan',\n    2: 'Feb',\n    3: 'Mar',\n    4: 'Apr',\n    5: 'May',\n    6: 'Jun',\n    7: 'Jul',\n    8: 'Aug',\n    9: 'Sep',\n    10: 'Oct',\n    11: 'Nov',\n    12: 'Dec'\n})\n\nfig, ax = plt.subplots(1, 2, figsize=(20, 6))\n\nax[0].plot(tmp['month'], tmp['pct_access'], color='b', marker='*')\nax[0].axvspan('Mar', 'May', color='g', alpha=0.15, label='Spring')\nax[0].axvspan('Jun', 'Aug', color='r', alpha=0.15, label='Summer')\nax[0].axvspan('Sep', 'Nov', color='y', alpha=0.15, label='Autumn')\nax[0].set_title(\"Digital Connectivity\", pad=15)\nax[0].set_xlabel(\"Month\", labelpad=15)\nax[0].set_ylabel(\"Percentage Access\", labelpad=15)\n\nax[1].plot(tmp['month'], tmp['engagement_index'], color='g', marker='*')\nax[1].axvspan('Mar', 'May', color='g', alpha=0.15, label='Spring')\nax[1].axvspan('Jun', 'Aug', color='r', alpha=0.15, label='Summer')\nax[1].axvspan('Sep', 'Nov', color='y', alpha=0.15, label='Autumn')\nax[1].set_title(\"Digital Engagement\", pad=15)\nax[1].set_xlabel(\"Month\", labelpad=15)\nax[1].set_ylabel(\"Engagement Index\", labelpad=15)\n\nfig.tight_layout()\nplt.suptitle(\"Month-on-month trend analysis\", \n             y=1.07, fontweight='bold')\nplt.legend(loc=(1.02, 0));","df92c713":"tmp = engagement_df\\\n        .groupby(['quarter'])\\\n        .agg({'engagement_index':'mean', 'pct_access':'mean'})\\\n        .reset_index()\\\n        .copy()\n\ntmp['engagement_index_mtd'] = tmp['engagement_index'] - tmp['engagement_index'].shift(1)\ntmp['pct_access_mtd'] = tmp['pct_access'] - tmp['pct_access'].shift(1)\ntmp.fillna(0, inplace=True)\ntmp['quarter'] = tmp['quarter'].map({1:'QTR-1',2:'QTR-2',3:'QTR-3',4:'QTR-4'})\n\nfig, ax = plt.subplots(1, 2, figsize=(20, 6))\n\nax[0].plot(tmp['quarter'], tmp['pct_access'], color='b', marker='*')\nax[0].set_title(\"Digital Connectivity\", pad=15)\nax[0].set_xlabel(\"quarter\", labelpad=15)\nax[0].set_ylabel(\"Percentage Access\", labelpad=15)\n\nax[1].plot(tmp['quarter'], tmp['engagement_index'], color='g', marker='*')\nax[1].set_title(\"Digital Engagement\", pad=15)\nax[1].set_xlabel(\"quarter\", labelpad=15)\nax[1].set_ylabel(\"Engagement Index\", labelpad=15)\n\nfig.tight_layout()\nplt.suptitle(\"Quarter-on-Quarter trend analysis\", \n             y=1.07, fontweight='bold');","37b91ab9":"tmp = engagement_df\\\n        .groupby(['day_week'])\\\n        .agg({'engagement_index':'mean', 'pct_access':'mean'})\\\n        .reset_index()\\\n        .copy()\n\ntmp['day_week'] = tmp['day_week'].map({0:'Mon',1:'Tues',2:'Wed',3:'Thurs',4:'Fri',5:'Sat',6:'Sun'})\n\nfig, ax = plt.subplots(1, 2, figsize=(20, 6))\n\nsns.barplot(x='day_week', y='pct_access', data=tmp, ax=ax[0])\nax[0].set_title(\"Digital Connectivity\", pad=15)\nax[0].set_xlabel(\"Day of Week\", labelpad=15)\nax[0].set_ylabel(\"Percentage Access\", labelpad=15)\n\nsns.barplot(x='day_week', y='engagement_index', data=tmp, ax=ax[1])\nax[1].set_title(\"Digital Engagement\", pad=15)\nax[1].set_xlabel(\"Day of Week\", labelpad=15)\nax[1].set_ylabel(\"Engagement Index\", labelpad=15)\n\nfig.tight_layout()\nplt.suptitle(\"Weekly trend analysis\", \n             y=1.07, fontweight='bold');","7b24b768":"df = pd.merge(\n    engagement_df,\n    product_info_df,\n    how='left',\n    left_on='lp_id', \n    right_on='LP ID'\n)\n\ndf['Essential Function Primary Category'].fillna('UNK', inplace=True)\ndf.drop(['lp_id'], axis=1, inplace=True)\ndf.head()","32df75a2":"tmp = df.groupby(['Provider\/Company Name','Product Name'])\\\n        .agg({'engagement_index':'mean', 'pct_access':'mean'})\\\n        .reset_index()\\\n        .copy()\n\n\nfig = plt.figure(figsize=(20, 16), constrained_layout=True)\nfig.suptitle('Different products performances in 2020',\n             y=1.07, fontweight='bold')\n\nsubfigs = fig.subfigures(nrows=2, ncols=1, wspace=0.15, hspace=0.15)\nfor row, subfig in enumerate(subfigs):\n    if row==0:\n        subfig.suptitle(\"Most popular products\", y=1.07, fontweight='bold')\n\n        ax = subfig.subplots(nrows=1, ncols=2)\n        sns.barplot(x='pct_access', y='Product Name', ax=ax[0], \n                    data=tmp.sort_values(by='pct_access', ascending=False).head(10))\n        ax[0].set_title(\"Top-10 products w.r.t. Digital Connectivity\", pad=15)\n        ax[0].set_xlabel(\"Percentage Access\", labelpad=15)\n\n        sns.barplot(x='engagement_index', y='Product Name', ax=ax[1], \n                    data=tmp.sort_values(by='engagement_index', ascending=False).head(10))\n        ax[1].set_title(\"Top-10 products w.r.t. Digital Engagement\", pad=15)\n        ax[1].set_xlabel(\"Engagement Index\", labelpad=15)\n        ax[1].set(ylabel=None)\n    \n    else:\n        subfig.suptitle(\"Least popular products\", y=1.07, fontweight='bold')\n\n        ax = subfig.subplots(nrows=1, ncols=2)\n        sns.barplot(x='pct_access', y='Product Name', ax=ax[0], \n                    data=tmp.sort_values(by='pct_access', ascending=False).tail(10))\n        ax[0].set_title(\"Bottom-10 products w.r.t. Digital Connectivity\", pad=15)\n        ax[0].set_xlabel(\"Percentage Access\", labelpad=15)\n\n        sns.barplot(x='engagement_index', y='Product Name', ax=ax[1], \n                    data=tmp.sort_values(by='engagement_index', ascending=False).tail(10))\n        ax[1].set_title(\"Bottom-10 products w.r.t. Digital Engagement\", pad=15)\n        ax[1].set_xlabel(\"Engagement Index\", labelpad=15)\n        ax[1].set(ylabel=None)","c69f2666":"fig, ax = plt.subplots(1, 2, figsize=(20, 12))\n\nsns.barplot(x='pct_access', y='Product Name', ax=ax[0], \n            data=tmp[tmp['Provider\/Company Name']=='Google LLC'].sort_values(by='pct_access', ascending=False))\nax[0].set_title(\"Digital Connectivity\", pad=15)\nax[0].set_xlabel(\"Percentage Access\", labelpad=15)\n\nsns.barplot(x='engagement_index', y='Product Name', ax=ax[1], \n            data=tmp[tmp['Provider\/Company Name']=='Google LLC'].sort_values(by='engagement_index', ascending=False))\nax[1].set_title(\"Digital Engagement\", pad=15)\nax[1].set_xlabel(\"Engagement Index\", labelpad=15)\nax[1].set(ylabel=None)\n\nfig.tight_layout()\nplt.suptitle(\"Google products performance\", \n             y=1.05, fontweight='bold');","bdd38dbc":"tmp = df.groupby(['Provider\/Company Name'])\\\n        .agg({'engagement_index':'mean', 'pct_access':'mean'})\\\n        .reset_index()\\\n        .copy()\n\n\nfig = plt.figure(figsize=(20, 16), constrained_layout=True)\nfig.suptitle('Different providers\/companies performances in 2020',\n             y=1.07, fontweight='bold')\n\nsubfigs = fig.subfigures(nrows=2, ncols=1, wspace=0.15, hspace=0.15)\nfor row, subfig in enumerate(subfigs):\n    if row==0:\n        subfig.suptitle(\"Most popular provider\/company\", y=1.07, fontweight='bold')\n\n        ax = subfig.subplots(nrows=1, ncols=2)\n        sns.barplot(x='pct_access', y='Provider\/Company Name', ax=ax[0], \n                    data=tmp.sort_values(by='pct_access', ascending=False).head(10))\n        ax[0].set_title(\"Top-10 providers\/companies w.r.t. Digital Connectivity\", pad=15)\n        ax[0].set_xlabel(\"Percentage Access\", labelpad=15)\n\n        sns.barplot(x='engagement_index', y='Provider\/Company Name', ax=ax[1], \n                    data=tmp.sort_values(by='engagement_index', ascending=False).head(10))\n        ax[1].set_title(\"Top-10 providers\/companies w.r.t. Digital Engagement\", pad=15)\n        ax[1].set_xlabel(\"Engagement Index\", labelpad=15)\n        ax[1].set(ylabel=None)\n    \n    else:\n        subfig.suptitle(\"Least popular provider\/company\", y=1.07, fontweight='bold')\n\n        ax = subfig.subplots(nrows=1, ncols=2)\n        sns.barplot(x='pct_access', y='Provider\/Company Name', ax=ax[0], \n                    data=tmp.sort_values(by='pct_access', ascending=False).tail(10))\n        ax[0].set_title(\"Bottom-10 providers\/companies w.r.t. Digital Connectivity\", pad=15)\n        ax[0].set_xlabel(\"Percentage Access\", labelpad=15)\n\n        sns.barplot(x='engagement_index', y='Provider\/Company Name', ax=ax[1], \n                    data=tmp.sort_values(by='engagement_index', ascending=False).tail(10))\n        ax[1].set_title(\"Bottom-10 providers\/companies w.r.t. Digital Engagement\", pad=15)\n        ax[1].set_xlabel(\"Engagement Index\", labelpad=15)\n        ax[1].set(ylabel=None)","4ad3f046":"tmp1 = df[df['Corporate']==1].groupby(['month']).agg({'engagement_index':'mean', 'pct_access':'mean'}).reset_index().copy()\ntmp2 = df[df['Higher Ed']==1].groupby(['month']).agg({'engagement_index':'mean', 'pct_access':'mean'}).reset_index().copy()\ntmp3 = df[df['PreK-12']==1].groupby(['month']).agg({'engagement_index':'mean', 'pct_access':'mean'}).reset_index().copy()\n\nmonth_dict = {\n    1: 'Jan',\n    2: 'Feb',\n    3: 'Mar',\n    4: 'Apr',\n    5: 'May',\n    6: 'Jun',\n    7: 'Jul',\n    8: 'Aug',\n    9: 'Sep',\n    10: 'Oct',\n    11: 'Nov',\n    12: 'Dec'\n}\n\ntmp1['month'] = tmp1['month'].map(month_dict)\ntmp2['month'] = tmp2['month'].map(month_dict)\ntmp3['month'] = tmp3['month'].map(month_dict)\n\nfig, ax = plt.subplots(1, 2, figsize=(20, 6))\n\nax[0].plot(tmp1['month'], tmp1['pct_access'], color='b', marker='*', label='Corporate')\nax[0].plot(tmp2['month'], tmp2['pct_access'], color='r', marker='*', label='Higher Ed')\nax[0].plot(tmp3['month'], tmp3['pct_access'], color='g', marker='*', label='PreK-12')\nax[0].set_title(\"Digital Connectivity\", pad=15)\nax[0].set_xlabel(\"Month\", labelpad=15)\nax[0].set_ylabel(\"Percentage Access\", labelpad=15)\n\nax[1].plot(tmp1['month'], tmp1['engagement_index'], color='b', marker='*', label='Corporate')\nax[1].plot(tmp2['month'], tmp2['engagement_index'], color='r', marker='*', label='Higher Ed')\nax[1].plot(tmp3['month'], tmp3['engagement_index'], color='g', marker='*', label='PreK-12')\nax[1].set_title(\"Digital Engagement\", pad=15)\nax[1].set_xlabel(\"Month\", labelpad=15)\nax[1].set_ylabel(\"Engagement Index\", labelpad=15)\n\nfig.tight_layout()\nplt.suptitle(\"Trend analysis across different Sector(s)\", \n             y=1.07, fontweight='bold')\nplt.legend(loc=(1.02, 0));","b7f51a06":"tmp1 = df[df['Essential Function Primary Category'].str.contains('LC')]\\\n        .groupby(['month'])\\\n        .agg({'engagement_index':'mean', 'pct_access':'mean'})\\\n        .reset_index()\\\n        .copy()\n\ntmp2 = df[df['Essential Function Primary Category'].str.contains('SDO')]\\\n        .groupby(['month'])\\\n        .agg({'engagement_index':'mean', 'pct_access':'mean'})\\\n        .reset_index()\\\n        .copy()\n\ntmp3 = df[df['Essential Function Primary Category'].str.contains('CM')]\\\n        .groupby(['month'])\\\n        .agg({'engagement_index':'mean', 'pct_access':'mean'})\\\n        .reset_index()\\\n        .copy()\n\nmonth_dict = {\n    1: 'Jan',\n    2: 'Feb',\n    3: 'Mar',\n    4: 'Apr',\n    5: 'May',\n    6: 'Jun',\n    7: 'Jul',\n    8: 'Aug',\n    9: 'Sep',\n    10: 'Oct',\n    11: 'Nov',\n    12: 'Dec'\n}\n\ntmp1['month'] = tmp1['month'].map(month_dict)\ntmp2['month'] = tmp2['month'].map(month_dict)\ntmp3['month'] = tmp3['month'].map(month_dict)\n\nfig, ax = plt.subplots(1, 2, figsize=(20, 6))\n\nax[0].plot(tmp1['month'], tmp1['pct_access'], color='b', marker='*', label='LC (Learning & Curriculum)')\nax[0].plot(tmp2['month'], tmp2['pct_access'], color='r', marker='*', label='SDO (School & District Operations)')\nax[0].plot(tmp3['month'], tmp3['pct_access'], color='g', marker='*', label='CM (Classroom Management)')\nax[0].set_title(\"Digital Connectivity\", pad=15)\nax[0].set_xlabel(\"Month\", labelpad=15)\nax[0].set_ylabel(\"Percentage Access\", labelpad=15)\n\nax[1].plot(tmp1['month'], tmp1['engagement_index'], color='b', marker='*', label='LC (Learning & Curriculum)')\nax[1].plot(tmp2['month'], tmp2['engagement_index'], color='r', marker='*', label='SDO (School & District Operations)')\nax[1].plot(tmp3['month'], tmp3['engagement_index'], color='g', marker='*', label='CM (Classroom Management)')\nax[1].set_title(\"Digital Engagement\", pad=15)\nax[1].set_xlabel(\"Month\", labelpad=15)\nax[1].set_ylabel(\"Percentage Access\", labelpad=15)\n\nfig.tight_layout()\nplt.suptitle(\"Trend analysis across different Essential Function Primary Categories\", \n             y=1.07, fontweight='bold')\nplt.legend(loc=(1.02, 0));","ae2b4097":"tmp1 = df[~((df['Essential Function Sub Category(1)'].isnull())|\n            (df['Essential Function Sub Category(1)']=='None'))]\\\n        .groupby(['Essential Function Sub Category(1)'])\\\n        .agg({'engagement_index':'mean', 'pct_access':'mean'})\\\n        .reset_index()\\\n        .rename(columns={'Essential Function Sub Category(1)':'Essential Function Sub Category'})\\\n        .copy()\n\ntmp2 = df[~((df['Essential Function Sub Category(2)'].isnull())|\n            (df['Essential Function Sub Category(2)']=='None'))]\\\n        .groupby(['Essential Function Sub Category(2)'])\\\n        .agg({'engagement_index':'mean', 'pct_access':'mean'})\\\n        .reset_index()\\\n        .rename(columns={'Essential Function Sub Category(2)':'Essential Function Sub Category'})\\\n        .copy()\n\ntmp = pd.concat([tmp1, tmp2], ignore_index=True)\ndel tmp1, tmp2\ngc.collect()\n\nfig = plt.figure(figsize=(20, 16), constrained_layout=True)\nfig.suptitle('Trend analysis across different Essential Function Sub-categories',\n             y=1.07, fontweight='bold')\n\nsubfigs = fig.subfigures(nrows=2, ncols=1, wspace=0.15, hspace=0.15)\nfor row, subfig in enumerate(subfigs):\n    if row==0:\n        subfig.suptitle(\"Best performing sub-categories\", y=1.07, fontweight='bold')\n\n        ax = subfig.subplots(nrows=1, ncols=2)\n        sns.barplot(x='pct_access', y='Essential Function Sub Category', ax=ax[0], \n                    data=tmp.sort_values(by='pct_access', ascending=False).head(10))\n        ax[0].set_title(\"Top-10 sub-categories w.r.t. Digital Connectivity\", pad=15)\n        ax[0].set_xlabel(\"Percentage Access\", labelpad=15)\n\n        sns.barplot(x='engagement_index', y='Essential Function Sub Category', ax=ax[1], \n                    data=tmp.sort_values(by='engagement_index', ascending=False).head(10))\n        ax[1].set_title(\"Top-10 sub-categories w.r.t. Digital Engagement\", pad=15)\n        ax[1].set_xlabel(\"Engagement Index\", labelpad=15)\n        ax[1].set(ylabel=None)\n    \n    else:\n        subfig.suptitle(\"Worst performing sub-categories\", y=1.07, fontweight='bold')\n\n        ax = subfig.subplots(nrows=1, ncols=2)\n        sns.barplot(x='pct_access', y='Essential Function Sub Category', ax=ax[0], \n                    data=tmp.sort_values(by='pct_access', ascending=False).tail(10))\n        ax[0].set_title(\"Bottom-10 sub-categories w.r.t. Digital Connectivity\", pad=15)\n        ax[0].set_xlabel(\"Percentage Access\", labelpad=15)\n\n        sns.barplot(x='engagement_index', y='Essential Function Sub Category', ax=ax[1], \n                    data=tmp.sort_values(by='engagement_index', ascending=False).tail(10))\n        ax[1].set_title(\"Bottom-10 sub-categories w.r.t. Digital Engagement\", pad=15)\n        ax[1].set_xlabel(\"Engagement Index\", labelpad=15)\n        ax[1].set(ylabel=None)","cfcb290d":"tmp1 = df[df['Essential Function Primary Category'].str.contains('LC')]\\\n        .groupby(['Essential Function Sub Category(1)'])\\\n        .agg({'engagement_index':'mean', 'pct_access':'mean'})\\\n        .reset_index()\\\n        .rename(columns={'Essential Function Sub Category(1)':'Essential Function Sub Category'})\\\n        .copy()\n\ntmp1 = tmp1[~((tmp1['Essential Function Sub Category'].isnull())|\n              (tmp1['Essential Function Sub Category']=='None'))].copy()\ntmp1['Essential Function Primary Category'] = 'LC'\n\n\ntmp2 = df[df['Essential Function Primary Category'].str.contains('LC')]\\\n        .groupby(['Essential Function Sub Category(2)'])\\\n        .agg({'engagement_index':'mean', 'pct_access':'mean'})\\\n        .reset_index()\\\n        .rename(columns={'Essential Function Sub Category(2)':'Essential Function Sub Category'})\\\n        .copy()\n\ntmp2 = tmp2[~((tmp2['Essential Function Sub Category'].isnull())|\n              (tmp2['Essential Function Sub Category']=='None'))].copy()\ntmp2['Essential Function Primary Category'] = 'LC'\n\n\ntmp3 = df[df['Essential Function Primary Category'].str.contains('SDO')]\\\n        .groupby(['Essential Function Sub Category(1)'])\\\n        .agg({'engagement_index':'mean', 'pct_access':'mean'})\\\n        .reset_index()\\\n        .rename(columns={'Essential Function Sub Category(1)':'Essential Function Sub Category'})\\\n        .copy()\ntmp3 = tmp3[~((tmp3['Essential Function Sub Category'].isnull())|\n              (tmp3['Essential Function Sub Category']=='None'))].copy()\ntmp3['Essential Function Primary Category'] = 'SDO'\n\n\ntmp4 = df[df['Essential Function Primary Category'].str.contains('SDO')]\\\n        .groupby(['Essential Function Sub Category(2)'])\\\n        .agg({'engagement_index':'mean', 'pct_access':'mean'})\\\n        .reset_index()\\\n        .rename(columns={'Essential Function Sub Category(2)':'Essential Function Sub Category'})\\\n        .copy()\ntmp4 = tmp4[~((tmp4['Essential Function Sub Category'].isnull())|\n              (tmp4['Essential Function Sub Category']=='None'))].copy()\ntmp4['Essential Function Primary Category'] = 'SDO'\n\n\ntmp5 = df[df['Essential Function Primary Category'].str.contains('CM')]\\\n        .groupby(['Essential Function Sub Category(1)'])\\\n        .agg({'engagement_index':'mean', 'pct_access':'mean'})\\\n        .reset_index()\\\n        .rename(columns={'Essential Function Sub Category(1)':'Essential Function Sub Category'})\\\n        .copy()\ntmp5 = tmp5[~((tmp5['Essential Function Sub Category'].isnull())|\n              (tmp5['Essential Function Sub Category']=='None'))].copy()\ntmp5['Essential Function Primary Category'] = 'CM'\n\n\ntmp6 = df[df['Essential Function Primary Category'].str.contains('CM')]\\\n        .groupby(['Essential Function Sub Category(2)'])\\\n        .agg({'engagement_index':'mean', 'pct_access':'mean'})\\\n        .reset_index()\\\n        .rename(columns={'Essential Function Sub Category(2)':'Essential Function Sub Category'})\\\n        .copy()\ntmp6 = tmp6[~((tmp6['Essential Function Sub Category'].isnull())|\n              (tmp6['Essential Function Sub Category']=='None'))].copy()\ntmp6['Essential Function Primary Category'] = 'CM'\n\n\ntmp = pd.concat([tmp1, tmp2, tmp3, tmp4, tmp5, tmp6], ignore_index=True)\ndel tmp1, tmp2, tmp3, tmp4, tmp5, tmp6\ngc.collect()\n\n\nfig = plt.figure(figsize=(20, 20), constrained_layout=True)\nfig.suptitle('Trend analysis across different Essential Function categories and sub-categories',\n             y=1.06, fontweight='bold')\n\nsubfigs = fig.subfigures(nrows=3, ncols=1, wspace=0.15, hspace=0.15)\nfor row, subfig in enumerate(subfigs):\n    if row==0:\n        title='LC (Learning & Curriculum)'\n        cat_filter='LC'\n    elif row==1:\n        title='SDO (School & District Operations)'\n        cat_filter='SDO'\n    elif row==2:\n        title='CM (Classroom Management)'\n        cat_filter='CM'\n    \n    subfig.suptitle(title, y=1.09, fontweight='bold')\n\n    ax = subfig.subplots(nrows=1, ncols=2)\n    sns.barplot(x='pct_access', y='Essential Function Sub Category', ax=ax[0], \n                data=tmp[tmp['Essential Function Primary Category']==cat_filter]\\\n                        .sort_values(by='pct_access', ascending=False))\n    ax[0].set_title(\"Digital Connectivity\", pad=15)\n    ax[0].set_xlabel(\"Percentage Access\", labelpad=15)\n\n    sns.barplot(x='engagement_index', y='Essential Function Sub Category', ax=ax[1], \n                data=tmp[tmp['Essential Function Primary Category']==cat_filter]\\\n                        .sort_values(by='engagement_index', ascending=False))\n    ax[1].set_title(\"Digital Engagement\", pad=15)\n    ax[1].set_xlabel(\"Engagement Index\", labelpad=15)\n    ax[1].set(ylabel=None)","46835b35":"df = pd.merge(\n    engagement_df,\n    district_info_df,\n    how='inner',\n    on='district_id'\n)\n\ndf.fillna('UNK', inplace=True)\ndf.head()","dd60f8e5":"tmp = df.groupby(['district_id'])\\\n        .agg({'engagement_index':'mean', 'pct_access':'mean'})\\\n        .reset_index()\\\n        .copy()\n\nfig = plt.figure(figsize=(20, 12), constrained_layout=True)\nfig.suptitle('Trend analysis across different districts',\n             y=1.07, fontweight='bold')\n\nsubfigs = fig.subfigures(nrows=2, ncols=1, wspace=0.15, hspace=0.15)\nfor row, subfig in enumerate(subfigs):\n    if row==0:\n        subfig.suptitle(\"Best performing districts\", y=1.07, fontweight='bold')\n\n        ax = subfig.subplots(nrows=1, ncols=2)\n        sns.barplot(y='pct_access', x='district_id', ax=ax[0], data=tmp, \n                    order=tmp.sort_values(by='pct_access', ascending=False).head(10)['district_id'])\n        ax[0].set_title(\"Top-10 districts w.r.t. Digital Connectivity\", pad=15)\n        ax[0].set_xlabel(\"Percentage Access\", labelpad=15)\n\n        sns.barplot(y='engagement_index', x='district_id', ax=ax[1], data=tmp, \n                    order=tmp.sort_values(by='engagement_index', ascending=False).head(10)['district_id'])\n        ax[1].set_title(\"Top-10 districts w.r.t. Digital Engagement\", pad=15)\n        ax[1].set_xlabel(\"Engagement Index\", labelpad=15)\n        ax[1].set(ylabel=None)\n    \n    else:\n        subfig.suptitle(\"Worst performing districts\", y=1.07, fontweight='bold')\n\n        ax = subfig.subplots(nrows=1, ncols=2)\n        sns.barplot(y='pct_access', x='district_id', ax=ax[0], data=tmp, \n                    order=tmp.sort_values(by='pct_access', ascending=False).tail(10)['district_id'])\n        ax[0].set_title(\"Bottom-10 districts w.r.t. Digital Connectivity\", pad=15)\n        ax[0].set_xlabel(\"Percentage Access\", labelpad=15)\n\n        sns.barplot(y='engagement_index', x='district_id', ax=ax[1], data=tmp, \n                    order=tmp.sort_values(by='engagement_index', ascending=False).tail(10)['district_id'])\n        ax[1].set_title(\"Bottom-10 districts w.r.t. Digital Engagement\", pad=15)\n        ax[1].set_xlabel(\"Engagement Index\", labelpad=15)\n        ax[1].set(ylabel=None)","cab55c3c":"tmp = df.groupby(['state'])\\\n        .agg({'engagement_index':'mean', 'pct_access':'mean'})\\\n        .reset_index()\\\n        .copy()\n\nfig, ax = plt.subplots(1, 2, figsize=(20, 7))\n\nsns.barplot(x='pct_access', y='state', ax=ax[0], data=tmp, \n            order=tmp.sort_values(by='pct_access', ascending=False)['state'])\nax[0].set_title(\"Digital Connectivity\", pad=15)\nax[0].set_xlabel(\"Percentage Access\", labelpad=15)\nax[0].set_ylabel(\"State\", labelpad=15)\n\nsns.barplot(x='engagement_index', y='state', ax=ax[1], data=tmp,\n            order=tmp.sort_values(by='engagement_index', ascending=False)['state'])\nax[1].set_title(\"Digital Engagement\", pad=15)\nax[1].set_xlabel(\"Engagement Index\", labelpad=15)\nax[1].set(ylabel=None)\n\nfig.tight_layout()\nplt.suptitle(\"Trend analysis across different states\", \n             y=1.07, fontweight='bold');","4f3ac5ae":"tmp = df[df['locale']!='UNK']\\\n        .groupby(['locale'])\\\n        .agg({'engagement_index':'mean', 'pct_access':'mean'})\\\n        .reset_index()\\\n        .copy()\n\nfig, ax = plt.subplots(1, 2, figsize=(20, 5))\n\nsns.barplot(x='pct_access', y='locale', ax=ax[0], data=tmp, \n            order=tmp.sort_values(by='pct_access', ascending=False)['locale'])\nax[0].set_title(\"Digital Connectivity\", pad=15)\nax[0].set_xlabel(\"Percentage Access\", labelpad=15)\nax[0].set_ylabel(\"Locale\", labelpad=15)\n\nsns.barplot(x='engagement_index', y='locale', ax=ax[1], data=tmp,\n            order=tmp.sort_values(by='engagement_index', ascending=False)['locale'])\nax[1].set_title(\"Digital Engagement\", pad=15)\nax[1].set_xlabel(\"Engagement Index\", labelpad=15)\nax[1].set(ylabel=None)\n\nfig.tight_layout()\nplt.suptitle(\"Trend analysis across different locales\", \n             y=1.07, fontweight='bold');","a58a80d7":"tmp = df[df['pct_black\/hispanic']!='UNK']\\\n        .groupby(['pct_black\/hispanic'])\\\n        .agg({'engagement_index':'mean', 'pct_access':'mean'})\\\n        .reset_index()\\\n        .copy()\n\ntmp['pct_black\/hispanic'] = tmp['pct_black\/hispanic'].map({\n    '[0, 0.2[': 'Very Low (0-20%)', \n    '[0.2, 0.4[': 'Low (20-40%)', \n    '[0.4, 0.6[': 'Medium (40-60%)', \n    '[0.6, 0.8[': 'High (60-80%)', \n    '[0.8, 1[': 'Very High (80-100%)'\n})\n\nfig, ax = plt.subplots(1, 2, figsize=(20, 5))\n\nsns.barplot(x='pct_access', y='pct_black\/hispanic', ax=ax[0], data=tmp)\nax[0].set_title(\"Digital Connectivity\", pad=15)\nax[0].set_xlabel(\"Percentage Access\", labelpad=15)\nax[0].set_ylabel(\"Percentage of Black or Hispanic students\", labelpad=15)\n\nsns.barplot(x='engagement_index', y='pct_black\/hispanic', ax=ax[1], data=tmp)\nax[1].set_title(\"Digital Engagement\", pad=15)\nax[1].set_xlabel(\"Engagement Index\", labelpad=15)\nax[1].set(ylabel=None)\n\nfig.tight_layout()\nplt.suptitle(\"Trend analysis across different racial demographics\", \n             y=1.07, fontweight='bold');","fc7c61ac":"tmp = df[df['pct_black\/hispanic']!='UNK']\\\n        .groupby(['locale','pct_black\/hispanic'])\\\n        .agg({'engagement_index':'mean', 'pct_access':'mean'})\\\n        .reset_index()\\\n        .copy()\n\ntmp['pct_black\/hispanic'] = tmp['pct_black\/hispanic'].map({\n    '[0, 0.2[': 'Very Low (0-20%)', \n    '[0.2, 0.4[': 'Low (20-40%)', \n    '[0.4, 0.6[': 'Medium (40-60%)', \n    '[0.6, 0.8[': 'High (60-80%)', \n    '[0.8, 1[': 'Very High (80-100%)'\n})\n\n\nfig = plt.figure(figsize=(16, 18), constrained_layout=True)\nfig.suptitle('Trend analysis w.r.t. Black\/Hispanic population density (in different locales)',\n             y=1.06, fontweight='bold')\n\nsubfigs = fig.subfigures(nrows=4, ncols=1, wspace=0.15, hspace=0.15)\nfor row, subfig in enumerate(subfigs):\n    if row==0:\n        title='Rural areas'\n        cat_filter='Rural'\n        normalize=None\n        expld = (0.1, 0, 0)\n    elif row==1:\n        title='Towns'\n        cat_filter='Town'\n        normalize=True\n        expld = (0.1, 0)\n    elif row==2:\n        title='Suburbs'\n        cat_filter='Suburb'\n        normalize=None\n        expld = (0.05, 0.05, 0.05, 0.05, 0.05)\n    elif row==3:\n        title='Cities'\n        cat_filter='City'\n        normalize=None\n        expld = (0, 0, 0, 0, 0.1)\n    \n    subfig.suptitle(title, y=1.09, fontweight='bold')\n\n    ax = subfig.subplots(nrows=1, ncols=2)\n    ax[0].pie(tmp[tmp['locale']==cat_filter]['pct_access'], \n              labels=tmp[tmp['locale']==cat_filter]['pct_black\/hispanic'], \n              labeldistance=1.1, wedgeprops=dict(width=0.5), shadow=True, normalize=normalize,\n              autopct='%1.1f%%', pctdistance=0.75, startangle=-40, explode=expld)\n    ax[0].set_title(\"Digital Connectivity\", pad=15)\n\n    ax[1].pie(tmp[tmp['locale']==cat_filter]['engagement_index'], \n              labels=tmp[tmp['locale']==cat_filter]['pct_black\/hispanic'], \n              labeldistance=1.1, wedgeprops=dict(width=0.5), shadow=True, \n              autopct='%1.1f%%', pctdistance=0.75, startangle=-40, explode=expld)\n    ax[1].set_title(\"Digital Engagement\", pad=15)","097b5b48":"tmp = df[df['pct_free\/reduced']!='UNK']\\\n        .groupby(['pct_free\/reduced'])\\\n        .agg({'engagement_index':'mean', 'pct_access':'mean'})\\\n        .reset_index()\\\n        .copy()\n\ntmp['pct_free\/reduced'] = tmp['pct_free\/reduced'].map({\n    '[0, 0.2[': 'Very Low (0-20%)', \n    '[0.2, 0.4[': 'Low (20-40%)', \n    '[0.4, 0.6[': 'Medium (40-60%)', \n    '[0.6, 0.8[': 'High (60-80%)', \n    '[0.8, 1[': 'Very High (80-100%)'\n})\n\nfig, ax = plt.subplots(1, 2, figsize=(20, 6))\n\nsns.barplot(x='pct_access', y='pct_free\/reduced', ax=ax[0], data=tmp)\nax[0].set_title(\"Digital Connectivity\", pad=15)\nax[0].set_xlabel(\"Percentage Access\", labelpad=15)\nax[0].set_ylabel(\"Students eligible for free\/reduced-price lunch\", labelpad=15)\n\nsns.barplot(x='engagement_index', y='pct_free\/reduced', ax=ax[1], data=tmp)\nax[1].set_title(\"Digital Engagement\", pad=15)\nax[1].set_xlabel(\"Engagement Index\", labelpad=15)\nax[1].set(ylabel=None)\n\nfig.tight_layout()\nplt.suptitle(\"Trend analysis across different socio-economic demographics\", \n             y=1.07, fontweight='bold');","fbe64655":"tmp = df[df['pct_free\/reduced']!='UNK']\\\n        .groupby(['locale','pct_free\/reduced'])\\\n        .agg({'engagement_index':'mean', 'pct_access':'mean'})\\\n        .reset_index()\\\n        .copy()\n\ntmp['pct_free\/reduced'] = tmp['pct_free\/reduced'].map({\n    '[0, 0.2[': 'Very Low (0-20%)', \n    '[0.2, 0.4[': 'Low (20-40%)', \n    '[0.4, 0.6[': 'Medium (40-60%)', \n    '[0.6, 0.8[': 'High (60-80%)', \n    '[0.8, 1[': 'Very High (80-100%)'\n})\n\n\nfig = plt.figure(figsize=(16, 18), constrained_layout=True)\nfig.suptitle('Trend analysis w.r.t. socio-economic demographics (in different locales)',\n             y=1.06, fontweight='bold')\n\nsubfigs = fig.subfigures(nrows=4, ncols=1, wspace=0.15, hspace=0.15)\nfor row, subfig in enumerate(subfigs):\n    if row==0:\n        title='Rural areas'\n        cat_filter='Rural'\n        expld = (0, 0.1, 0, 0)\n    elif row==1:\n        title='Towns'\n        cat_filter='Town'\n        expld = (0.1, 0, 0, 0)\n    elif row==2:\n        title='Suburbs'\n        cat_filter='Suburb'\n        expld = (0.05, 0.05, 0.05, 0.05, 0.05)\n    elif row==3:\n        title='Cities'\n        cat_filter='City'\n        expld = (0, 0, 0, 0, 0.1)\n    \n    subfig.suptitle(title, y=1.09, fontweight='bold')\n\n    ax = subfig.subplots(nrows=1, ncols=2)\n    ax[0].pie(tmp[tmp['locale']==cat_filter]['pct_access'], \n              labels=tmp[tmp['locale']==cat_filter]['pct_free\/reduced'], \n              labeldistance=1.1, wedgeprops=dict(width=0.5), shadow=True, \n              autopct='%1.1f%%', pctdistance=0.75, startangle=-40, explode=expld)\n    ax[0].set_title(\"Digital Connectivity\", pad=15)\n\n    ax[1].pie(tmp[tmp['locale']==cat_filter]['engagement_index'], \n              labels=tmp[tmp['locale']==cat_filter]['pct_free\/reduced'], \n              labeldistance=1.1, wedgeprops=dict(width=0.5), shadow=True, \n              autopct='%1.1f%%', pctdistance=0.75, startangle=-40, explode=expld)\n    ax[1].set_title(\"Digital Engagement\", pad=15)","e415d472":"tmp = df[df['county_connections_ratio']!='UNK']\\\n        .groupby(['county_connections_ratio'])\\\n        .agg({'engagement_index':'mean', 'pct_access':'mean'})\\\n        .reset_index()\\\n        .copy()\n\ntmp['county_connections_ratio'] = tmp['county_connections_ratio'].map({\n    '[0.18, 1[': 'High-speed internet in one-direction', \n    '[1, 2[': 'High-speed internet in both-directions'\n})\n\nfig, ax = plt.subplots(1, 2, figsize=(20, 4))\n\nsns.barplot(x='pct_access', y='county_connections_ratio', ax=ax[0], data=tmp)\nax[0].set_title(\"Digital Connectivity\", pad=15)\nax[0].set_xlabel(\"Percentage Access\", labelpad=15)\nax[0].set_ylabel(\"Households ratio with high-speed connections\", labelpad=15)\n\nsns.barplot(x='engagement_index', y='county_connections_ratio', ax=ax[1], data=tmp)\nax[1].set_title(\"Digital Engagement\", pad=15)\nax[1].set_xlabel(\"Engagement Index\", labelpad=15)\nax[1].set(ylabel=None)\n\nfig.tight_layout()\nplt.suptitle(\"Trend analysis across different internet-accessibility demographics\", \n             y=1.07, fontweight='bold');","20d94eed":"tmp = df[df['pp_expenditure_group']!='UNK']\\\n        .groupby(['pp_expenditure_group'])\\\n        .agg({'engagement_index':'mean', 'pct_access':'mean'})\\\n        .reset_index()\\\n        .copy()\n\nfig, ax = plt.subplots(1, 2, figsize=(20, 6))\n\nsns.barplot(x='pct_access', y='pp_expenditure_group', ax=ax[0], data=tmp,\n            order=tmp.sort_values(by='pct_access', ascending=False)['pp_expenditure_group'])\nax[0].set_title(\"Digital Connectivity\", pad=15)\nax[0].set_xlabel(\"Percentage Access\", labelpad=15)\nax[0].set_ylabel(\"Per-pupil expenditure\", labelpad=15)\n\nsns.barplot(x='engagement_index', y='pp_expenditure_group', ax=ax[1], data=tmp,\n            order=tmp.sort_values(by='engagement_index', ascending=False)['pp_expenditure_group'])\nax[1].set_title(\"Digital Engagement\", pad=15)\nax[1].set_xlabel(\"Engagement Index\", labelpad=15)\nax[1].set(ylabel=None)\n\nfig.tight_layout()\nplt.suptitle(\"Trend analysis w.r.t. per-pupil expenditure\", \n             y=1.07, fontweight='bold');","e2f7651b":"tmp = df[df['pp_expenditure_group']!='UNK']\\\n        .groupby(['locale','pp_expenditure_group'])\\\n        .agg({'engagement_index':'mean', 'pct_access':'mean'})\\\n        .reset_index()\\\n        .copy()\n\nfig = plt.figure(figsize=(16, 18), constrained_layout=True)\nfig.suptitle('Trend analysis w.r.t. per-pupil expenditure (in different locales)',\n             y=1.06, fontweight='bold')\n\nsubfigs = fig.subfigures(nrows=4, ncols=1, wspace=0.15, hspace=0.15)\nfor row, subfig in enumerate(subfigs):\n    if row==0:\n        title='Rural areas'\n        cat_filter='Rural'\n        normalize=None\n        expld = (0.05, 0.05, 0.05, 0.05, 0.05, 0.05)\n    elif row==1:\n        title='Towns'\n        cat_filter='Town'\n        normalize=True\n        expld = None\n    elif row==2:\n        title='Suburbs'\n        cat_filter='Suburb'\n        normalize=None\n        expld = (0.05, 0.05, 0.05, 0.05, 0.05)\n    elif row==3:\n        title='Cities'\n        cat_filter='City'\n        normalize=None\n        expld = (0, 0.1, 0, 0)\n    \n    subfig.suptitle(title, y=1.09, fontweight='bold')\n\n    ax = subfig.subplots(nrows=1, ncols=2)\n    ax[0].pie(tmp[tmp['locale']==cat_filter]['pct_access'], \n              labels=tmp[tmp['locale']==cat_filter]['pp_expenditure_group'], \n              labeldistance=1.1, wedgeprops=dict(width=0.5), shadow=True, normalize=normalize,\n              autopct='%1.1f%%', pctdistance=0.75, startangle=-40, explode=expld)\n    ax[0].set_title(\"Digital Connectivity\", pad=15)\n\n    ax[1].pie(tmp[tmp['locale']==cat_filter]['engagement_index'], \n              labels=tmp[tmp['locale']==cat_filter]['pp_expenditure_group'], \n              labeldistance=1.1, wedgeprops=dict(width=0.5), shadow=True, \n              autopct='%1.1f%%', pctdistance=0.75, startangle=-40, explode=expld)\n    ax[1].set_title(\"Digital Engagement\", pad=15)","7229f98d":"**Observations**\n\n* Districts with **very high (80-100%)** percentage of black\/hispanic students had the **highest digital connectivity and engagement**\n* Districts with **very low (0-20%)** percentage of black\/hispanic students had the **second highest digital connectivity and engagement**","8cb332c1":"**Observations**\n\n* **Google Classroom** and **Google Docs** were the **most popular products** w.r.t. Digital connectivity and engagement\n* **Ellevation** was the **least popular product** w.r.t. Digital Connectivity\n* **SignUpGenius** was the **least popular product** w.r.t. Digital Engagement","1bc9c032":"**Observations**\n\n* Districts **6418** and **8017** had the **highest digital connectivity and engagement**\n* District **3471** had the **lowest digital connectivity and engagement**","29905249":"### Engagement data\n\n#### - The engagement data are aggregated at school district level, and each file in the folder engagement_data represents data from one school district.\n#### - The data contains page load events of over 10K education technology products, including websites, apps, web apps, software programs, extensions, ebooks, hardwares, and services used in educational institutions. \n\n| Name | Description |\n| --- | --- |\n| time | date in \"YYYY-MM-DD\"\n| lp_id | The unique identifier of the product\n| pct_access | Percentage of students in the district have at least one page-load event of a given product and on a given day\n| engagement_index | Total page-load events per one thousand students of a given product and on a given day","0d2da18c":"**Observations**\n\n* Both digital connectivity and engagement took a dive during Quarters-1, 2 and 3\n* **Quarter-3** was the **worst-hit**, where both digital connectivity and engagement reached lowest figures\n* **Quarter-4** was the **uplifting quarter**, where digital connectivity and engagement increased substantially compared to prior quarters","5e1624d0":"**Observations**\n\n* **Learning Management System (LMS)** sub-category had the **highest digital connectivity and engagement**\n* **Professional Learning** sub-category had the **lowest digital connectivity**\n* **Tutoring** sub-category had the **lowest digital engagement**","36de03d6":"### Trend analysis w.r.t. per-pupil expenditure","87baa051":"## Picture of digital connectivity and engagement in 2020","ff47af58":"### Trend analysis across different socio-economic demographics","4ae9a6e1":"**Observations**\n\n* **ClassLink** seems to be the **most popular provider** w.r.t. Digital Connectivity\n* **Infrastructure, Inc.** seems to be the **most popular provider** w.r.t. Digital Engagement\n* **Ellevation** was the **least popular provider** w.r.t. Digital connectivity\n* **SignUpGenius** was the **least popular provider** w.r.t. Digital Engagement","e367a004":"### Trend analysis across different internet-accessibility demographics","f80fa011":"### Trend analysis across different essential function categories","61a7b520":"**Observations**\n\n* In **rural areas** and **suburbs**, there was an equal distribution of digital connectivity and engagement across different **per-pupil expenditures**\n* In **towns**, there's only one demographic of **per-pupil expenditures less than 8000**\n* In **cities**, demographics with **per-pupil expenditures between 16000 and 20000** had the highest digital connectivity and engagement","f8698fb9":"## Load source datasets","ec99d407":"**Observations**\n* Both digital connectivity and engagement are **high during weekdays** (Mon to Fri)\n* Digital connectivity and engagement **drops to more than half during weekends** (Sat & Sun)","af9f30fa":"**Observations**\n\n* There's similar trend w.r.t. Digital connectivity and engagement across all sectors (Corporate, Higher Ed and PreK-12)\n* **Corporate** sector **performed best** w.r.t. Digital connectivity and engagement\n* **PreK-12** sector (public elementary and secondary schools) **performed worst** w.r.t. Digital connectivity and engagement","cc341c4b":"### Product information data\n\n#### Includes information about the characteristics of the top 372 products with most users in 2020\n\n| Name | Description |\n| --- | --- |\n| LP ID | The unique identifier of the product\n| URL | Web Link to the specific product\n| Product Name | Name of the specific product\n| Provider\/Company Name | Name of the product provider\n| Sector(s) | Sector of education where the product is used\n| Primary Essential Function | The basic function of the product. There are two layers of labels here. <br> Products are first labeled as one of these three categories: <br> 1) LC = Learning & Curriculum <br> 2) CM = Classroom Management <br> 3) SDO = School & District Operations. <br> Each of these categories have multiple sub-categories with which the products were labeled","b07773b7":"### Trend analysis across different digital products","9a80801e":"## Import libraries","5936257c":"**Observations**\n\n* In **rural areas** and **towns**, districts with **very low black\/hispanic population density** had the highest digital connectivity and engagement\n* In **suburbs**, there was an equal distribution of digital connectivity and engagement across different **black\/hispanic population densities**\n* In **cities**, districts with **very high black\/hispanic population density** had the highest digital connectivity and engagement","8675c3b2":"**Observations**\n\n* Within **Learning & Curriculum**(LC) category:\n\n   1. **Online Course Providers & Technical Skills Development** had the **highest digital connectivity and engagement**\n   2. **Tutoring** had the **least digital connectivity and engagement**\n\n\n* Within **School & District Operations**(SDO) category:\n\n   1. **Learning Management Systems (LMS)** had the **highest digital connectivity and engagement**\n   2. **Environmental, Health & Safety (EHS) Compliance** and **Human Resources** had the **least digital connectivity and engagement**\n\n\n* Within **Classroom Management**(CM) category:\n\n   1. **Assessment & Classroom Response** had the **highest digital connectivity**, while **Professional Learning** had the **least digital connectivity**\n   2. **Virtual Classroom** had the **highest digital engagement**, while **Lesson Planning** had the **least digital engagement**","e050ae7a":"### Time-series trend analysis for 2020","dc820cd3":"**Observations**\n* **Google Docs** and **Google Classroom** were the **most popular Google products** w.r.t. Digital connectivity and engagement\n* **Google Training Center** was the **least popular Google product**","ac7749a2":"**Observations**\n\n* **Rural** geography had the **highest digital connectivity and engagement**, while **Cities** had the **lowest digital connectivity and engagement**","296cfd65":"### District information data\n\n#### Includes information about the characteristics of school districts, including data from **NCES (2018-19)**, **FCC (Dec 2018)**, and **Edunomics Lab**\n\n| Name | Description |\n| --- | --- |\n|district_id | The unique identifier of the school district\n|state | The state where the district resides in\n|locale | NCES locale classification that categorizes U.S. territory into four types of areas: <br> 1) City <br> 2) Suburban <br> 3) Town <br> 4) Rural\n|pct_black\/hispanic | Percentage of students in the districts identified as Black or Hispanic\n|pct_free\/reduced | Percentage of students in the districts eligible for free or reduced-price lunch\n|countyconnectionsratio | Ratio (residential fixed high-speed connections over 200 kbps in at least one direction\/households)\n|pptotalraw | Per-pupil total expenditure (sum of local and federal expenditure)","c08f6b1c":"**Observations**\n\n* Demographics with **per-pupil expenditure greater than 32000** had the **highest digital connectivity and engagement**\n* Demographics with **per-pupil expenditure less than 8000** had the **lowest digital connectivity and engagement**","7b28b3fa":"**Observations**\n\n* Households with **high-speed connections in both directions** had the **highest digital connectivity and engagement**","50d3a1c2":"**Observations**\n\n* **Noth Dakota** and **Arizona** had the **highest digital connectivity and engagement**\n* **North Carolina** had the **lowest digital connectivity**, while **Florida** had the **lowest digital engagement**","88696581":"### Trend analysis across different digital sectors","1a66d367":"### Trend analysis across different geographies","f547febf":"**Observations**\n\n* **Digital connectivity**:\n\n   1. Decreased mildly during Quarter-1 (Jan to Mar)\n   2. Decreased rapidly during Quarter-2 (Apr to Jun) and during **Spring** season (most states and local governments across the U.S. closed educational institutions)\n   3. In **Summer** season (Jun to Aug), after low values in initial months, digital connectivity picked up again during later months\n   4. In **Autumn** season (Sep to Nov), digital connectivity increased substantially and saturated to pre-Covid numbers (i.e. same as Quarter-1 values)\n   \n   \n* **Digital engagement**:\n\n   1. Increased during Quarter-1 (Jan to Mar)\n   2. Decreased rapidly during Quarter-2 (Apr to Jun) and during **Spring** season (most states and local governments across the U.S. closed educational institutions)\n   3. In **Summer** season (Jun to Aug), after low values in initial months, digital engagement picked up again during later months\n   4. In **Autumn** season (Sep to Nov), digital engagement increased substantially and saturated to pre-Covid numbers (i.e. same as Quarter-1 values)","0b80e8ef":"### Trend analysis across different racial demographics","d568e35e":"**Observations**\n\n* Districts with **very high (80-100%)** percentage of students eligible for free or reduced-price lunch had the **highest digital connectivity and engagement**","96db6827":"**Observations**\n\n* There's similar trend w.r.t. Digital connectivity and engagement across all categories (LC, SDO and CM)\n* **CM (Classroom Management)** performed best w.r.t. Digital connectivity and engagement\n* **LC (Learning & Curriculum)** performed worst w.r.t. Digital connectivity and engagement","5f6c0bdb":"**Observations**\n\n* In **rural areas**, districts with **low student ratio (20-40%) eligible for free\/reduced-price lunch** had the highest digital connectivity and engagement\n* In **towns**, districts with **very low student ratio (0-20%) eligible for free\/reduced-price lunch** had the highest digital connectivity and engagement\n* In **suburbs**, there was an equal distribution of digital connectivity and engagement across different **socio-enonomic demographics**\n* In **cities**, districts with **very high student ratio (80-100%) eligible for free\/reduced-price lunch** had the highest digital connectivity and engagement","bdca2fa5":"**Observations**\n\n* **April** and **September** seem to be the **uplifting months**, where digital connectivity and engagement both increased compared to prior months\n* **July** was the **worst-hit month**, where digital connectivity and engagement both took a dive to lowest figures"}}