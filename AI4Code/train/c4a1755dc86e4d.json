{"cell_type":{"3be98d04":"code","e107dd66":"code","acf0235f":"code","665ed8e8":"code","7f7e0c94":"code","4884f5da":"code","ed80ca6d":"code","9b0a78f9":"code","c9ff6597":"code","32b90155":"code","edd72748":"code","13435bdb":"code","75e27981":"code","97f0d77b":"code","bcbf1016":"code","055f6016":"code","ef8d3a84":"code","6832de20":"code","64fbb914":"code","1feef835":"code","874d664e":"code","c4a1e250":"code","28d47605":"code","f874a81c":"code","20086a13":"code","992fc8e4":"code","2fc9043b":"code","efb23bfc":"code","a2c2756a":"code","5a0bf221":"code","a5fed8ae":"code","0dc1adb1":"code","e92e6158":"code","035e81db":"code","dee6ef8e":"code","10b8af7c":"code","75620088":"code","32ab7efd":"code","762abac5":"markdown","a29123fb":"markdown","fe3b5abf":"markdown","86b09557":"markdown","582f7c47":"markdown","4ced11ff":"markdown","6121598f":"markdown","8da2c1df":"markdown","7bc36d4c":"markdown","627f9bbd":"markdown","d09b9a01":"markdown","6795e955":"markdown","c13282ac":"markdown","de4c6df9":"markdown","42d2d5ec":"markdown","5410028a":"markdown","fe954802":"markdown","82b7441a":"markdown","39f00559":"markdown","05156326":"markdown","a510578e":"markdown"},"source":{"3be98d04":"# import the libraries \n\nimport pandas as pd\nimport numpy as np\nimport matplotlib.pyplot as plt\nimport seaborn as sns\npd.set_option('display.max_columns', None)","e107dd66":"# Read the csv file am gonna work with :\n\ndf = pd.read_csv('..\/input\/customer-personality-analysis\/marketing_campaign.csv', sep='\\t')\ndf.head()","acf0235f":"df.shape","665ed8e8":"df.describe()","7f7e0c94":"# make a copy of the dataframe to aviod any problem \ndata = df.copy()","4884f5da":"data.info()","ed80ca6d":"data.isnull().sum()","9b0a78f9":"# Remove the NA values \ndata = data.dropna(how='any') ","c9ff6597":"# change the dtype of DT_Customer column to date time :\ndata['Dt_Customer'] = pd.to_datetime(data['Dt_Customer'])","32b90155":"# replace uppercase to lowercase \ndata.rename(columns=lambda x: x.lower(), inplace=True)","edd72748":"# add age of the customer today :\ndata['age'] = 2022 - data['year_birth']","13435bdb":"# add age_range column\nbins= [0,13,21,40,90]\nlabels = ['Child','Teens','Adult','Old']\ndata['age_range'] = pd.cut(data['age'], bins=bins, labels=labels, right=False)","75e27981":"# add total_spent column:\ndata['total_spent'] = data['mntwines'] + data['mntfruits'] + data['mntmeatproducts'] + data['mntfishproducts'] + data['mntsweetproducts'] + data['mntgoldprods']","97f0d77b":"# Create a living_with column:\ndata['living_with'] = data['marital_status'].replace({\"Married\":\"Partner\", \"Together\":\"Partner\", \"Absurd\":\"Alone\", \"Widow\":\"Alone\", \"YOLO\":\"Alone\", \"Divorced\":\"Alone\", \"Single\":\"Alone\",})","bcbf1016":"# create a childern column:\ndata['children'] = data['kidhome'] + data['teenhome']","055f6016":"# Create a Family_size column:\ndata[\"Family_Size\"] = data[\"living_with\"].replace({\"Alone\": 1, \"Partner\":2})+ data[\"children\"]","ef8d3a84":"#Feature pertaining parenthood\ndata[\"Is_Parent\"] = np.where(data.children> 0, 1, 0)","6832de20":"# Create a education_status column:\ndata['education_status'] = data['education'].replace({'Basic':'Undergraduate', '2n Cycle':'Undergraduate','Graduation':'Graduate','Master':'Postgraduate','PhD':'Postgraduate'})","64fbb914":"# Changing some columns names :\ndata = data.rename(columns={\"mntwines\": \"wines\",\"mntfruits\":\"fruits\",\"mntmeatproducts\":\"meat\",\"mntfishproducts\":\"fish\"\n                          ,\"mntsweetproducts\":\"sweets\",\"mntgoldprods\":\"gold\"})","1feef835":"# Dropping some of the unwanted features:\nto_drop = [\"marital_status\", \"dt_customer\", \"z_costcontact\", \"z_revenue\", \"year_birth\", \"id\"] \ndata = data.drop(to_drop , axis = 1)","874d664e":"data.head()","c4a1e250":"data.describe()","28d47605":"data.head()","f874a81c":"#Plotting following features\nTo_Plot = [ \"income\", \"recency\", \"age\", \"total_spent\"]\nplt.figure()\nsns.pairplot(data[To_Plot], palette = ([\"#682F2F\",\"#F3AB60\"]))\n#Taking hue \nplt.show()","20086a13":"# Dropping the outliers by setting a cap on Age and income. \n\ndata = data[(data[\"age\"]<90)]\ndata = data[(data[\"income\"]<600000)]\nprint(\"The total number of data-points after removing the outliers are:\", len(data))","992fc8e4":"# lets see the correlation between the features:\n\ncmap =([\"#682F2F\", \"#9E726F\", \"#D6B2B1\", \"#B9C0C9\", \"#9F8A78\", \"#F3AB60\"])\n\nplt.figure(figsize=(20,20))  \ncorr = data.corr()\nsns.heatmap(corr, annot= True, cmap= cmap)\nplt.show()","2fc9043b":"pal = [\"#682F2F\",\"#B9C0C9\", \"#9F8A78\",\"#F3AB60\"]","efb23bfc":"plt.figure(figsize=(14,6))\n\ng = sns.scatterplot(data = data , x = 'income' , y = 'wines')\n\n\n#axes labels and title\nplt.xlabel('Customer Income',fontsize = 14, weight = \"bold\")\nplt.ylabel('Wines', fontsize = 14, weight = \"bold\")\nplt.title('The relationship between Customer Income & Wines', fontsize= 14, weight = 'bold')\n\ng.set_xlim(0,120000)\ng.set_ylim(0,1500)\n\nplt.show()","a2c2756a":"fig, (ax1, ax2) = plt.subplots(1, 2, figsize=(14, 6))\n\nax1.set_title('Marital Status & Wines', fontsize= 14, weight = 'bold')\nsns.barplot(data = df , x ='Marital_Status', y = 'MntWines',palette = pal, ax = ax1)\n\nsns.barplot(data = data , x ='age_range', y = 'wines', palette = pal, ax = ax2)\nax2.set_title('Age Range & Wines', fontsize= 14, weight = 'bold')\n\nplt.show()","5a0bf221":"fig, (ax1, ax2) = plt.subplots(1, 2, figsize=(14, 6))\n\nsns.barplot(data = data, x = 'education', y = 'wines',palette=pal, ax = ax1)\nax1.set_title('Education & Wines', fontsize= 14, weight = 'bold')\n\nsns.barplot(data = data, x = 'education_status', y = 'wines',palette = pal, ax= ax2)\nax2.set_title('Education Status & Wines', fontsize= 14, weight = 'bold')\n\nplt.show()","a5fed8ae":"fig, (ax1, ax2) = plt.subplots(1, 2, figsize=(14, 6))\n\nax1.set_title('Marital Status & Fruits', fontsize= 14, weight = 'bold')\nsns.barplot(data = data , x ='living_with', y = 'fruits',palette = pal, ax = ax1)\n\nsns.barplot(data = data , x ='age_range', y = 'fruits', palette = pal, ax = ax2)\nax2.set_title('Age Range & Fruits', fontsize= 14, weight = 'bold')\n\nplt.show()","0dc1adb1":"fig, (ax1, ax2) = plt.subplots(1, 2, figsize=(14, 6))\n\nsns.barplot(data = data, x = 'education', y = 'fruits',palette=pal, ax = ax1)\nax1.set_title('Education & Fruits', fontsize= 14, weight = 'bold')\n\nsns.barplot(data = data, x = 'education_status', y = 'fruits',palette = pal, ax= ax2)\nax2.set_title('Education Status & Fruits', fontsize= 14, weight = 'bold')\n\nplt.show()","e92e6158":"fig, (ax1, ax2) = plt.subplots(1, 2, figsize=(14, 6))\n\nax1.set_title('Marital Status & Meat', fontsize= 14, weight = 'bold')\nsns.barplot(data = data , x ='living_with', y = 'meat',palette = pal, ax = ax1)\n\nsns.barplot(data = data , x ='age_range', y = 'meat', palette = pal, ax = ax2)\nax2.set_title('Age Range & Meat', fontsize= 14, weight = 'bold')\n\nplt.show()","035e81db":"fig, (ax1, ax2) = plt.subplots(1, 2, figsize=(14, 6))\n\nsns.barplot(data = data, x = 'education', y = 'meat',palette=pal, ax = ax1)\nax1.set_title('Education & Meat', fontsize= 14, weight = 'bold')\n\nsns.barplot(data = data, x = 'education_status', y = 'meat',palette = pal, ax= ax2)\nax2.set_title('Education Status & Meat', fontsize= 14, weight = 'bold')\n\nplt.show()","dee6ef8e":"fig, (ax1, ax2) = plt.subplots(1, 2, figsize=(14, 6))\n\nax1.set_title('Marital Status & Fish', fontsize= 14, weight = 'bold')\nsns.barplot(data = data , x ='living_with', y = 'fish',palette = pal, ax = ax1)\n\nsns.barplot(data = data , x ='age_range', y = 'fish', palette = pal, ax = ax2)\nax2.set_title('Age Range & Fish', fontsize= 14, weight = 'bold')\n\nplt.show()","10b8af7c":"fig, (ax1, ax2) = plt.subplots(1, 2, figsize=(14, 6))\n\nsns.barplot(data = data, x = 'education', y = 'fish',palette=pal, ax = ax1)\nax1.set_title('Education & Fish', fontsize= 14, weight = 'bold')\n\nsns.barplot(data = data, x = 'education_status', y = 'fish',palette = pal, ax= ax2)\nax2.set_title('Education Status & Fish', fontsize= 14, weight = 'bold')\n\nplt.show()","75620088":"data.head()","32ab7efd":"fig, (ax1, ax2) = plt.subplots(1, 2, figsize=(14, 6))\n\nsns.barplot(data = data, x = 'education_status', y = 'income',palette=pal, ax = ax1)\nax1.set_title('Education status & Income', fontsize= 14, weight = 'bold')\n\nsns.barplot(data = data, x = 'education_status', y = 'total_spent',palette = pal, ax= ax2)\nax2.set_title('Education Status & Total spent by Customer', fontsize= 14, weight = 'bold')\n\nplt.show()","762abac5":"<a id='corr'><\/a>\n\n# Correlation among all features ","a29123fb":"- [Introduction](#intro)\n- [Data Wrangling](#wrang)\n- [Data Cleaning](#cleaning)\n- [Data Exploratory](#exp)\n     - [1.Correlation among all features](#corr)\n     - [2.what is the special features of the wines buyers ?](#wine)\n     - [3.Who consume healthy food  ?](#healthy)\n     - [4.Does The Income of the customers and the Total Spent by Cusomters depend on the Education Status ?](#income)\n     ","fe3b5abf":"<a id='exp'><\/a>\n# Data Exploratory ","86b09557":"### First: checking for missing values and remove them :","582f7c47":"- The income has **perfect positive** correlation with all features(1).\n- Childern with total spent has **a moderate negative** relationship (-0.5).\n- Total spent is highly correlated with **Income , Wines & Meat**. ","4ced11ff":"![supporting-images-5-01.png](attachment:supporting-images-5-01.png)","6121598f":"<a id='intro'><\/a>\n\n### Context\n\n\n\n>Customer Personality Analysis is a detailed analysis of a company\u2019s ideal customers. It helps a business to better understand its customers and makes it easier for them to modify products according to the specific needs, behaviors and concerns of different types of customers.\nCustomer personality analysis helps a business to modify its product based on its target customers from different types of customer segments. For example, instead of spending money to market a new product to every customer in the company\u2019s database, a company can analyze which customer segment is most likely to buy the product and then market the product only on that particular segment.","8da2c1df":"Duduction of the Analysis:\n- The Healthy food has no relationship with marital status of the customers.\n- **Fruits & Meat** are more consumed from the customers bweteen 20 to 40 years old.\n- **Fish** is more consumed from the customers older than 40.\n- **Postgraduate** with **Fruits and Fish** is the least consumed maybe because they consume wine more.","7bc36d4c":"### Content\n\n#### People\n\n- ID: Customer's unique identifier\n- Year_Birth: Customer's birth year\n- Education: Customer's education level\n- Marital_Status: Customer's marital status\n- Income: Customer's yearly household income\n- Kidhome: Number of children in customer's household\n- Teenhome: Number of teenagers in customer's household\n- Dt_Customer: Date of customer's enrollment with the company\n- Recency: Number of days since customer's last purchase\n- Complain: 1 if the customer complained in the last 2 years, 0 otherwise\n\n#### Products\n\n- MntWines: Amount spent on wine in last 2 years\n- MntFruits: Amount spent on fruits in last 2 years\n- MntMeatProducts: Amount spent on meat in last 2 years\n- MntFishProducts: Amount spent on fish in last 2 years\n- MntSweetProducts: Amount spent on sweets in last 2 years\n- MntGoldProds: Amount spent on gold in last 2 years\n\n#### Promotion\n\n- NumDealsPurchases: Number of purchases made with a discount\n- AcceptedCmp1: 1 if customer accepted the offer in the 1st campaign, 0 otherwise\n- AcceptedCmp2: 1 if customer accepted the offer in the 2nd campaign, 0 otherwise\n- AcceptedCmp3: 1 if customer accepted the offer in the 3rd campaign, 0 otherwise\n- AcceptedCmp4: 1 if customer accepted the offer in the 4th campaign, 0 otherwise\n- AcceptedCmp5: 1 if customer accepted the offer in the 5th campaign, 0 otherwise\n- Response: 1 if customer accepted the offer in the last campaign, 0 otherwise\n\n#### Place\n\n- NumWebPurchases: Number of purchases made through the company\u2019s website\n- NumCatalogPurchases: Number of purchases made using a catalogue\n- NumStorePurchases: Number of purchases made directly in stores\n- NumWebVisitsMonth: Number of visits to company\u2019s website in the last month","627f9bbd":"### Next step :\n- Extract the **Age** of the customer from the Year_birth column.\n- Create **Age Range** from the age of the customer.\n- Add a **Total_Spent** column indicating all the customer has spent in all categories in the last two years.\n- Create another column **Living with** extract it from the martial_status column.\n- Create another column **Childern** to indicate total childern from kidhome and teenhome.\n- Create a **Family_Size** column to know the number of every famliy.\n- Create a feature **Is_Parent** to indicate parenthood status\n- Lastly, I will create three categories in the \"Education\" by simplifying its value counts.\n- Rename and drop some columns.","d09b9a01":"<a id='healthy'><\/a>\n\n# Who consume healthy food  ?","6795e955":"<a id='cleaning'><\/a>\n# Data Cleaning","c13282ac":"> Yes, The Income of the customers and the Total Spent by Cusomters depend on the Education Status:\nThe Customer with Postgraduate is the ones who have more income and spend more money.","de4c6df9":"##### From the above output, I can conclude that :\n- Income column has missing values.\n- Dt_Customer has wrong data type, it should be a date time.","42d2d5ec":"<a id='income'><\/a>\n\n# Does The Income of the customers and the Total Spent by Cusomters depend on the Education Status ?","5410028a":"> Clearly, there are a few outliers in the Income and Age features. I will be deleting the outliers in the data.\n\n","fe954802":"<div style=\"\n           display:fill;\n           border-radius:30px;\n           border-style: solid;\n           border-color:#C1C1C1;\n           background-color:#373737;\n           font-size:20px;\n           font-family:Verdana;\n           letter-spacing:0.5px\">\n    <h1 class=\"title\" style=\"font-size:80px; text-align: center;padding: 5px; color:#00BFFF;\">\n            <span style=\"\n                margin-right: -5px;\n                transition: 0.4s;\n                     \"\n              onMouseOver=\"this.style.fontSize = '1.5em'\" onMouseOut= \"this.style.fontSize = '1em'\">C<\/span>\n            <span style=\"\n                margin-right: -5px;\n                transition: 0.4s;\n                     \"\n              onMouseOver=\"this.style.fontSize = '1.5em'\" onMouseOut= \"this.style.fontSize = '1em'\">u<\/span>\n            <span style=\"\n                margin-right: -5px;\n                transition: 0.4s;\n                     \"\n              onMouseOver=\"this.style.fontSize = '1.5em'\" onMouseOut= \"this.style.fontSize = '1em'\">s<\/span>\n            <span style=\"\n                margin-right: -5px;\n                transition: 0.4s;\n                     \"\n              onMouseOver=\"this.style.fontSize = '1.5em'\" onMouseOut= \"this.style.fontSize = '1em'\">t<\/span>\n            <span style=\"\n                margin-right: -5px;\n                transition: 0.4s;\n                     \"\n              onMouseOver=\"this.style.fontSize = '1.5em'\" onMouseOut= \"this.style.fontSize = '1em'\">o<\/span>\n            <span style=\"\n                margin-right: -5px;\n                transition: 0.4s;\n                     \"\n              onMouseOver=\"this.style.fontSize = '1.5em'\" onMouseOut= \"this.style.fontSize = '1em'\">m<\/span>\n            <span style=\"\n                margin-right: -5px;\n                transition: 0.4s;\n                     \"\n              onMouseOver=\"this.style.fontSize = '1.5em'\" onMouseOut= \"this.style.fontSize = '1em'\">e<\/span>\n        <span style=\"\n                margin-right: -5px;\n                transition: 0.4s;\n                     \"\n              onMouseOver=\"this.style.fontSize = '1.5em'\" onMouseOut= \"this.style.fontSize = '1em'\">r<\/span>\n        <span style=\"\n                margin-right: -5px;\n                transition: 0.4s;\n                     \"\n              onMouseOver=\"this.style.fontSize = '1.5em'\" onMouseOut= \"this.style.fontSize = '1em'\">\ud83d\ude42<\/span>\n        <\/h1>\n<\/div>","82b7441a":"### Second: Change the dtype of Dt_customer column to date time:","39f00559":"Deduction of Analysis :\n- There is a relationship between the Customer Income and The Wines, the more the income of the customer increased the wines sales also increased.\n- From the Marital Status of the customer the **Widow , Divorced & Absurd** are the ones who buy wines more.\n- The Customers that **is older than 30** are the more who buy wines.\n- **Postgraduate ( PhD and Master )** Customers are the most buyers of wines.","05156326":"<a id='wine'><\/a>\n\n# What is the special features of the wines buyers ?","a510578e":"<a id='wrang'><\/a>\n# Data Wrangling"}}