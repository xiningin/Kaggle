{"cell_type":{"a75b26d7":"code","0d45a8c0":"code","e03e9747":"code","13f7b9dc":"code","3cf03dc1":"code","f1972c82":"code","0c850b0c":"code","f907558a":"code","0262d9f0":"code","8ecea63c":"code","4e2a12c9":"code","232ca1a2":"code","dcb0bf2c":"code","a54c61c4":"code","a54f1d08":"code","b362c78d":"code","f7a7386e":"code","fffbd83a":"code","158e5fe1":"markdown","a9139843":"markdown","717d0626":"markdown","b1e5e8b7":"markdown","505c6c91":"markdown"},"source":{"a75b26d7":"# This Python 3 environment comes with many helpful analytics libraries installed\n# It is defined by the kaggle\/python Docker image: https:\/\/github.com\/kaggle\/docker-python\n# For example, here's several helpful packages to load\n\nimport numpy as np # linear algebra\nimport pandas as pd # data processing, CSV file I\/O (e.g. pd.read_csv)\n\n# Input data files are available in the read-only \"..\/input\/\" directory\n# For example, running this (by clicking run or pressing Shift+Enter) will list all files under the input directory\n\nimport os\nfor dirname, _, filenames in os.walk('\/kaggle\/input'):\n    for filename in filenames:\n        print(os.path.join(dirname, filename))\n\n# You can write up to 20GB to the current directory (\/kaggle\/working\/) that gets preserved as output when you create a version using \"Save & Run All\" \n# You can also write temporary files to \/kaggle\/temp\/, but they won't be saved outside of the current session\n\nimport matplotlib.pyplot as plt\n%matplotlib inline","0d45a8c0":"libraryoriginal = pd.read_csv(\"..\/input\/italian-state-libraries-19942018-focus-20002018\/BibliotecheStatali_01_published.csv\",sep=\";\")\nlibraryprovinces = pd.read_csv(\"..\/input\/italian-state-libraries-19942018-focus-20002018\/BibliotecheStatali_01_Tavola1_published.csv\",sep=\";\")","e03e9747":"\ndef plotsummarydata(dataframetouse,variable,yearmin,yearmax):\n    fig_size = plt.rcParams[\"figure.figsize\"]\n    fig_size[0] = 15\n    fig_size[1] = 5\n    plt.rcParams[\"figure.figsize\"] = fig_size\n    charttitle = variable + ' ' + str(yearmin) + '-' + str(yearmax)\n    plt.title(charttitle)\n    plt.legend=True\n    plt.xlabel('Year')\n    plt.xlim(yearmin,yearmax)\n    plt.xticks(range(1,yearmax-yearmin+1))\n    plt.grid(True)\n    plt.autoscale(axis='x',tight=True)\n    plt.plot(dataframetouse[variable])\n","13f7b9dc":"libraryoriginal.head()","3cf03dc1":"# the column with the \"source\" to cross-reference the data online is not needed\ndatasummaryuse = libraryoriginal.drop(\"Source\",axis=1)\n\nyearmin = min(datasummaryuse['Year'])\nyearmax = max(datasummaryuse['Year'])\n","f1972c82":"plotsummarydata(datasummaryuse,'Subscribers',yearmin,yearmax) ","0c850b0c":"plotsummarydata(datasummaryuse,'Loans',yearmin,yearmax) ","f907558a":"plotsummarydata(datasummaryuse,'Readers',yearmin,yearmax) ","0262d9f0":"plotsummarydata(datasummaryuse,'Books_requested',yearmin,yearmax) ","8ecea63c":"libraryprovinces.head()","4e2a12c9":"libraryprovinces.isnull().sum()","232ca1a2":"# removing now the data before 2000, as well as the rows for BOLOGNA\n# the column with the \"source\" to cross-reference the data online is not needed\ndataprovincesuse = pd.DataFrame(libraryprovinces[(libraryprovinces['Year']>=2000)&\\\n                                    (libraryprovinces['Province']!='BOLOGNA')])\n\nyearprovincesmin = min(dataprovincesuse['Year'])\nyearprovincesmax = max(dataprovincesuse['Year'])\nyearprovincesnumber = yearprovincesmax - yearprovincesmin","dcb0bf2c":"dataprovincesuse.isnull().sum()","a54c61c4":"dataprovincesuse.head()","a54f1d08":"datapersonnelbyregion =dataprovincesuse[['Year','Region','Personnel']]\ndatapersonnelbyregion","b362c78d":"dataprovincesregions = datapersonnelbyregion['Region'].unique()\ndataprovincesregions","f7a7386e":"# summary for the country on the trend\nplotsummarydata(datapersonnelbyregion.groupby(['Year']).sum(),'Personnel',yearprovincesmin,yearprovincesmax) ","fffbd83a":"datapersonnelbyregion.groupby(['Region','Year']).sum().sort_values(by='Region').unstack()","158e5fe1":"# 0. Data loading\n","a9139843":"# 0.2. Presenting data from *libraryprovinces*\n\n\n**reference file: *BibliotecheStatali_01_Tavola1_published.csv*\n\n**contents: \"Tavola 1. Consistenza del materiale, consultazioni, prestiti e personale (Dati per Provincia)\", available for 1998-2018**","717d0626":"# README\n\nFull documentation on sources etc. of the two CSV from this dataset, along with the activities done to produce them from data available on the [Statistical Office Website of the Ministero dei Beni Cultural - MIBACT](https:\/\/http:\/\/www.statistica.beniculturali.it\/) is available within the [Kaggle dataset](https:\/\/www.kaggle.com\/robertolofaro\/italian-state-libraries-19942018-focus-20002018)\n\nA further Jupyter Notebook delivering EDA and further analysis will be delivered at a later stage- please see [my Kaggle profile](https:\/\/kaggle.com\/robertolofaro)\n\n**Purpose**: this Jupyter Notebook is delivered as a quick overview of the data, as the dataset has been created to support further publications and analysis using different algorithms.\n\n**Limitations**: \n\n1. See the \"Data coverage\" section- the CSVs contain the data available (summaries from 1994 until 2018; details by Regione\/Provincia, political territorial subdivisions in Italy, from 1998 until 2018)\n2. As the data concerning Bologna have been removed from 2000 (transferred to another Ministry, see explanation within the \"Data coverage\" section), all the further analyses will be done for the timespan 2000-2018\n\n**Source**: [Section \"Rilevazioni e data statistici\" on the Statistical Office Website of MIBACT](http:\/\/www.statistica.beniculturali.it\/Biblioteche_pubbliche_statali.htm) - focus: \"Biblioteche Pubbliche Statali\" (State-owned public libraries in Italy)\n\n**Data coverage**: the datasets cover 1994-2018 for the summary, as those data were available, and 1998-2018 for the details.\n\nAs stated by the source website: *\"Le unit\u00e0 statistiche di riferimento di questa Rilevazione sono rappresentate dalle 46 Biblioteche Pubbliche Statali, indicate dal D.P.R.5\/7\/1995, n. 417, modificato dal D.M. del 12\/06\/2000, che ha disposto il trasferimento della Biblioteca Universitaria di Bologna (BUB) al MURST.\"*.\n\nOr: from 2000, the Bologna library has been transferred to another ministry.\n\nFurthermore, *\"I dati di questa Rilevazione, disponibili in questa pagina web, riguardano la consistenza del materiale bibliografico, le consultazioni, i prestiti, il personale e le spese di gestione a partire dal 1999.\"*\n\nOr: the data are collected from 1999.\n\nTherefore, while the two CSVs include all the data available:\n1. the \"BibliotecheStatali_01_published.csv\" file contains data from the \"Dati storici (quinquennali)\" available for 1998-2018 (the 1998 file extends back to 1994); each file contained the data for the current year, plus the four previous years, extending back in time if there was a re-assessment of prior data\n\n> following a common practice in business, the data used have been the latest version of each year, i.e. the CSV has been created by using the data from the 2018 \"Dati storici (quinquennali)\", and then going back in time; the column \"Source\" clearly states the source table from the website\n\n> two columns from the original files have been ignored:\n\n>> \"Spese di gestione\", i.e. costs- as it is not within the scope of the publications and analyses\n\n>> \"Personale\", i.e. personnel, as instead have been used the details within \"Tavola 1. Consistenza del materiale, consultazioni, prestiti e personale (Dati per Provincia)\" (represented within the other file)\n\n\n2. the \"BibliotecheStatali_01_Tavola1_published.csv\" file contains data from the \"Tavola 1. Consistenza del materiale, consultazioni, prestiti e personale (Dati per Provincia)\", available for 1998-2018\n\n> to ensure consistency, as e.g. the RIETI library data was not available for a number of years, and, as stated above, the BOLOGNA library was removed from 2000, a line containing \"empty\" has been added to keep both RIETI and BOLOGNA\n\n> to ensure consistency, as the \"not available\" was sometimes in the data as either a left- or right-aligned \"-\", or a \"...\", it has been replaced by \"empty\".\n","b1e5e8b7":"# 0.1. Presenting data from *libraryoriginal*\n\n**reference file: *BibliotecheStatali_01_published.csv*\n\n**contents: \"Dati storici (quinquennali)\" available for 1998-2018 (the 1998 file extends back to 1994)**","505c6c91":"# 0.0 Utility functions"}}