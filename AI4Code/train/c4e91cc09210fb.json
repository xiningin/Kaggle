{"cell_type":{"6e2fe288":"code","dc80639e":"code","fa08e155":"code","d3270921":"code","88c93eea":"code","f3add270":"code","d5f687df":"code","5eec1144":"code","fe3ae3ea":"code","a7d05edb":"code","45fb389e":"code","fdf0ac6f":"code","78645555":"code","011103cb":"code","b9d17d84":"code","d9240ede":"code","e2932667":"code","4a5c839b":"markdown","2519c330":"markdown","bb14a0cf":"markdown","fd3a8b3f":"markdown","25996fad":"markdown","fce3c6ae":"markdown","97090bbd":"markdown","e7d3559e":"markdown","ab5d6875":"markdown","670ab6c9":"markdown","9d31e6e6":"markdown","75769770":"markdown","75ba182d":"markdown","913e9c30":"markdown","8d344830":"markdown","7f43d978":"markdown","be9eedee":"markdown","ce4270a2":"markdown","635d6fcf":"markdown","5eb5c8e9":"markdown","57a94e06":"markdown","6561d5cb":"markdown","4f43a136":"markdown","1837bdea":"markdown","e08526cb":"markdown"},"source":{"6e2fe288":"#importar pandas\nimport pandas as pd","dc80639e":"# Cargar los archivos CSV como DataFrames\nsuper_bowls = pd.read_csv(\"..\/input\/super_bowls.csv\")\ntv =pd.read_csv(\"..\/input\/tv.csv\") \nhalftime_musicians = pd.read_csv(\"..\/input\/halftime_musicians.csv\")","fa08e155":"#Muestra las primeras 5 filas de cada DataFrame\ndisplay(super_bowls.head())\ndisplay(tv.head())\ndisplay(halftime_musicians.head())","d3270921":"#Resumen de los datos a inspeccionar de cada DataFrame\nsuper_bowls.info()\ntv.info()\nhalftime_musicians.info()","88c93eea":"# Para poder graficar algo, tendremos que cargar pyplotlib\nfrom matplotlib import pyplot as plt\n%matplotlib inline\n\n#Utilizamos el estilo de 'seaborn' por ejemplo\nplt.style.use('seaborn')\n# BUSCAR COMANDO PARA ACCEDER A TODOS LOS ESTILOS\n\n#Creamos un histograma con los puntos combinados\n#para ello accedemos a la columna 'combined_pts' del DataFrame 'super_bowl'\n#asi vemos una distribucion de los puntos y podemos elegir cuales son los \n#puntos extremos\nplt.hist(super_bowls.combined_pts)\nplt.xlabel('Combined Points')\nplt.ylabel('Number of Super Bowls')\nplt.show()","f3add270":"# Muestra las Super Bowls con las puntuaciones mas altas y mas bajas\n# de puntos combinados\ndisplay(super_bowls[super_bowls['combined_pts'] > 70])\ndisplay(super_bowls[super_bowls['combined_pts'] < 30])","d5f687df":"plt.hist(super_bowls.difference_pts)\n\nplt.xlabel(\"Point Difference\")\nplt.ylabel(\"Super Bowl game\")\nplt.title(\"Point Difference Distribution\")\n\nplt.show()","5eec1144":"max_dif=super_bowls[super_bowls['difference_pts'] > 40]\nmin_dif=super_bowls[super_bowls['difference_pts'] < 5]\n\ndisplay(max_dif)\ndisplay(min_dif)","fe3ae3ea":"def busca_busca(df,columna):\n    indice_min= df[columna].idxmin()\n    objeto_min= display(df[indice_min : indice_min + 1])\n    \n    indice_max = df[columna].idxmax()\n    objeto_max=display(df[indice_max : indice_max + 1])\n    \n    return objeto_min,objeto_max ","a7d05edb":"display(busca_busca(super_bowls,'difference_pts'))","45fb389e":"# Unir los datos de los partidos y la television omitiendo SB I porque se\n#dividio en 2 canales. (ver index 51 y 52)\ngames_tv = pd.merge(tv[tv['super_bowl'] > 1], super_bowls, on='super_bowl')\n\n#Import seaborn\nimport seaborn as sns\n\n# Create a scatter plot with a linear regression model fit\nsns.regplot(x=games_tv.difference_pts, y=games_tv.share_household, data=games_tv)","fdf0ac6f":"# Creamos una figura con 3x1 subplot y activamos el subplot superior\nplt.subplot(3, 1, 1)\nplt.plot(tv.super_bowl, tv.avg_us_viewers, color='#648FFF')\nplt.title('Average Number of US Viewers')\n\n# activamos el subplot intermedio\nplt.subplot(3, 1, 2)\nplt.plot(tv.super_bowl, tv.rating_household, color='#DC267F')\nplt.title('Household Rating')\n\n# activamos el subplot inferior\nplt.subplot(3, 1, 3)\nplt.plot(tv.super_bowl, tv.ad_cost, color='#FFB000')\nplt.title('Ad Cost')\nplt.xlabel('SUPER BOWL')\n\n# modificamos el espacio entre subplots..\nplt.tight_layout()","78645555":"# Mostramos todos los musicos que han actuado en los halftime shows\nhalftime_musicians","011103cb":"# Contar todas las apariciones en halftime show para cada artista\n# y los ordenamos por numero de apariciones\nhalftime_appearances = halftime_musicians.groupby('musician').count()['super_bowl'].reset_index()\nhalftime_appearances = halftime_appearances.sort_values('super_bowl', ascending=False)\n\n# Mostramos los musicos con mas de una aparicion en los halftime shows\nhalftime_appearances[halftime_appearances.super_bowl>1]","b9d17d84":"# Filtramos la mayor parte de las bandas\nno_bands = halftime_musicians[~halftime_musicians.musician.str.contains('Marching')]\nno_bands = no_bands[~no_bands.musician.str.contains('Spirit')]\n\n# Creamos un histograma con el numero de canciones por actuacion\nmost_songs = int(max(no_bands['num_songs'].values))\nmost_songs","d9240ede":"plt.hist(no_bands.num_songs.dropna(), bins=most_songs)\nplt.xlabel('Number of Songs Per Halftime Show Performance')\nplt.ylabel('Number of Musicians')\nplt.show()","e2932667":"# Ordenamos los musicos non-band por numero de canciones por aparicion\nno_bands = no_bands.sort_values('num_songs', ascending=False)\n# ...y mostramos el top 15\ndisplay(no_bands.head(15))","4a5c839b":"4. Distribucion de la diferencia de puntos\n\nMediante esta distrubcion podriamos saber cual fue la mayor \"paliza\" y cuales fueron los juegos mas re\u00f1idos. ","2519c330":"Una inspeccion de .info() nos muestra que hay varias columnas con valores nulos.","bb14a0cf":"3. Distribucion de los puntos combinados\nPara la informacion TV, las siguientes columnas tienen valores nulos:\n\n\u25batotal_us_viewers (cantidad de espectafores que vieron al menos alguna parte de la transmision)\n\u25barating_18_49 (media del porcentaje de los adultos (en U.S) etre 18-49 a\u00f1os que viven en una familia con una television que vieron las transmision completa)\nshare_18_49 (media del porcentaje de los adultos (en U.S) etre 18-49 a\u00f1os que \u25baviven en una familia con una television -en uso- que vieron las transmision completa)\n\nPara los datos del espect\u00e1culo de medio tiempo, faltan algunos numeros de canciones(num_songs) aproximadamente un tercio de  there are missing numbers of songs performed (num_songs) for about a third de las actuaciones.\nHay muchas razones que explican por que faltan estos datos. \n\u25baQue constancia hay de que esta informacion fue registrada? \u25ba Que se perdi\u00f3 con el paso del tiempo? \u25ba Dependiendo del esfuerzo de la investigacion, puede que algunos datos no se pudieran conseguir. Tal vez. \n\nVamos a echar un vistazo a puntos combinados para  cada Super Bowl visualizando la distribucion.  Vamos a identificar la Super Bowl con las mayores y menores puntuaciones.\n\nPara ello vamos a representar un hisotrgrama de puntos combinados, luego graficamos las filas ocn los casos mas extremos","fd3a8b3f":"7. Halftime shows no fueron siempre tan geniales\nPodemos ver que a lo largo de la historia de la Super Bowl los espectadores aumentaron antes que el precio de la publicidad. Tal vez los canales, al no disponer de la informacion suficiente, puediera ser que no reaccionaron a tiempo?\n\nOtra hipotesis: Quizas no fueron los halftime shows tan buenos por los comienzos... Los espectaculos modernos de la Super Bowl tiene mucho que ver con el prestigio cultural de grandes actos de espect\u00e1culos de medio tiempo. Si buscamos en Youtube, por ejemplo, vemos que los actos de aquel entonces no estan a la altura de los que ocurren hoy en dia. Alguno de los ejemplos:\n\n1992, Super Bowl XXVI: Un rap de Frosty, el mu\u00f1eco de nieve, realizado por ni\u00f1os.\n1989, Super Bowl XXIII: Una copia de Elvis que realizaba trucos de magia y que ni siquiera cant\u00f3 una cancion de Elvis...\n1987, Super Bowl XXI: Claqu\u00e9 de ponis...\n\nNo fue hasta la actuaci\u00f3n de Michael Jackson  cuando la Super Bowl se convirtio en uno de los eventos mas vistos en la historia de la television americana. La  NFL se dio cuenta del valor que tenia el tiempo de emision del partido y decidieron que necesitaban nombres mas importantes a partir de ese momento. ","25996fad":"Para acceder a las primeras 5 filas del DataFrame, podemos hacerlo mediante print(df.head()) o visualmente mejor, mediante display(df.head()). Asi podemos realizar una inspeccion visual del formato de los datos y las diferentes columnas que tenemos.","fce3c6ae":"6. Audiencia y la industria de la publicidad\nLa linea de regresion con pendiente descendente puede significar que el abandono del juego si esta teniendo lugar una \"paliza\" es comun. A pesar de que coincide con nuetsra intuicion, debemos tener en cuenta que la relacion es muy debil ya que solo poseemos 52 partidos.\n\nSin tener en cuenta el resultado, mucha gente se queda por el halftime show, que es una buena se\u00f1al para los canales de television y la publicidad. Un anuncio de 30 segundos cuesta 5 millones de dolares acutalmente, pero, ha sido siempre asi? Como ha afectado el numero de espectadores a los precios?","97090bbd":"\u25ba Cuales son los resultados mas extremos de los partidos?","e7d3559e":"10. Conclusion\nViendo el histograma y la tabla anterior llegamos a la conclusion de que los musicos hacen entre 1 y 3 canciones por halftime show.+ Es importante saber que la duracion del show es fija (justo 12 minutos), asi que las canciones por actuacion es una medida de cuantos \"hits\" tiene el artista. JT se pas\u00f3 con 11 canciones en 2018! Diana Ross es la segunda con 10 en su medley en 1996.\n\nEn este notebook, cargamos, limpiamos y luego exploramos los datos de los juegos de la Super Bowl, television y espect\u00e1culo de medio tiempo. Visualizamos las distribuciones de puntos combinados y actuaciones de halftime show usando histogramas. Usamos graficas lineales para  ver como los costes de publicidad aumentan a medida que aumenta la audiencia. Y descubrimos que cuando la diferencia de puntos es muy grande, provoca una perdida del interes por parte del espectador.","ab5d6875":"Vamos a combinar nuestros datos de juego y de television para ver si esto le ocurre a mas gente!Con esto vamos a contestar a la segunda pregunta \u25ba Provoca una gran diferencia de puntos perdidas de audiencia?  Podemos graficar la media del porcentaje de familias con television en uso que vieron la retransmision completa vs. la diferencia de puntos.","670ab6c9":"Ahora tomamos como caso extremo que las puntuaciones mas altas de puntos combinados son superiores a 70 puntos y que las minimas deben ser inferiores a 25.\n\nLa mayor parte de los puntos combinados son de entre 40-50 puntos, con los extremos casi iguales. Mirando los partidos de puntos combinados mayores a 70, encontramos dos partidos a 74 y 75, donde vemos una gran dominacion por parte de los quarterback. Por cierto, uno de los partidos ocurrio recientemente en 2018 Super Bowl LII donde los Patriots de Tom Brady perdieron contra los Philadelphia Eagles 41-33 con una puntuacion combinada de 74.","9d31e6e6":"Lo primero que haremos es acceder a las bases de datos que tenemos disponibles. Que son 3 archivos csv. \n\u25ba super_bowls.csv\n\u25ba tv.csv\n\u25ba halftime_musicians.csv\nPara acceder a los archivos lo haremos mediante pandas para cargarlos como DataFrames.","75769770":"La mayor discrepancia de puntos fue 45 donde Joe Montana lidero al San Francisco 49ers a la victoria en 1990, un a\u00f1o despues del partido mas re\u00f1ido de la historia.","75ba182d":"PROJECT: TV, HALFTIME SHOWS, AND THE BIG GAME","913e9c30":"Asi respondemos a la primera pregunta de este estudio.","8d344830":"8. Quien ha tenido mayor numero de aparicientos?\nUn monton de bandas! Miss Texas 1973 tocando el violin...\n\nVamos a ver todos los musicos que Let's see all of the musicians that have done at least one halftime show, including their performance counts.","7f43d978":"9. Quien actuo mas veces en un halftime show?\nLa Tiger Marching Band queda en primer lugar con seis apariciones. . Beyonc\u00e9, Justin Timberlake, Nelly, y Bruno Mars tienen solamente dos apariciones\n\nDe nuestras inspecciones previas vimos que num_songs tenia numerosas celdas con datos no disponibles.\n\nMuchas de las bandas no tienen entradas en numero de canciones. Para los demas, la perdida de datos comienza a partir de la Super Bowl XX. \n\nVamos a filtrar las bandas. Quitaremos todos los nombres que comiencen por \"Marching\" y la palabra \"Spirit\". Luego filtraremos la superThen we'll filter for Super Bowls after Super Bowl XX to address the missing data issue, then let's see who has the most number of songs.","be9eedee":"En este proyecto contestaremos a las siguientes preguntas\n\n\u25ba Cuales son los resultados mas extremos de los partidos? \n\u25ba Como los partidos afectan a la audiencia?\n\u25ba Como la audiencia, niveles de audiencia y coste de los anuncios evolucionan a  lo largo del tiempo?\n\u25ba Quien es el artista mas importantes en terminos de espect\u00e1culo de medio tiempo?","ce4270a2":"Con este estudio, lo que realizamos fue representar con un histograma los puntos combinados. En este histrograma vimos que las puntuaciones maximas fueron de entre 70 y 80 puntos, mientras que las minimas fueron de entre 20 a 30 puntos. \nEsta informacion fue suficiente para querer mostrar los partidos (o filas) donde los puntos eran mayores a 70 y los que fueron menores a 30.\n\nSi nos fijamos en las puntuaciones mas pequenas, tenemos la Super Bowl III y VII, donde la defensa domino el partido. Tambien tenemos la Super Bowl IX en Nueva Orleans en 1975, cuya puntuacion 16-6 puede ser atribuida a las inclemencias del tiempo. El terreno estaba embarrado por  las lluvias de la noche anterior. Eso y la temperatura de unos 8\u00b0C hicieron muy complicado para ambos equipos, Steelers y Vikings, crear oportunidades de ataque. Esta fue la segunda Super Bowl mas fria en 30 a\u00f1os y la ultima en jugarse en esas condiciones...Suponemos que a la gente le gusta la accion!\n\nEn la Super Bowl LIII en 2019, los Patriots vs Rams rompieron el record por la puntuacion mas baja de la Super Bowl, con una puntuacion combinada de 16 puntos (13-3 para los Patriots)","635d6fcf":"Desde mi punto de vista, cuando existe una diferencia tan grande de puntos puede convertirse en una experiencia muy aburrida en mi opinion. El juego nunca esta emocionante ya que no se acercan si quiera al empate. Lo que ocurre es, o bien que apagues la television o que cambies de canal ya que te sabes el resultado.","5eb5c8e9":"Con este grafico, contestamos a la pregunta\n\n\u25ba Como la audiencia, niveles de audiencia y coste de los anuncios evolucionan a lo largo del tiempo? ","57a94e06":"5. Se podrian traducir las palizas en perdidas de audiencias?\nLa gran mayor parte de los partidos de las Super Bowl son partidos re\u00f1idos. Cosa que tiene sentido, ya que ambos equipos se merecen por igual estar jugando esa final si han llegado tan lejos.\n\nVemos, en el histograma que la mayor paliza fue para juegos con una diferencia mayor a 40 puntos mientras que los juegos mas re\u00f1idos estuvieron por debajo de 5. Asi que igual que en el ejemplo anterior, listaremos dichos partidos.","6561d5cb":"En la tabla anterior contestamos a la tercera y ultima pregunta \n\n\u25ba Quien es el artista mas importantes en terminos de espect\u00e1culo de medio tiempo?","4f43a136":"El partido mas re\u00f1ido de todos fue cuando Buffalo Bills perdio contra los New York Giants con una diferencia de 1 punto en 1991.","1837bdea":"*******************************************************************************","e08526cb":"2. Problemas de algunos datos.\nPara los datos disponibles de la Super Bowl, podemos ver que el dataset aparece completo exepto por la columna del \"segundo quarterback\"(qb_winner_2 and qb_loser_2), que aparece vacia (NaN) cosa que tiene sentido ya que la mayoria de las veces, los QBs (qb_winner_1 and qb_loser_1) juegan todo el partido.\n\nDesde una inspeccion visual de los datos de la television (tv.csv) y espect\u00e1culo de medio tiempo (halftime_musicians.csv) solo falta un dato, pero tenemos una gran cantidad de informacion adicional. \n\nLa Super Bowl va desde 1967 y es normal que en algunas columnas no aparezca la informacion. Wikipedia esta bien, pero no es perfecta! "}}