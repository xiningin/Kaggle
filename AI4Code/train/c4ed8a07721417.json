{"cell_type":{"8c589fd8":"code","7b6f0715":"code","11bd1fa6":"code","3afd4144":"code","cc76f6a6":"code","d4458aa3":"code","0e903fcf":"code","5f866d31":"code","c7afe105":"code","84b51a87":"code","df1e9c26":"code","da447439":"code","9ec74151":"code","7c869fe1":"code","cf7c4806":"code","dc94e391":"code","2343e1b1":"code","5ef15e58":"code","f884a4bb":"code","a7c4c0bb":"code","3be632b6":"code","247528ca":"code","bc63f9c9":"code","05b52447":"code","6a45f9c0":"code","600653a6":"code","842eee07":"code","929be6e5":"code","0d148221":"code","2488890e":"code","887de1ee":"code","3900347d":"code","543fcb6b":"code","5f70041c":"code","0e424aad":"code","a9d67ead":"code","955a0950":"code","6c41af4a":"code","e8027583":"code","cbc37777":"code","c67c6a47":"code","e6d62b4c":"code","24e5302c":"code","41c9459d":"code","7751acf8":"code","51f379e2":"markdown","e4c9e2e6":"markdown","cf693c7c":"markdown","b9381861":"markdown","852ebe54":"markdown","73a57d1e":"markdown","b6ae15d9":"markdown","3d18f8a8":"markdown","61e2d386":"markdown","4b290f74":"markdown","3388eb86":"markdown","a91502e6":"markdown","7d50c905":"markdown","a49c9d83":"markdown","30732d6f":"markdown","cb5e034e":"markdown","89fdf2dd":"markdown","d21d539a":"markdown","80a3f608":"markdown","f91f4fd4":"markdown","043fe02f":"markdown","7e0343f6":"markdown","1225963d":"markdown","c8515fbc":"markdown","5f677010":"markdown","4cb94554":"markdown","bd59e9cd":"markdown","58d43d51":"markdown","937cadfc":"markdown","2067791b":"markdown","01171046":"markdown","6f67b40c":"markdown","2823a2ff":"markdown","0a2e0940":"markdown","70e9500c":"markdown","0a38165c":"markdown","828db1ef":"markdown"},"source":{"8c589fd8":"import numpy as np\nimport pandas as pd\nimport matplotlib.pyplot as plt\nimport seaborn as sns\n\nfrom sklearn.model_selection import train_test_split, GridSearchCV\nfrom sklearn.linear_model import LogisticRegression\nfrom sklearn.neighbors import KNeighborsClassifier\nfrom sklearn.ensemble import RandomForestClassifier\nfrom sklearn.svm import SVC\n\nfrom sklearn.metrics import accuracy_score, precision_score, classification_report, confusion_matrix\n\nsns.set_style('darkgrid')\n%matplotlib inline","7b6f0715":"edu_df = pd.read_csv('..\/input\/xAPI-Edu-Data\/xAPI-Edu-Data.csv', engine='python')","11bd1fa6":"edu_df.head()","3afd4144":"print(\"the shape of our dataset is {}\".format(edu_df.shape))","cc76f6a6":"edu_df.info()","d4458aa3":"edu_df.nunique()","0e903fcf":"edu_df['NationalITy'].unique()","5f866d31":"edu_df['PlaceofBirth'].unique()","c7afe105":"edu_df.drop('NationalITy', axis=1, inplace=True)","84b51a87":"edu_df.columns","df1e9c26":"plt.figure(figsize=(14,8))\nsns.countplot('PlaceofBirth', data=edu_df)\nplt.xlabel('nationality')\nplt.ylabel('number of students');","da447439":"sorted_place = edu_df['PlaceofBirth'].value_counts().index","9ec74151":"plt.figure(figsize=(14,8))\nsns.countplot('PlaceofBirth', hue='gender', data=edu_df, order=sorted_place)\nplt.xlabel('nationality')\nplt.ylabel('number of students')\nplt.legend(loc='upper right');","7c869fe1":"fig, ax = plt.subplots(1,2, figsize=(14,8))\nsns.countplot('StageID', data=edu_df, ax=ax[0])\nsns.countplot('StageID', hue='gender', data=edu_df, ax=ax[1]);","cf7c4806":"labels = edu_df['Topic'].unique()\n\nplt.figure(figsize=(14,8))\nf = sns.countplot('Topic', data=edu_df)\nf.set_xticklabels(labels=labels, rotation=120);","dc94e391":"fig, ax = plt.subplots(1,2, figsize=(14,8))\nsns.countplot('Topic', hue='gender', data=edu_df, ax=ax[0])\nsns.countplot('Topic', hue='StageID', data=edu_df, ax=ax[1])\nax[0].set_ylabel(\"number of students\")\nax[1].set_ylabel(\"number of students\")\nax[0].set_xticklabels(labels=labels, rotation=120)\nax[1].set_xticklabels(labels=labels, rotation=120)\nax[1].legend(loc='upper right');","2343e1b1":"topic_order = edu_df['Topic'].value_counts().index","5ef15e58":"fig, ax = plt.subplots(2,2, figsize=(12,8))\nsns.countplot(edu_df.query('PlaceofBirth==\"KuwaIT\"')['Topic'], ax=ax[0,0], order=topic_order)\nsns.countplot(edu_df.query('PlaceofBirth==\"Jordan\"')['Topic'], ax=ax[0,1], order=topic_order)\nsns.countplot(edu_df.query('PlaceofBirth==\"Iraq\"')['Topic'], ax=ax[1,0], order=topic_order)\nsns.countplot(edu_df.query('PlaceofBirth==\"USA\"')['Topic'], ax=ax[1,1], order=topic_order)\nax[0,0].set_xticklabels(labels=labels, rotation=120)\nax[0,1].set_xticklabels(labels=labels, rotation=120)\nax[1,0].set_xticklabels(labels=labels, rotation=120)\nax[1,1].set_xticklabels(labels=labels, rotation=120)\nax[0,0].set_title('Kuwait')\nax[0,1].set_title('Jordan')\nax[1,0].set_title('Iraq')\nax[1,1].set_title('USA')\nplt.tight_layout();","f884a4bb":"fig, ax = plt.subplots(1, 2, figsize=(14,8))\nsns.countplot('Class', data=edu_df, ax=ax[0])\nsns.countplot('Class', hue='StudentAbsenceDays', data=edu_df, ax=ax[1]);","a7c4c0bb":"fig, ax = plt.subplots(2, 2, figsize=(14,8))\nsns.barplot(x='Class', y='raisedhands', data=edu_df, ax=ax[0,0])\nsns.barplot(x='Class', y='VisITedResources', data=edu_df, ax=ax[0,1])\nsns.barplot(x='Class', y='Discussion', data=edu_df, ax=ax[1,0])\nsns.barplot(x='Class', y='AnnouncementsView', data=edu_df, ax=ax[1,1])\nplt.tight_layout();","3be632b6":"plt.figure(figsize=(14,8))\nsns.countplot('Class', hue='gender', data=edu_df);","247528ca":"plt.figure(figsize=(12,8))\nsns.countplot('gender', hue='StudentAbsenceDays', data=edu_df);","bc63f9c9":"fig, ax = plt.subplots(2, 2, figsize=(14,8))\nsns.boxplot(x='gender', y='raisedhands', data=edu_df, ax=ax[0,0])\nsns.boxplot(x='gender', y='VisITedResources', data=edu_df, ax=ax[0,1])\nsns.boxplot(x='gender', y='Discussion', data=edu_df, ax=ax[1,0])\nsns.boxplot(x='gender', y='AnnouncementsView', data=edu_df, ax=ax[1,1])\nplt.tight_layout();","05b52447":"fig, ax = plt.subplots(1,3, figsize=(14,6))\nsns.countplot('SectionID', hue='Class', data=edu_df, ax=ax[0])\nsns.countplot('StageID', hue='Class', data=edu_df, ax=ax[1])\nsns.countplot('Semester', hue='Class', data=edu_df, ax=ax[2]);","6a45f9c0":"plt.figure(figsize=(14,8))\nf = sns.countplot('Topic', hue='Class', data=edu_df)\nf.set_xticklabels(labels=labels, rotation=120);","600653a6":"plt.figure(figsize=(14,8))\nsns.countplot('Topic', hue='ParentschoolSatisfaction', data=edu_df);","842eee07":"X = edu_df.drop('Class', axis=1)\nX.head()","929be6e5":"y = edu_df['Class']","0d148221":"X = pd.get_dummies(X, drop_first=True)\nX.head()","2488890e":"X_train, X_test, y_train, y_test = train_test_split(X, y, test_size=0.2)","887de1ee":"print(\"the shape of the training set is {}\".format(X_train.shape))\nprint(\"the shape of the test set is {}\".format(X_test.shape))","3900347d":"sns.countplot('Class', data=edu_df);","543fcb6b":"# consider n_neighbors in the range (1,50)\nn_neighbors = range(50)\naccuracy_list = []\n\nfor n in n_neighbors:\n    knn = KNeighborsClassifier(n_neighbors=n+1)\n    # fit on the training set\n    knn.fit(X_train, y_train)\n    # predict on the test set\n    pred = knn.predict(X_test)\n    # calculate the accuracy score on the test set\n    accuracy = accuracy_score(y_test, pred)\n    # store the value\n    accuracy_list.append(accuracy)","5f70041c":"plt.plot(range(1,51), accuracy_list)\nplt.xlabel('number of neighbors')\nplt.ylabel('accuracy score')","0e424aad":"knn = KNeighborsClassifier(n_neighbors=12)\nknn.fit(X_train, y_train)","a9d67ead":"knn_pred = knn.predict(X_test)\nknn_accuracy = accuracy_score(y_true=y_test, y_pred=knn_pred)\nprint(\"The accuracy score for KNN algorithm is {}\".format(knn_accuracy))","955a0950":"# consider n_estimators in the range (10,200)\nn_estimators = range(0,210,10)\naccuracy_list = []\n\nfor n in n_estimators:\n    rf = RandomForestClassifier(n_estimators=n+1)\n    # fit on the training set\n    rf.fit(X_train, y_train)\n    # predict on the test set\n    pred = rf.predict(X_test)\n    # calculate the accuracy score on the test set\n    accuracy = accuracy_score(y_test, pred)\n    # store the value\n    accuracy_list.append(accuracy)","6c41af4a":"plt.plot(range(0,210,10), accuracy_list)\nplt.xlabel('number of trees')\nplt.ylabel('accuracy score')","e8027583":"rf = RandomForestClassifier(n_estimators=110)\nrf.fit(X_train, y_train)","cbc37777":"rf_pred = rf.predict(X_test)\nrf_accuracy = accuracy_score(y_true=y_test, y_pred=rf_pred)\nprint(\"The accuracy score for random forest algorithm is {}\".format(rf_accuracy))","c67c6a47":"model_list = [LogisticRegression(max_iter=200), SVC()]\n\nparam_dict = [\n              {'C': [0.1, 0.5, 1.0]},\n              {'kernel': ['rbf', 'linear', 'sigmoid', 'poly']}\n             ]","e6d62b4c":"for model, param in zip(model_list, param_dict):\n    grid_cv = GridSearchCV(estimator=model, param_grid=param, verbose=3)\n    print(\"the current estimator is : {}\".format(model))\n    grid_cv.fit(X_train, y_train)\n    print()\n    print(\"the best score on the training set is : {} for the parameter {}\".format(grid_cv.best_score_, \n                                                                                   grid_cv.best_params_))\n    print()","24e5302c":"print(\"The overall best estimator is {} with parameter {} and it produces a cross-validated score {} on the training set\".\n      format(grid_cv.best_estimator_, grid_cv.best_params_, grid_cv.best_score_))","41c9459d":"pred = grid_cv.predict(X_test)","7751acf8":"print(classification_report(y_true=y_test, y_pred=pred))","51f379e2":"It is clear from the above plots that students who are more involved in the classroom activities generally score high marks. Another interesting observation could be **how female students perform compared to male student?**","e4c9e2e6":"As we can see from the above plot, female students tend to have higher performance scores as compared to male students.","cf693c7c":"## Building a classification model ","b9381861":"Chemistry seems to be equally popular among both female and male students. Students enrolled for biology, chemistry and geology are from middle school only.\n\nNext we check **how popular the topics are in different countries that the students come from.** We look at some countries with high enrollment numbers.","852ebe54":"The next classification algorithm that we consider is random forest clasiification. To find the optimum value of the hyper-parameter n_estimators (*i.e*. the number of trees to be conisdered during the classification) in this case, we follow the simialr strategy as above.","73a57d1e":"Next we ask the question, **what factors affect the grade of a student?** Note that the grade of a student is directly related to the 'class' the student belongs to.\n\nThe attributes of interest to find answer to this question are:\n1. raisedhands\n2. VisITedResources\n3. AnnouncementsView\n4. Discussion\n5. StudentAbsenceDays","b6ae15d9":"Although IT has maximum number of enrollments, the overall performance of students in this course is poor as compared to others since the number of students with high marks are significantly lower than that with low and average marks (which are almost comparable in this case). In subjects like biology and chemistry, most of the students have scored high marks. Also in gelogy, there is no student with low score. ","3d18f8a8":"Both of these attributes basically carry the same information and hence we drop one of them.","61e2d386":"As can be seen from the above plot, approximately n_neighbors = 12 gives the best accuracy result and we will choose this value to train our model.","4b290f74":"Therefore, n_estimators ~ 110 gives best accuracy score as evaluated on the test set and hence we will use this value to train our model. ","3388eb86":"So we have total 47 features to train our model on. Let's split our dataset into train and test sets. ","a91502e6":"So from the above plot it is clear that when the dataset can be considered to be moderately balanced. Hence, accuracy score can be a good metric in this case.","7d50c905":"Couple of interesting points to note here are:\n\n1. Students of section A have shown an overall better performance and very few students from section C have scored high marks.\n2. Students coming from middle school have have the highest number of 'middle-level' and 'high-level' grades. In case of high school, these two numbers are almost comparable.\n3. There is a decrease in number of 'low-level' grades and a corresponding increase in number of 'high-level' grades in second semester. That means, as students transit from first to second semester, they generally give a better performance.\n\n**How students perform in different topics?**","a49c9d83":"Let's now convert all the categorical variables into dummy variables.","30732d6f":"Few points to note from the above plots:\n\n1. Female students have a better attendance rate.\n2. Also they are generally more involved in the classroom activities as compared to fellow male students.\n\nThis also explains why female students generally score higher than male students. Note that, this is also in line with our general observation.\n\nThe attributes 'SectionID', 'StageID' and 'Semester' might also be related to a student's performance. We investigate that below.","cb5e034e":"So most of the students belong to 'middle level' with scores in the range 70-89. Students in 'high level' have high attendance rate whereas those in 'low level' have the lowest attendance rate. ","89fdf2dd":"And we run a loop over them.","d21d539a":"So, X is our **feature matrix** and y is the **target variable**.","80a3f608":"Most of the students are from middle school. An interesting point to note is that, numbers of male and female students coming from high school are almost comparable.\n\n**What are the popular topics among students?**","f91f4fd4":"Let's look at the data.","043fe02f":"Let's use this model to make predictions on the test set.","7e0343f6":"In this section, we will build a simple model which, given a bunch of features related to a student, will be able to predict how the student will perform.","1225963d":"Let's now see **how satisfied parents are with each school of study.**","c8515fbc":"Quite a few things to observe here :\n\n- IT has the highest demand in Kuwait (also highest among the four countries shown above).\n- Math is the most popular topic in Jordan.\n- No student from Iraq has taken IT.\n- There is a comparable demand of math, biology and chemistry in USA.","5f677010":"One interesting point to note is that the most popular course IT has received almost comparable number of good and bad reviews. Courses like chemistry, biology have got significantly more number of positive feedbacks from parents. Looking at the last two plots, it seems that parents voting for each of the school of studies have been affected by the performance of their children in those courses.\n\nIt will be interesting to monitor how all these factors affect students to take up a particular course in the future. Also studying this data closely is extremely important for the organization to expand its business, *e.g.*, understanding which topics are more popular among students and also in different countries, introducing new methods to engage more students in the classroom activities which will help them to perform better and in turn attract more students to enroll, improving structures of the courses in which students have not performed well and also have got comparatively poor reviews and so on.","4cb94554":"The first classification algorithm that we use is k nearest neighbors. One important hyper-parameter of this algorithm is n_neighbors which is the number of nearest neighbors to be considered when performing the classification. To find out the optimum value of this parameter in our case, let's generate a plot of test accuracy as a function of n_neighbors.","bd59e9cd":"Below we print the classification report of our test set.","58d43d51":"Therefore, the SVC model with linear kernel produces an accuracy score of 0.80 on the test data which is the highest accuracy score among all the algorithms that we have tried here. ","937cadfc":"The next question of interest might be - **what is the general distribution of education levels of students? Is there any gender bias?**\n\nThe attributes 'StageID' and 'gender' will help us to find the answers.","2067791b":"Before building the model, let's find out how the target classes are distributed in the dataset. This is crucial to understand in order to choose the evaluation metric to test the model's performance.","01171046":"# Analysis of students' performance\n\nWe start by importing necessary libraries.","6f67b40c":"From the above plot, we see that most of the enrollments are from Kuwait and Jordon. Although most of the students come from middle east countries, interestingly there are some enrollments from the united states.\n\nNext we look at the male to female ratio for each of these countries.","2823a2ff":"So there is no null value in the data and also most of the features are categorical in nature. ","0a2e0940":"So most of the students have enrolled for IT. Interestingly, next popular topics are two languages - French and Arabic.\n\nAnother interesting point might be to see **whether there is any influence coming from the background of a student on topic selection.**","70e9500c":"We will perform a grid search over a range of some hyper-parameters for the classification algorithms logistic regression and support vector machine to find out which algorithm works best in the present case and for what choice of parameters.\n\nBelow we define a list of algorithms and a corresponding list of parameter regions that will be used in gridsearching.","0a38165c":"## Exploratory Data Analysis\n\nThe first question that we ask is - **Where do the students currently enrolled in the online classes come from? What are the male to female ratios?**\n\nThe attributes that will help us to find answers to these are - 'NationalITy', 'PlaceofBirth' and 'gender'.","828db1ef":"On average, the number of female students as compared to male students is quite low. In case of Lebanon, number of female enrollment is almost double that of male enrollments and in case of USA, it is slightly higher."}}