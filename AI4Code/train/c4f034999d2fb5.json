{"cell_type":{"0fe656a5":"code","ec2e1a53":"code","e474198f":"code","e24da60c":"code","a7b7ddf1":"code","f11b89ee":"code","b4321b60":"code","b022f66e":"code","92d5e7a5":"code","7a3ee1fe":"code","198f1520":"code","c2ee5180":"code","a01ac7c4":"code","9bafed5e":"code","41024464":"code","db19b20d":"code","2c8198e4":"code","8e28501e":"code","bb33b3e5":"code","fd3b8ab1":"code","1a326e3e":"code","eadd3021":"code","b54ba5bd":"code","ffa0776d":"code","7924f7b6":"code","d6bf48dd":"code","ca4b67c9":"code","96782d8d":"code","89f38de4":"markdown","2602ddeb":"markdown","afeff7d4":"markdown","2d4cde55":"markdown","f6b745dd":"markdown","155ca0f1":"markdown","273d79ba":"markdown","a8c47bed":"markdown","c33c72a5":"markdown","41a2c464":"markdown","e6e31ef8":"markdown","6aa7925f":"markdown","b0dc88a8":"markdown","9e3798ce":"markdown","73c9c569":"markdown","b6d6b497":"markdown","8d015718":"markdown","6726973d":"markdown","cf3a765b":"markdown","baedcf19":"markdown","69833dc3":"markdown","bfe6bbf1":"markdown","7d10944d":"markdown","99f9b682":"markdown","bfd5b16c":"markdown","341e3d3e":"markdown","c10262ed":"markdown","492c37cf":"markdown","12e094fa":"markdown","01e05d4a":"markdown","3d4ac027":"markdown","134d633b":"markdown","41c9702c":"markdown","69a22aa1":"markdown","fe88b281":"markdown"},"source":{"0fe656a5":"# This Python 3 environment comes with many helpful analytics libraries installed\n# It is defined by the kaggle\/python Docker image: https:\/\/github.com\/kaggle\/docker-python\n# For example, here's several helpful packages to load\n\nimport numpy as np # linear algebra\nimport pandas as pd # data processing, CSV file I\/O (e.g. pd.read_csv)\n\n# Input data files are available in the read-only \"..\/input\/\" directory\n# For example, running this (by clicking run or pressing Shift+Enter) will list all files under the input directory\n\nimport os, random, math, glob\nfrom IPython.display import Image as IM\nfrom IPython.display import clear_output\nfrom matplotlib import pyplot as plt\n%matplotlib inline\nplt.rcParams['figure.figsize'] = [16, 10]\nfor dirname, _, filenames in os.walk('\/kaggle\/input'):\n    for filename in filenames:\n        print(os.path.join(dirname, filename))\n\n# You can write up to 5GB to the current directory (\/kaggle\/working\/) that gets preserved as output when you create a version using \"Save & Run All\" \n# You can also write temporary files to \/kaggle\/temp\/, but they won't be saved outside of the current session","ec2e1a53":"data = pd.read_csv('\/kaggle\/input\/ashrae-global-thermal-comfort-database-ii\/ashrae_db2.01.csv')\n#reading in the data","e474198f":"drop_col = ['Publication (Citation)','Data contributor','activity_10','activity_20','activity_30','activity_60','Air temperature (F)','Operative temperature (F)','Ta_h (F)','Ta_m (F)','Ta_l (F)','Radiant temperature (F)','Globe temperature (F)',\n    'Tg_h (F)','Tg_m (F)','Tg_l (F)','Tg_h (C)','Tg_m (C)','Tg_l (C)','Air velocity (fpm)','Velocity_h (m\/s)','Velocity_m (m\/s)','Velocity_l (m\/s)','Velocity_h (fpm)','Velocity_m (fpm)','Velocity_l (fpm)','Outdoor monthly air temperature (F)','Database']\ndata = data.drop(drop_col,axis=1)","e24da60c":"tropical_A = []\ndry_B = []\ntemperate_C = []\ncontinental_D = []\npolar_E = []\n\nfor climate in data['Koppen climate classification'].unique():\n    if climate[0] == 'A':\n        tropical_A.append(climate)\n    elif climate[0] == 'B':\n        dry_B.append(climate)\n    elif climate[0] == 'C':\n        temperate_C.append(climate)\n    elif climate[0] == 'D':\n        continental_D.append(climate)\n    elif climate[0] == 'E':\n        polar_E.append(climate)\n\ndata.loc[data['Koppen climate classification'].isin(tropical_A), 'Climate'] = 'Tropical'\ndata.loc[data['Koppen climate classification'].isin(dry_B), 'Climate'] = 'Dry'\ndata.loc[data['Koppen climate classification'].isin(temperate_C),'Climate'] = 'Temperate'\ndata.loc[data['Koppen climate classification'].isin(continental_D), 'Climate'] = 'Continental'\ndata.loc[data['Koppen climate classification'].isin(polar_E),'Climate'] = 'Polar'","a7b7ddf1":"data.head(50)","f11b89ee":"import missingno as msno\n\nmsno.matrix(data.select_dtypes(include='number'));","b4321b60":"data['Air temperature (C)'].isnull().sum()\n#we're missing about a decent chunk of the data","b022f66e":"data['Air temperature (C)'] = data.apply(\n    lambda column: column['Ta_h (C)'] if np.isnan(column['Air temperature (C)']) else column['Air temperature (C)'],\n    axis=1\n)\n\ndata = data.dropna(how='any', subset=['Air temperature (C)'])\n#at this point, we can drop any row that's missing temperature data\n\nmsno.matrix(data);","92d5e7a5":"data['Thermal sensation'].isnull().sum()","7a3ee1fe":"data['Thermal sensation'].value_counts()","198f1520":"data['Thermal comfort'].value_counts()","c2ee5180":"data['Thermal comfort'].describe()","a01ac7c4":"#data.loc[data['Thermal sensation'].isnull() & data['Thermal comfort'].astype(float) >= 4.0, 'Thermal sensation'] = 0.0\n#data['Thermal sensation'].isnull().sum()","9bafed5e":"data['Thermal sensation'].describe()\n#standard deviation is ~1.25\n#if we want to fill these data points, we could potentially use thermal preference data and replace it with a corresponding value\n#'warmer' : -1.25\n#'colder' : 1.25\n#'no change' : 0.0\n# some code that may help with this:\n# data1['Thermal sensation'] = data1['Thermal sensation'].fillna(data['Thermal preference'].map({'no change':0.0, 'warmer':-1.25,'cooler':1.25})\n\n# Thermal sensation is also missing about 10,000 data points as well, so keep that in mind\n# for now, lets drop the missing values\n# Let's call this data set \"Data Temp\"\ndataTemp = data.dropna(how='any', subset=['Thermal sensation'])\ndataTemp['Thermal sensation'].isnull().sum()","41024464":"import seaborn as sns\n\nsns.violinplot(x = dataTemp['Thermal sensation'].round(0), y=dataTemp['Air temperature (C)'])","db19b20d":"dataTemp = dataTemp[dataTemp['Air temperature (C)'].round(0) >= 10.0]\ndataTemp = dataTemp[dataTemp['Air temperature (C)'].round(0) <= 40.0]\n\ndataTemp['Air temperature (C)'].describe()","2c8198e4":"dataTemp['Country'].value_counts().plot(kind='barh', figsize=(20,6))","8e28501e":"uk = dataTemp[dataTemp['Country'] == \"UK\"]\nindia = dataTemp[dataTemp['Country'] == \"India\"]\nusa = dataTemp[dataTemp['Country'] == \"USA\"]\naustralia = dataTemp[dataTemp['Country'] == \"Australia\"]\nbrazil = dataTemp[dataTemp['Country'] == \"Brazil\"]\nchina = dataTemp[dataTemp['Country'] == \"China\"]","bb33b3e5":"def checkCorr(df):\n    return df.corr()['Thermal sensation'].sort_values(ascending=False).head(10)\n\ncheckCorr(usa)","fd3b8ab1":"countries = [uk,india,usa,australia,brazil,china]","1a326e3e":"c = []\ntemp = []\nsens = []\nfor country in countries:\n    c.append(country[\"Country\"].iloc[0])\n    temp.append(country[\"Air temperature (C)\"].mean())\n    sens.append(country[\"Thermal sensation\"].mean())\n\nmeanDF=pd.DataFrame()\nmeanDF[\"Country\"] = c\nmeanDF[\"Avg Room Temp\"] = temp\nmeanDF[\"Avg Thermal Sensation\"] = sens\nmeanDF.head(6)\n\n# meanData = pd.DataFrame(np.array([c, temp, sens]),columns=['Country', 'Mean Room Temperature (C)', 'Mean Thermal Sensation'])\n","eadd3021":"med_0to1 = []\nmed_1to0 = []\nmed_gt1 = []\nmed_lt1 = []\nmed_0 = []\n\nfor country in countries:\n    med_0to1.append(country[(country[\"Thermal sensation\"] <= 1.0) & (country[\"Thermal sensation\"] > 0.0)][\"Air temperature (C)\"].median())\n    med_1to0.append(country[(country[\"Thermal sensation\"] >= -1.0) & (country[\"Thermal sensation\"] < 0.0)][\"Air temperature (C)\"].median())\n    med_gt1.append(country[country[\"Thermal sensation\"] > 1.0][\"Air temperature (C)\"].median())\n    med_lt1.append(country[country[\"Thermal sensation\"] < -1.0][\"Air temperature (C)\"].median())\n    med_0.append(country[country[\"Thermal sensation\"] == 1.0][\"Air temperature (C)\"].median())\n    \npct_0to1 = []\npct_1to0 = []\npct_gt1 = []\npct_lt1 = []\npct_0 = []\n\nfor country in countries:\n    pct_0to1.append(country[(country[\"Thermal sensation\"] <= 1.0) & (country[\"Thermal sensation\"] > 0.0)].shape[0]\/country.shape[0] * 100)\n    pct_1to0.append(country[(country[\"Thermal sensation\"] >= -1.0) & (country[\"Thermal sensation\"] < 0.0)].shape[0]\/country.shape[0] * 100)\n    pct_gt1.append(country[country[\"Thermal sensation\"] > 1.0][\"Air temperature (C)\"].shape[0]\/country.shape[0] * 100)\n    pct_lt1.append(country[country[\"Thermal sensation\"] < -1.0][\"Air temperature (C)\"].shape[0]\/country.shape[0] * 100)\n    pct_0.append(country[country[\"Thermal sensation\"] == 0.0][\"Air temperature (C)\"].shape[0]\/country.shape[0] * 100)\n    \nmeanDF[\"Median Temp 0 to 1.0\"] = med_0to1\nmeanDF[\"Median Temp -1.0 to 0\"] = med_1to0\nmeanDF[\"Median Temp > 1.0\"] = med_gt1\nmeanDF[\"Median Temp < -1.0\"] = med_lt1\nmeanDF[\"Median Temp 0.0\"] = med_0\n\nmeanDF[\"Pct Temp 0 to 1.0\"] = pct_0to1\nmeanDF[\"Pct Temp -1.0 to 0\"] = pct_1to0\nmeanDF[\"Pct Temp > 1.0\"] = pct_gt1\nmeanDF[\"Pct Temp < 1.0\"] = pct_lt1\nmeanDF[\"Pct Temp 0.0\"] = pct_0\n\nmeanDF.head(6)","b54ba5bd":"df = pd.DataFrame({'Avg Room Temp': temp,'% Positive': pct_0}, index=c)\naxes = df.plot.bar(rot=0, subplots=True)\naxes[1].legend(loc=0)","ffa0776d":"country = uk #change as needed\nin_cols = country['PMV']\nin_cols\n\n\n\nfrom sklearn.metrics import mean_squared_error\nfrom math import sqrt\ncountry1 = country.dropna(subset=['PMV','Thermal sensation'])\n#np.any(np.isnan(country['Thermal sensation']))\nprint(\"RMSE:\", sqrt(mean_squared_error(country1['Thermal sensation'][-1000:], country1['PMV'][-1000:])))\n","7924f7b6":"med_0to1 = country[(country[\"Thermal sensation\"] <= 1.0) & (country[\"Thermal sensation\"] > 0.0)][\"Air temperature (C)\"].median()\nmed_1to0 = country[(country[\"Thermal sensation\"] >= -1.0) & (country[\"Thermal sensation\"] < 0.0)][\"Air temperature (C)\"].median()\nmed_gt1 = country[(country[\"Thermal sensation\"] > 1.0)][\"Air temperature (C)\"].median()\nmed_lt1 = country[(country[\"Thermal sensation\"] < -1.0)][\"Air temperature (C)\"].median()\nmed_0 = country[(country[\"Thermal sensation\"] == 0.0)][\"Air temperature (C)\"].median()\n\npct_0to1 = country[(country[\"Thermal sensation\"] <= 1.0) & (country[\"Thermal sensation\"] > 0.0)].shape[0]\/country.shape[0]\npct_1to0 = country[(country[\"Thermal sensation\"] >= -1.0) & (country[\"Thermal sensation\"] < 0.0)].shape[0]\/country.shape[0]\npct_0 = country[country[\"Thermal sensation\"] == 0.0][\"Air temperature (C)\"].shape[0]\/country.shape[0]\nleftLine = med_0 - ((pct_1to0 \/ (pct_0 + pct_1to0)) * (med_0 - med_1to0))\nrightLine = med_0 + ((pct_0to1 \/ (pct_0 + pct_0to1)) * (med_0to1 - med_0))\n\n\nprediction = []\nfor temp in country['Air temperature (C)']:\n    if(temp > med_gt1):\n        prediction.append(2.0)\n    elif(temp > rightLine):\n        prediction.append(1.0)\n    elif(temp > leftLine):\n        prediction.append(0.0)\n    elif(temp > med_lt1):\n        prediction.append(-1.0)\n    else:\n        prediction.append(-2.0)\n\ncountry['Prediction'] = prediction\nprint(\"RMSE:\", sqrt(mean_squared_error(country['Thermal sensation'][-1000:], country['Prediction'][-1000:])))\n\n        ","d6bf48dd":"country = usa\ncountry['City'].value_counts().plot(kind='barh', figsize=(20,6))","ca4b67c9":"\nhonolulu = country[country['City'] == \"Honolulu\"]\nphilly = country[country['City'] == \"Philadelphia\"]\nsanfran = country[country['City'] == \"San Francisco\"]\ngrandrap = country[country['City'] == \"Grand Rapids\"]\n\ncities = [honolulu,philly,sanfran,grandrap]\nc2 = []\ntemp2 = []\nsens2 = []\nfor city in cities:\n    c2.append(city[\"City\"].iloc[0])\n    temp2.append(city[\"Air temperature (C)\"].mean())\n    sens2.append(city[\"Thermal sensation\"].mean())\n\nmeanDF=pd.DataFrame()\nmeanDF[\"City\"] = c2\nmeanDF[\"Avg Room Temp\"] = temp2\nmeanDF[\"Avg Thermal Sensation\"] = sens2\nmeanDF.head(4)","96782d8d":"med_0to1 = []\nmed_1to0 = []\nmed_gt1 = []\nmed_lt1 = []\nmed_0 = []\n\nfor city in cities:\n    med_0to1.append(city[(city[\"Thermal sensation\"] <= 1.0) & (city[\"Thermal sensation\"] > 0.0)][\"Air temperature (C)\"].median())\n    med_1to0.append(city[(city[\"Thermal sensation\"] >= -1.0) & (city[\"Thermal sensation\"] < 0.0)][\"Air temperature (C)\"].median())\n    med_gt1.append(city[city[\"Thermal sensation\"] > 1.0][\"Air temperature (C)\"].median())\n    med_lt1.append(city[city[\"Thermal sensation\"] < -1.0][\"Air temperature (C)\"].median())\n    med_0.append(city[city[\"Thermal sensation\"] == 1.0][\"Air temperature (C)\"].median())\n    \npct_0to1 = []\npct_1to0 = []\npct_gt1 = []\npct_lt1 = []\npct_0 = []\n\nfor city in cities:\n    pct_0to1.append(city[(city[\"Thermal sensation\"] <= 1.0) & (city[\"Thermal sensation\"] > 0.0)].shape[0]\/city.shape[0] * 100)\n    pct_1to0.append(city[(city[\"Thermal sensation\"] >= -1.0) & (city[\"Thermal sensation\"] < 0.0)].shape[0]\/city.shape[0] * 100)\n    pct_gt1.append(city[city[\"Thermal sensation\"] > 1.0][\"Air temperature (C)\"].shape[0]\/city.shape[0] * 100)\n    pct_lt1.append(city[city[\"Thermal sensation\"] < -1.0][\"Air temperature (C)\"].shape[0]\/city.shape[0] * 100)\n    pct_0.append(city[city[\"Thermal sensation\"] == 0.0][\"Air temperature (C)\"].shape[0]\/city.shape[0] * 100)\n    \nmeanDF[\"Median Temp 0 to 1.0\"] = med_0to1\nmeanDF[\"Median Temp -1.0 to 0\"] = med_1to0\nmeanDF[\"Median Temp > 1.0\"] = med_gt1\nmeanDF[\"Median Temp < -1.0\"] = med_lt1\nmeanDF[\"Median Temp 0.0\"] = med_0\n\nmeanDF[\"Pct Temp 0 to 1.0\"] = pct_0to1\nmeanDF[\"Pct Temp -1.0 to 0\"] = pct_1to0\nmeanDF[\"Pct Temp > 1.0\"] = pct_gt1\nmeanDF[\"Pct Temp < 1.0\"] = pct_lt1\nmeanDF[\"Pct Temp 0.0\"] = pct_0\n\nmeanDF.head(4)","89f38de4":"Now that the data is segmented, we can start calculating some basic stats for each country","2602ddeb":"Couple things we can glean from this plot of our data:\n\n1. As expected, higher air temperature values led to higher thermal sensation value\n2. There are some potential outliers that we should handle\n\nNotice that there are Air temperature values below 10\u00ba C, and some values above 40\u00ba C. Even if these are legitimate results, they're not super useful to us. It seems unlikely that a building would ever be intentionally kept at those temperatures by preference, regardless of regional factors.","afeff7d4":"This notebook aims to provide means to explore the conditions that individuals from different corners of the world prefer for their indoor spaces. This involves preparing the dataset to focus in on 3 different types of information:\n\n* Location where these trials took place (What is climate like, who provided the data)\n* Internal temperature and other conditions of the room itself\n* Preference of those who were surveyed at that location (too hot, too cold)\n\nThis is just one of many potential areas to focus in on within this dataset, so feel free to edit this one or check out any of the other kernels!","2d4cde55":"# Column Description Reference","f6b745dd":"It's a little tricky to use comfort to fill in for preference, since if the patient was uncomfortable, we don't know whether it was because they found the room was too hot or too cold. Let's look at the type of responses we got for column:","155ca0f1":"From reading these descriptions, there are certainly a few columns that we will likely not need for this query.\n* That said, feel free to re-add in these columns as needed","273d79ba":"Another quick piece of cleaning that can be done is to re-organize\/generalize the climate column to help us make smaller, simpler groups of biomes\n* We were able to accomplish by taking the Koppen Climate Classification fo each data point and using that to group each data point into one of five categories\n\n1. Tropical\n2. Dry\n3. Temperate\n4. Continental\n5. Polar","a8c47bed":"The Honolulu and San Francisco difference in temperature vs sensation is definitely interesting, feel free to try some other combinations!","c33c72a5":"Next, using the Seaborn package, let's make a Violin plot of our Thermal Sensation and Temperature data. This plot will show us the rough distribution of temperatures that prompted each response (-3 to 3).","41a2c464":"Some more interesting notes from this:\n\n* Australia and the US had very similar median temperatures for each of these responses, and roughly similar distributions of each type of response. The UK responded similarly, although their temperatures are shifted slightly lower. It's worth noting that Australia and the US had almost identical average room temperatures in the data, and that both countries have a wide range of climates. Could these similar conditions be the reason that the two nations seem to have similar preferences?\n* China had by far the largest range between temperatures that caused subjects to say the room was significantly warm or cold. It took a median of 19.7\u00ba for subjects to say the room was too cold, and 29.4\u00baC to say the room was too warm. That leaves a 10\u00ba range that did not seem to frequently make subjects uncomfortable. Is it a cultural difference or just happenstance?\n* Brazil's subjects seemed to be pretty comfortable. Only around 10% of subjects from Brazil thought the room was significantly too warm or too cold. In fact, just over 50% thought the room temperature was just right, even though the average room temperature for trials in Brazil was greater than the median \"too hot\" temperature for the UK, USA, and Australia","e6e31ef8":"This is obviously very crude, but nonetheless interesting. There's a few interesting notes from this generalized data:\n\n1. Despite having the lowest actual average temperatures, UK participants reported the highest (or 'hottest') thermal sensation\n2. The USA was the only group that leaned towards their room being too cold rather than too warm\n3. Even with slight differences in temperature, Brazil, China, and Australia had roughly the same average sensation","6aa7925f":"Honolulu and Philly definitely have differing climates, let's compare their results with a couple other cities!","b0dc88a8":"This removed a few thousand data points, but again, those are pretty extreme temperatures for an indoor space. Feel free to expand or condense that range as you see fit!","9e3798ce":"* We're missing some temperature data.\n* To salvage those points, we could use all the various readings to fill one temperature column.\n* The SET metric is a really interesting one, as it factors in clothing, air speed, metabolic rate, and relative humidity to get a standardized value\n* It may be worth exploring some of these other metrics in another notebook\n\n* For this analysis, however, let's start with this just the standard **\"Air Temperature\"** data","73c9c569":"- Thermal Sensation: ASHRAE thermal sensation vote, from -3 (cold) to +3 (hot)\n- Thermal Sensation acceptability: 0 = unacceptable, 1 = acceptable (Do the participants find the temperature acceptable)\n- Thermal preference: cooler, no changes, warmer (Would the participants want the room to be cooler, no change or warmer)\n- Air Movement acceptability: 0 = unacceptable, 1 = acceptable (Does the air movement they are feeling indoor feels acceptable)\n- Air movement preference: less, no change, more\n- Thermal Comfort: From 1 (very uncomfortable) to 6 (very comfortable)\n- PMV (Predicted Mean Vote):  mean response of a larger group of people according the ASHRAE thermal sense scale: +3 hot. +2 warm. +1 slightly warm. 0 neutral.\n- PPD (Predicted Percentage of Dissatisfied):  is an index that predicts the percentage of thermally dissatisfied people who feel too cool or too warm, and is calculated from the predicted mean vote (PMV)\n- SET (Standard Effective Temperature in Celsius degree): In simpler terms, SET is a temperature metric that factors in relative humidity, mean radiant temperature, and air velocity, while also considering the anticipated activity rate and clothing levels.\n- CLO: Intrinsic clothing ensemble insulation of the subject (clo): Thermal Insulation provided by clothing\n- MET: Average Metabolic rate of Subject\n- activity_10: Metabolic Activity in the last 10 minutes\n- activity_20: Metabolic Activity in the last 20 minutes\n- activity_30: Metabolic Activity in the last 30 minutes\n- activity_60: Metabolic Activity in the last 60 minutes\n- Air temperature (C): Air temperature measured in the occupied zone in Celsius degree\n- Ta_h (C): Air temperature at 1.1 m above the floor in Celsius degree\n- Ta_m (C): Air temperature at 0.6 m above the floor in Celsius degree\n- Ta_l (C): Air temperature at 0.1 m above the floor in Celsius degree\n- Operative Temperature (C): Calculated operative temperature in the occupied zone in Celsius degree\n- Radiant Temperature (C): Radiant temperature measured in the occupied zone in Celsius degree\n- Globe Temperature (C): Globe temperature measured in the occupied zone in Celsius degree\n- Tg_h (C): Globe temperature at 1.1 m above the floor in Celsius degree\n- Tg_m (C): Globe temperature at 0.6 m above the floor in Celsius degree\n- Tg_l (C): Globe temperature at 0.1 m above the floor in Celsius degree\n- Relative Humidity:\n- Humidity Preference: \n- Humidity Sensation: 3-= very dry, 2 = dry, 1 = slightly dry, 0 = just right, -1 = slightly humid, -2 = humid, -3 = very humid\n- Air velocity (m\/s): Air speed in meter\/seconds\n- Velocity_h: Air speed at 1.1 m above the floor in meter per second\n- Velocity_m: Air speed at 0.6 m above the floor in meter per second\n- Velocity_l: Air speed at 0.1 m above the floor in meter per second\n- Subject's height\n- Subject's weight\n- Blind(curtain): State of blinds or curtains if known (0 = open, 1 = closed); otherwise NA\n- Fan: Fan mode if known (0 = off, 1 = on); otherwise NA\n- Window: State of window if known (0 = open, 1 = closed); otherwise NA\n- Door: State of doors if known (0 = open, 1 = closed); otherwise NA\n- Heater: Heater mode if known (0 = off, 1 = on); otherwise NA\n- Outdoor monthly air temperature (C): Outdoor monthly average temperature when the field study was done in Celsius degree\n- Database: Database 1 or 2","b6d6b497":"# Next Steps\n\nWith these basic observations on the thermal preferences of different regions, there are a few different applications that might be interesting:\n\n1. Could we use this data to find a useful way predict thermal sensation? The PMV column, predicted mean value, attempts to do this, but we found that there is a stronger correlation with air temperature alone than the PMV column, and it gives us a decimal, while the vast majority most of our thermal sensation responses are integers. Could we improve upon this prediction model or develop a newer, better one that factors in the subject's location?\n\n2. Can we take an even closer zoom in on these segmented data sets? Perhaps if we have enough data, we could compare region by region or city by city? For example, do national locations with differing climates, like New York and Phoenix, exhibit the same differences we saw between international locations like India and the UK? Or is there something besides local climate or average room temperature that drives thermal sensation?\n","8d015718":"There's two ways we can go with this:\n    1. Continue with this collection of Air temperature data, dropping the data points that are missing a value\n    2. Fill in these data points using other values (as much as we can), giving us a larger but slightly generalized dataset\n\nLet's try option 2, but let's be picky about what values we actually choose to use, since we still have ~100,000 filled data points. \n\n* The Fahrenheit values could be useful, but you'll find that columns with Fahrenheit also have celsius values, so no dice\n\n* We can notice in the missing values matrix that at the bottom, there is a large section which has a temperature data in the \"Ta_h (C)\" column, but is missing air temperature. Ta_h (C) gives us the air temperature at 1.1m above the floor. This seems like a reasonable substitute for a missing air temperature value.","6726973d":"# Option 1: Predicting\nLet's start with Option 1. We can check how good the estimates made using PMV were using root mean squared error","cf3a765b":"We can see that the RMSE is slightly higher, but what is nice is that this prediction model does essentially give each data point a verdict on what subjects in the room would likely think of the temperature. Instead of providing a decimal point between values, this model gives an integer from -2 to 2. We could interpret this as:\n\n* -2: Room is uncomfortably cold\n* -1: Room is slightly chilly\n* 0: Room is a good temperature\n* 1: Room is slightly warm\n* 2: Room is uncomfortably hot\n\nConsidering that the RMSE was still very similar to the PMV values despite the crudeness of this model, it definitely seems that grouping by region provided some value. If we did some missing value handling, we could try some ensemble methods to find an actual fit for the sensation column. That could be a great next step!","baedcf19":"Now let's take a look at the preference data reported for each of these locations. The relevant columns are:\n\n**Thermal Sensation**\n* Thermal Sensation data tells us whether the subject found the room too warm, too cold, or alright\n* The scale is -3.0 to 3.0, where -3 is the room is way too cold, 3 the room is way too hot, and 0 means it is acceptable\n\n**Thermal Preference**\n* More straightforward, qualitative value. It asks: Would like the room to be warmer, cooler, no change?\n\n**Thermal Sensation Acceptability**\n* Simplest metric, boolean for if the room's temperature is acceptable: 1 = acceptable, 0 = unacceptable\n\n**Thermal Comfort**\n* Allowed the subject to rate the comfort from 1 (uncomfortable) to 6 (comfortable)\n\nThermal Sensation gives us the most information, so let's see how complete of a dataset we can get with that column","69833dc3":"# Calculating Stats by Country","bfe6bbf1":"We can see that a large portion of our data comes from the UK, India, USA, Australia, Brazil, and China. This is a decent spread covering different parts of the world, although it's also worth looking at any data from the Middle Earth or Sub-Saharan Africa. That said, these six can serve as a good starting point, especially given the amount of data from each nation. \n\nWe can start our comparisons by focusing in on these six nations. (Feel free to change\/add code to grab data from other countries or group countries together)","7d10944d":"Air temperature and other temperature measurements (naturally) have  the strongest correlations with thermal sensation for each of the data sets. There are a few other columns to keep in mind:\n\n* Predicted Mean Vote (PMV): This column attempts to predict thermal sensation, but it looks like air temperature alone does a better job in many cases\n* Standard Effective Temperature (SET): This metric is a weighted temperature that factors in humidity, air speed, clothing, and metabolic rate. Could be something interesting to explore in the future\n* Fan\/Window: These mark whether a fan is used in the room or a window is open. These definitely influence how a room feels, but could there be a placebo effect that makes people less likely to call a room too warm if a fan is on?","99f9b682":"We see in both columns that the most common response is the person is comfortable, with slightly uncomfortable being the next most common. I think it's reasonable to say if someone responded with a 5 or a 6 for comfort, meaning they are comfortable or very comfortable with the room's temperature, then they would have responded with a 0 for sensation as well. Let's use that to fill in some of those missing points\n\n* Note: To do this, we have to fix up the thermal comfort column a bit, since the column is currently filled 'objects' (looks like strings). We need these values to be floats to merge with thermal sensation","bfd5b16c":"Thermal Sensation is missing some values\n\n* From the missing value matrix it looks like Thermal Sensation Acceptability is missing even more\n* Thermal Preference appears to be missing most of the same values as well\n\nThermal Comfort appears to hold data in all the places where Thermal Sensation is missing values. Perhaps they asked the person to rate their comfort instead of sensation for those trials?","341e3d3e":"Something that might be interesting would be to see what temperatures triggered certain responses in terms of thermal sensation. For example, a response above 1.0 represents someone finding a room more than a little too warm. What temperature illicits this response? Is it different in different populations? To investigate this, I decided to break up sensation responses into 5 groups\n\n1. 0.0 (Room temperature is acceptable)\n2. 0 to 1.0 (Room is a little too warm)\n3. -1.0 to <0 (Room is a little too cold)\n4. 1.0+ (Room is noticeably warm)\n5. <-1.0 (Room is noticeably cold)\n\nI set the cut off at +\/- 1.0 because aside from 0.0, 1.0 and -1.0 were two of the most common responses. This suggested to me that most participants were hesitant to give a response outside that range unless the room's condition was noticeably uncomfortable. With these ranges set, I decided to look at the median temperature rather than the mean, since I didn't want outliers shifting the value significantly. This will hopefully give an idea of what temperature it typically takes to illicit different sensation responses in different parts of the world.\n\n* I also decided to find how the responses were distributed for each country by calculating the ratio of the total responses that each type of response had. This will give some context to the median values and offer some insight into how often each group picked each type of response.","c10262ed":"With the data now sectioned off, we can do some quick correlation checks to see if there are any other non-temperature data points that seem to significantly influence thermal sensation. This will help with any tuning we want to accomplish.","492c37cf":"# Regional Effects on Thermal Preferences","12e094fa":"There are various definitions for the 'acceptable' range of temperatures of a building. In their 2018 Housing Health guidelines, the World Health Organization proposed 18\u00ba C as a minimum temperature for a \"safe and well-balanced indoor temperature to protect the health of general populations. On the other end, maximum acceptable indoor temperatures ranged from 25-30\u00ba C. We could potentially limit our data to temperatures in that range, but for now, let's stick with a more general approach\n\nFor the sake of preserving data while still removing outliers, let's focus on Air temperature values between **10\u00baC and 40\u00baC**, adding a little rounding to avoid removing too much","01e05d4a":"Now let's try making predictions using the medians and country-specific distribution we found.","3d4ac027":"We can start by reading in the data:","134d633b":"# Option 2: City by City\n","41c9702c":"Now that we have the data focused in a little bit, we can start breaking it into regional data to start to understand how different parts of the world prefer their indoor temperatures!\n\nWe can start by looking at where our data comes from...","69a22aa1":"# Re-organizing Columns\n* We can start by focusing specifically on air temperature, so we will drop some of the humidity data and use mostly the raw values of air temperature\n* We'll stick with Celsius for our measurements (The fahrenheit measurements didn't appear to fill in any missing data anyways)\n* We're going to generalize the climates a little better to simplify the type of environment we're looking at\n\nI attached a description of each column below to show all the different pieces of information available to work with from the data set. For now, we're going to focus on a smaller subset of columns, but there is obviously a lot to glean for all the different sections of the data set!","fe88b281":"Now that we have the data we want and an idea of what it looks like, we can start cleaning and tuning it to focus in on the reported temperatures and thermal sensations."}}