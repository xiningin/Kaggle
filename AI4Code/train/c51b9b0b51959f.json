{"cell_type":{"147e9ff8":"code","1c34afdd":"code","4586dc8e":"code","b725ba76":"code","f9db85d9":"code","becd799b":"code","4c6bbc37":"code","69d68722":"code","0642f812":"code","e7a0abda":"code","6c446f7c":"code","c74d8ef6":"code","03aca979":"code","7b223497":"code","54c35bff":"code","9c753bb5":"code","ec0258a7":"code","1a55b11e":"code","5be437bd":"code","bd0afcd8":"code","36ca1c61":"code","93cfc782":"code","9436ec2d":"code","f37eda6b":"code","567dfdce":"code","e45bf3ed":"code","4d14f889":"code","2970f1cf":"code","c91aeb1c":"code","06836437":"code","98b95dfe":"code","fd632ea9":"code","486a7a56":"code","5d0e1134":"code","857cab19":"code","aadcd0da":"code","88bb3886":"code","4adccc84":"code","cfd367a7":"code","201c1cbc":"code","43b492e2":"code","e10c4c4b":"code","426ac7f2":"code","98260221":"code","7f426f24":"code","40c35ad9":"code","bd076d61":"code","35384840":"code","36d6dbee":"code","6d8a8b0a":"code","4eec01ba":"code","bdb2141c":"code","87162500":"code","9309f4aa":"code","05c6adfd":"code","2cbb25f3":"code","6310447b":"code","dc72c7d3":"code","80c7f2f9":"code","5ecdd3ca":"code","9033b687":"code","0e81f47b":"code","b555496b":"code","9e3cc16c":"code","66976f10":"code","119072e0":"code","7db43131":"code","bc27e761":"code","d8b66667":"code","c1f1387c":"code","71540e79":"code","f12d8545":"code","351b6981":"code","bd3896ac":"code","3db3ae57":"code","fc37041e":"code","c1b6b732":"code","ddb13360":"code","4b83ce68":"code","1c5fe203":"code","1585ef3d":"code","1d05ebfd":"markdown","052a0de3":"markdown","8777b6b2":"markdown","f7ce2148":"markdown","8eef075a":"markdown","8a11941f":"markdown","fcfa8c0f":"markdown"},"source":{"147e9ff8":"!conda install -c conda-forge tabula-py --yes","1c34afdd":"import numpy as np\nimport pandas as pd\nimport os\nimport matplotlib.pyplot as plt","4586dc8e":"import tabula\ndfs = tabula.read_pdf('https:\/\/www.mhlw.go.jp\/content\/10601000\/000838220.pdf', lattice=True, pages ='all')\nfor i,df in enumerate(dfs):\n    print(i)\n    display(df)","b725ba76":"len(dfs)","f9db85d9":"dfs[3]","becd799b":"print(dfs[3].columns.tolist())","4c6bbc37":"col0=['No', '\u5e74\u9f62\\r(\u63a5\u7a2e\\r\u6642)', '\u6027\u5225', '\u63a5\u7a2e\u65e5', '\u767a\u751f\u65e5', '\u30ed\u30c3\u30c8\u756a\u53f7', '\u63a5\u7a2e\u56de\u6570', '\u57fa\u790e\u75be\u60a3\u7b49', '\u6b7b\u56e0\u7b49\\r(\u5831\u544a\u8005\u306b\u3088\u308b\u898b\u89e3\u30fb\u8003\u5bdf\u7b49)', '\u5831\u544a\u533b\u304c\\r\u6b7b\u56e0\u7b49\u306e\u5224\u65ad\u306b\\r\u81f3\u3063\u305f\u691c\u67fb', '\u56e0\u679c\u95a2\u4fc2\\r(\u5831\u544a\u533b\u8a55\u4fa1)', '\u4ed6\u8981\u56e0\u306e\u53ef\u80fd\\r\u6027\u306e\u6709\u7121\\r(\u5831\u544a\u533b\u8a55\u4fa1)']\nprint(col0)","69d68722":"### START\ndf0=dfs[3][col0]\ndf0","0642f812":"### END\ndfs[126]","e7a0abda":"#2nd page to last page\nfor i,df in enumerate(dfs[4:127]):\n    if '\u767a\u751f\u65e5' in df.columns.tolist():\n        df=df[col0]\n        df0=pd.concat([df0,df])\n    else:\n        print(i+4,dfs[i+4].columns.tolist())","6c446f7c":"df0","c74d8ef6":"df1=df0.fillna('N').reset_index(drop=True)\ndf1","03aca979":"dropN=[]\nfor i in range(len(df1)):\n    if df1.iloc[i,0]=='N':\n        dropN+=[i]\nprint(dropN)\nprint(len(dropN))","7b223497":"df2=df1.drop(index=dropN,axis=0)\ndf3=df2.reset_index(drop=True)\ndf3","54c35bff":"data=df3[['\u5e74\u9f62\\r(\u63a5\u7a2e\\r\u6642)','\u6027\u5225','\u63a5\u7a2e\u65e5','\u767a\u751f\u65e5','\u63a5\u7a2e\u56de\u6570','\u6b7b\u56e0\u7b49\\r(\u5831\u544a\u8005\u306b\u3088\u308b\u898b\u89e3\u30fb\u8003\u5bdf\u7b49)']]\ndata","9c753bb5":"data['sex']=data['\u6027\u5225'].map({'\u5973':0,'\u7537':1})\ndata['times']=data['\u63a5\u7a2e\u56de\u6570'].map({'1\u56de\u76ee':1,'2\u56de\u76ee':2})\ndata","ec0258a7":"data['\u5e74\u9f62\\r(\u63a5\u7a2e\\r\u6642)'].unique()","1a55b11e":"age=[]\n\nfor item in data['\u5e74\u9f62\\r(\u63a5\u7a2e\\r\u6642)']:\n    \n    if item in ['\u9ad8\u9f62\u8005','\u4e0d\u660e','\u6210\u4eba']:\n        age+=['N'] \n    elif item=='\u203b\\r78\u6b73\\r\u6ce8:4\u6708\\r30\u65e5\u306e\\r\u5408\u540c\u90e8\\r\u4f1a\u8cc7\u6599\\r\u3067\u306f\u3001\\r\u300c78\u300d\u3092\\r\u300c88\u300d\u3068\u8aa4\\r\u8a18\u8f09\u3002':\n        age+=[78] \n    elif item=='90\u6b73\\r(~5\/26\\r\u306e\u60c5\u5831\\r\u306b\u57fa\u3065\\r\u304f)':\n        age+=[90]        \n    elif item=='69\u6b73\\r\u219261\u6b73\\r(~6\/23\\r\u306e\u60c5\u5831\\r\u306b\u57fa\u3065\u304d\\r\u8a02\u6b63)':\n        age+=[61]       \n    elif item=='71\u6b73\\r\u219272\u6b73\\r(~6\/23\\r\u306e\u60c5\u5831\\r\u306b\u57fa\u3065\u304d\\r\u8a02\u6b63)':\n        age+=[72] \n    elif item=='70\u6b73\u4ee3\\r\u219274\u6b73\\r(~8\/25\\r\u306e\u60c5\u5831\\r\u306b\u57fa\u3065\\r\u304f)':\n        age+=[74]\n    elif item=='81\u6b73\\r\u219282\u6b73\\r(~7\/21\\r\u306e\u60c5\u5831\\r\u306b\u57fa\u3065\\r\u304f)':\n        age+=[82]           \n    elif item=='60\u6b73\u4ee3\\r\u219264\u6b73\\r\u203b9\u670810\\r\u65e5No.887\\r\u3068\u7d71\u5408':\n        age+=[64]       \n    elif item=='86\u6b73\\r\u219287\u6b73\\r(~7\/7\\r\u306e\u60c5\u5831\\r\u306b\u57fa\u3065\\r\u304f)':\n        age+=[87]       \n    elif item=='70\u6b73\u4ee3\\r\u219274\u6b73\\r(~8\/4\\r\u306e\u60c5\u5831\\r\u306b\u57fa\u3065\\r\u304f)':\n        age+=[74]    \n    elif item=='81\u6b73\\r\u219282\u6b73\\r(~7\/21\\r\u306e\u60c5\u5831\\r\u306b\u57fa\u3065':\n        age+=[82]    \n    elif item=='\u4e0d\u660e\\r\u219292\u6b73\\r(~8\/25\\r\u306e\u60c5\u5831\\r\u306b\u57fa\u3065':\n        age+=[92]              \n    elif item=='60\u6b73\u4ee3\\r\u219265\u6b73\\r(~9\/10\\r\u306e\u60c5\u5831\\r\u306b\u57fa\u3065\\r\u304f)':\n        age+=[65]           \n    elif item=='70\u6b73\u4ee3\\r\u219278\u6b73\\r(~8\/4\\r\u306e\u60c5\u5831\\r\u306b\u57fa\u3065\\r\u304f)':\n        age+=[78]\n    elif item=='92\u6b73\\r\u219291\u6b73\\r(~8\/25\\r\u306e\u60c5\u5831\\r\u306b\u57fa\u3065\\r\u304f)':\n        age+=[91]     \n    elif item=='70\u6b73\\r\u219271\u6b73\\r(~9\/10\\r\u306e\u60c5\u5831\\r\u306b\u57fa\u3065\\r\u304f)':\n        age+=[71]           \n    elif item=='88\u6b73\\r\u219286\u6b73\\r(~9\/10\\r\u306e\u60c5\u5831\\r\u306b\u57fa\u3065\\r\u304f)':\n        age+=[86]                \n    elif item=='80\u6b73\u4ee3':\n        age+=['N']        \n    elif item=='70\u6b73\u4ee3':\n        age+=['N']\n    elif item=='60\u6b73\u4ee3':\n        age+=['N']        \n    elif item=='60\u6b73\u4ee3\\r\u5f8c\u534a':\n        age+=['N']\n    elif item=='50\u6b73\u4ee3':\n        age+=['N']\n    elif item=='\u30b3\u30e1\u30f3\u30c8':\n        age+=['N']      \n    elif item=='\u5bfe\u5fdc\u3059\u308bMedDRA PT':\n        age+=['N'] \n    elif item=='\u8a55\u4fa1\u4e0d\u80fd':\n        age+=['N']\n    elif item=='\u9ad8\u9f62\u8005\\r\u219291\u6b73\\r(~10\/1\\r\u306e\u60c5\u5831\\r\u306b\u57fa\u3065\\r\u304f)':\n        age+=['N']  \n    elif item=='N':\n        age+=['N']        \n    else:\n        item2=item.replace('\u6b73','')\n        age+=[int(item2)]\n\ndata['age']=age\ndata['age'].unique()","5be437bd":"dayvac=data['\u63a5\u7a2e\u65e5'].unique().tolist()\ndayvac","bd0afcd8":"N_list0=[ '\u4e0d\u660e','N','2021\u5e745\u6708','\u30b3\u30e1\u30f3\u30c8','\u75c7\u4f8bNo','2021\u5e745\u6708\u4e0b\u65ec','2021\u5e746\u6708(\u65e5\u4ed8\\r\u4e0d\u660e)',]","36ca1c61":"date0=[]\nfor item in data['\u63a5\u7a2e\u65e5']:    \n    \n    if item in N_list0:\n        date0+=['N']\n    elif item== '\u4e0d\u660e\\r\u21922021\u5e746\u670814\\r\u65e5\\r(~8\/25\u306e\u60c5\u5831\u306b\\r\u57fa\u3065\u304f)':\n        date0+=['2021\/6\/14']    \n    elif item=='2021\u5e745\u6708(\u65e5\u4ed8\\r\u4e0d\u660e)\\r\u21922021\u5e745\u670831\\r\u65e5\\r(~8\/25\u306e\u60c5\u5831\u306b\\r\u57fa\u3065\u304f)':\n        date0+=['2021\/5\/31']  \n    elif item=='\u4e0d\u660e\\r\u21922021\u5e746\u67083\u65e5\\r(~8\/25\u306e\u60c5\u5831\u306b\\r\u57fa\u3065\u304f)':\n        date0+=['2021\/6\/3'] \n    elif item=='2021\/5\/14\\r\u6ce8:6\u670823\u65e5\u306e\u5408\\r\u540c\u90e8\u4f1a\u8cc7\u6599\u3067\\r\u306f\u3001\u300c14\u65e5\u300d\u3092\u300c16\\r\u65e5\u300d\u3068\u8aa4\u8a18\u8f09\u3002':\n        date0+=['2021\/5\/14']    \n    elif item=='\u4e0d\u660e\\r\u21922021\u5e744\u670820\\r\u65e5\\r(~7\/7\u306e\u60c5\u5831\u306b\\r\u57fa\u3065\u304f)':\n        date0+=['2021\/4\/20']       \n    elif item=='\u4e0d\u660e\\r\u21922021\u5e745\u670821\\r\u65e5\\r(~7\/21\u306e\u60c5\u5831\u306b\\r\u57fa\u3065\u304f)':\n        date0+=['2021\/5\/21']  \n    elif item== '2021\u5e745\u670826\u65e5\\r(~7\/21\u306e\u60c5\u5831\u306b\\r\u57fa\u3065\u304f)':\n        date0+=['2021\/5\/26']  \n    elif item== '\u4e0d\u660e\\r\u21922021\u5e745\u670826\\r\u65e5\\r(~8\/4\u306e\u60c5\u5831\u306b\\r\u57fa\u3065\u304f)':\n        date0+=['2021\/5\/26']     \n    elif item=='2021\/5\/20\\r(~8\/25\u306e\u60c5\u5831\u306b\\r\u57fa\u3065\u304f)':\n        date0+=['2021\/5\/20']     \n    elif item== '\u4e0d\u660e\\r\u21922021\u5e746\u67086\u65e5\\r\u203b9\u670810\u65e5No.887\\r\u3068\u7d71\u5408':\n        date0+=['2021\/6\/6']   \n    elif item== '2021\u5e746\u6708\u672b\\r\u21922021\u5e746\u670825\\r\u65e5\\r(~10\/1\u306e\u60c5\u5831\u306b\\r\u57fa\u3065\u304f)':\n        date0+=['2021\/6\/25']    \n    elif item== '2021\u5e746\u670816\u65e5\\r\u21922021\u5e746\u670810\\r\u65e5\\r(~10\/1\u306e\u60c5\u5831\u306b\\r\u57fa\u3065\u304f)':\n        date0+=['2021\/6\/10']     \n    else:\n        item2=item.replace('\u5e74','\/').replace('\u6708','\/').replace('\u65e5','')\n        date0+=[item2]\n        \ndata['date vaccination']=date0\ndata['date vaccination'].unique()","93cfc782":"daydie=data['\u767a\u751f\u65e5'].unique().tolist()\ndaydie","9436ec2d":"#\u4e0d\u660e\nN_list1=['\u4e0d\u660e(\u63a5\u7a2e\u7d041\u30f5\\r\u6708\u5f8c)', '\u4e0d\u660e(\u63a5\u7a2e10\u65e5\\r\u5f8c)', '2021\u5e747\u6708', '\u4e0d\u660e(\u63a5\u7a2e14\u65e5\\r\u5f8c)', '2021\u5e748\u6708(\u63a5\u7a2e\\r\u7d0410\u65e5\u5f8c)', '\u4e0d\u660e(\u63a5\u7a2e18\u65e5\\r\u5f8c)', '\u4e0d\u660e(\u63a5\u7a2e2\u65e5\\r\u5f8c)', '\u4e0d\u660e(\u63a5\u7a2e\u5f8c1\u9031\\r\u9593\u4ee5\u4e0a)', '2021\u5e746\u6708(\u63a5\u7a2e\\r\u5f8c3\u65e5\u4ee5\u5185)', '\u4e0d\u660e(\u63a5\u7a2e\u65e5)', '2021\u5e746\u6708(\u63a5\u7a2e\\r\u7d0413\u65e5\u5f8c)', '\u4e0d\u660e(\u63a5\u7a2e5\u65e5\\r\u5f8c)', '\u4e0d\u660e(\u63a5\u7a2e3\u65e5\\r\u5f8c)', '\u4e0d\u660e(\u767a\u75c7\u306f6\u6708\\r23\u65e5)', '2021\u5e747\u6708(\u65e5\u4ed8\\r\u4e0d\u660e)', '\u4e0d\u660e(\u63a5\u7a2e9\u65e5\\r\u5f8c)', '\u4e0d\u660e(\u63a5\u7a2e4\u65e5\\r\u5f8c)', '\u4e0d\u660e(\u63a5\u7a2e2\u9031\u9593\\r\u5f8c)', '\u4e0d\u660e', 'N', '\u4e0d\u660e\\r\u2192\u4e0d\u660e(2021\u5e746\\r\u6708)\\r(~7\/7\u306e\u60c5\u5831\u306b\\r\u57fa\u3065\u304f)', '2021\/6\/19(\u63a8\\r\u5b9a)\\r\u203b\u691c\u8996\u533b\u304b\u3089\u306e\\r\u5831\u544a\u306b\u57fa\u3065\u304f\u3002', '\u4e0d\u660e(2021\u5e745\u6708\\r29\u65e5\u53c8\u306f30\u65e5)', '\u4e0d\u660e(\u63a5\u7a2e8\u65e5\\r\u5f8c)', '\u4e0d\u660e(2021\u5e746\u6708\\r22\u65e5\u4ee5\u524d)', '\u4e0d\u660e(\u63a5\u7a2e\u5f8c1\u9031\\r\u9593\u4ee5\u5185)', '2021\u5e747\u6708(\u65e5\u4ed8\\r\u4e0d\u660e\u3001\u30ef\u30af\u30c1\u30f3\u63a5\\r\u7a2e5\u65e5\u76ee)', '\u4e0d\u660e(\u63a5\u7a2e12\u6642\\r\u9593\u5f8c)', '\u4e0d\u660e(\u63a5\u7a2e\u306e1\u9031\\r\u9593\u4ee5\u4e0a\u5f8c)', '2021\u5e746\u670821\u65e5\\r\u53c8\u306f22\u65e5', '2021\u5e747\u670816\u65e5\\r\u9803', '\u6ce82\\r\u8a55\u4fa1\u306b\u7528\u3044\u305f\u5831\u544a\u5185\u5bb9',]","f37eda6b":"#\u5224\u660e\nN_list2=['2021\/5\/16\\r\u6ce8:5\u670826\u65e5\u306e\u5408\\r\u540c\u90e8\u4f1a\u8cc7\u6599\u3067\\r\u306f\u3001\u6b7b\u4ea1\u65e5\u306e\u300c16\\r\u65e5\u300d\u3092\u75c7\u72b6\u767a\u751f\u65e5\\r\u306e\u300c8\u65e5\u300d\u3068\u8aa4\u8a18\\r\u8f09\u3002',\n '2021\/5\/17\\r(~7\/7\u306e\u60c5\u5831\u306b\\r\u57fa\u3065\u304f)',\n '2021\/7\/28\\r\u21922021\/7\/29\\r(~8\/25\u306e\u60c5\u5831\u306b\\r\u57fa\u3065\u304f)',\n '2021\u5e743\u670827\u65e5\\r\u21922021\u5e743\u670829\\r\u65e5\\r(~8\/25\u306e\u60c5\u5831\u306b\\r\u57fa\u3065\u304f)',\n '2021\u5e745\u670827\u65e5\\r\u21922021\u5e745\u670828\\r\u65e5\\r(~7\/21\u306e\u60c5\u5831\u306b\\r\u57fa\u3065\u304d\u8a02\u6b63)',\n '2021\u5e745\u670830\u65e5\\r\u6ce8:6\u670823\u65e5\u306e\u5408\\r\u540c\u90e8\u4f1a\u8cc7\u6599\u3067\\r\u306f\u3001\u300c30\u65e5\u300d\u3092\u300c28\\r\u65e5\u300d\u3068\u8aa4\u8a18\u8f09\u3002',\n '2021\u5e746\u6708(\u65e5\u4ed8\\r\u4e0d\u660e)\\r\u21922021\u5e746\u670814\\r\u65e5\\r(~8\/25\u306e\u60c5\u5831\u306b\\r\u57fa\u3065\u304f)',\n '2021\u5e746\u6708(\u65e5\u4ed8\\r\u4e0d\u660e)\\r\u21922021\u5e746\u670823\\r\u65e5\\r(~8\/25\u306e\u60c5\u5831\u306b\\r\u57fa\u3065\u304f)',\n '2021\u5e746\u670814\u65e5\\r\u21922021\u5e746\u670815\\r\u65e5\\r(~7\/7\u307e\u3067\u306e\u60c5\\r\u5831\u306b\u57fa\u3065\u304f)',\n '2021\u5e746\u670814\u65e5\\r\u21922021\u5e746\u670816\\r\u65e5\\r(~9\/10\u306e\u60c5\u5831\u306b\\r\u57fa\u3065\u304f)',\n '2021\u5e746\u670816\u65e5\\r\u21922021\u5e746\u670815\\r\u65e5\\r(~8\/25\u306e\u60c5\u5831\u306b\\r\u57fa\u3065\u304f)',\n '2021\u5e746\u670818\u65e5\\r\u21922021\u5e746\u670819\\r\u65e5\\r(~8\/25\u306e\u60c5\u5831\u306b\\r\u57fa\u3065\u304f)',\n '2021\u5e746\u670826\u65e5\\r\u21922021\u5e746\u670827\\r\u65e5\\r(~8\/25\u306e\u60c5\u5831\u306b\\r\u57fa\u3065\u304f)',\n '2021\u5e746\u670830\u65e5\\r\u21922021\u5e747\u67084\u65e5\\r(~8\/4\u306e\u60c5\u5831\u306b\\r\u57fa\u3065\u304f)',\n '2021\u5e747\u67082\u65e5\\r\u21922021\u5e747\u670817\\r\u65e5\\r(~8\/25\u306e\u60c5\u5831\u306b\\r\u57fa\u3065\u304f)',\n '2021\u5e747\u67085\u65e5\\r\u21922021\u5e747\u67083\u65e5\\r(~9\/10\u306e\u60c5\u5831\u306b\\r\u57fa\u3065\u304f)',\n '2021\u5e748\u670817\u65e5\\r\u21922021\u5e748\u670814\\r\u65e5\\r(~9\/10\u306e\u60c5\u5831\u306b\\r\u57fa\u3065\u304f)',\n '\u4e0d\u660e\\r\u21922021\u5e746\u67083\u65e5\\r(~8\/25\u306e\u60c5\u5831\u306b\\r\u57fa\u3065\u304f)',\n '\u4e0d\u660e\\r\u21922021\u5e747\u670826\\r\u65e5\\r(~9\/10\u306e\u60c5\u5831\u306b\\r\u57fa\u3065\u304f)',\n '\u4e0d\u660e\\r\u21922021\u5e747\u67085\u65e5\\r(~8\/25\u306e\u60c5\u5831\u306b\\r\u57fa\u3065\u304f)',\n '\u4e0d\u660e(\u63a5\u7a2e\u5f8c\u7d04\\r10\u65e5)\\r\u21922021\u5e746\u67081\u65e5\\r(~7\/21\u306e\u60c5\u5831\u306b\\r\u57fa\u3065\u304f)',\n '\u4e0d\u660e(\u63a5\u7a2e\u6570\u65e5\\r\u5f8c)\\r\u21922021\u5e746\u670825\\r\u65e5\\r(~8\/4\u306e\u60c5\u5831\u306b\\r\u57fa\u3065\u304f)',\n '\u4e0d\u660e(\u63a5\u7a2e\u6570\u65e5\\r\u5f8c)\\r\u21922021\u5e746\u670825\\r\u65e5\\r(~9\/10\u306e\u60c5\u5831\u306b\\r\u57fa\u3065\u304f)',\n '\u4e0d\u660e(\u63a5\u7a2e\u7d042\u9031\\r\u9593\u5f8c\u30012021\u5e746\\r\u6708)\\r\u21922021\u5e746\u670811\\r\u65e5\\r(~8\/4\u306e\u60c5\u5831\u306b\\r\u57fa\u3065\u304f)',\n '\u4e0d\u660e(\u63a5\u7a2e\u7fcc\u65e5)\\r\u21922021\u5e746\u67087\u65e5\\r\u203b9\u670810\u65e5No.887\\r\u3068\u7d71\u5408',\n '\u4e0d\u660e\\r\u21922021\u5e746\u670825\\r\u65e5\\r(~10\/1\u306e\u60c5\u5831\u306b\\r\u57fa\u3065\u304f)',\n '\u4e0d\u660e(\u63a5\u7a2e3\u65e5\\r\u5f8c)\\r\u21922021\u5e746\u670826\\r\u65e5\u9803\\r(~10\/1\u306e\u60c5\u5831\u306b\\r\u57fa\u3065\u304f)',\n        ]","567dfdce":"date1=[]\nfor item in data['\u767a\u751f\u65e5']:\n    if item in N_list1:\n        date1+=['N'] \n    elif item=='2021\/6\/14\\r\u21922021\/6\/16\\r\\r(~9\/10\u306e\u60c5\u5831\u306b\\r\u57fa\u3065\u304f)':\n        date1+=['2021\/6\/16']  \n    elif item=='2021\u5e743\u670827\u65e5\\r\u21922021\u5e743\u670829\\r\u65e5\\r(~8\/25\u306e\u60c5\u5831\u306b\\r\u57fa\u3065\u304f)':\n        date1+=['2021\/3\/29']          \n    elif item== '2021\/5\/16\\r\u6ce8:5\u670826\u65e5\u306e\u5408\\r\u540c\u90e8\u4f1a\u8cc7\u6599\u3067\\r\u306f\u3001\u6b7b\u4ea1\u65e5\u306e\u300c16\\r\u65e5\u300d\u3092\u75c7\u72b6\u767a\u751f\u65e5\\r\u306e\u300c8\u65e5\u300d\u3068\u8aa4\u8a18\\r\u8f09\u3002':\n        date1+=['2021\/5\/16']           \n    elif item=='2021\/5\/17\\r(~7\/7\u306e\u60c5\u5831\u306b\\r\u57fa\u3065\u304f)':\n        date1+=['2021\/5\/17']               \n    elif item=='2021\u5e745\u670827\u65e5\\r\u21922021\u5e745\u670828\\r\u65e5\\r(~7\/21\u306e\u60c5\u5831\u306b\\r\u57fa\u3065\u304d\u8a02\u6b63)':\n        date1+=['2021\/5\/28']      \n    elif item=='2021\u5e746\u670814\u65e5\\r\u21922021\u5e746\u670815\\r\u65e5\\r(~7\/7\u307e\u3067\u306e\u60c5\\r\u5831\u306b\u57fa\u3065\u304f)':\n        date1+=['2021\/6\/15']           \n    elif item=='\u4e0d\u660e\\r\u21922021\u5e746\u67083\u65e5\\r(~8\/25\u306e\u60c5\u5831\u306b\\r\u57fa\u3065\u304f)':\n        date1+=['2021\/6\/3']               \n    elif item=='\u4e0d\u660e(\u63a5\u7a2e\u5f8c\u7d04\\r10\u65e5)\\r\u21922021\u5e746\u67081\u65e5\\r(~7\/21\u306e\u60c5\u5831\u306b\\r\u57fa\u3065\u304f)':\n        date1+=['2021\/6\/1']           \n    elif item=='2021\u5e745\u670830\u65e5\\r\u6ce8:6\u670823\u65e5\u306e\u5408\\r\u540c\u90e8\u4f1a\u8cc7\u6599\u3067\\r\u306f\u3001\u300c30\u65e5\u300d\u3092\u300c28\\r\u65e5\u300d\u3068\u8aa4\u8a18\u8f09\u3002':\n        date1+=['2021\/5\/30']\n    elif item=='\u4e0d\u660e(\u63a5\u7a2e\u7d042\u9031\\r\u9593\u5f8c\u30012021\u5e746\\r\u6708)\\r\u21922021\u5e746\u670811\\r\u65e5\\r(~8\/4\u306e\u60c5\u5831\u306b\\r\u57fa\u3065\u304f)':\n        date1+=['2021\/6\/11']           \n    elif item=='2021\u5e746\u670816\u65e5\\r\u21922021\u5e746\u670815\\r\u65e5\\r(~8\/25\u306e\u60c5\u5831\u306b\\r\u57fa\u3065\u304f)':\n        date1+=['2021\/6\/15']               \n    elif item=='2021\u5e746\u670826\u65e5\\r\u21922021\u5e746\u670827\\r\u65e5\\r(~8\/25\u306e\u60c5\u5831\u306b\\r\u57fa\u3065\u304f)':\n        date1+=['2021\/6\/27']           \n    elif item=='2021\u5e746\u670830\u65e5\\r\u21922021\u5e747\u67084\u65e5\\r(~8\/4\u306e\u60c5\u5831\u306b\\r\u57fa\u3065\u304f)':\n        date1+=['2021\/7\/4']      \n    elif item=='\u4e0d\u660e(\u63a5\u7a2e\u6570\u65e5\\r\u5f8c)\\r\u21922021\u5e746\u670825\\r\u65e5\\r(~8\/4\u306e\u60c5\u5831\u306b\\r\u57fa\u3065\u304f)':\n        date1+=['2021\/6\/25']  \n    elif item=='2021\u5e746\u6708(\u65e5\u4ed8\\r\u4e0d\u660e)\\r\u21922021\u5e746\u670823\\r\u65e5\\r(~8\/25\u306e\u60c5\u5831\u306b\\r\u57fa\u3065\u304f)':\n        date1+=['2021\/6\/23']           \n    elif item=='2021\u5e746\u6708(\u65e5\u4ed8\\r\u4e0d\u660e)\\r\u21922021\u5e746\u670814\\r\u65e5\\r(~8\/25\u306e\u60c5\u5831\u306b\\r\u57fa\u3065\u304f)':\n        date1+=['2021\/6\/14']       \n    elif item=='2021\u5e746\u670818\u65e5\\r\u21922021\u5e746\u670819\\r\u65e5\\r(~8\/25\u306e\u60c5\u5831\u306b\\r\u57fa\u3065\u304f)':\n        date1+=['2021\/6\/19']           \n    elif item=='2021\u5e747\u67082\u65e5\\r\u21922021\u5e747\u670817\\r\u65e5\\r(~8\/25\u306e\u60c5\u5831\u306b\\r\u57fa\u3065\u304f)':\n        date1+=['2021\/7\/17']  \n    elif item=='2021\/7\/28\\r\u21922021\/7\/29\\r(~8\/25\u306e\u60c5\u5831\u306b\\r\u57fa\u3065\u304f)':\n        date1+=['2021\/7\/29']    \n    elif item==' 2021\u5e746\u670814\u65e5\\r\u21922021\u5e746\u670816\\r\u65e5\\r(~9\/10\u306e\u60c5\u5831\u306b\\r\u57fa\u3065\u304f)':\n        date1+=['2021\/6\/16']       \n    elif item=='2021\u5e747\u67085\u65e5\\r\u21922021\u5e747\u67083\u65e5\\r(~9\/10\u306e\u60c5\u5831\u306b\\r\u57fa\u3065\u304f)':\n        date1+=['2021\/7\/3']        \n    elif item=='2021\u5e748\u670817\u65e5\\r\u21922021\u5e748\u670814\\r\u65e5\\r(~9\/10\u306e\u60c5\u5831\u306b\\r\u57fa\u3065\u304f)':\n        date1+=['2021\/8\/14']       \n    elif item=='\u4e0d\u660e\\r\u21922021\u5e747\u670826\\r\u65e5\\r(~9\/10\u306e\u60c5\u5831\u306b\\r\u57fa\u3065\u304f)':\n        date1+=['2021\/7\/26']            \n    elif item=='\u4e0d\u660e\\r\u21922021\u5e747\u67085\u65e5\\r(~8\/25\u306e\u60c5\u5831\u306b\\r\u57fa\u3065\u304f)':\n        date1+=['2021\/7\/5']       \n    elif item=='\u4e0d\u660e(\u63a5\u7a2e\u6570\u65e5\\r\u5f8c)\\r\u21922021\u5e746\u670825\\r\u65e5\\r(~9\/10\u306e\u60c5\u5831\u306b\\r\u57fa\u3065\u304f)':\n        date1+=['2021\/6\/25']        \n    elif item=='\u4e0d\u660e(\u63a5\u7a2e\u7fcc\u65e5)\\r\u21922021\u5e746\u67087\u65e5\\r\u203b9\u670810\u65e5No.887\\r\u3068\u7d71\u5408':\n        date1+=['2021\/6\/7'] \n    elif item=='\u4e0d\u660e\\r\u21922021\u5e746\u670825\\r\u65e5\\r(~10\/1\u306e\u60c5\u5831\u306b\\r\u57fa\u3065\u304f)':\n        date1+=['2021\/6\/25']         \n    elif item=='\u4e0d\u660e(\u63a5\u7a2e3\u65e5\\r\u5f8c)\\r\u21922021\u5e746\u670826\\r\u65e5\u9803\\r(~10\/1\u306e\u60c5\u5831\u306b\\r\u57fa\u3065\u304f)':\n        date1+=['2021\/6\/26']        \n    elif item== '2021\u5e746\u670821\u65e5\\r\u53c8\u306f22\u65e5\\r\u21922021\u5e746\u670821\\r\u65e5\\r(~10\/1\u306e\u60c5\u5831\u306b\\r\u57fa\u3065\u304f)':\n        date1+=['2021\/6\/21']            \n    elif item== '2021\u5e746\u670814\u65e5\\r\u21922021\u5e746\u670816\\r\u65e5\\r(~9\/10\u306e\u60c5\u5831\u306b\\r\u57fa\u3065\u304f)':\n        date1+=['2021\/6\/16']  \n    else:\n        item2=item.replace('\u5e74','\/').replace('\u6708','\/').replace('\u65e5','')\n        date1+=[item2]    \n\ndata['date mortality']=date1\ndata['date mortality'].unique()","e45bf3ed":"for i in range(len(data)):\n    if '2021\/6\/14\\r\u21922021\/6\/16' in data.loc[i,'date mortality']:\n        print(i)","4d14f889":"#data.loc[503,'date mortality']='2021\/6\/16'\n#data.loc[503,'date mortality']","2970f1cf":"data['date mortality'].unique()","c91aeb1c":"Drop1=[]\nfor i,item in enumerate(data['date vaccination']):\n    if item =='N':\n        Drop1+=[i]\nprint(Drop1)","06836437":"Drop2=[]\nfor i,item in enumerate(data['date mortality']):\n    if item =='N':\n        Drop2+=[i]\nprint(Drop2)","98b95dfe":"Drop3=sorted(set(Drop1+Drop2))\nprint(Drop3)","fd632ea9":"data=data.drop(index=Drop3,axis=0)\ndata","486a7a56":"data['date vaccination2']=pd.to_datetime(data['date vaccination'])\ndata['date vaccination2']","5d0e1134":"data['date mortality2']=pd.to_datetime(data['date mortality'])\ndata['date mortality2']","857cab19":"data['days']=data['date mortality2']-data['date vaccination2']\ndata","aadcd0da":"data3=data.copy()\ndata3","88bb3886":"data2=data['days'].value_counts()\nprint(data2)","4adccc84":"days_df0=data2\ndays_df0=pd.DataFrame(days_df0)\ndays_df0[1]=data2.index.days\ndays_df0.columns=['n','days after vaccination']\ndays_df1=days_df0[days_df0['days after vaccination']<=21][0<=days_df0['days after vaccination']]\ndays_df2=days_df1.sort_values(['days after vaccination'])\ndays_df3=days_df2.set_index('days after vaccination')","cfd367a7":"days_df3","201c1cbc":"days_df3.plot.bar(y=['n'],alpha=0.8,figsize=(12,6))\nplt.title(\"Case fatality after vaccination of Pfizer's in Japan (-Sep12) \",size=24)\nplt.ylabel('days after vaccination')\nplt.ylabel('cases')\nplt.savefig('.\/FATAL_pfizer_sep12.jpg')\nplt.show()","43b492e2":"datak=data[data['\u6b7b\u56e0\u7b49\\r(\u5831\u544a\u8005\u306b\u3088\u308b\u898b\u89e3\u30fb\u8003\u5bdf\u7b49)']=='\u304f\u3082\u819c\u4e0b\u51fa\u8840']\ndata2k=datak['days'].value_counts()","e10c4c4b":"days_df0=data2k\ndays_df0=pd.DataFrame(days_df0)\ndays_df0[1]=data2k.index.days\ndays_df0.columns=['n','days after vaccination']\ndays_df1=days_df0[days_df0['days after vaccination']<=21][0<=days_df0['days after vaccination']]\ndays_df2=days_df1.sort_values(['days after vaccination'])\ndays_df3=days_df2.set_index('days after vaccination')","426ac7f2":"days_df3.plot.bar(y=['n'],alpha=0.8,figsize=(12,6))\nplt.title(\"Case subarachnoid hemorrhage after vaccination of Pfizer's in Japan (-Sep12) \",size=18)\nplt.ylabel('days after vaccination')\nplt.ylabel('cases')\nplt.savefig('.\/FATAL_pfizer_sep12.jpg')\nplt.show()","98260221":"words=[]\nfor item0 in list(data['\u6b7b\u56e0\u7b49\\r(\u5831\u544a\u8005\u306b\u3088\u308b\u898b\u89e3\u30fb\u8003\u5bdf\u7b49)'].unique()):\n    words+=[str(item0).replace('\\r','').replace('\u306e\u60c5\u5831\u306b\u57fa\u3065\u304f','').replace('\u307e\u3067','').replace('\u4e0d\u660e\u2192','')\n        .replace('\/','').replace('0','').replace('1','').replace('2','').replace('3','').replace('4','')\n        .replace('5','').replace('6','').replace('7','').replace('8','').replace('9','').replace('()','')\n        .replace('(~)','').replace('\u203b','').replace('(\u4e07)','').replace('(~\u6708\u65e5)','').replace('(\u5ea6)','')]\nwords2=pd.Series(words).unique()\nprint(sorted(list(words2)))","7f426f24":"query=['\u5165\u6d74','\u8001\u8870','\u81ea\u6bba','\u547c\u5438','\u5fc3','\u8133','\u8840','\u80ba','\u4e8b\u6545']\nquery_number=[]\nquery_txt=[]\nfor item in query:\n    t=0\n    for item2 in data['\u6b7b\u56e0\u7b49\\r(\u5831\u544a\u8005\u306b\u3088\u308b\u898b\u89e3\u30fb\u8003\u5bdf\u7b49)'].to_list():\n        if item in item2:\n            query_txt+=[[item,item2]]\n            t+=1\n    query_number+=[t]\n    \ndf=pd.DataFrame(query)\ndf[1]=query_number\ndf.columns=['\u30ad\u30fc\u30ef\u30fc\u30c9','\u4f8b\u6570']\ndf1=df.sort_values('\u4f8b\u6570',ascending=False).reset_index(drop=True)\ndf1","40c35ad9":"query_txt","bd076d61":"items=[]\nfor item in query_txt:\n    if item[0]=='\u8840':\n         items+=[item[1]]\nprint(pd.Series(items).value_counts()[0:10])","35384840":"items2=[]\nfor item in query_txt:\n    if item[0]=='\u5fc3':\n         items2+=[item[1]]\nprint(pd.Series(items2).value_counts()[0:10])","36d6dbee":"data3","6d8a8b0a":"data4=data3[['sex','times','age']].reset_index(drop=True)\ndata4","4eec01ba":"N=data4[data4['age']=='N'].index.tolist()\nN","bdb2141c":"data4=data4.drop(index=data4.index[N])\ndata4['number']=1\ndata4['age_band']=data4['age'].apply(lambda x:int(x\/10))\ndata4","87162500":"data4['age'].min()","9309f4aa":"data3[data3['age']==22]","05c6adfd":"data5a=data4.groupby('age_band').sum()\ndata5a","2cbb25f3":"data5a.plot.bar(y=['number'],alpha=0.8,figsize=(12,6))\nplt.title(\"Case fatality after vaccination of Pfizer's by age band\",size=24)\nplt.xlabel('age band')\nplt.ylabel('cases')\nplt.show()","6310447b":"data5b=data4.groupby('times').sum()\ndata5b","dc72c7d3":"data5b.plot.bar(y=['number'],alpha=0.8,figsize=(12,6))\nplt.title(\"Case fatality after vaccination of Pfizer's by vacination times\",size=24)\nplt.xlabel('times')\nplt.ylabel('cases')\nplt.show()","80c7f2f9":"data5c=data4.groupby('sex').sum()\ndata5c","5ecdd3ca":"data5c.plot.bar(y=['number'],alpha=0.8,figsize=(12,6))\nplt.title(\"Case fatality after vaccination of Pfizer's by sex\",size=24)\nplt.xlabel('sex')\nplt.ylabel('cases')\nplt.show()\n# 0:female,1:male","9033b687":"del data\ndel data2","0e81f47b":"dfs = tabula.read_pdf('https:\/\/www.mhlw.go.jp\/content\/10601000\/000838221.pdf', lattice=True, pages ='all')\nfor i,df in enumerate(dfs):\n    print(i)\n    display(df)","b555496b":"len(dfs)","9e3cc16c":"dfs[3]","66976f10":"col0","119072e0":"col1=['No',\n '\u5e74\u9f62\\r(\u63a5\u7a2e\\r\u6642)',\n '\u6027\u5225',\n '\u63a5\u7a2e\u65e5',\n '\u767a\u751f\u65e5',\n '\u30ed\u30c3\u30c8\u756a\u53f7',\n '\u63a5\u7a2e\u56de\u6570',\n '\u57fa\u790e\u75be\u60a3\u7b49',\n '\u6b7b\u56e0\u7b49\\r(\u5831\u544a\u8005\u306b\u3088\u308b\u898b\u89e3\u30fb\u8003\u5bdf\u7b49)',\n '\u5831\u544a\u533b\u304c\\r\u6b7b\u56e0\u7b49\u306e\u5224\u65ad\u306b\\r\u81f3\u3063\u305f\u691c\u67fb',\n '\u56e0\u679c\u95a2\u4fc2\\r(\u5831\u544a\u533b\u8a55\u4fa1)',\n]\nprint(col1)","7db43131":"df0=dfs[3][col1]\ndf0","bc27e761":"for i,df in enumerate(dfs[4:7]):\n    if '\u767a\u751f\u65e5' in df.columns.tolist():\n        df=df[col1]\n        df0=pd.concat([df0,df])\n    else:\n        print(i+4,dfs[i+4].columns.tolist())","d8b66667":"df1=df0.fillna('N').reset_index(drop=True)\ndf1","c1f1387c":"N=[]\nfor i in range(len(df1)):\n    if df1.iloc[i,0]=='N':\n        N+=[i]\nprint(N)\nprint(len(N))","71540e79":"df2=df1.drop(index=N,axis=0)\ndf3=df2.reset_index(drop=True)\ndf3\n\ndata=df3[['\u5e74\u9f62\\r(\u63a5\u7a2e\\r\u6642)','\u6027\u5225','\u63a5\u7a2e\u65e5','\u767a\u751f\u65e5','\u63a5\u7a2e\u56de\u6570','\u6b7b\u56e0\u7b49\\r(\u5831\u544a\u8005\u306b\u3088\u308b\u898b\u89e3\u30fb\u8003\u5bdf\u7b49)']]\ndata","f12d8545":"data['sex']=data['\u6027\u5225'].map({'\u5973':0,'\u7537':1})\ndata['times']=data['\u63a5\u7a2e\u56de\u6570'].map({'1\u56de\u76ee':1,'2\u56de\u76ee':2})\ndata","351b6981":"age=[]\nfor item in data['\u5e74\u9f62\\r(\u63a5\u7a2e\\r\u6642)']:\n    item2=item.replace('\u6b73','')\n    if len(item2)<4 and item2!='\u4e0d\u660e':\n        age+=[int(item2)]\n    else:\n        age+=['N']\ndata['age']=age\ndata","bd3896ac":"date0=[]\nfor item in data['\u63a5\u7a2e\u65e5']:\n    if '\u8a55\u4fa1\u4e0d\u80fd' in item:\n        date0+=['N']\n    else:\n        date0+=[item.replace('\u5e74','\/').replace('\u6708','\/').replace('\u65e5','')]\ndata['date vaccination']=date0","3db3ae57":"date1=[]\nfor i,item in enumerate(data['\u767a\u751f\u65e5']):\n    if '\u4e0d\u660e' in item:\n        date1+=['N']\n    elif '\u4e0d\u80fd' in item:\n        date1+=['N']\n    else:    \n        date1+=[item.replace('\u5e74','\/').replace('\u6708','\/').replace('\u65e5','')]\ndata['date mortality']=date1\ndata","fc37041e":"print(data[data['date vaccination']=='N'].index.tolist())\nprint(data[data['date mortality']=='N'].index.tolist())","c1b6b732":"data=data.drop(index=[6,22],axis=0)\ndata=data.reset_index(drop=True)","ddb13360":"data['date vaccination2']=pd.to_datetime(data['date vaccination'])\ndata['date mortality2']=pd.to_datetime(data['date mortality'])\ndata['days']=data['date mortality2']-data['date vaccination2']\ndata","4b83ce68":"data2m=data['days'].value_counts()\nprint(data2m)","1c5fe203":"days_df0=data2m\ndays_df0=pd.DataFrame(days_df0)\ndays_df0[1]=data2m.index.days\ndays_df0.columns=['n','days after vaccination']\ndays_df1=days_df0[days_df0['days after vaccination']<=21][0<=days_df0['days after vaccination']]\ndays_df2=days_df1.sort_values(['days after vaccination'])\ndays_df3=days_df2.set_index('days after vaccination')","1585ef3d":"days_df3.plot.bar(y=['n'], alpha=0.8, figsize=(12,6))\nplt.title(\"Case fatality after vaccination of Moderna's in Japan (-Sep12)\" , size=24)\nplt.ylabel('days after vaccination')\nplt.ylabel('cases')\nplt.savefig('.\/FATAL_moderna_sep12.jpg')\nplt.show()","1d05ebfd":"## Data Source\n* https:\/\/www.mhlw.go.jp\/stf\/shingi2\/0000208910_00031.html\n* https:\/\/www.mhlw.go.jp\/content\/10601000\/000838220.pdf (\u30d5\u30a1\u30a4\u30b6\u30fc)\n* https:\/\/www.mhlw.go.jp\/content\/10601000\/000838221.pdf (\u30e2\u30c7\u30eb\u30ca)","052a0de3":"### **\u6b7b\u56e0\u7b49(\u5831\u544a\u8005\u306b\u3088\u308b\u898b\u89e3\u30fb\u8003\u5bdf\u7b49)**","8777b6b2":"#### \u8cc7\u65991-3-1\n## **\u30b3\u30df\u30ca\u30c6\u30a3\u7b4b\u6ce8(\u30d5\u30a1\u30a4\u30b6\u30fc\u682a\u5f0f\u4f1a\u793e)\u63a5\u7a2e\u5f8c\u306b\u6b7b\u4ea1\u3068\u3057\u3066\u5831\u544a\u3055\u308c\u305f\u4e8b\u4f8b**\n#### \u4ee4\u548c3\u5e742\u670817\u65e5\u304b\u3089\u4ee4\u548c3\u5e749\u670824\u65e5\u307e\u3067\u306e\u5831\u544a\u5206","f7ce2148":"# **\u7b2c69\u56de\u539a\u751f\u79d1\u5b66\u5be9\u8b70\u4f1a\u4e88\u9632\u63a5\u7a2e\u30fb\u30ef\u30af\u30c1\u30f3\u5206\u79d1\u4f1a\u526f\u53cd\u5fdc\u691c\u8a0e\u90e8\u4f1a**\n### \u7b2c18\u56de \u85ac\u4e8b\u30fb\u98df\u54c1\u885b\u751f\u5be9\u8b70\u4f1a\u85ac\u4e8b\u5206\u79d1\u4f1a \u533b\u85ac\u54c1\u7b49\u5b89\u5168\u5bfe\u7b56\u90e8\u4f1a\u5b89\u5168\u5bfe\u7b56\u8abf\u67fb\u4f1a\uff08\u5408\u540c\u958b\u50ac\uff09\u3000\n#### \u4ee4\u548c\uff13\u5e7410\u67081\u65e5\uff08\u91d1\uff09","8eef075a":"### **\u5e74\u9f62\u30fb\u63a5\u7a2e\u56de\u6570\u30fb\u6027\u5225**","8a11941f":"## Number of fatal cases was extremely high 1 day after vaccination and relatively high until 7 days after vaccination, which might indicate that these fatalities are related to vaccination. \n* If not related to vaccination, number shoud be almost constant on days. \n* Even if the relation between vaccination and fatality cannot be judged in each case, it is apparent that there is a relation between them as a whole.\n* This tendency is similar to the result on 'The Vaccine Adverse Event Reporting System (VAERS)'.\n* Check also: https:\/\/www.kaggle.com\/stpeteishii\/covid19-vaccination-risk\/data","fcfa8c0f":"#### \u8cc7\u65991-3-2\n## **\u30e2\u30c7\u30eb\u30ca\u7b4b\u6ce8(\u6b66\u7530\u85ac\u54c1\u5de5\u696d\u682a\u5f0f\u4f1a\u793e)\u63a5\u7a2e\u5f8c\u306b\u6b7b\u4ea1\u3068\u3057\u3066\u5831\u544a\u3055\u308c\u305f\u4e8b\u4f8b**\n#### \u4ee4\u548c3\u5e745\u670822\u65e5\u304b\u3089\u4ee4\u548c3\u5e749\u670824\u65e5\u307e\u3067\u306e\u5831\u544a\u5206"}}