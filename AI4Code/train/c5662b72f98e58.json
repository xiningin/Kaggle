{"cell_type":{"adc1ae77":"code","643d22ed":"code","004ce5b0":"code","4556d7ac":"code","111fecab":"code","97e2d857":"code","0399661f":"code","222a9630":"code","3213041b":"code","3203c770":"code","f22dba07":"code","b057b454":"code","40cc37f8":"code","bc8773a7":"code","22cd8ecf":"markdown","83ed7c65":"markdown","aa116f8c":"markdown","e9775104":"markdown","886c6a09":"markdown","3df90224":"markdown","7675daa4":"markdown"},"source":{"adc1ae77":"import numpy as np \nimport pandas as pd\nimport seaborn as sns\nimport plotly.express as px\nimport matplotlib.pyplot as plt\nimport plotly.graph_objects as go\nfrom plotly.subplots import make_subplots\n\nimport os\nfor dirname, _, filenames in os.walk('\/kaggle\/input'):\n    for filename in filenames:\n        print(os.path.join(dirname, filename))","643d22ed":"df_19 = pd.read_csv('..\/input\/flight-delay-prediction\/Jan_2019_ontime.csv')\ndf_19.drop('Unnamed: 21',axis=1,inplace=True)\ndf_19.head()","004ce5b0":"df_19.info()","4556d7ac":"plot1 = df_19.groupby('DAY_OF_MONTH')['CANCELLED'].count()\nfig = go.Figure()\n\nfig.add_trace(go.Bar(x=plot1.index, y=plot1.values, name='Cancel bar',opacity=0.9,marker_color='#a5afff'))\n\nfig.add_trace(go.Scatter(x=plot1.index, y=plot1.values, line=dict(color='red'), name='Cancel trend'))\nfig.update_layout(\n    title=\"Cancelled flights vs day of month\",\n    xaxis_title=\"Day of month\",\n    yaxis_title=\"Cancel count\",\n)\nfig.show()","111fecab":"plot2 = df_19.groupby('DAY_OF_MONTH')['DIVERTED'].count()\nfig2 = go.Figure()\n\nfig2.add_trace(go.Bar(x=plot2.index, y=plot2.values, name='Diverted bar',opacity=0.6,marker_color='#ff0000'))\n\nfig2.add_trace(go.Scatter(x=plot2.index, y=plot2.values, line=dict(color='#4200ff'), name='Diverted trend'))\nfig2.update_layout(\n    title=\"Diverted flights vs day of month\",\n    xaxis_title=\"Day of month\",\n    yaxis_title=\"Diverted count\",\n)\nfig2.show()\n","97e2d857":"import calendar\nyy = 2019 \nmm = 1    \nprint(calendar.month(yy, mm))","0399661f":"all(plot1 == plot2)","222a9630":"plot3 = df_19.groupby('ORIGIN')['CANCELLED'].count().sort_values(ascending=False)\n#cap to above 400\nplot3 = plot3[plot3>400]\nfig3 = px.bar(plot3,x=plot3.index,y=plot3.values,color_discrete_sequence=['#6ec8ba'],\n             title=\"Cancelled flights by origin airport\",labels={\"ORIGIN\":\"Origin airport\",\"y\":\"Count\"})\nfig3.layout.template = 'plotly_white'\nfig3.update_xaxes(tickangle=45)\nfig3.show()","3213041b":"plot4 = df_19.groupby('DEST')['CANCELLED'].count().sort_values(ascending=False)\n#cap to above 400\nplot4 = plot4[plot4>400]\nfig4 = px.bar(plot4,x=plot4.index,y=plot4.values,color_discrete_sequence=['#1A7065'],\n             title=\"Cancelled flights by destination airport\",labels={\"DEST\":\"Destination airport\",\"y\":\"Count\"})\nfig4.layout.template = 'plotly_white'\nfig4.update_xaxes(tickangle=45)\nfig4.show()","3203c770":"plot5 = df_19.groupby(['ORIGIN','DEST'])['CANCELLED'].count().sort_values(ascending=False)\nplot5.index = [i+'-'+j for i,j in plot5.index] \n#cap to above 500 for clear visualization\nplot5 = plot5[plot5>500]\nfig5 = px.bar(plot5,x=plot5.index,y=plot5.values,color_discrete_sequence=['#B93795'],\n             title=\"Cancelled flights by origin-dest\",labels={\"index\":\"Origin-Destination\",\"y\":\"Count\"})\nfig5.layout.template = 'plotly_white'\nfig5.update_xaxes(tickangle=45)\nfig5.show()","f22dba07":"plot6 = df_19.groupby('OP_CARRIER')['DEP_DEL15'].sum().sort_values()\nfig6 = px.pie(names=plot6.index,values=list(map(int,plot6.values)),\n              color_discrete_sequence =px.colors.qualitative.T10, hole=0.5, title='Airlines with most delayed flights')\nfig6.show()","b057b454":"plot6 = df_19.groupby('OP_CARRIER')['DISTANCE'].mean().sort_values()\nfig6 = px.pie(names=plot6.index,values=list(map(int,plot6.values)),\n              color_discrete_sequence =px.colors.qualitative.Pastel, hole=0.5, \n              title='Airlines with most long distance flights')\nfig6.show()","40cc37f8":"plt.Figure(figsize=(30,22))\nsns.distplot(df_19[df_19.CANCELLED==0.0].DISTANCE, hist=True)\nsns.distplot(df_19[df_19.CANCELLED==1.0].DISTANCE, hist=True)\n# cancelled orange\n# not cancelled blue","bc8773a7":"cor = df_19.corr().fillna(0)\nfig = px.imshow(cor,\n            labels=dict(color=\"Viridis\"),\n            x=cor.index,\n            y=cor.columns)\nfig.update_layout(width=800,height=800)\nfig.show()","22cd8ecf":"### There is a seasonality in the pattern of cancelled flights\n* Days with least cancelled flights are Saturday\n* Days with most cancelled flights are Monday and Friday\n\n### Also the plots seem to be equal, let's check it out","83ed7c65":"### After looking at the regions affected by tornados, ALT and CLT i.e airports with most cancelled flights lie within high risk region of tornados.\n![](https:\/\/strangesounds.org\/wp-content\/uploads\/2014\/04\/tornado-risk-map.jpg)","aa116f8c":"### Also the fact that the airports with most cancelled\/delayed flights are amongst most busiest in USA makes the picture clearer.\nhttps:\/\/www.world-airport-codes.com\/us-top-40-airports.html","e9775104":"## The case of delayed\/cancelled flights and be explained due to a storm occurence in san francisco on 16th Jan, 2019\nhttps:\/\/www.sfchronicle.com\/bayarea\/article\/Flood-warnings-issued-for-San-Francisco-region-14980399.php","886c6a09":"# Visualizations","3df90224":"### Days such as 1,5,12... have least cancelled flights whereas days such as 2,11,18... have most cancelled flights, let's now check the day name of these dates","7675daa4":"### We'll be now using just CANCELLED feature because DIVERTED does not provide different observations."}}