{"cell_type":{"639175d0":"code","2cb13cbb":"code","b6124fe9":"code","7347cd78":"code","084684aa":"code","12f86595":"code","3c376951":"code","93aaf3ba":"code","ef1ad585":"code","9e800bf4":"code","d4f61a78":"code","b30b1476":"markdown"},"source":{"639175d0":"!git clone https:\/\/github.com\/google-research\/xtreme.git\n%cd \/kaggle\/working\/xtreme","2cb13cbb":"!bash install_tools.sh","b6124fe9":"!mkdir download","7347cd78":"!wget https:\/\/s3.amazonaws.com\/datasets.huggingface.co\/wikiann\/1.1.0\/panx_dataset.zip","084684aa":"!mv panx_dataset.zip download\/AmazonPhotos.zip","12f86595":"!bash scripts\/download_data.sh","3c376951":"!mv download\/* \/kaggle\/working\/","93aaf3ba":"!rm -rf \/kaggle\/working\/xtreme \/kaggle\/working\/download.log \/kaggle\/working\/AmazonPhotos.zip","ef1ad585":"%cd \/kaggle\/working\n!gsutil -m cp -r \"gs:\/\/xtreme_translations\/XNLI\/\" .","9e800bf4":"import os\nimport pandas as pd\n\ndef applyRow(row):\n    row[4] = row[4].rstrip()\n    if row[4] == 'contradictory':\n        row[4] = 'contradiction'\n    return row\n\nBASE_PATH = 'XNLI\/translate-train\/'\nSAVE_PATH = 'XNLI\/translate-train\/cleaned\/'\n\n!mkdir $SAVE_PATH\n\nfor dir in ['en-fr', 'en-es', 'en-de']:\n    df = pd.read_csv(BASE_PATH + dir + '-translated.tsv', sep='\\t', header=None, index_col=False, error_bad_lines=False)\n    df = df.dropna()\n    df = df.drop([0, 1], axis=1)\n    df = df.apply(applyRow, axis=1)\n    df.to_csv(SAVE_PATH + 'xnli.translate.train.clean.' + dir + '.tsv', sep='\\t', header=None, index=False)","d4f61a78":"!mv XNLI\/translate-train\/cleaned\/* xnli\n!rm -rf XNLI","b30b1476":"### Download & clean XNLI translations"}}