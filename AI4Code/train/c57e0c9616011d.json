{"cell_type":{"e8acf822":"code","327a7887":"code","f92ade11":"code","5da1b5c0":"code","4fe15173":"code","07b85f31":"code","1aea0d70":"code","5ee96d46":"code","120f2213":"code","1553df0b":"code","d6b5d086":"code","4c3fef3b":"code","23f1bf8b":"code","d797bf13":"code","4f1a7f67":"code","4e26a321":"code","69527198":"code","83dcb837":"code","c1e79ac5":"code","5b256d00":"code","04dd8870":"code","7b9355a7":"code","7dc23ed8":"code","fb80e4db":"code","d34c98fc":"code","21e32dbd":"code","6fb4a932":"code","6dd78864":"code","a0728d5e":"code","15d84bcb":"code","8f674486":"markdown","0a4e068f":"markdown","24f4c1ef":"markdown","23a68dc6":"markdown","f4413d02":"markdown","233602df":"markdown","ac6b8b37":"markdown","eba32e99":"markdown","8df746db":"markdown","d8d76c87":"markdown","e3d15d68":"markdown","3de8d31d":"markdown","a7e8ae7e":"markdown","011d858a":"markdown","8c2bd2d1":"markdown","73b69d82":"markdown","d773e5af":"markdown"},"source":{"e8acf822":"import pandas as pd\nimport numpy as np\nimport matplotlib.pyplot as plt\nimport seaborn as sns\n\nimport plotly as plotly\nimport plotly.plotly as py\nimport plotly.graph_objs as go\n\nfrom plotly.offline import download_plotlyjs, init_notebook_mode, plot, iplot\ninit_notebook_mode(connected=True)    #THIS LINE IS MOST IMPORTANT AS THIS WILL DISPLAY PLOT ON \n#NOTEBOOK WHILE KERNEL IS RUNNING","327a7887":"df = pd.read_excel(\"..\/input\/gsyh.xls\", header=None)\ndf.head(50)","f92ade11":"cities = np.c_[df.iloc[:,1]]","5da1b5c0":"clean = pd.DataFrame(data = cities)\nclean = clean.dropna()\nclean = clean.reset_index(drop=True)\nclean.columns = ['cities']\nclean.head()","4fe15173":"clean.info()","07b85f31":"pd.options.display.float_format = '{:}'.format\ngdp = df[df[2] == 2017.0]\ngdp = gdp.iloc[:,8]\ngdp = gdp.reset_index(drop=True)\ngdp.head()","1aea0d70":"clean['gdp'] = gdp","5ee96d46":"clean = clean.sort_values(by='gdp', ascending=False).reset_index(drop=True)\nclean.head(10)","120f2213":"clean['rate'] = clean['gdp'] \/ clean.iloc[0,1] * 100\nclean['rate'] = clean['rate'].astype(float).round(3)","1553df0b":"# This data created manually because of is not published yet from TURKSTAT.\n\npparty = [\"\", #0\n          \"CHP\", # 1\n          \"CHP\", # 2\n          \"CHP\", # 3\n          \"AKP\", # 4\n          \"AKP\", # 5\n          \"CHP\", # 6\n          \"AKP\", # 7\n          \"CHP\", # 8\n          \"AKP\", # 9\n          \"CHP\", # 10\n          \"MHP\", # 11\n          \"CHP\", # 12\n          \"AKP\", # 13\n          \"CHP\", # 14\n          \"AKP\", # 15\n          \"AKP\", # 16\n          \"AKP\", # 17\n          \"AKP\", # 18\n          \"CHP\", # 19\n          \"CHP\", # 20\n          \"HDP\", # 21\n          \"CHP\", # 22\n          \"AKP\", # 23\n          \"AKP\", # 24\n          \"AKP\", # 25\n          \"CHP\", # 26\n          \"AKP\", # 27\n          \"AKP\", # 28\n          \"AKP\", # 29\n          \"AKP\", # 30\n          \"AKP\", # 31\n          \"AKP\", # 32\n          \"MHP\", # 33\n          \"HDP\", # 34\n          \"HDP\", # 35\n          \"AKP\", # 36\n          \"INDPT\", # 37\n          \"AKP\", # 38\n          \"AKP\", # 39\n          \"CHP\", # 40\n          \"AKP\", # 41\n          \"MHP\", # 42\n          \"AKP\", # 43\n          \"CHP\", # 44\n          \"AKP\", # 45\n          \"AKP\", # 46\n          \"AKP\", # 47\n          \"AKP\", # 48\n          \"MHP\", # 49\n          \"CHP\", # 50\n          \"HDP\", # 51\n          \"AKP\", # 52\n          \"AKP\", # 53\n          \"CHP\", # 54\n          \"AKP\", # 55\n          \"MHP\", # 56\n          \"AKP\", # 57\n          \"AKP\", # 58\n          \"MHP\", # 59\n          \"CHP\", # 60\n          \"AKP\", # 61\n          \"MHP\", # 62\n          \"MHP\", # 63\n          \"AKP\", # 64\n          \"AKP\", # 65\n          \"CHP\", # 66\n          \"HDP\", # 67\n          \"CHP\", # 68\n          \"HDP\", # 69\n          \"AKP\", # 70\n          \"AKP\", # 71\n          \"MHP\", # 72\n          \"CHP\", # 73\n          \"HDP\", # 74\n          \"MHP\", # 75\n          \"HDP\", # 76\n          \"AKP\", # 77\n          \"AKP\", # 78\n          \"TKP\", # 79\n          \"CHP\", # 80\n          \"MHP\", # 81         \n         ];\n","d6b5d086":"clean['pparty'] = pparty\nclean.head(10)","4c3fef3b":"test = clean[1:]\ntest.head()","23f1bf8b":"colors=np.array(['#000000']*20)\ncolors[test['pparty'][:20] == 'CHP'] = '#ac0400'\ncolors[test['pparty'][:20] == 'AKP'] = '#f78302'\ncolors[test['pparty'][:20] == 'MHP'] = '#1c4ba0'\n# No need to continue assign colors because there are only 2 political parties in first 20 row.\n\ntrace1=go.Bar(\n            x=test['cities'][:20],\n            y=test['gdp'][:20],\n            text=\"TRY\",\n            marker=dict(\n                color=colors,\n            ))\ndata = [trace1]\n\nlayout = go.Layout(title ='GDP (Gross Domestic Product) in 20 Wealthiest City',\n              xaxis = dict(title = 'Cities'),\n              yaxis = dict(title = 'GDP (TRY)'))\nfig = go.Figure(data = data, layout = layout)\niplot(fig)","d797bf13":"# Sum rate of CHP\nchp_sum = clean[clean['pparty'] == \"CHP\"]\nchp_sum = sum(chp_sum['rate'])\nchp_sum","4f1a7f67":"# Sum rate of AKP\nakp_sum = clean[clean['pparty'] == \"AKP\"]\nakp_sum = sum(akp_sum['rate'])\nakp_sum","4e26a321":"# Sum rate of MHP\nmhp_sum = clean[clean['pparty'] == \"MHP\"]\nmhp_sum = sum(mhp_sum['rate'])\nmhp_sum","69527198":"# Sum rate of HDP\nhdp_sum = clean[clean['pparty'] == \"HDP\"]\nhdp_sum = sum(hdp_sum['rate'])\nhdp_sum","83dcb837":"# Sum rate of TKP\ntkp_sum = clean[clean['pparty'] == \"TKP\"]\ntkp_sum = sum(tkp_sum['rate'])\ntkp_sum","c1e79ac5":"# Sum rate of INDEPENDENT\nbgmsz_sum = clean[clean['pparty'] == \"INDPT\"]\nbgmsz_sum = sum(bgmsz_sum['rate'])\nbgmsz_sum","5b256d00":"labels = ['CHP','AKP','MHP','HDP','INDPT','TKP']\nvalues = [chp_sum, akp_sum, mhp_sum, hdp_sum, bgmsz_sum, tkp_sum]\ncolors = [\"#ac0400\", \"#f78302\", \"#1c4ba0\", \"#6c289f\", \"#90979e\", \"#90979e\"]\ntrace = go.Pie(labels=labels, values=values,\n               hoverinfo='label+percent', textinfo='value', \n               textfont=dict(size=20),\n               marker=dict(colors=colors, \n                           line=dict(color='#000000', width=2)))\ndata = [trace]\nlayout = go.Layout(title='Political Party Rates by GDP')\nfig = go.Figure(data = data, layout = layout)\niplot(fig)","04dd8870":"chp_minucs = test[test['pparty'] == 'CHP']\nchp_minucs.head()","7b9355a7":"trace1=go.Bar(\n            x=chp_minucs['cities'],\n            y=chp_minucs['gdp'],\n            text=\"TRY\",\n            marker=dict(\n                color='#ac0400',\n            ))\ndata = [trace1]\n\nlayout = go.Layout(title ='Municipalities of CHP (Cumhuriyet Halk Partisi)',\n              xaxis = dict(title = 'Cities'),\n              yaxis = dict(title = 'GDP (TRY)'))\nfig = go.Figure(data = data, layout = layout)\niplot(fig)","7dc23ed8":"akp_minucs = test[test['pparty'] == 'AKP']\nakp_minucs.head()","fb80e4db":"trace2=go.Bar(\n            x=akp_minucs['cities'],\n            y=akp_minucs['gdp'],\n            text=\"TRY\",\n            marker=dict(\n                color='#f78302',\n            ))\ndata = [trace2]\n\nlayout = go.Layout(title ='Municipalities of AKP (Adalet ve Kalk\u0131nma Partisi)',\n              xaxis = dict(title = 'Cities', tickangle = 45),\n              yaxis = dict(title = 'GDP (TRY)'))\nfig = go.Figure(data = data, layout = layout)\niplot(fig)","d34c98fc":"mhp_minucs = test[test['pparty'] == 'MHP']\nmhp_minucs.head()","21e32dbd":"trace3=go.Bar(\n            x=mhp_minucs['cities'],\n            y=mhp_minucs['gdp'],\n            text=\"TRY\",\n            marker=dict(\n                color='#1c4ba0',\n            ))\ndata = [trace3]\n\nlayout = go.Layout(title ='Municipalities of MHP (Milliyet\u00e7i Hareket Partisi)',\n              xaxis = dict(title = 'Cities'),\n              yaxis = dict(title = 'GDP (TRY)'))\nfig = go.Figure(data = data, layout = layout)\niplot(fig)","6fb4a932":"hdp_minucs = test[test['pparty'] == 'HDP']\nhdp_minucs.head()","6dd78864":"trace4=go.Bar(\n            x=hdp_minucs['cities'],\n            y=hdp_minucs['gdp'],\n            text=\"TRY\",\n            marker=dict(\n                color='#6c289f',\n            ))\ndata = [trace4]\n\nlayout = go.Layout(title ='Municipalities of HDP (Halklar\u0131n Demokratik Partisi)',\n              xaxis = dict(title = 'Cities'),\n              yaxis = dict(title = 'GDP (TRY)'))\nfig = go.Figure(data = data, layout = layout)\niplot(fig)","a0728d5e":"tkp_minucs = test[test['pparty'] == 'TKP']\ntkp_minucs.head()","15d84bcb":"indpt_minucs = test[test['pparty'] == 'INDPT']\nindpt_minucs.head()","8f674486":"### Import Libraries","0a4e068f":"<a id=\"10\"><\/a>\n## Independent Municipalities","24f4c1ef":"<a id=\"8\"><\/a>\n## Municipalities of HDP (Halklar\u0131n Demokratik Partisi)","23a68dc6":"<a id=\"1\"><\/a>\n### Dataset Overview","f4413d02":"<a id=\"3\"><\/a>\n## GDP in 20 Wealthiest City","233602df":"<a id=\"11\"><\/a>\n# Conclusion\n* In this kernel, I have tried to make practice about data cleaning and Plotly data visualization.\n* Please comment section and upvote if you liked my kernel, thank you.\n\nReferences <br>\n-TURKSTAT <br>\n-NTV <br>","ac6b8b37":"<a id=\"2\"><\/a>\n### Cleaning Data","eba32e99":"<a id=\"5\"><\/a>\n## Municipalities of CHP (Cumhuriyet Halk Partisi)","8df746db":"<a id=\"7\"><\/a>\n## Municipalities of MHP (Milliyet\u00e7i Hareket Partisi)","d8d76c87":"<a id=\"6\"><\/a>\n## Municipalities of AKP (Adalet ve Kalk\u0131nma Partisi)","e3d15d68":"There are 81 cities in Turkey. First value is name of country as you seen, thus 82 rows means everything okay.","3de8d31d":"# DATA PREPARATION","a7e8ae7e":"<a id=\"9\"><\/a>\n## Municipalities of TKP (T\u00fcrkiye Kom\u00fcnist Partisi)","011d858a":"Here is the cleaned data that ready for visualize.","8c2bd2d1":"## **INTRODUCTION**","73b69d82":"<a id=\"4\"><\/a>\n## GDP Rates of Political Parties","d773e5af":"The 2019 Turkey mayoral election took place on 31 March 2019. In this kernel, I analysed the wealth of cities and elected mayors by using gdp. I tried to give information as much as I can to make everything clear. <br>\n#### TURKEY'S POLITICAL PARTIES\n- Republican People\u2019s Party (CHP)\n- Good Party (\u0130Y\u0130P)\n- Justice and Development Party (AKP)\n- Nationalist Movement Party (MHP)\n- Peoples\u2019 Democratic Party (HDP)\n- Communist Party of Turkey (TKP)\n\n\n\n<img src=\"https:\/\/drive.google.com\/uc?export=view&id=11Pe5pf9IbMQNtHd5_7hvatm9eZKPgE0X\" width=1000>\n\n#### Keywords\n* GDP (Gross Domestic Product): the total value of goods and services that a country (or city) produces in a year.\n* TRY: the abbreviation for the Turkish currency, Turkish Lira.\n\n#### Content:\n\n#### DATA PREPARATION\n1. [Dataset Overview](#1) <br>\n2. [Data Cleaning](#2) <br>\n\n#### DATA VISUALIZATION\n1. [GDP in 20 Wealthiest City](#3) <br>\n2. [GDP Rates of Political Parties](#4)\n3. [Municipalities of CHP (Cumhuriyet Halk Partisi)](#5)\n4. [Municipalities of AKP (Adalet ve Kalk\u0131nma Partisi)](#6)\n5. [Municipalities of MHP (Milliyet\u00e7i Hareket Partisi)](#7)\n6. [Municipalities of HDP (Halklar\u0131n Demokratik Partisi)](#8)\n7. [Municipalities of TKP (T\u00fcrkiye Kom\u00fcnist Partisi)](#9)\n8. [Independent Municipalities](#10)"}}