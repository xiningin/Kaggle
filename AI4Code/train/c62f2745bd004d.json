{"cell_type":{"f13ccd35":"code","3569778b":"code","c7be9d10":"code","30b40a4c":"code","f8aaff91":"code","db951cfb":"code","1aa1e27e":"code","b9a1e2ca":"code","8aca7d9c":"code","49e1b30c":"code","8b7f21b5":"code","8e7c9005":"code","e507e675":"code","f73ecd61":"code","a57b477d":"code","59f07377":"code","63355496":"code","992315c2":"code","7cae824f":"code","41bf2f4e":"code","59801752":"code","296ba451":"code","10c557ab":"code","b63ff5aa":"code","a9404d78":"code","80c9ddb0":"code","45b4d113":"markdown","eec11d5f":"markdown","5a92f968":"markdown","e720fd9a":"markdown","20c9085e":"markdown","a421b1ff":"markdown","3588be8f":"markdown","9a59e496":"markdown","02057244":"markdown"},"source":{"f13ccd35":"# packages\n\n# standard\nimport numpy as np\nimport pandas as pd\n\n# plot\nimport matplotlib.pyplot as plt\nimport seaborn as sns\n\n# wordcloud\nfrom wordcloud import WordCloud, STOPWORDS, ImageColorGenerator","3569778b":"# load data and first glance\ndf = pd.read_csv('..\/input\/chocolate-ratings\/chocolate_ratings.csv')\ndf.head()","c7be9d10":"# dimensions of data (rows,columns)\ndf.shape","30b40a4c":"# data frame overview\ndf.info()","f8aaff91":"# prep percentage field\ndef clean_perc(x):\n    return pd.to_numeric(x.replace('%',''))\n\ndf['Cocoa Percent'] = df['Cocoa Percent'].apply(clean_perc)","db951cfb":"# add categorical version of rating\ndf['Rating_Cat'] = 'Unpleasant'\ndf.loc[df.Rating >= 2,   'Rating_Cat'] = 'Disappointing'\ndf.loc[df.Rating >= 3,   'Rating_Cat'] = 'Recommended'\ndf.loc[df.Rating >= 3.5, 'Rating_Cat'] = 'Highly Recommended'\ndf.loc[df.Rating >= 4,   'Rating_Cat'] = 'Outstanding'","1aa1e27e":"df.Rating_Cat.value_counts().plot(kind='bar')\nplt.title('Rating Categories - Frequency')\nplt.grid()\nplt.show()","b9a1e2ca":"top20_company_loc = df['Company Location'].value_counts()[0:20]\nplt.figure(figsize=(12,4))\ntop20_company_loc.plot(kind='bar')\nplt.title('Company Location - Top 20')\nplt.grid()\nplt.show()","8aca7d9c":"top20_country_orig = df['Country of Bean Origin'].value_counts()[0:20]\nplt.figure(figsize=(12,4))\ntop20_country_orig.plot(kind='bar')\nplt.title('Country of Bean Origin - Top 20')\nplt.grid()\nplt.show()","49e1b30c":"top20_ingredients = df['Ingredients'].value_counts()[0:20]\nplt.figure(figsize=(12,4))\ntop20_ingredients.plot(kind='bar')\nplt.title('Ingredients - Top 20')\nplt.grid()\nplt.show()","8b7f21b5":"plt.figure(figsize=(12,4))\ndf['Review Date'].value_counts().sort_index().plot(kind='bar')\nplt.title('Review Date')\nplt.grid()\nplt.show()","8e7c9005":"df['Cocoa Percent'].plot(kind='hist')\nplt.title('Cocoa Percent')\nplt.grid()\nplt.show()","e507e675":"df['Rating'].plot(kind='hist')\nplt.title('Rating Distribution')\nplt.grid()\nplt.show()","f73ecd61":"plt.scatter(df['Cocoa Percent'], df['Rating'], alpha=0.25)\nplt.xlabel('Cocoa Percent')\nplt.ylabel('Rating')\nplt.grid()\nplt.show()","a57b477d":"plt.figure(figsize=(12,4))\nsns.violinplot(data = df, x='Review Date', y='Rating')\nplt.title('Rating by Year')\nplt.grid()\nplt.show()","59f07377":"temp_list = top20_company_loc.index.tolist()\ndf_temp = df[df['Company Location'].isin(temp_list)]\n\nplt.figure(figsize=(12,4))\nsns.violinplot(data = df_temp, x='Company Location', y='Rating')\nplt.title('Rating by Company Location - Top 20 only')\nplt.xticks(rotation=90)\nplt.grid()\nplt.show()","63355496":"temp_list = top20_country_orig.index.tolist()\ndf_temp = df[df['Country of Bean Origin'].isin(temp_list)]\n\nplt.figure(figsize=(12,4))\nsns.violinplot(data = df_temp, x='Country of Bean Origin', y='Rating')\nplt.title('Rating by Country of Bean Origin - Top 20 only')\nplt.xticks(rotation=90)\nplt.grid()\nplt.show()","992315c2":"# select top rated chocolates\ndf_top = df[df.Rating_Cat=='Outstanding']","7cae824f":"# bean origin of top rated chocolates\ndf_top['Country of Bean Origin'].value_counts()","41bf2f4e":"# ingredients of top rated chocolates\ndf_top['Ingredients'].value_counts()\n\ndf_top['Ingredients'].value_counts().plot(kind='bar')\nplt.title('Ingredients - Top rated chocolates')\nplt.grid()\nplt.show()","59801752":"stopwords = set(STOPWORDS)","296ba451":"# prepare text\ntext = ' '.join(txt for txt in df_top['Most Memorable Characteristics'])\n\n# show wordcloud\nwordcloud = WordCloud(stopwords=stopwords, max_font_size=50, max_words=500,\n                      width = 500, height = 300,\n                      background_color='white').generate(text)\nplt.figure(figsize=(14,10))\nplt.imshow(wordcloud, interpolation='bilinear')\nplt.axis('off')\nplt.show()","10c557ab":"df_bot = df[df.Rating_Cat=='Unpleasant']","b63ff5aa":"# bean origin of unpleasant chocolates\ndf_bot['Country of Bean Origin'].value_counts()","a9404d78":"# ingredients of unpleasant chocolates\ndf_bot['Ingredients'].value_counts()\n\ndf_bot['Ingredients'].value_counts().plot(kind='bar')\nplt.title('Ingredients - Chocolates rated as unpleasant')\nplt.grid()\nplt.show()","80c9ddb0":"# prepare text\ntext = ' '.join(txt for txt in df_bot['Most Memorable Characteristics'])\n\n# show wordcloud\nwordcloud = WordCloud(stopwords=stopwords, max_font_size=50, max_words=500,\n                      width = 500, height = 300,\n                      background_color='white').generate(text)\nplt.figure(figsize=(14,10))\nplt.imshow(wordcloud, interpolation='bilinear')\nplt.axis('off')\nplt.show()","45b4d113":"<a id='2'><\/a>\n# EDA","eec11d5f":"<a id='4'><\/a>\n# Look at top rated chocolates","5a92f968":"<a id='1'><\/a>\n# Import and Preprocessing","e720fd9a":"#### Wordcloud of characteristics for chocolates rated as unpleasant","20c9085e":"# Table of Contents\n* [Import and Preprocessing](#1)\n* [EDA](#2)\n* [Rating vs Features](#3)\n* [Look at top rated chocolates](#4)\n* [Look at unpleasant chocolates](#5)","a421b1ff":"#### Wordcloud of characteristics for top rated chocolates","3588be8f":"<a id='5'><\/a>\n# Look at unpleasant chocolates","9a59e496":"#### Rating Scale:\n* 4.0 - 5.0 = Outstanding\n* 3.5 - 3.9 = Highly Recommended\n* 3.0 - 3.4 = Recommended\n* 2.0 - 2.9 = Disappointing\n* 1.0 - 1.9 = Unpleasant","02057244":"<a id='3'><\/a>\n# Rating vs Features"}}