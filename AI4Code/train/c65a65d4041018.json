{"cell_type":{"63ad8fbd":"code","0e35b4f7":"code","40a3c99c":"code","f1814c3c":"code","650857bb":"code","c3a30757":"code","2a26a867":"code","c5be412b":"code","f4e925ec":"code","03c879f6":"code","e59c5ec1":"code","821dfeca":"code","b7092349":"code","ee28526c":"code","8992dee7":"code","dae242bf":"code","96a9980f":"code","0d4bd03b":"code","8340d7fe":"code","4c496183":"code","e5b5149f":"code","d5fc308e":"code","d6f2ec45":"code","6be48949":"code","9b592a80":"code","156d3454":"code","c8c8aed8":"code","6871cbaf":"code","e2099a9a":"code","25f2d30b":"code","e45e7c0d":"code","14241050":"code","256bbed8":"code","618e71ee":"code","0610c530":"code","74f043bf":"code","1d9d12e9":"code","0bc7e46f":"code","f3b406f5":"code","349c8911":"code","8a48ce10":"code","b9df21ea":"code","4eab94ac":"code","5ddfa8aa":"code","5b5db113":"code","5f673300":"code","67d922d4":"code","2e4dd240":"code","a8f6c9c1":"code","e4c8af84":"code","d1bbf0bd":"code","ae258dc3":"code","2b03e773":"code","769aed65":"code","3aeb9a98":"code","6c86018d":"code","3c31b235":"code","d1bcc05f":"code","95a97b3a":"code","d9897ddd":"code","c414aaa1":"code","b3823a5f":"code","220fba6b":"code","9031d3b7":"code","3f691359":"code","8bab2361":"code","78226dd9":"code","3f31a871":"code","61e69efa":"code","84d3f702":"code","605bfe08":"code","e84c7db0":"code","f3e029d1":"code","50f22535":"code","c515ceda":"code","93fa5861":"code","9072b96d":"code","f886c6d3":"code","295a044f":"code","dcf7417d":"code","88e39dc0":"code","7fda7316":"code","d7dde41f":"markdown","e41f6af5":"markdown","a6ab10ec":"markdown","96161ae1":"markdown","10588a68":"markdown","cf394d87":"markdown","8dbbd92a":"markdown","c140cdc5":"markdown","d0e20efe":"markdown","83ccb03a":"markdown","415775ac":"markdown","fef4c3d4":"markdown","39afaf8a":"markdown","f74e38f6":"markdown","63c0b301":"markdown","c946056b":"markdown","b7718b96":"markdown","de43643e":"markdown","38d43bae":"markdown","d64a25b6":"markdown","c9ec0e2b":"markdown","169b1313":"markdown","38d9b679":"markdown","2bd43464":"markdown","0417ece8":"markdown","932a767e":"markdown","d91b4cbe":"markdown","f8039803":"markdown","37f4b6ea":"markdown","26f65354":"markdown","c3442e2a":"markdown","7c6fab94":"markdown","27224f74":"markdown","0ae155ae":"markdown","bc353cdc":"markdown","6067e508":"markdown","134530b7":"markdown","4c686385":"markdown","acb6d1d6":"markdown","b2b11128":"markdown","c054b401":"markdown","29474c86":"markdown","fa3ec5c5":"markdown","1899eb6b":"markdown","e40d3da8":"markdown","85e3d7cb":"markdown","c4e0bb1a":"markdown","5abe2eca":"markdown","00619971":"markdown","5d118325":"markdown","a46971da":"markdown","4bf3013d":"markdown","6950007b":"markdown","2191a8da":"markdown"},"source":{"63ad8fbd":"# libraries\nimport numpy as np \nimport pandas as pd \nimport os\nimport math\nimport matplotlib.pyplot as plt\nimport seaborn as sns\n%matplotlib inline\nfrom plotly import tools\nimport plotly.graph_objs as go\nfrom plotly.offline import init_notebook_mode, iplot\nimport warnings\nwarnings.filterwarnings(\"ignore\")\ninit_notebook_mode(connected=True)\npd.set_option('display.max_columns', None)\nfrom ipywidgets import interact, interactive, interact_manual\nimport ipywidgets as widgets\nimport colorlover as cl\n","0e35b4f7":"#loading data\nDIR = '..\/input\/kaggle-survey-2018\/'\ndf_free = pd.read_csv(DIR + 'freeFormResponses.csv', low_memory=False, header=[0,1])\ndf_choice = pd.read_csv(DIR + 'multipleChoiceResponses.csv', low_memory=False, header=[0,1])\nschema = pd.read_csv(DIR + 'SurveySchema.csv', low_memory=False, header=[0,1])\n# Format Dataframes\ndf_free.columns = ['_'.join(col) for col in df_free.columns]\ndf_choice.columns = ['_'.join(col) for col in df_choice.columns]\nschema.columns = ['_'.join(col) for col in schema.columns]\n\n# For getting all columns\npd.set_option('display.max_columns', None)","40a3c99c":"country_count = df_choice['Q3_In which country do you currently reside?'].value_counts().reset_index()\ncountry_count.columns = ['country', 'people']","f1814c3c":"# I use dataset from plotly to get country codes, which are required to plot the data.\ncountry_code = pd.read_csv('..\/input\/plotly-country-code-mapping\/2014_world_gdp_with_codes.csv')\ncountry_code.columns = [i.lower() for i in country_code.columns]\ncountry_count.loc[country_count['country'] == 'United States of America', 'country'] = 'United States'\ncountry_count.loc[country_count['country'] == 'United Kingdom of Great Britain and Northern Ireland', 'country'] = 'United Kingdom'\ncountry_count.loc[country_count['country'] == 'South Korea', 'country'] = '\"Korea, South\"'\ncountry_count.loc[country_count['country'] == 'Viet Nam', 'country'] = 'Vietnam'\ncountry_count.loc[country_count['country'] == 'Iran, Islamic Republic of...', 'country'] = 'Iran'\ncountry_count.loc[country_count['country'] == 'Hong Kong (S.A.R.)', 'country'] = 'Hong Kong'\ncountry_count.loc[country_count['country'] == 'Republic of Korea', 'country'] = '\"Korea, North\"'\ncountry_count = pd.merge(country_count, country_code, on='country')","650857bb":"data = [ dict(\n        type = 'choropleth',\n        locations = country_count['code'],\n        z = country_count['people'],\n        text = country_count['country'],\n        colorscale = 'Viridis',\n        autocolorscale = False,\n        reversescale = True,\n        marker = dict(\n            line = dict (\n                color = 'rgb(180,180,180)',\n                width = 0.5\n            ) ),\n        colorbar = dict(\n            autotick = False,\n            title = 'Responders'),\n      ) ]\n\nlayout = dict(\n    title = 'Responders by country',\n    geo = dict(\n        showframe = False,\n        showcoastlines = False,\n        projection = dict(\n            type = 'Mercator'\n        )\n    )\n)\n\nfig = dict( data=data, layout=layout )\niplot( fig, validate=False, filename='d3-world-map' )","c3a30757":"df_choice['Q3_orig'] = df_choice['Q3_In which country do you currently reside?']\ndf_choice.loc[df_choice['Q3_In which country do you currently reside?'].isin(['United States of America', 'Russia', 'India']) == False,\n              'Q3_In which country do you currently reside?'] = 'Other countries'","2a26a867":"df_choice['Time from Start to Finish (seconds)_Duration (in minutes)'] = df_choice['Time from Start to Finish (seconds)_Duration (in seconds)'] \/ 60","c5be412b":"plt.hist(df_choice['Time from Start to Finish (seconds)_Duration (in minutes)'] \/ 60, bins=40);\nplt.yscale('log');\nplt.title('Distribution of time spent on the survey');\nplt.xlabel('Time (hours)');","f4e925ec":"data = []\nfor i in df_choice['Q3_In which country do you currently reside?'].unique():\n    trace = {\n            \"type\": 'violin',\n            \"x\": df_choice.loc[(df_choice['Q3_In which country do you currently reside?'] == i) & (df_choice['Time from Start to Finish (seconds)_Duration (in minutes)'] < 180),\n                               'Q3_In which country do you currently reside?'],\n            \"y\": df_choice.loc[(df_choice['Q3_In which country do you currently reside?'] == i) & (df_choice['Time from Start to Finish (seconds)_Duration (in minutes)'] < 180),\n                               'Time from Start to Finish (seconds)_Duration (in minutes)'],\n            \"name\": i,\n            \"meanline\": {\n                \"visible\": True\n            }\n        }\n    data.append(trace)\n\n        \nfig = {\n    \"data\": data,\n    \"layout\" : {\n        \"title\": \"\",\n        \"yaxis\": {\n            \"zeroline\": False,\n        }\n    }\n}\n\nfig['layout'].update(title='Distribution of time spent on test by country');\niplot(fig)","03c879f6":"data = []\nfor j, c in enumerate(df_choice['Q3_In which country do you currently reside?'].unique()):\n    df_small = df_choice.loc[(df_choice['Q3_In which country do you currently reside?'] == c) & (df_choice['Time from Start to Finish (seconds)_Duration (in minutes)'] < 60),\n                            'Time from Start to Finish (seconds)_Duration (in minutes)']\n    trace = go.Histogram(\n        x=df_small,\n        name=c,\n        marker=dict(color=j, opacity=0.5),\n        showlegend=False\n    )  \n    data.append(trace)\nfig = go.Figure(data=data)\nfig['layout'].update(height=400, width=800, barmode='overlay', title='Distribution of time spent on test by country');\niplot(fig);","e59c5ec1":"data = []\nfor i in df_choice['Q1_What is your gender? - Selected Choice'].unique():\n    trace = go.Bar(\n        x=df_choice.loc[df_choice['Q1_What is your gender? - Selected Choice'] == i, 'Q2_What is your age (# years)?'].value_counts().sort_index().index,\n        y=df_choice.loc[df_choice['Q1_What is your gender? - Selected Choice'] == i, 'Q2_What is your age (# years)?'].value_counts().sort_index().values,\n        name=i\n    )\n    data.append(trace)\nlayout = go.Layout(\n    barmode='stack'\n)\nfig = go.Figure(data=data, layout=layout)\niplot(fig, filename='stacked-bar')","821dfeca":"s = pd.crosstab(df_choice['Q1_What is your gender? - Selected Choice'],\n                df_choice['Q2_What is your age (# years)?'], normalize='index').style.background_gradient(cmap='viridis', low=.5, high=0).highlight_null('red')\ns","b7092349":"def plot_country_two_vars_dropdown(var1='', var2='', title_name=''):\n    df = df_choice.copy()\n    df[var2] = df[var2].astype('category')\n    df[var1] = df[var1].astype('category')\n\n    data = []\n    buttons = []\n    n_mult = df[var1].nunique()\n    n = df['Q3_orig'].nunique() * n_mult\n    for j, c in enumerate(df['Q3_orig'].unique()):\n        visibility = [False] * n\n        for ind, i in enumerate(df[var1].unique()):\n            grouped = df.loc[(df[var1] == i) & (df['Q3_orig'] == c),\n                                var2].value_counts().sort_index()\n            trace = go.Bar(\n                x=grouped.index,\n                y=grouped.values,\n                name=i,\n\n                showlegend=True if j == 0 else False,\n                legendgroup=i,\n                visible=True if j == 0 else False\n            )\n\n            data.append(trace)\n        visibility[j*n_mult:j*n_mult + n_mult] = [True] * n_mult\n        buttons.append(dict(label = c,\n                            method = 'update',\n                            args = [{'visible': visibility},\n                                    {'title': f'Responders in {c} by {title_name}'}]))\n            \n    updatemenus = list([dict(active=-1, buttons=buttons, x=1, y=2)])\n    layout = dict(height=400, width=800, title=f\"Responders in {df['Q3_orig'].unique()[0]} by {title_name}\", updatemenus=updatemenus)\n    fig = dict(data=data, layout=layout)\n    return fig","ee28526c":"def plot_country_two_vars(var1='', var2='', title_name=''):\n    colors = cl.scales[str(df_choice[var1].fillna('').nunique())]['qual']['Paired']\n    fig = tools.make_subplots(rows=4, cols=1, subplot_titles=('United States of America', 'Other countries', 'India', 'Russia'), print_grid=False)\n    for j, c in enumerate(df_choice['Q3_In which country do you currently reside?'].unique()):\n        data = []\n        for ind, i in enumerate(df_choice[var1].unique()):\n            grouped = df_choice.loc[(df_choice[var1] == i) & (df_choice['Q3_In which country do you currently reside?'] == c),\n                                var2].value_counts().sort_index()\n            trace = go.Bar(\n                x=grouped.index,\n                y=grouped.values,\n                name=i,\n                marker=dict(color=colors[ind]),\n                showlegend=True if j == 0 else False,\n                legendgroup=i\n            )\n            fig.append_trace(trace, j + 1, 1)    \n\n    fig['layout'].update(height=1000, width=800, title=f'Responders in countries by {title_name}');\n    return fig\nfig = plot_country_two_vars(var1='Q1_What is your gender? - Selected Choice', var2='Q2_What is your age (# years)?', title_name='age and gender')\niplot(fig);","8992dee7":"fig = plot_country_two_vars_dropdown(var1='Q1_What is your gender? - Selected Choice', var2='Q2_What is your age (# years)?', title_name='age and gender')\niplot(fig);","dae242bf":"s = pd.crosstab(df_choice['Q2_What is your age (# years)?'],\n                df_choice['Q4_What is the highest level of formal education that you have attained or plan to attain within the next 2 years?']).style.background_gradient(cmap='viridis', low=.5, high=0).highlight_null('red')\ns","96a9980f":"fig = plot_country_two_vars(var1='Q1_What is your gender? - Selected Choice',\n                            var2='Q4_What is the highest level of formal education that you have attained or plan to attain within the next 2 years?',\n                            title_name='degree')\niplot(fig);","0d4bd03b":"fig = plot_country_two_vars_dropdown(var1='Q1_What is your gender? - Selected Choice',\n                                     var2='Q4_What is the highest level of formal education that you have attained or plan to attain within the next 2 years?',\n                                     title_name='degree')\niplot(fig);","8340d7fe":"s = pd.crosstab(df_choice['Q1_What is your gender? - Selected Choice'],\n                df_choice['Q4_What is the highest level of formal education that you have attained or plan to attain within the next 2 years?'], normalize='index').style.background_gradient(cmap='viridis', low=.05, high=0).highlight_null('red')\ns","4c496183":"def plot_country_one_var_dropdown(var='', title_name=''):\n    df_choice[var] = df_choice[var].astype('category')\n    data = []\n    buttons = []\n    n = df_choice['Q3_orig'].nunique()\n    for j, c in enumerate(df_choice['Q3_orig'].unique()):\n        visibility = [False] * n\n        grouped = df_choice.loc[df_choice['Q3_orig'] == c,\n                                var].value_counts().sort_index()\n        grouped = grouped \/ grouped.sum()\n        if var == 'Q9_What is your current yearly compensation (approximate $USD)?':\n            map_dict = {'0-10,000': 0,\n                        '10-20,000': 1,\n                        '100-125,000': 10,\n                        '125-150,000': 11,\n                        '150-200,000': 12,\n                        '20-30,000': 2,\n                        '200-250,000': 13,\n                        '250-300,000': 14,\n                        '30-40,000': 3,\n                        '300-400,000': 15,\n                        '40-50,000': 4,\n                        '400-500,000': 16,\n                        '50-60,000': 5,\n                        '60-70,000': 6,\n                        '70-80,000': 7,\n                        '80-90,000': 8,\n                        '90-100,000': 9,\n                        '500,000+': 17,\n                        'I do not wish to disclose my approximate yearly compensation': 18}\n            grouped = grouped.reset_index()\n            grouped.columns = ['salary', 'counts']\n            grouped['sorting'] = grouped['salary'].apply(lambda x: map_dict[x])\n            grouped = grouped.sort_values('sorting', ascending=True)\n            trace = go.Bar(\n                x=grouped['salary'],\n                y=grouped['counts'],\n                name=c,\n                marker=dict(color=j),\n                showlegend=True,\n                visible=True if j == 0 else False\n            )\n            data.append(trace)\n\n        elif var == 'Q24_How long have you been writing code to analyze data?':\n            map_dict = {'I have never written code but I want to learn': 8,\n                        '5-10 years': 3,\n                        '3-5 years': 2,\n                        '< 1 year': 0,\n                        '1-2 years': 1,\n                        '10-20 years': 4,\n                        '20-30 years': 5,\n                        '30-40 years': 6,\n                        'I have never written code and I do not want to learn': 9,\n                        '40+ years': 7}\n            grouped = grouped.reset_index()\n            grouped.columns = ['salary', 'counts']\n            grouped['sorting'] = grouped['salary'].apply(lambda x: map_dict[x])\n            grouped = grouped.sort_values('sorting', ascending=True)\n            trace = go.Bar(\n                x=grouped['salary'],\n                y=grouped['counts'],\n                name=c,\n                marker=dict(color=j),\n                showlegend=True,\n                visible=True if j == 0 else False\n            )\n            data.append(trace)\n        else:\n            trace = go.Bar(\n                x=grouped.index,\n                y=grouped.values,\n                name=c,\n                marker=dict(color=j),\n                showlegend=True,\n                visible=True if j == 0 else False\n            )\n            data.append(trace)\n\n        visibility[j*1:j*1 + 1] = [True]\n        buttons.append(dict(label = c,\n                            method = 'update',\n                            args = [{'visible': visibility},\n                                    {'title': f'Responders in {c} by {title_name}'}]))\n            \n            \n    updatemenus = list([dict(active=-1, buttons=buttons, x=1, y=2)])\n    layout = dict(height=400, width=800, title=f\"Responders in {df_choice['Q3_orig'].unique()[0]} by {title_name}\", updatemenus=updatemenus)\n    fig = dict(data=data, layout=layout)\n    return fig","e5b5149f":"def plot_country_one_var(var='', title_name=''):\n    data = []\n    for j, c in enumerate(df_choice['Q3_In which country do you currently reside?'].unique()):\n        grouped = df_choice.loc[df_choice['Q3_In which country do you currently reside?'] == c,\n                                var].value_counts().sort_index()\n        grouped = grouped \/ grouped.sum()\n        if var == 'Q9_What is your current yearly compensation (approximate $USD)?':\n            map_dict = {'0-10,000': 0,\n                        '10-20,000': 1,\n                        '100-125,000': 10,\n                        '125-150,000': 11,\n                        '150-200,000': 12,\n                        '20-30,000': 2,\n                        '200-250,000': 13,\n                        '250-300,000': 14,\n                        '30-40,000': 3,\n                        '300-400,000': 15,\n                        '40-50,000': 4,\n                        '400-500,000': 16,\n                        '50-60,000': 5,\n                        '60-70,000': 6,\n                        '70-80,000': 7,\n                        '80-90,000': 8,\n                        '90-100,000': 9,\n                        '500,000+': 17,\n                        'I do not wish to disclose my approximate yearly compensation': 18}\n            grouped = grouped.reset_index()\n            grouped.columns = ['salary', 'counts']\n            grouped['sorting'] = grouped['salary'].apply(lambda x: map_dict[x])\n            grouped = grouped.sort_values('sorting', ascending=True)\n            trace = go.Bar(\n                x=grouped['salary'],\n                y=grouped['counts'],\n                name=c,\n                marker=dict(color=j),\n                showlegend=True\n            )\n            data.append(trace)\n        elif var == 'Q24_How long have you been writing code to analyze data?':\n            map_dict = {'I have never written code but I want to learn': 8,\n                        '5-10 years': 3,\n                        '3-5 years': 2,\n                        '< 1 year': 0,\n                        '1-2 years': 1,\n                        '10-20 years': 4,\n                        '20-30 years': 5,\n                        '30-40 years': 6,\n                        'I have never written code and I do not want to learn': 9,\n                        '40+ years': 7}\n            grouped = grouped.reset_index()\n            grouped.columns = ['salary', 'counts']\n            grouped['sorting'] = grouped['salary'].apply(lambda x: map_dict[x])\n            grouped = grouped.sort_values('sorting', ascending=True)\n            trace = go.Bar(\n                x=grouped['salary'],\n                y=grouped['counts'],\n                name=c,\n                marker=dict(color=j),\n                showlegend=True\n            )\n            data.append(trace)\n        else:\n            trace = go.Bar(\n                x=grouped.index,\n                y=grouped.values,\n                name=c,\n                marker=dict(color=j),\n                showlegend=True\n            )\n            data.append(trace)    \n    fig = go.Figure(data=data)\n    fig['layout'].update(height=400, width=800, title=f'Responders in countries by {title_name}', barmode='group');\n    return fig\n\nfig = plot_country_one_var(var='Q5_Which best describes your undergraduate major? - Selected Choice', title_name='major')\niplot(fig);","d5fc308e":"fig = plot_country_one_var_dropdown(var='Q5_Which best describes your undergraduate major? - Selected Choice', title_name='major')\niplot(fig);","d6f2ec45":"s = pd.crosstab(df_choice['Q1_What is your gender? - Selected Choice'],\n                df_choice['Q5_Which best describes your undergraduate major? - Selected Choice'], normalize='index').style.background_gradient(cmap='viridis', low=.01, high=0).highlight_null('red')\ns","6be48949":"countsDf = df_choice['Q6_Select the title most similar to your current role (or most recent title if retired): - Selected Choice'].value_counts()\ntrace1 = go.Bar(\n                x = countsDf.index,\n                y = countsDf.values,\n                name = \"Kaggle\",\n                marker = dict(color = 'gold'),\n                text = countsDf.index)\ndata = [trace1]\nlayout = go.Layout(barmode = \"group\",title='Title', yaxis= dict(title='Counts'),showlegend=False)\nfig = go.Figure(data = data, layout = layout)\niplot(fig)","9b592a80":"countsDf = countsDf.reset_index()\ncountsDf.columns = ['title', 'number']\ncountsDf.loc[countsDf['title'].isin(['Consultant', 'Business Analyst', 'Marketing Analyst']), 'title'] = 'Data Analyst'\ncountsDf.loc[countsDf['title'].isin(['Software Engineer', 'DBA\/Database Engineer', 'Developer Advocate']), 'title'] = 'Data Engineer'\ncountsDf.loc[countsDf['title'].isin(['Research Assistant', 'Research Scientist', 'Statistician']), 'title'] = 'Research'\ncountsDf.loc[countsDf['title'].isin(['Product\/Project Manager', 'Chief Officer']), 'title'] = 'Manager'\ncountsDf.loc[countsDf['title'].isin(['Salesperson', 'Principal Investigator', 'Data Journalist', 'Not employed']), 'title'] = 'Other'\ncountsDf = countsDf.groupby('title')['number'].sum()\ntrace1 = go.Bar(\n                x = countsDf.index,\n                y = countsDf.values,\n                name = \"Kaggle\",\n                marker = dict(color = 'brown'),\n                text = countsDf.values,\n                textposition = 'outside')\ndata = [trace1]\nlayout = go.Layout(barmode = \"group\",title='Grouped titles', yaxis= dict(title='Counts'),showlegend=False)\nfig = go.Figure(data = data, layout = layout)\niplot(fig)","156d3454":"s = pd.crosstab(df_choice['Q7_In what industry is your current employer\/contract (or your most recent employer if retired)? - Selected Choice'],\n                df_choice['Q10_Does your current employer incorporate machine learning methods into their business?']).style.background_gradient(cmap='viridis', low=.1, high=0).highlight_null('red')\ns","c8c8aed8":"df_choice.loc[df_choice['Q6_Select the title most similar to your current role (or most recent title if retired): - Selected Choice'].isin(['Consultant', 'Business Analyst', 'Marketing Analyst']),\n              'Q6_Select the title most similar to your current role (or most recent title if retired): - Selected Choice'] = 'Data Analyst'\ndf_choice.loc[df_choice['Q6_Select the title most similar to your current role (or most recent title if retired): - Selected Choice'].isin(['Software Engineer', 'DBA\/Database Engineer', 'Developer Advocate']),\n              'Q6_Select the title most similar to your current role (or most recent title if retired): - Selected Choice'] = 'Data Engineer'\ndf_choice.loc[df_choice['Q6_Select the title most similar to your current role (or most recent title if retired): - Selected Choice'].isin(['Research Assistant', 'Research Scientist', 'Statistician']),\n              'Q6_Select the title most similar to your current role (or most recent title if retired): - Selected Choice'] = 'Research'\ndf_choice.loc[df_choice['Q6_Select the title most similar to your current role (or most recent title if retired): - Selected Choice'].isin(['Product\/Project Manager', 'Chief Officer']),\n              'Q6_Select the title most similar to your current role (or most recent title if retired): - Selected Choice'] = 'Manager'\ndf_choice.loc[df_choice['Q6_Select the title most similar to your current role (or most recent title if retired): - Selected Choice'].isin(['Salesperson', 'Principal Investigator', 'Data Journalist', 'Not employed']),\n              'Q6_Select the title most similar to your current role (or most recent title if retired): - Selected Choice'] = 'Other'","6871cbaf":"fig = plot_country_one_var(var='Q6_Select the title most similar to your current role (or most recent title if retired): - Selected Choice', title_name='title')\niplot(fig);","e2099a9a":"fig = plot_country_one_var_dropdown(var='Q6_Select the title most similar to your current role (or most recent title if retired): - Selected Choice',\n                                    title_name='title')\niplot(fig);","25f2d30b":"fig = plot_country_two_vars(var2='Q6_Select the title most similar to your current role (or most recent title if retired): - Selected Choice',\n                            var1='Q8_How many years of experience do you have in your current role?', title_name='title and experience')\niplot(fig);","e45e7c0d":"fig = plot_country_two_vars_dropdown(var1='Q8_How many years of experience do you have in your current role?',\n                                     var2='Q6_Select the title most similar to your current role (or most recent title if retired): - Selected Choice',\n                                     title_name='title and experience')\niplot(fig);","14241050":"fig = plot_country_one_var(var='Q9_What is your current yearly compensation (approximate $USD)?', title_name='salary')\niplot(fig);","256bbed8":"fig = plot_country_one_var_dropdown(var='Q9_What is your current yearly compensation (approximate $USD)?', title_name='salary')\niplot(fig);","618e71ee":"fig = plot_country_one_var(var='Q24_How long have you been writing code to analyze data?', title_name='years of coding for data analysis')\niplot(fig);","0610c530":"var1='Q26_Do you consider yourself to be a data scientist?'\nvar2='Q25_For how many years have you used machine learning methods (at work or in school)?'\ntitle_name='years of learning ML and self-confidence'\ncolors = cl.scales[str(df_choice[var1].fillna('').nunique())]['qual']['Paired']\nfig = tools.make_subplots(rows=4, cols=1, subplot_titles=('United States of America', 'Other countries', 'India', 'Russia'), print_grid=False)\nfor j, c in enumerate(df_choice['Q3_In which country do you currently reside?'].unique()):\n    #data = []\n    for ind, i in enumerate(df_choice[var1].unique()):\n        grouped = df_choice.loc[(df_choice[var1] == i) & (df_choice['Q3_In which country do you currently reside?'] == c),\n                            var2].value_counts().sort_index()\n        map_dict = {'I have never studied machine learning but plan to learn in the future': 8,\n                    '< 1 year': 0,\n                    '4-5 years': 4,\n                    '2-3 years': 2,\n                    '1-2 years': 1,\n                    '5-10 years': 5,\n                    '3-4 years': 3,\n                    'I have never studied machine learning and I do not plan to': 9,\n                    '20+ years': 7,\n                    '10-15 years': 6}\n        grouped = grouped.reset_index()\n        grouped.columns = ['years', 'counts']\n        #print(grouped.shape)\n        #break\n        grouped['sorting'] = grouped['years'].apply(lambda x: map_dict[x])\n        grouped = grouped.sort_values('sorting', ascending=True)\n        trace = go.Bar(\n            x=grouped.years,\n            y=grouped.counts,\n            name=i,\n            marker=dict(color=colors[ind]),\n            showlegend=True if j == 0 else False,\n            legendgroup=i\n        )\n        fig.append_trace(trace, j + 1, 1)    \n\nfig['layout'].update(height=1000, width=800, title=f'Responders in countries by {title_name}');\n\niplot(fig);","74f043bf":"def plot_choice_var(var='', title_name=''):\n    col_names = [col for col in df_choice.columns if f'{var}_Part' in col]\n    data = []\n    small_df = df_choice[col_names]\n    text_values = [col.split('- ')[2] for col in col_names]\n    counts = []\n    for m, n in zip(col_names, text_values):\n        if small_df[m].nunique() == 0:\n            counts.append(0)\n        else:\n            counts.append(sum(small_df[m] == n))\n    trace = go.Bar(\n        x=text_values,\n        y=counts,\n        name=c,\n        marker=dict(color='silver'),\n        showlegend=False\n    )\n    data.append(trace)    \n    fig = go.Figure(data=data)\n    fig['layout'].update(height=400, width=800, title=f'Popular {title_name}');\n    return fig\n\ndef plot_country_multiple_choice_var(var='', title_name=''):\n    col_names = [col for col in df_choice.columns if f'{var}_Part' in col]\n    #print(col_names)\n    data = []\n    for j, c in enumerate(df_choice['Q3_In which country do you currently reside?'].unique()):\n        small_df = df_choice.loc[df_choice['Q3_In which country do you currently reside?'] == c, col_names]\n        text_values = [col.split('- ')[2] for col in col_names]\n        counts = []\n        for m, n in zip(col_names, text_values):\n            if small_df[m].nunique() == 0:\n                counts.append(0)\n            else:\n                counts.append(sum(small_df[m] == n))\n        counts = [i \/ len(small_df) for i in counts]\n        trace = go.Bar(\n            x=text_values,\n            y=counts,\n            name=c,\n            marker=dict(color=j),\n            showlegend=True\n        )\n        data.append(trace)    \n    fig = go.Figure(data=data)\n    fig['layout'].update(height=400, width=800, title=f'Popular {title_name} in different countries', barmode='group');\n    return fig\n\ndef plot_one_text_var(q='', title=''):\n    col_name = [col for col in df_free.columns if q in col][0]\n    df_ = df_free[col_name].value_counts().head(7)\n    trace = go.Pie(labels=df_.index, \n                   values=df_.values\n                  )\n\n    data = [trace]\n    layout = go.Layout(\n        title=title\n    )\n\n    fig = go.Figure(data=data, layout=layout)\n    return fig\n\nvar_name = dict([('Q38', 'resources'), ('Q13', 'IDE'), ('Q14', 'hosted notebooks'), ('Q15', 'cloud computing services'), ('Q16', 'programming languages'),\n         ('Q19', 'ML frameworks'), ('Q21', 'data visualization libraries'), ('Q29', 'data bases'), ('Q31', 'types of data used'), ('Q36', 'online platforms'),\n         ('Q47', 'tools for interpretation'), ('Q49', 'tools for reproducibility')])\ncols2 = ['Q38', 'Q13', 'Q14', 'Q15','Q16', 'Q19', 'Q21', 'Q29', 'Q31', 'Q36', 'Q47', 'Q49']\n\ndef plot_country_multiple_choice_var_dropdown(var=''):\n    t = var_name[var]\n    #print(t)\n    col_names = [col for col in df_choice.columns if f'{var}_Part' in col]\n    data = []\n    buttons = []\n    n = df_choice['Q3_orig'].nunique()\n    for j, c in enumerate(sorted(df_choice['Q3_orig'].unique(), reverse=True)[::-1]):\n        visibility = [False] * 58\n        small_df = df_choice.loc[df_choice['Q3_orig'] == c, col_names]\n        text_values = [col.split('- ')[2] for col in col_names]\n        counts = []\n        for m, n in zip(col_names, text_values):\n            if small_df[m].nunique() == 0:\n                counts.append(0)\n            else:\n                counts.append(sum(small_df[m] == n))\n        orig_counts = counts.copy()\n        counts = [i \/ len(small_df) for i in counts]\n        trace = go.Bar(\n            x=text_values,\n            y=counts,\n            name=c,\n            marker=dict(color=j),\n            showlegend=True,\n            visible=True if j == 0 else False,\n            text = orig_counts,\n            textposition = 'outside'\n        )\n        data.append(trace)\n        visibility[j:j + 1] = [True]\n        buttons.append(dict(label = c,\n                                method = 'update',\n                                args = [{'visible': visibility},\n                                        {'title': f\"Responders in {c} by {t}\"}]))\n    updatemenus = list([dict(active=-1, buttons=buttons, x=1, y=2)])\n    layout = dict(height=500, width=800, title=f\"Responders in {sorted(df_choice['Q3_orig'].unique())[0]} by {t}\", updatemenus=updatemenus)\n    fig = dict(data=data, layout=layout)\n\n    iplot(fig);","1d9d12e9":"fig = plot_choice_var(var='Q38', title_name='resources')\niplot(fig);","0bc7e46f":"fig = plot_country_multiple_choice_var(var='Q38', title_name='resources')\niplot(fig);","f3b406f5":"plot_country_multiple_choice_var_dropdown('Q38')","349c8911":"fig = plot_one_text_var('Q38', title='Other popular resources')\niplot(fig)","8a48ce10":"fig = plot_choice_var(var='Q13', title_name='IDE')\niplot(fig);","b9df21ea":"fig = plot_country_multiple_choice_var(var='Q13', title_name='IDE')\niplot(fig);","4eab94ac":"plot_country_multiple_choice_var_dropdown('Q13')","5ddfa8aa":"fig = plot_one_text_var('Q13', title='Other popular IDE')\niplot(fig)","5b5db113":"fig = plot_choice_var(var='Q14', title_name='hosted notebooks')\niplot(fig);","5f673300":"fig = plot_country_multiple_choice_var(var='Q14', title_name='hosted notebooks')\niplot(fig);","67d922d4":"plot_country_multiple_choice_var_dropdown('Q14')","2e4dd240":"fig = plot_one_text_var(q='Q14')\niplot(fig)","a8f6c9c1":"fig = plot_choice_var(var='Q15', title_name='cloud computing services')\niplot(fig);","e4c8af84":"fig = plot_country_multiple_choice_var(var='Q15', title_name='cloud computing services')\niplot(fig);","d1bbf0bd":"plot_country_multiple_choice_var_dropdown('Q15')","ae258dc3":"fig = plot_one_text_var('Q15', title='Other popular cloud computing services')\niplot(fig)\n","2b03e773":"fig = plot_choice_var(var='Q16', title_name='programming languages')\niplot(fig);","769aed65":"fig = plot_country_multiple_choice_var(var='Q16', title_name='programming languages')\niplot(fig);","3aeb9a98":"plot_country_multiple_choice_var_dropdown('Q16')","6c86018d":"fig = plot_one_text_var('Q16', title='Other popular programming languages')\niplot(fig)","3c31b235":"fig = plot_choice_var(var='Q19', title_name='ML frameworks')\niplot(fig);","d1bcc05f":"fig = plot_country_multiple_choice_var(var='Q19', title_name='ML frameworks')\niplot(fig);","95a97b3a":"plot_country_multiple_choice_var_dropdown('Q19')","d9897ddd":"fig = plot_one_text_var('Q19', title='Other popular ML frameworks')\niplot(fig)","c414aaa1":"fig = plot_choice_var(var='Q21', title_name='data visualization libraries')\niplot(fig);","b3823a5f":"fig = plot_country_multiple_choice_var(var='Q21', title_name='data visualization libraries')\niplot(fig);","220fba6b":"plot_country_multiple_choice_var_dropdown('Q21')","9031d3b7":"fig = plot_one_text_var('Q21', title='Other popular data visualization libraries')\niplot(fig)","3f691359":"fig = plot_choice_var(var='Q29', title_name='data bases')\niplot(fig);","8bab2361":"fig = plot_country_multiple_choice_var(var='Q29', title_name='data bases')\niplot(fig);","78226dd9":"plot_country_multiple_choice_var_dropdown('Q29')","3f31a871":"fig = plot_one_text_var('Q29', title='Other popular data bases')\niplot(fig)","61e69efa":"fig = plot_choice_var(var='Q31', title_name='types of data used')\niplot(fig);","84d3f702":"fig = plot_country_multiple_choice_var(var='Q31', title_name='types of data used')\niplot(fig);","605bfe08":"plot_country_multiple_choice_var_dropdown('Q31')","e84c7db0":"fig = plot_one_text_var('Q31', title='Other popular types of data used')\niplot(fig)","f3e029d1":"fig = plot_choice_var(var='Q36', title_name='online platforms')\niplot(fig);","50f22535":"fig = plot_country_multiple_choice_var(var='Q36', title_name='online platforms')\niplot(fig);","c515ceda":"plot_country_multiple_choice_var_dropdown('Q36')","93fa5861":"fig = plot_one_text_var('Q36', title='Other popular types of online platforms')\niplot(fig)","9072b96d":"fig = plot_choice_var(var='Q47', title_name='tools for interpretation')\niplot(fig);","f886c6d3":"fig = plot_country_multiple_choice_var(var='Q47', title_name='tools for interpretation')\niplot(fig);","295a044f":"plot_country_multiple_choice_var_dropdown('Q47')","dcf7417d":"fig = plot_choice_var(var='Q49', title_name='tools for reproducibility')\niplot(fig);","88e39dc0":"fig = plot_country_multiple_choice_var(var='Q49', title_name='tools for reproducibility')\niplot(fig);","7fda7316":"plot_country_multiple_choice_var_dropdown('Q49')","d7dde41f":"And now let's see what other resourses people use. I'll show data for resources which were named by at least 10 responders.","e41f6af5":"For all countries situation is similar: those who seriously took the survey, spent ~15-30 minutes on it.","a6ab10ec":"In Russia people tend examine feature importance and use partial dependency plots more than in other countries. In India plotting decision boundaries in popular. And in USA sensitivity analysis is relatively popular.","96161ae1":"### programming languages","10588a68":"### How long did it take to answer the survey","cf394d87":"### Industry and profession","8dbbd92a":"## General information\n\nSome time ago Kaggle launched a big online survey for kagglers and now this data is public. There were multiple choice questions and some forms for open answers. Survey received 23,859 usable respondents from 147 countries and territories. As a result we have a big dataset with rich information on data scientists using Kaggle.\n\nIn this kernel I'll try to analyze this data and provide various insights. Main tools for this will be Python and seaborn + plotly.\n\n***Scroll down to find new interactive visualizations where you can choose any country and the graph will be shown for it***\n\n![](https:\/\/www.kaggle.com\/static\/images\/host-home\/host-home-business.png)\n\n### Main idea: comparing countries\n\nWhile there are many ways to analyse the data, I have decided to perform the analysis based on the country of the responders. You'll see more about this lower.","c140cdc5":"First place is ods.ai - a slack community of Russian DS which is open for everyone wishing to diccuss DS.","d0e20efe":"As expected most of the students have none to little education. And there are a lot of starting DA, DE and DS.\n\nOne interesting thing which I see is that there are a lot of experienced DE in Russia. I think they are programmers who switched career to SE.","83ccb03a":"## Multiple choice queations","415775ac":"### online platforms","fef4c3d4":"In Russia catboost library from Yandex is quite popular. It is even more used than lightgbm, which for some reason is almost not used in other countries.\n\nIt is interesting that Theano is still used. It was one of the first frameworks, I suppose a lot of people used it (myself included :)).","39afaf8a":"### cloud computing services","f74e38f6":"### tools for interpretation","63c0b301":"Now we see that the number of DE and DS is almost equal and the number of DA isn't far behind.\nIt is worth noticing that different companies could have very different titles. For example in Facebook DS could work as DA; in some companies situation could be opposite.","c946056b":"### Where do DS get useful information?","b7718b96":"Quite interesting!\n* Kaggle forums and Medium seem to be universally popular;\n* ArXiv is quite popular, but Russia likes it the most!;\n* Twitter, Knuggets and Reddit are also widely used;\n* In America https:\/\/fivethirtyeight.com is very popular, even though it is almost unknown in other countries;\n* And of course Siraj is popular in India with his famous teaching style;","de43643e":"Quite interesting. Usually people with 2 or more years of ML-experience are confident that they are DS, but in Russia people with 1-2 or even less that 1 year of experience consider themselves to be DS.","38d43bae":"#### Dividing responders in groups by countries\n\nI have decided to compare countries based on the information of responders living there. While all countries are unique, it would be difficult to analyze each and every country. As a result I have decided to take USA and India separately, because they have the largest number of responders, Russia, because I live there and other countries will be grouped in one category.","d64a25b6":"### Major","c9ec0e2b":"* Most popular IDE is Jupyter Notebooks. Well, obviously it is one of the best tools for fast EDA and modelling in Python;\n* RStudio is quite popular in USA - so lots of R-DS there? And it seems that in Russia the interest in R is quite low;\n* In Russia most people prefer to use Pycharm and other countries tend to use Notepad++. Different styles of coding?\n* Interesting that Spyder is quite popular in India;\n* Among other IDE Eclipse and Emacs are most widely used. A lot of people from Java-development?","169b1313":"### Salary","38d9b679":"### ML Frameworks","2bd43464":"We can see real differences between countries:\n* In Russia most of Kagglers are DE or DS, who are most relevant for Kaggle;\n* In USA there are more DA that DE among the Kagglers! I suppose this could be due to the fact that some DS are called DA. Also lot's of students;\n* In India most of Kagglers are students, who aspire to become DS (or DE);\n* Other countries are similar to Russia, but have a higher rate of students;","0417ece8":"It is difficult to compare salaries in different countries. 100-200k $ could be a norm for an American DS and a good salary in general, but in Russia 10-20k is a really big salary.","932a767e":"Postgress is really popular in Russia.\n\nBy the way, I'm surpised that Teradata was not  in the main options.","d91b4cbe":"### Responders in different countries","f8039803":"Most countries have a similar pattern - high rate of using free resources. And many don't use them at all.\nAmong other notebooks Databricks for Spark is used.","37f4b6ea":"Well, there are much more males then other genders. This could be due to bias or due to higher interest in this sphere. I won't say whether there is a discrimination or barriers - this isn't the place for this. Let's have a look at other things:\n* In general there are a lot of students or young professionals. I suppose that a lot of young people try to take part in competitions to get experience or medals\/prizes, which should boost their career;\n* It is worth noticing that India has a different trend - while in Russia, USA and other countries kagglers are 25-29 years old, in India most of responders are 18-21. I wonder what is the reason...\n* Also it is interesting that the ratio of women to other genders is higher in USA than in other countries. Good news!","26f65354":"### Years of experience","c3442e2a":"It is interestig that images are relatively less used in America, than in other countries.","7c6fab94":"### tools for reproducability","27224f74":"### data visualization libraries","0ae155ae":"It seems that there are two main clusters of kagglers based on education and age: bachelors of 18-29 years and masters of 22-34 years.","bc353cdc":"Most countries have similar patterns, but America has more experiences DS. This is understandable as DS popularity began there.","6067e508":"Quite interesting that while in Russia and India most don't use cloud services, in USA situation is the opposite.\nAdditionaly Digital Ocean is used by some people.","134530b7":"Python and SQL are widely used. In Russia R is quite rare. Russia and India use C\/C++ a lot and Java is popular in India.","4c686385":"### Years of learning ML vs self-confidence","acb6d1d6":"I know that many people has shown this graph, but still let's look at it again. I think that most of these titles can be joined into several groups:\n- Students can be a separate group,\n- Let's leave DS also by themselves;\n- People in research;\n- Next we have analysts - DA, BA and others, who need a different set of skills, but could be considered a level before DS;\n- DE and SE who build production systems;\n- Managers to lead the products;\n- And others;\n\nThis grouping is arbitrate and could be wrong, but let's see what will be the result.","b2b11128":"### New interactive graphs\nI have decided that showing only 4 countries may be not interesting enough. So I have added interactive graphs to this notebook - you can choose what you see by yourself!\nYou can select country for which data will be shown, column for colors and column for x labels. If you change values in widgets, it will take several seconds to update the plot.","c054b401":"### Degree","29474c86":"Nothing unexpected here. R users use ggplot2, Python - matplotlib\/seaborn and plotly.\n\nTableau is quite a popular tool to visualize data in companies.","fa3ec5c5":"It isn't surprising that kagglers usually have (or plan to get) higher education degree. Master degree is the most common one (though in India Bachelor degree is more wide-spread).\n\nIt is quite interesting that the rate of having a higher degree (master and doctoral) is higher for women than for men.","1899eb6b":"People come from various backgrounds, though most come from math and CS, which isn't surprising. On the other hand, we can say, that those who come from non-relevant background could have higher interest and drive in growing as a DS.\n\nIn is quite interesting that in India most kagglers have CS or engineering degree and business disciplines as well as maths aren't as popular as in other countries.","e40d3da8":"As expected most of the responders are from USA, India and China.\n\nUSA is the country where Data Science is the most developed, India and China have a lot of aspiring DS.\n\nMy country (Russia) has the fourth place, Kaggle is becoming more and more popular there.","85e3d7cb":"Let's see how many people responded to the survey in different countries.","c4e0bb1a":"### types of data used","5abe2eca":"### Gender and age","00619971":"### Hosted notebooks","5d118325":"It is worth noticing while kagglers in most countries use several platforms, in Russia Coursera is dominating.\n\nBy the way, 46 people mentioned that they use mlcourse.ai. This is a recently created course by Russian community ods.ai and it is great :)","a46971da":"### data bases","4bf3013d":"I think it is interesting to see which industries have the most developed ML practices. It isn't surprising that IT companies are far ahead.","6950007b":"### Most popular IDE","2191a8da":"Well... it seems that a lot of people closed the survey almost immediately after opening it, thus giving little info. And some people spent days on the survey! I suppose they opened the tab and forgot about it. Let's have a look at the surveys which took less than 3 hours."}}