{"cell_type":{"f242f20e":"code","df0e1755":"code","25b9d280":"code","cf5156fb":"code","1c49c627":"code","15645af7":"code","85e4835f":"code","6a3e608c":"code","b87954f8":"code","caa2494f":"code","39ad2617":"code","24fe6fce":"code","ee94a481":"code","c38bf489":"code","ad32785c":"code","e73727f9":"code","1cce8974":"markdown","0f030e50":"markdown","6c52daba":"markdown"},"source":{"f242f20e":"import numpy as np # linear algebra\nfrom scipy import stats # statistic library\nimport pandas as pd # To table manipulations\nimport seaborn as sns\nimport matplotlib.pyplot as plt","df0e1755":"df = pd.read_csv(\"..\/input\/telco-customer-churn\/WA_Fn-UseC_-Telco-Customer-Churn.csv\")  ","25b9d280":"print (\"Rows     : \" ,df.shape[0])\nprint (\"Columns  : \" ,df.shape[1])\nprint (\"\\nFeatures : \\n\" ,df.columns.tolist())\nprint (\"\\nMissing values :  \", df.isnull().sum().values.sum())\nprint (\"\\nUnique values :  \\n\",df.nunique())","cf5156fb":"Check NA values in dataset","1c49c627":"df['TotalCharges'] = pd.to_numeric(df.TotalCharges, errors='coerce')\ndf.isnull().sum()","15645af7":"df = df.dropna()\ndf.isnull().sum()\n#Remove NA values.","85e4835f":"# Creating a copy of the data \ndf_copy = df.copy()\ndf_copy.drop(['customerID','MonthlyCharges','TotalCharges','tenure'],axis=1,inplace = True)\ndf_copy.head()","6a3e608c":"summary = pd.concat([pd.crosstab(df_copy[x],df_copy.Churn) for x in df_copy.columns[:-1]], keys= df_copy.columns[:-1])\nsummary","b87954f8":"summary['Churn_Percentage'] = summary['Yes']*100\/(summary['No'] + summary['Yes'])\nsummary\n#Looking at the percentage churn we can take decision on where to focus to prevent or reduce the churn of customers.","caa2494f":"sns.set(style=\"ticks\", color_codes=True)\n\nfig, axes = plt.subplots(nrows = 3,ncols = 5,figsize = (25,15))\nsns.countplot(x = \"gender\", data = df, ax=axes[0][0])\nsns.countplot(x = \"Partner\", data = df, ax=axes[0][1])\nsns.countplot(x = \"Dependents\", data = df, ax=axes[0][2])\nsns.countplot(x = \"PhoneService\", data = df, ax=axes[0][3])\nsns.countplot(x = \"MultipleLines\", data = df, ax=axes[0][4])\nsns.countplot(x = \"InternetService\", data = df, ax=axes[1][0])\nsns.countplot(x = \"OnlineSecurity\", data = df, ax=axes[1][1])\nsns.countplot(x = \"OnlineBackup\", data = df, ax=axes[1][2])\nsns.countplot(x = \"DeviceProtection\", data = df, ax=axes[1][3])\nsns.countplot(x = \"TechSupport\", data = df, ax=axes[1][4])\nsns.countplot(x = \"StreamingTV\", data = df, ax=axes[2][0])\nsns.countplot(x = \"StreamingMovies\", data = df, ax=axes[2][1])\nsns.countplot(x = \"Contract\", data = df, ax=axes[2][2])\nsns.countplot(x = \"PaperlessBilling\", data = df, ax=axes[2][3])\nax = sns.countplot(x = \"PaymentMethod\", data = df, ax=axes[2][4])\nax.set_xticklabels(ax.get_xticklabels(),rotation=90)\nplt.show(fig)","39ad2617":"\ndef kdeplot(feature):\n    plt.figure(figsize=(9, 4))\n    plt.title(\"KDE for {}\".format(feature))\n    ax0 = sns.kdeplot(df[df['Churn'] == 'No'][feature].dropna(), color= 'navy', label= 'Churn: No')\n    ax1 = sns.kdeplot(df[df['Churn'] == 'Yes'][feature].dropna(), color= 'orange', label= 'Churn: Yes')\nkdeplot('tenure')\nkdeplot('MonthlyCharges')\nkdeplot('TotalCharges')","24fe6fce":"analysis1 = sns.catplot(y=\"Churn\", kind=\"count\", data=df, height=2.6, aspect=2.5, orient='h')","ee94a481":"plt.figure(figsize=(15, 15))\n\nplt.subplot(3, 2, 1)\nsns.countplot('gender', data=df, hue='Churn')\n\nplt.subplot(3, 2, 2)\nsns.countplot('SeniorCitizen', data=df, hue='Churn')\n\nplt.subplot(3, 2, 3)\nsns.countplot('Partner', data=df, hue='Churn')\n\nplt.subplot(3, 2, 4)\nsns.countplot('Dependents', data=df, hue='Churn')\n\nplt.subplot(3, 2, 5)\nsns.countplot('PhoneService', data=df, hue='Churn')\n\nplt.subplot(3, 2, 6)\nsns.countplot('PaperlessBilling', data=df, hue='Churn')","c38bf489":"plt.figure(figsize=(14, 14))\n\nplt.subplot(3, 2, 1)\ndf[df.Churn == 'No'].tenure.hist(bins=35, alpha=0.6, label='Churn=No')\ndf[df.Churn == 'Yes'].tenure.hist(bins=35, alpha=0.6, label='Churn=Yes')\nplt.legend()\nplt.xlabel('Number of months with company')\n\n\nplt.subplot(3, 2, 2)\ndf[df.Churn == 'No'].MonthlyCharges.hist(bins=35, alpha=0.6, label='Churn=No')\ndf[df.Churn == 'Yes'].MonthlyCharges.hist(bins=35, alpha=0.6, label='Churn=Yes')\nplt.xlabel('Monthly Payment')\nplt.legend()\n\n\nplt.subplot(3, 2, 3)\ndf[df.Churn == 'No'].TotalCharges.hist(bins=35, alpha=0.6, label='Churn=No')\ndf[df.Churn == 'Yes'].TotalCharges.hist(bins=35, alpha=0.6, label='Churn=Yes')\nplt.xlabel('Total Payment')\nplt.legend()","ad32785c":"plt.figure(figsize=(15, 15))\n\nplt.subplot(3, 2, 1)\nsns.countplot('OnlineBackup', data=df, hue='Churn')\n\nplt.subplot(3, 2, 2)\nsns.countplot('OnlineSecurity', data=df, hue='Churn')\n\nplt.subplot(3, 2, 3)\nsns.countplot('InternetService', data=df, hue='Churn')\n\nplt.subplot(3, 2, 4)\nsns.countplot('MultipleLines', data=df, hue='Churn')\n\nplt.subplot(3, 2, 5)\nsns.countplot('DeviceProtection', data=df, hue='Churn')\n\nplt.subplot(3, 2, 6)\nsns.countplot('TechSupport', data=df, hue='Churn')","e73727f9":"plt.figure(figsize=(15, 18))\n\nplt.subplot(3, 2, 1)\nsns.countplot('StreamingMovies', data=df, hue='Churn')\n\nplt.subplot(3, 2, 2)\nsns.countplot('StreamingTV', data=df, hue='Churn')\n\nplt.subplot(3, 2, 3)\ng = sns.countplot('PaymentMethod', data=df, hue='Churn')\ng.set_xticklabels(g.get_xticklabels(), rotation=45);\n\nplt.subplot(3, 2, 4)\ng = sns.countplot('Contract', data=df, hue='Churn')\ng.set_xticklabels(g.get_xticklabels(), rotation=45);","1cce8974":"There are only three numerical columns: tenure, monthly charges and total charges. \nThe probability density distribution can be estimate using the seaborn kdeplot function.\nFrom the plots above we can conclude that:\nRecent clients are more likely to churn\nClients with higher MonthlyCharges are also more likely to churn\nTenure and MonthlyCharges are probably important features","0f030e50":"# Exploratory Data Analysis","6c52daba":"![](http:\/\/www.google.com\/url?sa=i&url=https%3A%2F%2Fwww.quantiphi.com%2Fportfolio-posts%2Fcustomer-churn-analytics%2F&psig=AOvVaw13mN5rNbiZ_LtInd5xgyO7&ust=1596297447169000&source=images&cd=vfe&ved=0CAIQjRxqFwoTCMiOo8zt9-oCFQAAAAAdAAAAABAV)\n# Data Overview"}}