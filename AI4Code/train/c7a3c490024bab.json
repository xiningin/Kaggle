{"cell_type":{"dc158c20":"code","959f5c54":"code","365eb63b":"code","5a268173":"code","b3c1f658":"code","724860ea":"code","2c4a1fb7":"code","3d3f501d":"code","784d714a":"code","8b352ac2":"code","9735f10a":"code","c108b990":"code","31c16e32":"code","a751128a":"code","291d511a":"code","539ed324":"code","d579372d":"code","78db4bde":"markdown","49e817fc":"markdown","7e3187cd":"markdown","52497d9b":"markdown","6eeab40f":"markdown","27ddb0ab":"markdown","7cc4a45b":"markdown","75d580a0":"markdown","0759b0d1":"markdown","8f2d5947":"markdown","8b6d7f87":"markdown","123661d6":"markdown","ed7511ed":"markdown"},"source":{"dc158c20":"from geopy.geocoders import Nominatim\nfrom geopy.geocoders import GoogleV3\nfrom folium.plugins import HeatMap\nfrom folium.map import FeatureGroup\nfrom wordcloud import WordCloud\nimport matplotlib.pyplot as plt\nimport plotly.graph_objects as go\nimport folium\nimport pandas as pd\nimport numpy as np","959f5c54":"data=pd.read_csv('..\/input\/preprocess-zomato\/preprocessed_data.csv')\ndf=pd.read_csv(\"..\/input\/zomato-bangalore-restaurants\/zomato.csv\")","365eb63b":"locations=pd.DataFrame({\"Name\":df['location'].unique()})\nlocations['Name']=locations['Name'].apply(lambda x: \"Bangalore \" + str(x))\n\nlat=[]\nlon=[]\n\ngeolocator=Nominatim(user_agent=\"app\")\nfor location in locations['Name']:\n    location = geolocator.geocode(location)\n    if location is None:\n        lat.append(np.nan)\n        lon.append(np.nan)\n    else:    \n        lat.append(location.latitude)\n        lon.append(location.longitude)\nlocations['lat']=lat\nlocations['lon']=lon\n","5a268173":"locations.columns=['listed_in(city)','lat','lon']\nlocations['listed_in(city)']=locations['listed_in(city)'].apply(lambda x: x.split()[1])","b3c1f658":"merged_data=df.merge(locations,on='listed_in(city)',how='left')","724860ea":"KFC= merged_data[merged_data['name'].isin([\"KFC\",\"Kentucky Fried Chicken\"])]\ncoffeeday= merged_data[merged_data['name'].isin([\"Cafe Coffee Day\",\"Coffee Day\"])]\nmcdonalds=merged_data[merged_data['name'].isin([\"Mc Donald's\",\"McDonald's\",\"McDonald's Play Place\"])]","2c4a1fb7":"def create_data(df):\n    ind=list(df['listed_in(city)'].value_counts().index.to_numpy())\n    val=list(df['listed_in(city)'].value_counts().to_numpy())\n    ret_data=pd.DataFrame(\n        {\n            'listed_in(city)':ind,'count':val\n        }\n    )\n    ret_data= ret_data.merge(locations,on='listed_in(city)',how='left').dropna().reset_index()\n    return ret_data[['count','lat','lon']]","3d3f501d":"def apply_marker(row,fg,icon_url,iconsize=(40,30)):\n    icon = folium.features.CustomIcon(icon_url,icon_size=iconsize)\n    fg.add_child(folium.Marker(location=[row['lat'], row['lon']],popup=f\"count= {row['count']}\",icon=icon))","784d714a":"Rest= data[data['Restaurants'].isin([\"KFC\",\"Kentucky Fried Chicken\",\"Cafe Coffee Day\",\"Coffee Day\",\"McDonald's\"])]\nprint(Rest.value_counts('Restaurants'))","8b352ac2":"icon_url='https:\/\/1000logos.net\/wp-content\/uploads\/2017\/03\/Kfc_logo.png'\nbase_map = folium.Map(location=[12.98, 77.62], control_scale=True, zoom_start=12)\nkfc_fg = FeatureGroup(name='KFC')\ncreate_data(KFC).apply(lambda row: apply_marker(row,kfc_fg,icon_url), axis=1)\n\nicon_url='https:\/\/1000logos.net\/wp-content\/uploads\/2017\/03\/McDonalds-logo.png'\nmc_fg = FeatureGroup(name='Mc Donalds')\ncreate_data(mcdonalds).apply(lambda row: apply_marker(row,mc_fg,icon_url), axis=1)\n\nicon_url='https:\/\/1000logos.net\/wp-content\/uploads\/2017\/03\/McDonalds-logo.png'\nmc_fg = FeatureGroup(name='Mc Donalds')\ncreate_data(mcdonalds).apply(lambda row: apply_marker(row,mc_fg,icon_url), axis=1)\n\nicon_url='https:\/\/seeklogo.com\/images\/C\/cafe-coffee-day-logo-6D9EAA6778-seeklogo.com.png'\ncoffee_fg =FeatureGroup(name='Coffee Day')\ncreate_data(coffeeday).apply(lambda row: apply_marker(row,coffee_fg,icon_url,(20,30)), axis=1)\n\nbase_map.add_child(kfc_fg)\nbase_map.add_child(mc_fg)\nbase_map.add_child(coffee_fg)\nbase_map.add_child(folium.map.LayerControl())\nbase_map","9735f10a":"KFC= df[df['name'].isin([\"KFC\",\"Kentucky Fried Chicken\"])]\ncoffeeday= df[df['name'].isin([\"Cafe Coffee Day\",\"Coffee Day\"])]\nmcdonalds=df[df['name'].isin([\"Mc Donald's\",\"McDonald's\",\"McDonald's Play Place\"])]","c108b990":"def ret_corpus(df):\n    corpus=df['dish_liked'].values.tolist()\n    corp=[]\n    for c in corpus:\n        try:\n            for food in c.split(', '):\n                corp.append(food)\n        except:\n            continue\n    corpus=','.join(corp)\n    return corpus","31c16e32":"\nfig,ax=plt.subplots(1,3,figsize=(20,30))\n\ncorpus=ret_corpus(KFC)\nwordcloud = WordCloud(max_font_size=None, background_color='white', collocations=False,\n                      width=1500, height=1500).generate(corpus)\nax[0].imshow(wordcloud)\nax[0].set_title('KFC')\ncorpus=ret_corpus(coffeeday)\nwordcloud = WordCloud(max_font_size=None, background_color='white', collocations=False,\n                      width=1500, height=1500).generate(corpus)\nax[1].set_title('Coffee Day')\nax[1].imshow(wordcloud)\n\ncorpus=ret_corpus(mcdonalds)\nwordcloud = WordCloud(max_font_size=None, background_color='white', collocations=False,\n                      width=1500, height=1500).generate(corpus)\nax[2].set_title('Mc Donalds')\nax[2].imshow(wordcloud)\n","a751128a":"KFC= data[data['Restaurants'].isin([\"KFC\",\"Kentucky Fried Chicken\"])]\ncoffeeday= data[data['Restaurants'].isin([\"Cafe Coffee Day\",\"Coffee Day\"])]\nmcdonalds=data[data['Restaurants'].isin([\"Mc Donald's\",\"McDonald's\",\"McDonald's Play Place\"])]\n\nvotes_kfc=KFC['votes'].to_numpy().mean()\nvotes_mcdonalds=mcdonalds['votes'].to_numpy().mean()\nvotes_coffeeday=coffeeday['votes'].to_numpy().mean()\n\nrate_kfc=KFC['rate'].astype('float').to_numpy().mean()\nrate_mcdonalds=mcdonalds['rate'].astype('float').to_numpy().mean()\nrate_coffeeday=coffeeday['rate'].astype('float').to_numpy().mean()","291d511a":"import plotly.express as px\nRest= data[data['Restaurants'].isin([\"KFC\",\"Kentucky Fried Chicken\",\"Cafe Coffee Day\",\"Coffee Day\",\"McDonald's\"])]\nfig = px.scatter(Rest, x=\"votes\", y=\"rate\", color=\"Restaurants\", symbol=\"Restaurants\",title='Votes vs Rating')\n\nfig.update_layout(\n    yaxis_title=\"Ratings\",\n    legend_title=\"Legend Title\",\n    font=dict(\n        family=\"Courier New, monospace\",\n        size=18,\n        color=\"darkblue\",\n        \n    )\n)\n\nfig.show()","539ed324":"d_k=[]\nd_v=[]\nr=[]\nk=coffeeday.groupby('location').mean()['votes'].keys()\nv=coffeeday.groupby('location').mean()['votes'].tolist()\nd_k+=k.tolist()\nd_v+=v\nr+= ['CoffeeDay']*len(v)\nk=KFC.groupby('location').mean()['votes'].keys()\nv=KFC.groupby('location').mean()['votes'].tolist()\nd_k+=k.tolist()\nd_v+=v\nr+= ['KFC']*len(v)\nk=mcdonalds.groupby('location').mean()['votes'].keys()\nv=mcdonalds.groupby('location').mean()['votes'].tolist()\nd_k+=k.tolist()\nd_v+=v\nr+= ['Mc Donalds']*len(v)\n\narea_wise_data= pd.DataFrame({\n    'location':d_k,\n    'avg_votes':d_v,\n    'Restaurant':r\n})\nfig = px.bar(area_wise_data, x=\"location\",y='avg_votes',color=\"Restaurant\", barmode='group')\nfig.show()","d579372d":" x =['KFC', 'Mc Donalds', 'Coffee Day']\ny = [votes_kfc,votes_mcdonalds,votes_coffeeday]\n\nfig = go.Figure(data=[go.Bar(x=x, y=y,\n            hovertext=[f'rating={rate_kfc}',f'rating={rate_mcdonalds}',f'rating={rate_coffeeday}'])])\n\nfig.update_traces(marker_color='rgb(158,202,225)', marker_line_color='rgb(8,48,107)',\n                  marker_line_width=1.5, opacity=0.6)\nfig.update_layout(title_text='Popularity of Restaurants',xaxis_title='Restaurants',yaxis_title='Average Votes per Outlet')\nfig.show()","78db4bde":"* The Most Popular Dishes in KFC are Burgers and Chicken\n* The Most Popular Dishes in Mc Donalds Burger , Chicken and Fries.\n* The Most Popular Dishes in Cafe Coffee Day are Coffee and Sandwiches\n\n**Inferences :**\n1. We could Notice that that KFC and Mc Donalds Being American Fast Food Restaurants are popular for its Chicken and Burger.\n2. Fries are More Popular in Mc Donalds than in KFC\n3. Zinger and Maharaja are trademark Burgers of KFC and Mc Donalds and is Famous among people\n4. We could also notice Rice being popular in KFC owing to South Indian love for Rice.\n5. The Word Cloud of KFC is much Sparser than Mc Donalds from this we could infer that KFC focuses on a limited menu that is popular among Bangalorean while Mc Donalds have a wider range of Items.\n6. Cafe Coffee Day being a Cafe is famous for coffees, sandwiches and Brownies.","49e817fc":"We have found the importance of votes to analyze the popularity of the restaurant chains. But vots by itself is not suitable for measuring popularity as we have varied number of outlets for each restaurant chains hence the average of votes for each chain was selected to analyze the popularity of the restaurant chains.","7e3187cd":"We Could Notice that the Outlets are well spread across Bangalore and Each chain has atleast one branch among all prominent areas of Bangalore thus the sample data we use to test the popularity of the restaurants reflect the sentiments of the population of Bangalore.","52497d9b":"# Which Fast Food Chain Bangalore loves the most?\n\nKFC and Mc Donalds are the most popular American Fast Food Chains in India we are going to compare the popularity of these chains among Bangaloreans. Bangalore is an IT Hub in India thus Cafes have become a popular trend , we thus include Cafe Coffee Day into the mix to find the Restaurant Bangalore Loves the most.\n\n![](https:\/\/www.pontemasfuerte.com\/bePMF\/wp-content\/uploads\/2015\/03\/mcdonalds-kfc-874x492.png)","6eeab40f":"We Could Notice a similar number of outlets for Mc Donalds and KFC . Cafe Coffee day has 96 outlets in Bangalore owing to it being primarily a cafe and Bangalore being an IT Hub with Coffee Loving Techies spread wide across Bangalore. :tada:","27ddb0ab":"## Most Popular Dishes \n\nEach Restaurant Would Have its own Popular Dishes That people crave for we in this section are looking for some patterns by which we could conclude regarding the taste of people in Bangalore.\n\nWord Cloud:\n*A Word Cloud is an Image with  Words at random postions. The Font Size of the words determine the popularity the most popular word would hae the largest font size.*\n\n**We Have Used The dishes liked by each user for each chain to determine the popular foods among the food chains.**","7cc4a45b":"We could notice that KFC has higher number of votes irrespective of area which disproves the idea of KFCs being older has more votes since newer branches of KFC too have more votes than Mc Donalds in most areas of Bangalore. **This is a clear sign of KFC's popularity among Bangaloreans.**","75d580a0":"The Map Consists of Bangalore locations at which outlets of each chain is present\/. On Pressing the marker the number of outlets of each chain at the location is displayed. You could switch the layers at the top right corner to change the chain to be displayed.","0759b0d1":"## Popularity of Caffe Coffe Day, KFC and Mcdonalds","8f2d5947":"## Outlet Locations Of the 3 Chains","8b6d7f87":"Total Number of Restaurants for each Restaurant Chain is :","123661d6":"* We could Notice that cafe Coffe day is clustered towards the left of the graph as there are are comparitively larger number of cafe coffee day outlets than KFCs and Mc Dondalds. Though Number of the outlets are high there is a higer vertical scatter among Cafe Coffee Day which is an indication of need for better service at Cafe Coffee Day Outlets.\n\n* KFCs in General are mostly scattered towards the top right corner of the graph which shows us the service and qualtiy of KFCs in Bangalore.\n\n* Mc Donalds maintain a similar rating as compared to that of KFC which shows similar quality between KFC and Mc Donalds\n\n* KFCs in general has higher number of Votes as Compared to Mc Donalds which leads us to the speculation if the KFC branches are older than Mc DOnald's Branches.","ed7511ed":"**By the Above Graph we can conclude that KFC has more Popularity among Bangaloreans.**\n\n* KFC has the folllowing Characteristics which I think helps them to be the most popular\n    1. They have an updated menu which includes local ingredients based dishes.\n    2. They offer better service than Mc Donalds and Cafe Coffee Day.\n    3. They focus on providing a tasty, limited menu.\n\n* Mc Donalds Have to improvise on thier popularity by tweaking thier menu to attact local customers.\n\n* Cafe Coffee Day Has to Improve its service to attract morre customers since its rating and votes are poor."}}