{"cell_type":{"1282648f":"code","319328f0":"code","78334415":"code","afaf9509":"code","32b40f6a":"code","937c4988":"code","cddebf38":"code","9dad29c8":"code","d543bee4":"code","80fee7e0":"code","c046a43e":"code","57a7dfb2":"code","d82c0674":"code","e5370017":"code","399c5d27":"code","238881a9":"markdown","c17027b7":"markdown","9902785f":"markdown","22e12685":"markdown","35d2a23d":"markdown","4b3f364d":"markdown","b3b56c82":"markdown","a560e9cb":"markdown","98b29b04":"markdown","1a3a3d2f":"markdown","f13f703f":"markdown","358b5b52":"markdown","60b17562":"markdown","96d4d6b8":"markdown","d3ec8f51":"markdown","4c1e1bf8":"markdown","89a670b4":"markdown"},"source":{"1282648f":"# This Python 3 environment comes with many helpful analytics libraries installed\n# It is defined by the kaggle\/python docker image: https:\/\/github.com\/kaggle\/docker-python\n# For example, here's several helpful packages to load in \n\nimport numpy as np # linear algebra\nimport pandas as pd # data processing, CSV file I\/O (e.g. pd.read_csv)\nimport matplotlib.pyplot as plt\nimport seaborn as sns\n%matplotlib inline\nfrom datetime import date\n\n# Input data files are available in the \"..\/input\/\" directory.\n# For example, running this (by clicking run or pressing Shift+Enter) will list all files under the input directory\n\nimport os\nfor dirname, _, filenames in os.walk('\/kaggle\/input'):\n    for filename in filenames:\n        print(os.path.join(dirname, filename))\n\n# Any results you write to the current directory are saved as output.","319328f0":"credits = pd.read_csv(\"\/kaggle\/input\/the-movies-dataset\/credits.csv\")\nmeta = pd.read_csv(\"\/kaggle\/input\/the-movies-dataset\/movies_metadata.csv\",usecols=['revenue','release_date','id','budget'])\nmeta = meta[~meta.id.str.contains(\"-\")]\nmeta['id'] = meta['id'].astype(int)\nmeta.drop_duplicates(keep='first', inplace=True)","78334415":"from ast import literal_eval\ncredits['crew'].fillna('[]', inplace=True)\ncredits['cast'].fillna('[]', inplace=True)\ncredits['crew']=credits['crew'].apply(literal_eval)\ncredits['cast']=credits['cast'].apply(literal_eval)","afaf9509":"def get_actor(namedict):\n    result={}\n    try:\n        result['actor_1_name']=[x['name'] for x in namedict if x['order']==0][0]\n        result['actor_2_name']=[x['name'] for x in namedict if x['order']==1][0]\n        result['actor_3_name']=[x['name'] for x in namedict if x['order']==2][0]\n    except:\n        name=np.nan\n    return result\n        \ndef get_director(namedict):\n    try:\n        name=[x['name'] for x in namedict if x['job']=='Director'][0]\n    except:\n        name=np.nan\n    return name\n\ndef get_gender(namedict):\n    result={}\n    try:\n        result['actor_1_gender']=[x['gender'] for x in namedict if x['order']==0][0]\n        result['actor_2_gender']=[x['gender'] for x in namedict if x['order']==1][0]\n        result['actor_3_gender']=[x['gender'] for x in namedict if x['order']==2][0]\n    except:\n        gender=np.nan\n    return result\n\n\n\n#Creating two additional  columns for director and actor    \ncredits['director']=credits['crew'].apply(get_director)\n\n#creating the 3 main actors for the movie\ncredits['actor_1_name']   =credits['cast'].apply(get_actor).apply(lambda x :x.get('actor_1_name',''))\ncredits['actor_2_name']   =credits['cast'].apply(get_actor).apply(lambda x :x.get('actor_2_name',''))\ncredits['actor_3_name']   =credits['cast'].apply(get_actor).apply(lambda x :x.get('actor_3_name',''))\ncredits['actor_1_gender']   =credits['cast'].apply(get_gender).apply(lambda x :x.get('actor_1_gender',''))\ncredits['actor_2_gender']   =credits['cast'].apply(get_gender).apply(lambda x :x.get('actor_2_gender',''))\ncredits['actor_3_gender']   =credits['cast'].apply(get_gender).apply(lambda x :x.get('actor_3_gender',''))\n\n\n#Dropping cast and cast and crew columns as no longer needed\ncredits.drop(['cast','crew'], inplace=True, axis=1)\ncredits.drop_duplicates(keep='first', inplace=True)","32b40f6a":"credits.head()","937c4988":"credits.set_index('id',inplace=True)\nmeta.set_index('id',inplace=True)\ndf_1 = credits.merge(meta,on='id',how='left')","cddebf38":"df_1 = df_1[df_1.actor_1_gender.isin([1,2])]","9dad29c8":"df_1.describe(include='all')","d543bee4":"gmap = {0:'Unknown',1:'Female',2:'Male'}\ndf_1['Gender_STR'] = df_1['actor_1_gender'].map(gmap)\ndf_1['release_date_f'] = pd.to_datetime(df_1['release_date'])\ndf_1['Year'] = df_1['release_date_f'].apply(lambda x: x.year)\nrecent = df_1.loc[df_1['Year'] >= 1980]","80fee7e0":"temp = recent.groupby(\"Gender_STR\")['actor_1_gender'].count()\ntemp_sum=temp.sum()\n\nsize_pct =round(temp.apply(lambda x: 100*x\/temp_sum),2)\nsize_pct","c046a43e":"# create data\nnames=['Female','Male']\nsize=size_pct\n \n# Create a circle for the center of the plot\nmy_circle=plt.Circle( (0,0), 0.7, color='white')\n# Give color names\nplt.pie(size, labels=names, colors=['red','green','blue','skyblue'])\np=plt.gcf()\np.gca().add_artist(my_circle)\n \nfrom palettable.colorbrewer.qualitative import Pastel1_7\nplt.pie(size, labels=names, colors=Pastel1_7.hex_colors)\np=plt.gcf()\np.gca().add_artist(my_circle)\nplt.show()","57a7dfb2":"plt.figure(figsize=(20,6))\nsns.set_context('notebook')\nsns.countplot(data=recent,x='Year',hue='Gender_STR')\nplt.xticks(rotation=30)","d82c0674":"pivot_1 = recent.pivot_table(values='director', index='Year', columns='Gender_STR', aggfunc='count', fill_value=0,dropna=False)\npivot_1['Perc_Female'] = pivot_1['Female']\/(pivot_1['Female']+pivot_1['Male'])\npivot_1['Perc_Male'] = pivot_1['Male']\/(pivot_1['Female']+pivot_1['Male'])\n\npivot_1 = pivot_1.reset_index()","e5370017":"from matplotlib.ticker import (MultipleLocator, FormatStrFormatter,AutoMinorLocator,PercentFormatter)\n\n\nfig, ax = plt.subplots(figsize=(20,6)) \np1 = plt.bar(pivot_1['Year'], pivot_1['Perc_Male'])\np2 = plt.bar(pivot_1['Year'], pivot_1['Perc_Female'],bottom=pivot_1['Perc_Male'])\n\nplt.ylabel('Percentage Of Total Split')\nplt.title('Gender of lead roles in movies over time')\nplt.legend((p1[0], p2[0]), ('Male', 'Female'), loc='lower center',bbox_to_anchor=(0.5, -0.25))\n\nax.yaxis.set_minor_locator(MultipleLocator(0.05))\nax.xaxis.set_minor_locator(MultipleLocator(1))\nax.yaxis.set_major_formatter(PercentFormatter(xmax=1, decimals=0, symbol='%'))","399c5d27":"fig, ax = plt.subplots(figsize=(20,8)) \n\ndf_2 = pivot_1.loc[(pivot_1['Year'] >= 2000)&(pivot_1['Year'] <= 2017),:]\n\n# Plot the observed data\nplt.plot(df_2['Year'], df_2['Perc_Female'], marker=\"x\", label='Observed',linewidth=0.1)\n# Fit a model and predict future dates\npredict_dates = range(2000,2025,1)\n\nmodel = np.polyfit(df_2['Year'], df_2['Perc_Female'], 1)\nmodel_exp = np.polyfit(df_2['Year'], df_2['Perc_Female'], 2)\npredicted = np.polyval(model, predict_dates)\npredicted_exp = np.polyval(model_exp, predict_dates)\n\n# Plot the model\nplt.plot(predict_dates, predicted, lw=2,ls='--',label='Predicted Linear')\nplt.plot(predict_dates, predicted_exp, lw=2,ls='--',label='Predicted Expoential')\n#plt.plot(model)\n\n\n\nplt.ylabel('Percentage Lead Females')\nplt.title('Gender of female lead roles in movies over time')\nax.yaxis.set_minor_locator(MultipleLocator(0.05))\nax.xaxis.set_minor_locator(MultipleLocator(1))\nax.yaxis.set_major_formatter(PercentFormatter(xmax=1, decimals=0, symbol='%'))\nplt.legend()\nplt.ylim(bottom=0,top=0.5)","238881a9":"Females as leading roles vs males as leading roles","c17027b7":"So it's not looking good for females. However you could present the argument 'but female representation has got a lot better in recent years' all that is from the 80's and 90's. I'm not convinced, so lets check it out.","9902785f":"Ratings for female lead roles over time vs males (normalised)","22e12685":"Only really interested in the last 40 years or so, limit the release dates to 1980+, also just convert gender to text to make it easier to read. For now we will only focus on lead roles not the number of male\/female total in the movie","35d2a23d":"Seems to be a dodgy index or something, keeps getting parsed as a date?","4b3f364d":"Join this onto the meta data, then we can split this down by time, revenue amounts.","b3b56c82":"I picked the period from when we can see the percentage start increasing so this might be optimistic, but we could see female lead roles approaching 40% by 2025.","a560e9cb":"# Gender In Movies:\n## Introduction:\nMany parts of culture are influenced by movies and television, this shapes our attitudes and actions as a whole society and with the introduction of services like Netflix, media has never been so easy to access. I've decided to carry out this short study because when I looked there seems to be no focus on how women are represented versus men. It's a well known phenomina that women have are difficulty in live *because* they are women in areas like:\n* Finding a job and obtaining equal pay\n* Family life\n* Equal Rights in most countries \n* Representation\n\nThis study will focus on the last aspect of these issues, using film and television as a proxy for what is happening in wide society. A similar study has been done here: https:\/\/www.nyfa.edu\/film-school-blog\/gender-inequality-in-film-infographic-updated-in-2018\/ but I couldn't find their source and it seemed to be lots of interesting facts rather than a study. Which is what I would like this to focus on. ","98b29b04":"## ","1a3a3d2f":"# To be continued...","f13f703f":"For now I'm only interested in where we got a match for the gender, not 100% but still get 33K entries","358b5b52":"Revenues for females vs males and budgets","60b17562":"Manipulate so that we have the order of appearance, actor name, their gender and director name","96d4d6b8":"Breakdown over time proportionally split by male\/female","d3ec8f51":"### Caveats\nThere will be a number of caveats to this analysis. Limitiations will be:\n* Using movies and television as a proxy for womens representation. Using this proxy implies that movies == real life which doesn't really make sense, but in a way films capture aspects of what society is like when they are made. Smoking on screen decreases damatically over time when it becomes clear that smoking is not something good for your health etc..\n* Using this movie database I am only looking at *western* culture. Other cultures that would otherwise be considered would be under represented. I don't believe there are any Bollywood films in this database unfortunately\n* This is by no means an accedemic study. I'm just interested in what the data say","4c1e1bf8":"So we can see that men outnumber women, and that this is improving since the turn of the century. It's not 100% clear by how much *proportionally* this is improving, maybe more women are appearing in movies because more movies are being made? ","89a670b4":"So we can see in fact that movies do have more female leads over time, but this is marginal, lets fit a trend to this and we can see where we can see where it's going."}}