{"cell_type":{"6c63ae5d":"code","d4973278":"code","afaed895":"code","4e53a2fe":"code","260ca35a":"code","05a8b5f0":"code","788e3330":"code","3afcc70f":"code","d36b7a31":"code","e4a74e6a":"code","20761522":"code","46d39220":"code","9c81cfc1":"code","c5406697":"code","134a5c74":"code","fa9381e8":"markdown","1e6188d3":"markdown","76f560f4":"markdown","1157ece9":"markdown","1b175080":"markdown","06664118":"markdown","fc783629":"markdown","1be91853":"markdown","927e67e9":"markdown"},"source":{"6c63ae5d":"#Importing required packages\nimport pandas as pd\nimport numpy as np","d4973278":"#Loading the dataset\ndf_cc=pd.read_csv('..\/input\/credit-card-customers\/BankChurners.csv')","afaed895":"#First 5 rows in the dataset\ndf_cc.head(5)","4e53a2fe":"#Deleting last 2 columns as suggested in Data description\ndf_cc=df_cc.drop(['Naive_Bayes_Classifier_Attrition_Flag_Card_Category_Contacts_Count_12_mon_Dependent_count_Education_Level_Months_Inactive_12_mon_1', 'Naive_Bayes_Classifier_Attrition_Flag_Card_Category_Contacts_Count_12_mon_Dependent_count_Education_Level_Months_Inactive_12_mon_2'], axis = 1) ","260ca35a":"#First 5 rows in the dataset\ndf_cc.head(5)","05a8b5f0":"#Information about columns and datatype\ndf_cc.info()","788e3330":"#Checking unique values of Attrition_flag\ndf_cc['Attrition_Flag'].unique()","3afcc70f":"#Changing Attrition_flag to numeric\ndf_cc.loc[df_cc['Attrition_Flag'] == 'Existing Customer', 'Attrition_Flag'] = 0\ndf_cc.loc[df_cc['Attrition_Flag'] == 'Attrited Customer', 'Attrition_Flag'] = 1\ndf_cc.Attrition_Flag = df_cc.Attrition_Flag.astype(int)","d36b7a31":"#One hot encoding for Categorical variables\ndf_cc_encoded = pd.get_dummies(df_cc)\n\n#Dropping client ID\ndf_cc_encoded=df_cc_encoded.drop(['CLIENTNUM'], axis = 1) ","e4a74e6a":"#Defining X and Y\ndf_cc_X = df_cc_encoded.loc[ : , df_cc_encoded.columns != 'Attrition_Flag']\ndf_cc_y = df_cc_encoded['Attrition_Flag']","20761522":"#Feature Importance based on Decision Tree classifier\nfrom sklearn.tree import DecisionTreeClassifier\n\nclf = DecisionTreeClassifier()\nclf.fit(df_cc_X, df_cc_y)\n\npd.Series(clf.feature_importances_, index=df_cc_X.columns[:]).plot.bar(color='steelblue', figsize=(12, 6))","46d39220":"import matplotlib.pyplot as plt\ncorrelations = df_cc.loc[ : , df_cc.columns != 'Attrition_Flag'].corrwith(df_cc.Attrition_Flag)\ncorrelations = correlations[correlations!=1]\ncorrelations.plot.bar(\n        figsize = (18, 10), \n        fontsize = 15, \n        color = '#ec838a',\n        rot = 45, grid = True)\nplt.title('Correlation with Churn Rate \\n',\nhorizontalalignment=\"center\", fontstyle = \"normal\", \nfontsize = \"22\", fontfamily = \"sans-serif\")","9c81cfc1":"import plotly.express as px\nfrom plotly.subplots import make_subplots","c5406697":"df_txn_count=df_cc_encoded.groupby(\"Attrition_Flag\").agg({\"Total_Trans_Ct\" : np.median}).reset_index()","134a5c74":"fig = px.bar(df_txn_count,\n             y='Total_Trans_Ct',\n             x='Attrition_Flag',\n             color='Attrition_Flag')\nfig.update_layout(autosize=False, width=800, height=400,title='Median Txn Counts of Attrition vs Non Attrition')\nfig.show()","fa9381e8":"In this notebook, we would be providing a visualization which would help us understand the reasons customers are churning and how these factors be tuned to improve the retention.","1e6188d3":"**Feature Importance**","76f560f4":"Customers with higher number of transactions are expected to retain logner. Let's look at what is attrition rate among buckets.","1157ece9":"Following steps are there in this notebook for easy reference:","1b175080":"# Credit Card customers : Why are they churning?","06664118":"* Data Import and Basic Check\n* Data types and Null values check\n* One hot encoding for categorical data\n* Decision Tree classifier for Feature Importance\n* Data Visualization for high importance fatures for Churned vs Non Churned Population\n* Data Visualization for Positive and Negative Correlation","fc783629":"**Visualization for important features: Churned vs Non Churned Customers**","1be91853":"This shows there are no null values in entire dataframe.","927e67e9":"It is evident that more Inactivity and relationships drive higher churn rate whereas lower activity (Transaction Count, Utilization ratio etc) drives higher chruning. "}}