{"cell_type":{"8537df9c":"code","b9d073b7":"code","c0266aad":"code","6b27b570":"code","7b8450f9":"code","db9b78c4":"code","d262a10a":"code","d3acc17c":"code","2686fb08":"code","ccfdefe7":"code","ad0727eb":"code","41a8a96c":"code","fa957964":"code","f714dfa7":"code","e807c4cc":"code","1dfc4dd9":"code","61a9ad08":"code","33581002":"code","b7ec5c8c":"code","d20322a4":"code","f4af9ce0":"code","314632c5":"code","5d2d56c6":"code","1b1e9832":"code","7c788ec9":"code","6028b116":"code","df55abde":"code","16f4dc5f":"code","66415dc7":"code","4428e0dd":"code","9d67f16f":"code","4e5550bc":"code","95b6e29a":"code","5672cf20":"code","a6c44337":"code","de5117f3":"code","ab71b670":"code","d5032387":"code","7844deda":"code","eca65b51":"code","1d861906":"code","6daa9037":"code","eae45d62":"code","3460bfda":"code","cccdf5f1":"code","9347e50b":"code","c3f5af6f":"code","74ece1bd":"code","4f3729f1":"code","abd34b92":"code","f568bd58":"code","c6fb86d3":"code","d4c981e0":"code","a4dc59d1":"code","6a75fd08":"code","658a02eb":"code","3f9f4813":"code","59e7ea52":"code","07334c46":"code","00b3b1c0":"code","ae786aad":"code","f8dc263d":"code","b09537b8":"code","9060e951":"code","c5aa417d":"code","323a4a0b":"markdown"},"source":{"8537df9c":"import pandas as pd\nbank=pd.read_csv(\"..\/input\/cusersmarildownloadsgermancsv\/german.csv\",sep=';' )\nbank.head()","b9d073b7":"bank.info()","c0266aad":"bank.Account_Balance.value_counts()*100 \/ len(bank)","6b27b570":"bank=bank.replace({'Account_Balance' : { 1 : 'No Account', 2 : 'None',3: 'Below 200 DM',4:'200 DM or Above'}})\nbank.Account_Balance.value_counts()*100 \/ len(bank)","7b8450f9":"bank.Payment_Status_of_Previous_Credit.value_counts()*100 \/ len(bank)","db9b78c4":"bank=bank.replace({'Payment_Status_of_Previous_Credit' : {0:'Delayed',1 : 'Other Credits', 2 : 'Paid Up',\n                                                          3: 'No Problem with Current Credits',4:'Previous Credits Paid'}})\nbank.Payment_Status_of_Previous_Credit.value_counts()*100 \/ len(bank)","d262a10a":"bank.Value_Savings_Stocks.value_counts()*100 \/ len(bank)","d3acc17c":"bank=bank.replace({'Value_Savings_Stocks' : {1 : 'None', 2 : 'Below 100 DM',\n                                                          3: '[100, 500)',4:'[500, 1000)',5:'Above 1000'}})\nbank.Value_Savings_Stocks.value_counts()*100 \/ len(bank)","2686fb08":"bank.Length_of_current_employment.value_counts()*100 \/ len(bank)","ccfdefe7":"bank=bank.replace({'Length_of_current_employment' : {1 : 'Unemployed', 2 : '<1 Year',\n                                                          3: '[1, 4)',4:'[4, 7)',5:'Above 7'}})\nbank.Length_of_current_employment.value_counts()*100 \/ len(bank)","ad0727eb":"bank.Instalment_per_cent.value_counts()*100 \/ len(bank)","41a8a96c":"bank=bank.replace({'Instalment_per_cent' : {1 : 'Above 35%', 2 : '(25%, 35%)',\n                                                          3: '[20%, 25%)',4:'Below 20%'}})\nbank.Instalment_per_cent.value_counts()*100 \/ len(bank)","fa957964":"bank.Occupation.value_counts()*100 \/ len(bank)","f714dfa7":"bank=bank.replace({'Occupation' : {1 : 'Unemployed, unskilled', 2 : 'Unskilled Permanent Resident',\n                                                          3: 'Skilled',4:'Executive'}})\nbank.Occupation.value_counts()*100 \/ len(bank)","e807c4cc":"bank.Sex_Marital_Status.value_counts()*100 \/ len(bank)","1dfc4dd9":"bank=bank.replace({'Sex_Marital_Status' : {1 : 'Male, Divorced', 2 : 'Male, Single',\n                                                          3: 'Male, Married\/Widowed',4:'Female'}})\nbank.Sex_Marital_Status.value_counts()*100 \/ len(bank)","61a9ad08":"bank.Duration_in_Current_address.value_counts()*100 \/ len(bank)","33581002":"bank=bank.replace({'Duration_in_Current_address' : {1 : '<1 Year', 2 : '[1, 4)',\n                                                          3: '[4, 7)',4:'Above 7'}})\nbank.Duration_in_Current_address.value_counts()*100 \/ len(bank)","b7ec5c8c":"bank.Type_of_apartment.value_counts()*100 \/ len(bank)","d20322a4":"bank=bank.replace({'Type_of_apartment' : {1 : 'Free', 2 : 'Rented',\n                                                          3: 'Owned'}})\nbank.Type_of_apartment.value_counts()*100 \/ len(bank)","f4af9ce0":"bank.Most_valuable_available_asset.value_counts()*100 \/ len(bank)","314632c5":"bank=bank.replace({'Most_valuable_available_asset' : {1 : 'None', 2 : 'Car',\n                                                          3: 'Life Insurance',4:'Real Estate'}})\nbank.Most_valuable_available_asset.value_counts()*100 \/ len(bank)","5d2d56c6":"bank.No_of_Credits_at_this_Bank.value_counts()*100 \/ len(bank)","1b1e9832":"bank=bank.replace({'No_of_Credits_at_this_Bank' : {1 : '1', 2 : '2 or 3',\n                                                          3: '4 or 5',4:'Above 6'}})\nbank.No_of_Credits_at_this_Bank.value_counts()*100 \/ len(bank)","7c788ec9":"bank.Guarantors.value_counts()*100 \/ len(bank)","6028b116":"bank=bank.replace({'Guarantors' : {1 : 'None', 2 : 'Co-applicant',\n                                                          3: 'Guarantor'}})\nbank.Guarantors.value_counts()*100 \/ len(bank)","df55abde":"bank.Concurrent_Credits.value_counts()*100 \/ len(bank)","16f4dc5f":"bank=bank.replace({'Concurrent_Credits' : {1 : 'Other Banks', 2 : 'Dept. Store',\n                                                          3: 'None'}})\nbank.Concurrent_Credits.value_counts()*100 \/ len(bank)","66415dc7":"bank.No_of_dependents.value_counts()*100 \/ len(bank)","4428e0dd":"bank=bank.replace({'No_of_dependents' : {1 : '3 or More', 2 : 'Less than 3'}})\nbank.No_of_dependents.value_counts()*100 \/ len(bank)","9d67f16f":"bank.Telephone.value_counts()*100 \/ len(bank)","4e5550bc":"bank=bank.replace({'Telephone' : {1 : 'No', 2 : 'Yes'}})\nbank.Telephone.value_counts()*100 \/ len(bank)","95b6e29a":"bank.Foreign_Worker.value_counts()*100 \/ len(bank)","5672cf20":"bank=bank.replace({'Foreign_Worker' : {1 : 'No', 2 : 'Yes'}})\nbank.Foreign_Worker.value_counts()*100 \/ len(bank)","a6c44337":"bank.Purpose.value_counts()*100 \/ len(bank)","de5117f3":"bank=bank.replace({'Purpose' : {0:'Other',1 : 'New Car', 2 : 'Used Car',\n                               3:'Furniture',4:'Radio\/TV',5:'Appliances',\n                               6:'Repair',8:'Vacation',9:'Retraining',10:'Business'}})\nbank.Purpose.value_counts()*100 \/ len(bank)","ab71b670":"bank.info()","d5032387":"bank.nunique()","7844deda":"!pip install pandas-profiling","eca65b51":"from pandas_profiling import ProfileReport\nProfileReport(bank, title=\"EDA Report\")","1d861906":"data = bank.sample(frac=0.95, random_state=42)\ndata_unseen = bank.drop(data.index)\ndata.reset_index(inplace=True, drop=True)\ndata_unseen.reset_index(inplace=True, drop=True)\nprint('Data for Modeling: ' + str(data.shape))","6daa9037":"print('Unseen Data For Predictions: ' + str(data_unseen.shape))","eae45d62":"!pip install pycaret","3460bfda":"from pycaret.classification import *","cccdf5f1":"data.head()","9347e50b":"def extract_cat_num(data):\n    cat_col=[col for col in data.columns if data[col].dtype=='object']\n    num_col=[col for col in data.columns if data[col].dtype!='object']\n    return cat_col,num_col\ncat_col,num_col=extract_cat_num(data)","c3f5af6f":"for i in cat_col:\n    print(i)\n    print(data[i].value_counts()*100\/len(data))\n    print(\" \")","74ece1bd":"data[cat_col].nunique().sort_values(ascending=False)","4f3729f1":"data.Creditability.value_counts()*100\/len(data)","abd34b92":"data[num_col].nunique()","f568bd58":"num_col.remove('Creditability')\nnum_col","c6fb86d3":"bank = setup(data = data, target = 'Creditability', \n                  normalize = True, \n                  transformation = True,\n               train_size = 0.8, # training over 80% of available data\n                  handle_unknown_categorical = True, \n                  unknown_categorical_method = 'most_frequent',\n                  remove_multicollinearity = True, #rop one of the two features that are highly correlated with each other\n                  ignore_low_variance = True,#all categorical features with statistically insignificant variances are removed from the dataset.\n                  combine_rare_levels = True,# all levels in categorical features below the threshold defined in rare_level_threshold param are combined together as a single level\n                  numeric_imputation='median',\n                  categorical_imputation='mode',\n            ordinal_features = {'Account_Balance':['No Account','None','Below 200 DM','200 DM or Above'],\n                               'Value_Savings_Stocks':['None','Below 100 DM','[100, 500)','[500, 1000)','Above 1000'],\n                               'Length_of_current_employment':['Unemployed','<1 Year','[1, 4)','[4, 7)','Above 7'],\n                               'Instalment_per_cent':['Below 20%','[20%, 25%)','(25%, 35%)','Above 35%'],\n                               'Occupation':['Unemployed, unskilled','Unskilled Permanent Resident','Skilled','Executive'],\n                                'No_of_Credits_at_this_Bank':['1','2 or 3','4 or 5','Above 6'],\n                                'No_of_dependents':['Less than 3','3 or More']\n                               },\n            fix_imbalance = True,\n            numeric_features=num_col,\n             session_id=1,)","d4c981e0":"best = compare_models()","a4dc59d1":"gbc = create_model('gbc')","6a75fd08":"print(gbc)","658a02eb":"tuned_gbc = tune_model(gbc,optimize = 'Accuracy')","3f9f4813":"plot_model(tuned_gbc, plot = 'auc')","59e7ea52":"plot_model(tuned_gbc, plot = 'pr')","07334c46":"plot_model(tuned_gbc, plot='feature')","00b3b1c0":"plot_model(tuned_gbc, plot = 'confusion_matrix')","ae786aad":"evaluate_model(tuned_gbc)","f8dc263d":"predict_model(tuned_gbc)","b09537b8":"unseen_predictions = predict_model(tuned_gbc, data=data_unseen)\nunseen_predictions.head()","9060e951":"print(\"Confidence Score :   {}\".format(round(unseen_predictions.Score.mean(),2)))#Confidence Score","c5aa417d":"from pycaret.utils import check_metric\ncheck_metric(unseen_predictions['Creditability'], unseen_predictions['Label'], metric = 'Accuracy')","323a4a0b":"# Mapping of values"}}