{"cell_type":{"6d0f9946":"code","f2212fc4":"code","d1bb6838":"code","62e7f89d":"code","7c8ab775":"code","6ee2a6d6":"code","732b7c2c":"code","c54c96d5":"code","ed5e8fe1":"code","83f60e74":"code","01305d91":"code","97e9e515":"code","68e12200":"code","4badd034":"code","8fd75e2a":"code","b5acb5a4":"code","eb19e3a4":"code","8d76621d":"code","efaacd74":"code","abe78c00":"markdown","0a777467":"markdown","5707becd":"markdown","1d0ee83e":"markdown","4f23c3cb":"markdown","cda61b95":"markdown","b71ed6b5":"markdown"},"source":{"6d0f9946":"# This Python 3 environment comes with many helpful analytics libraries installed\n# It is defined by the kaggle\/python docker image: https:\/\/github.com\/kaggle\/docker-python\n# For example, here's several helpful packages to load in \n\nimport numpy as np # linear algebra\nimport pandas as pd # data processing, CSV file I\/O (e.g. pd.read_csv)\npd.set_option('display.max_columns', 30)\nimport matplotlib.pyplot as plt\n\n# Input data files are available in the \"..\/input\/\" directory.\n# For example, running this (by clicking run or pressing Shift+Enter) will list all files under the input directory\n\nimport os\nfor dirname, _, filenames in os.walk('\/kaggle\/input'):\n    for filename in filenames:\n        print(os.path.join(dirname, filename))\n\n# Any results you write to the current directory are saved as output.","f2212fc4":"candidates = pd.read_csv('\/kaggle\/input\/campaign-contributions-19902016\/candidates.csv')\ncandidates.head()","d1bb6838":"candidates.info()","62e7f89d":"candidates['election_type'] = candidates['dist_id_run_for'].apply(lambda x : 'PRES' if str(x).upper() == 'PRES' else 'SENATE' if (str(x)[-2:] == 'S1' or str(x)[-2:] == 'S2') else 'DISTRICT')\ncandidates['election_type'].value_counts()","7c8ab775":"candidates['state'] = candidates[candidates['election_type'] != 'PRES']['dist_id_run_for'].apply(lambda x: str(x)[:2])\ncandidates['state'].value_counts()","6ee2a6d6":"by_cycle = candidates.groupby('cycle').agg({'raised_from_pacs': 'sum', 'raised_from_individuals': 'sum'}).sort_values('cycle')\nby_cycle.plot(figsize=(20, 10))","732b7c2c":"by_election_type = candidates.groupby(['cycle', 'election_type']).agg({'raised_from_pacs': 'sum', 'raised_from_individuals': 'sum'}).sort_values('cycle').reset_index()\nby_election_type.head()","c54c96d5":"by_election_type_pivoted = by_election_type.pivot(index='cycle', columns='election_type')\nby_election_type_pivoted.head()","ed5e8fe1":"by_election_type_pivoted.loc[:, ['cycle', 'raised_from_pacs']].plot(figsize=(20, 10))","83f60e74":"by_election_type_pivoted.loc[:, ['cycle', 'raised_from_individuals']].plot(figsize=(20, 10))","01305d91":"candidates['party'].value_counts()","97e9e515":"by_party = candidates.groupby(['cycle', 'party']).agg({'raised_from_pacs': np.mean, 'raised_from_individuals': np.mean}).sort_values('cycle').reset_index()\nby_party.head()","68e12200":"by_party_pivoted = by_party.pivot(index='cycle', columns='party')\nby_party_pivoted.head()","4badd034":"by_party_pivoted.loc[:, ['cycle', 'raised_from_pacs']].plot(figsize=(20, 10))","8fd75e2a":"by_party_pivoted.loc[:, ['cycle', 'raised_from_individuals']].plot(figsize=(20, 10))","b5acb5a4":"cycle_year_df = candidates.groupby(['cycle', 'state']).agg({'raised_from_pacs': np.sum, 'raised_from_individuals': np.sum, 'raised_total': np.sum}).reset_index()\n\ncycle_year_df['text'] = \"Total PAC contribution:\" + cycle_year_df['raised_from_pacs'].astype('str') + \"<br>\" +\\\n    \"Total Individual Contributions: \" + cycle_year_df['raised_from_individuals'].astype('str')\ncycle_year_df.head()","eb19e3a4":"import plotly.express as px\nfig = px.choropleth(cycle_year_df, locations=\"state\", color=\"raised_total\", hover_name=\"state\", \n                    hover_data=['raised_from_pacs', 'raised_from_individuals'], animation_frame=\"cycle\", \n                    locationmode='USA-states', scope='usa', title='Total Contributions raised by state over the years')\nfig.show()","8d76621d":"import plotly.express as px\nfig = px.choropleth(cycle_year_df, locations=\"state\", color=\"raised_from_individuals\", hover_name=\"state\", \n                    hover_data=['raised_from_pacs', 'raised_total'], animation_frame=\"cycle\", \n                    locationmode='USA-states', scope='usa', title='Individual contributions raised by state over the years')\nfig.show()","efaacd74":"import plotly.express as px\nfig = px.choropleth(cycle_year_df, locations=\"state\", color=\"raised_from_pacs\", hover_name=\"state\", \n                    hover_data=['raised_from_individuals', 'raised_total'], animation_frame=\"cycle\", \n                    locationmode='USA-states', scope='usa', title='PAC contributions raised by state over the years')\nfig.show()","abe78c00":"**Let's take a look at the raised amounts over the years**","0a777467":"Some preprocessing","5707becd":"So, individual & PAC contributions have increased in the early 2000s, but decreased more recently. The change is more striking in individual contributions. Also, individual contributions have always been greater than PAC contrbutions.\n\n**Let's see if this holds true for different type of elections**","1d0ee83e":"So, the 2 major parties get the most contributions, although independent candidates also see spikes sometimes.\n\nWe see the contributions especially from PACs increase over time, although it seems to have decreased in the more recent years.","4f23c3cb":"In both the graphs, the Presidential elections have the most variability in terms of contributions.\nAlso, PACS raise more in District-level elections than State Senate elections than Presidential elections, whereas on average individual contributions apears similar in all 3 elections.\n\n**Let's see the same by party rather than election type**","cda61b95":"Due to the disparity in counts between the parties, we'll have to normalize the contributions by the number of candidates","b71ed6b5":"**Let's see how the contributions vary every year by state using a map**"}}