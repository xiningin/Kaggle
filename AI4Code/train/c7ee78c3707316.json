{"cell_type":{"91285b07":"code","cbe4a7e7":"code","e915e761":"code","c8cf3432":"code","355fd6c5":"code","f743779c":"code","130c44ab":"code","5ebc1cd9":"code","ac98f5db":"code","a0b3841e":"code","4997abdb":"code","d638f9f4":"code","a8c224ab":"code","c30916b9":"code","ad2fa01e":"code","5fdd4948":"code","1750f6dc":"code","00d3a2f7":"code","d046328a":"code","e261d270":"code","ca15d7eb":"code","1219dce2":"code","f8433d56":"code","a6d60dab":"code","cc82e859":"code","e923f01e":"code","ffc6cd88":"code","71c94eb5":"code","e1a1670c":"code","e4e0b1d5":"code","eb7bb4fe":"markdown","18e6706c":"markdown"},"source":{"91285b07":"import numpy as np \nimport pandas as pd \n\nimport os\nfor dirname, _, filenames in os.walk('\/kaggle\/input'):\n    for filename in filenames:\n        print(os.path.join(dirname, filename))\n\nimport matplotlib.pyplot as plt\nimport seaborn as sns\nfrom collections import Counter        ","cbe4a7e7":"df = pd.read_csv(\"..\/input\/car-data\/cardata.csv\")","e915e761":"df.info()","c8cf3432":"df.columns=[i.lower() for i in df.columns]\ndf.head(2)","355fd6c5":"def countplot(baslik): \n    sns.countplot(x=baslik, data=df)\n    plt.xticks(rotation=50)\n    plt.show()\n    \n    print(df[baslik].value_counts())","f743779c":"countplot(\"yakit\")","130c44ab":"countplot(\"sanziman\")","5ebc1cd9":"countplot(\"boya\")","ac98f5db":"countplot(\"degisen\")","a0b3841e":"g = sns.FacetGrid(df, height= 5)\ng.map(sns.distplot, \"km\", bins=50)\nplt.show()\n\nprint(\"Average car km:\",df.km.mean())","4997abdb":"g = sns.FacetGrid(df, height= 5)\ng.map(sns.distplot, \"yil\", bins=15)\ng.add_legend()\nplt.show()\n\nprint(\"Average car year:\",df.yil.mean())","d638f9f4":"g = sns.catplot(x = \"yakit\", y = \"fiyat\", data = df, kind=\"bar\",height= 6 )\ng.set_ylabels(\"Fiyat\")\nplt.show()","a8c224ab":"g = sns.catplot(x = \"sanziman\", y = \"fiyat\", data = df, kind=\"bar\",height= 6 )\ng.set_ylabels(\"Fiyat\")\nplt.show()","c30916b9":"g = sns.catplot(x = \"boya\", y = \"fiyat\", data = df, kind=\"bar\",height= 6 )\ng.set_ylabels(\"Fiyat\")\nplt.show()","ad2fa01e":"g = sns.catplot(x = \"degisen\", y = \"fiyat\", data = df, kind=\"bar\",height= 6 )\ng.set_ylabels(\"Fiyat\")\nplt.show()","5fdd4948":"df.isnull().sum()","1750f6dc":"beygirsiz = list(df[\"beygir\"][df[\"beygir\"].isnull()].index) ","00d3a2f7":"for i in beygirsiz:\n    tahmin_beygir1= df[\"beygir\"][((df[\"marka\"] == df.iloc[i][\"marka\"]) & (df[\"model\"] == df.iloc[i][\"model\"]) & (df[\"sanziman\"] == df.iloc[i][\"sanziman\"]) & (df[\"yakit\"] == df.iloc[i][\"yakit\"]))].median()\n    tahmin_beygir2= df[\"beygir\"][((df[\"marka\"] == df.iloc[i][\"marka\"]) & (df[\"model\"] == df.iloc[i][\"model\"]) & (df[\"sanziman\"] == df.iloc[i][\"sanziman\"]))].median()\n    tahmin_beygir3= df[\"beygir\"][((df[\"marka\"] == df.iloc[i][\"marka\"]) & (df[\"model\"] == df.iloc[i][\"model\"]))].median()\n    tahmin_beygir4= df[\"beygir\"][((df[\"marka\"] == df.iloc[i][\"marka\"]))].median()\n    tahmin_beygir5= df[\"beygir\"].mean()\n    \n    if  np.isnan(tahmin_beygir1) == False:\n        df[\"beygir\"].iloc[i] = tahmin_beygir1\n    if  np.isnan(tahmin_beygir1) == True & np.isnan(tahmin_beygir2) == False:\n        df[\"beygir\"].iloc[i] = tahmin_beygir2\n    if  np.isnan(tahmin_beygir1) == True & np.isnan(tahmin_beygir2) == True & np.isnan(tahmin_beygir3) == False:\n        df[\"beygir\"].iloc[i] = tahmin_beygir3\n    if  np.isnan(tahmin_beygir1) == True & np.isnan(tahmin_beygir2) == True & np.isnan(tahmin_beygir3) == True & np.isnan(tahmin_beygir4) == False:\n        df[\"beygir\"].iloc[i] = tahmin_beygir4\n    else:\n        df[\"beygir\"].iloc[i] = tahmin_beygir5","d046328a":"plt.subplots(figsize=(10, 10))\nsns.heatmap(df.corr(), annot=True,cmap=\"YlGnBu\")\nplt.show()","e261d270":"df[\"yas\"] = [2017-i+1 for i in df.yil]\ndel df[\"yil\"]","ca15d7eb":"g = sns.FacetGrid(df, height= 5)\ng.map(sns.distplot, \"yas\", bins=15)\ng.add_legend()\nplt.show()\n\nprint(\"Average car age:\",df.yas.mean())","1219dce2":"df[\"yakit\"] = [2 if i == \"DIESEL\" else 1 for i in df.yakit]\ndf.yakit=df[\"yakit\"].astype(\"category\")","f8433d56":"df[\"sanziman\"] = [2 if i == \"AUTOMATIC\" else 1 for i in df.sanziman]\ndf.sanziman=df[\"sanziman\"].astype(\"category\")","a6d60dab":"from sklearn.preprocessing import LabelEncoder\n\nlb_make = LabelEncoder()\ndf[\"brand_code\"] = lb_make.fit_transform(df[\"marka\"])\n\nlb_make = LabelEncoder()\ndf[\"model_code\"] = lb_make.fit_transform(df[\"model\"])\n\ndf.brand_code=df[\"brand_code\"].astype(\"category\")\ndf.model_code=df[\"model_code\"].astype(\"category\")\n\nbrands= df[[\"marka\", \"brand_code\"]]\nmodels= df[[\"model\", \"model_code\"]]\n\ndel df[\"marka\"]\ndel df[\"model\"]","cc82e859":"df.head()","e923f01e":"x = df.drop(labels=\"fiyat\", axis=1)\ny = df.fiyat","ffc6cd88":"from sklearn.model_selection import train_test_split\n\nX_train, X_test, y_train, y_test = train_test_split(x,y,test_size = 0.3, random_state = 42)\n\nprint(\"X_train:\", len(X_train))\nprint(\"X_test:\", len(X_test))\nprint(\"y_train:\", len(y_train))\nprint(\"y_test:\", len(y_test))","71c94eb5":"from sklearn.ensemble import RandomForestRegressor\n\nrf = RandomForestRegressor(n_estimators=70)\nrf.fit(X_train,y_train)\nrf_score= rf.score(X_test,y_test)\n\nrf_score","e1a1670c":"from sklearn.ensemble import RandomForestRegressor\nfrom sklearn.model_selection import GridSearchCV\nfrom sklearn.metrics import accuracy_score\n\ninterval=np.arange(100, 120)\ngrid = {\"n_estimators\":interval}\n\nrf = RandomForestRegressor()\nrf_cv = GridSearchCV(rf, grid, cv = 10, n_jobs = -1,verbose = 1)\nrf_cv.fit(X_train,y_train)\n\nrf_cv.best_score_, rf_cv.best_params_","e4e0b1d5":"from sklearn.ensemble import RandomForestRegressor\n\nrf = RandomForestRegressor(n_estimators=119)\nrf.fit(X_train,y_train)\nrf_score= rf.score(X_test,y_test)\n\nrf_score","eb7bb4fe":"yil = Made year of the car\nmarka = Brand\nmodel = Model\nyakit = Fuel Type\nsanziman = Gearbox\nkm = Km.\nboya = Number of painted body parts\ndegisen = Number of changed body parts\nkaput_tavan = Number of changed or painted crucial body parts (which alters the price a lot)\nfiyat = Price of the car in Turkish Liras (The main feature we would like to estimate)\nbeygir = Power of the car in kW (not in hp)\ntramer = Record of total accident value of the car in Turkish Liras\nhafta = Cumulative week of which the car was sold","18e6706c":"As we can see there are some null values on \"Beygir\" which is kW of engine, we will take care of it after"}}