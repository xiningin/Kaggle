{"cell_type":{"f6d41d52":"code","6fd9d4ed":"code","8ede5334":"code","28e1d962":"code","6d880577":"code","200608d0":"code","cb5cfe21":"code","a8421c17":"code","7790adc7":"code","891800f2":"code","2505fef1":"code","0c095bc2":"code","96a3d967":"code","79b12029":"code","5bfe4962":"code","f8837cb6":"code","22a28572":"code","954dfd44":"code","8f972f91":"code","dec5e64f":"code","46be62db":"code","e2bb6276":"code","68de2753":"code","2314c07f":"code","3857c056":"code","42654501":"code","67bfadd4":"code","9829df65":"code","a08d1677":"code","34ddb222":"code","41e4e452":"code","9a6013b7":"code","a83883fd":"code","d416ef46":"code","6119e2e0":"code","42f8c697":"code","2a121b58":"code","79ffcac4":"code","288219ef":"code","7e24a758":"code","20f346e9":"code","a5f7b6e2":"code","afae5e15":"code","1bf96cd2":"code","89f5dbdc":"code","18314bd0":"code","a1244ac2":"code","983cfb07":"code","a475423c":"code","f5d79310":"code","0c227bd5":"code","3cd2a9bf":"code","23d77725":"code","6efbb0e0":"code","6d7e7081":"code","06c40692":"code","0dc260e4":"code","c041625e":"code","092db275":"markdown","bd2e7159":"markdown","a05b6856":"markdown","1412c18d":"markdown","557e78cd":"markdown","29f87587":"markdown","f197542c":"markdown","7fd334dc":"markdown","07df0653":"markdown","02ba9d97":"markdown","206049a4":"markdown","04c66dcb":"markdown","5ff1680e":"markdown","901cb435":"markdown","e292635d":"markdown","662def43":"markdown","9eb691f8":"markdown","06d35dcf":"markdown","cd5632ad":"markdown","204a570a":"markdown","84ccc918":"markdown","b1f438ea":"markdown","f6023dba":"markdown","576364ec":"markdown","286f4ee6":"markdown","f7f94cc6":"markdown","24da5ffc":"markdown","17576f06":"markdown","cb66a6b8":"markdown","8fb8d08b":"markdown","8f9a9216":"markdown","3100ba4c":"markdown","2393eb1b":"markdown","b43a13b7":"markdown","f8dedfd2":"markdown","7913295e":"markdown","bb94fcae":"markdown","5b8bd3ae":"markdown","a3fe59f5":"markdown","89ab15d4":"markdown","2c2bc615":"markdown","1496c5c7":"markdown","9c8d6cf0":"markdown","2ad7079a":"markdown","007de965":"markdown","be2d0418":"markdown","7018b17e":"markdown","a9aee58d":"markdown","af29fc4e":"markdown","9fa7e28e":"markdown","5f2ed832":"markdown","ef180e4c":"markdown","ac434bc5":"markdown","ded5da7d":"markdown","a6fe5d4e":"markdown","9ae3db2e":"markdown","f698bf13":"markdown","2836b95c":"markdown","2a5f9e54":"markdown","ce47a333":"markdown","52d3ec29":"markdown","a36ac767":"markdown","d3ff9d4a":"markdown","45cf3e8c":"markdown","cc5ce91c":"markdown","8c8c0b17":"markdown","8c67c164":"markdown","000759ec":"markdown","1928c9f2":"markdown","d8118602":"markdown","69f741cc":"markdown","e6ee576e":"markdown","d7b770c6":"markdown","c972ec15":"markdown","4480f5d2":"markdown","547e034f":"markdown","5b6c4fe3":"markdown"},"source":{"f6d41d52":"# Code created by: Fernando Lopez-Velasco\n\nimport pandas as pd\nimport datetime as dt\nimport seaborn as sns\nimport numpy as np\n\nimport matplotlib.pyplot as plt\n\n% matplotlib inline","6fd9d4ed":"\"\"\" Uncomment this sentences to download the file \"\"\"\n#import os\n#os.system('wget https:\/\/s3.amazonaws.com\/nyc-tlc\/trip+data\/green_tripdata_2015-09.csv')","8ede5334":"data = pd.read_csv('..\/input\/green-taxis\/green_tripdata_2015-09.csv', parse_dates=True)\nprint(data.shape)","28e1d962":"data.head()","6d880577":"data = data.drop(['VendorID','Store_and_fwd_flag',\n                  'RateCodeID','Extra','MTA_tax',\n                  'improvement_surcharge','Tip_amount',\n                 'Tolls_amount','Trip_type ','Ehail_fee'], axis='columns')","200608d0":"data.head()","cb5cfe21":"data.describe()","a8421c17":"k = 0\nfor i in data.Fare_amount:\n    if i < 0:\n        k += 1\nprint(\"Number of fake fares: \", k)","7790adc7":"data = data[data.Fare_amount>=0]\ndata = data[data.Total_amount>=0]","891800f2":"data.isnull().sum()","2505fef1":"data['lon_change'] = abs(data.Dropoff_longitude - data.Pickup_longitude)\ndata['lat_change'] = abs(data.Dropoff_latitude - data.Pickup_latitude)","0c095bc2":"data.info()","96a3d967":"data = data.drop(['Lpep_dropoff_datetime'], axis=1)","79b12029":"data['lpep_pickup_datetime'] = pd.to_datetime(data['lpep_pickup_datetime'])","5bfe4962":"data = data.set_index(['lpep_pickup_datetime'])","f8837cb6":"plt.style.use('fivethirtyeight')\ndata[data.Total_amount<70].Total_amount.hist(bins=70, figsize=(10,3))\nplt.xlabel('Total fare $USD')\nplt.title(\"Histogram of total fare's distribution\");","22a28572":"data[data.Trip_distance<10].Trip_distance.hist(bins=100, figsize=(10,3))\nplt.xlabel('Total Distance')\nplt.title(\"Histogram of total trip distribution\");","954dfd44":"data.shape","8f972f91":"print(data.Trip_distance.mean())\nprint(data.Trip_distance.std())","dec5e64f":"plot_sns = sns.countplot(data.Passenger_count, label='Passengers')","46be62db":"data.Passenger_count.mean()","e2bb6276":"plot_sns = sns.countplot(data.Payment_type, label='Number of payments')\ntype1,type2,type3,type4,type5 = data.Payment_type.value_counts()\nprint(\"Payment with type 1: \", type1)\nprint(\"Payment with type 2: \", type2)\nprint(\"Payment with type 3: \", type3)\nprint(\"Payment with type 4: \", type4)\nprint(\"Payment with type 5: \", type5)","68de2753":"# Create a new dataframe to be used in time series plotting\ndata_plot = data[['Trip_distance','Passenger_count', 'Total_amount']]\n\n# Get different indexes: day, hour, minute.\nindex_day = data_plot.index.day\nindex_hour = data_plot.index.hour\nindex_minute = data_plot.index.minute\n\n# Get the column's name from data_plot\ndistance, NumPassenger, Total = data_plot.columns","2314c07f":"# Defining a function to plot time series\ndef plotting(item, index):\n    \n    plt.style.use('fivethirtyeight')\n    if item=='Trip_distance':\n        ylabel = 'Distance'\n    elif item=='Passenger_count':\n        ylabel = 'Passengers'\n    elif item=='Total_amount':\n        ylabel = 'Fare $USD'\n        \n    to_plot = data_plot[item].groupby(index).mean()\n    hline = to_plot.max()\n    vline = to_plot.idxmax()\n    ax = to_plot.plot(linewidth=0.8,figsize=(15,3))\n    ax.axvline(vline, color='red', linewidth=0.9,linestyle='--')\n    ax.axhline(hline, color='green', linewidth=0.9, linestyle='--')\n    ax.set_xlabel('Time', fontsize=15)\n    ax.set_ylabel(ylabel, fontsize=15)\n    print(\"Max in time: \", vline)\n    print(\"Max in distance: \",hline)\n    plt.show()","3857c056":"# Grouping the distance by hour\ntrip = data_plot[distance].groupby(index_hour).mean()","42654501":"print(\"Mean: \", trip.mean())\nprint(\"Median: \",trip.median())","67bfadd4":"ax = trip.plot(figsize=(6,4), linewidth=0.9)\nax.set_xlabel('Hour')\nax.axhline(trip.median(), color='red', linewidth=0.6, linestyle='--')\nax.axhline(trip.mean(), color='purple', linewidth=0.6, linestyle='--')\nax.axhspan(trip.mean(),trip.median(), color='blue', alpha=0.1)\nax.set_ylabel('Avergae')","9829df65":"plotting(distance, index_day)","a08d1677":"plotting(distance, index_hour)","34ddb222":"plotting(distance, index_minute)","41e4e452":"plotting(NumPassenger, index_day)","9a6013b7":"plotting(NumPassenger, index_hour)","a83883fd":"plotting(NumPassenger, index_minute)","d416ef46":"plotting(Total, index_day)","6119e2e0":"plotting(Total, index_hour)","42f8c697":"plotting(Total, index_minute)","2a121b58":"corr_ = data_plot.corr(method='pearson')\nsns.heatmap(corr_,annot=True,linewidths=0.4,annot_kws={\"size\": 10})\nplt.xticks(rotation=90)\nplt.yticks(rotation=0) \nplt.show()","79ffcac4":"corr_ = data_plot.corr(method='pearson')\nfig = sns.clustermap(corr_, row_cluster=True,col_cluster=True,figsize=(5, 5))\nplt.setp(fig.ax_heatmap.xaxis.get_majorticklabels(), rotation=90)\nplt.setp(fig.ax_heatmap.yaxis.get_majorticklabels(), rotation=0)\nplt.show()","288219ef":"# Ideas and pieces of code for this functiones were taken from: Albert van Breemen\n\njfk = (-73.7822222222, 40.6441666667) #JFK Airport\nnyc = (-74.0063889, 40.7141667) # NYC Airport\newr = (-74.175, 40.69) # Newark Liberty International Airport\nlgr = (-73.87, 40.77) # LaGuardia Airport\n\n# Function to calculate distances given coordenates\ndef distance(lat1, lon1, lat2, lon2):\n    p = 0.017453292519943295\n    a = 0.5 - np.cos((lat2 - lat1) * p)\/2 + np.cos(lat1 * p) * np.cos(lat2 * p) * (1 - np.cos((lon2 - lon1) * p)) \/ 2\n    return 0.6213712 * 12742 * np.arcsin(np.sqrt(a))\n\n# Function to plot relations between distances and total fare amount\ndef plot_location_fare(loc, name, range=1):\n    fig, axs = plt.subplots(1, 2, figsize=(12, 5))\n    idx = (distance(data.Pickup_latitude, data.Pickup_longitude, loc[1], loc[0]) < range)\n    data[idx].Fare_amount.hist(bins=100, ax=axs[0])\n    axs[0].set_xlabel('Total Fare', fontsize=8)\n    axs[0].set_title('Pickup location \\n{}'.format(name), fontsize=8)\n\n    idx = (distance(data.Dropoff_latitude, data.Dropoff_longitude, loc[1], loc[0]) < range)\n    data[idx].Fare_amount.hist(bins=100, ax=axs[1])\n    axs[1].set_xlabel('Total Fare', fontsize=8)\n    axs[1].set_title('Dropoff location \\n{}'.format(name), fontsize=8);","7e24a758":"plot_location_fare(jfk, 'JFK Airport')","20f346e9":"plot_location_fare(ewr, 'Newark Airport')","a5f7b6e2":"plot_location_fare(lgr, 'LaGuardia Airport')","afae5e15":"# Set tip as 13% from total amount\ntip = 0.13","1bf96cd2":"data['tip'] = data['Total_amount'] + data['Total_amount'] * tip\ndata.head()","89f5dbdc":"# Define my frame for this excercise\ndata_model = data[['Trip_distance','Fare_amount','Total_amount','tip']]","18314bd0":"# Split target and corpus data\nY = data_model.tip\nX = data_model.drop(['tip'], axis=1)","a1244ac2":"X.head()","983cfb07":"# Load libraries and stuff\n\nimport xgboost as xgb # xgboost regressor\nfrom sklearn import preprocessing # to use min_max_scaler\nfrom sklearn.model_selection import train_test_split # split data\nfrom sklearn.metrics import mean_absolute_error, mean_squared_error # metrics","a475423c":"# Initialize the object and fit\nmin_max_scaler = preprocessing.MinMaxScaler()\nX = pd.DataFrame(min_max_scaler.fit_transform(X), columns = X.columns)","f5d79310":"Xtrain, Xtest, Ytrain, Ytest = train_test_split(X, Y, test_size=0.33, random_state=42)","0c227bd5":"# to plot performance\ndef plot_performance(plot_name, loss_mae, loss_mse):\n    steps = np.arange(10, 100, 20)\n    plt.title(plot_name)\n    plt.plot(steps, loss_mae, linewidth=0.9, label=\"MAE\")\n    plt.plot(steps, loss_mse, linewidth=0.9, label=\"MSE\")\n    plt.legend()\n    plt.ylabel(\"Loss\")\n    plt.xlabel(\"Number of estimators\")\n    plt.show()\n\n# to calculate metrics\ndef def_metrics(Ypred):\n    mae = mean_absolute_error(Ytest, Ypred)\n    mse = mean_squared_error(Ytest, Ypred)\n\n    return mae, mse\n\n# to generate the model\ndef def_xgboost(estimators):\n    xgb_ = xgb.XGBRegressor(objective ='reg:linear', learning_rate=0.1, max_depth=3, n_estimators=estimators)\n    xgb_.fit(Xtrain,Ytrain)\n    Ypred = xgb_.predict(Xtest)\n    \n    return def_metrics(Ypred)","3cd2a9bf":"loss_mae, loss_mse = [], []\nplot_name=\"Tip Prediction\"\nfor est in range(10,100,20):\n    print(\"Number of estimators: %d\" % est)\n    mae, mse = def_xgboost(estimators = est)\n    print(\"MAE: \", mae)\n    print(\"MSE: \", mse)\n    loss_mae.append(mae)\n    loss_mse.append(mse)\nplot_performance(plot_name, loss_mae, loss_mse)","23d77725":"# Ideas and pieces of code for this functiones were taken from: Albert van Breemen\n\n# Defining the box to plot\ndef select_within_boundingbox(data, BB):\n    return (data.Pickup_longitude >= BB[0]) & (data.Pickup_longitude <= BB[1]) & \\\n           (data.Pickup_latitude >= BB[2]) & (data.Pickup_latitude <= BB[3]) & \\\n           (data.Dropoff_longitude >= BB[0]) & (data.Dropoff_longitude <= BB[1]) & \\\n           (data.Dropoff_latitude >= BB[2]) & (data.Dropoff_latitude <= BB[3])\n            \n# Loading the image of NYC\nBB = (-74.5, -72.8, 40.5, 41.8)\nnyc_map = plt.imread('https:\/\/aiblog.nl\/download\/nyc_-74.5_-72.8_40.5_41.8.png')\n\n# Loading an image with zoom in NYC\nBB_zoom = (-74.3, -73.7, 40.5, 40.9)\nnyc_map_zoom = plt.imread('https:\/\/aiblog.nl\/download\/nyc_-74.3_-73.7_40.5_40.9.png')","6efbb0e0":"# Defining frame for visualization\ndata_box = data[select_within_boundingbox(data, BB)]","6d7e7081":"# Ideas and pieces of code for this functiones were taken from: Albert van Breemen\n# Function to plot dots on map\ndef plot_on_map(data_box, BB, nyc_map, s=10, alpha=0.2):\n    plt.style.use('ggplot')\n    fig, axs = plt.subplots(1, 2, figsize=(16,10))\n    axs[0].scatter(data_box.Pickup_longitude, data_box.Pickup_latitude, zorder=1, alpha=alpha, c='r', s=s)\n    axs[0].set_xlim((BB[0], BB[1]))\n    axs[0].set_ylim((BB[2], BB[3]))\n    axs[0].set_title('Pickup locations')\n    axs[0].imshow(nyc_map, zorder=0, extent=BB)\n\n    axs[1].scatter(data_box.Dropoff_longitude, data_box.Dropoff_latitude, zorder=1, alpha=alpha, c='r', s=s)\n    axs[1].set_xlim((BB[0], BB[1]))\n    axs[1].set_ylim((BB[2], BB[3]))\n    axs[1].set_title('Dropoff locations')\n    axs[1].imshow(nyc_map, zorder=0, extent=BB)","06c40692":"# Plotting the map with dots\nplot_on_map(data_box, BB, nyc_map, s=1, alpha=0.5)","0dc260e4":"# Ideas and pieces of code for this functiones were taken from: Albert van Breemen\n# Setting the number of bins and fitting in pickup and dropoff\nn_lon, n_lat = 200, 200\ndensity_pickup, density_dropoff = np.zeros((n_lat, n_lon)), np.zeros((n_lat, n_lon))\n\n# Calculating the number of datapoint in the grid\nbins_lon = np.zeros(n_lon+1) # bin\nbins_lat = np.zeros(n_lat+1) # bin\n\ndelta_lon = (BB[1]-BB[0]) \/ n_lon # bin longutide width\ndelta_lat = (BB[3]-BB[2]) \/ n_lat # bin latitude height\n\nbin_width_miles = distance(BB[2], BB[1], BB[2], BB[0]) \/ n_lon # bin width in miles\nbin_height_miles = distance(BB[3], BB[0], BB[2], BB[0]) \/ n_lat # bin height in miles\n\nfor i in range(n_lon+1):\n    bins_lon[i] = BB[0] + i * delta_lon\nfor j in range(n_lat+1):\n    bins_lat[j] = BB[2] + j * delta_lat\n    \n# Digitalization by pickup, dropoff given bins on longitude and latitude\ninds_pickup_lon = np.digitize(data_box.Pickup_longitude, bins_lon)\ninds_pickup_lat = np.digitize(data_box.Pickup_latitude, bins_lat)\ninds_dropoff_lon = np.digitize(data_box.Dropoff_longitude, bins_lon)\ninds_dropoff_lat = np.digitize(data_box.Dropoff_latitude, bins_lat)\n\n# Assign a point by grid bin\ndxdy = bin_width_miles * bin_height_miles\nfor i in range(n_lon):\n    for j in range(n_lat):\n        density_pickup[j, i] = np.sum((inds_pickup_lon==i+1) & (inds_pickup_lat==(n_lat-j))) \/ dxdy\n        density_dropoff[j, i] = np.sum((inds_dropoff_lon==i+1) & (inds_dropoff_lat==(n_lat-j))) \/ dxdy","c041625e":"# Ideas and pieces of code for this functiones were taken from: Albert van Breemen\n# Plot the density arrays\nfig, axs = plt.subplots(2, 1, figsize=(18, 24))\naxs[0].imshow(nyc_map, zorder=0, extent=BB);\nim = axs[0].imshow(np.log1p(density_pickup), zorder=1, extent=BB, alpha=0.6, cmap='plasma')\naxs[0].set_title('Pickup density [datapoints per sq mile]')\ncbar = fig.colorbar(im, ax=axs[0])\ncbar.set_label('log(1 + #datapoints per sq mile)', rotation=270)\n\naxs[1].imshow(nyc_map, zorder=0, extent=BB);\nim = axs[1].imshow(np.log1p(density_dropoff), zorder=1, extent=BB, alpha=0.6, cmap='plasma')\naxs[1].set_title('Dropoff density [datapoints per sq mile]')\ncbar = fig.colorbar(im, ax=axs[1])\ncbar.set_label('log(1 + #datapoints per sq mile)', rotation=270)","092db275":"### <span style=\"color:#8b0000\"> Making something interesting: Create a variable <i>Tip<\/i> and building a model to predict it <\/span>","bd2e7159":"In this plot we can visualize the behavior of distance in realtion with every our. We can observe that the most used is by 5am.","a05b6856":"Now let's proceed to evaluate if there are some <b><i>null<\/i><\/b> values.","1412c18d":"Now let's define a function to plot the behavior of taxis in NY.","557e78cd":"# 1. Loading Data.","29f87587":"Taking a look at columns: <b><i>Fare_amount<\/i><\/b> and <b><i>Total_amount<\/i><\/b>, we can see that the minimun value is -475 aprox, this is so weird because there can not be negative fares, so I'll proceed to drop it.","f197542c":"## 2.3 Adding New Featues.","7fd334dc":"The idea of this part is to show you the behavior of some features versus time. So I will analyze the most important features and show how is the relation related to time.","07df0653":"We can see some interesting things:\n\n* People used to use taxi with more than one people in a range of 12:00am and 4:00am, for security maybe.","02ba9d97":"<b>JFK Airport<\/b>","206049a4":"* The distribution of trip distances can be respresented as a <b>normal distribution<\/b>.\n* Most of the passenger just used to <b>travel around 1 mile<\/b>.\n* As the distance increase, the distance traveled by the passengers <b>decrease<\/b>.\n* There is an <b>anomaly<\/b> in the zero value.","04c66dcb":"### 3.2.7 Behavior of <i>Total Amount \/ Day<\/i>.","5ff1680e":"<b>Newark Airport<\/b>","901cb435":"We can see some interesting things:\n\n* People used to travel longer distances when they take a taxi at 5am.\n* People don't used to travel long distances when it's midday.","e292635d":"<b>Splitting data for training and test <\/b>","662def43":"# 3. Visualization\n\nThe porpuse of this part is to visualize some interesting things found inside data. So First I will change the data type for <b>lpep_pickup_datetime<\/b> and <b>Lpep_dropoff_datetime<\/b> which ones have a <b>object<\/b> data type and I would like to have them as a <b>datatime<\/b> type.","9eb691f8":"<b>Scaling data<b>","06d35dcf":"I use just <i>Trip_distance, Fare_amount, Total_amount<\/i> because I assume this are the most important features to predict <i>tip<\/i>.","cd5632ad":"* Make a deeper analysis focusing on anomalies, this is because there are some values which are so much weird in contrast with other values for example that so much people payed $0usd.\n* Gather more data about the behavior of customers to know how their experience was and how this is related with maybe, the tip amount they give to the taxi driver.\n* Apply new techniques as Recurrent Neural Networks or LSTM which are very useful in tasks like this.\n* Apply new techniques of machine learning as Reinforcement Learning to predict tips or to predict how the behavior is of people arriving to distincts ariports.","204a570a":"We can see some interesting things:\n\n* People used to pay more when take a taxi at 5am.","84ccc918":"### <span style=\"color:#8b0000\"> Reporting mean and median trip distance grouped by hour of day <\/span>","b1f438ea":"We can see some interesting things:\n\n* As expected, the distance and total amount are strongly correlated.\n* The number of passengers have no relation with the total fare amount.","f6023dba":"What do we can observe here?\n* The best number of estimators is from 50\n* We could predict the tip based on total amount.\n* The model is not overfitted.","576364ec":"## 3.1 Histograms\n\n### 3.1.1 Fares","286f4ee6":"Now let's plot a <b>heat map<\/b> to visualize in another way the taxis behavior.","f7f94cc6":"People used to pay a little bit less when is fortnight.","24da5ffc":"The behavior at minute level is a little bit regular.","17576f06":"In this part I will show you some visualizations about New York and how the behavior of taxis is. I will make conclusions further.","cb66a6b8":"### 3.2.5 Behavior of <i>Number of Passengers \/ Hour<\/i>.","8fb8d08b":"In this case I will use <b>XGBoost<\/b> for the evidence of great results on tasks related.","8f9a9216":"There are 6 types of payments, so we can see:\n* Type 1 and type 2 are the most used, which are <b>credit card<\/b> and <b>cash<\/b> respectively.","3100ba4c":"### 3.2 Time Series","2393eb1b":"We can observe some interesting things:\n\n* There is an anomaly because the histogram from left shows us that so many people did not pay.\n* People used to pay more when are picked up from Newark Airport.\n* People used to pay $80usd aprox when they are dropped of to Newark Airport.","b43a13b7":"### <span style=\"color:#8b0000\">Showing the distributios by Airport in NY <\/span>","f8dedfd2":"In this part I will show you how the behavior is of features:\n\n* Distance\n* Number of passenger\n* Total amount\n\nin relation with: <b>day, hour, minute<\/b>.","7913295e":"## 2.2 Removing <i>null<\/i> values.","bb94fcae":"In this part, I will remove some columns that I won't need for this porpuse, which are:\n\n* VendorID\n* Store_and_fwd_flag\n* RateCodeID\n* Extra\n* MTA_tax\n* improvement_surcharge\n* Tip_amount\n* Tolls_amount\n* Trip_type\n* Ehail_fee","5b8bd3ae":"The dataset that we have right now is composed with the next features:\n\n* Pickup datetime\n* Dropoff datetime\n* Pickup longitude\n* Pickup latitude\n* Dropoff longitude\n* Dropoff latitude\n* Passenger count\n* Trip distance\n* Fare amount\n* Total amount\n* Payment type\n\nOne important thing we can observe is that we have coordinates about pickup and dropoff. So let's add some new features which could help us for this excercise. These features are:\n\n* Change in longitude\n* Change in latitude","a3fe59f5":"Defining some functions to:\n* <b> Define model <\/b>\n* <b> Calculate metrics <\/b>\n* <b> Plot performance <\/b>","89ab15d4":"In this part I will show you the correlations making use of <b>pearson<\/b> coefficient. This is because I assume that features have a linear relation.","2c2bc615":"# 4. Conclusions","1496c5c7":"Fortunately, there are not any <b><i>null<\/i><\/b> value.","9c8d6cf0":"### <span style=\"color:#8b0000\"> Visualization\n <\/span>","2ad7079a":"### 3.2.3 Behavior of <i>Distances \/ Minute<\/i>.","007de965":"We can observe some interesting things:\n\n* People used to pay more when are picked up from JFK Airport.\n* People used to pay less when they dropped off to JFK Airport.","be2d0418":"### 3.1.2 Distance","7018b17e":"We can see some interesting things:\n\n* People used to use taxi with more than one person like every 7 days.","a9aee58d":"### 3.2.4 Behavior of <i>Number of Passengers \/ Day<\/i>.","af29fc4e":"The behavior is a little bit regular.","9fa7e28e":"### 3.2.1 Behavior of <i>Distances \/ Day<\/i>.","5f2ed832":"The behavior is a little bit regular.","ef180e4c":"### <span style=\"color:#8b0000\"> <i>Note<\/i>: download and load into your favorite analytical tool the trip data for September 2015 <\/span>","ac434bc5":"### 3.2.6 Behavior of <i>Number of Passengers \/ Minute<\/i>.","ded5da7d":"As above, we can observe that most of the concurrency occur near Manhattan, Brooklyn and near to the La Guardia Airport.","a6fe5d4e":"The same behavior.","9ae3db2e":"<b>Further work<\/b>","f698bf13":"### 3.3 Correlations","2836b95c":"We can see some interesting things:\n\n* People used to travel distances longer every 7 days aprox.\n* At the begining and at the end of month, people used to not to travel long distances.","2a5f9e54":"Create a cycle to evaluate the <b>best number of estimators<\/b> needed to obtain the best regressor.","ce47a333":"I have developed a deep analysis of the dataset about <i>Green Taxis<\/i> in New York. We have seen that the use of this new alternative is becoming more popular, however it looks like it's a little bit expensive. However I think in a near future I will become more popular and cheeper.","52d3ec29":"### 3.2.9 Behavior of <i>Total Amount \/ Minute<\/i>.","a36ac767":"### 3.2.8 Behavior of <i>Total Amount \/ Hour<\/i>.","d3ff9d4a":"### 3.1.4 Payment type","45cf3e8c":"<b>Number of rows:<\/b> 1494926\n<br>\n<b>Numer of columns:<\/b> 21","cc5ce91c":"We can see some special things:\n* The taxi used to transport just only one passenger\n* In some special cases, it has transported more than 5 passengers","8c8c0b17":"<b>Distance average: <\/b>2.9725099614139032<br>\n<b>Distance standard deviation: <\/b>3.077168577595341","8c67c164":"From this images we can observe some interesting things:\n* From pickup locations, we can observe that most of people are picked up near to La Guardia and JFK Airport. \n* From pickup locations, we can observe that most of people are picked up around Manhatan.\n* From dropoff locations, we observe that people is more distributed along New York. This is related with the total amoun payed from people who took a taxi near or inside the airport.","000759ec":"# 2. Cleaning Data.\n\nBefore plotting something, I will explore data and I'll solve some issues as:\n\n* Remove columns\/features I don't need for this excercise.\n* In case of <i>null<\/i> values, fix it.\n* In case of <i>fake<\/i> values, fix it.\n* In case of need to add or change some columns\/featues, do it.\n\nSo let's do it!","1928c9f2":"People used to pay like the same, when they are picked up and dropped off. Although just a little bit more when they are dropped off.","d8118602":"## 2.1 Removing Features.","69f741cc":"### <span style=\"color:#8b0000\"> Showing the number of rows and columns. <\/span>","e6ee576e":"<b>La Guardia Airport<\/b>","d7b770c6":"### 3.2.2 Behavior of <i>Distances \/ Hour.","c972ec15":"### 3.1.3 Passenger count","4480f5d2":"### <span style=\"color:#8b0000\"> Plot histogram of Trip Distance <\/span>","547e034f":"Now let's see some statistics in the dataset.","5b6c4fe3":"### <span style=\"color:#8b0000\"> Building a predictive model based on XGBoost\n <\/span>"}}