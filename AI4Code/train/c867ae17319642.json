{"cell_type":{"ce2d1cbf":"code","ac8f5841":"code","f18e235c":"code","91d449c7":"code","1f1ecb18":"code","aea2890a":"code","a5a20b51":"code","4dd602bf":"code","bbc017ef":"code","c6d7b315":"code","d73778bb":"code","e74541b0":"code","68825bec":"code","2bac2100":"code","da42b0b8":"code","92a0d32c":"code","91b85ed2":"code","8769c1c3":"code","3bf26b31":"code","f3637100":"code","5dae7225":"code","bb449eea":"code","4aefc365":"code","d8e14814":"code","7a47ac21":"code","30aa9b7d":"code","0eddf1ea":"code","37c13fc4":"code","97061af9":"code","95201547":"code","91c3aec6":"code","9678fc6b":"code","d8f987bf":"markdown","54f04b19":"markdown","5f4d5e42":"markdown","12d0291d":"markdown","06cee858":"markdown","5b430f38":"markdown","2d967cda":"markdown","7a41ce74":"markdown","ba7f9a14":"markdown","35f3d15f":"markdown","18088a88":"markdown","9c2652f7":"markdown","b8c37437":"markdown","1f5c9d0f":"markdown"},"source":{"ce2d1cbf":"import glob\ncsv_list = glob.glob('\/kaggle\/input\/**\/*')\ncsv_list","ac8f5841":"!ls \/kaggle\/input\/**\/*","f18e235c":"import numpy as np\nimport pandas as pd\nimport matplotlib.pyplot as plt\nimport plotly.express as px","91d449c7":"df = pd.read_csv(csv_list[0], \n                 parse_dates=['Date'], \n                 dayfirst=True\n                )\n#df['Date'] = pd.to_datetime(df.Date, format='%d-%m-%Y')\ndf.head()","1f1ecb18":"df.dtypes","aea2890a":"df.isna().sum()","a5a20b51":"px.line(df.melt(id_vars='Date',var_name='Resoviour', value_name='Water_Level'),\n       x='Date',\n       y='Water_Level',\n       color='Resoviour',\n       facet_col='Resoviour',\n       facet_col_wrap=2,\n       title=f'water availability in Chennai four major resoviours {df.Date.dt.year.min()}-{df.Date.dt.year.max()}')","4dd602bf":"df.POONDI + df.CHEMBARAMBAKKAM + df.CHOLAVARAM + df.REDHILLS","bbc017ef":"df['total'] = df.drop(columns='Date').sum(axis=1)\ndf.head()","c6d7b315":"px.line(df,\n       x='Date',\n       y='total',\n       title=f'water availability in Chennai {df.Date.dt.year.min()}-{df.Date.dt.year.max()}')","d73778bb":"rain_df = pd.read_csv(csv_list[1],parse_dates=['Date'], dayfirst=True)\nrain_df.head()","e74541b0":"rain_df.dtypes","68825bec":"rain_df.isna().sum()","2bac2100":"px.line(rain_df.melt(id_vars='Date',var_name='Resoviour', value_name='Rainfall'),\n       x='Date',\n       y='Rainfall',\n       color='Resoviour',\n       facet_col='Resoviour',\n       facet_col_wrap=2,\n       title=f'Daily rainfall in Chennai four major resoviours {df.Date.dt.year.min()}-{df.Date.dt.year.max()}')","da42b0b8":"## get daily total \nrain_df['total'] = rain_df.drop(columns='Date').sum(axis=1)\n\nrain_df.head()","92a0d32c":"## group by month and sum it\n\nrain_df['YearMonth'] = pd.to_datetime(rain_df.Date.dt.year.astype(str) + rain_df.Date.dt.month.astype(str), format='%Y%m')\nrain_df.head()","91b85ed2":"rain_df.YearMonth.value_counts()","8769c1c3":"monthly = rain_df.groupby([rain_df.Date.dt.year,rain_df.Date.dt.month]).total.sum()\nmonthly.index = monthly.index.set_names('Month',level=1).set_names('Year',level=0)\nmonthly.reset_index()","3bf26b31":"rain_df.Date.dt.isocalendar().week","f3637100":"weekly = rain_df.groupby([rain_df.Date.dt.year,rain_df.Date.dt.isocalendar().week]).total.sum()\nweekly.index = weekly.index.set_names('Week',level=1).set_names('Year',level=0)\nweekly.reset_index()","5dae7225":"## todo use multiple cols in X-axis\npx.bar(weekly.reset_index(),\n       x=['Week'],\n       y='total',\n       facet_col='Year',\n       facet_col_wrap=4,\n       title=f'Weekly rainfall in Chennai {df.Date.dt.year.min()}-{df.Date.dt.year.max()}',\n      height=1500)","bb449eea":"monthly_df = rain_df.groupby('YearMonth').total.sum().reset_index()\nmonthly_df.head()","4aefc365":"px.bar(monthly_df,\n       x='YearMonth',\n       y='total',\n       title=f'Monthly rainfall in Chennai {df.Date.dt.year.min()}-{df.Date.dt.year.max()}')","d8e14814":"month_to_season = {1: 'winter', 2: 'winter', 3: 'summer', 4: 'summer', 5: 'summer', 6: 'monsoon', 7: 'monsoon', 8: 'monsoon', 9: 'monsoon', 10: 'post-monsoon', 11: 'post-monsoon', 12: 'winter'}","7a47ac21":"monthly_df['season'] = monthly_df.YearMonth.dt.month.map(month_to_season)\nmonthly_df.head()","30aa9b7d":"px.bar(monthly_df,\n       x='YearMonth',\n       y='total',\n       color='season',\n       title=f'Monthly rainfall in Chennai by seasons {df.Date.dt.year.min()}-{df.Date.dt.year.max()}')","0eddf1ea":"rain_df","37c13fc4":"px.bar(monthly_df.groupby(monthly_df.YearMonth.dt.year).total.sum().reset_index(),\n       x='YearMonth',\n       y='total',\n       title='yearly rainfall in chennai')","97061af9":"monthly_df.groupby([monthly_df.YearMonth.dt.year, 'season']).total.sum().reset_index()","95201547":"px.bar(monthly_df.groupby([monthly_df.YearMonth.dt.year,'season']).total.sum().reset_index(),\n       x='YearMonth',\n       y='total',\n       color='season',\n       title='Yearly rainfall by season in Chennai')","91c3aec6":"avg_water_avail = df.loc[ (df.Date.dt.month==3) & (df.Date.dt.day==1) ].total.mean()\navg_water_avail","9678fc6b":"fig = px.bar(df.loc[ (df.Date.dt.month==3) & (df.Date.dt.day==1) ],\n       x='Date',\n       y='total',\n       title='Availablility of water in total at the begining of summer',\n)\nfig.add_hline(y=avg_water_avail,\n              annotation_text=f\"Avg. water availability {avg_water_avail:0.2f}\", \n              #annotation_position=\"bottom right\",\n              annotation_font_color=\"red\",\n              annotation_font_size=20,\n              line_color=\"green\",\n              line_dash='dot')","d8f987bf":"## monthly rainfall","54f04b19":"## Combine the major water reservoirs to get a better picture and note down your observations","5f4d5e42":"## Read the data\n\nFirstly, we have data about the water availability in four major reservoirs that supply water to Chennai. This data spans from 2004 to 2019. All the measurements are in mcft (million cubic feet). Let us look at the top few lines.","12d0291d":"## insight\n- chennai receives most of its rainfall during post-monsoon season","06cee858":"## Plot the yearly rainfall data and note your observations","5b430f38":"## Activity\n\n### Can you think of a similar urban large scale problem having a real time affect that you would like to analyze and solve with the help data? Note them, break down the possible ways and steps to solve the same","2d967cda":"## Water shortage estimation\n\nSince all the data is available in the public domain, we want to do some analysis and see whether we can estimate this water shortage ahead of time so as to plan for it?\n\nFirst let us just take a simple step to compare the sum of water levels at the beginning of summer (Let us take March 1st of every year). This is because there will not be any replenishment till the next monsoon and the amount of water stored in the four reservoirs itself will be clear indicator of how long can the water be managed during summer and whether there should be some backup plans.","7a41ce74":"## Rainfall Levels in Reservoir Regions\n\nNow there are two clear facts:\n\n- There is no water in any of the major reservoirs\n- Reservoirs depend on rain for their replenishment.\n\n### Next we can look at the rainfall data in these reservoir regions to analyze the rainfall months. Let us take the total monthly rainfall in these reservoir regions and plot the same.\n\n* Read the data\n\n* Combine the rainfall data for major reservoirs\n\n* Plot the rainfall data\n\n* Note down your observation\n\nNote - Hover over the graph to see the better results","ba7f9a14":"## insight\n- chennai receives most of its rainfall during post-monsoon season","35f3d15f":"## Find out and compare the water levels of the 4 major resoviours over a period of time\n\n","18088a88":"# Chennai's quest to quench its thirst\n\n### Chennai & its water sources\n\nChennai also known as Madras, is the capital of the Indian state of Tamil Nadu. Located on the Coromandel Coast off the Bay of Bengal, it is the biggest cultural, economic and educational centre of south India. Population of Chennai is close to 9 million and is the 36th largest urban area by population in the world\n\nChennai is entirely dependent on ground water resources to meet its water needs. Ground water resources in Chennai are replenished by rain water and the city's average rainfall is 1,276 mm1.\n\nFollowing are the major sources of water supply for Chennai city.\n\nFour major reservoirs in Red Hills, Cholavaram, Poondi and Chembarambakkam\nFollowing are the major sources of water supply for Chennai city.\n\n1. Four major reservoirs in Red Hills, Cholavaram, Poondi and Chembarambakkam\n2. Cauvery water from Veeranam lake\n3. Desalination plants at Nemelli and Minjur\n4. Aquifers in Neyveli, Minjur and Panchetty\n5. Tamaraipakkam, Poondi and Minjur Agriculture wells\n6. CMWSSB Boreweels\n7. Retteri lake\n\nThe above one is also roughly the descending order in which the contribution is made to overall fresh water requirements of the city. In addition to this, people make use of borewells and private tankers for their water needs.\n\nChennai is facing an acute water shortage due to shortage of rainfall for the past three years (and we had one of the worst floods in history the year before that!). As a result, the water in these resources are depleting along with the groundwater level. This [video](https:\/\/www.youtube.com\/watch?v=iaG7kRcSxwA&feature=youtu.be) will give an idea about the current state.\n\n### Content\nThis dataset has details about the water availability in the four main reservoirs over the last 15 years.\nAll the measurements are in mcft (million cubic feet)\n\nPoondi\nCholavaram\nRedhills\nChembarambakkam\n\n\nIn this notebook, let us explore the data of different water resources available.","9c2652f7":"## Insights\n- seasonal pattern of increase and decrease of water availability\n- low water availability in 2004, 2015 time periods\n- interestingly high availablity during Sep-Dec 2020, possibly due to lockdown and low industrial use?\n","b8c37437":"## daily rainfall","1f5c9d0f":"## Import libraries"}}