{"cell_type":{"34737bf8":"code","a966ad75":"code","7f3439d3":"code","2c184db3":"code","8d0628a2":"markdown","89122fdf":"markdown","3e662337":"markdown","bbdbec96":"markdown","3e428da4":"markdown","ff15e6d3":"markdown","edbbbf84":"markdown","5b170ade":"markdown","f7e82ee4":"markdown"},"source":{"34737bf8":"import sqlite3\nimport pandas as pd\nimport matplotlib.pyplot as plt","a966ad75":"# untuk koneksi ke database\nclass basis_data:\n    # buat koneksi\n    def __init__(self, basisdata):\n        self.connection = sqlite3.connect(basisdata)\n    # untuk mengambil data\n    def take_data(self):\n        query = '''SELECT b.FirstName ||' '|| b.LastName as Name, a.InvoiceDate as Date, a.Total as total \n        FROM invoices a\n        INNER JOIN customers b on a.CustomerId = b.CustomerID\n        WHERE\n        a.InvoiceDate > '2009-01-01' AND a.InvoiceDate < '2009-10-01'\n        ORDER by Date\n        '''\n        cursor = self.connection.cursor()\n        cursor.execute(query)\n        hasil = cursor.fetchall()\n        cursor.close()\n        return hasil \n\n    def close_connect(self):\n        self.connection.close()\n    \nnama = '..\/input\/algoritma-academy-data-analysis\/chinook.db'\ntugas = basis_data(nama)\ndata = tugas.take_data()\ntugas.close_connect()\n\ndf = pd.DataFrame(data, columns=['Nama', 'Tanggal','Total'])\ndf","7f3439d3":"df_1 = df.groupby(['Nama']).sum()\ndf_2 = df_1.sort_values(by=['Total'], ascending=False)\nprint(df_2)","2c184db3":"plt.bar(df_1.index, df_2['Total'], align='center')\nplt.xticks(rotation=90)\nplt.ylabel('Total Pembelian')\nplt.title('Penjualan Bulan Februari - Juni')\nplt.tight_layout()\nplt.show()","8d0628a2":"* connection = sqlite3.connect(\"filedb\") -> untuk melakukan koneksi dengan db \n* cursor = connection.cursor() -> metode cursor untuk menjalankan query sqlite \n* cursor.execute(query) # untuk menjalankan query yang telah disiapkan\n* cursor.executemany(crud_query,input_list) -> Untuk mengisikan banyak nilai \"input_list = [(data satu),(data dua)]\" \n* untuk mengisikan variabel python dalam query sqlite kita bisa menggunakan tanda \"?\" crud_query = '''insert into films (name, year, awards, nominations) values (?,?,?,?);\n* Untuk Membaca isi dari tabel selain menggunakan metode execute() bisa menggunakan : ~ fetchall() digunakan untuk mengambil semua data dari query ~ fetchmany() digunakan untuk mengambil data dengan jumlah tertentu ~ fetchone() digunakan untuk mengambil hanya satu data.\n* bisa dipilih salah satu hasilsemua = cursor.fetchall() hasiltertentu = cursor.fetchmany(count) hasilsatu = cursor.fetchone()","89122fdf":"Selanjutnya, melakukan grouping berdasrakan data Nama yang sama dan mengurutkan total invoice berdasarkan total invoice yang paling besar ke paling rendah.","3e662337":"Pada proses ini dilakukan visualisasi bar plot dan didapatkan grafik bar penjualan dari bulan Februari - Juni  didapatkan bahwa  :\n* Total pembelian tertinggi yaitu pada nama Aaron Mitchel dengan total pembelian > 20\n* Untuk pembelian tertinggi itu termasuk outliers karena untuk total pembelian lainnya cenderung rata jaraknya antara 15 sampai <5.\n* Paling banyak pembeli dengan total pembelian 15.","bbdbec96":"Pada proses ini dilakukan penghubungan ke file database SQL yang disimpan dalam class basis_data dengan query yang disimpan pada fungsi dalam class tsb. kemudian disimpan dalam variable data dan data yang sudah rapih disimpan dalam variable df serta pada proses ini juga dilakukan visualisasi","3e428da4":"Pada proses ini saya akan menghubungkan data yang ada di database SQL dengan Python sampai dengan visualisasi Data dari SQL","ff15e6d3":"Proses pertama adalah melakukan import library yang dibutuhkan seperti sqlite3 untuk menghubungkan dengan sql, pd untuk proses dataframe dan plt untuk visualisasi","edbbbf84":"# Menghubungkan ke SQL","5b170ade":"# Visualisasi\/Plotting","f7e82ee4":"# Import library"}}