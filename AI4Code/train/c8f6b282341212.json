{"cell_type":{"1e878ad5":"code","a8068e9d":"code","3cbae62f":"code","e5c3dd0b":"code","10c81fbb":"code","b2bae71c":"code","2b30df60":"code","810c928e":"code","2af13358":"code","037ba3b6":"code","394b95bf":"code","602f59f2":"code","9573d330":"code","37478566":"code","7c8d5805":"code","dee87fd1":"code","bf45cef7":"code","1a4b7561":"code","b6554fac":"code","9349ae53":"code","de984f49":"code","55dc672f":"code","25faefa5":"code","d50f937c":"markdown","db4dfe96":"markdown","461ad601":"markdown","dfa6a292":"markdown","7e059812":"markdown","42c7c26f":"markdown","fbe3b5a0":"markdown","9e91b947":"markdown","93ba1599":"markdown","60d4a818":"markdown","f557ee2a":"markdown","7ce8f3e7":"markdown","107f7a33":"markdown"},"source":{"1e878ad5":"import numpy as np\nimport pandas as pd\n\nfrom plotly.offline import init_notebook_mode,iplot,plot\n\ninit_notebook_mode(connected=True)\nimport plotly.express as px\nimport plotly.graph_objects as go\nimport plotly.figure_factory as ff\nfrom plotly.subplots import make_subplots\n\nfrom wordcloud import WordCloud\nimport matplotlib.pyplot as plt\nimport os\nos.listdir(\"..\/input\/world-university-rankings\/\")","a8068e9d":"PATH = \"..\/input\/world-university-rankings\/\"\n\ntimeData = pd.read_csv(f\"{PATH}\/timesData.csv\")    ","3cbae62f":"timeData.info()","e5c3dd0b":"timeData.head()","10c81fbb":"df = timeData.iloc[:100,:]\n\nt1 = go.Scatter(\n    x= df.world_rank,\n    y= df.citations,\n    mode=\"lines\",\n    name=\"citations\",\n    marker = dict(color=\"rgba(116,116,116,0.9)\")\n)\n\nt2 = go.Scatter(\n    x = df.world_rank,\n    y = df.teaching,\n    mode= \"lines+markers\",\n    name=\"teaching\",\n    marker = dict(color=\"green\")\n)\n\ndata = [t1,t2]\n\n#heading and title\nlayout = dict(title=\"citations and teaching vs world rank of top 100 universities\",\n             xaxis=dict(title='worldrank',ticklen=5,zeroline=False)\n             )\n\nfig = dict(data=data,layout = layout)\niplot(fig)","b2bae71c":"df_2014 = timeData[timeData['year'] == 2014]\ndf_2015 = timeData[timeData['year'] == 2015]\ndf_2016 = timeData[timeData['year'] == 2016]\n\nt1 = go.Scatter(\n    x = df_2014.world_rank,\n    y = df_2014.citations,\n    mode = \"markers\",\n    name = \"2014\",\n    marker = dict(color=\"rgba(255,128,255,0.8)\")\n)\n\nt2 = go.Scatter(\n    x = df_2015.world_rank,\n    y = df_2015.citations,\n    mode = \"markers\",\n    name = \"2015\",\n    marker = dict(color=\"rgba(255,128,0,0.8)\")\n)\nt3 = go.Scatter(\n    x = df_2016.world_rank,\n    y = df_2016.citations,\n    mode = \"markers\",\n    name = \"2016\",\n    marker = dict(color=\"rgba(255,0,255,0.8)\")\n)\n\ndata = [t1,t2,t3]\nlayout = dict(title='Citation vs world_rank of top 100 university in 2014,2015,2016',\n              xaxis=dict(title='world rank',ticklen=5,zeroline=True),\n             yaxis=dict(title=\"citations\",ticklen=5,zeroline=False))\n\nfig = dict(data=data,layout=layout)\niplot(fig)","2b30df60":"df_3 = timeData.iloc[:3,:]","810c928e":"t1 = go.Bar(\n    x = df_3.university_name,\n    y = df_3.citations,\n    name=\"citations\",\n    marker=dict(color='rgba(255,116,128,0.8)',\n               line=dict(color='rgba(0,0,0,0)',width=1.5))\n)\n\nt2 = go.Bar(\n    x = df_3.university_name,\n    y=df_3.teaching,\n    name=\"teaching\",\n    marker=dict(color='rgba(125,125,125,0.8)',\n           line = dict(color='rgba(0,0,0,0)',width=1.5)),\n\n)\n\ndata = [t1,t2]\n\nlayout = dict(barmode=\"group\",title=\"Bar plot of ciation and teaching of top 3 university at 2011\")\nfig = dict(data=data,layout=layout)\niplot(fig)","2af13358":"t1 = go.Bar(\n    x = df_3.university_name,\n    y = df_3.citations,\n    name=\"citations\",\n    marker=dict(color='rgba(255,116,128,0.8)',\n               line=dict(color='rgba(0,0,0,0)',width=1.5))\n)\n\nt2 = go.Bar(\n    x = df_3.university_name,\n    y=df_3.teaching,\n    name=\"teaching\",\n    marker=dict(color='rgba(125,125,125,0.8)',\n           line = dict(color='rgba(0,0,0,0)',width=1.5)),\n\n)\n\ndata = [t1,t2]\n\nlayout = dict(barmode=\"relative\",title=\"Bar plot of ciation and teaching of top 3 university at 2011\")\nfig = dict(data=data,layout=layout)\niplot(fig)","037ba3b6":"from plotly import subplots\n\ndf_7 = timeData.iloc[:7,:]\n\nt1 = go.Bar(\n    x = df_7.research,\n    y = df_7.university_name,\n    name = 'research',\n    marker = dict(color='rgba(255,6,100,0.8)',\n                 line=dict(color='rgba(171, 50, 96, 1.0)',width=1)),\n    orientation='h'\n)\n\nt2 = go.Scatter(\n    x = df_7.income,\n    y = df_7.university_name,\n    name=\"income\",\n    mode = \"lines+markers\",\n    marker = dict(color=\"rgba(255,128,0,0.8)\")\n)\n\nlayout = dict(title=\"Income and Research\",\n              yaxis=dict(showticklabels=True,domain=[0,0.85]),\n              yaxis2=dict(showticklabels=False,showline=True,linecolor\n                          ='rgba(102, 102, 102, 0.8)',linewidth=2,domain=[0,0.85]),\n              xaxis=dict(zeroline=False,showline=False,showgrid=True,showticklabels=True),\n              xaxis2=dict(zeroline=False,showline=False,showgrid=True,showticklabels=True,side='top'),\n              legend= dict(x=0.1,y=1.038,font=dict(size=15)),\n              margin= dict(l=100,r=100,t=100,b=100),\n              paper_bgcolor='rgb(255,248,255)',\n              plot_bgcolor = 'rgb(255,255,255)'\n             )\n\nfig = subplots.make_subplots(rows=1,cols=2,shared_xaxes=False,shared_yaxes=True)\nfig.append_trace(t1,1,1)\nfig.append_trace(t2,1,2)\n\nfig['layout'].update(layout)\niplot(fig)","394b95bf":"df_7.head()","602f59f2":"\npie = df_7.num_students\npie_list = [float(e.replace(',','.')) for e in pie]\nlabels = df_7.university_name\nfig = {\n    \"data\":[\n        {\n            \"values\":pie_list,\n            \"labels\":labels,\n            \"name\":\"number of students\",\n            \"hole\":0.3,\n            \"type\":\"pie\"\n        }\n    ],\n    \"layout\":{\n        \"title\":\"Piechart of Number of students \"\n    }\n}\n\niplot(fig)","9573d330":"df_10 = timeData.iloc[:10,:]","37478566":"num_students = [float(e.replace(',','.')) for e in df_10.num_students]\ninternational_color = [float(e) for e in df_10.international]\nfig = {\n    \"data\":[\n        {\n            \"x\":df_10.world_rank,\n            \"y\":df_10.teaching,\n            \"name\":'world rank',\n            \"mode\":\"markers\",\n            \"marker\":{\n                \"color\":international_color,\n                \"size\":num_students,\n                \"showscale\":True\n            },\n            \"text\":df_10.university_name\n        }\n    ],\n    \"layout\":{\n        \"title\":\"World rank vs teaching\",\n        \n    }\n}\niplot(fig)","7c8d5805":"df_2011_score = timeData.query(\"year == 2011\").total_score\ndf_2012_score = timeData.query('year == 2012').total_score\n\nt1 = go.Histogram(\n    x = df_2011_score,\n    opacity=0.8,\n    name = \"2011\"\n)\nt2 = go.Histogram(\n    x=df_2012_score,\n    opacity=0.8,\n    name='2012'\n)\n\nlayout = go.Layout(barmode='overlay',\n                  title=\"2011 and 2013 total score distribution\",\n                  xaxis=dict(title=\"Student ratio\"),\n                  yaxis=dict(title=\"student score\"),\n                  legend= dict(x=0.9,y=0.9,font=dict(size=10)))\n\ndata = [t1,t2]\nfig = dict(data=data,layout=layout)\niplot(fig)\n","dee87fd1":"df_2011  = timeData[timeData.year == 2011]\n\nfig = {\n    \"data\":[\n       { \n           \"y\":df_2011.research,\n            \"name\":\"2011 research\",\n            \"marker\":{\n                \"color\":'rgba(128,128,255,0.8)',\n            },\n             \"type\":\"box\"\n       },\n        {\n            \"y\":df_2011.income,\n            \"name\":\"2011 income\",\n            \"marker\":{\n                \"color\":'rgba(122,255,255,0.8)'\n            },\n            \"type\":\"box\"\n        }\n    ],\n    \n    \"layout\":{\n        \"title\":\"Box plot of income and research\"\n    }\n}\n\niplot(fig)","bf45cef7":"import plotly.figure_factory as ff\ndf2015 = timeData[timeData.year == 2015].loc[:,['research','international','income']]\n\ndf2015[\"index\"] = np.arange(1,len(df2015)+1)\n\nfig  = ff.create_scatterplotmatrix(df2015,diag='box',index='index',colormap='Portland',\n                                   colormap_type='cat',height=700,width=700)\n\niplot(fig)","1a4b7561":"trace1 = go.Scatter3d(\n    x=df_2015.world_rank,\n    y=df_2015.research,\n    z=df_2015.citations,\n    mode='markers',\n    marker=dict(\n        size=10,\n        color='rgb(255,0,0)',                # set color to an array\/list of desired values      \n    )\n)\n\ndata = [trace1]\nlayout = go.Layout(\n    margin=dict(\n        l=0,\n        r=0,\n        b=0,\n        t=0  \n    )\n    \n)\nfig = go.Figure(data=data, layout=layout)\niplot(fig)","b6554fac":"df_country = timeData.country[timeData.year == 2011]\n\nplt.figure(figsize=(10,10))\nwordcloud = WordCloud(background_color=\"black\",\n                      width=512,\n                      height=384,\n                     ).generate(\" \".join(df_country))\n\nplt.imshow(wordcloud)\nplt.axis(\"off\")\nplt.show()","9349ae53":"df_country_year = timeData.groupby(['country','year'])[[\"citations\",\"teaching\"]].mean().reset_index()","de984f49":"fig1 = px.choropleth(df_country_year,locations=\"country\",\n                    color=\"teaching\",\n                    projection='natural earth',\n                    hover_name=\"country\",\n                   locationmode='country names',\n                   )\n\nlayout = dict(title=\"Average teaching per country\")\nfig1['layout'].update(layout)\nfig1.show()","55dc672f":"fig2 = px.choropleth(df_country_year,\n                    color=\"citations\",\n                    locations=\"country\",\n                    locationmode=\"country names\",\n                    projection=\"natural earth\",\n                    title=\"Average teaching in countries\")\nfig2.show()","25faefa5":"fig3 = px.choropleth(\n    df_country_year,\n    color=\"citations\",\n    locations=\"country\",\n    projection=\"natural earth\",\n    locationmode=\"country names\",\n    scope=\"europe\"\n)\nfig3.show()","d50f937c":"# Plotly Tutorial","db4dfe96":"## wordcloud","461ad601":"## Pie Chart","dfa6a292":"## Box plot","7e059812":"## Scatter plot","42c7c26f":"## choropleth","fbe3b5a0":"## Histogram","9e91b947":"## Bar chart type 3","93ba1599":"## Bar Plot","60d4a818":"## Bubble chart","f557ee2a":"## 3d scatter","7ce8f3e7":"## Line Plot\n","107f7a33":"## Scatter Plot"}}