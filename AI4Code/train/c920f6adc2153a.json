{"cell_type":{"2e964fb2":"code","85e9f6df":"code","bbd3f68f":"code","618560ed":"code","c85d6b0c":"code","136f5cea":"code","5fd15540":"code","8d5eb208":"code","c2d769dd":"code","0dc69fa8":"code","f600c2b5":"code","08bc59df":"code","fb791a24":"code","54b81a3b":"code","9d92047b":"code","b42c1be6":"code","ea7b7303":"code","8648f486":"code","5188b19a":"code","f4ae0c43":"code","dc4fa6c3":"markdown","64dc7c2a":"markdown","c236cf1f":"markdown","e0e70e13":"markdown","94903298":"markdown","a23561d2":"markdown","0b8e4210":"markdown","30010ca6":"markdown","41e9b6f0":"markdown","45d0cafe":"markdown","91147c54":"markdown","c0eb9d39":"markdown","69491183":"markdown","b8fa5043":"markdown","1f3c8776":"markdown","ecbe25f3":"markdown"},"source":{"2e964fb2":"import pandas as pd\nimport matplotlib.pyplot as plt\nimport numpy as np\nimport re\n\n# plotly\nimport plotly.graph_objects as go\nimport plotly.express as px ","85e9f6df":"data = pd.read_csv('\/kaggle\/input\/friends-episodes\/friends.csv')\ndata.head()","bbd3f68f":"data.loc[4, 'Rating\/Share']","618560ed":"for i in range(len(data)):\n    val = data['Rating\/Share'][i].split('\/')\n    data.loc[i, 'Rating\/Share'] = round(float(val[0]) \/ float(val[1]), 4)\n    \ndata['Rating\/Share'] = pd.to_numeric(data['Rating\/Share'], errors='coerce')","c85d6b0c":"data.head()","136f5cea":"fig = px.scatter(\n    x=data['Rating\/Share'],\n    y=data['US Viewership (in millions)'],\n    title='Rating and Views Relationship',\n    log_y=True, \n)\nfig.update_yaxes(title_text='US Viewership in Millions')\nfig.update_xaxes(title_text='Rating\/Share')\nfig.show()","5fd15540":"data_season = data.groupby(by=['Season']).mean()\n\nfig = px.line(\n    x=data_season.index, \n    y=data_season['Rating\/Share'], \n    text=round(data_season['Rating\/Share'], 3), \n    title='Rating\/Share of Each Season'\n)\n\nfig.update_traces(textposition='top center')\n\nfig.update_layout(\n    xaxis = dict(tickmode = 'linear', tick0 = 1)\n)\n\nfig.update_yaxes(title_text='Rating\/Share')\nfig.update_xaxes(title_text='#Season')\nfig.show()","8d5eb208":"data_dir_size = data.groupby(by=['Director']).size()\nfig = px.histogram(\n    x=data_dir_size, \n    y=data_dir_size.index,\n    title='Number of Episodes directed by each Director',\n    height=700\n)\nfig.update_yaxes(title_text='Director')\nfig.update_xaxes(title_text='No. of Episodes Directed')\nfig.show()","c2d769dd":"data_dir = data.groupby(by=['Director']).mean()\nfig = px.histogram(\n    x=data_dir['US Viewership (in millions)'],\n    y=data_dir.index,height=700,\n    title='Average Viewership Gained by Each Director'\n)\nfig.update_yaxes(title_text='Director')\nfig.update_xaxes(title_text='Average Viewership (in millions)')\nfig.show()","0dc69fa8":"# get all unique writers\nwriters = []\nfor w in data['Writer']:\n    lst = re.split('and |Story by |Teleplay by |, | & ',w)\n    for items in lst:\n        if len(items) > 0 and items not in writers: writers.append(items)","f600c2b5":"# get viewership for each writer\nwriters_viewership = {key: [] for key in writers}\nfor writer in writers:\n    for idx in range(len(data)):\n        if writer in data.iloc[idx,3]:\n            writers_viewership[writer].append(data.iloc[idx,8])","08bc59df":"# mean of viewership and size\nno_of_episodes_writer = []\navg_viewership_writer = []\nfor w in writers_viewership.values():\n    no_of_episodes_writer.append(np.array(w).shape[0])\n    avg_viewership_writer.append(round(np.array(w).mean(), 3))","fb791a24":"fig = px.histogram(\n    x=writers_viewership.keys(),\n    y=no_of_episodes_writer, \n    title='Number of Episodes written by each Writer'\n)\nfig.update_yaxes(title_text='No. of Episodes')\nfig.update_xaxes(title_text='Writer')\nfig.show()","54b81a3b":"fig = px.histogram(\n    x=writers_viewership.keys(),\n    y=avg_viewership_writer,\n    width=1000, \n    title='Average Viewership Gained by Each Writer'\n)\nfig.update_yaxes(title_text='Average Viewership (in millions)')\nfig.update_xaxes(title_text='Writer')\nfig.show()","9d92047b":"friends = {'Monica':0, 'Chandler':0 ,'Ross':0, 'Rachel':0, 'Joey':0, 'Phoebe':0}\n\nfor fr in friends:\n    for d in data['Summary']:\n        friends[fr] += d.count(fr)","b42c1be6":"fig = go.Figure(\n    data=[\n        go.Pie(\n            labels=list(friends.keys()),\n            values=list(friends.values()),\n            textinfo='label+percent',\n        )])\nfig.update_traces(textfont_size=15,marker=dict(line=dict(color='#000000', width=0.5)))","ea7b7303":"data['Date Aired'] = pd.to_datetime(data['Date Aired'], dayfirst=True)","8648f486":"px.line(\n    x=data['Date Aired'],\n    y=data['Rating\/Share'],\n    title='Rating Each Episode'\n).update_yaxes(title_text='Rating\/Share').update_xaxes(title_text='Date')","5188b19a":"by='Rating\/Share'\nfig = px.bar(data.nlargest(10, by)[['Title', by]],x='Title', y=by, color=by, text=by, height=600)\n\nfig.update_traces(marker=dict(line=dict(color='#000000', width=2)))\nfig.update_layout(title_text=f'Top 10 Episodes by {by}', title_x=0.5, title_font=dict(size=30))\nfig.update_traces(textposition='outside')\nfig.show()","f4ae0c43":"by='US Viewership (in millions)'\nfig = px.bar(data.nlargest(10, by)[['Title', by]],x='Title', y=by, color=by, text=by, height=600)\n\nfig.update_traces(marker=dict(line=dict(color='#000000', width=2)))\nfig.update_layout(title_text=f'Top 10 Episodes by {by}', title_x=0.5, title_font=dict(size=30))\nfig.update_traces(textposition='outside')\nfig.show()","dc4fa6c3":"# Writer \u270d","64dc7c2a":"# Summary Mentions","c236cf1f":"# Busiest Director \ud83c\udfac","e0e70e13":"# Busiest Writer","94903298":"# Most Viewed Writer","a23561d2":"# Best Season","0b8e4210":"# Top 10 Episodes by Viewership","30010ca6":"### The First Season took off with highest rating","41e9b6f0":"![Poster](https:\/\/california-times-brightspot.s3.amazonaws.com\/35\/37\/67b311bb4dfebd84cd54033f010c\/v2-frs-040721-tp-00672.jpg)","45d0cafe":"# Rating\/Share over the years","91147c54":"### Rachel seems to steal the show \u2764 ","c0eb9d39":"# Top 10 Episodes by Rating\/Share","69491183":"### Obviously, the Rating\/Share is directly proportional to the Viewership","b8fa5043":"# Most Viewed Director","1f3c8776":"# Rating and Views \u2728","ecbe25f3":"### Ted Cohen and Andrew Reich has written maximum number of episode with 25 episodes each"}}