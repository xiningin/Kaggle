{"cell_type":{"2021b121":"code","a40be681":"code","0a1158c7":"code","606a4fd8":"code","aed84c2a":"code","a3172e3b":"code","4c251f0a":"code","22c7b640":"code","6bb92f16":"code","7e0a2b42":"code","f7d3d0a5":"code","6c86efb0":"code","2825e4c6":"code","abc9dd3b":"code","5d063c83":"code","83339d17":"code","a98d28f9":"code","25fd1905":"markdown","eea259ae":"markdown","b20bd3fa":"markdown","73b5ac75":"markdown","62445144":"markdown","b90361e5":"markdown","d30df6b7":"markdown","8d507f1b":"markdown","80d3c017":"markdown","8cb08963":"markdown","24c2ff6a":"markdown"},"source":{"2021b121":"import numpy as np\nimport pandas as pd\nimport seaborn as sns\nimport matplotlib.pyplot as plt\nimport os","a40be681":"import riiideducation\n\nenv = riiideducation.make_env()","0a1158c7":"train_df = pd.read_pickle(\"..\/input\/riiid-train-data-multiple-formats\/riiid_train.pkl.gzip\")\n\nprint(\"Train size:\", train_df.shape)","606a4fd8":"print(train_df.dtypes)\ntrain_df['prior_question_had_explanation'] = train_df['prior_question_had_explanation'].astype('bool')","aed84c2a":"questions = pd.read_csv('\/kaggle\/input\/riiid-test-answer-prediction\/questions.csv')\nlectures = pd.read_csv('\/kaggle\/input\/riiid-test-answer-prediction\/lectures.csv')\nexample_test = pd.read_csv('\/kaggle\/input\/riiid-test-answer-prediction\/example_test.csv')\nexample_sample_submission = pd.read_csv('\/kaggle\/input\/riiid-test-answer-prediction\/example_sample_submission.csv')","a3172e3b":"train_df.isna().sum()","4c251f0a":"print(\"Number of rows : {}\".format(train_df.shape[0]))\nprint(\"Number of individual user : {}\".format(train_df.user_id.nunique()))\nprint(\"Number of individual question : {}\".format(train_df.content_id.nunique()))\nprint(\"Number of individual tasks: {}\".format(train_df.task_container_id.nunique()))","22c7b640":"groupby_user_id = train_df.groupby(\"user_id\").count()\n\nplt.figure(figsize=(15,5))\n\nplt.subplot(1,2,1)\nsns.distplot(groupby_user_id.row_id, kde=False)\nplt.title(\"Distribution of number of questions per users\")\n\nplt.subplot(1,2,2)\nthreshold = 200\nsns.distplot(groupby_user_id[groupby_user_id.row_id<threshold].row_id, kde=False, bins=100)\nplt.title(\"Distribution of number of questions per users (<{})\".format(threshold))\n\nprint(\"Average number of questions per user : {}\".format(groupby_user_id.row_id.mean()))\nprint(\"Median number of questions per user : {}\".format(groupby_user_id.row_id.median()))\nprint(\"75% quantile : {}\".format(groupby_user_id.row_id.quantile(0.75)))","6bb92f16":"plt.figure(figsize=(15,5))\n\nplt.subplot(1,2,1)\n\n\nts = train_df['timestamp']\/(31536000000\/12)\nsns.distplot(ts, kde=False, bins=100, color=\"b\")\nplt.title(\"Timestamp histogram\")\nplt.xlabel(\"Month between first user interaction & current interaction\")\n\nplt.subplot(1,2,2)\n\nts = train_df.groupby('user_id').max()[\"timestamp\"]\/(31536000000\/12)\n\nsns.distplot(ts, kde=False, bins=100, color=\"b\")\nplt.title(\"Histogram of last registered interactions\")\nplt.xlabel(\"Month between first & last interaction for each user\")","7e0a2b42":"plt.figure(figsize=(15,7))\nsns.countplot(train_df.user_answer)\nplt.title(\"User answers count\")","f7d3d0a5":"plt.figure(figsize=(15,7))\nsns.countplot(train_df.answered_correctly, orient=\"v\")\nplt.title(\"Question answered correctly\")","6c86efb0":"plt.figure(figsize=(15,7))\n\ntrain_df_f = train_df[train_df[\"user_answer\"]!=-1]\nsns.countplot(x=\"user_answer\", hue=\"answered_correctly\", data=train_df_f)","2825e4c6":"time_prior_question = train_df[train_df.prior_question_elapsed_time.isna() == False].prior_question_elapsed_time\nplt.figure(figsize=(15,7))\n\nsns.distplot(time_prior_question, kde=False, color=\"b\")\nplt.title(\"Prior question elapsed time histogram\")","abc9dd3b":"plt.figure(figsize=(15,7))\n\nsns.countplot(x = \"prior_question_had_explanation\" , hue=\"answered_correctly\", data=train_df_f)","5d063c83":"print(questions.head(5))\nprint(questions.shape)","83339d17":"plt.figure(figsize=(15,7))\nsns.countplot(questions.correct_answer)","a98d28f9":"plt.figure(figsize=(15,7))\nsns.countplot(questions.part)","25fd1905":"# Data exploration","eea259ae":"### First look","b20bd3fa":"The proportion of false answer is higher when the prior question didn't have an explanation.","73b5ac75":"## Question Dataset","62445144":"Approximately one third of the answers are incorrect.","b90361e5":"We would expect to have a uniform repartition between 0,1,2 and 3, but it seems that the answer #2 is significantly less choosen.","d30df6b7":"This explains why the answer #2 was less picked than the others","8d507f1b":"It seems that most of the users don't stay active for a long time.","80d3c017":"## Train dataset","8cb08963":"# Data Import","24c2ff6a":"Expectedly, the proportion of right and wrong answers is the same for each answer number."}}