{"cell_type":{"a3558d08":"code","d66b06fa":"code","be776009":"code","6eeede69":"code","dd8c94f3":"code","021de99d":"code","60d3206b":"code","a394ee81":"code","6be0e28c":"code","ba041b38":"code","3e76dde1":"code","87a465f1":"code","0453652e":"code","6099232e":"code","bd81a862":"code","15d50800":"markdown","3d86c0d5":"markdown","1ded2dba":"markdown","891ebc6a":"markdown","31125212":"markdown"},"source":{"a3558d08":"#\u5fc5\u8981\u4e0d\u53ef\u6b20\u306a\u30d1\u30c3\u30b1\u30fc\u30b8\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n%matplotlib inline\nimport pandas as pd\nimport numpy as np\nimport sklearn\nimport os\nimport matplotlib.pyplot as plt\nimport seaborn as sns\nimport librosa\nimport librosa.display \nimport IPython.display\npd.set_option('display.max_rows', 100)","d66b06fa":"def meta_define():\n    \"\"\"\n    input : none\n    output : Corrected metadata\n    \"\"\"\n    import pandas as pd\n    import os \n    os.chdir(\"\/kaggle\/input\/hah-data-science-challenge\/\")\n    df_train = pd.read_csv(\"train.csv\", index_col=False)\n    df_test = pd.read_csv(\"test.csv\", index_col=False)\n    \n    ##################################################\n    #\u4ee5\u4e0b\u8f9e\u66f8\u3084\u5909\u6570\u306e\u5b9a\u7fa9\n    #\u5404\u30c7\u30fc\u30bf\u4fee\u6b63\u7528\u306e\u8f9e\u66f8\n    bolt_dict = {\n        '\u5927':\"big\",\n        '\u5c0f':\"small\"\n    }\n\n    plate_dict = {\n        '\u5927':\"big\",\n        '\u5c0f':\"small\"\n    }\n\n    record_dict = {\n        'PC\u5185\u81d3':\"pc_built_in\",\n        'PC\u5185\u8535':\"pc_built_in\",\n        'USB1':\"usb1\", \n        'USB2':\"usb2\", \n        'USB3':\"usb3\", \n        'USB4':\"usb4\", \n        '\u30b9\u30de\u30db':\"smart_phone\",\n        '\u30b9\u30de\u30db\u306e\u30dc\u30a4\u30b9\u30ec\u30b3\u30fc\u30c0':\"smart_phone\",\n        '\u5185\u8535\u30de\u30a4\u30af':\"pc_built_in\",\n        }\n\n    distance_dict = {\n        '10cm': 0.1, \n        '10\u339d': 0.1, \n        '1M': 1.0, \n        '20cm': 0.2, \n        '20\u339d': 0.2, \n        '2M': 2.0, \n        '2m': 2.0, \n        '30cm': 0.3, \n        '30cn': 0.3, \n        '30\u339d': 0.3, \n        '3m': 3.0, \n        '40cm': 0.4, \n        '40\u339d': 0.4, \n        '50cm': 0.5, \n        '50\u339d': 0.5, \n        '5cm': 0.05,\n        '8cm': 0.08, \n        '\uff11\uff2d': 1.0   \n    }\n\n    cvt_dict = {\n        \"\u306d\u3058\" : bolt_dict, \n        '\u30d7\u30ec\u30fc\u30c8' : plate_dict, \n        '\u9332\u97f3\u65b9\u6cd5' : record_dict, \n        '\u30de\u30a4\u30af\u8ddd\u96e2' : distance_dict\n    }\n    \n    #df_train\u65e5\u672c\u8a9e\u30ab\u30e9\u30e0\u540d : ['ID', '\u306d\u3058', '\u30d7\u30ec\u30fc\u30c8', '\u9332\u97f3\u65b9\u6cd5', '\u30de\u30a4\u30af\u8ddd\u96e2', '\u30d5\u30a1\u30a4\u30eb', 'Target']\n    col_train = ['id', 'bolt', 'plate', 'record', 'mic_dist', 'file', 'target']\n    #df_test\u65e5\u672c\u8a9e\u30ab\u30e9\u30e0\u540d : ['ID', '\u306d\u3058', '\u30d7\u30ec\u30fc\u30c8', '\u9332\u97f3\u65b9\u6cd5', '\u30de\u30a4\u30af\u8ddd\u96e2', '\u30d5\u30a1\u30a4\u30eb', 'Target']\n    col_test = ['id', 'bolt', 'plate', 'record', 'mic_dist', 'file']\n    \n    tgt_col = [\"\u306d\u3058\", '\u30d7\u30ec\u30fc\u30c8', '\u9332\u97f3\u65b9\u6cd5', '\u30de\u30a4\u30af\u8ddd\u96e2']\n    ##################################################\n    \n    for col in tgt_col:#Target\u306f\u5909\u63db\u5bfe\u8c61\u5916\n        df_train[col] = df_train[col].map(cvt_dict[col])\n        df_test[col] = df_test[col].map(cvt_dict[col])\n        \n    df_train.columns = col_train\n    df_test.columns = col_test\n    \n    return df_train, df_test","be776009":"#\u30c7\u30fc\u30bf\u306e\u8aad\u307f\u8fbc\u307f\u3068\u4e2d\u8eab\u306e\u78ba\u8a8d\ndf_train, df_test = meta_define()\nprint(\"df_train.shape :\", df_train.shape)\nprint(df_train.head(),\"\\n----------------------------------------------\")\nprint(\"df_test.shape :\", df_test.shape)\nprint(df_test.head())\n","6eeede69":"df_train.info()","dd8c94f3":"plt.figure()\nfig, ax = plt.subplots(figsize=(10,10))\nplt.subplot(2,2, 1)\ndf_train[\"bolt\"].value_counts().plot(kind=\"bar\")\nplt.subplot(2, 2, 2)\ndf_train[\"plate\"].value_counts().plot(kind=\"bar\")\nplt.subplot(2, 2, 3)\ndf_train[\"record\"].value_counts().plot(kind=\"bar\")\nplt.subplot(2, 2, 4)\ndf_train[\"mic_dist\"].value_counts().plot(kind=\"bar\")","021de99d":"#\u5404\u30c7\u30fc\u30bf\u306e\u53ef\u8996\u5316\ndef plo(df_):\n    plt.figure()\n    fig, ax = plt.subplots(figsize=(10,10))\n    plt.subplot(2,2, 1)\n    plt.title('bolt')\n    df_[\"bolt\"].value_counts().plot(kind=\"bar\")\n    plt.subplot(2, 2, 2)\n    plt.title('plate')\n    df_[\"plate\"].value_counts().plot(kind=\"bar\")\n    plt.subplot(2, 2, 3)\n    plt.title('record')\n    df_[\"record\"].value_counts().plot(kind=\"bar\")","60d3206b":"#librosa\u3067\u97f3\u58f0\u89e3\u6790\ndef make_waveform_librosa(filename):\n    y, sr = librosa.load(filename)\n    librosa.display.waveplot(y, sr=sr)","a394ee81":"#\u30de\u30a4\u30af\u306e\u8ddd\u96e23m\nplo(df_train[df_train[\"mic_dist\"]==3.0])","6be0e28c":"#\u30de\u30a4\u30af\u306e\u8ddd\u96e22m\nplo(df_train[df_train[\"mic_dist\"]==2.0])","ba041b38":"#\u30de\u30a4\u30af\u306e\u8ddd\u96e21m\nplo(df_train[df_train[\"mic_dist\"]==1.0])","3e76dde1":"#\u30de\u30a4\u30af\u306e\u8ddd\u96e250cm\nplo(df_train[df_train[\"mic_dist\"]==0.5])","87a465f1":"##\u30de\u30a4\u30af\u306e\u8ddd\u96e240cm\nplo(df_train[df_train[\"mic_dist\"]==0.4])","0453652e":"#\u30de\u30a4\u30af\u306e\u8ddd\u96e230cm\nplo(df_train[df_train[\"mic_dist\"]==0.3])","6099232e":"#\u30de\u30a4\u30af\u306e\u8ddd\u96e220cm\nplo(df_train[df_train[\"mic_dist\"]==0.2])","bd81a862":"#\u30de\u30a4\u30af\u306e\u8ddd\u96e210cm\nplo(df_train[df_train[\"mic_dist\"]==0.1])","15d50800":"\u7d50\u8ad6<br>\n\u3000\u30fb\u8ddd\u96e2\u304c\u9060\u3044\u307b\u3069\u3001\u9332\u97f3\u65b9\u6cd5\u306f\u9650\u3089\u308c\u3066\u3044\u304f<br>\n\u3000\u30fb\u9006\u306b\u8fd1\u304f\u306a\u308b\u3068usb\u306b\u3088\u308b\u9332\u97f3\u65b9\u6cd5\u304c\u63a1\u7528\u3055\u308c\u3084\u3059\u3044\u50be\u5411\u3068\u306a\u3063\u305f\u3002<br>\n  \u30fb\u4ee5\u4e0a\u306e\u53ef\u8996\u5316\u304b\u3089\u3053\u308c\u3089\u306e\u5909\u6570\u306f\u6c7a\u5b9a\u6728\u306e\u3088\u3046\u306a\u30e2\u30c7\u30eb\u306b\u5bfe\u3057\u3066\u4f7f\u3048\u308b\u53ef\u80fd\u6027\u304c\u51fa\u3066\u3044\u308b\u3002<br>\n\u3053\u308c\u304b\u3089\u3084\u3063\u3066\u307f\u305f\u3044\u3053\u3068<br>\n \u30fb\u97f3\u58f0\u89e3\u6790\u30fb\u5206\u96e2\u306e\u691c\u8a0e\u3002\u30bb\u30df\u306e\u9cf4\u304d\u58f0\u306a\u3069\u74b0\u5883\u97f3\u304c\u6df7\u3058\u3063\u3066\u3044\u308b\u3068\u3044\u3046\u5831\u544a\u304c\u3042\u308b\u306e\u3067\u3001\u5206\u96e2\u3057\u3066\u307f\u308b\u306e\u3082\u3042\u308a\u304b\uff1f<br>\n \u30fb\u7570\u5e38\u691c\u77e5\u7528\u30e2\u30c7\u30eb\u306e\u69cb\u7bc9\u3002\u5358\u4f53\u306e\u30e2\u30c7\u30eb\u304b\u30a2\u30f3\u30b5\u30f3\u30d6\u30eb\u3067\u3044\u304f\u304b<br>\n ","3d86c0d5":"**\u306f\u3058\u3081\u306b**<br>\n\u521d\u3081\u3066\u306e\u97f3\u58f0\u89e3\u6790\u51e6\u7406\u3067\u3059\u3002\u521d\u5fc3\u8005\u306a\u306e\u3067\u3001\u8272\u3005\u3054\u6307\u6458\u3057\u3066\u3044\u305f\u3060\u3051\u308b\u3068\u5e78\u3044\u3067\u3059\u3002<br>\n\u76ee\u7684\uff1a\u30d7\u30ec\u30fc\u30c8\u3084\u306d\u3058\u306e\u90e8\u54c1\u3084\u9332\u97f3\u65b9\u6cd5\u306e\u95a2\u4fc2\u6027\u3092\u660e\u3089\u304b\u306b\u3059\u308b\u305f\u3081<br>\n\u610f\u7fa9\uff1a\u30e2\u30c7\u30eb\u306e\u69cb\u7bc9\u306e\u969b\u306b\u7279\u5fb4\u3068\u3057\u3066\u4f7f\u3048\u308b\u5834\u5408\u3001\u7cbe\u5ea6\u304c\u4e0a\u304c\u308b\u53ef\u80fd\u6027\u304c\u3042\u308b\u304b\u3082\u3057\u308c\u306a\u3044","1ded2dba":"\u3068\u308a\u3042\u3048\u305a\u3053\u3053\u307e\u3067\u3067\u308f\u304b\u308b\u3053\u3068<br>\n    \u30fb\u5927\u304d\u3044\u306d\u3058\u3068\u30d7\u30ec\u30fc\u30c8\u304c\u591a\u304f\u4f7f\u308f\u308c\u3066\u3044\u308b\u3053\u3068<br>\n    \u30fb\u30b9\u30de\u30db\u3068usb4\u304c\u30c8\u30c3\u30d7\uff12\u3067\u4f7f\u308f\u308c\u3066\u3044\u308b<br>\n    \u30fb\u30de\u30a4\u30af\u8ddd\u96e2\u306f0.1m\u3067","891ebc6a":"\u3053\u3053\u304b\u3089\u306f\u97f3\u58f0\u89e3\u6790","31125212":"\u30c7\u30fc\u30bf\u306e\u8aad\u307f\u8fbc\u307f"}}