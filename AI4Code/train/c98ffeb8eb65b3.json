{"cell_type":{"f07a567f":"code","498c1dfb":"code","b4d7d172":"code","5b461f57":"code","8dee45ab":"code","59a20330":"code","3ad24e03":"code","d44a819b":"code","3a330f80":"code","a2c7c16d":"code","db34b85f":"code","1b760103":"code","8a894922":"code","abfa8070":"code","36472554":"code","8c3387dd":"code","38ce6584":"code","b655d8ee":"code","38623ae1":"code","44d16278":"code","5d9d6cf3":"code","faec7f8e":"code","d03610f4":"code","4db4f4a4":"code","c8bfae97":"code","4a1cd9fb":"code","3db7b904":"code","7aa9db2e":"code","180d855a":"code","88f188bc":"code","8ea733b4":"code","79c513e6":"code","64a8085e":"code","a7ab3fdd":"code","ede21940":"code","7d43d4fc":"code","9fa9c249":"code","209a1c39":"code","71ea3bf1":"code","d79c4f19":"code","014495f1":"code","04d471a0":"code","71dd8b26":"code","f8e0433d":"code","d32281a9":"code","8b7cffe2":"code","506ca336":"markdown","a62b725e":"markdown","8c1b46e7":"markdown","03ee5af2":"markdown","1204fcdf":"markdown","e5f1bb05":"markdown","f5e58fbe":"markdown","f6f579fc":"markdown","3b93fa8c":"markdown","91f8ed9c":"markdown","717e8dca":"markdown","5dccfb4d":"markdown","830e831d":"markdown","7d6b2142":"markdown","9949b6b2":"markdown","7aef2c69":"markdown","93659eda":"markdown","af5fd679":"markdown","b8ba3041":"markdown","0c386338":"markdown","ca5f5980":"markdown","50ebf677":"markdown","2b422af4":"markdown","1e9aefc2":"markdown","c2e06a42":"markdown","dc70120c":"markdown","2e0a414a":"markdown","4f527d8b":"markdown","66fc7408":"markdown","2faec60d":"markdown","42027777":"markdown","45369392":"markdown","ab183964":"markdown","89daaca4":"markdown","6e0ed51c":"markdown","b18c014d":"markdown","21acb8af":"markdown","f2fe1d39":"markdown","8076b2ea":"markdown","5461dddd":"markdown","1ed0e494":"markdown","a7dab426":"markdown","406461f5":"markdown"},"source":{"f07a567f":"import numpy as np\nimport pandas as pd\nimport matplotlib.pyplot as plt\nimport seaborn as sns\nimport warnings\nfrom IPython.display import display\nimport os","498c1dfb":"warnings.filterwarnings('ignore') # ignore warnings.\n%config IPCompleter.greedy = True # autocomplete feature.\npd.options.display.max_rows = None # set maximum rows that can be displayed in notebook.\npd.options.display.max_columns = None # set maximum columns that can be displayed in notebook.\npd.options.display.precision = 2 # set the precision of floating point numbers.","b4d7d172":"df = pd.read_csv('..\/input\/Live.csv', encoding='utf-8')\ndf.drop_duplicates(inplace=True) # drop duplicates if any.\ndf.shape # num rows x num columns.","5b461f57":"miss_val = (df.isnull().sum()\/len(df)*100).sort_values(ascending=False)\nmiss_val[miss_val>0]","8dee45ab":"df.drop(labels=['Column1', 'Column2', 'Column3','Column4'], axis=1, inplace=True)","59a20330":"df.head()","3ad24e03":"df.drop('status_id', axis=1, inplace=True)","d44a819b":"df['status_type_isvideo'] = df['status_type'].map(lambda x:1 if(x=='video') else 0)\ndf.drop('status_type', axis=1, inplace=True)","3a330f80":"df['status_published'] = pd.to_datetime(df['status_published'])","a2c7c16d":"df['year'] = df['status_published'].dt.year\ndf['month'] = df['status_published'].dt.month\ndf['dayofweek'] = df['status_published'].dt.dayofweek # 0 is Monday, 7 is Sunday.\ndf['hour'] = df['status_published'].dt.hour","db34b85f":"reaction = ['num_reactions', 'num_comments', 'num_shares', 'num_likes', 'num_loves', 'num_wows', 'num_hahas',\n            'num_sads', 'num_angrys'] # reaction of users.","1b760103":"before2016 = df[df['year']<=2015]\nafter2016 = df[df['year']>2015]","8a894922":"before2016[reaction].describe()","abfa8070":"after2016[reaction].describe()","36472554":"before2016.groupby('status_type_isvideo')[reaction].mean()","8c3387dd":"sns.heatmap(before2016[reaction].corr(), cmap='coolwarm', annot=True)","38ce6584":"from sklearn.preprocessing import StandardScaler\n\nstandard_scaler = StandardScaler()\nbefore2016_s = before2016[reaction]\nbefore2016_s = standard_scaler.fit_transform(before2016_s) # s in before2016_s stands for scaled.","b655d8ee":"# Improting the PCA module.\n\nfrom sklearn.decomposition import PCA\npca = PCA(svd_solver='randomized', random_state=123)","38623ae1":"# Doing the PCA on the data.\npca.fit(before2016_s)","44d16278":"# Making the screeplot - plotting the cumulative variance against the number of components\n\nfig = plt.figure(figsize = (10,5))\n\nplt.plot(np.cumsum(pca.explained_variance_ratio_))\nplt.xlabel('number of components')\nplt.ylabel('cumulative explained variance')\n\nplt.show()","5d9d6cf3":"# what percentage of variance in data can be explained by first 2,3 and 4 principal components respectively?\n(pca.explained_variance_ratio_[0:2].sum().round(3),\npca.explained_variance_ratio_[0:3].sum().round(3),\npca.explained_variance_ratio_[0:4].sum().round(3))","faec7f8e":"# we'll use first 2 principal components to visualise feature importance.\n\nloadings = pd.DataFrame({'PC1':pca.components_[0],'PC2':pca.components_[1], 'Feature':reaction})\nloadings","d03610f4":"# we can visualize what the principal components seem to capture.\n\nfig = plt.figure(figsize = (6,6))\nplt.scatter(loadings.PC1, loadings.PC2)\nplt.xlabel('Principal Component 1')\nplt.ylabel('Principal Component 2')\nfor i, txt in enumerate(loadings.Feature):\n    plt.annotate(txt, (loadings.PC1[i],loadings.PC2[i]))\nplt.tight_layout()\nplt.show()","4db4f4a4":"before2016.groupby('year').sum()[reaction]","c8bfae97":"before2016.groupby('year').sum()[reaction].plot(figsize=(12,5))","4a1cd9fb":"before2016.groupby(['year', 'status_type_isvideo']).sum()[reaction]","3db7b904":"plt.figure(1)\nbefore2016[before2016['status_type_isvideo']==0].groupby('year').sum()[reaction].plot(\n    figsize=(10,5), title='photo content')\n\nplt.figure(2)\nbefore2016[before2016['status_type_isvideo']==1].groupby('year').sum()[reaction].plot(\n    figsize=(10,5), title='video content')","7aa9db2e":"plt.figure(1)\nbefore2016[before2016['status_type_isvideo']==0].groupby('month').sum()[reaction].plot(\n    figsize=(10,5), title='photo content')\n\nplt.figure(2)\nbefore2016[before2016['status_type_isvideo']==1].groupby('month').sum()[reaction].plot(\n    figsize=(10,5), title='video content')","180d855a":"plt.figure(1)\nbefore2016[before2016['status_type_isvideo']==0].groupby('dayofweek').sum()[reaction].plot(\n    figsize=(10,5), title='photo content')\n\nplt.figure(2)\nbefore2016[before2016['status_type_isvideo']==1].groupby('dayofweek').sum()[reaction].plot(\n    figsize=(10,5), title='video content')","88f188bc":"plt.figure(1)\nbefore2016[before2016['status_type_isvideo']==0].groupby('hour').sum()[reaction].plot(\n    figsize=(10,5), title='photo content')\n\nplt.figure(2)\nbefore2016[before2016['status_type_isvideo']==1].groupby('hour').sum()[reaction].plot(\n    figsize=(10,5), title='video content')","8ea733b4":"after2016.groupby('status_type_isvideo')[reaction].mean()","79c513e6":"sns.heatmap(after2016[reaction].corr(), cmap='coolwarm', annot=True)","64a8085e":"from sklearn.preprocessing import StandardScaler\n\nstandard_scaler = StandardScaler()\nafter2016_s = after2016[reaction]\nafter2016_s = standard_scaler.fit_transform(after2016_s) # s in before2016_s stands for scaled.","a7ab3fdd":"# Improting the PCA module.\n\nfrom sklearn.decomposition import PCA\npca = PCA(svd_solver='randomized', random_state=123)","ede21940":"# Doing the PCA on the data.\npca.fit(after2016_s)","7d43d4fc":"# Making the screeplot - plotting the cumulative variance against the number of components\n\nfig = plt.figure(figsize = (10,5))\n\nplt.plot(np.cumsum(pca.explained_variance_ratio_))\nplt.xlabel('number of components')\nplt.ylabel('cumulative explained variance')\n\nplt.show()","9fa9c249":"# what percentage of variance in data can be explained by first 2,3 and 4 principal components respectively?\n(pca.explained_variance_ratio_[0:2].sum().round(3),\npca.explained_variance_ratio_[0:3].sum().round(3),\npca.explained_variance_ratio_[0:4].sum().round(3))","209a1c39":"# we'll use first 2 principal components to visualise feature importance.\n\nloadings = pd.DataFrame({'PC1':pca.components_[0],'PC2':pca.components_[1], 'Feature':reaction})\nloadings","71ea3bf1":"# we can visualize what the principal components seem to capture.\n\nfig = plt.figure(figsize = (6,6))\nplt.scatter(loadings.PC1, loadings.PC2)\nplt.xlabel('Principal Component 1')\nplt.ylabel('Principal Component 2')\nfor i, txt in enumerate(loadings.Feature):\n    plt.annotate(txt, (loadings.PC1[i],loadings.PC2[i]))\nplt.tight_layout()\nplt.show()","d79c4f19":"after2016.groupby('year').sum()[reaction]","014495f1":"after2016.groupby('year').sum()[reaction].plot(figsize=(12,5))","04d471a0":"after2016.groupby(['year', 'status_type_isvideo']).sum()[reaction]","71dd8b26":"plt.figure(1)\nafter2016[after2016['status_type_isvideo']==0].groupby('year').sum()[reaction].plot(\n    figsize=(10,5), title='photo content')\n\nplt.figure(2)\nafter2016[after2016['status_type_isvideo']==1].groupby('year').sum()[reaction].plot(\n    figsize=(10,5), title='video content')","f8e0433d":"plt.figure(1)\nafter2016[after2016['status_type_isvideo']==0].groupby('month').sum()[reaction].plot(\n    figsize=(10,5), title='photo content')\n\nplt.figure(2)\nafter2016[after2016['status_type_isvideo']==1].groupby('month').sum()[reaction].plot(\n    figsize=(10,5), title='video content')","d32281a9":"plt.figure(1)\nafter2016[after2016['status_type_isvideo']==0].groupby('dayofweek').sum()[reaction].plot(\n    figsize=(10,5), title='photo content')\n\nplt.figure(2)\nafter2016[after2016['status_type_isvideo']==1].groupby('dayofweek').sum()[reaction].plot(\n    figsize=(10,5), title='video content')","8b7cffe2":"plt.figure(1)\nafter2016[after2016['status_type_isvideo']==0].groupby('hour').sum()[reaction].plot(\n    figsize=(10,5), title='photo content')\n\nplt.figure(2)\nafter2016[after2016['status_type_isvideo']==1].groupby('hour').sum()[reaction].plot(\n    figsize=(10,5), title='video content')","506ca336":"Let's compare reactions before and after facebook live.","a62b725e":"Over the years, before 2016 and for photo content, reactions and likes have seen steady increase.","8c1b46e7":"This can be observed again, photo content has most likes, video content has most comments and shares.","03ee5af2":"## Data Preparation.","1204fcdf":"Since Facebook Live wwas launched in August 2015, Let's split the data on Year, before and after 2016.","e5f1bb05":"ID column is no longer required.","f5e58fbe":"<hr>","f6f579fc":"Form late night to morning, 5-8 am, the likes are maximum for photo content.\n<br>For video content, 1 am late night and 8 am in the morning sees maximum peaks in shares and comments. It is fair to assume, thats when the live selling happens. ","3b93fa8c":"The reaction (hahas, comments, shares) are greater for the video content. They are thus more engaging than photos.","91f8ed9c":"## Introduction.","717e8dca":"Likes, reactions and wows are similar and important as they are clusterd together and their loadings arer high in both the principal components. See top right corner of the graph.<br>\nLoves, shares have high loadings on first principal component, alongwith likes, reactions.<br>\nHahas, angrys, and sads sort of weigh low on both the principal components.<br>\nAs, we had established earlier that more shares and comments are the indicators of video content, thus it seems that the first principal component captures the video theme and the second principal component captures the photo theme.","5dccfb4d":"Let's analyse data after 2016. We'll try to visualise the data using PCA.","830e831d":"**Some Notebook Settings.**","7d6b2142":"Shares and Comments have good correlation.","9949b6b2":"## EDA.","7aef2c69":"**Read Data.**","93659eda":"Remove columns with missing values.","af5fd679":"The num_wows, hahas, angry, sad, loves are all 0 on both the principal components as they aren't available features before 2016. The first principal componet shows that likes, reactions are more important features, then comments and then shares.\nThe second principal component shows that num_shares are important and then comments.\n<br>It seems that first principal component captures the non-video theme. And, second principal component capture the video theme.","b8ba3041":"**Import Libraries.**","0c386338":"<hr>","ca5f5980":"<hr>","50ebf677":"Summers see maximum likes for photo content. Wavy pattern that was earlier observed for year before 2016 is not present here. Lowest likes are in the months of July, September.<br>\nMay,September and December see peaks in comments for video contentlier observed for year less than is present here as well.","2b422af4":"Let's analyse data before 2016. We'll try to visualise the data using PCA.","1e9aefc2":"`status_published` has a string data type. Let's convert it to datetime.","c2e06a42":"Wednesdays and Sundays see maximum amount of likes for photo content, although the likes seem fairly constant throught th week.<br>\nSaturdays see the maximum amount of comments, and similar to trend observed in photo content, video content also sees constant trend throught the week in terms of all reactions.","dc70120c":"Let's derive year, month, weekday, hour from the `status_published` column.","2e0a414a":"Let's take a look at the data.","4f527d8b":"Let's convert `status_type` to a 0-1 categorical column, where 0 is photo and 1 is video.","66fc7408":"* Facebook Live has recently become a popular direct selling medium, notably in East and South-East Asia.\n* This feature offers small, self-employed sellers unseen level of consumer reach and involvement and is reinventing direct selling.\n* The data was extracted from Thai Facebook sellers selling fashion and beauty, other popular products online.","2faec60d":"<hr>","42027777":"<hr>","45369392":"## Preliminary Steps.","ab183964":"Likes and reactions increased for photo content from 2014 to 2015.<br>\nAnd for video content, they were high in the year of 2014.","89daaca4":"<hr>","6e0ed51c":"shares, comments and loves have good correlation.<br>\nreactions, loves, shares and likes have good correlation as well.","b18c014d":"Both for photo and video content, likes and reactions seem to show a wavy pattern.<br>\nAlthough trend is decreasing for video content, and for photo, it seems winters also recieve less likes and reactions.","21acb8af":"Check for missing values.","f2fe1d39":"The reactions and likes are almost double if content is video. Comments and shares are also higher for video content, though only slightly.","8076b2ea":"Fridays have most likes for photo content.<br>\nAnd, Sundays and Saturdays have most likes for video content.","5461dddd":"For photo content, 10 pm peaks in terms of likes, and night time 1 am to 4-5 am also sees maximum likes.<br>\nFor video content, 12 pm to 5 am sees maximum amount of likes.","1ed0e494":"<hr>","a7dab426":"Over the years, all the reactions have seen increase in reactions, with the most prominent being comments. Before 2016, it used to be likes and num_reactions.","406461f5":"<hr>"}}