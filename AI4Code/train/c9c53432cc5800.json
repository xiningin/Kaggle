{"cell_type":{"6fb50c05":"code","be6d50af":"code","aae1dcaa":"code","aaef8226":"code","ca2910df":"code","301c707e":"code","3f59ee38":"code","e7916f5a":"code","4ad16a36":"code","8472d2fe":"code","58c2b90f":"code","e70186e6":"code","207ffd40":"code","11902ce1":"code","5b94a74b":"code","05013d05":"code","7d4ff413":"code","cb79795d":"code","3dfeb9d0":"code","9d5e5a72":"code","7309a74e":"code","c68cd95b":"code","419d20cc":"code","5dc05e23":"code","a1982c39":"code","a718f1bf":"code","a3a95c8c":"code","a38ec702":"code","ffd35433":"code","f59397c3":"code","58969d62":"code","d0c78eef":"code","5029592d":"code","8164a058":"code","6987c8e0":"code","96bcf7b5":"code","aa441495":"code","c56c3514":"code","627c59d2":"code","3cccdcdc":"markdown","720ccf3c":"markdown"},"source":{"6fb50c05":"# This Python 3 environment comes with many helpful analytics libraries installed\n# It is defined by the kaggle\/python Docker image: https:\/\/github.com\/kaggle\/docker-python\n# For example, here's several helpful packages to load\n\nimport numpy as np # linear algebra\nimport pandas as pd # data processing, CSV file I\/O (e.g. pd.read_csv)\n\n# Input data files are available in the read-only \"..\/input\/\" directory\n# For example, running this (by clicking run or pressing Shift+Enter) will list all files under the input directory\n\nimport os\nfor dirname, _, filenames in os.walk('\/kaggle\/input'):\n    for filename in filenames:\n        print(os.path.join(dirname, filename))\n\n# You can write up to 20GB to the current directory (\/kaggle\/working\/) that gets preserved as output when you create a version using \"Save & Run All\" \n# You can also write temporary files to \/kaggle\/temp\/, but they won't be saved outside of the current session\n\n\nimport matplotlib.pyplot as plt\nimport seaborn as sns\nimport missingno","be6d50af":"df_train = pd.read_csv('..\/input\/hr-analytics-job-change-of-data-scientists\/aug_train.csv')\ndf_test = pd.read_csv('..\/input\/hr-analytics-job-change-of-data-scientists\/aug_test.csv')","aae1dcaa":"df_train.head()","aaef8226":"df_test['target'] = -1 #remeber that we have to drop this column later\n\ndf_pre = pd.concat([df_train, df_test], axis = 0).reset_index(drop = True)","ca2910df":"df_pre.info()","301c707e":"df_pre.columns","3f59ee38":"from sklearn.preprocessing import LabelEncoder","e7916f5a":"lbc=LabelEncoder()","4ad16a36":"df_pre['city']=lbc.fit_transform(df_pre['city'])","8472d2fe":"df_pre.head()","58c2b90f":"df_lb=df_pre.copy()","e70186e6":"df_lb","207ffd40":"# Mapping ordinal categories\ngender_map={'Male':1 ,\n            'Female':2 ,\n            'Other':0\n}\n\nrelevent_experience_map = {\n    'Has relevent experience':  1,\n    'No relevent experience':    0\n}\n\nenrolled_university_map = {\n    'no_enrollment'   :  0,\n    'Full time course':    1, \n    'Part time course':    2 \n}\n    \neducation_level_map = {\n    'Primary School' :    0,\n    'Graduate'       :    2,\n    'Masters'        :    3, \n    'High School'    :    1, \n    'Phd'            :    4\n    } \n    \nmajor_map ={ \n    'STEM'                   :    0,\n    'Business Degree'        :    1, \n    'Arts'                   :    2, \n    'Humanities'             :    3, \n    'No Major'               :    4, \n    'Other'                  :    5 \n}\n    \nexperience_map = {\n    '<1'      :    0,\n    '1'       :    1, \n    '2'       :    2, \n    '3'       :    3, \n    '4'       :    4, \n    '5'       :    5,\n    '6'       :    6,\n    '7'       :    7,\n    '8'       :    8, \n    '9'       :    9, \n    '10'      :    10, \n    '11'      :    11,\n    '12'      :    12,\n    '13'      :    13, \n    '14'      :    14, \n    '15'      :    15, \n    '16'      :    16,\n    '17'      :    17,\n    '18'      :    18,\n    '19'      :    19, \n    '20'      :    20, \n    '>20'     :    21\n} \n    \ncompany_type_map = {\n    'Pvt Ltd'               :    0,\n    'Funded Startup'        :    1, \n    'Early Stage Startup'   :    2, \n    'Other'                 :    3, \n    'Public Sector'         :    4, \n    'NGO'                   :    5\n}\n\ncompany_size_map = {\n    '<10'          :    0,\n    '10\/49'        :    1, \n    '100-500'      :    2, \n    '1000-4999'    :    3, \n    '10000+'       :    4, \n    '50-99'        :    5, \n    '500-999'      :    6, \n    '5000-9999'    :    7\n}\n    \nlast_new_job_map = {\n    'never'        :    0,\n    '1'            :    1, \n    '2'            :    2, \n    '3'            :    3, \n    '4'            :    4, \n    '>4'           :    5\n}","11902ce1":"df_lb.loc[:,'relevent_experience']=df_lb['relevent_experience'].map(relevent_experience_map)\ndf_lb.loc[:,'enrolled_university']=df_lb['enrolled_university'].map(enrolled_university_map)\ndf_lb.loc[:,'education_level']=df_lb['education_level'].map(education_level_map)\ndf_lb.loc[:,'major_discipline']=df_lb['major_discipline'].map(major_map)\ndf_lb.loc[:,'company_size']=df_lb['company_size'].map(company_size_map)\ndf_lb.loc[:,'company_type']=df_lb['company_type'].map(company_type_map)\ndf_lb.loc[:,'last_new_job']=df_lb['last_new_job'].map(last_new_job_map)\ndf_lb.loc[:,'experience']=df_lb['experience'].map(experience_map)\ndf_lb.loc[:,'gender']=df_lb['gender'].map(gender_map)","5b94a74b":"df_lb.info()","05013d05":"missingno.bar(df_lb,color='dodgerblue',sort='ascending',figsize=(10,5),fontsize=12)","7d4ff413":"df_lb1=df_lb.copy()","cb79795d":"## K means clustering to impute missing values\n\nfrom sklearn.impute import KNNImputer\nimport sklearn.metrics as metrics","3dfeb9d0":"knn_imputer=KNNImputer(n_neighbors=3)","9d5e5a72":"missing_cols = df_lb1.columns[df_lb1.isna().any()].tolist()\nmissing_cols","7309a74e":"#dataframe having features with missing values\ndf_missing = df_lb1[['enrollee_id'] + missing_cols]\n\n#dataframe having features without missing values\ndf_non_missing = df_lb1.drop(missing_cols, axis = 1)","c68cd95b":"df_non_missing","419d20cc":"df_lb1.info()","5dc05e23":"X=knn_imputer.fit_transform(df_missing)","a1982c39":"df_missing=pd.DataFrame(X,columns=df_missing.columns)\ndf_missing.head()","a718f1bf":"df_lb2=pd.merge(df_missing,df_non_missing,on='enrollee_id')","a3a95c8c":"test=df_lb2[df_lb2['target']==-1].reset_index(drop=True)\ntrain=df_lb2[df_lb2['target']!=-1].reset_index(drop=True)","a38ec702":"X=train.drop(['enrollee_id','target'],axis=1)\ny=train['target']\ntest=test.drop('target',axis=1)","ffd35433":"from sklearn.tree import DecisionTreeClassifier\nfrom sklearn.model_selection import train_test_split\nfrom sklearn.model_selection import GridSearchCV","f59397c3":"train_X,test_X,train_y,test_y=train_test_split(X,y,test_size=0.2,random_state=446)","58969d62":"model=DecisionTreeClassifier(max_depth= 7,\n max_leaf_nodes= 11)# Parameters by Grid search hyper parameters look below for the best parameters\n\nmodel.fit(train_X,train_y)","d0c78eef":"# Hyper Parameters\n\nparam_grid={ 'max_depth':[2,3,4,5,6,7,8,9,10,11,12],\n           'max_leaf_nodes':[2,3,4,5,6,7,8,9,10,11,12],\n           }\n","5029592d":"model=GridSearchCV(DecisionTreeClassifier(),param_grid,cv=5,scoring='f1_weighted')\nmodel.fit(train_X,train_y)","8164a058":"model.best_params_","6987c8e0":"Train_AUC_score=metrics.roc_auc_score(train_y,pd.DataFrame(model.predict_proba(train_X))[1])\nTest_AUC_score=metrics.roc_auc_score(test_y,pd.DataFrame(model.predict_proba(test_X))[1])","96bcf7b5":"print(f\"Train AUC Score {Train_AUC_score}\")\nprint(f\"Test AUC Score {Test_AUC_score}\")","aa441495":"# Plot AUC CUrve\n\ndef plot_auc_curve(fpr, tpr, auc):\n    plt.figure(figsize = (16,6))\n    plt.plot(fpr,tpr,'b+',linestyle = '-')\n    plt.fill_between(fpr, tpr, alpha = 0.5)\n    plt.ylabel('True Postive Rate')\n    plt.xlabel('False Postive Rate')\n    plt.title(f'ROC Curve Having AUC = {Test_AUC_score}')","c56c3514":"fpr,tpr,_=metrics.roc_curve(test_y,pd.DataFrame(model.predict_proba(test_X))[1])","627c59d2":"plot_auc_curve(fpr, tpr, Test_AUC_score)","3cccdcdc":" Modeling with Decision Tree Classifier\n\n","720ccf3c":"\nk-Nearest Neighbour Imputation\n"}}