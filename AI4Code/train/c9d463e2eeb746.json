{"cell_type":{"2b3c48b2":"code","e29ccb5c":"code","b7dab59e":"code","241ed171":"code","4caa6215":"code","fc6fc6d7":"code","8f0a9bc7":"code","58cbc3f0":"code","4a57a80f":"code","7324c995":"code","bf989c2c":"code","86b091fe":"code","9950d462":"code","65495ce5":"code","08e25382":"code","a7d32761":"code","60cd0478":"code","804929a8":"code","405cf6c2":"code","fdfcb00e":"code","61b1fa2b":"code","6e8f37f9":"code","97765380":"code","38f4ed45":"code","4dade752":"code","2a3e2b06":"code","aee33cbe":"code","d7273adf":"code","332d7e55":"code","47d97a5d":"code","74048ff4":"code","a15f6921":"code","8190e755":"code","ec626e8c":"code","05c9f5cd":"code","d2aa7363":"code","0b972d23":"code","cef4ea17":"code","ec2fc260":"code","13e2ef2e":"code","ff12745e":"code","2645d38e":"code","2bdbcb02":"code","3093ae7c":"code","410a0544":"code","463b8934":"code","70d219b6":"code","ca9de233":"code","0e09b999":"code","e6fdbdb1":"markdown","a8abf994":"markdown","5ca39a5f":"markdown","f402d109":"markdown","82d9cf21":"markdown","4f999d4d":"markdown","476200b5":"markdown","c22471ce":"markdown","3d5704f7":"markdown","af8a6401":"markdown","f405b206":"markdown","990fd5e5":"markdown","cacab282":"markdown","53ea7c18":"markdown","f111defa":"markdown","f2a2f0fe":"markdown","297c425b":"markdown"},"source":{"2b3c48b2":"import numpy as np \nimport pandas as pd \nimport seaborn as sns\nimport matplotlib.pyplot as plt\n%matplotlib inline\nimport cufflinks as cf\n","e29ccb5c":"train = pd.read_csv('..\/input\/av-healthcare-analytics-ii\/healthcare\/train_data.csv')\ntrain.head()","b7dab59e":"train.info()\n#rows : 318438\n#columns : 18","241ed171":"sns.heatmap(train.isnull(),yticklabels=False,cbar=False,cmap='viridis')\n#There are null values in city_code_patient column and its better to drop that column to get accurate results.","4caa6215":"train['Ward_Type'].unique()","fc6fc6d7":"def change(ch):\n    if(ch=='R'):\n        return 0\n    elif(ch=='S'):\n        return 1\n    elif(ch=='Q'):\n        return 2\n    elif(ch=='P'):\n        return 3\n    elif(ch=='T'):\n        return 4\n    elif(ch=='U'):\n        return 5","8f0a9bc7":"train['Ward_Type']=train['Ward_Type'].apply(change)\n#Only numerical data will be accpeted by machine learning model","58cbc3f0":"#Drop the columns having null value\ntrain.drop('City_Code_Patient',axis=1,inplace=True)","4a57a80f":"sns.heatmap(train.isnull(),yticklabels=False,cbar=False,cmap='viridis')\n#now no null values","7324c995":"train.groupby('patientid')['Bed Grade'].mean().sort_values(ascending=False).head()","bf989c2c":"train.groupby('Bed Grade')['Bed Grade'].count().sort_values(ascending=False).head()","86b091fe":"sns.countplot(train['Type of Admission'],hue=train['Department'],palette='rainbow')","9950d462":"train['Age'].hist(bins=20,figsize=(10,4))","65495ce5":"def change1(ch):\n    if(ch=='Extreme'):\n        return 0\n    elif(ch=='Minor'):\n        return 1\n    elif(ch=='Moderate'):\n        return 2","08e25382":"train['Severity of Illness'] = train['Severity of Illness'].apply(change1)","a7d32761":"sns.countplot(train['Severity of Illness'],hue=train['Department'],palette='rainbow')","60cd0478":"train['Admission_Deposit'].hist(bins=100,figsize=(10,4))","804929a8":"train.groupby('Severity of Illness')['Admission_Deposit'].mean().sort_values(ascending=False)","405cf6c2":"train['Stay'].hist(bins=20,figsize=(10,4))","fdfcb00e":"train.drop(['Ward_Facility_Code','Hospital_region_code','Hospital_type_code'],axis=1,inplace=True)","61b1fa2b":"train.drop('Age',inplace=True,axis=1)","6e8f37f9":"def change3(ch):\n    if ch=='radiotherapy':\n        return 0\n    elif ch== 'anesthesia':\n        return 1\n    elif ch=='gynecology':\n        return 2\n    elif ch== 'TB & Chest disease':\n        return 3\n    elif ch== 'surgery':\n        return 4","97765380":"train['Department'] = train['Department'].apply(change3)","38f4ed45":"def change4(ch):\n    if ch=='Emergency':\n        return 0\n    elif ch=='Trauma':\n        return 1\n    elif ch =='Urgent':\n        return 2","4dade752":"train['Type of Admission'] = train['Type of Admission'].apply(change4)","2a3e2b06":"#Data type of stay is converted to numbers[0-9]\ntrain['Stay']=train.Stay.astype(\"category\").cat.codes\n#number is assinged(ascending)","aee33cbe":"train['Stay'].unique()\n#Totally ten different categories","d7273adf":"from sklearn.model_selection import train_test_split","332d7e55":"train.drop(['City_Code_Hospital','Visitors with Patient'],inplace=True,axis=1)","47d97a5d":"train.drop('Bed Grade',inplace=True,axis=1)","74048ff4":"#Train data and test data(to predict number of stay)\nX = train.drop('Stay',axis=1,inplace=False)\nY = train['Stay']\n","a15f6921":"X_train,X_test,Y_train,Y_test=train_test_split(X,Y,test_size=0.3,random_state=42)","8190e755":"from sklearn.neighbors import KNeighborsClassifier","ec626e8c":"kn = KNeighborsClassifier(n_neighbors=2)","05c9f5cd":"kn.fit(X_train,Y_train)","d2aa7363":"print(kn.score(X_train,Y_train)*100)","0b972d23":"test = pd.read_csv('..\/input\/av-healthcare-analytics-ii\/healthcare\/test_data.csv')","cef4ea17":"test","ec2fc260":"sns.heatmap(test.isnull(),yticklabels=False,cbar=False,cmap='viridis')\n#city_code_patient contains null values so we have to remove it","13e2ef2e":"test.drop(['Hospital_type_code','City_Code_Hospital','Hospital_region_code','Ward_Facility_Code','Bed Grade','City_Code_Patient','Visitors with Patient','Age'],inplace=True,axis=1)","ff12745e":"sns.heatmap(test.isnull(),yticklabels=False,cbar=False,cmap='viridis')","2645d38e":"test['Ward_Type']=test['Ward_Type'].apply(change)\ntest['Severity of Illness'] = test['Severity of Illness'].apply(change1)\ntest['Department'] = test['Department'].apply(change3)\ntest['Type of Admission'] = test['Type of Admission'].apply(change4)","2bdbcb02":"test\n#All columns are numeric and it is ready to be fed into algorithm.","3093ae7c":"#Prediction of values for the stay\npredict1 = kn.predict(test)","410a0544":"test['predict'] = predict1","463b8934":"key_value={\n0:'0-10',\n1:'11-20',\n2:'21-30',\n3:'31-40',\n4:'41-50',\n5:'51-60',\n6:'61-70',\n7:'71-80',\n8:'81-90',\n8:'91-100'\n}\ntest['value'] = test.predict.replace(key_value)","70d219b6":"values_arr = np.array(test['case_id'])\npredict = np.array(test['value'])","ca9de233":"#Final DataFrame\ndf = pd.DataFrame(data=[values_arr,predict],index=['case_id','Stay'])","0e09b999":"df","e6fdbdb1":"Many patients stayed for about 21-30 days\n.There were only few patients who stayed more than 100 days","a8abf994":"Test data is processed so that unnecessary columns are removed and also null values are dropped which might affect accuracy.","5ca39a5f":"Even though there were 4 rated beds a lot of them voted 2 rated money(this could be a possible reason of unemployment problem).","f402d109":"DATA CLEANING","82d9cf21":"The top most average rating were of 4 out of 5.","4f999d4d":"Infomation of attributes in the Dataset\n0   case_id\t                 Case_ID registered in Hospital\n1\tHospital_code\t         Unique code for the Hospital\n2\tHospital_type_code\t     Unique code for the type of Hospital\n3\tCity_Code_Hospital\t     City Code of the Hospital\n4\tHospital_region_code     Region Code of the Hospital\n5\tAvailable Extra Rooms in Hospital\tNumber of Extra rooms available in the Hospital\n6\tDepartment\t             Department overlooking the case\n7\tWard_Type\t             Code for the Ward type\n8\tWard_Facility_Code\t     Code for the Ward Facility\n9\tBed Grade\t             Condition of Bed in the Ward\n10\tpatientid\t             Unique Patient Id\n11\tCity_Code_Patient\t     City Code for the patient\n12\tType of Admission\t     Admission Type registered by the Hospital\n13\tSeverity of Illness\t     Severity of the illness recorded at the time o...\n14\tVisitors with Patient\t Number of Visitors with the patient\n15\tAge\t                     Age of the patient\n16\tAdmission_Deposit\t     Deposit at the Admission Time\n17\tStay\t                 Stay Days by the patient","476200b5":"Drop comments if any!!","c22471ce":"Accuracy of train data is about : 61 percentage","3d5704f7":"Most of the patients who were admitted for either in the emergency or trauma or Urgent catagory had an appointment in gynecology department\n.There were very few admissions for surgery.","af8a6401":"THE FINAL DATAFRAME ,which consists of case_id and the Length of Stay of each of the patients.\n.This model has overall accuracy of 61%.","f405b206":"TESTING THE TRAINED MODEL FOR TEST DATA","990fd5e5":"Money charged based on severity of illness\n,1-Denotes Minor case\n,2-Denotes Moderate\n,3-Denotes Extreme\n,For minor cases average deposit is higher compared to other types of illness.\n\n","cacab282":"DATA VISUALIZATION","53ea7c18":"PREDICTION OF STAY OF PATIENTS IN THE HOSPITAL","f111defa":"It seems to be a normalized curve and deposit amount were charged between 2000 and 8000\n.Only few of them had to deposit amout of 100000","f2a2f0fe":"Cluster of number of patients could be seen in the interval between 31-40\n.There were fewer(outliers)patients admitted of age 91-100.\n","297c425b":"There were good number of serious cases in radiotherapy department\n.Eventhough there were more number of admissions in gynec department most of them were moderate and only a few were of extreme and minor cases."}}