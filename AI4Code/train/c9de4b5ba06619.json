{"cell_type":{"97535357":"code","cf3d2a20":"code","5d11ca22":"code","be6955a5":"code","58671043":"code","33c9cdf3":"code","8b7bbe95":"code","06dc2654":"code","73409359":"code","e5358662":"code","4b8b7402":"code","b0781d8e":"code","0d9f62b4":"code","867d277a":"code","167cd108":"code","e1bab599":"code","b6c23ae1":"code","38e54868":"code","dc59e25a":"code","64848c21":"code","3f1c2ee0":"code","cadb280b":"code","d3a85db4":"code","309ab173":"code","9cd7c296":"code","b9f3904b":"code","1a17d81c":"code","625970d8":"code","7beb70da":"code","89cd3a13":"code","9e525954":"code","55fb6756":"code","7ed696ee":"code","be8e4a8f":"code","0d0b63d6":"code","b161e936":"code","b53807d4":"code","e7ec43d3":"code","64457e5e":"code","7ee829d5":"code","2bb003e0":"code","e0b8158e":"code","850a70d1":"code","06e27cd9":"code","44e6ad70":"code","bec717d0":"code","7fd966a6":"markdown","1238b023":"markdown","8cd9c541":"markdown","5ab0d45b":"markdown","f0353ba2":"markdown","10501386":"markdown","901fac6c":"markdown"},"source":{"97535357":"import numpy as np \nimport pandas as pd\nimport seaborn as sns\nimport matplotlib.pyplot as plt\nimport missingno  \nfrom sklearn import preprocessing   \nimport matplotlib.pyplot as plt\nimport re\n\nfrom sklearn import preprocessing   \nimport matplotlib.pyplot as plt\nimport re    \nfrom sklearn.preprocessing import LabelEncoder\nfrom sklearn.preprocessing import StandardScaler\nfrom sklearn.model_selection import train_test_split\nfrom sklearn.naive_bayes import GaussianNB\n\nfrom sklearn.model_selection import train_test_split, GridSearchCV, cross_val_score\nfrom sklearn.metrics import confusion_matrix, accuracy_score, classification_report\nfrom sklearn.metrics import roc_auc_score, roc_curve, recall_score, f1_score, precision_score\nfrom sklearn.naive_bayes import GaussianNB\n\nfrom sklearn.neighbors import KNeighborsClassifier\nfrom sklearn.tree import DecisionTreeClassifier\nfrom warnings import filterwarnings\nfrom sklearn import ensemble\nfrom sklearn.metrics import confusion_matrix as cm","cf3d2a20":"df = pd.read_csv(\"..\/input\/asdfgh\/sozlesme_bedel_2 (1).csv\")","5d11ca22":"df.head(5)","be6955a5":"df.shape","58671043":"#df[df[\"is Gerceklesen Sure (Gun)\"]=='#VALUE'].shape","33c9cdf3":"df.info()","8b7bbe95":"#df[\"Sozlesme bedeli USD\"].astype('double')","06dc2654":"#df[\"Sozlesme bedeli USD\"] = df[\"Sozlesme bedeli USD\"] =df[\"Sozlesme bedeli USD\"].astype('')\n#df[\"idare ili\"] = df[\"idare ili\"].astype('int32')","73409359":"df.info()","e5358662":"df.describe().T","4b8b7402":"df[df[\"Toplam teklif sayisi\"]==0].shape","b0781d8e":"df = df.replace({'\u0130hale usul\u00fc Kat ':{'1.0':1}})","0d9f62b4":"df = df.replace({'\u0130hale usul\u00fc Kat ':{'2.0':2}})","867d277a":"df[\"idare ili\"].unique()","167cd108":"df[df[\"Gecerli teklif sayisi\"]==0].shape","e1bab599":"df.isna().sum()","b6c23ae1":"df.isna().sum() \/ df.shape[0] *100","38e54868":"df[\"\u0130hale usul\u00fc Kat\"].unique()","dc59e25a":"df[\"\u0130hale usul\u00fc Kat\"].value_counts()","64848c21":"df1 = df.dropna() # Silme fonksiyonu\nprint(df1)","3f1c2ee0":"df=df1","cadb280b":"df.shape","d3a85db4":"df.isna().sum()\n","309ab173":"df[\"idare ili\"] = df[\"idare ili\"].astype('int32')","9cd7c296":"df[\"\u0130hale usul\u00fc Kat\"] = df[\"\u0130hale usul\u00fc Kat\"].astype('int32')","b9f3904b":"df[\"idare ili\"].unique()","1a17d81c":"df[\"Sozlesme bedeli USD\"] = df[\"Sozlesme bedeli USD\"].astype('int64')","625970d8":"df.info()","7beb70da":"#df[\"is Gerceklesen Sure (Gun)\"].unique()","89cd3a13":"#df[(df[\"is Gerceklesen Sure (Gun)\"] == '#VALUE!')].shape","9e525954":"df.corr()","55fb6756":"plt.figure(figsize=(25,35))\nsns.heatmap(df.corr(),annot=True, cmap=\"coolwarm\")\nplt.plot()","7ed696ee":"corr=df.corr().abs()\nn_most_correlated=12\nmost_correlated_feature=corr['Sozlesme bedeli USD'].sort_values(ascending=False)[:n_most_correlated].drop('Sozlesme bedeli USD')\n\nmost_correlated_feature_name=most_correlated_feature.index.values","be8e4a8f":"f, ax = plt.subplots(figsize=(15, 6))\nplt.xticks(rotation='90')\nsns.barplot(x=most_correlated_feature_name, y=most_correlated_feature)\nplt.title(\"Sozlesme bedeli USD ile en fazla korelasyona sahip \u00f6zellikler\")","0d0b63d6":"def fill_missing_values(fill_data, mystaretegies):\n    \n    for column, strategy in mystaretegies.items():\n        if strategy=='None':\n            fill_data[column]=fill_data[column].fillna('None')\n        elif strategy=='Zero':\n            fill_data[column]=fill_data[column].fillna(0)\n        elif strategy=='Mode':\n            fill_data[column]=fill_data[column].fillna(fill_data[column].mode()[0])   \n        elif strategy=='LotFrontage':\n            #temp=fill_data.groupby(\"Neighborhood\")\n            fill_data[column]=fill_data.groupby(\"Neighborhood\")[\"LotFrontage\"].transform(lambda x: x.fillna(x.median()))\n        elif strategy=='Drop':\n            fill_data=fill_data.drop([column],axis=1)\n        elif strategy=='Functional':\n            fill_data[column]=fill_data[column].fillna('Typ')\n    \n    return fill_data","b161e936":"datasets_no_missing_dummies=pd.get_dummies(df)\nprint(datasets_no_missing_dummies.shape)","b53807d4":"n=5\n#En \u00f6nemli \u00f6zellikler al\u0131n\u0131yor\nn_most_important=df.index.values[:n]","e7ec43d3":"from sklearn.preprocessing import MinMaxScaler\nscaler = MinMaxScaler()\n#en \u00f6nemli \u00f6zellikler \u00f6l\u00e7eklendirilmesi i\u00e7in e\u011fitiliyot\nscaler.fit(datasets_no_missing_dummies[n_most_important])\n\n#En \u00f6nemli \u00f6zellikler \u00f6l\u00e7eklendiriliyor\ndatasets_no_missing_dummies_scaled=scaler.transform(datasets_no_missing_dummies[n_most_important])","64457e5e":"#E\u011fitim veri seti\npreprocessed_train = datasets_no_missing_dummies_scaled[:ntrain]\n\n#Test veri seti\npreprocessed_test = datasets_no_missing_dummies_scaled[ntrain:]\n\n#preprocessed_train.head(10)","7ee829d5":"#Validation function\nn_folds = 5\n\ndef rmsle_cv(model):\n    kf = KFold(n_folds, shuffle=True, random_state=42).get_n_splits(preprocessed_train)\n    rmse= np.sqrt(-cross_val_score(model, preprocessed_train, y_train, scoring=\"neg_mean_squared_error\", cv = kf))\n    return(rmse)","2bb003e0":"model_xgb = xgb.XGBRegressor(colsample_bytree=0.4603, gamma=0.0468, \n                             learning_rate=0.05, max_depth=3, \n                             min_child_weight=1.7817, n_estimators=2200,\n                             reg_alpha=0.4640, reg_lambda=0.8571,\n                             subsample=0.5213, silent=1,\n                             random_state =7, nthread = -1)","e0b8158e":"model_lgb = lgb.LGBMRegressor(objective='regression',num_leaves=5,\n                              learning_rate=0.05, n_estimators=720,\n                              max_bin = 55, bagging_fraction = 0.8,\n                              bagging_freq = 5, feature_fraction = 0.2319,\n                              feature_fraction_seed=9, bagging_seed=9,\n                              min_data_in_leaf =6, min_sum_hessian_in_leaf = 11)","850a70d1":"score = rmsle_cv(model_lgb)\nprint(\"LGMRboost score: {:.4f} ({:.4f})\\n\".format(score.mean(), score.std()))","06e27cd9":"score = rmsle_cv(model_xgb)\nprint(\"XGBRboost score: {:.4f} ({:.4f})\\n\".format(score.mean(), score.std()))","44e6ad70":"def rmsle(y, y_pred):\n    return np.sqrt(mean_squared_error(y, y_pred))","bec717d0":"model_xgb.fit(preprocessed_train, y_train)\nxgb_train_pred = model_xgb.predict(preprocessed_train)\nxgb_pred = model_xgb.predict(preprocessed_test)\nprint(rmsle(y_train, xgb_train_pred))","7fd966a6":"ger\u00e7ekle\u015fen s\u00fcre g\u00fcn --> object \u015fekline (???)","1238b023":"# ML","8cd9c541":"# S\u00f6zle\u015fme Bedeline g\u00f6re korelasyon","5ab0d45b":"dtype-> object ","f0353ba2":"sadece a\u00e7\u0131k ihale usul\u00fc 2 di\u011fer iki secenek 1 olarak girilmi\u015f. bos alanlar\u0131 doldurabilme imkna\u0131 olmad\u0131g\u0131 i\u00e7in null de\u011ferleri siliyorum.","10501386":"Toplam teklif sayisi, Gecerli teklif sayisi min de\u011ferlerde s\u0131f\u0131r var. ihalenin ge\u00e7erlili\u011fi i\u00e7in min say\u0131 3 fakat doldurma islemi yapsam da ML i\u00e7in bir sey ifade etmeyecek...","901fac6c":"110 sat\u0131r da 'VALUE' de\u011ferini al\u0131yoruz."}}