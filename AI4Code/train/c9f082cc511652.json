{"cell_type":{"8d747027":"code","7f26dd9d":"code","410f3b3a":"code","b3b795ff":"code","cce73cf5":"code","acc9b8a3":"code","aab090b5":"code","99b948e4":"code","a89f6c3f":"code","a0b3e973":"code","f3d907cf":"code","808f9f4f":"code","e0cdfb65":"code","ea1d5ffc":"code","02f1a364":"code","2e0d4485":"code","c3bf6dc2":"code","bd479ac5":"markdown","b4c7fffc":"markdown","07cdbc64":"markdown","a9e8ecf3":"markdown","cc2d8aee":"markdown","f808139e":"markdown","f19f40c6":"markdown","ef690b97":"markdown","b8731958":"markdown","465f3991":"markdown","d79bef54":"markdown","17a97f92":"markdown","e933781a":"markdown","c41b4921":"markdown","ccbc4136":"markdown","e8b98a2c":"markdown"},"source":{"8d747027":"import numpy as np\nimport pandas as pd\nimport matplotlib.pyplot as plt\nimport plotly.plotly as py\nimport plotly.graph_objs as go\nfrom plotly.offline import init_notebook_mode, iplot\ninit_notebook_mode()\nimport seaborn as sns\n%matplotlib inline","7f26dd9d":"df = pd.read_csv('..\/input\/BlackFriday.csv')\ndf.head()","410f3b3a":"users = df[['User_ID', 'Gender', 'Age', 'Occupation', 'City_Category', 'Stay_In_Current_City_Years', 'Marital_Status']].copy()","b3b795ff":"users = users.drop_duplicates().reset_index(drop=True)\nusers['Purchase'] = pd.DataFrame(df.groupby(by= 'User_ID')['Purchase'].sum()).reset_index(drop=True)\nusers.head()","cce73cf5":"fig, (ax1, ax2) = plt.subplots(1, 2, figsize = (11, 6))\n\nax1.pie(users['Gender'].value_counts(), autopct='%1.1f%%')\nax1.set_title('Number males and females')\n\nax2.pie(users.groupby('Gender')['Purchase'].sum().sort_values(ascending = False), autopct='%1.1f%%')\nax2.set_title('Purchase amount by males and females')\n\nfig.legend(('Male', 'Female'))\n\nplt.tight_layout()","acc9b8a3":"sns.set_style('whitegrid')\nplt.subplots(figsize=(12,5))\nsns.countplot(users['Age']).set_title('Number of customers from different age groups')\nsns.despine()","aab090b5":"fig, ax = plt.subplots(figsize = (12, 5))\n\nN = len(users['Age'].unique())\nind = np.arange(N)\nwidth = 0.35\n\nmale = users[users['Gender'] == 'M']['Age'].value_counts()\nfemale = users[users['Gender'] == 'F']['Age'].value_counts()\n\np1 = plt.bar(ind, male, width)\np2 = plt.bar(ind, female, width, bottom = male)\n\nax.spines['right'].set_visible(False)\nax.spines['top'].set_visible(False)\n\nax.set_title('Number of customers in different age groups by gender')\nplt.ylabel('Count')\nplt.xticks(ind, users[users['Gender'] == 'F']['Age'].value_counts().index)\nplt.yticks(np.arange(0, 2400, 300))\nplt.legend((p1[0], p2[0]), ('Male', 'Female'))\nplt.show()","99b948e4":"age_purchase = users.groupby('Age').sum()['Purchase']\n\ntrace = [go.Pie(\n    values = age_purchase,\n    labels = age_purchase.index)]\n\nlayout = go.Layout(title = 'Purchase amount in different age groups')\n\nfig = go.Figure(data = trace, layout=layout)\niplot(fig)","a89f6c3f":"occ_sum = users.groupby('Occupation').sum()['Purchase']\nocc_count = users['Occupation'].value_counts()\n\nfig, (ax1, ax2) = plt.subplots(1,2, figsize = (16, 9))\n\nax1.barh(occ_count.index, occ_count)\nax1.invert_yaxis()\nax1.set_yticks(np.arange(0, 21, 1))\nax1.set_title('Number of customers in different occupations')\n\nax2.barh(occ_sum.index, occ_sum)\nax2.invert_xaxis()\nax2.invert_yaxis()\nax2.yaxis.tick_right()\nax2.set_title('Purchased amount by customers in different occupations')\n\nplt.yticks(np.arange(0, 21, 1))\nplt.show()","a0b3e973":"fig, (ax1, ax2) = plt.subplots(1, 2, figsize = (11, 6))\n\nexplode = (0, 0.1, 0.1)\n\nax1.pie(users['City_Category'].value_counts(), autopct='%1.1f%%', explode=explode, shadow=True)\nax1.set_title('Number people from different cities')\n\nax2.pie(users.groupby('City_Category')['Purchase'].sum().sort_values(ascending = False), autopct='%1.1f%%', explode=explode, shadow=True)\nax2.set_title('Purchase amount by city categories')\n\nfig.legend(('C', 'B', 'A'))\n\nplt.tight_layout()","f3d907cf":"plt.subplots(figsize = (12, 5))\n\nsns.countplot(users['Stay_In_Current_City_Years']).set_title('Purchases by stay in current city')\nsns.despine()","808f9f4f":"fig, (ax1, ax2) = plt.subplots(1, 2, figsize = (11, 5))\n\nax1.pie(users['Marital_Status'].value_counts(), autopct='%1.1f%%')\nax1.set_title('Number of married and unmarried customers')\n\nax2.pie(users.groupby('Marital_Status')['Purchase'].sum(), autopct='%1.1f%%')\nax2.set_title('Amount purchased by marital status')\n\nfig.legend(('Unmarried', 'Married'))\n\nplt.show()","e0cdfb65":"prod = df[['Product_ID', 'Product_Category_1', 'Product_Category_2', 'Product_Category_3', 'Purchase']].copy()\nprod.head()","ea1d5ffc":"fig, ax = plt.subplots(figsize = (12,5))\nax.set_title('Product category 1')\n\nprod.groupby('Product_Category_1')['Purchase'].count().sort_values().plot('barh')\nplt.show()","02f1a364":"fig, ax = plt.subplots(figsize = (12,5))\nax.set_title('Product category 2')\n\nprod.groupby('Product_Category_2')['Purchase'].count().sort_values().plot('barh')\nplt.show()","2e0d4485":"fig, ax = plt.subplots(figsize = (12,5))\nax.set_title('Product category 3')\n\nprod.groupby('Product_Category_3')['Purchase'].count().sort_values().plot('barh')\nplt.show()","c3bf6dc2":"fig, ax = plt.subplots(figsize=(12, 5))\nax.set_title('Top 10 items sold')\n\nprod.groupby('Product_ID')['Purchase'].count().nlargest(10).sort_values().plot('barh')\nplt.show()","bd479ac5":"The data is a list of seperate transcations. Multiple transcations may be made by the same user.\n<br\/>\nThe dataframe contains several redundant information of the users. To perform alanysis on the customers, we need to remove the redunant information and add the purchase amount of each customer.","b4c7fffc":"**The number of people from city category A is the least. They also purchased the least amount of money.\n<br\/>\nBoth the graphs are fairly similar, so the purchasing power of a person from each city category is similar.**","07cdbc64":"# Gender","a9e8ecf3":"# Background\nThe BlackFriday dataset contains approximately 550k transactions made in a retail store.\n<br\/>\nThe dataset provides several characteristics of customers like their age, gender, city group, occupation.\n<br\/>\nThis EDA attempts to find several patterns in the data so that we can understand the data better.","cc2d8aee":"**The majority of purchases is made by people who are new in the city.\n<br\/>\nThis might be beacuse the newcommers are still setteling in the city and they need new things whereas the people who have been in the city for a while already have the products and they don't need them.**","f808139e":"**The majority of customers belong to the 26-35 age group. About 73% of the purchases is made by 18-45 age group.**","f19f40c6":"# City Category","ef690b97":"# Marital Status","b8731958":"**The purchases made by married and unmarried customers are fairly similar.**","465f3991":"**The occupation of a person is an important factor that determines the purchasing power of that customer.**","d79bef54":"# Stay in current City","17a97f92":"**Creating a users dataframe to perform alanysis on customers**","e933781a":"**The number of males are significantly higher than females. This might be because of a few reasons:**\n- Men like to shop more on black friday than women\n- Men might have purchased items for women","c41b4921":"# Occupation","ccbc4136":"# Age","e8b98a2c":"# Products"}}