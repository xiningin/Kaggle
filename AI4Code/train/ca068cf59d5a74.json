{"cell_type":{"769df533":"code","1bb1a63d":"code","180bfa09":"code","98e732d8":"code","02fd2ebb":"code","db2fb4ad":"code","dde057db":"code","749db82f":"code","64b4770f":"code","d38a6155":"markdown","9ea000ef":"markdown","5ce9dc9f":"markdown","06c33231":"markdown","05721978":"markdown","032b11e9":"markdown","ad2f4b73":"markdown","c2a72646":"markdown","646f9aa1":"markdown","5732c691":"markdown","cff6b1f3":"markdown","6ac333a0":"markdown","2c8af09a":"markdown","1d890bf2":"markdown","d19c6eff":"markdown","c6b28afa":"markdown","cc707633":"markdown","ca5ae55a":"markdown","58681800":"markdown","525b39a7":"markdown","165432ce":"markdown","532dbc6a":"markdown","23a87c2e":"markdown","2115fda8":"markdown"},"source":{"769df533":"%matplotlib inline\nimport pandas as pd\nimport numpy as np\nimport pylab as plt\n\n# define tamanho padr\u00e3o das figuras\nplt.rc('figure', figsize=(10, 5))\nfizsize_with_subplots = (10, 10)\nbin_size = 10 \n\n# df_train \u00e9 um dataframe pandas.\ndf_train = pd.read_csv('..\/input\/lab1_train.csv')\ndf_train.head(5)","1bb1a63d":"df_train.info()","180bfa09":"df_train.describe()","98e732d8":"fig = plt.figure(figsize=fizsize_with_subplots) \nfig_dims = (3, 2)\n\n# Mortes x Sobreviventes\nplt.subplot2grid(fig_dims, (0, 0))\ndf_train['Survived'].value_counts().plot(kind='bar', title='Mortos x Sobreviventes')\n\n# Classe do passageiro\nplt.subplot2grid(fig_dims, (0, 1))\ndf_train['Pclass'].value_counts().plot(kind='bar', title='Classe do passageiro')\n\n# G\u00eanero\nplt.subplot2grid(fig_dims, (1, 0))\ndf_train['Sex'].value_counts().plot(kind='bar', title='Genero')\nplt.xticks(rotation=0)\n\n# Porto de embarque\nplt.subplot2grid(fig_dims, (1, 1))\ndf_train['Embarked'].value_counts().plot(kind='bar', title='Porto de embarque')\n\n# Idade\nplt.subplot2grid(fig_dims, (2, 0))\ndf_train['Age'].hist()\nplt.title('Idade')\n\n# Tarifa\nplt.subplot2grid(fig_dims, (2, 1))\ndf_train['Fare'].hist()\nplt.title('Tarifa')","02fd2ebb":"pclass_xt = pd.crosstab(df_train['Pclass'], df_train['Survived'])\npclass_xt","db2fb4ad":"# Normaliza a tabela para a soma dar 1:\npclass_xt_pct = pclass_xt.div(pclass_xt.sum(1).astype(float), axis=0)\n\npclass_xt_pct.plot(kind='bar', stacked=True, title='Taxa de sobrevivencia por classe do passageiro')\nplt.xlabel('Classe do Passageiro')\nplt.ylabel('Taxa de sobrevivencia')","dde057db":"sex_val_xt = pd.crosstab(df_train['Sex'], df_train['Survived'])\nsex_val_xt_pct = sex_val_xt.div(sex_val_xt.sum(1).astype(float), axis=0)\nsex_val_xt_pct.plot(kind='bar', stacked=True, title='Taxa de sobrevivencia por genero')","749db82f":"passenger_classes = df_train['Pclass'].unique()\n\nfor p_class in passenger_classes:\n    print('M: ', p_class, len(df_train[(df_train['Sex'] == 'male') & \n                             (df_train['Pclass'] == p_class)]))\n    print('F: ', p_class, len(df_train[(df_train['Sex'] == 'female') & \n                             (df_train['Pclass'] == p_class)]))","64b4770f":"females_df = df_train[df_train['Sex'] == 'female']\nfemales_xt = pd.crosstab(females_df['Pclass'], df_train['Survived'])\nfemales_xt_pct = females_xt.div(females_xt.sum(1).astype(float), axis=0)\nfemales_xt_pct.plot(kind='bar', stacked=True, title='Taxa de sobrevivencia das mulheres por classe')\nplt.xlabel('Classe do passageiro')\nplt.ylabel('Taxa de sobrevivencia')\n\nmales_df = df_train[df_train['Sex'] == 'male']\nmales_xt = pd.crosstab(males_df['Pclass'], df_train['Survived'])\nmales_xt_pct = males_xt.div(males_xt.sum(1).astype(float), axis=0)\nmales_xt_pct.plot(kind='bar', stacked=True, title='Taxa de sobrevivencia dos homens por classe')\nplt.xlabel('Classe do passageiro')\nplt.ylabel('Taxa de sobrevivencia')\n","d38a6155":"Visualizando graficamente os sobreviventes por Classe e G\u00eanero.","9ea000ef":"## Explorando os dados","5ce9dc9f":"## Descri\u00e7\u00e3o dos dados","06c33231":"### Classe do passageiro (PClass)","05721978":"Note que Age, Cabin, and Embarked tem valores nulos. Cabin tem muitos valores nulos e talvez n\u00e3o seja muito \u00fatil, enquanto Age e Embarked tem poucos e podemos fazer algum tratamento. No pr\u00f3ximo laborat\u00f3rio faremos esse tratamento.","032b11e9":"<pre>\nsurvival        Sobreviveu ao acidente?\n                (0 = N\u00e3o; 1 = Sim)\npclass          Classe do passageiro\n                (1 = primeira classe; 2 = segunda classe; 3 = terceira classe)\nname            Nome\nsex             G\u00eanero\nage             Idade\nsibsp           Soma do n\u00famero irm\u00e3os + cunhados + c\u00f4njuge\nparch           Soma do n\u00famero pais + filhos\nticket          N\u00famero da passagem\nfare            Valor da passagem\ncabin           N\u00famero da cabine\nembarked        Porto de embarque\n                (C = Cherbourg; Q = Queenstown; S = Southampton)\n<\/pre>","ad2f4b73":"O nosso conjunto de dados \u00e9 dividido entre train (treinamento) e test (teste), mas falaremos mais sobre isso depois. Por enquanto trabalharemos apenas com os dados de treinamento.","c2a72646":"Assim como antes vamos analisar o impacto do g\u00eanero na taxa de sobreviv\u00eancia. ","646f9aa1":"Nesse laborat\u00f3rio vamos analisar os dados dos passageiros do Titanic. Para quem n\u00e3o se lembra, o Titanic afundou em sua viagem inaugural em 1912, ap\u00f3s colidir com um iceberg. O acidente matou 1502 dos 2224 passsageiros. \n\nOs dados que usaremos aqui foram obtidos originalmente da p\u00e1gina da competi\u00e7\u00e3o do Kaggle: https:\/\/www.kaggle.com\/c\/titanic\n\nO material apresentado aqui foi baseado no tutorial encontrado <a href=\"http:\/\/nbviewer.ipython.org\/github\/donnemartin\/data-science-ipython-notebooks\/blob\/master\/kaggle\/titanic.ipynb\">aqui<\/a>.","5732c691":"### Importanto bibliotecas e carregando os dados","cff6b1f3":"### G\u00eanero","6ac333a0":"Podemos ver que a classe do passageiro tem impacto na taxa de sobreviv\u00eancia. Passageiros da primeira classe sobreviveram mais que os da segunda e terceira.","2c8af09a":"A maioria das mulheres sobreviveu, enquanto a maioria dos homens morreu no acidente.","1d890bf2":"Informa\u00e7\u00f5es b\u00e1sicas do nosso Data frame","d19c6eff":"Algumas estat\u00edsticas dos dados (apenas para dados num\u00e9ricos):","c6b28afa":"Vers\u00e3o gr\u00e1fica:","cc707633":"A imensa maioria das mulheres da primeira e segunda classes sobreviveram. Homens da primeira classe sobreviveram mais que das demais classes. ","ca5ae55a":"Agora vamos combinar as duas vari\u00e1veis. Primeiro contaremos a quantidade de homens e mulheres em cada classe.","58681800":"# Laborat\u00f3rio - Analisando os dados dos sobreviventes do Titanic","525b39a7":"Agora vamos gerar alguns histogramas das vari\u00e1veis usando *matplotlib*.","165432ce":"### Explorando as vari\u00e1veis","532dbc6a":"Nos gr\u00e1ficos acima podemos ver uma distro\u00e7\u00e3o no histograma da tarifa. No pr\u00f3ximo laborat\u00f3rio faremos uma an\u00e1lise de outliers.\n\nAgora vamos analisar individualmente algumas vari\u00e1veis","23a87c2e":"Os dados que vamos utilizar foram divididos em 2 arquivos: `train.csv` e `test.csv`. O arquivo `train.csv` ser\u00e1 usado para montarmos nosso modelo e no arquivo `test.csv` testaremos nosso modelo e enviarmos nosso resultado para o site da competi\u00e7\u00e3o para verificar nossa taxa de acerto. \n\nOs arquivos possuem as seguintes informa\u00e7\u00f5es de cada passageiro:","2115fda8":"Vamos tentar determinar qual o percentual de sobreviventes para cada classe utilizando uma tabela."}}