{"cell_type":{"9d46bb17":"code","235cb8c3":"code","ea653505":"code","f623384f":"code","cb47cf17":"code","a5ae3c61":"code","8d3c55bb":"code","38d09511":"code","b1047b67":"code","106b4480":"code","2df344de":"code","409c4255":"code","f529ab3e":"code","35001356":"code","fdf36985":"code","ea5b1454":"code","f62f651e":"code","ddb29b7f":"code","b0d12988":"code","2d86fdfd":"markdown","e8ae8162":"markdown","ad4ab94b":"markdown","caa9bb07":"markdown","431fadc4":"markdown","1033ab3c":"markdown","c98d6492":"markdown","f3f20b37":"markdown","323e404a":"markdown","ab2bbe1e":"markdown","a7eff528":"markdown"},"source":{"9d46bb17":"import numpy as np # linear algebra\nimport pandas as pd # data processing, CSV file I\/O (e.g. pd.read_csv)\nimport matplotlib\nimport os\nfor dirname, _, filenames in os.walk('\/kaggle\/input'):\n    for filename in filenames:\n        print(os.path.join(dirname, filename))\n","235cb8c3":"data = pd.read_csv(\"..\/input\/new-york-city-airbnb-open-data\/AB_NYC_2019.csv\")\ndata.shape","ea653505":"data.head()","f623384f":"import seaborn as sns\nsns.lmplot( x=\"price\", y=\"number_of_reviews\", data=data, fit_reg=False, hue='room_type', legend=True)\n ","cb47cf17":"# No space\nsns.jointplot(x=data[\"price\"], y=data[\"number_of_reviews\"], kind='kde', color=\"grey\", space=0)","a5ae3c61":"import matplotlib.pyplot as plt\nplt.figure(figsize=(14,8))\nsns.countplot(data.sort_values('neighbourhood_group').neighbourhood_group,palette='Set3',alpha=0.8)\nplt.title('Neighbourhood wise Airbnb listings in NYC')\nplt.xlabel('Neighbours')\nplt.ylabel('Registered Airbnbs')\nplt.show()","8d3c55bb":"plt.figure(figsize=(14,8))\nsns.countplot(data.sort_values('room_type').room_type,palette='Set1',alpha=0.8)\nplt.title('Room Types Airbnb listings in NYC')\nplt.xlabel('Room Types')\nplt.ylabel('Registered Airbnbs')\nplt.show()","38d09511":"manhattan = data.loc[data['neighbourhood_group'] == \"Manhattan\"]\nbrooklyn = data.loc[data['neighbourhood_group'] == \"Brooklyn\"]\n\nplt.stem(manhattan[\"room_type\"], manhattan[\"price\"], use_line_collection = True)\nplt.ylim(0, 11000)\n\n","b1047b67":"plt.stem(brooklyn[\"room_type\"], brooklyn[\"price\"], use_line_collection = True)\nplt.ylim(0, 11000)\n","106b4480":"manhattan.describe()","2df344de":"brooklyn.describe()","409c4255":"import matplotlib.pyplot as plt\nx = sns.pairplot(data)\nx","f529ab3e":"plt.figure(figsize=(14,8))\nsns.distplot(data[data.neighbourhood_group=='Manhattan'].price,color='black',hist=False,label='Manhattan')\nsns.distplot(data[data.neighbourhood_group=='Brooklyn'].price,color='green',hist=False,label='Brooklyn')\nsns.distplot(data[data.neighbourhood_group=='Queens'].price,color='blue',hist=False,label='Queens')\nsns.distplot(data[data.neighbourhood_group=='Staten Island'].price,color='maroon',hist=False,label='Staten Island')\nsns.distplot(data[data.neighbourhood_group=='Long Island'].price,color='lavender',hist=False,label='Long Island')\nplt.title('Price Distribution for different Boroughs for less than 3000')\nplt.xlim(0,3000)\nplt.show()","35001356":"fig, ax = plt.subplots(figsize=(14,14))\n\n\nimg=plt.imread('..\/input\/new-york-city-airbnb-open-data\/New_York_City_.png', 0)\ncoordenates_to_extent = [-74.258, -73.7, 40.49, 40.92]\nax.imshow(img, zorder=0, extent=coordenates_to_extent)\n\nscatter_map = sns.scatterplot(x='longitude', y='latitude', hue='neighbourhood_group',s=20, ax=ax, data=data)\nax.grid(True)\nplt.legend(title='Neighbourhood Groups')\nplt.show()","fdf36985":"fig, ax = plt.subplots(figsize=(14, 14))\n\ncmap = plt.get_cmap('jet') # ColorMaps\nc = data.price           # color, sequence, or sequence of color, optional\nalpha = 0.5                # The alpha blending value, between 0 (transparent) and 1 (opaque).\nlabel = \"data\"\nprice_heatmap = ax.scatter(data.longitude, data.latitude, label=label, c=c, \n                            cmap=cmap, alpha=0.4)\n\nplt.title(\"Heatmap by Price $\")\nplt.colorbar(price_heatmap)\nplt.grid(True)\nplt.show()\n","ea5b1454":"data_2 = data[data.price < 500]\n\nfig, ax = plt.subplots(figsize=(14, 14))\n\ncmap = plt.get_cmap('jet') # ColorMaps\nc = data_2.price           # color, sequence, or sequence of color, optional\nalpha = 0.5                # The alpha blending value, between 0 (transparent) and 1 (opaque).\nlabel = \"data_2\"\nprice_heatmap = ax.scatter(data_2.longitude, data_2.latitude, label=label, c=c, \n                            cmap=cmap, alpha=0.4)\n\nplt.title(\"Heatmap by Price $\")\nplt.colorbar(price_heatmap)\nplt.grid(True)\nplt.show()\n","f62f651e":"data = data.drop(['name','id','host_name','last_review'],axis=1,inplace=True)\ndata = data['reviews_per_month']=data['reviews_per_month'].replace(np.nan, 0)\n","ddb29b7f":"import sklearn\nfrom sklearn import preprocessing\nfrom sklearn import metrics\nfrom sklearn.metrics import r2_score, mean_absolute_error\nfrom sklearn.preprocessing import LabelEncoder,OneHotEncoder\nfrom sklearn.model_selection import train_test_split\nfrom sklearn.linear_model import LinearRegression,LogisticRegression\nfrom sklearn.ensemble import RandomForestRegressor,  GradientBoostingRegressor","b0d12988":"\n# Fit label encoder\nle = preprocessing.LabelEncoder()                                            \nle.fit(data_3['neighbourhood_group'])\ndata_3['neighbourhood_group']=le.transform(data_3['neighbourhood_group'])   \n\n # Transform labels to normalized encoding.\nle = preprocessing.LabelEncoder()\nle.fit(data_3['neighbourhood'])\ndata_3['neighbourhood']=le.transform(data_3['neighbourhood'])\n\nle = preprocessing.LabelEncoder()\nle.fit(data_3['room_type'])\ndata_3['room_type']=le.transform(data_3['room_type'])\n\ndata_3.sort_values(by='price',ascending=True,inplace=True)","2d86fdfd":"Brooklyn and Manhattan comprises of highest airbnb listings in New York!","e8ae8162":"We can see Manhatten's curve is skewed showing its prices are relatively higher","ad4ab94b":"Firstly Deploying Linear Regression","caa9bb07":"Manhattan and Brooklyn seems to have equal distribution amongst room type for all listings in New York\n","431fadc4":"I was actually curious if price had any relation with number of reviews. Which is un true in this case","1033ab3c":"THE PURPOSE OF THIS NOTEBOOK IS TO EXPLORE INSIGHTS HIDDEN IN THE DATA AND LATER MAKE PREDICTIONS AND COMPARE ACCURACIES","c98d6492":"\n\nplt.figure(figsize=(14,8))\nsns.distplot(data[data.neighbourhood_group=='Manhattan'].reviews_per_month,color='black',hist=False,label='Manhattan')\nsns.distplot(data[data.neighbourhood_group=='Brooklyn'].reviews_per_month,color='green',hist=False,label='Brooklyn')\nsns.distplot(data[data.neighbourhood_group=='Queens'].reviews_per_month,color='blue',hist=False,label='Queens')\nsns.distplot(data[data.neighbourhood_group=='Staten Island'].reviews_per_month,color='maroon',hist=False,label='Staten Island')\nsns.distplot(data[data.neighbourhood_group=='Long Island'].reviews_per_month,color='lavender',hist=False,label='Long Island')\nplt.title('Reviews per Month for different Boroughs')\nplt.xlim(0,10)\nplt.show()","f3f20b37":"Lets draw the same but for price under $500","323e404a":"We can see most of the listings lie within the range of 50 to 150 as we see the map!","ab2bbe1e":"Shared rooms are much less compared to Entire homes or rooms listing. Shared room is also a niche of Hostels and demand seems to be low. ","a7eff528":"Queens and Brooklyn listings gets higher number of reviews!"}}