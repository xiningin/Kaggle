{"cell_type":{"dac5e29c":"code","b2b20c73":"code","0cc34e33":"code","66366d70":"code","bc886957":"code","4475311d":"code","2fe00bb3":"code","e168fac0":"code","a6d7913c":"code","7c3d1c55":"code","ce68333e":"code","5293cf3c":"code","04c7ac3f":"code","112c5682":"code","32c150dd":"code","10494b9c":"code","29812f9d":"code","649fa1ca":"code","adca1d9c":"code","093194f2":"code","07a334d6":"code","91253d4d":"code","b8e0856d":"code","34192bda":"code","a8daa99d":"code","b0678428":"code","3e2c80cb":"code","f29bbcaa":"code","06aff2db":"code","95f25be2":"code","0f953c3c":"code","3f208124":"code","9d5920f5":"code","7a5d4867":"code","f7ef8a12":"code","ee8c5eb8":"code","31fb6f92":"code","17facd7c":"code","7307a92a":"code","1a7d47ca":"code","7139fbee":"code","720ca117":"code","19771179":"code","0e660821":"code","3f50e25b":"code","2f87c3ab":"code","f9a25c45":"code","37fb0b89":"code","71c9c864":"code","d48b00cd":"code","5391ed0f":"code","f5a61178":"code","04116ced":"code","3f556055":"code","ae742d68":"code","8a4a77ba":"code","2804d16b":"code","b3987d96":"code","2c746a9b":"code","41e161bc":"code","a43f7204":"code","c0d3f9ef":"code","4db0e603":"code","82a5061e":"code","3c2b0537":"code","814e72ac":"code","415127cb":"code","f11be637":"code","153aefdc":"code","34d115ac":"code","89e510b8":"code","a2778a23":"code","51f0636a":"code","4d1a7d1e":"code","6e5071bb":"code","9025d05a":"code","ad686460":"code","8efa1ceb":"code","e34ce81d":"code","3ed03363":"code","349bd66a":"code","215e601d":"code","ad2a61d6":"code","b6d247df":"code","ad9f425e":"code","439defcf":"code","3e8dd374":"code","ed3c81a3":"code","67235ba9":"code","4e0b061a":"code","bb0e0c9a":"code","49df7c53":"code","fc7fcfb8":"code","79056f48":"code","201b3257":"markdown","d4d567e7":"markdown","0c36a1e8":"markdown","2ccfa853":"markdown","c15d4b73":"markdown","4025fb60":"markdown","a4a1a1de":"markdown","be8b436a":"markdown","836b5d1e":"markdown","ef34e206":"markdown","cced72e8":"markdown","46b54c91":"markdown","345619f5":"markdown","c1550274":"markdown","8aa48548":"markdown","70d97225":"markdown","cfd903d2":"markdown","89211df2":"markdown","ed5aca18":"markdown","86c7bf55":"markdown","f71bac2e":"markdown","33315118":"markdown","b4c5162a":"markdown","ead38736":"markdown","712bbdfe":"markdown","5ceb52e2":"markdown","c03e23ec":"markdown","58decb88":"markdown","368e1330":"markdown","100072db":"markdown","4e0046a4":"markdown","c0eccf33":"markdown","bde8e26f":"markdown","28be44ff":"markdown","c2e68ac2":"markdown","32c8607d":"markdown","1ab7ef74":"markdown","b5a27190":"markdown","fc47ff4c":"markdown","a83b9804":"markdown","b967877b":"markdown","cdc3219f":"markdown","990dc7c9":"markdown","423f6ee7":"markdown","86bc9ad3":"markdown","8649ce09":"markdown","eaa7228d":"markdown","bac6be26":"markdown","b6a21225":"markdown","a5ea4ac1":"markdown","d02d215a":"markdown","f3e34abd":"markdown","dd5bd6a1":"markdown","d4636911":"markdown","e56b09bd":"markdown","589cc970":"markdown","29434eaa":"markdown","c13938ec":"markdown","54a9d3ad":"markdown","3c197def":"markdown","90037fbe":"markdown","2d31d561":"markdown","4bf77737":"markdown","9d0cf54e":"markdown","d071b2bd":"markdown","449052e9":"markdown","09d9a676":"markdown","2092c033":"markdown","e98bc784":"markdown","95dc416c":"markdown","5a5ee5c6":"markdown","d627e3db":"markdown","23684dfd":"markdown","d07e93b1":"markdown","8f45906e":"markdown","726c5d84":"markdown","71654898":"markdown","dc2dd33e":"markdown","f7997263":"markdown","3c38d011":"markdown"},"source":{"dac5e29c":"# Supress Warnings\nimport warnings\nwarnings.filterwarnings('ignore')","b2b20c73":"# Importing all the necessary libraries\nimport pandas as pd\nimport numpy as np\nimport matplotlib.pyplot as plt\nimport seaborn as sns\n%matplotlib inline\nimport random\npd.set_option(\"max_rows\", None)\npd.set_option('display.max_columns', 500)\n\n","0cc34e33":"# Read data from file 'application_data.csv' \ndf= pd.read_csv(\"..\/input\/loan-defaulter\/application_data.csv\")\n\n# Preview the first 5 lines of the loaded data\ndf.head()\n","66366d70":"#Determining the number of rows and columns\ndf.shape","bc886957":"#summary of all the numeric columns in the dataset\ndf.describe()","4475311d":"#Datatypes of each column\ndf.info(verbose=True)","2fe00bb3":"#Column-wise null count \ndf.isnull().sum()\n","e168fac0":"#Percentage of missing values for all columns \nnull_count=round(100*(df.isnull().sum()\/len(df.index)),2)\nnull_count\n","a6d7913c":"#Columns with high missing percentage >=50%\nnull_count=null_count[null_count>=50]\nnull_count\n","7c3d1c55":"len(null_count)","ce68333e":"#Removing those 41 columns which have missing values more than 50%\ncols_dropped=([null_count[null_count >=50.00].index])\ndf.drop(labels=cols_dropped[0],axis=1,inplace=True)","5293cf3c":"#Rows and Columns after removing columns with high missing percentage\ndf.shape","04c7ac3f":"# Checking the columns after removing high missing values(>=50%)\n100*(df.isnull().sum()\/len(df.index))","112c5682":"# Drop unnecessary columns from the dataset\n\nDrop_col=['FLAG_MOBIL', 'FLAG_EMP_PHONE', 'FLAG_WORK_PHONE', 'FLAG_CONT_MOBILE','YEARS_BEGINEXPLUATATION_MODE','FLOORSMAX_MODE','TOTALAREA_MODE','EMERGENCYSTATE_MODE',\n       'FLAG_PHONE', 'FLAG_EMAIL','REGION_RATING_CLIENT','REGION_RATING_CLIENT_W_CITY','FLAG_EMAIL','CNT_FAM_MEMBERS','REGION_RATING_CLIENT',\n       'REGION_RATING_CLIENT_W_CITY','DAYS_LAST_PHONE_CHANGE', 'FLAG_DOCUMENT_2', 'FLAG_DOCUMENT_3','FLAG_DOCUMENT_4', 'FLAG_DOCUMENT_5', 'FLAG_DOCUMENT_6',\n       'FLAG_DOCUMENT_7', 'FLAG_DOCUMENT_8', 'FLAG_DOCUMENT_9','FLAG_DOCUMENT_10', 'FLAG_DOCUMENT_11', 'FLAG_DOCUMENT_12',\n       'FLAG_DOCUMENT_13', 'FLAG_DOCUMENT_14', 'FLAG_DOCUMENT_15','FLAG_DOCUMENT_16', 'FLAG_DOCUMENT_17', 'FLAG_DOCUMENT_18',\n       'FLAG_DOCUMENT_19', 'FLAG_DOCUMENT_20', 'FLAG_DOCUMENT_21','EXT_SOURCE_3','YEARS_BEGINEXPLUATATION_AVG','FLOORSMAX_AVG','YEARS_BEGINEXPLUATATION_MEDI','FLOORSMAX_MEDI']\n\ndf.drop(labels=Drop_col,axis=1,inplace=True)","32c150dd":"# Checking the columns after dropping unncessary columns\n\n100*(df.isnull().sum()\/len(df.index))","10494b9c":"#Missing values in \"AMT_ANNUITY\" column\ndf.AMT_ANNUITY.isnull().sum()","29812f9d":"#Percentage of missing values in \"AMT_ANNUITY\" column\nfloat(100*(12\/307511))","649fa1ca":"#Missing values in \"AMT_GOODS_PRICE\" column\ndf.AMT_GOODS_PRICE.isnull().sum()","adca1d9c":"#Percentage of missing values in \"AMT_GOODS_PRICE\" column\nfloat(100*(278\/307511))","093194f2":"df.EXT_SOURCE_2.isnull().sum()","07a334d6":"float(100*(660\/307511))","91253d4d":"#Missing values in \"NAME_TYPE_SUITE\" column\ndf.NAME_TYPE_SUITE.isnull().sum()","b8e0856d":"#Percentage of missing values in \"NAME_TYPE_SUITE\" column\n100*(1292\/307511)","34192bda":"#print the percentage of each NAME_TYPE_SUITE in the data frame df.\ndf.NAME_TYPE_SUITE.value_counts(normalize= True)","a8daa99d":"#find the mode of NAME_TYPE_SUITE in df, check which category is most repeated\nname_mode=df.NAME_TYPE_SUITE.mode()[0]\nname_mode","b0678428":"#Missing values in \"OCCUPATION_TYPE\" column\ndf.OCCUPATION_TYPE.isnull().sum()","3e2c80cb":"#Percentage of missing values in \"OCCUPATION_TYPE\" column\n100*(96391\/307511)","f29bbcaa":"#print the percentage of each OCCUPATION TYPES in the data frame df \ndf.OCCUPATION_TYPE .value_counts(normalize=True)","06aff2db":"#find the mode of NAME_TYPE_SUITE in df, check which category is most repeated\nocc_mode=df.OCCUPATION_TYPE.mode()[0]\nocc_mode","95f25be2":"#Preview the first 5 lines of the data\ndf.head()","0f953c3c":"# I can check the number of unique values is a column\n# If the number of unique values <=40: Categorical column\n# If the number of unique values in a columns> 50: Continuous\n\ndf.nunique().sort_values()","3f208124":"#changing negative ages to positive ages.\ndf['DAYS_BIRTH']=abs(df['DAYS_BIRTH'])\ndf['DAYS_BIRTH'].describe()","9d5920f5":"#changing negative values in days to positive days\ndf['DAYS_EMPLOYED']=abs(df['DAYS_EMPLOYED'])\ndf['DAYS_EMPLOYED'].describe()","7a5d4867":"#changing negative days to positive days.\ndf['DAYS_REGISTRATION']=abs(df['DAYS_REGISTRATION'])\ndf['DAYS_REGISTRATION'].describe()","f7ef8a12":"#changing negative days to positive \ndf['DAYS_ID_PUBLISH']=abs(df['DAYS_ID_PUBLISH'])\ndf['DAYS_ID_PUBLISH'].describe()","ee8c5eb8":"#converting the data type of categorical column\ndf['REG_REGION_NOT_LIVE_REGION'] = df['REG_REGION_NOT_LIVE_REGION'].astype(object)\ndf.dtypes","31fb6f92":"#Changing region from int to object\ndf['REG_REGION_NOT_WORK_REGION'] = df['REG_REGION_NOT_WORK_REGION'].astype(object)","17facd7c":"#Changing region from int to object\ndf['LIVE_REGION_NOT_WORK_REGION'] = df['LIVE_REGION_NOT_WORK_REGION'].astype(object)","7307a92a":"#Changing city from int to object\ndf['REG_CITY_NOT_LIVE_CITY'] = df['REG_CITY_NOT_LIVE_CITY'].astype(object)","1a7d47ca":"#Changing city from int to object\ndf['REG_CITY_NOT_WORK_CITY'] = df['REG_CITY_NOT_WORK_CITY'].astype(object)","7139fbee":"#Changing city from int to object\ndf['LIVE_CITY_NOT_WORK_CITY']=df['LIVE_CITY_NOT_WORK_CITY'].astype(object)","720ca117":"df.head()","19771179":"#describe the AMT_ANNUITY variable of df\n\ndf.AMT_ANNUITY.describe()","0e660821":"sns.boxplot(df.AMT_ANNUITY)\nplt.title('Distribution of Amount Annuity')\nplt.show()","3f50e25b":"df.AMT_INCOME_TOTAL.describe()","2f87c3ab":"plt.figure(figsize=(9,2))\nsns.boxplot(df.AMT_INCOME_TOTAL)\nplt.xscale('log')\nplt.title('Distribution of Income')\nplt.show()","f9a25c45":"df.AMT_INCOME_TOTAL.quantile([0.5, 0.7, 0.9,0.95,0.99])","37fb0b89":"df.AMT_CREDIT.describe()","71c9c864":"plt.figure(figsize=(9,2))\nsns.boxplot(df.AMT_CREDIT)\nplt.title('Distribution of Credit amount')\nplt.show()","d48b00cd":"df.AMT_CREDIT.quantile([0.5, 0.7, 0.9,0.95,0.99])","5391ed0f":"df.DAYS_BIRTH.describe()","f5a61178":"sns.boxplot(df.DAYS_BIRTH)\nplt.title('Distribution of Age in the form of days')\nplt.show()","04116ced":"df.DAYS_EMPLOYED.describe()","3f556055":"plt.figure(figsize=(15,5))\nsns.boxplot(df.DAYS_EMPLOYED)\n#plt.yscale('log')\nplt.title('Distribution of Days the client employed')\n\nplt.show()","ae742d68":"#Creating bins for Credit amount\n\nbins = [0,350000,700000,1000000000]\nslots = ['Low','Medium','High']\n\ndf['AMT_CREDIT_RANGE']=pd.cut(df['AMT_CREDIT'],bins=bins,labels=slots)","8a4a77ba":"# Creating bins for income amount\n\nbins = [0,200000,400000,10000000000]\nslot = ['Low','Medium','High']\n\ndf['AMT_INCOME_RANGE']=pd.cut(df['AMT_INCOME_TOTAL'],bins,labels=slot)","2804d16b":"# Creating bins for days_birth\n\nbins = [0,7300,10950,14600,18250,21900,25500]\nslot = ['0-20','20-30','30-40','40-50','50-60','60-70']\n\ndf['AGE_RANGE']=pd.cut(df['DAYS_BIRTH'],bins,labels=slot)","b3987d96":"#Checking bin columns created in df.\ndf.head()","2c746a9b":"# Calculating Imbalance percentage\n100*(df.TARGET.value_counts())\/ (len(df))","41e161bc":"# Dividing the dataset into two dataset of  target=1(client with payment difficulties) and target=0(all other)\ntarget_1 = df[df['TARGET']==1]\ntarget_0 = df[df['TARGET']==0]","a43f7204":"#Dataframe having target values 0\ntarget_0.head()","c0d3f9ef":"#Dataframe having target values 1\ntarget_1.head()","4db0e603":"# Numeric variable analysis for target_0 & target_1 dataframe\nplt.figure(figsize = (15, 8))\nplt.subplot(2, 2, 1)\nplt.ylim(0,100000)\nplt.title('Target=0 : Age-No Payment issues')\nsns.countplot(target_0['AGE_RANGE'])\n\n# subplot 2\nplt.subplot(2, 2, 2)\nplt.title('Target =1 : Age-Payment issues')\nplt.ylim(0,100000)\nsns.countplot(target_1['AGE_RANGE'])\nplt.show()","82a5061e":"# Numeric variable analysis for target_0 & target_1 dataframe\nplt.figure(figsize = (15, 8))\nplt.subplot(2, 2, 1)\nplt.ylim(0,100000)\nplt.title('Credit amount of loan - No payment issues')\nsns.countplot(target_0['AMT_CREDIT_RANGE'],palette='muted')\n\n# subplot 2\nplt.subplot(2, 2, 2)\nplt.title('Credit amount of loan- Payment issues')\nplt.ylim(0,100000)\nsns.countplot(target_1['AMT_CREDIT_RANGE'], palette='muted')\nplt.show()","3c2b0537":"# Categorical variable analysis for target_0 & target_1 dataframe\nplt.figure(figsize = (15,6))\nplt.subplot(1, 2, 1)\n#plt.subplots_adjust(wspace=0.5)\n\n\nsns.countplot(target_0['OCCUPATION_TYPE'])\nplt.title('Target=0 : Job type- no payment issues')\nplt.ylim(0,50000)\nplt.xticks(rotation = 90)\n\n# subplot 2\nplt.subplot(1, 2, 2)\n\nsns.countplot(target_1['OCCUPATION_TYPE'])\nplt.title('Target=1 : Job type- Payment issues')\nplt.ylim(0,50000)\nplt.xticks(rotation = 90)\nplt.show()\n\n","814e72ac":"# Categorical variable analysis for target_0 & target_1 dataframe\nplt.figure(figsize = (15,6))\nplt.rcParams['axes.titlesize'] = 15\nplt.rcParams[\"axes.labelsize\"] = 20\nplt.rcParams['axes.titlepad'] = 30\nplt.rc('xtick',labelsize=12)\nplt.rc('ytick',labelsize=12)\nplt.subplot(1, 2, 1)\n#plt.title()\nsns.countplot(target_0['NAME_INCOME_TYPE'].dropna())\nplt.title('Target=0 : Income type of people with no payment issues')\nplt.ylim(0,150000)\nplt.xticks(rotation = 90)\n\n# subplot 2\nplt.subplot(1, 2, 2)\n\nsns.countplot(target_1['NAME_INCOME_TYPE'].dropna())\nplt.title('Target=1 : Income type of  people with Payment issues')\nplt.ylim(0,150000)\nplt.xticks(rotation = 90)\nplt.show()\n\n","415127cb":"#Analyse continuous column with respect to the target column\nsns.distplot(target_0['AMT_CREDIT'], hist = False, label=\"Good\")# Target = 0\nsns.distplot(target_1['AMT_CREDIT'], hist = False, label='Bad')# Taget = 1\nplt.title('AMT_CREDIT')\nplt.grid(color='black', linestyle='-', linewidth=0.25, alpha=0.5) \nplt.show()","f11be637":"#Analyse continuous column with respect to the target column\nsns.distplot(target_0['AMT_ANNUITY'], hist = False, label=\"Good\")# Target = 0\nsns.distplot(target_1['AMT_ANNUITY'], hist = False, label=\"Bad\")# Taget = 1\nplt.title('AMT_ANNUITY')\nplt.grid(color='black', linestyle='-', linewidth=0.25, alpha=0.5) \nplt.show()","153aefdc":"#Analyse continuous column with respect to the target column\nsns.distplot(target_0['AMT_GOODS_PRICE'], hist = False,label= \"good\")# Target = 0\nsns.distplot(target_1['AMT_GOODS_PRICE'], hist = False, label=\"bad\")# Taget = 1\nplt.title('AMT_GOODS_PRICE')\nplt.grid(color='black', linestyle='-', linewidth=0.25, alpha=0.5) \nplt.show()","34d115ac":"#Plot mutiple categorical columns with respect to Target column: Subplot\nfeatures = ['CODE_GENDER', 'NAME_INCOME_TYPE', 'NAME_EDUCATION_TYPE','NAME_FAMILY_STATUS','NAME_HOUSING_TYPE','OCCUPATION_TYPE']\nlist(enumerate(features))","89e510b8":"features = ['CODE_GENDER', 'NAME_INCOME_TYPE', 'NAME_EDUCATION_TYPE','NAME_FAMILY_STATUS','NAME_HOUSING_TYPE','OCCUPATION_TYPE']\nplt.figure(figsize = (20, 40))\n\nplt.subplots_adjust(hspace=0.8)\nfor i in enumerate(features):\n    plt.subplot(5, 2, i[0]+1)\n    sns.countplot(x = i[1], hue = 'TARGET', data = df)\n    plt.xticks(rotation = 45)\n    ","a2778a23":"#correlation matrix for all numerical columns\ncorr=target_0.corr()\ncorr","51f0636a":"#Convert the diagonal and below diagonal values of matrix to False, Whereever False is there is replaced with NaN on execution\ncorr=corr.where(np.triu(np.ones(corr.shape), k=1).astype(np.bool))\ncorr","4d1a7d1e":"#convert it to dataframe\ncorrdf = corr.unstack().reset_index()\ncorrdf.head()","6e5071bb":"#Changing the names of solumns\ncorrdf.columns=['VAR1','VAR2','Correlation']\ncorrdf.head()","9025d05a":"#Drop the columns having the missing data\ncorrdf.dropna(subset = ['Correlation'], inplace = True)\ncorrdf.head()","ad686460":"#Rounding off the values\ncorrdf['Correlation'] = round(corrdf['Correlation'], 2)\ncorrdf.head()","8efa1ceb":"# Since we see correlation as an absolute value, we are converting it into absolute value\ncorrdf['Correlation'] = corrdf['Correlation'].abs()\ncorrdf.head()","e34ce81d":"#Sorting the correlation values\ncorrdf.sort_values(by = 'Correlation', ascending = False).head(10)\n","3ed03363":"#For target_1 dataframe we perform the same operations to find correlation\ncorr = target_1.corr()\n\ncorr = corr.where(np.triu(np.ones(corr.shape), k=1).astype(np.bool))\ncorrdf = corr.unstack().reset_index()\ncorrdf.columns = ['VAR1', 'VAR2', 'Correlation']\ncorrdf.dropna(subset = ['Correlation'], inplace = True)\ncorrdf['Correlation'] = round(corrdf['Correlation'], 2)\n# Since we see correlation as an absolute value, we are converting it into absolute valucorrdf['Correlation_abs'] = corrdf0['Correlation'].abs()\ncorrdf.sort_values(by = 'Correlation', ascending = False).head(10)\n\n                   ","349bd66a":"#Scatter plot for numeric columns\n\nplt.figure(figsize = (15, 20))\nplt.subplots_adjust(wspace=0.3)\n\n\nplt.subplot(2,2,1)\nsns.scatterplot(target_0.AMT_INCOME_TOTAL,target_0.AMT_CREDIT)\nplt.xlabel('AMT_INCOME_TOTAL')\nplt.ylabel('AMT_CREDIT')\nplt.title('AMT_INCOME_TOTAL  vs  AMT_CREDIT ')\n\nplt.subplot(2,2,2)\nsns.scatterplot(target_1.AMT_INCOME_TOTAL,target_1.AMT_CREDIT)\nplt.xlabel('AMT_INCOME_TOTAL')\nplt.ylabel('AMT_CREDIT')\nplt.title('AMT_INCOME_TOTAL  vs  AMT_CREDIT ')\n\n\nplt.subplot(2,2,3)\nsns.scatterplot(target_0.AMT_GOODS_PRICE,target_0.AMT_CREDIT)\nplt.xlabel('AMT_GOODS_PRICE')\nplt.ylabel('AMT_CREDIT')\nplt.title('AMT_GOODS_PRICE  vs  AMT_CREDIT ')\nplt.xticks(rotation = 45)\n\nplt.subplot(2,2,4)\nsns.scatterplot(target_1.AMT_GOODS_PRICE,target_1.AMT_CREDIT)\nplt.xlabel('AMT_GOODS_PRICE')\nplt.ylabel('AMT_CREDIT')\nplt.title('AMT_GOODS_PRICE  vs  AMT_CREDIT ')\nplt.xticks(rotation = 45)\nplt.show()\n\n","215e601d":"# Numeric variable analysis for target_0 & target_1 dataframe\nplt.figure(figsize = (15, 8))\nplt.subplot(2, 2, 1)\nplt.title('Target_0:Income Range b\/w Male and Female')\n\nsns.countplot(x='AMT_INCOME_RANGE', hue='CODE_GENDER', data=target_0, palette='rocket')\n\n# subplot 2\nplt.subplot(2, 2, 2)\nplt.title('Target_1:Income Range b\/w Male and Female')\n\nsns.countplot(x='AMT_INCOME_RANGE', hue='CODE_GENDER', data=target_1,palette='rocket')\nplt.show()","ad2a61d6":"# Box plotting for Credit amount\n\nplt.figure(figsize=(15,10))\nplt.subplots_adjust(wspace=0.3)\n\nplt.subplot(121)\nsns.boxplot(data =target_0, x='NAME_EDUCATION_TYPE',y='AMT_CREDIT', hue ='NAME_FAMILY_STATUS',orient='v]')\nplt.title('Credit amount vs Education Status')\nplt.xticks(rotation=45)\n\nplt.subplot(122)\nsns.boxplot(data =target_1, x='NAME_EDUCATION_TYPE',y='AMT_CREDIT', hue ='NAME_FAMILY_STATUS',orient='v]')\nplt.title('Credit amount vs Education Status')\nplt.xticks(rotation=45)\nplt.show()\n\n","b6d247df":"\n# Box plotting for Income amount in logarithmic scale\n\nplt.figure(figsize=(18,15))\nplt.subplot(1,2,1)\nplt.yscale('log')\nsns.boxplot(data =target_0, x='NAME_EDUCATION_TYPE',y='AMT_INCOME_TOTAL', hue ='NAME_FAMILY_STATUS',orient='v')\nplt.title('Income amount vs Education Status(Target 0)')\nplt.xticks(rotation=45)\n\n\n\nplt.subplot(1,2,2)\nplt.yscale('log')\nsns.boxplot(data =target_1, x='NAME_EDUCATION_TYPE',y='AMT_INCOME_TOTAL', hue ='NAME_FAMILY_STATUS',orient='v')\nplt.title('Income amount vs Education Status (Target 1)')\nplt.xticks(rotation=45)\nplt.show()\n\n\n","ad9f425e":"#Reading the data from file previous_application \ndf1=pd.read_csv(\"..\/input\/loan-defaulter\/previous_application.csv\")\ndf1.head()","439defcf":"# Removing the column values of 'XNA' and 'XAP'\n\ndf1=df1.drop(df1[df1['NAME_CASH_LOAN_PURPOSE']=='XNA'].index)\ndf1=df1.drop(df1[df1['NAME_CASH_LOAN_PURPOSE']=='XNA'].index)\ndf1=df1.drop(df1[df1['NAME_CASH_LOAN_PURPOSE']=='XAP'].index)","3e8dd374":"#Merge the previous application with the current application data file\nmerged_df= pd.merge(df, df1, how='inner', on='SK_ID_CURR',suffixes='_x')\nmerged_df.head()","ed3c81a3":"# Renaming the column names after merging\n\nnew_df = merged_df.rename({'NAME_CONTRACT_TYPE_' : 'NAME_CONTRACT_TYPE','AMT_CREDIT_':'AMT_CREDIT','AMT_ANNUITY_':'AMT_ANNUITY',\n                         'WEEKDAY_APPR_PROCESS_START_' : 'WEEKDAY_APPR_PROCESS_START',\n                         'HOUR_APPR_PROCESS_START_':'HOUR_APPR_PROCESS_START','NAME_CONTRACT_TYPEx':'NAME_CONTRACT_TYPE_PREV',\n                         'AMT_CREDITx':'AMT_CREDIT_PREV','AMT_ANNUITYx':'AMT_ANNUITY_PREV',\n                         'WEEKDAY_APPR_PROCESS_STARTx':'WEEKDAY_APPR_PROCESS_START_PREV',\n                         'HOUR_APPR_PROCESS_STARTx':'HOUR_APPR_PROCESS_START_PREV'}, axis=1)\nnew_df.head()","67235ba9":"# Removing unwanted columns for analysis\n\nnew_df.drop(['SK_ID_CURR','WEEKDAY_APPR_PROCESS_START', 'HOUR_APPR_PROCESS_START','REG_REGION_NOT_LIVE_REGION', \n              'REG_REGION_NOT_WORK_REGION','LIVE_REGION_NOT_WORK_REGION', 'REG_CITY_NOT_LIVE_CITY',\n              'REG_CITY_NOT_WORK_CITY', 'LIVE_CITY_NOT_WORK_CITY','WEEKDAY_APPR_PROCESS_START_PREV',\n              'HOUR_APPR_PROCESS_START_PREV', 'FLAG_LAST_APPL_PER_CONTRACT','NFLAG_LAST_APPL_IN_DAY'],axis=1,inplace=True)\n\nnew_df.head()","4e0b061a":"new_df.head()","bb0e0c9a":"# Distribution of contract status in logarithmic scale\n\nsns.set_style('whitegrid')\nsns.set_context('talk')\n\nplt.figure(figsize=(20,20))\nplt.rcParams[\"axes.labelsize\"] = 20\nplt.rcParams['axes.titlesize'] = 22\nplt.rcParams['axes.titlepad'] = 30\nplt.xticks(rotation=90)\nplt.xscale('log')\nplt.title('Distribution of contract status with purposes')\nax=sns.countplot(data = new_df, y='NAME_CASH_LOAN_PURPOSE', order=new_df['NAME_CASH_LOAN_PURPOSE'].value_counts().index,hue = 'NAME_CONTRACT_STATUS',palette='deep')","49df7c53":"# Distribution of contract status\n\nsns.set_style('whitegrid')\nsns.set_context('talk')\n\nplt.figure(figsize=(20,20))\nplt.rcParams[\"axes.labelsize\"] = 20\nplt.rcParams['axes.titlesize'] = 22\nplt.rcParams['axes.titlepad'] = 30\nplt.xticks(rotation=90)\nplt.xscale('log')\nplt.title('Distribution of purposes with target ')\nax = sns.countplot(data = new_df, y= 'NAME_CASH_LOAN_PURPOSE', order=new_df['NAME_CASH_LOAN_PURPOSE'].value_counts().index,hue = 'TARGET')","fc7fcfb8":"# Box plotting for Credit amount in logarithmic scale\n\nplt.figure(figsize=(30,15))\nplt.xticks(rotation=90)\nplt.yscale('log')\n\nsns.boxplot(data =new_df, x='NAME_CASH_LOAN_PURPOSE',hue='NAME_INCOME_TYPE',y='AMT_CREDIT_PREV',orient='v')\nplt.title('Prev Credit amount vs Loan Purpose')\nplt.show()","79056f48":"\n# Box plotting for Credit amount prev vs Housing type in logarithmic scale\n\nplt.figure(figsize=(16,12))\nplt.xticks(rotation=90)\nsns.barplot(data =new_df, y='AMT_CREDIT_PREV',hue='TARGET',x='NAME_HOUSING_TYPE',)\nplt.title('Prev Credit amount vs Housing type')\nplt.show()","201b3257":"### 8. Univariate Analysis for target =0 and target=1","d4d567e7":"### Numerical categorical analysis","0c36a1e8":"In 'AMT_INCOME_TOTAL' column, We can see that there are outlier values at 1.17x10^8. Sometimes, it is beneficial to look into the quantiles instead of the box plot, mean or median. Quantile may give you a fair idea about the outliers. If there is a huge difference between the maximum value and the 95th or 99th quantiles, then there are outliers in the data set.\n\nTotal income will definitely vary from person to person. We can cap the outliers here","2ccfa853":"#### DAYS_EMPLOYED variable","c15d4b73":"#### DAYS_BIRTH variable","4025fb60":"#### Credit amount vs Education Status","a4a1a1de":"###### Those who have paid the loan amount on\/within time are more likely to get higher credits than those who didnt pay\/did late payments.People who have higher goods price and have made payments on time have higher credits than those with higher goods price but didnt pay loan.","be8b436a":"### Analyse continuous column with respect to the target column","836b5d1e":"## Business Objectives\n\nThis case study aims to identify patterns which indicate if a client has difficulty paying their installments which may be used for taking actions such as denying the loan, reducing the amount of loan, lending (to risky applicants) at a higher interest rate, etc. This will ensure that the consumers capable of repaying the loan are not rejected. Identification of such applicants using EDA is the aim of this case study.\n\n The company wants to understand the driving factors (or driver variables) behind loan default, i.e. the variables which are strong indicators of default.  The company can utilise this knowledge for its portfolio and risk assessment.\n\n","ef34e206":"### Categorical Variable","cced72e8":"In this AMT_CREDIT column we can see the outliers after 99th quantile at 4.05x10^6\nAmount credited also varies from person to person.","46b54c91":"#### AMT_CREDIT variable","345619f5":"#### AMT_GOODS_PRICE variable","c1550274":"## 7. Binning Continuous Variable","8aa48548":"### 10. Bivariate Analysis for target 0 and target 1","70d97225":"### Analyse Categorical variables with respect to Target variable\n","cfd903d2":"### Univariate Analysis","89211df2":"##### The plot clearly shows that labourers are most likely to make payment on time whereas HR staff are less likely to make payment on time","ed5aca18":"##### Here for Housing type, office appartment is having higher credit of target 0 and co-op apartment is having higher credit of target 1. So, we can conclude that bank should avoid giving loans to the housing type of co-op apartment as they are having difficulties in payment. Bank can focus mostly on housing type with parents or House\\appartment or miuncipal appartment for successful payments.","86c7bf55":"##### The plot clearly shows that labourers are most likely to make payment on time whereas HR staff are less likely to make payment on time","f71bac2e":"### Checking the imbalance Percentage","33315118":"## 4.Impute\/Remove missing values","b4c5162a":"![image.png](attachment:image.png)","ead38736":"## Introduction\nThis case study aims to give us an idea of applying EDA in a real business scenario. In this case study, we develop a basic understanding of risk analytics in banking and financial services and understand how data is used to minimise the risk of losing money while lending to customers.","712bbdfe":"### Bivariate Analysis","5ceb52e2":"#### EXT_SOURCE_2 variable","c03e23ec":"##### From the above plot,we can see that\n##### 1.Some of the highly educated, married person  are having credits higher than those who have done lower secondary eduction.\n##### 2.Those with higher eduction have higher credits and are more likely to make payments on time.\n##### 3.More number of outliers are seen in higher education.\n##### 4.The people with secondary and secndary special eduction are less likely to make payments on time.","58decb88":"#### Age","368e1330":"Notice that there are columns having almost 48%, 13%, 19% etc. missing values. When dealing with columns, you have two simple choices - either delete or retain the column. If you retain the column, you'll have to treat (i.e. delete or impute) the rows having missing values.\n\nIf you delete the missing rows, you lose data. If you impute, you introduce bias.\n\nApart from the number of missing values, the decision to delete or retain a variable depends on various other factors, such as:\n\nThe analysis task at hand,\nThe usefulness of the variable (based on your understanding of the problem),\nThe total size of available data (if you have enough, you can afford to throw away some of it)\netc.\nThus, for this exercise, let's remove the columns having more than missing values and which are not necessary for our analysis.","100072db":"#### Occupation_type","4e0046a4":"#### CONCLUSION\n##### 1. Banks should focus more on contract type \u2018Student\u2019 ,\u2019pensioner\u2019 and \u2018Businessman\u2019 with housing \u2018type other than \u2018Co-op apartment\u2019 for successful payments.\n\n#####  2. Banks should focus less on income type \u2018Working\u2019 as they are having most number of unsuccessful payments.\n\n##### 3. Also with loan purpose \u2018Repair\u2019 is having higher number of unsuccessful payments on time.\n\n##### 4. Get as much as clients from housing type \u2018With parents\u2019 as they are having least number of unsuccessful payments.","c0eccf33":"Hence here 'NAME_TYPE_SUITE' being a categorical variable, has about 0.42% of missing values. So here we can impute the missing values with the most popular category which is \"Unaccompanied\"","bde8e26f":"##### We  can see that Females with low income don\u2019t have any payment issues.\n","28be44ff":"##### Numeric-Numeric Analysis","c2e68ac2":"### Income vs Credit, Goods price vs Credit","32c8607d":"###### We can observe that customers belonging to age group 30-40 are able to make payment on time and can be considered while lending loan!\n##### The customers from 40 to 60 age are also can be considered.","1ab7ef74":"#### Prev Credit amount vs Loan Purpose","b5a27190":"## 5.Checking Datatypes ","fc47ff4c":"DAYS_BIRTH column we can see from box plot that there are no outliers. There is no much difference between mean and median. Which means that all the applications received from the customers are of almost same age. ","a83b9804":"Major approaches to the treat outliers:\n\n- **Imputation**\n- **Deletion of outliers**\n- **Binning of values**\n- **Cap the outlier**\n","b967877b":"###### Customers with less credit and most likely to make payment. Customers having medium and high credit can also be considered while lending the loan\n","cdc3219f":"#### Name _Income _Type","990dc7c9":"## 2.Reading and Inspection\n","423f6ee7":"EXT_SOURCE_2 column has less percentage of missing values. Here we can impute the missing values with 0","86bc9ad3":"So TARGET column has 8.07% of 1's which means 8% clients have payment difficulties and 91.92% are having no difficulties","8649ce09":"###### Points to be concluded from above plot:\n\nMost rejection of loans came from purpose 'Repairs'.\nFor education purposes we have equal number of approves and rejection\nPayinG other loans and buying a new car is having significant higher rejection than approves.","eaa7228d":"## 9.Correlation Matrix","bac6be26":"## 8.Analysis","b6a21225":"Thus, here we can see that there are 41 columns having the highest missing percentage( >=50%)  So here we remove those columns","a5ea4ac1":"We can see that 'AMT_ANNUITY' column is having very less percentage of null values and is also a numeric data.  These values can be imputed by the mean of the complete cases of the variable.\nSince this column is also having an outlier which is very large we can impute missing values with Median.","d02d215a":"#### Amount Annuity","f3e34abd":"###### Few points we can conclude from above plot:\n\n\nLoan purposes with 'Repairs' are facing more difficulites in payment on time.\nThere are few places where loan payment is significant higher than facing difficulties. They are 'Buying a garage', 'Business developemt', 'Buying land','Buying a new car' and 'Education' Hence we can focus on these purposes for which the client is having for minimal payment difficulties","dd5bd6a1":"##### We can see that for Target_0 dataframe, Social circle for 30 days and 60 days are most correlated and Goods price and Loan amount credit are highly correlated.Then we have Goods price and amount annuity on 4th place\n","d4636911":"#### NAME_TYPE_SUITE Variable","e56b09bd":"Here 'OCCUPATION_TYPE' is also a categorical variable, has about 31.3% of missing values. So here we can impute the missing values with the most popular category which is \"Laborers\"","589cc970":"To get rid of the repeated correlation values between two variables we perform the following steps","29434eaa":"There are three ways to analyse the numeric- numeric data types simultaneously.\n\nScatter plot: describes the pattern that how one variable is varying with other variable.\nCorrelation matrix: to describe the linearity of two numeric variables.\nPair plot: group of scatter plots of all numeric variables in the data frame","c13938ec":"### Income vs Education Status","54a9d3ad":"#### AMT_ANNUITY Variable","3c197def":"#### AMT_INCOME variable","90037fbe":"AMT_GOODS_PRICE has less percentage of missing values. And also has outliers. These missing values can be imputed with median ","2d31d561":"## 9. Reading the previous application","4bf77737":"## 3.Check missing values","9d0cf54e":"#### AMT_INCOME_TOTAL variable","d071b2bd":"##### From the above plots,\n##### 1.we can see that Higher education has many outliers.\n##### 2.People with higher eductaion have higher income and dont have difficulties in making loan payment.\n##### 3.People with higher education who ave lesser income are unable to pay the loan.\n##### Hence we can conclude that,people with Higher income are most likely to make payments.","449052e9":"#### AMT_ANNUITY variable","09d9a676":"#### OCCUPATION_TYPE variable","2092c033":"DAYS_EMPLOYED column has outliers at 365243. Number of days the person was employed varies from person to person","e98bc784":"### Income range- Gender","95dc416c":"As we take a look at AMT_ANNUITY column we can see that there are outliers at 258025.  But there is no much differece between the mean and median, We can impute the outliers with Median here\n","5a5ee5c6":"##### From the above plot we can see that,\n##### Female customers pay loan amount on time and banks can target more female cusytomers for lending loan.\n##### Working customers can be targetted to lend loans as they have higher percentage of making payments on time.\n##### Customers with secondary education are most likely to make payments when compared to customers with academic degree.\n##### Married customers have paid loan amount on time when compared to widows.\n##### Customers owning House\/apartment are most likely to make payments on time compared to those living in CO-OP apartment.\n##### Labourers have high repayement percentage. Hence baks can think of lending small amount loans to them.","d627e3db":"Now it is clear that which are Continuous and Categorical variables in the dataset givenn. Now we can consider some continuous and categorical variables and change the datatypes if needed","23684dfd":"### Numeric variable","d07e93b1":"#### Goods price","8f45906e":"###### From the observation above we can say that for target_1 dataframe Goods price and loan credit amount are most correlated next to social circle observations for different days. So the variables correlated in target_0 dataframe and target_1 dataframe are same with slightly verying correlation values","726c5d84":"## 6.Handling Outliers","71654898":"#### Credit Amount","dc2dd33e":"\nFrom the above we can conclude some points-\n\nThe credit amount of Loan purposes like 'Buying a home','Buying a land','Buying a new car' and'Building a house' is higher.\nIncome type of state servants have a significant amount of credit applied\nMoney for third person or a Hobby is having less credits applied for.","f7997263":"#### Amount credit range","3c38d011":"## 1. Import Libraries"}}