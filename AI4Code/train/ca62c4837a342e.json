{"cell_type":{"7f2b5031":"code","0479297d":"code","a64f0918":"code","f4a31c3e":"code","75d5d5d8":"code","506911c4":"code","b5314307":"code","29c2e708":"code","7696ce14":"code","1c00a5a2":"code","a4f12249":"code","6917dff4":"code","216dd51a":"code","0c5af018":"code","8ab23cd5":"code","325bfd85":"code","d5104ed5":"code","e120c2cb":"code","8ab06de1":"code","37186d2a":"code","d0edeb3e":"code","d284f91d":"code","75607beb":"code","e1bf88a9":"code","196e2e8c":"markdown","21d3f289":"markdown","6ce5dc13":"markdown","cac0a067":"markdown","56f9d59b":"markdown","446f094b":"markdown","2a6542d1":"markdown","31cb6241":"markdown","e2018ab5":"markdown","64a9bd0b":"markdown","d27961a7":"markdown","8d85d0ce":"markdown","c8771a89":"markdown","373f6c0c":"markdown","4b3d6e1b":"markdown","03e72d46":"markdown"},"source":{"7f2b5031":"# This Python 3 environment comes with many helpful analytics libraries installed\n# It is defined by the kaggle\/python Docker image: https:\/\/github.com\/kaggle\/docker-python\n# For example, here's several helpful packages to load\nfrom sklearn import tree\nimport numpy as np # linear algebra\nimport pandas as pd # data processing, CSV file I\/O (e.g. pd.read_csv)\nimport matplotlib.pyplot as plt\nfrom sklearn.model_selection import train_test_split\nfrom sklearn import preprocessing\nfrom sklearn import metrics\nimport seaborn as sns\nfrom sklearn.neighbors import KNeighborsRegressor\nfrom sklearn.linear_model import LinearRegression\nfrom sklearn.model_selection import KFold\nfrom sklearn import svm\nfrom sklearn.metrics import mean_absolute_error\nfrom xgboost import XGBRegressor\n# Input data files are available in the read-only \"..\/input\/\" directory\n# For example, running this (by clicking run or pressing Shift+Enter) will list all files under the input directory\n\nimport os\nfor dirname, _, filenames in os.walk('\/kaggle\/input'):\n    for filename in filenames:\n        print(os.path.join(dirname, filename))\n\n# You can write up to 20GB to the current directory (\/kaggle\/working\/) that gets preserved as output when you create a version using \"Save & Run All\" \n# You can also write temporary files to \/kaggle\/temp\/, but they won't be saved outside of the current session","0479297d":"data = pd.read_csv('..\/input\/solar-power-generation\/BigML_Dataset_5f50a4cc0d052e40e6000034.csv')\ndata.info()","a64f0918":"data.head()","f4a31c3e":"data.describe().transpose()","75d5d5d8":"data = data.dropna(axis=0)","506911c4":"subdata = data.groupby('Year').sum()['Power Generated']\nsubdata=subdata.to_frame()\nplt.figure(figsize=(16,6))\nsubdata.plot(kind='pie',legend = True, subplots=True)","b5314307":"plt.figure(figsize=(16,6))\nsubdata=data[[\"Average Temperature (Day)\",\"Power Generated\"]].groupby(\"Average Temperature (Day)\").mean()\nsubdata.head(5).plot(kind=\"barh\",grid=True,title = \"the 5 five avg temerature has a the small power generated \",stacked=True,color=['b', 'r', 'g', 'y', 'k'])\nsubdata.tail(5).plot(kind=\"barh\",grid=True,title = \"the 5 five avg temerature has a the big power generated \",stacked=True)","29c2e708":"plt.figure(figsize=(16,6))\nsubdata.plot()","7696ce14":"plt.figure(figsize=(16,6))\nsubdata = data.groupby(\"Relative Humidity\")[\"Power Generated\"].sum()\nsubdata.tail(5).plot(kind=\"barh\",grid=True,title = \"the 5 five Relative Humidity value has a the big power generated \",stacked=True)\nsubdata.head(5).plot(kind=\"barh\",grid=True,title = \"the 5 five Relative Humidity value has a the small power generated \",stacked=True)","1c00a5a2":"plt.figure(figsize=(16,6))\nsubdata.plot()","a4f12249":"plt.figure(figsize=(16,6))\nsubdata = data.groupby(\"Average Wind Speed (Period)\")[\"Power Generated\"].sum()\nsubdata.tail(5).plot(kind=\"barh\",grid=True,title = \"the 5 five wind speed value has a the big power generated \",stacked=True)\nsubdata.head(5).plot(kind=\"barh\",grid=True,title = \"the 5 five wind speed value has a the small power generated \",stacked=True)","6917dff4":"plt.figure(figsize=(16,6))\nsubdata.plot()","216dd51a":"data.columns","0c5af018":"sub_data = data[['Is Daylight', 'Distance to Solar Noon', 'Average Temperature (Day)', 'Average Wind Direction (Day)', 'Average Wind Speed (Day)', 'Sky Cover','Visibility', 'Relative Humidity', 'Average Wind Speed (Period)','Average Barometric Pressure (Period)', 'Power Generated']]\nplt.figure(figsize=(16,6))\ng = sns.PairGrid(sub_data)\ng.map(sns.scatterplot)\ng.add_legend()","8ab23cd5":"data.corr()","325bfd85":"f, ax = plt.subplots(figsize=(12, 12))\nsns.heatmap(data.corr().abs(), annot=True, linewidths=.5, ax=ax)","d5104ed5":"data.columns","e120c2cb":"features=['Day of Year', 'Year', 'Month', 'Day', 'First Hour of Period', 'Is Daylight', 'Distance to Solar Noon', 'Average Temperature (Day)', 'Average Wind Direction (Day)', 'Average Wind Speed (Day)', 'Sky Cover','Visibility', 'Relative Humidity', 'Average Wind Speed (Period)','Average Barometric Pressure (Period)']\nX = data[features]\ny = data[\"Power Generated\"]\nclf = tree.DecisionTreeRegressor(max_depth=5)\nclf.fit(X,y)\nprint(clf.score(X,y))\nimport graphviz \ndot_data = tree.export_graphviz(clf,feature_names = features,class_names=\"Power Generated\",filled=True, rounded=True,special_characters=True, out_file=None) \ngraph = graphviz.Source(dot_data) \ngraph","8ab06de1":"X_train, X_test, y_train, y_test = train_test_split(X, y, test_size=0.2 , random_state=10) # 70% training and 30% test\nscore_valeus=[]\nfor i in range(1,100):\n    model = KNeighborsRegressor(n_neighbors= i)\n    model.fit(X_train,y_train)\n    score = model.score(X_test,y_test)\n    score_valeus.append(score)\nscore_valeus\nax = np.arange(len(score_valeus))\nplt.figure(figsize=(16,6))\nplt.grid()\nplt.plot(ax,score_valeus)","37186d2a":"kf = KFold(n_splits=5,shuffle=True, random_state=30 )\nX = data[features].values\ny = data[\"Power Generated\"].values\nscores=[]\nfor train_index, test_index in kf.split(X):\n        X_train, X_test = X[train_index], X[test_index]\n        y_train, y_test = y[train_index], y[test_index]\n        model = KNeighborsRegressor(n_neighbors= 2)\n        model.fit(X_train,y_train)\n        score = model.score(X_test,y_test)\n        scores.append(score)\nscores\nplt.rcdefaults()\nfig, ax = plt.subplots()\n\npeople = ('first split', 'secod split', 'third split', 'fourth_splith', 'fivth_split')\ny_pos = np.arange(len(people))\nperformance = scores\n\nax.barh(y_pos, performance, align='center')\nax.set_yticks(y_pos)\nax.set_yticklabels(people)\nax.invert_yaxis()  # labels read top-to-bottom\nax.set_xlabel('score')\nax.set_title('score by split')\nplt.show()   ","d0edeb3e":"kf = KFold(n_splits=5,shuffle=True, random_state=30 )\nX = data[features].values\ny = data[\"Power Generated\"].values\nscores_knn=[]\nscore_lineare=[]\nfor train_index, test_index in kf.split(X):\n        X_train, X_test = X[train_index], X[test_index]\n        y_train, y_test = y[train_index], y[test_index]\n        model = KNeighborsRegressor(n_neighbors= 2)\n        model.fit(X_train,y_train)\n        score = model.score(X_test,y_test)\n        scores_knn.append(score)\n        model=LinearRegression()\n        model.fit(X_train,y_train)\n        score = model.score(X_test,y_test)\n        score_lineare.append(score)\nscore_lineare\nlabels = ['first split', 'secod split', 'third split', 'fourth_splith', 'fivth_split']\nmen_means = [20, 34, 30, 35, 27]\nwomen_means = [25, 32, 34, 20, 25]\n\nx = np.arange(len(labels))  # the label locations\nwidth = 0.35  # the width of the bars\n\nfig, ax = plt.subplots()\nrects1 = ax.bar(x - width\/2, score_lineare, width, label='lineare_models')\nrects2 = ax.bar(x + width\/2, scores_knn, width, label='knn_models')\n\n# Add some text for labels, title and custom x-axis tick labels, etc.\nax.set_ylabel('Scores')\nax.set_title('Scores by models and split')\nax.set_xticks(x)\nax.set_xticklabels(labels)\nax.legend()\n\nax.bar_label(rects1, padding=3)\nax.bar_label(rects2, padding=3)\n\nfig.tight_layout()\n\nplt.show()\n","d284f91d":"features=['First Hour of Period', 'Is Daylight', 'Distance to Solar Noon', 'Average Temperature (Day)', 'Average Wind Direction (Day)', 'Average Wind Speed (Day)', 'Sky Cover','Visibility', 'Relative Humidity', 'Average Wind Speed (Period)','Average Barometric Pressure (Period)']\nkf = KFold(n_splits=5,shuffle=True, random_state=30 )\nX = data[features].values\ny = data[\"Power Generated\"].values\nscores_knn=[]\nscore_lineare=[]\nfor train_index, test_index in kf.split(X):\n        X_train, X_test = X[train_index], X[test_index]\n        y_train, y_test = y[train_index], y[test_index]\n        model = KNeighborsRegressor(n_neighbors= 2)\n        model.fit(X_train,y_train)\n        score = model.score(X_test,y_test)\n        scores_knn.append(score)\n        model=LinearRegression()\n        model.fit(X_train,y_train)\n        score = model.score(X_test,y_test)\n        score_lineare.append(score)\nscore_lineare\nlabels = ['first split', 'secod split', 'third split', 'fourth_splith', 'fivth_split']\nmen_means = [20, 34, 30, 35, 27]\nwomen_means = [25, 32, 34, 20, 25]\n\nx = np.arange(len(labels))  # the label locations\nwidth = 0.35  # the width of the bars\n\nfig, ax = plt.subplots()\nrects1 = ax.bar(x - width\/2, score_lineare, width, label='lineare_models')\nrects2 = ax.bar(x + width\/2, scores_knn, width, label='knn_models')\n\n# Add some text for labels, title and custom x-axis tick labels, etc.\nax.set_ylabel('Scores')\nax.set_title('Scores by models and split')\nax.set_xticks(x)\nax.set_xticklabels(labels)\nax.legend()\n\nax.bar_label(rects1, padding=3)\nax.bar_label(rects2, padding=3)\n\nfig.tight_layout()\n\nplt.show()","75607beb":"features=[ 'First Hour of Period', 'Is Daylight', 'Distance to Solar Noon', 'Average Temperature (Day)', 'Average Wind Direction (Day)', 'Average Wind Speed (Day)', 'Sky Cover','Visibility', 'Relative Humidity', 'Average Wind Speed (Period)','Average Barometric Pressure (Period)']\nX = data[features].values\ny = data[\"Power Generated\"].values\nregr = svm.SVR()\nregr.fit(X, y)\nypred=regr.predict(X)\np=mean_absolute_error(ypred,y)\nprint(p)","e1bf88a9":"features=['Day of Year', 'Year', 'Month', 'Day', 'First Hour of Period', 'Is Daylight', 'Distance to Solar Noon', 'Average Temperature (Day)', 'Average Wind Direction (Day)', 'Average Wind Speed (Day)', 'Sky Cover','Visibility', 'Relative Humidity', 'Average Wind Speed (Period)','Average Barometric Pressure (Period)']\nX = data[features].values\ny = data[\"Power Generated\"].values\nX_train, X_test, y_train, y_test = train_test_split(X, y, test_size=0.2 , random_state=10) # 70% training and 30% test\nmy_model = XGBRegressor(n_estimators=500)\nmy_model.fit(X_train, y_train)\nypred = my_model.predict(X_test)\np=mean_absolute_error(ypred,y_test)\nprint(p)","196e2e8c":"* preparing the dataset and exploring feuture s'type ","21d3f289":"but removing year month day from list s'feauture acurency of each model will increase","6ce5dc13":"**Exploratory data analysis**","cac0a067":"the best number of neighbors is 2 neighbors with accurency  of 55% \nas we can see the model is not very good at this moment","56f9d59b":"more the wind is slow more the power generated is more big ","446f094b":"2. xboost models","2a6542d1":"power generated depend of the relative humidity ","31cb6241":"the new  accurency of knn is 69% and for the lineare model is 73.98%","e2018ab5":"as we can see the Pv cells work as well as temperature increase but coming to 78 degre the power producted will decrese \n","64a9bd0b":"in this part i will try apply knn method  for predict power generated based on the 12 feauture","d27961a7":"the power has producted in 2009 is too biger than taht producted in  2008 \nwith ration 302.44 % ","8d85d0ce":"**cleaning the data set **","c8771a89":"very well accurency in the lineare model comprated to the knn models with accurency of 69.5%","373f6c0c":"**now we want to summrize the probleme and see how the power generated change depend eacch feature**","4b3d6e1b":"best score is 57% honnestly very bad performance of this methode because the size of data is very little ","03e72d46":"1.svm models"}}