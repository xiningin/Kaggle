{"cell_type":{"0c52d13e":"code","6c8f8aec":"code","a64e3bd4":"code","980aecf0":"code","e07394c2":"code","7537e350":"code","420455ea":"code","8e9334e2":"code","f017fcdf":"code","19234003":"code","8a29050d":"code","e136fb8e":"code","2c71ea21":"code","62d9e457":"code","f2da5c3f":"code","e91acd06":"code","998de461":"code","1dbcd143":"code","94102b7d":"code","619bfa8c":"code","4d4c1498":"code","c678cdf1":"code","dc3ac972":"code","c7eff8b9":"code","1eb58984":"code","8ea93a0f":"code","4eebceaa":"code","f208eada":"code","f9c1e408":"code","4e5ae875":"code","0180dce4":"code","3d375245":"code","cae61380":"code","71eeb164":"code","7ed068d6":"code","827deccd":"code","2321d0d2":"markdown","5b3128aa":"markdown","44f43ef8":"markdown","d8abe8c0":"markdown","87eb287c":"markdown","b2d73860":"markdown","08b39378":"markdown","04ec66b6":"markdown","b64794fd":"markdown","949b464f":"markdown","d3721c39":"markdown","ee08c468":"markdown","05d8ce8b":"markdown","15929e9a":"markdown","39dd6bcb":"markdown","a3caf152":"markdown","5269f036":"markdown"},"source":{"0c52d13e":"import pandas as pd\nimport collections\nimport matplotlib.pyplot as plt\n","6c8f8aec":"import os\nfor dirname, _, filenames in os.walk('\/kaggle\/input'):\n    for filename in filenames:\n        print(os.path.join(dirname, filename))","a64e3bd4":"!ls \/kaggle\/input\/movielens-20m-dataset\/\n#!cat \/kaggle\/input\/movielens-20m-dataset\/movie.csv","980aecf0":"movies = pd.read_csv('\/kaggle\/input\/movielens-20m-dataset\/movie.csv', sep=',')\nmovies.head(10)","e07394c2":"movies.isnull().any()","7537e350":"ratings = pd.read_csv('\/kaggle\/input\/movielens-20m-dataset\/rating.csv', sep=',', parse_dates=['timestamp'])\nratings.head()","420455ea":"ratings.isnull().any()","8e9334e2":"ratings['rating'].describe()","f017fcdf":"#filter_1 = ratings['rating'] > 5\n","19234003":"movies_with_ratings = movies.merge(ratings, on='movieId', how='inner')","8a29050d":"movies_with_ratings.head(10)","e136fb8e":"#count most frequent genres\ncollections.Counter(\" \".join(movies[\"genres\"]).split(\"|\")).most_common(10)\n","2c71ea21":"collections.Counter(\" \".join(movies[\"genres\"]).split(\"|\")).most_common()[-10:]","62d9e457":"ratings.groupby('userId', as_index=False).count().sort_values(['movieId'], ascending=False)[:10]","f2da5c3f":"average_rating = ratings[['movieId','rating']].groupby('movieId', as_index=False).mean()\n","e91acd06":"movies_avg = movies.merge(average_rating, on='movieId', how='inner')\nmovies_avg.head(10)","998de461":"movies['year'] = movies['title'].str.extract('.*\\((.*)\\).*', expand=True)\nmovies.head(10)","1dbcd143":"is_Drama = movies_avg['genres'].str.contains('Romance',case=False)\nmovies_avg[\"rating\"][is_Drama].mean()\n","94102b7d":"movies_avg[is_Drama].head(10)","619bfa8c":"movies_avg[\"rating\"][is_Drama].count()","4d4c1498":"common_genres = collections.Counter(\" \".join(movies[\"genres\"]).split('|')).most_common(10)\nprint(common_genres)\n","c678cdf1":"def counting_genres():\n    for i in common_genres:\n        gen={}\n        is_genre = movies_avg['genres'].str.contains(i[0])\n        gen[i[0]]=movies_avg[\"rating\"][is_genre].mean()\n    return gen\n    \n\nprint(counting_genres())","dc3ac972":"def splitDataFrameList(df,target_column,separator):\n    ''' df = dataframe to split,\n    target_column = the column containing the values to split\n    separator = the symbol used to perform the split\n    returns: a dataframe with each entry for the target column separated, with each element moved into a new row. \n    The values in the other columns are duplicated across the newly divided rows.\n    '''\n    def splitListToRows(row,row_accumulator,target_column,separator):\n        split_row = row[target_column].split(separator)\n        for s in split_row:\n            new_row = row.to_dict()\n            new_row[target_column] = s\n            row_accumulator.append(new_row)\n    new_rows = []\n    df.apply(splitListToRows,axis=1,args = (new_rows,target_column,separator))\n    new_df = pd.DataFrame(new_rows)\n    return new_df\n\nsplitDataFrameList(movies,\"genres\",\"|\").head(10)","c7eff8b9":"movies_genres_splitted = splitDataFrameList(movies,\"genres\",\"|\")","1eb58984":"movies_genres_splitted_avg = movies_genres_splitted.merge(average_rating, on='movieId', how='inner')","8ea93a0f":"movies_genres_splitted_avg.head(10)","4eebceaa":"most_popular_genres = movies_genres_splitted_avg[['genres','rating']].groupby('genres', as_index=True).count().sort_values(['rating'], ascending=False)[:10]\nmost_popular_genres","f208eada":"best_rated= movies_genres_splitted_avg[['genres','rating']].groupby('genres', as_index=False).mean().sort_values(['rating'], ascending=False)[:10]\nbest_rated","f9c1e408":"best_rated.plot(x='genres', y='rating', title=\"Average highest ranked film genres\", figsize=(15,8),kind='bar')","4e5ae875":"cleaned = movies_genres_splitted_avg[pd.to_numeric(movies_genres_splitted_avg['year'], errors='coerce').notnull()]","0180dce4":"is_Documentary = cleaned[\"genres\"]==\"Documentary\"\nmovies_genres_splitted_avg_documentary = cleaned[is_Documentary]\nmovies_genres_splitted_avg_documentary[:5]","3d375245":"best_rated_documentaries= movies_genres_splitted_avg_documentary[['year','rating']].groupby('year', as_index=False).mean().sort_values(['year'], ascending=False)\nbest_rated_documentaries.plot(x='year', y='rating', title=\"Average ratings for Documentary films per year\", figsize=(15,8))","cae61380":"is_Filmnoir = cleaned[\"genres\"]==\"Film-Noir\"\nmovies_genres_splitted_avg_filmnoir = cleaned[is_Filmnoir]\nmovies_genres_splitted_avg_filmnoir[:5]","71eeb164":"best_rated_filmnoir= movies_genres_splitted_avg_filmnoir[['year','rating']].groupby('year', as_index=False).mean().sort_values(['year'], ascending=False)\nbest_rated_filmnoir.plot(x='year', y='rating', title=\"Average ratings for Film-Noir per year\", figsize=(15,8))","7ed068d6":"is_Thriller = cleaned[\"genres\"]==\"Thriller\"\nmovies_genres_splitted_avg_documentary = cleaned[is_Thriller]\nmovies_genres_splitted_avg_documentary[:5]\nbest_rated_documentaries= movies_genres_splitted_avg_documentary[['year','rating']].groupby('year', as_index=False).mean().sort_values(['year'], ascending=False)\nbest_rated_documentaries.plot(x='year', y='rating', title=\"Average ratings for Thriller films per year\", figsize=(15,8))","827deccd":"plt.figure(figsize=(15,8))\nplt.plot(best_rated_documentaries['year'], best_rated_documentaries['rating'], label='label here')\nplt.plot(best_rated_filmnoir['year'], best_rated_filmnoir['rating'], label='label here')\n\n#plt.plot(<X AXIS VALUES HERE>, <Y AXIS VALUES HERE>, 'line type', label='label here')\n#plt.legend(loc='best')\nplt.show()","2321d0d2":" ### Changes in Thriller films ratings\n \n As it was said before, thrillers, even though, are quite popular genres to shoot, they are not really liked by the audience. And the graph clearly shows us why. The best thrillers was filmed around 1960s and since that time are definitely degrading in quality by public opinion.\n ","5b3128aa":"### Movie.csv structure","44f43ef8":"### Most popular film genres\n\nNumber of occurrences of each film genre was counted. It should be noted, that one film could be counted a few times since it belongs to multiple genres.","d8abe8c0":"## References\nThe whole work was done by the author only, used the Dataset specified.\n ","87eb287c":"## Basic data exploration","b2d73860":"## About dataset\n\nFor this research I prefered to choose MovieLens DB, latest version obtained from https:\/\/grouplens.org\/datasets\/movielens\/latest\/.\nThe Dataset contains 27,000,000 ratings and 1,100,000 tag applications applied to 58,000 movies by 280,000 users. Includes tag genome data with 14 million relevance scores across 1,100 tags. Last updated 9\/2018.\n ","08b39378":"### Joing Movies.csv and Ratings.csv","04ec66b6":"## Motivation\n\nWe want to explore which film genres are tend to be rated highest and test the trend with the initial release date. The reason behind this study is to provide some insights on what film genres are mostly appreciated by general audience and whether some correlation exists with the year when a film was released and its ratings.\n ","b64794fd":"### Changes in Film noir films ratings\n\nIn contrast with Documentaries, Film noirs ratings do not change a lot and basically the Golden age for this genre happened to be around 1980s. After and before those years average ratings are generally a bit worse.\n ","949b464f":"### Most common film genres","d3721c39":"###  Changes in Documentary films ratings\n\nIf we want to explore any trends in Documentary films average ratings per release year we can find significant improvement for the last 50 years with a few probable outliers. It might be considered that present time documentaries are generally more popular than those filmed earlier 1950s.\n ","ee08c468":"### Ratings.csv dates parsing","05d8ce8b":"## Imports and paths","15929e9a":"### Basic descriptive statistics","39dd6bcb":"## Research Questions\n\nQuestions for this study are:\n1. Find the most popular film genres.\n2. Find the most highly ranked film genres by average user\u2019s ratings.\n3. Find the trend with average ratings for a specific genre by release\n4. date and explore with the most popular film genres.\n ","a3caf152":"## Acknowledgements\n* F. Maxwell Harper and Joseph A. Konstan. 2015. The MovieLens Datasets: History and Context. ACM Transactions on Interactive Intelligent Systems (TiiS) 5, 4, Article 19 (December 2015), 19 pages. DOI=http:\/\/dx.doi.org\/10.1145\/2827872\n ","5269f036":"###  Most highly rated film genres\n\nThe most favourite film genres as following: Documentary, Film-Noir, IMAX, War and Musicals, see figure 2. It\u2019s interesting to notice, none of the top 3 most counted film genres is highly rated. Moreover, Thrillers and Action films do not seem to be highly acclaimed at all."}}