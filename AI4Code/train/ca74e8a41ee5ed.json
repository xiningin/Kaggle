{"cell_type":{"a4b834f9":"code","1bb3ffce":"code","0b6ceea4":"code","9ea0bf9d":"code","19694e7e":"code","fd9fe8fb":"code","4095effd":"code","6c3401d9":"code","21ba3af4":"code","0f1a1b57":"code","0e31221f":"code","94cb78e9":"code","2991f69f":"code","c71066ee":"code","21ec5ba3":"code","bb31979d":"code","1a22d2a8":"code","dbb8e1ec":"code","9393f0d2":"code","72a3edc7":"code","98d8e2c7":"code","3c122e4d":"code","265d4d9b":"code","3bd98609":"code","7e8ba30d":"code","ed4ecb59":"code","751177df":"code","f68f3bce":"code","b7d61980":"markdown","952f60ba":"markdown","499e1695":"markdown","3210babd":"markdown","6f54ae93":"markdown","f52ffe6b":"markdown","41be38f2":"markdown","f3a5c3b3":"markdown","e91bb3fd":"markdown","27e2666c":"markdown","63dfd184":"markdown","8176adbe":"markdown","46ec2dcb":"markdown","19c75065":"markdown","f3ad8fc3":"markdown","95e4fc62":"markdown","f0de0248":"markdown","c8f2ed7e":"markdown","131941a2":"markdown","4e55b074":"markdown","82d33f6c":"markdown","a4adaad7":"markdown","cc411f41":"markdown","2ccfbcd4":"markdown","4daaefdc":"markdown","048428d5":"markdown","1ff27a9a":"markdown","cd06bd97":"markdown"},"source":{"a4b834f9":"# This Python 3 environment comes with many helpful analytics libraries installed\n# It is defined by the kaggle\/python Docker image: https:\/\/github.com\/kaggle\/docker-python\n# For example, here's several helpful packages to load\n\nimport numpy as np # linear algebra\nimport pandas as pd # data processing, CSV file I\/O (e.g. pd.read_csv)\n\n# Input data files are available in the read-only \"..\/input\/\" directory\n# For example, running this (by clicking run or pressing Shift+Enter) will list all files under the input directory\n\nimport os\nfor dirname, _, filenames in os.walk('\/kaggle\/input'):\n    for filename in filenames:\n        print(os.path.join(dirname, filename))\n\n# You can write up to 5GB to the current directory (\/kaggle\/working\/) that gets preserved as output when you create a version using \"Save & Run All\" \n# You can also write temporary files to \/kaggle\/temp\/, but they won't be saved outside of the current session","1bb3ffce":"df = pd.read_csv('\/kaggle\/input\/netflix-shows\/netflix_titles.csv')\n\nprint(df.shape)","0b6ceea4":"df.head()","9ea0bf9d":"for i in df.columns:\n    null_rate = df[i].isna().sum() \/ len(df) * 100 \n    if null_rate > 0 :\n        print(f\"{i}'s null rate : {null_rate}%\")","19694e7e":"df = df.fillna('NULL')\ndf['year_added'] = df['date_added'].apply(lambda x :  x.split(',')[-1])\ndf['year_added'] = df['year_added'].apply(lambda x : x if x != 'NULL' else '2020')\ndf['year_added'] = df['year_added'].apply(int)","fd9fe8fb":"import matplotlib.pyplot as plt\nimport seaborn as sns\nimport plotly \nimport plotly.graph_objects as go\nimport plotly.express as px\nfrom plotly.subplots import make_subplots","4095effd":"from wordcloud import WordCloud, STOPWORDS, ImageColorGenerator\nplt.rcParams['figure.figsize'] = (13, 13)\nstop_words = [\"https\", \"co\", \"RT\", \"The\"] + list(STOPWORDS) \n\nwordcloud = WordCloud(stopwords = stop_words,background_color = 'black', width = 1000,  height = 1000, max_words = 121).generate(' '.join(df['title']))\n\nplt.imshow(wordcloud)\nplt.axis('off')\nplt.title('Most Popular Words in Title',fontsize = 30)\nplt.show()","6c3401d9":"df['type'].unique()","21ba3af4":"movie = df[df['type'] == 'Movie']\ntv_show = df[df['type'] == 'TV Show']","0f1a1b57":"col = \"type\"\ngrouped = df[col].value_counts().reset_index()\ngrouped = grouped.rename(columns = {col : \"count\", \"index\" : col})\n\nfig = px.pie(grouped, values='count', names='type', color_discrete_sequence=px.colors.sequential.Bluered, title='Content types')\nfig.show()","0e31221f":"import matplotlib.patheffects as path_effects\nyear_data = df['year_added'].value_counts().sort_index().loc[:2019]\ntype_data = df.groupby('type')['year_added'].value_counts().sort_index().unstack().fillna(0).T.loc[:2019] \n\nfig, ax = plt.subplots(1,1, figsize=(28, 15))\nax.plot(year_data.index, year_data,  color=\"white\", linewidth=5, label='Total', path_effects=[path_effects.SimpleLineShadow(),\n                       path_effects.Normal()])\nax.plot(type_data.index, type_data['Movie'], color='skyblue', linewidth=5, label='Movie', path_effects=[path_effects.SimpleLineShadow(),\n                       path_effects.Normal()])\nax.plot(type_data.index, type_data['TV Show'], color='salmon', linewidth=5, label='TV Show', path_effects=[path_effects.SimpleLineShadow(),\n                       path_effects.Normal()])\n\nax.set_xlim(2006, 2020)\nax.set_ylim(-40, 2700)\n\nt = [\n    2008,\n    2010.8,\n    2012.1,\n    2013.1,\n    2015.7,\n    2016.1,\n    2016.9\n]\n\nevents = [\n    \"Launch Streaming Video\\n2007.1\",\n    \"Expanding Streaming Service\\nStarting with Candata | 2010.11\",\n    \"Expanding to Europe\\n2012.1\",\n    \"First Original Content\\n2013.2\",\n    \"Expanding to Japan\\n2015.9\",\n    \"Original targeting Kids\\n2016\/1\",\n    \"Offline Playback Features to all of Users\\n2016\/11\"\n]\n\nup_down = [ \n    100,\n    110,\n    280,\n    110,\n    0,\n    0,\n    0\n]\n\nleft_right = [\n    -1,\n    -0,\n    -0,\n    -0,\n    -1,\n    -1,\n    -1.6,\n    ]\n\nfor t_i, event_i, ud_i, lr_i in zip(t, events, up_down, left_right):\n    ax.annotate(event_i,\n                xy=(t_i + lr_i, year_data[int(t_i)] * (int(t_i+1)-t_i) + year_data[int(t_i)+1]  * (t_i-int(t_i)) + ud_i),\n                xytext=(0,0), textcoords='offset points',\n                va=\"center\", ha=\"center\",\n                color=\"w\", fontsize=16,\n                bbox=dict(boxstyle='round4', pad=0.5, color='#303030', alpha=0.90))\n    \n    # A proportional expression to draw the middle of the year\n    ax.scatter(t_i, year_data[int(t_i)] * (int(t_i+1)-t_i) + year_data[int(t_i)+1]  * (t_i-int(t_i)), color='#E50914', s=300)\n\nax.set_facecolor((0.4, 0.4, 0.4))\nax.set_title(\"Why Netflix's Conetents Count Soared?\", position=(0.23, 1.0+0.03), fontsize=30, fontweight='bold')\nax.yaxis.set_tick_params(labelsize=20)\nax.xaxis.set_tick_params(labelsize=20)\nplt.legend(loc='upper left', fontsize=20)\n\nplt.show()","94cb78e9":"temp_df = df['rating'].value_counts().reset_index()\n\n\n# create trace1\ntrace1 = go.Bar(\n                x = temp_df['index'],\n                y = temp_df['rating'],\n                marker = dict(color = 'rgb(255,165,0)',\n                              line=dict(color='rgb(0,0,0)',width=1.5)))\nlayout = go.Layout(template= \"plotly_dark\",title = 'MOST OF PROGRAMME ON NEYFLIX IS TV-14 & TV-MA RATED' , xaxis = dict(title = 'Rating'), yaxis = dict(title = 'Count'))\nfig = go.Figure(data = [trace1], layout = layout)\nfig.show()","2991f69f":"fig = px.pie(temp_df, values='rating', names='index',\n             title='RATING & CONTENT TYPE',)\nfig.update_traces(textposition='inside', textinfo='percent+label')\nfig.show()","c71066ee":"df1 = df[df[\"type\"] == \"TV Show\"]\ndf2 = df[df[\"type\"] == \"Movie\"]\n\ntemp_df1 = df1['rating'].value_counts().reset_index()\ntemp_df2 = df2['rating'].value_counts().reset_index()\n\n\n# create trace1\ntrace1 = go.Bar(\n                x = temp_df1['index'],\n                y = temp_df1['rating'],\n                name=\"TV Shows\",\n                marker = dict(color = 'rgb(249, 6, 6)',\n                             line=dict(color='rgb(0,0,0)',width=1.5)))\n# create trace2 \ntrace2 = go.Bar(\n                x = temp_df2['index'],\n                y = temp_df2['rating'],\n                name = \"Movies\",\n                marker = dict(color = 'rgb(26, 118, 255)',\n                              line=dict(color='rgb(0,0,0)',width=1.5)))\n\n\nlayout = go.Layout(template= \"plotly_dark\",title = 'RATING BY CONTENT TYPE' , xaxis = dict(title = 'Rating'), yaxis = dict(title = 'Count'))\nfig = go.Figure(data = [trace1, trace2], layout = layout)\nfig.show()","21ec5ba3":"from collections import Counter\ncountry_data = df['country']\ncountry_counting = pd.Series(dict(Counter(','.join(country_data).replace(' ,',',').replace(', ',',').split(',')))).sort_values(ascending=False)\ncountry_counting.drop(['NULL'], axis=0, inplace=True)","bb31979d":"tot = sum(country_counting)\ntop20 = sum(country_counting[:20]) # 22 is real 20% but for simple processing\n\nprint(f'total : {tot}')\nprint(f'top 20 countries : {top20}')\nprint(f'percentage : {top20}\/{tot} = {100 * top20\/tot}')","1a22d2a8":"top20_country = country_counting[:20]","dbb8e1ec":"\nfig = make_subplots(rows=1, cols=2, specs=[[{'type':'xy'}, {'type':'domain'}]])\nfig.add_trace(go.Bar(x = top20_country.index, y = top20_country),row=1, col=1)\nfig.add_trace(go.Pie(labels = top20_country.index, values = top20_country),row=1, col=2)\n\nfig.update_layout(title='Top 20 producing countries', xaxis_title = \"Countries\",\n    yaxis_title = \"amount\")\nfig.show()","9393f0d2":"df['country'] = df['country'].dropna().apply(lambda x :  x.replace(' ,',',').replace(', ',',').split(','))\nlst_col = 'country'\ndata2 = pd.DataFrame({\n      col :  np.repeat(df[col].values, df[lst_col].str.len())\n      for col in df.columns.drop(lst_col)}\n    ).assign(**{lst_col:np.concatenate(df[lst_col].values)})[df.columns.tolist()]\nyear_country2 = data2.groupby('year_added')['country'].value_counts().reset_index(name='counts')\n\nfig = px.choropleth(year_country2, locations=\"country\", color=\"counts\", \n                    locationmode='country names',\n                    animation_frame='year_added',\n                    range_color=[0,80],\n                    color_continuous_scale=px.colors.sequential.Plasma\n                   )\n\nfig.update_layout(title='Comparison by country')\nfig.show()","72a3edc7":"from sklearn.preprocessing import MultiLabelBinarizer # Similar to One-Hot Encoding\n\ndef relation_heatmap(df, title):\n    df['genre'] = df['listed_in'].apply(lambda x :  x.replace(' ,',',').replace(', ',',').split(',')) \n    Types = []\n    for i in df['genre']: Types += i\n    Types = set(Types)\n    print(f\"There are {len(Types)} types in the Netflix {title} Dataset\")    \n    test = df['genre']\n    mlb = MultiLabelBinarizer()\n    res = pd.DataFrame(mlb.fit_transform(test), columns=mlb.classes_, index=test.index)\n    corr = res.corr()\n    mask = np.zeros_like(corr, dtype=np.bool)\n    mask[np.triu_indices_from(mask)] = True\n    fig, ax = plt.subplots(figsize=(15, 14))\n    pl = sns.heatmap(corr, mask=mask, cmap= \"coolwarm\", vmax=.5, vmin=-.5, center=0, square=True, linewidths=.7, cbar_kws={\"shrink\": 0.6})\n    \n    plt.show()","98d8e2c7":"relation_heatmap(movie, 'Movie')","3c122e4d":"relation_heatmap(tv_show, 'TV Show')","265d4d9b":"from wordcloud import WordCloud, STOPWORDS, ImageColorGenerator\nplt.rcParams['figure.figsize'] = (13, 13)\nstop_words = [\"https\", \"co\", \"RT\", \"The\"] + list(STOPWORDS) \n\nwordcloud = WordCloud(stopwords = stop_words,background_color = 'black', width = 1000,  height = 1000, max_words = 121).generate(' '.join(df['description']))\n\nplt.imshow(wordcloud)\nplt.axis('off')\nplt.title('Most Popular Words in description',fontsize = 30)\nplt.show()\n","3bd98609":"us_series_data=tv_show[tv_show['country']=='United States']","7e8ba30d":"oldest_us_series=us_series_data.sort_values(by='release_year')[0:20]","ed4ecb59":"fig = go.Figure(data=[go.Table(header=dict(values=['Title', 'Release Year'],fill_color='paleturquoise'),\n                 cells=dict(values=[oldest_us_series['title'],oldest_us_series['release_year']],fill_color='pink'))\n                     ])\nfig.show()","751177df":"newest_us_series=us_series_data.sort_values(by='release_year', ascending=False)[0:50]","f68f3bce":"fig = go.Figure(data=[go.Table(header=dict(values=['Title', 'Release Year'],fill_color='yellow'),\n                 cells=dict(values=[newest_us_series['title'],newest_us_series['release_year']],fill_color='lavender'))\n                     ])\nfig.show()","b7d61980":"**Most popular words in Title**","952f60ba":"# **3. Rating **","499e1695":"For analysis, make **movie** data & **TV Show** data.","3210babd":"# **1. Content Type on Netflix**","6f54ae93":"# **TV-MA: MATURE AUDIENCE ONLY **\nThis program is specifically designed to be viewed by adults and therefore may be unsuitable for children under 17. This program contains one or more of the following: graphic violence (V), explicit sexual activity (S), or crude indecent language (L).\n\n# **TV-14: PARENTS STRONGLY CAUTIONED**\nThis program contains some material that parents would find unsuitable for children under 14 years of age. Parents are strongly urged to exercise greater care in monitoring this program and are cautioned against letting children under the age of 14 watch unattended. This program contains one or more of the following: intense violence (V), intense sexual situations (S), strong coarse language (L), or intensely suggestive dialogue (D).","f52ffe6b":"obviously looking at year_added over time, we can see where the export is going.","41be38f2":"Let's count on the other side for a moment, and using the **Pareto principle(80\/20 rule)** can help you visualize your data.","f3a5c3b3":"First, let's check the relationship between each genre by movie and TV show.","e91bb3fd":"So this time, let's visualize only the **top 20 countries**.","27e2666c":"let's fill the null data","63dfd184":"import the visualization libraries","8176adbe":"**Movie** Genre Relatation","46ec2dcb":"# **oldest US tv shows on Netflix.**","19c75065":"There are **two** types: **'Movie'** and **'TV Show'**","f3ad8fc3":"# **latest released US television shows**","95e4fc62":"**68.4%** of the content on netflix is **movies** and **31.6%** of them are **TV shows**","f0de0248":"# **2. Growth in content over the years**","c8f2ed7e":"There are 6234 videos, and each of them has 12 features.\n\n**director**,**cast**, **country**\n\nThese 3 elements have a lot of null data.\n\n* **director** : Only the director who has taken the most work seems to be able to visualize it separately.\n* **cast** may be assumed to be zero if converted to number of people.\n* **country** also seems to be classified as none.","131941a2":"# **5. Movie & TV show (Genre)**","4e55b074":"Clearly, you can see that the **US** is close to 40%.\nthe **United States, India, and the United Kingdom**have a high percentage of content.","82d33f6c":"**TV Show Genre Relation**","a4adaad7":"Now it would be nice to compare them by **country.**\n\nWe need to count the countries, but first I need to preprocess the data inside the country columns.\n\nAnd this time, let's see how we can represent the graph of this comparison.","cc411f41":"# **4. Content from different Countries**","2ccfbcd4":"* The growth in content started from 2013.\n* Netflix kept on adding different movies and tv shows on its platform over the years. \n* The growth in number of movies on netflix is much higher than that in TV shows. About 1300 new movies were added in both 2018 and 2019. ","4daaefdc":"**Which country produces the most Contents?**","048428d5":"In film, the **negative** relationship between **drama** and **documentary** is remarkable. You can also see that there are many dramas for independent and international films.","1ff27a9a":"**TV shows** are more clearly correlated than movies.\n\nThe most obvious is the relationship between **kids and International** (Could it be that kids' content is important to their culture?), **Science & Natural and Docuseries**.","cd06bd97":"# **Most popular words in description**"}}