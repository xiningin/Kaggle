{"cell_type":{"63bb5b97":"code","3aed19c2":"code","bf65f3af":"code","3e34a501":"code","f6e66ae1":"code","30a61b55":"code","34d51512":"code","159004f8":"code","d4b34a53":"code","688eb56b":"code","6ce81e07":"code","cd5a5fb3":"code","5ab805a9":"code","ab5f913c":"markdown","2a1ab8e1":"markdown","dfe3babe":"markdown","e904153a":"markdown","22a38696":"markdown","3fc5d83a":"markdown","f95c93e9":"markdown","1757cea2":"markdown","a1ababe9":"markdown","62f68c96":"markdown","25b7bc7d":"markdown","151e65d5":"markdown","634690bc":"markdown","e705e2a9":"markdown"},"source":{"63bb5b97":"import numpy as np \nimport pandas as pd\nimport seaborn as sns\n\nfrom matplotlib import pyplot as plt","3aed19c2":"df = pd.read_csv('\/kaggle\/input\/us-border-crossing-data\/Border_Crossing_Entry_Data.csv')\ndf['Date'] = pd.to_datetime(df['Date'])","bf65f3af":"d1 = df.groupby('Date').sum()\nd1 = d1.sort_index()\n\nplt.figure(figsize=(12,12))\nplt.plot(d1.index,d1['Value'])\nplt.tick_params(axis='both',labelsize=14)\n\nplt.ylabel('Value (10 million)',fontsize=12)\nplt.title('US-Canada\/US-Mexico monthly border crossings',fontsize=12)\n\n\nplt.show()","3e34a501":"plt.figure(figsize=(12,12))\nplt.plot(d1.index,d1['Value'])\nplt.ylabel('Number of people (10 million)',fontsize=12)\nplt.tick_params(axis='both',labelsize=14)\nplt.title('US-Canada\/US-Mexico monthly border crossings',fontsize=20)\nyear_loc = pd.Timestamp('1996-07-13') + pd.timedelta_range(start='0 day', periods=26, freq='365D')\nyear_lab = [x.year for x in year_loc]\nplt.xticks(year_loc, year_lab,rotation=90)\nplt.xlabel('Year',fontsize=20)\n\n\nyear_start = pd.Timestamp('1996-01-02') + pd.timedelta_range(start='0 day', periods=26, freq='365D')\nfor y in year_start:\n    plt.axvline(y,color='red',alpha=0.4)\n\n\n","f6e66ae1":"plt.figure(figsize=(12,12))\nplt.plot(d1.index,d1['Value'])\nplt.ylabel('Value (10 million)',fontsize=12)\nplt.tick_params(axis='both',labelsize=14)\nplt.title('US-Canada\/US-Mexico monthly border crossings',fontsize=20)\nyear_loc = pd.Timestamp('1996-07-13') + pd.timedelta_range(start='0 day', periods=26, freq='365D')\nyear_lab = [x.year for x in year_loc]\nplt.xticks(year_loc, year_lab,rotation=90)\nplt.xlabel('Year',fontsize=20)\n\n\nyear_start = pd.Timestamp('1996-01-02') + pd.timedelta_range(start='0 day', periods=26, freq='365D')\nfor y in year_start:\n    plt.axvline(y,color='red',alpha=0.4)\n    \n\ndf1 = df[['Value','Date']].groupby('Date').sum()\ndf1['Date'] = df1.index\ndf1.index = np.arange(df1.count()[0])\ndf1['Year'] = df1['Date'].apply(lambda x: x.year)\nmax_vals = df1.sort_values('Value', ascending=False).drop_duplicates(['Year']).sort_values('Year')\nplt.scatter(max_vals['Date'].values, max_vals['Value'],c='red')\n\n\n","30a61b55":"plt.figure(figsize=(8,8))\nmonths = max_vals['Date'].apply(lambda x: x.month)\nplt.bar(months.groupby(months).count().index,months.groupby(months).count())\nplt.xticks(np.arange(1,13),'Jan, Feb, Mar, Apr, May, Jun, Jul, Aug, Sep, Oct, Nov, Dec'.split(','))\nplt.ylabel('Count')\nplt.title('Months of maximum number of crossings')","34d51512":"plt.figure(figsize=(12,12))\nplt.plot(d1.index,d1['Value'])\nplt.ylabel('Number of people (10 million)',fontsize=12)\nplt.tick_params(axis='both',labelsize=14)\nplt.title('US-Canada\/US-Mexico monthly border crossings',fontsize=20)\nyear_loc = pd.Timestamp('1996-07-13') + pd.timedelta_range(start='0 day', periods=26, freq='365D')\nyear_lab = [x.year for x in year_loc]\nplt.xticks(year_loc, year_lab,rotation=90)\nplt.xlabel('Year',fontsize=20)\n\n\nyear_start = pd.Timestamp('1996-01-02') + pd.timedelta_range(start='0 day', periods=26, freq='365D')\nfor y in year_start:\n    plt.axvline(y,color='red',alpha=0.4)\n    \n\ndf1 = df[['Value','Date']].groupby('Date').sum()\ndf1['Date'] = df1.index\ndf1.index = np.arange(df1.count()[0])\ndf1['Year'] = df1['Date'].apply(lambda x: x.year)\nmin_vals = df1.sort_values('Value', ascending=True).drop_duplicates(['Year']).sort_values('Year')\nplt.scatter(min_vals['Date'].values, min_vals['Value'],c='red')","159004f8":"plt.figure(figsize=(8,8))\nmonths = min_vals['Date'].apply(lambda x: x.month)\nplt.bar(months.groupby(months).count().index,months.groupby(months).count())\nplt.xticks(np.arange(1,13),'Jan, Feb, Mar, Apr, May, Jun, Jul, Aug, Sep, Oct, Nov, Dec'.split(','))\nplt.ylabel('Count')\nplt.title('Months of minimum number of crossings')","d4b34a53":"plt.figure(figsize=(8,8))\n\n#Number of people crossing both borders\nUS_Canada = df[df['Border'] == 'US-Canada Border']['Value'].sum()\nUS_Mexico = df[df['Border'] == 'US-Mexico Border']['Value'].sum()\nplt.bar(['Canada','Mexico'],height=[US_Canada,US_Mexico])\nplt.title(\"Total number of crossings\")\nplt.ylabel(\"Value (1 billion)\")","688eb56b":"means_of_transport = df.groupby('Measure').sum()['Value']\nmeans_of_transport = means_of_transport.sort_values(ascending=False)\n\ntruncated = means_of_transport[means_of_transport > 67036035]\ntruncated = truncated.append(pd.Series({'Others': means_of_transport[means_of_transport < 67036035].sum()}))\n\nplt.figure(figsize=(10,10))\nplt.pie(truncated,labels=truncated.index)\nplt.title('Means of crossing (Both borders)')","6ce81e07":"means_of_tr_both_cntr = df.groupby(['Border','Measure']).sum()['Value']\nplt.figure(figsize=(5,10))\n\n\ntr_can = means_of_tr_both_cntr['US-Canada Border'].sort_values(ascending=False)[:5]\n\npd.Series({'Others': means_of_tr_both_cntr['US-Canada Border'].sort_values(ascending=False)[5:].sum()})\ntr_can = tr_can.append(pd.Series({'Others': means_of_tr_both_cntr['US-Canada Border'].sort_values(ascending=False)[5:].sum()}))\nplt.subplot(2,1, 1)\nplt.pie(tr_can,\n        labels=tr_can.index)\nplt.title('US-Canada border')\n\n\nplt.subplot(2, 1, 2)\ntr_mex = means_of_tr_both_cntr['US-Mexico Border'].sort_values(ascending=False)[:5]\ntr_mex = tr_mex.append(pd.Series({'Others': means_of_tr_both_cntr['US-Mexico Border'].sort_values(ascending=False)[5:].sum()}))\nplt.pie(tr_mex,\n        labels=tr_mex.index)\nplt.title('US-Mexico border')","cd5a5fb3":"crossing_states = df.groupby(['Border','State']).sum()['Value']\ncross_can = crossing_states['US-Canada Border']\ncross_can = cross_can.sort_values(ascending=False)\n\ncross_can_tr = cross_can[:7]\ncross_can_tr = cross_can_tr.append(pd.Series({'Others': cross_can[7:].sum()}))\n\nplt.figure(figsize=(10,10))\nplt.pie(cross_can_tr.values,labels=cross_can_tr.index)\n\n\nplt.title('Which state is most frequently entered into? US-Canada border')","5ab805a9":"#For mexico, we get\ncross_mex = crossing_states['US-Mexico Border']\ncross_mex = cross_mex.sort_values(ascending=False)\n\nplt.figure(figsize=(10,10))\nplt.pie(cross_mex.values,labels=cross_mex.index)\n\nplt.title('Which state is most frequently entered into? US-Mexico border')","ab5f913c":"# Which state is most frequently entered into? US-Canada border","2a1ab8e1":"# Now, for each year, we want to find the month where the number of crossings is the largest. Visually, we want to find months which correponds to the red dots on the following graph","dfe3babe":"# We can see that there are way more pedestrian crosses via US-Mexico border.","e904153a":"# For most years, largest number of crossings either occured in July or in August (Except 2020, because for 2020 we only have data for January and February)","22a38696":"# Which state is most frequently entered into? US-Mexico border","3fc5d83a":"# Compare number of total crossings for both borders","f95c93e9":"# After binning our plot, we can see that there is a very distinct pattern of monthly crossings each year, namely: the smallest number of crossings always happens in the beginning of the year, and the largest number happens somewhere in the middle of the year","1757cea2":"# Now let's see which method of transportation is the most prevalent","a1ababe9":"# Now let's find exactly what those months are","62f68c96":"# Timeline of monthly crossings: 1996-2020","25b7bc7d":"\n# Now let's find out what were the months where the number of crossings was the smallest. Visually, we want to find months that correspond to the red dots in the following graph","151e65d5":"# And now each border separately","634690bc":"# To gain more pespective, let's bin the plot above. (Each bin will represent a particular year)","e705e2a9":"# And yet again, we see a very stable pattern: For each year, minimum number of crossings happens in February (Except year 2001)"}}