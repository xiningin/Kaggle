{"cell_type":{"8d9c5799":"code","3fec9854":"code","1535b6aa":"code","3e0f0a44":"code","ffa25b8e":"code","91e9505d":"code","bcd951f4":"code","ced1ded9":"code","b269f9db":"code","39ec1f95":"markdown","cb01979c":"markdown","1e3d6148":"markdown","0becc112":"markdown","014a3c8f":"markdown","eef66ae0":"markdown","3975e345":"markdown","ef9aabd4":"markdown","1a218864":"markdown","a7b4a0e8":"markdown"},"source":{"8d9c5799":"# import packages\nimport numpy as np\nimport pandas as pd\nimport matplotlib.pyplot as plt\nimport seaborn as sns\nfrom sklearn import linear_model\nfrom sklearn.model_selection import train_test_split\nfrom sklearn.metrics import r2_score\n\n# read in training and test data\ntrain_data = pd.read_csv('...\/input\/titanic\/train.csv')\ntest_data = pd.read_csv('..\/input\/titanic\/test.csv')","3fec9854":"fig, ax = plt.subplots(figsize=(10,5))\nsns.heatmap(train_data.iloc[:,1:].corr(), annot = True, ax = ax)\nplt.show()","1535b6aa":"# barchart of pclass vs. survival\nfig, ax = plt.subplots(figsize = (10,5))\n\n# retrieve relevant data\nsurvived = train_data[train_data['Survived'] == 1]['Pclass'].value_counts()\nperished = train_data[train_data['Survived'] == 0]['Pclass'].value_counts()\nsurvived.sort_index(inplace = True)\nperished.sort_index(inplace = True)\n\n# plot data\nbar_width = 0.35\nsurvived_bar = plt.bar(survived.index.values, survived, bar_width, label = \"Survived\")\nperished_bar = plt.bar(perished.index.values + bar_width, perished, bar_width, label = \"Died\")\n\n# plot labels\nplt.xlabel('Socio-Economic Class')\nplt.ylabel('Number of passengers')\nplt.title('Survivals for each socio-economic class')\nplt.xticks(survived.index.values + 0.175, ('Upperclass', 'Middleclass', 'Lowerclass'))\nplt.legend()\n\n# show plot\nplt.tight_layout()\nplt.show()","3e0f0a44":"# get copy of the main data frame\ntemp_df = train_data.copy()\ntemp_df = temp_df[['Survived', 'Sex']]\n\n# get number of who survived and died for the males\nmen_survived = temp_df[temp_df['Sex'] == 'male']['Survived'].value_counts()[1]\nmen_perished = temp_df[temp_df['Sex'] == 'male']['Survived'].value_counts()[0]\ntotal_males = men_survived + men_perished\nmen_data = [men_survived, men_perished]\/total_males\n\n# get number of who survived and died for the females\nwomen_survived = temp_df[temp_df['Sex'] == 'female']['Survived'].value_counts()[1]\nwomen_perished = temp_df[temp_df['Sex'] == 'female']['Survived'].value_counts()[0]\ntotal_females = women_survived + women_perished\nwomen_data = [women_survived, women_perished]\/total_females\n\n# plot two piecharts for both genders\nfig, (ax1, ax2) = plt.subplots(1, 2, figsize = (10,5))\nax1.pie(men_data, labels = ['Survived', 'Died'], colors = ['green', 'red'], autopct = '%1.1f%%')\nax1.set_title('Survival for men on the titanic')\nax2.pie(women_data, labels = ['Survived', 'Died'], colors = ['green', 'red'], autopct = '%1.1f%%')\nax2.set_title('Survival for women on the titanic')\n\n# display plot\nplt.tight_layout()\nplt.show()","ffa25b8e":"# retrieve all the survivor's ages\ntemp_df = train_data.copy()\ntemp_df = temp_df[temp_df['Survived'] == 1]\nagedist = temp_df.sort_values('Age')\nagedist = agedist['Age']\n\n# display histogram\nfig = plt.figure(figsize = (10,5))\nplt.hist(agedist[~np.isnan(agedist)], edgecolor='black', linewidth = 1.2, bins = 50)\nplt.xlabel('Age')\nplt.ylabel('Number Survived')\nplt.title('Number of people who survived by age')\nplt.show()","91e9505d":"# retrieve the appropriate data\ntemp_df = train_data[['Survived', 'SibSp']].copy()\ntemp_df = temp_df[temp_df['Survived'] == 1]['SibSp']\n\n# plot histogram of the distribution\nfig = plt.figure(figsize = (10,5))\nplt.hist(temp_df, bins = np.arange(5) - 0.25, edgecolor='black', linewidth = 1.2, width = 0.5, color = 'green')\nplt.xlabel('Number of siblings\/spouses for the individual')\nplt.ylabel('Number survived')\nplt.title('Distribution of the individuals who survived based on number of siblings\/spouses')\nplt.show()","bcd951f4":"# retrieve the appropriate data\ntemp_df = train_data[['Survived', 'Parch']].copy()\ntemp_df = temp_df[temp_df['Survived'] == 1]['Parch']\n\n# plot histogram of the distribution\nfig = plt.figure(figsize = (10,5))\nplt.hist(temp_df, bins = np.arange(5) - 0.25, edgecolor='black', linewidth = 1.2, width = 0.5, color = 'green')\nplt.xlabel('Number of parents\/children for the individual')\nplt.ylabel('Number survived')\nplt.title('Distribution of the individuals who survived based on number of parents\/children')\nplt.show()","ced1ded9":"# retrieve data\ntemp_df = train_data[['Survived', 'Fare']].copy()\ntemp_df.sort_values(by = ['Fare'], inplace = True)\n\n# plot scatterplot\nfig = plt.figure(figsize = (10,5))\nplt.scatter(temp_df['Fare'].values, temp_df['Survived'].values, color = 'orange')\nplt.xlabel('Passenger Fare')\nplt.ylabel('Survival chance')\nplt.title('Survival rate based on the passenger fare to get onboard the Titanic')\nplt.show()","b269f9db":"# seperate the survived column from the training data as a response vector\n# drop features that are not useful such as the Name and Ticket etc...\nfeatures = train_data.drop([\"Survived\", \"Name\", \"Ticket\", \"Cabin\", \"Embarked\"], axis = 1)\nresponse = train_data[\"Survived\"]\n\n# data wrangling process\n# change the male\/female terms in the Sex column into 0 and 1 respectively\nfeatures.loc[features['Sex'] == 'male', 'Sex'] = 0\nfeatures.loc[features['Sex'] == 'female', 'Sex'] = 1\n\n# remove NaN values for each column and replace with the mean of the respective columns values\nfeatures['Age'] = features['Age'].fillna(features['Age'].dropna().mean())\nfeatures['Fare'] = features['Fare'].fillna(features['Fare'].dropna().mean())\n\n# conduct same cleansing procedure for the test_data\ntest_data = test_data.drop([\"Name\", \"Ticket\", \"Cabin\", \"Embarked\"], axis = 1)\ntest_data.loc[test_data['Sex'] == 'male', 'Sex'] = 0\ntest_data.loc[test_data['Sex'] == 'female', 'Sex'] = 1\ntest_data['Age'] = test_data['Age'].fillna(test_data['Age'].dropna().mean())\ntest_data['Fare'] = test_data['Fare'].fillna(test_data['Fare'].dropna().mean())\n\n# build the model\nlogreg = linear_model.LogisticRegression(solver='lbfgs', max_iter = 5000)\nlogreg_fit = logreg.fit(features, response)\nlogreg_predict = logreg.predict(test_data)\n\n# crate new dataframe to store the predicted survival chances along with the passenger id\nsubmission_df = pd.DataFrame({'PassengerID': test_data['PassengerId'],\n                             'Survived': logreg_predict})\nsubmission_df.to_csv('submission.csv', index = False)","39ec1f95":"<h1>Titanic - Logistic Regression Model<\/h1>\n\n<u><h3>Objective<\/h3><\/u>\n<p>The goal is to predict which passengers would of survived the tragedy using machine learning as we all learning all the types of people who have survived with graphical analysis.<\/p>\n\n<u><h3>Setup<\/h3><\/u>","cb01979c":"**Comment:** Now, that we have built our model, fit our training data to it and used the model to predict the survival of the passengers in the testing dataset we have put it into a dataframe ready for submission, adhearing to the submission format of course.","1e3d6148":"**Comment**: It is quite evident that the women on the titanic had a much greater chance of survival then men as we can see above they had a 74.2% survival rate as opposed the the 18.9% survival rate for men.\n\n<h4>Survival distribution by age<\/h4>","0becc112":"**Comment**: It seems that most survivors on the Titanic had either 1 or none siblings or spouses onboard where as the survival chance of individuals who had greater than 1 were low. However, this is not conclusive as there may have been insufficient data for individuals who had 2 or more siblings or spouses and here we did not encapsulate the age of these individuals nor consider that they may not have had siblings or spouses on board but may have parents or children.\n    \n<h4>Survival distributed based on individual's number of parents\/children aboard the Titanic<\/h4>","014a3c8f":"**Comment**: Here, there is no evidence of any linear relationships, which usually implies a linear model is sufficient but since we know that we have a binary response, it would be definitely more suitable to utilize a logistic regression model.\n\n<h4>Barchart of the survival of the passengers based on their social class<\/h4>","eef66ae0":"**Comment**: Here, we can see the a majority of those that escaped safely were predominantly younger than 40 and only the individuals in the teenage years had a lower survival rate in the younger group whereas the infants had a higher chance of survival. Furthermore when we examine the second piechart above, we can see that a majority of these survivors would of being female.\n\n<h4>Survival distributed based on individual's number of siblings\/spouses on the Titanic<\/h4>","3975e345":"**Comment**: Here, we see that the upperclass has the highest survival rate out of the three and a proportion of the upperclass made it out alive. The middle class was about equal chance of survival and has the lowest amount of passengers out of the three social classes. Lastly, we see that the lowerclass had the least survival chance as most passengers of this social class perished as denoted by the high number of deaths. Also, it had the higher number of passengers compared to the other two. In conclusion, we can agree that the upperclass individuals had a higher chance and the middle class had equal chance, while the lower class had lowest chance of survival proportionally.\n\n<h4>Piechart of those who survived, categorized by gender<\/h4>","ef9aabd4":"<u><h3>Data Definitions<\/h3><\/u>\n<table>\n<tbody>\n<tr><th><b>Variable<\/b><\/th><th><b>Definition<\/b><\/th><th><b>Key<\/b><\/th><\/tr>\n<tr>\n<td>survival<\/td>\n<td>Survival<\/td>\n<td>0 = No, 1 = Yes<\/td>\n<\/tr>\n<tr>\n<td>pclass<\/td>\n<td>Ticket class<\/td>\n<td>1 = 1st, 2 = 2nd, 3 = 3rd<\/td>\n<\/tr>\n<tr>\n<td>sex<\/td>\n<td>Sex<\/td>\n<td><\/td>\n<\/tr>\n<tr>\n<td>Age<\/td>\n<td>Age in years<\/td>\n<td><\/td>\n<\/tr>\n<tr>\n<td>sibsp<\/td>\n<td># of siblings \/ spouses aboard the Titanic<\/td>\n<td><\/td>\n<\/tr>\n<tr>\n<td>parch<\/td>\n<td># of parents \/ children aboard the Titanic<\/td>\n<td><\/td>\n<\/tr>\n<tr>\n<td>ticket<\/td>\n<td>Ticket number<\/td>\n<td><\/td>\n<\/tr>\n<tr>\n<td>fare<\/td>\n<td>Passenger fare<\/td>\n<td><\/td>\n<\/tr>\n<tr>\n<td>cabin<\/td>\n<td>Cabin number<\/td>\n<td><\/td>\n<\/tr>\n<tr>\n<td>embarked<\/td>\n<td>Port of Embarkation<\/td>\n<td>C = Cherbourg, Q = Queenstown, S = Southampton<\/td>\n<\/tr>\n<\/tbody>\n<\/table>\n\n<u><h3>Variable Notes<\/h3><\/u>\n<p><b>pclass<\/b>: A proxy for socio-economic status (SES)<br> 1st = Upper<br> 2nd = Middle<br> 3rd = Lower<br><br> <b>age<\/b>: Age is fractional if less than 1. If the age is estimated, is it in the form of xx.5<br><br> <b>sibsp<\/b>: The dataset defines family relations in this way...<br> Sibling = brother, sister, stepbrother, stepsister<br> Spouse = husband, wife (mistresses and fianc\u00e9s were ignored)<br><br> <b>parch<\/b>: The dataset defines family relations in this way...<br> Parent = mother, father<br> Child = daughter, son, stepdaughter, stepson<br> Some children travelled only with a nanny, therefore parch=0 for them.<\/p>\n\n<u><h3>Exploratory Data Analysis<\/h3><\/u>\nSince our focus is on the survival of each passenger, it would be wise to graphically analyze all the quantitative variables against the survival variable in the training dataset.\n\n<h4>Correlation Matrix of all the variables<\/h4>","1a218864":"**Comment**: Similarly we have the same trend as above with many survivors having no parents or children on board on the Titanic and the downtrend continues as the number increases.\n    \n<h4>Survival distributed based on the passenger fare<\/h4>","a7b4a0e8":"**Comment:** Here, we can see that there is a slight increase in the survival chance as the passenger fare increases. This is especially true at the right tail of the data points as we see when the fares from 100 and above, there is more individuals surviving as opposed to dieing and we have some outliers in the 500 fare range which also shows they have survived.\n\n<u><h3>Machine Learning Algorithm: Logistic Regression<\/h3><\/u>\nSince we have a binary response, it would definitely be wise to use a logistic regression model to fit our data and we should select the appropriate features to use in our model."}}