{"cell_type":{"91fb4be6":"code","b7b6b075":"code","97cfb380":"code","f69f2aa8":"code","6277379d":"code","19603536":"code","a31f654d":"code","c6c954a4":"code","d9d7bb09":"code","efded594":"code","fb27b26f":"code","0cde7928":"code","a346b0de":"code","e596be14":"code","679d4444":"markdown","de8b6172":"markdown","cb7959f9":"markdown","afab20e5":"markdown","e5fd1563":"markdown","2974b5a0":"markdown","10452b4d":"markdown","b7aacdbc":"markdown","2f51b68e":"markdown","da59e30d":"markdown","03be851b":"markdown","79e45eb2":"markdown","caae2780":"markdown","393e0fb7":"markdown","63e819a0":"markdown","6a3644a3":"markdown","0898ee92":"markdown","2ae4fcb5":"markdown","d0b9e4d3":"markdown","483cde62":"markdown","19692522":"markdown","f35daf8d":"markdown"},"source":{"91fb4be6":"import numpy as np # linear algebra\nimport pandas as pd\nimport matplotlib as mpl\nimport matplotlib.pyplot as plt\n%matplotlib inline\nimport seaborn as sns\nimport scipy.stats as st\nfrom scipy import stats\n\nfrom sklearn.linear_model import Lasso, LinearRegression\nfrom sklearn.model_selection import train_test_split\nfrom sklearn.tree import DecisionTreeRegressor as dtr\nfrom sklearn.ensemble import RandomForestClassifier as rfc\nfrom sklearn.preprocessing import StandardScaler\nfrom sklearn.metrics import r2_score, mean_squared_error, mean_absolute_error\n\nimport missingno as msno\nimport plotly.express as px\nimport plotly.graph_objects as go\nimport plotly.figure_factory as ff\nfrom plotly.colors import n_colors\nfrom plotly.subplots import make_subplots\nfrom PIL import Image\nimport os\nfor dirname, _, filenames in os.walk('\/kaggle\/input'):\n    for filename in filenames:\n        print(os.path.join(dirname, filename))","b7b6b075":"data = pd.read_csv('..\/input\/new-york-city-airbnb-open-data\/AB_NYC_2019.csv')\ndata.head()","97cfb380":"data.drop(['name','id','host_name','last_review'], axis=1, inplace=True)\ndata['reviews_per_month'].fillna(0, inplace=True)\ndata.isnull().sum()","f69f2aa8":"map_nyc = np.array(Image.open('\/kaggle\/input\/new-york-city-airbnb-open-data\/New_York_City_.png'))\nplt.figure(figsize = (10, 10))\nplt.imshow(map_nyc)\nplt.axis('off')\nplt.ioff()\nplt.show()","6277379d":"title = 'Neighbourhood Group Locations'\nplt.figure(figsize = (10, 8))\nsns.scatterplot(data.longitude, data.latitude, hue = data.neighbourhood_group).set_title(title)\nplt.ioff()","19603536":"plt.figure(figsize = (20, 10))\ntitle = 'Correlation matrix of numerical variables'\nsns.heatmap(data.corr(), square = True, cmap = 'Spectral')\nplt.title(title)\nplt.ioff()","a31f654d":"fig = px.scatter_mapbox(data, lat = \"latitude\", lon = \"longitude\", color = \"neighbourhood\", size = \"price\", size_max = 30, opacity = .70, zoom = 12)\nfig.layout.mapbox.style = 'carto-positron'\nfig.update_layout(title_text = 'NYC Neighbourhood', height = 750)\nfig.show()","c6c954a4":"data2 = data.loc[(data['price'] < 300) & (data['reviews_per_month'] < 10)]\ntitle = 'Price relation to number of review per month for Properties under $300'\nf, ax = plt.subplots(figsize = (8, 6))\nsns.scatterplot(x = 'reviews_per_month', y = 'price', data = data2, color = 'red')\nplt.title(title)\nplt.ioff()\n\nplt.figure(figsize = (18, 8))\nsns.barplot(x = data.number_of_reviews[:50], y = data.neighbourhood[:50])\nplt.xticks(rotation = 90)\nplt.show()","d9d7bb09":"colors = ['orange', 'turquoise', 'silver']\n\nlabels = data.room_type.value_counts().index\nvalues = data.room_type.value_counts().values\nplt.figure(0, figsize = (7, 7))\nplt.pie(values, labels = labels, colors = colors, autopct = '%1.1f%%')\nplt.title('Airbnb According to Neighbourhood Group')\nplt.show()","efded594":"data3 = data.dropna(subset = [\"price\"]).groupby(\"neighbourhood\")[[\"neighbourhood\", \"price\"]].agg(\"mean\").sort_values(by = \"price\",\n                                ascending = False).rename(index = str, columns = {\"price\": \"Average price\/night\"}).head(10)\n\ndata3.plot(kind = 'bar', color = 'gold')\nplt.show()\n\ndata3 = data.dropna(subset = [\"price\"]).groupby(\"neighbourhood\")[[\"neighbourhood\", \"price\"]].agg(\"mean\").sort_values(by = \"price\",\n                                ascending = False).rename(index = str, columns = {\"price\": \"Average price\/night\"}).tail(10)\n\ndata3.plot(kind = 'bar', color = 'purple')\nplt.show()","fb27b26f":"target_columns = ['neighbourhood_group','room_type','price','minimum_nights','calculated_host_listings_count','availability_365']\ndata_1 = data[target_columns]\n\n#Below we encode values of the forst column since they are strings and cannot be converted to float for linear regression\ndata_1['room_type'] = data_1['room_type'].factorize()[0]\ndata_1['neighbourhood_group'] = data_1['neighbourhood_group'].factorize()[0]\ndata_1.head()","0cde7928":"Y = data_1['price']\nX = data_1.drop(['price'],axis=1)\nX_train, X_test, Y_train, Y_test = train_test_split(X, Y, test_size = .1, random_state = 42)","a346b0de":"def regression_models(X_train, Y_train, X_test, Y_test):\n#Linear Regression\n    lr = LinearRegression()\n    lr.fit(X_train,Y_train)\n    y_pred = (lr.predict(X_test))\n    print(\"LINEAR REGRESSION\\nR-squared train score: \", lr.score(X_train, Y_train))\n    print(\"R-squared test score: \", lr.score(X_test, Y_test))\n#Lasso Regression\n    las = Lasso(alpha = 0.0001)\n    las.fit(X_train, Y_train)\n    print(\"\\nLASSO REGRESSION\\nR-squared train score: \", las.score(X_train, Y_train))\n    print(\"R-squared test score: \", las.score(X_test, Y_test))\n#Decision Tree\n    dec_tree = dtr(min_samples_leaf = 25)\n    dec_tree.fit(X_train, Y_train)\n    print(\"\\nDECISION TREE\\nR-squared train score: \", dec_tree.score(X_train, Y_train))\n    print(\"R-squared test score: \", dec_tree.score(X_test, Y_test))\n#Random Forest Regressor\n    rfr = rfc()\n    rfr.fit(X_train, Y_train)\n    print(\"\\nRANDOM FOREST REGRESSOR\\nR-squared train score: \", rfr.score(X_train, Y_train))\n    print(\"R-squared test score: \", rfr.score(X_test, Y_test))","e596be14":"regression_models(X_train, Y_train, X_test, Y_test)","679d4444":"**Map of Airbnb locations in NYC**","de8b6172":"The correlation plot indicates the absence of a strong relationship between price and other factors.","cb7959f9":"Here, we notice that not many prefer shared rooms. Families of more than 4 people might choose an entire home\/apartment over a single room. Since the percentage of an entire home\/apartments is greater, we can conclude that majority of tourists are a family of more than 2 people and the other portion, a private room would be for couples and single travellers. ","afab20e5":"**10 Most & Least Expensive Airbnb Neighbourhoods**","e5fd1563":"Displaying it more simply below, the two charts distinguish neighbourhood groups in NYC. As observed in the chart above, majority Airbnbs lie in Manhattan followed by Brooklyn. These two places are popular tourist destinations and as shown in the chart below, attest that have higher count than Staten Island or Bronx.","2974b5a0":"**Correlation**","10452b4d":"The above map, although, already provided, shows the region of NYC where most Airbnbs are present. As observed, most of NYC has several Airbnbs. A tourist attraction, it is no suprise that Airbnb is highly successful in NYC.","b7aacdbc":"**Train Test Split**","2f51b68e":"**Type of Rooms**","da59e30d":"For low price airbnbs, there are some reviews. However, if the prices were high here, we'd see less reviews per month. Not very helpful to have such little reviews. Thus, we may conclude that there is no strong relationship between the reviews per month and price.","03be851b":"# **INTRODUCTION**\n\nStarting the business back in 2008, Airbnb's site now lists more than six million rooms, flats and houses in more than 81,000 cities across the globe. On average, two million people rest their heads in an Airbnb property each night \u2013 half a billion. I will be analyising the influence of Airbnb on New York City.\n\n![1200x-1.jpg](attachment:1200x-1.jpg)","79e45eb2":"There is a sharp drop in prices (around $200) after Tribeca. Rest both charts seem to have similar prices respectively. Tribeca being one of the fanciest localities of New York with trendy boutiques and restaurants alongside Washington Market Park and Hudson River Park,it draws tourists from all around the world. The old industrial buildings turned residential lofts are picture perfect locations for many people.","caae2780":"# **DATA VISUALIZATION**\n\n**Neigbourhood Groups**","393e0fb7":"# **REGRESSION**","63e819a0":"**Regression function**","6a3644a3":"# **DATA EXPLORATION**\n\nHere, I will download the dataset and libraries required. In addition, I will familiarise myslef with the dataset by researching on the topic and gaining insights. As highlighted in many articles, Airbnb supply concentrates in those parts of New York City with a young population.\n\n**Importing Libraries**","0898ee92":"**Data Modification**","2ae4fcb5":"**Loading Dataset**","d0b9e4d3":"**Price of each neighbourhood**","483cde62":"# **CONCLUSION**","19692522":"We have built four models to predict the R-squared values. These model do not possess a strong predictive power to account for the variation in the dataset.\n\nObserving the comparatively similar values of the training and test errors and the negligible difference between them indicates that the available features are not sufficient to construct a optimal model. This problem can be fixed by adding more data with higher prices. Therefore, this dataset is not enough to predict housing with high prices.\n","f35daf8d":"The above chart highlights the neighbourhood comparison. We can state that the popular neighbourhoods are too expensive for certain tourists, they might prefer staying at Airbnbs in neighbourhoods that are comparatively cheaper and closer to locations like Manhattan."}}