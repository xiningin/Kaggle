{"cell_type":{"50ed2ae4":"code","f75140c6":"code","9459181d":"code","f977e854":"code","c794de48":"code","715449ae":"code","2e82e399":"code","165ac72c":"code","644469f8":"code","845a91a8":"code","5fbf165a":"code","d9961a12":"code","cb633423":"code","5c1ee05f":"code","10c75d00":"code","5c90fecd":"code","89d80323":"code","b6f581d0":"code","0513dcfa":"code","d01b8aff":"code","e1b52c86":"code","f892a2ff":"code","f4159b68":"code","3437707f":"code","e4ff7299":"code","6b69f5bb":"code","1eeea54f":"code","c5736b2f":"code","3cca76dd":"code","f50aebfb":"code","34d605f1":"code","b4b3f39e":"code","eb65a997":"code","5377b9db":"markdown","d898231b":"markdown"},"source":{"50ed2ae4":"import pandas as pd\nimport numpy as np\nfrom matplotlib import pyplot as plt\n%matplotlib inline","f75140c6":"train = pd.read_csv(\"..\/input\/train_V2.csv\")","9459181d":"train.head()","f977e854":"train.shape","c794de48":"print(train[\"matchType\"].unique())\nprint(len(train[\"matchType\"].unique()))","715449ae":"# \u3069\u3046\u3084\u3089\u6b20\u640d\u5024\u304c\u542b\u307e\u308c\u3066\u3044\u308b\u6a21\u69d8\ntrain.isna().sum()","2e82e399":"train[train['winPlacePerc'].isna()]","165ac72c":"# \u6b20\u640d\u5024\u306f\u524a\u9664\uff01\ntrain.drop(2744604, inplace=True)","644469f8":"def get_features(df, is_remove=True):\n    df['totalDistance'] = df['rideDistance'] + df['walkDistance'] + df['swimDistance']\n    if is_remove:\n        # \u3068\u308a\u3042\u3048\u305a\u52d5\u304b\u305a\u306bkill\u3057\u3066\u308b\u306e\u306f\u30c1\u30fc\u30bf\u30fc\u3068\u307f\u306a\u3059\n        killsWithoutMoving = ((df['kills'] > 0) & (df['totalDistance'] == 0))\n        # \u52d5\u304b\u305a\u306b\u30ad\u30eb\u3057\u3066\u3044\u308b\u30d7\u30ec\u30a4\u30e4\u30fc\u306f\u524a\u9664\n        df.drop(df[killsWithoutMoving == True].index, inplace=True)\n        # \u30ad\u30eb\u591a\u3059\u304e\u308b\u3084\u3064\u304c\u3044\u308b\u30c1\u30fc\u30bf\u30fc\u3060\u308d\n        TooManykills = train['kills'] > 30\n        df.drop(df[TooManykills].index, inplace=True)\n    return df","845a91a8":"# \u30c7\u30fc\u30bf\u591a\u3059\u304e\u3066\u5b66\u7fd2\u304c\u7d42\u308f\u3089\u306a\u3044\u306e\u3067\u3068\u308a\u3042\u3048\u305a 5\u4e07\u4ef6\nsample = train.sample(n=50000)","5fbf165a":"sample_copy = sample.copy()","d9961a12":"sample = get_features(sample, is_remove=False)","cb633423":"sample_drop = get_features(sample_copy, is_remove=True)","5c1ee05f":"print(sample.shape)\nprint(sample_drop.shape)","10c75d00":"from sklearn.metrics import mean_absolute_error\nfrom xgboost import XGBRegressor\nfrom lightgbm import LGBMRegressor","5c90fecd":"xgb_model_1 = XGBRegressor()\nxgb_model_2 = XGBRegressor()\nlgbm_model_1 = LGBMRegressor()\nlgbm_model_2 = LGBMRegressor()","89d80323":"def drop_axis(df):\n    x = df.drop(columns=[\"Id\", \"groupId\", \"matchId\", \"matchType\", \"winPlacePerc\"])\n    y = df[\"winPlacePerc\"]\n    return x, y","b6f581d0":"sample_x, sample_y = drop_axis(sample)\nsample_drop_x, sample_drop_y = drop_axis(sample_drop)","0513dcfa":"xgb_model_1.fit(sample_x, sample_y)","d01b8aff":"lgbm_model_1.fit(sample_x, sample_y)","e1b52c86":"xgb_model_2.fit(sample_drop_x, sample_drop_y)","f892a2ff":"lgbm_model_2.fit(sample_drop_x, sample_drop_y)","f4159b68":"from xgboost import plot_importance as xgb_plot\nfrom lightgbm import plot_importance as lgbm_plot","3437707f":"# \u3069\u306e\u5909\u6570\u304c\u30e2\u30c7\u30eb\u306e\u7cbe\u5ea6\u5411\u4e0a\u306b\u5f71\u97ff\u3057\u3066\u3044\u308b\u304b\u3092\u898b\u3066\u307f\u308b\nxgb_plot(xgb_model_1)","e4ff7299":"xgb_plot(xgb_model_2)","6b69f5bb":"lgbm_plot(lgbm_model_1)","1eeea54f":"lgbm_plot(lgbm_model_2)","c5736b2f":"# xgboost\u306e\u307f\n# \u30c1\u30fc\u30bf\u30fc\u60c5\u5831\u3092\u4f7f\u308f\u306a\u304b\u3063\u305f\u5834\u5408\nxgb_model_1_predict = xgb_model_1.predict(sample_x)\nprint('Mean Absolute Error is {:.5f}'.format(mean_absolute_error(sample_y,\n                                                                 xgb_model_1_predict)))","3cca76dd":"# lightgbm\u306e\u307f\n# \u30c1\u30fc\u30bf\u30fc\u60c5\u5831\u3092\u4f7f\u308f\u306a\u304b\u3063\u305f\u5834\u5408\nlgbm_model_1_predict = lgbm_model_1.predict(sample_x)\nprint('Mean Absolute Error is {:.5f}'.format(mean_absolute_error(sample_y,\n                                                                 lgbm_model_1_predict)))","f50aebfb":"# stakking\u3057\u3066\u307f\u308b\nprint('Mean Absolute Error is {:.5f}'.format(mean_absolute_error(sample_y,\n                                                                 0.5 * xgb_model_1_predict + 0.5 * lgbm_model_1_predict)))","34d605f1":"# xgboost\u306e\u307f\n# \u30c1\u30fc\u30bf\u30fc\u60c5\u5831\u3092\u4f7f\u3063\u305f\u5834\u5408\nxgb_model_2_predict = xgb_model_2.predict(sample_drop_x)\nprint('Mean Absolute Error is {:.5f}'.format(mean_absolute_error(sample_drop_y,\n                                                                 xgb_model_2_predict)))","b4b3f39e":"# lightgbm\u306e\u307f\n# \u30c1\u30fc\u30bf\u30fc\u60c5\u5831\u3092\u4f7f\u3063\u305f\u5834\u5408\nlgbm_model_2_predict = lgbm_model_2.predict(sample_drop_x)\nprint('Mean Absolute Error is {:.5f}'.format(mean_absolute_error(sample_drop_y,\n                                                                 lgbm_model_2_predict)))","eb65a997":"# stakking\u3057\u3066\u307f\u308b\nprint('Mean Absolute Error is {:.5f}'.format(mean_absolute_error(sample_drop_y,\n                                                                 0.5 * xgb_model_2_predict + 0.5 * lgbm_model_2_predict)))","5377b9db":"# PUBG\u30b3\u30f3\u30da\n## PUBG\u3063\u3066\u4f55\uff1f\n\u307e\u305a\u306f\u3053\u3061\u3089\u3092\u5fa1\u89a7\u304f\u3060\u3055\u3044\n- <iframe width=\"560\" height=\"315\" src=\"https:\/\/www.youtube.com\/embed\/5dxequUSxjA?start=838\" frameborder=\"0\" allow=\"accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture\" allowfullscreen><\/iframe>\n\n- <iframe width=\"560\" height=\"315\" src=\"https:\/\/www.youtube.com\/embed\/5dxequUSxjA?start=1353\" frameborder=\"0\" allow=\"accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture\" allowfullscreen><\/iframe>\n\n## \u3069\u3093\u306a\u30b3\u30f3\u30da\u304b\uff1f\n- \uff11\uff10\uff10\u4eba\u4e2d\u4f55\u4f4d\u306b\u306a\u308b\u304b**\uff10\u304b\u3089\uff11\u307e\u3067\u306e\u9806\u4f4d\uff08\uff10\u304c\u30d3\u30ea\u3001\uff11\u304c\u30c8\u30c3\u30d7\uff09**\u3092\u4e88\u6e2c\u3059\u308b\n- \u30ab\u30fc\u30cd\u30eb\u30aa\u30f3\u30ea\u30fc\u30eb\u30fc\u30eb\u3001\u4eca\u66f8\u3044\u3066\u3044\u308b**\u30ab\u30fc\u30cd\u30eb\u306e\u307f**\u3067\u3057\u304b\u7d50\u679c\u306e\u63d0\u51fa\u306f\u8a8d\u3081\u3089\u308c\u306a\u3044\u3002\n- \uff10\u304b\u3089\uff11\u307e\u3067\u306e\u6570\u5024\u3092\u4e88\u6e2c\u3059\u308b\u306e\u3067**\u56de\u5e30\u554f\u984c**\u3067\u3042\u308b\n- \u8a55\u4fa1\u95a2\u6570\u304c\u5e73\u5747\u7d76\u5bfe\u8aa4\u5dee\uff08MAE\uff09\u3092\u4f7f\u7528\u3001**\u5c0f\u3055\u3051\u308c\u3070\u5c0f\u3055\u3044\u307b\u3069\u30b9\u30b3\u30a2\u304c\u826f\u3044**\n\n- \u53c2\u8003: [Otto\u89e3\u6cd5\u8aac\u660e\u30ab\u30fc\u30cd\u30eb](https:\/\/www.kaggle.com\/wakamezake\/neural-networks-product-classification-otto)","d898231b":"# train_V2.csv\n## \u30ab\u30e9\u30e0\u306b\u3064\u3044\u3066\n- Id\n\u30d7\u30ec\u30fc\u30e4\u30fc\u500b\u3005\u306b\u632f\u3089\u308c\u308bID\u3001\u30a4\u30f3\u30c7\u30c3\u30af\u30b9\n- groupId\n\u30c1\u30fc\u30e0\u6bce\u306b\u632f\u3089\u308c\u308bid\u3001PUBG\u3067\u306f\u30bd\u30ed\u3001\u30c7\u30e5\u30aa\u3001\u30b9\u30af\u30a2\u30c3\u30c9\u306a\u3069\u306e\u30c1\u30fc\u30e0\u30eb\u30fc\u30eb\u304c\u3042\u308b\u3002\n- matchId\n\u30d7\u30ec\u30a4\u30e4\u30fc\u306fmatchid\uff08\u8a66\u5408\u6bce\u306b\u632f\u3089\u308c\u305fid\uff09\u6bce\u306b\u6700\u5927\uff11\uff10\uff10\u540d\u306e\u53c2\u52a0\u8005\u304c\u5b58\u5728\u3059\u308b\u3002\n- kills\n\u30ad\u30eb\u6570\n- headshotKills\n\u30d8\u30c3\u30c9\u30b7\u30e7\u30c3\u30c8\u30ad\u30eb\u6570\n- killPlace\n\uff11\u30b2\u30fc\u30e0\u5185\u306b\u304a\u3051\u308b\u30ad\u30eb\u6570\u30e9\u30f3\u30ad\u30f3\u30b0\n- killPoints\nkill\u6570\u30d9\u30fc\u30b9\u306e\u30e9\u30f3\u30ad\u30f3\u30b0\u306b\u57fa\u3065\u3044\u305f\u30dd\u30a4\u30f3\u30c8\u6570\u3001\u30d7\u30ec\u30a4\u30e4\u30fc\u6bce\u306b\u7d10\u3065\u304f\n\uff10\u306b\u306a\u3063\u3066\u3044\u308b\u4eba\u306f\u307e\u3060\u30e9\u30f3\u30ad\u30f3\u30b0\u5916\u3068\u3044\u3046\u3053\u3068\n<blockquote class=\"twitter-tweet\" data-lang=\"ja\"><p lang=\"en\" dir=\"ltr\">We already have an ELO based ranking system &amp; leaderboard on-game, and will be expanding it over the course of early access!<\/p>&mdash; PUBG (@PUBG) <a href=\"https:\/\/twitter.com\/PUBG\/status\/845567597533835264?ref_src=twsrc%5Etfw\">2017\u5e743\u670825\u65e5<\/a><\/blockquote>\n<script async src=\"https:\/\/platform.twitter.com\/widgets.js\" charset=\"utf-8\"><\/script>\n\n- winPoints killpoints\u3068\u5143\u306b\u3057\u305f\u30e9\u30f3\u30ad\u30f3\u30b0\u304c\u540c\u3058\u3001\u52dd\u5229\u6570\u3067\u30d7\u30ec\u30a4\u30e4\u30fc\u306b\u7d10\u3065\u304f\n- rankPoints killpoints\u3068\u5143\u306b\u3057\u305f\u30e9\u30f3\u30ad\u30f3\u30b0\u304c\u540c\u3058\u3001\u3053\u3061\u3089\u306f\u30d7\u30ec\u30a4\u30e4\u30fc\u306b\u7d10\u3065\u304f\u30e9\u30f3\u30af\n- killStreaks\n\u77ed\u6642\u9593\u3067\u9023\u7d9a\u3067kill\u3057\u305f\u6570\n- longestKill\nkill\u3057\u305f\u969b\u306e\u6575\u3068\u306e\u8ddd\u96e2\n- assists\n\u81ea\u5206\u304c\u6575\u306b\u30c0\u30e1\u30fc\u30b8\u3092\u4e0e\u3048\u305f\u5f8c\u81ea\u5206\u4ee5\u5916\u304c\u6575\u3092\u5012\u3057\u305f\u6570\n- damageDealt\n\u30c8\u30fc\u30bf\u30eb\u30c0\u30e1\u30fc\u30b8\u6570\u3001\u57fa\u672c kill \u00d7 100\uff08\u30d7\u30ec\u30a4\u30e4\u30fcHP\uff09\n- DBNOs\n\u7d20\u624b\u30fb\u683c\u95d8\u6b66\u5668\uff1f\u3067\u6bb4\u3063\u305f\u6575\u306e\u4eba\u6570\n- boosts \u30fbheals\n\u30d6\u30fc\u30b9\u30c8\u30b2\u30fc\u30b8\u30fb\u4f53\u529b\u3092\u3069\u308c\u3060\u3051\u56de\u5fa9\u3057\u305f\u304b\n    - [\u3010PUBG\u3011\u56de\u5fa9\u30a2\u30a4\u30c6\u30e0\u3068\u30d6\u30fc\u30b9\u30c8\u306e\u52b9\u679c\u307e\u3068\u3081](https:\/\/vanillaice-fps.com\/pubg\/recovery-item-boost-item-effect)\n    - [\u3010PUBG\u3011\u30d6\u30fc\u30b9\u30c8\u52b9\u679c\u306e\u89e3\u8aac\u30683\u7a2e\u306e\u30d6\u30fc\u30b9\u30c8\u30a2\u30a4\u30c6\u30e0\u307e\u3068\u3081](https:\/\/chimolog.co\/pubg-boost-guide\/)\n- rideDistance \u8eca\u4e21\u306b\u4e57\u3063\u3066\u8d70\u3063\u305f\u8ddd\u96e2\n- walkDistance \u8d70\u3063\u305f\u8ddd\u96e2\n- matchDuration \u30de\u30c3\u30c1\u306b\u304b\u304b\u3063\u305f\u6642\u9593 [\u79d2]\n- matchType \u6b21\u30bb\u30eb\u53c2\u7167\n- maxPlace \u3088\u304f\u308f\u304b\u3089\u3093\n- numGroups \u540c\u30de\u30c3\u30c1\u5185\u306e\n- revives \u30c1\u30fc\u30e0\u30e1\u30a4\u30c8\u3092\u5fa9\u6d3b\u3055\u305b\u305f\u6570\n- roadKills \u8eca\u4e21\u3067\u8f62\u3044\u3066\u6bba\u3057\u305f\u6575\u306e\u6570\n- swimDistance \u6cf3\u3044\u3060\u8ddd\u96e2\n- teamKills \u30c1\u30fc\u30e0\u30e1\u30a4\u30c8\u3092\u30ad\u30eb\u3057\u305f\u6570\n- vehicleDestroys \u8eca\u4e21\u3092\u7834\u58ca\u3057\u305f\u6570\n- weaponsAcquired \u6b66\u5668\u3092\u62fe\u3063\u305f\u6570\n\n\n## \u53c2\u8003\n[PUBG Finish Placement Prediction (Kernels Only) - data](https:\/\/www.kaggle.com\/c\/pubg-finish-placement-prediction\/data)"}}