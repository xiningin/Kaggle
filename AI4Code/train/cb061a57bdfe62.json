{"cell_type":{"d594aefe":"code","3b82b2e4":"code","d483cc0c":"code","e90669ad":"code","fe12badf":"code","68e1fff9":"code","e2bd8756":"code","d77cf365":"code","0de53d40":"code","65eec35f":"code","24bad055":"code","e0b92409":"code","6aab8ad9":"code","be70e81c":"code","76028255":"code","6c00a2a2":"code","07d1b643":"code","5e7c6f84":"code","5157552e":"code","63a9ae76":"code","1741f21f":"code","5a62dc56":"code","11acb961":"code","f29743df":"code","14dac1c0":"code","931f7ba7":"code","211931e5":"code","7d519784":"code","6fafcc89":"code","f19ca9da":"code","cc685a61":"code","be3e3568":"code","931abf95":"code","674d2907":"code","4ed4c034":"code","b1bfa8e9":"code","67ec24ef":"code","5b935e73":"code","ce851ba1":"code","27337acb":"code","ab783226":"code","361d0588":"code","c69f692d":"code","f09814c3":"code","b1ba7fb2":"code","de52c70b":"code","be9ee2eb":"code","fc725592":"code","ef4b53ce":"code","61550291":"code","0ed69b17":"code","e046204c":"code","153f3925":"code","3599e859":"code","419ec915":"code","d573baac":"code","8e187025":"code","2eb0809a":"code","5be62b4d":"code","79a05e54":"code","116e3e6c":"markdown","6f7eb8c9":"markdown","3c499429":"markdown","4ac12734":"markdown","e605cbbb":"markdown","9af898fc":"markdown","417b0b52":"markdown","6f21d9a6":"markdown","16937ccb":"markdown","936965cb":"markdown","513e8af0":"markdown","1ae9de9c":"markdown","c0c42967":"markdown","a0b5ca03":"markdown","d00de12c":"markdown","72efd4a9":"markdown","d461ac1b":"markdown","853403f0":"markdown","024f0b94":"markdown","8696621b":"markdown","ddbd4f74":"markdown"},"source":{"d594aefe":"!pip install textblob_fr     #for installation\n","3b82b2e4":"import pandas as pd \nfrom nltk.tokenize import sent_tokenize\nfrom nltk.tokenize import word_tokenize\nimport re\nimport spacy\nfrom spacy.lang.fr.stop_words import STOP_WORDS\nimport string\nfrom textblob import Blobber\nfrom textblob_fr import PatternTagger, PatternAnalyzer\ntb = Blobber(pos_tagger=PatternTagger(), analyzer=PatternAnalyzer())\nimport plotly.graph_objects as go\nimport plotly.express as px\n","d483cc0c":"data = pd.read_csv('..\/input\/insurance-reviews-france\/Comments.csv')\ndata.head()","e90669ad":"data= data.drop(['Unnamed: 0'],axis=1)","fe12badf":"NAN = [(c, data[c].isna().mean()*100) for c in data]\nNAN = pd.DataFrame(NAN, columns=[\"column_name\", \"percentage\"])\nNAN.sort_values(\"percentage\", ascending=False)","68e1fff9":"data =data.dropna()","e2bd8756":"NAN = [(c, data[c].isna().mean()*100) for c in data]\nNAN = pd.DataFrame(NAN, columns=[\"column_name\", \"percentage\"])\nNAN.sort_values(\"percentage\", ascending=False)","d77cf365":"data[\"Comment\"]= data[\"Comment\"].str.lower()","0de53d40":"AComment=[]\nfor comment in data[\"Comment\"].apply(str):\n    Word_Tok = []\n    for word in  re.sub(\"\\W\",\" \",comment ).split():\n        Word_Tok.append(word)\n    AComment.append(Word_Tok)\n","65eec35f":"data[\"Word_Tok\"]= AComment\ndata.head()","24bad055":"stop_words=set(STOP_WORDS)\n\ndeselect_stop_words = ['n\\'', 'ne','pas','plus','personne','aucun','ni','aucune','rien']\nfor w in deselect_stop_words:\n    if w in stop_words:\n        stop_words.remove(w)\n    else:\n        continue","e0b92409":"AllfilteredComment=[]\nfor comment in data[\"Word_Tok\"]:\n    filteredComment = [w for w in comment if not ((w in stop_words) or (len(w) == 1))]\n    AllfilteredComment.append(' '.join(filteredComment))","6aab8ad9":"data[\"CommentAferPreproc\"]=AllfilteredComment\ndata.head()","be70e81c":"senti_list = []\nfor i in data[\"CommentAferPreproc\"]:\n    vs = tb(i).sentiment[0]\n    if (vs > 0):\n        senti_list.append('Positive')\n    elif (vs < 0):\n        senti_list.append('Negative')\n    else:\n        senti_list.append('Neutral')   \n","76028255":"data[\"sentiment\"]=senti_list\ndata.head()","6c00a2a2":"Number_sentiment= data.groupby([\"sentiment\"])[\"Name\"].count().reset_index().reset_index(drop=True)","07d1b643":"fig = px.histogram(data, x=\"sentiment\",color=\"sentiment\")\nfig.update_layout(\n    title_text='Sentiment of reviews', # title of plot\n    xaxis_title_text='Sentiment', # xaxis label\n    yaxis_title_text='Count', # yaxis label\n    bargap=0.2, \n    bargroupgap=0.1\n)\nfig.show()","5e7c6f84":"fig = px.pie(Number_sentiment, values=Number_sentiment['Name'], names=Number_sentiment['sentiment'], color_discrete_sequence=px.colors.sequential.Emrld\n)\nfig.show()","5157552e":"fig = px.histogram(data, x=\"Name\",color=\"Name\")\nfig.update_layout(\n    title_text='Number of Comments per Assurance', # title of plot\n    xaxis_title_text='Assurance', # xaxis label\n    yaxis_title_text='Number of Comments', # yaxis label\n    bargap=0.2, \n    bargroupgap=0.1\n)\nfig.show()","63a9ae76":"fig = px.histogram(data, x=\"Year\",color=\"Year\")\nfig.update_layout(\n    title_text='Number of Comments per Year', # title of plot\n    xaxis_title_text='Year', # xaxis label\n    yaxis_title_text='Number of Comments', # yaxis label\n    bargap=0.2, \n    bargroupgap=0.1\n)\nfig.show()","1741f21f":"fig = px.histogram(data, x=\"Month\",color=\"Month\")\nfig.update_layout(\n    title_text='Number of Comments per Month', # title of plot\n    xaxis_title_text='Month', # xaxis label\n    yaxis_title_text='Number of Comments', # yaxis label\n    bargap=0.2, \n    bargroupgap=0.1\n)\nfig.show()","5a62dc56":"fig = px.histogram(data, x=\"Name\",color=\"sentiment\")\nfig.update_layout(\n    title_text='Sentiments per Assurance', # title of plot\n    xaxis_title_text='Assurance', # xaxis label\n    yaxis_title_text='Number of Comments', # yaxis label\n    bargap=0.2, \n    bargroupgap=0.1\n)\nfig.show()","11acb961":"fig = px.histogram(data, x=\"Year\",color=\"sentiment\")\nfig.update_layout(\n    title_text='Sentiments per Year', # title of plot\n    xaxis_title_text='Year', # xaxis label\n    yaxis_title_text='Number of Comments', # yaxis label\n    bargap=0.2, \n    bargroupgap=0.1\n)\nfig.show()","f29743df":"fig = px.histogram(data, x=\"Month\",color=\"sentiment\")\nfig.update_layout(\n    title_text='Sentiments per Month', # title of plot\n    xaxis_title_text='Month', # xaxis label\n    yaxis_title_text='Number of Comments', # yaxis label\n    bargap=0.2, \n    bargroupgap=0.1\n)\nfig.show()","14dac1c0":"Data_2015 = data [(data['Year'] == 2015) ].reset_index(drop=True)","931f7ba7":"Number_sentiment_2015= Data_2015.groupby([\"sentiment\"])[\"Name\"].count().reset_index().reset_index(drop=True)","211931e5":"fig = px.histogram(Data_2015, x=\"sentiment\",color=\"sentiment\")\nfig.update_layout(\n    title_text='Sentiment of reviews in 2015', # title of plot\n    xaxis_title_text='Sentiment', # xaxis label\n    yaxis_title_text='Count', # yaxis label\n    bargap=0.2, \n    bargroupgap=0.1\n)\nfig.show()","7d519784":"fig = px.pie(Number_sentiment_2015, values=Number_sentiment_2015['Name'], names=Number_sentiment_2015['sentiment'], color_discrete_sequence=px.colors.sequential.Darkmint\n)\nfig.show()","6fafcc89":"fig = px.histogram(Data_2015, x=\"Name\",color=\"sentiment\")\nfig.update_layout(\n    title_text='Sentiments per Assurance in 2015', # title of plot\n    xaxis_title_text='Assurance', # xaxis label\n    yaxis_title_text='Number of Comments', # yaxis label\n    bargap=0.2, \n    bargroupgap=0.1\n)\nfig.show()","f19ca9da":"fig = px.histogram(Data_2015, x=\"Month\",color=\"sentiment\")\nfig.update_layout(\n    title_text='Sentiments per Month in 2015', # title of plot\n    xaxis_title_text='Month', # xaxis label\n    yaxis_title_text='Number of Comments', # yaxis label\n    bargap=0.2, \n    bargroupgap=0.1\n)\nfig.show()","cc685a61":"Data_2016 = data [(data['Year'] == 2016) ].reset_index(drop=True)","be3e3568":"Number_sentiment_2016= Data_2016.groupby([\"sentiment\"])[\"Name\"].count().reset_index().reset_index(drop=True)","931abf95":"Data_2016 = data [(data['Year'] == 2016) ].reset_index(drop=True)\nfig = px.histogram(Data_2016, x=\"sentiment\",color=\"sentiment\")\nfig.update_layout(\n    title_text='Sentiment of reviews in 2016', # title of plot\n    xaxis_title_text='Sentiment', # xaxis label\n    yaxis_title_text='Count', # yaxis label\n    bargap=0.2, \n    bargroupgap=0.1\n)\nfig.show()","674d2907":"fig = px.pie(Number_sentiment_2016, values=Number_sentiment_2016['Name'], names=Number_sentiment_2016['sentiment'], color_discrete_sequence=px.colors.sequential.Darkmint\n)\nfig.show()","4ed4c034":"fig = px.histogram(Data_2016, x=\"Name\",color=\"sentiment\")\nfig.update_layout(\n    title_text='Sentiments per Assurance in 2016', # title of plot\n    xaxis_title_text='Assurance', # xaxis label\n    yaxis_title_text='Number of Comments', # yaxis label\n    bargap=0.2, \n    bargroupgap=0.1\n)\nfig.show()","b1bfa8e9":"fig = px.histogram(Data_2016, x=\"Month\",color=\"sentiment\")\nfig.update_layout(\n    title_text='Sentiments per Month in 2016', # title of plot\n    xaxis_title_text='Month', # xaxis label\n    yaxis_title_text='Number of Comments', # yaxis label\n    bargap=0.2, \n    bargroupgap=0.1\n)\nfig.show()","67ec24ef":"Data_2017 = data [(data['Year'] == 2017) ].reset_index(drop=True)","5b935e73":"Number_sentiment_2017= Data_2017.groupby([\"sentiment\"])[\"Name\"].count().reset_index().reset_index(drop=True)","ce851ba1":"fig = px.histogram(Data_2017, x=\"sentiment\",color=\"sentiment\")\nfig.update_layout(\n    title_text='Sentiment of reviews in 2017', # title of plot\n    xaxis_title_text='Sentiment', # xaxis label\n    yaxis_title_text='Count', # yaxis label\n    bargap=0.2, \n    bargroupgap=0.1\n)\nfig.show()","27337acb":"fig = px.pie(Number_sentiment_2017, values=Number_sentiment_2017['Name'], names=Number_sentiment_2017['sentiment'], color_discrete_sequence=px.colors.sequential.Emrld\n)\nfig.show()","ab783226":"fig = px.histogram(Data_2017, x=\"Name\",color=\"sentiment\")\nfig.update_layout(\n    title_text='Sentiments per Assurance in 2017', # title of plot\n    xaxis_title_text='Assurance', # xaxis label\n    yaxis_title_text='Number of Comments', # yaxis label\n    bargap=0.2, \n    bargroupgap=0.1\n)\nfig.show()","361d0588":"fig = px.histogram(Data_2017, x=\"Month\",color=\"sentiment\")\nfig.update_layout(\n    title_text='Sentiments per Month in 2017', # title of plot\n    xaxis_title_text='Month', # xaxis label\n    yaxis_title_text='Number of Comments', # yaxis label\n    bargap=0.2, \n    bargroupgap=0.1\n)\nfig.show()","c69f692d":"Data_2018 = data [(data['Year'] == 2018) ].reset_index(drop=True)","f09814c3":"Number_sentiment_2018= Data_2018.groupby([\"sentiment\"])[\"Name\"].count().reset_index().reset_index(drop=True)\n","b1ba7fb2":"fig = px.histogram(Data_2018, x=\"sentiment\",color=\"sentiment\")\nfig.update_layout(\n    title_text='Sentiment of reviews in 2018', # title of plot\n    xaxis_title_text='Sentiment', # xaxis label\n    yaxis_title_text='Count', # yaxis label\n    bargap=0.2, \n    bargroupgap=0.1\n)\nfig.show()","de52c70b":"fig = px.pie(Number_sentiment_2018, values=Number_sentiment_2018['Name'], names=Number_sentiment_2018['sentiment'], color_discrete_sequence=px.colors.sequential.Darkmint\n)\nfig.show()","be9ee2eb":"fig = px.histogram(Data_2018, x=\"Name\",color=\"sentiment\")\nfig.update_layout(\n    title_text='Sentiments per Assurance in 2018', # title of plot\n    xaxis_title_text='Assurance', # xaxis label\n    yaxis_title_text='Number of Comments', # yaxis label\n    bargap=0.2, \n    bargroupgap=0.1\n)\nfig.show()","fc725592":"fig = px.histogram(Data_2018, x=\"Month\",color=\"sentiment\")\nfig.update_layout(\n    title_text='Sentiments per Month in 2018', # title of plot\n    xaxis_title_text='Month', # xaxis label\n    yaxis_title_text='Number of Comments', # yaxis label\n    bargap=0.2, \n    bargroupgap=0.1\n)\nfig.show()","ef4b53ce":"Data_2019 = data [(data['Year'] == 2019) ].reset_index(drop=True)","61550291":"Number_sentiment_2019= Data_2019.groupby([\"sentiment\"])[\"Name\"].count().reset_index().reset_index(drop=True)","0ed69b17":"fig = px.histogram(Data_2019, x=\"sentiment\",color=\"sentiment\")\nfig.update_layout(\n    title_text='Sentiment of reviews in 2019', # title of plot\n    xaxis_title_text='Sentiment', # xaxis label\n    yaxis_title_text='Count', # yaxis label\n    bargap=0.2, \n    bargroupgap=0.1\n)\nfig.show()","e046204c":"fig = px.pie(Number_sentiment_2019, values=Number_sentiment_2019['Name'], names=Number_sentiment_2019['sentiment'], color_discrete_sequence=px.colors.sequential.Darkmint\n)\nfig.show()","153f3925":"fig = px.histogram(Data_2019, x=\"Name\",color=\"sentiment\")\nfig.update_layout(\n    title_text='Sentiments per Assurance in 2019', # title of plot\n    xaxis_title_text='Assurance', # xaxis label\n    yaxis_title_text='Number of Comments', # yaxis label\n    bargap=0.2, \n    bargroupgap=0.1\n)\nfig.show()","3599e859":"fig = px.histogram(Data_2019, x=\"Month\",color=\"sentiment\")\nfig.update_layout(\n    title_text='Sentiments per Month in 2019', # title of plot\n    xaxis_title_text='Month', # xaxis label\n    yaxis_title_text='Number of Comments', # yaxis label\n    bargap=0.2, \n    bargroupgap=0.1\n)\nfig.show()","419ec915":"Data_2020 = data [(data['Year'] == 2020) ].reset_index(drop=True)","d573baac":"Number_sentiment_2020= Data_2020.groupby([\"sentiment\"])[\"Name\"].count().reset_index().reset_index(drop=True)\n","8e187025":"fig = px.histogram(Data_2020, x=\"sentiment\",color=\"sentiment\")\nfig.update_layout(\n    title_text='Sentiment of reviews in 2020', # title of plot\n    xaxis_title_text='Sentiment', # xaxis label\n    yaxis_title_text='Count', # yaxis label\n    bargap=0.2, \n    bargroupgap=0.1\n)\nfig.show()","2eb0809a":"fig = px.pie(Number_sentiment_2020, values=Number_sentiment_2020['Name'], names=Number_sentiment_2020['sentiment'], color_discrete_sequence=px.colors.sequential.Emrld\n)\nfig.show()","5be62b4d":"fig = px.histogram(Data_2020, x=\"Name\",color=\"sentiment\")\nfig.update_layout(\n    title_text='Sentiments per Assurance in 2020', # title of plot\n    xaxis_title_text='Assurance', # xaxis label\n    yaxis_title_text='Number of Comments', # yaxis label\n    bargap=0.2, \n    bargroupgap=0.1\n)\nfig.show()","79a05e54":"fig = px.histogram(Data_2020, x=\"Month\",color=\"sentiment\")\nfig.update_layout(\n    title_text='Sentiments per Month in 2020', # title of plot\n    xaxis_title_text='Month', # xaxis label\n    yaxis_title_text='Number of Comments', # yaxis label\n    bargap=0.2, \n    bargroupgap=0.1\n)\nfig.show()","116e3e6c":" <font color='gris'> **Drop Unnamed Column** <\/font>","6f7eb8c9":"<font color='gris'> **set of Spacy's default stop words and delete negation words** <\/font>","3c499429":"**Sentiment analysis in 2018**\n","4ac12734":"\n<font color='gris'> **Add Column: Sentiment** <\/font>","e605cbbb":"**Data Visualization**","9af898fc":" <font color='gris'> **Drop NAN Values** <\/font>","417b0b52":"\n <font color='gris'> **Word Tokenization and deleting punctuation** <\/font>","6f21d9a6":" <font color='gris'> **Verify NAN Values** <\/font>","16937ccb":"\n <font color='gris'> Check NAN values <\/font>","936965cb":"# I hope you find this kernel useful\n# Your <font color='blue'> UPVOTES <\/font> would be highly appreciated","513e8af0":"<font color='gris'> **Add new Column: Comment after preprocessing** <\/font>","1ae9de9c":" <font color='gris'> **Add New Column to our data** <\/font>","c0c42967":"\n#  <font color='red'> French Sentiment Analysis Using TextBlob <\/font>","a0b5ca03":"<font color='gris'> **Sentiment Analysis with TextBlob** <\/font>","d00de12c":"**Sentiment analysis in 2017**\n","72efd4a9":"\n <font color='gris'> **Convert the data into lowercase**<\/font>","d461ac1b":"<font color='gris'> **Delete StopWords** <\/font>","853403f0":"**Sentiment analysis in 2019**\n","024f0b94":"**Sentiment analysis in 2015**","8696621b":"**Sentiment analysis in 2016**\n","ddbd4f74":"**Sentiment analysis in 2020**\n"}}