{"cell_type":{"aff05192":"code","f11d1699":"code","b24cc47d":"code","24874a19":"code","7d7ce40a":"code","2e6ee0bd":"code","e6b9a913":"code","34f50071":"code","e7edb153":"code","943d4ef5":"code","662399a8":"code","6c14f8ed":"code","41d5de0f":"code","ce40e73a":"code","6fdddb6d":"code","780beed3":"code","1c4d4e63":"code","0359e556":"code","8906b661":"code","b84e314e":"code","2a944b54":"code","e18537d8":"markdown","ba52ab93":"markdown","6d2633e2":"markdown","e8e0835a":"markdown","b0a7e4be":"markdown","b82d185e":"markdown","4061cd51":"markdown","72c6698a":"markdown","9cb60541":"markdown","7b778f8f":"markdown","2b923b34":"markdown"},"source":{"aff05192":"import pandas as pd\nimport matplotlib.pyplot as plt \nimport numpy as np","f11d1699":"BF = pd.read_csv(\"..\/input\/bajaj-finance-stock\/BAJFINANCE.NS.csv\")\nBF","b24cc47d":"### set the date as index for the data\nBF = BF.set_index(pd.DatetimeIndex(BF['Date'].values))\nBF","24874a19":"\nplt.figure(figsize = (15,5))\nplt.plot(BF.index,BF['Close'],label = \"Close price\")\nplt.title(\" Close Price History \")\nplt.xlabel('Oct 18 2016 - 2020',fontsize = 18)\nplt.ylabel(\"Close price\",fontsize = 18)\nplt.show()","7d7ce40a":"returns_daily = BF['Close'].pct_change()\nreturns_monthly = BF['Close'].resample('M').ffill().pct_change()\nprint(returns_daily)\nprint(returns_monthly)","2e6ee0bd":"returns_daily = BF['Close'].pct_change()\nreturns_monthly = BF['Close'].resample('M').ffill().pct_change()\nprint(returns_daily)\nprint(returns_monthly)","e6b9a913":"plt.figure(figsize = (15,5))\nplt.plot(returns_daily)\nplt.xlabel(\"Date\")\nplt.ylabel(\"Percent\")\nplt.title('Bajaj Finance daily returns')\nplt.show()","34f50071":"plt.figure(figsize = (15,5))\nplt.plot(returns_monthly)\nplt.xlabel(\"Date\")\nplt.ylabel(\"Percent\")\nplt.title('Bajaj Finance monthly returns')\nplt.show()","e7edb153":"plt.figure()\nplt.axes([0.1,0.1,0.8,0.8])\nreturns_daily.plot.hist(bins = 30)\nplt.xlabel('Daily returns %')\nplt.ylabel(\"count\")\nplt.title('Bajaj Finance Daily return data')\nplt.text(-0.2,200,\"Extreme low\\nreturns\")\nplt.text(0.05,200,\"Extreme high\\nreturns\")\nplt.show()","943d4ef5":"plt.figure()\nreturns_daily.plot.density()\nplt.title(\"Density plot for returns\")\nplt.xlabel(\"Returns\")\nplt.show()","662399a8":"cum_return = (returns_daily +1).cumprod()","6c14f8ed":"plt.figure(figsize = (15,5))\nplt.axes([0.1,0.1,0.8,0.8])\ncum_return.plot()\nplt.xlabel('Date')\nplt.ylabel(\"growth of 1 Rs investment\")\nplt.title('Bajaj Finance Daily cumulative return data')\nplt.show()","41d5de0f":"#prepare the data to calculate the RSI\n#get the difference in price from the previous day\ndelta = BF['Close'].diff(1)\ndelta","ce40e73a":"delta = delta.dropna()\ndelta","6fdddb6d":"## Get the positive gains(up) and negative gains(down)\nup = delta.copy()\ndown  = delta.copy()\nup[up<0] = 0\ndown[down>0] = 0","780beed3":"### get the time period \nperiod = 14 \n## average gain\nAvg_gain = up.rolling(window=period).mean()\nAvg_loss = abs(down.rolling(window=period).mean())","1c4d4e63":"### calculate the relative strength\nRS = Avg_gain\/Avg_loss\n### calculate the RSI \nRSI = 100.0 - (100.0\/(1.0 + RS))","0359e556":"### show the RSI Visually\nplt.figure(figsize = (15,5))\nRSI.plot()\nplt.show()","8906b661":"### put it all together\n## create a new df\ndf = pd.DataFrame()\ndf['Close'] = BF['Close']\ndf['RSI'] = RSI\ndf","b84e314e":"### visually show close price and RSI\n## plot the close price\nplt.figure(figsize = (15,5))\nplt.plot(df.index,df['Close'],label = \"Close price\")\nplt.title(\" Close Price History \")\nplt.legend(df.columns.values,loc = 'upper left')\nplt.xlabel('Oct 18 2016 - 2020',fontsize = 18)\nplt.ylabel(\"Close price\",fontsize = 18)\nplt.show()\n\n#","2a944b54":"\n# plot corresponding RSI values and the significant levels\nplt.figure(figsize = (15,5))\nplt.title(\" RSI plot\")\nplt.plot(df.index,df['RSI'])\nplt.axhline(0,linestyle = '--',alpha = 0.5,color= 'gray')\nplt.axhline(10,linestyle = '--',alpha = 0.5,color= 'orange')\nplt.axhline(20,linestyle = '--',alpha = 0.5,color= 'green')\nplt.axhline(30,linestyle = '--',alpha = 0.5,color= 'red')\nplt.axhline(70,linestyle = '--',alpha = 0.5,color= 'red')\nplt.axhline(80,linestyle = '--',alpha = 0.5,color= 'green')\nplt.axhline(90,linestyle = '--',alpha = 0.5,color= 'orange')\nplt.axhline(100,linestyle = '--',alpha = 0.5,color= 'gray')\nplt.show()\n","e18537d8":"### Visualize the price","ba52ab93":"### Relative Stock Index\n##### The relative strength index (RSI) is a momentum indicator used in technical analysis that measures the magnitude of recent price changes to evaluate overbought or oversold conditions in the price of a stock or other asset. The RSI is displayed as an oscillator (a line graph that moves between two extremes) and can have a reading from 0 to 100. \n\n###### A RSI which is below 20 indicates that a stock is being sold excessively hence it is a good time to buy the stock and if it is above 80 it is a good time to sell the stock.","6d2633e2":"Conclusion: We see that the in the year 2020 the RSI value went down 20 so this was a good time for a investor to buy the stock.Also in the end of 2022 that is before october 2021 the RSI value went above 80 therefore this was good time for a investor to sell the stock ","e8e0835a":"###  Histogram And Density plot","b0a7e4be":"### Calculating returns","b82d185e":"### Visualizing monthly returns","4061cd51":"### Storing  the data of the stock prices\n","72c6698a":"### Visualizing Daily returns","9cb60541":"### Importing the required libraries","7b778f8f":"## Analysing Bajaj Finance stock using pandas and matplotlib to find what was the best time to sell or buy a stock","2b923b34":"### Cumulative return of Bajaj Finace"}}