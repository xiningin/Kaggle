{"cell_type":{"b029a00c":"code","04f7c603":"code","44c11fcc":"code","8cd43f20":"code","2a1e8eb9":"code","f22dfa8c":"markdown","07c5980d":"markdown"},"source":{"b029a00c":"# Some basic setup:\n# import some common libraries\nimport numpy as np\nimport pandas as pd\nimport os\nimport json\nimport random\nimport cv2\nimport matplotlib.pyplot as plt\nimport ast\nfrom tqdm import tqdm\nfrom sklearn.model_selection import train_test_split","04f7c603":"#put your dataset link \nINPUT_DIR = \"\/kaggle\/input\/global-wheat-detection\/\"\nTRAIN_DIR = f\"{INPUT_DIR}train\/\"\nTEST_DIR = f\"{INPUT_DIR}test\/\"","44c11fcc":"#coco format\ndef coco_base_define():\n  coco_base = { \"info\": {},\n              \"licenses\": [], \n              \"images\": [],\n              \"annotations\": [],\n              \"categories\": []}\n#write your coco dataset categories\n  coco_base[\"categories\"].append({\"supercategory\": \"grain\",\"id\": 1,\"name\": \"wheat\"})\n\n  coco_base[\"images\"].append({\"id\":1,\"height\":30.0,\"width\":5.0,\"file_name\":\"url\",\"license\":\"licence\"})\n  coco_base[\"annotations\"].append({\"id\": 1, \"segmentation\": \"polygon\", \"area\": 3.0, \"bbox\": [5,4,3,2]})\n  return  coco_base","8cd43f20":"udt_base = {\n  \"interface\": {\n    \"type\": \"image_segmentation\",\n    \"labels\": [\"valid\", \"invalid\"],\n    \"regionTypesAllowed\": [\"bounding-box\", \"polygon\", \"point\"]\n  },\n  \"samples\": [\n    {\n      \"imageUrl\": \"https:\/\/s3.amazonaws.com\/asset.workaround.online\/example-jobs\/sticky-notes\/image1.jpg\",\n      \"annotation\": [\n        {\n          \"regionType\": \"bounding-box\",\n          \"centerX\": 0.2919799498746867,\n          \"centerY\": 0.3317669172932331,\n          \"width\": 0.3634085213032581,\n          \"height\": 0.09962406015037595,\n          \"classification\": \"valid\",\n          \"color\": \"hsl(105,100%,50%)\"\n        }\n      ]\n    }\n  ]\n}","2a1e8eb9":"\ndef udt_to_coco(udt_base):\n    coco_base = coco_base_define()\n    #put your own description on your data\n    coco_base[\"info\"][\"description\"] = \"Global Wheat Detection Dataset, Kaggle 2020\"\n    #put your own data's url\n    coco_base[\"info\"][\"url\"]=\"https:\/\/s3.amazonaws.com\/asset.workaround.online\/example-jobs\/sticky-notes\/image1.jpg\"\n    coco_base[\"info\"][\" version\"] =  \"1.0\"\n    #put your own data contributor \n    coco_base[\"info\"][\" contributor\"] =  \"http:\/\/www.global-wheat.com\/contributors\/\"\n    #put your own data date\n    coco_base[\"info\"][\" date_created\"]=\"2020\/11\/26\"\n    \n    #put the licenses of your data\n    coco_base[\"licenses\"].append({\n        \"url\": \"https:\/\/opensource.org\/licenses\/MIT\",\n        \"id\": 1,\n        \"name\": \"MIT License\"})\n    \n    #put the name of your data \n    coco_base[\"categories\"].append({\"supercategory\": \"grain\",\"id\": 1,\"name\": \"wheat\"})\n    \n    for i in range(len(udt_base[\"samples\"])):\n    \n      coco_base[\"images\"][i][\"height\"] = udt_base[\"samples\"][i][\"annotation\"][0][\"height\"]\n      coco_base[\"images\"][i][\"width\"] =  udt_base[\"samples\"][i][\"annotation\"][0][\"width\"]\n      coco_base[\"images\"][i][\"id\"] =  i\n      coco_base[\"images\"][i][\"file_name\"] =  udt_base[\"samples\"][i][\"imageUrl\"]\n      coco_base[\"images\"][i][\"licenses\"] =  coco_base[\"licenses\"]\n  \n\n      coco_base[\"annotations\"][i][\"id\"] = i\n      coco_base[\"annotations\"][i][\"area\"] =udt_base[\"samples\"][i][\"annotation\"][0][\"centerX\"]*udt_base[\"samples\"][0][\"annotation\"][0][\"centerY\"]\n      coco_base[\"annotations\"][i][\"bbox\"] = [udt_base[\"samples\"][i][\"annotation\"][0][\"centerX\"],udt_base[\"samples\"][0][\"annotation\"][0][\"centerY\"],udt_base[\"samples\"][0][\"annotation\"][0][\"height\"],udt_base[\"samples\"][0][\"annotation\"][0][\"width\"]]\n      coco_base[\"annotations\"][i][\"segmentation\"] = udt_base[\"samples\"][i][\"annotation\"][0][\"regionType\"]\n    return coco_base\nprint(udt_to_coco(udt_base))\n    \n    ","f22dfa8c":"# **Import Libraries**","07c5980d":"# **Define Coco Format**"}}