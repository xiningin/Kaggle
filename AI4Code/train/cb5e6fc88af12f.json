{"cell_type":{"b9d8cc80":"code","22da52f4":"code","b02f939a":"code","401a8ba5":"code","7ace99f3":"code","a2a3a5f5":"code","900308d9":"code","344a72fd":"code","33d50f70":"code","7a2a22f0":"code","177d27a3":"code","8da31718":"code","fc5847a7":"code","d443e559":"code","52c3973b":"code","45f25ab3":"code","d182e145":"code","685a9407":"code","70285f36":"code","0763be16":"code","43af9258":"code","04a8806e":"code","8a10444e":"code","c2e773ec":"code","86a76382":"code","68c8757c":"code","ed42bc66":"code","c178963b":"markdown","2d3bf62a":"markdown","d867296d":"markdown","a55ff39b":"markdown","25568bd4":"markdown","219c8861":"markdown","8b6ce072":"markdown","1142cf3d":"markdown","ea94f037":"markdown","0e80e8d5":"markdown","fc441b34":"markdown","a29c4656":"markdown","1edb1dd0":"markdown","626c0e23":"markdown","facb138b":"markdown","c29fb812":"markdown","08b3c3a4":"markdown","8e4427a1":"markdown","368508ff":"markdown","4ae3582a":"markdown","8b88a93c":"markdown","551fa476":"markdown","c71c5e91":"markdown","61a04066":"markdown","3ea314d4":"markdown","b2b84ae7":"markdown","94e74ecb":"markdown","fd50c710":"markdown","4434c6fa":"markdown","24207bdb":"markdown","b946dffa":"markdown"},"source":{"b9d8cc80":"import os\nfor dirname, _, filenames in os.walk('\/kaggle\/input'):\n    for filename in filenames:\n        print(os.path.join(dirname, filename))","22da52f4":"import numpy as np\nimport pandas as pd\nimport matplotlib.pyplot as plt\nimport seaborn as sns\nimport plotly.express as px\nfrom pandas_profiling import ProfileReport\n%matplotlib inline","b02f939a":"#reading in the data\ndata = pd.read_csv('..\/input\/air-quality-data-in-india\/city_day.csv')\ndata.head(2)","401a8ba5":"# creating a new year column\ndata['Date'] = pd.to_datetime(data['Date'])\ndata['year'] = data['Date'].dt.year","7ace99f3":"report = ProfileReport(data)\nreport","a2a3a5f5":"sns.set_style(\"darkgrid\")\nsns.kdeplot(data=data['AQI'],label=\"AQI\" ,shade=True)","900308d9":"aqi = data.groupby('City')['AQI'].min().reset_index()\naqi  = aqi.sort_values(\"AQI\")\naqi = aqi.head(10)\nfig1, ax1 = plt.subplots(figsize=(15,10))\nax1.pie(aqi['AQI'].tolist(), labels=aqi['City'].tolist(), autopct='%1.1f%%',\n        shadow=True, startangle=90)\nplt.legend(loc='right',bbox_to_anchor=(1.2,0.9))\nplt.show()","344a72fd":"perc = data.loc[:,[\"year\",\"City\",'AQI']]\nperc['mean_AQI'] = perc.groupby([perc.City,perc.year])['AQI'].transform('mean')\nperc.drop('AQI', axis=1, inplace=True)\nperc = perc.drop_duplicates()\nperc = perc.sort_values(\"year\",ascending = False)\ntop_brand = ['Talcher','Amritsar','Brajrajnagar'] \nperc = perc.loc[perc['City'].isin(top_brand)]\nperc = perc.sort_values(\"year\")\nperc = perc.fillna(100)\nfig=px.bar(perc,x='City', y=\"mean_AQI\", animation_frame=\"year\", \n           animation_group=\"City\", color=\"City\", hover_name=\"City\")\nfig.show()","33d50f70":"aqi = data.groupby('City')['AQI'].max().reset_index()\naqi  = aqi.sort_values(\"AQI\")\naqi = aqi.tail(10)\nfig1, ax1 = plt.subplots(figsize=(15,10))\nax1.pie(aqi['AQI'].tolist(), labels=aqi['City'].tolist(), autopct='%1.1f%%',\n        shadow=True, startangle=90)\nplt.legend(loc='right',bbox_to_anchor=(1.2,0.9))\nplt.show()","7a2a22f0":"perc = data.loc[:,[\"year\",\"City\",'AQI']]\nperc['mean_AQI'] = perc.groupby([perc.City,perc.year])['AQI'].transform('mean')\nperc.drop('AQI', axis=1, inplace=True)\nperc = perc.drop_duplicates()\nperc = perc.sort_values(\"year\",ascending = False)\ntop_brand = ['Hyderabad','Amritsar','Gurugram','Guwahati',\"Ahmedabad\"] \nperc = perc.loc[perc['City'].isin(top_brand)]\nperc = perc.sort_values(by=\"year\")\nperc = perc.fillna(100)\nfig=px.bar(perc,x='City', y=\"mean_AQI\", animation_frame=\"year\", \n           animation_group=\"City\", color=\"City\", hover_name=\"City\")\nfig.show()","177d27a3":"data.head()","8da31718":"data1 = data['AQI'].dropna()\ntop_10_city = data.loc[data1.index].groupby('City')['AQI'].mean().reset_index()\ntop_10_city.sort_values('AQI', ascending=False, inplace=True)\ntop_10_city.head(10)","fc5847a7":"top_cities = top_10_city.head(10)['City'].tolist()\ntop_cities","d443e559":"talcher = data[data['City']=='Talcher']\ndata_by_year = talcher.groupby('year')['AQI'].mean().reset_index().dropna()\ndata_by_year.head()","52c3973b":"plt.plot(data_by_year['year'], data_by_year['AQI'])\nplt.xticks(data_by_year['year'].tolist())\nplt.title('Year wise mean AQI for Talcher')\nplt.xlabel('Years')\nplt.ylabel('Mean AQI')\nplt.show()","45f25ab3":"braj = data[data['City']=='Brajrajnagar']\ndata_by_year = braj.groupby('year')['AQI'].mean().reset_index().dropna()\ndata_by_year.head()","d182e145":"plt.plot(data_by_year['year'], data_by_year['AQI'])\nplt.xticks(data_by_year['year'].tolist())\nplt.title('Year wise mean AQI for Talcher')\nplt.xlabel('Years')\nplt.ylabel('Mean AQI')\nplt.show()","685a9407":"fig = plt.figure(figsize=(15,28))\nfor city,num in zip(top_cities, range(1,11)):\n    df = data[data['City']==city]\n    data_by_year = df.groupby('year')['AQI'].mean().reset_index().dropna()\n    ax = fig.add_subplot(5,2,num)\n    ax.plot(data_by_year['year'], data_by_year['AQI'])\n    ax.set_xticks(data_by_year['year'].tolist())\n    ax.set_title('Year wise mean AQI for {}'.format(city))\n    ax.set_ylabel('Mean AQI')","70285f36":"data.head(2)","0763be16":"#imputing null values with 0.0\ndf = data.fillna(0.0)","43af9258":"no = df.groupby('City')['NO'].mean().reset_index()\nno  = no.sort_values(\"NO\")\nno = no.head(10)\nfig1, ax1 = plt.subplots(figsize=(15,10))\nax1.pie(no['NO'].tolist(), labels=no['City'].tolist(), autopct='%1.1f%%',\n        shadow=True, startangle=90)\nplt.legend(loc='right',bbox_to_anchor=(1.2,0.9))\nplt.show()","04a8806e":"perc = df.loc[:,[\"year\",\"City\",'NO']]\nperc['mean_NO'] = perc.groupby([perc.City,perc.year])['NO'].transform('mean')\nperc.drop('NO', axis=1, inplace=True)\nperc = perc.drop_duplicates()\nperc = perc.sort_values(\"year\",ascending = False)\ntop_brand = ['Hyderabad','Bhopal','Jorapokhar','Chennai',\"Bengaluru\"] \nperc = perc.loc[perc['City'].isin(top_brand)]\nperc = perc.sort_values(\"year\")\nperc = perc.fillna(100)\nfig=px.bar(perc,x='City', y=\"mean_NO\", animation_frame=\"year\", \n           animation_group=\"City\", color=\"City\", hover_name=\"City\")\nfig.show()","8a10444e":"fig = plt.figure(figsize=(15,23))\nfor city,num in zip(top_cities, range(1,11)):\n    df = data[data['City']==city]\n    df = df.groupby('year')['NO'].mean().reset_index().dropna()\n    ax = fig.add_subplot(5,2,num)\n    ax.set_title(city)\n    sns.kdeplot(data=df['NO'],label=\"NO\" ,shade=True)","c2e773ec":"data.head(2)","86a76382":"sns.scatterplot('PM2.5', 'AQI', hue='year', data=data)\nplt.title('Relation between PM2.5 and AQI')\nplt.xlabel('PM2.5')\nplt.ylabel('AQI')\nplt.show()","68c8757c":"variables = ['PM2.5','PM10','NO','NO2','NOx','NH3','CO','SO2','O3','Benzene','Toluene','Xylene']\n\nfig = plt.figure(figsize=(16,34))\nfor variable,num in zip(variables, range(1,len(variables)+1)):\n    ax = fig.add_subplot(6,2,num)\n    sns.scatterplot(variable, 'AQI', hue='year', data=data)\n    plt.title('Relation between {} and AQI'.format(variable))\n    plt.xlabel(variable)\n    plt.ylabel('AQI')","ed42bc66":"cities = ['Delhi', 'Ahmedabad', 'Hyderabad', 'Bengaluru', 'Kolkata']\nfig,ax = plt.subplots(figsize=(15, 7))\n\nfor city in cities: \n    sns.lineplot(x=\"Date\", y=\"AQI\", data=data[data['City']==city].iloc[::30],label = city)\n\nax.set_xticklabels(ax.get_xticklabels(cities), rotation=30, ha=\"left\")\n\nax.set_title('AQI values in cities')\nax.legend()","c178963b":"This shows the distribution but not the year wise data. Let's try a grouped bar plot.\n\nI will try that tomorrow because I am out of time today","2d3bf62a":"# Which City has highest AQI?","d867296d":"1. PM2.5 -> This shows a inversely proportional behaviour since when it's value remains low the AQI value increases while in other cases when its value increases the AQI value reamins low.\n\n2. PM10 -> This also shows an inverse behaviour except for the fact that even when PM10 value is less AQI value doesn't increase much\n\nSimilar analysis can be done for each of the other variables.","a55ff39b":"This notebook is a part of my 8th day in analyzing datasets.\n\nLet's jump straight to some Air Quality.","25568bd4":"I have invested enough time into understanding the AQI for each city.\n\nNow let's move on to check the variation of the other variables(toxic factors)","219c8861":"Now as we can see there are a lot of null values.\n\nOne logical thing to do is to replace the NaN with 0.0 i.e, their value was not detected in that particular city.","8b6ce072":"I will analysis here. because i am running out of more ideas to analyze.\n\nWill come back to this if there is any more new face added to the data.","1142cf3d":"# Distribution of NO, NO2 and more","ea94f037":"# Cities with highest AQI per year","0e80e8d5":"# Data Story 8 and 9","fc441b34":"# Which city has highest NO?","a29c4656":"Now this seems interesting. Let's plot it for each of the variables.\n\nFirst the variables need to be separated.","1edb1dd0":"Okay so while thinking on other accounts it's actually not much information can be extracted from just the increase or decrease of NO, NO2 etc.\n\nSo rather than visualize that. I will try to check its relation with AQI values.","626c0e23":"# Report of Air Quality Data in India","facb138b":"The situation for talcher is not very good because it's AQI value saw a huge increase in 2020","c29fb812":"Brajrajnagar may have come in top 10 cities in case of the mean but it's showing  huge progress in the last couple of years","08b3c3a4":"Things aren't looking good for Kolkata, Talcher and Guwahati. All other cities are improving their AQI.","8e4427a1":"# Brajrajnagar AQI map","368508ff":"I will end my today's analysis here. Tomorrow I will continue with analysing the cities with highest AQI because they are the ones that need more attention and need to be improved.\n\nI will also try to see if there was any decrease noticed in AQI that may provide insights about future steps to be taken.\n\nSee ya.","4ae3582a":"# Top 10 cities with highest AQI","8b88a93c":"# How AQI(air quality index) is distributed?","551fa476":"# Cities with lowest AQI per year","c71c5e91":"Checking for all cities","61a04066":"# Talcher AQI map","3ea314d4":"This visualization is actually not a good fit for checking all variables at once. \n\nLet's try with kdeplots for each country.","b2b84ae7":"Let's first group the city columns and take the mean AQI values","94e74ecb":"Now there is one interesting thing to notice. Talcher is actually the city that once had the lowest AQI in the whole dataset in the span of 5 years. \n\nBut when taken mean data it comes in one of the cities with highest AQI.\n\nWhat this signifies is it's AQI value is increasing rapidly. Let's try to visualize its growth using a line plot over the years.","fd50c710":"# Which city has lowest AQI?","4434c6fa":"Now let's check te relations one by one for each of the variables.","24207bdb":"See you in the next data story. Bye","b946dffa":"# Looking at each of the cities with highest AQI"}}