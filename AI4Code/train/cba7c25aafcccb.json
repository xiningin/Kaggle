{"cell_type":{"26ee31c3":"code","730be121":"code","a9f4d108":"code","a4aaab13":"code","6b4c47b9":"code","fda0ee1d":"code","d49ef158":"code","a03963d7":"code","1b0a61a4":"code","63a7c29b":"code","0856554b":"code","4d74e3c5":"code","7a13f8f6":"code","cf8b11f5":"code","96f08707":"code","2f35236c":"code","4b63596f":"code","7f22a279":"code","88ada4b3":"code","8c6f2cb9":"code","bae1cc9d":"code","a8555476":"code","656e38f8":"code","b43e8042":"code","8966d490":"code","251f1d17":"code","a58a77dd":"markdown","5d679db5":"markdown","5bff07b0":"markdown","e5763415":"markdown","154263e3":"markdown","6a789db1":"markdown","359f5da2":"markdown","97f64378":"markdown","f5725546":"markdown","ac0c76e8":"markdown","0458d43a":"markdown","2d0a8f53":"markdown","ad712ee8":"markdown","fe884044":"markdown","fefedb58":"markdown","dd3dd52d":"markdown","bf9e68dd":"markdown","0c20442d":"markdown","87152477":"markdown","6b8fdad9":"markdown","75fc0085":"markdown","ad781b50":"markdown","716bb63e":"markdown"},"source":{"26ee31c3":"#importing libraries\nimport pandas as pd\nimport matplotlib.pyplot as plt","730be121":"messi=pd.read_csv('..\/input\/messi-dataset\/lionel_messi_goals.csv')\nmessi.head()","a9f4d108":"# checking total no. of rows and columns present in original datset\nmessi.shape","a4aaab13":"# getting information about total non-null values and datatypes\nmessi.info()","6b4c47b9":"# to get percentage of null values present in all columns respectively\nround(messi.isnull().sum()*100\/len(messi),2)","fda0ee1d":"# total count of types of goal scored\nmessi.goal_type.value_counts()","d49ef158":"# count of goal scored in diferent competitons\nmessi.competition_name.value_counts()","a03963d7":"# checking presence of null value in goal_type column\nmessi[messi.goal_type.isnull()]","1b0a61a4":"# checking presence of null value in competition_name column\nmessi[messi.competition_name.isnull()]","63a7c29b":"# dropping column named competition_name due to missing values in column\nmessi.drop('competition_name',axis=1,inplace=True)\n\n# dropping column named goal_type due to missing values in column\nmessi.drop('goal_type',axis=1,inplace=True)","0856554b":"round(messi.isnull().sum()*100\/len(messi),2)","4d74e3c5":"messi.home_team.value_counts()","7a13f8f6":"messi.away_team.value_counts()","cf8b11f5":"messi.minute.value_counts()","96f08707":"# creating a new column named goal_halves\ndef get_half(x):\n    if '+' in x:\n        return 'extra_time'\n    elif int(x)<46:\n        return 'first_half'\n    else:\n        return 'second_half'\n\nmessi['goal_halves']=messi.minute.apply(lambda x:get_half(x))\nmessi.head()","2f35236c":"# transforming items in minute column from containing \"+\" into its real sum\ndef transform(y):\n    if '+' in y:\n        \n        sum1= y.split('+')\n        return int(sum1[0])+int(sum1[1])\n        \n    else:\n        return int(y)\n    \nmessi.minute=messi.minute.apply(lambda y:transform(y))\nmessi.minute.astype(int)\nmessi.head()","4b63596f":"# Adding a new column named win_not_win containing only two categories win and draw\/loss\ndef win_not_win(z):\n    if 'Won' in z:\n        return \"won\"\n    else:\n        return \"draw\/loss\"\nmessi['win_not_win']=messi.final_game_result.apply(lambda z:win_not_win(z))\nmessi.head()","7f22a279":"# checking total count of win and draw\/loss\nmessi.win_not_win.value_counts()","88ada4b3":"import warnings\nwarnings.filterwarnings('ignore')\n\nimport seaborn as sns\n\nplt.figure(figsize=(100,100))\n\nsns.set(font_scale = 5)\n\nplt.subplot(3,2,1)\nax=sns.countplot(messi.win_not_win)\nax.set(xlabel = \"Win and Draw\/Loss\")\nfor rect in ax.patches:\n    ax.text (rect.get_x() + rect.get_width()  \/ 2,rect.get_height()+ 0.75,rect.get_height(),horizontalalignment='center', fontsize = 50)\n\nplt.subplot(3,2,2)\nbx=sns.countplot(messi.final_game_result)\nbx.set(xlabel = \"Final Result\")\nfor rect in bx.patches:\n    bx.text (rect.get_x() + rect.get_width()  \/ 2,rect.get_height()+ 0.75,rect.get_height(),horizontalalignment='center', fontsize = 50)\n\nplt.subplot(3,2,3)\ncx=sns.countplot(messi.goal_method,hue=messi.final_game_result)\ncx.set(xlabel = \"Goal Methods\")\nfor rect in cx.patches:\n    cx.text (rect.get_x() + rect.get_width()  \/ 2,rect.get_height()+ 0.75,rect.get_height(),horizontalalignment='center', fontsize = 50)\ncx.legend(loc='upper right')\n\nplt.subplot(3,2,4)\ndx=sns.countplot(messi.goal_halves,hue=messi.final_game_result)\ndx.set(xlabel = \"Goal Halves\")\nfor rect in dx.patches:\n    dx.text (rect.get_x() + rect.get_width()  \/ 2,rect.get_height()+ 0.75,rect.get_height(),horizontalalignment='center', fontsize = 50)\ndx.legend(loc='upper right')\n\nplt.show()","8c6f2cb9":"national_teams  = ['Argentina']\nclub_teams  = ['FC Barcelona']\n\nmessi_club = messi[messi[\"home_team\"].isin(club_teams) | messi[\"away_team\"].isin(club_teams)]\nmessi_national = messi[messi[\"home_team\"].isin(national_teams)| messi[\"away_team\"].isin(national_teams)]\n\ndf_top_performances = messi.opponent.value_counts().head(10).to_frame().reset_index()\ndf_top_performances.columns = ['opponents', 'scored_in_matches']\nlistoftopteams = df_top_performances['opponents'].tolist()\n\ndfp = messi_national.opponent.value_counts().head(10).to_frame().reset_index()\ndfp.columns = ['opponent', 'scored_in_matches']\nlistoftopnationalteams = dfp['opponent'].tolist()\n\nplt.figure(figsize=(50,35))\n\nplt.subplot(2,1,1)\nsns.set(font_scale = 4)\ncx=sns.countplot(y = messi_club[messi_club.opponent.isin(listoftopteams)].opponent,hue=messi_club.goal_halves)\ncx.bar_label(cx.containers[1],fontsize = 30)\ncx.bar_label(cx.containers[0],fontsize = 30)\ncx.bar_label(cx.containers[2],fontsize = 30)\nplt.yticks(fontsize=35)\nplt.xticks(fontsize=20)\nplt.xlabel(\"\")\nplt.ylabel(\"\")\nplt.legend(loc = \"lower right\")\nplt.title(\"Goals Scored in Different Halves Against Top 10 Club Opponents\",fontsize = 40)\n\nplt.subplot(2,1,2)\nsns.set(font_scale = 4)\ncx=sns.countplot(y = messi_national[messi_national.opponent.isin(listoftopnationalteams)].opponent,hue=messi_national.goal_halves)\ncx.bar_label(cx.containers[1],fontsize = 30)\ncx.bar_label(cx.containers[0],fontsize = 30)\ncx.bar_label(cx.containers[2],fontsize = 30)\nplt.yticks(fontsize=35)\nplt.xticks(fontsize=20)\nplt.xlabel(\"\")\nplt.ylabel(\"\")\nplt.legend(loc = \"lower right\")\nplt.title(\"Goals Scored in Different halves Against Top 10 National Teams\",fontsize = 40)\nplt.subplots_adjust(hspace = 0.2)\nplt.show()","bae1cc9d":"plt.figure(figsize = (15,11))\n\na = 1\n\nfor method in messi.goal_method.value_counts().index.values:\n    plt.subplot(2,3,a)\n\n    data = messi[messi.goal_method == method].groupby(['goal_halves'])['goal_halves'].count().reset_index(name = 'Count')\n    textprops = {\"fontsize\":15}\n    plt.pie(data.Count,autopct='%1.1f%%',textprops =textprops )\n    plt.title(method,fontsize = 15)\n    plt.legend(title = 'Halves',labels= data.goal_halves,fontsize =7,title_fontsize =7)\n    \n    a += 1\nplt.suptitle(\"Goal Method In Different Halves\",fontsize = 20)\nplt.show()","a8555476":"no_of_matches = df_top_performances['scored_in_matches'].tolist()\n\nplt.figure(figsize = (15,7))\nplt.barh(y = df_top_performances.opponents, width=df_top_performances.scored_in_matches)\nfor index, value in enumerate(no_of_matches):\n    plt.text(value, index, str(value),fontsize = 20)\nplt.yticks(fontsize=20)\nplt.xticks(fontsize=10)\nplt.title(\"Total Goals Scored Against Top 10 Club Opponents\",fontsize = 25)\nplt.show()","656e38f8":"plt.figure(figsize=(45,25))\n\nplt.subplot(2,1,1)\nsns.set(font_scale = 4)\ncx=sns.countplot(y = messi_club[messi_club.opponent.isin(listoftopteams)].opponent,hue=messi_club.win_not_win)\ncx.bar_label(cx.containers[1],fontsize = 30)\ncx.bar_label(cx.containers[0],fontsize = 30)\nplt.yticks(fontsize=35)\nplt.xticks(fontsize=20)\nplt.xlabel(\"\")\nplt.ylabel(\"\")\nplt.legend(loc = \"upper right\")\nplt.title(\"Goals scored And It's Effect On Result Against Top 10 Club Opponents\",fontsize = 40)\n\nplt.subplot(2,1,2)\nsns.set(font_scale = 4)\ncx=sns.countplot(y = messi_national[messi_national.opponent.isin(listoftopnationalteams)].opponent,hue=messi_national.win_not_win)\ncx.bar_label(cx.containers[1],fontsize = 30)\ncx.bar_label(cx.containers[0],fontsize = 30)\nplt.yticks(fontsize=35)\nplt.xticks(fontsize=20)\nplt.xlabel(\"\")\nplt.ylabel(\"\")\nplt.legend(loc = \"center right\")\nplt.title(\"Goals scored And It's Effect On Result Against Top 10 National Teams\",fontsize = 40)\nplt.subplots_adjust(hspace = 0.2)\nplt.show()","b43e8042":"venues = ['Home Team','Away Team']\nmessi_modified = messi.rename(columns={\"home_team\": \"Home Team\", \"away_team\": \"Away Team\"})\n\nplt.figure(figsize = (10,10))\n\na = 1\nfor i in venues:\n    plt.subplot(2,1,a)\n    df_opponent_clubs = messi_modified[messi_modified[i].isin(club_teams)]\n    df_top = df_opponent_clubs.opponent.value_counts().head(10).to_frame().reset_index()\n    df_top.columns = ['opponents', 'scored_in_matches']\n    no_of_matches_club = df_top['scored_in_matches'].tolist()\n    plt.barh(y=df_top.opponents, width=df_top.scored_in_matches)\n    for index, value in enumerate(no_of_matches_club):\n        plt.text(value, index,str(value),fontsize = 20) \n    plt.yticks(fontsize=20)\n    plt.xticks(fontsize=10)\n    plt.gca().set_title(\"When FC Barcelona is a \"+ i,fontsize = 20)\n    plt.suptitle(\"Goals Scored Against Top 10 Club Opponents\",fontsize = 25)\n    plt.subplots_adjust(hspace = 0.2)\n    a +=1","8966d490":"plt.figure(figsize = (28,7))\na = 1\nfor i in venues:\n    plt.subplot(1,2,a)\n    df_opponent_countries = messi_modified[messi_modified[i].isin(national_teams)]\n    df_top_performances = df_opponent_countries.opponent.value_counts().head(5).to_frame().reset_index()\n    df_top_performances.columns = ['opponents', 'scored_in_matches']\n    no_of_matches_ = df_top_performances['scored_in_matches'].tolist()\n    plt.barh(y=df_top_performances.opponents, width=df_top_performances.scored_in_matches)\n    for index, value in enumerate(no_of_matches_):\n        plt.text(value, index,\n                 str(value),fontsize = 20) \n    plt.xlabel(\"Number of times scored\",fontsize = 20)\n    plt.yticks(fontsize=20)\n    plt.xticks(fontsize=20)\n    plt.gca().set_title(\"When Argentina is a \"+ i,fontsize = 20)\n    plt.suptitle(\"Goals Scored Against Top 5 National Teams\",fontsize = 25)\n    \n    a +=1 ","251f1d17":"plt.figure(figsize = (18,18))\nteams = [\"FC Barcelona\",\"Argentina\"]\na = 1\nfor team in teams:\n    plt.subplot(1,4,a)\n\n    data = messi[messi.home_team == team].groupby(['win_not_win'])['win_not_win'].count().reset_index(name = 'Count')\n    textprops = {\"fontsize\":15}\n    plt.pie(data.Count,autopct='%1.1f%%',textprops =textprops )\n    plt.title(team +\" at Home\",fontsize = 15)\n    plt.legend(title = \"result\",labels= data.win_not_win,fontsize = 7,title_fontsize =7,loc = \"upper right\")\n    \n    a += 1 \nfor team in teams:\n    plt.subplot(1,4,a)\n\n    data = messi[messi.away_team == team].groupby(['win_not_win'])['win_not_win'].count().reset_index(name = 'Count')\n    textprops = {\"fontsize\":15}\n    plt.pie(data.Count,autopct='%1.1f%%',textprops =textprops )\n    plt.title(team+\" Away from Home\",fontsize = 15)\n    plt.legend(title = \"result\",labels= data.win_not_win,fontsize = 7,title_fontsize = 7,loc = \"upper right\")\n    \n    a += 1    \n    \nplt.show()","a58a77dd":"# <p style=\"font-family: Arial; font-size:2.2em;color:blue;\"> Lionel Messi - Career Goals <\/p>","5d679db5":"# Data Analysis - Let's visualize!","5bff07b0":"#### Observations:\n* Winning percentage of FC Barcelona  is less than winning percentage of Argentina at both home game and away game.\n* Overall the winning percentage for both Barcelona and Argentina at home game is quite high with **92.4%** and **94.7%** respectively.\n* Overall the winning percentage for both Barcelona and Argentina in away games is decent  with **86%** and **88.9%** respectively but less than when compared to their performance at home.","e5763415":"#### Observation:\n\n* Top ten teams against whom Messi has scored most times are **Sevilla, Atl\u00e9tico Madrid, Valencia, Real Madrid, Athletic de Bilbao, Osasuna, Espanyol, Deportivo La Coru\u00f1a, Real Betis, Levante**.","154263e3":"#### Observations\n* Top 5 teams are **Brazil, Uruguay, Haiti, Bolivia and Venezuela** against whom **Messi** has scored most times at home.\n* Top 5 teams are **Switzerland, Nigeria, Ecuador, Guatemala and Paraguay** against whom **Messi** has scored most times away from home.","6a789db1":"#### Observations:\n\n* Messi is most succesfull against a top Laliga club **\"Sevilla\"** with **34 win out of 36 matches** in which he scored.\n* In total **26 matches** in which he scored against top rival club **Real Madrid** of spain,he has **won in 15 matches**.\n* Against **Atletico madrid** his record is amazing with **winning in 27 matches out of 28 matches**in which he scored.\n* His record against top european clubs like **Man City, Man United, AC Milan, Arsenal, Ajax, Tottenham, Bayern Munchen** is phenomenal with winning in most of the matches in which he scored.\n* In national side whenever he has scored against top national teams like **Brazil, Ecuador, Uruguay, and switzerland** his team has always won.\n* Above observations implies that whenever he will score chances of winning will be much higher.","359f5da2":"#### Performances Against Top Spanish Clubs and National Teams:\n*  In Laliga against top clubs,Messi scored more goals in first half against **Sevilla**.\n*  His performance against **Real Madrid** is better in second half than first half.\n*  Against **Atletico Madrid** his performance is equally good in both halves.\n* Majority of goals scored by him against **national teams** are in **first half**.\n","97f64378":"#### Observations:\n\n* In Messi's career in which he scored,he has **won 586 matches** , **drawn 47 matches** and **lost in 18 matches** out of  **651 matches** while playing for his club and country.\n* Winning percentage is higher whenever he scores in second half than scoring in first half.\n* In most of the matches Messi scores with left foot and winning percentage is **90 percent**.\n* Whenever he scores with right foot or scores with a header ,Barcelona always wins.\n\n","f5725546":"#### We will try to plot chart based on different factors in  above dataset based on Messi performance affecting final game result  ","ac0c76e8":"## Who is most favorite opponent of Messi and how does his scoring affect final game result?\n\n### Let's find","0458d43a":"#### Observation:\n* At home **Messi** is most successfull against **Sevilla** and at away games he is most successfull against **Real Madrid**","2d0a8f53":"## Let's try to evaluate the pattern of scoring in different halves against different opponents","ad712ee8":"#### Observations:\n* In all goals scored using left foot and right foot,he **scored more in second half than first half** in both cases.\n* When comparing two pie charts of right footed goals anad left footed goals,he **scores more with right foot** in **second half** and **extra time** out of **overall right footed goals** than he **scores with left foot** in **second half** and **extra time** out of **overall left footed goals**\n* In his career he has equally scored in both halves of game using his head.\n* He could score only  in second half using his chest.\n* And could only scored in first half using his hand and hip.\n","fe884044":"## Further continuing our analysis from previous distribution of data among different club opponents, we will see both top performances at home and away from home against different clubs ","fefedb58":"## Who are the top ten club against whom Messi has scored most times?\n#### Let's find out","dd3dd52d":"## How has Messi performed scoring goals with different methods in different halves? \n#### let's evaluate","bf9e68dd":"**Note:**\n* Around 48% of data is missing from column *goal_type*. It would be better to drop this column.\n* Same goes with the column *competition_name* as it also has 19% missing values.","0c20442d":"## How does FC Barcelona and Argentina perform at home and away games whenever Messi has scored?\n#### Lets find out","87152477":"\n![](https:\/\/static01.nyt.com\/images\/2019\/04\/16\/sports\/16onsoccerweb-2\/merlin_153612873_5bb119b9-8972-4087-b4fd-371cab8c5ba2-superJumbo.jpg?quality=90&auto=webp)","6b8fdad9":"# Data Cleaning - Let's fix it!\n1. Imputing the missing values\n2. Removing unimportant columns","75fc0085":"## How does Messi perform for Argentina when he is playing at home and away from home?\n#### Let's find out top performances against countries","ad781b50":"**Note:**\n* As we know club games are popular in European football, Messi has scored 409 goals in LaLiga.","716bb63e":"# Data Sourcing - Let's read!\n1. Importing necessary libraries\n2. Reading the files\n3. Understanding the basic information"}}