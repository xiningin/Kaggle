{"cell_type":{"9e494877":"code","bab9f0ac":"code","89ac0427":"code","8e247767":"code","bd24d2a8":"code","a322ef3f":"code","eb111b28":"code","cb28078d":"markdown","6de9bd75":"markdown"},"source":{"9e494877":"\nimport numpy as np\nimport pandas as pd \nfrom datetime import datetime\nimport matplotlib.pyplot as plt\nfrom matplotlib.dates import DateFormatter","bab9f0ac":"data = pd.read_csv('..\/input\/pollution-index-of-pm25\/Pollutant.csv')\ndata.head()","89ac0427":"#returns datetime object given some fields.\ndef to_timestamp(year,month,day,hour):\n    return datetime(year,month,day,hour)","8e247767":"#apply the above function to the required columns\ndata['time'] = data[['year','month','day','hour']].apply(\n    lambda t: to_timestamp(t['year'],t['month'],t['day'],t['hour']),\n    axis=1)\n#drop the redundancy\ndata = data.drop(['year','month','day','hour'],axis=1)\n#time is the new index\ndata = data.set_index('time')","bd24d2a8":"def plotter(data,var,roll=100,measure = 'measure',plot_size = (20,10)):\n    \"\"\" \n    A function which plots both the raw data and a rolling mean\n    data = pandas dataframe\n    var = variable name\n    measure = unit of measure (default=measure)\n    roll = period of moving average\n    \"\"\"\n    fig, ax = plt.subplots(figsize=plot_size)\n    ax.plot(data.index,data[var],alpha=0.3) #raw\n    data[var].rolling(roll).mean().plot(color='blue') #smoothed data\n    \n    #fix date format on plot\n    date_form = DateFormatter(\"%Y-%m-%d\")\n    ax.xaxis.set_major_formatter(date_form)\n    ax.set_title(f'Plot of {var} and {roll} period moving average')\n    ax.set_xlabel('Date')\n    ax.set_ylabel(measure)\n    \nplotter(data,'TEMP',300, 'degrees')","a322ef3f":"plotter(data,'DEWP',roll=200,plot_size=(10,10))","eb111b28":"\ntotals_by_day = data.groupby([pd.Grouper(freq='d')]).sum()\n#plot of daily totals of TEMP with a weekly average\nplotter(totals_by_day,'TEMP',7,'degrees')","cb28078d":"Here is a function which plots time series with a moving average","6de9bd75":"creating a timestamp from year month day hour columns"}}