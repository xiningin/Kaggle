{"cell_type":{"c26789e2":"code","e373ee58":"code","5117e1ce":"code","01f42112":"code","d385a276":"code","42a52620":"code","5c49f8a1":"code","07be6df9":"code","297d6026":"code","303fc5ce":"code","e7b249f8":"code","fb2518b9":"code","18356398":"code","d5056f2f":"code","e9b67cd8":"code","77a5c0f5":"code","889bb42d":"code","533a3ec5":"markdown","3a60efd6":"markdown","6f1b1cb5":"markdown","821e521e":"markdown","91e6344a":"markdown","718d50eb":"markdown","62faeea8":"markdown","56a39b44":"markdown","dd9bfe86":"markdown","22f22e89":"markdown","3d826b75":"markdown","ada348c2":"markdown","9d1712d0":"markdown","0ab72dcc":"markdown","36be3024":"markdown","0645ba81":"markdown","1b8c83d6":"markdown","d3720f8a":"markdown","7722fe93":"markdown","258d3d28":"markdown"},"source":{"c26789e2":"# This Python 3 environment comes with many helpful analytics libraries installed\n# It is defined by the kaggle\/python Docker image: https:\/\/github.com\/kaggle\/docker-python\n# For example, here's several helpful packages to load\n\nimport numpy as np # linear algebra\nimport pandas as pd # data processing, CSV file I\/O (e.g. pd.read_csv)\nimport seaborn as sns\nimport matplotlib.pyplot as plt\n\nimport plotly.io as pio\nimport plotly.express as px\nimport plotly.graph_objects as go\nimport plotly.figure_factory as ff\nfrom plotly.subplots import make_subplots\nfrom plotly.validators.scatter.marker import SymbolValidator\nimport plotly.offline as pyo\npyo.init_notebook_mode()\n\nfrom sklearn.model_selection import train_test_split\nfrom sklearn.neighbors import KNeighborsClassifier\nfrom sklearn.metrics import mean_squared_error\n\n# Input data files are available in the read-only \"..\/input\/\" directory\n# For example, running this (by clicking run or pressing Shift+Enter) will list all files under the input directory\n\nimport os\nfor dirname, _, filenames in os.walk('\/kaggle\/input'):\n    for filename in filenames:\n        print(os.path.join(dirname, filename))\n        \n\n# You can write up to 20GB to the current directory (\/kaggle\/working\/) that gets preserved as output when you create a version using \"Save & Run All\" \n# You can also write temporary files to \/kaggle\/temp\/, but they won't be saved outside of the current session","e373ee58":"df = pd.read_csv(\"..\/input\/students-performance-in-exams\/StudentsPerformance.csv\")\ndf.head(5).style.background_gradient(cmap=\"Set2\")","5117e1ce":"#Checking for null values\ndf.isnull().sum()","01f42112":"#checking relation of gender with grades\ngender_mean = df.groupby('gender')[['math score','reading score','writing score']].mean().round(2).T\nfig = go.Figure(data=[go.Table(\n    header=dict(values=['','Male', 'Female'],\n                line_color='darkslategray',\n                fill_color='lightskyblue',\n                align='center',\n               height=40,\n               font_size=20),\n    cells=dict(values=[gender_mean.index,\n                       gender_mean['male'],\n                       gender_mean['female']],\n               line_color='darkslategray',\n               fill_color='lightcyan',\n               align='center',\n              height=40,\n              font_size= 20))\n])\n\nfig.update_layout(width=800, height=400)\nfig.show()","d385a276":"fig , axes = plt.subplots(2,3, figsize=(20,10))\nsns.histplot(df[df['gender'] =='male']['math score'],kde=True,ax = axes[0][0])\nsns.histplot(df[df['gender'] =='male']['reading score'],kde=True,ax = axes[0][1])\nsns.histplot(df[df['gender'] =='male']['writing score'],kde=True,ax = axes[0][2])\n\nsns.histplot(df[df['gender'] =='female']['math score'],kde=True,ax = axes[1][0],color='red')\nsns.histplot(df[df['gender'] =='female']['reading score'],kde=True,ax = axes[1][1],color='red')\nsns.histplot(df[df['gender'] =='female']['writing score'],kde=True,ax = axes[1][2],color='red')\n\nfor i in range(0,3):\n    axes[0][i].set_title(\"Male\")\n    axes[1][i].set_title(\"Female\")\n    \n    axes[0][i].set_xlim(0,100)\n    axes[1][i].set_xlim(0,100)\nplt.show()\n","42a52620":"df['tmp'] = 1\nfig = px.pie(df, names='race\/ethnicity',values='tmp',hole = 0.8,title='relation tips')\nfig.update_traces(textposition='outside', textinfo='percent+label')\nfig.update_layout(\n    title_text=\"Group percentage\",\n    annotations=[dict(text='Group', x=0.5, y=0.5, font_size=20, showarrow=False)])","5c49f8a1":"\ndf['total'] = (df['math score'] + df['reading score'] + df['writing score']) \/ 3\nfig , axes = plt.subplots(1,4, figsize=(25,8))\nsns.barplot(data = df, x='race\/ethnicity', y='math score',ax = axes[0],ci=None)\naxes[0].set_title(\"Math score\")\nsns.barplot(data = df, x='race\/ethnicity', y='reading score',ax = axes[1],ci=None)\naxes[1].set_title(\"Reading score\")\nsns.barplot(data = df, x='race\/ethnicity', y='writing score',ax = axes[2],ci=None)\naxes[2].set_title(\"Writing score\")\nsns.barplot(data = df, x='race\/ethnicity', y='total',ax = axes[3],ci=None)\naxes[3].set_title(\"Total score\")\n\nfor i in range(0,4):\n    axes[i].set_ylim(55,75)\nplt.show()","07be6df9":"fig , axes = plt.subplots(1,4, figsize=(25,10),sharey=True)\nsns.barplot(data = df, y='parental level of education', x='math score',ax = axes[0],ci=None)\naxes[0].set_title(\"Math score\")\nsns.barplot(data = df, y='parental level of education', x='reading score',ax = axes[1],ci=None)\naxes[1].set_title(\"Reading score\")\nsns.barplot(data = df, y='parental level of education', x='writing score',ax = axes[2],ci=None)\naxes[2].set_title(\"Writing score\")\nsns.barplot(data = df, y='parental level of education', x='total',ax = axes[3],ci=None)\naxes[3].set_title(\"Total score\")\nfor i in range(0,4):\n    axes[i].set_xlim(60,77.5)\n\nplt.show()","297d6026":"fig = make_subplots(\n    rows=1, cols=2,\n    specs=[[{\"type\": \"domain\"}, {\"type\": \"xy\"}]],\n)\nfig.add_trace(go.Pie(labels=['free\/reduced','standard'],values=df.groupby('lunch')['tmp'].count(),hole = 0.8),\n              row=1, col=1)\nfig.update_traces(textposition='outside', textinfo='percent+label')\n\ncolors = ['red','blue']\ntexts = df.groupby('lunch')['total'].mean().round(2)\nfig.add_trace(go.Bar(x = ['free\/reduced','standard'],y= df.groupby('lunch')['total'].mean(),text=texts,marker_color=colors,opacity=.5))\nfig.update_traces(textposition='outside')\nfig.update_layout(showlegend=False)\nfig.layout.margin.update({'t':50, 'b':100,'l':0})\nfig.update_layout(\n    title=\"Score's relationship with Lunch\",\n    legend_title=\"Legend Title\",\n    font=dict(\n        size=15,\n    )\n)\nfig.show()","303fc5ce":"fig = make_subplots(\n    rows=1, cols=2,\n    specs=[[{\"type\": \"domain\"}, {\"type\": \"xy\"}]],\n)\nfig.add_trace(go.Pie(labels=['Completed','None'],values=df.groupby('test preparation course')['tmp'].count(),hole = 0.8),\n              row=1, col=1)\nfig.update_traces(textposition='outside', textinfo='percent+label')\n\ncolors = ['red','blue']\ntexts = df.groupby('test preparation course')['total'].mean().round(2)\nfig.add_trace(go.Bar(x = ['Completed','None'],y= df.groupby('test preparation course')['total'].mean(),text=texts,marker_color=colors,opacity=.5))\nfig.update_traces(textposition='outside')\nfig.update_layout(showlegend=False)\nfig.layout.margin.update({'t':50, 'b':100,'l':0})\nfig.update_layout(\n    \n    title=\"Score's Relationship with preparation course\",\n    legend_title=\"Legend Title\",\n    font=dict(\n        size=15,\n    )\n)\nfig.show()","e7b249f8":"fig = px.sunburst(df, path=['race\/ethnicity', 'parental level of education'], values='total')\nfig.show()","fb2518b9":"df.drop(['tmp','total'],axis=1,inplace=True)\n\nX = df.drop(['math score', 'reading score', 'writing score'],axis=1)\ny = df[['math score', 'reading score', 'writing score']]","18356398":"#Getting dummy values\nX = pd.get_dummies(X,columns=['gender','race\/ethnicity','parental level of education','lunch','test preparation course'])\nX.head(5)","d5056f2f":"#Splitting the dataset now\nX_train, X_test, y_train, y_test = train_test_split(X,y, test_size=0.2,random_state=100)","e9b67cd8":"#Using KNN\nmse = []\nfor i in range(2,101):\n    model = KNeighborsClassifier(n_neighbors=i)\n    model.fit(X_train, y_train)\n    mse.append(mean_squared_error(y_test,model.predict(X_test)))","77a5c0f5":"plt.figure(figsize=(15,10))\nplt.plot(mse)\nplt.show()","889bb42d":"model = KNeighborsClassifier(n_neighbors=80)\nmodel.fit(X_train, y_train)\nmse.append(mean_squared_error(y_test,model.predict(X_test)))\n\npred = model.predict(X_test)\n\npred = pd.DataFrame(pred,columns= y_test.columns)\n\nfig , axes = plt.subplots(1,3, figsize=(25,10))\nsns.scatterplot(x=pred['math score'], y=y_test['math score'],ax=axes[0])\naxes[0].plot([40,100], [40,100])\nsns.scatterplot(x=pred['reading score'], y=y_test['reading score'],ax=axes[1])\naxes[1].plot([40,100], [40,100])\nsns.scatterplot(x=pred['writing score'], y=y_test['writing score'],ax=axes[2])\naxes[2].plot([40,100], [40,100])\nplt.show()","533a3ec5":"<span style=\"font-family: Arials; font-size: 27px; font-style: bold; font-weight: bold; letter-spacing: 2px; color: #23527c\">1. Gender<\/span>\n<hr style=\"height: 0.5px; border: 0; background-color: 'Black'\">\n\n\n### Let's see how Gender affects grades","3a60efd6":"###  Turns out **Group E** happens to be performing **best** in all subjects, while **group A** performs the **worst**","6f1b1cb5":"### Students who completed test preparation courses get higher grades","821e521e":"### Students having standard lunch have better grades than students having free\/reduced lunch.","91e6344a":"---\n\n<p style=\"font-family: Arials; line-height: 1.3; font-size: 27px; font-weight: bold; letter-spacing: 2px; text-align: center; color: #23527c\">Processing the Data\n<\/p>","718d50eb":"### Please upvote my notebook if you like it! :D","62faeea8":"---\n\n<p style=\"font-family: Arials; line-height: 1.3; font-size: 27px; font-weight: bold; letter-spacing: 2px; text-align: center; color: #23527c\">Modelling\n<\/p>","56a39b44":"### As we can see above from the mean score:\n- Male scored better in **math** than female\n- Female scored better in **Reading** than Male\n- Female scored better in **Writing** than Male","dd9bfe86":"<p style=\"font-family: Arials; line-height: 1.3; font-size: 30px; font-weight: bold; letter-spacing: 2px; text-align: center; color: #23527c\">Analysing student's performance in exams<\/p>\n","22f22e89":"## Let's have a look at the score distribution","3d826b75":"<span style=\"font-family: Arials; font-size: 27px; font-style: bold; font-weight: bold; letter-spacing: 2px; color: #23527c\">3. Parental level of education<\/span>\n<hr style=\"height: 0.5px; border: 0; background-color: 'Black'\">\n\n\n### Let's see how Parental level of education affects grades","ada348c2":"### Children with parents who have **master level education**, appear to get better grades and perform well in all aspects.","9d1712d0":"<p style=\"font-family: Arials; line-height: 1.3; font-size: 27px; font-weight: bold; letter-spacing: 2px; text-align: center; color: #23527c\">Reading the dataset<\/p>","0ab72dcc":"---\n\n<p style=\"font-family: Arials; line-height: 1.3; font-size: 27px; font-weight: bold; letter-spacing: 2px; text-align: center; color: #23527c\">Exploratory data analysis<\/p>","36be3024":"### **No null values, yay!**","0645ba81":"<span style=\"font-family: Arials; font-size: 27px; font-style: bold; font-weight: bold; letter-spacing: 2px; color: #23527c\">5. Preparatory course for test<\/span>\n<hr style=\"height: 0.5px; border: 0; background-color: 'Black'\">\n\n\n### Let's see how test preparation scores affects grades","1b8c83d6":"<span style=\"font-family: Arials; font-size: 27px; font-style: bold; font-weight: bold; letter-spacing: 2px; color: #23527c\">4. Lunch of education<\/span>\n<hr style=\"height: 0.5px; border: 0; background-color: 'Black'\">\n\n\n### Let's see how Lunch affects grades","d3720f8a":"### Looking at the distribution, we can see that Male's score is distributed at the center as compared with female.","7722fe93":"<span style=\"font-family: Arials; font-size: 27px; font-style: bold; font-weight: bold; letter-spacing: 2px; color: #23527c\">2. Group<\/span>\n<hr style=\"height: 0.5px; border: 0; background-color: 'Black'\">\n\n\n### Let's see how Group (Race\/Ethnicity) affects grades","258d3d28":"<span style=\"font-family: Arials; font-size: 27px; font-style: bold; font-weight: bold; letter-spacing: 2px; color: #23527c\">6. Relation between groups(race\/ethnicity) and parent's education level<\/span>\n<hr style=\"height: 0.5px; border: 0; background-color: 'Black'\">\n"}}