{"cell_type":{"d08c9766":"code","d1d2e01c":"code","46333377":"code","caafb466":"code","6e590456":"code","a6920dc3":"code","a97b2583":"code","3dbc4706":"code","abcbd208":"code","85204c9b":"code","6eaa7dcc":"code","7cda5e59":"code","65820b9f":"code","a112ea05":"code","80ce3bfb":"code","f4d8f3f2":"code","159df5d3":"code","50c8ae86":"code","29f06e7c":"code","72e438e1":"code","a4f4e92b":"code","725af355":"code","fba59aa2":"code","32e3ff67":"markdown","af7d85a6":"markdown","0fd5e742":"markdown","a547c179":"markdown"},"source":{"d08c9766":"import numpy as np \nimport pandas as pd \nimport os\nprint(os.listdir(\"..\/input\"))\nfrom sklearn.neighbors import KNeighborsRegressor","d1d2e01c":"#The Dataset\nBRFSS = pd.read_csv(\"..\/input\/2015.csv\")\nBRFSS1 = BRFSS[['MENTHLTH','_AGEG5YR', 'SEX','EDUCA','EMPLOY1','INCOME2','_RACE','NUMADULT','MARITAL','VETERAN3','PREGNANT','ADPLEASR','ADDOWN','ADSLEEP','ADENERGY','ADEAT1','ADFAIL','ADTHINK','ADMOVE']]\nBRFSS1.head()","46333377":"#Changing values from 77,88,7,8,9,14 to NAN | Also, changing 88 values to 0\nfor x in ['ADPLEASR','ADDOWN','ADSLEEP','ADENERGY','ADEAT1','ADFAIL','ADTHINK','ADMOVE']:\n    BRFSS1[x].replace(77, np.NaN, inplace= True)\n    BRFSS1[x].replace(99, np.NaN, inplace= True)\n    BRFSS1[x].replace(88, 0, inplace= True)\n    #Making sure the changes where made\n    print(x,\":Values 77 \\n\",BRFSS1[x].where(BRFSS1[x]==77).count())\n    print(x,\":Values 99 \\n\",BRFSS1[x].where(BRFSS1[x]==99).count())\n    print(x,\":Values 88 \\n\",BRFSS1[x].where(BRFSS1[x]==88).count())\n\nfor x in ['EDUCA','EMPLOY1','_RACE', 'MARITAL']:\n    BRFSS1[x].replace(9, np.NaN, inplace=True)\n    #Making sure the changes where made\n    print(x,\":Values 9 \\n\",BRFSS1[x].where(BRFSS1[x]==9).count())\n    \nfor x in ['VETERAN3','PREGNANT']:\n    BRFSS1[x].replace(9, np.NaN, inplace= True)\n    BRFSS1[x].replace(7, np.NaN, inplace= True)\n    #Making sure the changes where made\n    print(x,\":Values 9 \\n\",BRFSS1[x].where(BRFSS1[x]==9).count())\n    print(x,\":Values 7 \\n\",BRFSS1[x].where(BRFSS1[x]==7).count())\n\nBRFSS1['_AGEG5YR'].replace(14, np.NaN, inplace= True)\nBRFSS1['INCOME2'].replace(77, np.NaN, inplace= True)\nBRFSS1['INCOME2'].replace(99, np.NaN, inplace= True)\nBRFSS1['MENTHLTH'].replace(88, 0, inplace= True)\n\n#Making sure the changes where made\nprint(\"_AGEG5YR:Values 14 \\n\",BRFSS1['_AGEG5YR'].where(BRFSS1['_AGEG5YR']==14).count())\nprint(\"INCOME2:Values 77 \\n\",BRFSS1['INCOME2'].where(BRFSS1['INCOME2']==77).count())\nprint(\"INCOME2:Values 99 \\n\",BRFSS1['INCOME2'].where(BRFSS1['INCOME2']==99).count())\nprint(\"MENTHLTH:Values 88 \\n\",BRFSS1['MENTHLTH'].where(BRFSS1['MENTHLTH']==88).count())","caafb466":"#To have a reference of the individual values before dropping respondant that hasn't answer the 8 questions\nBRFSS1.isnull().sum()\nBRFSS1.shape","6e590456":"BRFSS1 = BRFSS1.dropna(subset=['ADPLEASR','ADDOWN','ADSLEEP','ADENERGY','ADEAT1','ADFAIL','ADTHINK','ADMOVE'],how='all')\nprint(BRFSS1.shape)\nBRFSS1.isnull().sum()","a6920dc3":"def isPregnant(x):\n    if x['SEX'] == 1 or (x['_AGEG5YR'] >= 6 and x['_AGEG5YR'] <= 13):\n        return 2\n    else:\n        return x['PREGNANT']\n\nBRFSS1['PREGNANT'] = BRFSS.apply(isPregnant, axis=1)\nBRFSS1['PREGNANT'].value_counts()","a97b2583":"BRFSS1 = BRFSS1.dropna(subset=['_AGEG5YR', 'SEX','EDUCA','EMPLOY1','INCOME2','_RACE','NUMADULT','MARITAL','VETERAN3','PREGNANT'])\nprint(BRFSS1.shape)\nBRFSS1.isnull().sum()","3dbc4706":"\n#Dropping NaN from the input\n#Dropping the respondat that this answered the 8 questions\nBRFSS1 = BRFSS1.dropna(subset=['ADPLEASR','ADDOWN','ADSLEEP','ADENERGY','ADEAT1','ADFAIL','ADTHINK','ADMOVE'],how='all')\nBRFSS1 = BRFSS1.reset_index(drop=True)\nprint(BRFSS1.head(10))\nprint(\"*\"*100)\n#To have a reference of the individual values after dropping respondant that hasn't answer the 8 questions\nprint(BRFSS1.isnull().count())\nprint(\"*\"*100)\nprint(BRFSS1.shape)","abcbd208":"#Data with complete rows\nTRAINDATA = BRFSS1.dropna().reset_index(drop=True)\nprint(TRAINDATA.head(5))\nprint(\"*\"*100)\nTRAINDATA.shape","85204c9b":"TRAINDATA_1 = TRAINDATA\nTRAINDATA_1 = TRAINDATA_1.reset_index(drop=True)\nprint(TRAINDATA_1.head())\nprint(\"*\"*100)\nprint(TRAINDATA_1.shape)\nprint(\"*\"*100)\nprint(TRAINDATA_1.isnull().sum())\nIN= ['_AGEG5YR', 'SEX','EDUCA','EMPLOY1','INCOME2','_RACE','NUMADULT','MARITAL','VETERAN3','PREGNANT']\nON= ['ADPLEASR','ADDOWN','ADSLEEP','ADENERGY','ADEAT1','ADFAIL','ADTHINK','ADMOVE']\nMODEL1 = KNeighborsRegressor(n_neighbors=1)\nMODEL1.fit(TRAINDATA_1[IN],TRAINDATA_1[ON])\nTESTDATA_1 = BRFSS1.reset_index(drop=True)\nPRE_A = MODEL1.predict(TESTDATA_1[IN])\nPRE_A = pd.DataFrame(PRE_A)\nBRFSS_T1= pd.DataFrame()\nBRFSS_T1 = BRFSS1[IN]\nBRFSS_T1[\"MENTHLTH\"] = BRFSS1[\"MENTHLTH\"]\nBRFSS_T1[ON] = PRE_A\nprint(BRFSS_T1.isnull().sum())\nBRFSS_T1.head()\n","6eaa7dcc":"#Adding up the days and creating a column to save them\nBRFSS_T1['SUM']= BRFSS_T1[['ADPLEASR','ADDOWN','ADSLEEP','ADENERGY','ADEAT1','ADFAIL','ADTHINK','ADMOVE']].sum(axis=1)\nprint(BRFSS_T1.head())\nprint(BRFSS_T1['SUM'].where(BRFSS_T1['SUM']>=56).count())\nprint(BRFSS_T1.isnull().sum())\nx = len(BRFSS_T1[(BRFSS_T1['MENTHLTH']==30) & (BRFSS_T1['SUM']>=56)])\ny = len(BRFSS_T1[(BRFSS_T1['MENTHLTH']==30) & (BRFSS_T1['SUM']<56)])\nprint(x,y)\nprint(\"Ratio =\", (x\/(x+y))*100)","7cda5e59":"TRAINDATA_2 = TRAINDATA\nTRAINDATA_2 = TRAINDATA_2.reset_index(drop=True)\nprint(TRAINDATA_2.head())\nprint(\"*\"*100)\nprint(TRAINDATA_2.shape)\nprint(\"*\"*100)\nprint(TRAINDATA_2.isnull().sum())\nIN= ['_AGEG5YR', 'SEX','EDUCA','EMPLOY1','INCOME2','_RACE','NUMADULT','MARITAL','VETERAN3','PREGNANT']\nON= ['ADPLEASR','ADDOWN','ADSLEEP','ADENERGY','ADEAT1','ADFAIL','ADTHINK','ADMOVE']\nMODEL2 = KNeighborsRegressor(n_neighbors=3)\nMODEL2.fit(TRAINDATA_2[IN],TRAINDATA_2[ON])\nTESTDATA_2 = BRFSS1.reset_index(drop=True)\nPRE_B = MODEL2.predict(TESTDATA_2[IN])\nPRE_B = pd.DataFrame(PRE_B)\nBRFSS_T2= pd.DataFrame()\nBRFSS_T2 = BRFSS1[IN]\nBRFSS_T2[\"MENTHLTH\"] = BRFSS1[\"MENTHLTH\"]\nBRFSS_T2[ON] = PRE_B\nprint(BRFSS_T2.isnull().sum())\nBRFSS_T2.head()","65820b9f":"#Adding up the days and creating a column to save them\nBRFSS_T2['SUM']= BRFSS_T2[['ADPLEASR','ADDOWN','ADSLEEP','ADENERGY','ADEAT1','ADFAIL','ADTHINK','ADMOVE']].sum(axis=1)\nprint(BRFSS_T2.head())\nprint(BRFSS_T2['SUM'].where(BRFSS_T2['SUM']>=56).count())\nprint(BRFSS_T2.isnull().sum())\nx2 = len(BRFSS_T2[(BRFSS_T2['MENTHLTH']==30) & (BRFSS_T2['SUM']>=56)])\ny2 = len(BRFSS_T2[(BRFSS_T2['MENTHLTH']==30) & (BRFSS_T2['SUM']<56)])\nprint(x2,y2)\nprint(\"Ratio =\", (x2\/(x2+y2))*100)","a112ea05":"TRAINDATA_3 = TRAINDATA\nTRAINDATA_3 = TRAINDATA_3.reset_index(drop=True)\nprint(TRAINDATA_3.head())\nprint(\"*\"*100)\nprint(TRAINDATA_3.shape)\nprint(\"*\"*100)\nprint(TRAINDATA_3.isnull().sum())\nIN= ['_AGEG5YR', 'SEX','EDUCA','EMPLOY1','INCOME2','_RACE','NUMADULT','MARITAL','VETERAN3','PREGNANT']\nON= ['ADPLEASR','ADDOWN','ADSLEEP','ADENERGY','ADEAT1','ADFAIL','ADTHINK','ADMOVE']\nMODEL3 = KNeighborsRegressor(n_neighbors=5)\nMODEL3.fit(TRAINDATA_3[IN],TRAINDATA_3[ON])\nTESTDATA_3 = BRFSS1.reset_index(drop=True)\nPRE_C = MODEL3.predict(TESTDATA_3[IN])\nPRE_C = pd.DataFrame(PRE_C)\nBRFSS_T3= pd.DataFrame()\nBRFSS_T3 = BRFSS1[IN]\nBRFSS_T3[\"MENTHLTH\"] = BRFSS1[\"MENTHLTH\"]\nBRFSS_T3[ON] = PRE_C\nprint(BRFSS_T3.isnull().sum())\nBRFSS_T3.head()","80ce3bfb":"#Adding up the days and creating a column to save them\nBRFSS_T3['SUM']= BRFSS_T3[['ADPLEASR','ADDOWN','ADSLEEP','ADENERGY','ADEAT1','ADFAIL','ADTHINK','ADMOVE']].sum(axis=1)\nprint(BRFSS_T3.head())\nprint(BRFSS_T3['SUM'].where(BRFSS_T3['SUM']>=56).count())\nprint(BRFSS_T3.isnull().sum())\nx3 = len(BRFSS_T3[(BRFSS_T3['MENTHLTH']==30) & (BRFSS_T3['SUM']>=56)])\ny3 = len(BRFSS_T3[(BRFSS_T3['MENTHLTH']==30) & (BRFSS_T3['SUM']<56)])\nprint(x3,y3)\nprint(\"Ratio =\", (x3\/(x3+y3))*100)","f4d8f3f2":"# ---COLUMNS----\nCOL1 = BRFSS1[\"_AGEG5YR\"]\nCOL2 = BRFSS1[\"SEX\"]\nCOL3 = BRFSS1[\"EDUCA\"]\nCOL4 = BRFSS1[\"EMPLOY1\"]\nCOL5 = BRFSS1[\"INCOME2\"]\nCOL6 = BRFSS1[\"_RACE\"]\nCOL7 = BRFSS1[\"NUMADULT\"]\nCOL8 = BRFSS1[\"MARITAL\"]\nCOL9 = BRFSS1[\"VETERAN3\"]\nCOL10 = BRFSS1[\"PREGNANT\"]\n\n# ---MIN----\nMIN1 = COL1.min()\nMIN2 = COL2.min()\nMIN3 = COL3.min()\nMIN4 = COL4.min()\nMIN5 = COL5.min()\nMIN6 = COL6.min()\nMIN7 = COL7.min()\nMIN8 = COL8.min()\nMIN9 = COL9.min()\nMIN10 = COL10.min()\n\n# ---MAX----\nMAX1 = COL1.max()\nMAX2 = COL2.max()\nMAX3 = COL3.max()\nMAX4 = COL4.max()\nMAX5 = COL5.max()\nMAX6 = COL6.max()\nMAX7 = COL7.max()\nMAX8 = COL8.max()\nMAX9 = COL9.max()\nMAX10 = COL10.max()\n\nBRFSS1['_AGEG5Y_SCALATED'] = (COL1 - MIN1) \/ (MAX1 - MIN1)\nBRFSS1['SEX_SCALATED'] = (COL2 - MIN2) \/ (MAX2 - MIN2)\nBRFSS1['EDUCA_SCALATED'] = (COL3 - MIN3) \/ (MAX3 - MIN3)\nBRFSS1['EMPLOY1_SCALATED'] = (COL4 - MIN4) \/ (MAX4 - MIN4)\nBRFSS1['INCOME2_SCALATED'] = (COL5 - MIN5) \/ (MAX5 - MIN5)\nBRFSS1['_RACE_SCALATED'] = (COL6 - MIN6) \/ (MAX6 - MIN6)\nBRFSS1['NUMADULT_SCALATED'] = (COL7 - MIN7) \/ (MAX7 - MIN7)\nBRFSS1['MARITAL_SCALATED'] = (COL8 - MIN8) \/ (MAX8 - MIN8)\nBRFSS1['VETERAN3_SCALATED'] = (COL9 - MIN9) \/ (MAX9 - MIN9)\nBRFSS1['PREGNAT_SCALATED'] = (COL10 - MIN10) \/ (MAX10 - MIN10)","159df5d3":"BRFSS1['_AGEG5Y_SCALATED'].min()\nBRFSS1['SEX_SCALATED'].min()\nBRFSS1['EDUCA_SCALATED'].min()\nBRFSS1['EMPLOY1_SCALATED'].min()\nBRFSS1['INCOME2_SCALATED'].min()\nBRFSS1['_RACE_SCALATED'].min()\nBRFSS1['NUMADULT_SCALATED'].min()\nBRFSS1['MARITAL_SCALATED'].min()\nBRFSS1['VETERAN3_SCALATED'].min()\nBRFSS1['PREGNAT_SCALATED'].min()\n\nBRFSS1['_AGEG5Y_SCALATED'].max()\nBRFSS1['SEX_SCALATED'].max() \nBRFSS1['EDUCA_SCALATED'].max()\nBRFSS1['EMPLOY1_SCALATED'].max()\nBRFSS1['INCOME2_SCALATED'].max()\nBRFSS1['_RACE_SCALATED'].max()\nBRFSS1['NUMADULT_SCALATED'].max()\nBRFSS1['MARITAL_SCALATED'].max()\nBRFSS1['VETERAN3_SCALATED'].max()\nBRFSS1['PREGNAT_SCALATED'].max()","50c8ae86":"print(BRFSS1['_AGEG5Y_SCALATED'].min())\nprint(BRFSS1['SEX_SCALATED'].min())\nprint(BRFSS1['EDUCA_SCALATED'].min())\nprint(BRFSS1['EMPLOY1_SCALATED'].min())\nprint(BRFSS1['INCOME2_SCALATED'].min())\nprint(BRFSS1['_RACE_SCALATED'].min())\nprint(BRFSS1['NUMADULT_SCALATED'].min())\nprint(BRFSS1['MARITAL_SCALATED'].min())\nprint(BRFSS1['VETERAN3_SCALATED'].min())\nprint(BRFSS1['PREGNAT_SCALATED'].min())\n\nprint(BRFSS1['_AGEG5Y_SCALATED'].max())\nprint(BRFSS1['SEX_SCALATED'].max())\nprint(BRFSS1['EDUCA_SCALATED'].max())\nprint(BRFSS1['EMPLOY1_SCALATED'].max())\nprint(BRFSS1['INCOME2_SCALATED'].max())\nprint(BRFSS1['_RACE_SCALATED'].max())\nprint(BRFSS1['NUMADULT_SCALATED'].max())\nprint(BRFSS1['MARITAL_SCALATED'].max())\nprint(BRFSS1['VETERAN3_SCALATED'].max())\nprint(BRFSS1['PREGNAT_SCALATED'].max())","29f06e7c":"BRFSS_RANGES = pd.DataFrame()","72e438e1":"BRFSS_RANGES = BRFSS1[['_AGEG5Y_SCALATED','SEX','EDUCA_SCALATED','EMPLOY1_SCALATED','INCOME2_SCALATED','_RACE_SCALATED','NUMADULT_SCALATED','MARITAL_SCALATED','VETERAN3_SCALATED','PREGNAT_SCALATED']] \nBRFSS_RANGES['MENTHLTH'] = BRFSS1['MENTHLTH']\nBRFSS_RANGES[ON] = BRFSS1[ON]\nBRFSS_RANGES.head()","a4f4e92b":"BRFSS_RANGES.isnull().sum()","725af355":"IN_S = ['_AGEG5Y_SCALATED','SEX','EDUCA_SCALATED','EMPLOY1_SCALATED','INCOME2_SCALATED','_RACE_SCALATED','NUMADULT_SCALATED','MARITAL_SCALATED','VETERAN3_SCALATED','PREGNAT_SCALATED']\nTRAINDATA_R = BRFSS_RANGES.dropna().reset_index(drop=True)\nprint(TRAINDATA_R.head())\nprint(\"*\"*100)\nprint(TRAINDATA_R.shape)\nprint(\"*\"*100)\nprint(TRAINDATA_R.isnull().sum())\nMODELR = KNeighborsRegressor(n_neighbors=1)\nMODELR.fit(TRAINDATA_R[IN_S],TRAINDATA_R[ON])\nTESTDATA_R = BRFSS_RANGES.reset_index(drop=True)\nPRE_R = MODELR.predict(TESTDATA_R[IN_S])\nPRE_R = pd.DataFrame(PRE_R)\nBRFSS_TR= pd.DataFrame()\nBRFSS_TR = BRFSS_RANGES[IN_S]\nBRFSS_TR[\"MENTHLTH\"] = BRFSS_RANGES[\"MENTHLTH\"]\nBRFSS_TR[ON] = PRE_R\nprint(BRFSS_TR.isnull().sum())\nBRFSS_TR.head()","fba59aa2":"#Adding up the days and creating a column to save them\nBRFSS_TR['SUM']= BRFSS_TR[['ADPLEASR','ADDOWN','ADSLEEP','ADENERGY','ADEAT1','ADFAIL','ADTHINK','ADMOVE']].sum(axis=1)\nprint(BRFSS_TR.head())\nprint(BRFSS_TR['SUM'].where(BRFSS_T3['SUM']>=56).count())\nprint(BRFSS_TR.isnull().sum())\nxR = len(BRFSS_TR[(BRFSS_TR['MENTHLTH']==30) & (BRFSS_TR['SUM']>=56)])\nyR = len(BRFSS_TR[(BRFSS_TR['MENTHLTH']==30) & (BRFSS_TR['SUM']<56)])\nprint(xR,yR)\nprint(\"Ratio =\", (xR\/(xR+yR))*100)","32e3ff67":"# ---- Range ----","af7d85a6":"# ---- Model 2 ----","0fd5e742":"# ---- Model 3 ----","a547c179":"# ---- Model 1 ----"}}