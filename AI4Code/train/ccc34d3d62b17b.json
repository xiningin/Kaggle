{"cell_type":{"f1166503":"code","3ede5366":"code","12c5fb19":"code","8d827160":"code","a0340992":"code","f3f34a96":"code","d6402d2d":"code","bc263138":"code","505797a1":"code","921b260e":"code","ca7723fc":"code","3ad1065d":"code","9fa5b294":"code","e2c55261":"code","8f129e60":"code","70d1b01d":"code","b12d389d":"code","b1ffd0b3":"code","deebeb3b":"code","5656fc3f":"code","64df581c":"code","dc90314c":"code","e379cb6a":"code","0c1e4851":"code","aa708330":"markdown","5194e410":"markdown","cdd3fac4":"markdown","7a709ffc":"markdown"},"source":{"f1166503":"import numpy as np # linear algebra\nimport pandas as pd # data processing, CSV file I\/O (e.g. pd.read_csv)\nimport matplotlib.pyplot as plt\n%matplotlib inline\n\nimport os\nprint(os.listdir(\"..\/input\"))\n","3ede5366":"df_level = pd.read_csv('..\/input\/chennai_reservoir_levels.csv')\ndf_rain = pd.read_csv('..\/input\/chennai_reservoir_rainfall.csv')","12c5fb19":"df_level.head()","8d827160":"df_rain.head()","a0340992":"df_level.info()","f3f34a96":"df_rain.info()","d6402d2d":"# Convert date columns to date format & make them index\ndf_level['Date'] = pd.to_datetime(df_level['Date'],format='%d-%m-%Y')\ndf_rain['Date'] = pd.to_datetime(df_rain['Date'],format='%d-%m-%Y')\ndf_level.set_index('Date',drop=True,inplace=True)\ndf_rain.set_index('Date',drop=True,inplace=True)","bc263138":"# Check for any missing values\nprint(df_level.isna().sum())\nprint(df_rain.isna().sum())","505797a1":"# Observe the water levels over the years in each reservoir\nimport seaborn as sns\n# Use seaborn style defaults and set the default figure size\nsns.set(rc={'figure.figsize':(20, 4)})\nplt.plot(df_level['POONDI'])\nplt.plot(df_level['CHOLAVARAM'])\nplt.plot(df_level['CHEMBARAMBAKKAM'])\nplt.plot(df_level['REDHILLS'])\nplt.legend(loc='best')\nplt.title('Storage level in Reservoir')","921b260e":"sns.set(rc={'figure.figsize':(20, 7)})\nplt.plot(df_rain['POONDI'])\nplt.plot(df_rain['CHOLAVARAM'])\nplt.plot(df_rain['CHEMBARAMBAKKAM'])\nplt.plot(df_rain['REDHILLS'])\nplt.legend(loc='best')\nplt.title('Rainfall in Reservoir')","ca7723fc":"# Reservoir availability in percent of it's full capacity\nsns.set(rc={'figure.figsize':(20, 4)})\nplt.plot(df_level['POONDI']\/3231)\nplt.plot(df_level['CHOLAVARAM']\/881)\nplt.plot(df_level['CHEMBARAMBAKKAM']\/3645)\nplt.plot(df_level['REDHILLS']\/3300)\nplt.legend(loc='best')\nplt.title('Reservoir Storage % in terms of full capacity')","3ad1065d":"# Create data frame for population\ndata = {'Year':[2005,2006,2007,2008,2009,2010,2011,2012,2013,2014,2015,2016,2017,2018,2019],'Population':[7476986,7671388,7870844,8075486,8285448,8500870,8721893,8948662,9181327,9420041,9664963,9916252,10174074,10438600,10710004]}\ndf_population = pd.DataFrame(data)","9fa5b294":"df_population.head()","e2c55261":"# Calculate change of water level in reservoir, per day. This can be considered as water used for drinking water needs \n# of the city\ndf_level_change = df_level.diff(periods=-1)","8f129e60":"print(df_level.head())\nprint(df_level_change.head())","70d1b01d":"# Plot usage\/water drawn from each reservoir \n# Reservoir availability in percent of it's full capacity\nsns.set(rc={'figure.figsize':(20, 10)})\nplt.plot(df_level_change['POONDI'])\nplt.plot(df_level_change['CHOLAVARAM'])\nplt.plot(df_level_change['CHEMBARAMBAKKAM'])\nplt.plot(df_level_change['REDHILLS'])\nplt.legend(loc='best')\nplt.title('Water usage from each of the reservoir')","b12d389d":"# Calculate total water drawn from all reservoirs per day & aggregate at Year level\ndf_level_change['Total_Water_Used'] = df_level_change['POONDI']+df_level_change['CHEMBARAMBAKKAM']+df_level_change['CHOLAVARAM']+df_level_change['REDHILLS']\ndf_level_change['Year'] = df_level_change.index\ndf_level_change['Quarter'] = df_level_change['Year'].dt.quarter\ndf_level_change['Year'] = df_level_change['Year'].dt.year","b1ffd0b3":"df_water_usage_year = pd.DataFrame(df_level_change.groupby('Year')[['Total_Water_Used','POONDI','CHEMBARAMBAKKAM','CHOLAVARAM','REDHILLS']].sum())\ndf_water_usage_quarter = pd.DataFrame(df_level_change.groupby(['Year','Quarter'])[['Total_Water_Used','POONDI','CHEMBARAMBAKKAM','CHOLAVARAM','REDHILLS']].sum())","deebeb3b":"df_water_usage_year.reset_index(inplace=True)\ndf_water_usage_quarter.reset_index(inplace=True)","5656fc3f":"# Merge with population data to check water usage \ndf_water_usage_year = pd.merge(df_water_usage_year,df_population,on='Year')\ndf_water_usage_quarter = pd.merge(df_water_usage_quarter,df_population,on='Year')","64df581c":"plt.figure(figsize=(15,4))\nplt.bar(df_population['Year'],df_population['Population'])\nplt.title('Population Growth')\nplt.xlabel('Year')\nplt.ylabel('Population (10 million)')","dc90314c":"# Plot stacked bar of water usage from each reservoir\ndf_water_usage_quarter_2 = pd.DataFrame(df_level_change.groupby(['Year','Quarter'])[['POONDI','CHEMBARAMBAKKAM','CHOLAVARAM','REDHILLS']].sum())\na = df_water_usage_quarter_2.plot(kind='bar',stacked=True)\nplt.savefig('stacked.png')\nplt.title('Water Usage from each Reservoir every Quarter')\nplt.show()","e379cb6a":"# Calculate Water usage per person \ndf_water_usage_year['Usage_per_person'] = df_water_usage_year['Total_Water_Used']\/df_water_usage_year['Population']","0c1e4851":"plt.figure(figsize=(15,5))\nplt.plot(df_water_usage_year['Year'],df_water_usage_year['Usage_per_person'], lw=4,c='red',ls='-.')\nplt.xlabel('Year')\nplt.ylabel('Usage per person (mcft)')\nplt.title('Usage per person over years')","aa708330":"* As we have seen 2016 is the driest year & the same year has maximum usage of reservoir water per person.\n* Owing to less\/no rains, it seems groud water couldn't cater to the needs. Hence people had to rely on more resevoir water in 2016.\n* As 2017 again has good rains (comparitively), water usage from resevoirs has reduced in 2018.\n* However, on the initial analysis, we are having a delayed effect of 2016 even now, coupled with increasing population, water needs & weak monsoons.","5194e410":"According to UN World Urbanization Prospects (& some information available here http:\/\/worldpopulationreview.com\/world-cities\/chennai-population\/ basis that), below is the population of Chennai over the years, growing at 2.6% annually.\nYear\tPopulation\n2005\t7476986\n2006\t7671387.636\n2007\t7870843.715\n2008\t8075485.651\n2009\t8285448.278\n2010\t8500869.933\n2011\t8721892.552\n2012\t8948661.758\n2013\t9181326.964\n2014\t9420041.465\n2015\t9664962.543\n2016\t9916251.569\n2017\t10174074.11\n2018\t10438600.04\n2019\t10710003.64\n![image.png](attachment:image.png)","cdd3fac4":"* Of all the 4 reservoirs, Cholavaram lake has smaller storage capacity (881 mcft) while the rest are around 3300\n* All of reservoirs touched their maximum storage capacity (approx.) between 2006 - 2013, started to decline there after.\n* Capacity has touched its maximum again in early 2016. This can attributed to the severe floods the city has faced during fag end of 2015.\n* However, despite reaching maximum capacity in early 2016, storage levels have dropped steeply than never before , from 2016 to end of 2017\n![image.png](attachment:image.png)\n* Despite normal monsoon in 2017, the water levels haven't gone up. This could be either due to rain water not properly channelized to the reservoirs or usage has increased beyond the replenishment & probably no control over water usage from reservoir.\n* Same is evident from the rainfall plot below. Year 2017 rainfall could be seen as 5th best year in terms of rainfall in the entire 15 year. However, water levels haven't reached appreciable level.","7a709ffc":"More water seems to be used from Red Hills & Poondi, than the rest 2\n* While very year, replenishment happens in 4th quarter when the city receives North East Monsoon, 2016 seems to be the driest year so far with very minimal replenishment.\n* Post 2015, POONDI, REDHILLS were used as usual. This could be one of the major causes for crisis, as these 2 are the major reservoirs "}}