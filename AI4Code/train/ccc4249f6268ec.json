{"cell_type":{"d014321e":"code","06f529e4":"code","277d7365":"code","cb2f7ade":"code","9c7a2090":"code","784c3676":"code","a61e9b1e":"code","28265152":"code","b06d095b":"code","8d68014c":"code","94f4b3e5":"code","1385e986":"code","8ead62a4":"code","a9cc6d64":"code","62d3e15f":"code","b0062528":"code","06b7efee":"code","6344db24":"code","92262096":"code","ae3ed20c":"code","e321bfd2":"code","89617a2a":"code","ea859528":"code","ea3e5825":"code","aabb1426":"code","a3f6f423":"code","0609c946":"code","a036df2b":"code","c7c5272e":"code","85e565ea":"code","96b6b499":"code","7797ba2a":"code","4fcb808c":"markdown","2775659d":"markdown","61690a0a":"markdown","a6ae28ad":"markdown","d89826a2":"markdown","1f8a8c76":"markdown","a527a5b6":"markdown","626df8bf":"markdown","fbf39978":"markdown","3a4242c1":"markdown","42f22345":"markdown","f66440ef":"markdown","57334f9d":"markdown","74b670d6":"markdown","a856b495":"markdown","8714f9ac":"markdown","0d5e88b9":"markdown","e7e14a99":"markdown","17d98304":"markdown"},"source":{"d014321e":"import pandas as pd\nimport numpy as np\nimport matplotlib.pyplot as plt\nimport seaborn as sb\nimport matplotlib\nfrom scipy import stats\npd.set_option('display.max_columns', None)\n%matplotlib inline\nimport warnings\nwarnings.filterwarnings('ignore')\nimport dask.dataframe as dd\nimport squarify\nimport geopandas as gpd\n\ndf_origin = dd.read_csv('..\/input\/kaggle-survey-2020\/kaggle_survey_2020_responses.csv')","06f529e4":"df = df_origin.compute()\ndf=df.drop(index=0)\ndf.shape","277d7365":"Q = []\nQ.append([df.columns[0]])\nfor i in range(1,40):\n    if i<= 6:\n        Tem = ['Q'+str(i)]\n        Q.append(Tem)\n    if i>6:\n        Tem=[]\n        for element in df.columns:\n            if element.startswith('Q'+str(i)):\n                Tem.append(element)\n        Q.append(Tem)","cb2f7ade":"#df.loc[df.Q1=='70+','Q1']='70-70'\n#df['Q1_l']=df['Q1'].apply(lambda x: int(x.split('-')[0]))\n#df['Q1_h']=df['Q1'].apply(lambda x: int(x.split('-')[1]))\n#df['ave_age']=(df['Q1_l']+df['Q1_h'])\/2","9c7a2090":"#df['Q2'].value_counts()","784c3676":"woman_respondent = df[df['Q2']=='Woman']['Q1'].value_counts().sort_index().tolist()\nman_respondent = df[df['Q2']=='Man']['Q1'].value_counts().sort_index().tolist()\nindex = df[df['Q2']=='Man']['Q1'].value_counts().sort_index().index.tolist()\nwidth = 0.35\np1 = plt.bar(index,man_respondent,width)\np2 = plt.bar(index,woman_respondent,width,bottom=man_respondent)\nplt.xlabel('Age')\nplt.ylabel('Number of respondents')\nplt.title('Count(Respondents) by group and gender')\nplt.legend((p1[0], p2[0]), ('Men', 'Women'))","a61e9b1e":"world_map = gpd.read_file('..\/input\/worldmap\/World_Countries.shp')\nworld_map.head()","28265152":"for item in df['Q3'].unique():\n    world_data_list = world_map['COUNTRY'].tolist()\n    if item not in world_data_list:\n        print(item)","b06d095b":"df.loc[df.Q3=='United States of America','Q3']='United States'\ndf.loc[df.Q3=='United Kingdom of Great Britain and Northern Ireland','Q3']='United Kingdom'\ndf.loc[df.Q3=='Viet Nam','Q3']='Vietnam'\ndf.loc[df.Q3=='Republic of Korea','Q3']='South Korea'\ndf.loc[df.Q3=='Iran, Islamic Republic of...','Q3']='Iran'","8d68014c":"#fill 'Other' with the distribution of countries\ns = df[df['Q3']!='Other']['Q3'].value_counts(normalize=True)\nmissing = df['Q3']=='Other'\ndf.loc[missing,'Q3'] = np.random.choice(s.index, size=len(df[missing]),p=s.values)","94f4b3e5":"merge = world_map.join(df['Q3'].value_counts(), on='COUNTRY', how='right')","1385e986":"ax=merge.plot(column='Q3',\n              cmap='OrRd',\n              scheme='user_defined',\n              classification_kwds={'bins':[100,500,1000,1500,3000,5000]},\n              figsize=(20,10),\n              legend=True,\n              edgecolor='black',\n              linewidth=0.4)","8ead62a4":"fig1, ax1 = plt.subplots()\nfig1.set_size_inches(12,8)\nax1.pie(df['Q4'].value_counts().values, \n        labels=df['Q4'].value_counts().index, \n        autopct='%1.1f%%',shadow=True, startangle=190)\nplt.title('Pie chart for different job titles',fontsize=20)\nplt.show()","a9cc6d64":"labels = df['Q5'].value_counts().index\nencode_means = df['Q5'].value_counts().values\n\nx = np.arange(len(labels))  # the label locations\nwidth = 0.35  # the width of the bars\n\nfig, ax = plt.subplots()\nfig.set_size_inches(12,8)\nrects1 = ax.bar(x, encode_means, width, label='encode')\nax.set_ylabel('Respondents Number',fontsize=16)\nax.set_xticks(x)\nax.set_xticklabels(labels,fontsize=12,rotation=45,ha='right')\nplt.title('bar chart for different education',fontsize=20)\nplt.show()","62d3e15f":"df_emp  =df[~df['Q5'].isin(['Student','Currently not employed'])]\ndf_unemp=df[df['Q5'].isin(['Student','Currently not employed'])]","b0062528":"df_emp = df_emp[df_emp.Q24.notna()]\ndf_emp.shape","06b7efee":"df_emp['Q24']=df_emp['Q24'].apply(lambda x: x.replace(',',''))\ndf_emp.loc[df_emp.Q24=='> $500000','Q24']='500000-500000'\ndf_emp.loc[df_emp.Q24=='$0-999','Q24']='0-999'\n\ndf_emp['Q24_avg']=(df_emp['Q24'].apply(lambda x: int(x.split('-')[0]))+\n                   df_emp['Q24'].apply(lambda x: int(x.split('-')[1])))\/2","6344db24":"df_1 = df[df['Q24'].notna()]['Q24'].value_counts().to_frame().reset_index()\ndf_1 = df_1.rename(columns={'index':'Q24','Q24':'count'})","92262096":"df_1['Q24']=df_1['Q24'].apply(lambda x: x.replace(',',''))\ndf_1.loc[df_1.Q24=='> $500000','Q24']='500000-500000'\ndf_1.loc[df_1.Q24=='$0-999','Q24']='0-999'\n\ndf_1['Q24_avg']=(df_1['Q24'].apply(lambda x: int(x.split('-')[0]))+\n                   df_1['Q24'].apply(lambda x: int(x.split('-')[1])))\/2\ndf_1 = df_1.sort_values('Q24_avg')","ae3ed20c":"plt.figure(figsize=(12,8))\nplt.bar(x=df_1.Q24, height=df_1['count'])\nplt.xlabel('Salary',fontsize=16)\nplt.ylabel('Number of respondents',fontsize=16)\nplt.title('Count(Respondents) by Salary Group',fontsize=20)\nplt.xticks(rotation=40,ha='right')\nplt.show()","e321bfd2":"def groupby_multiple(df,q_num):\n    avg_salary = []\n    n_respondent = []\n    element = []\n\n    for column in Q[int(q_num)]:\n        df_temp = df[df[column].notna()]\n        avg_salary.append(df_temp['Q24_avg'].mean())\n        n_respondent.append(len(df_temp))\n        element.append(df_temp[column].value_counts().index[0])\n    group = pd.DataFrame({'Question':Q[int(q_num)],'mean_salary':avg_salary,\n                          'n_respondents':n_respondent,'element':element})\n    return group","89617a2a":"## null value pick\ndef compare_none(df,q_num):\n    avg_salary = []\n    n_respondent = []\n    element = []\n    for column in Q[int(q_num)]:\n        df_temp = df[df[column].isna()]\n        avg_salary.append(df_temp['Q24_avg'].mean())\n        n_respondent.append(len(df_temp))\n        element.append(df_emp[df_emp[column].notna()][column].value_counts().index[0])\n    group = pd.DataFrame({'Question':Q[int(q_num)],'mean_salary':avg_salary,\n                          'n_respondents':n_respondent,'non_element':element})\n    return group","ea859528":"encode_means = groupby_multiple(df_emp,7).mean_salary.tolist()\nuncode_means = compare_none(df_emp,7).mean_salary.tolist()\n\nlabels = groupby_multiple(df_emp,7).element.tolist()\nencode_means = list(np.around(np.array(encode_means),2))\nuncode_means = list(np.around(np.array(uncode_means),2))\n\nx = np.arange(len(labels))  # the label locations\nwidth = 0.35  # the width of the bars\n\nfig, ax = plt.subplots()\nfig.set_size_inches(24,10)\nrects1 = ax.bar(x - width\/2, encode_means, width, label='encode')\nrects2 = ax.bar(x + width\/2, uncode_means, width, label='uncode')\n\n# Add some text for labels, title and custom x-axis tick labels, etc.\nax.set_ylabel('Salary',fontsize=20)\nax.set_xlabel('Language',fontsize=20)\nax.set_xticks(x)\nax.set_xticklabels(labels,fontsize=18,rotation=45,ha='right')\nax.legend(fontsize=20)\n\nplt.show()","ea3e5825":"df_15 = df_emp[['Q15','Q24_avg']].groupby('Q15').agg('mean')\ndf_15 = df_15.reindex(index=['I do not use machine learning methods','Under 1 year','1-2 years', '2-3 years', \n       '3-4 years', '4-5 years', '5-10 years','10-20 years', '20 or more years'])\nplt.figure(figsize=(10,5))\nplt.title('Experienced ML Kagglers are paid higher')\nplt.ylabel('Average Salary')\nplt.bar(x=df_15.index,height=df_15.Q24_avg)\nplt.xticks(rotation=40,ha='right')\nplt.show()","aabb1426":"df_ml = df_emp[~(df_emp['Q15'].isin(['I do not use machine learning methods']))]\ndf_16 = groupby_multiple(df_ml,16).sort_values(by ='n_respondents')\ndf_16 = df_16[df_16.element!='Other']\n#x,y = zip(*sorted(zip(df_16.n_respondents,df_16.mean_salary)))\nlabels = df_16['element'].tolist()\n\nfig, ax = plt.subplots()\nfig.set_size_inches(13,9)\nplt.plot(df_16.n_respondents,df_16.mean_salary, marker='o')\ni = 0\nfor x,y in zip(df_16.n_respondents,df_16.mean_salary):\n    plt.annotate(labels[i],(x,y),textcoords='offset points',xytext=(0,10),ha='center',fontsize=12)\n    i = i+1\nax.set_xlabel('Popularity(Number of respondents)',fontsize=12)\nax.set_ylabel('Average Salary',fontsize=12)\nax.set_title('Popularity of ML framework & Salary',fontsize=14)","a3f6f423":"import squarify\nQ_23 = groupby_multiple(df_emp,23)\nQ_23['percentage'] = Q_23['n_respondents']\/len(df_emp)\nsize = Q_23['n_respondents']\nnorm = matplotlib.colors.Normalize(vmin=min(Q_23.percentage), vmax=max(Q_23.percentage))\ncolors = [matplotlib.cm.Blues(norm(value)) for value in Q_23.percentage]\nlabels=['Analyze and understand data to \\n influence product or business decisions \\n 59.17%',\n       'Build and\/or run the data infrastructure \\n that my business uses for storing, \\n analyzing, and operationalizing data \\n 30.65%',\n       'Build prototypes to \\n explore applying machine \\n learning to new areas \\n 36.93%',\n       'Build and\/or run a \\n machine learning service \\n that operationally improves \\n my product or workflows \\n 25.1%',\n       'Experimentation and iteration \\n to improve existing ML models \\n 28.8%',\n       'Do research that advances the \\n state of the art of machine learning \\n 21.55%',\n       'None',\n       'Other']\nplt.figure(figsize=(22,10))\nsquarify.plot(size,label=labels,text_kwargs={'fontsize':18,'weight':'bold'},color=colors)\nplt.title('Most important tasks in daily work \\n',fontsize=25, weight = 'bold')\nplt.axis('off')\nplt.show()\n","0609c946":"df_emp.loc[df.Q21=='20+','Q21']='20-25'\ndf_emp.loc[df.Q21=='0','Q21']='0-1'\ndf_emp['Q21'] = df_emp['Q21'].apply(lambda x: int(x.split('-')[0]))","a036df2b":"index_order=[(          '0-49 employees',   '0-1'),\n            (          '0-49 employees',       1),\n            (          '0-49 employees',       3),\n            (          '0-49 employees',       5),\n            (          '0-49 employees',      10),\n            (          '0-49 employees',      15),\n            (          '0-49 employees', '20-25'),\n            (        '50-249 employees',   '0-1'),\n            (        '50-249 employees',       1),\n            (        '50-249 employees',       3),\n            (        '50-249 employees',       5),\n            (        '50-249 employees',      10),\n            (        '50-249 employees',      15),\n            (        '50-249 employees', '20-25'),\n            (       '250-999 employees',   '0-1'),\n            (       '250-999 employees',       1),\n            (       '250-999 employees',       3),\n            (       '250-999 employees',       5),\n            (       '250-999 employees',      10),\n            (       '250-999 employees',      15),\n            (       '250-999 employees', '20-25'),\n            (    '1000-9,999 employees',   '0-1'),\n            (    '1000-9,999 employees',       1),\n            (    '1000-9,999 employees',       3),\n            (    '1000-9,999 employees',       5),\n            (    '1000-9,999 employees',      10),\n            (    '1000-9,999 employees',      15),\n            (    '1000-9,999 employees', '20-25'),\n            ('10,000 or more employees',   '0-1'),\n            ('10,000 or more employees',       1),\n            ('10,000 or more employees',       3),\n            ('10,000 or more employees',       5),\n            ('10,000 or more employees',      10),\n            ('10,000 or more employees',      15),\n            ('10,000 or more employees', '20-25')]","c7c5272e":"df_company = df_emp[['Q20','Q21','Q24_avg']].groupby(['Q20','Q21']).agg('mean')\ndf_company = df_company.reindex(index_order)","85e565ea":"alpha_list = [0.1,0.2,0.4,0.7,1]\nfig,ax=plt.subplots()\nfig.set_size_inches(15,8)\nlabel_list = []\nfor i in range(0,len(df_emp['Q20'].value_counts())):\n    x = [0,1,3,5,10,15,20]\n    y = []\n    for j in range(0,7):\n        y.append(df_company.values[7*i+j][0])\n    label_list.append(df_company.index[7*i][0])\n    ax.plot(x,y,'b',alpha=alpha_list[i])\nplt.xlabel('Colleague number')\nplt.ylabel('Salary')\nplt.legend(labels=label_list)\nplt.title('Bigger organization, higher salary',fontsize=20)\nplt.show()","96b6b499":"labels = ['Coursera',\n 'edX',\n 'Kaggle Learn Courses',\n 'DataCamp',\n 'Fast.ai',\n 'Udacity',\n 'Udemy',\n 'LinkedIn Learning',\n 'Cloud-certification programs',\n 'University Courses',\n 'None',\n 'Other']\nvalues = groupby_multiple(df_emp,37)['n_respondents'].tolist()\nx = np.arange(len(labels))  # the label locations\nwidth = 0.35  # the width of the bars\nfig, ax = plt.subplots()\nfig.set_size_inches(12,6)\nrects1 = ax.bar(x, values, width)\nax.set_ylabel('Respondents number',fontsize=18)\nax.set_xticks(x)\nax.set_xticklabels(labels,fontsize=12,rotation=40,ha='right')\nplt.title('Popularity for learning platforms',fontsize=20)\nplt.show()","7797ba2a":"labels = ['Twitter',\n \"Email newsletters\",\n 'Reddit',\n 'Kaggle',\n 'Course Forums',\n 'YouTube',\n 'Podcasts',\n 'Blogs',\n 'Journal Publications',\n 'Slack Communities',\n 'None',\n 'Other']\nvalues = groupby_multiple(df_emp,39)['n_respondents'].tolist()\nx = np.arange(len(labels))  # the label locations\nwidth = 0.35  # the width of the bars\nfig, ax = plt.subplots()\nfig.set_size_inches(12,6)\nrects1 = ax.bar(x, values, width)\nax.set_ylabel('Respondents number',fontsize=18)\nax.set_xticks(x)\nax.set_xticklabels(labels,fontsize=12,rotation=45,ha='right')\nplt.title('Popularity for reading source',fontsize=20)\nplt.show()","4fcb808c":"# Larger companies, larger team have higher pay","2775659d":"## Popular learning platforms and reading source","61690a0a":"## Age and Gender Analysis","a6ae28ad":"# Respondent demographic","d89826a2":"## Region Analysis","1f8a8c76":"## Salary by what program language you learned","a527a5b6":"Kaggle, Youtube, Blogs are the top3 popular media.","626df8bf":"### Age ","fbf39978":"## which kind of kagglers can get higher salary","3a4242c1":"### learning platforms","42f22345":"### the majority of respondents are between 18 and 25, where male respondent take up the majority. ","f66440ef":"### Indian and the United States have the majorities of respondents.","57334f9d":"The most surprising case is that although majority of people start data analysis with Python or R.\nThere is no evidence implying that learning Python and R can give you a higher salary.\nSome languages we rarely use in data analysis, may even take time and be negatively affecting, like C and Java,etc.","74b670d6":"## Job title and education","a856b495":"### reading source","8714f9ac":"Coursera, Kaggle learn courses, Udemy are the top3 popular course platforms.","0d5e88b9":"# Salary Analysis, for employed people","e7e14a99":"## split employed group","17d98304":"## ML methods "}}