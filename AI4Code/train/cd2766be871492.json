{"cell_type":{"e0169e51":"code","3e8f692b":"code","545ba1c9":"code","333fdddf":"code","24723a84":"code","73a7934b":"code","7b6311af":"code","6cc892f2":"code","f7cd4ef8":"code","b3050856":"code","0e68689c":"code","03f93b32":"code","c8efb407":"code","264e933b":"code","f6998753":"code","4a1bd87b":"code","6321b282":"code","a8c0b02c":"code","51cf1918":"code","238f9276":"code","66b39a5f":"code","6acba36a":"code","e24c29bd":"code","f06ea300":"code","d0be84c2":"code","45ca6805":"code","8c505d6e":"code","82fa9437":"code","5d9465c1":"code","01eaa085":"code","0d4daf2e":"code","2b0867b8":"code","90ebb9c6":"markdown","36ec2c8e":"markdown","66d401ee":"markdown","3e50c09f":"markdown","6848588a":"markdown","4c224069":"markdown","33c74c0f":"markdown","dcbbae92":"markdown","4faa0190":"markdown","7f894944":"markdown","b39a080c":"markdown","42d9a16f":"markdown","dc8b87fe":"markdown","03fa6dfc":"markdown","21a2bf01":"markdown","b3bd61c6":"markdown","1c6182d2":"markdown"},"source":{"e0169e51":"import pandas as pd\nimport numpy as np\nimport csv\nimport collections\nfrom collections import Counter","3e8f692b":"netflix=pd.read_csv('..\/input\/netflix-shows\/netflix_titles.csv')\nnetflix.head()","545ba1c9":"len(netflix[netflix['type']=='Movie'])","333fdddf":"len(netflix[netflix['type']=='TV Show'])","24723a84":"list(netflix[netflix['date_added'].isna()]['title'])","73a7934b":"len(list(netflix[netflix['date_added'].isna()]['title']))","7b6311af":"netflix=netflix[netflix['date_added'].notna()]\nnetflix.head()","6cc892f2":"netflix['director']=netflix['director'].fillna(\"\")\nnetflix['rating']=netflix['rating'].fillna(\"\")\nnetflix['date_added']=pd.to_datetime(netflix['date_added'])\nnetflix['year_added']=netflix['date_added'].dt.year\nnetflix.head()","f7cd4ef8":"from collections import Counter\ncount_countries=Counter(\",\".join(netflix['country'].dropna()).split(\",\"))\nprint(count_countries)","b3050856":"top_10_countries=count_countries.most_common(10)\ntop_10_countries","0e68689c":"country_name=[]\ncountry_count=[]\nfor i in range(10):\n    country_name.append(top_10_countries[i][0])\n    \nprint(country_name)","03f93b32":"for i in range(10):\n    country_count.append(top_10_countries[i][1])\n    \nprint(country_count)","c8efb407":"import matplotlib.pyplot as plt\ny_pos=np.arange(len(country_name))\nplt.barh(y_pos, country_count, align='center', alpha=0.5)\nplt.yticks(y_pos, country_name)\nplt.xlabel('Count')\nplt.title('Top 10 Countries')\nplt.show()","264e933b":"count_genre=Counter(\",\".join(netflix['listed_in'].dropna()).split(\",\"))\nprint(count_genre)","f6998753":"top_10_genre=count_genre.most_common(10)\nprint(top_10_genre)","4a1bd87b":"genre_name=[]\ngenre_count=[]\nfor i in range(10):\n    genre_name.append(top_10_genre[i][0])\nfor i in range(10):\n    genre_count.append(top_10_genre[i][1])\n    \n    \nprint(genre_count)\nprint(genre_name)","6321b282":"y_pos=np.arange(len(genre_name))\nplt.barh(y_pos, genre_count, align='center', alpha=0.5)\nplt.yticks(y_pos, genre_name)\nplt.xlabel('Count')\nplt.title('Top 10 Genre')\nplt.show()","a8c0b02c":"def by_country(df,country):\n    drop_country_na=df[df['country'].notna()]\n    return drop_country_na[drop_country_na['country'].str.contains(country)]\n","51cf1918":"\ndef top_genre_by_country(df,country):\n    genre_counter = Counter(\", \".join(by_country(netflix, country)['listed_in']).split(\", \"))\n    genre_counter1=genre_counter.most_common(10)\n    genre_name=[]\n    genre_count=[]\n    for i in range(10):\n        genre_name.append(genre_counter1[i][0])\n        genre_count.append(genre_counter1[i][1])\n    return genre_name, genre_count","238f9276":"countries=['United States', 'France', 'Japan', 'South Korea']\nfor i in np.arange(len(countries)):\n    genre=[]\n    count=[]\n    genre,count=top_genre_by_country(netflix,countries[i])\n    \n    y_pos=np.arange(len(genre))\n    plt.barh(y_pos, count, align='center', alpha=0.5)\n    plt.yticks(y_pos, genre)\n    plt.xlabel('Count')\n    plt.title(countries[i])\n    plt.show()\n    \n    ","66b39a5f":"shows_by_year=netflix[netflix['type']=='TV Show'].groupby('year_added').size()\nshows_by_year.head()","6acba36a":"movies_by_year=netflix[netflix['type']=='Movie'].groupby('year_added').size()\nmovies_by_year.head()","e24c29bd":"movies_by_year=movies_by_year.to_frame()\nmovies_by_year=movies_by_year.reset_index('year_added')\nmovies_by_year.head()","f06ea300":"shows_by_year=shows_by_year.to_frame()\nshows_by_year=shows_by_year.reset_index('year_added')\nshows_by_year.head()","d0be84c2":"movies_by_year.rename( columns={0:'movies_no'}, inplace=True )\nshows_by_year.rename( columns={0:'shows_no'}, inplace=True )\n\n","45ca6805":"movies_by_year.head()","8c505d6e":"ax = plt.gca()\n\nmovies_by_year.plot(kind='line',x='year_added',y='movies_no',ax=ax)\nshows_by_year.plot(kind='line',x='year_added',y='shows_no',ax=ax)\n\nplt.show()","82fa9437":"import nltk\nimport re\nfrom nltk.corpus import stopwords\nfrom sklearn.metrics.pairwise import linear_kernel\nfrom sklearn.feature_extraction.text import CountVectorizer\nfrom sklearn.feature_extraction.text import TfidfVectorizer\nfrom sklearn.metrics.pairwise import cosine_similarity","5d9465c1":"netflix=netflix[netflix['title'].notna()]\nnetflix['aggregated_text']=netflix['description'].str.lower()+\"\"+netflix['listed_in'].str.lower()+\"\"+netflix['rating'].str.lower()+netflix['director'].str.lower()\ncorpus=list(netflix['aggregated_text'].str.split())\nstopwords_list=set(stopwords.words(\"english\"))\nindex=list(range(0,len(corpus)))\nclean_corpus=[]\n\nfor sentence in corpus:\n    s=[]\n    for word in sentence:\n        clean_word=re.sub(r'[^\\w\\s]','', word)\n        if clean_word not in stopwords_list:\n            s.append(clean_word)\n        clean_corpus.append(\" \".join(s))    \n    ","01eaa085":"tfidf_vectorizer = TfidfVectorizer().fit_transform(clean_corpus)","0d4daf2e":"def get_recommendation(show_list, vectorizer):\n\n    title, scores, genre = [], [], []\n    for show_name in show_list:\n        show_index = netflix[netflix['title'] == show_name].index[0]\n        cosine_similarities = linear_kernel(vectorizer[show_index], vectorizer).flatten()\n        similar_show_index = cosine_similarities.argsort()[:-7:-1][1:]\n        title += [netflix['title'][i] for i in similar_show_index]\n        genre += [netflix['listed_in'][i] for i in similar_show_index]\n        scores += list(cosine_similarities[similar_show_index])\n\n    df = pd.DataFrame(data = {'Title': title, \n                                 'Genre': genre,\n                                 'Cosine_similarity': scores})\n\n    df = df[~df['Title'].isin(show_list)].sort_values('Cosine_similarity', ascending = False)\n    df['Title'] = df['Title'].drop_duplicates()\n    top_five_list = df[df['Title'].notna()].iloc[0:5, :]\n    \n    return top_five_list","2b0867b8":"watched_shows = ['Narcos', 'The Vampire Diaries', 'Transformers Prime']\nget_recommendation(watched_shows, tfidf_vectorizer)","90ebb9c6":"Handling missing values","36ec2c8e":"There are 11 shows which are no longer on Netflix\n","66d401ee":"We are also interested in the genres that are preffered the most","3e50c09f":"The TF*IDF algorithm is used to weigh a keyword in any content and assign the importance to that keyword based on the number of times it appears in the document. More importantly, it checks how relevant the keyword is throughout the web, which is referred to as corpus.","6848588a":"TF*IDF is an information retrieval technique that weighs a term\u2019s frequency (TF) and its inverse document frequency (IDF). Each word or term has its respective TF and IDF score. The product of the TF and IDF scores of a term is called the TF*IDF weight of that term.","4c224069":"OBJECTIVES:\n* Understanding what content is available in different countries\n* Determeine whether Netflix has increasingly focusing on TV rather than movies in recent years.\n* Identifying similar content by matching text-based features","33c74c0f":"* Content-based recommendation","dcbbae92":"This shows that Netflix has more movies than TV shows and hence there is not strong evidence that Netflix is focusing on TV shows","4faa0190":"Let us create a column called 'aggregated_text' which is a concatenation of 'description','listed_in','director' and 'rating'.","7f894944":"* Understanding content in different countries","b39a080c":"* Determining if Netflix is focusing more on TV shows than movies over the years","42d9a16f":"1) DATA PREPROCESSING","dc8b87fe":"The above five titles are the recommendations for the 3 shows I have watched.","03fa6dfc":"Let us import some libraries","21a2bf01":"There are 4265 movies and 1969 TV Shows\n","b3bd61c6":"Now let us take a look at the genres prefered in various countries","1c6182d2":"NETFLIX RECOMMENDATION\n\nThis dataset consists if TV shows and movies on Netflix in various countries as of 2020.\nThe dataset can be found on Kaggle"}}