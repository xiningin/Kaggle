{"cell_type":{"c9f539e6":"code","54dc78ca":"code","484e8ea6":"code","da1cb6b0":"code","f8adef3c":"code","fe781e83":"code","87f8479e":"code","21495a5b":"code","f9c2d9f8":"code","f538ccae":"code","470d7bd3":"code","6d3a9b74":"code","4c1f2f84":"code","ec3e89e6":"code","d8145426":"code","24e0c005":"code","f62ac3dc":"code","92127a90":"code","bf7cf149":"markdown"},"source":{"c9f539e6":"import numpy as np # linear algebra\nimport pandas as pd # data processing, CSV file I\/O (e.g. pd.read_csv)\nimport seaborn as sns\nimport matplotlib.pyplot as plt\nimport os\nimport math","54dc78ca":"df_transfer = pd.read_csv('..\/input\/top250-00-19.csv')","484e8ea6":"df_transfer.head()","da1cb6b0":"df_transfer.info()","f8adef3c":"print(df_transfer.describe())","fe781e83":"# Adding a column with transfer and market values round up for better readability\n\ndef to_million(value):\n    if not (math.isnan(value)):\n        return str(round(value\/1000000,1)) + 'mn'\n\nmarket_value = df_transfer['Market_value']\ntransfer_fee = df_transfer['Transfer_fee']\ndf_transfer['Market_mn'] = market_value.apply(to_million)\ndf_transfer['Transfer_mn'] = transfer_fee.apply(to_million)\n\ndf_transfer.head()","87f8479e":"# Top ten transfers ever\ndf_transfer.sort_values('Transfer_fee', ascending= False)[['Name','Team_from','Team_to','Season','Transfer_mn']].head(10)","21495a5b":"# Most expensive transfer of each season\n\ndf_transfer.groupby(['Season']).max()[['Transfer_fee']]","f9c2d9f8":"# Most transferred player by position\ndff = df_transfer.groupby(['Season', 'Position'], as_index=False)['Name'].count()\ndff.groupby('Season').apply(lambda x: x.Position[x.Name.idxmax()])","f538ccae":"plt.figure(figsize=(20,12))\nsns.countplot(x='Age', data = df_transfer)","470d7bd3":"#Average transfer value per season\nplt.figure(figsize=(20,12))\nsns.barplot(x='Season', y='Transfer_fee', data = df_transfer)","6d3a9b74":"#The leagues that attract most players\nplt.figure(figsize=(15,10))\nsns.countplot(x='League_to', data=df_transfer,order= df_transfer['League_to'].value_counts().head(10).index, palette='RdBu')","4c1f2f84":"#The teams that attract most players\nplt.figure(figsize=(15,10))\nsns.countplot(x='Team_to', data=df_transfer,order= df_transfer['Team_to'].value_counts().head(10).index, palette='rocket')","ec3e89e6":"#Teams with the highest spending power\nplt.figure(figsize=(15,10))\ndff = df_transfer.groupby('Team_to')['Transfer_fee'].agg('sum').reset_index()\ndf_highest = dff.sort_values(by='Transfer_fee', ascending=False).head(10)\nsns.barplot(x='Team_to',y='Transfer_fee',data=df_highest, palette ='Blues_d')","d8145426":"#Teams that cashed in on good players\nplt.figure(figsize=(15,10))\ndff = df_transfer.groupby('Team_from')['Transfer_fee'].agg('sum').reset_index()\ndf_highest = dff.sort_values(by='Transfer_fee', ascending=False).head(10)\nsns.barplot(x='Team_from',y='Transfer_fee',data=df_highest, palette ='GnBu_d')","24e0c005":"plt.figure(figsize=(20,12))\ndff = df_transfer.groupby(['Season','Team_to'])['Transfer_fee'].mean().reset_index()\ndf_filter = dff[dff.Team_to.isin(['Paris SG','Real Madrid','FC Barcelona','Man City','Juventus'])].sort_values('Season').reset_index()\ndf_filter =  df_filter[df_filter['Season']!='2005-2006'] # Removed because messes the graph\nsns.lineplot(x='Season',y='Transfer_fee', hue ='Team_to', data=df_filter, palette= 'husl')","f62ac3dc":"dff = df_transfer.groupby('Season')['Transfer_fee'].agg('mean').reset_index()\nplt.figure(figsize=(20,12))\nsns.lineplot(x='Season', y='Transfer_fee', data = dff)","92127a90":"dff = df_transfer.groupby('Age')['Transfer_fee'].agg('mean').reset_index()\nplt.figure(figsize=(20,12))\nsns.barplot(x='Age', y='Transfer_fee', data = dff)","bf7cf149":"As you are reading this you are not a footballer because a footballer(professionals) wouldn't really know about Kaggle, would he? So if you want your kid to become a professional footballer and talk of the market, you know what position to make him play in. :P #OkSorryBye"}}