{"cell_type":{"28477b68":"code","a7cad9bf":"code","cb454dc2":"code","e9e5dfaa":"code","7dd551b5":"code","099e559d":"code","f58fa4e2":"code","950da7a5":"code","9326a36b":"code","ae53349e":"code","f2bb6d63":"code","7ea4bfb1":"code","48611803":"code","08a51503":"code","223dcd29":"code","488836df":"code","c18d4707":"markdown","a01ab373":"markdown","a1e7c5b7":"markdown","ca6fd0cf":"markdown","9c862283":"markdown","2caabe04":"markdown","820dfd6e":"markdown","2fac286a":"markdown","dad5f328":"markdown"},"source":{"28477b68":"import numpy as np\nimport pandas as pd\n\ntry:\n    import apyori\nexcept:\n    !pip install apyori\n\nfrom apyori import apriori","a7cad9bf":"df = pd.read_csv('..\/input\/groceries-dataset\/Groceries_dataset.csv', parse_dates=['Date'])\ndf.head()","cb454dc2":"df.isnull().sum()","e9e5dfaa":"all_products = df['itemDescription'].unique()\nprint(\"Total products: {}\".format(len(all_products)))","7dd551b5":"df['itemDescription'].value_counts().sort_values(ascending = False)[:10].plot(kind= 'bar')","099e559d":"df = pd.get_dummies(df,prefix='' , prefix_sep='')\ndf.head()","f58fa4e2":"df.groupby([\"Member_number\",\"Date\"])[all_products].sum().reset_index()[all_products]","950da7a5":"records = df.groupby([\"Member_number\",\"Date\"])[all_products[:]].apply(sum)\nrecords = records.reset_index()[all_products]","9326a36b":"records","ae53349e":"## Replacing non-zero values with product names\ndef get_Pnames(x):\n    for product in all_products:\n        if x[product] > 0:\n            x[product] = product\n    return x\n\nrecords = records.apply(get_Pnames, axis=1)\nrecords.head()","f2bb6d63":"rec_list= records.values.tolist()\nrec_list[0]","7ea4bfb1":"transactions=[]\nfor x in rec_list:\n    #transactions.append(list(filter(lambda num: num != 0, x)))\n    transactions.append([i for i in x if i != 0])\n","48611803":"print(\"total transactions: {}\".format(len(transactions)))","08a51503":"transactions[0:10]","223dcd29":"rules = apriori(transactions,min_support=0.0003,min_confidance=0.2,min_lift=3)\nassociation_results = list(rules)","488836df":"for item in association_results:\n\n    pair = item[0] \n    items = [x for x in pair]\n    print(\"Rule: \" + items[0] + \" -> \" + items[1])\n\n    print(\"Support: \" + str(item[1]))\n\n    print(\"Confidence: \" + str(item[2][0][2]))\n    print(\"Lift: \" + str(item[2][0][3]))\n    print(\"=====================================\")","c18d4707":"## Loading Dataset","a01ab373":"### Example transactions","a1e7c5b7":"### Total Products","ca6fd0cf":"## Association Rules","9c862283":"## Transactions\n","2caabe04":"## Importing libraries","820dfd6e":"## Top 10 frequently sold products","2fac286a":"### One-hot representation of products purchased","dad5f328":"### Any null values"}}