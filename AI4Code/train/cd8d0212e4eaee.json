{"cell_type":{"4dcceff0":"code","e6d64783":"code","3464b9b5":"code","bf02e457":"code","4152e8a6":"code","6c7fefdf":"code","54fa78ab":"code","e13a9294":"code","7735a6e0":"markdown","c40f3d1c":"markdown"},"source":{"4dcceff0":"# This Python 3 environment comes with many helpful analytics libraries installed\n# It is defined by the kaggle\/python docker image: https:\/\/github.com\/kaggle\/docker-python\n# For example, here's several helpful packages to load in \n\nimport numpy as np # linear algebra\nimport pandas as pd # data processing, CSV file I\/O (e.g. pd.read_csv)\n\n# Input data files are available in the \"..\/input\/\" directory.\n# For example, running this (by clicking run or pressing Shift+Enter) will list the files in the input directory\n\nimport os\nprint(os.listdir(\"..\/input\"))\n\n# Any results you write to the current directory are saved as output.\n\nimport matplotlib.pyplot as plt\nimport seaborn as sns\nfrom PIL import Image # converting images into arrays\nfrom wordcloud import WordCloud, STOPWORDS, ImageColorGenerator","e6d64783":"df = pd.read_csv('..\/input\/Chicago_Crimes_2012_to_2017.csv')\n#df.head()","3464b9b5":"# Convert to pandas datetime format \ndf['Date'] = pd.to_datetime(df['Date'], format='%m\/%d\/%Y %I:%M:%S %p')\ndf.index = pd.DatetimeIndex(df['Date']) # Index the date column\n# df.head()","bf02e457":"# Adding few columns\ndf['time_hour'] = df['Date'].apply(lambda x: x.hour)\ndf['month'] = df['Date'].apply(lambda x: x.month)\ndf['year'] = df['Date'].apply(lambda x: x.year)\n\n# removing the column\ndf = df[df['Date'] != 2017]\n\ndf.head()","4152e8a6":" # Join together the IUCR code in a single string\ncrime_types_code = \" \".join(crime for crime in df['IUCR'])\n#print( crime_types_code)\n\ncrime_code_wordcloude = WordCloud().generate(crime_types_code)\n\nplt.figure(figsize = [10,10])\nplt.imshow(crime_code_wordcloude, interpolation='bilinear')\nplt.axis(\"off\")\n\nplt.show()\n\n# plt.savefig('img\/crime_code_wordcloud.png', format='png')\n","6c7fefdf":"df_wordcloud = df.copy()\ndf_wordcloud.dropna(axis = 0, subset= ['Block'], inplace=True)\n\ncrime_types_location = \" \".join(crime for crime in df_wordcloud['Block'])\n# mask = np.array(Image,open('us.png'))\n\ncrime_location_wordcloud = WordCloud().generate(crime_types_location)\n\nplt.figure(figsize=[30, 30])\nplt.imshow(crime_location_wordcloud, interpolation='bilinear')\nplt.axis('off')\nplt.show()\n","54fa78ab":"df_yearly_crime = df.copy()\nplt.figure(figsize=[20,10])\n#In order to reduce processing time, we used a resampling method by month for the number of crimes. \n#The resampling method in pandas is similar to the groupby method for a certain time span.\ndf.resample('M').size().plot(legend=False) # resampling time series by month\nplt.xlabel('No of  years')\nplt.ylabel('Months')\nplt.title('No of crime per month from 2012-2017')\nplt.show()\n","e13a9294":"crime_count_date = df.pivot_table('ID', aggfunc=np.size, columns='Primary Type', index=df.index.date, fill_value=0 )\n# crime_count_date.head()\ncrime_count_date.index = pd.DatetimeIndex(crime_count_date.index)\nplt = crime_count_date.rolling(365).sum().plot(figsize=[10,20], subplots=True, layout=(-1, 3),  sharex=False, sharey=False  )\n\n\n\n\n\n","7735a6e0":"**Yearly crime **","c40f3d1c":"**Crime by Location**"}}