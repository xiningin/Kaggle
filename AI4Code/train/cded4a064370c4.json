{"cell_type":{"0202507f":"code","af454b55":"code","9fb118ad":"code","c0a804aa":"code","5058f92f":"code","9b3f4a57":"code","52cf7092":"code","b8a4169e":"code","69a74ded":"markdown","8d2f8a5f":"markdown","e251a051":"markdown","90e74b35":"markdown","67a68b60":"markdown"},"source":{"0202507f":"# Import libraries \nimport numpy as np \nimport pandas as pd \nimport folium\nfrom folium import plugins\n%matplotlib inline\nimport matplotlib as mpl\nimport matplotlib.pyplot as plt\nimport seaborn as sns \nimport warnings\nwarnings.filterwarnings('ignore')\nwarnings.warn('DelftStack')\nwarnings.warn('Do not show this message')","af454b55":"df = pd.read_csv('..\/input\/police-department-incidents-2016csv\/Police_Department_Incidents_2016.csv')\ndf.head()","9fb118ad":"# Pd District count with most incident\nprint(df['PdDistrict'].value_counts())\nplt.figure(figsize=(10,6))\nsns.countplot(df['PdDistrict'])","c0a804aa":"# top 20 days with the most incidents  \nday = df['Date'].value_counts().to_frame()\nday['Date'].nlargest(n=20).to_frame()","5058f92f":"daycrime = df['DayOfWeek'].value_counts().to_frame()\nprint(daycrime)\ndaycrime['DayOfWeek'].plot(kind='pie',\n                            figsize=(15, 6),\n                            autopct='%1.1f%%', \n                            startangle=90,    \n                            shadow=True,       \n                            labels=None,         # turn off labels on pie chart\n                            pctdistance=1.12,    # the ratio between the center of each pie slice and the start of the text generated by autopct \n                            )\n\n# scale the title up by 12% to match pctdistance\nplt.title('Day of Week Crimes are commited', y=1.12) \nplt.axis('equal') \nplt.legend(labels=daycrime.index, loc='upper left') \nplt.show()","9b3f4a57":"# get the first 1000 crimes in the df_incidents dataframe\nlimit = 1000\ndf_incidents = df.iloc[0:limit, :]","52cf7092":"# San Francisco latitude and longitude values\nlatitude = 37.77\nlongitude = -122.42\n# create sanfran_map\nsanfran_map = folium.Map(location=[latitude, longitude], zoom_start=12)\n\n\n# instantiate a feature group for the incidents in the dataframe\nincidents = folium.map.FeatureGroup()\n\n# loop through the 1000 crimes and add each to the incidents feature group\nfor lat, lng, in zip(df_incidents.Y, df_incidents.X):\n    incidents.add_child(\n        folium.features.CircleMarker(\n            [lat, lng],\n            radius=5, # define how big you want the circle markers to be\n            color='yellow',\n            fill=True,\n            fill_color='blue',\n            fill_opacity=0.6\n        )\n    )\n\n# add pop-up text to each marker on the map\nlatitudes = list(df_incidents.Y)\nlongitudes = list(df_incidents.X)\nlabels = list(df_incidents.Descript)\n\nfor lat, lng, label in zip(latitudes, longitudes, labels):\n    folium.Marker([lat, lng], popup=label).add_to(sanfran_map)    \n    \n# add incidents to map\nsanfran_map.add_child(incidents)","b8a4169e":"\n# let's start again with a clean copy of the map of San Francisco\nsanfran_map = folium.Map(location = [latitude, longitude], zoom_start = 12)\n\n# instantiate a mark cluster object for the incidents in the dataframe\nincidents = plugins.MarkerCluster().add_to(sanfran_map)\n\n# loop through the dataframe and add each data point to the mark cluster\nfor lat, lng, label, in zip(df_incidents.Y, df_incidents.X, df_incidents.Descript):\n    folium.Marker(\n        location=[lat, lng],\n        icon=None,\n        popup=label,\n    ).add_to(incidents)\n\n# display map\nsanfran_map","69a74ded":"Datasets:\n\n1.  San Francisco Police Department Incidents for the year 2016 - [Police Department Incidents](https:\/\/data.sfgov.org\/Public-Safety\/Police-Department-Incidents-Previous-Year-2016-\/ritf-b9ki?utm_medium=Exinfluencer&utm_source=Exinfluencer&utm_content=000026UJ&utm_term=10006555&utm_id=NA-SkillsNetwork-Channel-SkillsNetworkCoursesIBMDeveloperSkillsNetworkDV0101ENSkillsNetwork20297740-2021-01-01) from San Francisco public data portal. Incidents derived from San Francisco Police Department (SFPD) Crime Incident Reporting system. Updated daily, showing data for the entire year of 2016. Address and location has been anonymized by moving to mid-block or to an intersection.","8d2f8a5f":"Display the latitude, longitude and Descript crime types. furthermore add a pop-up text to each marker.","e251a051":"Now lets group the markers into different clusters. Each cluster is represented by the number of crimes in each neighborhood. These clusters can be thought of as pockets of San Francisco which you can then analyze separately.","90e74b35":"So each row consists of 13 features:\n\n> 1.  **IncidntNum**: Incident Number\n> 2.  **Category**: Category of crime or incident\n> 3.  **Descript**: Description of the crime or incident\n> 4.  **DayOfWeek**: The day of week on which the incident occurred\n> 5.  **Date**: The Date on which the incident occurred\n> 6.  **Time**: The time of day on which the incident occurred\n> 7.  **PdDistrict**: The police department district\n> 8.  **Resolution**: The resolution of the crime in terms whether the perpetrator was arrested or not\n> 9.  **Address**: The closest address to where the incident took place\n> 10. **X**: The longitude value of the crime location\n> 11. **Y**: The latitude value of the crime location\n> 12. **Location**: A tuple of the latitude and the longitude values\n> 13. **PdId**: The police department ID","67a68b60":"\nTable of Contents\n\n1. Import libraries \n2. Perform EDA\n3. Display the map of San Francisco then add incidents reported to San Francisco Police Department onto the map"}}