{"cell_type":{"24799920":"code","abdd09f8":"code","2b06b687":"code","e26bf28d":"code","1e7112ec":"code","03981c57":"code","647f97d4":"code","1ee7671d":"code","1688ece7":"code","078b00ab":"code","8c0b8010":"code","3549c765":"code","b9dc19a3":"code","43c1805c":"code","b1653966":"code","bb86ac1f":"code","468fd63a":"code","cea0e81b":"code","290e00a7":"code","2925a557":"code","2f84b155":"code","a4aa109c":"code","dee59826":"code","9d0483f6":"code","54bed0d0":"code","0b780b14":"code","540dd08e":"code","1fcc2762":"code","e33c8661":"code","3ef7aeea":"code","16a38a74":"code","9d5463ab":"code","eaa55dab":"code","72adaf02":"code","2564fac3":"code","a96eb8f1":"code","5f76cf1e":"code","6e959174":"code","cd316190":"markdown","d7affff0":"markdown","28deea18":"markdown","190baff6":"markdown","d58412f1":"markdown","51b4325a":"markdown","471cc1f4":"markdown","06b5c3fb":"markdown","68333ab4":"markdown","e48bb38f":"markdown","a60643ce":"markdown","0e7de080":"markdown","4809be17":"markdown","7d36574f":"markdown","e5229b79":"markdown","90ceef36":"markdown","1f452ca8":"markdown","158bed81":"markdown","2afcb321":"markdown","62992ead":"markdown","c486ffac":"markdown","95b298fe":"markdown","49916e51":"markdown","59612c86":"markdown","eada976a":"markdown","8c61ee5d":"markdown","3a8184af":"markdown","ac2b132c":"markdown","113c57ba":"markdown","3ae0c093":"markdown","a0bea418":"markdown","cd6ea09c":"markdown","ac2348c8":"markdown","9c6427d2":"markdown","e7d55371":"markdown","b324f844":"markdown","ecd19287":"markdown","fb977119":"markdown","4e9a03c2":"markdown","5b922e5d":"markdown","de7ac619":"markdown","37b46de1":"markdown","62f2defd":"markdown","8f479297":"markdown","b9fe1f0b":"markdown","ed1c631e":"markdown","e8a113fc":"markdown","0d32eed4":"markdown","65db22c0":"markdown","fc2c3bbf":"markdown","17ae6f9a":"markdown","be2635b3":"markdown","c2f7530e":"markdown","63451b29":"markdown","5c1ff653":"markdown","4a10068e":"markdown"},"source":{"24799920":"# Biblotecas de manipula\u00e7\u00e3o de dados\nimport numpy as np\nimport pandas as pd\n\n# Bibliotecas de visualiza\u00e7\u00e3o\nimport seaborn as sns\nimport matplotlib.pyplot as plt\n\n# Testes estat\u00edsticos\nfrom scipy.stats import ttest_ind","abdd09f8":"path = '\/kaggle\/input\/enade-microdados-2016-2017-2018\/enade_combinado\/'","2b06b687":"df = pd.read_csv(path + 'dados_enade.csv', low_memory=False)","e26bf28d":"df.shape","1e7112ec":"data_dict = pd.read_csv(path + 'dicionario_categorias.csv')","03981c57":"data_dict.shape","647f97d4":"mapa_pg = pd.read_excel(path + 'dicionario_completo_2018.xlsx', \n                        header=[1])[['NOME', 'DESCRI\u00c7\u00c3O']].dropna().set_index('NOME').to_dict()['DESCRI\u00c7\u00c3O']","1ee7671d":"def mapear_coluna(df, data_dict, coluna):\n    tmp = data_dict.query(\"NOME == @coluna\")['CATEGORIAS'].str.split('=', expand=True).dropna()\n    if tmp.shape[0] <= 1: #work-around for NU_IDADE\n        return {i:i for i in sorted(df[coluna].unique())}\n        \n    tmp.iloc[:, 0] = tmp.iloc[:, 0].str.strip().astype(df[coluna].dtype)\n    tmp.iloc[:, 1] = tmp.iloc[:, 1].str.strip().str.upper()\n    return tmp.set_index(0).iloc[:,0].to_dict()","1688ece7":"mapear_coluna(df, data_dict, 'QE_I08')","078b00ab":"def groupby_1_var(df, groupby_var, key_var, agg_method=['mean', 'std', 'count']):\n    tmp = df.groupby(groupby_var)[key_var].agg(agg_method).sort_index()\n    tmp.index = pd.Series(tmp.index).replace(mapear_coluna(df, data_dict, groupby_var))\n    tmp.index.name = mapa_pg[tmp.index.name]\n    return tmp","8c0b8010":"def groupby_2_var(df, var1, var2, key_var, agg_method=['mean'], index_line=False, percentualize=False):\n    tmp = df.groupby([var1, var2])[key_var].agg(agg_method).unstack()\n    if percentualize:\n        tmp = tmp.div(tmp.sum(axis=1), axis=0)\n    if index_line:\n        tmp = tmp.div(tmp.iloc[0])\n        \n    tmp.index = pd.Series(tmp.index).replace(mapear_coluna(df, data_dict, var1))\n    tmp.index.name = mapa_pg[tmp.index.name]\n    \n    tmp.columns = tmp.columns.droplevel(0)\n    tmp.columns = pd.Series(tmp.columns).replace(mapear_coluna(df, data_dict, var2))\n    tmp.columns.name = mapa_pg[tmp.columns.name]\n    \n    return tmp","3549c765":"def stat_sig(df, var, key_var):\n    lista_de_listas = []\n    valores = sorted(df[var].dropna().unique().tolist())\n    for i in valores:\n        lista_de_listas.append([])\n        for j in valores:\n            t_res = ttest_ind(df.query(f'{var} == @i')[key_var], df.query(f'{var} == @j')[key_var])\n            lista_de_listas[-1].append(t_res.pvalue)\n            \n    \n    valores = pd.Series(valores).replace(mapear_coluna(df, data_dict, var))\n    tmp = pd.DataFrame(lista_de_listas, index=valores, columns=valores)    \n   \n    return tmp","b9dc19a3":"df['NT_GER'].isnull().mean()","43c1805c":"df['NT_GER'].fillna(0, inplace=True)","b1653966":"groupby_1_var(df=df, groupby_var='QE_I08', key_var = 'NT_GER')","bb86ac1f":"groupby_1_var(df=df, groupby_var='QE_I23', key_var = 'NT_GER')","468fd63a":"s = stat_sig(df, 'QE_I23', 'NT_GER')\nsns.heatmap(s)","cea0e81b":"groupby_2_var(df, var1='QE_I08', var2='QE_I23', key_var = 'NT_GER')","290e00a7":"sns.heatmap(data=groupby_2_var(df, var1='QE_I08', var2='QE_I23', key_var = 'NT_GER'), \n            cmap=sns.diverging_palette(10, 133, as_cmap=True),\n            )","2925a557":"tipos_de_nota = ['NT_GER', 'NT_OBJ_FG', 'NT_DIS_FG', 'NT_OBJ_CE', 'NT_DIS_CE']","2f84b155":"notas_por_renda = groupby_1_var(df=df, groupby_var='QE_I08', key_var = tipos_de_nota, agg_method=['mean'])\nnotas_por_renda","a4aa109c":"notas_por_renda.div(notas_por_renda.iloc[0])","dee59826":"notas_por_estudo = groupby_1_var(df=df, groupby_var='QE_I23', key_var = tipos_de_nota, agg_method=['mean'])\nnotas_por_estudo","9d0483f6":"notas_por_estudo.div(notas_por_estudo.iloc[0])","54bed0d0":"groupby_2_var(df=df, var1='QE_I08', var2='QE_I23', key_var = 'NT_OBJ_FG')","0b780b14":"sns.heatmap(data=groupby_2_var(df, var1='QE_I08', var2='QE_I23', key_var = 'NT_OBJ_FG'),\n            cmap=sns.diverging_palette(10, 133, as_cmap=True),\n            )","540dd08e":"groupby_2_var(df=df, var1='QE_I08', var2='QE_I23', key_var = 'NT_DIS_CE')","1fcc2762":"sns.heatmap(data=groupby_2_var(df, var1='QE_I08', var2='QE_I23', key_var = 'NT_DIS_CE'),\n            cmap=sns.diverging_palette(10, 133, as_cmap=True),\n            )","e33c8661":"gen_vs_nota = groupby_1_var(df=df, groupby_var='TP_SEXO', key_var = 'NT_GER')\ngen_vs_nota","3ef7aeea":"gen_vs_nota.div(gen_vs_nota.iloc[1])","16a38a74":"df['IS_PROVA_NULA'] = (df.NT_GER == 0) | df.NT_GER.isnull()","9d5463ab":"groupby_1_var(df=df, groupby_var='TP_SEXO', key_var = 'IS_PROVA_NULA')","eaa55dab":"sexo_vs_renda = groupby_2_var(df=df, var1='TP_SEXO', var2='QE_I08', key_var = 'NT_GER', agg_method=['count'])\nsexo_vs_renda","72adaf02":"sexo_vs_renda.div(sexo_vs_renda.iloc[1])","2564fac3":"notas_por_sexo = groupby_1_var(df=df, groupby_var='TP_SEXO', key_var = tipos_de_nota, agg_method=['mean'])\nnotas_por_sexo","a96eb8f1":"notas_por_sexo.div(notas_por_sexo.iloc[0])","5f76cf1e":"groupby_2_var(df=df, var1='TP_SEXO', var2='QE_I08', key_var = 'NT_OBJ_FG')","6e959174":"groupby_2_var(df=df, var1='TP_SEXO', var2='QE_I08', key_var = 'NT_DIS_CE')","cd316190":"# Renda e Horas de Estudo vs Nota","d7affff0":"No mapa de calor acima, temos dois estados:\n\n1. Preto, que indica que o p-value \u00e9 0.0 ou muito pr\u00f3ximo disso, nesse caso temos certeza que as diferen\u00e7as entre os grupos comparados n\u00e3o aconteceram por sorte. Por exemplo, o fato de os alunos que n\u00e3o estudam fora das aulas terem uma nota `37.28`e os alunos que estudam 1 a 3 horas por semana terem uma nota de `39.20` n\u00e3o aconteceu por sorte, eles realmente tem notas diferentes.\n\n2. Branco, que indica que o p-value \u00e9 1.0, diz que os dois grupos s\u00e3o id\u00eanticos, que \u00e9 o caso porque estamos comparando exatamente os mesmos grupos.\n\nDaqui pra frente, nossa premissa \u00e9 que temos distribui\u00e7\u00f5es com um desvio padr\u00e3o relativamente baixo, amostras grandes e diferen\u00e7as significativas entre grupos. Por isso, no geral vamos assumir que as diferen\u00e7as que estamos vendo entre grupos n\u00e3o s\u00e3o aleat\u00f3rias.","28deea18":"Preparando fun\u00e7\u00e3o para mapear as respostas do ENADE para o valor correspondente (ligar o c\u00f3digo do curso ao nome do curso, por exemplo):","190baff6":"As diferen\u00e7as entre tipos de provas s\u00e3o bastante significativas. Para facilitar a nossa leitura, vamos indexar todas as varia\u00e7\u00f5es de nota usando o grupo com menos horas de estudo como refer\u00eancia:","d58412f1":"Criando um mapa de perguntas e a descri\u00e7\u00e3o correspondente:","51b4325a":"A tabela abaixo traz m\u00e9dia (`mean`), desvio padr\u00e3o (`std`) e contagem (`count`) da vari\u00e1vel de nota geral `NT_GER` por g\u00eanero (`TP_SEXO`):","471cc1f4":"Criando fun\u00e7\u00e3o para agrupar valores segundo uma vari\u00e1vel e nos retornar uma m\u00e9trica chave agregada:","06b5c3fb":"# Verificando qualidade dos dados da vari\u00e1vel `NT_GER`:\n\nA vari\u00e1vel que iremos utilizar nesta etapa se chama `NT_GER` e corresponde a nota geral. Vamos verificar se ela cont\u00e9m valores vazios:","68333ab4":"O grupo que menos estuda teve nota m\u00e9dia de `37.27`, e o grupo que mais estuda teve nota m\u00e9dia de `46.17`.","e48bb38f":"Vamos indexar esses dados pela popula\u00e7\u00e3o masculina:","a60643ce":"Verificando o tamanho do arquivo (n\u00famero de linhas, n\u00famero de colunas):","0e7de080":"Temos duas principais observa\u00e7\u00f5es: \n\n1. Em provas discursivas a diferen\u00e7a de notas \u00e9 bem menor entre os alunos mais ricos e os mais pobres. N\u00e3o temos hip\u00f3tese para esta observa\u00e7\u00e3o.\n2. Nas provas de conhecimento espec\u00edfico parece existir menos diferen\u00e7a entre alunos mais ricos e mais pobres do que nas provas de forma\u00e7\u00e3o geral. Uma poss\u00edvel hip\u00f3tese para isso \u00e9 uma melhor forma\u00e7\u00e3o antes de entrar na faculdade por parte dos alunos ricos. \n\n## Tipos de nota vs horas de estudo\n\nVamos olhar como cada um dos tipos de nota se comporta com varia\u00e7\u00f5es de de horas de estudo:","4809be17":"Vamos olhar diferen\u00e7as de popula\u00e7\u00e3o por faixa de renda entre g\u00eaneros:","7d36574f":"# Introdu\u00e7\u00e3o\n\nEsse caderno faz parte de um conjunto de an\u00e1lises sobre o <a href=\"http:\/\/portal.inep.gov.br\/enade\">ENADE<\/a>, que \u00e9 uma prova padronizada aplicada a formandos de ensino superior a fim de avaliar qu\u00e3o bem eles aprenderam o conte\u00fado do curso.\n\n## Links:\n\nPara acessar os outros conte\u00fados que tenho trabalhado:\n\n- <a href='https:\/\/www.kaggle.com\/joaoavf\/enade-01-juntando-arquivos'>1 - Juntando arquivos<\/a>\n- <a href='https:\/\/www.kaggle.com\/joaoavf\/enade-02-tratando-outliers'>2 - Tratando outliers<\/a>\n- <a href='https:\/\/www.kaggle.com\/joaoavf\/enade-03-explorando-dados'>3 - Explorando Dados<\/a> [CADERNO ATUAL]\n- <u>Pr\u00f3ximos cadernos ainda em progresso<\/u>\n\n## Outros recursos\n\nCaso tenha interesse em aprender as ferramentas que est\u00e3o sendo utilizadas aqui, segue um guia para iniciantes: \n\n<a href='https:\/\/www.kaggle.com\/joaoavf\/introducao-a-analise-de-dados-python-e-pandas'>Introdu\u00e7\u00e3o a An\u00e1lise de Dados usando Python e pandas<\/a>\n\n# Objetivo\n\nAvaliar simples correla\u00e7\u00f5es nos dados para formarmos hip\u00f3teses e observamos diferen\u00e7as de comportamento entre vari\u00e1veis.\n\n# Montando o ambiente\n\nAdicionando todas as bibliotecas que v\u00e3o ser usadas para manipular os dados e fazer previs\u00f5es:","e5229b79":"Criando a fun\u00e7\u00e3o para agrupar valores segundo duas vari\u00e1veis e nos retornar uma m\u00e9trica chave agregada:","90ceef36":"As mulheres performam melhor que os homens na prova discursiva de conhecimento espec\u00edfico em todas as faixas de renda.","1f452ca8":"Lendo o dicion\u00e1rio de dados:","158bed81":"Os homens performam melhor que as mulheres na prova objetiva de forma\u00e7\u00e3o geral em todas as faixas de renda.","2afcb321":"Vamos indexar as notas tomando por base as mulheres:","62992ead":"Criando fun\u00e7\u00e3o para avaliar signific\u00e2ncia estat\u00edstica de grupos separados por uma vari\u00e1vel `var` dada uma m\u00e9trica `key_var`:","c486ffac":"## Como as popula\u00e7\u00f5es de homens e mulheres se comportam vs renda?","95b298fe":"## Tipos de Nota vs Varia\u00e7\u00f5es de Renda\n\nVamos olhar como cada um dos tipos de nota se comporta com varia\u00e7\u00f5es de renda:","49916e51":"## Diferen\u00e7as de engajamento entre g\u00eaneros","59612c86":"Na prova discursiva de conhecimento espec\u00edfico, os alunos com menor renda que estudam muito conseguem um desempenho bastante superior aos alunos com maior renda que estudam pouco.\n\n# Analisando G\u00eanero vs Nota","eada976a":"A renda tem uma correla\u00e7\u00e3o significativa com a nota do ENADE. Participantes de fam\u00edlia com menor renda tiveram uma nota m\u00e9dia de `37,88`, enquanto participantes de fam\u00edlias mais ricas tiveram uma nota m\u00e9dia de `48,58`.","8c61ee5d":"Vamos usar a fun\u00e7\u00e3o `stat_sig` que criamos anteriormente para medir a chance que as diferen\u00e7as entre dois grupos n\u00e3o tenham sido geradas apenas por sorte.\n\nAbaixo vamos fazer um mapa de calor comparando as notas de acordo com as horas de estudo para sabermos se essas varia\u00e7\u00f5es s\u00e3o devidas a sorte ou n\u00e3o:","3a8184af":"Lendo o arquivo que cont\u00e9m os microdados do ENADE 2016, 2017 e 2018:","ac2b132c":"# G\u00eanero e Renda vs Tipos de Nota","113c57ba":"Vamos agrupar agora por g\u00eanero e renda e ver como cada grupo se comporta em diferentes provas:","3ae0c093":"A tabela abaixo traz m\u00e9dia (`mean`), desvio padr\u00e3o (`std`) e contagem (`count`) da vari\u00e1vel de nota geral `NT_GER` por grupos de faixas de renda (`QE_I08` - quest\u00e3o 8 do question\u00e1rio socioecon\u00f4mico):","a0bea418":"Testando a fun\u00e7\u00e3o de mapear coluna com a pergunta `QE_I08`, que \u00e9 sobre renda familiar:","cd6ea09c":"Os alunos de maior renda que menos estudam, tiveram notas consideravelmente mais altas na prova objetiva de forma\u00e7\u00e3o geral do que os alunos de menor renda que mais estudam.\n\n### Notas da prova discursiva de conhecimento espec\u00edfico\n\nMontando uma tabelas com as m\u00e9dias da nota da prova discursiva de conhecimento espec\u00edfico (`NT_DIS_CE`) agrupado por renda familiar e horas de estudo:","ac2348c8":"A correla\u00e7\u00e3o de nota geral com a renda continua forte mesmo controlando por quantidade de horas de estudo.\n\n## Hip\u00f3teses:\n\nUma vez que as hip\u00f3teses de diferen\u00e7as na qualidade das institui\u00e7\u00f5es de ensino superior e de escolha de curso n\u00e3o parecem promissoras, as nossas principais hip\u00f3teses no momento s\u00e3o:\n\n1. Alunos de maior renda estudaram em escolas melhores antes da universidade \n2. Alunos de maior renda tem expectativas maiores impostas pela fam\u00edlia \/ meio social\n3. Diferen\u00e7as em habilidades n\u00e3o acad\u00eamicas, fonte: <a href=\"http:\/\/www.paultough.com\/helping\/pdf\/Helping-Children-Succeed-Paul-Tough.pdf\">Helping Children Succeed<\/a>","9c6427d2":"# Horas de Estudo por Semana vs Nota","e7d55371":"A tabela abaixo a traz nota geral `NT_GER` por grupos de horas de estudo por semana (`QE_I23` - quest\u00e3o 23 do question\u00e1rio socioecon\u00f4mico):","b324f844":"Vamos indexar as varia\u00e7\u00f5es de nota usando como refer\u00eancia as notas dos alunos com a menor renda.","ecd19287":"Vamos agrupar agora por renda e horas de estudo e observar como a nota m\u00e9dia se comporta de acordo com essas varia\u00e7\u00f5es:","fb977119":"Olhando qual foi o percentual de candidatos que deixaram a prova em branco por g\u00eanero:","4e9a03c2":"Temos 14.9% dos valores vazios na coluna de nota geral (`NT_GER`).\n\nEm uma prova padronizada como essa, n\u00e3o ter uma nota est\u00e1 associado a uma nota zero. Por essa raz\u00e3o vamos preencher os valores nulos com 0:","5b922e5d":"Existe um problema consider\u00e1vel em falta de engajamento por parte dos homens que contribui para uma pior performance no ENADE. Mas, ainda assim existe uma quantidade consider\u00e1vel de desengajamento em ambos os g\u00eaneros.","de7ac619":"1. A nota m\u00e9dia dos mulheres \u00e9 ligeiramente maior (`+2.5%`) do que a dos homens. \n2. A quantidade de mulheres matriculadas \u00e9 significativamente (`+46.1%`) maior do que a dos homens.","37b46de1":"Montando um mapa de calor da prova discursiva de conhecimento espec\u00edfico (`NT_DIS_CE`) por renda familiar e horas de estudo:","62f2defd":"As mulheres no geral se saem melhor em provas discursivas e de conhecimento espec\u00edfico. \u00c9 poss\u00edvel que a \u00fanica raz\u00e3o disso seja distribui\u00e7\u00e3o de renda entre homens e mulheres, que como j\u00e1 vimos, temos uma quantidade muito maior de melhores nas faixas inferiores de renda.","8f479297":"# Observa\u00e7\u00f5es finais\n\n1. Existe diferen\u00e7as significativas entre as notas de acordo com a renda familiar, horas de estudo e g\u00eanero\n2. Essas diferen\u00e7as se comportam de forma bem diferente dependendo do tipo de prova (discursiva ou objetiva, forma\u00e7\u00e3o geral ou conhecimento espec\u00edfico).\n\nEu estou particularmente curioso sobre o motivo pelo qual o comportamento em provas objetivas e discursivas \u00e9 t\u00e3o diferente. Agrade\u00e7o qualquer ideia que possa me ajuda a entender melhor esse fen\u00f4meno.\n\n# Pr\u00f3ximos passos:\n\n- <u>Pr\u00f3ximos cadernos ainda em progresso<\/u>","b9fe1f0b":"### Observa\u00e7\u00f5es\n\n1. Na faixa mais baixa de renda temos mais do que o dobro de mulheres fazendo faculdade do que homens. (`+122.9%`)\n2. Na faixa mais alta de renda temos menos mulheres fazendo faculdade do que homens. (`-18.8%`)\n\n## G\u00eanero vs Tipos de Prova","ed1c631e":"# Renda Familiar vs nota","e8a113fc":"As constata\u00e7\u00f5es s\u00e3o:\n\n1. Conhecimentos espec\u00edficos \u00e9 onde se v\u00ea maior varia\u00e7\u00e3o conforme estudo. De certa forma \u00e9 o esperado, uma vez que esse \u00e9 o assunto em que as horas de estudo est\u00e3o sendo investidas.\n2. As provas discursivas s\u00e3o onde mais se v\u00ea diferen\u00e7a de nota entre quem estuda mais e quem estuda menos. Continuamos sem hip\u00f3teses para explicar este comportamento.\n\n## Notas da prova objetiva de forma\u00e7\u00e3o geral vs renda e estudo\n\nMontando uma tabelas com as m\u00e9dias da nota da prova objetiva de forma\u00e7\u00e3o geral (`NT_OBJ_FG`) agrupado por renda familiar e horas de estudo:","0d32eed4":"Definindo o caminho onde se encontram os arquivos:","65db22c0":"Montando um mapa de calor da prova objetiva de forma\u00e7\u00e3o geral (`NT_OBJ_FG`) por renda familiar e horas de estudo:","fc2c3bbf":"# Diferen\u00e7as entre Tipos de Nota\n\nOs dados do ENADE nos trazem 5 tipos de notas compiladas:\n1. `NT_GER` - Nota geral do ENADE\n2. `NT_OBJ_FG` - Nota da prova objetiva de forma\u00e7\u00e3o geral\n3. `NT_DIS_FG` - Nota da prova discursiva de forma\u00e7\u00e3o geral\n4. `NT_OBJ_CE` - Nota da prova objetiva de conhecimento espec\u00edfico\n5. `NT_DIS_CE` - Nota da prova discursiva de conhecimento espec\u00edfico\n\nAbaixo vamos criar uma lista que contenha todos os identificadores de cada uma das notas acima:","17ae6f9a":"Verificando o formato do dicion\u00e1rio de dados (n\u00famero de linhas, n\u00famero de colunas):","be2635b3":"Vamos indexar os dados usando os homens como refer\u00eancia:","c2f7530e":"Criando uma vari\u00e1vel bin\u00e1ria para identificar candidatos que deixaram a prova em branco:","63451b29":"Visualizando um mapa de calor em renda familiar e horas de estudo vs nota geral do ENADE:","5c1ff653":"# Criando fun\u00e7\u00f5es auxiliares","4a10068e":"## Signific\u00e2ncia Estat\u00edstica entre Grupos"}}