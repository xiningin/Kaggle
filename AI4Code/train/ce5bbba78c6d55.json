{"cell_type":{"e61ac45c":"code","dd008f36":"code","73f1c66f":"code","675a7f12":"code","3e51eaab":"code","137e041e":"code","418f427d":"code","8e36f3de":"code","16755629":"code","5d26621a":"code","6ab992e3":"code","656fb3b3":"code","c31f1ce6":"code","08bd4d77":"code","9a1868a9":"code","1e2071c7":"code","dff68a97":"code","f677d33c":"code","3a79803e":"code","6483d6cc":"code","190dcd52":"code","d9e37575":"code","bd23bc90":"code","2792823b":"code","5bd5dc7d":"code","52f3f9c3":"code","711480dc":"code","19fcd378":"code","728dd1bf":"code","ad1f6121":"code","9aac4fae":"code","59f88c34":"code","b0c04267":"code","deb33687":"code","12bf9867":"code","702c819e":"markdown","b7ece64d":"markdown","f963722c":"markdown","bf82868a":"markdown","3341e368":"markdown","4b41f15d":"markdown","dbf69af5":"markdown","00b9f4a8":"markdown","b6be4283":"markdown","5e212826":"markdown","9a070c8c":"markdown","e8fdd076":"markdown","b5d86fe0":"markdown"},"source":{"e61ac45c":"import pandas as pd","dd008f36":"elec_meter_data_all = pd.read_csv(\"..\/input\/buildingdatagenomeproject2\/electricity.csv\")","73f1c66f":"elec_meter_data_all.head()","675a7f12":"elec_meter_data_all.columns","3e51eaab":"meter_example = elec_meter_data_all['Panther_education_Jerome']","137e041e":"meter_example.head()","418f427d":"meter_example.index[0]","8e36f3de":"elec_meter_data_all_timestamp = pd.read_csv(\"..\/input\/buildingdatagenomeproject2\/electricity.csv\", index_col = \"timestamp\", parse_dates=True) ","16755629":"elec_meter_data_all_timestamp.head()","5d26621a":"elec_meter_data_all_timestamp.index[0]","6ab992e3":"elec_meter_data_all_timestamp.index","656fb3b3":"elec_meter_data_all_timestamp.index[0].month","c31f1ce6":"elec_meter_data_all_timestamp.index[0].dayofweek","08bd4d77":"elec_meter_data_all_timestamp.index[0].week","9a1868a9":"elec_meter_data_all_timestamp.index[0].is_leap_year","1e2071c7":"elec_meter_data_all_timestamp.index[0].hour","dff68a97":"meter_example_timestamp = elec_meter_data_all_timestamp['Panther_education_Jerome']","f677d33c":"meter_example_timestamp.plot()","3a79803e":"meter_example_timestamp.plot(marker='.', alpha=0.5, linestyle='None', figsize=(15, 5))","6483d6cc":"elec_meter_data_all_timestamp.head()","190dcd52":"elec_meter_data_all_timestamp_daily = elec_meter_data_all_timestamp.resample(\"D\").mean()","d9e37575":"elec_meter_data_all_timestamp_daily.head()","bd23bc90":"elec_meter_data_all_timestamp_daily['Panther_education_Jerome'].plot(figsize=(10,5))","2792823b":"elec_meter_data_all_timestamp_daily['Panther_education_Jerome'].resample(\"M\").mean().plot(figsize=(10,5))","5bd5dc7d":"elec_meter_data_all_timestamp_daily.info()","52f3f9c3":"elec_meter_data_all_timestamp_daily_juneonly = elec_meter_data_all_timestamp_daily.truncate(before = '2016-06-01', after='2016-07-01')","711480dc":"elec_meter_data_all_timestamp_daily_juneonly['Panther_education_Jerome'].plot(figsize=(10,5))","19fcd378":"elec_meter_data_all_timestamp['Panther_education_Jerome'].rolling(window=500, center=True, min_periods=500).mean().plot()","728dd1bf":"elec_meter_data_all_timestamp_daily.columns.str.contains(\"Wolf\")","ad1f6121":"site_example_elec_meter_data_timestamp_daily = elec_meter_data_all_timestamp_daily.loc[:,elec_meter_data_all_timestamp_daily.columns.str.contains(\"Wolf\")]","9aac4fae":"site_example_elec_meter_data_timestamp_daily.head()","59f88c34":"site_example_elec_meter_data_timestamp_daily.info()","b0c04267":"site_example_elec_meter_data_timestamp_daily.plot(figsize=(20,30), subplots=True);","deb33687":"site_example_elec_meter_data_timestamp_daily.resample(\"M\").sum().plot(figsize=(20,30), subplots=True);","12bf9867":"site_example_elec_meter_data_timestamp_daily.truncate(after='2017-01-01').plot(figsize=(10,30), subplots=True);","702c819e":"We can first resample to daily data by using the `D` as an attribute in the `.resample()` function to indicate that we want *daily* data aggregation. We use the `.mean()` function to indicate that we want the function to take the average across each day's hourly readings to produce the aggregated value for the day","b7ece64d":"## Setting the `timestamp` index to a *datetime* object \n\nPandas has several very useful functions that we will cover in this notebook, but first we need to indicate to Pandas that the index is not just a regular string -- it has information related to date and time attributes including whether the day is **Monday** or **Tuesday** or whether that is a weekday or weekend. \n\nWe can tell the `.read_csv()` function that it should **parse** the index and try to convert it into a *datetime* object. Let's see what happens when we do that.","f963722c":"We can do the same to create *monthly* data and other aggregations","bf82868a":"# Analysis of a large number of buildings at once\n\nLet's look at a larger group of buildings to understand how these functions can enhanced the analysis of a large number of buildings","3341e368":"# Plotting simple line charts of time-series data\n\nThe first thing we can do with the data is to explore it as a line chart. This gives us an understanding of the shape, frequency and potential for outliers. Data exploration is the first step in the analysis process.","4b41f15d":"## Frequencies \n\nThe Pandas Library has dozens of **frequencies** that can be used to resample data -- the detailed list is here: https:\/\/pandas.pydata.org\/pandas-docs\/stable\/user_guide\/timeseries.html#dateoffset-objects\n","dbf69af5":"# Resample the data to other frequencies\n\n\"It is often useful to resample our time series data to a lower or higher frequency. Resampling to a lower frequency (downsampling) usually involves an aggregation operation \u2014 for example, computing monthly sales totals from daily data. The daily OPSD data we\u2019re working with in this tutorial was downsampled from the original hourly time series. Resampling to a higher frequency (upsampling) is less common and often involves interpolation or other data filling method \u2014 for example, interpolating hourly weather data to 10 minute intervals for input to a scientific model.\n\nWe will focus here on downsampling, exploring how it can help us analyze our OPSD data on various time scales. We use the DataFrame\u2019s `resample()` method, which splits the DatetimeIndex into time bins and groups the data by time bin. The `resample()` method returns a Resampler object, similar to a pandas GroupBy object. We can then apply an aggregation method such as `mean()`, `median()`, `sum()`, etc., to the data group for each time bin.\" -- from: https:\/\/www.dataquest.io\/blog\/tutorial-time-series-analysis-with-pandas\/\n\n","00b9f4a8":"Let's begin this demonstration of time-series data analysis by loading the data from the electricity meters.\n\nYou can notice that this time there is a column in the data set called `timestamp`. If we load the DataFrame the usual way then this column will just be a string data type:\n","b6be4283":"## `Timestamp` object attributes\n\nYou will notice that the index is not what's known as a `DateTimeIndex` and each of the index items is a `Timestamp` object. This allows us to as the object things like what day of the week it is and other attributes. \n\nMore info here: https:\/\/pandas.pydata.org\/pandas-docs\/stable\/reference\/api\/pandas.Timestamp.html\n","5e212826":"# Trends Analysis and Rolling Windows\n\n\"Time series data often exhibit some slow, gradual variability in addition to higher frequency variability such as seasonality and noise. An easy way to visualize these trends is with rolling means at different time scales.\n\nA rolling mean tends to smooth a time series by averaging out variations at frequencies much higher than the window size and averaging out any seasonality on a time scale equal to the window size. This allows lower-frequency variations in the data to be explored. Since our electricity consumption time series has weekly and yearly seasonality, let\u2019s look at rolling means on those two time scales.\" - https:\/\/www.dataquest.io\/blog\/tutorial-time-series-analysis-with-pandas\/","9a070c8c":"# Truncating Time-Series Data\n\nThe truncate function allows us to slice the data into smaller dataframes according to a time range\n\nPandas DataFrame.truncate() function is used to truncate a Series or DataFrame before and after some index value. This is a useful shorthand for boolean indexing based on index values above or below certain thresholds.\n\nhttps:\/\/www.geeksforgeeks.org\/python-pandas-dataframe-truncate\/","e8fdd076":"# Time Series Data Analysis using Pandas\n\n- Created by Clayton Miller - clayton@nus.edu.sg - miller.clayton@gmail.com\n\nThis notebook is an introduction to several key time-series functions available in the Pandas library. \n\nSeveral portions of the function explanations are from: https:\/\/www.dataquest.io\/blog\/tutorial-time-series-analysis-with-pandas\/","b5d86fe0":"## The Building Data Genome Project\n\nFor this set of videos, we will be using the Building Data Genome Project:\n\nhttps:\/\/github.com\/buds-lab\/building-data-genome-project-2\n\n![alt text](https:\/\/github.com\/buds-lab\/building-data-genome-project-2\/blob\/master\/figures\/buildingdatagenome2.png?raw=true)\n\nThis project is a set of 3000+ time-series meter data from buildings -- check out the website which includes an overview of the data set, sources, and publications that use the data set. \n\nIn this notebook, we will use some of the buildings from that data set to understand why Pandas was designed for time-series data from IoT networks\n\nFirst, we will load the libraries and mount the drives as usual"}}