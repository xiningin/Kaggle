{"cell_type":{"ac674c00":"code","e096a605":"code","13a11bb0":"code","a110e1a9":"code","15b257b3":"code","9c635ead":"code","02c00e91":"code","f0ec3da7":"code","333c48df":"code","3f549ca5":"code","64edc880":"code","78373081":"code","02b07f2d":"code","78f2ad30":"code","5728673a":"code","26f5b090":"code","9f1b18e0":"code","f09562a5":"code","4ec94b6e":"code","8ffc5b8a":"code","6034514c":"code","39f13505":"markdown","fb77d548":"markdown","8ba1448b":"markdown","5ea8b3f4":"markdown","5a946183":"markdown","eab83986":"markdown","9eec8751":"markdown","2ae7ad1b":"markdown","b06af7cf":"markdown","6c16aae0":"markdown","357c40be":"markdown","c8d071f7":"markdown","838a68d1":"markdown","f5624ae7":"markdown","e21ba476":"markdown","badcccee":"markdown","c01520f9":"markdown","d3158185":"markdown","41db989e":"markdown","565a557b":"markdown","e98d05f8":"markdown","230ac026":"markdown","58265ef2":"markdown","1eb9e803":"markdown","d5f63766":"markdown","3ae52cd8":"markdown","c45a96d5":"markdown"},"source":{"ac674c00":"# install any required libraries\n!pip install openpyxl\n\n# import libraries\nimport pandas as pd\npd.plotting.register_matplotlib_converters()\n\nimport matplotlib.pyplot as plt\n%matplotlib inline\n\nimport seaborn as sns\nsns.set(style=\"whitegrid\", color_codes=True)\nsns.set_palette('crest_r', 30)\n\nimport warnings","e096a605":"# load datasets\nwith warnings.catch_warnings(record=True):\n    warnings.simplefilter(\"always\")\n    athlete_data = pd.read_excel('..\/input\/2021-olympics-in-tokyo\/Athletes.xlsx')\n    continent_data = pd.read_excel('..\/input\/continent-list-for-2021-olympics-in-tokyo-dataset\/Continent List.xlsx')\n    coach_data = pd.read_excel('..\/input\/2021-olympics-in-tokyo\/Coaches.xlsx')\n    gender_data = pd.read_excel('..\/input\/2021-olympics-in-tokyo\/EntriesGender.xlsx')\n    medals_data = pd.read_excel('..\/input\/2021-olympics-in-tokyo\/Medals.xlsx')\n    population_data = pd.read_csv('..\/input\/population-data-for-the-tokyo-olympics-dataset\/olympics_population_data.csv')\n    teams_data = pd.read_excel('..\/input\/2021-olympics-in-tokyo\/Teams.xlsx')\n    \nprint('Setup Completed!')","13a11bb0":"# find no. of athletes by country\nathletes_by_country = athlete_data.groupby('NOC', as_index=False).size().sort_values('size', ascending=False)\n\n# plot the distribution of country team size\nplt.figure(figsize=(14, 8))\nplt.title('Distribution of Team sizes')\nsns.histplot(data=athletes_by_country['size'], kde=False)\nplt.xlabel('Team size')\nplt.ylabel('No. of countries')\nplt.show()","a110e1a9":"# find no. of teams by sport\nsport_participation_data = teams_data.groupby('Discipline', as_index=False).apply(lambda df: df.NOC.nunique())\nsport_participation_data = sport_participation_data.rename({None: 'No. of Teams'}, axis=1).sort_values('No. of Teams', ascending=False)\n\n# plot no. of teams by sport\nplt.figure(figsize=(14, 12))\nplt.title('Number of Teams by Sport')\nsns.barplot(x=sport_participation_data['No. of Teams'], y=sport_participation_data['Discipline'])\nplt.xlabel('No. of teams')\nplt.ylabel(None)\nplt.show()","15b257b3":"# merge athletes_by_country with population_data\nteamsize_population_by_country = athletes_by_country.set_index('NOC').join(population_data.set_index('NOC'))\n\n# create the ratio column\nteamsize_population_by_country['Teamsize-Population Ratio'] = teamsize_population_by_country['size'] \/ teamsize_population_by_country['Population']\n\n# change to per million people\nteamsize_population_by_country['Teamsize-Population Ratio'] = (teamsize_population_by_country['Teamsize-Population Ratio'] * 1e6).round(3)\n\n# sort by ratio\nteamsize_population_by_country = teamsize_population_by_country.sort_values(['Teamsize-Population Ratio', 'Population'], ascending=False)\n\n# remove the refugee olympic team\nteamsize_population_by_country = teamsize_population_by_country.iloc[1:]","9c635ead":"# plot team sizes\nplt.figure(figsize=(14, 60))\nplt.title('Teamsize-to-Population Ratios by Country')\nsns.barplot(x=teamsize_population_by_country['Teamsize-Population Ratio'], y=teamsize_population_by_country.index\n            , palette=sns.color_palette('crest_r', teamsize_population_by_country.shape[0]))\nplt.xlabel('No. of athletes per million people')\nplt.ylabel(None)\nplt.show()","02c00e91":"# plot team sizes\nplt.figure(figsize=(14, 60))\nplt.title('Athlete Participation by Country')\nsns.barplot(x=athletes_by_country['size'], y=athletes_by_country['NOC']\n            , palette=sns.color_palette('crest_r', athletes_by_country.shape[0]))\nplt.xlabel('No. of athletes')\nplt.ylabel(None)\nplt.show()","f0ec3da7":"# merge continent and athlete data\nathlete_data_w_continent = continent_data.set_index('Country').join(athlete_data.set_index('NOC'))\n\n# find no. of athletes by continent\nathletes_by_continent = athlete_data_w_continent.groupby('Continent', as_index=False).size().sort_values('size', ascending=False)\n\n# plot athletes by continent\nplt.figure(figsize=(14, 6))\nplt.title('Athelete Participation by Continent')\nsns.barplot(x=athletes_by_continent['size'], y=athletes_by_continent['Continent'])\nplt.xlabel('No. of athletes')\nplt.ylabel(None)\nplt.show()","333c48df":"# find no. of athlete by sport\nathletes_by_sport = athlete_data.groupby('Discipline', as_index=False).size()\\\n                                .sort_values('size', ascending=False)\n\n# plot athletes by sport\nplt.figure(figsize=(14, 20))\nplt.title('Number of Athletes by Sport')\nsns.barplot(x=athletes_by_sport['size'], y=athletes_by_sport['Discipline']\n            , palette=sns.color_palette('crest_r', athletes_by_sport.shape[0]))\nplt.xlabel('No. of athletes')\nplt.ylabel(None)\nplt.show()","3f549ca5":"# find no. of coaches by country\ncoaches_by_country = coach_data.groupby('NOC', as_index=False).size()\\\n                               .sort_values('size', ascending=False)\n\n# plot coaches by country\nplt.figure(figsize=(14, 28))\nplt.title('Number of Coaches by Country')\nsns.barplot(x=coaches_by_country['size'], y=coaches_by_country['NOC']\n            , palette=sns.color_palette('crest_r', coaches_by_country.shape[0]))\nplt.xlabel('No. of coaches')\nplt.ylabel(None)\nplt.show()","64edc880":"# merge no. of athletes by country and no. of coaches by country\nathletes_coaches_by_country = coaches_by_country.set_index('NOC')\\\n                    .join(athletes_by_country.set_index('NOC'), lsuffix='_coaches', rsuffix='_athletes')\n\n# compute coach-athlete ratio\nathletes_coaches_by_country['Coach-Athlete Ratio'] = ((athletes_coaches_by_country['size_coaches'] \/ athletes_coaches_by_country['size_athletes'])*100).round(2)\n\n# sort by ratio\nathletes_coaches_by_country = athletes_coaches_by_country.sort_values('Coach-Athlete Ratio', ascending=False)\n\n\n# plot highest coach-athlete ratios\ntop_athletes_coaches_by_country = athletes_coaches_by_country.head(15)\nplt.figure(figsize=(14, 8))\nplt.title('Highest Coach-Athlete Ratios')\nsns.barplot(x=top_athletes_coaches_by_country['Coach-Athlete Ratio'], y=top_athletes_coaches_by_country.index)\nplt.xlabel('No. of coaches per 100 athletes')\nplt.ylabel(None)\nplt.show()","78373081":"# find no. of athletes by gender\nathletes_by_gender = gender_data.loc[:, ['Male', 'Female']].sum(axis=0)\n\n# plot athletes by gender\nplt.figure(figsize=(12, 4))\nplt.title('Total Athletes by Gender')\nsns.barplot(x=athletes_by_gender, y=athletes_by_gender.index, alpha=0.8)\nplt.xlabel('No. of athletes')\nplt.ylabel(None)\nplt.show()","02b07f2d":"# find athletes by gender across sports\nunpivot_gender_data = pd.melt(gender_data, id_vars=['Discipline'], var_name='Sex'\n                              , value_name='Count', value_vars=['Male', 'Female'])\n\n# sort by count\nunpivot_gender_data = unpivot_gender_data.sort_values('Count', ascending=False)\n\n# plot athletes by gender across sports\nsns.catplot(x='Count', y='Discipline', hue='Sex'\n            , data=unpivot_gender_data\n            , kind='bar', alpha=0.8, height=20, aspect=0.7\n            , palette=sns.color_palette(['#4949A2', '#3CB371']))\nsns.despine()\nplt.title('Number of Athletes by Gender in Different Sports')\nplt.xlabel('No. of athletes')\nplt.ylabel(None)\nplt.show()","78f2ad30":"# plot the distribution of medals\nplt.figure(figsize=(14, 6))\nplt.title('Distribution of Total Medals Won')\nsns.histplot(data=medals_data['Total'], kde=False)\nplt.xlabel('No. of medals won')\nplt.ylabel('No. of countries')\nplt.show()","5728673a":"# find medals by country\ntop_medals_by_country = pd.melt(frame=medals_data.sort_values('Rank by Total').head(15)\\\n                            , id_vars=['Team\/NOC'], var_name='Type', value_name='Count'\n                            , value_vars=['Total', 'Gold', 'Silver', 'Bronze'])\n\n# plot medals by country\nsns.catplot(x='Count', y='Team\/NOC', hue='Type', data=top_medals_by_country\n            , kind='bar', height=20, aspect=0.7, alpha=0.9\n            , palette=sns.color_palette(['darkslategray', 'orange', 'lightgray', 'peru']))\nplt.title('Most Medals Won by Country')\nplt.xlabel('No. of medals')\nplt.ylabel(None)\nplt.show()","26f5b090":"# extract total medals by country\ntotal_medals_by_country = medals_data.loc[:, ['Team\/NOC', 'Total']]\n\n# merge athletes_by_country with total_medals_by_country\nathletes_n_medals_by_country = athletes_by_country.set_index('NOC').join(total_medals_by_country.set_index('Team\/NOC'))\n\n# fill NaN values\nathletes_n_medals_by_country = athletes_n_medals_by_country.fillna(0)\n\n# create medal-athlete ratio column\nathletes_n_medals_by_country['Medal-Athlete Ratio'] = ((athletes_n_medals_by_country['Total'] \/ athletes_n_medals_by_country['size'])*100).round(2)\n\n# sort by ratio\nathletes_n_medals_by_country = athletes_n_medals_by_country.sort_values(['Medal-Athlete Ratio', 'size'], ascending=False)","9f1b18e0":"# plot top 15 medal-athlete ratios\nbest_athletes_n_medals_by_country = athletes_n_medals_by_country.head(15)\nplt.figure(figsize=(14, 8))\nplt.title('Top 15 Medal-Athlete Ratios')\nsns.barplot(x=best_athletes_n_medals_by_country['Medal-Athlete Ratio'], y=best_athletes_n_medals_by_country.index)\nplt.xlabel('Medals per 100 Athletes')\nplt.ylabel('')\nplt.show()","f09562a5":"# plot bottom 15 medal-athlete ratios\nworst_athletes_n_medals_by_country = athletes_n_medals_by_country[athletes_n_medals_by_country['Total']==0.0].head(15)\nplt.figure(figsize=(14, 8))\nplt.title('Largest Team-Sizes with no Medals Won')\nsns.barplot(x=worst_athletes_n_medals_by_country['size'], y=worst_athletes_n_medals_by_country.index)\nplt.xlabel('Team size')\nplt.ylabel(None)\nplt.show()","4ec94b6e":"# merge total_medals_by_country and population_data\nmedals_n_population_by_country = population_data.set_index('NOC').join(total_medals_by_country.set_index('Team\/NOC'))\n\n# fill missing values\nmedals_n_population_by_country = medals_n_population_by_country.fillna(0)\n\n# create ratio column\nmedals_n_population_by_country['Medal-Population Ratio'] = ((medals_n_population_by_country['Total'] \/ medals_n_population_by_country['Population'])*1e6).round(4)\n\n# sort by ratio\nmedals_n_population_by_country = medals_n_population_by_country.sort_values(['Medal-Population Ratio', 'Population'], ascending=False)","8ffc5b8a":"# plot top 15 medal-population ratios\ntop_medals_n_population_by_country = medals_n_population_by_country.head(15)\nplt.figure(figsize=(14, 8))\nplt.title('Top Medals-to-Population Ratios')\nsns.barplot(x=top_medals_n_population_by_country['Medal-Population Ratio'], y=top_medals_n_population_by_country.index)\nplt.xlabel('Medals per Million People')\nplt.ylabel(None)\nplt.show()","6034514c":"# plot worst 15 medal-population ratios\nworst_medals_n_population_by_country = medals_n_population_by_country[medals_n_population_by_country['Medal-Population Ratio'] == 0].head(15)\nworst_medals_n_population_by_country['Population'] = (worst_medals_n_population_by_country['Population'] \/ 1e6).round(2)\nplt.figure(figsize=(14, 8))\nplt.title('Worst Medals-to-Population Ratios')\nsns.barplot(x=worst_medals_n_population_by_country['Population'], y=worst_medals_n_population_by_country.index)\nplt.xlabel('Population (in millions)')\nplt.ylabel(None)\nplt.show()","39f13505":"## d) Medal-to-Population Ratios","fb77d548":"## c) Teamsize-to-Population Ratio (among participating teams)","8ba1448b":"## a) Athlete Participation by Gender","5ea8b3f4":"## b) Highest Coach-Athlete Ratios","5a946183":"## c) Athlete Paricipation by Sport","eab83986":"## b) Biggest Winners","9eec8751":"# 2. EDA on Athletes","2ae7ad1b":"# 5. EDA on Medals Won","b06af7cf":"![Tokyo Olympics Image](https:\/\/images.unsplash.com\/photo-1619348813188-64a65c153485?ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&ixlib=rb-1.2.1&auto=format&fit=crop&w=1470&q=80)","6c16aae0":"## b) Athlete Participation by Continent","357c40be":"## a) Distribution of Country Team Sizes","c8d071f7":"## b) Athletes by Gender across Sports","838a68d1":"# 3. EDA on Coaches","f5624ae7":"## Setup","e21ba476":"### 15 Teams with Most Medals Won per 100 Athletes","badcccee":"## c) Medal-to-Athlete Ratios","c01520f9":"## a) Medals Distribution","d3158185":"# 2020 Tokyo Olympics in Data","41db989e":"## Objectives\n\nThis notebook seeks to answer the following questions:\n- What is the distribution of the team sizes?\n- What are the sports with most participating teams?\n- What are the athlete-to-population ratios among the participating teams?\n- How many atheles participated by country, by continent and by sport?\n- What teams\/countries had the largest number of coaches?\n- What are the highest coach-athlete ratios?\n- What were the total number of male and female participants?\n- How many male and female athletes participated across different sports?\n- What is the distribution of the total medals won?\n- Who are the biggest winners and how many medals did they accumulate across different categories?\n- What are the highest and lowest medal-to-athlete ratios?\n- What are the highest and lowest medal-to-population ratios?\n","565a557b":"# 1. EDA on Teams","e98d05f8":"## a) Number of Coaches by Country","230ac026":"## b) Number of Teams by Sport","58265ef2":"### 15 Teams with Most Medals Won per Million People (Population)","1eb9e803":"# 4. EDA on Gender","d5f63766":"### 15 Teams with the Worst Medal-to-Athlete Ratios, i.e., Largest Team-Sizes with no Medals Won","3ae52cd8":"### 15 Worst Medal-to-Population Ratios ,i.e., Counties with Largest Population with no Medals Won","c45a96d5":"## a) Athlete Participation by Country"}}