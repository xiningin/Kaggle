{"cell_type":{"e64a5b75":"code","3f7a7ff4":"code","ce4d71e0":"code","806f4ba5":"code","0b1dd8ee":"markdown"},"source":{"e64a5b75":"import numpy as np # linear algebra\nimport pandas as pd # data processing, CSV file I\/O (e.g. pd.read_csv)\n\nimport matplotlib.pyplot as plt\n%matplotlib inline\nimport seaborn as sns\nsns.set(rc={'figure.figsize':(11.7,8.27)})\n\n# import plotly\nimport plotly.plotly as py\nimport plotly.graph_objs as go\n\n# these two lines are what allow your code to show up in a notebook!\nfrom plotly.offline import init_notebook_mode, iplot\ninit_notebook_mode()\n\n\nimport os\nimport datetime\nprint(os.listdir(\"..\/input\"))\ntoday = datetime.datetime.today().date()\ndf = pd.read_csv(\"..\/input\/bus-breakdown-and-delays.csv\")","3f7a7ff4":"time_cols = [\"Occurred_On\", \"Created_On\", \"Informed_On\", \"Last_Updated_On\"]\nfor col in time_cols:\n    df[f\"{col}_date\"] = pd.to_datetime(df[col]).dt.date\n    df[f\"{col}\"] = pd.to_datetime(df[col])\n\n# Consider valid all data from the start to tomorrow (due to time zone differences, we don't use today)\nvalid_df = df[df[\"Occurred_On_date\"] < datetime.date.today() + datetime.timedelta(days=1)]","ce4d71e0":"temp_data = valid_df[[\"Occurred_On\"]].resample('W-Mon', on='Occurred_On').agg('count')\ntemp_data[\"date\"] = temp_data.index\n\n# re-parse dates\ntemp_data['date'] = pd.to_datetime(temp_data['date'], format=\"(%Y-%m-%d)\")\n# remove index\ntemp_data = temp_data.reset_index(drop=True)\n\n# sepcify that we want a scatter plot with, with date on the x axis and meet on the y axis\ndata = [go.Scatter(x=temp_data.date, y=temp_data.Occurred_On)]\n\n# specify the layout of our figure\nlayout = dict(title = \"Number of Accidents per Week\",\n              xaxis= dict(title= 'Date',ticklen= 5,zeroline= False))\n\n# create and show our figure\nfig = dict(data = data, layout = layout)\niplot(fig)","806f4ba5":"data = []\ntemp = None\nfor name , group in valid_df[[\"Reason\", \"Occurred_On\", \"Busbreakdown_ID\"]].groupby(\"Reason\"):\n    temp = group.resample('W-Mon', on='Occurred_On').agg('count')\n    temp[\"date\"] = temp.index\n    \n    # re-parse dates\n    temp['date'] = pd.to_datetime(temp['date'], format=\"(%Y-%m-%d)\")\n    # remove index\n    temp = temp.reset_index(drop=True)\n    \n    data.append(go.Scatter(x=temp.date, y=temp.Busbreakdown_ID, name=name))\n\n# specify the layout of our figure\nlayout = dict(title = \"Number of Accidents by Type\",\n              xaxis= dict(title= 'Date',ticklen= 5,zeroline= False))\n\n# create and show our figure\nfig = dict(data = data, layout = layout)\niplot(fig)","0b1dd8ee":"# Dashboarding NY Bus Data\n\nThis notebook was inspired by [Kaggle's dashboarding 5](https:\/\/www.youtube.com\/playlist?list=PLqFaTIg4myu8DtXSN_aVGsEBQoNCyAVKF&utm_medium=email&utm_source=intercom&utm_campaign=dashboarding-event) week minicourse.\n\nThe idea is to create some simple dashboards based on data of bus accidents published by the city of New York. \n"}}