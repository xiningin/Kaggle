{"cell_type":{"0332099f":"code","d31740d1":"code","926c5d74":"code","1fa04d8e":"code","ccab7bc8":"code","6a6608d1":"code","a4268d1a":"code","ad3403bb":"code","c714796e":"code","03f6b691":"code","c3e9febb":"code","5172c389":"code","f0dfec28":"code","746fca27":"code","4160533d":"code","273080c2":"code","bc6bcb1b":"code","ee8254ec":"code","6e8504c5":"code","a523e6f2":"code","8f625be8":"code","69c34919":"code","02d30fc4":"code","19582163":"code","d46fcb58":"code","793a1dda":"code","9dcd8a36":"code","2fa12b8a":"code","b03e97e4":"code","82ddcb90":"code","6b5e1a62":"markdown","9e275f1b":"markdown","30a08b43":"markdown","58c3cdf6":"markdown","ac3773f4":"markdown","587fd70f":"markdown","cacedd4c":"markdown","07354751":"markdown","84858b5f":"markdown","0b7c1654":"markdown","cd522b28":"markdown"},"source":{"0332099f":"import numpy as np\nimport pandas as pd\nimport os","d31740d1":"for dirname, _, filenames in os.walk('\/kaggle\/input'):\n    for filename in filenames:\n        pass\ndf = pd.read_csv(os.path.join(dirname, filename))\ndf.head()","926c5d74":"df1 = df.drop(['Title', 'Text'], axis=1)\ndf1.head()","1fa04d8e":"columns = df1.columns\ncolumns","ccab7bc8":"M_reason = columns[1]\ncaw = columns[8]\nprint(M_reason + '\\n\\n' + caw)","6a6608d1":"df1.columns = ['city', 'M_reason', 'M_child', 'M_male', 'M_female', 'K_child', 'K_male', 'K_female', 'CAW_crime', 'CAW_adult', 'CAW_child']","a4268d1a":"columns = {i:j for i,j in zip(df1.columns, df.drop(['Title', 'Text'], axis=1).columns)}\ndel columns['M_reason']\ndel columns['CAW_crime']\ncolumns","ad3403bb":"columns['K_child'] = columns['K_child'].splitlines()[1]\ncolumns","c714796e":"for i in df1.columns:\n    print(i, ':', df1[i].unique())","03f6b691":"temp = [i.lstrip('0123456789: ').rstrip(' ,.') for i in M_reason.splitlines()[1:]]\nmurder = {temp[i]:i+1 for i in range(len(temp))}\n\nmurder['Property Disputes'] = murder.pop('Property\/Land Disputes')\nmurder['Unknown reasons'] = murder.pop('Unknown\/other')\nmurder","c3e9febb":"temp = [i.lstrip('0123456789. ').rstrip(' ,.') for i in caw.splitlines()[1:]]\nCAW = {i+1:temp[i] for i in range(len(temp))}\nCAW","5172c389":"df1.fillna('0', inplace = True)","f0dfec28":"df1 = df1.astype({'city':'category', \n                  'M_reason':'category', \n                  'M_child':'uint8', \n                  'M_male':'uint8', \n                  'M_female':'uint8', \n                  'K_child':'uint8', \n                  'K_male':'uint8', \n                  'K_female':'uint8',\n                  'CAW_crime':'string',\n                  'CAW_adult':'uint8', \n                  'CAW_child':'uint8'})\n# we can also use \n# df1 = df1.convert_dtypes()","746fca27":"df1.info()","4160533d":"temp = df1.CAW_crime.str.get_dummies(',')\ntemp.columns","273080c2":"temp['10'] += temp[' 10']\ntemp['8'] += temp[' 8']\ntemp.drop([' 10', ' 8'], axis=1, inplace=True)\ntemp.columns = temp.columns.astype('uint8')\ntemp.sort_index(axis=1, inplace=True)\ntemp.columns = ['CACAW_'+str(i) for i in temp.columns]\ntemp","bc6bcb1b":"df2 = pd.concat([df1, temp], axis=1).drop('CAW_crime', axis=1)\ndf2","ee8254ec":"import matplotlib.pyplot as plt\nimport seaborn as sns\n%matplotlib inline","6e8504c5":"temp = df2.M_reason.value_counts()\nprint(\"Percentage of murder cases = \", (1-(temp['0']\/temp.sum()))*100)\n\ntemp.drop('0', inplace=True)\n\nplt.bar(temp.index,temp.values)\nplt.xticks(rotation=45, ha='right')\nplt.title('Number of murders for different reasons')\nplt.ylabel('Count')\nplt.show()","a523e6f2":"temp_df = df2.groupby('city').sum()\ntemp_df","8f625be8":"fig, ax = plt.subplots(figsize=(20,8), ncols=3)\nplt.tight_layout()\n\ntemp = temp_df.iloc[:,:3]\ntemp.plot(kind='bar', rot=0, ax=ax[0])\nax[0].set_title(\"Murder Cases Victims\")\nax[0].legend([columns[col] for col in temp.columns])\n\ntemp = temp_df.iloc[:, 3:6]\ntemp.plot(kind='bar', rot=0, ax=ax[1])\nax[1].set_title(\"Kidnapping Cases Victims\")\nax[1].legend([columns[col] for col in temp.columns])\n\ntemp = temp_df.iloc[:, 6:8]\ntemp.plot(kind='bar', rot=0, ax=ax[2])\nax[2].set_title(\"Crime Against Women Cases Victims\")\nax[2].legend([columns[col] for col in temp.columns])\nplt.show()","69c34919":"temp = temp_df.iloc[:, 9:]\ntemp","02d30fc4":"temp.T.plot(kind='bar', figsize=(20, 8), title='Number of Crime Against Women in each category', rot=45)","19582163":"df3 = df1.copy()","d46fcb58":"df3.CAW_crime = df3.CAW_crime.str.replace(\" \", \"\").str.split(',')\ndf3 = df3.explode('CAW_crime')\ndf3.head()","793a1dda":"df3 = df3.reset_index().rename(columns={'index':'case_number'}).astype({'CAW_crime':'uint8'})\ndf3.head()","9dcd8a36":"temp_df = df3.groupby('CAW_crime').mean().drop(columns=['case_number'], index=[0, 11])\ntemp_df","2fa12b8a":"temp_df.plot(kind='bar', figsize=(15,8))\nplt.xticks(np.arange(temp_df.shape[0]), CAW.values(), rotation=45, ha='right')\nplt.legend([columns[col] for col in temp_df.columns])\nplt.show()","b03e97e4":"df4 = df3[['M_reason', 'CAW_crime']]\ndf4 = df4[(df4.M_reason!='0')|(df4.CAW_crime!=0)]\ndf4.head()","82ddcb90":"plt.figure(figsize=(15,8))\nplt.scatter(df4.M_reason, df4.CAW_crime)\nplt.yticks(np.arange(len(CAW))+1, CAW.values())\nplt.grid('on')\nplt.show()","6b5e1a62":"We see that a lot of cases are from the categories: CACAW_7, CACAW_8 and CACAW_10 i.e. 'Rape', 'Assault on Women with Intent to Outrage her Modesty' and 'Protection of Children from Sexual Offences Act'","9e275f1b":"## Importing modules and dataset","30a08b43":"#### Extract data from column names and rename them","58c3cdf6":"We see that 'Love Affairs' are the most common known reasons for murders","ac3773f4":"#### Drop unnecessary columns","587fd70f":"We notice that a lot data is incorrect in the dataset, like the name of city and the number of victims per case<\/br>\nFirst issue can be resolved by extracting the first word from Text and getting the correct city name<\/br>\nSecond issue might require manual extraction of data from text and title<\/br>\nIt can also be done by implementing deeplearning models to classify text from the title<\/br>","cacedd4c":"#### We see that some Murders due to 'Family Dispute' happens with relation to other crimes against women falling in category of 'Cruelty by Husband\/in-laws((Sec.498 A IPC)'","07354751":"#### We see acid attacks leaving a lot of victims per case","84858b5f":"## Preprocessing","0b7c1654":"## Visualising the dataset","cd522b28":"#### Fill NaN values and set correct values and data types in columns"}}