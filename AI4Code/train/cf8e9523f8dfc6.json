{"cell_type":{"9f1508e7":"code","4a613bea":"code","8cef63e4":"code","8d94cf19":"code","d96950e5":"code","c53ba1b6":"code","128fd832":"code","1c1183d2":"code","90534dae":"code","b435c014":"code","a0659913":"code","4e82d54f":"code","6f604ad7":"code","4e45aa9d":"code","b697fcec":"code","264f94e5":"code","e2ccee1f":"code","8cea2e7c":"code","b3877bb4":"code","3241c8d2":"code","e9aee879":"code","515d7c59":"code","e32fe1c2":"code","e2888394":"code","75a0910c":"code","16ee3a9f":"code","3a650170":"code","dccd8534":"code","c21381a4":"code","84ee3fc2":"code","d3e49ee7":"code","e134db80":"code","ded513f5":"markdown","9f86d2c5":"markdown","30ccd608":"markdown","4948e705":"markdown","bad92243":"markdown","8485976b":"markdown","af40c815":"markdown","e96b9429":"markdown","dc0baf4a":"markdown","dc54c707":"markdown","82cebb1e":"markdown","92782f23":"markdown","639e8352":"markdown","4a26ea6f":"markdown","b88d63a8":"markdown","77d319b4":"markdown","9e6d49e4":"markdown","c6e841a5":"markdown","ca1f2c13":"markdown","f6c1de50":"markdown","03417372":"markdown","6cbbda32":"markdown","55443f3e":"markdown","07817668":"markdown","6f008703":"markdown","c1bc6170":"markdown","6f9ade72":"markdown","7008edfe":"markdown","403b5529":"markdown"},"source":{"9f1508e7":"import numpy as np\nimport pandas as pd\npd.set_option('display.max_rows', 50)\n\nusecols = [\n    'asset_provider_attributes_name', # Company behind the fund   \n    'real_asset_attributes_name', # Fund name\n    'real_asset_attributes_serie', # Fund series\n    'real_asset_attributes_last_day_total_net_assets', # Series' AUM\n    'real_asset_attributes_last_day_fixed_fee', # % fixed fee (daily) \n    #\n    # Note we will not consider variable fees nor expenses on this analysis\n    #\n    'real_asset_attributes_last_day_institutional_investors', # Number of institutional investors\n    'real_asset_attributes_last_day_shareholders', # Number of investors\n    'real_asset_attributes_end_date', # useful to exclude inactive funds\n    'conceptual_asset_attributes_currency', # useful to exclude non-CLP funds    \n    'conceptual_asset_attributes_category', # useful to include only `mutual_fund`        \n]\n\nnames = dict(\n    asset_provider_attributes_name='financial_institution',\n    real_asset_attributes_name='fund_name',\n    real_asset_attributes_serie='fund_serie',\n    real_asset_attributes_last_day_total_net_assets='serie_aum',\n    real_asset_attributes_last_day_fixed_fee='serie_daily_fixed_fee',\n    real_asset_attributes_last_day_institutional_investors='serie_n_institutional_investors',\n    real_asset_attributes_last_day_shareholders='serie_n_shareholders',\n    real_asset_attributes_end_date='fund_end_date',\n    conceptual_asset_attributes_currency='fund_currency',\n    conceptual_asset_attributes_category='fund_category')\n\ndata = pd.read_csv(\n    '..\/input\/chile-investment-market-data-midoct-2021\/data-2021-10-17.csv',\n    usecols=usecols)[usecols]\ndata.rename(columns=names, inplace=True)\ndata","4a613bea":"# Approximate exchange rate at the middle of October 2021:\nclp_per_usd = 817\nclp_per_usd_M = clp_per_usd * 1000000 \n\n# It's easier to reason about millions of USD than CLPs with too many zeroes:\ndata['serie_aum_usd_M'] = data['serie_aum'] \/ clp_per_usd_M\n\n# We commonly speak about annual fees, but they come as daily fees on the data:\ndata['serie_annual_fixed_fee'] = data['serie_daily_fixed_fee'] * 365\n\n# We can extrapolate the annual incom from the AUM and the annual fee. \n# It's not going to be accurate (AUM will fluctuate, you'll get outflows and inflows, etc).\n# But again, it's easier to reason about annuual figures\ndata['serie_extrapolated_annual_income'] = data['serie_annual_fixed_fee'] * data['serie_aum']\n# ...and in millions of USD;\ndata['serie_extrapolated_annual_income_usd_M'] = data['serie_extrapolated_annual_income'] \/ clp_per_usd_M\n\n# Now some more opinionated attributes:\n\n# We'll consider anything above 1.5% as an \"expensive\" fund. \n# We are not alone on this rule of thumb:\n# https:\/\/www.investopedia.com\/ask\/answers\/032715\/when-expense-ratio-considered-high-and-when-it-considered-low.asp\n# You might argue that we shouldtweak this to include IVA and set it to ~1.8%.\n# But all the players in the industry which are going for lower cost funds\n# (Fintual, Focus, Clever by BIECE, even Itau!) are aiming for less than 1.2%.\n#\n#\u00a0So, we consider that 1.5% (including IVA) sounds like a good threshold:\nexpensive_threshold = 1.5\/100 \ndata['is_expensive'] = data.serie_annual_fixed_fee > expensive_threshold\n\n# Then we'll consider any fund with average shareholder balance below CLP 100M as \"retail\"\n# Surprisingly, there are funds with high balances paying expensive fees. We'll narrow down\n# the analysis to the \"retail\" market and the CLP 100M cutoff point felt reasonable.\ndata['serie_average_shareholder_balance_clp_M'] = data['serie_aum'] \/ data['serie_n_shareholders'] \/ 1000000\nretail_threshold = 100\ndata['is_retail'] = data.serie_average_shareholder_balance_clp_M <= retail_threshold\ndata","8cef63e4":"series = data[\n    # Only mutual funds\n    (data.fund_category == 'mutual_fund') \n    # Only CLP (or null, which we'll assume is CLP)\n    & (\n        (data.fund_currency == 'CLP') |\n        (data.fund_currency.isnull())\n    )  \n    # Only active funds\n    & (data.fund_end_date.isnull())\n    # Only funds series that charge fixed fees\n    & (data.serie_daily_fixed_fee > 0)\n]\nseries\n","8d94cf19":"series.serie_aum_usd_M.sum()","d96950e5":"aum_per_institution = pd.pivot_table(series, index='financial_institution', values='serie_aum_usd_M', aggfunc=np.sum, margins=True)\naum_per_institution","c53ba1b6":"series.describe()","128fd832":"pd.pivot_table(series, index=('financial_institution'), values='serie_extrapolated_annual_income_usd_M', aggfunc=np.sum, margins=True)","1c1183d2":"expensive_series = series[series.is_expensive]\nexpensive_series\n\n","90534dae":"expensive_series.serie_annual_fixed_fee.hist()","b435c014":"inexpensive_series = series[~series.is_expensive]\ninexpensive_series","a0659913":"aum_per_institution_and_is_expensive = pd.pivot_table(series, columns='is_expensive', index='financial_institution', values='serie_aum_usd_M', aggfunc=np.sum, fill_value=0, margins=True)\naum_per_institution_and_is_expensive","4e82d54f":"aum_per_institution_and_is_expensive[True]['All'] \/ aum_per_institution_and_is_expensive['All']['All']","6f604ad7":"income_per_institution_and_is_expensive = pd.pivot_table(series, columns='is_expensive', index='financial_institution', values='serie_extrapolated_annual_income_usd_M', aggfunc=np.sum, fill_value=0, margins=True)\nincome_per_institution_and_is_expensive","4e45aa9d":"income_per_institution_and_is_expensive[True]['All'] \/ income_per_institution_and_is_expensive['All']['All']","b697fcec":"retail_series = series[series.is_retail]\nretail_series","264f94e5":"retail_series.serie_average_shareholder_balance_clp_M.hist()","e2ccee1f":"aum_per_institution_and_is_retail = pd.pivot_table(series, columns='is_retail', index='financial_institution', values='serie_aum_usd_M', aggfunc=np.sum, fill_value=0, margins=True)\naum_per_institution_and_is_retail","8cea2e7c":"aum_per_institution_and_is_retail[True]['All'] \/ aum_per_institution_and_is_retail['All']['All']","b3877bb4":"income_per_institution_and_is_retail = pd.pivot_table(series, columns='is_retail', index='financial_institution', values='serie_extrapolated_annual_income_usd_M', aggfunc=np.sum, fill_value=0, margins=True)\nincome_per_institution_and_is_retail","3241c8d2":"income_per_institution_and_is_retail[True]['All'] \/ income_per_institution_and_is_retail['All']['All']","e9aee879":"series[series.is_expensive & series.is_retail].serie_aum_usd_M.sum()","515d7c59":"pd.pivot_table(series, columns=('is_retail', 'is_expensive'), index='financial_institution', values='serie_aum_usd_M', aggfunc=np.sum, fill_value=0, margins=True)","e32fe1c2":"income_per_institution_and_is_retail_and_is_expensive = pd.pivot_table(series, columns=('is_retail', 'is_expensive'), index='financial_institution', values='serie_extrapolated_annual_income_usd_M', aggfunc=np.sum, fill_value=0, margins=True)\nincome_per_institution_and_is_retail_and_is_expensive","e2888394":"income_per_institution_and_is_retail_and_is_expensive[(True, True)]['All'] \/ income_per_institution_and_is_retail_and_is_expensive['All']['All'] ","75a0910c":"bice_series = series[series.financial_institution == 'BICE INVERSIONES ADMINISTRADORA GENERAL DE FONDOS S.A.']\nbice_series","16ee3a9f":"clever_series = bice_series[bice_series.fund_name.isin(('FONDO MUTUO AGRESIVO','FONDO MUTUO MODERADO', 'FONDO MUTUO CONSERVADOR'))]\nclever_series","3a650170":"non_clever_series = bice_series[~(bice_series.fund_name.isin(('FONDO MUTUO AGRESIVO','FONDO MUTUO MODERADO', 'FONDO MUTUO CONSERVADOR')))]","dccd8534":"[non_clever_series.serie_extrapolated_annual_income_usd_M.sum(), non_clever_series.serie_aum_usd_M.sum()]","c21381a4":"[clever_series.serie_extrapolated_annual_income_usd_M.sum(), clever_series.serie_aum_usd_M.sum()]","84ee3fc2":"focus_series = series[series.financial_institution == 'FOCUS ADMINISTRADORA GENERAL DE FONDOS S.A.']\nfocus_series","d3e49ee7":"[focus_series.serie_extrapolated_annual_income_usd_M.sum(), focus_series.serie_aum_usd_M.sum()]","e134db80":"# Los datos de fintual vienen pifiados en el dataset :()\nfintual_series = series[series.financial_institution == 'FINTUAL ADMINISTRADORA GENERAL DE FONDOS S.A.']\nfintual_series\n","ded513f5":"Eso nos deja con ~2k registros para trabajar (es posible que estemos dejando datos relevantes fuera, por lo que los resultados del an\u00e1lisis podr\u00edan variar si cambiamos la forma de seleccionar las series\/fondos relevantes).\n\nVeamos que tan grande es la torta con la que nos quedamos en t\u00e9rminos de AUM (assets under management). Los n\u00fameros en pesos son muy grandes, as\u00ed que los llevaremos a millones de d\u00f3lares:","9f86d2c5":"\u00a1M\u00e1s de 14 mil millones de dolares!\n\nAc\u00e1 podemos ver el desglose de los montos ahorrados\/invertidos si son o no retail y si son o no \"caros\"","30ccd608":"El fondo m\u00e1s caro cobra un ~5.65% anual. No sabemos si llamarlo razonable, pero est\u00e1 dentro de los valores posibles. El promedio es ~1.65% y la media 1.4%. Tambi\u00e9n parece OK.\n\nCon confianza en que los datos parecen correctos, pasemos a mirar como se reparte la torta de *ingresos por fees* que son la multiplicaci\u00f3n del saldo administrado (que ya vimos) por los fees anuales:","4948e705":"# An\u00e1lisis mercado de inversiones Chile (Mediados Octubre 2021) \n\nEste an\u00e1lisis usa datos obtenidos mediante el [API de Fintual](https:\/\/fintual.cl\/api-docs\/index.html) y [un simple script](https:\/\/replit.com\/@continuumhq\/fetch-chile-investment-market-data#main.py) que vuelca en un archivo CSV la \"foto\" del mercado en el d\u00eda acual. Los datos usados son la salida de dicho de script.\n\nLo primero que haremos ser\u00e1 tomar solo un subconjunto de esos datos y darles mejores nombres a las columnas:","bad92243":"En cuanto a los fondos \"baratos\", esta es la lista exploratoria:","8485976b":"Gran parte de estos fondos \"caros\" parecen cobrar alrededor de ~2%, \u00a1pero sabemos que hay casos que llegan al 5%! Ac\u00e1 se puede ver la distribuci\u00f3n:","af40c815":"De las 8k+ filas que vienen ah\u00ed, nos quedaremos solo con la data que corresponde a fondos mutuos vigentes denominados en pesos chilenos y que cobran fee de administraci\u00f3n fijo mayor a 0.","e96b9429":"\u00a1Como un tercio!","dc0baf4a":"\u00a1Harto m\u00e1s que la mitad!","dc54c707":"\u00a1Dos tercios!\n\nAcotemos ahora el an\u00e1lisis a los fondos \"retail\" que es donde se puso interesante la competencia recientemente. Porque hay algunos fondos que son sorprendentemente caros a pesar de tener aportantes con saldos altos (\u00a1incluso institucionales!), pero no son tan relevantes para la competencia retail de inversiones. Veamos, que fondos quedan en esta categor\u00eda retail:","82cebb1e":"Son mas de 45M de d\u00f3lares. Probablemente estamos dejando algo de la torta fuera (el [2020 hab\u00edan 60M+ d\u00f3lares en la industria seg\u00fan la CMF](https:\/\/www.cmfchile.cl\/portal\/estadisticas\/617\/w3-article-9673.html)), pero puede tener que ver con excluir los fondos en d\u00f3lares y\/o con alg\u00fan vac\u00edo en los datos originales.\n\nPara simplificarnos la vida, llevemos a millones de d\u00f3lares el AUM de cada serie. Y con ese dato, miremos como andan los actores de la industria:","92782f23":"Y veamos los jugadores puramente baratos nuevos digitales como van","639e8352":"Uhm. O sea, \u00bfQu\u00e9 porcentaje del saldo administrado est\u00e1 en fondos caros?","4a26ea6f":"Casi dos tercios de los fondos analizados estar\u00edan en las series catalogadas como retail","b88d63a8":"\n\nVeamos ahora los ingresos que obtienen las administradoras:","77d319b4":"\u00bfCuanta plata hay metida en fondos \"baratos\"? \u00bfCuanto en fondos \"caros\"? (en millones de d\u00f3lares)","9e6d49e4":"En l\u00edneas generales tiene sentido. Lo que uno esperar\u00eda si la data es razonable [(Banchile, Santander, Bci como las mas grandes)](https:\/\/www.cmfchile.cl\/portal\/estadisticas\/617\/w3-article-9675.html) es lo que vemos ac\u00e1.\n\nTambi\u00e9n podemos describir en l\u00edneas generales los datos para mirar si se ven razonables:","c6e841a5":"Todo luce razonable: series con saldos bajos o de algunos millones de pesos. En el histograma se ve mas claro:","ca1f2c13":"Oh, \u00bfentonces qu\u00e9 porcentaje de los ingresos provienen de fondos \"caros\"?","f6c1de50":"Veamos ahora el caso de una administradora que est\u00e1 reaccionando a esto y tiene sus propios fondos masivos y baratos: BICE. Partamos mirando los fondos de la administradora:","03417372":"Vamos a agregar algunas columnas adicionales para hacernos la vida mas f\u00e1cil en el an\u00e1lisis. Tambi\u00e9n agregaremos dos columnas mas \"opinionadas\":\n\n- is_expensive ser\u00e1 `True` si el fee anual de un fondo es mayor que el 1.5%\n- is_retail ser\u00e1 `True` si el saldo promedio de los aportantes es menor o igual a 100 millones de pesos chilenos.","6cbbda32":"Finalmente, el desglose de *ingresos* que obtiene cada administradora segun si las series son retail o no y si son \"caras\" o no:","55443f3e":"\u00a1Y aproximadamente 4\/5 del los ingresos de la industria provienen de las series retail!\n\nEn conclusi\u00f3n, suena a que tanto la categor\u00eda de \"retail\" como de \"caro\" genera hartos ingresos para la industria.\n\n\u00bfQu\u00e9 pasar\u00eda entonces si el cliente retail huye de los fondos caros? \u00bfCuanta plata podr\u00eda moverse?","07817668":"Hagamos un an\u00e1lisis similar al anterior: \u00bfQu\u00e9 proporci\u00f3n de los saldos en fondos mutuos ser\u00edan \"retail\"? \u00bfY que proporci\u00f3n de los ingresos?","6f008703":"\u00bfY cuanta generan los fondos modernos administrando cuanto?","c1bc6170":"\u00bfCuanta plata generan los fondos tradicionales?","6f9ade72":"\u00bfQu\u00e9 porcentaje de ingresos de la industria est\u00e1 en juego entonces?","7008edfe":"Y ahora el subconjunto de fondos que distribuye clever:","403b5529":"Suena razonable. Tenemos nuevamente a Banchile, Santander y Bci en el top 3. (Hay n\u00fameros sospechosamente peque\u00f1os en Ameris y Toesca, pero no debiera cambiar nada significativo en el grueso del an\u00e1lisis).\n\nLo relevante es que tenemos una industria de m\u00e1s de 550M de d\u00f3lares de ingresos anuales por fees. \n\nAhora veremos como se segmenta esta industria en las categor\u00edas de fondos caros y retail.\n\nPartamos por algunos fondos \"caros\":"}}