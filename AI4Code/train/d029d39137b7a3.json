{"cell_type":{"47573393":"code","0a46ff1d":"code","bf5de8f5":"code","a2f83b98":"code","43b57225":"code","bf9ccc24":"code","a4f5bdf8":"code","d19931c5":"code","b94b24f7":"code","5a667166":"code","b1a0dff4":"code","4446d21f":"code","ab3b07a4":"code","fe9f8a96":"code","d1732762":"code","4e278ea5":"code","da62b6bb":"code","cb71fb6d":"code","78f757c1":"code","382536de":"code","5d4696ea":"code","59e7bc7c":"code","78309ed7":"code","29eaafb5":"code","a0441026":"code","2ff9ad90":"code","91f6db1d":"code","16f7b805":"code","24013f7d":"code","7c8d9ebb":"code","bc060869":"code","812758e8":"code","7ab85d33":"code","77501420":"code","dc67fab9":"code","00c067b7":"code","6b5fb77f":"code","800ede82":"code","4e546503":"code","a8f055fa":"code","b5552759":"code","4f28bea0":"code","80479023":"code","80ba5fdf":"code","a42bb76e":"code","aadab593":"code","c8c5790e":"code","909c7213":"code","6be70a4f":"code","be39ddd6":"code","7ceb9ee1":"code","02466e7e":"code","70936d68":"code","f2ec437d":"code","f11bda8b":"code","2b7f468b":"code","6c69d726":"code","f9fc23d9":"code","a62a8ede":"code","a20a2b50":"code","2cd639d9":"code","192222b9":"code","20ab0a91":"code","8e8fb74e":"code","52f43470":"code","5d0be0f3":"markdown","caa2b86a":"markdown","34efffa6":"markdown","237904d6":"markdown","007604f8":"markdown","6c9f4e66":"markdown","0cc1fc74":"markdown","27fd0484":"markdown","bfac7670":"markdown","73d8c274":"markdown","5acb0c61":"markdown","cefc7ac6":"markdown","e1147911":"markdown","b6c9f95e":"markdown","eaba47f4":"markdown","558570f7":"markdown","b62751b9":"markdown","24dd5f10":"markdown","361297ac":"markdown","539d2353":"markdown","7121edf7":"markdown","6a7e7595":"markdown","e13c122d":"markdown","5eed1969":"markdown","476a7948":"markdown","e9f62cb9":"markdown","c2287534":"markdown","b168a079":"markdown","e8258e74":"markdown","cdb0273b":"markdown","888a1621":"markdown","53bc3562":"markdown","ac4aeced":"markdown","e195e895":"markdown","18b5fb09":"markdown"},"source":{"47573393":"import pandas as pd\nimport numpy as np\nimport matplotlib.pyplot as plt\nimport seaborn as sns\n%matplotlib inline","0a46ff1d":"df = pd.read_csv('..\/input\/anz-synthesised-transaction-dataset\/anz.csv')\ndf.head()","bf5de8f5":"df.shape","a2f83b98":"df.info()","43b57225":"# checking the unique values in currency\ndf.currency.value_counts()","bf9ccc24":"df.drop(['currency'], axis = 1 , inplace = True)","a4f5bdf8":"# let's check if we have NaNs in our dataset\ndf.isnull().sum()","d19931c5":"# because there are so many NaNs in these two columns, I am going to drop them\ndf.drop(['bpay_biller_code', 'merchant_code'], axis = 1 , inplace = True)","b94b24f7":"# let's count the dupliates in the dataset\ndf.duplicated().sum()","5a667166":"# it looks like the NaNs in the dataset are all on commun rows.\ndf[df.card_present_flag.isnull()][['merchant_id', 'merchant_state', 'merchant_suburb', 'merchant_long_lat']].isnull().sum()","b1a0dff4":"# these are the unique values in the status column.\ndf['status'].value_counts()","4446d21f":"# all the transactions happened in Australia.\ndf['country'].value_counts()","ab3b07a4":"# then I am dropping the country column \ndf.drop(['country'], axis = 1 , inplace = True)","fe9f8a96":"# the unique movement types \ndf.movement.value_counts()","d1732762":"# I am going to change the dtype of date column and extraction column to datetime.\ndf['date'] = pd.to_datetime(df['date'])\ndf['extraction'] = pd.to_datetime(df['extraction'])","4e278ea5":"# adding three columns: year, month, and day of the transaction to make the segmentation by date easy.\ndf['day']= df['date'].dt.day_name()\ndf['month'] = df['date'].dt.month_name()\ndf['year'] = df['date'].dt.year","da62b6bb":"# now let's check the unique values of our new columns\ndf.year.value_counts()","cb71fb6d":"# because all the transactions are from 2018, I will drop the year columns\ndf.drop(['year'], axis = 1 , inplace = True)","78f757c1":"# it looks like transactions happened only in August, September, and October\ndf.month.value_counts()","382536de":"# unique values of txn_description (mode of transaction)\ndf.txn_description.value_counts()","5d4696ea":"# finally let's check the distribution of the dataset by gender\ndf.gender.value_counts()","59e7bc7c":"# this is a quick summary of our categorical variables showing the number of unique values in each\n# column with the most frequent value in it and its frequency.\ndf.describe(exclude = [np.number], datetime_is_numeric=True).loc[['unique','top' ,'freq']]","78309ed7":"df.drop(['transaction_id', 'account', 'first_name', 'long_lat','merchant_id','merchant_suburb', 'merchant_long_lat'], axis = 1 , inplace = True)","29eaafb5":"# my final dataset\n\ndf.head()","a0441026":"# there are more authorized transactions than posted\n\nsns.countplot(x = 'status', data = df, palette = 'magma')\nplt.title('count of transactions by transaction status');","2ff9ad90":"# POS and SALES-POS are the most used modes of transaction\n\nsns.countplot(y = 'txn_description', data = df, palette = 'magma')\nplt.title('count of transactions by mode of transaction')\nplt.ylabel('mode of transaction');","91f6db1d":"# there are more males than females\n\nsns.countplot(x = 'gender', data = df, palette = 'magma')\nplt.title('count of transactions by gender');","16f7b805":"# NSW and VIC are the states with the most transactions\n\nsns.countplot(x = 'merchant_state', data = df, palette = 'magma')\nplt.title('count of transactions by merchants state');","24013f7d":"# there are much more debit transactions than credit ones.\n\nsns.countplot(x = 'movement', data = df, palette = 'magma')\nplt.title('count of transactions by movement type');","7c8d9ebb":"plt.figure(figsize=[15, 5])\n\n# the left plot\nplt.subplot(1,2,1)\nsns.countplot(y = 'day', data = df, palette = 'magma')\nplt.title('count of transactions by day of week')\n\n# the right plot\nplt.subplot(1,2,2)\nsns.countplot(x = 'month', data = df, palette = 'magma')\nplt.title('count of transactions by month');","bc060869":"# these are histograms of my numeric variables.\ndf.hist(figsize=(10,8));","812758e8":"df.describe(datetime_is_numeric=True , percentiles = [0.75, 0.90, 0.95, 0.99])","7ab85d33":"plt.figure(figsize=[15,4])\nbinsize = 10\nbins = np.arange(-100, df['amount'].max()+binsize, binsize)\nplt.hist(data = df, x = 'amount', bins = bins)\nplt.xlabel('transaction amount');","77501420":"plt.figure(figsize=[8, 5])\n\nbin_edges = np.arange(-10, 350+1,1)\nplt.hist(data = df, x = 'amount', bins = bin_edges)\nplt.xlim(-10, 350)\nplt.xlabel('transaction amount');","dc67fab9":"sns.catplot(x=\"gender\", y=\"amount\", kind=\"bar\", data=df.query('amount <= 350') , palette = 'magma')\nplt.title('average transaction amount per gender');","00c067b7":"# scatterplot\nsns.catplot(x=\"gender\", y = 'amount', data=df.query('amount <= 350'), palette = 'magma')\nplt.title('transaction amount per gender');","6b5fb77f":"sns.catplot(x=\"month\", y=\"amount\", kind=\"bar\", data=df.query('amount <= 350') , palette = 'magma')\nplt.title('average transaction amount per month')\nsns.catplot(x=\"month\", y=\"amount\", kind=\"point\", data=df.query('amount <= 350'));","800ede82":"sns.catplot(x=\"month\", y = 'amount', data=df.query('amount <= 350'), palette = 'magma')\nplt.title('transaction amount per gender');","4e546503":"sns.catplot(x=\"month\", y=\"amount\", hue=\"gender\",kind=\"point\", data=df.query('amount <= 350'), palette = 'magma')\nplt.title('average transaction amount by month per gender');","a8f055fa":"sns.catplot(y=\"day\", x=\"amount\", kind=\"bar\", data=df.query('amount <= 350'), palette = 'magma')\nplt.title('average transaction amount by week of the day')\nsns.catplot(y=\"day\", x=\"amount\", kind=\"point\", data=df.query('amount <= 350'));","b5552759":"sns.catplot(y=\"day\", x=\"amount\", hue=\"gender\",kind=\"point\", data=df.query('amount <= 350'), palette = 'magma')\nplt.title('average transaction amount by weekday per gender');","4f28bea0":"sns.catplot(y=\"day\", x=\"amount\",hue='month', kind=\"bar\", data=df.query('amount <= 350'), palette = 'magma')\nplt.title('transaction amount by week of the day per month');","80479023":"# min and max amount of transactions in each state\ndf.groupby('merchant_state')['amount'].agg(['min' , 'max'])","80ba5fdf":"sns.catplot(x=\"merchant_state\", y = 'amount', data=df.query('amount <= 350'), palette = 'magma')\nplt.title('transaction amount per state');","a42bb76e":"sns.catplot(x=\"merchant_state\", y=\"amount\", kind=\"bar\", data=df.query('amount <= 350') , palette = 'magma')\nplt.title('average transaction amount per state')\nsns.catplot(x=\"merchant_state\", y=\"amount\", kind=\"point\", data=df.query('amount <= 350'));","aadab593":"sns.catplot(y=\"merchant_state\", x=\"amount\", hue=\"gender\",kind=\"point\", data=df.query('amount <= 350'), palette = 'magma')\nplt.title('average transaction amount by state per gender');","c8c5790e":"sns.distplot(df['age']);","909c7213":"sns.relplot(x='age' , y='amount', kind=\"line\" , data=df.query('amount <= 350'));","6be70a4f":"sns.catplot(x=\"movement\", y=\"amount\", kind=\"bar\", data=df , palette = 'magma')\nplt.title('average transaction amount per movement')\nsns.catplot(x=\"movement\", y=\"amount\", kind=\"point\", data=df, join=False);","be39ddd6":"sns.catplot(x=\"status\", y=\"amount\", kind=\"bar\", data=df.query('amount <= 350') , palette = 'magma')\nplt.title('average transaction amount per status of transaction')\nsns.catplot(x=\"status\", y=\"amount\", kind=\"point\", data=df.query('amount <= 350'), join=False);","7ceb9ee1":"sns.catplot(x=\"movement\", y=\"amount\", hue=\"gender\",kind=\"point\", data=df, palette = 'magma', join=False)\nplt.title('average transaction amount by movement per gender');","02466e7e":"sns.catplot(y=\"txn_description\", x=\"amount\", kind=\"bar\", data=df.query('amount <= 350') , palette = 'magma')\nplt.title('average transaction amount per mode of transaction')\nsns.catplot(y=\"txn_description\", x=\"amount\", kind=\"point\", data=df.query('amount <= 350'), join=False);","70936d68":"# customers of the 10 highest transaction amounts\ndf1 = df.loc[df.amount.sort_values(ascending =False)[:10].index]\nsns.catplot(y=\"customer_id\", x=\"amount\", kind=\"bar\", data=df1 , palette = 'magma');","f2ec437d":"# cutomers with the highest number of transactions\ndf2 = df.loc[df['customer_id'].isin(df.customer_id.value_counts()[:10].index)]\nsns.countplot(y = 'customer_id', data=df2 , palette = 'magma');","f11bda8b":"# total transactions amounts for the customers with highest number of transactions\ndf2.groupby('customer_id')['amount'].sum().plot.bar(color = 'pink', alpha = 0.8);","2b7f468b":"# most spending customers\ndf.groupby('customer_id')['amount'].sum().sort_values(ascending=False)[:10].plot.bar(color = 'pink', alpha = 0.8);","6c69d726":"highest_transactions_customers = df1.customer_id.value_counts().index.tolist()","f9fc23d9":"most_dealing_customers = df2.customer_id.value_counts().index.tolist()","a62a8ede":"most_spending_customers = df.groupby('customer_id')['amount'].sum().sort_values(ascending=False)[:10].index.tolist()","a20a2b50":"# no customer belongs to top 10 : most spending customers, highest transations made, and highest number of transactions.\nset(highest_transactions_customers).intersection(most_dealing_customers, most_spending_customers)","2cd639d9":"# this customer did the 4th highest transaction amount and ranked 9th in the customers who made the most transactions.\nset(highest_transactions_customers).intersection(most_dealing_customers)","192222b9":"# this customer did the highest transaction amount and is the thirst most spending customer\nset(highest_transactions_customers).intersection(most_spending_customers)","20ab0a91":"# this customer did more transactions than all others, and is the 9th most spending customer.\nset(most_dealing_customers).intersection(most_spending_customers)","8e8fb74e":"sns.heatmap(df[['amount', 'balance']].corr(), annot = True, fmt = '.3f',\n           cmap = 'vlag_r', center = 0)\nplt.show()","52f43470":"df.to_csv('ANZ-data.csv', index = False)","5d0be0f3":"the transaction amount looks normally distributed but long-tailed due to outliers. But with the use of axis limits, we are able to see the normal distribution clearly.","caa2b86a":"## Transaction amount analysis","34efffa6":"- the highest amounts are made by men\n- the amount of transactions made by men are higher on average.","237904d6":"## Univariate analysis\n\nFirst, a univariate analysis for my categorical variables.","007604f8":"- the amount of transactions is the lowest on weekend Saturday.\n- the transactions with the highest amounts happen mostly on Monday.","6c9f4e66":"women's transaction amounts are higher than men in the state of TAS and ACT","0cc1fc74":"### Amount by month","27fd0484":"### Amount by transaction type","bfac7670":"the highest amounts of transactions are made by customers of age between 40 and 45.","73d8c274":"- small amount transactions are debit and authorised transactions.\n- high amount transactions are credit and posted transactions.","5acb0c61":"### LinkedIn : https:\/\/www.linkedin.com\/in\/imenekolli\/\n\n### Github : https:\/\/github.com\/imene-swaan","cefc7ac6":"let's get rid of the outliers by limiting the x axis","e1147911":"October has higher transaction amounts than Auguest and September.","b6c9f95e":"currency column should be dropped.","eaba47f4":"only on Sunday do women have almost the same amount of transaction as men.","558570f7":"### 1. Data cleaning","b62751b9":"- Phone bank transactions are the ones with the highest amount in transactions.","24dd5f10":"### Amount by location","361297ac":"- Wednesday and Friday are the days with the most number of transactions.\n- Monday scored the lowest number of transactions\n- the difference in the number of transactions between the months is not significants","539d2353":"- There seem to be some outliers in amount, age, and balance columns.","7121edf7":"<a id='intro'><\/a>\n## Introduction\n\n> This task is based on a synthesised transaction dataset containing 3 months\u2019 worth of transactions for 100 hypothetical customers. It contains purchases, recurring transactions, and salary transactions.\nThe dataset is designed to simulate realistic transaction behaviours that are observed in ANZ\u2019s real transaction data, so many of the insights you can gather from the tasks below will be genuine.","6a7e7595":"this is a categorical scatterplot showing the transaction amount for each gender.","e13c122d":"There is no significant relation between the balance and transaction amount.","5eed1969":"### Amount and Customers","476a7948":"- transaction_id has 12043 unique values. it won't be significant in my analysis so I will drop it.\n- there is 100 customers in the dataset. However, there are only 80 unique first names. I decided to drop the first name columns because the customer_id is more accurate.\n- because each customer has a unique account. I will only keep the customer_id column and drop account column.\n- for the location based analysis, I will rely merchat_state. I will drop long_lat, merchant_suburb, and merchant_long_lat.\n- there are 5725 merchants. the highest number of transactions by merchant is 14 only, meaning the merchant_id won't significantly have an impact on the amount of the transaction. I will drop for now.","e9f62cb9":"### Amount and Balance","c2287534":"### Amount by  Age","b168a079":"outliers in the transaction amount happen in all three months. ","e8258e74":"# Project: ANZ synthesised transaction Dataset\n## by Imene KOLLI","cdb0273b":"### Amount by gender","888a1621":"### Amount by day","53bc3562":"- males have higher transaction amounts.\n- October is the month with the highest transaction amounts for both genders.","ac4aeced":"Next, an analysis for the numeric variables.","e195e895":"# IMENE KOLLI","18b5fb09":"this is a barplot showing the average amount of transactions for each gender. with a confidence interval displayed as error bars."}}