{"cell_type":{"20350da6":"code","8cb31c65":"code","08b2ec7f":"code","21b8cdea":"code","aaea79f5":"code","4191bd3a":"code","60c3a3b4":"code","a7616909":"code","846bf97d":"code","929fd60c":"code","bceff5d2":"code","155d499f":"code","861bdf66":"code","2a4c5196":"code","e66e771b":"code","cb17e327":"code","41c9579e":"code","279728bb":"code","86ab4be1":"code","9563d88c":"code","d5a78ab3":"code","a546a4dc":"code","05d4b21a":"code","390ecf21":"code","30321c0a":"code","50db38ff":"code","54305a53":"code","92a042f2":"code","41f86dfb":"code","f10c8eed":"code","ce56f602":"code","93ebbfa6":"code","2184fd1a":"code","f89c44b6":"code","a048b9e9":"code","3ab45074":"code","fa2c19c7":"code","217c0ef8":"code","33d7a99f":"code","65e80882":"code","1fc6e118":"code","5d852b8c":"code","25e45833":"code","4af1280f":"code","22270e5e":"code","711b6456":"code","fac16b5d":"code","d2c9c013":"code","40fb49ea":"code","106b54ce":"code","316977b4":"code","789b518a":"code","f3d577f9":"code","37785bdf":"code","578a42dc":"code","b9ba8302":"code","ef280bf3":"code","6a6717ff":"code","841373a8":"code","6be8e04f":"code","e06a9107":"code","5941a01e":"code","2d9f5e3d":"code","fc6cd1a1":"code","dea0fd7d":"code","88ce793f":"code","14d0e64e":"code","3bcdf736":"code","0d118b0d":"code","0659b6ec":"code","a87f01a3":"code","eac12cba":"code","ca5e3521":"code","41696822":"code","882e4811":"code","c8ae1b5f":"code","402f68de":"code","d945c9e6":"code","1e6b8023":"code","2d2c1c6c":"code","0295a4e7":"code","95855921":"code","b80736fe":"code","66287b07":"code","164d58dc":"code","58a86cd0":"markdown","52ca7fd0":"markdown","2bfa9d56":"markdown","082281b8":"markdown","dc164f2d":"markdown","ded0f070":"markdown","f0cddb17":"markdown","5545e5cb":"markdown","656bb519":"markdown","61238130":"markdown","1609d2a7":"markdown","ae4dd774":"markdown","73c63b74":"markdown","6d11e9c9":"markdown","3bd93260":"markdown","f6e5375d":"markdown","59984934":"markdown","193e0b3c":"markdown","9315a8a2":"markdown","8de897a3":"markdown","fe5f2d88":"markdown","ad49140b":"markdown","d68c5601":"markdown","320139ba":"markdown","1aee0c9a":"markdown","d36e49c3":"markdown","09130581":"markdown","c24cbb92":"markdown","8be77c4f":"markdown","a1ea7d15":"markdown","566487e1":"markdown","a21520e0":"markdown","8c6ac663":"markdown","98164f4e":"markdown","d491b3de":"markdown","ce6f0a72":"markdown","02c14c88":"markdown","348cc01f":"markdown","5eec3ca2":"markdown","c9ee9f29":"markdown","8ad792c1":"markdown","0efa40e6":"markdown","5fd88796":"markdown","0989ec4b":"markdown","984ae98b":"markdown","8f7cd794":"markdown","6356dfb8":"markdown","4f607aa8":"markdown","70ea124b":"markdown"},"source":{"20350da6":"# This Python 3 environment comes with many helpful analytics libraries installed\n# It is defined by the kaggle\/python Docker image: https:\/\/github.com\/kaggle\/docker-python\n# For example, here's several helpful packages to load\n\nimport numpy as np # linear algebra\nimport pandas as pd # data processing, CSV file I\/O (e.g. pd.read_csv)\nimport altair as alt\n#enable altair to plot all the data\nalt.data_transformers.disable_max_rows()\nalt.themes.enable('fivethirtyeight')\n\n# Input data files are available in the read-only \"..\/input\/\" directory\n# For example, running this (by clicking run or pressing Shift+Enter) will list all files under the input directory\n\nimport os\nfor dirname, _, filenames in os.walk('\/kaggle\/input'):\n    for filename in filenames:\n        print(os.path.join(dirname, filename))\n\n# You can write up to 20GB to the current directory (\/kaggle\/working\/) that gets preserved as output when you create a version using \"Save & Run All\" \n# You can also write temporary files to \/kaggle\/temp\/, but they won't be saved outside of the current session","8cb31c65":"# Load the data\ndf_survey_responses = pd.read_csv(\"\/kaggle\/input\/kaggle-survey-2020\/kaggle_survey_2020_responses.csv\")\ndf_multi_choice = pd.read_csv(\"\/kaggle\/input\/kaggle-survey-2019\/multiple_choice_responses.csv\")","08b2ec7f":"df_survey_responses['Q3'].unique()","21b8cdea":"def abbreviate_nations(df):\n    df = df.drop(0, axis=0)\n    #shorten longest country names\n    df.loc[df['Q3']==\"United Kingdom of Great Britain and Northern Ireland\", \"Q3\"] = \"United Kingdom\"\n    df.loc[df['Q3']==\"Iran, Islamic Republic of...\", \"Q3\"] = \"Iran\"\n    df.loc[df['Q3']==\"Republic of Korea\", \"Q3\"] = \"South Korea\"\n    \n    return df","aaea79f5":"col_list = df_survey_responses.columns.to_list()\ncol_list\n#create a mapping dict from question id to question content\nquestion_mapping = df_survey_responses.loc[0].to_dict()\nprint(question_mapping)\n\ndf_survey_responses = abbreviate_nations(df_survey_responses)\ndf_multi_choice = abbreviate_nations(df_multi_choice)","4191bd3a":"country_2019 = df_multi_choice.groupby(['Q3'])\ndf_country_2019 = country_2019.agg('count')\ndf_country_2019.reset_index(inplace=True)\ndf_country_2019=df_country_2019[['Q3', 'Q1']]\ndf_country_2019.columns=('Country', 'Count')\ndf_country_2019['year'] = 2019\ndf_country_2019.tail()","60c3a3b4":"country = df_survey_responses.groupby(['Q3'])\ndf_country = country.agg('count')\ndf_country.reset_index(inplace=True)\ndf_country=df_country[['Q3', 'Q1']]\ndf_country.columns=('Country', 'Count')\ndf_country['year'] = 2020\ndf_country.tail()","a7616909":"df_country_comparison = df_country.append(df_country_2019).reset_index(drop=True)\ndf_country_comparison.tail()","846bf97d":"def chart_country(df, sort=None):\n    chart_country_groups = alt.Chart(df_country).mark_bar().encode(\n    alt.X('Country:N', sort=sort, axis=alt.Axis(grid=False)),\n    alt.Y('Count:Q', title=\"Count of Responses\", axis=alt.Axis(grid=False))\n    ).properties(width=680,\n    background='#f5f5f5',title={\n\"text\": [\"Number of Respondents per Country\"],\n\"fontSize\":20, \"fontWeight\":600, \"subtitleFontSize\":14\n}\n    )\n    \n    return chart_country_groups\n\nchart_country_groups = chart_country(df_country)","929fd60c":"#countries sorted by count\ndf_country = df_country.sort_values(by=['Count'], ascending=False)\ncountry_sort = df_country['Country'].to_list()\nchart_country_groups = chart_country(df_country)\n\nchart_country_groups","bceff5d2":"df_country_count_by_year = df_country.merge(df_country_2019, left_on='Country', right_on='Country',\n          suffixes=(None, '_2019'))\ndf_country_count_by_year.tail()","155d499f":"import matplotlib\nimport matplotlib.pyplot as plt\n\n#labels = ['G1', 'G2', 'G3', 'G4', 'G5']\n#year_2019 = df_country_comparison.loc[df_country_comparison['year']==2019, \"C\"]\n#women_means = [25, 32, 34, 20, 25]\n\nx = np.arange(len(df_country_count_by_year['Country']))  # the label locations\nwidth = 0.35  # the width of the bars\n\nfig, ax = plt.subplots(figsize=(15, 6))\n\nrects1 = ax.bar(x - width\/2, df_country_count_by_year['Count_2019'], width, label='2019')\nrects2 = ax.bar(x + width\/2, df_country_count_by_year['Count'], width, label='2020')\n\n # Add some text for labels, title and custom x-axis tick labels, etc.\nax.set_ylabel('Responses', fontsize=14)\nax.set_xlabel('Country', fontsize=14)\nax.set_title('Survey Responses by Country and Year', fontsize=18)\nax.set_xticks(x)\nax.set_xticklabels(df_country_count_by_year['Country'])\nax.set_facecolor('k')\nax.patch.set_alpha(0.25)\nplt.xticks(rotation=90)\nfig.patch.set_alpha(0.5)\nax.legend()\nax.annotate('Responses from India increased', xy=(0.5, 4250), xytext=(3, 4500),\n            arrowprops=dict(facecolor='black'),\n            )\nax.annotate('Responses from the USA decreased', xy=(1.5, 2000), xytext=(4, 2250),\n            arrowprops=dict(facecolor='black'),\n            )\n\n\n\n#fig.tight_layout()\nplt.show()","861bdf66":"df_country_count_by_year['yoy_change_pct'] = 100 * (df_country_count_by_year['Count'] - df_country_count_by_year['Count_2019']) \/ df_country_count_by_year['Count_2019']","2a4c5196":"alt.Chart(df_country_count_by_year).mark_bar().encode(\n    alt.X('Country:N', axis=alt.Axis(grid=False, labelAngle=270)),\n    alt.Y('yoy_change_pct:Q', title=\"Year-on-Year Change in Responses %\", axis=alt.Axis(grid=False)),\n    color=alt.condition(\n        alt.datum.yoy_change_pct > 0,\n        alt.value(\"steelblue\"),  # The positive color\n        alt.value(\"orange\")  # The negative color\n    )\n).properties(width=680,\n    background='#f5f5f5',title={\n\"text\": [\"% Year-on-Year Change in Responses by Country from 2019 to 2020\"],\n\"fontSize\":20, \"fontWeight\":600, \"subtitleFontSize\":14\n}\n    )\n","e66e771b":"import pycountry\nimport plotly.express as px\n\ncountries, counts = np.unique(df_country_count_by_year['Country'].values.tolist(), return_counts=True)\n\ncountries_w_codes = {}\nfor country in pycountry.countries:\n    countries_w_codes[country.name] = country.alpha_3\n\ncodes = [countries_w_codes.get(country, f'{country}') for country in countries]","cb17e327":"'''\nThere are some countries with no code in the list setting them manually:\n\n'Iran, Islamic Republic of...' -> 'Iran, Islamic Republic of': 'IRN',\n'Republic of Korea' ->  \"Korea, Democratic People's Republic of\"-> 'PRK'\n'Russia' -> 'Russian Federation': 'RUS',\n'South Korea' -> 'Korea, Republic of' -> 'KOR'\n'Taiwan' -> 'Taiwan, Province of China': 'TWN'\n'United Kingdom of Great Britain and Northern Ireland' -> 'United Kingdom': 'GBR'\n'United States of America' -> 'United States': 'USA'\n'''\n\ncorrected_codes = {'Iran': 'IRN', 'Republic of Korea': 'PRK',\n                   'Russia': 'RUS', 'South Korea': 'KOR', 'Taiwan': 'TWN',\n                   'United Kingdom of Great Britain and Northern Ireland': 'GBR',\n                   'United States of America': 'USA'}\n\ncodes_crr = []\nfor code in codes:\n    if code in corrected_codes.keys():\n        codes_crr.append(corrected_codes[code])\n    else:\n        codes_crr.append(code)\n        \ncountry_codes ={}\nfor country, code in zip(countries, codes_crr):\n    country_codes[country] = code","41c9579e":"country_alterations ={'Nepal': 'NPL', 'Sri Lanka':'LKA', 'United Arab Emirates':'ARE', 'Ghana':'GHA'}\ncountry_codes.update(country_alterations)\ncountry_codes","279728bb":"df_country_count_by_year['country_code'] = df_country_count_by_year['Country']\ndf_country_count_by_year.replace({\"country_code\": country_codes}, inplace=True)\ndf_country_count_by_year['yoy_change_pct'] = np.round(df_country_count_by_year['yoy_change_pct'],1)\ndf_country_count_by_year","86ab4be1":"fig = px.choropleth(data_frame=df_country_count_by_year,\n                    locations='country_code',\n                    color='yoy_change_pct',\n                    color_continuous_scale=\"turbo\",\n                    range_color=(-40, 100),\n                    hover_name='Country', # column to add to hover information\n                    title='% Year-on-year change in Survey Responses')\nfig.show()","9563d88c":"age_country = df_survey_responses.groupby(['Q1', 'Q3'])\ndf_age_country = age_country.agg('count')\ndf_age_country.reset_index(inplace=True)\ndf_age_country=df_age_country[['Q1', 'Q3', 'Q2']]\ndf_age_country.columns=('Age', 'Country', 'Count')\ndf_age_country['LogCount'] = np.log(df_age_country['Count'])\n\n#sort by count\ndf_age_country = df_age_country.sort_values(by=['Count'], ascending=False)\n\ndf_age_country.head()","d5a78ab3":"alt.Chart(df_age_country).mark_rect().encode(\n    alt.X('Country:N', sort=None, title=\"Country sorted by descending count of aggregate responses\"),\n    alt.Y('Age:N'),\n    color=alt.Color('LogCount:Q', legend=alt.Legend(title=\"Log Count of Respondents\", orient=\"top\"))\n).properties(width=680,\n    background='#f5f5f5',title={\n\"text\": [\"Age of Respondents\"],\n\"subtitle\": [\"Broken Down by Country\"],\n\"fontSize\":20, \"fontWeight\":600, \"subtitleFontSize\":14\n}\n)","a546a4dc":"df_age_country = df_age_country.merge(df_country, left_on='Country', right_on='Country',\n          suffixes=(None, '_total'))\n#df_age_country['age_group_pct'] = df_age_country['Count'] \/ df_age_country['Count_total']\n\ndf_age_country","05d4b21a":"df_age_country['age_group_pct'] = 100 * df_age_country['Count'] \/ df_age_country['Count_total']\ndf_age_country","390ecf21":"alt.Chart(df_age_country).mark_rect().encode(\n    alt.X('Country:N', sort=None, title=\"Country sorted by descending count of aggregate responses\"),\n    alt.Y('Age:N'),\n    color=alt.Color('age_group_pct:Q', legend=alt.Legend(title=\"% of Respondents\", orient=\"top\"))\n).properties(width=680,\n    background='#f5f5f5',title={\n\"text\": [\"Age of Respondents\"],\n\"subtitle\": [\"Broken Down proportionally by Country\"],\n\"fontSize\":20, \"fontWeight\":600, \"subtitleFontSize\":14\n}\n)","30321c0a":"df_age_country_under_25 = df_age_country.loc[df_age_country['Age'].isin(['18-21', '22-24'])]\n\nunder_25 = df_age_country_under_25.groupby(['Country'])\ndf_under_25 = under_25.agg('sum')\ndf_under_25.reset_index(inplace=True)\ndf_under_25=df_under_25[['Country', 'age_group_pct']]\ndf_under_25.columns=('Country', 'pct_under_25')\n\ndf_under_25['pct_under_25'] = round(df_under_25['pct_under_25'],1)\n\ndf_under_25['country_code'] = df_under_25['Country']\ndf_under_25.replace({\"country_code\": country_codes}, inplace=True)\n\ndf_under_25","50db38ff":"fig = px.choropleth(data_frame=df_under_25,\n                    locations='country_code',\n                    color='pct_under_25',\n                    color_continuous_scale=\"agsunset\",\n                    range_color=(0, 75),\n                    hover_name='Country', # column to add to hover information\n                    title='% Respondents under 25 years of Age')\nfig.show()","54305a53":"# large violinplots in Altair can look good but can be computationally intensive and it may be better to consider using matplotlib\/seaborn\n# altair usually limits input sources to 5000 rows but I have overriden that setting\n# the code commented below produces the chart below, but the chart is loaded from a saved image that uses less memory\n\n# alt.Chart(df_survey_responses).transform_density(\n#     'Time from Start to Finish (seconds)',\n#     as_=['Time from Start to Finish (seconds)', 'density'],\n#     extent=[0, 3000],\n#     groupby=['Q1']\n# ).mark_area(orient='horizontal').encode(\n#     y=alt.Y('Time from Start to Finish (seconds):Q', title=''),\n#     color=alt.Color('Q1:N', legend=alt.Legend(title=\"Age\", orient=\"top\")),\n#     x=alt.X(\n#         'density:Q',\n#         stack='center',\n#         impute=None,\n#         title=None,\n#         axis=alt.Axis(labels=False, values=[0],grid=False, ticks=True),\n#     ),\n#     column=alt.Column(\n#         'Q1:N',\n#         header=alt.Header(\n#             titleOrient='bottom',\n#             labelOrient='bottom',\n#             labelPadding=0,\n#         ),\n#     )\n# ).properties(width=80,\n#     background='#f5f5f5',title={\n# \"text\": [\"Survey Response Time in Seconds\"],\n# \"subtitle\": [\"Broken down by Age\"],\n# \"fontSize\":20, \"fontWeight\":600, \"subtitleFontSize\":14\n# }\n# ).configure_facet(\n#     spacing=0\n# ).configure_view(\n#     stroke=None\n# )","92a042f2":"#only top countries\n\nalt.Chart(df_age_country[df_age_country['Country'].isin(country_sort[:9])]).mark_bar(\n    cornerRadiusTopLeft=3,\n    cornerRadiusTopRight=3\n).encode(\n    x=alt.X('Count:Q', stack=\"normalize\", title=\"Normalized Count\"),\n    y=alt.Y('Age:O'),\n    color=alt.Color('Country:N', legend=alt.Legend(orient=\"right\"))\n).properties(width=320,\n             background='#f5f5f5',title={\n\"text\": [\"Age of Respondents\"],\n\"subtitle\": [\"Broken Down proportionally by Country\"],\n\"fontSize\":20, \"fontWeight\":600, \"subtitleFontSize\":14\n})","41f86dfb":"education_country = df_survey_responses.groupby(['Q4', 'Q3'])\ndf_education_country = education_country.agg('count')\ndf_education_country.reset_index(inplace=True)\ndf_education_country=df_education_country[['Q4', 'Q3', 'Q2']]\ndf_education_country.columns=('education', 'country', 'Count')\ndf_education_country['rank'] = df_education_country['education']\neducation_sort_map = {\"Doctoral degree\": 6, 'Master\u2019s degree': 5, \"Professional degree\": 4, 'Bachelor\u2019s degree': 3, \n                  \"Some college\/university study without earning a bachelor\u2019s degree\": 2,\n                  \"No formal education past high school\": 1, \"I prefer not to answer\": 0\n                 }\ndf_education_country['rank'] = df_education_country['rank'].replace(education_sort_map)\ndf_education_country['education_rank'] = df_education_country['rank'].astype(str) + ' - ' + df_education_country['education']","f10c8eed":"alt.Chart(df_education_country).mark_bar(\n    cornerRadiusTopLeft=3,\n    cornerRadiusTopRight=3\n).encode(\n    x=alt.X('country:N'),\n    y=alt.Y('Count:Q', stack=\"normalize\", title=\"Normalized Count\"),\n    color=alt.Color('education_rank:N', legend=alt.Legend(orient=\"left\"))\n).properties(width=520,\n             background='#f5f5f5',title={\n\"text\": [\"Highest Educational Achievement Held by Respondents\"],\n\"subtitle\": [\"Broken Down proportionally by Country\"],\n\"fontSize\":18, \"fontWeight\":600, \"subtitleFontSize\":14\n})","ce56f602":"platform_options ={'Q37_Part_1': 'Coursera', 'Q37_Part_2': 'edX', 'Q37_Part_3': 'Kaggle Learn Courses',\n                   'Q37_Part_4': 'DataCamp', 'Q37_Part_5': 'Fast.ai', 'Q37_Part_6': 'Udacity',\n                   'Q37_Part_7': 'Udemy', 'Q37_Part_8': 'LinkedIn Learning', 'Q37_Part_9': 'Cloud-certification programs (direct from AWS, Azure, GCP, or similar)',\n                   'Q37_Part_10': 'University Courses (resulting in a university degree)', 'Q37_Part_11': 'None', 'Q37_OTHER': 'Other',\n                  }\n\nfor key in platform_options:\n    ed_platform = df_survey_responses.groupby([key, 'Q3'])\n    df_ed_platform = ed_platform.agg('count')\n    df_ed_platform.reset_index(inplace=True)\n    df_ed_platform = df_ed_platform[[key, 'Q3', 'Q2']]\n    df_ed_platform.columns = ('Platform', 'country', 'Count')\n    if key=='Q37_Part_1':\n        df_ed_platform_full = df_ed_platform\n    else:\n        df_ed_platform_full = df_ed_platform_full.append(df_ed_platform)\n        \n\n#shorten longest country names\ndf_ed_platform_full.loc[df_ed_platform_full['Platform']==\"Cloud-certification programs (direct from AWS, Azure, GCP, or similar)\", \"Platform\"] = \"Cloud-certification programs\"\ndf_ed_platform_full.loc[df_ed_platform_full['Platform']==\"University Courses (resulting in a university degree)\", \"Platform\"] = \"University Courses\"\n\ndf_ed_platform_full['logCount'] = np.log(df_ed_platform_full['Count'])\ndf_ed_platform_full","93ebbfa6":"def platform_altair(df, colorfeat, colortitle):\n    chrt = alt.Chart(df_ed_platform_full).mark_rect().encode(\n        x=alt.X('country:N'),\n        y=alt.Y('Platform:N'),\n        color=alt.Color(colorfeat, legend=alt.Legend(orient=\"bottom\"), title=colortitle)\n    ).properties(width=600, height=200,\n                 background='#f5f5f5',title={\n    \"text\": [\"Online Platforms Used by Respondents\"],\n    \"fontSize\":18, \"fontWeight\":600, \"subtitleFontSize\":14\n    })\n    \n    return chrt","2184fd1a":"chrt = platform_altair(df_ed_platform_full, 'Count:Q', 'Count')\nchrt","f89c44b6":"log_chrt = platform_altair(df_ed_platform_full, 'logCount:Q', 'Log Count')\nlog_chrt","a048b9e9":"df_ed_platform_full = df_ed_platform_full.merge(df_country, left_on='country', right_on='Country',\n          suffixes=(None, '_total'))\ndf_ed_platform_full['platform_pct'] = round(100 * df_ed_platform_full['Count'] \/ df_ed_platform_full['Count_total'],1)\ndf_ed_platform_full","3ab45074":"pct_chrt = platform_altair(df_ed_platform_full, 'platform_pct:Q', '% in Country')\npct_chrt","fa2c19c7":"df_ed_platform_full.loc[df_ed_platform_full['Country']=='Belarus']","217c0ef8":"job_country = df_survey_responses.groupby(['Q5', 'Q3'])\ndf_job_country = job_country.agg('count')\ndf_job_country.reset_index(inplace=True)\ndf_job_country=df_job_country[['Q5', 'Q3', 'Q2']]\ndf_job_country.columns=('job', 'country', 'Count')","33d7a99f":"alt.Chart(df_job_country).mark_bar(\n    cornerRadiusTopLeft=3,\n    cornerRadiusTopRight=3\n).encode(\n    x=alt.X('country:N'),\n    y=alt.Y('Count:Q', stack=\"normalize\", title=\"Normalized Count\"),\n    color=alt.Color('job:N', legend=alt.Legend(orient=\"left\"))\n).properties(width=550,\n             background='#f5f5f5',title={\n\"text\": [\"Job Titles Held by Respondents\"],\n\"subtitle\": [\"Broken Down proportionally by Country\"],\n\"fontSize\":18, \"fontWeight\":600, \"subtitleFontSize\":14\n})","65e80882":"df_job_proportions = df_job_country.merge(df_country, left_on='country', right_on='Country',\n          suffixes=(None, '_total'))\ndf_job_proportions.drop(columns=['country'], inplace=True)\ndf_job_proportions['job_proportion'] = df_job_proportions['Count'] \/ df_job_proportions['Count_total']\ndf_job_proportions","1fc6e118":"df_job_proportions_data_scientists = df_job_proportions.loc[df_job_proportions['job']==\"Data Scientist\"]\ndf_job_proportions_data_scientists","5d852b8c":"alt.Chart(df_job_proportions_data_scientists).mark_bar(color=\"grey\").encode(\n    alt.Y('Country:N', axis=alt.Axis(grid=False)),\n    alt.X('job_proportion:Q', title=\"Proportion of Respondents\", axis=alt.Axis(grid=False))\n    ).properties(width=480, height=500,\n    background='#f5f5f5',title={\n\"text\": [\"Proportion of Respondents who are Data Scientists\"],\n\"subtitle\": [\"Broken Down by Country\"],\n\"fontSize\":20, \"fontWeight\":600, \"subtitleFontSize\":14\n})\n","25e45833":"experience_country = df_survey_responses.groupby(['Q6', 'Q3'])\ndf_experience_country = experience_country.agg('count')\ndf_experience_country.reset_index(inplace=True)\ndf_experience_country=df_experience_country[['Q6', 'Q3', 'Q2']]\ndf_experience_country.columns=('experience', 'country', 'Count')\n\ndf_experience_country['rank'] = df_experience_country['experience']\nexperience_sort_map = {\"20+ years\": 6, '10-20 years': 5, \"5-10 years\": 4, '3-5 years': 3, \n                  \"1-2 years\": 2,\n                  \"< 1 years\": 1, \"I have never written code\": 0\n                 }\ndf_experience_country['rank'] = df_experience_country['rank'].replace(experience_sort_map)\ndf_experience_country['experience_rank'] = df_experience_country['rank'].astype(str) + ' - ' + df_experience_country['experience']\ndf_experience_country","4af1280f":"alt.Chart(df_experience_country).mark_bar(\n    cornerRadiusTopLeft=3,\n    cornerRadiusTopRight=3\n).encode(\n    y=alt.Y('country:N', axis=alt.Axis(grid=False, titleAngle=0)),\n    x=alt.X('Count:Q', stack=\"normalize\", title=\"Normalized Count\"),\n    color=alt.Color('experience_rank:N', legend=alt.Legend(orient=\"bottom\"), title=\"Years of Experience\")\n).properties(width=480, height=520,\n             background='#f5f5f5',title={\n\"text\": [\"Years of Experience\"],\n\"subtitle\": [\"Broken Down proportionally by Country\"],\n\"fontSize\":18, \"fontWeight\":600, \"subtitleFontSize\":14\n})","22270e5e":"prog_lang_country = df_survey_responses.groupby(['Q8', 'Q3'])\ndf_prog_lang_country = prog_lang_country.agg('count')\ndf_prog_lang_country.reset_index(inplace=True)\ndf_prog_lang_country=df_prog_lang_country[['Q8', 'Q3', 'Q2']]\ndf_prog_lang_country.columns=('prog_lang', 'country', 'Count')\n#sort by count\ndf_prog_lang_country = df_prog_lang_country.sort_values(by=['Count'], ascending=False)\ndf_prog_lang_country.head()","711b6456":"def prog_lang_country(df, title):\n    selection = alt.selection_multi(fields=['prog_lang'], bind='legend')\n    \n    chart_prog_lang_country = alt.Chart(df).mark_bar(\n    ).encode(\n        y=alt.Y('country:N', axis=alt.Axis(grid=False, titleAngle=0)),\n        x=alt.X('Count:Q', stack=\"normalize\", title=\"Normalized Count\"),\n        color=alt.Color('prog_lang:N', legend=alt.Legend(orient=\"bottom\"), title=\"Programming Language\"),\n        opacity=alt.condition(selection, alt.value(1), alt.value(0.2))\n    ).properties(width=480, height=500,\n                 background='#f5f5f5',title={\n    \"text\": [title],\n    \"subtitle\": [\"Broken Down proportionally by Country\"],\n    \"fontSize\":18, \"fontWeight\":600, \"subtitleFontSize\":14\n    }).add_selection(\n    selection\n    )\n    \n    return chart_prog_lang_country","fac16b5d":"prog_lang_country(df_prog_lang_country, \"Recommended Starting Programming Language for Data Science\")","d2c9c013":"platform_country = df_survey_responses.groupby(['Q11', 'Q3'])\ndf_platform_country = platform_country.agg('count')\ndf_platform_country.reset_index(inplace=True)\ndf_platform_country=df_platform_country[['Q11', 'Q3', 'Q2']]\ndf_platform_country.columns=('platform', 'country', 'Count')\n#sort by count\ndf_platform_country = df_platform_country.sort_values(by=['Count'], ascending=False)\ndf_platform_country.head()","40fb49ea":"def platform_country_chart(df, title):\n    chart_platform_country = alt.Chart(df).mark_bar(\n        cornerRadiusTopLeft=3,\n        cornerRadiusTopRight=3\n    ).encode(\n        y=alt.Y('country:N', axis=alt.Axis(grid=False, titleAngle=0)),\n        x=alt.X('Count:Q', stack=\"normalize\", title=\"Normalized Count\"),\n        color=alt.Color('platform:N', legend=alt.Legend(orient=\"top\"), title=\"Platform\")\n    ).properties(width=400, height=500,\n                 background='#f5f5f5',title={\n    \"text\": [title],\n    \"subtitle\": [\"Broken Down proportionally by Country\"],\n    \"fontSize\":18, \"fontWeight\":600, \"subtitleFontSize\":14\n    })\n    \n    return chart_platform_country","106b54ce":"alt.themes.enable('vox')\nplatform_country_chart(df_platform_country, \"Preferred Platform for Data Science\")","316977b4":"df_platform_country = df_platform_country.loc[df_platform_country['platform']!=\"A personal computer or laptop\"]\nalt.themes.enable('vox')\nplatform_country_chart(df_platform_country, \"Preferred Platform for Data Science (excluding pc's)\")","789b518a":"tpu_country = df_survey_responses.groupby(['Q13', 'Q3'])\ndf_tpu_country = tpu_country.agg('count')\ndf_tpu_country.reset_index(inplace=True)\ndf_tpu_country=df_tpu_country[['Q13', 'Q3', 'Q2']]\ndf_tpu_country.columns=('tpu_usage', 'country', 'Count')\n#sort by count\ndf_tpu_country = df_tpu_country.sort_values(by=['Count'], ascending=False)\ndf_tpu_country.head()\n\ndf_tpu_country['rank'] = df_tpu_country['tpu_usage']\ntpu_sort_map = {\"More than 25 times\": 0, '6-25 times': 1, \n                  \"2-5 times\": 2,\n                  \"Once\": 3, \"Never\": 4\n                 }\ndf_tpu_country['rank'] = df_tpu_country['rank'].replace(tpu_sort_map)\ndf_tpu_country['tpu_usage_rank'] = df_tpu_country['rank'].astype(str) + ' - ' + df_tpu_country['tpu_usage']","f3d577f9":"alt.themes.enable('latimes')\nbars = alt.Chart(df_tpu_country).mark_bar(\n        cornerRadiusTopLeft=3,\n        cornerRadiusTopRight=3\n    ).encode(\n        y=alt.Y('country:N', axis=alt.Axis(grid=False, titleAngle=0)),\n        x=alt.X('Count:Q', stack=\"normalize\", title=\"Normalized Count\"),\n        color=alt.Color('tpu_usage_rank:N', legend=alt.Legend(orient=\"top\"), title=\"TPU Usage\")\n    ).properties(width=400, height=500,title={\n    \"text\": [\"TPU Usage\"],\n    \"subtitle\": [\"Broken Down proportionally by Country\"],\n    \"fontSize\":18, \"fontWeight\":600, \"subtitleFontSize\":14\n    })\n\nbars","37785bdf":"ml_country = df_survey_responses.groupby(['Q15', 'Q3'])\ndf_ml_country = ml_country.agg('count')\ndf_ml_country.reset_index(inplace=True)\ndf_ml_country=df_ml_country[['Q15', 'Q3', 'Q2']]\ndf_ml_country.columns=('ml_years', 'country', 'Count')\n#sort by count\ndf_ml_country = df_ml_country.sort_values(by=['Count'], ascending=False)\ndf_ml_country.head()","578a42dc":"df_ml_country['ml_years'].unique()","b9ba8302":"df_ml_country['rank'] = df_ml_country['ml_years']\nml_sort_map = {\"I do not use machine learning methods\": 0, 'Under 1 year': 1, \n                  \"1-2 years\": 2, \"2-3 years\": 3, \"3-4 years\": 4,\n                \"4-5 years\":5, \"5-10 years\":6, \"10-20 years\":7,\n                \"20 or more years\":8\n                  \n                 }\ndf_ml_country['rank'] = df_ml_country['rank'].replace(ml_sort_map)\ndf_ml_country['ml_years_rank'] = df_ml_country['rank'].astype(str) + ' - ' + df_ml_country['ml_years']\n\ndf_ml_country = df_ml_country.sort_values(by=['ml_years_rank'], ascending=False)\n\ndf_ml_country.head()","ef280bf3":"alt.themes.enable('default')\nalt.Chart(df_ml_country).mark_bar().encode(\n        y=alt.Y('country:N', axis=alt.Axis(grid=False, titleAngle=0)),\n        x=alt.X('Count:Q', title=\"Count\"),\n        color=alt.Color('ml_years_rank:N', legend=alt.Legend(orient=\"top\"), title=\"Years using ML methods\")\n    ).properties(width=400, height=500,title={\n    \"text\": [\"Years using ML methods\"],\n    \"subtitle\": [\"Broken Down by Country\"],\n    \"fontSize\":18, \"fontWeight\":600, \"subtitleFontSize\":14\n    }\n    )","6a6717ff":"bars_ml = alt.Chart(df_ml_country).mark_bar(\n        cornerRadiusTopLeft=3,\n        cornerRadiusTopRight=3\n    ).encode(\n        y=alt.Y('country:N', axis=alt.Axis(grid=False, titleAngle=0)),\n        x=alt.X('Count:Q', stack=\"normalize\", title=\"Normalized Count\"),\n        color=alt.Color('ml_years_rank:N', legend=alt.Legend(orient=\"top\"), title=\"Years using ML methods\")\n    ).properties(width=500, height=500,title={\n    \"text\": [\"Years using ML methods\"],\n    \"subtitle\": [\"Broken Down proportionally by Country\"],\n    \"fontSize\":18, \"fontWeight\":600, \"subtitleFontSize\":14\n    })\n\nbars_ml","841373a8":"# Add the country code for a new choropleth map\ndf_ml_country['country_code'] = df_ml_country['country']\ndf_ml_country.replace({\"country_code\": country_codes}, inplace=True)\n\n#merge to get total respondents per country\ndf_ml_country = df_ml_country.merge(df_country, left_on='country', right_on='Country', suffixes=(None, '_total'))","6be8e04f":"df_ml_country['ML_experience_freq_pct'] = 100 * df_ml_country['Count'] \/ df_ml_country['Count_total']\ndf_ml_country","e06a9107":"df_ml_country_5_plus = df_ml_country[df_ml_country['ml_years_rank'].isin(['6 - 5-10 years', '7 - 10-20 years','8 - 20 or more years'])]\ndf_ml_country_5_plus","5941a01e":"df_ml_5_plus = df_ml_country_5_plus.groupby(['country_code'])\ndf_ml_5_plus = df_ml_5_plus.agg('ML_experience_freq_pct').sum().to_frame().reset_index()\ndf_ml_5_plus['ML_experience_freq_pct'] = np.round(df_ml_5_plus['ML_experience_freq_pct'],1)\ndf_ml_5_plus","2d9f5e3d":"fig = px.choropleth(data_frame=df_ml_5_plus,\n                    locations='country_code',\n                    color='ML_experience_freq_pct',\n                    color_continuous_scale=\"agsunset\",\n                    range_color=(0, 25),\n                    hover_name='country_code', # column to add to hover information\n                    title='% Respondents with 5+ years experience of ML Methods')\nfig.show()","fc6cd1a1":"primary_analysis = df_survey_responses.groupby(['Q38', 'Q3'])\ndf_primary_analysis = primary_analysis.agg('count')\ndf_primary_analysis.reset_index(inplace=True)\ndf_primary_analysis=df_primary_analysis[['Q38', 'Q3', 'Q2']]\ndf_primary_analysis.columns=('primary_analysis', 'country', 'Count')\ndf_primary_analysis['logCount'] = np.log(df_primary_analysis['Count'])\n\n#sort by count\ndf_primary_analysis = df_primary_analysis.sort_values(by=['Count'], ascending=False)\ndf_primary_analysis","dea0fd7d":"df_primary_analysis['primary_analysis'].unique()","88ce793f":"df_primary_analysis['primary_analysis_abbr'] = df_primary_analysis['primary_analysis']\nprimary_analysis_sort_map = {'Local development environments (RStudio, JupyterLab, etc.)': 'Local development environments',\n                             'Basic statistical software (Microsoft Excel, Google Sheets, etc.)': 'Basic statistical software',\n                            'Business intelligence software (Salesforce, Tableau, Spotfire, etc.)': 'Business intelligence software',\n                            'Cloud-based data software & APIs (AWS, GCP, Azure, etc.)': 'Cloud-based data software & APIs',\n                            'Advanced statistical software (SPSS, SAS, etc.)': 'Advanced statistical software',\n                 }\ndf_primary_analysis['primary_analysis_abbr'] = df_primary_analysis['primary_analysis_abbr'].replace(primary_analysis_sort_map)\ndf_primary_analysis","14d0e64e":"def analysis_altair(df, colorfeat, colortitle):\n    chrt = alt.Chart(df).mark_rect().encode(\n        x=alt.X('country:N'),\n        y=alt.Y('primary_analysis_abbr:N', title=\"Primary Analysis Toolset\"),\n        color=alt.Color(colorfeat, legend=alt.Legend(orient=\"bottom\"), title=colortitle)\n    ).properties(width=600, height=160,\n                 background='#f5f5f5',title={\n    \"text\": [\"Primary Analysis Toolset Used by Respondents\"],\n    \"fontSize\":18, \"fontWeight\":600, \"subtitleFontSize\":14\n    })\n    \n    return chrt","3bcdf736":"analysis_log_chrt = analysis_altair(df_primary_analysis, 'logCount:Q', 'Log Count')\nanalysis_log_chrt\n#pct_chrt = platform_altair(df_primary_analysis, 'platform_pct:Q', '% in Country')\n#pct_chrt","0d118b0d":"df_primary_analysis = df_primary_analysis.merge(df_country, left_on='country', right_on='Country',\n          suffixes=(None, '_total'))\ndf_primary_analysis['primary_analysis_pct'] = round(100 * df_primary_analysis['Count'] \/ df_primary_analysis['Count_total'],1)\ndf_primary_analysis = df_primary_analysis.sort_values(by=['primary_analysis_pct'], ascending=False)\ndf_primary_analysis","0659b6ec":"analysis_pct_chrt = analysis_altair(df_primary_analysis, 'primary_analysis_pct:Q', '% by Country')\nanalysis_pct_chrt","a87f01a3":"df_primary_analysis.loc[df_primary_analysis['Country']=='Japan']","eac12cba":"# Add the country code for a new choropleth map\ndf_primary_analysis['country_code'] = df_primary_analysis['country']\ndf_primary_analysis.replace({\"country_code\": country_codes}, inplace=True)","ca5e3521":"df_primary_analysis_local = df_primary_analysis.loc[df_primary_analysis['primary_analysis_abbr']=='Local development environments']","41696822":"fig = px.choropleth(data_frame=df_primary_analysis_local,\n                    locations='country_code',\n                    color='primary_analysis_pct',\n                    color_continuous_scale=\"agsunset\",\n                    range_color=(0, 50),\n                    hover_name='Country', # column to add to hover information\n                    title='% Respondents primarily using Local Development Environment')\nfig.show()","882e4811":"company_size = df_survey_responses.groupby(['Q20', 'Q3'])\ndf_company_size = company_size.agg('count')\ndf_company_size.reset_index(inplace=True)\ndf_company_size=df_company_size[['Q20', 'Q3', 'Q2']]\ndf_company_size.columns=('company_size', 'country', 'Count')\ndf_company_size['rank'] = df_company_size['company_size']\ncompany_size_sort_map = {\"10,000 or more employees\": 4, '1000-9,999 employees': 3, \n                  \"250-999 employees\": 2,\n                  \"50-249 employees\": 1, \"0-49 employees\": 0\n                 }\ndf_company_size['rank'] = df_company_size['rank'].replace(company_size_sort_map)\ndf_company_size['company_size_rank'] = df_company_size['rank'].astype(str) + ' - ' + df_company_size['company_size']\n\ndf_company_size","c8ae1b5f":"bars_company_size = alt.Chart(df_company_size).mark_bar(\n        cornerRadiusTopLeft=3,\n        cornerRadiusTopRight=3\n    ).encode(\n        y=alt.Y('country:N', axis=alt.Axis(grid=False, titleAngle=0)),\n        x=alt.X('Count:Q', stack=\"normalize\", title=\"Normalized Count\"),\n        color=alt.Color('company_size_rank:N', legend=alt.Legend(orient=\"bottom\"), title=\"Company Size\")\n    ).properties(width=500, height=500,title={\n    \"text\": [\"Company Size of Respondent's Employer\"],\n    \"subtitle\": [\"Broken Down proportionally by Country\"],\n    \"fontSize\":18, \"fontWeight\":600, \"subtitleFontSize\":14\n    })\n\nbars_company_size","402f68de":"data_scientists = df_survey_responses.groupby(['Q21', 'Q3'])\ndf_data_scientists = data_scientists.agg('count')\ndf_data_scientists.reset_index(inplace=True)\ndf_data_scientists=df_data_scientists[['Q21', 'Q3', 'Q2']]\ndf_data_scientists.columns=('data_scientists', 'country', 'Count')\n\ndf_data_scientists['rank'] = df_data_scientists['data_scientists']\ndata_scientists_sort_map = {\"20+\": 6, \"15-19\": 5, \"10-14\": 4, '5-9': 3, \n                  \"3-4\": 2,\n                  \"1-2\": 1, \"0\": 0\n                 }\ndf_data_scientists['rank'] = df_data_scientists['rank'].replace(data_scientists_sort_map)\ndf_data_scientists['data_scientists_rank'] = df_data_scientists['rank'].astype(str) + ' - ' + df_data_scientists['data_scientists']\n\ndf_data_scientists","d945c9e6":"bubble_plot_company_size = alt.Chart(df_data_scientists).mark_circle(\n        cornerRadiusTopLeft=3,\n        cornerRadiusTopRight=3\n    ).encode(\n        y=alt.Y('country:N', axis=alt.Axis(grid=False, titleAngle=0)),\n        x=alt.X('Count:Q', title=\"Count\"),\n        color=alt.Color('data_scientists_rank:N', legend=alt.Legend(orient=\"bottom\"), title=\"\"),\n        size=alt.Size('Count:Q'),    \n    ).properties(width=500, height=500,title={\n    \"text\": [\"Number of people responsible for Data Science workloads at place of Business\"],\n    \"subtitle\": [\"Broken Down proportionally by Country\"],\n    \"fontSize\":18, \"fontWeight\":600, \"subtitleFontSize\":14\n    })\n\nbubble_plot_company_size","1e6b8023":"ml = df_survey_responses.groupby(['Q22', 'Q3'])\ndf_ml = ml.agg('count')\ndf_ml.reset_index(inplace=True)\ndf_ml=df_ml[['Q22', 'Q3', 'Q2']]\ndf_ml.columns=('ml', 'country', 'Count')\n\ndf_ml['ml'].unique()","2d2c1c6c":"df_ml_prod = df_ml.loc[df_ml['ml'].isin(['We have well established ML methods (i.e., models in production for more than 2 years)',\n       'We recently started using ML methods (i.e., models in production for less than 2 years)'])]\ndf_ml_prod = df_ml_prod.drop(columns=['ml'])\n\n#get prod totals\nml_prod = df_ml_prod.groupby(['country'])\ndf_ml_prod = ml_prod.agg('sum').reset_index()\n\n#get overall totals\nml_total = df_ml.groupby(['country'])\ndf_ml_total = ml_total.agg('sum').reset_index()\n\n\ndf_ml_prod = df_ml_prod.merge(df_ml_total[['country', 'Count']], left_on='country', right_on='country',\n          suffixes=('_prod', '_total'))\n\ndf_ml_prod['country_code'] = df_ml_prod['country']\ndf_ml_prod.replace({\"country_code\": country_codes}, inplace=True)\n\ndf_ml_prod['ml_in_prod_pct'] = round(100 * df_ml_prod['Count_prod'] \/ df_ml_prod['Count_total'],1)\ndf_ml_prod\n\ndf_ml_prod_sorted = df_ml_prod.sort_values(by=['ml_in_prod_pct'], ascending=False)\ndf_ml_prod_sorted","0295a4e7":"def ml_prod(df, subtitle, sort=None):\n    ml_prod_chart = alt.Chart(df_ml_prod).mark_bar(\n            cornerRadiusTopLeft=3,\n            cornerRadiusTopRight=3\n        ).encode(\n            y=alt.Y('country:N', axis=alt.Axis(grid=False, titleAngle=0), sort=sort),\n            x=alt.X('ml_in_prod_pct:Q', title=\"%\"),\n        ).properties(width=200, height=500, title={\n        \"text\": [\"ML models in Production\"],\n        \"subtitle\": subtitle,        \n        \"fontSize\":16, \"fontWeight\":600, \"subtitleFontSize\":12\n        })\n    \n    return ml_prod_chart\n\nbar_years_ml = ml_prod(df_ml_prod, \"% whose place of Business Uses\")\nbar_years_ml_sorted = ml_prod(df_ml_prod_sorted, \"% whose place of Business Uses\", \"-x\")\n\nbar_years_ml | bar_years_ml_sorted","95855921":"fig = px.choropleth(data_frame=df_ml_prod,\n                    locations='country_code',\n                    color='ml_in_prod_pct',\n                    color_continuous_scale=\"turbo\",\n                    range_color=(10, 55),\n                    hover_name='country', # column to add to hover information\n                    title='% Respondents whose place of business uses ML in Production')\nfig.show()","b80736fe":"pay = df_survey_responses.groupby(['Q24', 'Q3'])\ndf_pay = pay.agg('count')\ndf_pay.reset_index(inplace=True)\ndf_pay=df_pay[['Q24', 'Q3', 'Q2']]\ndf_pay.columns=('pay', 'country', 'Count')\n\ndf_pay['pay'].unique()","66287b07":"df_pay['rank'] = df_pay['pay']\npay_sort_map = {\"> $500,000\": '24', \"300,000-500,000\": '23', \"250,000-299,999\": '22', '200,000-249,999': '21',\n                \"150,000-199,999\": '20', \"125,000-149,999\": '19', \"100,000-124,999\": '18', '90,000-99,999': '17',\n                \"80,000-89,999\": '16', \"70,000-79,999\": '15', \"60,000-69,999\": '14', '50,000-59,999': '13',\n                \"40,000-49,999\": '12', \"30,000-39,999\": '11', \"25,000-29,999\": '10', '20,000-24,999': '09',\n                \"15,000-19,999\": '08', \"10,000-14,999\": '07', \"7,500-9,999\": '06', '5,000-7,499': '05',\n                \"4,000-4,999\": '04', \"3,000-3,999\": '03', \"2,000-2,999\": '02', '1,000-1,999': '01', \n                '$0-999': '00'\n                 }\ndf_pay['rank'] = df_pay['rank'].replace(pay_sort_map)\ndf_pay['pay_rank'] = df_pay['rank'].astype(str) + ' - ' + df_pay['pay']\n\ndf_pay\n\ndf_pay = df_pay.merge(df_country[['Country', 'Count']], left_on='country', right_on='Country',\n          suffixes=('_pay_category', '_total'))\ndf_pay['pay_pct'] = round(100 * df_pay['Count_pay_category'] \/ df_pay['Count_total'],1)\ndf_pay","164d58dc":"bubble_plot_pay = alt.Chart(df_pay).mark_circle(\n        cornerRadiusTopLeft=3,\n        cornerRadiusTopRight=3\n    ).encode(\n        y=alt.Y('country:N', axis=alt.Axis(grid=False, titleAngle=0)),\n        x=alt.X('pay_rank:O', title=\"Pay\", axis=alt.Axis(grid=False, labelAngle=270)),\n        color=alt.Color('pay_rank:O', legend=None, title=\"\"),\n        size=alt.Size('pay_pct:Q'),    \n    ).properties(width=570, height=500,title={\n    \"text\": [\"Salaries\"],\n    \"subtitle\": [\"Broken Down proportionally by Country\"],\n    \"fontSize\":18, \"fontWeight\":600, \"subtitleFontSize\":14\n    })\n\nbubble_plot_pay","58a86cd0":"Here we can see that the biggest single group of respondents is Indian respondents with under 1 year of experience using Machine Learning methods. We will normalize the data so that we can see a clearer picture for countries with fewer respondents.","52ca7fd0":"We see that in some countries approximately half of respondents are students. \n\n<a id=\"s-4a\"><\/a>\n### Data Scientists\n[Back to Contents](#s-0)\n\nLet's just focus on the job of \"Data Scientist\".","2bfa9d56":"This map is interactive. You can zoom in and out, select countries and hover over a country to see the relevant stats for that nation. Other maps later in the notebook are interactive in the same way.","082281b8":"<a id=\"s-8\"><\/a>\n## TPU Usage\n[Back to Contents](#s-0)\n\nStaying on the them of hardware let's see how many times respondents have used TPU's. (TPU's are specialized hardware than enable fast processing of neural networks.)","dc164f2d":"We can see that Belgium has the highest proportion of respondents who have 20+ years of experience with Machine Learning methods whilst Saudi Arabia and Thailand have the most newcomers to Machine Learning. Let's visualize on a map the proportion of respondents who have at least 5 years experience with ML methods by country.","ded0f070":"We can see that in most countries the smallest employer size was the most popular at 0-49 employees. The country with the highest proportion of respondents in this category is Nepal closely followed by Morocco and Nigeria. In Portugal, Poland, Japan and Singapore respondents tended to work for larger companies.","f0cddb17":"<a id=\"s-9\"><\/a>\n## Years using Machine Learning methods\n[Back to Contents](#s-0)\n\nHere we analyze the number of years of experience with machine learning methods that respondents have by country.","5545e5cb":"In all countries the most popular response \"Never\" shows that most respondents have not used a TPU. The leading countries in terms of TPU usage are Viet Nam, Peru and Romania whilst TPU usage is least frequent in Ireland. Once again we should consider the issues of sample size and selection bias in drawing too many conclusions from our dataset.","656bb519":"<a id=\"s-3\"><\/a>\n## Breakdown by Country and Highest Educational Achievement\n[Back to Contents](#s-0)\n\nLet's take a look at the breakdown of highest educational achievement by country in this Kaggle survey. Remember there can be a selection bias in these results, especially if we consider the age of respondents. Respondents aged 18-21 are unlikely to have a PhD for example! \n\nIf there are respondents in that age group with a PhD please feel free to contact me about teaming up in future competitions ;-)","61238130":"We have double-encoded the count for each category. It is encoded on the x axis and in the size of the circle. From this chart we can see that in the USA and India the largest single group of respondents were in places of business that had at least 20 people responsible for Data Science workloads. However, in other countries with a large number of overall respondents the picture is quite different. In Brazil, China, Canada and in the \"Other\" category (responses grouped together from countries with less than 50 responses each) the most popular response was that only 1 or 2 people were responsible for Data Science workloads in the place of business. Meanwhile, in Japan and Russia, the most common answer was that 0 people were responsible for Data Science workloads. This suggests that those businesses are not doing Data Science. However, it could also potentially suggest that the question needs to be reworded. \"Responsible for Data Science workloads\" could mean anyone who works in Data Science, or, Data Science managers.","1609d2a7":"Again we can see that there is one category that dominates in every country. Despite the growth of cloud solutions and deep learning, a personal computer or laptop is still by far the most popular choice. Let's take a look at the other categories excluding personal computers.","ae4dd774":"Here we see that Coursera and Kaggle Learn have some popularity in all countries. We also see that all platforms have users in almost all countries. This chart allows us to compare counts for different platforms across countries. Now let's look at percentages within each country.","73c63b74":"<a id=\"s-13\"><\/a>\n## Rates of Pay\n\n[Back to Contents](#s-0)\n\nLet's take a look at rates of pay by country. (Remember rates of pay will be impacted by other variables such as age and years of experience.)","6d11e9c9":"<a id=\"s-7\"><\/a>\n## What type of computing platform do you use most often for your data science projects?\n[Back to Contents](#s-0)\n\nQ11 asked respondents which platform they used most often for their data science projects. Let's take a look at how this breaks down by country.","3bd93260":"The chart above is interactive so feel free to zoom into your home country. If you click on a country you can get the percentage displayed in a popup. We can see in general that there are few respondents with 5+ years of experience with ML methods.","f6e5375d":"The highest percentage of respondents who were Data Scientists was in Israel followed by Poland and France. The lowest was Sri Lanka followed by China.","59984934":"<a id=\"s-11\"><\/a>\n## How many people are responsible for Data Science workloads at the place of business?\n[Back to Contents](#s-0)\n\nLooking now at the number of Data Scientists rather than the overall number of employees.","193e0b3c":"<a id=\"s-10\"><\/a>\n## Company Size\n[Back to Contents](#s-0)\n\nRespondents were asked about the size of the company that they work for. Here we break down their answers by country.","9315a8a2":"<a id=\"s-9x\"><\/a>\n## Primary Analysis Toolset\n[Back to Contents](#s-0)\n\nLet's see what respondents use as their primary analysis toolset in each country.","8de897a3":"The chart below is interactive. Click on any programming language in the legend and it will highlight that programming language on the chart making it easier to focus in on specific data. As an example if we click on \"MATLAB\" in the legend at the bottom of the chart we can see it was more popular with respondents in Iran and Romania than in other countries. To remove the highlight filter click on the chart outside the legend.\n","fe5f2d88":"<a id=\"s-3alt\"><\/a>\n## Breakdown by Online Educational Platforms\n[Back to Contents](#s-0)\n\nNow that we've looked at formal education, let's take a look at online educational platforms. We will log transform the counts per platform per country and provide 2 charts one for the original count and one for the transformed count.","ad49140b":"Here we can see some distinct geographical patterns. As we saw in the previous chart the percentage of respondents under 25 is very high in much of Asia. Europe and North America have the lowest proportion of respondents under 25. Of course we don't know for sure how representative Kaggle is of the participation in Data Science and Machine Learning of the general population of different countries. However, this chart certainly suggests that the skilled Data Science and Machine Learning professionals of the future will predominantly come from Asia.","d68c5601":"We can see quite a lot of respondents in the first category earning under 1000USD. This likely includes students. The first few categories may include people who work part time. At the other end of the scale we can see a non-negligible subset who earn over 500,000USD. We can also see that the distribution is skewed differently in different countries. For example in the USA and Switzerland it is skewed to the right more than in most other countries. We should also bear in mind that these figures do not take into account the cost of living in the respective countries. This can be higher in countries with higher average incomes. This means that the income difference between respondents in different countries may be considerably greater than the difference in spending power between respondents in those countries.","320139ba":"<a id=\"s-5\"><\/a>\n## Breakdown by Years of Coding Experience\n[Back to Contents](#s-0)\n\nHere we analyse how the number of years of coding experience respondents have varies by country.","1aee0c9a":"![Annotation%202020-12-22%20231942.jpg](attachment:Annotation%202020-12-22%20231942.jpg)","d36e49c3":"It seems that this option is less popular amongst respondents in much of Asia. There are many possible reasons for this which could make an interesting notebook in itself. One important factor could be the relatively younger age of respondents there which we have already observed, but I won't attempt a full explanation here.","09130581":"Here we can see the popularity of Coursera in India. Due to the high absolute counts in India and to a lesser extent the USA, we don't learn much about alternative platforms in other countries. This is why we use a log transformed version of the chart below. We include the chart above to remind ourselves of the importance of India and the USA to the survey. The absolute counts there are much higher and we shouldn't lose sight of that when we look at log counts and percentages in other charts.","c24cbb92":"First we look at the log count per country. We see that Basic Statistical Software - Microsoft Excel, Google Sheets, etc. and Local development environments - (RStudio, JupyterLab, etc.) are the most popular categories. We can also see that a few categories did not get any responses in certain countries. For example no respondents in Switzerland used Cloud-based data software. This may well be an artifact of the data and we should note infer too much from this.","8be77c4f":"<a id=\"s-2a\"><\/a>\n### Note about the Sample Data\n[Back to Contents](#s-0)\n\nAlthough this notebook is focusing on analyzing the data by country, we can see in the following chart that the age of respondents impacts on other facets of the data, in this case, how long it took to complete the survey in seconds (capped at 3000 seconds or 50 minutes). \n\nWe should remember as we are going through the later charts and recognize that they are not randomly sampled and as a result are likely to have selection bias. If we prepared the same chart by country then it may appear that Indian respondents were quicker but this may not be telling anything about India. Instead it might be because Indian respondents tend to be younger.","a1ea7d15":"In most countries it looks like a cloud-based platform is the second most popular, although this doesn't seem to be true in Belgium or Viet Nam where deep learning solutions are more popular.","566487e1":"We can see that in India many respondents are in the youngest age categories. Comparing this to other nations we can see that respondents elsewhere tend to be older. This is particularly noticeable in the USA. Let's take a look at this data in percentage terms.","a21520e0":"<a id=\"s-top\"><\/a>\n# Kaggle 2020 State of Data Science Survey\nKaggle is the world leader for competitive Data Science. Since 2017 it has conducted an annual survey of the state of Data Science. This notebook will conduct an EDA of the data in the 2020 survey. The focus of this EDA will be on how Data Science varies by country.\n\nPlease leave any feedback in the comments below.\n\n","8c6ac663":"There do seem to be some geographic patterns here. In Europe and North America responses have shrunk or been static year-on-year with no countries seeing major growth. This was also true for Russia and China. Meanwhile, other regions saw rapid growth especially the area from North Africa passing East through the Middle East, India to South East Asia saw a large growth in responses especially in South East Asia.\n\nLet's dive into the data a bit more deeply.","98164f4e":"OK, there are some new insights here. We knew that in India the category with the highest count was 18-21. Looking across other countries it appears that the age range with the most consistlently high  percentage of respondents is 25-29. We see that there are a few countries where the category with the highest percentage (for that country) is ages 22-24. These countries are Bangladesh, Tunisia, Sri Lanka and Nepal. This is interesting because most of these are in close geographic proximity to each other (and to India). Let's visualize on a map the percentage of respondents under 25 by country.","d491b3de":"<a id=\"s-1\"><\/a>\n## Responses per Country\n[Back to Contents](#s-0)\n\nFirst we will see how many responses there were in each country.","ce6f0a72":"<a id=\"s-6\"><\/a>\n## What Language Would you Recommend an aspiring Data Scientist Learn First?\n[Back to Contents](#s-0)\n\nThis gives a view of where Data Scientists think Data Science is heading and is not clouded by the legacy of languages that Data Scientist may or may not already know. Again, following our theme we will take a look at this by country.","02c14c88":"Here we can see responses by country. India leads the way by a large margin from the USA. In third place is \"Other\" which is all other countries not on the list aggregated into one category. \n\n<a id=\"s-1a\"><\/a>\nOK, let's compare this year's response counts to last year's survey responses. ","348cc01f":"Where the respondent's places of business is in Europe and North America plus Israel, Australia and South Africa, the place of business is more likely to have ML models in production. Brazil, Russia, India and China (the original BRIC nations) all report very similar results on this metric slightly behind most of Europe but ahead of Spain and Ireland. ML is less established in production in other parts of Africa.","5eec3ca2":"We can also see that the number of responses from India increased noticeably from 2019 to  2020 but the responses from the USA fell in 2020 compared to 2019. The comparison chart only shows countries which were recorded in both years. It appears that a minimum count of 50 is required for the country to be included a distinct nation in the survey. Otherwise the data gets bucketed to the \"Other\" category. This category had more responses in 2020 compared to 2019. Let's take a look at the year-on-year change by countries.","c9ee9f29":"We can see the differing ages of respondents between countries more clearly if we focus on the top 8 countries by number of respondents.","8ad792c1":"<a id=\"s-2\"><\/a>\n## Breakdown by Country and Age\n[Back to Contents](#s-0)\n\nWe break down the responses by age and country and count the entries in each. We log transform the count values to get a more informative visualization.","0efa40e6":"<a id=\"s-4\"><\/a>\n## Breakdown by Country and Job Title\n[Back to Contents](#s-0)\n\nLet's take a look at the breakdown of job title by country.","5fd88796":"<a id=\"s-12\"><\/a>\n## Machine Learning\n[Back to Contents](#s-0)\n\nDoes the place of business incorporate Machine Learning? Let's see specifically the proportion of respondents whose place of business incorporates ML in production.","0989ec4b":"We can see that Python is by far the most popular language recommended in all countries. Perhaps not surprisingly we can see that SQL and R are both widely recommended in all countries. \n\nAspiring data scientists may find more detail on skills in demand in their own country, but remember that the sample size of responses for many of the countries listed may not be very large and the results may not be very reliable as a result.","984ae98b":"We can see that in most countries local development environments were the most popular analysis toolset amongst respondents. However, even in the country (Switzerland) where this value was highest, it was still under 50% (percentage includes those who did not answer this question). In some countries Basic Statistical software was the most popular category amongst respondents e.g. Egypt, Japan, Peru, Philipines. Unlike some of our other analyses there doesn't seem to be a clear geographic proximity pattern that explains this. However, there are many potential factors that could contribute to this. It could be to do with the age of respondents, or the type of jobs they do, or simply an artifact of the data. Let's plot this on a map to see if this provides any further insights.","8f7cd794":"### Conclusion\nData Science is flourishing in 2020. We can see respondents to the Kaggle survey from over 50 different countries. By working through the data in the survey breaking down the information by country we have found many interesting insights. For example respondents from India have tended to be younger than those from the US. Respondents from Iran and Switzerland have been more likely to have a PhD. Respondents from Sweden were more likely to have 20+ years of coding experience. Deep Learning platforms are more popular than cloud-based platforms with respondents in Belgium and Viet Nam. TPU usage was highest amongst respondents in Viet Nam. Respondents from Switzerland are most likely to have 5 or more years of experience using machine learning methods. In India and the USA, respondents were most likely to work for companies with 20 or more Data Scientists but in Brazil, Canada and China respondents were most likely to work for companies where there were only 1-2 people working on Data Science. Based on observations of respondents, ML models were most likely to reach production in Israel followed by Belarus and the UK.\n\nHowever, as per the caveats previously stated, we must recognise that we are looking at the real-world data available in the survey. This sample may suffer from selection bias and sampling error. The results noted here are based on this data and may not all extrapolate to be fully representative of all countries for all of the questions we have looked at.\n\nI hope this notebook was interesting and insightful and that you learnt something new about the state of Data Science in your own country and the changing state of Data Science globally.\n\nLet me know your thoughts and any feedback in the comments below. If you liked the notebook or found it helpful please upvote.\n\n[Back to Top](#s-top)","6356dfb8":"<a id=\"s-0\"><\/a>\n## Contents\n* [Responses per Country](#s-1)\n    - [Comparison to 2019](#s-1a)\n* [Breakdown by Country and Age](#s-2)\n    - [Note about the Sample Data](#s-2a)\n* [Breakdown by Country and Highest Educational Achievement](#s-3)\n* [Breakdown by Country and Online Educational Platform](#s-3alt)\n* [Breakdown by Country and Job Title](#s-4)\n    - [Proportion of Respondents who are Data Scientists](#s-4a)\n* [Breakdown by Country and Years of Coding Experience](#s-5)\n* [Recommended Programming Language for aspiring Data Scientists by Country](#s-6)\n* [Breakdown by Country and Type of Computing Platform](#s-7)\n* [Breakdown by Country and TPU Usage](#s-8)\n* [Breakdown by Country and Years using ML Methods](#s-9)\n* [Breakdown by Country and Primary Analysis Toolset](#s-9x)\n* [Breakdown by Country and Company Size](#s-10)\n* [Breakdown by Country and Number of People Responsible for Data Science workloads](#s-11)\n* [Breakdown by Country and Machine Learning reaching Production](#s-12)\n* [Breakdown of Rates of Pay by Country](#s-13)","4f607aa8":"Here we see that Coursera is the most popular platform amongst respondents in most countries. However, there are a few exceptions to this. For example, in Romania Kaggle Learn courses are more popular, whilst in Brazil Udemy just pips Coursera to be the most popular platform there. Also, although Coursera is most popular in most countries, the percentage of respondents in each country that have used it can vary dramatically. In Sri Lanka over 55% of respondents had used Coursera but in Japan it was under 22%. Also note that the percentages for each country do not need to sum to 100% because respondents were asked to select all platforms they had used.","70ea124b":"Thailand had the biggest year-on-year increase in responses followed by Indonesia, Iran and Malaysia. Ireland had the biggest fall followed by Canada.\n\nHow would that look on a map? The chart below is interactive. Feel free to zoom into your home country. If you click on a country you can get the percentage displayed in a popup. (credit to this [notebook](https:\/\/www.kaggle.com\/anshulverma2207\/kaggle-data-survey-2020) for some insights into this map.)"}}