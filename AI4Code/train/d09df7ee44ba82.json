{"cell_type":{"8c067eac":"code","6758f2bb":"code","e8632cbf":"code","b3238a14":"code","16d4e611":"code","abc045cd":"code","fd410a01":"code","904db862":"code","909f8520":"code","622f181d":"code","d18026ce":"code","dea1ffbe":"code","27025fda":"code","9d40cc17":"code","0d1ba5d8":"code","770ecfb1":"code","49b036c6":"code","b4beb78b":"code","d00156c2":"code","01694781":"code","ffe54a9d":"code","77e4397a":"code","9ab3db15":"code","f183b497":"code","cea15f21":"code","f1fdf98d":"code","5e482ac6":"code","aa691182":"code","3492c213":"code","6e87d89e":"code","5366f82e":"code","199eecb7":"code","e0cf27b6":"code","406e7633":"code","43b53553":"code","1508e6b5":"code","6ab0fc86":"markdown","61006f8a":"markdown","1b9afe4d":"markdown","5f023502":"markdown","a92cc0b5":"markdown","8a9cd54c":"markdown","35e4c936":"markdown","9e18de76":"markdown","637da2d3":"markdown","38dd4643":"markdown","5b6d7433":"markdown","8dd5cb49":"markdown","f979c7b2":"markdown","d9fa5a30":"markdown","a4667181":"markdown","0945ce83":"markdown","bf193bd7":"markdown","11878863":"markdown","e144ae41":"markdown","eb783e3c":"markdown","475ac7e7":"markdown","f42babd2":"markdown","fa9a2440":"markdown","1ed18b87":"markdown"},"source":{"8c067eac":"#\u5bfc\u5165\u5e38\u89c1\u7684\u5e93\nimport pandas as pd\nimport numpy as np\nimport os\nimport seaborn as sns\nimport matplotlib.pyplot as plt\n%matplotlib inline","6758f2bb":"#\u5bfc\u5165\u6570\u636e\ndata=pd.read_csv('\/kaggle\/input\/bnu-esl-2020\/train.csv')\ntest=pd.read_csv('\/kaggle\/input\/bnu-esl-2020\/test.csv')","e8632cbf":"data.shape","b3238a14":"test.shape","16d4e611":"data.head()","abc045cd":"test.head()","fd410a01":"data.describe()","904db862":"plt.figure(figsize=(16,6))\nsns.heatmap(data.isnull(),cmap='viridis')","909f8520":"plt.figure(figsize=(16,6))\nsns.heatmap(test.isnull(),cmap='viridis')","622f181d":"_des=data.describe()\ndata.total_bedrooms.fillna(_des['total_bedrooms']['50%'],inplace=True)","d18026ce":"plt.figure(figsize=(16,6))\nsns.heatmap(data.isnull(),cmap='viridis')","dea1ffbe":"data.info()","27025fda":"#\u5148copy\u4e00\u4efd\uff0c\u5e76\u53bb\u6389ID\u5b57\u6bb5\ndf=data.copy()\n\ndf.drop('Unnamed: 0',axis=1,inplace=True)\ndf.head()","9d40cc17":"sns.set()\nplt.figure(figsize=(10,8))\nplt.scatter('longitude','latitude',data=df,alpha=0.1)\nplt.ylabel('Latitude')\nplt.xlabel('Longitude')\nplt.show()","0d1ba5d8":"plt.figure(figsize=(10,7))\ndf.plot(kind=\"scatter\", x=\"longitude\", y=\"latitude\", alpha=0.4,\n        s=df[\"population\"]\/100, label=\"population\", figsize=(15,8),\n        c=\"median_house_value\", cmap=plt.get_cmap(\"jet\"),colorbar=True,\n    )\nplt.legend()","770ecfb1":"#\u67e5\u770b\u6570\u636e\u4e4b\u95f4\u7684\u6563\u70b9\u56fe\nfrom pandas.plotting import scatter_matrix\n\nsns.set()\nfeat = ['median_house_value','median_income','total_rooms','housing_median_age','population','total_bedrooms','households']\nscatter_matrix(df[feat],figsize=(15,8))","49b036c6":"df.hist(bins=70, figsize=(20,20))\nplt.show()","b4beb78b":"corr = df.corr()\nplt.figure(figsize=(8, 8))\nsns.heatmap(corr, cmap='viridis')\n\ncorr.median_house_value.sort_values(ascending=False)","d00156c2":"print(corr.households.total_rooms)\nprint(corr.households.total_bedrooms)\nprint(corr.total_bedrooms.total_rooms)\nprint(corr.households.population)","01694781":"df['average_rooms']=df.total_rooms\/df.population\ndf['average_bedrooms']=df.total_bedrooms\/df.population","ffe54a9d":"_features=['households','total_bedrooms','total_rooms']\ndf.drop(_features,axis=1,inplace=True)\ndf.head()","77e4397a":"corr = df.corr()\nplt.figure(figsize=(8, 8))\nsns.heatmap(corr, cmap='viridis')\n\ncorr.median_house_value.sort_values(ascending=False)","9ab3db15":"corr.average_bedrooms.average_rooms","f183b497":"df.ocean_proximity.replace({'<1H OCEAN':1.0,'INLAND':2.0,'ISLAND':3.0,'NEAR BAY':4.0,'NEAR OCEAN':5.0},inplace = True)","cea15f21":"df.ocean_proximity.head()","f1fdf98d":"df=df.loc[df['median_house_value']<500001,:]","5e482ac6":"# \u5206\u79bb\u81ea\u53d8\u91cf\u548c\u56e0\u53d8\u91cf\n\ntmpX=df.drop('median_house_value',axis=1)\ntmpY=df.median_house_value\n\n# \u5206\u79bb\u8bad\u7ec3\u96c6\u548c\u9a8c\u8bc1\u96c6\n\nfrom sklearn.model_selection import train_test_split\n\ntrainX,testX,trainY,testY=train_test_split(tmpX,tmpY,test_size=0.1,random_state=1)","aa691182":"trainX.shape","3492c213":"trainY.shape","6e87d89e":"testX.shape","5366f82e":"import xgboost as xgb\nxg_reg = xgb.XGBRegressor(objective ='reg:squarederror', colsample_bytree = 1,eta=0.3, learning_rate = 0.1,\n                max_depth = 5, alpha = 10, n_estimators = 2000)","199eecb7":"xg_reg.fit(trainX,trainY)\n\npredY = xg_reg.predict(testX)","e0cf27b6":"#\u8ba1\u7b97\u5728\u9a8c\u8bc1\u96c6\u4e0a\u7684\u5f97\u5206\nfrom sklearn.metrics import r2_score\nr2xgb=r2_score(testY,predY)\nprint('the R squared of the xgboost method is:', r2xgb)","406e7633":"# \u5bf9\u6d4b\u8bd5\u96c6\u4f5c\u4e00\u5b9a\u7684\u5904\u7406\n\n#\u53bb\u6389ID \ntest.drop('id',axis=1,inplace=True)\n\n#\u586b\u5145\u7f3a\u5931\u6570\u636e\n\n_des=test.describe()\ntest.total_bedrooms.fillna(_des['total_bedrooms']['50%'],inplace=True)\n\n\n#\u751f\u6210\u65b0\u7684\u7279\u5f81\n\ntest['average_rooms']=test.total_rooms\/test.population\ntest['average_bedrooms']=test.total_bedrooms\/test.population\n\n#\u53bb\u6389\u65e7\u7684\u7279\u5f81\ntest.drop(['total_bedrooms','total_rooms','households'],axis=1,inplace=True)\n\n#\u751f\u6210\u865a\u62df\u53d8\u91cf\ntest.ocean_proximity.replace({'<1H OCEAN':1.0,'INLAND':2.0,'ISLAND':3.0,'NEAR BAY':4.0,'NEAR OCEAN':5.0},inplace = True)\n\ntest.head()","43b53553":"resY = xg_reg.predict(test)","1508e6b5":"output=pd.read_csv('\/kaggle\/input\/bnu-esl-2020\/test.csv')\n_features=['longitude','latitude','housing_median_age','total_rooms','total_bedrooms','population','households','median_income','ocean_proximity']\noutput.insert(1,'predicted',resY)\noutput.drop(_features, axis = 1,inplace = True)\noutput.to_csv(\"predict.csv\",index=False)","6ab0fc86":"\u53ef\u4ee5\u770b\u51fahouseholds totoal_bedrooms totoal_rooms \u8fd9\u4e09\u4e2a\u53d8\u91cf\u4e4b\u95f4\u76f8\u5173\u6027\u6bd4\u8f83\u5f3a \u68c0\u67e5\u5176\u76f8\u5173\u7cfb\u6570","61006f8a":"\u5728\u6b64\u57fa\u7840\u4e0a\u52a0\u4e0a\u623f\u4ef7\u548c\u4eba\u53e3\u7b49\u4fe1\u606f","1b9afe4d":"\u53ef\u4ee5\u5927\u81f4\u80fd\u53d1\u73b0\uff0c\u7ecf\u7eac\u5ea6\u548c\u623f\u4ef7\u4e4b\u95f4\u5b58\u5728\u7740\u4e00\u5b9a\u7684\u8054\u7cfb\u3002\n\u63a5\u7740\u6211\u4eec\u67e5\u770b\u6570\u636e\u4e4b\u95f4\u7684\u4e24\u4e24\u6563\u70b9\u56fe","5f023502":"## 3. Feature Engineering ","a92cc0b5":"\u53bb\u6389\u79bb\u7fa4\u70b9","8a9cd54c":"## \u603b\u7ed3\u548c\u53cd\u601d\n\n\u8fd9\u6b21\u5927\u4f5c\u4e1a\u8ba9\u6211\u66f4\u52a0\u6df1\u523b\u5730\u8ba4\u8bc6\u5230\u4e86\u6570\u636e\u79d1\u5b66\u662f\u8ba1\u7b97\u673a\u3001\u7edf\u8ba1\u3001\u6570\u5b66\u4e09\u8005\u7684\u9ad8\u5ea6\u7ed3\u5408\uff0c\u9700\u8981\u4eba\u5728\u8fd9\u65b9\u9762\u6709\u5f88\u5f3a\u7684\u7efc\u5408\u7d20\u8d28\u3002\u6211\u4e4b\u524d\u6709\u70b9\u5ffd\u89c6\u81ea\u5df1\u7684\u6570\u7406\u57fa\u7840\uff0c\u5bfc\u81f4\u8fd9\u5b66\u671f\u7684\u8bfe\u7a0b\u6211\u57fa\u672c\u4e0a\u90fd\u5728\u4e00\u4e2a\u6bd4\u8f83\u75db\u82e6\u7684\u72b6\u6001\u5ea6\u8fc7\u3002\u8fd9\u6b21\u5927\u4f5c\u4e1a\u52a0\u6df1\u4e86\u6211\u5bf9\u6570\u636e\u5904\u7406\u3001\u6570\u636e\u7279\u5f81\u548c\u76f8\u5e94\u7684\u6a21\u578b\u8fd9\u4e9b\u65b9\u9762\u7684\u5e94\u7528\u548c\u7406\u89e3\uff0c\u5e76\u4e14\u7ed9\u6211\u5e26\u6765\u4e86\u5f88\u5927\u7684\u5b8c\u6210\u4efb\u52a1\u7684\u6210\u5c31\u611f\uff0c\u4f46\u662f\u6211\u8fd8\u662f\u8ba4\u8bc6\u5230\u4e86\u81ea\u5df1\u5728\u8fd9\u65b9\u9762\u8fd8\u53ea\u662f\u505c\u7559\u5728\u5e94\u7528\u5c42\u9762\uff0c\u8fd8\u9700\u8981\u6076\u8865\u6570\u7406\uff0c\u52a0\u6df1\u5bf9\u5404\u4e2a\u7b97\u6cd5\u3001\u6a21\u578b\u7684\u7406\u89e3\u3002\n\n\u6211\u8fd9\u6b21\u7684\u4f5c\u4e1a\u6211\u4e2a\u4eba\u611f\u89c9\u65e0\u8bba\u662f\u7279\u5f81\u5de5\u7a0b\u8fd8\u662f\u6a21\u578b\u90fd\u76f8\u5f53\u201c\u7b80\u964b\u201d\u3002\u5728\u7279\u5f81\u5de5\u7a0b\u4e0a\u9762\uff0c\u5e76\u6ca1\u6709\u4ec0\u4e48\u6bd4\u8f83\u9ad8\u7ea7\u7684\u4e1c\u897f\uff0c\u53ea\u662f\u6839\u636e\u6570\u636e\u7684\u5206\u5e03\u8d8b\u52bf\u548c\u76f8\u5173\u6027\uff0c\u4f5c\u51fa\u4e86\u4e00\u4e9b\u7b80\u5355\u7684\u8c03\u6574\uff1b\u800c\u5728\u6a21\u578b\u65b9\u9762\uff0c\u6211\u53ea\u91c7\u7528\u4e86\u4e00\u4e2a\u6a21\u578b\uff0c\u6ca1\u6709\u4f5c\u4efb\u4f55\u7684\u6a21\u578b\u878d\u5408\u4e4b\u7c7b\u7684\u64cd\u4f5c\uff0c\u800c\u4e14\u6700\u5173\u952e\u7684\u53c2\u6570\u90e8\u5206\uff0c\u4e5f\u6781\u5927\u53c2\u8003\u4e86\u524d\u4eba\u7684\u7ecf\u9a8c\u3002\u56e0\u4e3a\u6211\u81ea\u5df1\u65f6\u95f4\u7ba1\u7406\u4e0a\u7684\u95ee\u9898\uff0c\u6240\u4ee5\u6211\u53ea\u80fd\u8fd9\u79cd\u7b80\u5355\u7684\u65b9\u5f0f\uff0c\u4e0d\u8fc7\u4f3c\u4e4e\u7ed3\u679c\u8fd8\u7b97\u8fc7\u5f97\u53bb\u3002\u6211\u4e4b\u524d\u4e5f\u6709\u91c7\u7528\u8fc7\u66f4\u4e3a\u590d\u6742\u7684\u7279\u5f81\u5de5\u7a0b\uff0c\u6bd4\u5982\u5bf9\u6570\u636e\u8fdb\u884c\u6b63\u6001\u5316\u548c\u6807\u51c6\u5316\uff0c\u4f46\u662f\u7531\u4e8e\u81ea\u5df1\u5bf9\u8fd9\u65b9\u9762\u7684\u4e0d\u719f\u6089\u548c\u7406\u89e3\u4e0d\u5230\u4f4d\uff0c\u6240\u4ee5\u4e00\u76f4\u6ca1\u6709\u5f04\u51fa\u5408\u7406\u7684\u7ed3\u679c\uff0c\u6240\u4ee5\u624d\u8f6c\u800c\u91c7\u7528\u4e86\u867d\u7136\u66f4\u4e3a\u7b80\u5355\uff0c\u4f46\u662f\u81ea\u5df1\u66f4\u6613\u7406\u89e3\u7684\u5904\u7406\u65b9\u5f0f\u3002\u5176\u5b9e\uff0c\u8fd9\u662f\u4e00\u79cd\u5931\u7b56\uff0c\u6211\u672c\u5e94\u8be5\u91c7\u7528\u201c\u7531\u7b80\u5355\u5230\u590d\u6742\u201d\u7684\u5efa\u6a21\u7b56\u7565\u3002\n\n\u603b\u4e4b\u8fd9\u4e2a\u4e0d\u5c3d\u4eba\u610f\u7684\u6a21\u578b\u5c31\u7b97\u5b8c\u6210\u4e86\uff0c\u8fd8\u5e0c\u671b\u8001\u5e08\u80fd\u591f\u6279\u8bc4\u6307\u6b63\u3002","35e4c936":"\u91cd\u65b0\u67e5\u770b\u76f8\u5173\u6027\u5173\u7cfb","9e18de76":"### XGBoosting\n\nXGBoost\u5e94\u8be5\u53ea\u662f\u5bf9**Gradient Boosting**\u7684\u4e00\u79cd\u9ad8\u6548\u7387\u7684\u5b9e\u73b0\u3002Gradient Boosting\u5373\u4f7f\u7528\u68af\u5ea6\u4e0b\u964d\u7b97\u6cd5\uff0c\u901a\u8fc7\u52a0\u5165\u65b0\u7684\u5f31\u5b66\u4e60\u5668\uff0c\u6765\u52aa\u529b\u7ea0\u6b63\u524d\u9762\u6240\u6709\u5f31\u5b66\u4e60\u5668\u7684\u6b8b\u5dee\uff0c\u5728\u8fed\u4ee3\u4e2d\u9009\u62e9\u8ba9\u635f\u5931\u51fd\u6570\u68af\u5ea6\u4e0b\u964d\u7684\u65b9\u5411\uff0c\u6700\u7ec8\u8fd9\u6837\u591a\u4e2a\u5b66\u4e60\u5668\u76f8\u52a0\u5728\u4e00\u8d77\u7528\u6765\u8fdb\u884c\u6700\u7ec8\u9884\u6d4b\uff0c\u51c6\u786e\u7387\u5c31\u4f1a\u6bd4\u5355\u72ec\u7684\u4e00\u4e2a\u8981\u9ad8\u5f97\u591a\u3002\u5173\u4e8e\u53c2\u6570\u7684\u9009\u62e9\uff0c\u6211\u5e76\u6ca1\u6709\u4f7f\u7528\u7f51\u683c\u641c\u7d22\u7b97\u6cd5\u6765\u8fdb\u884c\u641c\u7d22\uff0c\u800c\u662f\u6839\u636e\u524d\u4eba\u7684\u7ecf\u9a8c\uff0c\u9009\u62e9\u4e86\u8868\u73b0\u8f83\u597d\u7684\u53c2\u6570\u3002","637da2d3":"### \u9884\u6d4b\u6d4b\u8bd5\u96c6","38dd4643":"## 2. Exploratory Data Analysis ","5b6d7433":"\u518d\u6b21\u68c0\u67e5","8dd5cb49":"\u521b\u9020\u65b0\u7684\u66f4\u660e\u663e\uff0c\u66f4\u5177\u6709\u89e3\u91ca\u6027\u7684\u7279\u5f81","f979c7b2":"\u4f5c\u51fa\u9884\u6d4b","d9fa5a30":"\u65b0\u7684\u4e24\u4e2a\u7279\u5f81\u4e4b\u95f4\u76f8\u5173\u6027\u6709\u6240\u964d\u4f4e\n\n\u63a5\u4e0b\u6765\u5bf9\u552f\u4e00\u4e00\u4e2a\u7c7b\u522b\u53d8\u91cf\u8fdb\u884c\u7b80\u5355\u7684\u7f16\u7801","a4667181":"\u9996\u5148\u67e5\u770b\u5404\u4e2a\u7279\u5f81\u4e4b\u95f4\u7684\u76f8\u5173\u6027","0945ce83":"\u67e5\u770b\u5404\u4e2a\u53d8\u91cf\u5404\u81ea\u7684\u5206\u5e03","bf193bd7":"\u68c0\u67e5\u662f\u5426\u6709\u7f3a\u5931\u6570\u636e","11878863":"## Modelling \n\u91c7\u7528\u7684\u6a21\u578b\u4e3aXGBoosting","e144ae41":"\u53ea\u6709total_bedrooms\u6709\u5c11\u91cf\u7f3a\u5931\u6570\u636e\uff0c\u6309\u7167\u7b80\u5355\u7684\u539f\u5219\uff0c\u7528\u5e73\u5747\u503c\u8fdb\u884c\u586b\u5145","eb783e3c":"\u53bb\u6389\u4e4b\u95f4\u7684\u65e7\u7684\u7279\u5f81\uff0c\u53ea\u4fdd\u7559\u4eba\u53e3","475ac7e7":"\u67e5\u770b\u5e38\u89c1\u7684\u6570\u636e\u63cf\u8ff0\u6027\u7edf\u8ba1\u5b66\u4fe1\u606f","f42babd2":"# BNU ESL 2020 California Housing ","fa9a2440":"\u6309\u7167\u7ecf\u7eac\u5ea6\u548c\u5bc6\u5ea6\u8fdb\u884c\u4f5c\u56fe","1ed18b87":"## 1. Simple Data Preprocessing "}}