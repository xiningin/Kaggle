{"cell_type":{"b56f30ec":"code","53733c37":"code","a0016803":"code","bc1343cb":"code","d73e10e7":"code","fee8e524":"code","9257b94e":"code","b1d69661":"code","4b8905f0":"code","bf0899e3":"code","c7925556":"code","679924c5":"code","0329a7a8":"code","78d192a7":"code","f1287443":"code","570ad476":"code","7d8d09d8":"code","1b804a09":"code","71fdc112":"code","27ab9e23":"code","d66ce148":"code","197c1df4":"code","37fff1ed":"code","7146e3aa":"code","069d3366":"code","55de65f2":"code","cbd520a5":"code","f4c0020d":"code","91066fa4":"code","94ac76ec":"code","e14c4f2e":"code","de23e0e6":"code","e5e13daf":"code","17f4b4bf":"code","36aeedd1":"code","ec6ead71":"code","e8521987":"code","096a626c":"code","d21bd00c":"code","c600bba7":"code","136e9d1d":"code","ee8ce79f":"code","58e7437b":"code","6b4cceee":"code","1262ba36":"code","7522a5d6":"markdown","1158b082":"markdown","14e39d7d":"markdown","8ccbba56":"markdown","81bf3a44":"markdown","9a23ede3":"markdown","8bcc1800":"markdown","bef0c708":"markdown","8ee6a687":"markdown","04f04fa4":"markdown","7da9aa6e":"markdown","6d0f25ac":"markdown"},"source":{"b56f30ec":"import pandas as pd\nimport matplotlib.pyplot as plt\n%matplotlib inline\nimport seaborn as sns\n\nfrom scipy.sparse import csr_matrix\nfrom sklearn.neighbors import NearestNeighbors\nfrom fuzzywuzzy import process\n\nfrom sklearn.neighbors import KNeighborsClassifier\nfrom sklearn.preprocessing import StandardScaler\nfrom sklearn.model_selection import train_test_split\n\nfrom sklearn.metrics import confusion_matrix,classification_report\nfrom sklearn.metrics import accuracy_score","53733c37":"books=pd.read_csv('..\/input\/goodreadsbooks\/books.csv',error_bad_lines=False)\nprint(type(books))\nbooks.head()","a0016803":"books.tail()","bc1343cb":"books.shape","d73e10e7":"books.columns","fee8e524":"books.info()","9257b94e":"books.shape","b1d69661":"#In the column names, we can see that num_pages is indented.remove it\nbooks.rename(columns={'  num_pages': 'num_pages'},inplace=True)","4b8905f0":"books.columns","bf0899e3":"books.head()","c7925556":"books.describe()","679924c5":"#Any missing values?\nbooks.isnull().sum().values.any()","0329a7a8":"#Let's check the unique values\nfor i in books.columns:\n    print('\\n',i,'\\n\\n',books[i].unique())","78d192a7":"#Book with maximum rating count\nprint('\\nBook with maximum rating count=',books['ratings_count'].max())\nmax_rating=books[books['ratings_count'] == books['ratings_count'].max()]\nmax_rating","f1287443":"# substring to be searched\nsub ='J'\n# seaching books by authors name \n#Series.str.find(sub, start=0, end=None)\nbooks[books['authors'] == books['authors'].str.find(sub,start=0,end=None)]\n","570ad476":"\n#Dividing numeric and categorical columns\n\nnumerical = books.select_dtypes(['float64','int64']).columns.values.tolist()\ncategorical = books.select_dtypes(['object']).columns.values.tolist()\nprint('Numerical Columns\\n\\n',numerical)\nprint()\nprint('Categorical Columns\\n\\n',categorical)\n","7d8d09d8":"books.head(3)","1b804a09":"#Changing data types of some columns like isbn into int64 \n#average_rating (obj into float64)\nbooks['average_rating']=pd.to_numeric(books['average_rating'],errors='coerce').fillna(0).astype(float)\nbooks['isbn']=pd.to_numeric(books['isbn'],errors='coerce').fillna(0).astype(int)\nbooks['isbn13']=pd.to_numeric(books['isbn13'],errors='coerce').fillna(0).astype(float)\nbooks['num_pages']=pd.to_numeric(books['num_pages'],errors='coerce').fillna(0).astype(int)\nbooks.info()","71fdc112":"books.describe()","27ab9e23":"books.corr()","d66ce148":"corrMatrix=books.corr()\nsns.heatmap(corrMatrix,annot=False,cmap='Blues')\nplt.show()","197c1df4":"# books count by title\nbook_name = books.title.value_counts().to_frame().reset_index()\nbook_name.rename(columns={'title':'Count','index':'title'},inplace=True)\nbook_name.sort_values(by='Count',ascending=False)","37fff1ed":"#top 10 most popular book\nbook_name_10=book_name.iloc[:10]\nbook_name_10","7146e3aa":"plt.figure(figsize =[15,5])\nsns.barplot(book_name_10.title,book_name_10.Count)\nplt.title('Most popular titles of books',fontsize=14)\nplt.xticks(rotation=25);","069d3366":"# book counts by authos\nbook_author = books['authors'].value_counts().to_frame().reset_index()\nbook_author.rename(columns={'authors':'Count','index':'Author'},inplace=True)\nbook_author.sort_values(by='Count',ascending=False)","55de65f2":"book_count=book_author[book_author['Count']>=30]\nbook_count","cbd520a5":"plt.figure(figsize =[15,5])\nsns.barplot(book_count.Author,book_count.Count)\nplt.title('Some Most popular book Authors',fontsize=14)\nplt.xticks(rotation=25);","f4c0020d":"#books min ad max average count\nprint('highest average rating = ',books['average_rating'].max())\nprint('lowest average rating =',books['average_rating'].min())","91066fa4":"#books details having maximum average_rating\navg_rat = books[books['average_rating'] == books['average_rating'].max()]\nprint('Total number of books with highest average rating = ',len(avg_rat))\navg_rat","94ac76ec":"#Graphical represenation of books having maximum average rating\nbook_avg_count_5=avg_rat.iloc[:5]\nplt.figure(figsize =[15,5])\nsns.barplot(book_avg_count_5.title,book_avg_count_5.average_rating)\nplt.title('titles of books which having maximum average rating',fontsize=14)\nplt.xticks(rotation=90);\n","e14c4f2e":"#books details having mimimum average_rating\navg_rat_min= books[books['average_rating'] == books['average_rating'].min()]\nprint('Total number of books with highest average rating = ',len(avg_rat_min))\navg_rat_min[:10]","de23e0e6":"#recomenation by book title\nbooks_title=books.drop(['authors','language_code','publication_date','publisher'],axis=1)","e5e13daf":"books_users=books_title.pivot(index=None,columns='bookID',values='average_rating').fillna(0)\nmatrix_books_users=csr_matrix(books_users.values)\nprint(matrix_books_users)","17f4b4bf":"knn=NearestNeighbors(metric='cosine',algorithm='brute',n_neighbors=10)","36aeedd1":"knn.fit(matrix_books_users)","ec6ead71":"# function for book recommention by its title\ndef recommender(book_title,data, model,n_recommentation):\n    model.fit(data)\n    idx=process.extractOne(book_title,books_title['title'])[2]\n    print(\"Books selected:-\",books_title['title'][idx],'Index:',idx)\n    print('Searching for book recommendation.....')\n    distances,indices=model.kneighbors(data[idx],n_neighbors=n_recommentation)\n    for i in indices:\n        print(books_title['title'][i].where(i!=idx))","e8521987":"#recomend book by considering book 'Bill Bryson's African Diary'\nrecommender(\"Bill Bryson's African Diary\",matrix_books_users,knn,5)","096a626c":"#recomend book by considering book 'Comoediae 1'\nrecommender(\"Comoediae 1\",matrix_books_users,knn,5)","d21bd00c":"books_recom=books.drop(['language_code','publication_date','publisher'],axis=1)","c600bba7":"books_author=books_recom.pivot(index=None,columns='bookID',values='average_rating').fillna(0)\nmatrix_books_author=csr_matrix(books_author.values)\nprint(matrix_books_author)","136e9d1d":"knn=NearestNeighbors(metric='cosine',algorithm='brute',n_neighbors=10)","ee8ce79f":"knn.fit(matrix_books_author)","58e7437b":"# function for book recommention by its author\ndef recommend_by_authors(book_author,data, model,n_recommentation):\n    model.fit(data)\n    idx=process.extractOne(book_author,books_recom['authors'])[2]\n    print(\"Books selected by its author:-\",books_recom['authors'][idx],'Index:',idx)\n    print('Searching for book recommendation .....')\n    distances,indices=model.kneighbors(data[idx],n_neighbors=n_recommentation)\n    for i in indices:\n        print(books_recom['title'][i].where(i!=idx))","6b4cceee":"\nrecommend_by_authors(\"J.K. Rowling\/Mary GrandPr\u00e9\",matrix_books_author,knn,5)","1262ba36":"recommend_by_authors(\"C.S. Lewis\/Ana Falc\u00e3o Bastos\",matrix_books_author,knn,5)","7522a5d6":"# Book Recomentaton","1158b082":"Observations:\n\nThe data seems to have no missing values. There are total 11127 rows with total 12 columns with the range index from 0 to 11126.\n\nThere are 3 numerical columns with 3 int64 values and 0 float64 and 9 categorical (object) values. We can see that the column publication_date has the dtype as object.\n\nWe'll need to change that to datetime.\n\nIn the column names, we can see that num_pages is indented.\n\nOverall the data looks in order. Memory usage: 1.0 MB","14e39d7d":"Observation:-\n\n    There are 22 books having maximum average rating i.e 5. \n   \nBooks having maximum average ratings are:-\n\n      '624      Comoediae 1: Acharenses\/Equites\/Nubes\/Vespae\/P...\n786                      Willem de Kooning: Late Paintings\n855      Literature Circle Guide: Bridge to Terabithia:...\n1243     Middlesex Borough (Images of America: New Jersey)\n4126     Zone of the Enders: The 2nd Runner Official St...\n4790     The Diamond Color Meditation: Color Pathway to...\n4935     Bulgakov's the Master and Margarita: The Text ...\n5025     The Complete Theory Fun Factory: Music Theory ...\n5476     The Goon Show  Volume 4: My Knees Have Fallen ...\n5478     The Goon Show  Volume 11: He's Fallen in the W...\n5649                                   Winchester Shotguns\n5650     Colossians and Philemon: A Critical and Exeget...\n6187                             Taxation of Mineral Rents\n6250                           The New Big Book of America\n6778     Delwau Duon: Peintiadau Nicholas Evans = Symph...\n8547          Fanning the Flame: Bible  Cross  and Mission\n9286     Oliver Wendell Holmes in Paris: Medicine  Theo...\n9328                    Tyrannosaurus Wrecks (Stanley  #1)\n9724         The Irish Anatomist: A Study of Flann O'Brien\n9851     The American Campaign: U.S. Presidential Campa...\n9897     His Princess Devotional: A Royal Encounter Wit...\n10266           Bill Gates: Computer Legend (Famous Lives)\n\n    \nAnd there are 29 books having minimum average rating i.e 0\n   \nBooks having minimum average ratings are:-\n\n      '265      Out to Eat London 2002 (Lonely Planet Out to Eat)\n375                         Juiced Official Strategy Guide\n987               Open City 6: The Only Woman He Ever Left\n2532     How To Meditate: An Anthology Of Talks On Medi...\n2533            Insights: Talks On The Nature Of Existence\n2758                   Venac sonetnih venaca; Puz\u030ceva srma\n3348     Streetcar Suburbs: The Process of Growth in Bo...\n3493     Brodie's notes on Aldous Huxley's brave new world\n4242                                   American Film Guide\n4678     The Man and the Author: John Milton: Twentieth...\n4702                     The Tolkien Fan's Medieval Reader\n5325     Canopy: A Work for Voice and Light in Harvard ...\n5877                        Patriots (The Coming Collapse)\n6383            Laguna  I Love You: The Best of \"Our Town\"\n6561                     American Writers  Supplement VIII\n6862                              The Road To War  1933 39\n6880     I'll Be Home Before Midnight and I Won't Get P...\n7147     Mythographi Graeci 1: Apollodori Bibliotheca  ...\n7402                      Sclerotherapy and vein treatment\n7576                              The Berlin Phenomenology\n7637          Your Child and Jesus: A Family Activity Book\n7800                     Beckett Football Card Price Guide\n8979     Brown's Star Atlas: Showing All The Bright Sta...\n9335         Random House Crossword Mega Omnibus  Volume 1\n9441     Classroom Interactions as Cross-Cultural Encou...\n10142                                        Day and Night\n10501    The Fantastic Vampire: Studies in the Children...\n10921    The Leadership Challenge: Skills for Taking Ch...\n11031    Anthony Thwaite: In Conversation With Peter Da...'\n        ","8ccbba56":"Observations\n\n'The Iliad', 'The Brothers Karamazov', \"A Midsummer Night's Dream\", 'Anna Karenina', 'The Odyssey', \"Gulliver's Travels\", 'Collected Stories', 'The Great Gatsby', 'Robinson Crusoe', 'The Histories'\n\nAre the top 10 popular titles.","81bf3a44":"# 1.Books recomenataion by considering  books title.","9a23ede3":"Total number of books with highest and lowest average rating","8bcc1800":"# 2.Books recomenataion by considering  books authors.","bef0c708":"Observations\n\nTwilight by Stephenie Meyer published in 9\/6\/2006 by Little Brown and Company publisher has the highest ratings_count of 4597666.\n\nAverage_rating for this books is 3.5900 and text_review_counts is 94265","8ee6a687":"Observations:-\n\nFollowing authors have maximum number of books count  :-\n\nStephen King\t40\n\nP.G. Wodehouse\t40\n\nRumiko Takahashi\t39\n\nOrson Scott Card\t35\n\nAgatha Christie\t33\n\nPiers Anthony\t30\n\n","04f04fa4":"# Books by author","7da9aa6e":"# Books by average_ratring","6d0f25ac":"# Recomentation"}}