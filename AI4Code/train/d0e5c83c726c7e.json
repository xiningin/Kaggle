{"cell_type":{"743fb583":"code","56a6945c":"code","4911446a":"code","328cadff":"code","ab2c61f3":"code","bee66750":"code","e1f4a4dc":"code","90d22c1c":"code","40757039":"code","295c0bd4":"code","5f66772c":"code","428172ba":"code","18f9eb0d":"code","8d756e1e":"code","413916b6":"code","43654017":"code","df1a6e5d":"code","c3deb129":"code","8f13ee54":"code","2024ed6f":"code","0f335679":"code","5dda0485":"code","77155e7a":"code","5ac21f91":"code","31fc3c55":"code","c219cd07":"code","3fc89fbc":"code","9af4da9e":"code","c4d417db":"code","c28aa03b":"markdown","fafad57a":"markdown","9d284cf2":"markdown","92eb794e":"markdown","f345c123":"markdown","6e680e46":"markdown","ebc7ee61":"markdown","bfc15f76":"markdown","9dbf1a8f":"markdown"},"source":{"743fb583":"import numpy as np\nimport pandas as pd\nimport matplotlib.pyplot as plt\nimport seaborn as sns","56a6945c":"df = pd.read_csv('..\/input\/iba-ml1-mid-project\/train.csv')\ndf","4911446a":"df['credit_line_utilization'].value_counts()","328cadff":"df['credit_line_utilization']=df['credit_line_utilization'].str.replace(',', '.').astype(np.float64)\ndf['credit_line_utilization'].value_counts()","ab2c61f3":"# checking for missing values\ndf.isna().sum()","bee66750":"df.describe()","e1f4a4dc":"# visualizing correlation\nfig, ax = plt.subplots(figsize=(10,10))\ncorr = df.corr()\nmask=np.triu(np.ones(corr.shape)).astype(np.bool)\nheatmap = sns.heatmap(corr,mask=mask, cmap=\"Spectral\", annot=True);","90d22c1c":"# new features\ndf['debt_payment']=df['monthly_income']*df['ratio_debt_payment_to_income']\ndf['remain'] = df['monthly_income'] - df['number_dependent_family_members']*250  # assuming ave expenditure per person is 250$","40757039":"# checking for correlation again\nfig, ax = plt.subplots(figsize=(12,12))\ncorr = df.corr()\nmask=np.triu(np.ones(corr.shape)).astype(np.bool)\nheatmap = sns.heatmap(corr,mask=mask, cmap=\"Spectral\", annot=True);","295c0bd4":"# describing dataset after new features\ndf.describe()","5f66772c":"# visualizing relationship between late payments up to 59 and 89 days\nfig, ax = plt.subplots(figsize=(8,6))\nsns.scatterplot(data=df, x='number_of_previous_late_payments_up_to_59_days', y= 'number_of_previous_late_payments_up_to_89_days');","428172ba":"# visualizing relationship between late payments up to 59 and 90+ daya\nfig, ax = plt.subplots(figsize=(8,6))\nsns.scatterplot(data=df, x='number_of_previous_late_payments_up_to_59_days', y= 'number_of_previous_late_payments_90_days_or_more');","18f9eb0d":"# visualizing relationship between late payments up to 89 and 90+ daya\nfig, ax = plt.subplots(figsize=(8,6))\nsns.scatterplot(data=df, x='number_of_previous_late_payments_up_to_89_days', y= 'number_of_previous_late_payments_90_days_or_more');","8d756e1e":"# checking for imbalance\nsns.countplot(data=df,x='defaulted_on_loan');","413916b6":"# finding imbalance as percentage\npos = df['defaulted_on_loan'].mean()*100\nneg = 100 - pos\nprint(f'target is 1: {pos} %')\nprint(f'target is 0: {neg} %')","43654017":"# income distribution\nsns.displot(data=df, x='monthly_income', kind='kde', bw_adjust=100);","df1a6e5d":"# age distribution\nsns.displot(data=df, x='age', kde=True);","c3deb129":"(df['age']>90).sum()","8f13ee54":"# relation between income and age\nfig, ax = plt.subplots(figsize=(10,10))\nax.set_ylim((0,80000))\nsns.scatterplot(data=df, x='age', y='monthly_income', hue='defaulted_on_loan');","2024ed6f":"df['debt_payment'].max()","0f335679":"# distribution of new feature - debt_payment\nfig, ax = plt.subplots()\nax.set_xlim((0,35000))\nax.hist(df['debt_payment'], bins=100);","5dda0485":"# distribution of new feature - remain\nfig, ax = plt.subplots()\nax.set_xlim((-10000, 30000))\nax.hist(df['remain'], bins=1000);","77155e7a":"sns.displot(data=df, x='real_estate_loans', bins=20);","5ac21f91":"fig, ax = plt.subplots()\nax.set_xlim((-100,800))\nax.hist(df['ratio_debt_payment_to_income'], bins=200);","31fc3c55":"# finding how many people have more debt payment than his\/her income\n(df['ratio_debt_payment_to_income']>1).sum()","c219cd07":"# visualizing the monthly income based on whether person will default on loan or not\nfig, ax = plt.subplots()\nax.set_ylim((0,80000))\nsns.boxplot(data=df, x='defaulted_on_loan', y='monthly_income');","3fc89fbc":"sns.boxplot(data=df, x='defaulted_on_loan', y='number_of_credit_lines');","9af4da9e":"sns.boxplot(data=df, x='defaulted_on_loan', y='age');","c4d417db":"fig, ax = plt.subplots()\nax.set_ylim((0,40000))\nsns.boxplot(data=df, x='defaulted_on_loan', y='monthly_income');","c28aa03b":"## Summary\nBased on EDA 3  features have high correlation, it is needed to be handled(maybe with PCA) before modelling, some features are less correlated with target, therefore feature selection can be done and added 2 new features need to be checked for their importances, based on visualization there are some outliers in 3 high correlated features as well as in age and monthly income, therefore outlier detection can be used before the modelling.","fafad57a":"new features are more correlated with target than some other features","9d284cf2":"There is more people around 50, but generally it seems like normally distributed and there is some skew towards 100. Therefore it worth to check people with age near 100","92eb794e":"There is high imbalance on target data","f345c123":"if we disregard the skew it is almost normally distributed and right skew can be result of outliers","6e680e46":"Relationship between these 3 features are almost the same","ebc7ee61":"there is a high correlation among the 3 features: 'number_of_previous_late_payments_up_to_59_days', \n'number_of_previous_late_payments_up_to_89_days', 'number_of_previous_late_payments_90_days_or_more'\nBesides that features have less correlation with target variable. So creating some new features can be helpful","bfc15f76":"although almost at all possible ages there are people with the same salary, there is general trend that until some age(it seems 60) people are going to have higher salary and after that there is a decline.","9dbf1a8f":"It seems some of the values are given as string(with  ','  not  '.' ), to handle this issue I will replace ',' with '.' and then convert it into float."}}