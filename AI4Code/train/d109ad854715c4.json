{"cell_type":{"0030f59c":"code","d46355d0":"code","159b6cec":"code","db94382f":"code","ae29c5c4":"code","95a62930":"code","d6c10b33":"code","7a44139b":"code","06200c05":"code","8df335ee":"code","54d48ba1":"code","2ce6187c":"code","89b3eb5c":"code","910feb31":"code","2cbe3b57":"code","f93fbadd":"code","11e900ee":"code","fba0e7ba":"code","b42e0fe0":"code","65f52ae7":"code","36029cc1":"code","b541df6f":"code","055bac4c":"code","c4f351f3":"code","924fe6cd":"code","51fb0124":"code","92b84518":"markdown","a8c35b62":"markdown","9e990bea":"markdown","11fadf1f":"markdown","85939544":"markdown","a0e86f6f":"markdown","6ee0f974":"markdown","da3c5cb1":"markdown","04a04005":"markdown","e23fb694":"markdown","064d7a5e":"markdown","ef8141b9":"markdown","ab5ab8c1":"markdown","21ff324f":"markdown","b254bc7d":"markdown","63b2b365":"markdown","1b4dfdc7":"markdown","af394cf1":"markdown","90f3f42e":"markdown","220bd1e7":"markdown","21586980":"markdown","dbea9c58":"markdown","4eb6c4b8":"markdown","f5b1ee5c":"markdown","52b5331d":"markdown","f0eb0503":"markdown","81f81929":"markdown","b8be3571":"markdown","406b9ceb":"markdown","71bf9a3c":"markdown"},"source":{"0030f59c":"# import pandas library\nimport pandas as pd","d46355d0":"# read suicide statistic worldwide data\ndf = pd.read_csv('..\/input\/who-suicide-statistics\/who_suicide_statistics.csv')\n","159b6cec":"df.head()","db94382f":"df.tail()","ae29c5c4":"# read number of suicide data in the 2016\ninvalid_data = df[df.year == 2016]\ninvalid_data.head(20)","95a62930":"# drop 2016 year data\ndf.drop(invalid_data.index, axis = 0, inplace = True)","d6c10b33":"df.info()","7a44139b":"# drop NaNs\ndf.dropna(axis=0,inplace =True)\ndf.isnull().sum()","06200c05":"import numpy as np\n# finding duplicates\nduplicate = df.duplicated()\nnp.unique(duplicate)","8df335ee":"# reset index from 0\ndf = df.reset_index(drop=True)\ndf.head()","54d48ba1":"# check total rows in the table\ndf.tail()","2ce6187c":"# Labeling by using LabelEncoder\nfrom sklearn import preprocessing\n\nle = preprocessing.LabelEncoder()\ndf.sex = le.fit_transform(df.sex) # female:0 , male:1\ndf.age = le.fit_transform(df.age) # 15-24: 0, 25-34:1, 35-54:2 , 5-14:3, 55-74:4, 75+:5\ndf.head(20)","89b3eb5c":"df.info()","910feb31":"# import the matplotlib library for visualization\n%matplotlib inline\nimport matplotlib.pyplot as plt","2cbe3b57":"# The total number of suicides worldwide each year\ndf_year = df.groupby(\"year\").sum().sort_values(by='suicides_no')[['suicides_no']]\ndf_year = df_year.sort_index()\nplt.figure(figsize=(16,8))\nplt.bar(np.arange(len(df_year)), df_year.suicides_no)\nplt.xticks(np.arange(len(df_year)), (df_year.index),rotation=90)\nplt.title(\"Number of Suicide Worldwide Based in Year\")\nplt.show()","f93fbadd":"df_usa = df.loc[df['country']=='United States of America'].groupby(\"year\").sum().sort_values(by='suicides_no')[['suicides_no']]\ndf_usa = df_usa.sort_index().reset_index()","11e900ee":"df_usa.head()","fba0e7ba":"# import the seaborn library to visualize\nimport seaborn as sns","b42e0fe0":"plt.figure(figsize=(16,8))\nusa_year_s = sns.barplot(x='year',y='suicides_no',data=df_usa, palette='Blues')\n                \nusa_year_s.set_xticklabels(df_usa.year, rotation=90)\nusa_year_s.set_title('Number of Suicides in Year: USA')","65f52ae7":"count_max_sui=pd.DataFrame(df.groupby('country')['suicides_no'].sum().reset_index())\ncount_max_sui\n","36029cc1":"# import the plotly library\nfrom plotly.offline import init_notebook_mode, iplot","b541df6f":"count = [ dict(\n        type = 'choropleth',\n        locations = count_max_sui['country'],\n        locationmode='country names',\n        z = count_max_sui['suicides_no'],\n        text = count_max_sui['country'],\n        colorscale = 'Viridis',\n        autocolorscale = False,\n        reversescale = True,\n        marker = dict(\n            line = dict (\n                color = 'rgb(180,180,180)',\n                width = 0.5\n            ) ),\n        colorbar = dict(\n            autotick =False,\n            title = 'Suicides Country-based'),\n      ) ]\nlayout = dict(\n    title = 'Suicides happening across the Globe',\n    geo = dict(\n        showframe = True,\n        showcoastlines = True,\n        projection = dict(\n            type = 'Mercator'\n        )\n    )\n)\nfig = dict( data=count, layout=layout )\niplot( fig, validate=False, filename='d3-world-map' )","055bac4c":"df_russia = df.loc[df['country']=='Russian Federation'].groupby(\"year\").sum().sort_values(by='suicides_no')[['suicides_no']]\ndf_russia = df_russia.sort_index().reset_index()","c4f351f3":"df_russia.head()","924fe6cd":"# import graph objects as \"go\"\nimport plotly.graph_objs as go","51fb0124":"# Creating trace1\ntrace1 = go.Scatter(\n                    x = df_usa.year,\n                    y = df_usa.suicides_no,\n                    mode = \"lines\",\n                    name = \"Usa\",\n                    marker = dict(color = 'rgba(16, 112, 2, 0.8)'),\n                    text= df_usa.suicides_no,\n                    )\n# Creating trace2\ntrace2 = go.Scatter(\n                    x = df_russia.year,\n                    y = df_russia.suicides_no,\n                    mode = \"lines\",\n                    name = \"Russia\",\n                    marker = dict(color = 'rgba(80, 26, 80, 0.8)'),\n                    text= df_russia.suicides_no,\n                    )\ndata = [trace1, trace2]\nlayout = dict(title = 'Suicides over years- RUSSIA VS US',\n              xaxis= dict(title= 'Number of Suicides',ticklen= 5,zeroline= False)\n             )\nfig = dict(data = data, layout = layout)\niplot(fig)","92b84518":"However, we can only see the usa trend of the number of suicide. How about other countries? \n\nNext, I will compare the total number of suicide in each country by looking on a country map","a8c35b62":"# 4.Intersection","9e990bea":"By looking on the above interact chart by plotly library, we can compare that the Russia has the worst situation on suicide and USA is not that serious in the world ","11fadf1f":"# Visualization- 4 types of story telling","85939544":"import the plotly library for further visualization","a0e86f6f":"From the above line chart, we can tell the suicide rate of Russia is higher than usa from 1980 to 2009. However, The trend of suicide in the Russia decrease from 1999. As we can see, In year 2010, the number of suicide in Russia is lower than USA and decrease year by year. ","6ee0f974":"Looking to the number of suicide in the world is hard to simply guess the number in the specific country, such as USA. \n\nNext, I will drill down the data into only includes country usa. Let's see the change in the usa year by year.","da3c5cb1":"# Conclusion","04a04005":"For now, the data is prepared already. \n\nNext, I will start to visualize the data by using 4 types of story telling","e23fb694":"# 2. Drilling down","064d7a5e":"https:\/\/www.kaggle.com\/kanncaa1\/plotly-tutorial-for-beginners\n\nhttps:\/\/plotly.com\/python\/maps\/","ef8141b9":"# 3. Zooming out","ab5ab8c1":"- The above bar plot shows that total number of suicide in the world from year 1979 to 2015 is quiet higher. \n- The number of suicide of year 1983 and 1984 are lower and from 1988 to 2003 has growing up year by year.","21ff324f":"view the data head and tail","b254bc7d":"drop 2016 year data since there are only small number of suicide data in the begining of the year","63b2b365":"## 1. Change over time","1b4dfdc7":"First, I will prepare the data has only US data","af394cf1":"# Introduction","90f3f42e":"import the plotly library to visualize","220bd1e7":"First, I will prepare the data that sum of the number of suicide for each country","21586980":"Since the sex and age attributes are object types, I will labeling them to integer type for further visulization even though I didn't use these two attributes in this story telling assignment","dbea9c58":"When we think of worldwide number of suicide, we must want to know the suicide number in the world in recently year.\n\nI will use the type of change over time to explore the question that \"How does the global number of suicides change from year to year?\"","4eb6c4b8":"import the seaborn library","f5b1ee5c":"Then, we maybe confused does Russia have the highest suicide rate every year?\n\nTo get the result, I will compare the number of suicide in US and Russia every year. ","52b5331d":"# Data preparation","f0eb0503":"drop nan and duplicate data","81f81929":"By using 4 types of storytelling, we can explain our dataset in a order as a story which can attract audience to pay more attention on the data.","b8be3571":"In this data storytelling, I am going to show long-time trends and differences between countries about number of suicide\n\nThe datatable and description can be found from [Kaggle](https:\/\/www.kaggle.com\/szamil\/who-suicide-statistics)","406b9ceb":"# Reference","71bf9a3c":"The barplot chart above shows that the suicide rate in America is on the rise every year, expecially from year 2003 to 2015"}}