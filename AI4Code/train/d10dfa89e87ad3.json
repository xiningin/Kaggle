{"cell_type":{"2cfa5a85":"code","a2b1bab9":"code","7b0918c7":"code","52bd5f26":"code","eb22c096":"code","03f449e7":"code","65b54cac":"markdown","150698eb":"markdown","3bb44ba5":"markdown","d816b732":"markdown","a0374785":"markdown"},"source":{"2cfa5a85":"import pandas as pd\n\n#Read file and get head\napple_mobility_df = pd.read_csv(\"..\/input\/apple-mobility-trends-updated-daily\/Apple_Mobility_2020-04-13.csv\")\napple_mobility_df.drop(\"Unnamed: 0\", axis=1, inplace=True)\napple_mobility_df.head()","a2b1bab9":"#Break into countires\/regions and cities\ngeo_mask = apple_mobility_df[\"geo_type\"] == \"country\/region\"\nmobility_countries = apple_mobility_df[geo_mask]\nmobility_cities = apple_mobility_df[~geo_mask]\nprint(\"There are a total of {} countires and {} cities with provided mobility data.\".format(len(mobility_countries),\n                                                                                           len(mobility_cities)))","7b0918c7":"def get_trans_count(df):\n    name = df[\"geo_type\"].iloc[0]\n    return df[\"transportation_type\"].value_counts().rename(str(name))\ntransport_types_count = pd.concat([get_trans_count(mobility_countries), get_trans_count(mobility_cities)], axis=1, sort=False)\ntransport_types_count","52bd5f26":"#Melt into timeseries\nid_vars = [\"geo_type\", \"region\",\"transportation_type\",\"lat\", \"lng\", \"population\"]\nmobility_countries_melted = mobility_countries.melt(id_vars=id_vars,var_name=\"Date\",value_name=\"pct_of_baseline\")\nmobility_cities_melted = mobility_cities.melt(id_vars=id_vars,var_name=\"Date\",value_name=\"pct_of_baseline\")\nmobility_cities_melted.head()","eb22c096":"import plotly.express as px\n#Make list of any cities to plot\nto_show = [\"Atlanta\", \"Athens\", \"London\"]\n\n#Plot\ndf = mobility_cities_melted[mobility_cities_melted[\"region\"].isin(to_show)]\nfig = px.line(df, x=\"Date\", y=\"pct_of_baseline\", color=\"transportation_type\",\n              line_group=\"region\", hover_name=\"region\")\nfig.show()","03f449e7":"from simple_folium import simple_folium\nsimple_folium(mobility_cities, \"lat\", \"lng\", [\"region\",\"transportation_type\"], \"Apple Mobility Data\")","65b54cac":"# Simple figures","150698eb":"# Folium geo mapping of cities available\nThis comes from a simple Folium Kaggle Utility. You can find more details on how it works in the notebook: [\u046a Start Here: Simple Folium Heatmap for Geo-Data](https:\/\/www.kaggle.com\/dannellyz\/start-here-simple-folium-heatmap-for-geo-data)","3bb44ba5":"# Plot given cities or countries per transport method","d816b732":"# Exploratory Data Analysis for Ability Mobility Data\nThis data was [provided by Apple](https:\/\/www.apple.com\/covid19\/mobility) from their Maps app as anonomized data. It measures the change in mobility across three transporationtion types (driving, walking, transit) compared to a baseline on Jan 13 2020.","a0374785":"# Melt to make each date a new row"}}