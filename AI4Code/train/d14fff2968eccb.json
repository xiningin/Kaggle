{"cell_type":{"3c8b35a5":"code","f550a85e":"code","cd8eeee6":"code","4888512b":"code","208f5e9b":"code","68c31033":"code","b61af041":"code","3474963d":"code","fdae01d8":"code","87821ebf":"code","4999fc0a":"code","fc3497e1":"code","dcfc407e":"code","8f167e90":"code","cf78d66a":"code","a1368a9c":"code","59c73b26":"code","d992932b":"code","8de6f07c":"code","9d711ee3":"code","2ef1183d":"code","e7a517d7":"code","beb67a22":"code","fbb6749f":"code","940be9b7":"code","294b419e":"code","1661d866":"code","489ee9d7":"code","d31549d3":"code","821f7eb6":"code","1e53cf4e":"code","5a356ad4":"code","dcb8f89c":"code","d9f57668":"code","2154e7ee":"code","e6bf9828":"code","36846c0e":"markdown"},"source":{"3c8b35a5":"import pandas as pd\nimport plotly.express as px\n\nimport matplotlib.pyplot as plt\nimport seaborn as sns\n\nsns.set_style('whitegrid')\n%matplotlib inline\n\nimport plotly.graph_objs as go","f550a85e":"df = pd.read_csv('..\/input\/military-expenditure-of-countries-19602019\/Military Expenditure.csv')","cd8eeee6":"df.head()","4888512b":"japan = df[df[\"Name\"] == \"Japan\"]","208f5e9b":"japan_ME = japan.drop(labels=[\"Name\",\"Code\",\"Type\",\"Indicator Name\"], axis=1).transpose()","68c31033":"japan_ME.rename(columns={117:\"Military_expenses\"}, inplace=True)\n\njapan_ME.reset_index(inplace=True)","b61af041":"plt.figure(figsize = (25,5))\nsns.barplot(x=\"index\",y=\"Military_expenses\",data=japan_ME.reset_index())","3474963d":"japan_ME[\"accumulate\"] = japan_ME.Military_expenses.cumsum(axis = 0)\njapan_ME.head()","fdae01d8":"trace0 = go.Bar(x=japan_ME[\"index\"],y=japan_ME.Military_expenses,name=\"Military_expenses\",yaxis=\"y1\")\ntrace1 = go.Scatter(x=japan_ME[\"index\"],y=japan_ME.accumulate,name=\"accumulate\",yaxis=\"y2\",mode='lines+markers')","87821ebf":"layout = go.Layout(xaxis=dict(title=\"\u65e5\u672c\u306e\u8ecd\u4e8b\u8cbb\uff08\u5e74\u6b21\u3068\u7d2f\u7a4d\uff09\", range=[min(japan_ME[\"index\"]),max(japan_ME[\"index\"])]),\n                  yaxis=dict(title=\"Military expenses\",side=\"left\",showgrid=False, range=[0,max(japan_ME.Military_expenses*1.2)]),\n                   yaxis2=dict(title=\"accumulate\",side=\"right\",overlaying=\"y\",range = [0, max(japan_ME.accumulate*1.2)], showgrid=False))","4999fc0a":"import plotly.offline as offline\noffline.init_notebook_mode()\n\nfig = dict(data=[trace0,trace1],layout=layout)\noffline.iplot(fig)","fc3497e1":"df[\"sum\"] = df.sum(axis=1, skipna=True, numeric_only=True)","dcfc407e":"df_country = df[df[\"Type\"]==\"Country\"]\n\ndf_top3 = df_country.sort_values(by=\"sum\", ascending=False).head(3)","8f167e90":"df_top3.drop(labels=[\"Code\",\"Type\",\"Indicator Name\",\"Name\"], axis=1, inplace=True)","cf78d66a":"df_top3_transpose = df_top3.transpose()","a1368a9c":"top3 = df_top3_transpose.rename(columns={249:\"United States\",38:\"China\",75:\"France\"})","59c73b26":"top3.drop(labels=\"sum\",axis=0, inplace=True)","d992932b":"japan_ME.set_index(\"index\", inplace=True)","8de6f07c":"top3_and_japan = japan_ME.join(top3).rename(columns={\"Military_expenses\":\"Japan\"})","9d711ee3":"top3_and_japan.head()","2ef1183d":"top3_and_japan.drop(columns=\"accumulate\", axis=1, inplace=True)","e7a517d7":"data = pd.melt(top3_and_japan.reset_index(), id_vars=\"index\")\n\ndata.head()","beb67a22":"fig = px.line(data, x=\"index\", y=\"value\", color=\"variable\", line_group=\"variable\", hover_name=\"variable\",line_shape=\"spline\", render_mode=\"svg\")\n\nfig.show()","fbb6749f":"country = data.variable.unique()\n\nfig_2 = go.Figure()\n\nfor i in country:\n    fig_2.add_trace(go.Bar(\n        x=data[\"index\"],\n        y=data[\"value\"][data.variable == str(i)],\n        name = str(i)))\n\nfig_2.show()","940be9b7":"top3[\"USA_accumulate\"] = top3[\"United States\"].cumsum(axis=0)\ntop3[\"China_accumulate\"] = top3[\"China\"].cumsum(axis=0)\ntop3[\"France_accumulate\"] = top3[\"France\"].cumsum(axis=0)","294b419e":"top3[\"USA_accumulate\"] = top3[\"United States\"].cumsum(axis=0)\ntop3[\"China_accumulate\"] = top3[\"China\"].cumsum(axis=0)\ntop3[\"France_accumulate\"] = top3[\"France\"].cumsum(axis=0)","1661d866":"top3_accumulate = top3.drop(columns=[\"United States\",\"China\",\"France\"], axis=1)","489ee9d7":"top3_accumulate_reshape = pd.melt(top3_accumulate.reset_index(), id_vars=\"index\")","d31549d3":"fig_1 = px.bar(top3_accumulate_reshape, x=\"variable\",y=\"value\",color=\"variable\", animation_frame=\"index\",animation_group=\"variable\", range_y=[0,max(top3_accumulate_reshape.value)*1.5])\n\nfig_1.show()","821f7eb6":"top20 = df_country.sort_values(by=\"sum\", ascending=False).head(20)\n\nlabels = top20[\"Name\"]\n\ntop20.drop(labels=[\"Name\",\"Code\",\"Type\",\"Indicator Name\",\"sum\"], axis=1, inplace=True)","1e53cf4e":"top20_transpose = top20.transpose().rename(columns= labels)\ntop20_transpose.head()","5a356ad4":"top20 = pd.melt(top20_transpose.reset_index(), id_vars=\"index\")","dcb8f89c":"fig_2 = px.bar(top20, x=\"variable\",y=\"value\",color=\"variable\", animation_frame=\"index\",animation_group=\"variable\")\n\nfig_2.show()","d9f57668":"top20_accumulate = top20_transpose.cumsum()","2154e7ee":"top20_accumulate_reshape = pd.melt(top20_accumulate.reset_index(), id_vars=\"index\")","e6bf9828":"fig_3 = px.bar(top20_accumulate_reshape, x=\"variable\",y=\"value\",color=\"variable\", animation_frame=\"index\",animation_group=\"variable\", range_y=[0,max(top20_accumulate_reshape.value)*1.2])\n\nfig_3.show()","36846c0e":"**Moving Moving\ud83d\udd7a**"}}