{"cell_type":{"a31018b3":"code","ef2a4973":"code","55fdc983":"code","a2408024":"code","24edb3df":"code","6f014a77":"code","8363b20e":"code","2db6abab":"markdown","f2d6d3f2":"markdown","e90dcbac":"markdown","31bc964a":"markdown","b827e37f":"markdown","a93ea370":"markdown","b940d4d0":"markdown"},"source":{"a31018b3":"from glob import glob\nfrom os.path import basename\nfrom collections import Counter\nfrom nltk.corpus import stopwords\nimport matplotlib.pyplot as plt\nimport seaborn as sns\nimport pandas as pd\nimport re\n\nsns.set_style('whitegrid')\n%config InlineBackend.figure_format = 'retina'","ef2a4973":"scripts = [(basename(filename).split('.')[0], open(filename).read())\n           for filename in glob('..\/input\/*.txt')]\nscripts = pd.DataFrame(scripts, columns=['movie', 'text'])\nscripts = scripts.sort_values('movie')\nscripts = scripts.reset_index(drop=True)\n\nplt.figure(figsize=(10, 6))\nax = sns.barplot(scripts['text'].apply(len), scripts['movie'], orient='h')\nax.set(xlabel='length');","55fdc983":"text = '\\n'.join(scripts['text'])\nchars = pd.DataFrame(Counter(text).most_common(), columns=['char', 'frequency'])\n\nletters = chars[chars['char'].str.match(r'[\u0430-\u044f\u0410-\u042f]')].copy()\nletters['uppercase'] = letters['char'].str.isupper()\nletters['char'] = letters['char'].str.lower()\n\nplt.figure(figsize=(10, 10))\nsns.barplot(x='frequency', y='char', hue='uppercase', orient='h', data=letters);","a2408024":"digits = chars[chars['char'].str.match(r'\\d')].copy()\n\nplt.figure(figsize=(10, 3))\nsns.barplot(x='frequency', y='char', orient='h', data=digits);","24edb3df":"def split_script(script):\n    return re.split(r'\\s+', re.sub(r'[^\u0430-\u044f\\s]', '', script.lower()))\n\nstop = stopwords.words('russian')\nwords = pd.Series(split_script(text))\nwords = words[~words.isin(stop)]\ncommon_words = words.value_counts()[1:40]\n\nplt.figure(figsize=(10, 10))\nax = sns.barplot(x=common_words, y=common_words.index, orient='h')\nax.set(xlabel='frequency', ylabel='word');","6f014a77":"titles = [\n    '\u0430\u0432\u0430\u0442\u0430\u0440',\n    '\u0434\u0436\u0430\u043d\u0433\u043e \u043e\u0441\u0432\u043e\u0431\u043e\u0436\u0434\u0435\u043d\u043d\u044b\u0439',\n    '\u044d\u0434 \u0432\u0443\u0434',\n    '\u0431\u043e\u0439\u0446\u043e\u0432\u0441\u043a\u0438\u0439 \u043a\u043b\u0443\u0431',\n    '\u043e\u0442 \u0437\u0430\u043a\u0430\u0442\u0430 \u0434\u043e \u0440\u0430\u0441\u0441\u0432\u0435\u0442\u0430',\n    '\u0443\u043c\u043d\u0438\u0446\u0430 \u0443\u0438\u043b\u043b \u0445\u0430\u043d\u0442\u0438\u043d\u0433',\n    '\u0434\u0435\u043d\u044c \u0441\u0443\u0440\u043a\u0430',\n    '\u043e\u043c\u0435\u0440\u0437\u0438\u0442\u0435\u043b\u044c\u043d\u0430\u044f \u0432\u043e\u0441\u044c\u043c\u0435\u0440\u043a\u0430',\n    '\u0437\u0430\u043b\u0435\u0447\u044c \u043d\u0430 \u0434\u043d\u043e \u0432 \u0431\u0440\u044e\u0433\u0433\u0435',\n    '\u0431\u0435\u0441\u0441\u043b\u0430\u0432\u043d\u044b\u0435 \u0443\u0431\u043b\u044e\u0434\u043a\u0438',\n    '\u0443\u0431\u0438\u0439\u0441\u0442\u0432\u043e \u0441\u0432\u044f\u0449\u0435\u043d\u043d\u043e\u0433\u043e \u043e\u043b\u0435\u043d\u044f',\n    '\u043c\u0430\u0442\u0440\u0438\u0446\u0430',\n    '\u043c\u044e\u043d\u0445\u0435\u043d',\n    '\u043a\u0440\u0438\u043c\u0438\u043d\u0430\u043b\u044c\u043d\u043e\u0435 \u0447\u0442\u0438\u0432\u043e',\n    '\u0431\u0435\u0448\u0435\u043d\u044b\u0435 \u043f\u0441\u044b',\n    '\u043e\u0447\u0435\u043d\u044c \u0441\u0442\u0440\u0430\u0448\u043d\u043e\u0435 \u043a\u0438\u043d\u043e',\n    '\u043a\u0440\u0438\u043a',\n    '\u0437\u0432\u0435\u0437\u0434\u043d\u044b\u0439 \u0434\u0435\u0441\u0430\u043d\u0442',\n    '\u0442\u0440\u0438 \u0431\u0438\u043b\u0431\u043e\u0440\u0434\u0430',\n    '\u0434\u0438\u043a\u043e\u0441\u0442\u044c',\n]\ntitle_frequency = [script.count(title)\n                   for title, script in zip(titles, scripts['text'].str.lower())]\n\nplt.figure(figsize=(10, 6))\nax = sns.barplot(title_frequency, scripts['movie'], orient='h')\nax.set(xlabel='title frequency');","8363b20e":"def mean_word_len(script):\n    words = split_script(script)\n    return sum(len(word) for word in words) \/ len(words)\n\nplt.figure(figsize=(10, 6))\nax = sns.barplot(scripts['text'].apply(mean_word_len), scripts['movie'], orient='h')\nax.set(xlabel='mean word length');","2db6abab":"## How long are the scripts?","f2d6d3f2":"## I agree, seems nothing interesting there","e90dcbac":"## What about digits?","31bc964a":"## What letters are the most common?","b827e37f":"## Wow, how many times do movie titles appear in the scripts?","a93ea370":"## Maybe words are more useful?","b940d4d0":"## Don't you find mean word length interesting?"}}