{"cell_type":{"f7029e7d":"code","df254138":"code","ae248817":"code","c1e10eee":"code","b3f189e6":"code","793f01f9":"code","87c5e57c":"code","3aabf30f":"code","b6d7bae3":"code","396669eb":"code","04d0129b":"code","41fec31b":"code","0219502d":"code","b5b3d35d":"code","15e4a4f6":"code","9f84ee7b":"code","911f76a9":"code","efaac78c":"code","f8058aa0":"code","5b28c3bb":"code","37f17d94":"code","e4a4ed7f":"code","79e5cb7f":"code","8608e899":"code","3be8fdd4":"code","805ac28f":"code","38bb00b5":"code","3a92f5ac":"code","23b8715a":"code","42548e18":"code","d5f61dab":"code","75084a9b":"code","f1fd777d":"code","63cf7ee5":"code","1fecccfe":"code","95733826":"code","6dd46836":"code","925363b9":"code","60662794":"code","276e4a08":"code","9958881c":"code","702eba5c":"code","1f5cbdab":"code","7610e839":"code","a943d3ba":"code","f85d85af":"code","a7c641ae":"code","1a46055c":"code","d0c4272c":"code","1a8ab211":"code","926fc3e2":"code","e4b12a65":"code","b861cfa5":"code","6ebf4c53":"code","b1d22e6a":"code","2c72e49c":"code","c37017e1":"code","22d92bd1":"code","4ac74865":"code","0d892f8d":"code","00accea0":"code","ce523972":"code","032eac4d":"code","f5e899f2":"code","b8c25ff7":"code","ae44624c":"code","d4f0bdbf":"code","8d7ca190":"code","61c410da":"code","5af5b38b":"code","0d918931":"code","6e109fcf":"markdown","be2a0af2":"markdown","76084650":"markdown","04abe1b3":"markdown","3aebbb88":"markdown","b0fb6f22":"markdown","11ac82ac":"markdown","4d07e6a4":"markdown","945acb40":"markdown","87168d74":"markdown"},"source":{"f7029e7d":"import pandas as pd\nimport numpy as np\nimport seaborn as sns\nimport matplotlib.pyplot as plt","df254138":"df = pd.read_csv(\"..\/input\/californiahousing\/housing.csv\", sep = \",\" , encoding=\"utf-8\")","ae248817":"df","c1e10eee":"df.info()","b3f189e6":"df.isnull().sum()","793f01f9":"df.describe(include = \"object\")","87c5e57c":"sns.heatmap(df.isnull(), cbar = False)","3aabf30f":"plt.scatter(data = df , x=\"longitude\" , y=\"latitude\" , c =df[\"median_house_value\"]  )\nplt.colorbar ()\nplt.show()","b6d7bae3":"df.columns","396669eb":"df['gender'].value_counts()","04d0129b":"df['gender'] = df['gender'].fillna(pd.Series(np.random.choice(['female' , \"male\"] , size = len(df.index))))","41fec31b":"df['gender'].value_counts()","0219502d":"df.isnull().sum()","b5b3d35d":"df['households'].value_counts()","15e4a4f6":"df['households'].replace(\"no\", np.nan , inplace=True)\ndf['households'].value_counts()","9f84ee7b":"df.isnull().sum()","911f76a9":"df.dropna(subset=['housing_median_age' , \"population\"] , inplace = True)","efaac78c":"df.isnull().sum()","f8058aa0":"df['total_bedrooms'].value_counts()","5b28c3bb":"df['total_bedrooms'].describe()","37f17d94":"df['total_bedrooms'] = df['total_bedrooms'].replace(np.nan , df['total_bedrooms'].mean())","e4a4ed7f":"df.isnull().sum()","79e5cb7f":"df['households'] = df['households'].fillna(pd.Series(np.random.choice(df['households'] , size = len(df.index))))","8608e899":"df['median_income'] = df['median_income'].fillna(pd.Series(np.random.choice(df['median_income'] , size = len(df.index))))","3be8fdd4":"df.isnull().sum()","805ac28f":"df['households'] = pd.to_numeric(df['households'])","38bb00b5":"df.info()","3a92f5ac":"df.dropna()","23b8715a":"df.hist(bins=100 , figsize=(14,16))\nplt.show()","42548e18":"df.describe()","d5f61dab":"df.plot(kind = \"box\" , subplots = True , figsize = (18,15) ,  layout = (3,3))\nplt.show()","75084a9b":"min_thresold, max_thresold = df.total_rooms.quantile([0.001, 0.992])\nmin_thresold, max_thresold","f1fd777d":"df2 = df[(df.total_rooms<max_thresold) & (df.total_rooms>min_thresold)]\ndf2.shape","63cf7ee5":"min_thresold, max_thresold = df2.population.quantile([0.001, 0.96])\nmin_thresold, max_thresold","1fecccfe":"df3 = df2[(df2.total_bedrooms<max_thresold) & (df2.total_bedrooms>min_thresold)]\ndf3.shape","95733826":"min_thresold, max_thresold = df3.population.quantile([0.001, 0.99])\nmin_thresold, max_thresold","6dd46836":"df4 = df3[(df3.population<max_thresold) & (df3.population>min_thresold)]\ndf4.shape","925363b9":"min_thresold, max_thresold = df3.households.quantile([0.001, 0.998])\nmin_thresold, max_thresold","60662794":"df5 = df4[(df4.households<max_thresold) & (df4.households>min_thresold)]\ndf5.shape","276e4a08":"min_thresold, max_thresold = df5.median_income.quantile([0.001, 0.995])\nmin_thresold, max_thresold","9958881c":"df6 = df5[(df5.median_income<max_thresold) & (df5.median_income>min_thresold)]\ndf6.shape","702eba5c":"min_thresold, max_thresold = df6.median_house_value.quantile([0.001, 0.95])\nmin_thresold, max_thresold","1f5cbdab":"df7 = df6[(df6.median_house_value<max_thresold) & (df6.median_house_value>min_thresold)]\ndf7.shape","7610e839":"df7.plot(kind = \"box\" , subplots = True , figsize = (18,15) ,  layout = (3,3))\nplt.show()","a943d3ba":"df7.hist(bins=50 , figsize=(14,16))\nplt.show()","f85d85af":"df8 = df7.copy()\n","a7c641ae":"df8.columns","1a46055c":"df8.drop('ocean_proximity', inplace=True, axis=1)","d0c4272c":"df8.drop('gender', inplace=True, axis=1)","1a8ab211":"from sklearn.preprocessing import RobustScaler\ntransformer = RobustScaler().fit(df8)\ntransformer","926fc3e2":"transformer.transform(df8)","e4b12a65":"df8.plot(kind = \"box\" , subplots = True , figsize = (18,15) ,  layout = (3,3))\nplt.show()","b861cfa5":"df8.hist(bins=50 , figsize=(14,16))\nplt.show()","6ebf4c53":"plt.figure(figsize=(12,8))\nsns.heatmap( df8.corr(), annot = True)","b1d22e6a":"df9 = df8.copy()","2c72e49c":"df9.columns","c37017e1":"X = df9.drop(\"median_house_value\" , axis = 1).values\ny = df9['median_house_value'].values","22d92bd1":"from sklearn.model_selection import train_test_split\nX_train,X_test,y_train,y_test = train_test_split(X,y, test_size=0.25 , random_state=42)","4ac74865":"from sklearn.preprocessing import StandardScaler\nscale = StandardScaler ()\nX_train = scale.fit_transform(X_train)\nX_test = scale.fit_transform(X_test)","0d892f8d":"from sklearn.linear_model import Ridge\nrid = Ridge()","00accea0":"rid.fit(X_train,y_train)","ce523972":"rid.score(X_train,y_train)","032eac4d":"rid.score(X_test,y_test)","f5e899f2":"plt.scatter(data = df , x=\"longitude\" , y=\"latitude\" , c =df[\"median_house_value\"]  )\nplt.colorbar ()\nplt.show()","b8c25ff7":"df.columns","ae44624c":"round(df['ocean_proximity'].value_counts()\/df.shape[0]*100,2).plot.bar()","d4f0bdbf":"df9['median_house_value'].max()","8d7ca190":"x= df[df['median_house_value']> 300000]","61c410da":"x","5af5b38b":"plt.scatter(data = x , x=\"longitude\" , y=\"latitude\" , c =x[\"median_house_value\"]  )\nplt.colorbar ()\nplt.show()","0d918931":"round(x['gender'].value_counts()\/df.shape[0]*100,2).plot.pie(autopct = '%1.1f%%')","6e109fcf":"# Outliers","be2a0af2":"## Conclusion","76084650":"> from previous chart we noticed that the percantage of females who owns house of high value is more than the percantege of males by 8%","04abe1b3":"> there is around 45% of the houses are near to the ocean - around 30% is inland ","3aebbb88":"#### we detect outliers in ['total_rooms','total_bedrooms','population','households','median_house_value']","b0fb6f22":"#### this is about 15% of the houses that its value more than 300000$","11ac82ac":"> we noticed that there is relationship between house price and its ocean proximity , number of bedrooms and also households\n#### the house price increase when it is near to the ocean and also this area has high population \n#### the number of bedrooms effect on the price but we can compare between each other in the same area .. noticed that the price has big relationship with its ocean proximity ","4d07e6a4":">> From Previous chart we noticed that value of house increase according to its proximity from the ocean and it illustrated only the highest values ","945acb40":"## Model","87168d74":"## DataPreprocessing"}}