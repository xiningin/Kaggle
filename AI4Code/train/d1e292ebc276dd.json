{"cell_type":{"4ffb0661":"code","4d414c96":"code","a3589f30":"code","d9fa2066":"code","8cd01ba5":"code","ea741671":"code","7adfe004":"code","7986a5f1":"code","344eb61f":"code","a568c75b":"code","2013109b":"code","72234cd6":"markdown","d45b086b":"markdown"},"source":{"4ffb0661":"! cat \/kaggle\/input\/dataset-preprocessing\/version_notes.txt","4d414c96":"! apt-get install --assume-yes python-pip > \/dev\/null\n! python2 -m pip install --upgrade pip --user > \/dev\/null\n! python2 -m pip --version","a3589f30":"! apt-get install --assume-yes python-pydot python-pydot-ng graphviz > \/dev\/null\n! python2 -m pip install --user --no-warn-script-location numpy scipy matplotlib ipython jupyter pandas > \/dev\/null\n! python2 -m pip install --user --no-warn-script-location tensorflow==1.15 keras tensorboard_logger pydot graphviz > \/dev\/null","d9fa2066":"import shutil\nshutil.copytree(\"\/kaggle\/input\/w2vv-scripts\/\", \"\/kaggle\/working\/w2vv\")\nshutil.copytree(\"\/kaggle\/input\/w2vv-model-20-14\/train_results\/f8bc9b776008665361f95ebc2fc01be54f2436cf\", \"\/kaggle\/working\/pretrained_model\")\n! mv \/kaggle\/working\/w2vv\/* \/kaggle\/working\/\n\n_ = shutil.copytree(\"\/kaggle\/input\/dataset-preprocessing\/\", \"\/kaggle\/working\/VisualSearch\")","8cd01ba5":"import os\n\nos.symlink(\"\/kaggle\/input\/word2vec-flickr30k\/word2vec\", \"\/kaggle\/working\/VisualSearch\/word2vec\")\nos.symlink(\"\/kaggle\/working\/VisualSearch\/data_w2vvtrain\/FeatureData\", \"\/kaggle\/working\/VisualSearch\/data_w2vvval\/FeatureData\")\nos.symlink(\"\/kaggle\/working\/VisualSearch\/data_w2vvtrain\/FeatureData\", \"\/kaggle\/working\/VisualSearch\/data_w2vvtest\/FeatureData\")\n\nos.environ[\"HOME\"] = \"\/kaggle\/working\/\"","ea741671":"# ! (echo \"import tensorflow as tf\" ; echo \"print tf.test.is_gpu_available()\") | python2","7adfe004":"train_set_name = \"data_w2vvtrain\"\nval_set_name = \"data_w2vvval\"\ntest_set_name = \"data_w2vvtest\"\nfeature_name = \"pyresnet152-pool5os\"\noverwrite = 1\nn_caption = 2\nmax_epochs = 14\nBoW_size = 5\nvocab_name = 'word_vocab_{}.txt'.format(BoW_size)\npretrained_model_path = '\/kaggle\/working\/pretrained_model\/best_model.h5'","7986a5f1":"# Generate a dictionary on the training set\n! sh .\/do_gene_vocab.sh $train_set_name $BoW_size","344eb61f":"# training --init_model_from $pretrained_model_path  --sent_maxlen 100\n! python2 w2vv_trainer.py $train_set_name $val_set_name  $test_set_name \\\n    --overwrite $overwrite --img_feature $feature_name --n_caption $n_caption \\\n    --max_epochs $max_epochs --bow_vocab $vocab_name --rnn_vocab $vocab_name --init_model_from $pretrained_model_path","a568c75b":"# evaluation (Notice that a script file do_test_${testCollection}.sh will be automatically generated when the training process ends.)\n! sh .\/do_test_data_w2vvtest.sh # shoud bedo_test_${testCollection}.sh","2013109b":"# delete files from current directory\n! find .\/ -maxdepth 1 -type f | grep -v \"__\" | xargs rm\n\n# delete training directories\n! rm -rf util\n! rm -rf w2vv\n! rm -rf simpleknn\n! rm -rf pretrained_model\n! rm -rf basic\n\n# move training results\n! mv VisualSearch\/data_w2vvtrain\/train_results .\/\n! mv VisualSearch\/data_w2vvtest\/results .\/\n\n# remove all other redundant data\n! rm -rf VisualSearch","72234cd6":"## Training","d45b086b":"## Environment Setup"}}