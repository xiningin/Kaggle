{"cell_type":{"47c00c1d":"code","2c56db8e":"code","ca145563":"code","0b56e155":"code","841dc569":"code","042f0292":"code","e4808c75":"code","2cadb985":"markdown","0e740ccb":"markdown","0669401d":"markdown","0be5ef5d":"markdown","bc8b54e1":"markdown","7018fbe1":"markdown"},"source":{"47c00c1d":"# This Python 3 environment comes with many helpful analytics libraries installed\n# It is defined by the kaggle\/python docker image: https:\/\/github.com\/kaggle\/docker-python\n# For example, here's several helpful packages to load in \n\nimport numpy as np # linear algebra\nimport pandas as pd # data processing, CSV file I\/O (e.g. pd.read_csv)\nimport matplotlib.pyplot as plt\n\n# Input data files are available in the \"..\/input\/\" directory.\n# For example, running this (by clicking run or pressing Shift+Enter) will list the files in the input directory\n\nimport os\nprint(os.listdir(\"..\/input\"))\nprint(os.listdir(\"..\/\"))\n# Any results you write to the current directory are saved as output.","2c56db8e":"#Importing data\ntraffic_2015 = pd.read_csv(\"..\/input\/dot_traffic_2015.txt.gz\")\ntraffic_2015_stations = pd.read_csv(\"..\/input\/dot_traffic_stations_2015.txt.gz\")\n","ca145563":"#Reviewing information found within dataset\nprint(traffic_2015.columns)\nprint(traffic_2015_stations.columns)","0b56e155":"#Google maps was used to find the fatherst north,south,east,west latitutde and longitude points \nlat_north = 33.506573\nlat_south = 32.568381\n\n#San Diego Latitude and Longitude contains a negative value. Since we are dealing only with data from the US the dataset\n#does not contain negative values \nlong_west = 117.596359 \nlong_east = 116.081831 \n\n#Filtering out all values from the stations that are not within the San Diego region\nsd_traffic_2015_stations = traffic_2015_stations[(traffic_2015_stations[\"longitude\"] <= long_west) \\\n                     & (traffic_2015_stations[\"longitude\"] >= long_east) \\\n                     & (traffic_2015_stations[\"latitude\"] <= lat_north) \\\n                     & (traffic_2015_stations[\"latitude\"] >= lat_south)]\n\n#Dropping all columns except station_id, latitude and longitude in stations data\ndrop_columns = list(sd_traffic_2015_stations.columns.difference(['station_id','latitude','longitude']))\nsd_traffic_2015_stations = sd_traffic_2015_stations.drop(drop_columns, axis = 1)\n\n#We only care about the station id and longitude\n#sd_traffic_2015_stations_ids = sd_traffic_2015_stations[[\"station_id\",\"latitude\",\"longitude\"]]\n\n#This is a list of all the station IDs found within San Diego and will give us the coordinates for those stations\nstation_ids = sorted(sd_traffic_2015_stations[\"station_id\"].unique())\n\n#Testing if station_id has more than one location. This could mean there is a mistake in the dataset\nfor s in station_ids:\n    latitude = 0\n    longitude = 0\n    locations = sd_traffic_2015_stations[sd_traffic_2015_stations[\"station_id\"] == s].loc[:,\"latitude\":\"longitude\"]\n    latitude = locations[\"latitude\"].unique()\n    longitude = locations[\"latitude\"].unique()\n    if latitude.size > 1:\n        print(\"Station id\",s,\"has more than one latitude\")\n        print(latitude)\n    elif longitude.size > 1:\n        print(\"Station id\",s,\"has more than on longitude\")\n        print(longitude)\n\n#Filtering out all values for the California state code\nsd_traffic_2015 = traffic_2015[traffic_2015[\"station_id\"].isin(station_ids)]\n\n#Creating a new data frame that merges the locations to our traffic data\nsd_traffic_2015_locations = pd.merge(sd_traffic_2015, sd_traffic_2015_stations,\\\n                                    left_on='station_id',right_on='station_id')\n\n#Comparing number of station IDs found \nprint(len(sd_traffic_2015_stations[\"station_id\"].unique()))\nprint(len(sd_traffic_2015[\"station_id\"].unique()))\n\nprint(\"IDs that were not found in the traffic dataset:\")\nfor sd in station_ids:\n    if sd not in sd_traffic_2015_locations[\"station_id\"].unique():\n        print(sd)\n\nsd_station_ids = sd_traffic_2015_locations[\"station_id\"].unique()","841dc569":"import plotly\n#Need to create code for a map showing the 13 different locations. From this map we will label the stations to\n#show the different areas in San Diego as well as the station numbers \n","042f0292":"print(sd_traffic_2015_locations.shape)\nsd_traffic_2015_locations.columns","e4808c75":"sd_traffic_mean_year = pd.DataFrame()\ntmp = list()\nfor station in sd_station_ids:\n    tmp = np.mean(sd_traffic_2015_locations[sd_traffic_2015_locations[\"station_id\"] == station].loc\\\n                                [:,\"traffic_volume_counted_after_0000_to_0100\":\\\n                                 \"traffic_volume_counted_after_2300_to_2400\"])\n    sd_traffic_mean_year[station] = tmp\n\nfig = plt.figure(1,figsize=(35, 20))\nax = fig.gca()\nax.set_xticks(np.arange(0, 25, 1))\nplt.title(\"Number of cars vs hours of the day for the year\")\nplt.xlabel(\"Hours of the day\")\nplt.ylabel(\"Number of cars\")\nplt.xlim((0,23))\nfor st in sd_station_ids:\n    plt.plot(range(0,24,1),sd_traffic_mean_year[st])\nplt.legend()\nplt.grid()\n\n","2cadb985":"Now let's take a look at the sd_traffic_2015_locations dataframe. ","0e740ccb":"The purpose of this notebook is to explore Traffic in the San Diego region for 2015. This exploratory analysis was done as part of the SDSU Big Data Hackathon in 2019. \n\nThe data was taken from the following dataset https:\/\/www.kaggle.com\/jboysen\/us-traffic-2015.","0669401d":"Reviewing the columns for both traffic_2015 and traffic_2015_stations we see that traffic_2015 dataframe contains the data that we care about which is the traffic volume and hour the traffic was taken. We are only looking for the traffic in the San Diego region. In traffic_2015 we have the station_id but external searching through the US Transportation website doesn't tell us which stations are within San Diego county.\n\nIn order to obtain this information we will have to look at the latitude (north\/south) and longitude(east\/west) for San Diego and find all stations within this region. ","0be5ef5d":"We will take the average for each out for all stations and plot the data and compare to see how varied the traffic is","bc8b54e1":"We can see from the data that traffic patterns seem to be the same throughout the county. Around 4am traffic increases until about 9am. Traffic will begin decreasing around 5pm - 11pm. ","7018fbe1":"We now have a dataframe containing the traffic throughout the year for San Diego at 13 different locations. The traffic_2015 dataframe does not contain all the station IDs that the traffic_2015_stations dataframe has. Since we do not have the data for those stations we can continue on using the 13 locations. Below shows a map with the different locations. "}}