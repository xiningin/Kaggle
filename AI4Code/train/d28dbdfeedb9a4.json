{"cell_type":{"2530e359":"code","e7e958e9":"code","02e5e6c9":"code","cdfa4571":"code","6c87a5c0":"code","43967346":"code","f48cd8b4":"code","3cbaaf06":"code","4a06fd55":"code","64237a07":"code","ef1d4598":"code","860c57aa":"code","95fe9833":"code","eafb44a2":"code","e30f34c1":"code","a8833c22":"code","d7892b8f":"code","0b49b564":"code","60fcfea0":"code","2dfd773e":"code","a7f7924d":"code","f631edcb":"code","66e2749b":"code","2779d5d1":"code","bb36565a":"code","eefdab73":"code","fa4159fd":"code","52410003":"code","eb37228b":"code","84d73d3b":"code","8a8babc4":"code","10f8f4e4":"code","e914a1cf":"code","159a1692":"code","71c01bf1":"code","244fa2e3":"code","4e28921c":"code","8dd55815":"code","12e83147":"code","bb5c129e":"code","94229fd3":"code","40f109ea":"code","ade6173a":"code","f55e4274":"code","1a47207e":"code","19226d08":"code","10671d78":"code","15ff3adb":"code","5fddf6c0":"code","ee3166a4":"code","8fd760fc":"code","682fa97b":"code","2a500187":"code","fe4b902c":"code","6151755f":"markdown","464a3fd7":"markdown","0a231b1c":"markdown","f6d705bf":"markdown","dc27859e":"markdown","896a30f8":"markdown","65cb3740":"markdown","632ea953":"markdown","5152c697":"markdown","e5394b88":"markdown","65e6897c":"markdown","8c1ed67d":"markdown","5e0b3f3f":"markdown","a8eb1374":"markdown","4f2f5911":"markdown","861f147d":"markdown","3ebf2725":"markdown","d8e70d86":"markdown","ff14bc74":"markdown","ec303a85":"markdown","d948c2ba":"markdown","045ff4ba":"markdown","eb40f201":"markdown","6355cbc2":"markdown","5b96f726":"markdown","afed51d6":"markdown"},"source":{"2530e359":"import pandas as pd\nimport numpy as np\nimport matplotlib.pyplot as plt\nimport seaborn as sb\n\nimport warnings\nwarnings.filterwarnings('ignore')\n\nfrom pylab import rcParams\n\nfrom wordcloud import WordCloud\n\n%matplotlib inline\nimport os\nfor dirname, _, filenames in os.walk('\/kaggle\/input'):\n    for filename in filenames:\n        print(os.path.join(dirname, filename))\n","e7e958e9":"fifa = pd.read_csv('\/kaggle\/input\/fifa19\/data.csv')\nfifa","02e5e6c9":"fifa.head()","cdfa4571":"fifa.info()","6c87a5c0":"fifa.describe()","43967346":"fifa.columns","f48cd8b4":"fifa.drop(['Unnamed: 0','Photo','Flag','Club Logo'], axis = 1, inplace = True)","3cbaaf06":"fifa.columns","4a06fd55":"fifa.shape","64237a07":"fifa.nunique()","ef1d4598":"#Looking for missing values\nfifa.isnull().any()","860c57aa":"#Missing value count in each field\nfifa.isnull().sum()","95fe9833":"#Heat map of missing values\nplt.rcParams['figure.figsize'] = (20, 15)\nsb.heatmap(pd.isnull(fifa))","eafb44a2":"plt.rcParams['figure.figsize'] = (20,15)\nsb.heatmap(fifa[['Age', 'Overall', 'Potential', 'Value', 'Wage',\n                'Acceleration', 'Aggression', 'Agility', 'Balance', 'BallControl', \n                'Body Type','Composure', 'Crossing','Dribbling', 'FKAccuracy', 'Finishing', \n                'HeadingAccuracy', 'Interceptions','International Reputation',\n                'Joined', 'Jumping', 'LongPassing', 'LongShots',\n                'Marking', 'Penalties', 'Position', 'Positioning',\n                'ShortPassing', 'ShotPower', 'Skill Moves', 'SlidingTackle',\n                'SprintSpeed', 'Stamina', 'StandingTackle', 'Strength', 'Vision',\n                'Volleys']].corr(), annot = True,  cmap = 'Blues')\nplt.title('Correlation Heatmap', size = 20)","e30f34c1":"sb.countplot(fifa['Age'], color = 'r')\nplt.title('Count of players', size = 20)","a8833c22":"#Eldest Player\neldest = fifa.sort_values('Age', ascending = False)[['Name', 'Nationality', 'Age','Overall']]\neldest.set_index('Name', inplace = True)\neldest.head(10)","d7892b8f":"#Youngest Player\nyoungest = fifa.sort_values('Age', ascending = True)[['Name', 'Nationality', 'Age','Overall']]\nyoungest.set_index('Name', inplace = True)\nyoungest.head(10)","0b49b564":"sb.countplot(fifa['Position'], color = 'r')\nplt.title('Count of Players in each Position', size = 20)","60fcfea0":"# Top players for each position\ntp = fifa.loc[fifa.groupby(fifa['Position'])['Overall'].idxmax()]\ntp1 = pd.DataFrame(tp, columns = ['Name', 'Position', 'Overall'])\ntp1","2dfd773e":"sb.scatterplot(fifa['Age'], fifa['Overall'])\nplt.title('Scatterplot of Players Age and Overall', size = 20)","a7f7924d":"#Total number of countries\nprint('Total number of countries : {}' .format(fifa['Nationality'].nunique()))","f631edcb":"#Count of players from each country\nfifa['Nationality'].value_counts()","66e2749b":"fifa['Nationality'].value_counts().head(10)","2779d5d1":"wordcloud = WordCloud(background_color = 'black', width = 1920, height = 1080).generate(\" \".join(fifa.Nationality))\nplt.imshow(wordcloud)\nplt.axis('off')\nplt.show()\n","bb36565a":"#Total number of clubs\nprint('Total number of clubs: {}' .format(fifa['Club'].nunique()))","eefdab73":"fifa['Club'].value_counts()","fa4159fd":"fifa['Club'].value_counts().head(100)","52410003":"fifa['Preferred Foot'].value_counts()","eb37228b":"sb.countplot(fifa['Preferred Foot'])","84d73d3b":"#Top 5 Left Footed Players\nleft = fifa[fifa['Preferred Foot'] == 'Left'][['Name','Overall', 'Club','Nationality']].head(10)\nleft","8a8babc4":"wordcloud = WordCloud(background_color = 'black', width = 1920, height = 1080).generate(\" \".join(left.Name))\nplt.imshow(wordcloud)\nplt.axis('off')\nplt.show()\n","10f8f4e4":"#Top 5 Right Footed Players\nright = fifa[fifa['Preferred Foot'] == 'Right'][['Name','Overall', 'Club', 'Nationality']].head(10)\nright","e914a1cf":"wordcloud = WordCloud(background_color = 'black', width = 1920, height = 1080).generate(\" \".join(right.Name))\nplt.imshow(wordcloud)\nplt.axis('off')\nplt.show()","159a1692":"columns=['Crossing', 'Finishing', 'HeadingAccuracy', 'ShortPassing', 'Volleys',\n       'Dribbling', 'Curve', 'FKAccuracy', 'LongPassing', 'BallControl',\n       'Acceleration', 'SprintSpeed', 'Agility', 'Reactions', 'Balance',\n       'ShotPower', 'Jumping', 'Stamina', 'Strength', 'LongShots',\n       'Aggression', 'Interceptions', 'Positioning', 'Vision', 'Penalties',\n       'Composure', 'Marking', 'StandingTackle', 'SlidingTackle', 'GKDiving',\n       'GKHandling', 'GKKicking', 'GKPositioning', 'GKReflexes']\ni=0\nwhile i < len(columns):\n    print('Best {0} : {1}'.format(columns[i],fifa.loc[fifa[columns[i]].idxmax()][1]))\n    i += 1","71c01bf1":"i=0\nbest = []\nwhile i < len(columns):\n    best.append(fifa.loc[fifa[columns[i]].idxmax()][1])\n    i +=1\n    \nbest","244fa2e3":"wordcloud = WordCloud(background_color = 'black', width = 1920, height = 1080).generate(\" \".join(best))\nplt.imshow(wordcloud)\nplt.axis('off')\nplt.show()","4e28921c":"#Top 10 Countries\nfifa.groupby(['Nationality'])['Overall'].max().sort_values(ascending = False).head(10)","8dd55815":"nations = ('Brazil', 'Argentina', 'Portugal', 'England', 'Germany', 'France', 'Belgium', 'Spain')\nfifa_nations = fifa.loc[fifa['Nationality'].isin(nations) & fifa['Overall']]\n\nsb.barplot(x = fifa_nations['Nationality'], y = fifa_nations['Overall'], palette = 'rocket')\nplt.title(label='Player Overall distribution in Top Nations', size=20)","12e83147":"#Top 10 Clubs\nfifa.groupby(['Club'])['Overall'].max().sort_values(ascending = False).head(10)","bb5c129e":"clubs = ('Juventus', 'Real Madrid', 'FC Barcelona', 'Chelsea', 'Manchester United', 'Paris Saint-Germain', 'Manchester City')\nfifa_club = fifa.loc[fifa['Club'].isin(clubs) & fifa['Overall']]\n\nsb.barplot(x = fifa_club['Club'], y = fifa_club['Overall'], palette = 'rocket')\nplt.title(label='Player Overall distribution in Top Clubs', size=20)","94229fd3":"fifa = pd.read_csv('\/kaggle\/input\/fifa19\/data.csv')\nfifa.head()","40f109ea":"#Dropping unnecessary values \ndrop_cols = fifa.columns[28:54]\nfifa = fifa.drop(drop_cols, axis = 1)\nfifa = fifa.drop(['Unnamed: 0','ID','Photo','Flag','Club Logo','Jersey Number','Joined','Special','Loaned From','Body Type', 'Release Clause',\n               'Weight','Height','Contract Valid Until','Wage','Value','Name','Club'], axis = 1)\nfifa = fifa.dropna()\nfifa.head()","ade6173a":"#Converting Real Face into values\ndef face_to_num(fifa):\n    if(fifa['Real Face'] == 'Yes'):\n        return 1\n    else:\n        return 0","f55e4274":"#Converting Preferred foot record to values\ndef foot(fifa):\n    if(fifa['Preferred Foot'] == 'Right'):\n        return 1\n    else:\n        return 0","1a47207e":"#Creating a simplified position variable by combining diff positions\ndef simple_position(fifa):\n    if (fifa['Position'] == 'GK'):\n        return 'GK'\n    elif ((fifa['Position'] == 'RB') or (fifa['Position'] == 'LB') or (fifa['Position'] == 'CB') or (fifa['Position'] == 'LCB') or (fifa['Position'] == 'RCB') or (fifa['Position'] == 'RWB') or (fifa['Position'] == 'LWB')):\n        return 'DF'\n    elif ((fifa['Position'] == 'LDM') or (fifa['Position'] == 'CDM') or (fifa['Position'] == 'RDM')):\n        return 'DM'\n    elif ((fifa['Position'] == 'LM') or (fifa['Position'] == 'LCM') or (fifa['Position'] == 'CM') or (fifa['Position'] == 'RCM') or (fifa['Position'] == 'RM')):\n        return 'MF'\n    elif ((fifa['Position'] == 'LAM') or (fifa['Position'] == 'CAM') or (fifa['Position'] == 'RAM') or (fifa['Position'] == 'LW') or (fifa['Position'] == 'RW')):\n        return 'AM'\n    elif ((fifa['Position'] == 'RS') or (fifa['Position'] == 'ST') or (fifa['Position'] == 'LS') or (fifa['Position'] == 'CF') or (fifa['Position'] == 'LF') or (fifa['Position'] == 'RF')):\n        return 'ST'\n    else:\n        return fifa.Position","19226d08":"#Making list of those nations with more then 250 players\nnat_count = fifa.Nationality.value_counts()\nnat_list = nat_count[nat_count > 250].index.tolist()\n\ndef major_nation(fifa):\n    if(fifa.Nationality in nat_list):\n        return 1\n    else:\n        return 0","10671d78":"#Creating a copy to avoid indexing error\nfifa1 = fifa.copy()","15ff3adb":"#Applying changes to dataset to create new columns\nfifa1['Real_Face'] = fifa1.apply(face_to_num, axis = 1)\nfifa1['Right_Footed'] = fifa1.apply(foot, axis = 1)\nfifa1['Simple_Position'] = fifa1.apply(simple_position, axis = 1)\nfifa1['Nation'] = fifa1.apply(major_nation, axis = 1)","5fddf6c0":"#Splitting the Team Work column\ntempwork = fifa1['Work Rate'].str.split('\/', n = 1, expand = True)\n\nfifa1['Workrate1'] = tempwork[0]\nfifa1['Workrate2'] = tempwork[1]","ee3166a4":"#Droping the original columns\nfifa1 = fifa1.drop(['Work Rate', 'Preferred Foot', 'Real Face', 'Position', 'Nationality'], axis = 1)\nfifa1.head()","8fd760fc":"#Spliting ID\ntarget = fifa1.Overall\nfifa2 = fifa1.drop(['Overall'], axis = 1)","682fa97b":"#Splitting dataset for training and testing\nfrom sklearn.model_selection import train_test_split\nx_train, x_test, y_train, y_test = train_test_split(fifa2, target, test_size = 0.2, random_state = 0)\n\nx_train = pd.get_dummies(x_train)\nx_test = pd.get_dummies(x_test)","2a500187":"from sklearn.ensemble import RandomForestRegressor\nrandom = RandomForestRegressor()\nrandom.fit(x_train, y_train)\ny_pred = random.predict(x_test)","fe4b902c":"from sklearn.metrics import r2_score\nprint('R2 score: '+str(r2_score(y_test, y_pred)))","6151755f":"# FIFA 19 Complete Player Analysis","464a3fd7":"## Preferred Foot Analysis","0a231b1c":"These are the top 10 eldest players. The eldest player is 45 years old","f6d705bf":"Some fields like Photo, Flag, Club logo are not relevent so I will drop them.","dc27859e":"## Overall Analysis for Club & Country","896a30f8":"### Wordcloud for Countries","65cb3740":"## Comparison between Age and Overall","632ea953":"### WordCloud for Best Players","5152c697":"<img src = \"https:\/\/cdn02.nintendo-europe.com\/media\/images\/10_share_images\/games_15\/nintendo_switch_4\/H2x1_NSwitch_EASportsFifa19_image1600w.jpg\">","e5394b88":"From the above chart I can say Right Footed players are more in number when compared to Left Footed i.e almost 3 times the number of Left Footed.","65e6897c":"# Modelling","8c1ed67d":"## Age Analysis","5e0b3f3f":"## Correlation Heatmap of Player Stats","a8eb1374":"More than 100 clubs have the squad of above 30 players.","4f2f5911":"## Country & Club Analysis","861f147d":"From the heatmap I can conclude that 'Loaned From' has large amount of missing data and position based records also have a significant amount of missing data.","3ebf2725":"Highest number of players the club has is 33 and the least number of players the club has is 18.","d8e70d86":"These are the top 10 countries that have the maximum number of players.","ff14bc74":"## Position Analysis","ec303a85":"From the Age analysis I can that most of the players are aged between 19 to 28 Years. ","d948c2ba":"FIFA 19 is a football simulation video game developed by EA Vancouver as part of Electronic Arts' FIFA series. It is the 26th installment in the FIFA series, and was released on 28 September 2018 for PlayStation 3, PlayStation 4, Xbox 360, Xbox One, Nintendo Switch, and Microsoft Windows.The game features the UEFA club competitions for the first time, including the UEFA Champions League and UEFA Europa League and the UEFA Super Cup as well.\n\nAs with FIFA 18, Cristiano Ronaldo featured as the cover athlete of the regular edition: however, following his unanticipated transfer from Spanish club Real Madrid to Italian side Juventus, new cover art was released. He also appeared with Neymar in the cover of the Champions edition. From February 2019, an updated version featured Neymar, Kevin De Bruyne and Paulo Dybala on the cover of the regular edition.\n\n","045ff4ba":"### Best Players","eb40f201":"FIFA 19 Player Dataset consists of 18207 players and their field attributes distributed over 89 fields.","6355cbc2":"### Converting values for modelling","5b96f726":"These are the top 5 players in FIFA 19","afed51d6":"These are the top 10 young players. The youngest player is 16 years old"}}