{"cell_type":{"b788403d":"code","a359b7b5":"code","3a11270c":"code","2f2536e3":"code","afbf36a5":"code","18144abb":"code","0a430a4b":"code","fd912ab4":"markdown","30f8f745":"markdown","aefdac23":"markdown"},"source":{"b788403d":"# Imports and Basic Data Cleaning (Drop Duplicates and NaN data)\nimport numpy as np\nimport pandas as pd \nimport os\nfrom matplotlib import pyplot as plt\nimport seaborn as sns\n!pip install googletrans\nplt.style.use('fivethirtyeight')\n\ndf = pd.read_csv('\/kaggle\/input\/mercadona-es-product-pricing\/thegurus-opendata-mercadona-es-products.csv')\ndf = df.drop_duplicates().reset_index(drop=True)\ndf = df.dropna().reset_index(drop=True)\n","a359b7b5":"df.head()","3a11270c":"df.info()","2f2536e3":"print('Metrics for Price:')\ndf.price.describe()","afbf36a5":"print('Metrics for Reference Price:')\ndf.reference_price.describe()","18144abb":"from googletrans import Translator\ntranslator = Translator()\n\ndf = df.replace('_', ' ',regex=True)\n\ncategory_unique = list(df.category.unique())\nname_unique = df.name.unique()\ncategory_translations = translator.translate(category_unique, src='es', dest='en')\n\ndef translate_category(cat_text):\n    index = category_unique.index(cat_text)\n    return category_translations[index].text\n    \ndf['category_english'] = df['category'].apply(lambda x: translate_category(x))\n    ","0a430a4b":"\nsns.set(style=\"ticks\", color_codes=True)\nplt.style.use('fivethirtyeight')\n\nplt.figure(figsize=(15,5))\ng = sns.countplot(x='category_english',data=df, order=df.category_english.value_counts().iloc[:50].index)\ng.set_xticklabels(g.get_xticklabels(), rotation=40, ha=\"right\")\n#g.fig.set_size_inches(20, 10)\nplt.title('Top 50 Product Categories')\nplt.ylabel('Number of Products')\nplt.xlabel('Product Category')\nplt.show()\n\nplt.figure(figsize=(15,5))\ng = sns.countplot(x='category',data=df, order=df.category.value_counts().iloc[:50].index)\ng.set_xticklabels(g.get_xticklabels(), rotation=40, ha=\"right\")\n#g.fig.set_size_inches(20, 10)\nplt.title('50 Categor\u00edas de Productos m\u00e1s Grandes')\nplt.ylabel('N\u00famero de Producto')\nplt.xlabel('Categoria de Producto')\nplt.show()\n\n\n\ng = sns.catplot(x=\"price\", y=\"category_english\", kind=\"box\", data=df,showmeans=True, meanprops={\"marker\":\"o\",\n                       \"markerfacecolor\":\"white\", \n                       \"markeredgecolor\":\"black\",\n                      \"markersize\":\"10\"}, order=df.category_english.value_counts().iloc[:50].index)\ng.set(xlim=(0, 25))\ng.fig.set_size_inches(40, 20)\nplt.xlabel('Price (\u20ac)')\nplt.ylabel('Product Category')\nplt.title(\"Price by Product Category - Ordered by Category Frequency\")\nplt.show()\n\ng = sns.catplot(x=\"price\", y=\"category\", kind=\"box\", data=df,showmeans=True, meanprops={\"marker\":\"o\",\n                       \"markerfacecolor\":\"white\", \n                       \"markeredgecolor\":\"black\",\n                      \"markersize\":\"10\"}, order=df.category.value_counts().iloc[:50].index)\ng.set(xlim=(0, 25))\ng.fig.set_size_inches(40, 20)\nplt.xlabel('Precio (\u20ac)')\nplt.ylabel('Categoria de Producto')\nplt.title(\"Precio por Categor\u00eda de Producto - Ordenado por Frecuencia de Categor\u00eda\")\nplt.show()\n\n\n\ndf_cat = df.groupby(\"category_english\").median().sort_values(by = 'price', ascending=False)\ng = sns.catplot(x=\"price\", y=\"category_english\", kind=\"box\",showmeans=True, meanprops={\"marker\":\"o\",\n                       \"markerfacecolor\":\"white\", \n                       \"markeredgecolor\":\"black\",\n                      \"markersize\":\"10\"}, data=df, order=df_cat.iloc[:50].index)\ng.set(xlim=(0, 25))\ng.fig.set_size_inches(40, 20)\nplt.xlabel('Price (\u20ac)')\nplt.ylabel('Product Category')\nplt.title(\"Price by Product Category - Ordered by Median Price\")\nplt.show()\n\ndf_cat = df.groupby(\"category\").median().sort_values(by = 'price', ascending=False)\ng = sns.catplot(x=\"price\", y=\"category\", kind=\"box\",showmeans=True, meanprops={\"marker\":\"o\",\n                       \"markerfacecolor\":\"white\", \n                       \"markeredgecolor\":\"black\",\n                      \"markersize\":\"10\"}, data=df, order=df_cat.iloc[:50].index)\ng.set(xlim=(0, 25))\ng.fig.set_size_inches(40, 20)\nplt.xlabel('Precio (\u20ac)')\nplt.ylabel('Categoria de Producto')\nplt.title(\"Precio por Categor\u00eda de Producto - Ordenado por Precio Medio\")\nplt.show()\n\n\n\ndf_cat = df.groupby(\"category_english\").mean().sort_values(by = 'price', ascending=False)\ng = sns.catplot(x=\"price\", y=\"category_english\", kind=\"box\",showmeans=True, meanprops={\"marker\":\"o\",\n                       \"markerfacecolor\":\"white\", \n                       \"markeredgecolor\":\"black\",\n                      \"markersize\":\"10\"}, data=df, order=df_cat.iloc[:50].index)\ng.set(xlim=(0, 45))\ng.fig.set_size_inches(40, 20)\nplt.xlabel('Price (\u20ac)')\nplt.ylabel('Product Category')\nplt.title(\"Price by Product Category - Ordered by Mean Price\")\nplt.show()\n\ndf_cat = df.groupby(\"category\").mean().sort_values(by = 'price', ascending=False)\ng = sns.catplot(x=\"price\", y=\"category\", kind=\"box\",showmeans=True, meanprops={\"marker\":\"o\",\n                       \"markerfacecolor\":\"white\", \n                       \"markeredgecolor\":\"black\",\n                      \"markersize\":\"10\"}, data=df, order=df_cat.iloc[:50].index)\ng.set(xlim=(0, 45))\ng.fig.set_size_inches(40, 20)\nplt.xlabel('Precio (\u20ac)')\nplt.ylabel('Categoria de Producto')\nplt.title(\"Precio por Categor\u00eda de Producto - Ordenado por Precio Promedio\")\nplt.show()","fd912ab4":"# 2. Exploratory Data Analysis \/\/ An\u00e1lisis exploratorio de datos \nFirst, let's translate the category names into english (will deal with translating product names later) \/\/ Primero, traduzcamos los nombres de las categor\u00edas al ingl\u00e9s (se ocupar\u00e1 de traducir los nombres de los productos m\u00e1s adelante)","30f8f745":"Initial threads for investigation:\n1. Why is the average price for shellfish, serrano ham, and fresh fish so high?\n2. Why are so many products categorized perfume and cologne?\n\n\/\/\n\nSubprocesos iniciales para la investigaci\u00f3n:\n1. \u00bfPor qu\u00e9 el precio promedio de mariscos, jam\u00f3n serrano y pescado fresco es tan alto?\n2. \u00bfPor qu\u00e9 hay tantos productos clasificados como perfume y colonia?","aefdac23":"# 1. Basic Data Observation \/\/ Observaciones de datos b\u00e1sicos \n\n"}}