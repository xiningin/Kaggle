{"cell_type":{"155de3aa":"code","b2efa388":"code","78557d05":"code","1806d27c":"code","dcb2a546":"code","f041ed0c":"code","8a96c816":"code","dca96752":"code","52633230":"code","b5db6a7f":"code","9f90fc2e":"code","07d90c1f":"code","dbe1658c":"code","4375b113":"code","94d9c75f":"code","2c01b023":"code","8479db9b":"code","27f8f0ef":"code","a7acb069":"code","20f75a5b":"code","c0a26066":"markdown","dac95356":"markdown","f5baf43f":"markdown","8b31a9aa":"markdown","e0520284":"markdown","15947e78":"markdown","4e95e585":"markdown","acf27f54":"markdown","3ba6a6b0":"markdown"},"source":{"155de3aa":"# packages\n\n# standard\nimport numpy as np\nimport pandas as pd\n\n# plot\nimport matplotlib.pyplot as plt\n\n# wordcloud\nfrom wordcloud import WordCloud, STOPWORDS, ImageColorGenerator","b2efa388":"# load training data (csv)\ndf = pd.read_csv('..\/input\/feedback-prize-2021\/train.csv')","78557d05":"# preview\ndf.head()","1806d27c":"# structure of data frame\ndf.info()","dcb2a546":"# evaluate id\ndf.id.value_counts()","f041ed0c":"# show example having many discourses\ndf[df.id=='71259B3EA87F']","8a96c816":"df.discourse_start.plot(kind='hist', bins=50)\nplt.title('discourse_start')\nplt.grid()\nplt.show()","dca96752":"df.discourse_end.plot(kind='hist', bins=50)\nplt.title('discourse_end')\nplt.grid()\nplt.show()","52633230":"# add length of discourse\ndf['discourse_len'] = df.discourse_end - df.discourse_start","b5db6a7f":"# plot discourse length\ndf.discourse_len.plot(kind='hist', bins=50)\nplt.title('discourse_len')\nplt.grid()\nplt.show()","9f90fc2e":"# evaluate type of discourse\nprint(df.discourse_type.value_counts())\n\ndf.discourse_type.value_counts().plot(kind='bar')\nplt.title('discourse_type')\nplt.grid()\nplt.show()","07d90c1f":"df.groupby(by=['discourse_type'])['discourse_len'].mean().round(2)","dbe1658c":"df.groupby(by=['discourse_type'])['id'].count()","4375b113":"# evaluate type of discourse combined with number\ndf.discourse_type_num.value_counts()","94d9c75f":"stopwords = set(STOPWORDS)","2c01b023":"# collect text\ntext = ' '.join(txt for txt in df.discourse_text)\n\n# show wordcloud\nwordcloud = WordCloud(stopwords=stopwords, max_font_size=50, max_words=500,\n                      width = 600, height = 400,\n                      background_color='white').generate(text)\nplt.figure(figsize=(14,10))\nplt.imshow(wordcloud, interpolation='bilinear')\nplt.axis('off')\nplt.show()","8479db9b":"# filter for a specific type\ndf_temp = df[df.discourse_type=='Lead']","27f8f0ef":"# collect text\ntext = ' '.join(txt for txt in df_temp.discourse_text)\n\n# show wordcloud\nwordcloud = WordCloud(stopwords=stopwords, max_font_size=50, max_words=500,\n                      width = 600, height = 400,\n                      background_color='white').generate(text)\nplt.figure(figsize=(14,10))\nplt.imshow(wordcloud, interpolation='bilinear')\nplt.axis('off')\nplt.show()","a7acb069":"with open('..\/input\/feedback-prize-2021\/train\/0000D23A521A.txt') as f:\n    lines_train = f.readlines()\n    \nlines_train","20f75a5b":"with open('..\/input\/feedback-prize-2021\/test\/0FB0700DAF44.txt') as f:\n    lines_test = f.readlines()\n    \nlines_test","c0a26066":"#### Length by discourse type:","dac95356":"### Full text:","f5baf43f":"### Drilldown to specific type:","8b31a9aa":"#### So we have 15.594 documents and a document can have up to 26 discourses.","e0520284":"<a id='3'><\/a>\n# Text Examples","15947e78":"<a id='2'><\/a>\n# Wordclouds","4e95e585":"#### Frequency by discourse type:","acf27f54":"# Table of Contents\n* [Import and EDA](#1)\n* [Wordclouds](#2)\n* [Text Examples](#3)","3ba6a6b0":"<a id='1'><\/a>\n# Import and EDA"}}