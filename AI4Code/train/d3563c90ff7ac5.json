{"cell_type":{"91b28ada":"code","4d409ff0":"code","1dc6db17":"code","c6929e49":"code","334237d0":"code","986474e0":"code","e255efe7":"code","b82406bc":"code","47e9c6d1":"code","2bb865f3":"code","a6b597cb":"code","e223343e":"code","0daa86f7":"code","acb3908a":"code","6cf084de":"code","53600657":"code","9377da49":"code","9b99f591":"code","e311bcbf":"code","01abd9e9":"markdown","63b25e4d":"markdown","1cc77808":"markdown","b44d48c5":"markdown","12bebd6e":"markdown","20cf5ee0":"markdown","72e05e15":"markdown","1088afd4":"markdown","27f07a13":"markdown","a4e33692":"markdown","3543356f":"markdown"},"source":{"91b28ada":"import numpy as np\nimport pandas as pd\nimport matplotlib.pyplot as plt\nfrom pylab import rcParams\n\nimport seaborn as sns\nworldometers=pd.read_csv('..\/input\/corona-virus-report\/worldometer_data.csv')\nworldometersnew=worldometers[['Country\/Region','TotalCases','TotalDeaths','TotalRecovered','Serious,Critical']].copy()\nworldometersnew.head()\nworldometersnew.iloc[0:6].style.background_gradient(cmap='Reds')","4d409ff0":"sns.set(style='whitegrid')\n\nfrom pylab import rcParams\nrcParams['figure.figsize'] = 5, 7\n\nworldometersnew.iloc[0:4].plot(x='Country\/Region',y='TotalCases',kind='bar',color='Red') # first five rows of dataframe\nplt.legend(['Total Cases In Top 4 Countries'], loc='upper right')","1dc6db17":"\n\nworldometersnew.iloc[5:10].plot(x='Country\/Region',y='TotalCases',kind='barh',color='black') # first five rows of dataframe\n\nrcParams['figure.figsize'] = 4, 3\n\n\n\n","c6929e49":"rcParams['figure.figsize'] = 20, 5\nworldometersnew.iloc[10:50].plot(x='Country\/Region',y='TotalCases',kind='bar',color='Black') # first five rows of dataframe\n\nplt.legend(['Rest Other COuntries Total Cases'], loc='upper right')","334237d0":"timeseries=pd.read_csv('..\/input\/corona-virus-report\/day_wise.csv')\ntimeseriesnew=timeseries[['Date','New recovered']].copy()\n\ntimeseriesnew['Date']=pd.to_datetime(timeseriesnew['Date']) \n\ntimeseriesnew.head()\ntimeseriesnew['month'] = timeseriesnew['Date'].apply(lambda x: x.month)\ntimeseriesnew.set_index('Date', inplace= True)\ntimeseriesnew=timeseriesnew.fillna(method='ffill')\n\ntimeseriesyear=timeseriesnew.copy()\ntsf=timeseriesnew.loc['2020-01-16':'2020-07-15'].copy()\ntsf.drop('month', axis=1,inplace=True)\nplt.figure(figsize=(25,8))\nplt.plot(tsf)\nplt.title('Daily Recovered Cases')\nplt.xlabel('Daily Recovering Cases From January 2020 To July 2020 : Each Column Grid Represents Each Month')\nplt.ylabel('Number Of Cases : Time Series')\nplt.show()\n","986474e0":"timeseries=pd.read_csv('..\/input\/corona-virus-report\/day_wise.csv')\ntimeseriesnew=timeseries[['Date','New deaths']].copy()\n\n\n\n\ntimeseriesnew['Date']=pd.to_datetime(timeseriesnew['Date']) \n\ntimeseriesnew.head()\ntimeseriesnew['month'] = timeseriesnew['Date'].apply(lambda x: x.month)\ntimeseriesnew.set_index('Date', inplace= True)\ntimeseriesnew=timeseriesnew.fillna(method='ffill')\n\ntimeseriesyear=timeseriesnew.copy()\ntsf=timeseriesnew.loc['2020-01-16':'2020-07-15'].copy()\ntsf.drop('month', axis=1,inplace=True)\nplt.figure(figsize=(25,8))\nplt.plot(tsf)\nplt.title('Daily New Deaths')\nplt.xlabel('Daily Deaths From January 2020 To July 2020 : Each Column Grid Represents Each Month')\nplt.ylabel('Number Of Cases : Time Series')\nplt.show()","e255efe7":"sns.set_style(\"whitegrid\")\ntimeseries=pd.read_csv('..\/input\/corona-virus-report\/day_wise.csv')\ntimeseriesnew=timeseries[['Date','New cases']].copy()\ntimeseriesnew['Date']=pd.to_datetime(timeseriesnew['Date']) \n\ntimeseriesnew.head()\ntimeseriesnew['month'] = timeseriesnew['Date'].apply(lambda x: x.month)\ntimeseriesnew.set_index('Date', inplace= True)\ntimeseriesnew=timeseriesnew.fillna(method='ffill')\n\ntimeseriesnew.sample(10)","b82406bc":"timeseriesyear=timeseriesnew.copy()\ntsf=timeseriesnew.loc['2020-05-16':'2020-07-15'].copy()\ntsf.drop('month', axis=1,inplace=True)\nplt.figure(figsize=(25,8))\nplt.plot(tsf)\nplt.title('Daily New Cases')\nplt.xlabel('Daily Cases From January 2020 To July 2020 : Each Column Grid Represents Each Month')\nplt.ylabel('Number Of Cases : Time Series')\nplt.show()","47e9c6d1":"#HO : It is not stationary\n#H1 : It is stationary\nfrom statsmodels.tsa.stattools import adfuller\ndef test_stationarity(timeseries):\n    \n    #Determing rolling statistics\n    rolmean = timeseries.rolling(12).mean()\n    rolstd = timeseries.rolling(12).std()\n\n    #Plot rolling statistics:\n    orig = plt.plot(timeseries, color='blue',label='Original')\n    mean = plt.plot(rolmean, color='red', label='Rolling Mean')\n    std = plt.plot(rolstd, color='black', label = 'Rolling Std')\n    plt.legend(loc='best')\n    plt.title('Rolling Mean & Standard Deviation')\n    plt.show(block=False)\n    \n    #Perform Dickey-Fuller test:\n    print ('Results of :')\n    dftest = adfuller(timeseries, autolag='AIC')\n    dfoutput = pd.Series(dftest[0:4], index=['Test Statistic','p-value','#Lags Used','Number of Observations Used'])\n    for key,value in dftest[4].items():\n        dfoutput['Critical Value (%s)'%key] = value\n    print(dfoutput)\n    if dfoutput[1]<=0.05:\n        print(\"Strong Rejection against null hypothesis(HO). Reject Null Hypothesis. The Data is stationary. \")\n    else:\n        print(\"Weak evidence against null hypothesis.Time series has a unit root. Therefore it is not stationary.\")","2bb865f3":"plt.figure(figsize=(40,8))\ntest_stationarity(tsf)\n","a6b597cb":"plt.figure(figsize=(40,8))\nts_log = np.log(tsf)\nplt.plot(ts_log)","e223343e":"plt.figure(figsize=(40,8))\nplt.figure(figsize=(40,8))\nmoving_avg = ts_log.rolling(12).mean()\nplt.plot(ts_log)\nplt.plot(moving_avg, color='red')","0daa86f7":"plt.figure(figsize=(40,8))\nts_log_moving_avg_diff = ts_log - moving_avg\nts_log_moving_avg_diffwithoutnull=ts_log_moving_avg_diff.replace([np.inf, -np.inf], np.nan)\nts_log_moving_avg_diffwithoutnull.dropna(0,inplace=True)\ntest_stationarity(ts_log_moving_avg_diffwithoutnull)","acb3908a":"plt.figure(figsize=(40,8))\nts_log_diff = ts_log - ts_log.shift()\nts_log_diff.dropna(inplace=True)\ntest_stationarity(ts_log_diff)","6cf084de":"#ACF and PACF plots:\nfrom statsmodels.tsa.stattools import acf, pacf\nlag_acf = acf(ts_log_diff, nlags=20)\nlag_pacf = pacf(ts_log_diff, nlags=20, method='ols')\n#Plot ACF: \nplt.subplot(121) \nplt.plot(lag_acf)\nplt.axhline(y=0,linestyle='--',color='gray')\nplt.axhline(y=-1.96\/np.sqrt(len(ts_log_diff)),linestyle='--',color='gray')\nplt.axhline(y=1.96\/np.sqrt(len(ts_log_diff)),linestyle='--',color='gray')\nplt.title('Autocorrelation Function')\n#Plot PACF:\nplt.subplot(122)\nplt.plot(lag_pacf)\nplt.axhline(y=0,linestyle='--',color='gray')\nplt.axhline(y=-1.96\/np.sqrt(len(ts_log_diff)),linestyle='--',color='gray')\nplt.axhline(y=1.96\/np.sqrt(len(ts_log_diff)),linestyle='--',color='gray')\nplt.title('Partial Autocorrelation Function')\nplt.tight_layout()","53600657":"tss=ts_log.replace([np.inf, -np.inf], np.nan)\ntss.dropna(0,inplace=True)\ntss.head()","9377da49":"from statsmodels.tsa.arima_model import ARIMA\nmodel = ARIMA(ts_log, order=(2, 1, 0))  \nresults_AR = model.fit(disp=-1)  \nplt.plot(ts_log_diff)\nplt.plot(results_AR.fittedvalues, color='red')","9b99f591":"model = ARIMA(ts_log, order=(0, 1, 2))  \nresults_MA = model.fit(disp=-1)  \nplt.plot(ts_log_diff)\nplt.plot(results_MA.fittedvalues, color='red')","e311bcbf":"model = ARIMA(ts_log, order=(2, 1, 2))  \nresults_ARIMA = model.fit(disp=-1)  \nplt.plot(ts_log_diff)\nplt.plot(results_ARIMA.fittedvalues, color='red')","01abd9e9":"# Dickey Fuller Null Hypothesis Test To Test Stationarity","63b25e4d":"# Differencing To Convert the Trend to Eliminate Stationarity","1cc77808":"# AR Model","b44d48c5":"# Auto Regressive Integrated Moving Average Implementation","12bebd6e":"# Exploratory Data Analysis & Time Series Analysis","20cf5ee0":"# ARIMA Model","72e05e15":"# MA Model","1088afd4":"# ACF & PACF Plots for figuring out p,d,q","27f07a13":"## I am very much welcoming feedbacks for the improvement of the model. Please.\n\n\n\n\n","a4e33692":"# Corona Virus July 2020 Updates Through Complete Analysis & Time Series Prediction!\n**You can apply this to test stationarity & eliminate trend as well as seasonality.**","3543356f":"#### Taking the months exclusively where the cases start to peak to find and eliminate the trend"}}