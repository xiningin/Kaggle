{"cell_type":{"eefd682f":"code","8fe946bd":"code","53307182":"code","04fb5db3":"code","d20019bd":"code","251f3f8d":"code","83a30845":"code","a4840fc1":"code","35a00994":"code","7115ad14":"code","6155b448":"code","86b46db9":"code","16764a83":"code","a55bf1fb":"code","4a7a145c":"code","13b61257":"code","007ea6f3":"code","7cc71286":"code","7bf67a47":"code","2257cca1":"code","1ee82f81":"code","d4b3a9d9":"code","7b691f93":"code","3b6833a4":"code","ac82a339":"code","39d2aa64":"code","0a744b78":"code","13738f9b":"code","bbecf987":"code","ff9b996d":"code","97acb626":"code","b695e851":"code","ebd4d29c":"code","068e94eb":"code","0a1db250":"markdown","8d0b7764":"markdown","b92ac4e0":"markdown","e40eb875":"markdown","b1a22b5d":"markdown","c13611d8":"markdown"},"source":{"eefd682f":"import numpy as np\nimport pandas as pd\nimport matplotlib.pyplot as plt\nimport seaborn as sns","8fe946bd":"df=pd.read_csv('..\/input\/covid-world-vaccination-progress\/country_vaccinations.csv')","53307182":"df.head()","04fb5db3":"df.info()","d20019bd":"plt.figure(figsize=(15,5))\nsns.heatmap(df.isnull())","251f3f8d":"df[df['iso_code'].isnull()]['country'].value_counts()","83a30845":"df['iso_code'].fillna('GBR', inplace=True)","a4840fc1":"df.fillna(0, inplace=True)","35a00994":"df['date'] = pd.to_datetime(df['date'])","7115ad14":"df = df.sort_values('date', ascending=True)","6155b448":"df['date'] = df['date'].dt.strftime('%m-%d-%Y')","86b46db9":"df.info()","16764a83":"pip install plotly","a55bf1fb":"import plotly.express as px\nfig = px.choropleth(df,                            # Input Dataframe\n                     locations=\"iso_code\",           # identify country code column\n                     color=\"total_vaccinations\",                     # identify representing column\n                     hover_name=\"country\",              # identify hover name\n                     animation_frame=\"date\",        # identify date column\n                     projection=\"natural earth\",        # select projection\n                     color_continuous_scale= 'RdBu',  # select prefer color scale\n                     range_color=[0,5000000])             # select range of dataset     \nfig.show()          \nfig.write_html(\"example_map.html\")            ","4a7a145c":"USA = df[df['iso_code']== 'USA']\nUSA['cummulative'] = USA['total_vaccinations'].cumsum()","13b61257":"USA","007ea6f3":"import plotly.express as px\nfig = px.choropleth(USA,                            # Input Dataframe\n                     locations=\"iso_code\",           # identify country code column\n                     color=\"cummulative\",                     # identify representing column\n                     hover_name=\"country\",              # identify hover name\n                     animation_frame=\"date\",        # identify date column\n                     projection=\"robinson\",        # select projection\n                     color_continuous_scale= 'magma',  # select prefer color scale\n                     range_color=[0,150000000])             # select range of dataset     \nfig.show()          \nfig.write_html(\"example_map.html\")            ","7cc71286":"df['iso_code'].value_counts()[:10]","7bf67a47":"a = pd.DataFrame(df[df['iso_code']== 'USA']['total_vaccinations'].cumsum()).reset_index()\nb = pd.DataFrame(df[df['iso_code']== 'GBR']['total_vaccinations'].cumsum()).reset_index()\nc = pd.DataFrame(df[df['iso_code']== 'CAN']['total_vaccinations'].cumsum()).reset_index()\nd = pd.DataFrame(df[df['iso_code']== 'CHN']['total_vaccinations'].cumsum()).reset_index()\ne = pd.DataFrame(df[df['iso_code']== 'ISR']['total_vaccinations'].cumsum()).reset_index()\nf = pd.DataFrame(df[df['iso_code']== 'RUS']['total_vaccinations'].cumsum()).reset_index()\ng = pd.DataFrame(df[df['iso_code']== 'MEX']['total_vaccinations'].cumsum()).reset_index()\n\nan = a.append(b)\nbn = an.append(c)\ncn = bn.append(d)\ndn = cn.append(e)\nen = dn.append(f)\nfinal = en.append(g)","2257cca1":"df = df.reset_index()\nfinal['TOTAL VACC'] = final['total_vaccinations']*1","1ee82f81":"df_5 = df.merge(final, left_on='index', right_on='index', how='inner')","d4b3a9d9":"df_5.info()","7b691f93":"fig = px.scatter(df_5, x=\"daily_vaccinations\", y=\"TOTAL VACC\", animation_frame=\"date\", animation_group=\"iso_code\",\n           hover_name=\"iso_code\", text='iso_code',range_x=[0,1500000], range_y=[0,175000000])\n\nfig.update_traces(marker=dict(size=40,  color='DarkSlateGrey'))\n\nfig.show()\n","3b6833a4":"\nfig = px.choropleth(df_5,                            # Input Dataframe\n                     locations=\"iso_code\",          # identify country code column\n                     color=\"TOTAL VACC\",                     # identify representing column\n                     hover_name=\"country\",              # identify hover name\n                     animation_frame=\"date\",        # identify date column\n                     projection=\"natural earth\",        # select projection\n                     color_continuous_scale= 'RdBu',  # select prefer color scale\n                     range_color=[0,40000000], title='Top 7 Countries vaccine progress!')             # select range of dataset     \nfig.show()          \nfig.write_html(\"example_map.html\")            ","ac82a339":"df_5.to_csv('dataframe.csv', index=False)","39d2aa64":"df_f = df_5.pivot_table(values='TOTAL VACC', index=['date'], columns = 'iso_code')\ndf_f[:20]","0a744b78":"df_f = df_f.reset_index()","13738f9b":"df_f.columns","bbecf987":"df_f['date'] = pd.to_datetime(df_f['date'])\ndf_f = df_f.sort_values('date', ascending=True)\ndf_f['date'] = df_f['date'].dt.strftime('%m\/%d\/%Y')\ndf_f = df_f.fillna(0)\ndf_f[['CAN', 'CHN', 'GBR', 'ISR', 'MEX', 'RUS', 'USA']] = df_f[['CAN', 'CHN', 'GBR', 'ISR', 'MEX', 'RUS', 'USA']].cumsum()\ndf_f","ff9b996d":"can = df_f[['date','CAN']]\ncan['iso'] = 'CAN'\ncan = can.rename(columns={'CAN': 'Value'})\n\nchn = df_f[['date','CHN']]\nchn['iso'] = 'CHN'\nchn = chn.rename(columns={'CHN': 'Value'})\n\ngbr = df_f[['date','GBR']]\ngbr['iso'] = 'GBR'\ngbr = gbr.rename(columns={'GBR': 'Value'})\n\nisr = df_f[['date','ISR']]\nisr['iso'] = 'ISR'\nisr = isr.rename(columns={'ISR': 'Value'})\n\nmex = df_f[['date','MEX']]\nmex['iso'] = 'MEX'\nmex = mex.rename(columns={'MEX': 'Value'})\n\nrus = df_f[['date','RUS']]\nrus['iso'] = 'RUS'\nrus = rus.rename(columns={'RUS': 'Value'})\n\nusa = df_f[['date','USA']]\nusa['iso'] = 'USA'\nusa = usa.rename(columns={'USA': 'Value'})","97acb626":"final_df = can.append(chn).append(gbr).append(isr).append(mex).append(rus).append(usa)\nfinal_df['date'] = pd.to_datetime(final_df['date'])\nfinal_df = final_df.sort_values('date',ascending=True)\nfinal_df['date'] = final_df['date'].dt.strftime('%m\/%d\/%Y')\nfinal_df","b695e851":"final_df['Value'] = final_df['Value']\/10000","ebd4d29c":"fig = px.bar(final_df, y=\"iso\", x=\"Value\", animation_frame=\"date\", animation_group=\"iso\",\n           hover_name=\"iso\",range_x=[0,3500000], color='iso')\n\nfig.show()","068e94eb":"final_df.to_csv('final_df.csv', header=False)","0a1db250":"# Due to data inconsistency, only Canada Mexico and USA were recorded properly","8d0b7764":"# Everyday total vaccinations by each country","b92ac4e0":"* # All the missing data will be filled with 0 rather than null \n* # This will allow us to have the datatypes as integers\n* # Some of the ISO codes are missing, this will be dealt with seperately","e40eb875":"# Cummulative Vaccination since 22nd Dec in USA","b1a22b5d":"# Data is now ready!","c13611d8":"* It seems that the ISO Code for these 4 countries are mssing. \n* All these countries are part of United Kingdom\n* Using the weblink I found the ISO Code for UK which is GBR"}}