{"cell_type":{"aaa77029":"code","b9a53d39":"code","4a5548d5":"code","b2366df8":"code","9af846b6":"code","2e1ca14a":"code","9fcdb718":"code","01362791":"code","ae204d6d":"markdown","a81e418d":"markdown"},"source":{"aaa77029":"# This Python 3 environment comes with many helpful analytics libraries installed\n# It is defined by the kaggle\/python Docker image: https:\/\/github.com\/kaggle\/docker-python\n# For example, here's several helpful packages to load\n\nimport numpy as np # linear algebra\nimport pandas as pd # data processing, CSV file I\/O (e.g. pd.read_csv)\n\n# Input data files are available in the read-only \"..\/input\/\" directory\n# For example, running this (by clicking run or pressing Shift+Enter) will list all files under the input directory\n\nimport os\nfor dirname, _, filenames in os.walk('\/kaggle\/input'):\n    for filename in filenames:\n        print(os.path.join(dirname, filename))\n\n# You can write up to 5GB to the current directory (\/kaggle\/working\/) that gets preserved as output when you create a version using \"Save & Run All\" \n# You can also write temporary files to \/kaggle\/temp\/, but they won't be saved outside of the current session","b9a53d39":"import warnings; warnings.simplefilter('ignore')\nimport pandas as pd\nimport numpy as np\n%matplotlib inline\nimport matplotlib.pyplot as plt\nimport seaborn as sns; sns.set()\nfrom scipy.cluster.hierarchy import dendrogram\nfrom sklearn.cluster import AgglomerativeClustering","4a5548d5":"FX = pd.read_csv('\/kaggle\/input\/foreign-exchange-rates-per-dollar-20002019\/Foreign_Exchange_Rates.csv')\n\nFX.drop('Unnamed: 0', axis=1, inplace=True)\n\n# rename long feature names to ISO Currency Code\nFX.rename(columns={\n    'AUSTRALIA - AUSTRALIAN DOLLAR\/US$':            'AUD',\n    'EURO AREA - EURO\/US$':                         'EUR',\n    'NEW ZEALAND - NEW ZELAND DOLLAR\/US$':          'NZD',\n    'UNITED KINGDOM - UNITED KINGDOM POUND\/US$':    'GBP',\n    'BRAZIL - REAL\/US$':                            'BRL',\n    'CANADA - CANADIAN DOLLAR\/US$':                 'CAD',\n    'CHINA - YUAN\/US$':                             'CNY',\n    'HONG KONG - HONG KONG DOLLAR\/US$':             'HKD',\n    'INDIA - INDIAN RUPEE\/US$':                     'INR',\n    'KOREA - WON\/US$':                              'KRW',\n    'MEXICO - MEXICAN PESO\/US$':                    'MXN',\n    'SOUTH AFRICA - RAND\/US$':                      'ZAR',\n    'SINGAPORE - SINGAPORE DOLLAR\/US$':             'SGD',\n    'DENMARK - DANISH KRONE\/US$':                   'DKK',\n    'JAPAN - YEN\/US$':                              'JPY',\n    'MALAYSIA - RINGGIT\/US$':                       'MYR',\n    'NORWAY - NORWEGIAN KRONE\/US$':                 'NOK',\n    'SWEDEN - KRONA\/US$':                           'SEK',\n    'SRI LANKA - SRI LANKAN RUPEE\/US$':             'LKR',\n    'SWITZERLAND - FRANC\/US$':                      'CHF',\n    'TAIWAN - NEW TAIWAN DOLLAR\/US$':               'TWD',\n    'THAILAND - BAHT\/US$':                          'THB'\n}, inplace=True)\n\nFX.replace('ND', np.nan, inplace=True)\nFX.dropna(inplace=True)\nFX['Time Serie'] = pd.to_datetime(FX['Time Serie'])\n\nccys = ['AUD','EUR','NZD','GBP','BRL','CAD','CNY','HKD','INR','KRW','MXN',\n        'ZAR','SGD','DKK','JPY','MYR','NOK','SEK','LKR','CHF','TWD','THB']\n\nFX0 = FX.copy()\nFX.set_index('Time Serie',inplace=True)\n\n# FX: daily %change, FX0: Log scaled index\nfor c in ccys:\n    FX[c] = FX[c].astype('float')\n    FX[c] = FX[c].pct_change()\n    FX0[c] = FX0[c].astype('float')\n    FX0[c] = np.log(FX0[c]\/FX0.loc[0, c])\n\nFX.dropna(inplace=True)\nFX0.set_index('Time Serie', inplace=True)","b2366df8":"def plot_linechart(feat, title, axpos):\n    sns.lineplot(data=FX0[feat], ax=axpos)\n    axpos.set_title(title)\n    axpos.set_xlabel(None)\n    axpos.set_ylabel('Log Scale')\n\nfig, ax = plt.subplots(5, 1, sharey=True, sharex=True, figsize=(16,20))\nplot_linechart(['HKD','CNY','MYR'], 'Currencies including Dollar-pegged period in dataset', ax[0])\nplot_linechart(['EUR','DKK','NOK','SEK','CHF','GBP'], 'European Currenies', ax[1])\nplot_linechart(['KRW','SGD','TWD','THB','JPY'], 'East Asian Currencies', ax[2])\nplot_linechart(['AUD','NZD','INR','LKR'], 'Currencies in South Asia and Oceania', ax[3])\nplot_linechart(['BRL','CAD','MXN','ZAR'], 'Americas and Africa', ax[4])","9af846b6":"# hereafter, limit features non-Dollar-pegged Currencies\nFX1 = FX.drop(['HKD', 'CNY', 'MYR'], axis=1)\n\n# sort features by correlations to EUR\nordered_ccy = FX1.corr()['EUR'].sort_values(ascending=False).index\n\nfig, ax = plt.subplots(figsize=(16,5))\nsns.boxplot(data=FX1[ordered_ccy], ax=ax)\nax.set_title('%change Distribution');","2e1ca14a":"fig, ax = plt.subplots(figsize=(15,15))\nsns.heatmap(FX1[ordered_ccy].corr(), square=True, cmap='coolwarm', center=0, ax=ax);","9fcdb718":"def plot_dendrogram(model, **kwargs):\n    label_list = FX1.columns.to_list()\n    counts = np.zeros(model.children_.shape[0])\n    n_samples = len(model.labels_)\n    for i, merge in enumerate(model.children_):\n        current_count = 0\n        for child_idx in merge:\n            if child_idx < n_samples:\n                current_count += 1  # leaf node\n            else:\n                current_count += counts[child_idx - n_samples]\n        counts[i] = current_count\n\n    linkage_matrix = np.column_stack([model.children_, model.distances_,\n                                      counts]).astype(float)\n\n    dendrogram(linkage_matrix, labels=label_list, **kwargs)\n\nfurthest_euc = AgglomerativeClustering(distance_threshold=0, n_clusters=None,\n                                       linkage='complete').fit(FX1.T)\nfig,ax = plt.subplots(figsize=(15,6))\nplot_dendrogram(furthest_euc, truncate_mode='level', ax=ax)\nax.set_title('Hierarchical Clustering based on Euclid Norm');","01362791":"furthest_cos = AgglomerativeClustering(distance_threshold=0, n_clusters=None,\n                                       linkage='complete', affinity='cosine').fit(FX1.T)\nfig,ax = plt.subplots(figsize=(15,6))\nplot_dendrogram(furthest_cos, truncate_mode='level', ax=ax)\nax.set_title('Hierarchical Clustering based on Cosine Similality');","ae204d6d":"* Some Currencies were, or has been under Dollar-Peg-System. During pegged period, their exchange rates to US Dollar were fixed\n* ","a81e418d":"Grouping by Hierarchical Clustering  \n* I adopt 'Furtheest Distance Method' here, because it may use both 'Euclid Norm' and 'Cosine Similality' as distance between clusters  \n* I feel outcomes 'based on Cosine Similality' is more intuitive than 'based on Euclid Norm'. "}}