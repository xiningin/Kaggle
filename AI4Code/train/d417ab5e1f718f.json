{"cell_type":{"bbfd8ece":"code","f79b9e6a":"code","d23737ed":"code","41b2fc6f":"code","be6e02d9":"code","b5135fe7":"code","826d8770":"code","085e544e":"code","a50ca2a2":"code","a9f263a0":"code","f2748572":"code","91efbc89":"markdown","6db6bbf3":"markdown","7b2c155d":"markdown","ab77d2cf":"markdown","91a5ed2f":"markdown","0d896e29":"markdown","fbaf0f26":"markdown","644f0ccc":"markdown","beaf9e06":"markdown"},"source":{"bbfd8ece":"!pip install backtrader backtrader_plotting","f79b9e6a":"import os, sys, argparse\nimport pandas as pd\nimport backtrader as bt\nimport backtrader.analyzers as btanalyzers\nfrom backtrader_plotting import Bokeh\nfrom backtrader_plotting.schemes import Blackly","d23737ed":"%matplotlib inline","41b2fc6f":"from shutil import copyfile\n\ncopyfile(src = \"..\/input\/strategies\/GoldenCross.py\", dst = \"..\/working\/GoldenCross.py\")\ncopyfile(src = \"..\/input\/strategies\/BuyAndHold.py\", dst = \"..\/working\/BuyAndHold.py\")","be6e02d9":"from GoldenCross import GoldenCross\n# from BuyAndHold import BuyAndHold","b5135fe7":"cerebro = bt.Cerebro()\ncerebro.broker.setcash(1e5)","826d8770":"spy_prices = pd.read_csv('..\/input\/quantitative-trading\/SPY.csv', index_col=\"Date\", parse_dates=True)\nfeed = bt.feeds.PandasData(dataname=spy_prices)\ncerebro.adddata(feed)","085e544e":"cerebro.addstrategy(GoldenCross)\n# cerebro.addstrategy(BuyAndHold)","a50ca2a2":"# \u4ea4\u6613\u5206\u6790 (\u7b56\u7565\u52dd\u7387)\ncerebro.addanalyzer(bt.analyzers.TradeAnalyzer, _name='TradeAnalyzer')\n\n# \u4ea4\u6613\u57fa\u672c\u7d71\u8a08\u5206\u6790\ncerebro.addanalyzer(bt.analyzers.PeriodStats, _name='PeriodStats')\n\n# \u56de\u843d\u7d71\u8a08\ncerebro.addanalyzer(bt.analyzers.DrawDown, _name='DrawDown')\n\n# \u671f\u671b\u7372\u5229\/\u6a19\u6e96\u5dee\ncerebro.addanalyzer(bt.analyzers.SQN, _name='SQN')","a9f263a0":"print('\u6295\u8cc7 > \u8d77\u59cb\u8cc7\u7522 %.2f \ud83d\udcb2' % cerebro.broker.getvalue())\ncerebro.run()\nprint('\u6295\u8cc7 > \u7d50\u675f\u8cc7\u7522 %.2f \ud83d\udcb2' % cerebro.broker.getvalue())","f2748572":"b = Bokeh(style='bar', plot_mode='single', scheme=Blackly())\ncerebro.plot(b)","91efbc89":"## \u8a2d\u5b9a\u5206\u6790","6db6bbf3":"## \u904b\u884c\u74b0\u5883","7b2c155d":"### \u5efa\u7acb\u6846\u67b6\u904b\u884c\u74b0\u5883","ab77d2cf":"> \u9ec3\u91d1\u4ea4\u53c9\u662f\u4e00\u96bb\u7d14\u6280\u8853\u6307\u6a19\uff0c\u662f\u4e00\u500b\u770b\u6f32\u4fe1\u865f\uff0c\u900f\u904e\u5169\u689d\u79fb\u52d5\u5e73\u5747\u7dda\u5c31\u80fd\u77e5\u9053\u662f\u5426\u8a72\u505a\u591a\u9032\u5834 - [\u9177\u5916\u532f](https:\/\/kknews.cc\/invest\/95a5brq.html)","91a5ed2f":"### \u8a2d\u5b9a\u7b56\u7565","0d896e29":"## \u5be6\u4f5c\u9ec3\u91d1\u4ea4\u53c9\u7b56\u7565","fbaf0f26":"## \u7e6a\u88fd\u5716\u8868","644f0ccc":"### \u8a2d\u5b9a\u521d\u59cb\u74b0\u5883","beaf9e06":"\u96a8\u8457\u5916\u532f\u6295\u8cc7\u4ea4\u6613\u7684\u6d41\u884c\uff0c\u9ec3\u91d1\u4ea4\u53c9\u5df2\u88ab\u8d8a\u4f86\u8d8a\u591a\u5730\u88ab\u5916\u532f\u6295\u8cc7\u8005\u6240\u4f7f\u7528\uff0c\u7d93\u5178\u7684\u9ec3\u91d1\u4ea4\u53c9\u4e3b\u8981\u5305\u62ec\u4ee5\u4e0b\u5e7e\u500b\u56e0\u7d20\uff1a\n- \u65e5\u7dda\u5716\n- 200 \u65e5\u79fb\u52d5\u5e73\u5747\u7dda\uff1a\u5982\u679c\u79fb\u52d5\u5e73\u5747\u7dda\u7684\u5468\u671f\u8d85\u904e200\uff0c\u5b83\u5c31\u6703\u8b8a\u5f97\u5e73\u5766\n- 50 \u65e5\u79fb\u52d5\u5e73\u5747\u7dda\uff1a\u66f4\u300c\u9748\u6d3b\u300d\uff0c\u66f4\u63a5\u8fd1\u65bc\u50f9\u683c\u884c\u70ba\uff0c\u79fb\u52d5\u901f\u5ea6\u66f4\u5feb\n\n\u65e5\u7dda\u5716\u662f\u9ec3\u91d1\u4ea4\u53c9\u7b56\u7565\u7684\u95dc\u9375\u8981\u7d20\u3002\u7531\u65bc\u9ec3\u91d1\u4ea4\u53c9\u662f\u4e00\u500b\u6bd4\u8f03\u65e9\u7684\u6280\u8853\u6307\u6a19\uff0c\u7576\u6642\u7684\u4fe1\u606f\u6280\u8853\u9084\u4e26\u4e0d\u767c\u9054\uff0c\u4ea4\u6613\u8005\u5927\u591a\u50be\u5411\u65bc\u4f7f\u7528\u65e5\u7dda\u5716\u3002\n\n\u9019\u908a\u4ee5\u7279\u65af\u62c9\u80a1\u50f9\u8aaa\u660e\uff0c \u85cd\u7dda \u662f 200 \u65e5\u5747\u7dda\u3001\u7d05\u7dda \u662f 50 \u65e5\u5747\u7dda\uff0c\u7576 50 \u79fb\u52d5\u5e73\u5747\u7dda\u5347\u81f3200\u79fb\u52d5\u5e73\u5747\u7dda\u6642\uff0c\u5e02\u5834\u9032\u5165\u4e0a\u6f32\u8da8\u52e2\n\n\u548c\u5927\u591a\u6578\u6280\u8853\u6307\u6a19\u4e00\u6a23\uff0c\u79fb\u52d5\u5e73\u5747\u7dda\u4e5f\u5177\u6709\u4e00\u5b9a\u7684\u6eef\u5f8c\u6027\u3002\u56e0\u6b64\uff0c\u9019\u610f\u5473\u8457\u5716\u8868\u4e0a\u7684\u9ec3\u91d1\u4ea4\u53c9\u51fa\u73fe\u7684\u6642\u5019\uff0c\u5e02\u5834\u5be6\u969b\u4e0a\u5df2\u7d93\u5728\u4e0a\u6f32\u4e86\u3002\n\n\u51fa\u73fe\u4e0a\u6f32\u8da8\u52e2\u5f8c\u5728\u4f4e\u9ede\u8cb7\u5165\u662f\u4e00\u7a2e\u5f88\u5e38\u898b\u7684\u4ea4\u6613\u65b9\u5f0f\uff0c\u56e0\u70ba\u6b64\u6642\u8f03\u6162\u7684\u90a3\u689d\u79fb\u52d5\u5e73\u5747\u7dda\u53ef\u4f5c\u70ba\u652f\u6490\uff0c\u50f9\u683c\u66ab\u6642\u4e0d\u6703\u4e0b\u8dcc\uff0c\u7576\u50f9\u683c\u56de\u843d\u81f3\u6b64\u5747\u7dda\u6642\uff0c\u53ef\u9032\u5834\u505a\u591a\u3002"}}