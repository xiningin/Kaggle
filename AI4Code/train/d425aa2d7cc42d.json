{"cell_type":{"e3585bc1":"code","75d2911a":"code","640cc987":"code","a54e9c2e":"code","609f02a0":"code","e89dd5e6":"code","3df330d7":"code","dc3ecddc":"code","0c6a0853":"code","2fe3c721":"code","0715d772":"code","238fd708":"code","a427e310":"code","3e7c9731":"code","4f4d1feb":"code","78bfddd4":"code","f5ec66c0":"code","aad5a10a":"code","617b643e":"code","04142ba0":"code","815f1070":"code","c37450ad":"code","8b441f84":"code","47cc0e44":"code","4cc3bc86":"code","70d61808":"code","b58b5f55":"code","82d4bff8":"code","f433fbe7":"code","c0be4d9e":"code","7e911b4d":"code","d06b491d":"markdown","fe8ac413":"markdown","efd45aa9":"markdown","a8c9456b":"markdown","40e91730":"markdown","dd7b2135":"markdown","2cc2ec8c":"markdown","fd914ef9":"markdown","8110af87":"markdown","f486a9ae":"markdown","de037ad9":"markdown","0f0069bc":"markdown","603690c1":"markdown","b5570704":"markdown","5456343b":"markdown","3f253672":"markdown","f341aaca":"markdown","283a2b01":"markdown"},"source":{"e3585bc1":"#   plan to use.\nimport numpy as np\nimport os\nimport pandas as pd\nimport matplotlib.pyplot as plt\nimport seaborn as sns\n\n","75d2911a":"\ndata=pd.read_csv('\/kaggle\/input\/noshowappointments\/KaggleV2-May-2016.csv')\ndata.head()","640cc987":"data.shape","a54e9c2e":"data.info()","609f02a0":"data.duplicated().sum()","e89dd5e6":"#  ID should be int\n# \"PatientId\" will be converted to int\n\ndata.PatientId = data.PatientId.astype('int64')\ndata.PatientId.dtypes\n","3df330d7":"data.describe()","dc3ecddc":"# Age looks weird\nlen(data[data[\"Age\"] == 0]),len(data[data[\"Age\"] < 0])","0c6a0853":"# Convert \"ScheduledDay\" and \"AppointmentDay\" columns into date-time\n\ndata.ScheduledDay = pd.to_datetime(data.ScheduledDay)\ndata.AppointmentDay = pd.to_datetime(data.AppointmentDay)\ndata[['ScheduledDay','AppointmentDay']].dtypes","2fe3c721":"# Get time columns from date-time columns\ndata['ScheduledHour'] = pd.to_datetime(data.ScheduledDay).dt.hour\ndata['AppointmentTime'] = pd.to_datetime(data.AppointmentDay).dt.time\n\n# Convert time included date-time columns to only date columns\ndata['ScheduledDay'] = data['ScheduledDay'].dt.date\ndata['AppointmentDay'] = data['AppointmentDay'].dt.date\n\n# Get month and week of day information from dates\ndata['AppointmentWeekDay'] = pd.to_datetime(data.AppointmentDay).dt.day_name()\ndata['AppointmentMonth'] = pd.to_datetime(data.AppointmentDay).dt.month_name()\n\n# Calculate waiting days before appointment\ndata['WaitingDays'] = data.AppointmentDay - data.ScheduledDay\n\n# Convert datatype to int\ndata.WaitingDays = data.WaitingDays.astype('str')\ndata.WaitingDays = data.WaitingDays.apply(lambda x: x.split()[0])\ndata.WaitingDays = data.WaitingDays.astype('int64')","0715d772":"data.head()","238fd708":"data.AppointmentTime.nunique()","a427e310":"# drop `AppointmentTime` column\ndata.drop(columns='AppointmentTime',inplace=True)","3e7c9731":"#Is there any scheduled day after appointment day? if True WaitingDays will be negative and this is impossible\ndf_error = data[data.WaitingDays < 0 ]\ndf_error","4f4d1feb":"#Is there any scheduled day after appointment day? if True WaitingDays will be negative and this is impossible\n# Remove this rows from dataset\n\ndata = data[~(data.WaitingDays <0)]","78bfddd4":"data['IsMale'] = data['Gender'].replace({'F': 0, 'M': 1})","f5ec66c0":"sns.countplot(data['No-show'], palette='magma')\nplt.title(\"Classes relation\")\nplt.show()","aad5a10a":"fig, (ax1, ax2) = plt.subplots(ncols=2, sharey=True)\nsns.countplot(x='IsMale', data=data, hue='No-show', ax=ax1, palette='magma');\nsns.countplot(x='SMS_received', data=data, hue='No-show', ax=ax2, palette='magma');\nfig.set_figwidth(12)\nfig.set_figheight(4)","617b643e":"fig, (ax1, ax2, ax3) = plt.subplots(ncols=3, sharey=True)\nsns.countplot(x='Hipertension', data=data, hue='No-show', ax=ax1, palette='magma');\nsns.countplot(x='Diabetes', data=data, hue='No-show', ax=ax2, palette='magma');\nsns.countplot(x='Alcoholism', data=data, hue='No-show', ax=ax3, palette='magma');\nfig.set_figwidth(12)\nfig.set_figheight(4)","04142ba0":"# AppointmentMonth and Show relationship\nsns.countplot(x='AppointmentMonth', data=data, hue='No-show', palette='magma')\nfig.set_figwidth(15)\nfig.set_figheight(5)","815f1070":"# AppointmentWeekDay and Show relationship\nsns.countplot(x='AppointmentWeekDay', data=data, hue='No-show', palette='magma')\nfig.set_figwidth(15)\nfig.set_figheight(5)","c37450ad":"sns.countplot(x='ScheduledHour', data=data, hue='No-show', palette='magma')\nfig.set_figwidth(15)\nfig.set_figheight(5)","8b441f84":"data.head()","47cc0e44":"#i will drop Age , PatientId, AppointmentID,Gender,'AppointmentDay', 'ScheduledDay'\nmodel_data=data.drop(columns=['Age' , 'PatientId', 'AppointmentID','Gender','AppointmentDay', 'ScheduledDay'])\nmodel_data.head()","4cc3bc86":"model_data = pd.get_dummies(model_data, columns=['Neighbourhood','Handcap', 'AppointmentWeekDay', 'AppointmentMonth'], prefix=['Neighbourhood','Handicap', 'AppointmentWeekDay', 'AppointmentMonth'])","70d61808":"model_data.head()","b58b5f55":"from sklearn.model_selection import train_test_split\nfrom sklearn.metrics import classification_report,accuracy_score\n\nY = model_data['No-show']\nX = model_data.drop('No-show',axis=1)","82d4bff8":"x_train, x_validation, y_train, y_validation = train_test_split(X,Y,test_size=0.3,random_state=254,shuffle=True)","f433fbe7":"from sklearn.neural_network import MLPClassifier\nclf = MLPClassifier(solver='adam', alpha=1e-08,hidden_layer_sizes=(8,),activation='logistic', random_state=1,batch_size='auto',shuffle=True,max_fun=15000)\nclf = clf.fit(x_train, y_train)\npredictCLF = clf.predict(x_validation)","c0be4d9e":"print(classification_report(predictCLF,y_validation))","7e911b4d":"acc_CLF=accuracy_score(predictCLF,y_validation)\nprint(acc_CLF)","d06b491d":"<a id='conclusions'><\/a>\n## Conclusions\n* no null values or missing but there is records have zero or negative one in age\n* no duplicates \n* Showing rate for men and women are similar.\n* Hypertension is an important factor for higher attendance frequency.\n* no-show ratio is high in SMS received group than unreceived group.\n* There is no significant difference between the days of the week in terms of not missing an appointment.\n* data is imbalanced ","fe8ac413":"* in (May) patients make an appointment","efd45aa9":"* It is rare for patients with hypertension to not go to an appointment.\n* The graphs above show that hypertension is more common than diabetes in the patients participating in the study.\n\n","a8c9456b":"<a id='intro'><\/a>\n## Introduction\n\n`Context`\n\nA person makes a doctor appointment, receives all the instructions and no-show. Who to blame?\n\n\n`Content`\n\n110.527 medical appointments its 14 associated variables (characteristics). The most important one if the patient show-up or no-show to the appointment. Variable names are self-explanatory\n\n`Variable(columns or features)`\n\n**Attribute Information**\n\n1. **PatientId:** Identification of a patient\n2. **AppointmentID:** Identification of each appointment\n3. **Gender:** Male or Female.\n4. **AppointmentDay:** The day of the actual appointment, when they have to visit the doctor.\n5. **ScheduledDay:** The day someone called or registered the appointment, this is before appointment of course.\n6. **Age:** How old is the patient.\n7. **Neighbourhood:** Where the appointment takes place.\n8. **Scholarship:** True of False . Observation, this is a broad topic, consider reading this article https:\/\/en.wikipedia.org\/wiki\/Bolsa_Fam%C3%ADlia\n9. **Hipertension:** True or False\n10. **Diabetes:** True or False\n11. **Alcoholism:** True or False\n12. **Handcap:** True or False\n13. **SMS_received:** 1 or more messages sent to the patient.\n14. **No-show:** True or False.\n\n**Dataset URL**\nhttps:\/\/www.kaggle.com\/joniarroba\/noshowappointments\n\n**`Questions`**\n1. Which is more attendance or absenteeism\n2. Who is more absent than the other?\n3. What is the most frequent time ?","40e91730":"NO nulls and no duplicates","dd7b2135":"### Research Question 3  (What is the most frequent time ?)","2cc2ec8c":"For predicting show-up status, we have `110.527` medical appointments and their `13` associated factors","fd914ef9":"<a id='wrangling'><\/a>\n## Data Wrangling\n\n### **1.1 Load Data**\n### General Properties","8110af87":"<a id='eda'><\/a>\n## Exploratory Data Analysis\n\n### Research Question 1 (Which is more attendance or absenteeism?)","f486a9ae":"Is there any scheduled day after appointment day? if True WaitingDays will be negative and this is impossible so \nRemove this rows from dataset i think good solution","de037ad9":"* in (7,8,9,10) patients make an appointment","0f0069bc":"\n\n## Table of Contents\n<ul>\n<li><a href=\"#intro\">Introduction<\/a><\/li>\n<li><a href=\"#wrangling\">Data Wrangling<\/a><\/li>\n<li><a href=\"#eda\">Exploratory Data Analysis<\/a><\/li>\n<li><a href=\"#conclusions\">Conclusions<\/a><\/li>\n<li><a href=\"#conclusions\">Model<\/a><\/li>\n<\/ul>","603690c1":"* Females schedule appointments more frequently than men.\n* no-show ratio is high in SMS received group than unreceived group.","b5570704":"<a id='Model'><\/a>\n## Model","5456343b":"From ScheduledDay and AppointmentDay, I'll create new Features:\n\n* **ScheduledHour:** hour of Scheduled Day\n* **AppointmentTime:** time of Appointment Day\n* **ScheduleDate:** date of Scheduled Day\n* **AppointmentDate:** date of Appointment Day\n* **AppointmentWeekDay:** the day of the week of Appointment Day\n* **AppointmentMonth:** the month of Appointment Day\n* **AppointmentMonth:** the month of Appointment Day\n* **WaitingDays:** waiting days before Appointment Day","3f253672":"### Research Question 2  (Who is more absent than the other?)","f341aaca":"\n### Data Cleaning","283a2b01":"* in (Tuesday,Wednesday) patients make an appointment"}}