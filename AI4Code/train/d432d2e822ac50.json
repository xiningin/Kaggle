{"cell_type":{"5ac0c899":"code","f95ebe30":"code","ae930d03":"code","52360750":"code","26a599e7":"code","84b6348e":"code","a6aacc79":"code","d71eb84d":"code","1881b8aa":"code","94ea877f":"code","5f2238e2":"code","7cc48ff3":"code","b09bdace":"code","20928ec9":"code","5db5f72e":"code","d2dfd7d6":"code","a0151db0":"code","f03151a5":"code","7c8ce9ef":"code","70c6a266":"code","403ea28e":"code","61b9be95":"code","4edf388a":"code","80b52b6a":"code","27d13592":"code","6226e503":"code","edf609a6":"code","80f6ca77":"code","d0b869cc":"code","e7e43f20":"code","6ffbfd11":"code","59ad2826":"code","3a501875":"code","561de59e":"code","41a4acce":"code","148b1e39":"code","ac5140b3":"code","a8eb4cc3":"code","b9f053ff":"code","af6f6767":"code","75fed9d0":"code","8e6d62d6":"code","d214f693":"code","ed7eca49":"code","72376f9c":"code","bdbc360f":"code","17a83391":"code","62067d79":"code","92f69638":"code","da6bfda3":"code","ec1a0f13":"code","6b256a8d":"code","734ab3ce":"code","13c9d302":"code","5f84d7d6":"code","32319f38":"code","7e938eea":"code","9ff95320":"code","e64aad8c":"code","71e5273e":"code","83e8929b":"code","94b121e5":"code","3c27433a":"code","b5c91929":"code","a9908525":"code","c05cdf8e":"code","76634963":"code","dabcb3cf":"code","51053665":"code","b00f9bc9":"code","cd57ceb6":"code","9946abf0":"code","a1ad06d2":"code","5d307a07":"code","77abf28c":"code","9ebc520b":"code","66d5ec21":"code","0cdad7ee":"code","c3099198":"code","0e9f30e6":"code","02aec968":"code","2cfc5a8c":"code","72ef5b85":"code","7ab90fd2":"code","a0530a47":"code","b3857bdd":"code","c0616057":"code","1f15e356":"code","e0ba4e29":"code","b7da75b0":"code","e8a7a2d0":"code","ab6b14d6":"code","5b8c80f1":"code","4d6660d1":"code","3ede14c3":"code","e21431b2":"code","0c65dbc2":"code","2b90b6c0":"code","2b563c0a":"code","767aa638":"code","65c0c22d":"code","87b64117":"code","ad8c6611":"code","69382161":"code","79a01c81":"code","1c32d821":"code","3abfc7d2":"code","52b23d81":"code","ff8824b4":"code","290df86e":"code","15d869f0":"code","d2429995":"code","80124609":"code","e38b729f":"code","870bdeef":"code","2136e02d":"code","46c04e50":"code","f6e076e0":"code","698314bb":"code","e28a304c":"code","25e8f657":"code","328ef595":"code","5efb0aed":"code","116993c7":"code","663f17b6":"code","fb099b48":"code","1f0d33d5":"code","b8b56e63":"code","f2040d1e":"code","07cb80b7":"code","95129a02":"code","6fb88e42":"code","ceec633e":"code","41d5cf04":"code","b0f0f13d":"code","ac6bb046":"code","5adc4d2e":"code","0e443f87":"code","1c7f2c0a":"markdown","4bc676fd":"markdown","591d46d7":"markdown","d7a3841c":"markdown","30db8ad7":"markdown","2f28fe79":"markdown","f602a74d":"markdown","1ed75567":"markdown","d99deb55":"markdown","26262f3b":"markdown","88119708":"markdown","efa2be96":"markdown","7ad553a0":"markdown","7246fba4":"markdown","fa4465c0":"markdown","2fdfcdcb":"markdown","240efe0d":"markdown","42c969dc":"markdown","7c86b691":"markdown","baa6cd19":"markdown","a5845e5b":"markdown","43adeb07":"markdown","c93ada3b":"markdown","dbe43514":"markdown","8133c75c":"markdown","d004d1a3":"markdown","f20b3984":"markdown","899c12fb":"markdown","0240d1ce":"markdown","1387f7a0":"markdown","e7f2aecd":"markdown","30d76d52":"markdown","04bbefb1":"markdown","88ad4d01":"markdown","9349b200":"markdown","636c7340":"markdown","1aecd453":"markdown","592f1b9e":"markdown","c855d1c0":"markdown","5d7cc6d2":"markdown","0cd672ab":"markdown","1b3a9326":"markdown","e81a5bb0":"markdown","d183e1b8":"markdown","eb0c5a61":"markdown","72239814":"markdown","a3ce2e5d":"markdown","ce802e8c":"markdown","4a871e0e":"markdown","e8a80a3b":"markdown","51c0d58c":"markdown","d314e31d":"markdown","dd299748":"markdown","6ace8a6b":"markdown","8ab7588c":"markdown","55d142b0":"markdown","b01a5011":"markdown","e52085ad":"markdown","d450a80c":"markdown","4f9bb911":"markdown","d9f60c30":"markdown","b8a1b61b":"markdown","54bd1be4":"markdown","1a40bd25":"markdown","85e0353f":"markdown","0f8bb76e":"markdown","83c5f4bc":"markdown","fc57d183":"markdown","efe33a62":"markdown","20653380":"markdown","f58759ae":"markdown","a370f932":"markdown","2bc4bf48":"markdown","82ac49c8":"markdown","a79f49c4":"markdown","b6d93a2e":"markdown","3218582a":"markdown","f7b7f947":"markdown","d373f67e":"markdown","fe1417d1":"markdown","4ee21206":"markdown","93725500":"markdown","b34612a0":"markdown","1842bf94":"markdown","a231fdb4":"markdown","40d3ddfa":"markdown","5379fd40":"markdown","e05aed5f":"markdown","e8003af6":"markdown","fdbfbde7":"markdown","62b0b725":"markdown","37436652":"markdown","971663f1":"markdown","12de7987":"markdown","04fa62c6":"markdown","d4ca7390":"markdown","b12afa15":"markdown","ad07e2df":"markdown","48dd87d3":"markdown","442b38a3":"markdown","510afff5":"markdown","90c910c1":"markdown","53f7d1f7":"markdown","05794336":"markdown","fca09581":"markdown","4bfdc36b":"markdown","e13e5174":"markdown","064bd966":"markdown","6264b7b1":"markdown","eb866896":"markdown","cfd3ca3e":"markdown","0eedf504":"markdown","4fcc59cf":"markdown","b5c74cd6":"markdown","53518100":"markdown","424cb9ce":"markdown","ca3faa1f":"markdown"},"source":{"5ac0c899":"# This Python 3 environment comes with many helpful analytics libraries installed\n# It is defined by the kaggle\/python Docker image: https:\/\/github.com\/kaggle\/docker-python\n# For example, here's several helpful packages to load\n\nimport numpy as np # linear algebra\nimport pandas as pd # data processing, CSV file I\/O (e.g. pd.read_csv)\n\n# Input data files are available in the read-only \"..\/input\/\" directory\n# For example, running this (by clicking run or pressing Shift+Enter) will list all files under the input directory\n\nimport os\nfor dirname, _, filenames in os.walk('\/kaggle\/input'):\n    for filename in filenames:\n        print(os.path.join(dirname, filename))\n\n# You can write up to 5GB to the current directory (\/kaggle\/working\/) that gets preserved as output when you create a version using \"Save & Run All\" \n# You can also write temporary files to \/kaggle\/temp\/, but they won't be saved outside of the current session","f95ebe30":"import warnings\nwarnings.filterwarnings('ignore')\nimport matplotlib.pyplot as plt\nfrom pandas_profiling import ProfileReport\nimport seaborn as sns\nimport matplotlib.ticker as ticks\nimport random as rd","ae930d03":"pd.set_option('max_rows',None)\npd.set_option('display.max_columns',200)\nsns.set_style('whitegrid')","52360750":"app = pd.read_csv('\/kaggle\/input\/bank-loan-risk-analysis\/application_data.csv')\napp.head()","26a599e7":"app.info(verbose=True)","84b6348e":"missing_val_app = app.isnull().sum()","a6aacc79":"# Converting the missing values into percentage and wrap them into data frame\n\nmissing_perc_app = pd.DataFrame({'Columns':missing_val_app.index,'Percentage':(missing_val_app.values\/app.shape[0])*100})\nmissing_perc_app","d71eb84d":"# Plot the missing value percentage\n\nplt.figure(figsize=(20,7))\nsns.pointplot(data=missing_perc_app,x='Columns',y='Percentage')\nplt.axhline(50,color='r',linestyle='--')\nplt.title('Missing % in Application Dataset',fontsize=30)\nplt.xticks(rotation=90)\nplt.show()","1881b8aa":"# Columns with more than 50% missing values\n\nmissing_more_50 = missing_perc_app[missing_perc_app['Percentage']>=50]\nmissing_more_50","94ea877f":"app1 = app.drop(columns=missing_more_50.Columns.to_list())\napp1.head()","5f2238e2":"# Remove the columns which are not necessary\n\napp1 = app1.drop(columns=['FLAG_DOCUMENT_2',\n       'FLAG_DOCUMENT_3', 'FLAG_DOCUMENT_4', 'FLAG_DOCUMENT_5',\n       'FLAG_DOCUMENT_6', 'FLAG_DOCUMENT_7', 'FLAG_DOCUMENT_8',\n       'FLAG_DOCUMENT_9', 'FLAG_DOCUMENT_10', 'FLAG_DOCUMENT_11',\n       'FLAG_DOCUMENT_12', 'FLAG_DOCUMENT_13', 'FLAG_DOCUMENT_14',\n       'FLAG_DOCUMENT_15', 'FLAG_DOCUMENT_16', 'FLAG_DOCUMENT_17',\n       'FLAG_DOCUMENT_18', 'FLAG_DOCUMENT_19', 'FLAG_DOCUMENT_20',\n       'FLAG_DOCUMENT_21','FLAG_MOBIL','FLAG_EMP_PHONE','FLAG_WORK_PHONE',\n       'FLAG_CONT_MOBILE','FLAG_PHONE','FLAG_EMAIL','DAYS_LAST_PHONE_CHANGE',\n       'REG_REGION_NOT_LIVE_REGION','REG_REGION_NOT_WORK_REGION','LIVE_REGION_NOT_WORK_REGION',\n       'REG_CITY_NOT_LIVE_CITY','REG_CITY_NOT_WORK_CITY','LIVE_CITY_NOT_WORK_CITY','EXT_SOURCE_2',\n       'EXT_SOURCE_3','REGION_RATING_CLIENT_W_CITY','YEARS_BEGINEXPLUATATION_AVG','FLOORSMAX_AVG',\n       'YEARS_BEGINEXPLUATATION_MODE','FLOORSMAX_MODE','YEARS_BEGINEXPLUATATION_MEDI',\n       'FLOORSMAX_MEDI','TOTALAREA_MODE','EMERGENCYSTATE_MODE'])\napp1.head()","7cc48ff3":"# Check for the missing values in the columns where percentage is less than 50\nless_50_missing = (app1.isnull().sum()\/app1.shape[0])*100\nless_50_missing[less_50_missing>0]","b09bdace":"app1.AMT_ANNUITY.describe()","20928ec9":"app1.AMT_GOODS_PRICE.describe()","5db5f72e":"app1.NAME_TYPE_SUITE.value_counts(normalize=True)","d2dfd7d6":"# Check the OCCUPATION_TYPE variable\n\napp1.OCCUPATION_TYPE.value_counts(normalize=True)","a0151db0":"# Checking the percentage of the missing data for OCCUPATION_TYPE variable\n(app1.OCCUPATION_TYPE.isna().sum() \/ app1.shape[0])*100","f03151a5":"app1.CNT_FAM_MEMBERS.value_counts()","7c8ce9ef":"# To check client ID for duplicate values\n\napp1.SK_ID_CURR.nunique()","70c6a266":"# Again checking the summary statistics for the numerical columns\napp1.describe()","403ea28e":"# Convert the Days_Birth column\n\napp1.DAYS_BIRTH = app1.DAYS_BIRTH.abs()","61b9be95":"# Convert the DAYS_EMPLOYED column\n\napp1.DAYS_EMPLOYED = app1.DAYS_EMPLOYED.abs()","4edf388a":"# Convert the DAYS_REGISTRATION column\n\napp1.DAYS_REGISTRATION = app1.DAYS_REGISTRATION.abs()","80b52b6a":"# Convert the DAYS_ID_PUBLISH column\n\napp1.DAYS_ID_PUBLISH = app1.DAYS_ID_PUBLISH.abs()","27d13592":"# Now to see if we can calculate the age of the client \n\napp1['Age_Range'] = (app1.DAYS_BIRTH \/ 365).round(2)\napp1.head()","6226e503":"# Taking the bins and the labels\nbins = [0,30,40,50,60,100]\nlabels = ['<30','30-40','40-50','50-60','60+']","edf609a6":"# Binnig the age column\napp1['AGE_RANGE'] = pd.cut(app1.Age_Range,bins=bins,labels=labels)","80f6ca77":"# Removing Age_Range column after making bins out of it\napp1.drop(columns='Age_Range',inplace=True)","d0b869cc":"# Checking the Gender Column\napp1.CODE_GENDER.value_counts()","e7e43f20":"app1.CODE_GENDER.replace('XNA',np.nan,inplace=True)","6ffbfd11":"app1['ORGANIZATION_TYPE'].value_counts()","59ad2826":"# Setting the seaborn style\nsns.set_style('white')\napp1.describe()","3a501875":"fig = plt.figure(figsize=(20,5))\nax = sns.boxplot(data=app1.AMT_INCOME_TOTAL,orient='h',color='r')\nax.set_xscale('linear')\nax.xaxis.set_major_locator(ticks.MultipleLocator(2000000))\nax.set_title('Income Total Amount',fontsize=50)\nplt.xticks(rotation=90)\nplt.show()","561de59e":"app1.AMT_INCOME_TOTAL.describe()","41a4acce":"app1.AMT_INCOME_TOTAL.quantile([0.33,.34,.66,0.90,0.92,0.94,0.95,0.96,0.98,0.99,1])","148b1e39":"bins = [0, 100000, 200000, 300000, 400000,200000000]\nlabels = ['Very Low','Low','Medium','High','Very High']","ac5140b3":"app1['INCOME_RANGE'] = pd.cut(app1.AMT_INCOME_TOTAL,bins=bins,labels=labels)","a8eb4cc3":"# Checking the AMT_ANNUITY variable\n\nfig = plt.figure(figsize=(20,5))\nax = sns.boxplot(data=app1.AMT_ANNUITY,orient='h')\nax.set_xscale('linear')\nax.xaxis.set_major_locator(ticks.MultipleLocator(10000))\nax.set_title('Annuity Amount',fontsize=50)\nplt.xticks(rotation=90)\nplt.show()","b9f053ff":"app1.AMT_ANNUITY.describe()","af6f6767":"app1['AMT_ANNUITY'].quantile([0.33,0.66,0.9,0.92,0.94,0.95,0.96,0.98,0.99,1.0])","75fed9d0":"# Setting up bins and labels for AMT_ANNUITY\n\nbins = [0,10000,20000,30000,40000,500000]\nlabels = ['Very Low','Low','Medium','High','Very High']\n\napp1['ANNUITY_RANGE'] = pd.cut(app1['AMT_ANNUITY'],bins=bins,labels=labels)","8e6d62d6":"fig = plt.figure(figsize=(20,5))\nax = sns.boxplot(data=app1.AMT_GOODS_PRICE,orient='h',color='brown')\nax.set_xscale('linear')\nax.xaxis.set_major_locator(ticks.MultipleLocator(100000))\nax.set_title('Goods Amount',fontsize=50)\nplt.xticks(rotation = 90)\nplt.show()","d214f693":"app1.AMT_GOODS_PRICE.describe()","ed7eca49":"app1.AMT_GOODS_PRICE.quantile([0.75,0.80,0.85,0.90,0.95,0.96,0.97,0.98,0.99,1])","72376f9c":"app1.AMT_CREDIT.describe()","bdbc360f":"fig = plt.figure(figsize=(20,5))\nax = sns.boxplot(data=app1.AMT_CREDIT,orient='h',color='orange')\nax.set_xscale('linear')\nax.xaxis.set_major_locator(ticks.MultipleLocator(100000))\nax.set_title('Credit Amount',fontsize=50)\nplt.show()","17a83391":"app1.AMT_CREDIT.quantile([0.20,.33,.66,.90,.92,.94,.95,.96,.98,.99,1])","62067d79":"# Creating bins and labels for AMT_CREDIT column\nbins = [0,300000,600000,900000,1200000,5000000]\nlabels = ['Very Low','Low','Medium','High','Very High']","92f69638":"# Binning the AMT_CREDIT column\napp1['CREDIT_RANGE'] = pd.cut(x=app1.AMT_CREDIT,bins=bins,labels=labels)","da6bfda3":"fig = plt.figure(figsize=(20,5))\nax = sns.boxplot(data=app1.DAYS_BIRTH,orient='h',color='darkcyan')\nax.set_xscale('linear')\nax.xaxis.set_major_locator(ticks.MultipleLocator(1000))\nax.set_title('Age',fontsize=50)\nplt.show()","ec1a0f13":"app1.DAYS_EMPLOYED.describe()","6b256a8d":"fig = plt.figure(figsize=(20,5))\nax = sns.boxplot(app1.DAYS_EMPLOYED,orient='h',color='yellow')\nax.set_title('Days Employed',fontsize=50)\nax.xaxis.set_major_locator(ticks.MultipleLocator(10000))\nplt.xticks(rotation=90)\nplt.show()","734ab3ce":"years = 365243 \/ 365\nyears","13c9d302":"app1['DAYS_EMPLOYED'].quantile([.8,0.82,0.95,0.98,0.99,1.0])","5f84d7d6":"app1['DAYS_EMPLOYED'].value_counts().sort_index().tail(5)","32319f38":"fig = plt.figure(figsize=(20,5))\n\nax = sns.boxplot(app1.DAYS_ID_PUBLISH,orient='h',color='olive')\n\nax.set_title('Days Id Publish',fontsize=50)\n\nax.xaxis.set_major_locator(ticks.MultipleLocator(1000))\n\nplt.xticks(rotation=90)\n\nplt.show()","7e938eea":"# SOCIAL_CIRCLE Variables\n\napp1.describe().loc[:,'OBS_30_CNT_SOCIAL_CIRCLE':'DEF_60_CNT_SOCIAL_CIRCLE']","9ff95320":"# Checking for the SOCIAL CIRCLE columns \n\nl=['OBS_30_CNT_SOCIAL_CIRCLE','DEF_30_CNT_SOCIAL_CIRCLE','OBS_60_CNT_SOCIAL_CIRCLE','DEF_60_CNT_SOCIAL_CIRCLE']\ncolor=['red','yellow','black','blue','darkcyan','orange','green','olive','brown']\n\nfig=plt.figure(figsize=(15,20))\nfig.subplots_adjust(hspace = .2, wspace=.2)\n\nfor i in enumerate(l):\n    plt.subplot(4,2,i[0]+1)\n    sns.boxplot(y=app1[i[1]],color=rd.choice(color))\n    plt.title(i[1],fontsize=10)\nplt.show()","e64aad8c":"app1[app1.DEF_60_CNT_SOCIAL_CIRCLE==24]","71e5273e":"# Checking the TARGET column for imbalance data in percentage\napp1.TARGET.value_counts(normalize=True)*100","83e8929b":"# Plotting the graphs\n\nfig, (ax1,ax2) = plt.subplots(1,2,figsize =(20,8))\n\nax = sns.countplot(app1.TARGET,ax=ax1)\n\nax1.set_title('TARGET',fontsize=20)\n\nplt.setp(ax1.xaxis.get_majorticklabels(),fontsize=18)\n\nax2 = plt.pie(x=app1.TARGET.value_counts(normalize=True),autopct='%.2f',textprops={'fontsize':15},shadow=True,labels=['No Payment Issues','Payment Issues'],wedgeprops = {'linewidth': 5}) \n\nplt.title('Distribution of the Target Variable',fontsize=20)\n\nplt.show()","94b121e5":"# Check the Imbalance Percentage\n\nprint('Imbalance Percentage is : %.2f'%(app1.TARGET.value_counts(normalize=True)[0]\/app1.TARGET.value_counts(normalize=True)[1]))","3c27433a":"app1.head()","b5c91929":"# Setting the style for the plots\nsns.set_style(style = 'whitegrid',rc={\"grid.linewidth\": 5})","a9908525":"app1.nunique().sort_values()","c05cdf8e":"# Function for univariate analysis\ndef plots(l,rows=1,cols=1,rot=90):\n        \n    if cols>1:\n        fig, (ax1,ax2) = plt.subplots(nrows=rows,ncols=cols,figsize=(30,10))\n        fig.subplots_adjust(hspace = .2, wspace=.2)\n    \n    else:\n        fig, (ax1,ax2) = plt.subplots(nrows=rows,ncols=cols,figsize=(30,30))\n        fig.subplots_adjust(hspace = .5, wspace=.1)\n    \n    \n    # Subplot 1 : countplot \n    first = sns.countplot(data = app1 , hue = 'TARGET', palette='inferno',x=l,ax=ax1)\n    first.set_title(l,fontsize=30)\n    first.set_yscale('log')\n    first.legend(labels=['Loan Repayers','Loan Defaulters'],fontsize=20)\n    plt.setp(first.xaxis.get_majorticklabels(), rotation=rot,fontsize=25)\n    plt.setp(first.yaxis.get_majorticklabels(),fontsize=18)\n\n\n    # Percentage of the mean values for defaulters\n    default_percentage = (app1.groupby(by=l)['TARGET'].mean()*100).sort_values()\n    \n    # Subplot 2 : barplot\n    sec = sns.barplot(x=default_percentage.index,y=default_percentage,ax=ax2)\n    sec.set_title(f'Default % in {l}',fontsize=30)\n    sec.set_yscale('linear')\n    plt.setp(sec.xaxis.get_majorticklabels(), rotation=rot,fontsize=25)\n    plt.setp(sec.yaxis.get_majorticklabels(),fontsize=18)\n    return None\n","76634963":"list_Cat_num = ['NAME_EDUCATION_TYPE','CREDIT_RANGE','INCOME_RANGE','ANNUITY_RANGE']\n\nfor i in list_Cat_num:\n    plots(i,1,2,rot=50)","dabcb3cf":"list_categories = ['AGE_RANGE','REGION_RATING_CLIENT','CNT_FAM_MEMBERS','CNT_CHILDREN']\n\nfor i in list_categories:\n    plots(i,1,2,rot=0)","51053665":"list_categories = ['FLAG_OWN_CAR','FLAG_OWN_REALTY','CODE_GENDER','NAME_CONTRACT_TYPE']\n\nfor val in list_categories:\n    plots(val,1,2,rot=0)","b00f9bc9":"list_categories = ['NAME_INCOME_TYPE','NAME_FAMILY_STATUS','NAME_HOUSING_TYPE']\n\nfor i in list_categories:\n    plots(i,1,2,rot=50)","cd57ceb6":"plots('OCCUPATION_TYPE',1,2)","9946abf0":"# Plotting the ORGANIZATION_TYPE separately \n\nplots('ORGANIZATION_TYPE',rows=2)","a1ad06d2":"# Dividing the data set into 2 parts target_0 : Loan Repayers and target_1 : Loan Defaulters\n\ntarget_0 = app1[app1['TARGET']==0]\n\ntarget_1 = app1[app1['TARGET']==1]","5d307a07":"# Creating a function for bivariate analysis\n\ndef cat_num_bivar(x=None,y=None,hue=None,est=np.mean,rot=90):\n    plt.style.use('dark_background')\n    fig ,(ax1,ax2) = plt.subplots(1,2,figsize=(20,10))\n    first = sns.barplot(data=target_0,x=x,y=y,hue=hue,palette='Set3',estimator=est,ax=ax1)\n    first.set_title(f'Target 0 : {x} vs {y}',fontsize=20)\n    plt.setp(first.xaxis.get_majorticklabels(),rotation=rot,fontsize=25)\n    plt.setp(first.yaxis.get_majorticklabels(),fontsize=18)\n\n    sec  = sns.barplot(data=target_1,x=x,y=y,hue=hue,palette='Set3',estimator=est,ax=ax2)\n    sec.set_title(f'Target 1 : {x} vs {y}',fontsize=20)\n    plt.setp(sec.xaxis.get_majorticklabels(),rotation=rot,fontsize=25)\n    plt.setp(sec.yaxis.get_majorticklabels(),fontsize=18)\n\n    plt.show()\n    return None","77abf28c":"cat_num_bivar(x='NAME_EDUCATION_TYPE',y='AMT_CREDIT')","9ebc520b":"# Plotting the graphs with estimator as median\n\ncat_num_bivar('OCCUPATION_TYPE','AMT_INCOME_TOTAL',est=np.median)","66d5ec21":"# Plotting the graphs\n\ncat_num_bivar('NAME_INCOME_TYPE','AMT_CREDIT')","0cdad7ee":"# Plotting the graph with estimator as median\n\ncat_num_bivar('NAME_HOUSING_TYPE','AMT_INCOME_TOTAL',est=np.median)","c3099198":"cat_num_bivar('CODE_GENDER','AMT_INCOME_TOTAL',est=np.median)","0e9f30e6":"def cat_cat(data1,data2,x,hue,scale='linear',order=None,rot=90):\n    plt.style.use('dark_background')\n    fig= plt.figure(figsize=(20,10))\n    plt.subplot(1,2,1)\n\n    sns.countplot(data = data1,x=x,hue=hue,hue_order=order,palette='Spectral')\n    plt.title(f'target 0 :{x} vs {hue}',fontsize=20)\n    plt.yscale(scale)\n    plt.xticks(rotation=rot,fontsize=25)\n    plt.legend(fontsize=16)\n    \n    plt.subplot(1,2,2)\n    sns.countplot(data = data2,x=x,hue=hue,hue_order=order,palette='Spectral')\n    plt.title(f'target 1 :{x} vs {hue}',fontsize=20)\n    plt.yscale(scale)\n    plt.xticks(rotation=rot,fontsize=25)\n    plt.legend(fontsize=16)\n    plt.show()\n    return None\n    ","02aec968":"cat_cat(target_0,target_1,'NAME_HOUSING_TYPE','CODE_GENDER','log',['M','F'])","2cfc5a8c":"cat_cat(target_0,target_1,'OCCUPATION_TYPE','NAME_FAMILY_STATUS',scale='log')","72ef5b85":"cat_cat(target_0,target_1,'NAME_INCOME_TYPE','NAME_EDUCATION_TYPE','log')","7ab90fd2":"cat_cat(target_0,target_1,'NAME_FAMILY_STATUS',hue='FLAG_OWN_REALTY',scale='log',order=['Y','N'],rot=70)","a0530a47":"cat_cat(target_0,target_1,'INCOME_RANGE',hue='CODE_GENDER',scale='log',order=['M','F'],rot=0)","b3857bdd":"list_numerics=['AMT_ANNUITY','AMT_CREDIT','AMT_INCOME_TOTAL','AMT_GOODS_PRICE','DAYS_BIRTH']\n\ndef plots_numeric_univ(l):\n        sns.set_style(style='whitegrid')\n        fig=plt.figure(figsize=(50,5))\n        plt.subplot(1,5,1)\n        sns.distplot(target_0[l],hist=False,label='Loan Repayers',color='green')\n        sns.distplot(target_1[l],hist=False,label='Loan Defaulters',color='red')\n        plt.title(l,fontsize=20)\n        plt.show()\n        \nfor i in list_numerics:\n    plots_numeric_univ(i)","c0616057":"# Creating the function for the numeric bivariate analysis\n\ndef plots_numeric_biv(x,y):\n    sns.set_style(style='whitegrid')\n    fig=plt.figure(figsize=(15,6))\n    sns.scatterplot(data=target_0, y = y, x = x,label='Loan Repayers',color='darkcyan')\n    sns.scatterplot(data=target_1, y = y, x = x,label='Loan Defaulters',color='red')\n    plt.title(f'{x} vs {y}',fontsize=20)\n    plt.show()","1f15e356":"plots_numeric_biv('AMT_ANNUITY','AMT_GOODS_PRICE')","e0ba4e29":"plots_numeric_biv('AMT_ANNUITY','AMT_CREDIT')","b7da75b0":"plots_numeric_biv('AMT_GOODS_PRICE','AMT_CREDIT')","e8a7a2d0":"# PLotting the pairplot \nl=['AMT_INCOME_TOTAL','AMT_CREDIT','AMT_ANNUITY','AMT_GOODS_PRICE']\nsns.pairplot(data = app1, vars=l,hue='TARGET',palette=['b','orange'])\nplt.xticks(fontsize=25)\nplt.yticks(fontsize=25)\nplt.show()","ab6b14d6":"# Dropping the columns which are not required\ncols_drop = ['SK_ID_CURR','AMT_REQ_CREDIT_BUREAU_HOUR',\n       'AMT_REQ_CREDIT_BUREAU_DAY', 'AMT_REQ_CREDIT_BUREAU_WEEK',\n       'AMT_REQ_CREDIT_BUREAU_MON', 'AMT_REQ_CREDIT_BUREAU_QRT',\n       'AMT_REQ_CREDIT_BUREAU_YEAR','OBS_30_CNT_SOCIAL_CIRCLE', 'DEF_30_CNT_SOCIAL_CIRCLE',\n       'OBS_60_CNT_SOCIAL_CIRCLE', 'DEF_60_CNT_SOCIAL_CIRCLE']","5b8c80f1":"# Correlation matrix\ntarget_0 = target_0.drop(columns=cols_drop)\n\ncorr = target_0.corr().abs().round(3)\ncorr","4d6660d1":"# Visualise the correlation using heatmaps\n\nfig = plt.figure(figsize=(20,15))\n\nsns.heatmap(data=corr,annot=True,cmap='RdYlGn_r',linewidths=.5,center=0.1)\n\nplt.show()","3ede14c3":"# Unstacking the TARGET_0 variable\nc = corr.abs()\ns=c.unstack()","e21431b2":"# Finding top 10 correlation among the people with no payment issues\n\ntarget_0_corr = s[s.index.get_level_values(0)!= s.index.get_level_values(1)].sort_values(ascending=False,kind='quicksort').drop_duplicates()\n\ndf = pd.DataFrame(target_0_corr)\n\ndf = df.reset_index().rename(columns={'level_0':'Var1','level_1':'Var2',0:'Correlation'}).dropna()\n\ndf.head(10)","0c65dbc2":"# Drop the columns which are not required\ntarget_1 = target_1.drop(columns=cols_drop)","2b90b6c0":"# Creating the correlation matrix for the Loan defaulter data frame\ncorr_t1 = target_1.corr().abs().round(3)\n\ncorr_t1","2b563c0a":"# PLotting the heatmap \nfig = plt.figure(figsize=(20,15))\n\nsns.heatmap(data=corr_t1,annot=True,cmap='RdYlGn_r',linewidths=0.5,center=0.1)\n\nplt.show()","767aa638":"c1 = corr_t1\n\ns1 = c1.unstack()","65c0c22d":"# Top 10 Correlations from target_1 : Loan Defaulter data frame\n\ntarget_1_corr = s1[s1.index.get_level_values(0)!= s1.index.get_level_values(1)].sort_values(ascending=False,kind='quicksort').drop_duplicates()\n\ndf = pd.DataFrame(target_1_corr)\n\ndf = df.reset_index().rename(columns={'level_0':'Var1','level_1':'Var2',0:'Correlation'}).dropna()\n\ndf.head(10)","87b64117":"# Fetching the dataset\n\n## 'app' variable takes the dataset application_data.csv as Data Frame\n\nf = '\/kaggle\/input\/bank-loan-risk-analysis\/previous_application.csv'\n# Count the lines\nnum_lines = sum(1 for l in open(f))\n# Sample size - in this case ~50%\nsize = int(num_lines \/\/ 2)\n# The row indices to skip - make sure 0 is not included to keep the header!\nrd.seed(100)\nskip_idx = rd.sample(range(1, num_lines), num_lines - size)\n# Read the data\nprev_app = pd.read_csv(f, skiprows=skip_idx)\n\nprev_app.head()","ad8c6611":"# Shape of the dataset\nprev_app.shape","69382161":"# Missing values check\nprev_app.isna().sum()","79a01c81":"# Setting the style for the plots\nsns.set_style(style='whitegrid')","1c32d821":"# Converting the absolute missing values into percentage\n\nmissing_prev = ((prev_app.isna().sum() \/ prev_app.shape[0])*100)\n\ncols1 = missing_prev.index.to_list()\n\nvals1 = missing_prev.to_list()\n\nmissing_prev_app = pd.DataFrame({'Columns':cols1,'Missing_prev_Percentage':vals1})\n\nmissing_prev_app.sort_values(by='Missing_prev_Percentage')","3abfc7d2":"# Plot for missing values in previous application data frame\nfig = plt.figure(figsize=(20,8))\n\nax = sns.pointplot(data = missing_prev_app, x='Columns', y = missing_prev_app.Missing_prev_Percentage,color='blue')\n\nax.axhline(50,color='red',linestyle='--')\n\nax.set_title('Missing Values % for Previous Applications ',fontsize=20)\n\nax.set_xlabel('Columns',fontsize=15)\n\nax.set_ylabel('Missing Percentage',fontsize=15)\n\nax.set_xticklabels(labels=cols1,rotation=90)\n\n\nplt.show()\n","52b23d81":"# Dropping the columns with more than 50 % missing values\nprev_app.drop(columns=missing_prev[missing_prev>=50].index,inplace=True)","ff8824b4":"prev_app.info()","290df86e":"prev_app.describe()","15d869f0":"# Merge the datasets\nmerged_df = app1.merge(right=prev_app,on='SK_ID_CURR')","d2429995":"# Check the shape of the data\nmerged_df.shape","80124609":"merged_df.head()","e38b729f":"merged_df['DAYS_DECISION'] = merged_df['DAYS_DECISION'].abs()","870bdeef":"merged_df.nunique().sort_values()","2136e02d":"# Dividing the merged dataset into two parts on the basis of Loan Approval and Loan Refusal\n\ndf1= merged_df[merged_df['NAME_CONTRACT_STATUS']=='Approved']\n\ndf2= merged_df[merged_df['NAME_CONTRACT_STATUS']=='Refused']\n\ndf3= merged_df[merged_df['NAME_CONTRACT_STATUS']=='Canceled']","46c04e50":"# Function to analyze the categorical columns\n\ndef cat_1(x,hue,scale='linear',order=None,rot=90,hspc=0.3):\n    plt.figure(figsize=(25,25))\n    \n    plt.subplots_adjust(wspace=0.3,hspace=hspc)\n    plt.subplot(2,2,1)\n    sns.countplot(data = df1,x=x,hue=hue,hue_order=order,palette=['darkcyan','darkgrey'])\n    plt.title(f'Approved :{x} ',fontsize=20)\n    plt.yscale(scale)\n    plt.xticks(rotation=rot,fontsize=18)\n    plt.yticks(fontsize=15)\n    plt.legend(labels=['Loan Repayers','Loan Defaulters'],fontsize=16)\n        \n    plt.subplot(2,2,2)\n    sns.countplot(data = df2,x=x,hue=hue,hue_order=order,palette=['darkcyan','darkgrey'])\n    plt.title(f'Refused :{x} ',fontsize=20)\n    plt.yscale(scale)\n    plt.xticks(rotation=rot,fontsize=18)\n    plt.yticks(fontsize=15)\n    plt.legend(labels=['Loan Repayers','Loan Defaulters'],fontsize=16)\n    \n    # default % in approval\n    ax=(df1.groupby(by=x)['TARGET'].mean()*100).sort_values()\n    \n    \n    plt.subplot(2,2,3)\n    a = sns.barplot(x=ax.index,y=ax)\n    a.set_title(f'Default % in Approval : {x}',fontsize=20)\n    a.set_yscale('linear')\n    plt.setp(a.xaxis.get_majorticklabels(), rotation=rot,fontsize=18)\n    plt.setp(a.yaxis.get_majorticklabels(),fontsize=18)\n    \n    \n    # default % in refused\n    ax1=(df2.groupby(by=x)['TARGET'].mean()*100).sort_values()\n    \n    plt.subplot(2,2,4)\n    a = sns.barplot(x=ax1.index,y=ax1)\n    a.set_title(f'Default % in Refusal : {x}',fontsize=20)\n    a.set_yscale('linear')\n    plt.setp(a.xaxis.get_majorticklabels(), rotation=rot,fontsize=18)\n    plt.setp(a.yaxis.get_majorticklabels(),fontsize=18)\n    \n    plt.show()\n    return None","f6e076e0":"cat_1(x='NAME_CLIENT_TYPE',hue='TARGET',scale='log',rot=50,hspc=0.4)","698314bb":"cat_1(x='PRODUCT_COMBINATION',hue='TARGET',scale='log',hspc=0.7)","e28a304c":"cat_1(x='NAME_SELLER_INDUSTRY',hue='TARGET',scale='log',hspc=0.5)","25e8f657":"cat_1(x='NAME_PRODUCT_TYPE',hue='TARGET',scale='log',rot=50)","328ef595":"cat_1(x='NAME_CASH_LOAN_PURPOSE',hue='TARGET',scale='log',hspc=0.7)","5efb0aed":"cat_1(x='NAME_CONTRACT_TYPE_y',hue='TARGET',scale='log',rot=50)","116993c7":"merged_df.head()","663f17b6":"# Funciton for numerical - categorical analysis\n\ndef cat_num_bivar_merged(x=None,y=None,hue=None,est=np.median,rot=90):\n    plt.style.use('dark_background')\n    \n    fig = plt.figure(figsize=(30,13))\n    plt.subplots_adjust(wspace=0.3)\n    \n    plt.subplot(1,3,1)\n    first = sns.barplot(data=df1,x=x,y=y,hue=hue,palette='Set3',estimator=est)\n    first.set_title(f'Approval : {x} vs {y}',fontsize=18)\n    plt.setp(first.xaxis.get_majorticklabels(),rotation=rot,fontsize=25)\n    plt.setp(first.yaxis.get_majorticklabels(),fontsize=18)\n    \n\n    plt.subplot(1,3,2)\n    sec = sns.barplot(data=df2,x=x,y=y,hue=hue,palette='Set3',estimator=est)\n    sec.set_title(f'Refusal : {x} vs {y}',fontsize=18)\n    plt.setp(sec.xaxis.get_majorticklabels(),rotation=rot,fontsize=25)\n    plt.setp(sec.yaxis.get_majorticklabels(),fontsize=18)\n    \n    plt.subplot(1,3,3)\n    third = sns.barplot(data=df3,x=x,y=y,hue=hue,palette='Set3',estimator=est)\n    third.set_title(f'Cancelled : {x} vs {y}',fontsize=18)\n    plt.setp(third.xaxis.get_majorticklabels(),rotation=rot,fontsize=25)\n    plt.setp(third.yaxis.get_majorticklabels(),fontsize=18) \n    \n    plt.show()\n    return None","fb099b48":"cat_num_bivar_merged(x='NAME_PRODUCT_TYPE',y='AMT_GOODS_PRICE_y',rot=0)","1f0d33d5":"cat_num_bivar_merged(x='NAME_SELLER_INDUSTRY',y='AMT_GOODS_PRICE_y',rot=90)","b8b56e63":"cat_num_bivar_merged(x='PRODUCT_COMBINATION',y='AMT_GOODS_PRICE_y',rot=90)","f2040d1e":"cat_num_bivar_merged(x='NAME_GOODS_CATEGORY',y='AMT_GOODS_PRICE_y',rot=90)","07cb80b7":"cat_num_bivar_merged(x='NAME_CASH_LOAN_PURPOSE',y='AMT_GOODS_PRICE_y',rot=90)","95129a02":"# Plotting the numeric variables \n\nlist_cat = ['AMT_ANNUITY_y','AMT_GOODS_PRICE_y']\n\ndef plots_numeric_univ_merged(l):\n        sns.set_style('whitegrid')\n    \n        fig=plt.figure(figsize=(30,6))\n        plt.subplot(1,2,1)\n        ax=sns.distplot(df1[l],hist=False,label='Approved',color='green')\n        ax=sns.distplot(df2[l],hist=False,label='Refused',color='red')\n        ax=sns.distplot(df3[l],hist=False,label='Canceled',color='orange')\n        plt.title(l,fontsize=20)\n        plt.xticks(fontsize=15) \n        plt.show()\n        return None\n        \nfor i in list_cat:\n    plots_numeric_univ_merged(i)","6fb88e42":"ord1= ['Approved','Refused','Canceled','Unused offer']\n\ndef plots_numeric_biv_merged(x,y,order=None):\n    \n    fig=plt.figure(figsize=(20,10))\n    \n    plt.subplot(1,2,1)\n    \n    sns.scatterplot(data=merged_df, y = y, x = x,hue='NAME_CONTRACT_STATUS',palette=['g','r','yellow','white'],hue_order=order)\n    \n    plt.title(f'{x} vs {y}',fontsize=20)\n    \n    plt.xticks(fontsize=18)\n    \n    plt.yticks(fontsize=18)\n    \n    plt.show()\n    \n    return None","ceec633e":"plots_numeric_biv_merged('AMT_ANNUITY_y','AMT_CREDIT_y',order=ord1)","41d5cf04":"plots_numeric_biv_merged('AMT_GOODS_PRICE_y','AMT_CREDIT_y',order=ord1)","b0f0f13d":"plots_numeric_biv_merged('AMT_ANNUITY_y','AMT_GOODS_PRICE_y',order=ord1)","ac6bb046":"plots_numeric_biv_merged('AMT_GOODS_PRICE_y','AMT_APPLICATION',order=ord1)","5adc4d2e":"(merged_df.groupby('NAME_CONTRACT_STATUS')['TARGET'].value_counts(normalize=True)*100)","0e443f87":"fig = plt.figure(figsize=(20,8))\nsns.countplot(data=merged_df,x='NAME_CONTRACT_STATUS',hue='TARGET',palette='rocket')\nplt.legend(['Loan Repayers','Loan Defaulters'])\nplt.yscale('log')\nplt.xticks(fontsize=25)\nplt.show()","1c7f2c0a":"### PRODUCT_COMBINATION vs AMT_GOODS_PRICE_y","4bc676fd":"### NAME_PRODUCT_TYPE vs AMT_GOODS_PRICE_y","591d46d7":"### <font color='purple'>Comment :<\/font> \nBank has approved the loans highly for POS categories and they are less likely to default than other categories like cash X \/ car, hence, bank can consider to give out loans POS categories more.","d7a3841c":"### NAME_PRODUCT_TYPE","30db8ad7":"### AMT_GOODS_PRICE_y vs AMT_APPLICATION","2f28fe79":"# EDA Loan Assessment\n\n![image.png](attachment:image.png)","f602a74d":"### <font color='purple'>Comment :<\/font> \nSince the client's ages are more of the float values so categorizing them by following binning method can help in further analysis.","1ed75567":"### 3.3.1 Univariate Analysis","d99deb55":"### NAME_FAMILY_STATUS vs FLAG_OWN_REALTY","26262f3b":"### <font color='purple'>Comment :<\/font> \nBy checking the unique value count for each column, we can distinguish between categorical and numerical variables from the application dataset. We can say that the values less than 40 are categorical columns and values more than 40 are basically the continous variables.\n","88119708":"# 1. Data Preparation","efa2be96":"### 3.2.4 Categorical - Categorical Variables","7ad553a0":"### <font color='purple'>Comment :<\/font> \nThe clients having the highest incomes are living in office apartments and the clients living with parents are earning quite less than others but are more prone to default the loans. The clients living in CO-OP apartments are much likely to default the most. Hence, bank should focus more towards clients having their own house\/apartment or living in office apartments.","7246fba4":"### <font color='purple'>Comment :<\/font> \nThe AMT_ANNUITY and AMT_CREDIT are fairly correlated with each other and the number of defaulters tend to go down as the  AMT_ANNUITY increases. Most of the defaulters are having AMT_ANNUITY values less than 60000.","fa4465c0":"### NAME_CASH_LOAN_PURPOSE","2fdfcdcb":"### PRODUCT_COMBINATION","240efe0d":"### NAME_CONTRACT_TYPE","42c969dc":"### INCOME_RANGE vs CODE_GENDER","7c86b691":"### <font color='purple'>Comment :<\/font> \nFrom the above plots, we can say that males are earning more than females, on the other hand the default rate for the males are much higher.","baa6cd19":"### <font color='purple'>Comment :<\/font> \nThe correlation is strong between amount goods and amount credit continous variables and the distribution seems to be nearly equal for approval and refusal of loans. For the cancelled applications, it is more sparsely distributed for higher goods price.","a5845e5b":"### AMT_ANNUITY vs AMT_GOODS_PRICE","43adeb07":"### <font color='purple'>Comment :<\/font> \nThere are no outliers in the DAYS_ID_PUBLISH column so we can leave it as it is.","c93ada3b":"### <font color='purple'>Comment :<\/font> \nMarried and single clients are approaching the bank more for the loans on the other hand widows are approaching the less for the loans and are less likely to default. Married laborers are defaulting more as compared to single\/not married.","dbe43514":"### NAME_SELLER_INDUSTRY vs AMT_GOODS_PRICE_y","8133c75c":"### 5.2 Missing Values check","d004d1a3":"### <font color='purple'>Comments<\/font> : \n\n1. The credit amount is the highest for the businessman while clients who are having pensions are taking low credit amount from the bank.\n\n2. Clients having their own businesses or are students, repaying the loans completely whereas clients who are on maternity leave are least ones to be considered for giving out the loans. Care should be taken for State servants and for commercial clients while considering for loan approval.","f20b3984":"### <font color='purple'>Comment :<\/font> \nFemales are earning more than the males and there are more number of males that are earning very high amount. Females with either low or very low incomes are much likely to default than males but on the other hand males with higher incomes are defaulting more than females.","899c12fb":"### Income type vs Education type","0240d1ce":"### <font color='purple'>Comment :<\/font> \nSince the number of missing values in the AMT_ANNUITY column are very less so we can go on and impute the missing data with the mean value but since the max value is very high, imputing the data with median values will be a better approach","1387f7a0":"### <font color='purple'>Comment :<\/font> \nWhile looking at the distribution graphs, bank is giving loans more towards the categories like consumer electronics,connectivity,furniture. The most of the default done by the category is Auto technology. Hence, banks should approve more loans for the categories like tourism, furniture, clothing, consumer electronics.","e7f2aecd":"### <font color='purple'>Comment :<\/font> \nWhile looking at the summary statistics for the numerical columns, it can be seen that there are few columns with the negative values. It would be better if these values are converted to the positive so that it would not affect the analysis. ","30d76d52":"### DAYS_BIRTH Variable","04bbefb1":"### 3.2.1 Categorical Ordered Variables\n\nThe categorical Ordered columns are as follows :\n\n1. NAME_EDUCATION_TYPE\n2. CREDIT_RANGE\n3. INCOME_RANGE\n4. ANNUITY_RANGE","88ad4d01":"### Housing type  vs Income","9349b200":"# 4. Correlation : Application Dataset","636c7340":"### <font color='purple'>Comment :<\/font> \nClients with higher education who are on the maternity leave are less in number for taking loans and defaulting the most, so they should be less considered and for the unemployed ones clients with Secondary\/ secondary special are mostly at default.","1aecd453":"### <font color='purple'>Comment :<\/font> \nThere are outliers in the column AMT_ANNUITY so by taking bins the values can be a good approach to handle them.","592f1b9e":"# 2. Handling the Missing values in each column","c855d1c0":"### 3.2 Categorical Variables","5d7cc6d2":"### <font color='purple'>Comment :<\/font> \nIn the Goods Price column there are outliers present but these prices can vary from product to product. So, no action will be taken on this variable","0cd672ab":"# 3. ANALYSIS : Application Dataframe","1b3a9326":"### <font color='purple'>Comment :<\/font> \nThe bank is approving loans for the clients who wants to buy a home or new car mostly and on the other hand the refusals are highest for the categories like buying a new car, buying a home and buying a holiday home or land. The applications cancelled by the clients are fot eh buying a home where the clients are most probably be losing the interest because high price possibility.","e81a5bb0":"### AMT_GOODS_PRICE_y vs AMT_CREDIT_y","d183e1b8":"### AMT_GOODS_PRICE vs AMT_CREDIT","eb0c5a61":"### <font color='purple'>Comment :<\/font> \nAfter merging the datasets if was found that some columns have the name for example, `abc_x` and `abc_y`  so `x` - **means that the column represents the application dataset columns** and `y` - **represents the columns from the previous application dataset**.","72239814":"### <font color='purple'>Comment -<\/font> \nFrom the above plot it can be seen that clients who own their own realty are approaching the bank more often for the loans and are more prone to default than those who do not own the realty.","a3ce2e5d":"### NAME_GOODS_CATEGORY vs AMT_GOODS_PRICE_y","ce802e8c":"### AMT_CREDIT","4a871e0e":"<font color='purple'>Comment :<\/font> \n\n> 1. Most of the approvals for the amount annuity variable are for the values less than 300000.\n\n> 2. As the price amount of the goods increases there is an increase in loan applicaiton refusal.","e8a80a3b":"### <font color='purple'>Comment :<\/font> \nThe correlation between AMT_ANNUITY_y and AMT_GOODS_PRICE_y is weak and it can be seen for higher goods price and amount annuity between 0 - 100000 there are highest number of refusals.","51c0d58c":"### <font color='purple'>Comment :<\/font> \nThe most of the approvals done by the bank are on the categories like vehicles, tourism, Medical supplies, direct sales, medicine. The most of the refusals by the bank are on the categories like weapon, Additional service, tourism, direct sales. The clients are taking their applications down most prabably down to the higher package prices for the tourism and other categories like medical supplies. So, lowering the prices can be a solution.","d314e31d":"### Occupation vs Income","dd299748":"### <font color='purple'>Comment :<\/font> \nThe bank is approving loans for repeater and new clients where new clients are actually making more defaults than the repeaters. So, bank should primarily focus more on refreshed\/repeaters.","6ace8a6b":"# 6. Merged Dataset","8ab7588c":"### <font color='purple'>Comment :<\/font> \nFor the Days Employed column, some records are having the value as 365243 which is not a possible value as in years it is nearly 1000 years, hence it is an invalid value. A better approach to handle these records is to replace these values with a near high value to last lowest percentile value like 20000 as last highest value is 17912.","55d142b0":"### 3.2.2 Categorical Unordered Variables\n\nThe unordered categorical columns are as follows :\n\n1. AGE_RANGE\n2. REGION_RATING_CLIENT\n3. CNT_FAM_MEMBERS\n4. CNT_CHILDREN\n5. FLAG_OWN_CAR\n6. FLAG_OWN_REALTY\n7. CODE_GENDER\n8. NAME_CONTRACT_TYPE\n9. NAME_INCOME_TYPE\n10. NAME_FAMILY_STATUS\n11. NAME_HOUSING_TYPE\n12. OCCUPATION_TYPE","b01a5011":"### AMT_ANNUITY_y vs AMT_CREDIT_y","e52085ad":"### <font color='purple'>Comment :<\/font> \n\n> For target variable there is no correlation as there are empty space in the graph and NAN in the tables while comparing with other variables.\n\n> Credit amount is highly correlated with amount of goods price which is slightly different from target 0 i.e Loan Repayers.\n\n> The correlation is strong between family member and children counts, although the correlation increases for the defaulters.\n\n> The loan annuity correlation with credit amount and also with goods price has slightly reduced in defaulters(0.748) when compared to repayers(0.777)\n\n> We can also see that repayers have high correlation in number of days employed(0.62) when compared to defaulters(0.58).\n\n> Days_birth and number of children correlation has reduced to 0.256 in defaulters when compared to 0.336 in repayers.","d450a80c":"## 2.2.1 Standardizing the values for Application Dataframe","4f9bb911":"### <font color='purple'>Comment :<\/font>  \nFor 'XNA' we will ignore the observation as they are missing values or Unknowns.\nFrom the above plots, it can be seen that tourism is getting the highest number of approvals followed by MLM partners from the bank. The loan applications for the tourism of many clients is rejected as they are not capable of repaying the loan due to the high package prices most probably. So, the tourism industry should lower the prices so that more clients can be provided with loans and so the bank\/industry can make profits.","d9f60c30":"### <font color='purple'>Comment :<\/font> \nThe AMT_ANNUITY and AMT_GOODS_PRICE are correlated but the correlation is not that strong as the values are pretty much distributed for higher Annuity and Goods price values. Hence, for AMT_ANNUITY less than 70000 are more prone to default while values greater than 70000 the defaulters tend to decrease.","b8a1b61b":"### <font color='purple'>**Comments**<\/font> :\n\n> 1. In the AGE_RANGE variable, clients of age group lower than or equal to 30 have the maximum payment defaults. Clients with age group between 30 to 50 have taken the most number of loans and are preferred to target as they have less number of loan defaults.\n\n> 2. It can be seen from the REGION_RATING_CLIENT variable that clients from  the regions where rating is 2 are taking the maximum number of the loans and have lesser loan default ratio than other regions, thus it can be considered to target. Moreover, clients from region as rating 3 are pretty much more prone to default.\n\n> 3. The clients having the 11 and 13 family members have the highest default rate of 100% and most of the loans are taken by those clients who have less family members.\n\n> 4. Clients having no children are the ones who have taken the most number of loans, on the other hand clients having 9 and 11 children are defaulting the most.","54bd1be4":"### CODE_GENDER vs AMT_INCOME_TOTAL","1a40bd25":"### <font color='purple'>TARGET 0 : Loan Repayer<\/font>","85e0353f":"### <font color='purple'>Comment :<\/font>\n\nFrom the above plots it can be seen that males living with thier parents are much more likely to default than females. Females are more defaulting on the loans but the recovery rate is much better as compared to males.","0f8bb76e":"<font color='purple'> **Comments :**<\/font>\n\n> 1. For AMT_ANNUITY variable, most of the clients have the amount less than 50000 and default rate is higher than repayer rate. \n\n> 2. The clients having the Credit value less than 1M are applying more for the loans.\n\n> 3. The clients are applying more for the loans for the goods price less than 1M and for the higher goods price clients are repaying loans\n\n> 4. For DAYS_BIRTH variable, clients who are less than 40yrs of age are more prone to default on loans than the others.\n","83c5f4bc":"### <font color='purple'>Comment :<\/font> \nCategories like repairs, other, urgent needs, buying a used car are getting more approvals from the bank, out of which urgent needs is most at default. Bank is approving the loans for a particular category Money for a third person which a very risky driving factor for the bank to give out loans on. Bank is on the other hand has refused to give the loans for the Money for a third person which is the correct step taken by the bank but on the other hand bank is also refusing the categories which may turn out to be beneficial for the bank itself, those categories are - Buying a new car\/used car, garage, home or a holiday home\/ land.","fc57d183":"# 5. Previous Application Dataset","efe33a62":"### AMT_GOODS_PRICE","20653380":"### Income type vs Credit","f58759ae":"## 6.1 Categorical Variables","a370f932":"### <font color='purple'>Comments<\/font> :\n\n> It is very risky to consider Low-skilled Laborers when considering clients on giving loans as the percentage of defaulters for this category is the most from other categories. Clients having the occupation such as Accountants,High skill tech staff,Managers,HR and IT staff or the \"other\" category are pretty much safe to consider for giving out loans and even small amount of loans to labourers can be given.","2bc4bf48":"### 3.2.3 Numeric - Categorical Variables","82ac49c8":"### <font color='purple'>Comment :<\/font> \n'Unaccompained' holds approx 81% of the total values so imputing the missing values with the mode value will be a suitable approach.","a79f49c4":"### <font color='purple'>Comment :<\/font> \nThe Social Circle columns have only one huge outlier and the entry index of that record is 148403. Since there exists only one record having the invalid value so we can drop this record.","b6d93a2e":"### <font color='purple'>Comment :<\/font> \nAs Income variable has outliers so it is better to choose median than mean estimator, clients with occupations such as Managers, accountants, realty agents, IT staff, drivers are having good income. So out of these categories Managers and realty agents must not be chosen much for loan approvals as they are more likeyly to default on the loans. Moreover, categories with income lower than 150000 can be considered more for loans.","3218582a":"### <font color='purple'>Comment : <\/font> \nCandidates who are having the academic degrees or higher education atleast are most likey to repay the loans where the credit amount that they have taken is less than 720000. On the other hand, some of these clients from these two categories are also the ones are defaulting and moreover the ones with values over 720000 are mostly defaulting. So, clients having secondary\/ special secondary or with incompletely higher are pretty much safe to approach for loans.","f7b7f947":"### <font color='purple'>Comment :<\/font> \nFor AMT_GOODS_PRICE column it will be better if median is used because the column has the high values as the price can differ from product to product so imputing the missing values with median will be a better approach.","d373f67e":"# 7. Conclusion\n\nThis case study aims to identify patterns which indicate if a client has difficulty paying their instalments which may be used for taking actions such as denying the loan, reducing the amount of loan, lending (to risky applicants) at a higher interest rate, etc. We aim to understand the driving factors behind loan defaults for different types of applicants.\n\nAnalysis was conducted on the prospective clients based on the their current as well as previous application data. Recommendations and insights were provided for the same.","fe1417d1":"### NAME_CLIENT_TYPE","4ee21206":"### <font color='purple'>Comment :<\/font> \nThe graph show a pretty strong correlation between AMT_GOODS_PRICE and AMT_CREDIT, clients having high goods price are most likely to repay the loans as majority of defaulters are having goods price less than 1.4 million. ","93725500":"### <font color='purple'>Comment :<\/font> \n\n> 1. Bank has approved the loan for approx 92% clients who can actually repay the loans without any trouble. On the other hand banks are approving loans for the clients who are most likely to default and their percentage is 7.6%.\n\n> 2. The clients are cancelling the applications from their side as they might be losing interest in taking the loan from the bank because of high price issues with the products as most of them are actually capable to pay the loans without any issue, hence dropping the product prices can attract more clients into loans.\n\n> 3. Bank is actually refusing the loans of those clients who can repay their loans easily without any issues and this percentage is 88%. So, bank needs to focus more on the clients like them.","b34612a0":"### AMT_ANNUITY","1842bf94":"### DAYS_DECISION Variable","a231fdb4":"### <font color='purple'>Comments<\/font> :\n\n> 1. When we talk about the clients with respect to their Education type, those clients that have education status as secondary\/ special secondary are approaching more for the loans while clients with education status as lower secondary are most at default. There is another category of incomplete higher which can also be considered for the loans.\n\n> 2. For the CREDIT_RANGE variable, clients having the very low and low credit amounts are taking the most loans and on the other hand clients with low credit amounts are generally likely to default more so bank should consider them less while giving out the loans. Bank should focus more on the clients who have taken very high credit amounts.\n\n> 3. As it can be seen from the graphs, income ranges from very low to meduim has the highest number of applications but it is adviced to focus more on the clients with atleast medium ranged income values or greater than medium values.\n\n> 4. For AMT_ANNUITY column, most of the applications are from the low or medium ranged AMT_ANNUITY values but on the other hand, medium ranged values should be considered less for loan approval as they are highly at default. So, bank should consider low or very high ranged AMT_ANNUITY valued customers for loans.\n","40d3ddfa":"### <font color='purple'>Comment :<\/font> \nThere is a pretty strong correlation between Goods Price and application. As the goods price amount increases, application amount increases linearly and the distribution of refusal loans seems to increase.","5379fd40":"### AMT_ANNUITY vs AMT_CREDIT","e05aed5f":"### <font color='purple'>Comment :<\/font> \nBank is approving loans more for the product type category X-sell and can be considered more to give out loans. Bank is actually refusing the loans to X- sell more than walk-ins and it can be seen form the graphs that walk-ins are more prone to default than X-sell.","e8003af6":"### <font color='purple'>Comment<\/font>: \n\n> 1. By looking at the graph:\n\n>> **a)** Industry Type : All industries except type 1,3,4,8,13 can be chosen for giving out loans more frequently as their default % is lower than these 5.\n\n>> **b)** Transport Type : Bank should focus more on giving out loans to the transport type 1 and 2 as they are more likely to repay the loans on time than others.\n\n>> **c)** It can be seen that organizations such as  Universities,Schools,Government can be beneficial ones to target for giving out loans as their chances to default out on loans are quite less.\n\n> 2. Those organizations should be targeted more for the loans whose default % are quite lower than 10% when compared to other organizations.","fdbfbde7":"## 2.3 Outlier Detection and Treatment","62b0b725":"### DAYS_ID_PUBLISH Variable","37436652":"### <font color='purple'>Comment :<\/font> \nAs the max value is 1.17 X 10^8 which is infact a very high value but this is a valid value as income can vary from people to people. Hence, deleting the values can be an option but another better approach is to bin the values into categories then there it will be covered.","971663f1":"### Occupation vs Family Status","12de7987":"### <font color='purple'>Comment :<\/font> \nThe categories like cash street: low and cash X-sell: low have the highest price and it can be clearly seen from the graph that banks are giving approvals for those clients that can take the loans but on the refusal side these two are getting mostly refused due to the very high prices as clients are finding difficult to repay the loans on such ammount due to which bank is facing a loss of interest from the clients so bringing down the rates of the combined goods can help the bank to get more approvals on client loan applications. Lastly, POS industry with interest category is also getting cancellations from the client's side as the price of the goods are very much higher as compared to others so clients might have received worst pricing from the sellers which is why they are cancelling their loan applications. However, lowering the price can help getting the bank more approvals.","04fa62c6":"### Education vs Credit","d4ca7390":"### <font color='purple'>Comments<\/font> :\n\n> 1. Clients having their own flat\/house are much likely to repay the loans than those who do not and same can be observed for those who has their own vehicals.\n\n> 2. As it can be seen from the graphs, females are taking more loans than males and are doing much better than the males in repaying the loans while males have taken less number of loans as compared to the females and on the other hand, their defaulting percentage is high.\n\n> 3. It seems clients are interested more towards the cash loans type contract and are defaulting more on the loans while the revolving loan type contract are performing much better.","b12afa15":"### AMT_INCOME_TOTAL Variable","ad07e2df":"## 3.3 Numerical Variables","48dd87d3":"### <font color='purple'>Comment :<\/font> \nFor ORGANIZATION_TYPE column there are 'XNA' values and 'other' column is also present, thus we can say that these XNA values are most probably the missing values. Moreover, these values are quite high, hence mode cannot be used here. The other way we can deal with these values is to either impute them with 'Unkown' category or we can ignore it while doing analysis.","442b38a3":"### <font color='purple'>Comment :<\/font> \nThere are outliers after the 99 percentile values i.e 1.8 x 10^6 and it can be seen these outliers are in chunk thus we want to retain then as well, so binning them will be a good option here.","510afff5":"### <font color='purple'>Comment :<\/font> \nBanks are giving most approvals to X-sell type goods on the basis of price but it can be seen from the refusal section that X-sell is getting more rejections as the clients are not able to cope up with the price which is the strong reason. Hence, that is why clients are mostly cancelling their applications of the loan due to this reason as it can be seen graphically, the of most rejections from the clients are for the higher priced goods. Lastly, a driving solution is to lower the goods price from the seller's side.","90c910c1":"### AMT_ANNUITY_y vs AMT_GOODS_PRICE_y","53f7d1f7":"### <font color='purple'>5.1 Loading the Data<\/font>","05794336":"### DAYS_EMPLOYED Variable","fca09581":"### <font color='purple'>**Comments**<\/font> :\n\n\n> 1. In the NAME_INCOME_TYPE variable, clients who are either businessman or student are pretty much likely to repay the loans and also for the working clients. While considering the clients who are Unemployed or are on Maternity Leave should be less likely be the ones for giving out the loan.\n\n> 2. Clients that are single or hold civil marriage as their family status must be considered less while giving out loans because they are the ones with high default ratio. For the clients with the separated family status should be chosen very carefully when giving out loans. Married clients are approaching the bank more for the loans and can be considered to give out loans.\n\n> 3. The clients that have own their own house\/apartment or are using office apartment should be considered more often while giving out loans as clients living in the rented apartments are very risky to be considered for giving loans.","4bfdc36b":"### <font color='purple'>Comment :<\/font> \nBy plotting the box plot for the client's Age column, it was found that there are no outliers in the DAYS_BIRTH column.","e13e5174":"## Business Understanding\n\nThe loan providing companies find it hard to give loans to the people due to their insufficient or non-existent credit history. Because of that, some consumers use it as their advantage by becoming a defaulter. Suppose you work for a consumer finance company which specialises in lending various types of loans to urban customers. You have to use EDA to analyse the patterns present in the data. This will ensure that the applicants capable of repaying the loan are not rejected.\n\n \n\nWhen the company receives a loan application, the company has to decide for loan approval based on the applicant\u2019s profile. Two types of risks are associated with the bank\u2019s decision:\n\nIf the applicant is likely to repay the loan, then not approving the loan results in a loss of business to the company\n\nIf the applicant is not likely to repay the loan, i.e. he\/she is likely to default, then approving the loan may lead to a financial loss for the company.\n\n \n\nThe data given below contains the information about the loan application at the time of applying for the loan. It contains two types of scenarios:\n\nThe client with payment difficulties: he\/she had late payment more than X days on at least one of the first Y instalments of the loan in our sample,\n\nAll other cases: All other cases when the payment is paid on time.\n\n \n\n \n\nWhen a client applies for a loan, there are four types of decisions that could be taken by the client\/company):\n\nApproved: The Company has approved loan Application\n\nCancelled: The client cancelled the application sometime during approval. Either the client changed her\/his mind about the loan or in some cases due to a higher risk of the client he received worse pricing which he did not want.\n\nRefused: The company had rejected the loan (because the client does not meet their requirements etc.).\n\nUnused offer:  Loan has been cancelled by the client but on different stages of the process.\n\nIn this case study, you will use EDA to understand how consumer attributes and loan attributes influence the tendency of default.\n\n\n## Business Objectives\n\nThis case study aims to identify patterns which indicate if a client has difficulty paying their installments which may be used for taking actions such as denying the loan, reducing the amount of loan, lending (to risky applicants) at a higher interest rate, etc. This will ensure that the consumers capable of repaying the loan are not rejected. Identification of such applicants using EDA is the aim of this case study.\n\nIn other words, the company wants to understand the driving factors (or driver variables) behind loan default, i.e. the variables which are strong indicators of default.  The company can utilise this knowledge for its portfolio and risk assessment.\n\nTo develop your understanding of the domain, you are advised to independently research a little about risk analytics - understanding the types of variables and their significance should be enough).","064bd966":"### NAME_CASH_LOAN_PURPOSE vs AMT_GOODS_PRICE_y","6264b7b1":"### <font color='purple'>Comment :<\/font> \nBank is approving loans more in general for consumer loans and refusing the loans more oftenly for the cash loans. From the above graphs, it is clearly visible that revolving loans should be considered less for the approval whereas consumer loans \/ cash loans can be considered more oftenly for the loans.","eb866896":"### NAME_SELLER_INDUSTRY","cfd3ca3e":"### <font color='purple'>TARGET 1 : Loan Defaulter<\/font>","0eedf504":"### <font color='purple'>Comment :<\/font> \nAMT_ANNUITY_y and AMT_CREDIT_y have a correlation but not a strong one, most of the loan refusals are less than the amount annuity of 100000.","4fcc59cf":"### <font color='purple'>Comment :<\/font> \nThe values has some negative values so let's convert them into positive","b5c74cd6":"### 3.3.2 Bivariate Analysis","53518100":"## 6.2 Numerical Variables","424cb9ce":"**Name_housing vs Gender**","ca3faa1f":"### 3.1 Data Imbalance Check"}}