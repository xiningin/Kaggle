{"cell_type":{"381aa7c6":"code","c546f4c3":"code","cfd4782a":"code","b9df880b":"code","3b09a3e7":"code","4124fabd":"code","3b18bfed":"code","81e4442c":"code","2cf33417":"code","a56a2567":"code","60ba31cc":"code","764b252a":"code","1a82de61":"code","923a41f4":"code","515d3b69":"code","5720eb7f":"code","d79bd1fe":"code","79c7a918":"code","e659b77f":"code","4c2b1277":"code","7d5a233a":"code","6c9fdd75":"code","0bf24b90":"code","c65d12a4":"code","c9a90aa8":"code","1a08f2bb":"code","4b0c5121":"code","b0076c06":"code","e8266eca":"code","6d089223":"code","45914777":"code","eade5b64":"code","f22c2d40":"code","a2e0c8e4":"code","43784393":"code","b9564f15":"code","7c30f5af":"code","b1329f67":"code","01efe1ed":"code","b0ee3a9f":"code","371b2fa3":"code","e3e37555":"code","dc6cbca6":"code","b30b7814":"code","a4fde019":"code","f932e294":"code","08740060":"code","ec6a91e5":"code","1d1966e3":"code","12fecd5f":"code","f8a9b601":"code","7148a87b":"code","3d413c47":"code","7cf0334a":"code","9eb99383":"code","917292d8":"code","cef0b9ea":"code","b27c6c84":"code","030350d5":"code","f3e3669c":"code","757fff6b":"code","62ab3ff5":"code","a0a7ee66":"code","10259bce":"code","f7916a92":"code","7bd14a57":"code","35aa78ee":"code","b78d1be8":"code","aff8b24e":"code","96e2669c":"code","89078112":"code","0c1e3050":"code","04ce32e0":"code","21c86dac":"code","ed2cad06":"code","f60f94f5":"code","f474a976":"code","52c6736c":"code","fb3a350d":"code","4cc29123":"code","ebd2e885":"code","c34a59da":"code","fd5c90e2":"code","c79b00cc":"code","1498a821":"code","5de1d752":"markdown","f91b5393":"markdown","30a6e261":"markdown","40b78909":"markdown","616dd162":"markdown","5ca130d2":"markdown","af32982a":"markdown","2527d596":"markdown","f438d126":"markdown","878a6dc9":"markdown","e38865d2":"markdown","0c4cad4e":"markdown","c05fa546":"markdown","16d80ed8":"markdown","8f2915da":"markdown","cdc0690a":"markdown","d8facdf3":"markdown","cd8f2dcb":"markdown","e79886cd":"markdown","dab73c7b":"markdown","d6b9f5fd":"markdown","0f557dcd":"markdown","1e798237":"markdown","55e4eaa2":"markdown","3d8c6226":"markdown","76423269":"markdown","a5714901":"markdown","f42d55fc":"markdown","49352713":"markdown","75518353":"markdown","a32fd360":"markdown","b69f8601":"markdown","74df6cdb":"markdown","52596bc7":"markdown","9bc91432":"markdown","2289483f":"markdown","ba7635dc":"markdown","10857b78":"markdown","dcde992a":"markdown","f335845c":"markdown","6bf6c701":"markdown","b7491cd9":"markdown","b5dd278d":"markdown","e0068a6b":"markdown"},"source":{"381aa7c6":"import numpy as np\nimport pandas as pd\nimport matplotlib.pyplot as plt\nimport seaborn as sns\n\nimport warnings\nwarnings.simplefilter(action='ignore', category=FutureWarning)","c546f4c3":"path_train = '..\/input\/hr-analytics-job-change-of-data-scientists\/aug_train.csv'\npath_test = '..\/input\/hr-analytics-job-change-of-data-scientists\/aug_test.csv'\npath_submission = '..\/input\/hr-analytics-job-change-of-data-scientists\/sample_submission.csv'","cfd4782a":"df_train = pd.read_csv(path_train)\ndf_test = pd.read_csv(path_test)","b9df880b":"#First 5 rows - Train\n\ndf_train.head()","3b09a3e7":"#First 5 rows - Test\n\ndf_test.head()","4124fabd":"df_train.dtypes","3b18bfed":"#Columns (features) - Train\n\nlist(df_train.columns)","81e4442c":"#Columns (features) - Test\n\nlist(df_test.columns)","2cf33417":"#Shape of the DataFrame - Train\n\ndf_train.shape","a56a2567":"#Shape of the DataFrame - Test\n\ndf_test.shape","60ba31cc":"#Number of NaN per column\n\ndef percentage_nulls(df):\n\n    number_nulls = pd.DataFrame(df.isnull().sum(),columns=['Total'])\n    number_nulls['% nulls'] = round((number_nulls['Total'] \/ df.shape[0])*100,1)\n    \n    return number_nulls","764b252a":"#NaN for Train\n\npercentage_nulls(df_train)","1a82de61":"#NaN for Test\n\npercentage_nulls(df_test)","923a41f4":"#City - Train\n\ncity_train = df_train['city']\ncity_train.value_counts()","515d3b69":"#City - Test\n\ncity_test = df_test['city']\ncity_test.value_counts()","5720eb7f":"#Distribution city development index - Train\n\nsns.displot(data=df_train, x='city_development_index',height=6,color = 'lightblue')","d79bd1fe":"#Distribution city development index - Train\n\nsns.displot(data=df_test, x='city_development_index',height=6,color = 'coral')","79c7a918":"gender_train = df_train['gender']\ngender_test = df_test['gender']","e659b77f":"def percentage(df):\n\n    number = pd.DataFrame(df.value_counts())\n    number.columns = ['Total']\n    number['%'] = round((number['Total'] \/ df.notnull().sum())*100,1)\n    \n    return number","4c2b1277":"percentage(gender_train)","7d5a233a":"percentage(gender_test)","6c9fdd75":"fig, ax = plt.subplots(nrows=1, ncols=2, figsize=(10, 6))\n\nsns.countplot(x=\"gender\",data=df_train,palette=\"Set1\",ax=ax[0]).set_title('Train')\nsns.countplot(x=\"gender\",data=df_test,palette=\"Set1\",ax=ax[1]).set_title('Test')\nfig.tight_layout()\nfig.show()","0bf24b90":"relevent_experience_train = df_train['relevent_experience']\nrelevent_experience_test = df_test['relevent_experience']","c65d12a4":"percentage(relevent_experience_train)","c9a90aa8":"percentage(relevent_experience_test)","1a08f2bb":"fig, ax = plt.subplots(nrows=1, ncols=2, figsize=(10, 6))\n\nsns.countplot(x='relevent_experience',data=df_train,palette=\"Set2\",ax=ax[0]).set_title('Train')\nsns.countplot(x='relevent_experience',data=df_test,palette=\"Set2\",ax=ax[1]).set_title('Test')\nfig.tight_layout()\nfig.show()","4b0c5121":"enrolled_university_train = df_train['enrolled_university']\nenrolled_university_test = df_test['enrolled_university']","b0076c06":"percentage(enrolled_university_train)","e8266eca":"percentage(enrolled_university_test)","6d089223":"order_enrolled_university = percentage(enrolled_university_train).index","45914777":"fig, ax = plt.subplots(nrows=1, ncols=2, figsize=(10, 6))\n\nsns.countplot(x='enrolled_university',data=df_train,palette=\"Set3\",ax=ax[0],order=order_enrolled_university).set_title('Train')\nsns.countplot(x='enrolled_university',data=df_test,palette=\"Set3\",ax=ax[1],order=order_enrolled_university).set_title('Test')\nfig.tight_layout()\nfig.show()","eade5b64":"education_level_train = df_train['education_level']\neducation_level_test = df_test['education_level']","f22c2d40":"percentage(education_level_train)","a2e0c8e4":"percentage(education_level_test)","43784393":"order_education_level = percentage(education_level_train).index","b9564f15":"fig, ax = plt.subplots(nrows=1, ncols=2, figsize=(12, 8))\n\nsns.countplot(x='education_level',data=df_train,palette=\"Set1\",ax=ax[0],order=order_education_level).set_title('Train')\nsns.countplot(x='education_level',data=df_test,palette=\"Set1\",ax=ax[1],order=order_education_level).set_title('Test')\nfig.tight_layout()\nfig.show()","7c30f5af":"major_discipline_train = df_train['major_discipline']\nmajor_discipline_test = df_test['major_discipline']","b1329f67":"percentage(major_discipline_train)","01efe1ed":"percentage(major_discipline_test)","b0ee3a9f":"order_major_discipline = percentage(major_discipline_train).index","371b2fa3":"fig, ax = plt.subplots(nrows=1, ncols=2, figsize=(14, 10))\n\nsns.countplot(x='major_discipline',data=df_train,palette=\"Set2\",ax=ax[0],order=order_major_discipline).set_title('Train')\nsns.countplot(x='major_discipline',data=df_test,palette=\"Set2\",ax=ax[1],order=order_major_discipline).set_title('Test')\nfig.tight_layout()\nfig.show()","e3e37555":"experience_train = df_train['experience']\nexperience_test = df_test['experience']","dc6cbca6":"percentage(experience_train)","b30b7814":"percentage(experience_test)","a4fde019":"order_experience = percentage(experience_train).index","f932e294":"fig, ax = plt.subplots(nrows=1, ncols=2, figsize=(14, 12))\n\nsns.countplot(x='experience',data=df_train,palette=\"Set3\",ax=ax[0],order=order_experience).set_title('Train')\nsns.countplot(x='experience',data=df_test,palette=\"Set3\",ax=ax[1],order=order_experience).set_title('Test')\nfig.tight_layout()\nfig.show()","08740060":"company_size_train = df_train['company_size']\ncompany_size_test = df_test['company_size']","ec6a91e5":"percentage(company_size_train)","1d1966e3":"percentage(company_size_test)","12fecd5f":"order_company_size = percentage(company_size_train).index","f8a9b601":"fig, ax = plt.subplots(nrows=1, ncols=2, figsize=(14, 12))\n\nsns.countplot(x='company_size',data=df_train,palette=\"Set1\",ax=ax[0],order=order_company_size).set_title('Train')\nsns.countplot(x='company_size',data=df_test,palette=\"Set1\",ax=ax[1],order=order_company_size).set_title('Test')\nfig.tight_layout()\nfig.show()","7148a87b":"company_type_train = df_train['company_type']\ncompany_type_test = df_test['company_type']","3d413c47":"percentage(company_type_train)","7cf0334a":"percentage(company_type_test)","9eb99383":"order_company_type = percentage(company_type_train).index","917292d8":"fig, ax = plt.subplots(nrows=1, ncols=2, figsize=(14, 12))\n\nsns.countplot(x='company_type',data=df_train,palette=\"Set2\",ax=ax[0],order=order_company_type).set_title('Train')\nsns.countplot(x='company_type',data=df_test,palette=\"Set2\",ax=ax[1],order=order_company_type).set_title('Test')\nfig.tight_layout()\nfig.show()","cef0b9ea":"last_new_job_train = df_train['last_new_job']\nlast_new_job_test = df_test['last_new_job']","b27c6c84":"percentage(last_new_job_train)","030350d5":"percentage(last_new_job_test)","f3e3669c":"order_last_new_job = percentage(last_new_job_train).index","757fff6b":"fig, ax = plt.subplots(nrows=1, ncols=2, figsize=(10, 8))\n\nsns.countplot(x='last_new_job',data=df_train,palette=\"Set3\",ax=ax[0],order=order_last_new_job).set_title('Train')\nsns.countplot(x='last_new_job',data=df_test,palette=\"Set3\",ax=ax[1],order=order_last_new_job).set_title('Test')\nfig.tight_layout()\nfig.show()","62ab3ff5":"#Distribution of training hours - Train\n\nsns.displot(data=df_train, x='training_hours',height=6,color = 'lightblue')","a0a7ee66":"#Distribution of training hours - Test\n\nsns.displot(data=df_train, x='training_hours',height=6,color = 'coral')","10259bce":"target = df_train['target']","f7916a92":"percentage(target)","7bd14a57":"sns.countplot(x='target',data=df_train,palette=\"Set1\").set_title('Train')","35aa78ee":"#Distribution\n\nsns.displot(data=df_train, x='city_development_index', hue='target',kind='kde',height=6)","b78d1be8":"sns.catplot(x=\"target\",hue='gender',data=df_train,palette=\"Set1\",kind=\"count\",height=6)","aff8b24e":"sns.catplot(x=\"target\",hue='relevent_experience',data=df_train,palette=\"Set2\",kind=\"count\",height=6)","96e2669c":"sns.catplot(x=\"target\",hue='enrolled_university',data=df_train,palette=\"Set3\",kind=\"count\",height=6)","89078112":"sns.catplot(x=\"target\",hue='education_level',data=df_train,palette=\"Set1\",kind=\"count\",height=8) ","0c1e3050":"sns.catplot(x=\"target\",hue='major_discipline',data=df_train,palette=\"Set2\",kind=\"count\",height=8)","04ce32e0":"sns.catplot(x=\"target\",hue='experience',data=df_train,kind=\"count\",height=16)","21c86dac":"#Distribution\n\nsns.displot(data=df_train, x='training_hours', hue='target',kind='kde',height=6)","ed2cad06":"#Remember the train dataset\n\ndf_train.head()","f60f94f5":"df_train.columns","f474a976":"#I remove the column 'enrollee_id' as it has no use\n\ndf_train = df_train.drop(['enrollee_id'],axis=1)\ndf_train.head()","52c6736c":"#Select the target\n\ntarget = df_train['target']","fb3a350d":"#Drop the target\n\ndf_train = df_train.drop('target',axis=1)\ndf_train","4cc29123":"percentage_nulls(df_train)","ebd2e885":"#View the dtype for every column\n\ndf_train.dtypes","c34a59da":"#Select columns name with categorical data\n\ncat_columns = df_train.columns[df_train.dtypes=='object']\ncat_columns","fd5c90e2":"df_train_impute_mode = df_train.copy()","c79b00cc":"for columna in cat_columns:\n    df_train_impute_mode[columna].fillna(df_train_impute_mode[columna].mode()[0],inplace=True)","1498a821":"percentage_nulls(df_train_impute_mode)","5de1d752":"### 4.2.1 Simple Imputation - Mode","f91b5393":"# 2. Import Datasets","30a6e261":"### Target by enrolled university","40b78909":"### Target by major discipline","616dd162":"## 3.14 *'Target'* \n\n     0 - Not looking for job change\n     1 - Looking for a job change","5ca130d2":"### Target by gender","af32982a":"### Target by training hours","2527d596":"## 4.3 Encodig of categorical variables","f438d126":"## 3.3 Feature *'city_ development _index'* -  Developement index of the city (scaled)\n\nFor more information: https:\/\/en.wikipedia.org\/wiki\/City_development_index","878a6dc9":"## 3.12 Feature *'lastnewjob'* - Difference in years between previous job and current job","e38865d2":"### Target by city development index","0c4cad4e":"## 3.6 Feature *'enrolled_university'* - Type of University course enrolled if any\n","c05fa546":"As you can see the% are similar in both datasets","16d80ed8":"# HR Analytics: Job Change of Data Scientists\n\n![](https:\/\/greatpeopleinside.com\/wp-content\/uploads\/2019\/06\/analytics-1030x618.jpg)","8f2915da":"## 3.9 Feature *'experience'* - Candidate total experience in years\n","cdc0690a":"## 3.7 Feature *'education_level'* - Education level of candidate\n","d8facdf3":"## 3.4 Feature *'gender'* - Gender of candidate\n","cd8f2dcb":"### Target by relevant experience","e79886cd":"## 4.2 Deal with NaN values","dab73c7b":"### Target by major experience","d6b9f5fd":"As you can see the% are similar in both datasets","0f557dcd":"## 1. Moduls to Use","1e798237":"I consider that these columns are not useful to use as features,therefore I delete them:\n\n    'enrollee_id'","55e4eaa2":"## 3.8 Feature *'major_discipline'* - Education major discipline of candidate\n","3d8c6226":"As seen previously, some columns have a significant amount of NaN. We see what % is for the columns that remained","76423269":"## 3.1 General analysis","a5714901":"As you can see the% are similar in both datasets","f42d55fc":"## 3.10 Feature *'company_size'* - No of employees in current employer's company","49352713":"As you can see the% are similar in both datasets","75518353":"As you can see the% are similar in both datasets","a32fd360":"### 4.1 Unnecessary columns","b69f8601":"## 3.5 Feature *'relevent_experience'* - Relevant experience of candidate\n","74df6cdb":"As you can see the% are similar in both datasets","52596bc7":"As a first approach I am going to make a simple imputation through mode","9bc91432":"### Target by education level","2289483f":"## 3.2 Feature *'city'* - City code","ba7635dc":"As you can see the% are similar in both datasets","10857b78":"it is observed that the cities are coded with a number and they are 123 different citys for Train and 108 for test","dcde992a":"As you can see the% are similar in both datasets","f335845c":"## 3.13 Feature *'training_hours'* - Training hours completed","6bf6c701":"# 3. Exploratory Data Analysis","b7491cd9":"## 4. Data Preprocessing","b5dd278d":"As seen in some columns there is a considerable amount of NaN.\n\nThe % are similar in master datasets (train and test)","e0068a6b":"## 3.11 Feature *'company_type'* - Type of current employer"}}