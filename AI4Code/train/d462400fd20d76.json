{"cell_type":{"57c75571":"code","00869aee":"code","0f497c1c":"code","df16b597":"code","a605cd7c":"code","98c11a80":"code","23bb288e":"code","f0173814":"code","34664f89":"code","77147c7d":"code","45148c73":"code","cebc6e1e":"code","9ad15080":"code","ad379d80":"code","a85d170c":"code","8c4451f9":"code","346c5c52":"code","5bb77a7b":"code","6025223a":"code","477ad0eb":"code","89b781ad":"code","ea2a18bc":"code","d193b508":"code","3001b29e":"code","1856ef70":"code","51770236":"code","ad11bb6a":"code","485fb2fe":"code","83b4e914":"markdown","595dd37a":"markdown","e1b7b028":"markdown","f2cf7d07":"markdown","6ff3ef62":"markdown","06119bca":"markdown","0b1f2e2b":"markdown","b3f7b50d":"markdown","db9002ba":"markdown","84d1b26d":"markdown","2bd90a50":"markdown","4b33a9ec":"markdown","1e10e667":"markdown","82a1ccb5":"markdown","c1a6fea6":"markdown","5e9d5ec4":"markdown","0b9f97ba":"markdown","7c8792e0":"markdown","8fb682bf":"markdown","a7d1c4ec":"markdown","a8610610":"markdown"},"source":{"57c75571":"import os\nfor root,_,filename in os.walk('\/kaggle\/input'):\n    for filename in filename:\n        print(os.path.join(root,filename))\n    \n    ","00869aee":"#Importing all the relevent modules\nimport pandas as pd\nimport numpy as np\nimport matplotlib.pyplot as plt\nimport seaborn as sn\nimport sklearn\nimport re","0f497c1c":"df_raw = pd.read_csv('\/kaggle\/input\/movie-data-imdb\/movie_metadata.csv')\npd.set_option('max_columns', None)\ndf_raw.head()","df16b597":"#this creats a new column 'profit' in the dataframe\ndf_raw['profit'] =df_raw['gross'] - df_raw['budget']","a605cd7c":"#data cleaning\ndf_raw.dropna(inplace = True)\ndf_raw.drop_duplicates(inplace= True)\ndf_raw.head()","98c11a80":"#To just check the summary of the data available to us\ndf_raw.describe()","23bb288e":"df_raw.corr()","f0173814":"sn.heatmap(df_raw.corr(),cmap = 'coolwarm')\nplt.show()","34664f89":"to_drop = ['color', 'duration', 'num_critic_for_reviews','num_voted_users','facenumber_in_poster','movie_imdb_link','num_user_for_reviews','country','title_year','actor_2_facebook_likes','aspect_ratio','movie_facebook_likes','actor_3_facebook_likes','actor_2_name','actor_1_name','actor_3_name','actor_1_facebook_likes','content_rating','director_facebook_likes','language','cast_total_facebook_likes','plot_keywords']","77147c7d":"#New dataframe is created by dropping columns\ndf_raw1 = df_raw.drop(to_drop, axis = 1)\ndf_raw1.isnull().sum()","45148c73":"print(len(df_raw1[df_raw1['budget']<=0]))\nprint(len(df_raw1[df_raw1['gross']<=0]))","cebc6e1e":"plt.scatter(df_raw1['budget'],df_raw1['gross'])# plot between budget and gross\nplt.xlabel('Budget')\nplt.ylabel('gross')\nplt.show()\nplt.scatter(df_raw1['budget'],df_raw1['profit'] , c = 'red')#plot between budget and profit\nplt.xlabel('budget')\nplt.ylabel('profit')\nplt.show()\nplt.scatter(df_raw1['gross'],df_raw1['profit'], c= 'green' )#plot between gross and profit\nplt.xlabel('gross')\nplt.ylabel('profit')\nplt.show()\n","9ad15080":"dict_ ={}\n#Function to create a frequency distribution of the different genres available in the dataset.\ndef count_function(dataframe): \n  for i in dataframe['genres']:\n    dict_[i] = dict_.get(i,0)+1\n  return dict_","ad379d80":" genre_count = count_function(df_raw1)\n genre_count\n dict_ = {}#to make dict_ empty again, otherwise the count will increase each time you run the cell\n import nltk\n from nltk.probability import FreqDist\n genre_count = FreqDist(genre_count) #could have taken the most_common genre without using FreqDist\n most_common_genres = genre_count.most_common(10)\n most_common_genres #To find the most common genres in the available data set\n df=pd.DataFrame(most_common_genres, columns = ['Top_frequent_Genre','Number_of_Movies'])\n df","a85d170c":"#in the next line column value aggregation is done (with groupby) and mean is calculated so that 'topgenseries' dataframe can be created\ntopgenreseries = df_raw1.groupby('genres')[['budget','imdb_score','gross','profit']].mean()\ndf2=pd.DataFrame(topgenreseries['budget'][df['Top_frequent_Genre']])\ndf2\nplt.bar(df2.index,df2['budget'])\nplt.xticks(rotation = 90)\nplt.xlabel('Top Frequent Genres')\nplt.ylabel('Budget In 100 Million $')\nplt.show()\n#plt.bar(df2.index,df2['budget'])","8c4451f9":"max_budget = 1500000\ndf_final=df_raw1[df_raw1['budget']<= max_budget]\ndf_final.head()","346c5c52":"#in the next line column value aggregation is done (with groupby) and mean is calculated so that 'budget_genres' dataframe can be created\nbudget_genres = df_final.groupby('genres')[['budget','imdb_score','gross','profit']].mean() \nbudget_genres = budget_genres.sort_values('profit', ascending = False)\nbudget_genres.head(8)\n\n\n","5bb77a7b":"%matplotlib inline\nfrom matplotlib.pyplot import figure\nplt.bar(budget_genres.index[:5] , budget_genres['profit'][:5]) # To show the profit of top 5 genres within the budget limit\nplt.xticks(rotation = 90)\nplt.xlabel('Genre')\nplt.ylabel('Profit in 10 million $')\nplt.show()","6025223a":"df_final[df_final['genres']== 'Comedy|Drama|Music']","477ad0eb":"genre_count2 = count_function(df_final)\ndict_ = {} # to make the dict_ empty, other wise if u run the cell again the count will inrease\nlist_final=[(i, genre_count2[i]) for i in budget_genres.index]\n# The code below is to convert the above list into a dictionary form\ndict_1 = {}\nfor i in list_final:\n  dict_1[i[0]] = i[1]\ndict_1\ndict_1 = FreqDist(dict_1) #To get the most frequent genres easily, converted dictionary to a frequency distribution\ndict_1.most_common(15)# Most common 15 genres in the available budget\ndf3 = pd.DataFrame(dict_1.most_common(15), columns = ['Genres','Number of movies'])\ndf3\n\n","89b781ad":"list_2 = []\nfor i in df3['Genres']:\n  if re.findall(r'Horror',i) == ['Horror']:\n    list_2.append(i)\nlist_2","ea2a18bc":"df_horror = budget_genres.loc[['Horror','Horror|Thriller'],:]\ndf_horror","d193b508":"%matplotlib inline\nplt.bar(df_horror.index, df_horror['profit']) #to plot between genre and profit\nplt.xlabel('Genre')\nplt.ylabel('Profit in 10 million $')\nplt.show()\nplt.bar(df_horror.index,df_horror['budget']) #to plot between genre and budget\nplt.xlabel('Genre')\nplt.ylabel('Budget')\nplt.show()\nplt.bar(df_horror.index,df_horror['gross']) #to plot between genre and gross \nplt.xlabel('Genre')\nplt.ylabel('Gross in 10 million $')\nplt.show()","3001b29e":"profit_diff = df_horror.loc['Horror'][3] - df_horror.loc['Horror|Thriller'][3]\nbudget_diff = df_horror.loc['Horror'][0] - df_horror.loc['Horror|Thriller'][0]\nprint('The average profit differnce between Horror and Horror|Thriller genre is {}'.format(profit_diff))\nprint('The average budget differnce between Horror and Horror|Thriller genre is {}'.format(budget_diff))","1856ef70":"df_final1 = df_final[df_final['genres']!= 'Horror']\ndf_final2 = df_final[df_final['genres'] =='Horror']\nprint('The mean profit for all genre other than Horror = {}'.format(np.mean(df_final1['profit'])))\nprint('The mean profit of Horror genre = {}'.format(np.mean(df_final2['profit'])))","51770236":"import warnings\nwarnings.filterwarnings(\"ignore\") #to ignore the futurewarning of distplot\nsn.distplot(df_final1['profit']) #for getting the distribution plot for 'profit'from genres other than horror\nplt.show()\nsn.distplot(df_final2['profit'])#for getting the distribution plot for 'profit' from Horror genre\nplt.show()\n","ad11bb6a":"def hypothesis_testing(data1,data2):\n  alpha = [0.01, 0.05, 0.1] #common values for significance level\n  from scipy.stats import ttest_ind\n  stat,p_value = ttest_ind(data1,data2, equal_var= False)\n  print(p_value\/2)#since we are doing single tail test, we need only p_value\/2\n  for i in alpha:\n    if p_value\/2 < i:\n      print('Reject the Null Hypothesis H0 at {} % significance level'.format(i*100))\n      break\n    else:\n      print('Failed to reject the Null Hypothesis H0 at {} % significance level'.format(i*100))\n\n","485fb2fe":"hypothesis_testing(df_final2['profit'],df_final1['profit'])\n","83b4e914":"Let us make sure there are not negative entries in the `budget` and `gross`","595dd37a":"Let us understand how the gross, budget and profit are related to each other by making the scatter plot between these features.\n","e1b7b028":"Let us have a quick check on the correlation between different numerical data available in the given imdb dataset. From this we can get a rough idea that only the **gross** and **num_voted_users** have considerable correlation with the profit among other numerical parameters. But the **num_voted_users** we are not considering for the analysis because the votes are made after the movie is seen by the user and is an external parameter which we are not able to control.","f2cf7d07":"So we have to further analyse how many movies are there in each genre. The more films we have in each genre, better it is to come up with a solid argument","6ff3ef62":"Let us analyse the budget of these most frequent films","06119bca":"By having a closer look at `budget_genres` and `df3` the films which contains a **Horror** element is making more profit and we also have decent number of films available in the final data which have this **Horror** factor in it. Now let us find the genre of films with this factor.","0b1f2e2b":"From the above graph we can make some important inference such as: \n * As the budget increases profit doesn't increase\n * Profit has a positive correlation with the gross\n * The gross doesn't depend on the budget\n \nAlso from the graph we can identify that some points are lying on the extrems of the graph, alienated from the other group of points. These are outlieres in the data.\n","b3f7b50d":" # Summary","db9002ba":"Now we have a rough idea on which all columns to be dropped from observing the correlation heatmap.","84d1b26d":"By seeing this output we might be misguded that Comedy|Drama|Music genre is the best genre to focus out next film on. However, by taking a closer look we can understand that there is only two such film data in the final dataset","2bd90a50":"from further analysis we can get the following data frame which shows the genres which have mean budget less than our current budget limit","4b33a9ec":"From the above hypothesis testing, we can say that making a movie in **Horror** genre can give higher profit than average of other movie genre at a confidence interval of 90%","1e10e667":"# This document is a report suggesting how to maximise the profit of our next movie project considering the current budget constraint.\n","82a1ccb5":"From the above analysis it is obvious that the most frequent genres in the availabe data set are out of budget as our budget has a cap at 1,500,000. But incase we can avail more funding, there is a good possibility of taking succesful films in these genres. Now, let us give the current budget limit to the film assuming that we are using the whole budget only for a single film","c1a6fea6":"The Genre given below are the most common genres in the available data set.","5e9d5ec4":"From the above analysis, assuming we can make only one film, I propose making a film in the **Horror** genre. However, we still have to do the Hypothesis testing to find if the higher profit shown by the **Horror** movie is statistically significant","0b9f97ba":"An exploritory data analysis is done on the available data set to figure out which movie genre we have to make next for maximising the profit within the given budget. First I have done the data cleaning and wrangling and estimated rough correlation between features so that we can eliminate irrelevant features.Then by further analysis I have understood that many of the popular genre was out of our reach because of the budget limitation.\n\nThe data is further analysed and the top genres which makes high profit was figured out. However, many such genres had only limited number of films in it making the analysis based only on such small sample size non-reliable. To overcome this, movie genres which has considerable sample size as well as high profit was found. From those movie genres **Horror** movie genre is proposed because of its significantly high returns over the budget.\n\nFinally a hypothesis testing is done and I figured out that I could propose the **Horror** movie genre at a 90% confidence interval.\n\n\n\n","7c8792e0":"Let us find out if we can use any of the most common genre type available in the available data set.","8fb682bf":"  # Hypothesis testing\n","a7d1c4ec":"From the above list we can find that **Horror** and **Horror** thriller is the common genre in both `budget_genres` and `df3`","a8610610":"If horror movies make higher profit, then average profit will be grater for horror movies.\n\n* $H_0$ : Average profit for horror movies are same as average of other genre\n  $U_1$ - $U_2$ = $0$\n\n* $H_1$ : Average profit for horror movies are greater than average of other genre $U_1$ - $U_2$ > $0$\n\nHere the two groups for which we do the hypothesis testing is for `df_final1['profit']` and `df_final2['profit']`\n\nSince here the sample size is not high enough to use a z-test, we will use t-test. Also, the sample size of both the groups which we consider are different, so we cannot assume same varience (ie, we cannot use student's t- test). We will use the Welch's t-test"}}