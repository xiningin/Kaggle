{"cell_type":{"52585f67":"code","078938bd":"code","02dbe6bf":"code","ffd1bfc9":"code","1dcd9c0d":"code","8837c09d":"code","a424b4b3":"markdown","04f66a1e":"markdown","a5e950f2":"markdown","1f04182d":"markdown","9bdba813":"markdown","b2e0c35d":"markdown"},"source":{"52585f67":"import numpy as np # linear algebra\nimport pandas as pd # data processing, CSV file I\/O (e.g. pd.read_csv)\n\nimport matplotlib.pyplot as plt # plotting\nimport seaborn as sns # advanced plotting","078938bd":"df_train   = pd.read_csv('\/kaggle\/input\/desafio-falconi-i\/train.csv', parse_dates=['date'])\ndf_test    = pd.read_csv('\/kaggle\/input\/desafio-falconi-i\/test.csv', parse_dates=['date'])\ndf_product = pd.read_csv('\/kaggle\/input\/desafio-falconi-i\/product.csv')\ndf_events  = pd.read_csv('\/kaggle\/input\/desafio-falconi-i\/events.csv', parse_dates=['date'])","02dbe6bf":"# Combina as tabelas de treino, produto e feriados em uma \u00fanica tabela\ndf = df_train.merge(df_product)\ndf = df.merge(df_events.drop_duplicates(subset='date', keep='first'), how='left', on='date').fillna('Dia Letivo')\n\n# Cria novas colunas\ndf['revenue'] = df['sale_quantity']*df['week_avg_price']\ndf['month-year'] = df['date'].dt.to_period('M')\n\ndf.head()","ffd1bfc9":"ax = df.groupby(['cod_store','month-year']).agg({'revenue':'sum'}).unstack()['revenue'].transpose().plot(figsize=(12,5))\nax.set_title(\"Receita mensal estimada por loja\")\nplt.show()","1dcd9c0d":"df_grouped = df.groupby(['cod_store','category']).agg({'revenue':'sum'}).rename(columns={'revenue':'% share revenue'})\ndf_grouped = df_grouped \/ df_grouped.groupby(['cod_store']).transform('sum')\n\nsns.barplot(x='% share revenue',y='category', data=df_grouped.reset_index(), hue='cod_store')\nplt.show()","8837c09d":"top_products = df.groupby(['category','subcategory'])['revenue'].sum().reset_index().sort_values(['category','revenue'], ascending=False).groupby('category').head(3)\nsns.barplot(x='revenue',y='subcategory', data=top_products, hue='category')\nplt.show()","a424b4b3":"### Pr\u00e9-processamento\n\nNesta etapa criaremos vari\u00e1veis de interesse para nossa an\u00e1lise.\n\n- revenue: receita da venda estimada de cada produto\n- month-year: m\u00eas-ano em que a venda foi realizada","04f66a1e":"### Leitura dos dados\n\nLeitura das bases de dados em tabelas (*dataframes*).","a5e950f2":"### 2. Produtos obsoletos","1f04182d":"## An\u00e1lise explorat\u00f3ria dos dados - Data & Analytics\n\nPreparamos essa an\u00e1lise explorat\u00f3ria da base da competi\u00e7\u00e3o para ajudar os participantes a ter um entendimento melhor da base.\n\nDe acordo com o que formos avan\u00e7ando a an\u00e1lise iremos atualizando este notebook.\n\nO n\u00edvel de dificuldade de cada an\u00e1lise est\u00e1 classificado com * (asteriscos), de 1 a 3.\n\n### Hip\u00f3teses a serem testadas:\n\n1. Vendas *\n    - Qual o per\u00edodo de data dispon\u00edvel na base para cada loja? \n    - Quais lojas vendem mais?\n    - Quais s\u00e3o os produtos\/categorias\/subcategorias mais vendidos?\n2. Produtos obsoletos *\n    - Existem produtos que sairam de linha?\n3. Outliers **\n    - Existem outliers nas vendas (dia com venda muito acima ou abaixo do comportamento normal)?\n4. Vari\u00e1veis ex\u00f3genas **\n    - Os feriados impactam a venda? E v\u00e9speras de feriados?\n    - Dados de temperatura e precipita\u00e7\u00e3o influenciam a venda de algum tipo de produto?\n5. Canibaliza\u00e7\u00e3o ***\n    - Existe canibaliza\u00e7\u00e3o entre produtos da mesma subcategoria?\n6. Sazonalidade **\n    - Existe sazonalidade nas vendas? Em quais frequ\u00eancias (m\u00eas, semana, dias)?","9bdba813":"### Deixe aqui seu coment\u00e1rio\n\nQual outra hip\u00f3tese voc\u00ea gostaria de testar?","b2e0c35d":"### 1. Vendas"}}