{"cell_type":{"517342ab":"code","dc5b61b0":"code","0637a0b5":"code","256fe92a":"code","d2f1dc39":"code","78058d94":"code","335c79d9":"code","e985b8d1":"code","8dffa2ef":"code","15fda8d4":"code","c4fb2683":"code","f8640824":"code","53f9ddf3":"code","843b98ce":"code","8319cdb3":"code","9b17f78f":"code","2abdb0f4":"code","61823ae8":"code","0533506a":"markdown","9cef7b20":"markdown","4b43f5be":"markdown","5452244d":"markdown","db289598":"markdown","6e008e52":"markdown"},"source":{"517342ab":"import pandas as pd\nimport os \nos.chdir(\"\/kaggle\/input\/hah-data-science-challenge\/\")\nimport seaborn as sns\nsns.set_style(\"darkgrid\")\nimport matplotlib.pyplot as plt\n\nimport pandas_profiling","dc5b61b0":"df_train = pd.read_csv(\"train.csv\", index_col=False)\ndf_test = pd.read_csv(\"test.csv\", index_col=False)\n\nprint(df_train.shape)\nprint(df_test.shape)","0637a0b5":"df_train.head()","256fe92a":"df_test.head()","d2f1dc39":"pandas_profiling.ProfileReport(df_train)","78058d94":"pandas_profiling.ProfileReport(df_test)","335c79d9":"tgt_col = [\"\u306d\u3058\", '\u30d7\u30ec\u30fc\u30c8', '\u9332\u97f3\u65b9\u6cd5', '\u30de\u30a4\u30af\u8ddd\u96e2']\nfor col in tgt_col:#Target\u306f\u5909\u63db\u5bfe\u8c61\u5916\n    train_component = sorted(df_train[col].unique())\n    test_component = sorted(df_test[col].unique())\n    \n    and_component = list(train_component)\n    and_component.extend(list(test_component))\n    and_component = sorted(list(set(and_component)))\n    \n    print(col)\n    print(\"train_component : \", train_component)\n    print(\"test_component : \", test_component)\n    print(\"and_component\", and_component)\n    print(\"\")","e985b8d1":"#\u5404\u30c7\u30fc\u30bf\u4fee\u6b63\u7528\u306e\u8f9e\u66f8\nbolt_dict = {\n    '\u5927':\"big\",\n    '\u5c0f':\"small\"\n}\n\nplate_dict = {\n    '\u5927':\"big\",\n    '\u5c0f':\"small\"\n}\n\nrecord_dict = {\n    'PC\u5185\u81d3':\"pc_built_in\",\n    'PC\u5185\u8535':\"pc_built_in\",\n    'USB1':\"usb1\", \n    'USB2':\"usb2\", \n    'USB3':\"usb3\", \n    'USB4':\"usb4\", \n    '\u30b9\u30de\u30db':\"smart_phone\",\n    '\u30b9\u30de\u30db\u306e\u30dc\u30a4\u30b9\u30ec\u30b3\u30fc\u30c0':\"smart_phone\",\n    '\u5185\u8535\u30de\u30a4\u30af':\"pc_built_in\",\n    }\n\ndistance_dict = {\n    '10cm': 0.1, \n    '10\u339d': 0.1, \n    '1M': 1.0, \n    '20cm': 0.2, \n    '20\u339d': 0.2, \n    '2M': 2.0, \n    '2m': 2.0, \n    '30cm': 0.3, \n    '30cn': 0.3, \n    '30\u339d': 0.3, \n    '3m': 3.0, \n    '40cm': 0.4, \n    '40\u339d': 0.4, \n    '50cm': 0.5, \n    '50\u339d': 0.5, \n    '5cm': 0.05,\n    '8cm': 0.08, \n    '\uff11\uff2d': 1.0   \n}\n\ncvt_dict = {\n    \"\u306d\u3058\" : bolt_dict, \n    '\u30d7\u30ec\u30fc\u30c8' : plate_dict, \n    '\u9332\u97f3\u65b9\u6cd5' : record_dict, \n    '\u30de\u30a4\u30af\u8ddd\u96e2' : distance_dict\n}","8dffa2ef":"#\u5404df\u306e\u30c7\u30fc\u30bf\u3092\u7f6e\u63db\u3059\u308b\nfor col in tgt_col:#Target\u306f\u5909\u63db\u5bfe\u8c61\u5916\n    df_train[col] = df_train[col].map(cvt_dict[col])\n    df_test[col] = df_test[col].map(cvt_dict[col])","15fda8d4":"#\u30ab\u30e9\u30e0\u540d\u306e\u5909\u66f4\n#df_train\u65e5\u672c\u8a9e\u30ab\u30e9\u30e0\u540d : ['ID', '\u306d\u3058', '\u30d7\u30ec\u30fc\u30c8', '\u9332\u97f3\u65b9\u6cd5', '\u30de\u30a4\u30af\u8ddd\u96e2', '\u30d5\u30a1\u30a4\u30eb', 'Target']\ncol_train = ['id', 'bolt', 'plate', 'record', 'mic_dist', 'file', 'target']\n#df_test\u65e5\u672c\u8a9e\u30ab\u30e9\u30e0\u540d : ['ID', '\u306d\u3058', '\u30d7\u30ec\u30fc\u30c8', '\u9332\u97f3\u65b9\u6cd5', '\u30de\u30a4\u30af\u8ddd\u96e2', '\u30d5\u30a1\u30a4\u30eb', 'Target']\ncol_test = ['id', 'bolt', 'plate', 'record', 'mic_dist', 'file']\n\ndf_train.columns = col_train\ndf_test.columns = col_test","c4fb2683":"df_train.head()","f8640824":"df_test.head()","53f9ddf3":"pandas_profiling.ProfileReport(df_train)","843b98ce":"pandas_profiling.ProfileReport(df_test)","8319cdb3":"fig, axs = plt.subplots(2, 4, figsize=(25, 12))\nsns.countplot(x='bolt', \n              order=[\"big\", \"small\"],\n              data=df_train, \n              ax=axs[0,0])\naxs[0,0].set_title(\"train_bolt\")\nsns.countplot(x='bolt', \n              order=[\"big\", \"small\"],\n              data=df_test, \n              ax=axs[1,0])\naxs[1,0].set_title(\"test_bolt\")\n\n\nsns.countplot(x = 'plate', \n              order=[\"big\", \"small\"],\n              data=df_train, \n              ax=axs[0,1])\naxs[0,1].set_title(\"train_plate\")\nsns.countplot(x = 'plate', \n              order=[\"big\", \"small\"],\n              data=df_test, \n              ax=axs[1,1])\naxs[1,1].set_title(\"test_plate\")\n\nsns.countplot(x = 'record', \n              order=[\"smart_phone\", \"usb4\", \"pc_built_in\", \"usb1\", \"usb2\", \"usb3\"],\n              data=df_train, ax=axs[0,2])\naxs[0,2].set_title(\"train_record\")\nsns.countplot(x = 'record', \n              order=[\"smart_phone\", \"usb4\", \"pc_built_in\", \"usb1\", \"usb2\", \"usb3\"],\n              data=df_test, ax=axs[1,2])\naxs[1,2].set_title(\"test_record\")\n\nsns.histplot(x = 'mic_dist', data=df_train, ax=axs[0,3])\naxs[0,3].set_title(\"train_mic_dist\")\naxs[0,3].set_xlim([-0.1, 3.2])\n\nsns.histplot(x = 'mic_dist', data=df_test, ax=axs[1,3])\naxs[1,3].set_title(\"test_mic_dist\")\naxs[1,3].set_xlim([-0.1, 3.2])\n\nplt.tight_layout()","9b17f78f":"def meta_define():\n    \"\"\"\n    input : none\n    output : Corrected metadata\n    \"\"\"\n    import pandas as pd\n    import os \n    os.chdir(\"\/kaggle\/input\/hah-data-science-challenge\/\")\n    df_train = pd.read_csv(\"train.csv\", index_col=False)\n    df_test = pd.read_csv(\"test.csv\", index_col=False)\n    \n    ##################################################\n    #\u4ee5\u4e0b\u8f9e\u66f8\u3084\u5909\u6570\u306e\u5b9a\u7fa9\n    #\u5404\u30c7\u30fc\u30bf\u4fee\u6b63\u7528\u306e\u8f9e\u66f8\n    bolt_dict = {\n        '\u5927':\"big\",\n        '\u5c0f':\"small\"\n    }\n\n    plate_dict = {\n        '\u5927':\"big\",\n        '\u5c0f':\"small\"\n    }\n\n    record_dict = {\n        'PC\u5185\u81d3':\"pc_built_in\",\n        'PC\u5185\u8535':\"pc_built_in\",\n        'USB1':\"usb1\", \n        'USB2':\"usb2\", \n        'USB3':\"usb3\", \n        'USB4':\"usb4\", \n        '\u30b9\u30de\u30db':\"smart_phone\",\n        '\u30b9\u30de\u30db\u306e\u30dc\u30a4\u30b9\u30ec\u30b3\u30fc\u30c0':\"smart_phone\",\n        '\u5185\u8535\u30de\u30a4\u30af':\"pc_built_in\",\n        }\n\n    distance_dict = {\n        '10cm': 0.1, \n        '10\u339d': 0.1, \n        '1M': 1.0, \n        '20cm': 0.2, \n        '20\u339d': 0.2, \n        '2M': 2.0, \n        '2m': 2.0, \n        '30cm': 0.3, \n        '30cn': 0.3, \n        '30\u339d': 0.3, \n        '3m': 3.0, \n        '40cm': 0.4, \n        '40\u339d': 0.4, \n        '50cm': 0.5, \n        '50\u339d': 0.5, \n        '5cm': 0.05,\n        '8cm': 0.08, \n        '\uff11\uff2d': 1.0   \n    }\n\n    cvt_dict = {\n        \"\u306d\u3058\" : bolt_dict, \n        '\u30d7\u30ec\u30fc\u30c8' : plate_dict, \n        '\u9332\u97f3\u65b9\u6cd5' : record_dict, \n        '\u30de\u30a4\u30af\u8ddd\u96e2' : distance_dict\n    }\n    \n    #df_train\u65e5\u672c\u8a9e\u30ab\u30e9\u30e0\u540d : ['ID', '\u306d\u3058', '\u30d7\u30ec\u30fc\u30c8', '\u9332\u97f3\u65b9\u6cd5', '\u30de\u30a4\u30af\u8ddd\u96e2', '\u30d5\u30a1\u30a4\u30eb', 'Target']\n    col_train = ['id', 'bolt', 'plate', 'record', 'mic_dist', 'file', 'target']\n    #df_test\u65e5\u672c\u8a9e\u30ab\u30e9\u30e0\u540d : ['ID', '\u306d\u3058', '\u30d7\u30ec\u30fc\u30c8', '\u9332\u97f3\u65b9\u6cd5', '\u30de\u30a4\u30af\u8ddd\u96e2', '\u30d5\u30a1\u30a4\u30eb', 'Target']\n    col_test = ['id', 'bolt', 'plate', 'record', 'mic_dist', 'file']\n    \n    tgt_col = [\"\u306d\u3058\", '\u30d7\u30ec\u30fc\u30c8', '\u9332\u97f3\u65b9\u6cd5', '\u30de\u30a4\u30af\u8ddd\u96e2']\n    ##################################################\n    \n    for col in tgt_col:#Target\u306f\u5909\u63db\u5bfe\u8c61\u5916\n        df_train[col] = df_train[col].map(cvt_dict[col])\n        df_test[col] = df_test[col].map(cvt_dict[col])\n        \n    df_train.columns = col_train\n    df_test.columns = col_test\n    \n    return df_train, df_test","2abdb0f4":"#operation check\ndf_train, df_test = meta_define()","61823ae8":"df_train.head()\ndf_test.head()","0533506a":"# Compare the distribution of training and test data\n# \u5b66\u7fd2\u30c7\u30fc\u30bf\u3068\u30c6\u30b9\u30c8\u30c7\u30fc\u30bf\u306e\u5206\u5e03\u3092\u6bd4\u8f03\u3059\u308b","9cef7b20":"# Corrections to notation errors and EDA for MetaData\n# \u30e1\u30bf\u30c7\u30fc\u30bf\u306b\u5bfe\u3059\u308bEDA\u3068\u8868\u8a18\u63fa\u308c\u306e\u4fee\u6b63\n- Fixing data inconsistencies \/ \u30c7\u30fc\u30bf\u306e\u8868\u8a18\u63fa\u308c\u3092\u4fee\u6b63\u3059\u308b\n- Japanese notation is corrected to English \/ \u65e5\u672c\u8a9e\u8868\u8a18\u306f\u82f1\u8a9e\u306b\u76f4\u3059\n- Eventually, the metadata modification will be made into a function so that it can be reused in other Notebook. \/ \u6700\u7d42\u7684\u306b\u306f\u3001\u30e1\u30bf\u30c7\u30fc\u30bf\u306e\u4fee\u6b63\u3092\u95a2\u6570\u5316\u3057\u3066\u3001\u4ed6\u306eNotebook\u3067\u3082\u518d\u5229\u7528\u3067\u304d\u308b\u3088\u3046\u306b\u3059\u308b\u3002\n- If there are any mistakes, please point them out to me.\u3000\/ \u9593\u9055\u3044\u306a\u3069\u304c\u3042\u308c\u3070\u3054\u6307\u6458\u9802\u304d\u305f\u3044\u3067\u3059\u3002","4b43f5be":"# Pandas_profile for the modified data\n# \u4fee\u6b63\u3057\u305f\u30c7\u30fc\u30bf\u306b\u5bfe\u3057\u3066Pandas_profile\u3059\u308b","5452244d":"# First of all, let's make a Pandas_profile of the distributed data as it is\n# \u307e\u305a\u306f\u914d\u5e03\u30c7\u30fc\u30bf\u3092\u305d\u306e\u307e\u307ePandas_profile\u3059\u308b\n- There is a discrepancy in the notation of \u201cbolt,\" \"plate,\" \"recording method,\" and \"microphone distance.\"\n- \"\u306d\u3058\", \"\u30d7\u30ec\u30fc\u30c8\", \"\u9332\u97f3\u65b9\u6cd5\", \"\u30de\u30a4\u30af\u8ddd\u96e2\"\u306b\u8868\u8a18\u3086\u308c\u304c\u3042\u308b","db289598":"# Make it a function so that it can be reused in other code.\n# \u95a2\u6570\u306b\u3057\u3066\u3001\u4ed6\u306e\u30b3\u30fc\u30c9\u3067\u518d\u5229\u7528\u3067\u304d\u308b\u3088\u3046\u306b\u3059\u308b\u3002","6e008e52":"# Correct the contents of each column and fix the notation errors\n# \u5404\u30ab\u30e9\u30e0\u306e\u5185\u5bb9\u3092\u4fee\u6b63\u3057\u3001\u8868\u8a18\u63fa\u308c\u3092\u76f4\u3059"}}