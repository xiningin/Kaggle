{"cell_type":{"53779aa0":"code","6ec6a284":"code","8dd7da2a":"code","f0da97a3":"markdown"},"source":{"53779aa0":"!pip install --upgrade -q datasets \n!pip install --upgrade -q accelerate \n\n!pip uninstall fsspec -y && pip3 install fsspec==2021.5.0\n!wget -c https:\/\/raw.githubusercontent.com\/huggingface\/transformers\/master\/examples\/pytorch\/text-classification\/run_glue_no_trainer.py","6ec6a284":"import pandas as pd\nimport numpy as np\n\n# The script needs only the text data so we have to make new data frames with only the \n# excerpts\n\ntrain = pd.read_csv('..\/input\/commonlitreadabilityprize\/train.csv')\ntrain_texts = train[['excerpt','target']].copy()\ntrain_texts.rename(columns={'excerpt':'sentence', 'target':'label'}, inplace=True)\n\ntest = pd.read_csv('..\/input\/commonlitreadabilityprize\/test.csv')\ntest_text = test[['excerpt']].copy()\ntest_text.rename(columns={'excerpt':'text'}, inplace=True)\ntest_text.to_csv('test_data.csv', index=False)","8dd7da2a":"# Command line - make sure there's no extra spaces after the \\\n# set task_name to stsb for regression. the script will set the number of labels to 1 in the model configs\n# setting pad to max length enable dynamic padding\n\n!python run_glue_no_trainer.py \\\n    --task_name 'stsb' \\\n    --model_name_or_path roberta-large \\\n    --train_file 'train_data.csv' \\\n    --validation_file 'train_data.csv' \\\n    --max_length 325 \\\n    --use_slow_tokenizer \\\n    --num_train_epochs 10 \\\n    --learning_rate 2e-5 \\\n    --output_dir output \\\n    --per_device_train_batch_size 8 \\\n    --per_device_eval_batch_size 8 \\\n    --num_warmup_steps 50 \\\n    --seed 47 \\\n# There are some arguments that when passed will equal true and do not need {var} e.g. use_slow_tokenizer","f0da97a3":"This script is from [huggingface transformer's github](https:\/\/github.com\/huggingface\/transformers\/tree\/master\/examples\/pytorch\/text-classification)  "}}