{"cell_type":{"c7362cbb":"code","69a84e56":"code","5ec88879":"code","12cf5468":"code","d9aac63e":"code","32d7d4e7":"code","dad9af75":"code","29afddc7":"code","61b5357a":"code","9883bc15":"code","242e13f8":"code","91b093b8":"code","d834acaa":"code","a10fe68b":"code","d44b7bf5":"code","94b07e8c":"code","11b87a98":"code","f8d1a0e3":"code","afef1adc":"code","410fc69b":"code","130a65c7":"code","82cb54cd":"code","792e6f5b":"code","21ccf2a3":"code","80bb217a":"code","ff55c716":"code","49d4ac27":"code","4fdaa0c6":"code","839899ff":"markdown","86b9868c":"markdown","6e250a4d":"markdown","4541979b":"markdown","86914a8a":"markdown","e07adec9":"markdown","1b213c90":"markdown","4fd06a32":"markdown","b5c0f81b":"markdown"},"source":{"c7362cbb":"#importing the relevant library\n\nimport numpy as np\nimport pandas as pd\nimport matplotlib.pyplot as plt\nimport seaborn as sns\nsns.set()\n%matplotlib inline","69a84e56":"#reading the data\n\nraw_data = pd.read_csv('..\/input\/insurance\/insurance.csv')\nraw_data.head()","5ec88879":"# Looking for no. of missing value in each column\nraw_data.isnull().sum()","12cf5468":"#checking for missing value by heatmap\n\nsns.heatmap(raw_data.isnull(),cbar=True)","d9aac63e":"# Some other tools to check for missing value\nfrom missingno import matrix,heatmap\nmatrix(raw_data)","32d7d4e7":"# Number of male and female patient  \nraw_data['sex'].value_counts()","dad9af75":"raw_data['sex'].value_counts().plot.bar(color='y')","29afddc7":"raw_data['age'].value_counts().sort_values(ascending=False)","61b5357a":"fig = plt.figure(figsize=(12,6))\nsns.countplot(raw_data['age'],hue=raw_data['smoker'],palette=['red','green'],)","9883bc15":"#Check Point\ndf = raw_data.copy()","242e13f8":"# Encoding the data with map function\n\ndf['sex'] = raw_data['sex'].map({'female':0,'male':1})\ndf['smoker'] = raw_data['smoker'].map({'yes':1,'no':0})\ndf['region'] = raw_data['region'].map({'southeast':0,'southwest':1,'northwest':2,'northeast':3})","91b093b8":"raw_data['region'].value_counts()","d834acaa":"df.head()","a10fe68b":"sns.heatmap(df.corr(),cmap='Wistia',annot=True)","d44b7bf5":"# Check Point 2\ndf2 = raw_data.copy()\ndf2.head()","94b07e8c":"## Label Encoding\n\nfrom sklearn.preprocessing import LabelEncoder\nlb = LabelEncoder()\ndf2['region'] = lb.fit_transform(df2['region'])\ndf2['sex'] = lb.fit_transform(df2['sex'])\ndf2['smoker'] = lb.fit_transform(df2['smoker'])\ndf2.head()","11b87a98":"# Check point encoding\ndf3 = raw_data.copy()\ndf3.head()","f8d1a0e3":"## Using OneHotEncoding\n\nfrom sklearn.preprocessing import OneHotEncoder\nohe = OneHotEncoder(drop='first')\nx = pd.DataFrame(ohe.fit_transform(df3[['sex','children','smoker','region']]).toarray())\nx.columns = ['Male','children_1','children_2','children_3','children_4','children_5','smoker','northwest','southeast','southwest']\ndf4 = pd.concat([df3.drop(['sex','children','smoker','region'],axis=1),x],axis=1)\ndf4.head()","afef1adc":"plt.figure(figsize=(15,6))\nsns.heatmap(df4.corr(),annot=True)","410fc69b":"## Creating the check Point\nnew_data = df4","130a65c7":"sns.scatterplot(x=raw_data['bmi'],y=raw_data['charges'],hue=raw_data['smoker'])","82cb54cd":"sns.lmplot(data=df4,x='bmi',y='charges',aspect=2,height=6,hue='smoker')","792e6f5b":"# Looking for continous variable\n\nfig,axes = plt.subplots(nrows=1,ncols=2,figsize=(15,5))\nsns.distplot(df4['charges'],ax=axes[0],color='purple')\nsns.distplot(df4['bmi'],ax=axes[1],color='orange')","21ccf2a3":"# \nsns.distplot(np.log(df4['charges']),color='purple')","80bb217a":"df4.columns","ff55c716":"# Checkin point applying linear regression\n\nnew_data = df4.copy()\nnew_data = new_data.reindex(['age', 'bmi', 'Male', 'children_1', 'children_2',\n       'children_3', 'children_4', 'children_5', 'smoker', 'northwest',\n       'southeast', 'southwest','charges'],axis=1)\nnew_data.head()","49d4ac27":"import statsmodels.api as sm\nx1 = new_data.iloc[:,:-1] # independent variable\ny = new_data.iloc[:,-1] #dependent variable","4fdaa0c6":"x = sm.add_constant(x1)\nresult = sm.OLS(y,x).fit()\nresult.summary()","839899ff":"Person with smoking addiction seems to have more charges to paid at medical treatment","86b9868c":"No. of Male and Female Paitent are almost equal.","6e250a4d":"After performing Backward elimination and Multiple Linear regression with Significant Value=0.05,\nI got predictive variable as folowing:\n* Age\n* BMI\n* Smoker\n___________________________________________________________________\n___________________________________________________________________\n\n1. **Children** features donot seem to be good predictive variable as it is for some it predict and others for not.\n2. **Region** features also seem to have low predictive power.\n3. **Sex** features donot seem to be not a good predictive as both are having almost number in dataset.","4541979b":"Only Smoker is highly correleted to charges and other is having low or no correlection","86914a8a":"Average charges at 10000 to 20000 and are right skewed. and BMI is normally distrubuted","e07adec9":"# Adjusted R^2\n\nOur model explain about 75% variability of data.","1b213c90":"**Columns**\n\nage: age of primary beneficiary\n\nsex: insurance contractor gender, female, male\n\nbmi: Body mass index, providing an understanding of body, weights that are relatively high or low relative to height,\nobjective index of body weight (kg \/ m ^ 2) using the ratio of height to weight, ideally 18.5 to 24.9\n\nchildren: Number of children covered by health insurance \/ Number of dependents\n\nsmoker: Smoking\n\nregion: the beneficiary's residential area in the US, northeast, southeast, southwest, northwest.\n\ncharges: Individual medical costs billed by health insurance","4fd06a32":"We don't have any missing value in dataset","b5c0f81b":"Looking for P-values:\n*  it is the smallest level of significane at which we can still reject the null hypothesis.\n* The p value is the evidence against a null hypothesis. The smaller the p-value, the stronger the evidence that you should reject the null hypothesis. \n\n\nfor Significane Level of 0.05\n*  p-value < 0.05 --> reject the null hypothesis\n*  p-value > 0.05  --> cannot reject the null hypthesis"}}