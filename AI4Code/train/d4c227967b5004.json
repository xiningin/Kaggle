{"cell_type":{"abccccba":"code","7e830cb7":"code","7406b3ce":"code","fcb2bb46":"code","1b6a1cf4":"code","45d9f1c0":"code","1a023a54":"code","9330e9b1":"code","39471674":"code","4c799eb1":"code","66b03b30":"code","c72d5d4c":"code","2fec9aff":"code","4b1918fa":"code","76d65c1f":"code","f6ae28ee":"code","6b45be96":"code","0869c312":"code","aa730fff":"code","6313825d":"code","3ee1e60a":"code","a3f28eea":"code","02223a53":"code","045de548":"code","092f9bc1":"code","0db5852b":"code","9df04d6e":"code","bdb0f8c8":"code","80c0180b":"code","64b897ad":"code","5a6a4b50":"code","6d105cde":"code","29d8ed2a":"code","40069ff9":"code","702872dc":"code","ff92c117":"code","9bf2bc4c":"code","b1b63239":"code","7507b6c5":"code","944c58fb":"code","ff742cc3":"code","ef3a4f87":"code","3ec03108":"code","7dc9dc3b":"code","e0d92cab":"code","7ed8b8d5":"code","29db8068":"code","4bb68fad":"code","e6220880":"code","e9f496e0":"code","11cef663":"code","3fdd983d":"code","62386b17":"code","93e59367":"code","f0d31cc4":"code","4b0840fa":"code","c8c41cda":"code","deb32446":"code","b45f09bb":"code","03bf5ec5":"code","1554f462":"code","365d6f46":"code","42a3ee79":"code","a33e8b7f":"code","53d6c237":"code","085786aa":"code","070d9e05":"code","7c2a8612":"code","9a0e9378":"code","f37de011":"code","d6129306":"code","9200cc03":"code","138a462b":"markdown","497385b7":"markdown","8912021a":"markdown","35ae1ab1":"markdown","cf2a726a":"markdown","d1632664":"markdown","f17c7595":"markdown","c5255c48":"markdown","eb8aec61":"markdown","9b88e047":"markdown","bdecb86e":"markdown","8907c8c7":"markdown","d88446f8":"markdown","981047b8":"markdown","8ba90e28":"markdown","9a9082e4":"markdown","19903f92":"markdown","72fa91a0":"markdown","aed688d0":"markdown","387c1f24":"markdown","472231ff":"markdown","6e44e066":"markdown","92a47917":"markdown","df89915b":"markdown","e609febb":"markdown","3306fcf4":"markdown","fc180251":"markdown","6fdbd9b7":"markdown","9be9eb75":"markdown","7e38764e":"markdown","3f167b66":"markdown","1419a569":"markdown","4a3810c0":"markdown","baf0b986":"markdown","023c8149":"markdown","0ba8e20e":"markdown","d3e83cac":"markdown","a9a28fe8":"markdown","0079c14c":"markdown","d71ba493":"markdown","1aa452a1":"markdown"},"source":{"abccccba":"# This Python 3 environment comes with many helpful analytics libraries installed\n# It is defined by the kaggle\/python docker image: https:\/\/github.com\/kaggle\/docker-python\n# For example, here's several helpful packages to load in \n\nimport numpy as np # linear algebra\nimport pandas as pd # data processing, CSV file I\/O (e.g. pd.read_csv)\n\n# Input data files are available in the \"..\/input\/\" directory.\n# For example, running this (by clicking run or pressing Shift+Enter) will list all files under the input directory\n\nimport os\nfor dirname, _, filenames in os.walk('\/kaggle\/input'):\n    for filename in filenames:\n        print(os.path.join(dirname, filename))\n\n# Any results you write to the current directory are saved as output.","7e830cb7":"Importing necessary libraries and loading dataset","7406b3ce":"import pandas as pd\nimport numpy as np\nimport ast\nimport matplotlib.pyplot as plt\nimport plotly.express as px\nimport plotly.graph_objects as go\nimport seaborn as sns\nfrom pandas_profiling import ProfileReport\nfrom plotly.offline import download_plotlyjs, init_notebook_mode, plot, iplot\n            \n%matplotlib inline","fcb2bb46":"movies = pd.read_csv('\/kaggle\/input\/the-movies-dataset\/movies_metadata.csv')\nmovies.head()","1b6a1cf4":"movies.columns","45d9f1c0":"movies.info()","1a023a54":"movies = movies.drop(columns = ['overview','homepage','id','imdb_id','status','poster_path','video','original_title','adult'])","9330e9b1":"movies['revenue'] = movies['revenue'].replace(0,np.nan)","39471674":"movies['budget'] = pd.to_numeric(movies['budget'], errors='coerce')\nmovies['budget'] = movies['budget'].replace(0, np.nan)\nmovies[movies['budget'].isnull()].shape","4c799eb1":"movies['return'] = movies['revenue']\/movies['budget']","66b03b30":"A return value > 1 would indicate profit whereas a return value < 1 would indicate a loss. We have created a return column in advance which would be used later.","c72d5d4c":"movies['release_date'] = pd.to_datetime(movies['release_date'], errors='coerce')\nmovies['year'] = pd.DatetimeIndex(movies['release_date']).year\nmovies['month'] = movies['release_date'].dt.month_name()","2fec9aff":"movies['production_countries'] = movies['production_countries'].fillna('[]').apply(ast.literal_eval)\nchange = lambda x: [i['name'] for i in x] if isinstance(x, list) else []\nmovies['production_countries'] = movies['production_countries'].apply(change) ","4b1918fa":"x = movies.apply(lambda x: pd.Series(x['production_countries']),axis=1).stack().reset_index(level=1, drop=True)\nx.name = 'countries' #if we dont do this than we get error while joining as column wont have any name","76d65c1f":"country_df = movies.drop('production_countries', axis=1).join(x)\ncountry_df = pd.DataFrame(country_df['countries'].value_counts())\ncountry_df['country'] = country_df.index\ncountry_df.columns = ['num_movies', 'country']\ncountry_df = country_df.reset_index().drop('index', axis=1)","f6ae28ee":"country_df.head(10)","6b45be96":"country_df = country_df[country_df['country'] != 'United States of America']","0869c312":"data = dict(type = 'choropleth',\n           locations = country_df['country'],\n           colorscale = 'Portland',\n           locationmode = 'country names',\n           z = country_df['num_movies'],\n           text = country_df['country'],\n           marker = dict(line = dict(color = 'rgb(255,255,255)',width=1)),\n           colorbar = {'title' : 'No of movies per country'})","aa730fff":"layout = dict(title = 'Countries where movies is directed',\n             geo = dict(showframe= False,\n                       projection = {'type' : 'mercator'}))","6313825d":"choromap = go.Figure(data=[data], layout=layout)\niplot(choromap)","3ee1e60a":"fran_df = movies[movies['belongs_to_collection'].notnull()]\nfran_df['belongs_to_collection'] = fran_df['belongs_to_collection'].apply(ast.literal_eval).apply(lambda x: x['name'] if isinstance(x, dict) else np.nan)\nfran_df = fran_df[fran_df['belongs_to_collection'].notnull()]","a3f28eea":"pivotfran_df = pd.pivot_table(fran_df,\n                              index = 'belongs_to_collection',\n                              values='revenue',\n                              aggfunc={'revenue':['count','sum']}).reset_index()","02223a53":"pivotfran_df.sort_values('sum', ascending=False).head(10)","045de548":"pivotfran_df.sort_values('count', ascending=False).head(10)","092f9bc1":"p = pivotfran_df.sort_values('count', ascending=False)","0db5852b":"fig = px.scatter(p.head(25), x=\"count\", y=\"sum\",size=\"sum\", color=\"belongs_to_collection\",\n                 hover_name=\"count\", log_x=True, size_max=60)\nfig.show()","9df04d6e":"movies['production_companies'] = movies['production_companies'].fillna('[]').apply(ast.literal_eval)\nprod_name = lambda x: [i['name'] for i in x] if isinstance(x, list) else []\nmovies['production_companies'] = movies['production_companies'].apply(prod_name)","bdb0f8c8":"x = movies.apply(lambda x: pd.Series(x['production_companies']),axis=1).stack().reset_index(level=1, drop=True)\nx.name = 'p_companies'","80c0180b":"company_df = movies.drop('production_companies', axis=1).join(x)","64b897ad":"MovieCount_df = pd.pivot_table(\n    company_df,\n    values=[\"title\"],\n    index=[\"p_companies\"],\n    aggfunc=\"count\"\n)","5a6a4b50":"movieCount_df = MovieCount_df.rename(columns={\"title\": \"total\"})","6d105cde":"movieCount_df.sort_values('total',ascending=False)","29d8ed2a":"company_sum = pd.DataFrame(company_df.groupby('p_companies')['revenue'].sum().sort_values(ascending=False))\ncompany_sum.columns = ['Total']\ncompany_count = pd.DataFrame(company_df.groupby('p_companies')['revenue'].count().sort_values(ascending=False))\ncompany_count.columns = ['Number']\ncompany_mean = pd.DataFrame(company_df.groupby('p_companies')['revenue'].mean().sort_values(ascending=False))\ncompany_mean.columns = ['Average']","40069ff9":"company_data = pd.concat((company_sum, company_count, company_mean), axis=1)","702872dc":"company_data.sort_values('Total', ascending=False).head(10)","ff92c117":"company_data[company_data['Number'] >= 10].sort_values('Average', ascending=False).head(10)","9bf2bc4c":"movies['original_language'].drop_duplicates().shape[0]","b1b63239":"lang_df = pd.DataFrame(movies['original_language'].value_counts())\nlang_df['language'] = lang_df.index\nlang_df.columns = ['number', 'language']\nlang_df.head()","7507b6c5":"#popularity, vote avg, vote count\ndef clean_numeric(x):\n    try:\n        return float(x)\n    except:\n        return np.nan","944c58fb":"movies['popularity'] = movies['popularity'].apply(clean_numeric).astype('float')\nmovies['vote_count'] = movies['vote_count'].apply(clean_numeric).astype('float')\nmovies['vote_average'] = movies['vote_average'].apply(clean_numeric).astype('float')","ff742cc3":"movies['popularity'].describe()","ef3a4f87":"movies['popularity'].plot(logy=True, kind='hist')","3ec03108":"movies[['title', 'popularity', 'year','revenue']].sort_values('popularity', ascending=False).head(10)","7dc9dc3b":"movies['vote_count'].describe()","e0d92cab":"movies[['title', 'vote_count', 'year','revenue']].sort_values('vote_count', ascending=False).head(10)","7ed8b8d5":"movies['vote_average'] = movies['vote_average'].replace(0, np.nan)\nmovies['vote_average'].describe()","29db8068":"movies[movies['vote_count'] > 2000][['title', 'vote_average', 'vote_count' ,'year']].sort_values('vote_average', ascending=False).head(10)","4bb68fad":"Count = movies['month'].value_counts()\nmon_df = pd.DataFrame(Count)","e6220880":"mon_df['month_name'] = mon_df.index\nmonth_df = mon_df.rename(columns={'month':'count'})\nmonth_df.reset_index().drop('index', axis=1)\nmonth_df['month_name'] = pd.Categorical(month_df['month_name'], ['January', 'February', 'March', 'April', 'May', 'June', 'July', 'August', 'September', 'October', 'November', 'December'])","e9f496e0":"month_df = month_df.sort_values('month_name')\nmonth_df","11cef663":"color_palette_list = ['#d63031', '#ff7675', '#0984e3', '#74b9ff','#81ecec', '#00cec9','#fab1a0','#e17055','#fdcb6e','#ffeaa7','#00b894','#55efc4']\ntrace = go.Bar(\n            x=month_df['month_name'],\n            y=month_df['count'],\n            marker=dict(\n            color=color_palette_list))\ndata = [trace]\n\n#extra for layout-withou this also graph plots\nlayout = go.Layout(\n    title='Number of movies released in a particular month',\n    font=dict(color='#909090'),\n    xaxis=dict(\n        title='Months',\n        titlefont=dict(\n            family='Arial, sans-serif',\n            size=12,\n            color='#909090'\n        ),\n        showticklabels=True,\n        tickangle=-45,\n        tickfont=dict(\n            family='Arial, sans-serif',\n            size=12,\n            color='#909090'\n        ),\n),\n    yaxis=dict(\n        title=\"Number of movies\",\n        titlefont=dict(\n            family='Arial, sans-serif',\n            size=12,\n            color='#909090'\n        ),\n        showticklabels=True,\n        tickangle=0,\n        tickfont=dict(\n            family='Arial, sans-serif',\n            size=12,\n            color='#909090'\n        )\n    )\n)\n\nfig = go.Figure(data=data, layout=layout)\niplot(fig)","3fdd983d":"month_order = ['January', 'February', 'March', 'April', 'May', 'June', 'July', 'August', 'September', 'October', 'November', 'December']","62386b17":"month_mean = pd.DataFrame(movies[movies['revenue'] > 1e8].groupby('month')['revenue'].mean())\nmonth_mean['mon'] = month_mean.index\nplt.figure(figsize=(12,6))\nplt.title(\"Average Gross by the Month for Blockbuster Movies\")\nsns.barplot(x='mon', y='revenue', data=month_mean, order=month_order)","93e59367":"year_p = pd.pivot_table(movies,index='month',values='title',columns='year',aggfunc='count')\nyear_p = year_p.fillna(0)\nyear_p.drop(year_p.iloc[:,0:115],axis=1,inplace=True)","f0d31cc4":"sns.set(font_scale=1)\nf, ax = plt.subplots(figsize=(16, 8))\nsns.heatmap(year_p, annot=True, linewidths=.5, ax=ax, fmt='n', yticklabels=month_order)","4b0840fa":"movies['runtime'].describe()","c8c41cda":"movies['runtime'] = movies['runtime'].astype('float')\nplt.figure(figsize=(12,6))\nsns.distplot(movies[(movies['runtime'] < 300) & (movies['runtime'] > 0)]['runtime'])","deb32446":"movies['genres'] = movies['genres'].fillna('[]').apply(ast.literal_eval).apply(lambda x: [i['name'] for i in x] if isinstance(x, list) else [])\ns = movies.apply(lambda x: pd.Series(x['genres']),axis=1).stack().reset_index(level=1, drop=True)\ns.name = 'genre'","b45f09bb":"genre_df = movies.drop('genres', axis=1).join(s)","03bf5ec5":"genre_df['genre'].value_counts().shape[0]","1554f462":"pop_gen = pd.DataFrame(genre_df['genre'].value_counts()).reset_index()\npop_gen.columns = ['genre', 'movies']\npop_gen.head(10)","365d6f46":"fig = px.bar(pop_gen.head(10), x='genre', y='movies',title='Most popular genre')\nfig.show()","42a3ee79":"fig = px.pie(pop_gen, values='movies', names='genre', title='major Genre used in movies')\nfig.show()","a33e8b7f":"genres = ['Drama', 'Comedy', 'Thriller', 'Romance', 'Action', 'Horror', 'Crime', 'Adventure', 'Science Fiction']","53d6c237":"pop_gen_movies = genre_df[(genre_df['genre'].isin(genres)) & (genre_df['year'] >= 2000) & (genre_df['year'] <= 2017)]\npop_gen_movies['month'] = pd.Categorical(pop_gen_movies['month'], ['January', 'February', 'March', 'April', 'May', 'June', 'July', 'August', 'September', 'October', 'November', 'December'])\nctab = pd.crosstab([pop_gen_movies['year']], pop_gen_movies['genre']).apply(lambda x: x\/x.sum(), axis=1)","085786aa":"ctab[genres].plot(kind='bar', stacked=True, colormap='jet', figsize=(12,8)).legend(loc='center left', bbox_to_anchor=(1, 0.5))\nplt.title(\"Stacked Bar Chart of Movie Proportions by Genre\")\nplt.show()","070d9e05":"fig = go.Figure(go.Scatter(\n        x = ctab.index,\n        y = ctab.Action,\n        mode='lines+markers',\n        name = 'Action'\n))\n\nfig.add_trace(go.Scatter(\n        x = ctab.index,\n        y = ctab.Adventure,\n        mode='lines+markers',\n        name = 'Adventure'\n))\nfig.add_trace(go.Scatter(\n        x = ctab.index,\n        y = ctab.Comedy,\n        mode='lines+markers',\n        name = 'Comedy'\n))\nfig.add_trace(go.Scatter(\n        x = ctab.index,\n        y = ctab.Crime,\n        mode='lines+markers',\n        name = 'Crime'\n))\nfig.add_trace(go.Scatter(\n        x = ctab.index,\n        y = ctab.Drama,\n        mode='lines+markers',\n        name = 'Drama'\n))\nfig.add_trace(go.Scatter(\n        x = ctab.index,\n        y = ctab.Horror,\n        mode='lines+markers',\n        name = 'Horror'\n))\nfig.add_trace(go.Scatter(\n        x = ctab.index,\n        y = ctab.Romance,\n        mode='lines+markers',\n        name = 'Romance'\n))\nfig.add_trace(go.Scatter(\n        x = ctab.index,\n        y = ctab['Science Fiction'],\n        mode='lines+markers',\n        name = 'Science Fiction'\n))\nfig.add_trace(go.Scatter(\n        x = ctab.index,\n        y = ctab.Thriller,\n        mode='lines+markers',\n        name = 'Thriller'\n))\n\nfig.show()","7c2a8612":"movies[movies['budget'].notnull()][['title', 'budget', 'revenue', 'return', 'year']].sort_values('budget', ascending=False).head(10)","9a0e9378":"succ_movies = movies[(movies['return'].notnull()) & (movies['budget'] > 5e6)][['title', 'budget', 'revenue', 'return', 'year']].sort_values('return', ascending=False).head(10)","f37de011":"fig = px.pie(succ_movies, values='revenue', names='title', title='Revenue generated by most successful movies in %')\nfig.show()","d6129306":"corr = movies[['budget','popularity','revenue','runtime','vote_average','vote_count']].corr()\nfig = go.Figure(\n                data=go.Heatmap(\n                z=corr,\n                x=corr.columns,\n                y=corr.columns,\n                hoverongaps=True,\n                colorscale=\"blues\",\n            )\n        )","9200cc03":"fig.show()","138a462b":"There are a total of 45,466 movies with 24 columns. From the above data we come to know that belongs to collection and homepage NaN values in excess. Let us get into analysis to find our burning questions.","497385b7":"Here we figure out that the trend is almost constant with not a huge surge in genre.","8912021a":"Most Succesful Production Companies Which production companies produce the most succesful movies on average? Let us find out. We will only consider those companies that have made at least 10 movies","35ae1ab1":"From the heatmap can see that a highest of 247 movies were released in the December 2011. For 2018 and 2020 the almost all values are 0 as the data is only till movies released prior to 2018","cf2a726a":"The Shawshank Redemption and The Godfather are the two most critically acclaimed movies. Interestingly, they are the top 2 movies in IMDB's Top 250 Movies list too.","d1632664":"Popularity, Vote Average and Vote Count We will try to gain a deeper understanding of the popularity, vote average and vote count features and try and deduce any relationships between them as well as other numeric features such as budget and revenue.","f17c7595":"Unsurprisingly, the United States is the most popular destination of production for movies given that our dataset largely consists of English movies. Europe is also an extremely popular location with the UK, France, Germany and Italy in the top 5. Japan and India are the most popular Asian countries when it comes to movie production.","c5255c48":"New year and month column are added to dataset to find the number of movies occuring in a particular year and month","eb8aec61":"Let us get familiar with the data","9b88e047":"There are over 93 languages represented in our dataset. As we had expected, English language films form the overwhelmingly majority. French and Italian movies come at a very distant second and third respectively. Let us represent the most popular languages (apart from English) in the form of a bar plot.","bdecb86e":"Here we are dropping the columns as they are not the dominant factors. The original_title column is dropped as it means that the title of movie will be in native language and we already have a title column which is in translated language.We will be able to deduce if the movie is a foreign language film by looking at the original_language feature so no tangible information is lost in doing so.","8907c8c7":"Total no of movies under particular company","d88446f8":"Data Wrangling******","981047b8":"In today's world, undoubtedly everyone is familiar with the word movie. Everyone enjoys watching movie. Like many others, even I am a movie buff and love watching movies with different genres with drama being my favorite genre. In the below notebook, I have generated some meaningful insights and respresent the insights using visualizations. I have a dataset which consist around 45,500 movies and various factors associated with the movie. Using this data, we will try to get some useful numbers and thehidden pattern involved in data.","8ba90e28":"Franchise movies Let us now have a brief look at Franchise movies. I was curious to discover the longest running and the most successful franchises among many other things.","9a9082e4":"Original Language In this section, let us look at the languages of the movies in our dataset. From the production countries, we have already deduced that the majority of the movies in the dataset are English. Let us see what the other major languages represented are.","19903f92":"Pixar Animation Studio take the top spot with marvel studios and heyday films following. Here we come to a conclusion that highest earning production company would not necessarily be the most successful production company.","72fa91a0":"From the bar chart it is clear that January is the most popular month when it comes to movie releases followed by september and october.","aed688d0":"**Movies as i see****","387c1f24":"Inception and The Dark Knight, two critically acclaimed and commercially successful Christopher Nolan movies figure at the top of our chart.","472231ff":"Runtime Now let's try and see what we can find from runtime","6e44e066":"Minions is the most popular movie. Wonder Woman and Beauty and the Beast come in second and third respectively. we also come to a conclusion that popularity and revenue are not proportional.","92a47917":"The Harry Potter Franchise is the most successful movie franchise raking in more than 7.707 billion dollars from 8 movies. The Star Wars Movies occupies second spot with 7.403 billion dollars from 8 movies too. James Bond is third but the franchise has significantly more movies compared to the others in the list","df89915b":"We see that revenue column has many values as 0. Still we will keep this column as revenue will play one of the important feature during our analysis\n\nThe budget feature has some unclean values that makes Pandas assign it as a generic object. We proceed to convert this into a numeric variable and replace all the non-numeric values with NaN. Finally, as with budget, we will convert all the values of 0 with NaN to indicate the absence of information regarding budget","e609febb":"The James Bond Movies is the largest franchise ever with over 26 movies released under the banner. Friday the 13th and Pokemon come in at a distant second and third with 12 and 11 movies respectively. Here we can conclude that revenue is not influenced by number of movies as Harry potter franchise with only 8 movies managed to gather revenue more than james bond franchise which has 26 movies under his belt.","3306fcf4":"The Popularity score seems to be an extremely skewed quentity with a mean of only 2.9 but maximum values reaching greather than 500. The popularity score greater than 500 can be considered as an outlier as there is a huge amount of difference between mean and the highest score","fc180251":"We see that the months of April, May and June have the highest average gross among high grossing movies. This can be attributed to the fact that blockbuster movies are usually released in the summer vacation and therefore, the audience is more likely to have free time to watch movies.","6fdbd9b7":"Production Countries The Dataset consists majority of movies in the English language (more than 31000). However, it is common for a particular movie to be shot in various locations. Here we will try to find which countries attract filmmakers the most.","9be9eb75":"The average length of a movie is about 1 hour and 30 minutes. The longest movie on record in this dataset is 1256 minutes long","7e38764e":"From the above figure it is clear that revenue and vote_count are highly correlated which means may imply that more the revenue, more the people viewing the movie hence more vote_count. Even budget and revenue are correlated (i.e) more the budget of movie, more would be the revenue generated","3f167b66":"Next up, we will try to find the demand of genre starting from 2000. We will wrangle data to check whether there is a surge in particular genre or is the trend almost constant.","1419a569":"Drama is the most popular genre which occupies around 22.2% of the dataset. Next in the list is comedy follwed by thriller","4a3810c0":"There are a total of 32 different genres. Now let us check movie on which genre is made highly","baf0b986":"In which months do bockbuster movies tend to release? To answer this question, we will consider all movies that have made in excess of 100 million dollars and calculate the average gross for each month.","023c8149":"From the pie chart it is clear that the most successful movie is E.T the Extra-Terrestrial followed by Star Wars which is close to E.T. Jaws occupies third position with 11.7% share. This concludes that most critically aclaimed movies and most successful movies are independent.","0ba8e20e":"Longest Running Franchises Here we will try to find which franchise managed to deliver the largest number of movies under a single banner. However, this does not imply that successful movie franchises tend to have more movies. Some franchises, such as Harry Potter, have a predefined storyline and it wouldn't make sense to produce more movies despite its enormous success.","d3e83cac":"Most successful movie","a9a28fe8":"Warner Bros is the highest earning production company with earning a staggering 63.5 billion dollars from 491 movies. Universal Pictures comes second and Paramaount Pictures taking the third position with 55 billion dollars and 48 billion dollars in revenue respectively. Here we can say that more movies lead to more generation of revenue.","0079c14c":"Production companies","d71ba493":"Release month and year******","1aa452a1":"Exploratory Data Analysis******"}}