{"cell_type":{"01130fa7":"code","0b1cc811":"code","b1e1c391":"code","ea88158b":"code","742df82e":"code","7241ca43":"code","3748f2f1":"code","1ef9e0bd":"code","12e627e7":"code","8558fcf1":"code","8f3ec658":"code","8fa18f72":"code","4d09008a":"code","64da6160":"code","76e885b1":"code","c719c76e":"code","1d6f07f2":"code","0cf93605":"code","2f0c4ded":"markdown","d67492e1":"markdown","08b01a5f":"markdown","c59c8675":"markdown","a493eaee":"markdown","a04f272c":"markdown","b68b46f2":"markdown","43c0b17f":"markdown","9c658124":"markdown","28da60f8":"markdown","4f73df69":"markdown","80c239e0":"markdown","d6008db4":"markdown","f78824fa":"markdown","47395bae":"markdown","9ef0fe8f":"markdown","f368550b":"markdown","e6cc1766":"markdown","678d135e":"markdown","7206a70a":"markdown","5d3e6079":"markdown"},"source":{"01130fa7":"import pandas as pd\nimport numpy as np\n\nimport matplotlib.pyplot as plt\nimport matplotlib\nimport seaborn as sns\nimport warnings\nwarnings.simplefilter(action='ignore', category=FutureWarning)\nwarnings.simplefilter(action='ignore', category=UserWarning)\nsns.set(style=\"white\")\n\n\nimport plotly\nimport plotly.graph_objects as go\nimport plotly.express as px\nfrom plotly.subplots import make_subplots\nimport plotly.figure_factory as ff\n\nfrom plotly.offline import plot, iplot, init_notebook_mode\ninit_notebook_mode(connected=True)\n\ndf = pd.read_csv('..\/input\/data-science-and-stem-salaries\/Levels_Fyi_Salary_Data.csv')","0b1cc811":"df.head()","b1e1c391":"df.columns","ea88158b":"df.info()","742df82e":"df.isnull().sum()","7241ca43":"df[df['basesalary'] == 0]","3748f2f1":"df['basesalary'].replace(0, np.mean(df['basesalary']), inplace=True)","1ef9e0bd":"df['timestamp'] = pd.to_datetime(df['timestamp'])\n\nfig = go.Figure()\n\ndate_value_counts = df['timestamp'].value_counts()\n\nfig.add_trace(\n    go.Histogram(x=date_value_counts.index, y=date_value_counts.values,\n                          marker_color='cadetblue')\n\n)\n\nfig.update_layout(\n                        title=dict(text='STEM jobs in time',\n                        font=dict(family='Times New Roman', \n                                  size=24), \n                        x=.5)\n)\n\nfig","12e627e7":"df['gender'].unique()","8558fcf1":"df['gender'].replace('Title: Senior Software Engineer', np.nan, inplace=True)\ndf['gender'].replace(np.nan, 'Unknown', inplace=True)","8f3ec658":"df['basesalary'].sort_values(ascending=False)","8fa18f72":"df = df[df['basesalary'] < 1000000]","4d09008a":"fig = go.Figure()\n\ncolors = ['lime', 'grey', 'indygo', 'gold']\n\nfig = fig.add_trace(\n                        go.Pie(labels=df['gender'].\n                           value_counts().index, \n                           values=df['gender'].\n                           value_counts().values,\n                        hoverinfo='label+percent',\n                        textinfo='percent',\n                        textfont=dict(size=14, color='black'),\n                        marker=dict(colors=colors,\n                                    line=dict(width=2)),\n                        hole=0.7)\n                   )\n\nfig.update_layout(\n    font=dict(family='Lato', size=16, color='black'),\n    title=dict(text='<b>GENDER IN STEM JOBS<b>', \n               font=dict(size=24),x=0.5),\n    plot_bgcolor='white'\n)","64da6160":"fig = px.ecdf(df,x='basesalary', color='gender' )","76e885b1":"g = sns.FacetGrid(df, col='gender', aspect = .5, sharex=False, height=7, \n                  sharey=False, xlim = (0, 5e5))\ng = g.map(sns.kdeplot, 'basesalary', shade=True, lw=5)\ng.set_xticklabels(rotation=45)\ng.set_titles(col_template='{col_name}', size=13)","c719c76e":"df['count'] = 1\ngrouped_by_gender =(        \n    df.groupby(['company','gender'])\n    .count()\n    .sort_values(by='count', \n                 ascending=False)\n    .head(20)\n    .reset_index()\n)\n\ngrouped_by_gender[['company', 'gender', 'count']]","1d6f07f2":"def top_5_barchart(column_name, data_frame=df, orientation='h'):\n    \"\"\"arguments: column_name:str - name of the column\n       data_frame:pandas data frame - default df\n       orientation:str default: horizontal\n                                v - vertical                           \n        returns:  bar plot object\n    \"\"\"\n    \n    #  If column_name is not str:\n    if type(column_name) != str:\n        raise ValueError(f'Expected type str, got: {type(column_name)}')\n    \n    \n    #  If columm_name is not in data frame\n    if column_name not in data_frame.columns:\n        raise ValueError(f'{column_name} is not in DataFrame!')\n\n\n    top_5 = (\n            data_frame[column_name]\n            .value_counts()\n            .head()\n            )\n    \n    x_axis = top_5.index\n    y_axis = top_5.values\n    \n    # when orientation is not correct\n    if orientation not in ['h', 'v']:\n        raise ValueError(\"\"\"Choose correct orientation: \n                            h - horizontal,\n                            v - vertical\"\"\")\n    \n    # in case when orientaion is vertical\n    if orientation == 'v':\n        x_axis, y_axis = y_axis, x_axis\n    \n    \n    fig = px.bar(data_frame, x=x_axis, y=y_axis,\n                color_discrete_sequence=['maroon'])\n    \n    #  setting x axis title when orientation is vertical\n    if orientation == 'v':   \n        fig.update_layout(xaxis=dict(title='frequency'),\n                         yaxis=dict(title=f'{column_name}'))\n    \n    \n    # setting y axes at title when orientation is horizontal\n    else:\n        fig.update_layout(yaxis=dict(title='frequency'),\n                         xaxis=dict(title=f'{column_name}'))\n    \n    fig.update_layout(font=dict(family='Lato', size=16),\n                     title=dict(text=f'<b>{column_name.capitalize()}<b>', \n                                font=dict(size=24),x=0.5),\n                     plot_bgcolor='white')\n    fig.show()","0cf93605":"column_names = ['company', 'title', 'location']\n\nfor column in column_names:\n    top_5_barchart(column)","2f0c4ded":"![stem.jpg](attachment:8cc6da32-3163-4a7b-93e7-e60b98511983.jpg)","d67492e1":"It's 2 and half thousands jobs offers which have basesalary equal to 0, I'm going to replace 0 values with mean of all basesalaries.","08b01a5f":"## 1. Data preprocessing","c59c8675":"### 2.1 Gender","a493eaee":"Following conclusions can be drawn from the plots above:\n\n* Males have more than 50 % of all jobs in STEM\n* There's no visible difference between salaries among the genders in salary between 100k and 200k dollars but it looks like jobs with salary 750k and more are mostly occupied by men\n* There's more jobs that mens occupy for instance in Amazon or Microsoft.\n\nThe biggest problem is incomplete data (Unknown) which don't give us full point of view.","a04f272c":"At first glance:\n\n* timestamp should be in datatime format, \n* company, title, location, gender seems to be really important columns.\n* in first five rows there's two values where we can find basesalary equal 0\n\nLet's see null values balance:","b68b46f2":"I'm going to leave only basesalaries less than 1 milion","43c0b17f":"* basesalary","9c658124":"# STEM - EDA\n                                                                                                    \n                                                                                                    \n                                                          ","28da60f8":"There's a lot of null values (almost third part of whole data) in gender column - it's not good. I was quite interested in this one. Other features seems to be not so important.","4f73df69":"Let's see how amount of job offers was chaning in time:","80c239e0":"Well Nan value is usuall but I 've never heard about Senior software Engineer gender.","d6008db4":"**STEM**  - Science, technology, engineering, and mathematics is a broad term used to group together these academic disciplines. This term is typically used to address an education policy or curriculum choices in schools. It has implications for workforce development, national security concerns and immigration policy.\n\nThis dataset contains data about STEM jobs - salaries, location, their education, workers gender and timestamp column.","f78824fa":"### 2.2 Companies, titles, locations","47395bae":"### 1.2 Data inspection","9ef0fe8f":"## 2.Data visualizations","f368550b":"* The biggest amount of STEM jobs is in Amazon\n* The most common title is Software Engineer\n* The most common location is Seattle, Washington","e6cc1766":"Basic dataframe info:\n* number of rows: 62642\n* number of columns: 29","678d135e":"There's one outliner between Jun 9 - Jun 23 2019, anyway distribution seems to be left skewed. It means that job offers in STEAM grows over the years.","7206a70a":"### 1.1 Loading modules","5d3e6079":"## 3.Conclusions\n\nSTEM sector gets bigger and bigger, more specialists with higher education are useful in many interesting disciplines. From the data above conclusion is clear for me - gender don't have impact on average salary in STEM. But from the other side - there's more mans than womans working in this sector.\n\nUSA seems to be the best location for this kind of jobs."}}