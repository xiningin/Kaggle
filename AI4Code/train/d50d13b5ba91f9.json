{"cell_type":{"be33fe28":"code","2c76709e":"code","d626f104":"code","dc28aad2":"code","14c35e56":"code","08c76442":"code","db5acda5":"code","7f529ac2":"code","cafb9359":"code","1509b94c":"code","802a5661":"code","235357c9":"code","ebcdf5df":"code","f6f9c40e":"code","752d8df1":"code","473a65f6":"code","737f7722":"markdown","e4352a96":"markdown","8932cf69":"markdown"},"source":{"be33fe28":"!pip install newsapi-python\n!pip install -U textblob\n\n!python -m textblob.download_corpora\n!pip install --upgrade pip","2c76709e":"#Import the library\nfrom newsapi import NewsApiClient\nimport json\nimport csv\nimport pandas as pd\nimport numpy as np","d626f104":"#list1=[\"Harvechem\", \"Wockhardt\", \"Bellen Chemistry\", \"Chempure\",\"Nanjing Hoverchem\", \"3S International\", \"ABB Sciex PTE\", \"DHL\",\"Novartis\"]\nlist1=[\"DHL\",\"Novartis\"]\n\n#Delete content of the csv file\n#f = open('newsdata.csv', 'r+')\n#f.truncate(0)\n\n#open csv and write header\nopen(\"newsdata.csv\", \"w\").close()\nf = open(\"newsdata.csv\", \"w\")\nwriter = csv.DictWriter(\n    f, fieldnames=['Group','PublishedAt','Author','URL','Title','Description','Content'])\nwriter.writeheader()\nf.close()","dc28aad2":"\n# Initiating the news api client with key\n#newsapi = NewsApiClient(api_key='d3e1bf27692f43e290c0d1a6b192fd4e')\nnewsapi = NewsApiClient(api_key='6c0c2ea412374febbe8f03e6926bf06f')\n\nfor i in list1:\n    #Using the client library to get articles related to search\n    all_articles = newsapi.get_everything(q=i,\n                                      language='en',\n                                      from_param='2020-01-26',\n                                      to='2020-02-05',\n                                      sort_by ='relevancy')\n    df = pd.DataFrame.from_dict(all_articles)\n    df=df.assign(Group=i)\n    df1= df.articles.apply(pd.Series)\n    #Obtain data of id and name from source \n    df2= df1.source.apply(pd.Series)\n    df3= pd.concat([df,df1,df2],axis=1).drop(['urlToImage','name','id','articles','source','status','totalResults'],1)\n    df3=df3[['Group','publishedAt','author','url','title','description','content']]\n    df3.to_csv('newsdata.csv',mode='a',header=False,index=False)\n    #print(df3.head())\n\n","14c35e56":"newsdata= pd.read_csv(\"newsdata.csv\")\nnewsdata.head()","08c76442":"newsdata[\"combined\"]= (newsdata[\"Title\"]+newsdata[\"Description\"]+newsdata[\"Content\"])\nnewsdata.head()","db5acda5":"pd.isnull(newsdata).sum()","7f529ac2":"newsdata = newsdata.dropna(axis=0, subset=['combined'])\npd.isnull(newsdata).sum()","cafb9359":"newsdata['combined'].astype('str')","1509b94c":"newsdata.dtypes","802a5661":"import nltk\n#nltk.download()","235357c9":"#Data Preprocessing and Feature Engineering\nfrom textblob import TextBlob\nimport re\nfrom nltk.corpus import stopwords\nfrom nltk.stem.wordnet import WordNetLemmatizer\nfrom sklearn.feature_extraction.text import CountVectorizer, TfidfTransformer\nimport string\n","ebcdf5df":"punctuation=string.punctuation\nstopwords=stopwords.words('english')\ndef _clean(text):\n    text=text.lower()\n    text= \"\".join(x for x in text if x not  in punctuation)\n    \n    words=text.split()\n    words=[w for w in words if w not in stopwords]\n    text=\" \".join(words)\n    \n    return text\n","f6f9c40e":"newsdata['cleaned']=newsdata['combined'].apply(_clean)\nnewsdata['cleaned']","752d8df1":"def detect_polarity(text):\n    return TextBlob(text).sentiment.polarity\nnewsdata['polarity'] = newsdata.cleaned.apply(detect_polarity)\nnewsdata.head()\n","473a65f6":"#newsdata_final=newsdata[['Group','PublishedAt','Author','URL','Title','Description','Content', 'polarity']]\n#newsdata_final.to_csv('newsdata_final.csv',mode='a',header=False,index=False)","737f7722":"# Scaping from News api\nLooping the element of the list to automate the extraction process","e4352a96":"Installing all required libraries","8932cf69":"Reading extracted data from csv"}}