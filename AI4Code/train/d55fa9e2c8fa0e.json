{"cell_type":{"b4b994bb":"code","54069b1b":"code","ec906eca":"code","172c36c1":"code","05d85e63":"code","cf9dee03":"code","c70f4024":"code","1a9c00f3":"code","45d085af":"code","ca195110":"code","54621e50":"code","34e9ff26":"code","2a90e8fc":"code","6b0de13b":"code","e1e03134":"code","ddae71cd":"code","fa1eeb12":"code","3914a869":"code","7fb29d45":"code","89315e83":"code","c636049a":"code","6e455fd4":"code","0dea31b3":"code","370fa84d":"code","99a2bd69":"code","a80cb399":"code","75080da9":"code","1e7726ab":"code","011d41f6":"code","9eace16f":"code","ba2330cb":"code","a1ab8586":"code","7fd2f546":"code","5251f308":"code","4257c871":"code","13c84b93":"code","f3720720":"code","f1531c26":"code","2b5c0394":"code","de01ef5e":"code","9abb0ca1":"code","1d6f48c7":"code","cb91b08c":"code","14950266":"code","34546c59":"code","15821f94":"code","fb10776f":"code","b27baab5":"code","c11d618c":"code","26754dfe":"code","a6747668":"code","7b099414":"code","de77954a":"code","1e858551":"code","ef633941":"code","eead6e85":"code","492ce2ea":"code","ce763d01":"code","74c17878":"code","505ac225":"code","268493a2":"code","d18f79c8":"code","79cb29fb":"code","d8c5cedb":"code","69d06b74":"markdown","8eb5e9a8":"markdown","9a1804f3":"markdown","c9c07dff":"markdown","15595f9c":"markdown","5993a758":"markdown","8936c630":"markdown","3ebcf41c":"markdown","e2e3fa5a":"markdown","74ede2f5":"markdown","b405862e":"markdown","3f8180e4":"markdown","d2d8a8a3":"markdown","d9f843d3":"markdown","ea74bd14":"markdown","02789732":"markdown","19c2a5f5":"markdown","ab3991d9":"markdown","fc36b116":"markdown","36d8aa9d":"markdown","a9237d5e":"markdown","1897227b":"markdown","76fcf555":"markdown","bd774466":"markdown","34b1f211":"markdown","57bd1e68":"markdown","6807956e":"markdown","02fdf621":"markdown","45f7643f":"markdown","76db70b9":"markdown","5f8fa0f2":"markdown","13410fab":"markdown","84cf92c5":"markdown"},"source":{"b4b994bb":"import numpy as np\nimport pandas as pd\nimport matplotlib.pyplot as plt\nimport seaborn as sns\n\n%matplotlib inline\n\nimport warnings\nwarnings.filterwarnings(\"ignore\")","54069b1b":"df=pd.read_csv('..\/input\/employee-future-prediction\/Employee.csv')","ec906eca":"df.head()","172c36c1":"df.isnull().sum()","05d85e63":"df.info()","cf9dee03":"df.duplicated().sum()","c70f4024":"df.drop_duplicates(keep='first',inplace=True)","1a9c00f3":"df.describe()","45d085af":"sns.set_style(style='darkgrid', rc={\"grid.color\": \".8\", \"grid.linestyle\": \"--\"})\n#to see the composition of LeaveOrNot\nout_df=pd.DataFrame(df.groupby('LeaveOrNot')['LeaveOrNot'].count())\ncolors = ['#61ad66','#3b528b']\nplt.pie(out_df['LeaveOrNot'],labels=['NO','YES'],autopct='%.0f%%',colors=colors,radius=2,explode = (0, 0.1),shadow=True)\nplt.show()","ca195110":"d1=pd.DataFrame(df.groupby(['Education','LeaveOrNot'])['Education'].count())\nd1","54621e50":"#to see the composition of education\nout_df=pd.DataFrame(df.groupby('Education')['Education'].count())\ncolors = ['#3b528b','#61ad66','#d2e038']\nplt.pie(out_df['Education'],labels=['Bachelors','Masters','PHD'],autopct='%.0f%%',colors=colors,radius=2,explode = (0.01,0.1, 0.1),shadow=True)\nplt.legend(['Bachelors (77%)','Masters (19%)','PHD (4%)'], loc=\"best\")\nplt.show()","34e9ff26":"sns.countplot(df['Education'],hue=df['LeaveOrNot'],palette='viridis',saturation=0.9,edgecolor=\"black\")\nplt.tight_layout()\nplt.grid(True)\nplt.show()","2a90e8fc":"prop_df=[]\nfor val in np.sort(df['Education'].unique()):\n    prop=d1['Education'][val][1]\/(d1['Education'][val][1]+d1['Education'][val][0])\n    prop_df.append({\n        'Education':val,\n        'proportion':prop\n    })\n\nprop_df=pd.DataFrame(prop_df)\nprop_df.sort_values('proportion',ascending=False,inplace=True)\nprop_df","6b0de13b":"plt.figure(figsize=(10,5))\nsns.barplot(x=prop_df['Education'],y=prop_df['proportion'],palette='viridis',edgecolor=\"black\",order=prop_df['Education'])\nplt.title(\"Proportion of employee who leaves the company in next 2 years\")\nplt.xlabel('Education')\nplt.tight_layout()\nplt.grid(True)\nplt.show()","e1e03134":"d1=pd.DataFrame(df.groupby(['JoiningYear','LeaveOrNot'])['JoiningYear'].count())\nd1","ddae71cd":"sns.countplot(df['JoiningYear'],hue=df['LeaveOrNot'],palette='viridis',saturation=0.9,edgecolor=\"black\")\nplt.tight_layout()\nplt.grid(True)\nplt.show()","fa1eeb12":"prop_df=[]\nfor val in np.sort(df['JoiningYear'].unique()):\n    prop=d1['JoiningYear'][val][1]\/(d1['JoiningYear'][val][1]+d1['JoiningYear'][val][0])\n    prop_df.append({\n        'JoiningYear':val,\n        'proportion':prop\n    })\n\nprop_df=pd.DataFrame(prop_df)\nprop_df.sort_values('proportion',ascending=False,inplace=True)\nprop_df","3914a869":"plt.figure(figsize=(10,5))\nsns.barplot(x=prop_df['JoiningYear'],y=prop_df['proportion'],palette='viridis',edgecolor=\"black\",order=prop_df['JoiningYear'])\nplt.title(\"Proportion of employee who leaves the company in next 2 years\")\nplt.xlabel('JoiningYear')\nplt.tight_layout()\nplt.grid(True)\nplt.show()","7fb29d45":"d1=pd.DataFrame(df.groupby(['City','LeaveOrNot'])['City'].count())\nd1","89315e83":"#to see the composition of city\nout_df=pd.DataFrame(df.groupby('City')['City'].count())\ncolors = ['#3b528b','#61ad66','#d2e038']\nplt.pie(out_df['City'],labels=['Banglore','New Delhi','Pune'],autopct='%.0f%%',colors=colors,radius=2,explode = (0,0, 0.1),shadow=True)\nplt.show()","c636049a":"sns.countplot(df['City'],hue=df['LeaveOrNot'],palette='viridis',saturation=0.9,edgecolor=\"black\")\nplt.tight_layout()\nplt.grid(True)\nplt.show()","6e455fd4":"prop_df=[]\nfor val in np.sort(df['City'].unique()):\n    prop=d1['City'][val][1]\/(d1['City'][val][1]+d1['City'][val][0])\n    prop_df.append({\n        'City':val,\n        'proportion':prop\n    })\n\nprop_df=pd.DataFrame(prop_df)\nprop_df.sort_values('proportion',ascending=False,inplace=True)\nprop_df","0dea31b3":"plt.figure(figsize=(10,5))\nsns.barplot(x=prop_df['City'],y=prop_df['proportion'],palette='viridis',edgecolor=\"black\",order=prop_df['City'])\nplt.title(\"Proportion of employee who leaves the company in next 2 years\")\nplt.xlabel('City')\nplt.tight_layout()\nplt.grid(True)\nplt.show()","370fa84d":"d1=pd.DataFrame(df.groupby(['PaymentTier','LeaveOrNot'])['PaymentTier'].count())\nd1","99a2bd69":"#to see the composition of PaymentTier\nout_df=pd.DataFrame(df.groupby('PaymentTier')['PaymentTier'].count())\ncolors = ['#3b528b','#d2e038','#61ad66']\nplt.pie(out_df['PaymentTier'],labels=['1','2','3'],autopct='%.0f%%',colors=colors,radius=2,explode = (0,0, 0.1),shadow=True)\nplt.show()","a80cb399":"sns.countplot(df['PaymentTier'],hue=df['LeaveOrNot'],palette='viridis',saturation=0.9,edgecolor=\"black\")\nplt.tight_layout()\nplt.grid(True)\nplt.show()","75080da9":"prop_df=[]\nfor val in np.sort(df['PaymentTier'].unique()):\n    prop=d1['PaymentTier'][val][1]\/(d1['PaymentTier'][val][1]+d1['PaymentTier'][val][0])\n    prop_df.append({\n        'PaymentTier':val,\n        'proportion':prop\n    })\n\nprop_df=pd.DataFrame(prop_df)\nprop_df.sort_values('proportion',ascending=False,inplace=True)\nprop_df","1e7726ab":"plt.figure(figsize=(10,5))\nsns.barplot(x=prop_df['PaymentTier'],y=prop_df['proportion'],palette='viridis',edgecolor=\"black\",order=prop_df['PaymentTier'])\nplt.title(\"Proportion of employee who leaves the company in next 2 years\")\nplt.xlabel('PaymentTier')\nplt.tight_layout()\nplt.grid(True)\nplt.show()","011d41f6":"plt.figure(figsize=(10,8))\nsns.distplot(df['Age'],color='green',bins=15)\nplt.tight_layout()\nplt.grid(True)\nplt.show()","9eace16f":"sns.catplot(x='LeaveOrNot',y='Age',kind='box',data=df,palette='viridis',saturation=0.9)\nplt.tight_layout()\nplt.grid(True)\nplt.show()","ba2330cb":"d1=pd.DataFrame(df.groupby(['Gender','LeaveOrNot'])['Gender'].count())\nd1","a1ab8586":"#to see the composition of Gender\nout_df=pd.DataFrame(df.groupby('Gender')['Gender'].count())\ncolors = ['#61ad66','#3b528b']\nplt.pie(out_df['Gender'],labels=['Female','Male'],autopct='%.0f%%',colors=colors,radius=2,explode = (0, 0.1),shadow=True)\nplt.show()","7fd2f546":"sns.countplot(df['Gender'],hue=df['LeaveOrNot'],palette='viridis',saturation=0.9,edgecolor=\"black\")\nplt.tight_layout()\nplt.grid(True)\nplt.show()","5251f308":"prop_df=[]\nfor val in np.sort(df['Gender'].unique()):\n    prop=d1['Gender'][val][1]\/(d1['Gender'][val][1]+d1['Gender'][val][0])\n    prop_df.append({\n        'Gender':val,\n        'proportion':prop\n    })\n\nprop_df=pd.DataFrame(prop_df)\nprop_df.sort_values('proportion',ascending=False,inplace=True)\nprop_df","4257c871":"plt.figure(figsize=(10,5))\nsns.barplot(x=prop_df['Gender'],y=prop_df['proportion'],palette='viridis',edgecolor=\"black\",order=prop_df['Gender'])\nplt.title(\"Proportion of employee who leaves the company in next 2 years\")\nplt.xlabel('Gender')\nplt.tight_layout()\nplt.grid(True)\nplt.show()","13c84b93":"d1=pd.DataFrame(df.groupby(['EverBenched','LeaveOrNot'])['EverBenched'].count())\nd1","f3720720":"#to see the composition of EverBenched\nout_df=pd.DataFrame(df.groupby('EverBenched')['EverBenched'].count())\ncolors = ['#61ad66','#3b528b']\nplt.pie(out_df['EverBenched'],labels=['No','Yes'],autopct='%.0f%%',colors=colors,radius=2,explode = (0, 0.1),shadow=True)\nplt.show()","f1531c26":"sns.countplot(df['EverBenched'],hue=df['LeaveOrNot'],palette='viridis',saturation=0.9,edgecolor=\"black\")\nplt.tight_layout()\nplt.grid(True)\nplt.show()","2b5c0394":"prop_df=[]\nfor val in np.sort(df['EverBenched'].unique()):\n    prop=d1['EverBenched'][val][1]\/(d1['EverBenched'][val][1]+d1['EverBenched'][val][0])\n    prop_df.append({\n        'EverBenched':val,\n        'proportion':prop\n    })\n\nprop_df=pd.DataFrame(prop_df)\nprop_df.sort_values('proportion',ascending=False,inplace=True)\nprop_df","de01ef5e":"plt.figure(figsize=(10,5))\nsns.barplot(x=prop_df['EverBenched'],y=prop_df['proportion'],palette='viridis',edgecolor=\"black\",order=prop_df['EverBenched'])\nplt.title(\"Proportion of employee who leaves the company in next 2 years\")\nplt.xlabel('EverBenched')\nplt.tight_layout()\nplt.grid(True)\nplt.show()","9abb0ca1":"d1=pd.DataFrame(df.groupby(['ExperienceInCurrentDomain','LeaveOrNot'])['ExperienceInCurrentDomain'].count())\nd1","1d6f48c7":"sns.countplot(df['ExperienceInCurrentDomain'],hue=df['LeaveOrNot'],palette='viridis',saturation=0.9,edgecolor=\"black\")\nplt.tight_layout()\nplt.grid(True)\nplt.show()","cb91b08c":"prop_df=[]\nfor val in np.sort(df['ExperienceInCurrentDomain'].unique()):\n    prop=d1['ExperienceInCurrentDomain'][val][1]\/(d1['ExperienceInCurrentDomain'][val][1]+d1['ExperienceInCurrentDomain'][val][0])\n    prop_df.append({\n        'ExperienceInCurrentDomain':val,\n        'proportion':prop\n    })\n\nprop_df=pd.DataFrame(prop_df)\nprop_df.sort_values('proportion',ascending=False,inplace=True)\nprop_df","14950266":"plt.figure(figsize=(10,5))\nsns.barplot(x=prop_df['ExperienceInCurrentDomain'],y=prop_df['proportion'],palette='viridis',edgecolor=\"black\",order=prop_df['ExperienceInCurrentDomain'])\nplt.title(\"Proportion of employee who leaves the company in next 2 years\")\nplt.xlabel('ExperienceInCurrentDomain')\nplt.tight_layout()\nplt.grid(True)\nplt.show()","34546c59":"df.head()","15821f94":"from sklearn.preprocessing import LabelEncoder\nle=LabelEncoder()","fb10776f":"cat_feature=['Education', 'JoiningYear', 'City', 'PaymentTier', 'Gender',\n       'EverBenched', 'ExperienceInCurrentDomain']","b27baab5":"for col in cat_feature:\n    df[col]=le.fit_transform(df[col])","c11d618c":"df.head()","26754dfe":"from sklearn.model_selection import train_test_split","a6747668":"X=df.drop(['LeaveOrNot','ExperienceInCurrentDomain'],axis=1)\ny=df.LeaveOrNot\n\nX_train, X_test, y_train, y_test = train_test_split(X, y, test_size=0.2,random_state=12)","7b099414":"scores=[]\n\nfrom sklearn.metrics import f1_score","de77954a":"from sklearn.tree import DecisionTreeClassifier\n\nmodel= DecisionTreeClassifier(random_state=42,criterion='entropy',splitter='random')\nmodel.fit(X_train,y_train)","1e858551":"pred=model.predict(X_test)\n\nscores.append({\n        'model': 'DecisionTreeClassifier',\n        'score': model.score(X_test,y_test),\n        'f1_score' : f1_score(y_test,pred)\n    })\n\n\nmodel.score(X_test, y_test)\n","ef633941":"from sklearn.ensemble import RandomForestClassifier\nmodel = RandomForestClassifier(n_estimators=35, random_state=42,criterion='entropy')\nmodel.fit(X_train, y_train)","eead6e85":"y_predict = model.predict(X_test)\n\nscores.append({\n        'model': 'RandomForestClassifier',\n        'score': model.score(X_test,y_test),\n    'f1_score' : f1_score(y_test,pred)\n    })\n\n\nmodel.score(X_test, y_test)","492ce2ea":"from xgboost import XGBRFClassifier\n\nmodel = XGBRFClassifier(eval_metric='mlogloss',\n                        random_state=42,\n                       learning_rate=0.01,\n                       max_depth=10, \n                       scale_pos_weight=1.5)\nmodel.fit(X_train, y_train)","ce763d01":"pred=model.predict(X_test)\n\nscores.append({\n        'model': 'XGBRFClassifier',\n        'score': model.score(X_test,y_test),\n    'f1_score' : f1_score(y_test,pred)\n    })\n\n\nmodel.score(X_test, y_test)","74c17878":"from sklearn.neighbors import KNeighborsClassifier\n\nmodel = KNeighborsClassifier(n_neighbors=7)\nmodel.fit(X_train, y_train)","505ac225":"pred=model.predict(X_test)\n\nscores.append({\n        'model': 'KNeighborsClassifier',\n        'score': model.score(X_test,y_test),\n    'f1_score' : f1_score(y_test,pred)\n    })\n\n\nmodel.score(X_test, y_test)","268493a2":"from sklearn.ensemble import AdaBoostClassifier\n\nmodel = AdaBoostClassifier()\nmodel.fit(X_train, y_train)","d18f79c8":"pred=model.predict(X_test)\n\nscores.append({\n        'model': 'AdaBoostClassifier',\n        'score': model.score(X_test,y_test),\n    'f1_score' : f1_score(y_test,pred)\n    })\n\n\nmodel.score(X_test, y_test)","79cb29fb":"Score = pd.DataFrame(scores,columns=['model','score','f1_score'])\nScore.sort_values('score',ascending=False,inplace=True)\nScore","d8c5cedb":"plt.figure(figsize=(10,4))\nsns.barplot(y=Score['model'],x=Score['score'],palette='viridis',edgecolor=\"black\")\nplt.tight_layout()\nplt.grid(True)\nplt.show()","69d06b74":"Here you can see that , employee with less experience left the company in 2 years.","8eb5e9a8":"45% of employee who were benched left the company.","9a1804f3":"No pattern in Age","c9c07dff":"No null values","15595f9c":"## Age","5993a758":"## JoiningYear","8936c630":"# Thank you!!\n\nPlease upvote if you liked my work\ud83d\ude4c!!","3ebcf41c":"## AdaBoostClassifier","e2e3fa5a":"* Here we can see that employees with masters degree are more likely to leave the organisation. And employees with PHD degree are more likely to leave.","74ede2f5":"# Model Fitting","b405862e":"## ExperienceInCurrentDomain","3f8180e4":"## RandomForestClassifier","d2d8a8a3":"## So, which employee is most likely to leave the company :\n\n* In terms of education employees with Masters degree are most likely to leave the company.\n* Employees who joined in recent year are most likely to leave the company. Maybe they are not satisfied with thier salary or their department work culture.\n* Employee from Pune are most likely to leave.\n* In terms of Salary , employee with PaymentTier 2 are most likely to leave.\n* Female employee are more likely to leave.\n* Most of the employee who were benched left the company.\n* As we analysed in joining year the employees with less experience are the one's who are leaving the company.","d9f843d3":"# EDA","ea74bd14":"Imbalanced dataset","02789732":"# Data preprocessing","19c2a5f5":"## EverBenched","ab3991d9":" **XGBRFClassifier model is the best fit for the data**\n \nAnd we can use this XGBRFClassifier model to predict whether the employee will leave the company or not","fc36b116":"## KNeighborsClassifier","36d8aa9d":"## Gender","a9237d5e":"Hello!!!. We will try to find out insights from the data and figure out which factors are resposnsible for an employee to leave the company. \n\nAnd after analysis we will fit a few classification models to predict whether an employee will leave the company or not.","1897227b":"We can see that around 50% of females left the company in next two years","76fcf555":"# EDA Conclusion","bd774466":"## PaymentTier","34b1f211":"## Education","57bd1e68":"![](https:\/\/www.locktoninternational.com\/gb\/sites\/gb\/files\/2018-06\/final_website_banner_1.png)","6807956e":"## City","02fdf621":"## DecisionTreeClassifier","45f7643f":"Employee from Pune are most likely to leave the company in next 2 years and from New Delhi the proportion is least.","76db70b9":"From the graph and dataframe we can see that proportion of employee who joined in 2018 leaves the company in next 2 years is most and in 2012 it is least.","5f8fa0f2":"Employee from PaymentTier 2 are most likely to leave the company in next 2 years and from PaymentTier 3 the proportion is least.","13410fab":"## XGBRFClassifier","84cf92c5":"# Conclusion"}}