{"cell_type":{"accc09e5":"code","6868e285":"code","6e0b5bab":"code","3b60d195":"code","d34a55d0":"code","a5dc5275":"code","17cdc8b1":"code","352ffa6c":"code","a328bc8a":"code","ca87ed5d":"code","45b878d5":"code","68b3453c":"code","71535044":"code","728aa0bd":"code","d63fbae4":"code","8c884d25":"code","a63ae264":"code","bc7b8300":"code","3160a5ca":"code","394b2cc1":"code","3f496c26":"code","afbfaf53":"code","732126ee":"code","8356f820":"code","f943f527":"markdown","95b3e80d":"markdown","b894b703":"markdown","ab2cd192":"markdown","24f2578f":"markdown","471d9b75":"markdown","5bd062d8":"markdown","6d3e419a":"markdown","4cfee493":"markdown","67822e93":"markdown","3809d291":"markdown","c9184895":"markdown","1b4dca64":"markdown","63a698ae":"markdown","42dd2dd3":"markdown","a31ef07d":"markdown","0653bdd3":"markdown","9ad99f09":"markdown","c573c452":"markdown","fb2719e7":"markdown","6cdf6134":"markdown","8da9be09":"markdown","95c159d9":"markdown","9cb13ab1":"markdown","adc57d2f":"markdown","3cd54776":"markdown","bb30bb05":"markdown","763006e4":"markdown","68595105":"markdown","caf2f57b":"markdown","748c6e1a":"markdown","1c391944":"markdown","bf7eab0b":"markdown","f18b54f2":"markdown","dff96fb7":"markdown","4241ba45":"markdown","681ad4b0":"markdown"},"source":{"accc09e5":"# Import neccessay libraries\n\nimport pandas as pd\nimport numpy as np\nimport matplotlib.pyplot as plt\nimport seaborn as sns\nsns.set_style('darkgrid')\n%matplotlib inline\n\nimport warnings\nwarnings.filterwarnings('ignore')\n\npd.set_option('max_columns', 100)\npd.set_option('max_rows', 50)\n","6868e285":"# Read train and test csv files to dataframes\ntrain = pd.read_csv('..\/input\/widsdatathon2021\/TrainingWiDS2021.csv')\ntest = pd.read_csv('..\/input\/widsdatathon2021\/UnlabeledWiDS2021.csv')\ntrain.shape, test.shape","6e0b5bab":"# Lets have a quick look at train\ntrain.head()","3b60d195":"train.info()","d34a55d0":"# Start with descriptive statistics on the data\ntrain.describe().T","a5dc5275":"print(train.shape)\nprint(train.encounter_id.nunique())\nprint(train.hospital_id.nunique())","17cdc8b1":"sns.catplot(x ='diabetes_mellitus', kind ='count',data = train)","352ffa6c":"# Imbalance Ratio\ntrain.diabetes_mellitus.value_counts(normalize=True)","a328bc8a":"# Function to plot distribution of variable and boxplot\n\ndef plot_dist_box(df, colname):\n    fig,axes = plt.subplots(nrows=2,ncols=2, figsize = (12,8))\n    \n    #Plot distributions\n    plot00 = sns.distplot(df[colname],ax=axes[0][0])\n    axes[0][0].set_title('Distribution of {name}'.format(name=colname))\n  \n    plot01=sns.distplot(df[df['diabetes_mellitus']==False][colname],ax=axes[0][1],label='Non Diabetes')\n    sns.distplot(df[df.diabetes_mellitus==True][colname],ax=axes[0][1],color='red',label='Diabetes')\n    axes[0][1].set_title('Distribution of {name}'.format(name=colname)) \n    plot01.axes.legend()\n    \n    # Boxplots\n    plot10=sns.boxplot(df[colname],ax=axes[1][0])\n    plot11=sns.boxplot(x='diabetes_mellitus',y=colname,data=df,ax=axes[1][1])\n    plt.xticks(ticks=[0,1],labels=['Non-Diabetes','Diabetes'])\n    axes[1][1].set_xlabel('Category')  \n    plt.show()","ca87ed5d":"plot_dist_box(train, 'bmi')","45b878d5":"plot_dist_box(train, 'age')","68b3453c":"# Lets verify this for age variable\nprint(train.age.mean())\nprint(train.age.median())\nprint(train.age.mode()[0])","71535044":"#lets check skewness value rather than just estimating from figure\nprint(\"Skewness= \", train['age'].skew())","728aa0bd":"# check kurtosis value\nprint(\"Kurtosis= \", train['age'].kurt())","d63fbae4":"sns.catplot(y='bilirubin_apache', x= 'diabetes_mellitus', data=train)","8c884d25":"plot_dist_box(train, 'bilirubin_apache')","a63ae264":"train.groupby(['hepatic_failure','diabetes_mellitus']).size()","bc7b8300":"train.groupby(['aids','diabetes_mellitus']).size()","3160a5ca":"train.groupby(['lymphoma','diabetes_mellitus']).size()","394b2cc1":"sns.catplot(y='h1_spo2_max', x= 'diabetes_mellitus', data=train)","3f496c26":"plot_dist_box(train, 'h1_spo2_max')","afbfaf53":"# Pairplot\n# Since we have very large number of features, lets take few features only to understand the workflow\nplt.figure(figsize= (6,5))\nsns.pairplot(train[['height','bmi','apache_2_diagnosis','apache_3j_diagnosis','diabetes_mellitus']],hue = 'diabetes_mellitus')\nplt.show()","732126ee":"# Sampling 2000 data points from train\nsampletrain= train.sample(2000)","8356f820":"# plotting on sample of dataset coz data is huge \n\nplt.figure(figsize= (5,4))\nsns.pairplot(sampletrain[['height','bmi','apache_2_diagnosis','apache_3j_diagnosis','diabetes_mellitus']],hue = 'diabetes_mellitus')\nplt.show()","f943f527":"*Note :- Target variable: diabetes_mellitus is imbalanced with 78.3 % reported as no diabetes and 21.6 % have diabetes.*\n\n*Since its a imabalanced dataset, a good cross validation strategy needed.*","95b3e80d":"**Variable: Age**","b894b703":"*Note :- Bilirubin_apache Distribution is not symmetric. It is right skewed distribution. There are many outliers present on lower higher end.*\n\n*We also need to search for normal range of these medical metrics and then create different group like normal range, higher than normal and lower than normal. For bilirubin_apache Normal range is 5.13-20.52 micromol\/L, anything above than will be considered as the case of hyperbilirubinemia.*","ab2cd192":"**Variable: bmi**","24f2578f":"*Scatter plot above are very hard to read because of very large number of datapoints.*\n\n*Lets see how we can sample from the original data and then use sampled data to plot.*","471d9b75":"<a id=\"sub2\"><\/a>\n**CATEGORY: TARGET VARIABLE**","5bd062d8":"*The better you know your data, the better you can model.*","6d3e419a":"<a id=\"sub6\"><\/a>\n**CATEGORY: VITALS**","4cfee493":"*Note :- Encounter_id is unique for each row as its also stated in data dictionary that its id of patient for unit stay. We won't include this column for training our model because it have no significance for model. Although it could be useful while grouping multiple columns by id.*\n\n*hospital_id suggests there are 204 unique hospitals. This could be useful in grouping cases per hospital. New feature possibility here.*","67822e93":"**Variable: albumin_apache**","3809d291":"*About Distributions*\n\n<a id=\"skewness\"><\/a>\n### Distributions and Skewness\n*Credit: Google Image*\n![image.png](attachment:image.png)\n\n* Normal distribution\n* Positive skewness (Right skewed) : Mean and median will be greater than mode.\n* Negative skewness (Left skewed) : Mean and median will be less than mode.","c9184895":"*Note :- Distribution is almost symmetric with most data between 24-32. There are some outliers present on higher end.*","1b4dca64":"<a id=\"id3\"><\/a>\n### Univariate Insights","63a698ae":"*Kindly refer to this article for more info on*\n[Skewness and kurtosis article](https:\/\/codeburst.io\/2-important-statistics-terms-you-need-to-know-in-data-science-skewness-and-kurtosis-388fef94eeaa)","42dd2dd3":"**Variable: hepatic_failure, aids, lymphoma**","a31ef07d":"<a id=\"kurtosis\"><\/a>\n### Kurtosis\n\n*Lets see another term, Kurtosis*\n\n*Kurtosis is measure of outliers in a data*\n\n*Credit: Google image*\n![image.png](attachment:image.png)","0653bdd3":"*From above pairplot, The distribution are bi-modal and multimodal in some cases. Data points are not separable linearly, linear model not gonna perform well in this case, tree model can identify those non-linear boundaries. There is no strong correlation between features.*","9ad99f09":"*Since skewness value is between -1 and -0.5, the data (age) is moderately skewed.*","c573c452":"\n\n*Since kurtosis value <3, Distribution is shorter, tails are thinner than the normal distribution. The peak is lower and broader than normal distribution.*","fb2719e7":"<a id=\"sub5\"><\/a>\n**CATEGORY: APACHE COMORBIDITY**","6cdf6134":"## WiDS Datathon 2021\n\n\n**Objective of this Notebook:** \n* To understand the data, distribution and categories (diagram representation).\n* To perform Univariate Statistical Analysis on the data as part of EDA(Exploratory data analysis) process. I will take few variables from some category and perform analysis to demonstrate the analysis workflow.\n* To perform Multivariate Statistical Analysis.","8da9be09":"<a id=\"sub3\"><\/a>\n**CATEGORY: DEMOGRAPHICS**","95c159d9":"### Observations\n\n* To start with target variable (diabetes_mellitus), its a binary type. Different datatypes are there but most are of numeric type. \n* Analysis shows that few variables like age have min value of 0,  which could be either missing value or outlier. Similary max value of other variables like bmi is too high. We need to carefully analyse these variable using dependent factors like height and weight for bmi. \n* Pre_icu_los_days have min value as negative. \n* Variance among many variables are very high, so scaling could be useful in this scenario. \n* Looking at the various medics related variables, it would be useful if we bin values in different groups. For example: heart_rate can be binned as normal (60-100 beats per minute), lower than normal and higher than normal.","9cb13ab1":"**Pairplot with hue**\n\n*Pairplot is an effective way to get relations b\/w features. But instead of using simple pairplot lets put a third factor 'target variable' as hue.*","adc57d2f":"*Note :- The datatypes are float, int (numeric types) and 6 features are being identified as object.*","3cd54776":"### Table of Contents\n1. [Know your data](#id1)\n2. [Descriptive Statistics](#id2)\n3. [Univariate Insights](#id3)\n    - [CATEGORY: IDENTIFIERS](#sub1)\n    - [CATEGORY: TARGET VARIABLE](#sub2)\n    - [CATEGORY: DEMOGRAPHICS](#sub3)\n    \n    -- [Distribution and Skewness](#skewness)\n    \n    -- [Kurtosis](#kurtosis)\n    \n    - [CATEGORY: APACHE COVARIATE](#sub4)\n    - [CATEGORY: APACHE COMORBIDITY](#sub5)\n    - [CATEGORY: VITALS](#sub6)\n4. [Multivariate Insights](#id4)","bb30bb05":"*As evident from mean, median and mode of age variable, its negative skewed.*","763006e4":"\n**Comment for suggestions or feedback to improve it further**\n\n**Thank you for making it till the end, Please upvote the notebook, if it was useful :)**","68595105":"**Variable: h1_spo2_max**","caf2f57b":"*Note :- Three categories (Vitals, labs and labs blood gas) have 52, 60 and 16 features respectively. But they actually have features reported as min and max. For example: h1_wbc has been measured and reported as h1_wbc_min and h1_wbc_max.*","748c6e1a":"<a id=\"id4\"><\/a>\n### Multivariate Insights\n\n*Unlike univariate where we take one variable at a time and analyze it, In multivariate we take multiple variables (features) at the same time and analyze patterns. Multivariate can help us analyze more complex patterns in the data and thus its closer to real world scenarios.*","1c391944":"<a id=\"id1\"><\/a>\n### Know your data\nThe data given has 181 columns, that can be categorised in 8 distinct categories. Following is a diagram representation of data with its categories.\nThe diagram is produced as per info given in data dictionary that is very useful. \n![widsdata.png](attachment:widsdata.png)","bf7eab0b":"#### After getting some feel about what kind of data if provided. I would recommend you to please check my notebook for Quick ML model comparison and their performances in this competition to plan a long term strategy. \n\n### Notebook Link: [[PyCaret] ML models comparison | Blends](https:\/\/www.kaggle.com\/reverie5\/pycaret-ml-models-comparison-blends)","f18b54f2":"<a id=\"sub1\"><\/a>\n**CATEGORY: IDENTIFIERS**","dff96fb7":"*Note :- Age Distribution has deviation from normal distribution. It is left skewed (Negative skewness) distribution with most data between 50-75 years. There are some outliers present on lower end (Age=0)*","4241ba45":"<a id=\"id2\"><\/a>\n### Descriptive Statistics","681ad4b0":"<a id=\"sub4\"><\/a>\n**CATEGORY: APACHE COVARIATE**"}}