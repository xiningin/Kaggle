{"cell_type":{"058c3253":"code","c81ab830":"code","2d8d8457":"code","8b3fbdca":"code","ee3e19c0":"code","a96f337b":"code","f731b85e":"code","805e2c7c":"code","3dce9cbd":"code","8a168556":"code","d3e72983":"code","6218731d":"code","d078938b":"code","079c4f55":"code","f37ce669":"code","745c6133":"code","699a5eb4":"code","7479542a":"code","9dcf8c0a":"code","8a67cb4f":"code","918dd566":"code","d2f271ef":"markdown","967ce9c8":"markdown","3676e116":"markdown","b5a6dfa5":"markdown","47d64ad3":"markdown","61954660":"markdown","63141c25":"markdown","515e1c39":"markdown","3c7ffbdd":"markdown","84fd7ae7":"markdown","b4086059":"markdown","a2e85758":"markdown","daff44aa":"markdown","a2a548f5":"markdown","2c513b76":"markdown","394b6abd":"markdown","3b6e59b8":"markdown","6726a8cf":"markdown","fb91007b":"markdown","a60b0dac":"markdown"},"source":{"058c3253":"import pandas as pd\nimport numpy as np","c81ab830":"#read the data we have. \n\ndf=pd.read_csv(\"\/kaggle\/input\/ab-test-practice-case\/ab_data.csv\")","2d8d8457":"#take a look at the first 9 rows.\ndf.head(9)","8b3fbdca":"#to see how many rows we have\ndf.info()","ee3e19c0":"#to see how many unique rows we have\ndf.nunique()","a96f337b":"#to see duplicated values in user id\nduplicated_users_id=df[df.duplicated(['user_id'], keep = False)].sort_values(\"user_id\",ascending=True)\nduplicated_users_id","f731b85e":"print(\"The rate of duplicated user id is\",duplicated_users_id.user_id.nunique()\/df.user_id.nunique())","805e2c7c":"df.drop_duplicates(\"user_id\",keep=False,inplace=True)","3dce9cbd":"df.nunique()","8a168556":"df.info()","d3e72983":"df.isnull().sum()","6218731d":"print(\"The percentage of experiment group is\",df[df.landing_page==\"new_page\"].shape[0]\/df.shape[0])","d078938b":"df.groupby(\"landing_page\")[\"converted\"].mean()","079c4f55":"# calculate the Ncont, Nexp, Xcont, Xexp\nNcont= df[df.landing_page==\"old_page\"].shape[0]\nNexp= df[df.landing_page==\"new_page\"].shape[0]\nXcont=df[(df[\"landing_page\"]==\"old_page\") & (df[\"converted\"] ==1)].shape[0]\nXexp=df[(df[\"landing_page\"]==\"new_page\") & (df[\"converted\"]==1)].shape[0]","f37ce669":"Ncont,Nexp,Xcont,Xexp","745c6133":"p_pool = (Xcont+Xexp)\/(Ncont+Nexp)\np_pool","699a5eb4":"SE_pool = np.sqrt(p_pool*(1-p_pool)*(1\/Ncont+1\/Nexp))\nSE_pool","7479542a":"pexp=Xexp\/Nexp\npcont=Xcont\/Ncont\n\npexp,pcont","9dcf8c0a":"d_hat = pexp-pcont\nz_score=d_hat\/SE_pool\nz_score","8a67cb4f":"from scipy.stats import norm\nz_alpha=norm.ppf(0.95)\nz_alpha","918dd566":"import statsmodels.stats.proportion as sp\nz_score, p_value = sp.proportions_ztest([Xexp,Xcont],[Nexp,Ncont],alternative=\"larger\")\nprint('z_score:', z_score, '\uff0cp-value:', p_value)","d2f271ef":"### A\/B Testing","967ce9c8":"## Objective: to test whether we should change landing page to a new version.","3676e116":"#### Function","b5a6dfa5":"We have reasonable size of experiment group.\nNext, we want to see what are the converstion rate for each group.","47d64ad3":"alpha = 0.05","61954660":"# Decision: It would be great to land a new page!","63141c25":"Since we have 294478 rows in dataset. So we have duplicated rows in the user_id column.","515e1c39":"Since P-value is smaller that 0.05, and z_score is higher than 1.65,we can be confident that we have the positive change at 95% level. Therefore, we can reject null hyphothesis.","3c7ffbdd":"I change the way how to get the hypothesis. Thanks for sharing this useful dataset to new users of A\/B test!","84fd7ae7":"Now that we have all distince user_id cleaned, we want to make sure that our control group and experiment group are in similar size.","b4086059":"Alternative hypothesis: new page has some positive change on conversion rate.","a2e85758":"# A\/B testing case","daff44aa":"z_score is higher than z_alpha, which means that we can be confident that we have the positive change at 95% level. Therefore, we can reject null hyphothesis.","a2a548f5":"This analysis is based on what a user did on Zhihu forum:https:\/\/zhuanlan.zhihu.com\/p\/68019926","2c513b76":"### Data preprocessing","394b6abd":"Duplicated users only takes 1.3% of data. I decided to delete all this data.","3b6e59b8":"#### Calculation","6726a8cf":"We can see that duplicated user_id have the different landing_page and converted results.\nTo see whether the duplicated ids can affect our result, we need to know what persentage of these users.","fb91007b":"Null hypothesis: there is no change or negative change on conversion rate between new page and old page.","a60b0dac":" Utilize stats.proportions_ztest to calculate z_score and p_value"}}