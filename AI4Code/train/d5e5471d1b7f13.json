{"cell_type":{"d98f2f00":"code","d77fb62e":"code","e6e42391":"code","0862630c":"code","10ef7a37":"code","0f3ff6a7":"markdown"},"source":{"d98f2f00":"import os\nimport numpy as np\nimport pandas as pd\nimport re\n\nfrom math import ceil, floor, sqrt\n# from https:\/\/www.kaggle.com\/fergusfindley\/ensembling-and-rounding-techniques-comparison\ndef geometric_round(arr):\n    result_array = arr\n    result_array = np.where(result_array < np.sqrt(np.floor(arr)*np.ceil(arr)), np.floor(arr), result_array)\n    result_array = np.where(result_array >= np.sqrt(np.floor(arr)*np.ceil(arr)), np.ceil(arr), result_array)\n\n    return result_array\n\ntargetName = 'num_sold'","d77fb62e":"# competitionDir = '\/kaggle\/input\/tabular-playground-series-jan-2022'\n# submission = pd.read_csv('..\/input\/tabular-playground-series-jan-2022\/sample_submission.csv')\n# regex = re.compile(r'\\d+')\n\n# preds = []\n# for dirname, _, filenames in os.walk('\/kaggle\/input'):\n#     for filename in filenames:\n#         if (dirname != competitionDir) & ('.csv' in filename):\n#             score = int(regex.search(filename).group(0))\n#             if score <= 401000:\n#                 print(score)\n#                 df = pd.read_csv(os.path.join(dirname, filename))\n#                 if len(df) == len(submission):\n#                     try:\n#                         preds.append(df[targetName])\n#                     except Exception:\n#                         pass\n\n# submission[targetName] = geometric_round(np.median(np.array(preds),axis=0).transpose()).astype(int)\n# submission.to_csv(\"submission.csv\", index=False)","e6e42391":"# https:\/\/www.kaggle.com\/c\/tabular-playground-series-jan-2022\/discussion\/302889\nsubmission = pd.read_csv('..\/input\/tps-submissions-january-2022\/400534_submission.csv')\nsubmission.num_sold = geometric_round((submission.num_sold * np.exp((submission.row_id - 27200) \/ 676000))).astype(int)\nsubmission.to_csv('submission.csv', index=False)","0862630c":"display(submission.head(30))\ndisplay(submission.tail(30))","10ef7a37":"submission[targetName].describe()","0f3ff6a7":"# Tell me the magic number!\n\n- Direct copy from https:\/\/www.kaggle.com\/ambrosm\/scaling-is-better-than-blending\n- Dataset from https:\/\/www.kaggle.com\/jbomitchell\/tps-submissions-january-2022\n\nV8 - based on @ambrosm https:\/\/www.kaggle.com\/c\/tabular-playground-series-jan-2022\/discussion\/302889\n\n**Do NOT up this copy of boring notebook**"}}