{"cell_type":{"d6d8c9cd":"code","1d40cede":"code","bd121c30":"code","ed23277c":"code","1c5bb3f9":"code","662e8298":"code","e741c0d1":"code","d49a019a":"code","cf42f3f3":"code","7aa8412d":"code","a4fb91a0":"code","8ade7382":"code","0b6a50dd":"code","8d27cb5e":"code","cdbfbb6d":"code","918b20d7":"code","6e71cf97":"code","8f524d53":"code","59e5d55c":"code","b915fdc3":"code","bd053ac1":"code","8682d435":"code","baed34f3":"code","2c696fc0":"code","804200d4":"code","4daf76b8":"code","9e51db49":"code","ed1b7354":"code","0598908d":"code","3cbb7294":"code","7e99ecde":"code","f036d152":"code","2becf713":"code","2e4950df":"code","9af5d905":"code","aea8cd6a":"code","c8502424":"code","c6702410":"code","0170f4ba":"code","b9efc795":"code","c81d7f0c":"code","ef5a33ae":"code","31afd884":"code","8c8b2d70":"code","712ceb47":"code","3f98f890":"code","8683ba89":"code","2989fb83":"code","3400284e":"code","28584df7":"code","7f666d04":"code","55c97ea7":"code","044b1a2e":"markdown","1ebe359b":"markdown","f8d3299f":"markdown","cb7c9838":"markdown","0df91b38":"markdown","cbc0fe3b":"markdown","1ec15266":"markdown","c83eac80":"markdown","d9dd100e":"markdown","01309a81":"markdown","6f937c1a":"markdown","a909064e":"markdown","8c82ba6e":"markdown","d8fac53c":"markdown","5f157491":"markdown","7a525319":"markdown","cc9f15bd":"markdown","4cfbba3c":"markdown","074d2905":"markdown","03f0944f":"markdown","1d501728":"markdown"},"source":{"d6d8c9cd":"# This Python 3 environment comes with many helpful analytics libraries installed\n# It is defined by the kaggle\/python Docker image: https:\/\/github.com\/kaggle\/docker-python\n# For example, here's several helpful packages to load\n\nimport numpy as np # linear algebra\nimport pandas as pd # data processing, CSV file I\/O (e.g. pd.read_csv)\n\n# Input data files are available in the read-only \"..\/input\/\" directory\n# For example, running this (by clicking run or pressing Shift+Enter) will list all files under the input directory\n\nimport os\nfor dirname, _, filenames in os.walk('\/kaggle\/input'):\n    for filename in filenames:\n        print(os.path.join(dirname, filename))\n\n# You can write up to 20GB to the current directory (\/kaggle\/working\/) that gets preserved as output when you create a version using \"Save & Run All\" \n# You can also write temporary files to \/kaggle\/temp\/, but they won't be saved outside of the current session","1d40cede":"data = pd.read_csv('..\/input\/quikr-cars-scraped\/quikr_car - quikr_car.csv')\ndata.head()","bd121c30":"data.shape","ed23277c":"data.info()","1c5bb3f9":"data.columns","662e8298":"data.describe(include='all')","e741c0d1":"data.isnull().sum()","d49a019a":"data['company'].unique()","cf42f3f3":"data['year'].unique()","7aa8412d":"data['fuel_type'].unique()","a4fb91a0":"data['kms_driven'].unique()","8ade7382":"data['name'].unique()","0b6a50dd":"data[data['company'] == \"Hyundai\"]","8d27cb5e":"data[data['company'] == \"Maruti\"]","cdbfbb6d":"data['Price']","918b20d7":"data = data[data['year'].str.isnumeric()]\ndata","6e71cf97":"data['year'] = data['year'].astype(int)","8f524d53":"data = data[data['Price'] != 'Ask For Price']\ndata","59e5d55c":"data['Price'] = data['Price'].str.replace(',', '').astype(int)","b915fdc3":"data['kms_driven'] = data['kms_driven'].str.split().str.get(0).str.replace(',','')","bd053ac1":"data['kms_driven']","8682d435":"data = data[data['kms_driven'].str.isnumeric()]","baed34f3":"data['kms_driven'] = data['kms_driven'].astype(int)","2c696fc0":"data = data[~data['fuel_type'].isna()]","804200d4":"data.shape","4daf76b8":"data['name'] = data['name'].str.split().str.slice(start=0, stop=3).str.join(' ')","9e51db49":"data = data.reset_index(drop=True)","ed1b7354":"data.head()","0598908d":"data.info()","3cbb7294":"data['company'].unique()","7e99ecde":"data['company'].value_counts()","f036d152":"import seaborn as sns\nimport matplotlib.pyplot as plt\n%matplotlib inline","2becf713":"plt.subplots(figsize=(15, 7))\nax = sns.boxplot(x='company', y='Price', data=data)\nax.set_xticklabels(ax.get_xticklabels(), rotation = 40, ha='right')\nplt.show()","2e4950df":"plt.subplots(figsize=(20,10))\nax=sns.swarmplot(x='year',y='Price',data=data)\nax.set_xticklabels(ax.get_xticklabels(),rotation=20,ha='right')\nplt.show()","9af5d905":"sns.scatterplot(x='kms_driven', y='Price', data=data, color='red')","aea8cd6a":"plt.figure(figsize=(14, 7))\nsns.boxplot(x='fuel_type', y='Price', data=data)","c8502424":"\nax=sns.relplot(x='company',y='Price',data=data,hue='fuel_type',size='year',height=7,aspect=2)\nax.set_xticklabels(rotation=40,ha='right')","c6702410":"X = data.drop('Price', axis=1)\ny = data['Price']","0170f4ba":"X.head()","b9efc795":"y.shape","c81d7f0c":"from sklearn.model_selection import train_test_split","ef5a33ae":"X_train, X_test, y_train, y_test = train_test_split(X, y, test_size=0.2)","31afd884":"from sklearn.linear_model import LinearRegression","8c8b2d70":"from sklearn.preprocessing import OneHotEncoder\nfrom sklearn.compose import make_column_transformer\nfrom sklearn.pipeline import make_pipeline\nfrom sklearn.metrics import r2_score","712ceb47":"on = OneHotEncoder()\non.fit(X[['name', 'company', 'fuel_type']])","3f98f890":"column_trans = make_column_transformer((OneHotEncoder(categories=on.categories_), ['name', 'company', 'fuel_type']),\n                                      remainder = 'passthrough')","8683ba89":"column_trans","2989fb83":"lr = LinearRegression()","3400284e":"pipe = make_pipeline(column_trans, lr)","28584df7":"pipe.fit(X_train, y_train)","7f666d04":"y_pred = pipe.predict(X_test)","55c97ea7":"r2_score(y_test, y_pred)","044b1a2e":"**fuel_type has nan values**","1ebe359b":"### Data Cleaning","f8d3299f":"**kms_driven has object values with kms at last**","cb7c9838":"### Checking the R2 score","0df91b38":"### Splitting the Dataset into X and Y","cbc0fe3b":"**year is in object.Change to interger**","1ec15266":"**year has many non-year values**","c83eac80":"### Applying the Train Test Split","d9dd100e":"### Fitting the model","01309a81":"### Relationship of Price with FuelType, Year and Company mixed","6f937c1a":"**It has Nan values and two rows have 'Petrol' in them**","a909064e":"### Data Preprocessing","8c82ba6e":"**Name and Company column had spammed data...but with the previous cleaning, those rows got removed**","d8fac53c":"**Price has commas in its prices and is in object**","5f157491":"**Resetting the index of the final cleaned data**","7a525319":"### Creating a column transformer to transform categorical columns","cc9f15bd":"### Making a pipeline","4cfbba3c":"### Cleaning relationship of company with price","074d2905":"**Price has Ask for price**","03f0944f":"### Cleaned Data","1d501728":"### Checking the relationship of Year with price"}}