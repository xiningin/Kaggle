{"cell_type":{"e1b4a049":"code","7c5ed431":"code","7a07d8fb":"code","bfa44261":"code","e1589838":"code","80a81e29":"code","de720603":"code","fd9d4986":"code","6c4c1108":"code","012afe75":"code","323751d5":"code","83d7b378":"code","26a90f21":"code","6201d915":"code","2d5244e6":"code","a9616a2d":"code","84347c5a":"code","d7d341b2":"code","ea81492d":"code","1d3b949b":"code","e4c371a8":"code","2ce6fbb6":"code","e98acce0":"code","61fce302":"code","fedcd276":"code","ba6330b5":"code","c32bcd27":"code","4c8a6b57":"code","5be528b3":"code","aba5942d":"code","d6c24f77":"code","ee5b60f5":"code","b7b5235a":"code","d6d63289":"code","4d9ba0e7":"code","e3630b88":"code","82c769c9":"code","ade9557b":"code","86fb61fa":"code","a8834ef5":"code","2ae6aa1a":"code","9606da59":"code","8b6a1556":"code","fc90a61c":"code","efd85baf":"code","3973f091":"code","e3ec1696":"code","649f4bf0":"code","d926b53e":"code","6f0ba81c":"code","40600b59":"code","df78724f":"markdown","94f38c0f":"markdown","7a09ae81":"markdown","a7242f52":"markdown","9fad8f27":"markdown","56f71220":"markdown","de471587":"markdown","0a4e41b6":"markdown","52805cd8":"markdown","4b3f81b9":"markdown","5b861ebf":"markdown","a74788ee":"markdown","df11972d":"markdown","2bd81193":"markdown","47281c84":"markdown","45c305be":"markdown","1e73b5b5":"markdown","395afe87":"markdown","255b6223":"markdown","2a0bbe0b":"markdown","4fff2c7f":"markdown","9af803de":"markdown","885145f9":"markdown","ddaf77a8":"markdown","4fe1cd9b":"markdown","c25ab674":"markdown","fd684510":"markdown","163e3ad1":"markdown","87665e6a":"markdown","24bef340":"markdown","880f5179":"markdown","278c4e30":"markdown","b786dca1":"markdown","bd561b37":"markdown","c00d3a9a":"markdown","aa12e9e0":"markdown","eb3d3fc8":"markdown","e066bed2":"markdown","95e35033":"markdown"},"source":{"e1b4a049":"import rkn_module_benford_law as rkn_benford","7c5ed431":"import sys\nimport os\nfrom IPython.display import HTML, display\nfrom IPython.display import Image\nimport pandas as pd\nimport numpy as np\nimport random\nfrom decimal import Decimal\nimport matplotlib.image as mpimg\nfrom matplotlib import pyplot as plt\nmaxInt = sys.maxsize","7a07d8fb":"fig = plt.figure(figsize=(16,10), dpi=300)\n\na = fig.add_subplot(1, 3, 1)\nimgplot = plt.imshow(mpimg.imread('..\/input\/inputbenfordtutorial\/Slide1.png'))\n\na = fig.add_subplot(1, 3, 2)\nimgplot = plt.imshow(mpimg.imread('..\/input\/inputbenfordtutorial\/Slide2.png'))\n\nplt.setp(plt.gcf().get_axes(), xticks=[], yticks=[]);","bfa44261":"fig = plt.figure(figsize=(16,10), dpi=300)\n\na = fig.add_subplot(1, 3, 1)\nimgplot = plt.imshow(mpimg.imread('..\/input\/inputbenfordtutorial\/Slide3.png'))\n\na = fig.add_subplot(1, 3, 2)\nimgplot = plt.imshow(mpimg.imread('..\/input\/inputbenfordtutorial\/Slide4.png'))\n\nplt.setp(plt.gcf().get_axes(), xticks=[], yticks=[]);","e1589838":"fig = plt.figure(figsize=(16,10), dpi=300)\n\na = fig.add_subplot(1, 3, 1)\nimgplot = plt.imshow(mpimg.imread('..\/input\/inputbenfordtutorial\/Slide5.png'))\n\na = fig.add_subplot(1, 3, 2)\nimgplot = plt.imshow(mpimg.imread('..\/input\/inputbenfordtutorial\/Slide6.png'))\n\nplt.setp(plt.gcf().get_axes(), xticks=[], yticks=[]);","80a81e29":"fig = plt.figure(figsize=(16,10), dpi=300)\n\na = fig.add_subplot(1, 3, 1)\nimgplot = plt.imshow(mpimg.imread('..\/input\/inputbenfordtutorial\/Slide7.png'))\n\na = fig.add_subplot(1, 3, 2)\nimgplot = plt.imshow(mpimg.imread('..\/input\/inputbenfordtutorial\/Slide8.png'))\n\nplt.setp(plt.gcf().get_axes(), xticks=[], yticks=[]);","de720603":"fig = plt.figure(figsize=(16,10), dpi=300)\n\na = fig.add_subplot(1, 3, 1)\nimgplot = plt.imshow(mpimg.imread('..\/input\/inputbenfordtutorial\/Slide9.png'))\n\na = fig.add_subplot(1, 3, 2)\nimgplot = plt.imshow(mpimg.imread('..\/input\/inputbenfordtutorial\/Slide10.png'))\n\nplt.setp(plt.gcf().get_axes(), xticks=[], yticks=[]);","fd9d4986":"fig = plt.figure(figsize=(10,6), dpi=250)\n\na = fig.add_subplot(1, 1, 1)\nimgplot = plt.imshow(mpimg.imread('..\/input\/inputbenfordtutorial\/first_digit_exp.png'))\n\nplt.setp(plt.gcf().get_axes(), xticks=[], yticks=[]);","6c4c1108":"fig = plt.figure(figsize=(12,6), dpi=300)\n\na = fig.add_subplot(1, 1, 1)\nimgplot = plt.imshow(mpimg.imread('..\/input\/inputbenfordtutorial\/chi-sq-1.png'))\n\nplt.setp(plt.gcf().get_axes(), xticks=[], yticks=[]);","012afe75":"fig = plt.figure(figsize=(12,7), dpi=250)\n\na = fig.add_subplot(1, 1, 1)\nimgplot = plt.imshow(mpimg.imread('..\/input\/inputbenfordtutorial\/chi-sq-2.png'))\n\nplt.setp(plt.gcf().get_axes(), xticks=[], yticks=[]);","323751d5":"print(rkn_benford.readme())","83d7b378":"# Create city names list with 8 cities.\ncity_list = [\"city A\", \"city B\", \"city C\", \"city D\", \"city E\", \"city F\", \"city G\", \"city H\"]","26a90f21":"# Create the data set with 1000 lessons (rows)\ndata_app_1 = pd.DataFrame()\nsizeOfDataFrame = 1000\nfor currentLine in range(sizeOfDataFrame):\n    data_app_1 = data_app_1.append(pd.DataFrame({\"city_expenditure\":np.random.randint(999, size=1),\"city_name\":random.choice(city_list)},index=[0]))\ndata_app_1.reset_index(inplace = True)    \ndata_app_1.drop('index',axis=1,inplace=True)","6201d915":"# Data head\ndata_app_1.head(-5)","2d5244e6":"# Data types\ndata_app_1.dtypes","a9616a2d":"# Getting hints (0 for disaggregated analysis)\nprint(rkn_benford.hints(data_app_1, 0))","84347c5a":"table_results = rkn_benford.benford(data_app_1, 0, 10, 100, 100, 100, 2, 2, \"output_app1.xlsx\", \"\")","d7d341b2":"# Order by city name\ntable_results[0].sort_values(by=['units'], inplace=True)","ea81492d":"# Format table values\nresults_d1 = table_results[0].style.format({\n    'N0': '{:,.2%}'.format, 'N1': '{:,.2%}'.format, 'N2': '{:,.2%}'.format, 'N3': '{:,.2%}'.format, 'N4': '{:,.2%}'.format, 'N5': '{:,.2%}'.format,\n    'N6': '{:,.2%}'.format, 'N7': '{:,.2%}'.format, 'N8': '{:,.2%}'.format, 'N8': '{:,.2%}'.format, 'N9': '{:,.2%}'.format, \n    'chi_sq': '{:,.2f}'.format, 'chi_sq 10 rounds': '{:,.2f}'.format,\n    })","1d3b949b":"fig = plt.figure(figsize=(25,15), dpi=300)\n\na = fig.add_subplot(1, 3, 1)\nimgplot = plt.imshow(mpimg.imread('..\/input\/inputbenfordtutorial\/D1__Aggregated.png'))\n\na = fig.add_subplot(1, 3, 2)\nimgplot = plt.imshow(mpimg.imread('..\/input\/inputbenfordtutorial\/D1_city B.png'))\n\na = fig.add_subplot(1, 3, 3)\nimgplot = plt.imshow(mpimg.imread('..\/input\/inputbenfordtutorial\/D1_city G.png'))\n\nplt.setp(plt.gcf().get_axes(), xticks=[], yticks=[]);","e4c371a8":"# Order by city name\ntable_results[1].sort_values(by=['units'], inplace=True)","2ce6fbb6":"# Format table values\nresults_d2 = table_results[1].style.format({\n    'N0': '{:,.2%}'.format, 'N1': '{:,.2%}'.format, 'N2': '{:,.2%}'.format, 'N3': '{:,.2%}'.format, 'N4': '{:,.2%}'.format, 'N5': '{:,.2%}'.format,\n    'N6': '{:,.2%}'.format, 'N7': '{:,.2%}'.format, 'N8': '{:,.2%}'.format, 'N8': '{:,.2%}'.format, 'N9': '{:,.2%}'.format, \n    'chi_sq': '{:,.2f}'.format, 'chi_sq 10 rounds': '{:,.2f}'.format,\n    })","e98acce0":"fig = plt.figure(figsize=(16,10), dpi=300)\n\na = fig.add_subplot(1, 3, 1)\nimgplot = plt.imshow(mpimg.imread('..\/input\/inputbenfordtutorial\/D2__Aggregated.png'))\n\na = fig.add_subplot(1, 3, 2)\nimgplot = plt.imshow(mpimg.imread('..\/input\/inputbenfordtutorial\/D2_city G.png'))\n\na = fig.add_subplot(1, 3, 3)\nimgplot = plt.imshow(mpimg.imread('..\/input\/inputbenfordtutorial\/D2_city A.png'))\n\nplt.setp(plt.gcf().get_axes(), xticks=[], yticks=[]);","61fce302":"# Order by city name\ntable_results[2].sort_values(by=['units'], inplace=True)","fedcd276":"# Format table values\nresults_d3 = table_results[2].style.format({\n    'N0': '{:,.2%}'.format, 'N1': '{:,.2%}'.format, 'N2': '{:,.2%}'.format, 'N3': '{:,.2%}'.format, 'N4': '{:,.2%}'.format, 'N5': '{:,.2%}'.format,\n    'N6': '{:,.2%}'.format, 'N7': '{:,.2%}'.format, 'N8': '{:,.2%}'.format, 'N8': '{:,.2%}'.format, 'N9': '{:,.2%}'.format, \n    'chi_sq': '{:,.2f}'.format, 'chi_sq 10 rounds': '{:,.2f}'.format,\n    })","ba6330b5":"fig = plt.figure(figsize=(16,10), dpi=300)\n\na = fig.add_subplot(1, 3, 1)\nimgplot = plt.imshow(mpimg.imread('..\/input\/inputbenfordtutorial\/D3__Aggregated.png'))\n\na = fig.add_subplot(1, 3, 2)\nimgplot = plt.imshow(mpimg.imread('..\/input\/inputbenfordtutorial\/D3_city E.png'))\n\na = fig.add_subplot(1, 3, 3)\nimgplot = plt.imshow(mpimg.imread('..\/input\/inputbenfordtutorial\/D3_city G.png'))\n\nplt.setp(plt.gcf().get_axes(), xticks=[], yticks=[]);","c32bcd27":"# Path to the database\n# path = \"..\/input\/inputbenfordtutorial\/sample_city_SPBR_2010.xlsx\"\npath = \"..\/input\/inputbenfordtutorial\/sample_city_SPBR_2010.xlsx\"\ndata_original = pd.read_excel(path, encoding='UTF-8', delimiter=';')\ndata_app_2 = data_original.copy()","4c8a6b57":"# Data head\ndata_app_2.head(-5)","5be528b3":"# Some descriptive analysis\ndata_app_2['unidade'].value_counts()","aba5942d":"# Checking Data types (must be one text and one numeric)\ndata_app_2.dtypes","d6c24f77":"# Getting hints (0 for disaggregated analysis)\nrkn_benford.hints(data_app_2, 0)","ee5b60f5":"table_results_real = rkn_benford.benford(data_app_2, 0, 4, 150, 150, 150, 2, 2, \"output_app_2.xlsx\", \"\")","b7b5235a":"# Order by city name\ntable_results_real[0].sort_values(by=['chi_sq 4 rounds'], inplace=True, ascending=False)","d6d63289":"# Format table values\nresults_d1_real = table_results_real[0].head(5).style.format({\n    'N0': '{:,.2%}'.format, 'N1': '{:,.2%}'.format, 'N2': '{:,.2%}'.format, 'N3': '{:,.2%}'.format, 'N4': '{:,.2%}'.format, 'N5': '{:,.2%}'.format,\n    'N6': '{:,.2%}'.format, 'N7': '{:,.2%}'.format, 'N8': '{:,.2%}'.format, 'N8': '{:,.2%}'.format, 'N9': '{:,.2%}'.format, \n    'chi_sq': '{:,.2f}'.format, 'chi_sq 10 rounds': '{:,.2f}'.format,\n    })","4d9ba0e7":"fig = plt.figure(figsize=(16,10), dpi=300)\n\na = fig.add_subplot(1, 3, 1)\nimgplot = plt.imshow(mpimg.imread('..\/input\/inputbenfordtutorial\/real_D1__Aggregated.png'))\n\na = fig.add_subplot(1, 3, 2)\nimgplot = plt.imshow(mpimg.imread('..\/input\/inputbenfordtutorial\/D1_Torrinha.png'))\n\na = fig.add_subplot(1, 3, 3)\nimgplot = plt.imshow(mpimg.imread('..\/input\/inputbenfordtutorial\/D1_Brauna.png'))\n\nplt.setp(plt.gcf().get_axes(), xticks=[], yticks=[]);","e3630b88":"# Order by city name\ntable_results_real[1].sort_values(by=['chi_sq 4 rounds'], inplace=True, ascending=False)","82c769c9":"# Format table values\nresults_d2_real = table_results_real[1].head(5).style.format({\n    'N0': '{:,.2%}'.format, 'N1': '{:,.2%}'.format, 'N2': '{:,.2%}'.format, 'N3': '{:,.2%}'.format, 'N4': '{:,.2%}'.format, 'N5': '{:,.2%}'.format,\n    'N6': '{:,.2%}'.format, 'N7': '{:,.2%}'.format, 'N8': '{:,.2%}'.format, 'N8': '{:,.2%}'.format, 'N9': '{:,.2%}'.format, \n    'chi_sq': '{:,.2f}'.format, 'chi_sq 10 rounds': '{:,.2f}'.format,\n    })","ade9557b":"fig = plt.figure(figsize=(16,10), dpi=300)\n\na = fig.add_subplot(1, 3, 1)\nimgplot = plt.imshow(mpimg.imread('..\/input\/inputbenfordtutorial\/real_D2__Aggregated.png'))\n\na = fig.add_subplot(1, 3, 2)\nimgplot = plt.imshow(mpimg.imread('..\/input\/inputbenfordtutorial\/D2_Roseira.png'))\n\na = fig.add_subplot(1, 3, 3)\nimgplot = plt.imshow(mpimg.imread('..\/input\/inputbenfordtutorial\/D2_Balsamo.png'))\n\nplt.setp(plt.gcf().get_axes(), xticks=[], yticks=[]);","86fb61fa":"# Order by city name\ntable_results_real[2].sort_values(by=['chi_sq 4 rounds'], inplace=True, ascending=False)","a8834ef5":"# Format table values\nresults_d3_real = table_results_real[2].head(5).style.format({\n    'N0': '{:,.2%}'.format, 'N1': '{:,.2%}'.format, 'N2': '{:,.2%}'.format, 'N3': '{:,.2%}'.format, 'N4': '{:,.2%}'.format, 'N5': '{:,.2%}'.format,\n    'N6': '{:,.2%}'.format, 'N7': '{:,.2%}'.format, 'N8': '{:,.2%}'.format, 'N8': '{:,.2%}'.format, 'N9': '{:,.2%}'.format, \n    'chi_sq': '{:,.2f}'.format, 'chi_sq 10 rounds': '{:,.2f}'.format,\n    })","2ae6aa1a":"fig = plt.figure(figsize=(16,10), dpi=300)\n\na = fig.add_subplot(1, 3, 1)\nimgplot = plt.imshow(mpimg.imread('..\/input\/inputbenfordtutorial\/real_D3__Aggregated.png'))\n\na = fig.add_subplot(1, 3, 2)\nimgplot = plt.imshow(mpimg.imread('..\/input\/inputbenfordtutorial\/D3_Oriente.png'))\n\na = fig.add_subplot(1, 3, 3)\nimgplot = plt.imshow(mpimg.imread('..\/input\/inputbenfordtutorial\/D3_Miracatu.png'))\n\nplt.setp(plt.gcf().get_axes(), xticks=[], yticks=[]);","9606da59":"# Cria o dataFrame com a coluna unidade e a coluna fibonacci.\ntotal_interacoes = 1500\ndf_fibo = pd.DataFrame({\"unit\": \"line\", 'value': np.zeros(total_interacoes)})","8b6a1556":"# Para cada intera\u00e7\u00e3o alimentar a linha do dataFrame com a primeira posi\u00e7\u00e3o da lista fibonacci atualizada.\n\n# Inicia a lista com os 3 primeiros n\u00fameros do fibonacci.\nlista_fibo = [1,1,0]\n\nfor j in range(total_interacoes):\n# inicio, contagem, passo itera\u00e7\u00e3o\n    for i in range(2,3,1):\n        lista_fibo[i] = lista_fibo[i-1] + lista_fibo[i-2]\n        # print(f\"interacao: {j} | Vetor fibonacci atual: {lista_fibo} \")\n        # Alimenta a linha unidade\n        df_fibo.iloc[j,0] = f\"sequence {j}\"\n        # Alimenta a linha do dataFrame com a sequ\u00eancia atual de fibonacci.\n        df_fibo.iloc[j,1] = Decimal(lista_fibo[0])\n        # print(df.iloc[j,0])\n        lista_fibo[0] = lista_fibo[1]\n        lista_fibo[1] = lista_fibo[2]","fc90a61c":"# Checking Data types (must be one text and one numeric)\ndf_fibo.dtypes","efd85baf":"data_app_3 = df_fibo.copy()\ndata_app_3","3973f091":"# Getting hints (1 for aggregated analysis)\nrkn_benford.hints(data_app_3, 1)","e3ec1696":"table_results_fibo = rkn_benford.benford(data_app_3, 1, 10, 1000, 900, 800, 1, 1, \"output_app_3.xlsx\", \"\")","649f4bf0":"table_results_fibo[0]","d926b53e":"table_results_fibo[1]","6f0ba81c":"table_results_fibo[2]","40600b59":"fig = plt.figure(figsize=(16,10), dpi=300)\n\na = fig.add_subplot(1, 3, 1)\nimgplot = plt.imshow(mpimg.imread('..\/input\/inputbenfordtutorial\/fibo_D1__Aggregated.png'))\n\na = fig.add_subplot(1, 3, 2)\nimgplot = plt.imshow(mpimg.imread('..\/input\/inputbenfordtutorial\/fibo_D2__Aggregated.png'))\n# Fig 3\na = fig.add_subplot(1, 3, 3)\nimgplot = plt.imshow(mpimg.imread('..\/input\/inputbenfordtutorial\/fibo_D3__Aggregated.png'))\n\nplt.setp(plt.gcf().get_axes(), xticks=[], yticks=[]);","df78724f":"## 2.3. Benford's Law: Chi-Squared Test","94f38c0f":"#### Graphs (Observed versus Benford's Law)\n\n* The leftmost graph below shows the aggregated results for the first digit.\n\n* The center graph shows the aggregated results for the second digit.\n\n* The rightmost graph shows the aggregated results for the third digit.\n\nNote thow fibonacci's sequence adheres perfectly to Benford's Law. This is a secret from nature that I can only admire, but never explain.","7a09ae81":"## 4.3.1. Results: First Digit","a7242f52":"#### Graphs (Observed versus Benford's Law)\n\n* The leftmost graph below shows the aggregated results, considering all cities as if they were one and selecting a sample of size 95550. Note that the chi-squared value of 170.05 is not really meaningful, since the test is inadequate for bigger samples.\n\n* The center graph shows the result for city Torrinha, which had the worst chi-squared value. \n\n* The rightmost graph shows the result for city Bra\u00fana, which had the best chi-squared value. \n\nNote that although the chi-squared value for the aggregated analysis is not meaningful, the distribution is very similar to what Benford's Law predicted.\n\nAlso, we see the importance of a disaggregated analysis, since we can separate results that are adherent to Benford from those who are not. Thus, we focus our attention on the cities where the probability of data manipulation is greater.","9fad8f27":"# 5. Application 2: Real data set from Brazilian cities - 2010 (Type of analysis disaggregated)\n* 5.1. Preparing the data set\n* 5.2. Running the script on the data set\n* 5.3.1. Results: First Digit\n* 5.3.2. Results: Second Digit\n* 5.3.3. Results: Third Digit","56f71220":"---","de471587":"#### Graphs (Observed versus Benford's Law)\n\n* The leftmost graph below shows the aggregated results, considering all cities as if they were one and selecting a sample of size 800.\n\n* The center graph shows the result for city G, which had the worst chi-squared value. \n\n* The rightmost graph shows the result for city A, which had the best chi-squared value. \n\nNote that the chi-squared values for the second digits are much lower compared to the one of the first digit. It happens since the theory predicts a more random distribution for the numbers in second digit. ","0a4e41b6":"# 4. Application 1: Random Generated Data Set (Type of analysis disaggregated)\n* 4.1 Creating the dataset\n* 4.2 Running the script on the data set\n* 4.3.1. Results: First Digit\n* 4.3.2. Results: Second Digit\n* 4.3.3. Results: Third Digit","52805cd8":"# 3. RKN Script for Benford's Law\n\nOur script receives a data set and produces a table of frequencies for numbers 0 to 9 considering the first, second and third digits.\n\nThis data must always have two columns. For example, for a data set with city populations, one column will be the name of the city, and the other will be the value of the city population size. Thus, rows can have duplicate city names, since each rows show the city name and the city population size for different periods of time (day, week, month, etc..)","4b3f81b9":"For this example, we will simulate a data set for town hall's expenditure. We want to analyze if the data informed by our fictional mayors comply to Benford's Law. First let's create the database with two columns: city name, and city expenditure. This data set will have 1000 lessons. We will assume that each row represents the city's expenditure in a given month. Let's assume that the maximum expenditure is $999 per month.","5b861ebf":"#### Graphs (Observed versus Benford's Law)\n\n* The leftmost graph below shows the aggregated results, considering all cities as if they were one and selecting a sample of size 800.\n\n* The center graph shows the result for city E, which had the worst chi-squared value. \n\n* The rightmost graph shows the result for city G, which had the best chi-squared value. \n\nNote that the chi-squared values for the third digits are much lower compared to the one of the first digit. It happens since the theory predicts a more random distribution for the numbers in third digit. ","a74788ee":"## 5.3.1. Results: First Digit","df11972d":"#### Graphs (Observed versus Benford's Law)\n\n* The leftmost graph below shows the aggregated results, considering all cities as if they were one and selecting a sample of size 800.\n\n* The center graph shows the result for city B, which had the worst chi-squared value. \n\n* The rightmost graph shows the result for city G, which had the best chi-squared value. \n\nNote that since our data was randomly generated, the frequency in which numbers 0 to 9 appears as first digit will not comply to Benford's Law. This theory doesn't work for random numbers specially when we are considering the first digit.","2bd81193":"## 2.1. Benford's Law: Introduction","47281c84":"## 6.1. Preparing the data set","45c305be":"## 5.1. Preparing the data set","1e73b5b5":"For this example, we will simulate a data set with the first 1500 numbers in the sequence of fibonacci. Then, let's select a sample size of 1000 and use our code to analyze the frequency of 0 to 9 in the first, second and third digits of these 1000 values.\n\nIn this case we will type 1 for type of analysis, since we are only interested on the aggregated analysis.","395afe87":"## 4.3.3. Results: Third Digit","255b6223":"For this application we will use a real data set for cities of S\u00e3o Paulo, Brazil. During 2010 the 644 prefectures of S\u00e3o Paulo State (excluding its capital) made several expenses. We selected 300 expenses from each city, which generated a data set of 193195 rows (Some cities did not made the 300 expenses).  \n\nThe column \"unidade\" represents the city name, while the column \"valor\" represents its expenditure in some point of the year 2010.\n\nNow, let's analyze if the data informed by S\u00e3o Paulo cities comply to Benford's Law.","2a0bbe0b":"---","4fff2c7f":"## 6.3.3. Results: Third digit","9af803de":"#### Graphs (Observed versus Benford's Law)\n\n* The leftmost graph below shows the aggregated results, considering all cities as if they were one and selecting a sample of size 95400. Note that the chi-squared value of 3807.58 is not meaningful, since the test is inadequate for bigger samples.\n\n* The center graph shows the result for city Roseira, which had the worst chi-squared value. \n\n* The rightmost graph shows the result for city B\u00e1lsamo, which had the best chi-squared value. \n\nNote that both the aggregated analysis and the worst adherence city have a high presence of number 0 in the second digit. This behavior is very usual when the data informed was rounded. For example, instead of an expense of 19.93, the city may have rounded to 20. In this case the number shifted from 9 to 0.","885145f9":"<span style='color:Red ; font-size: 250%'> Benford's Law - A tool to detect data manipulation <\/span> \n#### **Author**: [Rafael Klanfer Nunes](https:\/\/www.linkedin.com\/in\/rafaelknunes\/)\n#### **Date**: 07\/apr\/2020\n#### **Disclaimer**: This notebook was produced in order to explain our utility script [RKN Module - Benford Law](https:\/\/www.kaggle.com\/rafaelknunes\/rkn-module-benford-law).\n#### **References**:\n* Nigrini, Mark J. \"I\u2019ve got your number: How a mathematical phenomenon can help CPAs uncover fraud and Rother irregulaties.\" AICPA Journal of Accountancy Online Journal 5 (1999).\n* Benford, Frank. \"The law of anomalous numbers.\" Proceedings of the American philosophical society (1938): 551-572.\n* PEARSON, K. (1935). Statistical Tests. Nature, 136(3434), 296\u2013297.\n\n#### **Kaggle Notebook**: https:\/\/www.kaggle.com\/rafaelknunes\/rkn-module-benford-law-tutorial\/notebook","ddaf77a8":"## 5.3.2. Results: Second Digit","4fe1cd9b":"## 6.2. Running the script on the data set","c25ab674":"## 2.2. Benford's Law: Formula for the first digit","fd684510":"## 6.3.2. Results: Second digit","163e3ad1":"## 4.2. Running the script on the data set","87665e6a":"# THANK YOU FOR READING!","24bef340":"# 6. Application 3: Fibonacci Sequence (Type of analysis aggregated)\n* 6.1. Preparing the data set\n* 6.2. Running the script on the data set\n* 6.3.1. Results: First digit\n* 6.3.2. Results: Second digit\n* 6.3.3. Results: Third digit","880f5179":"## 5.3.3. Results: Third Digit","278c4e30":"## 4.3.2. Results: Second Digit","b786dca1":"## 6.3.1. Results: First digit","bd561b37":"# 1. Notebook Goals\n\n* 1) Introduce the reader to the Benford's law. We begin by explaining the theory and how it can be applied to identify data manipulation. We also present the Chi-Squared test, that will later be used to identify if some data set is statistically fraudulent according to Benford's theory.\n\n\n* 2) Explain our utility script \"RKN Module - Benford Law\". This script is a useful tool for researchers using Benford's Law to detect data manipulatio and fraud.\n\n\n* 3) Apply our utility script \"RKN Module - Benford Law\" on 3 different datasets.\n    * 2.1) Application on a random generated dataset. (Type of analysis disaggregated)\n    * 2.2) Application on a sampled data set from Brazilian cities and the town hall's expenditure during 2010. (Type of analysis disaggregated)\n    * 2.3) Application on fibonacci sequence. (Type of analysis aggregated)","c00d3a9a":"## 4.1. Creating the dataset","aa12e9e0":"#### Graphs (Observed versus Benford's Law)\n\n* The leftmost graph below shows the aggregated results, considering all cities as if they were one and selecting a sample of size 94200. Note that the chi-squared value of 30028.17 is not meaningful, since the test is inadequate for bigger samples.\n\n* The center graph shows the result for city Oriente, which had the worst chi-squared value. \n\n* The rightmost graph shows the result for city Miracat\u00fa, which had the best chi-squared value. \n\nNote that both the aggregated analysis and the worst adherence city have a high presence of number 0 in the second digit. This behavior is very usual when the data informed was rounded. For example, instead of an expense of 193.93, the city may have rounded to 200. In this case the number shifted from 3 to 0.","eb3d3fc8":"---","e066bed2":"## 5.2. Running the script on the data set","95e35033":"# 2. Benford's Law\n* 2.1. Benford's Law: Introduction\n* 2.2. Benford's Law: Formula for the first digit\n* 2.3. Benford's Law: Chi-Squared Test"}}