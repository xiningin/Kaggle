{"cell_type":{"3a38d82f":"code","3ced3619":"code","e63c4ac9":"code","2ff856c2":"code","7b894583":"code","18640f4f":"code","ea172255":"code","7dc1a4e0":"code","fef28a98":"code","dc474f64":"code","8ca36115":"code","8bb87408":"code","74ab4294":"code","0ec0d5f8":"code","0c2bdec2":"code","b4e7b0b5":"code","6ff8cfdd":"code","5c939fdd":"code","349c4b88":"code","9d6e869d":"code","6f576727":"code","81cd3ec7":"code","460fdc37":"code","415f062b":"code","09294f1f":"code","e4c9c4e6":"code","b7860f46":"code","1c749c9a":"code","eb3c4a68":"code","d8495501":"code","0c2ae436":"code","2283732e":"code","9b113e14":"code","6a31573a":"code","d2fc1519":"markdown","f654cd1e":"markdown","878eae8e":"markdown","5986a14a":"markdown","a94d0394":"markdown","856c7016":"markdown","9a07bfd7":"markdown","c95316db":"markdown","80646f1b":"markdown","b52342b1":"markdown","55603ccd":"markdown","a20335e8":"markdown","a7ab8f15":"markdown","ec8738d6":"markdown","9821ac3c":"markdown","a9c9404f":"markdown","87f0eba3":"markdown","eab3ea8d":"markdown","f1858998":"markdown","61cff9b2":"markdown","a576248e":"markdown","bfff382f":"markdown","452e326c":"markdown","3641c4f9":"markdown","f45b3a8e":"markdown","d4c8be1c":"markdown","22ec194f":"markdown","dc229e43":"markdown","f09502ee":"markdown","17b5076f":"markdown","6bd62bc7":"markdown","3022020e":"markdown","33382aae":"markdown","ef2469eb":"markdown","a6a07b8c":"markdown","55bd0fb1":"markdown","a8024253":"markdown","6cd14ca8":"markdown","303dacda":"markdown","f5c88eda":"markdown"},"source":{"3a38d82f":"import numpy as np\nimport pandas as pd\nimport seaborn as sns\nimport matplotlib.pyplot as plt\n%matplotlib inline","3ced3619":"pga_df = pd.read_csv('..\/input\/pga-tour-20102018-data\/PGA_Data_Historical.csv')\npga_df","e63c4ac9":"pga_df.info()","2ff856c2":"pga_df = pga_df.set_index(['Player Name','Variable','Season'])['Value'].unstack('Variable').reset_index()\npga_df.head()","7b894583":"col = [\"Player Name\",\"Season\",\"Top 10 Finishes - (TOP 10)\",\"Top 10 Finishes - (EVENTS)\",\"Driving Distance - (AVG.)\",\n          \"Driving Accuracy Percentage - (%)\",\"Scoring Average (Actual) - (AVG)\", \"3-Putt Avoidance > 25' - (2 PUTT OR BETTER %)\",\n          \"Putting Average - (AVG)\", \"Total Money (Official and Unofficial) - (MONEY)\"]","18640f4f":"pga_df=pga_df[col]","ea172255":"pga_df.rename(columns = {'Player Name':'PlayerName'}, inplace = True)\npga_df.rename(columns = {'Top 10 Finishes - (TOP 10)':'Top_10_Finishes'}, inplace = True)\npga_df.rename(columns = {'Top 10 Finishes - (EVENTS)':'Events'}, inplace = True)\npga_df.rename(columns = {'Driving Distance - (AVG.)':'Avg_Drive_Dist'}, inplace = True)\npga_df.rename(columns = {'Driving Accuracy Percentage - (%)':'Avg_Drive_Acc'}, inplace=True)\npga_df.rename(columns = {'Scoring Average (Actual) - (AVG)':'Avg_Score'}, inplace=True)\npga_df.rename(columns = {\"3-Putt Avoidance > 25' - (2 PUTT OR BETTER %)\":'Three_Putt_Avoid'}, inplace=True)\npga_df.rename(columns = {'Putting Average - (AVG)':'Avg_Putt'}, inplace=True)\npga_df.rename(columns = {'Total Money (Official and Unofficial) - (MONEY)':'Money'}, inplace=True)\n","7dc1a4e0":"pga_df = pga_df.replace({'\\$':'',',':''},regex = True)","fef28a98":"for col in pga_df.columns[2:]:\n    pga_df[col] = pga_df[col].astype(float)","dc474f64":"pga_df['Avg_Money'] = round(pga_df['Money']\/pga_df['Events'])\npga_df['Avg_Finish'] = pga_df['Top_10_Finishes']\/pga_df['Events']","8ca36115":"pga_df['Avg_Finish'] = pga_df['Avg_Finish'] > pga_df['Avg_Finish'].mean()\nprint('Per event, the average percentage a player finishes in the top 10 is: {0:.0%}'.format(pga_df['Avg_Finish'].mean()))","8bb87408":"original_record_count = pga_df.shape[0]\nfor num in pga_df['Events']:\n    pga_df['Events'] = round(pga_df['Events'].fillna(value=pga_df['Money']\/pga_df['Avg_Money']))","74ab4294":"pga_df.drop(['Top_10_Finishes'],axis = 1, inplace = True)","0ec0d5f8":"pga_df=pga_df.dropna()","0c2bdec2":"new_record_count = pga_df.shape[0]\nprint(f'Original record count: {original_record_count}')\nprint(f'New record count: {new_record_count}')\nprint('Number of records dropped: '+str(original_record_count - new_record_count))","b4e7b0b5":"pga_df.head(5)","6ff8cfdd":"pga_scale = pga_df.copy(deep=True)\ncorr = pga_scale.corr()\ncorr","5c939fdd":"sns.set_style('whitegrid')\nf, ax = plt.subplots(1,2, figsize = (12,5))\nax[0].scatter('Avg_Drive_Dist','Money',data=pga_df,color='green')\nax[0].set_title(\"Driving for Money\")\nax[0].set_xlabel('Driving Avg. (Yards)')\nax[0].set_ylabel('Money ($)')\nax[1].scatter('Avg_Putt','Money',data=pga_df, color = 'green')\nax[1].set_title(\"Putting for Money\")\nax[1].set_xlabel('Putting Avg. (Putts per Hole)')\nax[1].set_ylabel('Money ($)')","349c4b88":"corr_drive = round(corr['Avg_Money']['Avg_Drive_Dist'],4)\ncorr_putt = round(corr['Avg_Money']['Avg_Putt'],4)\nprint(f'The correlation between Average Driving Distance and Money earned is: {corr_drive}')\nprint(f'The correlation between Average Putts and Money earned is: {corr_putt}')","9d6e869d":"all_avg_acc = pga_df['Avg_Drive_Acc']\nall_avg_dist = pga_df['Avg_Drive_Dist']\nsns.set_style('dark')\nsns.jointplot(x=all_avg_acc,y=all_avg_dist,data=pga_df)","6f576727":"pga_df[(pga_df['Avg_Drive_Dist']>310) & (pga_df['Avg_Drive_Acc']>62)]","81cd3ec7":"print('The correlation between driving distance and driving accuracy is: ' + str(round(corr['Avg_Drive_Dist']['Avg_Drive_Acc'],4)))","460fdc37":"from sklearn.preprocessing import StandardScaler\nscaler = StandardScaler()\nFeature_columns = ['Avg_Drive_Dist','Avg_Drive_Acc', 'Avg_Score','Three_Putt_Avoid','Avg_Putt',\n                   'Money','Avg_Money','Avg_Finish']\npga_scale[Feature_columns]=scaler.fit_transform(pga_scale[Feature_columns])","415f062b":"sns.heatmap(pga_scale.corr(),linewidth=1,linecolor='white',cmap='Greens')","09294f1f":"from sklearn.model_selection import train_test_split\nX = pga_df[Feature_columns].drop('Avg_Finish', axis=1)\ny = pga_df['Avg_Finish']\nX_train, X_test, y_train, y_test = train_test_split(X, y, test_size = 0.50)","e4c9c4e6":"from sklearn.tree import DecisionTreeClassifier\ndtree = DecisionTreeClassifier()\ndtree.fit(X_train,y_train)","b7860f46":"predictions = dtree.predict(X_test)\nfrom sklearn.metrics import classification_report,confusion_matrix\nprint(confusion_matrix(y_test,predictions))\nprint(classification_report(y_test,predictions))","1c749c9a":"X = pga_df[['Avg_Drive_Dist','Avg_Drive_Acc','Avg_Putt','Three_Putt_Avoid',]]\ny = pga_df['Avg_Score']","eb3c4a68":"from sklearn.model_selection import train_test_split\nX_train, X_test, y_train, y_test = train_test_split(X, y, test_size=0.2)","d8495501":"from sklearn.linear_model import LinearRegression\nlm = LinearRegression() # creates an object from the LinearRegression class\nlm.fit(X_train,y_train) # fits the training set to the model","0c2ae436":"coeff_df = round(pd.DataFrame(lm.coef_, X.columns, columns=['Coefficient']),3)\ncoeff_df","2283732e":"predictions = lm.predict(X_test)\nplt.scatter(y_test, predictions, color = 'green')","9b113e14":"from sklearn import metrics\nMSE = round(metrics.mean_squared_error(y_test, predictions),4)\nprint(f'Mean Squared Error = {MSE}')","6a31573a":"s = sns.PairGrid(pga_df, y_vars = ['Season'],x_vars = ['Avg_Drive_Dist','Money','Avg_Score'], height = 4)\ns.map(sns.regplot)","d2fc1519":"### Plotting Driving vs Money and Putting vs Money\nAt first glance, looks like driving distance average and putting average have fairly strong correlations with money earned.","f654cd1e":"### Check How Many Records Were Dropped\nSome players only had data on a couple variables per year, so dropping the records with NaN values gave me only the players with values for each variable I wanted.","878eae8e":"# Multiple Linear Regression","5986a14a":"## Cleaning the Data","a94d0394":"# Drive for Show, Putt for Dough\nBy: Tom Allen","856c7016":"### Predicitions and Evaluation\nDisplays confusion matrix and classification report.\n\nModel accurately predicits if player does or does not finish Top 10 above the mean 85% of the time (True Positive: 163 + True Negative: 412)\/Total: 693","9a07bfd7":"### Check Actual Correlations\nPutting is more strongly correlated to winnings, although negatively sloped, which makes sense since the fewer putts per hole would yield a better score.","c95316db":"### Replace String Values\nImportant in order to convert Money column into numbers.","80646f1b":"# Data Visualizations","b52342b1":"Here we see there is a relativley strong negative correlation between driving distance and accuracy. Seems like there is almost a trade-off for players either wanting to hit the ball far or accurately. ","55603ccd":"This analysis serves to explore historical PGA data from 2010-2018 that was collected from the PGA Tour website. The reason I was interested in analyzing this data set was for two reasons. One reason being, I am new to using Python for data analysis and wanted to practice on data I am genuinely curious in. The second reason being, I wanted to see whether putting had a bigger impact on score\/winnings than driving due to a light argument I had with a friend.","a20335e8":"### Create Decision Tree Model\nFits the training set to the Decision Tree model","a7ab8f15":"### Rename Variables to Simpler Labels","ec8738d6":"### Display Heatmap of Correlations\nThe darker or lighter the shade of green, the stronger the correlation","9821ac3c":"### Drop Remaining NaN Values in DataFrame","a9c9404f":"I wanted to quickly check the player who seemed to be an outlier in this graph since they were able to drive far AND accuratley. Turns out to be Gary Woodland, 2019 U.S. Open champ!","87f0eba3":"### Set Up Decision Tree\nUse Feature_Columns without Avg_Finish as input variables and Avg_Finish as target variable. Then split split the data into training and testing sets. \n\nThe goal is to predict whether the model can accuratley predict if a player finishes above the mean or not. ","eab3ea8d":"### Loss Functions\nThe Mean Squared Error (MSE) is 0.16 which is relatively low indicating the values are dispersed closely to the mean","f1858998":"### Reshape DataFrame\nUnstacks the Variable column for easier use of handling key-value pairs.","61cff9b2":"### Import Libraries","a576248e":"### Create and Train the Linear Regression Model","bfff382f":"### Check Coefficients\nHigh Avg_Putt makes sense because an average increase of one putt (stroke) per hole can be dentrimental to the final score. ","452e326c":"### Fill NaN Values in Events Column\nThe dataset had many records in Events column that were NaN (missing values). This for loop checks if there is a NaN value, and would predict the # of events based on their total winnings that season \/ their average winnings per event.","3641c4f9":"### Check DataFrame\nOver 2 million records with 2,083 different variables (subsets in the Variable column).","f45b3a8e":"# PGA Tour Trends\nA few observations:\n- Average driving distance has increased throughout the years (better club technology, stronger players?)\n- Money has also increased throughout the years. Looks like the shaded region is a bit higher indicating there may be outliers that don't accuratley predict the regression line\n- The average score has decreased meaning players are getting better at all facets of the game (time for more challenging courses?)","d4c8be1c":"### Predictions\nData points seem relatively fit to the regression line, only a few major outliers that could cause some mispredictions. ","22ec194f":"### Display Player's Driving Ability (Distance vs Accuracy)\nThis scatterplot is inversely correlated showing that players are usually either good at driving the ball far or driving the ball accuratley, but not at both.","dc229e43":"### Display Correlations Between Features\nCreated a scaled copy of the original pga_df for future use of analyzing correlations with the variables.","f09502ee":"# Decision Tree","17b5076f":"### Convert Columns to Numbers","6bd62bc7":"# Conclusion\nOverall, this was a fun dataset to play around with, especially because I follow golf and get to see how accurate some of my previous inclinations were. \n\nFor instance, I can now say that average putts per hole has a bigger impact on money winnings than average driving distance per hole. I also had a feeling that driving distance had been increased over the years due to players becoming stronger with more instense workout regiments (Brooks Koepka, Rory McIlroy, Dustin Johnson) and the advancement in technology with the clubs themselves.\n\nI did learn a great deal throughout this analysis. One thing I didn't realize was how negativley correlated average driving distance and average driving accuracy were. I figured players were either good at driving altogether or not, meaning they could drive far and accurate instead of having that trade-off. Another interesting chart to look at was the increase in money winnings throughout the years. Many people say golf is a dying sport that is being washed away with the older generation. Since there is an increase in money winnings, that may indicate that more people are watching the sport, therefore more companies\/advertisers sponsoring events. \n\nThere is definitley a lot more to analyze with this vast data set, and I look forward to using it more. If you notice any errors or have any recommendations in areas to improve in, please feel free to reach out. ","3022020e":"### Convert Avg_Finish to Boolean Variable\nThe percentage of a random player finishing in the top 10 per event is roughly 5%. I convert the Avg_Finish variable into a Boolean variable, so we can easily check if a player finishes above (True) or below (False) the mean of all the players in the dataset. ","33382aae":"### Grab Useful Variables\nI picked the 11 variables that I thought had the most impact on score\/winnings:\n\n- Player Name: Player Name \n\n- Season: Year\n\n- Top 10 Finishes - (TOP 10): Number of top 10 finshes the player had in that year\n\n- Top 10 Finishes - (EVENTS): Number of total events in that year for that player\n\n- Driving Distance - (AVG.): Average driving distance per drive for that year\n\n- Driving Accuracy Percentage - (%): % of fairways hit per drive (fairways hit \/ total drives) for that year\n\n- Scoring Average (Actual) - (AVG): Player's average score per round in that year\n\n- 3-Putt Avoidance > 25' (2 PUTT OR BETTER): Player's probability of making 2 putts or better per hole if on the green and 25 feet away from pin\n\n- Total Money (Official and Unofficial) - (MONEY): Player's total winnings in that year","ef2469eb":"### Assign the 11 Useful Variables to DataFrame","a6a07b8c":"### Train Test Split\n80% of the data will be allocated to the train set, therefore 20% to the test set","55bd0fb1":"### Load Dataset\nAssign PGA_Data_Historical.csv file to DataFrame: pga_df.","a8024253":"### Standardize Features by Scaling to Unit Variance\nStandardizing the features is important because some of the values can be widely different (think driving distance and putting average).","6cd14ca8":"### Create New Avg_Money and Avg_Finish Columns\nCreate average variables per event since some players golf at more events than others. The Avg_Finish variable calculates the percentage a player will finish in the top 10 in that event. ","303dacda":"### Assign Training Features (X) and Target Variable ('Avg_Score')","f5c88eda":"### Drop Top_10 Finishes Column"}}