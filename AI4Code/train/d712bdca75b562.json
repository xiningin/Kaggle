{"cell_type":{"626633a6":"code","42520967":"code","89233c05":"code","33aebf40":"code","a07012fa":"code","c1e6e00f":"code","662ac8a4":"code","53b7313d":"code","03af414f":"code","e8ebb0f9":"code","2c624b94":"code","408dd1d6":"code","0db972b9":"code","bb5df390":"code","42e97b8e":"code","485fc5cc":"code","c5e3ced5":"code","3b627b22":"code","ba9ef30a":"code","edf5a9d8":"code","1cb4cc61":"code","3db113fa":"code","b2b1efc9":"code","5742f201":"code","300c2eb2":"code","964f4e7e":"code","6665029a":"code","3e1cf0af":"code","7d55c69b":"code","f51e2692":"code","9422e46e":"code","2f6184b5":"code","caa9885c":"markdown","c340da1a":"markdown","29423afe":"markdown","a9539f70":"markdown","3270931d":"markdown","06245b74":"markdown","96c158a9":"markdown","bf8f8b6b":"markdown","f253b84f":"markdown","c31f73f4":"markdown"},"source":{"626633a6":"import numpy as np \nimport pandas as pd \n\nimport matplotlib.pyplot as plt\n%matplotlib inline\n\nimport os\nfor dirname, _, filenames in os.walk('\/kaggle\/input'):\n    for filename in filenames:\n        print(os.path.join(dirname, filename))","42520967":"df = pd.read_csv('\/kaggle\/input\/perrin-freres-monthly-champagne-sales\/perrin-freres-monthly-champagne.csv')\ndf.head(5)","89233c05":"df.columns = ['Months','Sales']\ndf.head(5)","33aebf40":"df.isnull()","a07012fa":"df.drop(105,axis=0,inplace=True)\ndf.drop(106,axis=0,inplace=True)\ndf.isnull().sum()","c1e6e00f":"df.dtypes","662ac8a4":"df['Months'] = pd.to_datetime(df['Months'])\ndf.dtypes","53b7313d":"df.set_index('Months',inplace=True)\ndf.head(5)","03af414f":"df.plot(figsize= (12,8))","e8ebb0f9":"from statsmodels.tsa.stattools import adfuller","2c624b94":"# Accept Null Hpyo means dataset is Not Stationary\n# Reject Null Hypo Means dataset is Stationary\ndef adfuller_test(sales):\n    result = adfuller(sales)\n    labels = ['ADF Test statistic','p-value','#lags used','Number of Observations']\n    for values, label in zip(result,labels):\n        print(label +':'+ str(values))\n    if(result[1] <= 0.05):\n        print(\"The Dataset is stationary, Reject Null Hypothesis\")\n    else:\n        print(\"The Dataset is Not Stationary, Accept Null Hypothesis\")","408dd1d6":"adfuller_test(df['Sales'])","0db972b9":"df['Seasonal Sales Diff'] = df['Sales'] - df['Sales'].shift(12)\ndf","bb5df390":"adfuller_test(df['Seasonal Sales Diff'].dropna())","42e97b8e":"df['Seasonal Sales Diff'].plot(figsize=(12,8))","485fc5cc":"from statsmodels.graphics.tsaplots import plot_acf,plot_pacf","c5e3ced5":"fig =plt.figure(figsize=(12,8))\nax1 = fig.add_subplot(211)\nfig = plot_acf(df['Seasonal Sales Diff'].iloc[13:],lags=40,ax=ax1)\nax2 = fig.add_subplot(212)\nfig = plot_pacf(df['Seasonal Sales Diff'].iloc[13:],lags= 40,ax=ax2)","3b627b22":"# For Non Seasonal Data\n#p=1 d=1 q can be 0 or 1\nfrom statsmodels.tsa.arima_model import ARIMA","ba9ef30a":"model = ARIMA(df['Sales'],order=(1,1,1))\nmodel_fit = model.fit()","edf5a9d8":"model_fit.summary()","1cb4cc61":"df.tail(20)","3db113fa":"df['forecast'] = model_fit.predict(start=90,end=103,dynamic=True)\ndf[['Sales','forecast']].plot(figsize=(12,8))","b2b1efc9":"import statsmodels.api as sm","5742f201":"model = sm.tsa.statespace.SARIMAX(df['Sales'],order=(1,1,1),seasonal_order=(1,1,1,12))\nresults = model.fit()","300c2eb2":"df['forecast'] = results.predict(start=90,end=103,dynamic=True)\ndf[['Sales','forecast']].plot(figsize=(12,8))","964f4e7e":"from pandas.tseries.offsets import DateOffset","6665029a":"future_dates = [df.index[-1]+ DateOffset(months=x) for x in range(0,24)]","3e1cf0af":"future_dataset_df = pd.DataFrame(index=future_dates[1:],columns=df.columns)","7d55c69b":"future_dataset_df.tail(20)","f51e2692":"future_dataset_df.shape","9422e46e":"future_df = pd.concat([df,future_dataset_df])","2f6184b5":"future_df['forecast'] = results.predict(start=104,end=120,dynamic=True)\nfuture_df[['Sales','forecast']].plot(figsize=(12,8))","caa9885c":"Now This Data Looks stationary","c340da1a":"## 2. Visualize the Data","29423afe":"## Differencing","a9539f70":"Here we need to find three values p,d,q\np = AR model lags\nd = differencing \/Integrated\nq = MA model Lags","3270931d":"### Auto Regressive Integrated Moving Averages\nThe general process of arima model is the following.\n1. Visualize Time Series data\n2. Make the time series data stationary.\n3. Plot the Correlation and Auto Correlation Charts.\n4. Contruct the ARIMA and SARIMA model based on data.\n5. Use the model to make predictions.","06245b74":"My p-value is > 0.05 so we accept Null Hypothises and prove that data is Not Stationary","96c158a9":"Testing for Stationarity use Dickey Fuller test","bf8f8b6b":"## ARIMA and SARIMA\n### on Perrin-freres-Monthly-Champagne-sales","f253b84f":"Adding Future Dates to the Dataset.","c31f73f4":"Identify AR model by best score of PACF\nshut off phase \nIdentify MA model is done by best of ACF rather than PACF\nshut iff phase"}}