{"cell_type":{"0156c284":"code","3816c1b0":"code","a5e039c8":"code","314551aa":"code","5d1c3099":"code","1085fd1e":"code","2fa1e09d":"code","dc69a2ca":"code","e55a831e":"code","c4209541":"code","4c163590":"code","230b6c2c":"code","9706ef6c":"code","39830442":"code","49c4351a":"code","ccaf80ae":"markdown"},"source":{"0156c284":"import pandas as pd\nimport numpy as np","3816c1b0":"print(pd.__version__)","a5e039c8":"N = 1000_0000","314551aa":"rand_state = np.random.RandomState(2020)\n\ndata = pd.DataFrame({\n    'category': rand_state.choice(['A', 'B', 'C', 'D'], size=N)\n})","5d1c3099":"%%timeit\n# currypurin san\nfor i in data['category'].unique():\n    if i != 'A' and i != 'B':\n        data['category'] = data['category'].str.replace(i,'other_cate')","1085fd1e":"data = pd.DataFrame({\n    'category': rand_state.choice(['A', 'B', 'C', 'D'], size=N)\n})","2fa1e09d":"def change_category(x):\n    if x in ('A', 'B'):\n        return x\n    else:\n        return 'other_cate'","dc69a2ca":"%%timeit\n# sf san\ndata['category'].apply(change_category)","e55a831e":"%%timeit\n# masaya san\ndata['category'].loc[(data['category'] != 'A') & (data['category'] != 'B')] = 'other_case'","c4209541":"data = pd.DataFrame({\n    'category': rand_state.choice(['A', 'B', 'C', 'D'], size=N)\n})","4c163590":"%%timeit\n# goto 1\nnp.where(data['category'].isin({ 'A', 'B' }), 'other_case', data['category'])","230b6c2c":"mapping = {\n    'A': 'other_case',\n    'B': 'other_case',\n    'C': 'C',\n    'D': 'D'\n}","9706ef6c":"%%timeit\n# goto 2\ndata['category'].map(mapping)","39830442":"%%timeit\n# goto 2.1 (unique\u306a\u5024\u3092\u77e5\u3089\u306a\u3044\u5834\u5408)\n\nmapping = {}\nchange_values = ['A', 'B']\nfor k in data['category'].unique():\n    v = k\n    if k in change_values:\n        v = 'other_case'\n    mapping[k] = v\n\ndata['category'].map(mapping)","49c4351a":"(np.where(data['category'].isin({ 'A', 'B' }), 'other_case', data['category']) != data['category'].map(mapping)).sum()","ccaf80ae":"## \u3084\u308a\u305f\u3044\u3053\u3068\n\npandas.DataFrame \u306e\u7279\u5b9a\u306e\u5024\u3060\u3051\u5225\u306e\u5024\u306b\u5909\u63db\u3057\u305f\u3044\u3002\u4ee5\u4e0b\u306e\u4f8b\u3067\u306f `\"A\"` \u3068 `\"B\"` \u3092 `\"other_case\"` \u3078\u5909\u63db\u3059\u308b\u3002"}}