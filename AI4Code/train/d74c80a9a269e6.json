{"cell_type":{"c14e0b3d":"code","29655c1c":"code","d0a02ced":"code","58191fdf":"code","a3dc75da":"code","08206fb3":"code","b3e28be3":"code","676693ff":"code","a852e369":"code","34de1915":"code","4d778431":"code","0911953b":"code","c00c9b66":"code","db4df608":"code","c2492561":"code","3365f3c1":"code","6775f322":"code","5d005b65":"code","a2407d0f":"code","a86a3995":"code","af7934be":"code","1cb82ab4":"code","f3efef92":"code","4a3c0038":"code","9c5fe191":"code","c6d4a7a6":"code","a02e1e62":"code","7b3cba12":"code","5e2bacf8":"code","27fb04ca":"code","b75f5813":"code","6959fdcd":"code","9c945987":"code","77149b50":"code","9c5f833a":"code","46e5461d":"code","3d28b497":"code","740b068b":"markdown","e3f77fdc":"markdown","371d512a":"markdown","f2a1f367":"markdown","c992f6de":"markdown","62b740e3":"markdown","bf6df384":"markdown","8650e6bb":"markdown","97422fa6":"markdown","4579a8a2":"markdown","da82a764":"markdown","476ce9ab":"markdown","75827634":"markdown","3c11ebe0":"markdown","f33d43fc":"markdown","9fd3e51b":"markdown","684ad913":"markdown","e98a9e85":"markdown","95f8a157":"markdown","3badcf66":"markdown","10ef467c":"markdown","7a0b44ee":"markdown","b53f7f7d":"markdown","608b33b1":"markdown","f44a4679":"markdown","5fa38d9a":"markdown","536fa0cc":"markdown","e6431bf6":"markdown","3008fab2":"markdown","8d706962":"markdown","8bddfe16":"markdown","4080bfbb":"markdown","c951a4e0":"markdown","7b1a510a":"markdown","757684a7":"markdown","15e9f6c6":"markdown","08d8bd2d":"markdown","e3b140fa":"markdown","0305e0df":"markdown","c19c9df6":"markdown","209b244e":"markdown","f5786232":"markdown","b7ba5e3a":"markdown","a922e773":"markdown","b8351cc6":"markdown","72844072":"markdown","c0422343":"markdown","74ab8c61":"markdown","f4ba631b":"markdown"},"source":{"c14e0b3d":"%matplotlib inline\nimport numpy as np\nimport pandas as pd\nimport matplotlib.pyplot as plt\nimport scipy.stats as stats\nimport os","29655c1c":"crashes = pd.read_csv(\"..\/input\/airplane-crashes-since-1908\/Airplane_Crashes_and_Fatalities_Since_1908.csv\")","d0a02ced":"airlines = pd.read_csv(\"..\/input\/airline-safety\/airline-safety.csv\")","58191fdf":"crashes.head()","a3dc75da":"crashes.info()","08206fb3":"100 * crashes.isnull().sum()\/len(crashes)","b3e28be3":"del crashes[\"Time\"]\ndel crashes[\"Flight #\"]\ndel crashes[\"Route\"]\ndel crashes[\"cn\/In\"]\ndel crashes[\"Registration\"]\ndel crashes[\"Ground\"]","676693ff":"crashes.dropna(subset=[\"Location\",\"Operator\",\"Type\",\"Aboard\",\"Fatalities\"], inplace=True)","a852e369":"crashes[\"Date\"] = pd.to_datetime(crashes[\"Date\"])","34de1915":"crashes.head()","4d778431":"crashes.info()","0911953b":"100 * crashes.isnull().sum()\/len(crashes)","c00c9b66":"airlines.head()","db4df608":"airlines.info()","c2492561":"100 * airlines.isnull().sum()\/len(airlines)","3365f3c1":"crashes[\"Survival Rate\"] = 100 * (crashes[\"Aboard\"] - crashes[\"Fatalities\"]) \/ crashes[\"Aboard\"]\ncrashes.head()","6775f322":"data_nobs = len(crashes[\"Survival Rate\"])\ndata_mean = crashes[\"Survival Rate\"].mean()\ndata_min = crashes[\"Survival Rate\"].min()\ndata_max = crashes[\"Survival Rate\"].max()\ndata_var = crashes[\"Survival Rate\"].var()\ndata_skew = crashes[\"Survival Rate\"].skew()\ndata_kurtosis = crashes[\"Survival Rate\"].kurtosis()\n\nprint(\"Survival Rate Stats:\")\nprint(\"Nobs: {}\".format(round(data_nobs,2)))\nprint(\"Mean: {}\".format(round(data_mean,2)))\nprint(\"Min: {}\".format(round(data_min,2)))\nprint(\"Max: {}\".format(round(data_max,2)))\nprint(\"Variance: {}\".format(round(data_var,2)))\nprint(\"Skewness: {}\".format(round(data_skew,2)))\nprint(\"Kurtosis: {}\".format(round(data_kurtosis,2)))\n","5d005b65":"yearly_survival = crashes[[\"Date\",\"Survival Rate\"]].groupby(crashes[\"Date\"].dt.year).agg([\"mean\"])\nyearly_survival.plot(legend=None)\nplt.ylabel(\"Average Survival Rate, %\")\nplt.xlabel(\"Year\")\nplt.title(\"Average Survival Rate per Year\")\nplt.xticks([x for x in range(1908,2009,10)], rotation='vertical')\nplt.axhline(y=data_mean, color='r', linestyle='-')\nplt.show()","a2407d0f":"airlines.incidents_85_99.hist(label=\"1985 - 1999\", alpha = 0.5)\nairlines.incidents_00_14.hist(label=\"2000 - 2015\", alpha = 0.5)\nplt.legend(loc=\"upper right\")\nplt.xlabel(\"Accidents per Airline\")\nplt.ylabel(\"Frequency\")\nplt.title(\"Histogram of Accidents per Airline\")\nplt.show()","a86a3995":"#1985 - 1999: Accidents\ndata = airlines.incidents_85_99\ndata_nobs = len(data)\ndata_mean = data.mean()\ndata_min = data.min()\ndata_max = data.max()\ndata_var = data.var()\ndata_skew = data.skew()\ndata_kurtosis = data.kurtosis()\n\nprint(\"1985 - 1999 Accidents Stats:\")\nprint(\"Nobs: {}\".format(round(data_nobs,2)))\nprint(\"Mean: {}\".format(round(data_mean,2)))\nprint(\"Min: {}\".format(round(data_min,2)))\nprint(\"Max: {}\".format(round(data_max,2)))\nprint(\"Variance: {}\".format(round(data_var,2)))\nprint(\"Skewness: {}\".format(round(data_skew,2)))\nprint(\"Kurtosis: {}\".format(round(data_kurtosis,2)))\n","af7934be":"#2000 - 2014: Accidents\ndata = airlines.incidents_00_14\ndata_nobs = len(data)\ndata_mean = data.mean()\ndata_min = data.min()\ndata_max = data.max()\ndata_var = data.var()\ndata_skew = data.skew()\ndata_kurtosis = data.kurtosis()\n\nprint(\"2000 - 2014 Accidents Stats:\")\nprint(\"Nobs: {}\".format(round(data_nobs,2)))\nprint(\"Mean: {}\".format(round(data_mean,2)))\nprint(\"Min: {}\".format(round(data_min,2)))\nprint(\"Max: {}\".format(round(data_max,2)))\nprint(\"Variance: {}\".format(round(data_var,2)))\nprint(\"Skewness: {}\".format(round(data_skew,2)))\nprint(\"Kurtosis: {}\".format(round(data_kurtosis,2)))","1cb82ab4":"t_stat, p_val = stats.wilcoxon(airlines.incidents_85_99, airlines.incidents_00_14)\nprint(\"t-stat: {}. p-val: {}.\".format(round(t_stat,3),round(p_val,3)))","f3efef92":"airlines.fatalities_85_99.hist(label=\"1985 - 1999\", alpha = 0.5)\nairlines.fatalities_00_14.hist(label=\"2000 - 2015\", alpha = 0.5)\nplt.legend(loc=\"upper right\")\nplt.xlabel(\"Fatalities per Airline\")\nplt.ylabel(\"Frequency\")\nplt.title(\"Histogram of Fatalities per Airline\")\nplt.show()","4a3c0038":"#1985 - 1999: Fatalities\ndata = airlines.fatalities_85_99\ndata_nobs = len(data)\ndata_mean = data.mean()\ndata_min = data.min()\ndata_max = data.max()\ndata_var = data.var()\ndata_skew = data.skew()\ndata_kurtosis = data.kurtosis()\n\nprint(\"1985 - 1999 Fatalities Stats:\")\nprint(\"Nobs: {}\".format(round(data_nobs,2)))\nprint(\"Mean: {}\".format(round(data_mean,2)))\nprint(\"Min: {}\".format(round(data_min,2)))\nprint(\"Max: {}\".format(round(data_max,2)))\nprint(\"Variance: {}\".format(round(data_var,2)))\nprint(\"Skewness: {}\".format(round(data_skew,2)))\nprint(\"Kurtosis: {}\".format(round(data_kurtosis,2)))\n","9c5fe191":"#2000 - 2014: Fatalities\ndata = airlines.fatalities_00_14\ndata_nobs = len(data)\ndata_mean = data.mean()\ndata_min = data.min()\ndata_max = data.max()\ndata_var = data.var()\ndata_skew = data.skew()\ndata_kurtosis = data.kurtosis()\n\nprint(\"2000 - 2014 Fatalities Stats:\")\nprint(\"Nobs: {}\".format(round(data_nobs,2)))\nprint(\"Mean: {}\".format(round(data_mean,2)))\nprint(\"Min: {}\".format(round(data_min,2)))\nprint(\"Max: {}\".format(round(data_max,2)))\nprint(\"Variance: {}\".format(round(data_var,2)))\nprint(\"Skewness: {}\".format(round(data_skew,2)))\nprint(\"Kurtosis: {}\".format(round(data_kurtosis,2)))","c6d4a7a6":"t_stat, p_val = stats.wilcoxon(airlines.fatalities_85_99, airlines.fatalities_00_14)\nprint(\"t-stat: {}. p-val: {}.\".format(round(t_stat,3),round(p_val,3)))","a02e1e62":"airlines.fatal_accidents_85_99.hist(label=\"1985 - 1999\", alpha = 0.5)\nairlines.fatal_accidents_00_14.hist(label=\"2000 - 2015\", alpha = 0.5)\nplt.legend(loc=\"upper right\")\nplt.xlabel(\"Fatal Accidents per Airline\")\nplt.ylabel(\"Frequency\")\nplt.title(\"Histogram of Fatal Accidents per Airline\")\nplt.show()","7b3cba12":"#1985 - 1999: Fatal Accidents\ndata = airlines.fatal_accidents_85_99\ndata_nobs = len(data)\ndata_mean = data.mean()\ndata_min = data.min()\ndata_max = data.max()\ndata_var = data.var()\ndata_skew = data.skew()\ndata_kurtosis = data.kurtosis()\n\nprint(\"1985 - 1999 Fatal Accidents Stats:\")\nprint(\"Nobs: {}\".format(round(data_nobs,2)))\nprint(\"Mean: {}\".format(round(data_mean,2)))\nprint(\"Min: {}\".format(round(data_min,2)))\nprint(\"Max: {}\".format(round(data_max,2)))\nprint(\"Variance: {}\".format(round(data_var,2)))\nprint(\"Skewness: {}\".format(round(data_skew,2)))\nprint(\"Kurtosis: {}\".format(round(data_kurtosis,2)))\n","5e2bacf8":"#2000 - 2014: Fatal Accidents\ndata = airlines.fatal_accidents_00_14\ndata_nobs = len(data)\ndata_mean = data.mean()\ndata_min = data.min()\ndata_max = data.max()\ndata_var = data.var()\ndata_skew = data.skew()\ndata_kurtosis = data.kurtosis()\n\nprint(\"2000 - 2014 Fatal Accidents Stats:\")\nprint(\"Nobs: {}\".format(round(data_nobs,2)))\nprint(\"Mean: {}\".format(round(data_mean,2)))\nprint(\"Min: {}\".format(round(data_min,2)))\nprint(\"Max: {}\".format(round(data_max,2)))\nprint(\"Variance: {}\".format(round(data_var,2)))\nprint(\"Skewness: {}\".format(round(data_skew,2)))\nprint(\"Kurtosis: {}\".format(round(data_kurtosis,2)))\n","27fb04ca":"t_stat, p_val = stats.wilcoxon(airlines.fatal_accidents_85_99, airlines.fatal_accidents_00_14)\nprint(\"t-stat: {}. p-val: {}.\".format(round(t_stat,3),round(p_val,3)))","b75f5813":"airlines[\"total_incidents\"] = airlines[\"incidents_85_99\"] + airlines[\"incidents_00_14\"]\nairlines[\"total_fatal_accidents\"] = airlines[\"fatal_accidents_85_99\"] + airlines[\"fatal_accidents_00_14\"]\nairlines[\"total_fatalities\"] = airlines[\"fatalities_85_99\"] + airlines[\"fatalities_00_14\"]","6959fdcd":"del airlines[\"incidents_85_99\"]\ndel airlines[\"incidents_00_14\"]\ndel airlines[\"fatal_accidents_85_99\"]\ndel airlines[\"fatal_accidents_00_14\"]\ndel airlines[\"fatalities_85_99\"]\ndel airlines[\"fatalities_00_14\"]","9c945987":"airlines[\"norm_total_incidents\"] = airlines[\"total_incidents\"] \/ airlines[\"avail_seat_km_per_week\"] * 1000000\nairlines[\"norm_total_fatal_accidents\"] = airlines[\"total_fatal_accidents\"] \/ airlines[\"avail_seat_km_per_week\"] * 1000000\nairlines[\"norm_total_fatalities\"] = airlines[\"total_fatalities\"] \/ airlines[\"avail_seat_km_per_week\"] * 1000000","77149b50":"del airlines[\"total_incidents\"]\ndel airlines[\"total_fatal_accidents\"]\ndel airlines[\"total_fatalities\"]","9c5f833a":"#Normalized Accidents\ndata = airlines[[\"airline\",\"norm_total_incidents\"]]\ndata = data.sort_values(by=\"norm_total_incidents\", ascending=False).head()\ndata.set_index(\"airline\", inplace=True)\ndata.norm_total_incidents.plot(kind=\"bar\")\nplt.title(\"Airlines with Most Normalized Accidents\")\nplt.xlabel(\"Airline\")\nplt.ylabel(\"Normalized Accidents\")\nplt.show()","46e5461d":"#Normalized Fatal Accidents\ndata = airlines[[\"airline\",\"norm_total_fatal_accidents\"]]\ndata = data.sort_values(by=\"norm_total_fatal_accidents\", ascending=False).head()\ndata.set_index(\"airline\", inplace=True)\ndata.norm_total_fatal_accidents.plot(kind=\"bar\")\nplt.title(\"Airlines with Most Normalized Fatal Accidents\")\nplt.xlabel(\"Airline\")\nplt.ylabel(\"Normalized Fatal Accidents\")\nplt.show()","3d28b497":"#Normalized Fatalities\ndata = airlines[[\"airline\",\"norm_total_fatalities\"]]\ndata = data.sort_values(by=\"norm_total_fatalities\", ascending=False).head()\ndata.set_index(\"airline\", inplace=True)\ndata.norm_total_fatalities.plot(kind=\"bar\")\nplt.title(\"Airlines with Most Normalized Fatalities\")\nplt.xlabel(\"Airline\")\nplt.ylabel(\"Normalized Fatalities\")\nplt.show()","740b068b":"Just by taking a quick look at the previous cells, we can already see that the average number of accidents is greater in our first group. If we would like to know if the difference between the average number of accidents between the two groups is actually significant, we should perform a t-test. Now that we know the kurtosis and skewness values for both groups, we can confirm that the data is not normally distributed. Based on the distribution of the data and the relationship between the groups, we should perform a **Wilcoxon test**.","e3f77fdc":"Now that we're done exploring and cleaning our first dataset, let's do the same for the second one.","371d512a":"We should normalize our data to take into account the capacity of airplanes and the number of kilometers flown by each airline. The results would be very small values, so I decided to rescale the data by multiplying the normalized values times 1,000,000.","f2a1f367":"## **2.- Are airplanes safer than they were before?**","c992f6de":"**2000 - 2014: Fatalities**","62b740e3":"### **Dataset #2**","bf6df384":"Based on normality and the relationship between the data of the two groups, I have determined that an adequate t-test would be the following: **Wilcoxon Test**","8650e6bb":"From the previous cell we can see that our t-stat value is 87, which is greater than the 1.96 threshold. This indicates that there is enough evidence to reject the null-hypothesis, therefore the difference between the two groups has statistical significance.","97422fa6":"### **Dataset #1**","4579a8a2":"## **1.- What is the survival rate of airplane crashes?**","da82a764":"**Title:** *Airline Safety*\n\n**URL:** *https:\/\/github.com\/fivethirtyeight\/data\/blob\/master\/airline-safety\/airline-safety.csv*\n\n**Description:** T*his dataset will be used to complement the Airplane Crashes Since 1908. The data ranges from 1985 to 2014. It contains data about accidents and fatalities by airline just like the first dataset, but it also contains data about ASKS (available seat kilometers) which will help us normalize the number of accidents to the number of seats and kilometers traveled every week by each airline.*\n\n**Rows:** *56*\n\n**Columns:** *8*\n","476ce9ab":"From the three plots above, we can draw the following conclusions:\n* Aeroflot is the airline with the most normalized accidents\n* Pakistan International is the airline with the most normalized fatal accidents\n* Kenya Airways is the airline with the most normalized fatalities","75827634":"Finally, we repeat the previous procedure using the fatal accidents data. Once again, we proceed to visually determine normality of our data by using a histogram.","3c11ebe0":"Next, we should convert our *\"Date\"* column to datetime for the sake of organization and easier manipulation of our dataframes.","f33d43fc":"The data for both groups seems to be right-skewed and non-normally distributed. It is a good practice to confirm this by using descriptive statistics.","9fd3e51b":"**1985 - 1999: Accidents**","684ad913":"Let's start by grouping all the incidents and all the fatalities regardless of the time period in which they happened.","e98a9e85":"## **Datasets Overview**","95f8a157":"Let's plot a histogram for each group and visually check for normality.","3badcf66":"## **3.- What airline should we avoid to decrease the likelihood of being in an accident?**","10ef467c":"Once again, our histogram looks like it is non-normally distributed. We can confirm this by taking a look at the statistics of both groups.","7a0b44ee":"To begin, we need to import the following libraries:\n* **Numpy**\n    * Linear algebra\n* **Pandas**\n    * Data processing\n* **Matplotlib**\n    * Basic data visualization\n* **Scipy**\n    * Scientific package with useful statistical tools\n* **OS**\n    * Operating system library for directory exploration and file manipulation","b53f7f7d":"Let's repeat the previous procedure using the fatalities data of each group. We start by assessing normality in a visual way.","608b33b1":"Finally, let's take a look at the resulting dataframe.","f44a4679":"From the previous cells, we can see that the average survival rate of plane crashes is **16.57%**. It is important to mention that **Dataset #1** contains information about commercial, private, and military plane crashes. Additionally, the data ranges from 1908 to 2008, so older data could decrease the survival rate average.","5fa38d9a":"From the previous cell we can see that our t-stat value is 258, which is greater than the 1.96 threshold. This indicates that there is enough evidence to reject the null-hypothesis, therefore the difference between the two groups has statistical significance.","536fa0cc":"Let's start our exploratory data analysis by taking a quick look at our first dataset and trying to determine if this data will help us answer our hypothesis questions.","e6431bf6":"**1985 - 1999: Fatal Accidents**","3008fab2":"**2000 - 2014: Fatal Accidents**","8d706962":"From the previous cells, we can see that there are more columns that we actually need for this project. Additionally, we can see that several columns have a high percentage of missing values. The columns with many missing values and\/or irrelevant to this project are: \n\n* **Time** - High percentage of missing values\n* **Flight #** - High percentage of missing values\n* **Route** - High percentage of missing values\n* **Registration** - High percentage of missing values\n* **cn\/In** - High percentage of missing values\n* **Ground** - Irrelevant to this project\n* **Summary** - High percentage of missing values, but relevant to this project\n\n*Note: The \"Summary\" column has a relatively high percentage of missing values (7.40%), but I will keep this column as it will provide some valuable insights that we could use as a reference.*","8bddfe16":"# **The Statistics of Airplane Accidents**\n\nThere is a significant amount of people that are afraid of flying. However, data suggests that airplanes are one of the safest means of transportation, even safer than riding a car. For this first capstone project I\u2019ll explore 2 datasets that contain plane crashes data from 1908 to try to determine how safe or unsafe flying really is and how to maximize your chances of not being involved in an airplane crash by avoiding specific flying conditions and aircraft operators. \n\nFor my hypothesis, I\u2019ll try to answer the following questions:\n1. What is the survival rate of airplane crashes?\n2. Are airplanes safer than they were before? \n3. What airlines should we avoid to decrease the likelihood of being in an accident? ","4080bfbb":"Let's take a look at some basic statistics of the *Survival Rate* and then let's try to visualize how the mean survival rate has changed over the years.","c951a4e0":"In this section we will take a look at what airlines are the worst to fly with in terms of fatalities and accidents. We will be using **Dataset #2** because its data is already grouped by airlines and because its *\"avail_seat_km_per_week\"* column is a great way to normalize the data to avoid penalizing those airlines that have bigger planes or that fly more.","7b1a510a":"From the previous cell we can see that our t-stat value is 258.5, which is greater than the 1.96 threshold. This indicates that there is enough evidence to reject the null-hypothesis, therefore the difference between the two groups has statistical significance.","757684a7":"**1985 - 1999: Fatalities**","15e9f6c6":"Now let's take a look at the percentage of null values per column.","08d8bd2d":"Now we can get rid of the ungrouped data by deleting such columns.","e3b140fa":"As we can see from the previous cells, this dataset doesn't have any missing values. Let's now try to answer our first question.","0305e0df":"## **EDA and Data Cleaning**","c19c9df6":"**2000 - 2014: Accidents**","209b244e":"As technology advances, we could expect airplanes to be safer than they were before. In this section of the project we will use **Dataset #2** to take a look at how airplanes safety has changed and try to determine whether or not it has improved. The data has already been split into two similar groups: **1985-1999** and **2000-2014**. We will compare the data between those two groups and perform a t-test to determine whether or not there is a significant difference between the groups.","f5786232":"Most of the remaining columns are missing a relatively small percentage of values. To prevent such null values from influencing the results of this project, I have decided to get rid of all the rows with null values. Please take into consideration that I'm only doing this because we have plenty of additional data in this dataset.","b7ba5e3a":"The data is non-normally distributed and there is a relationship between the two groups, which indicates us that once again the best t-test to perform on these two groups is the **Wilcoxon Test**.","a922e773":"There are different ways in which we could attempt to answer this question. We could start by using our first dataset and substract the *\"Aboard\"* column minus the *\"Fatalities\"* column and that will give us the number of survivors for each accident. We then proceed to divide the number of survivors by the *\"Aboard\"* column and then multiply that by 100 to get the survival rate as a percentage. We will store the survival rate in a new column called *\"Survival Rate\"*.","b8351cc6":"Let's delete all the data that is not normalized.","72844072":"**Title:** *Airplane Crashes Since 1908*\n\n**URL:** *https:\/\/www.kaggle.com\/saurograndi\/airplane-crashes-since-1908*\n\n**Description:** *This data set contains the full history of plane crashes around the world from 1908 to 2009. It has 13 different columns of data, but only 7 are relevant to this project.*\n\n**Rows:** *5268*\n\n**Columns:** *13*","c0422343":"From the previous histogram, it is obvious that the data is not distributed normally. We should confirm that the data is not normal by taking a look at the kurtosis and skewness values. Let's take a quick look at some basic statistics of the accidents (incidents) of the two groups.","74ab8c61":"We now proceed to delete the previously mentioned columns.","f4ba631b":"Now that we have organized and normalized our data, let's take a look at some interesting visualizations."}}