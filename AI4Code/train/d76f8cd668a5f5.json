{"cell_type":{"ac4c4565":"code","3912a215":"code","772338e8":"code","aacf1d3f":"code","7e5ddd47":"code","93ea8061":"code","5504b9bf":"code","dfc6987e":"code","705db10f":"code","9091975c":"code","2824f9fa":"code","8ffdb079":"code","6e5f114b":"code","dc42663c":"code","31012e2a":"code","fa79442f":"code","854ac9d4":"markdown","09a7af69":"markdown","25207f40":"markdown","873f4e03":"markdown","6b54131d":"markdown"},"source":{"ac4c4565":"import pandas as pd\nimport numpy as np\nimport plotly.offline as plo\nimport plotly.graph_objs as go\nimport matplotlib.pyplot as plt\nfrom fbprophet import Prophet","3912a215":"import os\nfor dirname, _, filenames in os.walk('\/kaggle\/input'):\n    for filename in filenames:\n        print(os.path.join(dirname, filename))","772338e8":"df = pd.read_excel('\/kaggle\/input\/foreign-exchange-rates-per-dollar-20002019\/Foreign_Exchange_Rates.xlsx', index_col='Time Serie')\ndf.index = pd.to_datetime(df.index, format=\"%Y-%m-%d\")\n#df.drop(columns={'Unnamed: 0'}, axis=1, inplace=True)\ndf.columns = [i.split('-')[1].strip().split('\/')[0].lower() for i in df.columns]\ndf.head()","aacf1d3f":"temp = df.iloc[[-1],:]\ndata = [go.Bar(\n    x = temp[colname],\n    y = temp.index,\n    name = colname,\n    orientation = 'h'\n)for colname in temp.columns]\n\nlayout = go.Layout(\n    title = \"Exchange rates\",\n    template = 'plotly_dark'\n)\n\nfig = go.Figure(data=data,layout=layout)\nplo.iplot(fig)","7e5ddd47":"def curr_graph(currency):\n    temp = df.loc[:,[currency]]\n    data = go.Scatter(\n        x = temp.index,\n        y = temp[currency],\n        mode = 'lines',\n        marker = dict(color='blue'),\n        name = currency\n    )\n\n    layout = go.Layout(\n        title = '{0}\/us$'.format(currency),\n        template = 'plotly_dark'\n    )\n    fig = go.Figure(data=data,layout=layout)\n    plo.iplot(fig)","93ea8061":"# Selecting those currency whose exchange rate is > 71 in the present day\nselect_currency = ['sri lankan rupee', 'yen', 'won', 'indian rupee']\nfor currency in select_currency:\n    curr_graph(currency)","5504b9bf":"select_currency = ['sri lankan rupee', 'yen', 'indian rupee']\ntemp = df.loc[:,select_currency]\ndata = [go.Scatter(\n    x = temp.index,\n    y = temp[currency],\n    mode = 'lines',\n    name = currency\n)for currency in select_currency]\n\nlayout = go.Layout(\n    title = '{0}\/us$'.format(currency),\n    template = 'plotly_dark'\n)\nfig = go.Figure(data=data,layout=layout)\nplo.iplot(fig)","dfc6987e":"data = df.loc['2015-01-02':,['indian rupee']]\ndata = data.replace('ND',np.nan)\ndata = data.bfill().reset_index()\ndata = data.rename(columns={\n    'Time Serie' : 'ds',\n    'indian rupee' : 'y'\n})\ndata","705db10f":"training_data = data[data['ds']<='2018-12-31']\ntesting_data = data[data['ds']>='2019-01-01']","9091975c":"testing_data","2824f9fa":"prophet = Prophet()\nprophet.fit(training_data)","8ffdb079":"future_dates = prophet.make_future_dataframe(periods=365,freq='D', include_history=False)","6e5f114b":"prediction = prophet.predict(future_dates)","dc42663c":"pre_data = df.loc['2015-01-02':,['indian rupee']].replace('ND',np.nan).bfill()\npre_data['indian rupee'] = pre_data['indian rupee'].apply(lambda x: float(x))\nfig,axes = plt.subplots(figsize=(20,8))\nplt.plot(pre_data.index,pre_data.values,axes=axes,color='red')\nprophet.plot(prediction, ax=axes)\nplt.show()","31012e2a":"temp = prediction[['ds','yhat']].rename(columns={\n    'yhat' : 'y'\n})","fa79442f":"MAPE = (abs(testing_data.set_index('ds')-temp.set_index('ds'))\/testing_data.set_index('ds')).mean() *100\nprint(\"MAPE =\",round(float(MAPE.values),3))","854ac9d4":"## Forecasting INR","09a7af69":"# Data Visualization","25207f40":"Hence, the MAPE calculated is < 10%, which is good.","873f4e03":"# Data Gathering and Preprocessing","6b54131d":"# Importing Libraries"}}