{"cell_type":{"e4fab228":"code","0baf5b55":"code","cfb39446":"code","528b9d27":"code","40a1b2b0":"code","612b4e69":"code","881f0382":"code","b210a4c2":"code","0f352c1a":"code","de18cce7":"code","16429f83":"code","30b5168d":"code","9516a28d":"code","b046bec0":"code","7dde97ea":"code","78b0506f":"code","cbf04f30":"code","2898ad6a":"code","d4963642":"code","536ad768":"code","588c3cc4":"code","4ed10e65":"code","b1b313e6":"code","d4fcef73":"code","a15fd3e3":"markdown","591919fc":"markdown","ce3fb664":"markdown","3aeb11c4":"markdown","b6706231":"markdown","2eae43d4":"markdown","be72d97b":"markdown","bec06e68":"markdown","ac6aa69e":"markdown","9742b015":"markdown","bf5ad035":"markdown","05746355":"markdown","3f495567":"markdown","cbfa9999":"markdown","a1876490":"markdown","950358f2":"markdown","adbeea27":"markdown","d2d35162":"markdown","ac8a61ba":"markdown","4d021853":"markdown","52f3c805":"markdown"},"source":{"e4fab228":"import numpy as np\nimport pandas as pd\nimport matplotlib.pyplot as plt\nimport seaborn as sns\nfrom sklearn.model_selection import train_test_split\nfrom sklearn.metrics import confusion_matrix,classification_report,accuracy_score\nimport xgboost as xgb\nfrom xgboost import plot_tree","0baf5b55":"df=pd.read_csv('..\/input\/employee-future-prediction\/Employee.csv')","cfb39446":"df","528b9d27":"plt.figure(figsize=(10,10))\nsns.set_style('darkgrid')\nsns.countplot(df['Gender'],hue='LeaveOrNot',data=df,palette='prism')\nplt.title('It can be seen that more percentage of \\n women usually leave their jobs more than men')\nplt.show()","40a1b2b0":"plt.figure(figsize=(10,10))\nsns.set_style('darkgrid')\nsns.countplot(df['Education'],hue='LeaveOrNot',data=df,palette='prism')\nplt.title('It can be seen that people who have a masters \\n are more prone to leave their jobs as compared to people with bachelors or PhD')\nplt.show()","612b4e69":"plt.figure(figsize=(10,10))\nsns.set_style('darkgrid')\nsns.countplot(df['JoiningYear'],hue='LeaveOrNot',data=df,palette='prism')\nplt.title('People who joined in 2018, almost all of them left their companies.')\nplt.show()","881f0382":"plt.figure(figsize=(10,10))\nsns.set_style('darkgrid')\nsns.countplot(df['ExperienceInCurrentDomain'],hue='LeaveOrNot',data=df,palette='prism')\nplt.title('People with 2 years of experience are more prone to leave any company while\\n people with >5 years experience hardly leave their companies.')\nplt.show()","b210a4c2":"plt.figure(figsize=(10,10))\nsns.set_style('darkgrid')\nsns.countplot(df['Age'],hue='LeaveOrNot',data=df,palette='prism')\nplt.title('People between the ages 24 to 30 are the ones who leave the most. \\n Maybe because they get better opportunities :D')\nplt.show()","0f352c1a":"print(df['Education'].value_counts())\n\ntemp=df['Education']\ndf['Bachelors']=(temp=='Bachelors')*1\ndf['Masters']=(temp=='Masters')*1\ndf['PHD']=(temp=='PHD')*1\ndf=df.drop('Education',axis=1)\ndf","de18cce7":"df['City'].value_counts()","16429f83":"temp=df['City']\ndf['Bangalore']=(temp=='Bangalore')*1\ndf['Pune']=(temp=='Pune')*1\ndf['New Delhi']=(temp=='New Delhi')*1\ndf=df.drop('City',axis=1)\ndf","30b5168d":"df['EverBenched']=(df['EverBenched']=='Yes')*1\ndf","9516a28d":"df['Gender']=(df['Gender']=='Male')*1\ndf","b046bec0":"df.dtypes","7dde97ea":"df.columns","78b0506f":"#train test split\n\ntraining_features=['JoiningYear', 'PaymentTier', 'Age', 'Gender', 'EverBenched',\n       'ExperienceInCurrentDomain', 'Bachelors', 'Masters',\n       'PHD', 'Bangalore', 'Pune', 'New Delhi']\n\ntarget=['LeaveOrNot']\n\nX_train, X_test, Y_train, Y_test= train_test_split(df[training_features],df[target],test_size=0.2,\n                                                  random_state=1729)","cbf04f30":"print(X_train.shape, Y_train.shape)\nprint(X_test.shape, Y_test.shape)","2898ad6a":"model=xgb.XGBClassifier(base_score=0.5, booster='gbtree', colsample_bylevel=1,\n              colsample_bynode=1, colsample_bytree=1, enable_categorical=False,\n              gamma=0, gpu_id=1, importance_type=None,\n              interaction_constraints='', learning_rate=0.300000012,\n              max_delta_step=0, max_depth=4, min_child_weight=1,\n              monotone_constraints='()', n_estimators=100, n_jobs=1,\n              num_parallel_tree=1, predictor='auto', random_state=0,\n              reg_alpha=0, reg_lambda=1, scale_pos_weight=1, subsample=1,\n              tree_method='exact', validate_parameters=1, verbosity=None)","d4963642":"model.fit(X_train,Y_train)","536ad768":"fig, ax = plt.subplots(figsize=(50, 30))\nxgb.plot_tree(model, num_trees=10, ax=ax)\nplt.show()","588c3cc4":"Y_pred=model.predict(X_test)","4ed10e65":"plt.figure(figsize=(10,8))\nsns.heatmap(confusion_matrix(Y_test,Y_pred),annot=True,fmt='d',cmap='Blues')\nplt.show()","b1b313e6":"print(classification_report(Y_test,Y_pred))","d4fcef73":"print(accuracy_score(Y_test,Y_pred))","a15fd3e3":"# 5. Create train-test split","591919fc":"## Let's visualize the tree","ce3fb664":"# 3. Plots and exploratory data analysis\n","3aeb11c4":"## The goal here is to numeralize every possible column in a meaningful way, since lot of data is in discreet form.","b6706231":"## 4.1 One hot encode education column","2eae43d4":"# 4. Pre-process the data","be72d97b":"## 3.2 Now let's see how education is related with an employee leaving the company","bec06e68":"## 4.3 One hot encode EverBenched field","ac6aa69e":"## Now since every discreet variable has been converted in continous fields let's check the data types","9742b015":"## 4.2 One hot encode City field","bf5ad035":"## 3.5 Now finally let's see if age has to do anything with a person leaving their companies.","05746355":"## 3.4 Let's see if current domain experience has anything to do with a person leaving a company.","3f495567":"# 1. Import required libraries","cbfa9999":"## 4.4 One hot encode Gender field","a1876490":"# 7. Predict on test set and metrics","950358f2":"# 2. Read the data","adbeea27":"## Good to go!","d2d35162":"# 6. Build XGBoost model and train","ac8a61ba":"# Upvote if you found this useful!","4d021853":"## 3.1 Let's first see if a employee leaving a company has anything major to do with the gender of an employee","52f3c805":"## 3.3 Let's see if joining year has to do anything with people leaving a company"}}