{"cell_type":{"f532d865":"code","c57ebbb5":"code","8f591e4a":"code","612bada0":"code","4446a3ac":"code","36735e05":"code","641cad45":"code","0f88a95a":"code","317ab4d0":"code","c0156e72":"code","a567ad0b":"code","af2f146b":"markdown","4d99a422":"markdown"},"source":{"f532d865":"import pandas as pd\nimport numpy as np\nimport matplotlib.pyplot as plt\nfrom statistics import median\n\npd.options.mode.chained_assignment = None  # default='warn'","c57ebbb5":"df = pd.read_csv('..\/input\/online-unfair-casino\/onlineCasino.csv')\ndf","8f591e4a":"# Let's check whole betted money\nplt.plot(np.arange(len(df['money'])), df['money'])\nplt.xlabel('Games')\nplt.ylabel('Whole money in bet for the game (USD)')\nplt.show()","612bada0":"# Let's check games with moderators and without\nmoder = df.moderator[df.moderator==True].count()\nnomoder = df.moderator[df.moderator==False].count()\n\nmoder_per = moder\/(moder + nomoder)*100\nnomoder_per = nomoder\/(moder + nomoder)*100\n\nfig = plt.figure()\ncolors1 = ['tab:blue', 'tab:pink']\nmylabels = [\"With\", \"Without\"]\nplt.pie([moder_per,nomoder_per], \n       pctdistance = 1.2, \n       autopct = '% .1f',\n       shadow = True,\n       textprops = {'color' : 'k', 'fontsize' : '12', 'ha' : 'center'},\n       colors = colors1)\nplt.legend(mylabels)\nfig.suptitle('Percent of games w and w\/o moderators', fontsize=20)\nplt.show()\n","4446a3ac":"# Okay, now we want to see usual bet with and without moderators\nmoney_mod = df['money'][df['moderator']==True].mean()\nmoney_nomod = df['money'][df['moderator']==False].mean()\n\nx = np.arange(2)\nplt.bar(x, height=[money_mod, money_nomod], color=['red', 'blue'])\nplt.xticks(x, ['With','Without'])\nplt.title(\"Mean amount of money in bet with and without moderators\")\nplt.show()","36735e05":"# Now let's see games only without moderators\nplt.plot(np.arange(len(df['money'][df['moderator']==False])), df['money'][df['moderator']==False])\nplt.xlabel('Games')\nplt.ylabel('Whole money in bet for the game')\nplt.show()","641cad45":"# Let's check how much casino earned to 50.000 games\ndf['Earned'] = df['money'][df['moderator']==False] - df['outpay'][df['moderator']==False]\nplt.plot(np.arange(len(df['Earned'])), df['Earned'].cumsum())\nplt.xlabel('Games')\nplt.ylabel('Earnings of casino (USD)')\nplt.show()","0f88a95a":"# Divide ticks to colors (cat) (0,1,2,3,4,5)\ndf['color'] = 0\nfor i in range(0, len(df['time'])):\n    if df['ticks'][i] < 1.2: # Casino earn a lot\n        df['color'][i] = 0\n    elif df['ticks'][i] < 2: # Casino earn a bit\n        df['color'][i] = 1\n    elif df['ticks'][i] < 4: # 50\/50\n        df['color'][i] = 2\n    elif df['ticks'][i] < 8: # Casino lose a bit\n        df['color'][i] = 3\n    elif df['ticks'][i] < 25: # Casino lose a lot\n        df['color'][i] = 4\n    else:                     # All people win\n        df['color'][i] = 5","317ab4d0":"zero = df.color[df.color==0].count()\none = df.color[df.color==1].count()\ntwo = df.color[df.color==2].count()\nthree = df.color[df.color==3].count()\nfour = df.color[df.color==4].count()\nfive = df.color[df.color==5].count()\n\nzero_per = zero\/(zero + one + two + three + four + five)*100\none_per = one\/(zero + one + two + three + four + five)*100\ntwo_per = two\/(zero + one + two + three + four + five)*100\nthree_per = three\/(zero + one + two + three + four + five)*100\nfour_per = four\/(zero + one + two + three + four + five)*100\nfive_per = five\/(zero + one + two + three + four + five)*100\n\nfig = plt.figure()\ncolors1 = ['tab:red', 'tab:purple','tab:pink','tab:green','tab:orange', 'tab:blue']\nmylabels = [\"<1.2\", \"<2\", \"<4\", \"<8\", \"<25\", \">=25\"]\nplt.pie([zero_per, one_per, two_per, three_per, four_per, five_per], \n       pctdistance = 1.2, \n       autopct = '% .1f',\n       shadow = True,\n       textprops = {'color' : 'k', 'fontsize' : '12', 'ha' : 'center'},\n       colors = colors1)\nplt.legend(mylabels, loc='upper center')\nfig.suptitle('Probability of color for the game', fontsize=20)\nplt.show()","c0156e72":"# Let's check the time of the games\nnamask = df['time'].isna()\ndf['HH'] = 0\n\nfor i in range(0,len(df['time'])):\n    if namask[i]:\n        df['time'][i] = df['time'][i-1]\n    df['HH'][i] = df['time'].values[i][11:-3]","a567ad0b":"time1 = 13\ntime2 = 23\n\nzero = (df.color[df.color==0])[df.HH == time1].count()\none = (df.color[df.color==1])[df.HH == time1].count()\ntwo = (df.color[df.color==2])[df.HH == time1].count()\nthree = (df.color[df.color==3])[df.HH == time1].count()\nfour = (df.color[df.color==4])[df.HH == time1].count()\nfive = (df.color[df.color==5])[df.HH == time1].count()\n\nzero_per = zero\/(zero + one + two + three + four + five)*100\none_per = one\/(zero + one + two + three + four + five)*100\ntwo_per = two\/(zero + one + two + three + four + five)*100\nthree_per = three\/(zero + one + two + three + four + five)*100\nfour_per = four\/(zero + one + two + three + four + five)*100\nfive_per = five\/(zero + one + two + three + four + five)*100\n\n\nfig, (ax1, ax2) = plt.subplots(1, 2, figsize = (10,8))\nfig.tight_layout()\nfig.suptitle(\"Probability of color for the game\", fontsize = 24, y = 0.9)\n\ncolors1 = ['tab:red', 'tab:purple','tab:pink','tab:green','tab:orange', 'tab:blue']\nmylabels = [\"<1.2\", \"<2\", \"<4\", \"<8\", \"<25\", \">=25\"]\nax1.pie([zero_per, one_per, two_per, three_per, four_per, five_per], \n       pctdistance = 1.2, \n       autopct = '% .1f',\n       shadow = True,\n       textprops = {'color' : 'k', 'fontsize' : '12', 'ha' : 'center'},\n       colors = colors1)\nax1.legend(mylabels, loc='upper center')\nax1.set_title('13:00', fontsize = 18)\n\n\nzero = (df.color[df.color==0])[df.HH == time2].count()\none = (df.color[df.color==1])[df.HH == time2].count()\ntwo = (df.color[df.color==2])[df.HH == time2].count()\nthree = (df.color[df.color==3])[df.HH == time2].count()\nfour = (df.color[df.color==4])[df.HH == time2].count()\nfive = (df.color[df.color==5])[df.HH == time2].count()\n\nzero_per = zero\/(zero + one + two + three + four + five)*100\none_per = one\/(zero + one + two + three + four + five)*100\ntwo_per = two\/(zero + one + two + three + four + five)*100\nthree_per = three\/(zero + one + two + three + four + five)*100\nfour_per = four\/(zero + one + two + three + four + five)*100\nfive_per = five\/(zero + one + two + three + four + five)*100\n\ncolors1 = ['tab:red', 'tab:purple','tab:pink','tab:green','tab:orange', 'tab:blue']\nmylabels = [\"<1.2\", \"<2\", \"<4\", \"<8\", \"<25\", \">=25\"]\nax2.pie([zero_per, one_per, two_per, three_per, four_per, five_per], \n       pctdistance = 1.2, \n       autopct = '% .1f',\n       shadow = True,\n       textprops = {'color' : 'k', 'fontsize' : '12', 'ha' : 'center'},\n       colors = colors1)\nax2.legend(mylabels, loc='upper center')\nax2.set_title('23:00', fontsize = 18)\nfig.show()","af2f146b":"We can see that at the day casino upper the chance of winning (less people at this time), but at the \"hot hours\" you will lose more often.","4d99a422":"If you want to play like a real roulette (you bet on x2, a.k.a. pink color), you chances are 48.8% for winning and 51.2% for losing. With a lot of games casino will be in profit.\nBut if you play for x1.2 (purple color) your chances of winning 81%. That mean win:lose is >4:1. That means it is profitable for you to bet on x1.2 color, because (1.2)^4 = 2.0736. And with a lot of games you will be in profit, if it was fair casino."}}