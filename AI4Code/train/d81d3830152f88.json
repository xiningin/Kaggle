{"cell_type":{"892eac14":"code","543fd97c":"code","b0baf8b9":"code","1076f686":"code","31263828":"code","1fe38d93":"code","e242d5c5":"code","2edb8ba1":"code","dd64c8f1":"code","e5d56571":"markdown","a8c9e130":"markdown","92bcb768":"markdown","45cec900":"markdown","bcd7587e":"markdown","1d67c0d0":"markdown","6e29e3b2":"markdown","0f2fda2a":"markdown","dc268785":"markdown","0f60df97":"markdown"},"source":{"892eac14":"import random\nimport numpy as np\nimport matplotlib.pyplot as plt\n%matplotlib inline\nimport pandas as pd","543fd97c":"df = pd.read_csv('..\/input\/nba-games\/games.csv')\ndf = df[df.SEASON > 2014]\ndf.head()","b0baf8b9":"df = df[['FG3_PCT_home','FG3_PCT_away','HOME_TEAM_WINS']]\ndf['HOME_3PT'] = (df.FG3_PCT_home > df.FG3_PCT_away)*1\ndf","1076f686":"# (higher 3pt)\ntreatment = df.query(\"(HOME_TEAM_WINS == 1 & HOME_3PT == 1) | (HOME_TEAM_WINS == 0 & HOME_3PT == 0)\")\nprint(treatment.shape[0])\nn_treatment = (treatment['HOME_TEAM_WINS'] == 1).sum()\np_obs_treatment = n_treatment\/treatment.shape[0]\np_obs_treatment","31263828":"# (lower\/equal 3pt)\ncontrol = df.query(\"(HOME_TEAM_WINS == 0 & HOME_3PT == 1) | (HOME_TEAM_WINS == 1 & HOME_3PT == 0)\")\nprint(control.shape[0])\nn_control = (control['HOME_TEAM_WINS'] == 1).sum()\np_obs_control = n_control\/control.shape[0]\np_obs_control","1fe38d93":"p_diffs = []\nfor _ in range(10000):\n    higher_3pt_win = np.random.binomial(1,p_obs_treatment,treatment.shape[0])\n    not_higher_win = np.random.binomial(1,p_obs_control,control.shape[0])\n    p_diffs.append(higher_3pt_win.mean() - not_higher_win.mean())","e242d5c5":"p_obs_diff = p_obs_treatment - p_obs_control\np_obs_diff","2edb8ba1":"p_diffs = np.array(p_diffs)\nplt.hist(p_diffs)\nplt.axvline(x = p_obs_diff,c='red')\nplt.show()","dd64c8f1":"p_value = (p_diffs > p_obs_diff).mean()\np_value","e5d56571":"Creation of treatment and control group:\n\n- **Treatment** group includes data where a team won given it has higher 3pt field goal percentage (3pt-fg) than the other team\n- **Control** group includes data where a team won given it has lower or equal 3pt field goal percentage (3pt-fg) than the other team","a8c9e130":"## Experiment Setup","92bcb768":"Control:\n- there are 2045 instance in the control group\n- Proportion of instance where a team that has a lower or same 3pt-fg than its opponent won is 59.8%","45cec900":"Treatment:\n- there are 4826 instance in the treatment group\n- Proportion of instance where a team that has a higher 3pt-fg than its opponent won is 56.75%","bcd7587e":"## A\/B Test\nAssuming I have to consider the question whether higher team 3pt-fg percentage wins more games based on the observation data we obtained only at a Type I error rate of 5%, what would the null hypothesis be?\n\n### Hypothsis Test\n- $H_0$ = Higher team 3pt-fg percentage does not win more games. `P_higher_3pt_win - P_not_higher_win = 0`\n- $H_1$ = Higher team 3pt-fg percentage wins more games. `P_higher_3pt_win > P_not_higher_win`\n\nFor this A\/B test, under the assumption that $H_0 = true$, we want to know whether higher team 3pt-fg percentage wins more games?","1d67c0d0":"At a Type I error rate of 5%, p-value is larger than the error rate, and therefore we **fail to reject** the Null hypothesis. There is a probability of 50.34% that team will lower or equal 3pt-fg as the opponent team wins the game.","6e29e3b2":"## Motivation\nSince the Golden State Warriors, led by superstar Stephen Curry, won their NBA championship in 2015, there has been a increase in 3-pt shooting in the games. We now know that 3-pt shooting team can win championship, but we might want to know how important it is to have a high team 3-pt field goal percentage in order to win games. \n","0f2fda2a":"We will use bootstrapping to simulate 10,000 samples. And for each of them, we will measure the difference of `P_higher_3pt_win` and `P_not_higher_win`","dc268785":"`p_obs_diff` is the difference of `P_higher_3pt_win` and `P_not_higher_win` of our observation data above","0f60df97":"Because I want to investigate the effect of 3pt shooting after GSW won their championship. I will only look at data after 2015 onward."}}