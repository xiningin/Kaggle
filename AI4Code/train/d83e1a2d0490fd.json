{"cell_type":{"ed0034df":"code","51957e69":"code","25f5cbcd":"code","ee83a0f9":"code","1f0d6a11":"code","ef60fb2f":"code","984a7ae5":"code","d2f46ec0":"code","e946f923":"code","0bc007e6":"code","b7334a4b":"code","626708e9":"code","0a9f68d4":"code","a17ab401":"code","7206d1b2":"code","7c015a7e":"code","92bdcd1e":"code","093b4eee":"code","0330ae8e":"code","bbc4c36a":"code","1960a4e1":"code","bc6a0034":"code","10347faa":"code","9a9faca9":"code","62c2eeb4":"code","086fcc7b":"code","2abf0dd2":"code","5bf188ad":"code","73c188df":"code","ad122937":"code","fdd24c22":"code","3691b416":"code","be2e156f":"code","4948bbd3":"code","ddc1f0a5":"code","c9b6b31f":"code","29975049":"code","9ebd2396":"code","28e7c39a":"code","01d116fe":"code","1e736ee6":"code","89370581":"code","b3b7c506":"code","da453f84":"code","804a9af2":"code","294665ca":"code","b452eeb0":"code","4b7a37e4":"code","f2c96cc1":"code","e775777e":"code","6616337a":"code","29d896c0":"code","bfe95694":"code","2cc8dd46":"code","393dbbd0":"code","dda6b493":"code","71d23487":"code","5e5285aa":"code","57a52b89":"code","af787c9c":"code","28bbfbbb":"markdown","8473557a":"markdown"},"source":{"ed0034df":"import pandas as pd\nimport numpy as np\nimport matplotlib.pyplot as plt\nimport os\n%matplotlib inline\nimport seaborn as sns\nimport tensorflow as tf\n","51957e69":"train='\/kaggle\/input\/house-prices-advanced-regression-techniques\/train.csv'\ntest='\/kaggle\/input\/house-prices-advanced-regression-techniques\/test.csv'\nsubmission='\/kaggle\/input\/house-prices-advanced-regression-techniques\/sample_submission.csv'\ndata='..\/input\/housing\/AmesHousing.csv'","25f5cbcd":"train=pd.read_csv(train)\ntest=pd.read_csv(test)\nsubmission=pd.read_csv(submission)\ndata=pd.read_csv(data)\n","ee83a0f9":"display(train.head())\ndisplay(test.head())\ndisplay(submission.head())\ndisplay(data.head())","1f0d6a11":"data=data.drop(['PID'],axis=1)\ndata.columns=train.columns\ntrain=data\ndisplay(train.head())\ntrain.shape\n","ef60fb2f":"print('train_size' '{}'.format(train.shape))\nprint('test_size' '{}'.format(test.shape))\nprint('submission_size' '{}'.format(submission.shape))","984a7ae5":"train.drop('Id',axis=1,inplace=True)\ntest.drop('Id',axis=1,inplace=True)\n","d2f46ec0":"sns.set_style('darkgrid')\ntrain.SalePrice.plot(subplots=True, figsize=(12, 10))\n\n","e946f923":"sns.set_style('darkgrid')\nfor i in train.columns:\n    if train[i].dtypes==int or train[i].dtypes==float:\n      \n        sns.jointplot(train[i],train.SalePrice)\n        plt.show()\n        ","0bc007e6":"\nsaleprice_reg=train[train.LotShape=='Reg'].SalePrice\nreg=train[train.LotShape=='Reg'].GrLivArea\n\nsaleprice_ir1=train[train.LotShape=='IR1'].SalePrice\nir1=train[train.LotShape=='IR1'].GrLivArea\n\nsaleprice_ir2=train[train.LotShape=='IR2'].SalePrice\nir2=train[train.LotShape=='IR2'].GrLivArea\n\nsaleprice_ir3=train[train.LotShape=='IR3'].SalePrice\nir3=train[train.LotShape=='IR3'].GrLivArea","b7334a4b":"plt.figure(figsize=(10,10))\nsns.boxplot(train.LotShape,train.SalePrice)","626708e9":"fig,az=plt.subplots(nrows=4,figsize=(12,15))\naz[0].scatter(reg,saleprice_reg,color='red')\naz[0].plot([2900,2900],[0,600000])\naz[1].scatter(ir1,saleprice_ir1,color='green')\naz[1].plot([4600,4600],[0,700000])\naz[2].scatter(ir2,saleprice_ir2,color='blue')\naz[2].plot([3500,3500],[0,500000])\naz[3].scatter(ir3,saleprice_ir3,color='black')\naz[3].plot([3000,3000],[0,350000])\nplt.show() ","0a9f68d4":"def price_area(x,_sum_x,lotshape):\n    \n    list_area=[]\n  \n    for area in x:\n        if area > _sum_x:\n            list_area.append(area)\n    print('lotshape=====',lotshape)\n    print(len(list_area))\n    return list_area\n            \n  \n  \n            \n\nlist_reg=price_area(reg,2900,'REG')\nlist_ir1=price_area(ir1,4600,'IR1')\nlist_ir2=price_area(ir2,3500,'IR2')\nlist_ir3=price_area(ir3,3000,'IR3')","a17ab401":"list_list=[list_reg,list_ir1,list_ir2,list_ir3]\n\nlist_area=[]\nfor i in range(len(list_list)):\n    for j in list_list[i]:\n        list_area.append(j)\nprint('len',len(list_area))","7206d1b2":"list_index=[]\nfor k in list_area:\n    for i ,j in enumerate(train['GrLivArea']):\n        \n        if j==k:\n          \n            list_index.append(i)\n    \nfor i in list_index:\n    \n    train.drop(i,inplace=True)","7c015a7e":"train.shape","92bdcd1e":"saleprice_reg=train[train.LotShape=='Reg'].SalePrice\nreg=train[train.LotShape=='Reg'].GrLivArea\n\nsaleprice_ir1=train[train.LotShape=='IR1'].SalePrice\nir1=train[train.LotShape=='IR1'].GrLivArea\n\nsaleprice_ir2=train[train.LotShape=='IR2'].SalePrice\nir2=train[train.LotShape=='IR2'].GrLivArea\n\nsaleprice_ir3=train[train.LotShape=='IR3'].SalePrice\nir3=train[train.LotShape=='IR3'].GrLivArea","093b4eee":"fig,az=plt.subplots(nrows=4,figsize=(12,15))\naz[0].scatter(reg,saleprice_reg,color='red')\naz[1].scatter(ir1,saleprice_ir1,color='green')\naz[2].scatter(ir2,saleprice_ir2,color='blue')\naz[3].scatter(ir3,saleprice_ir3,color='black')\nplt.show()","0330ae8e":"train.shape","bbc4c36a":"from sklearn.preprocessing import  LabelEncoder","1960a4e1":"\nfor i in train.columns:\n    \n    print(i,' sum NaN = ',train[i].notnull().sum())","bc6a0034":"yr_10=train[train.YrSold==2010].YrSold.value_counts()\nyr_09=train[train.YrSold==2009].YrSold.value_counts()\nyr_08=train[train.YrSold==2008].YrSold.value_counts()\nyr_07=train[train.YrSold==2007].YrSold.value_counts()\nyr_06=train[train.YrSold==2006].YrSold.value_counts()\n\nlabels=[yr_06.index.values,yr_07.index.values,yr_08.index.values,yr_09.index.values,yr_10.index.values]\nplt.figure(figsize=(10,10))\nplt.pie([yr_06.values,yr_07.values,yr_08.values,yr_09.values,yr_10.values],labels=labels)\nplt.show()\n\n\n\n","10347faa":"plt.figure(figsize=(10,10))\nsns.barplot(train.YrSold,train.SalePrice,palette='Blues')","9a9faca9":"plt.figure(figsize=(10,10))\nsns.boxplot(train.SalePrice)","62c2eeb4":"train.SalePrice.describe()","086fcc7b":"train['MasVnrType']=train['MasVnrType'].fillna('Stone')\ntrain['BsmtQual']=train['BsmtQual'].fillna('Gd')\ntrain['MasVnrArea']=train['MasVnrArea'].fillna(train['MasVnrArea'].mean())\ntrain['BsmtCond']=train['BsmtCond'].fillna('TA')\ntrain['BsmtExposure']=train['BsmtExposure'].fillna('Mn')\ntrain['BsmtFinType1']=train['BsmtFinType1'].fillna('ALQ')\ntrain['BsmtFinType2']=train['BsmtFinType2'].fillna('Unf')\ntrain['Electrical']=train['Electrical'].fillna('SBrkr')\ntrain['GarageType']=train['GarageType'].fillna('Attchd')\ntrain['GarageYrBlt']=train['GarageYrBlt'].fillna(train['GarageYrBlt'].mean())\ntrain['GarageFinish']=train['GarageFinish'].fillna('RFn')\ntrain['GarageQual']=train['GarageQual'].fillna('TA')\ntrain['GarageCond']=train['GarageCond'].fillna('TA')\ntrain['LotFrontage']=train['LotFrontage'].fillna(train['LotFrontage'].mean())\n\n\n\n","2abf0dd2":"colum=['Alley','Fence','MiscFeature','PoolQC','FireplaceQu','YrSold']\ntrain=train.drop(colum,axis=1)","5bf188ad":"train.shape","73c188df":"label_en=LabelEncoder()\nfor i in train.columns:\n    if train[i].dtypes==str:\n        label_en.fit(train[i])\n        train[i]=label_en.fit_transform(train[i])\n    if train[i].dtypes==object:\n        train[i]=train[i].astype(str)\n        \n        label_en.fit(train[i])\n        train[i]=label_en.fit_transform(train[i])\n        \n    if type(train[i][0])==str:\n        \n        label_en.fit(train[i])\n        train[i]=label_en.fit_transform(train[i])\n    print(i, ':', train[i].dtype)","ad122937":"train['GarageCars']=train['GarageCars'].fillna(train.GarageCars).mean()\ntrain.BsmtFinSF1=train.BsmtFinSF1.fillna(train.BsmtFinSF1).mean()\ntrain.BsmtFinSF2=train.BsmtFinSF2.fillna(train.BsmtFinSF2).mean()\ntrain.BsmtUnfSF=train.BsmtUnfSF.fillna(train.BsmtUnfSF).mean()\ntrain.TotalBsmtSF=train.TotalBsmtSF.fillna(train.TotalBsmtSF).mean()\ntrain.BsmtFullBath=train.BsmtFullBath.fillna(train.BsmtFullBath).mean()\ntrain.BsmtHalfBath=train.BsmtHalfBath.fillna(train.BsmtHalfBath).mean()\ntrain.BsmtFinSF1=train.BsmtFinSF1.fillna(train.BsmtFinSF1).mean()\ntrain['GarageArea']=train['GarageArea'].fillna(train.GarageArea).mean()\n","fdd24c22":"saleprice=train.SalePrice\ntrain=train.drop('SalePrice',axis=1)\nplt.figure(figsize=(20,15))\ntrain.corrwith(saleprice).plot(kind='bar')\n","3691b416":"\nprint('MULTICORRELATION')\nfor column in train.columns:\n    \n   \n    \n    corr=train.corrwith(train[column])\n    \n    for i,j in zip(corr,train.columns):\n        if i >=0.7 and i <0.99:\n            print('correlation witch',column)\n            print(j,'=',i)\n            \n    \n    \n        ","be2e156f":"columns=['MSSubClass','BldgType','Exterior2nd',\n         'Exterior1st','TotalBsmtSF','1stFlrSF','TotRmsAbvGrd',\n         'GrLivArea','GarageCars','GarageArea','GarageYrBlt','YearBuilt']\nfor column in columns:\n    corr=train[column].corr(saleprice)\n    print(column,corr)\n","4948bbd3":"train=train.drop(['BldgType','Exterior2nd','1stFlrSF','TotRmsAbvGrd','GarageArea','GarageYrBlt'],axis=1)","ddc1f0a5":"train.shape","c9b6b31f":"\nfor i in train.columns:\n    \n    print(i,' sum = ',train[i].notnull().sum())","29975049":"from sklearn.preprocessing import MinMaxScaler","9ebd2396":"minmax_price=MinMaxScaler()\nminmax=MinMaxScaler()\nminmax.fit(train)\ntrain=minmax.transform(train)\n\n\nsaleprice=np.array(saleprice)\nsaleprice=saleprice.reshape(2914,1)\nminmax_price.fit(saleprice)\nsaleprice=minmax_price.transform(saleprice)","28e7c39a":"plt.figure(figsize=(10,10))\nsns.distplot(saleprice)\n","01d116fe":"print(saleprice.shape)\nprint(train.shape)","1e736ee6":"import tensorflow as tf\nfrom sklearn.model_selection import train_test_split\n\nx_tr,x_val,y_tr,y_val=train_test_split(train,saleprice,train_size=0.8,random_state=False)","89370581":"from sklearn.metrics import mean_squared_error\nfrom sklearn.linear_model import SGDRegressor\nff_reg=SGDRegressor(penalty=\"l1\")\nff_reg.fit(x_tr,y_tr)\npred_a=ff_reg.predict(x_val)\nmean_squared_error(y_val,pred_a)","b3b7c506":"from sklearn.linear_model import Ridge\nf_regr=Ridge(alpha=1,solver='sag')\nf_regr.fit(x_tr,y_tr)\npred_b=f_regr.predict(x_val)\nmean_squared_error(y_val,pred_b)","da453f84":"from sklearn.ensemble import RandomForestRegressor\n\nf_reg=RandomForestRegressor(max_depth=20,n_estimators=18,verbose=1,random_state=0)\nf_reg.fit(x_tr,y_tr)\npred_c=f_reg.predict(x_val)\nmean_squared_error(y_val,pred_c)","804a9af2":"\nfor i in test.columns:\n    \n    print(i,' sum NaN = ',test[i].notnull().sum())","294665ca":"test['BsmtFinSF1']=test['BsmtFinSF1'].fillna(test['BsmtFinSF1'].mean())\ntest['BsmtFinSF2']=test['BsmtFinSF2'].fillna(test['BsmtFinSF2'].mean())\ntest['BsmtUnfSF']=test['BsmtUnfSF'].fillna(test['BsmtUnfSF'].mean())\ntest['TotalBsmtSF']=test['TotalBsmtSF'].fillna(test['TotalBsmtSF'].mean())\ntest['BsmtFullBath']=test['BsmtFullBath'].fillna(test['BsmtFullBath'].mean())\ntest['BsmtHalfBath']=test['BsmtHalfBath'].fillna(test['BsmtHalfBath'].mean())\ntest['GarageCars']=test['GarageCars'].fillna(test['GarageCars'].mean())\ntest['GarageArea']=test['GarageArea'].fillna(test['GarageArea'].mean())\ntest['LotFrontage']=test['LotFrontage'].fillna(test['LotFrontage'].mean())","b452eeb0":"\ntest['MasVnrType']=test['MasVnrType'].fillna('Stone')\ntest['BsmtQual']=test['BsmtQual'].fillna('Gd')\ntest['MasVnrArea']=test['MasVnrArea'].fillna(test['MasVnrArea'].mean())\ntest['BsmtCond']=test['BsmtCond'].fillna('TA')\ntest['BsmtExposure']=test['BsmtExposure'].fillna('Mn')\ntest['BsmtFinType1']=test['BsmtFinType1'].fillna('ALQ')\ntest['BsmtFinType2']=test['BsmtFinType2'].fillna('Unf')\ntest['Electrical']=test['Electrical'].fillna('SBrkr')\ntest['GarageType']=test['GarageType'].fillna('Attchd')\ntest['GarageYrBlt']=test['GarageYrBlt'].fillna(test['GarageYrBlt'].mean())\ntest['GarageFinish']=test['GarageFinish'].fillna('RFn')\ntest['GarageQual']=test['GarageQual'].fillna('TA')\ntest['GarageCond']=test['GarageCond'].fillna('TA')\ntest['Utilities']=test['Utilities'].fillna('AllPub')\ntest['Functional']=test['Functional'].fillna('Typ')\ntest['LotFrontage']=test['LotFrontage'].fillna(test['LotFrontage'].mean())\ntest['MSZoning']=test['MSZoning'].fillna('RL')","4b7a37e4":"colum=['Alley','Fence','MiscFeature','PoolQC','FireplaceQu','YrSold']\ntest=test.drop(colum,axis=1)\n","f2c96cc1":"test.shape","e775777e":"for i in test.columns:\n    \n    print(i,' sum NaN = ',test[i].notnull().sum())","6616337a":"label_en=LabelEncoder()\nfor i in test.columns:\n    if test[i].dtypes==str:\n        label_en.fit(test[i])\n        test[i]=label_en.fit_transform(test[i])\n    if test[i].dtypes==object:\n        test[i]=test[i].astype(str)\n        \n        label_en.fit(test[i])\n        test[i]=label_en.fit_transform(test[i])\n        \n    if type(test[i][0])==str:\n        \n        label_en.fit(test[i])\n        test[i]=label_en.fit_transform(test[i])\n    print(i, ':', test[i].dtype)","29d896c0":"test=test.drop(['BldgType','Exterior2nd','1stFlrSF','TotRmsAbvGrd','GarageArea','GarageYrBlt'],axis=1)","bfe95694":"test.shape","2cc8dd46":"\nminmax.fit(test)\ntest=minmax.transform(test)","393dbbd0":"saleprice=minmax_price.inverse_transform(saleprice)","dda6b493":"saleprice.shape","71d23487":"pred_test=f_reg.predict(test)\npred_test=np.reshape(pred_test,(1459,1))\n\npred_trans=minmax_price.inverse_transform(pred_test)","5e5285aa":"plt.figure(figsize=(20,10))\nplt.plot(range(len(saleprice)),saleprice,color='red')\nplt.plot(range(2914,2914+len(pred_trans)),pred_trans,color='blue')","57a52b89":"submission.SalePrice=pred_trans\nsubmission","af787c9c":"submission.to_csv ('submission.csv', index = None, header = True)","28bbfbbb":"# PREDICTION","8473557a":"# DATASET"}}