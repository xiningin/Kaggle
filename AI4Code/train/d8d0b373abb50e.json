{"cell_type":{"a05d262e":"code","2ed85330":"code","d4b0a2d8":"code","528541ac":"code","7e640c12":"code","c0b281cc":"code","874e4ced":"code","f05719de":"code","f606ae67":"code","47b6e09d":"code","c171a88d":"code","3ae21722":"code","8db88c52":"code","4ab029d1":"code","f6248eaf":"code","7bd609c2":"code","56c84c0b":"code","494c6a74":"code","75a4da3b":"code","5eda7148":"code","f0aa31b1":"code","a648546c":"code","2d42b545":"code","8b58f058":"code","8de67612":"markdown","401e10d8":"markdown","a5378460":"markdown","bbd5918e":"markdown","35ce89d5":"markdown","43cb0e7d":"markdown","1e8379c1":"markdown","f37ac162":"markdown","93bbae17":"markdown","639c8305":"markdown","2cb36c18":"markdown","970ec51f":"markdown","e86c49b2":"markdown","df3b3eb4":"markdown","5f3d66d8":"markdown","6f6ece3a":"markdown","3c77f7af":"markdown","696bb3ff":"markdown"},"source":{"a05d262e":"# This Python 3 environment comes with many helpful analytics libraries installed\n# It is defined by the kaggle\/python Docker image: https:\/\/github.com\/kaggle\/docker-python\n# For example, here's several helpful packages to load\n!pip3 install pyod  \nimport numpy as np # linear algebra\nimport pandas as pd # data processing, CSV file I\/O (e.g. pd.read_csv)\n\n# Input data files are available in the read-only \"..\/input\/\" directory\n# For example, running this (by clicking run or pressing Shift+Enter) will list all files under the input directory\n\nimport os\nfor dirname, _, filenames in os.walk('\/kaggle\/input'):\n    for filename in filenames:\n        print(os.path.join(dirname, filename))\n\n# You can write up to 5GB to the current directory (\/kaggle\/working\/) that gets preserved as output when you create a version using \"Save & Run All\" \n# You can also write temporary files to \/kaggle\/temp\/, but they won't be saved outside of the current session","2ed85330":"df_terrorism = pd.read_csv('\/kaggle\/input\/gtd\/globalterrorismdb_0718dist.csv', encoding = \"ISO-8859-1\")\ndf_terrorism = df_terrorism[['iyear','imonth','iday','extended','country','country_txt','region', 'region_txt','success',  'attacktype1_txt', 'targtype1', 'targtype1_txt', 'gname', 'weaptype1_txt']]\ndf_terrorism.head()","d4b0a2d8":"df_terrorism.head()","528541ac":"count = df_terrorism.pivot_table(columns='gname', aggfunc='size', fill_value=0)\nterror_gname = dict(zip(count.index, count[:]))\nterror_gname = sorted(terror_gname.items(), key=lambda kv: kv[1], reverse=True)\nterror_gname = dict(terror_gname)\nterror_gname_11_keys = list(terror_gname.keys())\nterror_gname_10_values = list(terror_gname.values())\nterror_gname_10_values = terror_gname_10_values[:10]\nnames =terror_gname_11_keys[0:11]","7e640c12":"countries = pd.get_dummies(df_terrorism['country_txt'])\ncountries.reset_index(drop=True, inplace=True)\nregions = pd.get_dummies(df_terrorism['region_txt'])\nregions.reset_index(drop=True, inplace=True)\nattack = pd.get_dummies(df_terrorism['attacktype1_txt'])\nattack.reset_index(drop=True, inplace=True)\ntarget = pd.get_dummies(df_terrorism['targtype1_txt'])\ntarget.reset_index(drop=True, inplace=True)\nweapon = pd.get_dummies(df_terrorism['weaptype1_txt'])\nweapon.reset_index(drop=True, inplace=True)\ndf_terrorism.reset_index(drop=True, inplace=True)\ndf_terrorism_new = pd.concat([df_terrorism, countries, regions, attack, target, weapon], axis=1)\ndf_terrorism_new = df_terrorism_new.drop(['iyear','imonth','iday','country_txt', 'region_txt','attacktype1_txt','targtype1_txt','weaptype1_txt'] ,axis=1)\n","c0b281cc":"from pyod.models.ocsvm import OCSVM\nfrom tqdm import tqdm\nimport plotly.express as px\nimport warnings\nwarnings.filterwarnings('ignore')\nfrom plotly.offline import init_notebook_mode, iplot\ninit_notebook_mode(connected=True)\n\ndef get_indexs(name, df):\n    tmp = df[df['gname']==name]\n    X_tmp = tmp.iloc[:,~tmp.columns.isin(['gname'])]\n    clf = OCSVM(gamma='auto').fit(X_tmp)\n    tmp['outlier'] = clf.labels_\n    indexs_out  = tmp[tmp['outlier']==1].index\n    indexs_in = tmp[tmp['outlier']==0].index\n    return indexs_out, indexs_in\n\nindexs_out, indexs_in = get_indexs(names[1], df_terrorism_new)\ndf_index_in = df_terrorism[df_terrorism.index.isin(indexs_in)]\ndf_index_out = df_terrorism[df_terrorism.index.isin(indexs_out)]\n\ndf_index_out['outlier'] = 'nonstandard'\ndf_index_in['outlier'] = 'standard'\n\nselect_group =pd.concat([df_index_in, df_index_out])\n\nfig = px.sunburst(select_group, path=['outlier','country_txt','attacktype1_txt','targtype1_txt','weaptype1_txt'])\nfig.update_layout(\n    #grid= dict(columns=300, rows=300),\n    margin = dict(t=0, l=0, r=0, b=0)\n)\nfig.show()","874e4ced":"indexs_out, indexs_in = get_indexs(names[2], df_terrorism_new)\ndf_index_in = df_terrorism[df_terrorism.index.isin(indexs_in)]\ndf_index_out = df_terrorism[df_terrorism.index.isin(indexs_out)]\n\ndf_index_out['outlier'] = 'nonstandard'\ndf_index_in['outlier'] = 'standard'\n\nselect_group =pd.concat([df_index_in, df_index_out])\n\nfig = px.sunburst(select_group, path=['outlier','country_txt','attacktype1_txt','targtype1_txt','weaptype1_txt'])\nfig.update_layout(\n    #grid= dict(columns=300, rows=300),\n    margin = dict(t=0, l=0, r=0, b=0)\n)\nfig.show()","f05719de":"indexs_out, indexs_in = get_indexs(names[3], df_terrorism_new)\ndf_index_in = df_terrorism[df_terrorism.index.isin(indexs_in)]\ndf_index_out = df_terrorism[df_terrorism.index.isin(indexs_out)]\n\ndf_index_out['outlier'] = 'nonstandard'\ndf_index_in['outlier'] = 'standard'\n\nselect_group =pd.concat([df_index_in, df_index_out])\n\nfig = px.sunburst(select_group, path=['outlier','country_txt','attacktype1_txt','targtype1_txt','weaptype1_txt'])\nfig.update_layout(\n    #grid= dict(columns=300, rows=300),\n    margin = dict(t=0, l=0, r=0, b=0)\n)\nfig.show()","f606ae67":"indexs_out, indexs_in = get_indexs(names[4], df_terrorism_new)\ndf_index_in = df_terrorism[df_terrorism.index.isin(indexs_in)]\ndf_index_out = df_terrorism[df_terrorism.index.isin(indexs_out)]\n\ndf_index_out['outlier'] = 'nonstandard'\ndf_index_in['outlier'] = 'standard'\n\nselect_group =pd.concat([df_index_in, df_index_out])\n\nfig = px.sunburst(select_group, path=['outlier','country_txt','attacktype1_txt','targtype1_txt','weaptype1_txt'])\nfig.update_layout(\n    #grid= dict(columns=300, rows=300),\n    margin = dict(t=0, l=0, r=0, b=0)\n)\nfig.show()","47b6e09d":"indexs_out, indexs_in = get_indexs(names[5], df_terrorism_new)\ndf_index_in = df_terrorism[df_terrorism.index.isin(indexs_in)]\ndf_index_out = df_terrorism[df_terrorism.index.isin(indexs_out)]\n\ndf_index_out['outlier'] = 'nonstandard'\ndf_index_in['outlier'] = 'standard'\n\nselect_group =pd.concat([df_index_in, df_index_out])\n\nfig = px.sunburst(select_group, path=['outlier','country_txt','attacktype1_txt','targtype1_txt','weaptype1_txt'])\nfig.update_layout(\n    #grid= dict(columns=300, rows=300),\n    margin = dict(t=0, l=0, r=0, b=0)\n)\nfig.show()","c171a88d":"indexs_out, indexs_in = get_indexs(names[6], df_terrorism_new)\ndf_index_in = df_terrorism[df_terrorism.index.isin(indexs_in)]\ndf_index_out = df_terrorism[df_terrorism.index.isin(indexs_out)]\n\ndf_index_out['outlier'] = 'nonstandard'\ndf_index_in['outlier'] = 'standard'\n\nselect_group =pd.concat([df_index_in, df_index_out])\n\nfig = px.sunburst(select_group, path=['outlier','country_txt','attacktype1_txt','targtype1_txt','weaptype1_txt'])\nfig.update_layout(\n    #grid= dict(columns=300, rows=300),\n    margin = dict(t=0, l=0, r=0, b=0)\n)\nfig.show()","3ae21722":"indexs_out, indexs_in = get_indexs(names[7], df_terrorism_new)\ndf_index_in = df_terrorism[df_terrorism.index.isin(indexs_in)]\ndf_index_out = df_terrorism[df_terrorism.index.isin(indexs_out)]\n\ndf_index_out['outlier'] = 'nonstandard'\ndf_index_in['outlier'] = 'standard'\n\nselect_group =pd.concat([df_index_in, df_index_out])\n\nfig = px.sunburst(select_group, path=['outlier','country_txt','attacktype1_txt','targtype1_txt','weaptype1_txt'])\nfig.update_layout(\n    #grid= dict(columns=300, rows=300),\n    margin = dict(t=0, l=0, r=0, b=0)\n)\nfig.show()","8db88c52":"indexs_out, indexs_in = get_indexs(names[8], df_terrorism_new)\ndf_index_in = df_terrorism[df_terrorism.index.isin(indexs_in)]\ndf_index_out = df_terrorism[df_terrorism.index.isin(indexs_out)]\n\ndf_index_out['outlier'] = 'nonstandard'\ndf_index_in['outlier'] = 'standard'\n\nselect_group =pd.concat([df_index_in, df_index_out])\n\nfig = px.sunburst(select_group, path=['outlier','country_txt','attacktype1_txt','targtype1_txt','weaptype1_txt'])\nfig.update_layout(\n    #grid= dict(columns=300, rows=300),\n    margin = dict(t=0, l=0, r=0, b=0)\n)\nfig.show()","4ab029d1":"indexs_out, indexs_in = get_indexs(names[9], df_terrorism_new)\ndf_index_in = df_terrorism[df_terrorism.index.isin(indexs_in)]\ndf_index_out = df_terrorism[df_terrorism.index.isin(indexs_out)]\n\ndf_index_out['outlier'] = 'nonstandard'\ndf_index_in['outlier'] = 'standard'\n\nselect_group =pd.concat([df_index_in, df_index_out])\n\nfig = px.sunburst(select_group, path=['outlier','country_txt','attacktype1_txt','targtype1_txt','weaptype1_txt'])\nfig.update_layout(\n    #grid= dict(columns=300, rows=300),\n    margin = dict(t=0, l=0, r=0, b=0)\n)\nfig.show()","f6248eaf":"indexs_out, indexs_in = get_indexs(names[10], df_terrorism_new)\ndf_index_in = df_terrorism[df_terrorism.index.isin(indexs_in)]\ndf_index_out = df_terrorism[df_terrorism.index.isin(indexs_out)]\n\ndf_index_out['outlier'] = 'nonstandard'\ndf_index_in['outlier'] = 'standard'\n\nselect_group =pd.concat([df_index_in, df_index_out])\n\nfig = px.sunburst(select_group, path=['outlier','country_txt','attacktype1_txt','targtype1_txt','weaptype1_txt'])\nfig.update_layout(\n    #grid= dict(columns=300, rows=300),\n    margin = dict(t=0, l=0, r=0, b=0)\n)\nfig.show()","7bd609c2":"unknown = df_terrorism[df_terrorism['gname'] =='Unknown']\nunknown.head()","56c84c0b":"in_ = []\nout_ = []\n\nfor i in range(1, 11): \n    indexs_out, indexs_in = get_indexs(names[i], df_terrorism_new)\n    for index in indexs_in:\n        in_.append(index)\n    for index in indexs_out:\n        out_.append(index)","494c6a74":"pattern = df_terrorism_new[df_terrorism_new.index.isin(in_)]","75a4da3b":"from sklearn.cluster import KMeans\nX = pattern.iloc[:,~pattern.columns.isin(['gname'])]\nkmeans = KMeans(n_clusters=10, random_state=42).fit(X)\nkmeans.labels_","5eda7148":"import seaborn as sns\npattern['cluster'] = kmeans.labels_\npattern['cluster'].value_counts()\nax = sns.countplot(pattern['cluster'])\nax","f0aa31b1":"ax = sns.countplot(pattern['gname'])\nax.set_xticklabels(ax.get_xticklabels(), rotation=90)\nax","a648546c":"from sklearn.decomposition import PCA\npca = PCA(n_components=3)\nX_pca = pca.fit_transform(X)\npattern['x'] =  X_pca[:,0]\npattern['y'] = X_pca[:,1]\npattern['z'] = X_pca[:,2]","2d42b545":"import plotly.express as px\nfig = px.scatter_3d(pattern, x='x', y='y', z='z',\n              color='cluster')\nfig.show()","8b58f058":"import plotly.express as px\nfrom plotly.subplots import make_subplots\nimport plotly.graph_objects as go\n\nfig = make_subplots(rows=2, cols=5, specs=[[{\"type\": \"pie\"}, {\"type\": \"pie\"}, {\"type\": \"pie\"}, {\"type\": \"pie\"}, {\"type\": \"pie\"}],\n                                          [{\"type\": \"pie\"}, {\"type\": \"pie\"}, {\"type\": \"pie\"}, {\"type\": \"pie\"}, {\"type\": \"pie\"}]])\n\n\nj=1\nk=1\nfor i in range(1, 11): \n    if ((i-1) %5 ==0) and (i !=1): \n        k = 1\n        j+=1\n    tmp = pattern[pattern['gname']==names[i]]\n    fig.append_trace(go.Pie(values=list(tmp['cluster'].value_counts()), \n                            labels=tmp['cluster'].value_counts().index, title_text='Clustering Distribuition '+str(names[i])), row=j, col=k)\n    k+=1\nfig.show()","8de67612":"<font size=\"+3\" color=\"black\"><b>2 - Outlier Detection and Pattern Recognition<\/b><\/font><br><a id=\"2\"><\/a>\n\n* Use the OCSVM to detect nonstandard attack in each of 10 most dangerous groups\n\n* To more details of patterns groups attacks click over cicles that will expand the region to see better how forms of attacks are composed","401e10d8":" # Kurdistan Workers' Party (PKK)\n \n * Main Country action is Turkey.\n \n * Nonstandard attacks in Turkey are composed of armed assaults and assasination with main use of firearms and explosives.\n \n * Explosion, Incediary and firearms are the standard weapons used in PKK attacks.\n","a5378460":"# Shining Path (SL)\n\n* Actions are in Peru.\n\n* In Peru Shining Path dont attack with explosives utilities buildings.","bbd5918e":"<img src='https:\/\/blogdovladimir.files.wordpress.com\/2017\/03\/terrorismo.jpg' style='height:400px'>","35ce89d5":"# New People's Army (NPA)\n\n* Act exclusively in the philippines.\n\n* Firearms are the main weapon.","43cb0e7d":"* Is similar the composition of real groups terrorism and amount of created clusters","1e8379c1":"# Islamic State of Iraq and the Levant (ISIL)\n\n* Operation of ISIL attacks happen mainly in Iraq and Syria.\n\n* Main weapon used is bombing explosion.\n\n* Syria attacks pattern are focus on private structures against civilians, rarely attack focus government military bodies.","f37ac162":"# Al-Shabaab\n\n* Somalia and Kenya are the principal countries. \n\n* As the main weapon used is the use of bombs in Kenya use armed assault is out of standard.\n\n* Al-Shabaab attack mainly government military forces, their attacks appear to be carried out as if they were rebel or separatist government forces.","93bbae17":"<font size=\"+3\" color=\"black\"><b>4 - Conclusion<\/b><\/font><br><a id=\"4\"><\/a>\n\n* The 10 largest terrorist groups in the world have their countries well defined, among them no one operate in same country so only by country is possible to recognize the group. The ways in which attacks are carried out in general are also well defined, the forms, weapons and targets are standardized, thus demonstrating that groups consciously or unconsciously specialize in certain forms of attack. \n\n* Contrary to what is generally common sense, most terrorist groups do not focus on public bodies or mititarians in general are private properties using explosions, in actions in general they are the civilians who suffer most\n\n* General as compositions of forms of attack, taking into account targets, parents and weapons used is very well registered, the groups that most resemble and divide clusters are due to their ways of practicing terrorism and the targets where they perform\n\n* IRA, FARC, PKK and Taliban are the group with best pattern recognition\n\n* SL and NPA, are the most similar operation groups, and divides the sames clusters","639c8305":"<div class=\"list-group\" id=\"list-tab\" role=\"tablist\">\n  <h1 class=\"list-group-item list-group-item-action active\" data-toggle=\"list\"  role=\"tab\" aria-controls=\"home\">&nbsp;Summary Table:<\/h1>\n  <a class=\"list-group-item list-group-item-action\" data-toggle=\"list\" href=\"#1\" role=\"tab\" aria-controls=\"profile\">1. Introduction<span class=\"badge badge-primary badge-pill\">1<\/span><\/a>\n  <a class=\"list-group-item list-group-item-action\" data-toggle=\"list\" href=\"#2\" role=\"tab\" aria-controls=\"profile\">2. Outlier Detection and Pattern Recognition<span class=\"badge badge-primary badge-pill\">2<\/span><\/a>\n   <a class=\"list-group-item list-group-item-action\" data-toggle=\"list\" href=\"#3\" role=\"tab\" aria-controls=\"profile\">3. Clustering<span class=\"badge badge-primary badge-pill\">3<\/span><\/a>\n   <a class=\"list-group-item list-group-item-action\" data-toggle=\"list\" href=\"#4\" role=\"tab\" aria-controls=\"profile\">4. Conclusion<span class=\"badge badge-primary badge-pill\">4<\/span><\/a>\n<\/div>","2cb36c18":"# Irish Republican Army (IRA)\n\n* United Kingdom is the principal country target\n* Explosives and firearms are the main weapons used\n","970ec51f":"[](http:\/\/)","e86c49b2":"# Farabundo Marti National Liberation Front (FMLN)\n\n* El Salvador is the principal country of operation.\n\n* Explode business building is not normal operation of FMLN in El Salvador.\n \n* FMLN use Bombing\/Explosion in Utilities.\n \n* FMLN uses firearm attacks mainly against military structures, perhaps causing fire exchanges between group members and military defense organizations.\n\n* In general FMLN does not target business. ","df3b3eb4":"# Revolutionary Armed Forces of Colombia (FARC)\n\n* Presents a well-defined pattern.\n\n* Operation is basically in Colombia.\n\n* The most used weapon in FARC attacks are explosive and fire arms.","5f3d66d8":"<font size=\"+3\" color=\"black\"><b>3 - Clustering<\/b><\/font><br><a id=\"3\"><\/a>\n\n* To evaluate the pattern of Attacks intra terrorist groups, we analyse the composition of each cluster to undestand better the composition this I remove from the data samples that are non standard from each group to keep real and more frequent operation attacks.","6f6ece3a":"# Boko Haram\n\n* Operation main in Nigeria, Cameroon is the secound country where Boko Haram operates.\n\n* The pattern of attacks at Cameroon is with explosives focus in Private Citizens and Properties, any other form of action other than in this way evades the attacks carried out until then.\n\n* Firearms,explosives and Incediary are the major weapons used by Boku Haram.","3c77f7af":"<font size=\"+3\" color=\"black\"><b>1 - Introduction<\/b><\/font><br><a id=\"1\"><\/a>\n\n\n* This kernel has propose to identify nonstandard attacks of 10 principal terrorist groups around the world and compare similarity over each group attack\n* Analyze target, country and country used in attack logs\n* To identify nonstandard attacks I will use OneClassSVM to outlier detection in the 10 terrorist groups\n\n\n","696bb3ff":"# Taliban Attacks\n\n* It's not normal Taliban actions out of Afghanistan.\n\n* In Afghanistan generally dont carry out attacks on transports.\n\n* The Taliban when using armed attack is generally not used in structures such as business, transport and non-state militia. \n\n* telecommunications systems are not targets of the Taliban.\n\n* Taliban do not take hostages in business buildings, the targets are usually state buildings.\n "}}