{"cell_type":{"9e4a473a":"code","77694b9a":"code","2d513f7c":"code","562a684f":"code","4a40ed12":"code","1a91c863":"code","a37ea292":"code","9ec3325e":"code","b158e3b9":"code","bca7f886":"code","8d492b84":"code","68ec7736":"code","c92defbb":"code","6a3bf868":"code","dd763635":"code","3b744ebf":"code","e7becfe3":"code","479e768b":"code","d365fa31":"code","6bc6351c":"code","e4b22c78":"code","71b13797":"code","6e8f4130":"code","a6fbe979":"code","c2ef1df5":"code","ceefa089":"code","28c1898e":"code","e62039a8":"code","140117da":"code","30f496b8":"code","d29f946b":"code","43d764e8":"code","f772bf00":"code","dd395139":"code","8f5855e1":"code","c1358644":"code","6e1d7cb6":"markdown","3d6bc1fe":"markdown","0ebb8403":"markdown","6fa0beda":"markdown","b5390465":"markdown","3af1edae":"markdown","eb1592c7":"markdown","9157b149":"markdown","40c736f5":"markdown"},"source":{"9e4a473a":"## Importing python packages\nimport pandas as pd\nimport matplotlib.pyplot as plt\nimport seaborn as sns\nimport plotly.express as px\nimport numpy as np","77694b9a":"p = pd.read_csv(\"..\/input\/purchase-behavior-dataset\/purchase behaviou dataset.csv\")\np","2d513f7c":"t = pd.read_excel(\"..\/input\/quantum-data\/QVI_transaction_data.xlsx\")\nt","562a684f":"## Merge QVI_purchase_behaviour & QVI_transaction_data tables \nFinal_data = pd.merge(t,p[['LYLTY_CARD_NBR', 'LIFESTAGE', 'PREMIUM_CUSTOMER']],\n                 on='LYLTY_CARD_NBR')\nFinal_data.head()","4a40ed12":"## Check None Values\nFinal_data.isna().sum()\n","1a91c863":"## Check unique values of PREMIUM_CUSTOMER\nFinal_data['PREMIUM_CUSTOMER'].unique()","a37ea292":"## Check unique values of LIFESTAGE\n\nFinal_data['LIFESTAGE'].unique()","9ec3325e":"Final_data.info()","b158e3b9":"## Convert data types for further anaylsis\nFinal_data['STORE_NBR']=Final_data['STORE_NBR'].astype(str)\nFinal_data['LYLTY_CARD_NBR']=Final_data['LYLTY_CARD_NBR'].astype(str)\nFinal_data['TXN_ID']=Final_data['TXN_ID'].astype(str)\nFinal_data['PROD_NBR']=Final_data['PROD_NBR'].astype(str)\nFinal_data['PROD_NAME']=Final_data['PROD_NAME'].astype(str)","bca7f886":"Final_data.info()","8d492b84":"Final_data.describe()","68ec7736":"## Check outliers of PROD_QTY & remove it\nplt.figure(figsize=(8,4),dpi=100)\nsns.boxplot(Final_data['PROD_QTY'])","c92defbb":"Final_data[Final_data.PROD_QTY == 200]\n","6a3bf868":"Final_data =Final_data[Final_data['PROD_QTY'] < 200].reset_index(drop=True)\n","dd763635":"## Check outliers of TOT_SALES & remove it\nplt.figure(figsize=(8,4),dpi=100)\nsns.boxplot(Final_data['TOT_SALES'])","3b744ebf":"Final_data[Final_data.TOT_SALES >= 15]\n","e7becfe3":"Final_data =Final_data[Final_data['TOT_SALES'] <= 15].reset_index(drop=True)\n","479e768b":"Final_data.describe()","d365fa31":"## check unique values of PROD_NAME\nFinal_data['PROD_NAME'].unique()[:20]","6bc6351c":"## Remove salsa products as it's not relevant to our anaylsis which focus on chips products\ndef remove_prod(df):\n    unwanted = \"salsa\"\n    if unwanted in df[\"PROD_NAME\"].lower().split():\n        return df.name","e4b22c78":"drop_index = list(Final_data.apply(remove_prod,axis=1))\n","71b13797":"old_df = Final_data.copy()\nFinal_data = Final_data.drop([i for i in drop_index if ~np.isnan(i)])","6e8f4130":"Final_data['PROD_NAME'].unique()[:20]","a6fbe979":"Final_data['Pack_Size'] = Final_data.PROD_NAME.str[-4:]\nFinal_data['Pack_Size']","c2ef1df5":"def Brand(grp):\n    return grp[\"PROD_NAME\"].split()[0]","ceefa089":"Final_data[\"Brand\"] = Final_data.apply(Brand,axis=1)\n","28c1898e":"## Some Brands have a short form rather than original name \nFinal_data['Brand'].unique()","e62039a8":"new = {'Red':'RRD','ww':'WOOLWORTHS','snbts':'SUNBITES','infzns':'INFUZIONS','smith':'SMITHS','dorito':'DORITOS','grain':'GRNWVES'}\nFinal_data['BRAND'] = Final_data['Brand'].str.lower().replace(new).str.upper()\n","140117da":"Final_data['Brand'].unique()","30f496b8":"plt.figure(figsize=(10,4),dpi=100);\ncounts=Final_data.groupby('PREMIUM_CUSTOMER')['TOT_SALES'].sum().sort_values(ascending=False)\ncounts.plot.pie(autopct='%1.1f%%')\nplt.show()","d29f946b":"## Distribution of Total Sales for PREMIUM_CUSTOMER\npx.bar(round(Final_data.groupby('PREMIUM_CUSTOMER', as_index=False).sum(),1), y=\"PREMIUM_CUSTOMER\",   x = 'TOT_SALES', range_x = [0,700000],\n        color = 'PREMIUM_CUSTOMER', height = 250,text = 'PREMIUM_CUSTOMER')","43d764e8":"## Distribution of Total Sales for PROD_QTY\npx.bar(round(Final_data.groupby('PREMIUM_CUSTOMER', as_index=False).sum(),1), y = 'PREMIUM_CUSTOMER', x = 'PROD_QTY', range_x = [0,180000],\n        color = 'PREMIUM_CUSTOMER', height = 250,text = 'PROD_QTY')","f772bf00":"## Total Transcation of PREMIUM_CUSTOMER & LIFESTAGE\n\nplt.figure(figsize=(21,4))\n\nplt.subplot(131)\nplt.title('Lifestage Distribution of Budget Customers',{'fontsize': 15})\nplt.ylabel(\"NO.of Transactions\",{\"fontsize\":12})\nFinal_data.groupby(\"PREMIUM_CUSTOMER\").LIFESTAGE.value_counts()['Budget'].plot(kind='bar',fontsize=12)\n\nplt.subplot(132)\nplt.ylabel(\"NO.of Transactions\",{\"fontsize\":12})\nplt.title('Lifestage Distribution of Mainstream Customers',{'fontsize': 15})\nFinal_data.groupby(\"PREMIUM_CUSTOMER\").LIFESTAGE.value_counts()['Mainstream'].plot(kind='bar',fontsize=12)\n\nplt.subplot(133)\nplt.ylabel(\"NO.of Transactions\",{\"fontsize\":12})\nplt.title('Lifestage Distribution of Premium Customers',{'fontsize': 15})\nFinal_data.groupby(\"PREMIUM_CUSTOMER\").LIFESTAGE.value_counts()['Premium'].plot(kind='bar',fontsize=12)","dd395139":"## Top Brands \nFinal_data.Brand.value_counts().plot(kind='barh',figsize=(14,6))\nplt.xlabel('NO.of Transactions',{'fontsize':12})\nplt.ylabel('Brands',{'fontsize':12})","8f5855e1":"## Top Pack Size  \n\n\nFinal_data.Pack_Size.value_counts().plot(kind='bar',figsize=(14,6))\nplt.xlabel('Packets Size',{'fontsize':12})\nplt.ylabel('Counts',{'fontsize':12})","c1358644":"#Product Sales by Premium customer & Life stage\nplt.figure(figsize=(8,4),dpi=130)\nFinal_data.groupby(['LIFESTAGE','PREMIUM_CUSTOMER'])['TOT_SALES'].sum().sort_values(ascending=False).plot.bar()","6e1d7cb6":"# 1- Ask (Questions & Business tasks)\n****Business task****\n\nWhich Segment should be targeting?\n\n****Stakeholders****\n\nJulia the Category Manager\n","3d6bc1fe":"****Where is your data located?****\n\nInternal data in the company database (CSV & XLXS) file types.\n\nThe data has been made available by Quontium under this license (https:\/\/www.theforage.com\/modules\/NkaC7knWtjSbi6aYv\/Dow9ZpbYKSGC5yHau?ref=hhxMS8cxj3HTTPxRX)\n\nWe have data from 2018 to 2019 transactions\n\n****LIFESTAGE:**** Customer attribute that identifies whether a customer has a family or not and what point in life they are at e.g. are their children in pre-school\/primary\/secondary school.\n\n****PREMIUM_CUSTOMER:**** Customer segmentation used to differentiate shoppers by the price point of products they buy and the types of products they buy. It is used to identify whether customers may spend more for quality or brand or whether they will purchase the cheapest options.","0ebb8403":"# 4- Analyze (calculations and trends and relationships)\n\n\n\n\n","6fa0beda":"# Introduction\n\nThis intership with https:\/\/www.theforage.com\/ Bite-sized 5-6 hour virtual work experience programs with Fortune 500 companies\n\nAbout the dataset\n\nOur client is a company that owns several hypermarkets in the region that sells different types of products, the client wants to better understand the types of customers who purchase Chips and their purchasing behaviour within the region.\n\nThe client has provided us with two datasets related to chips transactions:\n\n* Transactions dataset\n* Customers dataset   \n    \nTo answers the business questions, I follow 6 steps of the data analysis process\n\n* Ask\n* Prepare\n* Process\n* Analyze\n* Share\n* Act\n\n","b5390465":"# 3- Process (cleaning and manipulation of data)","3af1edae":"****Creating new columns for further anaylsis:****\n\n* Pack_Size\n* Brand\n","eb1592c7":"***Insights***\n\n* Mainstream is driving 39% of total Sales for PREMIUM_CUSTOMER.\n* Kettle products are most popular among the most purchasing segment.\n* 175G is a Popluar Package Size\n\n***Recommendations***\n\n* Focus on Mainstream & Budget Customers \n* Focus on Kettle, Smiths, Pringles, and Doritios Chips \n* Top Segment to tareget \n    * Older Family - Budget.\n    * Young Single Couple - Mainstream. \n    * Retiress - Mainstream.\n    * Young Family - Bduget. \n\n","9157b149":"# 2- Prepare (description of all data sources used)\n","40c736f5":"# 5- Share (key findings from anaylsis)"}}