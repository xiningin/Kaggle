{"cell_type":{"10e30e97":"code","cb84c054":"code","46bcc5ae":"code","893f9426":"code","0a3db941":"code","812ff29c":"code","1021a1c1":"code","559067a5":"code","7b62070e":"code","aa1023a6":"markdown"},"source":{"10e30e97":"#install h2o\n!pip install h2o\nimport h2o\nfrom h2o.automl import H2OAutoML\n\n#initialize h2o server\nh2o.init()","cb84c054":"#load the data into h2o frames\ndata = h2o.import_file('https:\/\/raw.githubusercontent.com\/dphi-official\/Datasets\/master\/Census_Income\/Training_set_census.csv')\nval = h2o.import_file('https:\/\/raw.githubusercontent.com\/dphi-official\/Datasets\/master\/Census_Income\/Testing_set_census.csv')\n\n#split data into train and test datasets with 80:20 ratio\ntrain, test = data.split_frame(ratios=[0.8])","46bcc5ae":"#remove target variable from features\nx = train.columns\nx.remove('income_level')\n\n#assign target variable column name to y\ny = 'income_level'\n\n#for binary classification, response should be a factor\ntrain[y] = train[y].asfactor()\ntest[y] = test[y].asfactor()\n","893f9426":"#specify maximum number of models to try and the seed.\naml = H2OAutoML(max_models = 20, seed = 1)\n\n#train the model\naml.train(x=x, y=y, training_frame=train)","0a3db941":"#predict dependent variable values for test dataset\ny_pred = aml.predict(test)","812ff29c":"#get automl leaderboard to view model_id and its evaluation scores. \nlb = h2o.automl.get_leaderboard(aml, extra_columns = 'ALL')\nlb","1021a1c1":"#predict dependent variable values for new test dataset - val\nsubmission_pred = aml.predict(val)","559067a5":"#convert the dependent variable prediction values of new test dataset - val into pandas DataFrame\nimport pandas as pd\nsubmit =pd.DataFrame({'income_level':submission_pred.as_data_frame(use_pandas=True)['predict'].tolist()})","7b62070e":"#convert the pandas DataFrame to csv file and store it on \/kaggle\/working folder\nsubmit.to_csv('\/kaggle\/working\/sample_submission.csv',index=False)","aa1023a6":"# [DPhi Datathon](<https:\/\/dphi.tech\/>)  \n# Data Sprint 1 - Census Income\n# Predict Income Level\n\n## Context\n### What is Census?\n\nThe United Nations defines a population census as the total process of collecting, compiling, and publishing demographic, economic, and social data pertaining to a specific time to all persons in a country or delimited part of a country.\n\nThere are many variables to consider when doing a population census. This dataset contains the grouped and collected census data from the 1994 and 1995 population surveys conducted by the US Census Bureau.\n\n## Objective\n\nThe task is to build machine learning models to predict the income level (target variable) of the related collaborators in the evaluation set, **0 being a collaborator who has an income less than 50,000 USD annually, and 1 a collaborator who has an income equal to or greater than 50,000 USD annually.**\n\n## Evaluation Criteria\n\nSubmissions are evaluated using **F1 Score.**"}}