{"cell_type":{"bf4ff347":"code","8f4e8242":"code","e5b34efa":"code","0f281eb7":"code","71d5a6a1":"code","b562dbd2":"code","1993a004":"code","fe0dbe5f":"code","855b8ac5":"code","79b59f8c":"code","742c2401":"code","ed8b1c71":"code","c7a4034e":"code","07a91845":"code","fa84d2d1":"markdown","2d450b0b":"markdown","20b5b562":"markdown","89dc1248":"markdown","e73e9ad8":"markdown","14f154fa":"markdown","52368b7d":"markdown","5ca1053f":"markdown","ddbc65be":"markdown","122c8cbc":"markdown","8f60f063":"markdown","5c475d94":"markdown","eb1908ef":"markdown","6941f16b":"markdown"},"source":{"bf4ff347":"! pip install -U scikit-fuzzy","8f4e8242":"from skfuzzy import control as ctrl\nimport matplotlib as plt\nimport skfuzzy as fuzz\nimport pandas as pd\nimport numpy as np","e5b34efa":"import warnings\nwarnings.filterwarnings(\"ignore\")","0f281eb7":"score_mercado = ctrl.Antecedent(np.arange(0, 1001, 1), 'score_mercado')\nscore_interno = ctrl.Antecedent(np.arange(0, 1001, 1), 'score_interno')\nengajamento = ctrl.Antecedent(np.arange(0, 5000, 1), 'engajamento')\n\npolitica_cliente = ctrl.Consequent(np.arange(0, 1001, 1), 'politica_de_risco')","71d5a6a1":"score_mercado['RATING 1'] = fuzz.trimf(score_mercado.universe, [890, 900, 1000])\nscore_mercado['RATING 2'] = fuzz.trimf(score_mercado.universe, [750, 800, 890])\nscore_mercado['RATING 3'] = fuzz.trimf(score_mercado.universe, [570, 700, 750])\nscore_mercado['RATING 4'] = fuzz.trimf(score_mercado.universe, [390, 500, 570])\nscore_mercado['RATING 5'] = fuzz.trimf(score_mercado.universe, [240, 300, 390])\nscore_mercado['RATING 6'] = fuzz.trimf(score_mercado.universe, [0, 200, 240])\n\nscore_interno['RATING 1'] = fuzz.trimf(score_interno.universe, [890, 900, 1000])\nscore_interno['RATING 2'] = fuzz.trimf(score_interno.universe, [750, 800, 890])\nscore_interno['RATING 3'] = fuzz.trimf(score_interno.universe, [570, 700, 750])\nscore_interno['RATING 4'] = fuzz.trimf(score_interno.universe, [390, 500, 570])\nscore_interno['RATING 5'] = fuzz.trimf(score_interno.universe, [240, 300, 390])\nscore_interno['RATING 6'] = fuzz.trimf(score_interno.universe, [0, 200, 240])\n\n\nengajamento['alto'] = fuzz.trimf(engajamento.universe, [300, 1000, 5000])\nengajamento['medio'] = fuzz.trimf(engajamento.universe, [100, 200, 300])\nengajamento['baixo'] = fuzz.trimf(engajamento.universe, [0, 50, 100])","b562dbd2":"politica_cliente['grau de risco 1'] = fuzz.trimf(politica_cliente.universe, [850, 950, 1000])\npolitica_cliente['grau de risco 2'] = fuzz.trimf(politica_cliente.universe, [750, 850, 900])\npolitica_cliente['grau de risco 3'] = fuzz.trimf(politica_cliente.universe, [650, 750, 800])\npolitica_cliente['grau de risco 4'] = fuzz.trimf(politica_cliente.universe, [250, 500, 700])\npolitica_cliente['grau de risco 5'] = fuzz.trimf(politica_cliente.universe, [0, 250, 300])\n","1993a004":"politica_cliente.view()","fe0dbe5f":"rule1 = ctrl.Rule(engajamento['baixo'] & (score_mercado['RATING 6'] | score_interno['RATING 6']) | (score_mercado['RATING 5'] | score_interno['RATING 5']) | (score_mercado['RATING 4'] | score_interno['RATING 4']) | (score_mercado['RATING 3'] | score_interno['RATING 3']), politica_cliente['grau de risco 5'])\nrule2 = ctrl.Rule(engajamento['baixo'] & (score_mercado['RATING 1'] | score_interno['RATING 1']) | (score_mercado['RATING 2'] | score_interno['RATING 2']),  politica_cliente['grau de risco 4'])\n\nrule3 = ctrl.Rule(engajamento['medio'] & (score_mercado['RATING 6'] | score_interno['RATING 6']) | (score_mercado['RATING 5'] | score_interno['RATING 5']) | (score_mercado['RATING 4'] | score_interno['RATING 4']),  politica_cliente['grau de risco 5'])\nrule4 = ctrl.Rule(engajamento['medio'] & (score_mercado['RATING 1'] | score_interno['RATING 1']) | (score_mercado['RATING 2'] | score_interno['RATING 2']) | (score_mercado['RATING 3'] | score_interno['RATING 3']),  politica_cliente['grau de risco 4'])\n\nrule5 = ctrl.Rule(engajamento['alto'] & (score_mercado['RATING 6'] | score_interno['RATING 6']),  politica_cliente['grau de risco 4'])\nrule6 = ctrl.Rule(engajamento['alto'] & (score_mercado['RATING 5'] | score_interno['RATING 5']) | (score_mercado['RATING 4'] | score_interno['RATING 4']),  politica_cliente['grau de risco 3'])\nrule7 = ctrl.Rule(engajamento['alto'] & (score_mercado['RATING 3'] | score_interno['RATING 3']),  politica_cliente['grau de risco 2'])\nrule8 = ctrl.Rule(engajamento['alto'] & (score_mercado['RATING 1'] | score_interno['RATING 1']) | (score_mercado['RATING 2'] | score_interno['RATING 2']),  politica_cliente['grau de risco 1'])\n","855b8ac5":"# rule1.view()","79b59f8c":"politica_ctrl = ctrl.ControlSystem([rule1,rule2, rule3, rule4, rule5, rule6, rule7, rule8])\npolitica_simulador = ctrl.ControlSystemSimulation(politica_ctrl)","742c2401":"politica_simulador.input['score_mercado'] = 2\npolitica_simulador.input['score_interno'] = 230\npolitica_simulador.input['engajamento'] = 90","ed8b1c71":"politica_simulador.compute()","c7a4034e":"score_mercado.view(sim=politica_simulador)\nscore_interno.view(sim=politica_simulador)\nengajamento.view(sim=politica_simulador)","07a91845":"print(politica_simulador.output['politica_de_risco'])\npolitica_cliente.view(sim=politica_simulador)","fa84d2d1":"\nUma fun\u00e7\u00e3o de pertin\u00eancia personalizada pode ser constru\u00edda de forma interativa com uma  API Pythonic\n","2d450b0b":"### Simula\u00e7\u00e3o\nPasse entradas para o ControlSystem usando r\u00f3tulos Antecedent com ***Pythonic API*** \n\n\n``Nota: se voc\u00ea gosta de passar muitas entradas de uma s\u00f3 vez, use .inputs (dict_of_data)``","20b5b562":"# Deffuzifica\u00e7\u00e3o","89dc1248":"### Defini\u00e7\u00f5es de neg\u00f3cio\nPara simplifica\u00e7\u00e3o, vamos considerar que os clientes com grau de risco 5,4 n\u00e3o ser\u00e3o aprovados, logo, os clientes com grau de risco 1,2,3 ser\u00e3o aprovados.\n\nAtrav\u00e9s da nossa pol\u00edtica aplicada podemos observar que o cliente possue uma tend\u00eancia para inadimpl\u00eancia com o **grau de risco 5**.\n","e73e9ad8":"# Maquina de Infer\u00eancia","14f154fa":"# Regras Fuzzy\nAgora, para tornar esses tri\u00e2ngulos \u00fateis, definimos a rela\u00e7\u00e3o fuzzy entre as vari\u00e1veis de entrada e sa\u00edda. Para os prop\u00f3sitos do nosso exemplo, considere as seguintes regras simples:\n\nAs regras que criaremos para a pol\u00edtica s\u00e3o:\n- SE engajamento **Baixo** E (Rating Motorista E Rating de Mercado 6,5,4 ou 3) ENT\u00c3O **Grau de risco 5**\n- SE engajamento **Baixo** E (Rating Motorista E Rating de Mercado 1,2) ENT\u00c3O **Grau de risco 4**\n- SE engajamento **M\u00e9dio** E (Rating Motorista E Rating de Mercado 6,5,4) ENT\u00c3O **Grau de risco 5**\n- SE engajamento **M\u00e9dio** E (Rating Motorista E Rating de Mercado 1,2,3) ENT\u00c3O **Grau de risco 3**\n- SE engajamento **Alto** E (Rating Motorista E Rating de Mercado 6) ENT\u00c3O **Grau de risco 4**\n- SE engajamento **Alto** E (Rating Motorista E Rating de Mercado 4,5) ENT\u00c3O **Grau de risco 3**\n- SE engajamento **Alto** E (Rating Motorista E Rating de Mercado 3) ENT\u00c3O **Grau de risco 2**\n- SE engajamento **Alto** E (Rating Motorista E Rating de Mercado 1,2) ENT\u00c3O **Grau de risco 1**\n\n\nA maioria das pessoas concordaria com essas regras, mas as regras ainda s\u00e3o confusas.\nMapear as regras imprecisas em um score bem definido e acion\u00e1vel \u00e9 um desafio, por\u00e9m, esse \u00e9 o tipo de tarefa na qual a l\u00f3gica fuzzy \u00e9 excelente.\n","52368b7d":"#  Modelagem de pol\u00edtica de cr\u00e9dito simplificada usando l\u00f3gica fuzzy\n\nPara o nosso exemplo simplificado o score varia de 0-1000, em que 0 indica um cliente ruim e 1000 um cliente bom.\n","5ca1053f":"Fun\u00e7\u00e3o simples, trapezoidal(cabe uma valida\u00e7\u00e3o das melhores fun\u00e7\u00e3o de pertin\u00eancia para cada vari\u00e1vel) ","ddbc65be":"#### Importando as bibliotecas","122c8cbc":"Voc\u00ea pode ver como elas se parecem com .view () ","8f60f063":"# Fuzzifica\u00e7\u00e3o","5c475d94":"# Vari\u00e1veis Linguisticas. Termos Linguisticos","eb1908ef":"# Final","6941f16b":"Se Antecedente Ent\u00e3o Consequente\n\nNovos objetos Antecedent \/ Consequent possuem vari\u00e1veis de universo e n\u00famero de associa\u00e7\u00e3o\n"}}