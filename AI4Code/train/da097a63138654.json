{"cell_type":{"6208f5ba":"code","4f858abc":"code","4f3249e3":"code","bd2e2258":"code","f7ff00b0":"code","b4e3dfd7":"code","e92b9089":"code","cc825e64":"code","14be1105":"code","b279337d":"code","4ecbd803":"code","dfed8213":"code","d50c251a":"code","1b77d8c0":"code","dbcf8bb5":"code","25f6072a":"code","fbe2541d":"markdown","c5ab19fb":"markdown","bb38d190":"markdown","30a9db87":"markdown","0af5ab59":"markdown","8dcc7b9d":"markdown","6871f654":"markdown"},"source":{"6208f5ba":"import pandas as pd\ngoogle_df=pd.read_csv(\"\/kaggle\/input\/enriched-global-mobility-data-apple-google\/google_mobility.csv\")\n","4f858abc":"len(google_df.country_region.unique())","4f3249e3":"google_df[\"retail_and_recreation_percent_change_from_baseline\"]","bd2e2258":"google_df[\"parks_percent_change_from_baseline\"]","f7ff00b0":"def changeFromPercent(x):\n    if x!=0:\n        return (1+(x\/100))*100\n\n    else:\n        return 100","b4e3dfd7":"google_df[\"retail_and_recreation_percent_change_from_baseline\"]=google_df[\"retail_and_recreation_percent_change_from_baseline\"].apply(changeFromPercent)\ngoogle_df[\"grocery_and_pharmacy_percent_change_from_baseline\"]=google_df[\"grocery_and_pharmacy_percent_change_from_baseline\"].apply(changeFromPercent)\ngoogle_df[\"parks_percent_change_from_baseline\"]=google_df[\"parks_percent_change_from_baseline\"].apply(changeFromPercent)\ngoogle_df[\"transit_stations_percent_change_from_baseline\"]=google_df[\"transit_stations_percent_change_from_baseline\"].apply(changeFromPercent)\ngoogle_df[\"workplaces_percent_change_from_baseline\"]=google_df[\"workplaces_percent_change_from_baseline\"].apply(changeFromPercent)\ngoogle_df['residential_percent_change_from_baseline']=google_df['residential_percent_change_from_baseline'].apply(changeFromPercent)","e92b9089":"google_df","cc825e64":"google_df.drop([\"wikidata\",\"sub_region_1\",\"sub_region_2\"],axis=1,inplace=True)","14be1105":"import datetime\n\nstring = \"2020-02-15\"\ndate = datetime.datetime.strptime(string, \"%Y-%m-%d\")\nprint(date.timetuple().tm_yday)\nprint(date.day)","b279337d":"def stripthedate(x):\n    return datetime.datetime.strptime(x, \"%Y-%m-%d\")\n      \n    \n       \n\ngoogle_df[\"day\"]=google_df[\"date\"].apply(stripthedate)\ngoogle_df[\"month\"]=google_df[\"date\"].apply(stripthedate)\ngoogle_df[\"year\"]=google_df[\"date\"].apply(stripthedate)\ngoogle_df[\"day_in_year\"]=google_df[\"date\"].apply(stripthedate)\n\n       \n\ngoogle_df[\"day\"]=google_df[\"day\"].apply(lambda x: int(x.day))\ngoogle_df[\"month\"]=google_df[\"month\"].apply(lambda x: int(x.month))\ngoogle_df[\"year\"]=google_df[\"year\"].apply(lambda x: int(x.year))\ngoogle_df[\"day_in_year\"]=google_df[\"day_in_year\"].apply(lambda x: int(x.timetuple().tm_yday))","4ecbd803":"retail='retail_and_recreation_percent_change_from_baseline'\n\ngrocery='grocery_and_pharmacy_percent_change_from_baseline'\nparks=   'parks_percent_change_from_baseline'\ntransit=  'transit_stations_percent_change_from_baseline'\nworkplace= 'workplaces_percent_change_from_baseline'\nresidential= 'residential_percent_change_from_baseline'","dfed8213":"india_df=google_df[google_df[\"country_region\"]==\"India\"]\nindia_df[\"day\"]","d50c251a":"#!pip install -U vega_datasets notebook vega","1b77d8c0":"\nimport altair_render_script","dbcf8bb5":"\nimport altair as alt\nimport json\n\n\n#alt.renderers.enable('kaggle')\na=alt.Chart(india_df).transform_fold([grocery,parks,residential,workplace,transit],as_=[\"pro\",\"values\"]).mark_area().encode(\n    alt.X('day_in_year:Q'),\n    alt.Y('values:Q'),  alt.Color('pro:N'),\n    alt.Row(\"pro:N\"),\n    ).properties(\n    \n    \n).interactive(bind_y=False)\na\n","25f6072a":"alt.Chart(india_df.groupby([\"month\"]).sum().reset_index()).transform_fold([grocery,parks,residential,workplace,transit],as_=[\"pro\",\"values\"]).mark_bar().encode(\n    alt.X('pro:O',axis=alt.Axis(labels=False),title=None),\n    alt.Y('values:Q',axis=alt.Axis(labels=False)),  alt.Color('pro:N',title=None),\n    alt.Column('month:N')\n   ).interactive()","fbe2541d":"<h4> Now using datetime from python we seperate the datetime given into days months and year column for","c5ab19fb":"<h4> Just deleting some unwanted columns","bb38d190":"<h3>About the Apple Data\nThe CSV file and charts on this site show a relative volume of directions requests per country\/region, sub-region or city compared to a baseline volume on 13 January 2020. We define our day as midnight-to-midnight, US Pacific time. Cities are defined as the greater metropolitan area and their geographic boundaries remain constant across the data set. In many countries\/regions, sub-regions and cities, relative volume has increased since 13 January, consistent with normal, seasonal usage of Apple Maps. Day of week effects are important to normalise as you use this data. Data that is sent from users\u2019 devices to the Maps service is associated with random, rotating identifiers so Apple does not have a profile of individual movements and searches. Apple Maps has no demographic information about users, so we cannot make any statements about the representativeness of our usage against the overall population.","30a9db87":"<h3> from this link <a href=\"https:\/\/www.google.com\/covid19\/mobility\/data_documentation.html?hl=en#about-this-data\">here<\/a>\nwe know that the baseline from which the columns retail,workplaces....The baseline is the median value, for the corresponding day of the week, during the 5-week period Jan 3\u2013Feb 6, 2020.\n<p>Let us assume the baseline to be 100 so -1 is basically 99 +1 is 101 ... and so on we change the columns<\/p>","0af5ab59":"<h4> Here I try and find out the country regions how many are there<\/h4>","8dcc7b9d":"<h1> HERE WE NEED TO SET UP THE RENDER FOR ALTAIR\n<\/h1>\n<h4> I have made a utility script so you can add it  to your kernel as an utility script, <a href=\"https:\/\/www.kaggle.com\/omegaji\/altair-render-script\"> click here<\/a>","6871f654":"<h4> knowing that from datetime I can easily get day,month,year I also extract the day of the year, so I can use it easily in plotting as a variable\n<h4> so lets get to it!"}}