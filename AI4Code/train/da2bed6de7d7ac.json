{"cell_type":{"d01022df":"code","a4ed76a2":"code","d93e6f6a":"code","c46df069":"code","9a53a01b":"code","232199b5":"code","bc87ed5c":"code","c294042b":"code","bca761d8":"code","a7abf332":"code","436c784c":"code","49a6a0e2":"code","cc614ba6":"code","7ca72da0":"code","bccf5ba4":"markdown","a307e855":"markdown","6de0421d":"markdown","589aab84":"markdown","83f0847b":"markdown","0f3c3d57":"markdown","b97f6efa":"markdown","dd386735":"markdown","11cc5fc4":"markdown","5da0d9ad":"markdown","96da6f08":"markdown","c89e548d":"markdown","f1cf98b8":"markdown","d063006c":"markdown"},"source":{"d01022df":"!pip install yfinance --upgrade --no-cache-dir","a4ed76a2":"import numpy as np\nimport matplotlib.pyplot as plt\nimport pandas as pd\nimport datetime as dt\nimport yfinance as yf","d93e6f6a":"\nsymbols_list = ['FB','BIDU','WB','QTT','^IXIC']\nstart = dt.datetime(2018,9,24)\nend = dt.datetime(2021,9,24)\ndata = yf.download(symbols_list, start=start, end=end)\ndata.info()\n","c46df069":"data.head()","9a53a01b":"df = data.reset_index()\ndf.info()","232199b5":"# filter column adjusted close\ndf = df[['Date','Adj Close']]\ndf.info()","bc87ed5c":"# create variables\ndf['Month'] = df['Date'].dt.month\ndf['BIDU_return'] = df['Adj Close']['BIDU'].pct_change()\ndf['FB_return'] = df['Adj Close']['FB'].pct_change()\ndf['QTT_return'] = df['Adj Close']['QTT'].pct_change()\ndf['WB_return'] = df['Adj Close']['WB'].pct_change()\ndf['^IXIC_return'] = df['Adj Close']['^IXIC'].pct_change()\ndf['ad-dep-return'] = (df['BIDU_return']+df['QTT_return']+df['WB_return']+df['FB_return'])\/4\n# 'ad-dep-return' captures the adverage return of the four tech companies\ndf['ad-dep-return-diff-wrpt-market'] = df['ad-dep-return']-df['^IXIC_return']\n# 'ad-dep-return-diff-wrpt-market' captures the difference between the average return of the four tech companies and return of Nasdaq Composite","c294042b":"df.tail()","bca761d8":"df.plot.scatter(x='Month', y='ad-dep-return-diff-wrpt-market',figsize=(20,10))\nplt.title(\"Differece in return of stocks whose revenue are dependent on advertisement revenue vs market return in different months\")\nplt.ylabel(\"Differece in return of stocks whose revenue are dependent on advertisement revenue vs market return\")\n\n\ndf['Date']\ndf['Month']\n\nfeb_release_returns = df[df.Month ==2][1:]\nmar_release_returns = df[df.Month ==3][1:]\napr_release_returns = df[df.Month ==4][1:]\nmay_release_returns = df[df.Month ==5][1:]\njun_release_returns = df[df.Month ==6][1:]\n\npreQ1release_returns = pd.concat([feb_release_returns,mar_release_returns])\npostQ1release_returns = pd.concat([may_release_returns,jun_release_returns])\n\n","a7abf332":"postQ1release_returns.describe()","436c784c":"preQ1release_returns.describe()\n","49a6a0e2":"import scipy.stats as stats\n\nprint(\"Difference in mean return: \")\nprint((preQ1release_returns['ad-dep-return-diff-wrpt-market'].mean() - postQ1release_returns['ad-dep-return-diff-wrpt-market'].mean())*100)\n\nstat, p = stats.ttest_ind(preQ1release_returns['ad-dep-return-diff-wrpt-market'], postQ1release_returns['ad-dep-return-diff-wrpt-market'], equal_var=False)\n\n# interpret p-value \nalpha = 0.05\nprint(\"p value is \" + str(p)) \nif p <= alpha: \n    print('The difference in mean return is significantly different (reject H0)') \nelse: \n    print('The difference in mean return is not significantly different (fail to reject H0)') ","cc614ba6":"# Bootstrapping draws random sample (with replacement) from the actual data with each draw the same size as the actual data\n# The rationale to have the same sample size as the actual data for each draw is detailed here: \n# https:\/\/stats.stackexchange.com\/questions\/263710\/why-should-boostrap-sample-size-equal-the-original-sample-size\/275746\nnp.random.seed(1)\n\ndef bootstrap_replicate(data, func):\n    # bootstrap from actual data\n    # draw random sample from actual data with replacement\n    # sample size is the number of observations of the actual data\n    bs_sample = np.random.choice(data, len(data))\n\n    # return the mean of a draw\n    return func(bs_sample)\n\n\n# draw bootstrap replicates\ndef draw_bs_reps(data, func, size=1):\n\n    # initialize a numpy array of the dimension size\n    bs_replicates = np.empty(size)\n    \n    # call function bootstrap_replicate\n    for i in range(size):\n        bs_replicates[i] = bootstrap_replicate(data,func)\n\n    # return a numpy array of the means of draws\n    return bs_replicates\n\n# bootstrap from actual samples\n# note that this is not sample randomly drawn from a theoretical population \nbs_replicates_pre = draw_bs_reps(preQ1release_returns['ad-dep-return-diff-wrpt-market'], np.mean, size=10000)\nbs_replicates_post = draw_bs_reps(postQ1release_returns['ad-dep-return-diff-wrpt-market'], np.mean, size=10000)\n\nplt.hist(bs_replicates_pre-bs_replicates_post, bins=50, density=True, alpha = .8, color = 'red')\nplt.xlabel('The bootstrapped difference')\nplt.ylabel('P(X = x)')\nplt.title('Probability Density Function')\npre_sample_mean=preQ1release_returns['ad-dep-return-diff-wrpt-market'].mean\npost_sample_mean=postQ1release_returns['ad-dep-return-diff-wrpt-market'].mean\nsample_mean=preQ1release_returns['ad-dep-return-diff-wrpt-market'].mean() - postQ1release_returns['ad-dep-return-diff-wrpt-market'].mean()","7ca72da0":"gt_sample_mean = bs_replicates[np.where(bs_replicates>sample_mean)]\nbs_p_value = len(gt_sample_mean)\/len(bs_replicates)\nprint(\"Bootstrapped P-value : \", str(bs_p_value))","bccf5ba4":"### Comment: What do \"ad-dep-return\" and \"ad-dep-return-diff-wrpt-market\" stand for?","a307e855":"Conclusion:The hypothesis tesing fail the reject the null hypothesis H0 at 5% level of significance, there is no strong evidence against the cliam that the return of stock of companies whose revenue are very dependent on their advertisement revenue in months following the release of their Q1 report will not be significantly different from the market return captured by Nasdaq at 5% level of significance.\n","6de0421d":"<a style='text-decoration:none;line-height:16px;display:flex;color:#5B5B62;padding:10px;justify-content:end;' href='https:\/\/deepnote.com?utm_source=created-in-deepnote-cell&projectId=230890c6-23b5-4c24-abe5-dcaeee5141e4' target=\"_blank\">\n<img alt='Created in deepnote.com' style='display:inline;max-height:16px;margin:0px;margin-right:7.5px;' src='data:image\/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPHN2ZyB3aWR0aD0iODBweCIgaGVpZ2h0PSI4MHB4IiB2aWV3Qm94PSIwIDAgODAgODAiIHZlcnNpb249IjEuMSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayI+CiAgICA8IS0tIEdlbmVyYXRvcjogU2tldGNoIDU0LjEgKDc2NDkwKSAtIGh0dHBzOi8vc2tldGNoYXBwLmNvbSAtLT4KICAgIDx0aXRsZT5Hcm91cCAzPC90aXRsZT4KICAgIDxkZXNjPkNyZWF0ZWQgd2l0aCBTa2V0Y2guPC9kZXNjPgogICAgPGcgaWQ9IkxhbmRpbmciIHN0cm9rZT0ibm9uZSIgc3Ryb2tlLXdpZHRoPSIxIiBmaWxsPSJub25lIiBmaWxsLXJ1bGU9ImV2ZW5vZGQiPgogICAgICAgIDxnIGlkPSJBcnRib2FyZCIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoLTEyMzUuMDAwMDAwLCAtNzkuMDAwMDAwKSI+CiAgICAgICAgICAgIDxnIGlkPSJHcm91cC0zIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgxMjM1LjAwMDAwMCwgNzkuMDAwMDAwKSI+CiAgICAgICAgICAgICAgICA8cG9seWdvbiBpZD0iUGF0aC0yMCIgZmlsbD0iIzAyNjVCNCIgcG9pbnRzPSIyLjM3NjIzNzYyIDgwIDM4LjA0NzY2NjcgODAgNTcuODIxNzgyMiA3My44MDU3NTkyIDU3LjgyMTc4MjIgMzIuNzU5MjczOSAzOS4xNDAyMjc4IDMxLjY4MzE2ODMiPjwvcG9seWdvbj4KICAgICAgICAgICAgICAgIDxwYXRoIGQ9Ik0zNS4wMDc3MTgsODAgQzQyLjkwNjIwMDcsNzYuNDU0OTM1OCA0Ny41NjQ5MTY3LDcxLjU0MjI2NzEgNDguOTgzODY2LDY1LjI2MTk5MzkgQzUxLjExMjI4OTksNTUuODQxNTg0MiA0MS42NzcxNzk1LDQ5LjIxMjIyODQgMjUuNjIzOTg0Niw0OS4yMTIyMjg0IEMyNS40ODQ5Mjg5LDQ5LjEyNjg0NDggMjkuODI2MTI5Niw0My4yODM4MjQ4IDM4LjY0NzU4NjksMzEuNjgzMTY4MyBMNzIuODcxMjg3MSwzMi41NTQ0MjUgTDY1LjI4MDk3Myw2Ny42NzYzNDIxIEw1MS4xMTIyODk5LDc3LjM3NjE0NCBMMzUuMDA3NzE4LDgwIFoiIGlkPSJQYXRoLTIyIiBmaWxsPSIjMDAyODY4Ij48L3BhdGg+CiAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMCwzNy43MzA0NDA1IEwyNy4xMTQ1MzcsMC4yNTcxMTE0MzYgQzYyLjM3MTUxMjMsLTEuOTkwNzE3MDEgODAsMTAuNTAwMzkyNyA4MCwzNy43MzA0NDA1IEM4MCw2NC45NjA0ODgyIDY0Ljc3NjUwMzgsNzkuMDUwMzQxNCAzNC4zMjk1MTEzLDgwIEM0Ny4wNTUzNDg5LDc3LjU2NzA4MDggNTMuNDE4MjY3Nyw3MC4zMTM2MTAzIDUzLjQxODI2NzcsNTguMjM5NTg4NSBDNTMuNDE4MjY3Nyw0MC4xMjg1NTU3IDM2LjMwMzk1NDQsMzcuNzMwNDQwNSAyNS4yMjc0MTcsMzcuNzMwNDQwNSBDMTcuODQzMDU4NiwzNy43MzA0NDA1IDkuNDMzOTE5NjYsMzcuNzMwNDQwNSAwLDM3LjczMDQ0MDUgWiIgaWQ9IlBhdGgtMTkiIGZpbGw9IiMzNzkzRUYiPjwvcGF0aD4KICAgICAgICAgICAgPC9nPgogICAgICAgIDwvZz4KICAgIDwvZz4KPC9zdmc+' > <\/img>\nCreated in <span style='font-weight:600;margin-left:4px;'>Deepnote<\/span><\/a>","589aab84":"### Comment: The group is recommended to state the test's conclusion again via markdown","83f0847b":"ARE RETURNS ON Months before and after Q1 results release SIGNIFICANTLY DIFFERENT? Controlling for natural growth by comparing difference between companies whose revenue come mainly from advertisement to Nasdaq composite index.","0f3c3d57":"### Comment: The group should state it testing hypothesis (both H0 and Ha).\n ","b97f6efa":".","dd386735":"### Comment: \n- We recommended the use of a chart title to explain the scatter plot. \n- It might be better to produce a bigger chart and define the y-axis using simple English.","11cc5fc4":"Therefore our hypothesis testing will be:\nH0: The return of stock of companies whose revenue are very dependent on their advertisement revenue in months following the release of their Q1 report will not be significantly different from the market return captured by Nasdaq Composite\nHa: The return of stock of companies whose revenue are very dependent on their advertisement revenue in months following the release of their Q1 report will be significantly different from the market return captured by Nasdaq Composite","5da0d9ad":"One of our group members worked as an equity research analyst. During 1Q21 earning report conference from Kuaishou, the CEO cliamed that 1Q is usually the 'quiet' season for advertisement activities as CNY happens during this period and people are generally not very engaged with all forms of advertisements. We want to test if such cliam is true. \n\nIf such claim is true, we should expect a sub-optimal topline on their earning report for companies whose revenue mainly come from advertisements. This will translate to a lower Q2 stock price as compared to other periods in the year. Since we expect stock price to slowly rise in the long run, we should control this effect by comparing the different between growth rate of these \u201cadvertisement\u201d companies with market return. We want to test if the above-mentioned difference is significantly different from 0. \n","96da6f08":"From the scatterplot, it seems that the distribution of returns different is lower in May and June as comapred to March and April","c89e548d":"### Comment: \nIt would be recommended that the group increase sample size using data prior to 2018. After all the group is looking at the 1st quarter\u2014there has only been four Q1s after 2018.\n\n","f1cf98b8":"**Respose:**\n\nsome of these tech companies have not been listed for a long time and do not have avaliable data in the older days\n","d063006c":"### Comment: Due to small sample size, bootstrap hypothesis testing is preferable"}}