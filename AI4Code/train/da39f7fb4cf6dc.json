{"cell_type":{"afe406cb":"code","bb98cc9d":"code","74ca3887":"code","baac572c":"code","99986072":"code","64e88b33":"code","51f74ea0":"code","6a828b95":"code","b328a8f9":"code","df0fc021":"code","2e99ee78":"code","df7a66b2":"code","5f86abc4":"code","c8dd0266":"code","e0b024b9":"code","7aad59ae":"code","6289698d":"code","2d04b19a":"code","7449d687":"code","061b2c60":"code","fba64581":"code","d7f74270":"code","80f65fcc":"code","08f509e6":"code","fbbeb964":"code","0ced4c1d":"code","8046a3d8":"code","6db77418":"code","00f9d4ff":"code","64784dcb":"code","a725ee44":"code","fdab0e65":"code","130010cb":"code","7f5cc900":"code","f1e1e534":"code","8fb20cfc":"code","eb32bbd2":"code","ebbf4a1e":"markdown"},"source":{"afe406cb":"import pandas as pd\nimport statsmodels.api as sm\nimport statsmodels.formula.api as smf\nimport matplotlib.pyplot as plt\nimport seaborn as sns\nfrom sklearn.cluster import KMeans\ncolor = sns.color_palette()\nfrom IPython.core.display import display, HTML\ndisplay(HTML(\"<style>.container { width:100% !important; }<\/style>\"))\n%matplotlib inline","bb98cc9d":"attendance_valuation_elo_df = pd.read_csv(\"..\/input\/nba_2017_att_val_elo.csv\");attendance_valuation_elo_df.head()","74ca3887":"salary_df = pd.read_csv(\"..\/input\/nba_2017_salary.csv\");salary_df.head()\n","baac572c":"pie_df = pd.read_csv(\"..\/input\/nba_2017_pie.csv\");pie_df.head()","99986072":"plus_minus_df = pd.read_csv(\"..\/input\/nba_2017_real_plus_minus.csv\");plus_minus_df.head()","64e88b33":"br_stats_df = pd.read_csv(\"..\/input\/nba_2017_br.csv\");br_stats_df.head()","51f74ea0":"\nplus_minus_df.rename(columns={\"NAME\":\"PLAYER\", \"WINS\": \"WINS_RPM\"}, inplace=True)\nplayers = []\nfor player in plus_minus_df[\"PLAYER\"]:\n    plyr, _ = player.split(\",\")\n    players.append(plyr)\nplus_minus_df.drop([\"PLAYER\"], inplace=True, axis=1)\nplus_minus_df[\"PLAYER\"] = players\nplus_minus_df.head()","6a828b95":"\nnba_players_df = br_stats_df.copy()\nnba_players_df.rename(columns={'Player': 'PLAYER','Pos':'POSITION', 'Tm': \"TEAM\", 'Age': 'AGE', \"PS\/G\": \"POINTS\"}, inplace=True)\nnba_players_df.drop([\"G\", \"GS\", \"TEAM\"], inplace=True, axis=1)\nnba_players_df = nba_players_df.merge(plus_minus_df, how=\"inner\", on=\"PLAYER\")\nnba_players_df.head()","b328a8f9":"\npie_df_subset = pie_df[[\"PLAYER\", \"PIE\", \"PACE\", \"W\"]].copy()\nnba_players_df = nba_players_df.merge(pie_df_subset, how=\"inner\", on=\"PLAYER\")\nnba_players_df.head()","df0fc021":"salary_df.rename(columns={'NAME': 'PLAYER'}, inplace=True)\nsalary_df[\"SALARY_MILLIONS\"] = round(salary_df[\"SALARY\"]\/1000000, 2)\nsalary_df.drop([\"POSITION\",\"TEAM\", \"SALARY\"], inplace=True, axis=1)\nsalary_df.head()","2e99ee78":"diff = list(set(nba_players_df[\"PLAYER\"].values.tolist()) - set(salary_df[\"PLAYER\"].values.tolist()))","df7a66b2":"len(diff)\n","5f86abc4":"\nnba_players_with_salary_df = nba_players_df.merge(salary_df); ","c8dd0266":"\nplt.subplots(figsize=(20,15))\nax = plt.axes()\nax.set_title(\"NBA Player Correlation Heatmap:  2016-2017 Season (STATS & SALARY)\")\ncorr = nba_players_with_salary_df.corr()\nsns.heatmap(corr, cmap='RdBu',\n            xticklabels=corr.columns.values,\n            yticklabels=corr.columns.values)","e0b024b9":"sns.lmplot(x=\"SALARY_MILLIONS\", y=\"POINTS\", data=nba_players_with_salary_df)\n","7aad59ae":"results = smf.ols('SALARY_MILLIONS ~POINTS', data=nba_players_with_salary_df).fit()\n","6289698d":"print(results.summary())\n","2d04b19a":"results = smf.ols('SALARY_MILLIONS ~FGA', data=nba_players_with_salary_df).fit()\n","7449d687":"print(results.summary())\n","061b2c60":"results = smf.ols('SALARY_MILLIONS ~FTA', data=nba_players_with_salary_df).fit()\n","fba64581":"print(results.summary())\n","d7f74270":"results = smf.ols('SALARY_MILLIONS ~MPG', data=nba_players_with_salary_df).fit()\n","80f65fcc":"print(results.summary())\n","08f509e6":"results = smf.ols('SALARY_MILLIONS ~FT', data=nba_players_with_salary_df).fit()","fbbeb964":"print(results.summary())","0ced4c1d":"results = smf.ols('SALARY_MILLIONS ~FG', data=nba_players_with_salary_df).fit()","8046a3d8":"print(results.summary())","6db77418":"from sklearn.tree import DecisionTreeRegressor  \nfrom sklearn.ensemble import RandomForestRegressor \nfrom sklearn.metrics import r2_score, mean_squared_error, mean_absolute_error\n#from sklearn.mode_selection import train_test_split\n","00f9d4ff":"nba_point = pd.DataFrame({'SALARY_MILLIONS':nba_players_with_salary_df['SALARY_MILLIONS'],'POINTS':nba_players_with_salary_df['POINTS'],'MPG':nba_players_with_salary_df['MPG'],'FG':nba_players_with_salary_df['FG'],'FGA':nba_players_with_salary_df['FGA'],'FT':nba_players_with_salary_df['FT'],'FTA':nba_players_with_salary_df['FTA']})\nnba_point.describe()","64784dcb":"target='SALARY_MILLIONS' #EXPECTED OUTPUT\nx_columns = [x for x in nba_point.columns if x not in [target]]\n\nX = nba_point[x_columns]\ny = nba_point['SALARY_MILLIONS']","a725ee44":"#x_train, x_test, y_train, y_test = train_test_split(x, y, test_size=0.25, random_state=33)","fdab0e65":"\nrf=RandomForestRegressor()\nrf1 = rf.fit(X,y) ","130010cb":"y_predprob = rf1.predict(X)","7f5cc900":"rf1.score(X,y)","f1e1e534":"r2_score(y, y_predprob)","8fb20cfc":"mean_squared_error(y,y_predprob)","eb32bbd2":"list(zip(nba_point[x_columns],rf1.feature_importances_))","ebbf4a1e":"Exploration of How Social Media Can Predict Winning Metrics Better Than Salary"}}