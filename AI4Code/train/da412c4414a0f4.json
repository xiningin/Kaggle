{"cell_type":{"5f2d6787":"code","ffd68c24":"code","539da04e":"code","347b55cc":"code","e33e8c4d":"code","58d5b8bd":"code","e63a3239":"code","ad790584":"code","cfaace3b":"code","c12e0520":"code","914b2b20":"code","c50a9bd1":"code","dca901b6":"code","39121d71":"markdown","f8633f49":"markdown"},"source":{"5f2d6787":"# add time_sync & print into demo\/ONNXRuntime\/onnx_inference.py\n!git clone https:\/\/github.com\/rkuo2000\/YOLOX\n%cd YOLOX","ffd68c24":"!pip install loguru thop pycocotools\n!pip install onnx onnx-simplifier","539da04e":"!wget https:\/\/github.com\/Megvii-BaseDetection\/YOLOX\/releases\/download\/0.1.1rc0\/yolox_s.pth\n#!wget https:\/\/github.com\/Megvii-BaseDetection\/YOLOX\/releases\/download\/0.1.1rc0\/yolox_m.pth\n#!wget https:\/\/github.com\/Megvii-BaseDetection\/YOLOX\/releases\/download\/0.1.1rc0\/yolox_l.pth\n#!wget https:\/\/github.com\/Megvii-BaseDetection\/YOLOX\/releases\/download\/0.1.1rc0\/yolox_x.pth\n#!wget https:\/\/github.com\/Megvii-BaseDetection\/YOLOX\/releases\/download\/0.1.1rc0\/yolox_darknet.pth","347b55cc":"!cp tools\/export_onnx.py .\n!python export_onnx.py --output-name yolox_s.onnx -n yolox-s -c yolox_s.pth\n!cp demo\/ONNXRuntime\/onnx_inference.py .","e33e8c4d":"import os\nfrom tqdm import tqdm\nimport numpy as np\nimport cv2\nimport matplotlib.pyplot as plt","58d5b8bd":"dir0='\/kaggle\/input\/stanford-dogs-dataset\/images\/Images\/n02091244-Ibizan_hound'\nfiles=os.listdir(dir0)\nfor file in files:\n    pathi=os.path.join(dir0,file)\n    pathout=os.path.join('out',file)\n    !python3 onnx_inference.py -m yolox_s.onnx -i {pathi} -o out -s 0.3 --input_shape 640,640\n    #img=cv2.imread(pathout)\n    #plt.imshow(cv2.cvtColor(img, cv2.COLOR_BGR2RGB))\n    #plt.show()","e63a3239":"from matplotlib import animation, rc\nrc('animation', html='jshtml')","ad790584":"def create_animation(ims):\n    fig=plt.figure(figsize=(7,7))\n    #plt.axis('off')\n    im=plt.imshow(cv2.cvtColor(ims[0],cv2.COLOR_BGR2RGB))\n    \n    def animate_func(i):\n        im.set_array(cv2.cvtColor(ims[i],cv2.COLOR_BGR2RGB))\n        return [im]\n\n    return animation.FuncAnimation(fig, animate_func, frames=len(ims), interval=1000)","cfaace3b":"!ls \/kaggle\/working\/YOLOX\/out\/","c12e0520":"imgdir1 ='\/kaggle\/working\/YOLOX\/out\/' ","914b2b20":"paths0=[]\nfor dirname, _, filenames in os.walk(imgdir1):\n    for filename in filenames:\n        print(filename)\n        paths0+=[os.path.join(dirname, filename)]     \npaths0[0:5]","c50a9bd1":"images0=[]\nfor i in tqdm(range(0,len(paths0))):\n    images0+=[cv2.imread(paths0[i])]","dca901b6":"create_animation(np.array(images0))","39121d71":"# Dog Image YOLOX Slide Show","f8633f49":"## Create SlideShow"}}