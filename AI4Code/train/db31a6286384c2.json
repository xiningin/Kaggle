{"cell_type":{"f2f79e07":"code","bfb96efb":"code","c0155fa1":"code","9ade59c8":"code","2cbb7abf":"code","c623b2c6":"code","bfbd283b":"code","0a27aeb8":"code","7598cbc6":"code","75cbe541":"code","d9cb5a1b":"code","e4ed342b":"code","0db20d37":"code","e7dc66d1":"code","1c29719b":"code","579cbad0":"code","1ddb953d":"code","4794e2ec":"code","9a23e2cb":"code","f21105f3":"code","3789bb3b":"code","3dd5b2cc":"code","4da47212":"code","7867d820":"code","42c9864b":"code","0c5a5246":"code","794659ed":"code","1b4809fe":"code","36234a95":"code","75e1ca29":"code","3a1f0010":"code","7d422cf8":"code","abef4983":"code","412bce5d":"code","3c3a0bd6":"code","acd12740":"code","4412435c":"markdown","0b4d2784":"markdown","fa0dfc01":"markdown","a66c97ff":"markdown","5bcbb9a4":"markdown","3b8f619b":"markdown","15193361":"markdown","a2e68cd1":"markdown","42d51edd":"markdown","97346508":"markdown","cababad9":"markdown","32e02fe0":"markdown","360bb17f":"markdown","49fdeda5":"markdown","c2a5282b":"markdown","1c6db3b2":"markdown","1d6dfe0d":"markdown","b45ad387":"markdown","0d2c59bb":"markdown","e9323e06":"markdown","7dbb1cbe":"markdown","49e4f4e7":"markdown","4483e742":"markdown","8c7977a6":"markdown","440a30cb":"markdown","37185650":"markdown","10d716c5":"markdown","16c6c902":"markdown","9970c4e9":"markdown","28497d2f":"markdown","5f87c332":"markdown","0f9e6daf":"markdown","89b4d139":"markdown","d32c927b":"markdown","3cb56d83":"markdown","348b6c8c":"markdown","ef467838":"markdown"},"source":{"f2f79e07":"\nimport matplotlib.pyplot as plt \nimport matplotlib.ticker as ticker\nfrom matplotlib import animation\nimport numpy as np\nimport pandas as pd\npd.options.mode.chained_assignment = None\nimport seaborn as sns\n\nfrom geopy.geocoders import Nominatim # # convert an address into latitude and longitude values\nimport folium\nfrom mpl_toolkits.basemap import Basemap","bfb96efb":"terror_df = pd.read_csv('..\/input\/gtd\/globalterrorismdb_0718dist.csv', encoding='ISO-8859-1')\nterror_df.head(3)","c0155fa1":"print ('Dataframe Shape: ', terror_df.shape)","9ade59c8":"columns_select = ['eventid', 'iyear', 'country_txt', 'region_txt', 'city', 'latitude', 'longitude', 'success', 'attacktype1_txt', \n                  'targtype1_txt', 'weaptype1_txt', 'nkill', 'nwound', 'gname']\n\ncolumns_names = ['Id', 'Year', 'Country', 'Region', 'City', 'Lat', 'Lon', 'Success', 'AttackType', \n                 'TargetType', 'WeaponType', 'Kill', 'Wounded',  'TerroristGroup']\n\nterror_df_selected = terror_df[columns_select]\n\nterror_df_selected.columns = columns_names\n\nprint ('Selected Dataframe Shape: ', terror_df_selected.shape)\n\nterror_df_selected.head(3)","2cbb7abf":"print ('Are there null values in the dataframe: ', terror_df_selected.isnull().values.any())\nprint ('NaNs in every column: \\n', terror_df_selected.isna().sum())","c623b2c6":"f = plt.figure(figsize=(14, 7))\n\nsns.set(font_scale=1.1)\nyear_count = sns.countplot(x='Year', data=terror_df_selected, palette='YlOrRd')\nyear_count.set_xticklabels(year_count.get_xticklabels(), rotation=70)\nplt.ylabel('Count', fontsize=12)\nplt.xlabel('Year', fontsize=12)\nplt.title('Fig. 1: Number of Terrorist Attacks Year by Year', fontsize=12)","bfbd283b":"f = plt.figure(figsize=(13, 8))\n\nsns.set(font_scale=0.9)\nyear_count = sns.countplot(x='Region', data=terror_df_selected,)\nyear_count.set_xticklabels(year_count.get_xticklabels(), rotation=70)\nplt.xlabel('Region', fontsize=12)\nplt.ylabel('Count', fontsize=12)\nplt.title('Fig. 2: Number of Terrorist Attacks by Region', fontsize=12)","0a27aeb8":"f = plt.figure(figsize=(13, 8))\n\nsns.set(font_scale=0.9)\nyear_count = sns.countplot(x='AttackType', data=terror_df_selected,)\nyear_count.set_xticklabels(year_count.get_xticklabels(), rotation=70)\nplt.xlabel('Methods of Attack', fontsize=12)\nplt.ylabel('Count', fontsize=12)\nplt.title('Fig. 3: Types of Terrorist Attack ', fontsize=12)","7598cbc6":"f = plt.figure(figsize=(14, 8))\n\nsns.set(font_scale=0.9)\nyear_count = sns.countplot(y='TargetType', data=terror_df_selected,)\n# year_count.set_xticklabels(year_count.get_xticklabels(), rotation=70)\nyear_count.set_xlabel('Count', fontsize=12)\nyear_count.set_ylabel('Target Type', fontsize=12)\nplt.xlabel('Count', fontsize=12)\ntarget_type_xticks  = [0, 1e3, 5e3, 1e4, 2e4, 3e4, 4e4]\ntarget_type_xlabels = ['0', '1e3', '5e3', '1e4', '2e4', '3e4', '4e4']\nplt.xticks(target_type_xticks, target_type_xlabels, fontsize=11, rotation=70)\nplt.ylabel('Target Type', fontsize=12)\nplt.title('Fig. 4: Types of Targets of Terrorist Attack ', fontsize=12)","75cbe541":"fig= plt.figure(figsize=(13, 7))\nterror_country = sns.barplot(x=terror_df_selected['Country'].value_counts()[0:15].index, y=terror_df_selected['Country'].value_counts()[0:15], palette='RdYlGn')\nterror_country.set_xticklabels(terror_country.get_xticklabels(), rotation=70)\nterror_country.set_xlabel('Country', fontsize=12)\nterror_country.set_ylabel('Counts', fontsize=12)\nplt.title('Fig. 5: Top 15 Countries: Most Attacks by Terrorist Groups', fontsize=12)\nplt.show()","d9cb5a1b":"f = plt.figure(figsize=(14, 8))\nsns.set(font_scale=0.9)\n\nterror_df_selected['WeaponType'] = terror_df_selected['WeaponType'].replace(['Vehicle (not to include vehicle-borne explosives, i.e., car or truck bombs)'], 'Vehicle')\n\nncount = len(terror_df_selected)\n\nyear_count = sns.countplot(x='WeaponType', data=terror_df_selected,)\nyear_count.set_xticklabels(year_count.get_xticklabels(), rotation=70)\nplt.title('Fig. 6: Types of Terrorist Attack ', fontsize=12)\n\nax2=year_count.twinx()\n\nax2.yaxis.tick_left()\nyear_count.yaxis.tick_right()\n\n# Also switch the labels over\nyear_count.yaxis.set_label_position('right')\nax2.yaxis.set_label_position('left')\n\nax2.set_ylabel('Frequency [%]', fontsize=11)\n\nfor p in year_count.patches:\n    x=p.get_bbox().get_points()[:,0]\n    y=p.get_bbox().get_points()[1,1]\n    year_count.annotate('{:.1f}%'.format(100.*y\/ncount), (x.mean(), y), \n            ha='center', va='bottom') # set the alignment of the text\n\n# Use a LinearLocator to ensure the correct number of ticks\nyear_count.yaxis.set_major_locator(ticker.LinearLocator(11))\n\n# Fix the frequency range to 0-100\nax2.set_ylim(0,100)\n# year_count.set_ylim(0, int(ncount\/1e3))\nyear_count.set_ylabel('Count', fontsize=11)\n\nax2.yaxis.set_major_locator(ticker.MultipleLocator(10))\n\nax2.grid(None)","e4ed342b":"region_year = pd.crosstab(terror_df_selected.Year, terror_df_selected.Region)\n\nregion_year.tail(3)","0db20d37":"color_list_reg_yr = ['palegreen', 'lime', 'green', 'Aqua', 'skyblue', 'darkred', 'darkgray', 'tan', 'orangered', 'plum', 'salmon', 'mistyrose']\nregion_year.plot(figsize=(14, 10), fontsize=12, color=color_list_reg_yr)\nplt.xlabel('Year', fontsize=12)\nplt.ylabel('Number of Attacks in a Year', fontsize=12)\nplt.title('Fig. 7: Region Based Terrorist Attacks over Years', fontsize=12)\nplt.show()","e7dc66d1":"terror_df_selected['Year10'] = pd.cut(terror_df_selected['Year'], bins=[1969, 1980, 1990, 2000, 2010, 2020], \n               labels=['1970-1980', '1980-1990', '1990-2000', '2000-2010', '2010-2020'])\n\nterror_df_selected.head(3)","1c29719b":"region_year10 = pd.crosstab(terror_df_selected.Year10, terror_df_selected.Region,)\nregion_year10.head(6)","579cbad0":"color_list_reg_yr = ['palegreen', 'lime', 'green', 'Aqua', 'skyblue', 'darkred', 'darkgray', 'tan', 'orangered', 'plum', 'salmon', 'mistyrose']\n\nregion_year10.plot(figsize=(14, 10), fontsize=12, color=color_list_reg_yr)\nplt.xlabel('Year', fontsize=12)\nplt.ylabel('Number of Attacks in Each Decade', fontsize=12)\nplt.title('Fig. 8: Region Based Terrorist Attack over Decades', fontsize=12)\nplt.show()","1ddb953d":"weapon_type_Region_year10 = pd.crosstab(terror_df_selected.Year10, terror_df_selected.WeaponType)\nweapon_type_Region_year10.head(6)","4794e2ec":"color_list_weapon_yr = ['lime', 'palegreen', 'darkred', 'Aqua', 'orangered', 'salmon', 'tan', 'lavender', 'plum', 'darkgray', 'magenta', 'mistyrose']\n\nweapon_type_Region_year10.plot(figsize=(14, 10), fontsize=12, color=color_list_weapon_yr)\nplt.xlabel('Year', fontsize=12)\nplt.ylabel('Types of Weapon Used in Each Decade', fontsize=12)\nplt.title('Fig. 9: Weapons Used over Decades by Terrorists', fontsize=12)\nplt.show()","9a23e2cb":"### replace NaNs with 0s\nterror_df_selected['Kill'] = terror_df_selected['Kill'].fillna(0).astype(int)\nterror_df_selected['Wounded'] = terror_df_selected['Wounded'].fillna(0).astype(int)\n\n### groupby dataframe y region and select south asia as region \n\nreg_groupby = terror_df_selected.groupby(['Region'])\nreg_groupby_SA_df = reg_groupby.get_group('South Asia')\n\nreg_groupby_SA_df.head(3)","f21105f3":"### need to re-arrange the index \n\nreg_groupby_SA_df.index = range(len(reg_groupby_SA_df.index))\n\nreg_groupby_SA_df.head(3)","3789bb3b":"print ('South asia dataframe shape: ', reg_groupby_SA_df.shape)","3dd5b2cc":"f = plt.figure(figsize=(14, 8))\n\nsns.set(font_scale=0.9)\n\nCountry_count_SA = sns.countplot(y='Country', data=reg_groupby_SA_df, palette='RdGy')\n# year_count.set_xticklabels(year_count.get_xticklabels(), rotation=70)\nCountry_count_SA.set_xlabel('Count', fontsize=12)\nCountry_count_SA.set_ylabel('South Asian Countries', fontsize=12)\nplt.title('Fig. 10: South Asian Countries Affected in Terrorist Attack ', fontsize=12)","4da47212":"### check with value_counts\n\nprint ('number of attacks in respective countries: \\n')\nprint (reg_groupby_SA_df['Country'].value_counts())","7867d820":"print ('There are {} unique number of terror groups in Souh East Asia'.format(len(reg_groupby_SA_df['TerroristGroup'].unique())) )\n\nprint ('\\n')\n\nreg_groupby_SA_df_top10TerrorG = reg_groupby_SA_df['TerroristGroup'].value_counts()[1:11].to_frame(name='Counts')\n\n# drop 0 because that is 'unknown' group\n# reg_groupby_SA_df_top10TerrorG.head(3)\n\nreg_groupby_SA_df_top10TerrorG['Terror Group'] = reg_groupby_SA_df_top10TerrorG.index\nreg_groupby_SA_df_top10TerrorG.reset_index(drop=True, inplace=True)\nreg_groupby_SA_df_top10TerrorG.head(3)","42c9864b":"f = plt.figure(figsize=(13, 8))\nbar_SA_top10TG = sns.barplot(y='Terror Group', x='Counts', data=reg_groupby_SA_df_top10TerrorG)\n# bar_SA_top10TG.set_xticklabels(bar_SA_top10TG.get_xticklabels(), rotation=70)\nplt.xscale('linear')\n\nxticks = [0, 500, 1e3, 1.5e3, 2e3, 3e3, 4e3, 5e3, 6e3,  7e3]\nxlabels = ['0', '500', '1e3', '1.5e3', '2e3', '3e3',  '4e3',  '5e3',  '6e3',  '7e3']\nplt.xticks(xticks, xlabels, fontsize=11)\nplt.xlabel('Counts', fontsize=12)\nplt.ylabel('Terror Group', fontsize=12)\n\nplt.title('Fig. 11: Top 10 Terror Groups in South Asia', fontsize=12)","0c5a5246":"### create a new column combining killed and wounded \nreg_groupby_SA_df['Affected'] = reg_groupby_SA_df['Kill'] + reg_groupby_SA_df['Wounded']\n\n### plot the mean number of people injured + killed over all the attacks in respective countries  \nf = plt.figure(figsize=(10, 7))\nreg_groupby_SA_df_grp_country_affected = reg_groupby_SA_df.groupby(['Country'])['Affected'].mean()\nreg_groupby_SA_df_grp_country_affected.plot.bar(figsize=(12, 8), color=['orangered', 'red', 'palegreen', 'magenta', 'salmon', 'lime', 'gray', 'coral', 'darkred'])\nplt.title('Fig. 12: Mean Number of People Killed + Wounded in Each Attack for Respective Countries', fontsize=12)\nplt.xlabel('Country', fontsize=12)\n\nplt.text(8, 10.3, 'Total Attacks \\n {}'.format(reg_groupby_SA_df['Country'].value_counts()['Sri Lanka']), horizontalalignment='center', fontsize=11)\nplt.text(7, 5, 'Total Attacks \\n {}'.format(reg_groupby_SA_df['Country'].value_counts()['Pakistan']), horizontalalignment='center', fontsize=11)\nplt.text(6, 3.8, 'Total Attacks \\n {}'.format(reg_groupby_SA_df['Country'].value_counts()['Nepal']), horizontalalignment='center', fontsize=11)\nplt.text(5, 0.8, 'Total Attacks \\n {}'.format(reg_groupby_SA_df['Country'].value_counts()['Mauritius']), horizontalalignment='center', fontsize=11)\nplt.text(4, 6.7, 'Total Attacks \\n {}'.format(reg_groupby_SA_df['Country'].value_counts()['Maldives']), horizontalalignment='center', fontsize=11)\nplt.text(3, 4.3, 'Total Attacks \\n {}'.format(reg_groupby_SA_df['Country'].value_counts()['India']), horizontalalignment='center', fontsize=11)\nplt.text(2, 2.6, 'Total Attacks \\n {}'.format(reg_groupby_SA_df['Country'].value_counts()['Bhutan']), horizontalalignment='center', fontsize=11)\nplt.text(1, 6.0, 'Total Attacks \\n {}'.format(reg_groupby_SA_df['Country'].value_counts()['Bangladesh']), horizontalalignment='center', fontsize=11)\nplt.text(0.05, 6.8, 'Total Attacks \\n {}'.format(reg_groupby_SA_df['Country'].value_counts()['Afghanistan']), horizontalalignment='center', fontsize=11)\n\nplt.show()","794659ed":"reg_groupby_SA_df_most_affected5 = reg_groupby_SA_df.sort_values('Affected', ascending=False).head(5)\nreg_groupby_SA_df_most_affected5","1b4809fe":"fig = plt.figure(figsize=(10, 7))\nsns.set(font_scale=1.3)\nsns.barplot(y='Affected', x='Country', data=reg_groupby_SA_df_most_affected5, hue='Year')\nplt.xlabel('Country', fontsize=12)\nplt.ylabel('Killed + Wounded', fontsize=12)\nplt.title('Fig. 13: Top 5: Fatalitites (Killed + Wounded) in a Single Attack (South Asia)', fontsize=12)\nplt.show()","36234a95":"reg_groupby_SA_df_most_affected5_grp_country = reg_groupby_SA_df_most_affected5.groupby(['Country'])['Affected'].sum()\nprint ('top 5 attacks and people affected in South asia region: \\n', reg_groupby_SA_df_most_affected5_grp_country)\nprint ('Among top 5 attacks Afghanistan suffered 2 heavy blows')","75e1ca29":"### we drop the rows where lat and lon are NaN (495 of them)\nreg_groupby_SA_df.dropna(subset=['Lat','Lon'],inplace=True)\nprint ('new dataframe shape: ', reg_groupby_SA_df.shape)","3a1f0010":"### try to plot folium map \naddress = 'Kabul'\n\ngeolocator = Nominatim(user_agent=\"Kabul_explorer\")\nlocation = geolocator.geocode(address)\nKabul_latitude = location.latitude\nKabul_longitude = location.longitude\nprint('The geograpical coordinates of Kabul are {}, {}.'.format(Kabul_latitude, Kabul_longitude))\n\nreg_groupby_SA_df_most_affected100 = reg_groupby_SA_df.sort_values('Affected', ascending=False).head(100)\n\nAroundKabul = folium.Map(location=[Kabul_latitude, Kabul_longitude], zoom_start=4.2, tiles='Stamen Terrain')\n\nfor lat, lon, label, fat in zip(reg_groupby_SA_df_most_affected100['Lat'], reg_groupby_SA_df_most_affected100['Lon'], \n                                reg_groupby_SA_df_most_affected100['City'], reg_groupby_SA_df_most_affected100['Affected']):\n    label = folium.Popup('{}\\n Affected: {}'.format(label, fat), parse_html=True)\n    folium.CircleMarker([lat, lon], radius=fat*0.02, popup=label, \n                      color='magenta', fill=True, fill_color='#3186cc', \n                      fill_opacity=0.7).add_to(AroundKabul)\n\nloc = 'Based on Number of Affected (Killed + Wounded) People: Top 100 Attacks in South Asia'\ntitle_html = '''\n             <h3 align=\"center\" style=\"font-size:16px\"><b>{}<\/b><\/h3>\n             '''.format(loc)   \n\nAroundKabul.get_root().html.add_child(folium.Element(title_html))\n\nAroundKabul  ","7d422cf8":"## boundary of south asia (lat and lon coordinates)\n\nllon = 58.8\nulon = 98.9\nllat = 5.04\nulat = 41.06\n\nyears=list(reg_groupby_SA_df.Year.unique())\n\nfig = plt.figure(figsize=(14, 7), dpi=150)\n\ndef year_attack(Year):\n    plt.clf() # clear the previous plot before new year info is plotted \n    plt.title('Terrorism In South Asia '+'\\n'+'Year:' +str(Year))\n    my_map = Basemap(projection='merc',resolution='l', llcrnrlon=llon, llcrnrlat=llat-1, urcrnrlon=ulon, urcrnrlat=ulat+3, area_thresh=100, ) # low resolution\n    lat_gif=list(reg_groupby_SA_df[reg_groupby_SA_df['Year']==Year].Lat)\n    long_gif=list(reg_groupby_SA_df[reg_groupby_SA_df['Year']==Year].Lon)\n    x_gif,y_gif=my_map(long_gif, lat_gif)\n\n    my_map.scatter(x_gif, y_gif,s=[fat*1.10 for fat in reg_groupby_SA_df[reg_groupby_SA_df['Year']==Year].Affected], color = 'OrangeRed')\n\n    my_map.drawcoastlines()\n\n    my_map.drawcountries()\n          \n    my_map.shadedrelief()\n\n\nyear_ani_SA = animation.FuncAnimation(fig, year_attack, years, interval=1500)\n\n\nyear_ani_SA.save('year_attack_ani.gif', writer='imagemagick', fps=1, dpi=150)\nplt.clf()","abef4983":"from IPython.display import Image\nImage(\"..\/working\/year_attack_ani.gif\")","412bce5d":"import io\nimport base64\nfrom IPython.display import HTML\n\nfilename = 'year_attack_ani.gif'\n\nvideo = io.open(filename, 'r+b').read()\nencoded = base64.b64encode(video)\nHTML(data='''<img src=\"data:image\/gif;base64,{0}\" type=\"gif\" \/>'''.format(encoded.decode('ascii')))\n","3c3a0bd6":"country_selected = ['Pakistan', 'Afghanistan']\n\nreg_groupby_SA_df_sel_country = reg_groupby_SA_df[reg_groupby_SA_df['Country'].isin(country_selected)]\nprint ('new selected dataframe: ', reg_groupby_SA_df_sel_country.shape)","acd12740":"f = plt.figure(figsize=(14, 7))\n\nsns.set(font_scale=1.1)\nyear_count = sns.countplot(x='Year', data=reg_groupby_SA_df_sel_country, hue='Country', palette=\"Spectral\")\nyear_count.set_xticklabels(year_count.get_xticklabels(), rotation=60)\nplt.title('Number of Terrorist Attack Year by Year (Afg & Pak)', fontsize=12)","4412435c":"As evident from the plot above that in general over the years terrorist activities are increasing. But is it true for all region\/country? \nWe will answer this question soon. ","0b4d2784":"## Most Attacked Countries (Top 15)","fa0dfc01":"The [Global Terrorism Database](https:\/\/start.umd.edu\/gtd\/) (GTD) is maintained by National Consortium for the Study of Terrorism and Response to Terrorism (START). \n\nThe particular .csv file used in this notebook can be downloaded from [Kaggle](https:\/\/www.kaggle.com\/START-UMD\/gtd) page. \n\nIt consists of the data of worldwide terrorist attacks from 1970 to 2017 including more than 180,000 attacks and 100 features. The GTD defines _terrorism_ as \n> \u201cThe threatened or actual use of illegal force and violence by a non-state actor to attain a political, economic, religious, or social goal through fear, coercion, or intimidation.\u201d\n\nHere in this notebook we will use the data (over 150 MB) to learn pandas and various mapping libraries like [Folium](https:\/\/python-visualization.github.io\/folium\/) and [Basemap](https:\/\/matplotlib.org\/basemap\/) and eventually draw conclusions on different results. \n\nWhat you can expect to learn from this notebook-- \n\n* Pandas [Groupby](https:\/\/pandas.pydata.org\/pandas-docs\/stable\/reference\/api\/pandas.DataFrame.groupby.html). \n* Pandas [Crosstab](https:\/\/pandas.pydata.org\/pandas-docs\/stable\/reference\/api\/pandas.crosstab.html). \n* Pandas [Cut](https:\/\/pandas.pydata.org\/pandas-docs\/stable\/reference\/api\/pandas.cut.html).\n* Pandas [plot](https:\/\/pandas.pydata.org\/pandas-docs\/stable\/reference\/api\/pandas.DataFrame.plot.html). \n* Leaflet Map using Folium.  \n* Transform Coordinates (latitude and longitude) to map projections using Basemap.  \n* And many more importnat concepts. ","a66c97ff":"We can check from the `value_counts()` that a lot of attacks were carried out by unknown groups and among the known groups 'Taliban' dominates. This group was actually in power of Afghanistan from 1996-2001. The group that was initially consisted of students (Taliban means Students) turned into one of the most terrorizing organizations in the whole world. \n\n\nWe have seen before that in terms of number of terrorist attacks, Pakistan, Afghanistan and India tops the list. We can also plot over a period of 47 years (1970-2017) average number of people that were injured + killed in respective countries. \n\nFor this we can use [groupby mean](https:\/\/pandas.pydata.org\/pandas-docs\/stable\/reference\/api\/pandas.core.groupby.GroupBy.mean.html) as below-- ","5bcbb9a4":"## Which Country Suffered Highest Terrorist Attacks in South Asia ?","3b8f619b":"## Necessary Imports","15193361":"This is not so intuitive because Average people affected in terrorist attacks is highest in Sri Lanka but the total number of attacks were way less than Afghanistan, Pakistan and India. This also implies that damage done to people were lot higher in terrorist attacks in Sri Lanka. This can also happen because most of the attacks happened in Colombo, capital city of Sri Lanka. \n\n### Top 5 Attacks (People Killed + Wounded) in South Asia ","a2e68cd1":"As we have seen before, the top 100 attacks in South Asia have happened mostly in India, Pakistan, Afghanistan. The Size of the circles represents the relative number of people killed + wounded in each attack. \n\nHowever the damage done in each attack is relatively less in Afghanistan and this could be because of low population density compared India and SriLanka.   \n\nWe can also visualize the increasing terrorist activities after 2000s through basemap and matplotlib animation.\n\n### Trend in Terror Attacks in South Asia (Basemap)\n\nTo produce animation of number of attacks in South Asia (over this more than 40 years period) we use [Basemap](https:\/\/matplotlib.org\/basemap\/) which is a library for plotting 2D data on maps. Apart from using  the latitude and longitude of the cities from the dataframe, we also need to provide the coordinates of the boundary of the South Asian region. For this information found [here](https:\/\/en.wikipedia.org\/wiki\/Module:Location_map\/data\/Southeast_Asia) was used.  \n\nWe also need to use [Animation api](https:\/\/matplotlib.org\/3.3.2\/api\/animation_api.html) for visualizing the change and saving it as a gif file. ","42d51edd":"## Trend in terrorist activities over the years \n\nBelow we plot how the terrorism (attacks) trend looks like for the whole world over the years (from 1970 to 2017). ","97346508":"There are 0 null values in 'Year', 'Country', 'Region', 'Success', 'AttackType', 'TargetType' and 'WeaponType'. So we can get started with our analysis at least using  these features. ","cababad9":"Explosives and firearms have always been the dominant weapons of destructions. ","32e02fe0":"What we see here is that explosives are most used weapon types, dominating other types, with more than 50% of all the attacks were carried out using explosives. \nThis can also be checked by using `value_counts()` method for 'WeaponType' feature. ","360bb17f":"### Attack to WTC in 2001 $\\equiv$ Rise of Terrorism in Afghanistan post 2001 ?\n\nAs mentioned in this Ministry of Foreign Affairs, Japan [document](https:\/\/www.mofa.go.jp\/policy\/terrorism\/strategy0911.pdf) a possible rise of Terrorism in Afghanistan could be caused by USA itself--\n\n> After the 9.11 terrorist attacks in 2001, the Taliban administration of Afghanistan which had protected Al Qaidacollapsed as a result of military operations by the US-led multinational forces. Al Qaida and leaders of Taliban fled tothe border regions and into Pakistan. \nIn Afghanistan, security operations by ISAF established by a UN Security Council resolution have been successfulto a certain extent and the international community has been supporting nation-building.\nHowever, peace dividends have not reached every corner of the country and some people support the insurgentsfor economic and other causes. With increased power of the Taliban forces, the security situation has deteriorated inrecent years without considerable improvement of people\u2019s living standards.\n\nJust a different thought but diving deep in data analysis could open up lots of points for discussions. \n\n### Final Note \n\nSo far we have learned quite a lot of useful technique in Pandas specially to analyze data better and prepare relevant plots that can convey meaningful message. Starting from dataframe plot to Groupby, Crosstab, and some global map visualization library like Folium, Basemap etc, this global terrorism dataset opens up a lot of possibilities to search and analyze data on our own. Hopefully this post will help you to at-least get started with Pandas and you can then take off in a direction you want. \n\nCheers!\n\n","49fdeda5":"Now using cut method we binned data in decades and also created a column. We just need to repeat the process of `crosstab` and select 'Region' vs this new column ('Year10') to create a much cleaner table. Let's see ","c2a5282b":"As we see here, single attack in Colombo in Sri Lanka (1996) caused the highest fatalaties so far in South Asia. \n\nWe can also use dataframe groupby method to sum the total affected people as below -- ","1c6db3b2":"## Method of Attacks and Broad Class of Tactics Used  ","1d6dfe0d":"Now we have a more cleaner plot and it's more easily interpretable. Terrorist activities _went down_ in **South & Central America** considerably and there's a drastic _rise_ in **Middle East and South Asia**.  \n\nUsing crosstab and the binned data we can also see the trend in weapons used by terrorists as below -- ","b45ad387":"### Check for Null Values ","0d2c59bb":"**Bombing\/Explosions** are mostly favored by terrorists for destructive activities. ","e9323e06":"\n### Using Pandas [Crosstab](https:\/\/pandas.pydata.org\/pandas-docs\/stable\/reference\/api\/pandas.crosstab.html) Efficiently \n\nBefore we have seen the trend in terrorist activities over the years for the whole world. But now we do this for regions. The whole demographics is divided in 12 regions and a region based analysis will tell us something more about the economy, growth, poverty etc. about the region. \n\nFirst, we will plot how the terrorist activities varied over the years for different regions. \n\nA very neat way to create a relevant dataframe is by pandas crosstab. \n\nIt basically computes a frequency table of the passed factors. We will use this method to create a table (dataframe) where we will have years as rows and number of attacks in every year in different region as column. After this we can just use dataframe plot. Let's see below--  ","7dbb1cbe":"### Choosing the Features\n\nThis part is important to set our analysis path. As we see that the dataframe is huge and contains 135 features, it is better if we decide what we are going to do with this huge data. Me being a south asian, I would mostly focus on that region and in general I would also like to visualize the trends with terrorist attacks over the years. So let's begin","49e4f4e7":"### Terrorist Groups in South Asia \n\nFind the Top 10 Groups in South Asia in terms of number of attacks over the years. ","4483e742":"## Global Terrorism Data Analysis and Visualization using Python and Pandas ","8c7977a6":"## Visualization in Global Maps (Focus on South Asia Region) with Folium\n\nTo produce visualization based on locations we need info on latitude and longitude. So first we drop entries where either latitude or longitude is NaN. \nThen I have used Folium map to visualize top 100 attacks in terms of fatalities in South Asia region. Let's see below--\n","440a30cb":"Find me in [Medium](https:\/\/medium.com\/@saptashwa) where I write about Machine Learning Algorithms and more..  ","37185650":"**Iraq** is by far the most attacked country by terrorists. ","10d716c5":"### Increased Terrorist Activities in Afghanistan After 2000s\n\nAs can be seen in the previous animation that terrorism in Afghanistan has increased considerably over the years, specially there's substantial level of increase after the year 2000. We can see this by comparing the number of terrorist activities with Pakistan. Let's see below using [isin](https:\/\/pandas.pydata.org\/pandas-docs\/stable\/reference\/api\/pandas.DataFrame.isin.html)--     ","16c6c902":"Now we can see the trend clearly just from the table itself. Isn't pandas great? Let's visualize this for even more clarity-- ","9970c4e9":"### Types of Weapons Used \n\nHere we make a bit fancier plot, to add the percentage over the bars and also add the frequency and counts on the corresponding y axes. ","28497d2f":"Common citizen and private properties are among the most targeted places by the terrorists.   ","5f87c332":"## Load the Data File with Pandas\n\nWhile reading the file with `read_csv` it is necessary to mention the encoding (ISO-8859-1 or latin). Otherwise we will get `UniceodeDecodeError`. ","0f9e6daf":"## Terrorist Activities in _South Asia_\n\nIn this section, I will focus only on the terrorist activities in the South Asia region. We will use [Pandas Groupby](https:\/\/pandas.pydata.org\/pandas-docs\/stable\/reference\/api\/pandas.DataFrame.groupby.html) method along with `get_group` object.  \n\nFor this part fatalities (Killed + Wounded) would be an important feature. As we have seen before there are null values in these columns ('Kill' and 'Wounded') first we replace the NaNs with zeros. This is a very crude method but for demonstration purpose this is just.   ","89b4d139":"## Which Region Has Suffered Most Attacks (1978-2017) ?   ","d32c927b":"### Discussions Based on Other Research Publications \n\nHere we see how the terrorism activities changed over time for various regions. \n\n* Starting from late 90s and early 2000s, we see extreme increase activities in the Middle East region and South Asia. \n\n* In a period over 1980 to 1990 there were high terror activities in south america. \n\n* As stated [here](https:\/\/fas.org\/irp\/threat\/terror_91\/latin.html), the large terrorist activities in the early 90s were carrying antiUS sentiments and, inspired by the U.S. role in the Persian Gulf war.\n\n* As mentioned in [Global Policy](https:\/\/onlinelibrary.wiley.com\/doi\/full\/10.1111\/1758-5899.12829) journal, \n> During the period 1970-2918, terrorist attacks have greatly shifted from Latin America and the Caribbean (LAC) and Europe and Central Asia (ECA) to the Middle East and North Africa (MENA), South Asia (SAS), and sub\u2010Saharan Africa (SSA). In MENA, greater democracy has not been a panacea for terrorism, contrary to the beliefs of the George W. MENA is plagued by three major civil wars and other insurgencies that foment regional instability, so that international peacekeeping efforts are needed to curtail these conflicts. Given the huge importance of the number of civil conflicts in causing terrorism in the region, such peacekeeping also serves as a counterterrorism measure.\n\n### Next Step\n\nTo visualize this trend we can use [Pandas cut](https:\/\/pandas.pydata.org\/pandas-docs\/stable\/reference\/api\/pandas.cut.html) method. Instead of plotting a continuous plot over the years, we will bin the data in decades. For example 1970-1980, 1980-1990 and so on, this will tell us how terrorism has shifted over the decades from more west towards east.   \n\n","3cb56d83":"As expected from the news that we get often -- **Middle-East & North Africa and South Asia** are the two top regions in terms of number of terrorist attacks. ","348b6c8c":"## What are the main targets of terrorists? (Military? Police? Government?)","ef467838":"-------------------------------------------------------------------------------------------------------------------"}}