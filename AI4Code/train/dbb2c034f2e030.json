{"cell_type":{"90b1c83a":"code","e52d4430":"code","6b63297e":"code","4cf5d77f":"code","ddb28b97":"code","459c0105":"code","f3a1ffc8":"code","8af49858":"code","f333eab4":"code","e535a27d":"code","fd509895":"code","e8302c79":"code","e74ec9b4":"code","fa0012ff":"code","2ec6bfc4":"code","36bd4b1a":"code","d3014ca0":"code","1629deeb":"code","41ab306a":"markdown","2c01ec2e":"markdown","fbcd17a0":"markdown","47fc3994":"markdown","3cf3f22c":"markdown","21cd49f4":"markdown","d4e33527":"markdown","34d13e08":"markdown","492a5eaa":"markdown","3a8993e0":"markdown","1830d17c":"markdown","6ab5e298":"markdown","7bcb45a1":"markdown"},"source":{"90b1c83a":"import numpy as np, pandas as pd, matplotlib.pyplot as plt, seaborn as sns, os, warnings\ncolor = sns.color_palette()\nwarnings.filterwarnings(\"ignore\")\n%matplotlib inline\n\nprice = pd.read_csv(\"..\/input\/price.csv\")","e52d4430":"price.head()","6b63297e":"price.describe()","4cf5d77f":"price.info()","ddb28b97":"plt.figure(figsize = (15, 8))\nstate_count = price[\"State\"].value_counts()\nax = sns.barplot(state_count.index, state_count.values, order = state_count.index)\nplt.xlabel(\"state\")\nplt.ylabel(\"frequency\")\nplt.title(\"State Frequency\", fontsize = 15)\nrects = ax.patches\nvalues = state_count.values\nfor rect, value in zip(rects, values):\n    height = rect.get_height()\n    ax.text(rect.get_x() + rect.get_width()\/2, height + 5, value, ha = \"center\", va = \"bottom\")\nplt.show()","459c0105":"years = list(set([y.split( )[1] for y in price.columns[6:]]))","f3a1ffc8":"for i, y in enumerate(sorted(years)[1:7]):\n    plt.figure(figsize = (15, 8))\n    temp = price[price.columns[8+12*i:8+12*(i+1)]]\n    temp.boxplot(list(temp.columns))\n    plt.title(\"{} Rent Distribution\".format(y), fontsize = 14)\n    plt.xticks(rotation = 45)\n    plt.show()","8af49858":"for i, y in enumerate(sorted(years)[1:7]):\n    plt.figure(figsize = (15, 4))\n    temp = price[price.columns[8+12*i:8+12*(i+1)]]\n    temp.boxplot(list(temp.columns), showfliers = False)\n    plt.title(\"{} Rent Distribution\".format(y), fontsize = 14)\n    plt.xticks(rotation = 45)\n    plt.show()","f333eab4":"new_york = price[price[\"State\"] == \"NY\"]\nnew_york.head()","e535a27d":"months = price.columns[6:]\nnew_york_price = new_york[months]\n\nplt.figure(figsize = (15, 5))\nplt.plot(months, np.nanmedian(new_york_price, axis = 0))\nplt.title(\"New York Median Rent per Month\", fontsize = 14)\nplt.xticks(rotation = 90)\nplt.show()","fd509895":"states = list(price[\"State\"].unique())\n\nplt.figure(figsize = (15, 20))\nfor state in states:\n    temp_price = price[price[\"State\"] == state]\n    temp_price = temp_price[months]\n    \n    plt.plot(months, np.nanmedian(temp_price, axis = 0), label = state)\n    \nplt.title(\"US States Median Rent per Month\", fontsize = 14)\nplt.xticks(rotation = 90)\nplt.legend(bbox_to_anchor = (1.05, 1), loc = 2, borderaxespad = 0.)\nplt.show()","e8302c79":"some_states = state_count.index[:20]\n\nplt.figure(figsize = (15, 20))\nfor state in some_states:\n    temp_price = price[price[\"State\"] == state]\n    temp_price = temp_price[months]\n    \n    plt.plot(months, np.nanmedian(temp_price, axis = 0), label = state)\n    \nplt.title(\"US Top {} States Median Rent per Month (by city)\".format(len(some_states)), fontsize = 14)\nplt.xticks(rotation = 90)\nplt.legend(bbox_to_anchor = (1.05, 1), loc = 2, borderaxespad = 0.)\nplt.show()","e74ec9b4":"california = price[price[\"State\"] == \"CA\"]\ncalifornia.head()","fa0012ff":"print(\"There are {} cities in California\".format(len(california[\"City\"].unique())))\nprint(\"There are {} metros in California\".format(len(california[\"Metro\"].unique())))\nprint(\"There are {} counties in California\".format(len(california[\"County\"].unique())))","2ec6bfc4":"metros = california[\"Metro\"].unique()\n\nplt.figure(figsize = (15, 20))\nfor m in metros:\n    temp_price = california[california[\"Metro\"] == m]\n    temp_price = temp_price[months]\n    \n    plt.plot(months, np.nanmedian(temp_price, axis = 0), label = m)\n    \nplt.title(\"CA Metro Median Rent per Month\", fontsize = 14)\nplt.xticks(rotation = 90)\nplt.legend(bbox_to_anchor = (1.05, 1), loc = 2, borderaxespad = 0.)\nplt.show()","36bd4b1a":"counties = california[\"County\"].unique()\n\nplt.figure(figsize = (15, 20))\nfor c in counties:\n    temp_price = california[california[\"County\"] == c]\n    temp_price = temp_price[months]\n    plt.plot(months, np.nanmedian(temp_price, axis = 0), label = c)\n    \nplt.title(\"CA County Median Rent per Month\", fontsize = 14)\nplt.xticks(rotation = 90)\nplt.legend(bbox_to_anchor = (1.05, 1), loc = 2, borderaxespad = 0.)\nplt.show()","d3014ca0":"plt.figure(figsize = (15, 8))\nfor c in range(10):\n    temp_price = california[california[\"City\"] == california[\"City\"].iloc[c]]\n    temp_price = temp_price[months]\n\n    plt.plot(temp_price.columns, np.transpose(temp_price.values), label = california[\"City\"].iloc[c])\n    \nplt.title(\"CA Top 10 Cities Rent per Month (by population)\", fontsize = 14)\nplt.xticks(rotation = 90)\nplt.legend(bbox_to_anchor = (1.05, 1), loc = 2, borderaxespad = 0.)\nplt.show()","1629deeb":"plt.figure(figsize = (15, 20))\nfor s in states:\n    temp_price = price[price[\"State\"] == s]\n    rank = min(temp_price[\"Population Rank\"])\n    temp_price = temp_price[temp_price[\"Population Rank\"] == rank]\n    label = \"{} {}\".format(s, temp_price[\"City\"].unique())\n    temp_price = temp_price[months]\n    plt.plot(temp_price.columns, np.transpose(temp_price.values), label = label)\n    \nplt.title(\"Rent in Largest Population City by State\", fontsize = 14)\nplt.xticks(rotation = 90)\nplt.legend(bbox_to_anchor = (1.05, 1), loc = 2, borderaxespad = 0.)\nplt.show()","41ab306a":"### Top 10 city in CA (by population)","2c01ec2e":"### CA Metros","fbcd17a0":"From above, if we take mean on rent, outliers will contribute a strong effect. Take a look with boxplots with no outliers.","47fc3994":"Some rent price from Nov, 2010 to March 2012 are missing.","3cf3f22c":"Note: Top line is Washington D.C. \n\nIt is not suprice D.C. has the most expensive houses to rent since itself is a \"state\" which has no other cities to affect its rent (sample size is small). \n\nSince population in each state are different, the needs of houses are vary. In this case, we will focus on the first 20 states, which you have seen in the first figure. ","21cd49f4":"From above, we see that median rents increase slightly each year.","d4e33527":"### Rent in lagest population city per state","34d13e08":"#### A glance of New York area","492a5eaa":"Top 3 are \n* CA, got the first place in 2016\n* NJ, increase smoothly\n* MA, met NJ in 2015\n\nAs California reaches the first after 2016, we will see how it reaches the top.","3a8993e0":"We found:\n* Zillow has houses for renting in over 1,000 cities in PA","1830d17c":"### California","6ab5e298":"### CA Counties","7bcb45a1":"### Median rent over USA"}}