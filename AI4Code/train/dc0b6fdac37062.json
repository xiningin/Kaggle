{"cell_type":{"dd9a9d44":"code","8bd9caa3":"code","3d668f0f":"code","c2094e17":"code","293795a6":"code","d46d24ea":"code","2b1da073":"code","efdd79ec":"code","abed01aa":"code","e78b373e":"code","7ee635f7":"code","54c732cb":"code","e0dd6572":"code","55824173":"code","24ed0ad9":"code","c5601383":"code","8bf09c1c":"code","38651cc0":"code","4caf4135":"code","00b678c0":"code","89c238e4":"code","faffbac7":"code","3919baf5":"code","24f692d7":"code","012d8521":"code","fd065c2d":"code","f5c5198e":"code","8fe4e7d4":"code","cb9969de":"code","3350e712":"code","5420edd6":"code","756224f7":"code","73ba1c1f":"code","aa912c2b":"code","d16b5b27":"code","3b84c80a":"code","deaa32c4":"code","3de9e98c":"code","f7d6e8c6":"code","47c0d9c5":"code","90961ed0":"code","b75f71d8":"code","e5702741":"code","2f3c7892":"code","e36c8abc":"code","cf485e27":"code","047512cf":"code","a3c91593":"code","66bdeec3":"code","2e88335c":"code","0592ec27":"code","4a8c42c5":"code","2e972038":"code","eb9ede08":"code","4cd0a62f":"markdown","c3ea286b":"markdown","daf05e70":"markdown","ff1d8c7e":"markdown","9cc9eb6e":"markdown","c33d716c":"markdown","9986088c":"markdown","1fedf866":"markdown","f2b73541":"markdown","89e7f5e7":"markdown","4c417d2c":"markdown","5467019b":"markdown","6c7c32fe":"markdown","44a2d95c":"markdown","068c3391":"markdown","9e71c908":"markdown","3ac9b1ec":"markdown","e6695d58":"markdown","356bd970":"markdown","feb21787":"markdown","841b5a88":"markdown","bf644248":"markdown","fbb87d94":"markdown","ecec9ac7":"markdown","01047d77":"markdown","fdfd588f":"markdown","4326bb60":"markdown","419551c4":"markdown","573ba5d5":"markdown","a3559748":"markdown","8284280c":"markdown","6f128360":"markdown","7c12e8ca":"markdown","d1481ad7":"markdown","03165874":"markdown","57a2b7a2":"markdown","f405ea58":"markdown","826ca3df":"markdown","6752815e":"markdown","971fa5fd":"markdown","a8bef6fe":"markdown","b9213a94":"markdown","411b09fb":"markdown","cfc0ed91":"markdown","8980ce1c":"markdown"},"source":{"dd9a9d44":"# Libraries Required\nimport numpy as np\nimport pandas as pd\nimport matplotlib.pyplot as plt\nimport seaborn as sns\n%matplotlib inline\nfrom mpl_toolkits.mplot3d import Axes3D","8bd9caa3":"# Loading Datasets\n#confirmed = pd.read_csv(\"..\/input\/novel-corona-virus-2019-dataset\/time_series_covid_19_confirmed.csv\")\n#deaths = pd.read_csv(\"..\/input\/novel-corona-virus-2019-dataset\/time_series_covid_19_deaths.csv\")\n#recovered = pd.read_csv(\"..\/input\/novel-corona-virus-2019-dataset\/time_series_covid_19_recovered.csv\")\n\n# Load Data (Source: https:\/\/github.com\/CSSEGISandData\/COVID-19)\nconfirmed = pd.read_csv(\"..\/input\/covid19\/csse_covid_19_data\/csse_covid_19_time_series\/time_series_covid19_confirmed_global.csv\")\nrecovered = pd.read_csv(\"..\/input\/covid19\/csse_covid_19_data\/csse_covid_19_time_series\/time_series_covid19_recovered_global.csv\")\ndeaths = pd.read_csv(\"..\/input\/covid19\/csse_covid_19_data\/csse_covid_19_time_series\/time_series_covid19_deaths_global.csv\")","3d668f0f":"# Overview of Data with Confirmed, Death & Recovered Cases\nconfirmed.head(10)\n#deaths.head(10)\n#recovered.head(10)","c2094e17":"# Melting the Confirmed Cases Dataframe:\nconfirmed2=pd.melt(confirmed,id_vars=['Province\/State','Country\/Region','Lat','Long'],var_name='Dates', value_name='Confirmed Cases')\nconfirmed2\n\n# Exploring Confirmed Cases Dataframe:\nconfirmed2.info()\n\n# Converting Dates to Datetime Format:\nconfirmed2['Dates'] = pd.to_datetime(confirmed2['Dates'], infer_datetime_format=True)\n\n# Converted from Object to Datetime\nconfirmed2.info()\n\nconfirmed2","293795a6":"# Melting the Death Cases Dataframe:\ndeaths2=pd.melt(deaths,id_vars=['Province\/State','Country\/Region','Lat','Long'],var_name='Dates', value_name='Death Cases')\n#deaths2\n\n# Exploring Deaths Cases Dataframe:\ndeaths2.info()\n\n# Converting Dates to Datetime Format:\ndeaths2['Dates'] = pd.to_datetime(deaths2['Dates'], infer_datetime_format=True)\n\n# Converted from Object to Datetime\ndeaths2.info()","d46d24ea":"# Melting the Recovered Cases Dataframe:\nrecovered2=pd.melt(recovered,id_vars=['Province\/State','Country\/Region','Lat','Long'],var_name='Dates', value_name='Recovered Cases')\nrecovered2\n\n# Exploring Deaths Cases Dataframe:\nrecovered2.info()\n\n# Converting Dates to Datetime Format:\nrecovered2['Dates'] = pd.to_datetime(recovered2['Dates'], infer_datetime_format=True)\n\n#Converted from Object to Datetime\nrecovered2.info()\nrecovered2","2b1da073":"# Merging Confirmed, Death and Recovered Cases Together:\nconfirmed2['Death Cases'] = pd.Series(deaths2['Death Cases'])\nconfirmed2['Recovered Cases'] = pd.Series(recovered2['Recovered Cases'])\n\n# View the Final Merged Dataframe with All 3 Cases (Confirmed, Death and Recovered Cases):\ncovid19 = confirmed2","efdd79ec":"# Descriptive Stats of All Variables\ncovid19.describe(include='all')","abed01aa":"# Descriptive Stats of Variables with Available Data\ncovid19.describe().transpose()","e78b373e":"# Writing the Dataframe to CSV File\ncovid19.to_csv(\"covid19_timeseries.csv\", index=False)","7ee635f7":"import seaborn as sns\nimport matplotlib.pyplot as plt\n%matplotlib inline\n\n#sns.pairplot(train_data)\ncorr = covid19.corr()\nfig, (ax) = plt.subplots(1, 1, figsize=(7,6))\n\nhm = sns.heatmap(corr, \n                 ax=ax,           # Axes in which to draw the plot, otherwise use the currently-active Axes.\n                 cmap=\"coolwarm\", # Color Map.\n                 #square=True,    # If True, set the Axes aspect to \u201cequal\u201d so each cell will be square-shaped.\n                 annot=True, \n                 fmt='.2f',       # String formatting code to use when adding annotations.\n                 #annot_kws={\"size\": 14},\n                 linewidths=.05)\n\nfig.subplots_adjust(top=0.93)\nfig.suptitle('COVID19 Cases Correlation Heatmap with Lat Long', \n              fontsize=14, \n              fontweight='bold')\nplt.figure()\nplt.show()","54c732cb":"#Pairplot for just numerical variables\n# Attributes of interest\nplt.rcParams.update({'figure.max_open_warning': 0})\ncols = ['Confirmed Cases', \n        'Recovered Cases', \n        'Death Cases']\n\n\npp = sns.pairplot(covid19[cols],palette=\"Set3\",\n                  diag_kws=dict(shade=True),\n                  diag_kind=\"kde\", # use \"kde\" for diagonal plots\n                  kind=\"reg\")\n\nfig = pp.fig \nfig.subplots_adjust(top=0.97, wspace=0.4)\nfig.suptitle('COVID19 Cases Attributes Pairwise Plots', fontsize=14, fontweight='bold')","e0dd6572":"import seaborn as sns; \nsns.set(style=\"ticks\", color_codes=True)\n#sns.pairplot(covid19)\n\n#Using Kernel Density for Univariate Plot\nsns.pairplot(covid19, diag_kind=\"kde\")","55824173":"import seaborn as sns\nsns.set(style=\"darkgrid\")\n\n# Plot the responses for different events and regions\nsns.lineplot(x=\"Dates\", y=\"Confirmed Cases\", data=covid19)\n\nimport matplotlib.pyplot as plt\n# control x and y limits\nplt.xticks(x=\"Dates\", rotation='vertical')","24ed0ad9":"sns.relplot(x=\"Dates\", y=\"Confirmed Cases\", ci=None, kind=\"line\", data=covid19);\nplt.xticks(x=\"Dates\", rotation='vertical')","c5601383":"import seaborn as sns\nsns.set(style=\"darkgrid\")\n\n# Plot the responses for different events and regions\nsns.lineplot(x=\"Dates\", y=\"Recovered Cases\", data=covid19)\n\nimport matplotlib.pyplot as plt\n# control x and y limits\nplt.xticks(x=\"Dates\", rotation='vertical')","8bf09c1c":"sns.relplot(x=\"Dates\", y=\"Recovered Cases\", ci=None, kind=\"line\", data=covid19);\nplt.xticks(x=\"Dates\", rotation='vertical')","38651cc0":"import seaborn as sns\nsns.set(style=\"darkgrid\")\n\n# Plot the responses for different events and regions\nsns.lineplot(x=\"Dates\", y=\"Death Cases\", data=covid19)\n\nimport matplotlib.pyplot as plt\n# control x and y limits\nplt.xticks(x=\"Dates\", rotation='vertical')","4caf4135":"sns.relplot(x=\"Dates\", y=\"Death Cases\", ci=None, kind=\"line\", data=covid19);\nplt.xticks(x=\"Dates\", rotation='vertical')","00b678c0":"# Select only Relevant Columns:\ncovid19cases_subset = covid19.loc[:, ['Dates', 'Confirmed Cases', 'Recovered Cases', 'Death Cases']]\ncovid19cases_subset.head()","89c238e4":"import matplotlib.pyplot as plt\nimport matplotlib\nsns.set()\n#%matplotlib inline\nplt.style.use('fivethirtyeight')\n#matplotlib.rcParams['axes.labelsize'] = 14\n#matplotlib.rcParams['xtick.labelsize'] = 12\n#matplotlib.rcParams['ytick.labelsize'] = 12\n#matplotlib.rcParams['text.color'] = 'k'\n\nplt.figure(figsize=(15, 10))\nsns.lineplot(covid19cases_subset['Dates'], covid19cases_subset['Confirmed Cases'].tolist(), label = 'CONFIRMED')\nsns.lineplot(covid19cases_subset['Dates'], covid19cases_subset['Death Cases'].tolist(), label = 'DEATH')\nsns.lineplot(covid19cases_subset['Dates'], covid19cases_subset['Recovered Cases'].tolist(), label = 'RECOVERED')\n\nplt.xlabel('Date'); plt.ylabel('Cases Number'); plt.title('All Cases Over Time')\nplt.legend();","faffbac7":"# Dropping Rows where No Cases are Reported\n#covid19cases_subset.head(100)\n#covid19cases_subset.shape()\ncovid19cases_subset = covid19cases_subset.loc[~((covid19cases_subset['Confirmed Cases']==0) | (covid19cases_subset['Recovered Cases']==0.0) | ((covid19cases_subset['Death Cases']==0)))]\ncovid19cases_subset.head(100)\ncovid19cases_subset.tail(1000)","3919baf5":"# Density Plot\nfig = plt.figure(figsize=(30,8))\ntitle = fig.suptitle(\"Cases Distribution\", fontsize=14)\nfig.subplots_adjust(top=0.85, wspace=0.3)\n\nax1 = fig.add_subplot(1,2,1)\nax1.set_title(\"Confirmed Cases Distribution\")\nax1.set_xlabel(\"Confirmed Cases\")\nax1.set_ylabel(\"Probability Density\") \nsns.kdeplot(covid19['Confirmed Cases'], kernel='gau', bw=.000000000000029000000, ax=ax1, shade=True, color='b') # .00000000000005\n\nax3 = fig.add_subplot(1,2,2)\nax3.set_title(\"Death Cases Distribution\")\nax3.set_xlabel(\"Death Cases\")\nax3.set_ylabel(\"Probability Density\") \nsns.kdeplot(covid19['Death Cases'], kernel='gau', bw=.000000000000029000000, ax=ax3, shade=True, color='r')\n\n# Density Plot\nfig = plt.figure(figsize=(30,8))\ntitle = fig.suptitle(\"Cases Distribution\", fontsize=14)\nfig.subplots_adjust(top=0.85, wspace=0.3)\n\nax1 = fig.add_subplot(1,2,1)\nax1.set_title(\"Recovered Cases Distribution\")\nax1.set_xlabel(\"Recovered Cases\")\nax1.set_ylabel(\"Probability Density\") \nsns.kdeplot(covid19['Recovered Cases'], kernel='gau', bw=.000000000000029000000, ax=ax1, shade=True, color='g')","24f692d7":"# Loading Datasets\n#import os\n#for dirname, _, filenames in os.walk('..\/output'):\n    #for filename in filenames:\n        #print(os.path.join(dirname, filename))\n        \n#covid19 = pd.read_csv(\"..\/input\/covid19-timeseries\/covid19_timeseries.csv\")\n#..\/input\/covid19-timeseries\/covid19_timeseries.csv\n#.\/\n#.\/\n#.\/\n#.\/covid19_timeseries.csv","012d8521":"# Work From Here. Not Replacing the Previous Data File\nimport os\nfor dirname, _, filenames in os.walk('..\/output\/kaggle\/working\/covid19_timeseries.csv'):\n    for filename in filenames:\n        print(os.path.join(dirname, filename))\n        \ncovid19 = pd.read_csv(\"..\/input\/covid19-timeseries\/covid19_timeseries.csv\")","fd065c2d":"# Libraries Required\nimport numpy as np\nimport pandas as pd\nimport matplotlib.pyplot as plt\nimport seaborn as sns\n%matplotlib inline\nfrom mpl_toolkits.mplot3d import Axes3D","f5c5198e":"# Libraries for Forecasting\nimport pandas as pd\nfrom matplotlib import pyplot as plt\nplt.style.use('fivethirtyeight')\nfrom fbprophet import Prophet","8fe4e7d4":"#Prophet Models\ncovid19.head()\n#covid19.head(100)\n\n# Prophet Requires columns ds (Dates) and y (value)\ncovid19confirmedcases = covid19.rename(columns={'Dates': 'ds', 'Confirmed Cases': 'y'})\n\n# Let's Drop columns Death Cases & Recovered Cases for this dataframe\ncovid19confirmedcases.drop(['Death Cases', 'Recovered Cases'], axis=1, inplace=True)\ncovid19confirmedcases.head()\n\n# Fitting Model\n# changepoint_prior_scale can help to achieve a better fit by reducing uncertainty, Prophet Documentation suggest the scale at 0.5\nmc=Prophet(changepoint_prior_scale=0.001, seasonality_mode='additive', daily_seasonality=True, yearly_seasonality=True)\nmc.fit(covid19confirmedcases)\n\n# Future dataframe with 1 year of data for each day\nfuture_covid19confirmedcases=mc.make_future_dataframe(periods=90, freq='D')\n#Checking how the dataframe looks like\n#future_covid19confirmedcases.tail()\n\n# Make predictions\nforecast_covid19confirmedcases=mc.predict(future_covid19confirmedcases)\n\n#interval_width=0.95\n#forecast_covid19confirmedcases = (interval_width).fit(m).predict(future)","cb9969de":"from fbprophet.plot import add_changepoints_to_plot\n\n# Helps in addressing the Type Error for dates\npd.plotting.register_matplotlib_converters()\n\n# Plotting\nfig_confirmed = mc.plot(forecast_covid19confirmedcases, uncertainty=True, xlabel = 'Dates', ylabel = 'Confirmed Cases')\nplt.title('Forecasting of Confirmed Cases')","3350e712":"## Plot Model Components\nfig = mc.plot_components(forecast_covid19confirmedcases)","5420edd6":"# Checking Model Uncertainty\n#forecast_covid19confirmedcases.head()\nforecast_covid19confirmedcases[['ds', 'trend', 'yhat', 'yhat_lower', 'yhat_upper']].tail()\nforecast_covid19confirmedcases.rename(columns={'trend':'y'}, inplace=True)\n#forecast_covid19confirmedcases.head()\n\n\n# Uncertainty in Trend\nforecast_covid19confirmedcases_trenduncertainty = Prophet(interval_width=0.95).fit(forecast_covid19confirmedcases).predict(covid19confirmedcases)\n\n\n# Uncertainty in Seasonality: Considering Samples from 6 Months Data\nmc = Prophet(mcmc_samples=300)\nforecast_covid19confirmedcases_seasonaluncertainty = mc.fit(forecast_covid19confirmedcases).predict(covid19confirmedcases)\n\nfig = mc.plot_components(forecast_covid19confirmedcases_seasonaluncertainty)\n\n#fig_confirmed = m.plot(forecast, uncertainty=False, xlabel = 'Dates', ylabel = 'Confirmed Cases')\n#plt.title('Forecasting of Confirmed Cases')","756224f7":"#Prophet Models\ncovid19.head()\n\n# Prophet Requires columns ds (Dates) and y (value)\ncovid19deathcases = covid19.rename(columns={'Dates': 'ds', 'Death Cases': 'y'})\n\n# Let's Drop columns Death Cases & Recovered Cases for this dataframe\ncovid19deathcases.drop(['Confirmed Cases', 'Recovered Cases'], axis=1, inplace=True)\ncovid19deathcases.head()\n\n# Fitting Model\n# changepoint_prior_scale can help to achieve a better fit by reducing uncertainty, Prophet Documentation suggest the scale at 0.5\nmd=Prophet(changepoint_prior_scale=0.25, seasonality_mode='additive', daily_seasonality=True, yearly_seasonality=True)\nmd.fit(covid19deathcases)\n\n# Future dataframe with 1 year of data for each day; Periods tell the Number of Days till when we would like to see the Forecast\nfuture_covid19deathcases=md.make_future_dataframe(periods=90, freq='D')\n#Checking how the dataframe looks like\n#future_covid19confirmedcases.tail()\n# Make predictions\nforecast_covid19deathcases=md.predict(future_covid19deathcases)","73ba1c1f":"from fbprophet.plot import add_changepoints_to_plot\n\n# Helps in addressing the Type Error for dates\npd.plotting.register_matplotlib_converters()\n\n# Plotting\nfig_death = md.plot(forecast_covid19deathcases, uncertainty=True, xlabel = 'Dates', ylabel = 'Death Cases')\nplt.title('Forecasting of Death Cases')","aa912c2b":"## Plot Model Components\nfig1 = md.plot_components(forecast_covid19deathcases)","d16b5b27":"# Checking Model Uncertainty\nforecast_covid19deathcases[['ds', 'trend', 'yhat', 'yhat_lower', 'yhat_upper']].tail()\nforecast_covid19deathcases.rename(columns={'trend':'y'}, inplace=True)\n#forecast_covid19confirmedcases.head()\n\n\n# Uncertainty in Trend\nforecast_covid19deathcases_trenduncertainty = Prophet(interval_width=0.95).fit(forecast_covid19deathcases).predict(covid19deathcases)\n\n\n# Uncertainty in Seasonality: Considering Samples from 6 Months Data\nmd = Prophet(mcmc_samples=300)\nforecast_covid19deathcases_seasonaluncertainty = md.fit(forecast_covid19deathcases).predict(covid19deathcases)\n\nfig = md.plot_components(forecast_covid19deathcases_seasonaluncertainty)\n\n#fig_confirmed = m.plot(forecast, uncertainty=False, xlabel = 'Dates', ylabel = 'Confirmed Cases')\n#plt.title('Forecasting of Confirmed Cases')","3b84c80a":"#Prophet Models\ncovid19.head()\n\n# Prophet Requires columns ds (Dates) and y (value)\ncovid19recoveredcases = covid19.rename(columns={'Dates': 'ds', 'Recovered Cases': 'y'})\n\n# Let's Drop columns Death Cases & Recovered Cases for this dataframe\ncovid19recoveredcases.drop(['Confirmed Cases', 'Death Cases'], axis=1, inplace=True)\ncovid19recoveredcases.head()\n\n# Fitting Model\n# changepoint_prior_scale can help to achieve a better fit by reducing uncertainty, Prophet Documentation suggest the scale at 0.5\nmr=Prophet(changepoint_prior_scale=0.25, seasonality_mode='additive', daily_seasonality=True, yearly_seasonality=True)\nmr.fit(covid19recoveredcases)\n\n# Future dataframe with 1 year of data for each day\nfuture_covid19recoveredcases=mr.make_future_dataframe(periods=90, freq='D')\n#Checking how the dataframe looks like\n#future_covid19confirmedcases.tail()\n# Make predictions\nforecast_covid19recoveredcases=mr.predict(future_covid19recoveredcases)","deaa32c4":"from fbprophet.plot import add_changepoints_to_plot\n\n# Helps in addressing the Type Error for dates\npd.plotting.register_matplotlib_converters()\n\n# Plotting\nfig_death = mr.plot(forecast_covid19recoveredcases, xlabel = 'Dates', ylabel = 'Recovered Cases')\nplt.title('Forecasting of Recovered Cases')","3de9e98c":"## Plot Model Components\nfig1 = mr.plot_components(forecast_covid19recoveredcases)","f7d6e8c6":"# Checking Model Uncertainty\nforecast_covid19recoveredcases[['ds', 'trend', 'yhat', 'yhat_lower', 'yhat_upper']].tail()\nforecast_covid19recoveredcases.rename(columns={'trend':'y'}, inplace=True)\n#forecast_covid19confirmedcases.head()\n\n\n# Uncertainty in Trend\nforecast_covid19recoveredcases_trenduncertainty = Prophet(interval_width=0.95).fit(forecast_covid19recoveredcases).predict(covid19recoveredcases)\n\n\n# Uncertainty in Seasonality: Considering Samples from 6 Months Data\nmr = Prophet(mcmc_samples=300)\nforecast_covid19recoveredcases_seasonaluncertainty = mr.fit(forecast_covid19recoveredcases).predict(covid19recoveredcases)\n\nfig = mr.plot_components(forecast_covid19recoveredcases_seasonaluncertainty)\n\n#fig_confirmed = m.plot(forecast, uncertainty=False, xlabel = 'Dates', ylabel = 'Confirmed Cases')\n#plt.title('Forecasting of Confirmed Cases')\n","47c0d9c5":"from fbprophet.plot import plot_yearly\nmr = Prophet(yearly_seasonality=40).fit(covid19recoveredcases)\na = plot_yearly(mr)","90961ed0":"# Considering Weekly & Monthly Seasonality\nmr = Prophet(weekly_seasonality=True)\nmr.add_seasonality(name='monthly', period=30.5, fourier_order=6)\nforecast = mr.fit(covid19recoveredcases).predict(forecast_covid19recoveredcases_trenduncertainty)\nfig = mr.plot_components(forecast)","b75f71d8":"confirmedcases_names = ['confirmedcases_%s' % column for column in forecast_covid19confirmedcases.columns]\ndeathcases_names = ['deathcases_%s' % column for column in forecast_covid19deathcases.columns]\nrecoveredcases_names = ['recoveredcases_%s' % column for column in forecast_covid19recoveredcases.columns]\n\n# Dataframes to merge\nmerge_confirmedcases_forecast = forecast_covid19confirmedcases.copy()\nmerge_deathcases_forecast = forecast_covid19deathcases.copy()\nmerge_recoveredcases_forecast = forecast_covid19recoveredcases.copy()\n\n# Rename the columns\nmerge_confirmedcases_forecast.columns = confirmedcases_names\nmerge_deathcases_forecast.columns = deathcases_names\nmerge_recoveredcases_forecast.columns = recoveredcases_names\n\n# Renaming the Date Columns\nconfirmedcases_forecast = merge_confirmedcases_forecast.rename(columns={'confirmedcases_ds': 'Date'})\ndeathcases_forecast = merge_deathcases_forecast.rename(columns={'deathcases_ds': 'Date'})\nrecoveredcases_forecast = merge_recoveredcases_forecast.rename(columns={'recoveredcases_ds': 'Date'})\n\n# Dropping some of the Columns \nconfirmedcases_forecast.drop(confirmedcases_forecast.iloc[:, 2:21], inplace = True, axis = 1)\ndeathcases_forecast.drop(deathcases_forecast.iloc[:, 2:21], inplace = True, axis = 1)\nrecoveredcases_forecast.drop(recoveredcases_forecast.iloc[:, 2:21], inplace = True, axis = 1)\n\n#confirmedcases_forecast.head(10)\ndeathcases_forecast.tail(1000)\nrecoveredcases_forecast.tail(10)","e5702741":"from matplotlib import pyplot as plt\nplt.style.use('fivethirtyeight')\n\nplt.figure(figsize=(10, 8))\nplt.plot(confirmedcases_forecast['Date'], confirmedcases_forecast['confirmedcases_y'], 'b-', label = 'Trend')\nplt.plot(confirmedcases_forecast['Date'], confirmedcases_forecast['confirmedcases_yhat'], 'r-', label = 'Prediction')\nplt.legend(); plt.xlabel('Date'); plt.ylabel('Confirmed Cases'); \nplt.title('Trend vs. Prediction for Confirmed Cases'); ","2f3c7892":"plt.figure(figsize=(10, 8))\nplt.plot(deathcases_forecast['Date'], deathcases_forecast['deathcases_y'], 'b-', label = 'Trend')\nplt.plot(deathcases_forecast['Date'], deathcases_forecast['deathcases_yhat'], 'r-', label = 'Prediction')\nplt.legend(); plt.xlabel('Date'); plt.ylabel('Death Cases'); \nplt.title('Trend vs. Prediction for Death Cases'); ","e36c8abc":"plt.figure(figsize=(10, 8))\nplt.plot(recoveredcases_forecast['Date'], recoveredcases_forecast['recoveredcases_y'], 'b-', label = 'Trend')\nplt.plot(recoveredcases_forecast['Date'], recoveredcases_forecast['recoveredcases_yhat'], 'r-', label = 'Prediction')\nplt.legend(); plt.xlabel('Date'); plt.ylabel('Recovered Cases'); \nplt.title('Trend vs. Prediction for Recovered Cases'); ","cf485e27":"from fbprophet.diagnostics import cross_validation\ndfconfirmed = cross_validation(mc, initial='60 days', period='7 days', horizon='30 days') # 30, 30, 100; 60, 30, 100; 60, 30, 200; 60, 90, 100 less error\n#df_cv.head()","047512cf":"from fbprophet.diagnostics import performance_metrics\nfrom fbprophet.plot import plot_cross_validation_metric\n\ndf_pconfirmed = performance_metrics(dfconfirmed, rolling_window = 0.1)\ndf_pconfirmed.head()\n\n#performance_metrics(df, metrics = NULL, rolling_window = 0.1) https:\/\/rdrr.io\/cran\/prophet\/man\/performance_metrics.html","a3c91593":"# With RMSE\nfrom fbprophet.plot import plot_cross_validation_metric\nfig = plot_cross_validation_metric(dfconfirmed, metric='rmse')\n\n# With MAPE\nfrom fbprophet.plot import plot_cross_validation_metric\nfig = plot_cross_validation_metric(dfconfirmed, metric='mape')","66bdeec3":"from fbprophet.diagnostics import cross_validation\ndfdeath = cross_validation(md, initial='60 days', period='7 days', horizon='30 days') # 30, 30, 100; 60, 30, 100; 60, 30, 200; 60, 90, 100 less error\n#df_cv.head()","2e88335c":"from fbprophet.diagnostics import performance_metrics\nfrom fbprophet.plot import plot_cross_validation_metric\n\ndf_pdeath = performance_metrics(dfdeath, rolling_window = 0.1)\ndf_pdeath.head()","0592ec27":"# With RMSE\nfrom fbprophet.plot import plot_cross_validation_metric\nfig = plot_cross_validation_metric(dfdeath, metric='rmse')\n\n# With MAPE\nfrom fbprophet.plot import plot_cross_validation_metric\nfig = plot_cross_validation_metric(dfdeath, metric='mape')","4a8c42c5":"from fbprophet.diagnostics import cross_validation\ndfrecovered = cross_validation(mr, initial='60 days', period='7 days', horizon='30 days') # 30, 30, 100; 60, 30, 100; 60, 30, 200; 60, 90, 100 less error\n#df_cv.head()","2e972038":"from fbprophet.diagnostics import performance_metrics\nfrom fbprophet.plot import plot_cross_validation_metric\n\ndf_precovered = performance_metrics(dfrecovered, rolling_window = 0.1)\ndf_precovered.head()","eb9ede08":"# With RMSE\nfrom fbprophet.plot import plot_cross_validation_metric\nfig = plot_cross_validation_metric(dfrecovered, metric='rmse')\n\n# With MDAPE (Median Abs Percentage Error)\nfrom fbprophet.plot import plot_cross_validation_metric\nfig = plot_cross_validation_metric(dfrecovered, metric='mdape')","4cd0a62f":"## 2. Model Cross Validation for Death Cases","c3ea286b":"## Pairwise Plots\nFrom the Pairwise Plots, it look the number of Death Cases are either not that high in the dataset as compared to Confirmed & Recovered Cases.","daf05e70":"## Confirmed Cases Forecasting","ff1d8c7e":"## Confirmed Cases Across Time without Confidence Interval Around Mean\n","9cc9eb6e":"## Sneek Peak Into Some of the Data Variables\n","c33d716c":"## Comparing Trend and Prediction Value for Recovered Cases ","9986088c":"## Recovered Cases Across Time without Confidence Interval Around Mean","1fedf866":"### Prediction Plot for Death Cases","f2b73541":"## Confirmed Cases Across Time with & without 95% CI Around Mean\n\nSince the default behaviour in seaborn is to aggregate the multiple measurements at each x value by plotting the mean and the 95% cofidence interval around the mean.","89e7f5e7":"## Combined Forecasting for Confirmed, Death & Recovered Cases","4c417d2c":"## Model Uncertainty for Recovered Cases\n\n\n","5467019b":"## Performance Evaluation","6c7c32fe":"# Cross Validation\n\nCross Validation just automates the process of Model Performance. The first parameter given is the trained model m (not the data). Then the next parameter prediction horizon - how frequently we want to predict (in this case '30 days'). Then give an ***initial*** (how long to train before starting the tests) and a ***period*** (how frequently to stop and do a prediction). If we don't provide these parameter values, Prophet will assign defaults of **initial = 3 * horizon, and cutoffs every half a horizon**.","44a2d95c":"## Death Cases Forecasting","068c3391":"## Fourier Order In Seasonalities For Recovered Cases\nThe default seasonality is 10. However to fit higher frequency changes the variable can be increased, depending on the frequnecy of the data reporting.","9e71c908":" ## 1. Model Cross Validation for Confirmed Cases","3ac9b1ec":"### Weekly & Monthly Seasonality with Fourier Transform\nConsidering both the Weekly as well as Monthly Seasonality in the data to make sure we consider all the uncertainties in the data.","e6695d58":"## Plotting Univariate Data","356bd970":"## Model Uncertainty in Confirmed Cases","feb21787":"### Prediction Plot for Confirmed Cases","841b5a88":"## Model Uncertainty for Death Cases","bf644248":"\n## Relationship Amongst Variables\n\nFrom the Correlation Heatmap it can be seen that:\n * With increase in Latitude & increase in Longitude Confirmed Cases increases.\n * With increase in Latitude & decrease in Longitude Death Cases increases.\n * With increase in Latitude & decrease in Longitude Recovereed Cases increases.\n\nIn other words:\n * The **Confirmed Cases** peaks with increase in Longitude, and then drops with decrease in  Longitude and increase in Latitude.\n * The **Death Cases** peaks with decrease in Longitude, and then drops further with decrease in Longitude, (clearly indicating some other factors that might have influenced)\n * The **Recovered Cases** peaks wth decrease in Longitude and drops with increase in Lat & Long. \n","fbb87d94":"## Death Cases Across Time with 95% CI Around Mean","ecec9ac7":"## Error Visualization\n\nCross Validation Performance Metrics can be visualized with plot_cross_validation_metric, here shown for MSE, RMSE, MAE, MAPE. The blue line shows the MAPE, where the mean is taken over a rolling window of the dots. There is almost zero errors uptil 1 month, and then seems like the error would gradually increase with the number of days. The *MAPE* measures the deviation from the actual data in terms of percentage. \n*RMSE* is more accurate in terms of aggressive towards big errors.","01047d77":"# Uncertainty in Models\nThe Model Uncertainty shows the Predicted value in terms of 'yhat'. This forecast model definitely consists of a lot of uncertainty in terms of the predicted interval as well as the upper and lower predicted uncertainty intervals. Definitely a good time to find a way to DECREASE uncertainty. First we will try by increasing the changepoint prior scale.There are 3 main sources of Uncertainty in the Forecast:\n1. Uncertainty in Trend\n2. Uncertainty in Seasonality Estimates.\n3. Additional Observation Noise.\n\nBy default, Prophet returns uncertainty in Trend and Observation Noise. To capture uncertainty in seasonality we need to perform a full Bayesian Sampling taking into consideration data for the last 6 months.","fdfd588f":"# EDA & Time Series Analysis: Using Prophet","4326bb60":"### Prediction Plot for Recovered Cases","419551c4":"## Additive & Multiplicative Prophet Models\n\nProphet with The Additive Model, that we used here for the purpose of building the Model: y(t) = g(t) + s(t) + h(t) + e(t),\nwhere: \n* g(t) represents trend\n* s(t) represents periodic component\n* h(t) holiday related events or may be social distancing in this case. \n* e(t) is the error\nProphet with **The Multiplicative Model**: y(t) = g(t) * s(t) * h(t) * e(t)\n\nFor the purpose of understanding the data, ran the Models with both Additive and Multiplicative Models. Usually **Multiplicative Models** are used when the magnitude of the seasonal pattern in the data depends on the magnitude of the data. Whereas **Additive Models** are usually used when the magnitude of seasonality does not change in relation to time. In this case so far we are still in the Initial Stage of the Data and we are yet to see the actual seasonal change over the behaviour on the data. So, it is a better practise to go with a Model that won't overfit the Model's Performance. \n","573ba5d5":"## Seasonal Components in Forecasting of Death Cases","a3559748":"##  Recovered Cases Across Time with 95% CI Around Mean\n","8284280c":"## Kernel Density Function\n\nThe Kernel Density Function gives an interesting sneak peak to understand the Probability Density Fucntion of the Cases across the Confirmed, Recovered and Death Cases in the entire dataset. At least for the **Confirmed Cases** and the **Recovered Cases** the data seems to be Skewed to the Right, indicating that the Mean of the Cases Distribution would be lower than the Median and the Mode. We need to deep dive into the **Death Cases** because that seems to Right Skewed too but with some intermittent high spikes. The number of **Confirmed Cases** are also spanned over a larger number than both the Recovered and the Death Cases, that could be an interesting reason for why most of the initial cases were ignored by most of the countries.\nSeems like the Probability Density Distribution for the Death Cases were at least 2 times higher than that of the Confirmed Cases. And the Confirmed and Recovered Cases were almost going hand in hand in terms of their Probability Density Function.","6f128360":"## Recovered Cases Forecasting","7c12e8ca":"## Error Visualization","d1481ad7":"## Correlation Matrix","03165874":"## Seasonal Components of Recovered Cases","57a2b7a2":"## Seasonal Components in Forecasting of Confirmed Cases","f405ea58":"## Comparing Trend & Prediction Value for Confirmed Cases","826ca3df":"## Performance Evaluation","6752815e":"## Death Cases Across Time without Confidence Interval Around Mean\n","971fa5fd":"## Visual Comparison","a8bef6fe":"## Error Visualization","b9213a94":"## Performance Evaluation\n\nThe performance_metrics utility can be used to compute some useful statistics of the prediction performance (yhat, yhat_lower, and yhat_upper compared to y), as a function of the distance from the cutoff (how far into the future the prediction was). The statistics computed are mean squared error (MSE), root mean squared error (RMSE), mean absolute error (MAE), mean absolute percent error (MAPE), and coverage of the yhat_lower and yhat_upper estimates. These are computed on a rolling window of the predictions in df after sorting by horizon (ds minus cutoff). ","411b09fb":"## Comparing Trend and Prediction Value for Death Cases","cfc0ed91":"## 3. Model Cross Validation for Recovered Cases","8980ce1c":"# Time Series Analysis using Prophet"}}