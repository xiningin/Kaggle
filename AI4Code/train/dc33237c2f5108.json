{"cell_type":{"c0e07f06":"code","08bcb4e9":"code","283c2ce4":"code","48844b96":"code","8bd7b024":"code","592b23fe":"code","43115a09":"code","b7892d36":"code","297f7c0e":"code","fa52144b":"code","a823eed8":"code","a8d4e5d9":"code","96fe6ac2":"code","4c421b59":"code","bd3eab46":"code","829e73d9":"code","fb7a9bd6":"code","4cf14563":"code","f6892ba1":"code","10f75941":"code","5f6fbe57":"code","db22a97f":"code","35e92b5e":"code","b5d6df7f":"code","303ab7df":"code","f9231b18":"code","de374c59":"code","af072ea1":"code","635f6fb4":"code","fff8c829":"code","24a58667":"code","1650f82f":"code","67d9282d":"code","9943ed42":"code","49641bc0":"code","617d329c":"code","6cdbe2dc":"code","1c3a534d":"code","1770b7a8":"code","ba04a923":"code","4bb6072b":"code","0cb67302":"code","dfe3781a":"code","dfd17c85":"code","c97604f5":"code","e9446e03":"code","2896695a":"code","224c6975":"code","113af497":"code","c6742465":"code","680ff127":"code","70bfc203":"code","aa36a088":"code","335fd1d8":"code","4c5534f2":"code","c8a2968a":"code","e7a3c8f7":"markdown","99f8c95e":"markdown","d917631d":"markdown","4dcf30da":"markdown","ab8ad031":"markdown","69847aa8":"markdown","2a3901c5":"markdown","9df66dc6":"markdown","ce6a1c5a":"markdown","78f9b097":"markdown","6a97e722":"markdown","d41000c2":"markdown","196a7833":"markdown","2b8edcb0":"markdown","ba64418c":"markdown","ce55ded4":"markdown","9e012a7f":"markdown","5d95f7e5":"markdown","077f1e60":"markdown","956392e3":"markdown","297870f8":"markdown","47714c76":"markdown","ceae9b99":"markdown","8f21ed4e":"markdown","8d9d99aa":"markdown","46c8ee60":"markdown","44f65aaa":"markdown","c27cde56":"markdown","2868d60a":"markdown","16d04545":"markdown","8efe651b":"markdown"},"source":{"c0e07f06":"import pandas as pd\nimport numpy as np\nimport matplotlib.pyplot as plt\nimport seaborn as sns\n\n%matplotlib inline\n\nimport os\nfor dirname, _, filenames in os.walk('\/kaggle\/input'):\n    for filename in filenames:\n        print(os.path.join(dirname, filename))","08bcb4e9":"df=pd.read_csv('..\/input\/ecommerce-data\/data.csv', encoding= 'unicode_escape')","283c2ce4":"df.head()","48844b96":"df.info()","8bd7b024":"df['InvoiceDate']=pd.to_datetime(df['InvoiceDate'])","592b23fe":"df.info()","43115a09":"df.shape","b7892d36":"df['total_transaction']=df['Quantity']*df['UnitPrice']","297f7c0e":"df.head()","fa52144b":"df['Month']=df['InvoiceDate'].apply(lambda x:x.month)","a823eed8":"df['Year']=df['InvoiceDate'].apply(lambda x:x.year)","a8d4e5d9":"df=df.sort_values(by=['Year','Month'])","96fe6ac2":"mmap={1:'Jan11',2:'Feb11',3:'Mar11',4:'Apr11', 5:'May11', 6:'Jun11', 7:'Jul11',8:'Aug11',9:'Sep11',10:'Oct11',11:'Nov11',12:'Dec11'}","4c421b59":"df['Month_name']=df['Month'].map(mmap)","bd3eab46":"df.head()","829e73d9":"def my(x):\n    Month=x[0]\n    Year=x[1]\n    \n    if Year==2010:\n        Month='Dec10'\n        return Month\n    else:\n        return Month","fb7a9bd6":"df['Month_name']=df[['Month_name','Year']].apply(my, axis=1)","4cf14563":"df.head()","f6892ba1":"monthly=df.groupby(['Year','Month','Month_name']).sum()","10f75941":"monthly","5f6fbe57":"monthly.reset_index(inplace=True)","db22a97f":"monthly","35e92b5e":"plt.figure(figsize=(10,5))\nsns.set_style('whitegrid')\nsns.barplot(x='Month_name', y='total_transaction', data=monthly, palette='viridis')\nplt.title('Monthly Total Transaction', fontsize=14)\nplt.xlabel('Month')\nplt.ylabel('Total Transaction (mil)')","b5d6df7f":"nov11=df[(df['Month']==11) & (df['Year']==2011)]","303ab7df":"nov11.info()","f9231b18":"nov11['Description'].fillna('unknown', inplace=True)","de374c59":"nov11.info()","af072ea1":"nov11=nov11.groupby(['StockCode','Description']).sum().sort_values(by='total_transaction', ascending=False)","635f6fb4":"nov11['total_transaction'].head(10)","fff8c829":"df['Description'].fillna('unknown', inplace=True)","24a58667":"pivot=df.pivot_table(index=['StockCode','Description'], values='total_transaction', columns='Month_name', aggfunc='sum').sort_values(by='Nov11', ascending=False)","1650f82f":"pivot.head(10)","67d9282d":"qty=df.pivot_table(index=['StockCode','Description'], values='Quantity', aggfunc='sum').sort_values(by='Quantity', ascending=False)","9943ed42":"qty.reset_index(inplace=True)\nqty.head()","49641bc0":"sns.barplot(y='Description', x='Quantity', data=qty.head(10))\nplt.title('Top 10 Most Popular Items', fontsize=14)\nplt.ylabel('Item')","617d329c":"sns.barplot(y='Description', x='Quantity', data=qty.tail(10))\nplt.title('Top 10 Most Popular Items', fontsize=14)\nplt.ylabel('Item')","6cdbe2dc":"qty=qty[qty['Quantity']>0]","1c3a534d":"sns.barplot(y='Description', x='Quantity', data=qty.tail(10))\nplt.title('Top 10 Least Popular Items', fontsize=14)\nplt.ylabel('Item')","1770b7a8":"bycountry=df.groupby('Country').sum()","ba04a923":"bycountry.reset_index(inplace=True)","4bb6072b":"bycountry.sort_values(by='total_transaction', ascending=False).head()","0cb67302":"sns.barplot(x='total_transaction', y='Country', data=bycountry.sort_values(by='total_transaction', ascending=False).head())\nplt.xlabel('Total Transaction')\nplt.title('5 Countries with Most Transaction')","dfe3781a":"indexed=df.pivot_table(index=['Country','StockCode','Description'], values='Quantity', aggfunc='sum').reset_index()","dfd17c85":"sns.barplot(y='Description', x='Quantity', data=indexed[indexed['Country']=='United Kingdom'].sort_values(by='Quantity', ascending=False).head(10))\nplt.title('Top 10 Most Popular Items in UK', fontsize=14)\nplt.ylabel('Item')","c97604f5":"sns.barplot(y='Description', x='Quantity', data=indexed[indexed['Country']=='Netherlands'].sort_values(by='Quantity', ascending=False).head(10))\nplt.title('Top 10 Most Popular Items in Netherlands', fontsize=14)\nplt.ylabel('Item')","e9446e03":"sns.barplot(y='Description', x='Quantity', data=indexed[indexed['Country']=='EIRE'].sort_values(by='Quantity', ascending=False).head(10))\nplt.title('Top 10 Most Popular Items in EIRE', fontsize=14)\nplt.ylabel('Item')","2896695a":"sns.barplot(y='Description', x='Quantity', data=indexed[indexed['Country']=='Germany'].sort_values(by='Quantity', ascending=False).head(10))\nplt.title('Top 10 Most Popular Items in Germany', fontsize=14)\nplt.ylabel('Item')","224c6975":"sns.barplot(y='Description', x='Quantity', data=indexed[indexed['Country']=='France'].sort_values(by='Quantity', ascending=False).head(10))\nplt.title('Top 10 Most Popular Items in France', fontsize=14)\nplt.ylabel('Item')","113af497":"df.sort_values(by='InvoiceDate', ascending=False).head(1)","c6742465":"cust=df.groupby('CustomerID').max().sort_values(by='InvoiceDate', ascending=False)","680ff127":"cust.loc[cust['InvoiceDate'] < '2011-06-09', 'Churn']='Yes'\ncust.loc[cust['InvoiceDate'] >= '2011-06-09', 'Churn']='No'","70bfc203":"cust","aa36a088":"cust[cust['Churn']=='Yes']","335fd1d8":"churn=cust.reset_index().groupby('Churn').count()","4c5534f2":"churn.head()","c8a2968a":"plt.pie(churn['CustomerID'], labels=['Aktif', 'Churn'], autopct='%1.0f%%')","e7a3c8f7":"The data above doesn't actually make sense since the quantity is less than 0. <br>\nTherefore we will drop the dataframe which quantity <=0","99f8c95e":"Group dataframe by CustomerID, set aggregate function as max() and grab the invoice date","d917631d":"### Top 10 products sold in Nov 2011","4dcf30da":"Sort dataframe by year and month","ab8ad031":"Create a total transaction column by multiplying quantity and unit price","69847aa8":"### Discovering most popular items of top countries","2a3901c5":"## What happened in November 2011?","9df66dc6":"From the graph above we know that 5 top countries in terms of total transactions are UK, Netherlands, EIRE, Germany, and France","ce6a1c5a":"Fill the missing values in Description column with 'unknown' so that the length matches the StockCode column","78f9b097":"Based on the dataframe above, 849 of 4372 or approximately 19% of the total customers are categorized as churn.","6a97e722":"## Thank You","d41000c2":"## Most and Least Popular Items","196a7833":"## Customer Churn","2b8edcb0":"## Exploratory Data Analysis E-Commerce Data","ba64418c":"Assume that customers who doesn't have any transactions data for the last 6 months are categorized as churn.","ce55ded4":"Groupby StockCode and Description, and sort it by total transaction to know what products generate the most transactions","9e012a7f":"## Total transaction by month","5d95f7e5":"### Discovering countries with most transaction","077f1e60":"That means customers who did not have any transaction data since 2011-06-09 (6 months to the last invoice date), are categorized as churn.","956392e3":"Figuring out the monthly total transactions from the data","297870f8":"Month with highest transaction = November 2011 <br\/>\nMonth with lowest transaction = December 2011","47714c76":"So there are 4372 customers.<br\/>\nAll the customers categorized as churn are as follows:","ceae9b99":"The dataset is acquired from kaggle (https:\/\/www.kaggle.com\/carrie1\/ecommerce-data)","8f21ed4e":"Create a new columns of Month and Year of each transaction","8d9d99aa":"First, figure out the last date of InvoiceDate as a point of reference","46c8ee60":"Discovering what are the most and least popular products based on the quantity","44f65aaa":"As we can see in the pivot table above, top 10 items of November 2011 are sold significantly higher than in the other months. This might be due to christmas is around the corner so that people are buying gifts and new stuffs in November.","c27cde56":"So the last InvoiceDate is 2011-12-09","2868d60a":"Compare it with other months","16d04545":"The datetype for the InvoiceDate column is still object. Use pd.to_datetime to change it to datetime.","8efe651b":"Figuring out what products are sold the most in November 2011 in terms of total transaction"}}