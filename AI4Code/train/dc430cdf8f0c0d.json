{"cell_type":{"06edc400":"code","2b48db4e":"code","1a184bcc":"code","afc1d960":"code","85564071":"code","2a22367f":"code","2415d0f5":"code","9b7c1426":"code","c2b6591e":"code","01a3b5c6":"code","daa51a3a":"code","20d0bfa7":"code","50c9978c":"code","f60c2097":"code","fbe01847":"code","ed467d2d":"markdown","ae36b45b":"markdown","fca47d1b":"markdown","3d9b9530":"markdown","c6e67a5f":"markdown","49d15759":"markdown","6a4dc048":"markdown","294dc0f9":"markdown","7218e4fe":"markdown","ecf187d4":"markdown","3f06c928":"markdown","6caef772":"markdown","737e21c6":"markdown"},"source":{"06edc400":"!pip install kneed","2b48db4e":"import numpy as np\nfrom PIL import Image\nfrom sklearn.cluster import KMeans\nimport matplotlib.pyplot as plt\nfrom kneed import KneeLocator\nfrom IPython.display import Image as imm","1a184bcc":"img=Image.open('..\/input\/image-of-a-mountain\/image mountain.jpg')","afc1d960":"img","85564071":"# Function to get the best k for the image\ndef get_k(image,print_plot=False):\n    arr=np.array(image)\n    arr=arr.reshape(image.size[0]*image.size[1],3)\n    wcss=[]\n    for i in range(1,11):\n        kmeans = KMeans(n_clusters= i, init='k-means++', random_state=0)\n        kmeans.fit(arr)\n        wcss.append(kmeans.inertia_)\n    x=[i for i in range(1,11)]\n    kn = KneeLocator(x, wcss, curve='convex', direction='decreasing')\n    if print_plot==True:\n        plt.xlabel('number of clusters k')\n        plt.ylabel('Sum of squared distances')\n        plt.plot(x, wcss, 'rx-')\n        plt.vlines(kn.knee, plt.ylim()[0], plt.ylim()[1], linestyles='dashed')\n        plt.show()\n        print('The elbow is formed at :',kn.knee)\n    else:\n        return kn.knee","2a22367f":"get_k(img,print_plot=True)","2415d0f5":"# Function to print the dominant colours\ndef print_dominant_colors(image,custom_k=0):\n    arr=np.array(image)\n    arr=arr.reshape(image.size[0]*image.size[1],3)\n    if custom_k==0:\n        kg=get_k(image)\n    else:\n        kg=custom_k\n    kmeans=KMeans(n_clusters=kg, init='k-means++', random_state=0).fit(arr)\n    clusters=kmeans.predict(arr)\n    \n    \n    centroids=kmeans.cluster_centers_.astype(int)\n    \n    k=len(centroids)\n    fig, axs = plt.subplots(1, k)\n    fig.set_size_inches(3 * k, 3, forward=True)\n    for clusternumber in range(k):\n      centroid = np.zeros((100,100,3))\n      centroid[:,:,:] = centroids[clusternumber]\n      axs[clusternumber].imshow(centroid\/255)\n      axs[clusternumber].text(50,50,str(clusternumber),fontsize=20)\n      axs[clusternumber].axis(\"off\")\n    plt.show()\n    ","9b7c1426":"print_dominant_colors(img)","c2b6591e":"print_dominant_colors(img,custom_k=4)","01a3b5c6":"def pie_maker(image,custom_k=0):\n    arr=np.array(image)\n    arr=arr.reshape(image.size[0]*image.size[1],3)\n    if custom_k==0:\n        kg=get_k(image)\n    else:\n        kg=custom_k\n    kmeans=KMeans(n_clusters=kg, init='k-means++', random_state=0).fit(arr)\n    clusters=kmeans.predict(arr)\n    centroids=kmeans.cluster_centers_.astype(int)\n    labels=kmeans.labels_\n    labels=list(labels)\n    percent=[]\n    for i in range(len(centroids)):\n        j=labels.count(i)\n        j=j\/(len(labels))\n        percent.append(j)\n    plt.figure(figsize=(18,8))\n    plt.pie(percent,colors=np.array(centroids\/255),labels=np.arange(len(centroids)))\n    plt.show()\n    \n    ","daa51a3a":"pie_maker(img)","20d0bfa7":"imge=Image.open('..\/input\/multicoloredflower\/Multi coloured flower.jpg')","50c9978c":"imge","f60c2097":"print_dominant_colors(imge,6)","fbe01847":"pie_maker(imge,6)","ed467d2d":"<div style=\"color:white;\n           display:fill;\n           border-radius:5px;\n           background-color:#5F9EA0;\n           font-size:90%;\n           font-family:Verdana;\n           letter-spacing:0.5px\">\n\n<h1 style=\"padding: 10px;\n              color:white;\">\n    <center>Function to show the percentage composition of colours in the image<\/center>\n<\/h1>\n<\/div>\n","ae36b45b":"![](https:\/\/i.pinimg.com\/originals\/8c\/40\/05\/8c4005377742272315e792545a9c93df.gif)","fca47d1b":"# Let's Use Another Image :)","3d9b9530":"<div style=\"color:white;\n           display:fill;\n           border-radius:5px;\n           background-color:#5F9EA0;\n           font-size:90%;\n           font-family:Verdana;\n           letter-spacing:0.5px\">\n\n<h1 style=\"padding: 10px;\n              color:white;\">\n    <center>Printing dominant colours for custom k<\/center>\n<\/h1>\n<\/div>\n","c6e67a5f":"<div style=\"color:white;\n           display:fill;\n           border-radius:5px;\n           background-color:#EA570E;\n           font-size:110%;\n           font-family:Verdana;\n           letter-spacing:0.5px\">\n\n<h1 style=\"padding: 10px;\n              color:white;\">\n    <center>Importing the packages<\/center>\n<\/h1>\n<\/div>","49d15759":"<div style=\"color:white;\n           display:fill;\n           border-radius:5px;\n           background-color:#5F9EA0;\n           font-size:90%;\n           font-family:Verdana;\n           letter-spacing:0.5px\">\n\n<h1 style=\"padding: 10px;\n              color:white;\">\n    <center>Function to get the dominant colours for best K<\/center>\n<\/h1>\n<\/div>","6a4dc048":"# So hard to find dominant color here \ud83e\uddd0","294dc0f9":"<div style=\"color:white;\n           display:fill;\n           border-radius:5px;\n           background-color:#EA570E;\n           font-size:110%;\n           font-family:Verdana;\n           letter-spacing:0.5px\">\n\n<h1 style=\"padding: 10px;\n              color:white;\">\n    <center>Making Required Functions<\/center>\n<\/h1>\n<\/div>","7218e4fe":"<div style=\"color:white;\n           display:fill;\n           border-radius:5px;\n           background-color:#EA570E;\n           font-size:110%;\n           font-family:Verdana;\n           letter-spacing:0.5px\">\n\n<h1 style=\"padding: 10px;\n              color:white;\">\n    <center>Importing the Image<\/center>\n<\/h1>\n<\/div>","ecf187d4":"# Cool analysis :) \n# Please drop an upvote if you liked the file :)","3f06c928":"<div style=\"color:white;\n           display:fill;\n           border-radius:5px;\n           background-color:#5F9EA0;\n           font-size:90%;\n           font-family:Verdana;\n           letter-spacing:0.5px\">\n\n<h1 style=\"padding: 10px;\n              color:white;\">\n    <center>Function to get the best K<\/center>\n<\/h1>\n<\/div>","6caef772":"<blockquote><p style=\"font-size:16px; color:#159364; font-family:verdana;\">\ud83d\udcac  In this file today i am gonna use K means to find the dominant colours in an image . Hope you like the file :) \ud83d\ude03<\/p><\/blockquote>","737e21c6":"<div style=\"color:white;\n           display:fill;\n           border-radius:5px;\n           background-color:#EA570E;\n           font-size:110%;\n           font-family:Verdana;\n           letter-spacing:0.5px\">\n\n<h1 style=\"padding: 10px;\n              color:white;\">\n    <center>Dominant Color Analysis Using K Means<\/center>\n<\/h1>\n<\/div>"}}