{"cell_type":{"1644ff91":"code","6ed1dd9b":"code","c50d058e":"code","1fd06c87":"code","d4f66f7b":"code","9fe7895b":"code","434bf647":"code","c3efa7cb":"code","327a7326":"code","facd008e":"code","1dc6097e":"code","024a8cbb":"code","4e3e6727":"code","47a86b35":"code","f22a20e4":"code","797e44bb":"code","c0473a11":"code","32cc544d":"code","6fca01ae":"code","bd1d184d":"code","8317e8be":"code","0e0648d3":"code","70e19ed0":"code","bb24cef5":"code","b683008d":"code","9f35153a":"code","33bb6174":"code","cbb2ec7d":"code","95729e40":"code","f7b47a6d":"code","0b444326":"code","f5ada5e1":"code","0a3d13ae":"code","f61b058e":"code","add8487a":"code","5c8c10ad":"code","8dc94d8f":"code","4d6a4d20":"code","05339503":"code","994facc7":"code","f9248cc9":"code","f540bf6b":"code","8943230d":"code","a3f33c40":"code","c124245f":"code","291972b2":"code","885f81c1":"code","0a420efc":"code","f0ce9496":"code","c40da0be":"code","d0c182ea":"code","a900d27d":"code","0a8fc1ce":"code","14b28aa8":"code","964ca6cb":"code","6e539125":"code","65583405":"code","a5c0b93e":"code","81a94e80":"code","cf7bb38e":"code","f2961aa1":"code","7edc09eb":"code","812ce964":"code","db2d553f":"code","f68c899a":"code","4ea3ed1b":"code","b8c5dbec":"code","331dbd47":"code","9c0191b3":"code","fa95884a":"code","4b07eef9":"markdown","f531ec9b":"markdown","db15149b":"markdown","9d3e449d":"markdown","e91ed089":"markdown","61738fbc":"markdown","c37bb34b":"markdown","6df923e9":"markdown","2b5f95b7":"markdown","d68628ed":"markdown","a6177b43":"markdown","a78681f2":"markdown","b82f22de":"markdown","3c69b609":"markdown","f0cf503f":"markdown","62988921":"markdown","91db2131":"markdown","9ab2608d":"markdown","5d25a40e":"markdown","f7c90837":"markdown","3867c4aa":"markdown","04d7fdfa":"markdown"},"source":{"1644ff91":"import numpy as np\nimport pandas as pd\nimport matplotlib.pyplot as plt\nimport seaborn as sns\n%matplotlib inline","6ed1dd9b":"#Import Ames House Dataset\ndf= pd.read_csv('..\/input\/house-price-prediction-dataset\/Housing_Price_Data.csv')","c50d058e":"df.head()","1fd06c87":"#Our objective is to predict the SalePrice based on several Features, \n# Correlation overview:\ndf.corr()['SalePrice'].sort_values()","d4f66f7b":"sns.scatterplot(data=df, x='Overall Qual', y='SalePrice')\nplt.axhline(y=200000,color='r')","9fe7895b":"df[(df['Overall Qual']>8) &(df['SalePrice']<200000)][['SalePrice', 'Overall Qual']]","434bf647":"sns.scatterplot(x='Gr Liv Area', y='SalePrice', data=df)\nplt.axhline(y=200000, color='r')\nplt.axvline(x=4000, color='r')","c3efa7cb":"df[(df['Gr Liv Area']>4000) & (df['SalePrice']<400000)][['SalePrice', 'Gr Liv Area']]","327a7326":"#Remove the outliers:\nindex_drop=df[(df['Gr Liv Area']>4000) & (df['SalePrice']<400000)].index\ndf=df.drop(index_drop, axis=0)","facd008e":"sns.scatterplot(x='Gr Liv Area', y='SalePrice', data=df)\nplt.axhline(y=200000, color='r')\nplt.axvline(x=4000, color='r')","1dc6097e":"sns.scatterplot(x='Overall Qual', y='SalePrice', data=df)\nplt.axhline(y=200000,color='r')","024a8cbb":"sns.boxplot(x='Overall Qual', y='SalePrice', data=df)","4e3e6727":"df.head()","47a86b35":"df.info()","f22a20e4":"#Removing the PID (We already have an index, so we don't need PID unique identifier. \n#becuase it doesn't have any information and can't help our learning models)\n\ndf= df.drop('PID', axis=1)","797e44bb":"df.isnull()","c0473a11":"#How many missing data is there in each features?\ndf.isnull().sum()","32cc544d":"#The percent of missing data in any feature:\n100*(df.isnull().sum()\/len(df))","6fca01ae":"#Make a Function to calculate the percent of missing data in each columns (feature) and then sort it\ndef missing_percent(df):\n    nan_percent= 100*(df.isnull().sum()\/len(df))\n    nan_percent= nan_percent[nan_percent>0].sort_values()\n    return nan_percent","bd1d184d":"nan_percent= missing_percent(df)","8317e8be":"nan_percent","0e0648d3":"#plot the feature with missing indicating the percent of missing data\nplt.figure(figsize=(12,6))\nsns.barplot(x=nan_percent.index, y=nan_percent)\nplt.xticks(rotation=90)","70e19ed0":"#every Feature with missing data must be checked!\n#We choose a threshold of 1%. It means, if there is less than 1% of a feature are missing,\n#then we will consider just dropping that rows\n\nplt.figure(figsize=(12,6))\nsns.barplot(x=nan_percent.index, y=nan_percent)\nplt.xticks(rotation=90)\n\n#Set 1% threshold:\nplt.ylim(0,1)","bb24cef5":"nan_percent[nan_percent<1]","b683008d":"nan_percent[nan_percent<1].index","9f35153a":"100\/len(df)\n#It shows that, Feature with just one missing rows has this percent value of missing data","33bb6174":"df[df['Electrical'].isnull()]","cbb2ec7d":"df[df['Garage Area'].isnull()]","95729e40":"df= df.dropna(axis=0, subset=['Electrical', 'Garage Area'])","f7b47a6d":"nan_percent= missing_percent(df)\n\nplt.figure(figsize=(12,6))\nsns.barplot(x=nan_percent.index, y=nan_percent)\nplt.xticks(rotation=90)\nplt.ylim(0,1)","0b444326":"#Features related to Basement:","f5ada5e1":"df[df['Total Bsmt SF'].isnull()]","0a3d13ae":"df[df['Bsmt Half Bath'].isnull()]","f61b058e":"df[df['Bsmt Full Bath'].isnull()]","add8487a":"#After checking the data documentation,\n#it shows that missing value (two rows) in Basement Features are becouse of there is no basement in these rows\n#Decision: Filling in data based on column: numerical basement & string descriptive:\n\n#Numerical Columns fill with 0:\nbsmt_num_cols= ['BsmtFin SF 1', 'BsmtFin SF 2', 'Bsmt Unf SF','Total Bsmt SF' ,'Bsmt Full Bath', 'Bsmt Half Bath']\ndf[bsmt_num_cols]=df[bsmt_num_cols].fillna(0)\n\n#String Columns fill with None:\nbsmt_str_cols= ['Bsmt Qual', 'Bsmt Cond', 'Bsmt Exposure', 'BsmtFin Type 1', 'BsmtFin Type 2']\ndf[bsmt_str_cols]= df[bsmt_str_cols].fillna('None')","5c8c10ad":"nan_percent= missing_percent(df)\n\nplt.figure(figsize=(12,6))\nsns.barplot(x=nan_percent.index, y=nan_percent)\nplt.xticks(rotation=90)\nplt.ylim(0,1)","8dc94d8f":"df[\"Mas Vnr Type\"]= df[\"Mas Vnr Type\"].fillna(\"None\")\ndf[\"Mas Vnr Area\"]= df[\"Mas Vnr Area\"].fillna(0)","4d6a4d20":"nan_percent= missing_percent(df)\n\nplt.figure(figsize=(12,6))\nsns.barplot(x=nan_percent.index, y=nan_percent)\nplt.xticks(rotation=90)\n","05339503":"df[['Garage Type', 'Garage Yr Blt', 'Garage Finish', 'Garage Qual', 'Garage Cond']]","994facc7":"#Filling the missing Value:\nGar_str_cols= ['Garage Type', 'Garage Finish', 'Garage Qual', 'Garage Cond']\ndf[Gar_str_cols]=df[Gar_str_cols].fillna('None')\n\ndf['Garage Yr Blt']=df['Garage Yr Blt'].fillna(0)","f9248cc9":"nan_percent= missing_percent(df)\n\nplt.figure(figsize=(12,6))\nsns.barplot(x=nan_percent.index, y=nan_percent)\nplt.xticks(rotation=90)\n","f540bf6b":"nan_percent.index","8943230d":"df[['Lot Frontage', 'Fireplace Qu', 'Fence', 'Alley', 'Misc Feature',\n       'Pool QC']]","a3f33c40":"df= df.drop(['Fence', 'Alley', 'Misc Feature','Pool QC'], axis=1)","c124245f":"nan_percent= missing_percent(df)\n\nplt.figure(figsize=(12,6))\nsns.barplot(x=nan_percent.index, y=nan_percent)\nplt.xticks(rotation=90)","291972b2":"#Filling in Fireplace Quality based on dataset documentation:\ndf['Fireplace Qu']= df['Fireplace Qu'].fillna('None')","885f81c1":"nan_percent= missing_percent(df)\n\nplt.figure(figsize=(12,6))\nsns.barplot(x=nan_percent.index, y=nan_percent)\nplt.xticks(rotation=90)","0a420efc":"df['Neighborhood'].unique()","f0ce9496":"plt.figure(figsize=(8,12))\nsns.boxplot(data=df, x='Lot Frontage', y='Neighborhood')","c40da0be":"#Impute missing data based on other columns:\n\ndf.groupby('Neighborhood')['Lot Frontage']","d0c182ea":"df.groupby('Neighborhood')['Lot Frontage'].mean()","a900d27d":"df.groupby('Neighborhood')['Lot Frontage'].transform(lambda val: val.fillna(val.mean()))","0a8fc1ce":"df['Lot Frontage']=df.groupby('Neighborhood')['Lot Frontage'].transform(lambda val: val.fillna(val.mean()))","14b28aa8":"nan_percent= missing_percent(df)\n\nplt.figure(figsize=(12,6))\nsns.barplot(x=nan_percent.index, y=nan_percent)\nplt.xticks(rotation=90)","964ca6cb":"df['Lot Frontage']= df['Lot Frontage'].fillna(0)","6e539125":"nan_percent= missing_percent(df)\n","65583405":"nan_percent","a5c0b93e":"df['MS SubClass']","81a94e80":"df.info()","cf7bb38e":"df['MS SubClass'].unique()","f2961aa1":"#Convert to String:\ndf['MS SubClass']= df['MS SubClass'].apply(str)","7edc09eb":"\ndf.info()\n#or: df['MS SubClass'].dtype","812ce964":"df.select_dtypes(include='object')","db2d553f":"df_num= df.select_dtypes(exclude='object')\ndf_obj= df.select_dtypes(include='object')","f68c899a":"df_num.info()","4ea3ed1b":"df_obj.info()","b8c5dbec":"# Converting:\ndf_obj= pd.get_dummies(df_obj, drop_first=True)","331dbd47":"df_obj.shape","9c0191b3":"Final_df= pd.concat([df_num, df_obj], axis=1)","fa95884a":"Final_df.head()","4b07eef9":"### Garage Columns:\n**Based on the dataset documentation, NaN in Garage Columns seems to indicate no garage.**\n\n**Decision: Fill with 'None' or 0**","f531ec9b":"### D- Imputation of Missing Data","db15149b":"**In statistics, missing data, or missing values, occur when no data value is stored for the variable in an observation. missing data are a common occurrence and can have a significant effect on the conclusions that can be drawn from the data.**\n\n[Wikipedia Article](http:\/\/en.wikipedia.org\/wiki\/Missing_data)\n","9d3e449d":"### B- Working base on Rows Missing Data","e91ed089":"**Remove the Columns with more than 80% missing values**","61738fbc":"### Dropping Rows:","c37bb34b":"## 3-Dealing with Categorical Data","6df923e9":"### 1- Dealing with Outliers","2b5f95b7":"**Definition:**\n\n**In Statistics, on outlier is a data point that differs significantly from other observations (Grubbs, 1969; Maddala, 1992).**\n\n**An outlier may be due to variability in the measurement or it may indicate experimental error, the latter are sometimes excluded from the data set (Grubbs, 1969).**\n\n**Anoutlier can couse serious problem in statistical analysis.**\n\n* [Wikipedia Article](http:\/\/en.wikipedia.org\/wiki\/Outlier)\n","d68628ed":"### B- Creating Dummy Variables","a6177b43":"# Data Preparation","a78681f2":"**We don't have any Missing Data**","b82f22de":"**Columns: Lot Frontage**\n\n**We assume that the Lot Frontage is related to what a Neighborhood a house is in**","3c69b609":"### A- How Much Data is Missing?","f0cf503f":"**Mas Vnr Features:**\n\nBased on the Dataset Document File, missing values for 'Mas Vnr Type' and 'Mas Vnr Area' means the house doesn't have any mansonry veneer. so, we decide to fill the missing value as below: ","62988921":"#### Now, the Dataset is Ready for any Machine Learing Model & Analysis","91db2131":"### C-Working based on Columns Missing Data","9ab2608d":"### Filling the missing values:","5d25a40e":"## 2-Dealing with Missing Data","f7c90837":"#### A- Numerical Columns to Categorical\nWe need to be careful when it comes to encoding categorical as numbers. We want to make sure that the numerical relationship makes sense for model. For example, the encoding MSSubClass is essentially just a code per class","3867c4aa":"### Fill\/Keep\/Drop?","04d7fdfa":"**If only a few rows are missing some values, then it might just be a good idea to drop those rows.** \n\n**What does this cost you in terms of performace? It essentialy removes potential training\/testing data, but if its only a few rows, its unlikely to change performance.**\n\n\n**Sometimes it is a good idea to remove a feature entirely if it has too many null values. However, you should carefully consider why it has so many null values, in certain situations null could just be used as a separate category.** \n\n(Take for example a feature column for the number of cars that can fit into a garage. Perhaps if there is no garage then there is a null value, instead of a zero. It probably makes more sense to quickly fill the null values in this case with a zero instead of a null. Only you can decide based off your domain expertise and knowledge of the data set!)"}}