{"cell_type":{"dfb025a5":"code","c80e2b90":"code","21b893fe":"code","bec73586":"code","97186d68":"code","4dfc1d21":"code","b6218448":"code","5c4f1206":"code","73d81f9a":"code","a5d6646e":"code","f985ac72":"code","0236988e":"code","5bf0f4f8":"code","2b1e4b04":"code","13471152":"code","244471e1":"code","767a38dc":"code","01d42846":"code","d684c0ef":"code","17f0087d":"code","6abc56d1":"code","c7f9fc5c":"code","f848b390":"code","487959d0":"code","2cd1b362":"code","aac76a6f":"code","7142b40b":"code","5b87f53c":"code","1dbe4982":"code","cfd5a346":"code","8450423e":"code","2e1f1974":"code","3083c555":"markdown","405f597d":"markdown","c32f4433":"markdown","0624583d":"markdown","1038767d":"markdown","73345d61":"markdown","09073ef7":"markdown","693bc782":"markdown","8fcfdb07":"markdown","206bbc5f":"markdown","ad620ce9":"markdown","c918348a":"markdown","30e56213":"markdown"},"source":{"dfb025a5":"import numpy as np # linear algebra\nimport pandas as pd # data processing, CSV file I\/O (e.g. pd.read_csv)\n\nimport os\nfor dirname, _, filenames in os.walk('\/kaggle\/input'):\n    for filename in filenames:\n        print(os.path.join(dirname, filename))","c80e2b90":"import matplotlib.pyplot as plt\nimport plotly_express as px\nimport seaborn as sns\n%matplotlib inline\nimport datetime","21b893fe":"df=pd.read_csv('\/kaggle\/input\/people-staying-in-home-during-covid19\/residential-stay-in-covid19.csv')","bec73586":"df","97186d68":"df.info()","4dfc1d21":"df['Day']=pd.to_datetime(df['Day'],format='%d-%m-%Y')\ndf['Year']=df['Day'].dt.year\ndf['Month']=df['Day'].dt.month\ndf['day']=df['Day'].dt.day\ndf['Year_Month']=df['Day'].dt.strftime(\"%Y-%m\")\ndf","b6218448":"df['Entity'].unique()","5c4f1206":"df=df.replace({'Bolivia': 'Bolivia, Republic of','Cape Verde':'Cape Verde, Republic of',\"Cote d'Ivoire\":\"Cote d'Ivoire, Republic of\",'Laos':\"LAO PEOPLE'S DEMOCRATIC REPUBLIC\",'Moldova':'MOLDOVA, REPUBLIC OF','South Korea':'KOREA, REPUBLIC OF','Taiwan':'TAIWAN, PROVINCE OF CHINA','Tanzania':'TANZANIA, UNITED REPUBLIC OF','Venezuela':'Venezuela, Republic of','Vietnam':'Viet Nam, Socialist Republic of'})","73d81f9a":"pip install pycountry","a5d6646e":"import pycountry","f985ac72":"def findCountry (country_code):\n    try:\n        return pycountry.countries.get(name=country_code).alpha_3\n    except:\n        return 'NaN'\ndf['country_code'] = df.apply(lambda row: findCountry(row.Entity) , axis = 1)","0236988e":"df","5bf0f4f8":"df_no=df[df['country_code']== 'NaN']\ndf_no['Entity'].unique()","2b1e4b04":"df1=df.query('country_code != \"NaN\"')","13471152":"df1=df.groupby(['country_code','Year_Month'])['Increase in Residential Stay'].mean()\ndf1=pd.DataFrame(df1)\ndf1=df1.reset_index()\ndf1","244471e1":"df1.describe()","767a38dc":"fig = px.choropleth(df1,locations='country_code',color='Increase in Residential Stay',scope='world',color_continuous_scale=px.colors.sequential.GnBu,\n                    animation_frame='Year_Month',range_color=(-15,40),title='Stay Home',height=800\n    )\nfig.show()","01d42846":"plt.figure(figsize=(30, 12))\nplt.legend(fontsize=10)\nplt.tick_params(labelsize=10)\nax=sns.boxplot(x=df1['country_code'],y=df1['Increase in Residential Stay'],data=df1)\nplt.xticks(rotation=90)\nax.legend(loc='upper left',bbox_to_anchor=(1,1))","d684c0ef":"plt.figure(figsize=(30, 12))\nplt.legend(fontsize=10)\nplt.tick_params(labelsize=10)\nax=sns.violinplot(x=df1['country_code'],y=df1['Increase in Residential Stay'],data=df1)\nplt.xticks(rotation=90)\nax.legend(loc='upper left',bbox_to_anchor=(1,1))","17f0087d":"df_us=df[df['country_code']=='USA']\ndf_uk=df[df['country_code']=='GBR']\ndf_de=df[df['country_code']=='DEU']\ndf_jp=df[df['country_code']=='JPN']","6abc56d1":"plt.figure(figsize=(20,10))\nx1 = df_us['Day']\ny1 = df_us['Increase in Residential Stay']\nx2 = df_uk['Day']\ny2 = df_uk['Increase in Residential Stay']\nx3 = df_de['Day']\ny3 = df_de['Increase in Residential Stay']\nx4 = df_jp['Day']\ny4 = df_jp['Increase in Residential Stay']\n\nplt.plot(x1, y1, color = 'red',label='USA')\nplt.plot(x2, y2, color = 'blue',label='UK')\nplt.plot(x3, y3, color = 'orange',label='Germany')\nplt.plot(x4, y4, color = 'black',label='Japan')\nplt.legend()\nplt.show()","c7f9fc5c":"pip install pycaret-ts-alpha","f848b390":"data_usa = pd.DataFrame(df_us[['Day','Increase in Residential Stay']])\ndata_usa=data_usa.reset_index()\ndata_usa=data_usa.drop('index',axis=1)\ndata_usa.set_index('Day', inplace=True)\ndata_usa","487959d0":"from pycaret.time_series import *\nexp_name = setup(data = data_usa,  fh = 12)","2cd1b362":"best = compare_models()","aac76a6f":"plot_model(plot='ts')","7142b40b":"plot_model(plot='cv')","5b87f53c":"plot_model(plot='acf')","1dbe4982":"plot_model(plot='diagnostics')","cfd5a346":"plot_model(plot='decomp_stl')","8450423e":"plot_model(best,plot='forecast')","2e1f1974":"plot_model(best,plot='forecast',data_kwargs={'fh':180})","3083c555":"# 5.Time Series of the U.S, the U.K, Germany and Japan","405f597d":"# 2.Global Map of Stay Home Trend","c32f4433":"![image.png](attachment:9b69514a-d4db-486f-add6-62913dbf3a3c.png)\n\n# In this notebook, I tried global map of stay home,and the U.S trend and forecast model.","0624583d":"# 6.Prediction Model by PyCaret","1038767d":"# 2)Modeling","73345d61":"# I got country code to make global map.","09073ef7":"# I dropped datas which do not have country code.","693bc782":"# 1)Data Preparation","8fcfdb07":"# 4.Violinplot by countries","206bbc5f":"# 1.Data importing and preprocessing","ad620ce9":"# 4)Prediction","c918348a":"# 3.Boxplot by countries","30e56213":"3)Plotting"}}