{"cell_type":{"01db2176":"code","e87ee104":"code","98c9a164":"code","c7769ca8":"code","218efd52":"code","d8f27b38":"code","4b2545d9":"code","50bc940d":"code","17e011f8":"code","dc8587df":"code","24606f4d":"code","de77fa06":"code","14bd8eaf":"code","3083f8fd":"code","816326e8":"code","a2f79607":"code","718264a6":"markdown","8b3a1e4b":"markdown","92e2ea83":"markdown","725b62ec":"markdown","0a6e83be":"markdown","a45d6160":"markdown","1883a4df":"markdown","d9db6317":"markdown","deef8229":"markdown","d20a85d6":"markdown","16b5c152":"markdown","d07ef3ea":"markdown","a1917aea":"markdown","f4f195fa":"markdown","14df5714":"markdown","15a92dff":"markdown","c988c96e":"markdown","01b1a181":"markdown","31459e2c":"markdown","80263fb7":"markdown","9d337d7f":"markdown","62d727c8":"markdown"},"source":{"01db2176":"import numpy as np # linear algebra\nimport pandas as pd # data processing, CSV file I\/O (e.g. pd.read_csv)\nimport geopandas as gp\nimport io\nimport base64\nfrom IPython.display import HTML\nimport matplotlib\nimport matplotlib.pyplot as plt\nimport matplotlib.animation as animation\nimport plotly.express as px\nimport plotly.graph_objects as go\nimport seaborn as sns\nimport subprocess\nimport warnings\nimport imageio\nwarnings.filterwarnings(action='ignore')\nplt.style.use('fivethirtyeight')","e87ee104":"data = pd.read_csv(\"..\/input\/forest-fires-in-brazil\/amazon.csv\",encoding=\"ISO-8859-1\")","98c9a164":"data.head()","c7769ca8":"print(\"year : \", data['year'].unique())","218efd52":"print(\"state : \", data['state'].unique())","d8f27b38":"print(\"month : \", data['month'].unique())","4b2545d9":"month_map={'Janeiro': 'January', 'Fevereiro': 'February', 'Mar\u00e7o': 'March', 'Abril': 'April', 'Maio': 'May',\n          'Junho': 'June', 'Julho': 'July', 'Agosto': 'August', 'Setembro': 'September', 'Outubro': 'October',\n          'Novembro': 'November', 'Dezembro': 'December'}\n#mapping our translated months\ndata['month']=data['month'].map(month_map)\n#checking the month column for the second time after the changes were made\ndata.month.unique()","50bc940d":"# data\nplt.figure(figsize = (15,10))\ndata[['state','number']].groupby(['state']).number.sum().sort_values(ascending=True).plot.barh(width=0.9,color=sns.color_palette('inferno',15))\nplt.axhspan(21.5,22.5 ,facecolor='Blue', alpha=0.4) # hilight space\nplt.title('Number of Fire')\nplt.show()","17e011f8":"#plot\nf, ax = plt.subplots(1,2, figsize = (25,15))\ndata[data['state'] == 'Mato Grosso'][['month','number']].groupby(['month']).number.sum().plot.pie(autopct='%1.1f%%',explode=[0,0,0,0,0.2,0,0,0,0.1,0,0,0], shadow=True,ax=ax[0])\nax[0].set_title('Mato Cross Month Fire', size = 25)\ndata[['month','number']].groupby(['month']).number.sum().plot.pie(autopct='%1.1f%%',explode=[0,0,0,0,0,0.2,0,0,0,0,0.2,0], shadow=True,ax=ax[1])\nax[1].set_title('ALL Month Fire', size = 25)\nplt.show()","dc8587df":"ani_d1 = data[['year','number']].groupby(['year']).number.sum().reset_index()","24606f4d":"def animate(i):\n    data = ani_d1.iloc[:int(i+1)]\n    p = sns.barplot(x=data['year'], y=data['number'], data=data, palette=\"rocket\")\n    p.tick_params(labelsize=17)\n    plt.setp(p.lines,linewidth=4)\n    \nfig = plt.figure(figsize=(10,6))\nplt.xlim()\nplt.ylim(np.min(ani_d1)[1], np.max(ani_d1)[1] + 10000)\nplt.xlabel('Year',fontsize=20)\nplt.title('Number of Fire Per Year',fontsize=20)\n\nani = matplotlib.animation.FuncAnimation(fig, animate, frames=20, interval=500, repeat=True)\nani.save('plot.gif', writer='imagemagick')\nplt.close()\n\nvideo = io.open('plot.gif', 'r+b').read()\nencoded = base64.b64encode(video)\nHTML(data='''<img src=\"data:image\/gif;base64,{0}\" type=\"gif\" \/>'''.format(encoded.decode('ascii')))","de77fa06":"geo_data = gp.read_file('..\/input\/geo-brazil-data\/geo_brazil_data.shp')\ngeo_data = geo_data.rename(columns = {'nome': 'state'})","14bd8eaf":"ani_d2 = data[['year','state','number']].groupby(['year','state']).number.sum().reset_index()\nani_d2_pivot = ani_d2.pivot_table(values='number', index=['state'], columns='year').reset_index()\nani_d2_final = geo_data.set_index('state').join(ani_d2_pivot.set_index('state'))\n# ani_d2_pivot = ani_d2.pivot_table(values='number', index=['state'], columns='year')\n# ani_d2_final = pd.merge(ani_d2_pivot, geo_data, on='state', how='inner')\n# ani_d2_final.head()","3083f8fd":"filename = []\nvmin, vmax = 150, 300\n\nfor year in ani_d2_final.columns[1:]:\n    \n    # create map\n    fig = ani_d2_final.plot(column=year, cmap='Oranges', figsize=(8,5), linewidth=0.8, edgecolor='0.8', vmin=vmin, vmax=vmax, legend=True, norm=plt.Normalize(vmin=vmin, vmax=vmax))\n    fig.axis('off')\n    fig.set_title('Fire In Brazil', fontdict={'fontsize': '15', 'fontweight' : '3'})\n        \n    fig.annotate(year, xy=(0.1, .225), xycoords='figure fraction', horizontalalignment='left', verticalalignment='top',fontsize=20)\n    chart = fig.get_figure()\n    chart.savefig(str(year) +'_fire.png', dpi=300)\n    filename.append(str(year) +'_fire.png')\n    plt.close()","816326e8":"images = []\nfor filename in filename:\n    images.append(imageio.imread(filename))\nimageio.mimsave('fire.gif', images)","a2f79607":"video = io.open('fire.gif', 'r+b').read()\nencoded = base64.b64encode(video)\nHTML(data='''<img src=\"data:image\/gif;base64,{0}\" type=\"gif\" \/>'''.format(encoded.decode('ascii')))","718264a6":"# Simple Visualization","8b3a1e4b":"# Animation Visualization","92e2ea83":"# Importance of Visualization","725b62ec":"Since the moon is in Latin, we will translate it into English that we are familiar with.","0a6e83be":"Thank you for reading my Kernel.\nPlease give us a lot of feedback. I want to study through you.","a45d6160":"# Introduction","1883a4df":"Today, visualization, many analysts think. This has led to the emergence of many visualization tools and platforms, which can be used to build dashboards or use analysis to find new insights. <br>\nI think the importance of visualization as follows. <br>\n\n**First, you can see a large amount of data at a glance.** <br>\n\n**Second, more accurate data analysis results can be derived than summary statistics.** <br>\n\n**Third, it is an effective way to inform people who do not know the data analysis.** <br>\n\n\n\nUnlike other visualizations, dynamic visualizations have the effect of showing trends over time. <br>\nI'm going to challenge dynamic visualization this time. We're not good enough and we've never done it, so please give us a lot of help and feedback.","d9db6317":"First, you need to get data on the latitude and longitude of Brazil's State. <br>\nI hope the data since we've got in the https:\/\/geodata.lib.berkeley.edu\/catalog\/stanford-ys298mq8577 \nThe visualization method was referred to here. < https:\/\/towardsdatascience.com\/how-to-make-a-gif-map-using-python-geopandas-and-matplotlib-cd8827cefbc8 >","deef8229":"There are some findings from dynamic visualization. <br>\n\n**First, dynamic visualization of time rather than simple visualization can quickly catch changes over time.** <br>\nI think this is a very good thing. \nThis is not just because you see a picture, but because you can see the changes over time through a single picture. <br>\n\n**Second, the methods of visualization vary.**<br>\nOne way now is not the answer. <br>\nI have found many Google blogs and applied them here.<br>\nMany people have thought differently about the same topic and have seen the code simplify accordingly.<br>\n\nAlthough it is still far from sufficient, the challenge will not stop because I want to visualize it with new perspectives and methods!","d20a85d6":"# Conclusion","16b5c152":"# Data Upload","d07ef3ea":"You can see that data exists from 1998 to 2017.","a1917aea":"Let's first draw only the data that matches the state of Brazil's geographical data and the state of our data. That's because 10 of the 21 states don't have geographic information.","f4f195fa":"It can be seen that a total of 23 states exist.","14df5714":"Now let's try dynamic visualization.","15a92dff":"What's interesting is that in the case of Mato Gross, there are the most fires in January and May.\nOn the other hand, overall, there is a high rate of fire in Octorber and July.\nIt is likely that there will be regional climate differences as well.\nIf data is given, we can analyze it in depth.","c988c96e":"# Data Check","01b1a181":"In this analysis, I am going to use barplot, pie chart, and dynamic plot to visualize.","31459e2c":"Before dynamic visualization, let's simply look at the columns of the data.","80263fb7":"I completed dynamic visualization very simply. <br>\nThen, let's use the characteristics of the data a little bit more to draw.","9d337d7f":"First of all, we will proceed with dynamic visualization through the matplotlib, which is familiar to us.","62d727c8":"The area with the most fires appears to be Mato Cross. There are many fires compared to other areas."}}