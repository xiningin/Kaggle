{"cell_type":{"0cedf392":"code","dc9b2f0f":"code","5b86b7c1":"code","28b1d6a2":"code","d5cc4195":"code","222c428c":"code","8c7eb403":"markdown"},"source":{"0cedf392":"from bs4 import BeautifulSoup\nimport requests\nfrom urllib.request import urlretrieve\nimport pandas as pd\nfrom datetime import date, timedelta","dc9b2f0f":"url = 'https:\/\/www.worldometers.info\/coronavirus\/#countries'\n\nr = requests.get(url)\n\nhtml_doc = r.text\n\nsoup = BeautifulSoup(html_doc, \"html5lib\")\n\ntable = soup.find(lambda tag: tag.name == 'table' and tag.has_attr('id') and tag['id'] == \"main_table_countries_yesterday\")\n# print(table)","5b86b7c1":"output_rows = []\nfor table_row in table.findAll('tr'):\n    columns = table_row.findAll('td')\n    output_row = []\n    for column in columns:\n        output_row.append(column.text)\n    output_rows.append(output_row)\n\n# print(output_rows)","28b1d6a2":"country = []\ntotalCases = []\nnewCases = []\ntotalDeaths = []\nnewDeaths = []\ntotalRecovered = []\nactiveCases = []\nseriousCritical = []\ntotalCasePerMil = []\ndeathsPerMil = []\ntotalTests = []\ntestsPerMil = []\npopulation = []\n\nfor i in range(9, len(output_rows) - 8):\n    row = output_rows[i]\n    country.append(row[1])\n    totalCases.append(row[2])\n    newCases.append(row[3])\n    totalDeaths.append(row[4])\n    newDeaths.append(row[5])\n    totalRecovered.append(row[6])\n    activeCases.append(row[8])\n    seriousCritical.append(row[9])\n    totalCasePerMil.append(row[10])\n    deathsPerMil.append(row[11])\n    totalTests.append(row[12])\n    testsPerMil.append(row[13])\n    population.append(row[14])","d5cc4195":"data = pd.DataFrame({'Country': country,\n                     'TotalCases': totalCases,\n                     'NewCases': newCases,\n                     'TotalDeaths': totalDeaths,\n                     'NewDeaths': newDeaths,\n                     'TotalRecovered': totalRecovered,\n                     'ActiveCases': activeCases,\n                     'SeriousCritical': seriousCritical,\n                     'TotalCasePerMil': totalCasePerMil,\n                     'DeathsPerMil': deathsPerMil,\n                     'TotalTests': totalTests,\n                     'TestsPerMil': testsPerMil,\n                     'Country_population': population\n                    })\n\ndata.head()","222c428c":"yesterday = 'covid19_' + str(date.today() - timedelta(days=1)) \n\ndata.to_csv(yesterday+'.csv', index=False)","8c7eb403":"The website used => https:\/\/www.worldometers.info\/coronavirus\/#countries "}}