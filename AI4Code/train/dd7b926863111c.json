{"cell_type":{"737817b1":"code","e328e605":"code","e55aaee1":"code","4d5d54b9":"code","3448fd89":"code","883681e2":"code","36e1df59":"code","83858d72":"code","f1c36e46":"code","ba65f0a8":"code","c779aac4":"code","8e83c76c":"code","d438f732":"code","a060f980":"code","59e72e90":"markdown","c3c89024":"markdown","2c23c3a8":"markdown","71b74da7":"markdown","590cec7f":"markdown","f246e62f":"markdown","d3ac78e3":"markdown","7eb0c2c4":"markdown","fabb344f":"markdown","91031e57":"markdown","ec48bbf6":"markdown","0c3c0e0d":"markdown","08f0ac15":"markdown","4bed9a89":"markdown","5fdcf4d4":"markdown","236217ab":"markdown"},"source":{"737817b1":"import pandas as pd\nimport numpy as np\nimport matplotlib.pyplot as plt\nimport seaborn as sns\nfrom __future__ import print_function\nsns.set()\ndf = pd.read_csv('..\/input\/births.csv')\n    \ndf.head()","e328e605":"df.describe()","e55aaee1":"df.day.unique()","4d5d54b9":"df = df[(df.day>=1) & (df.day<=31)]\n","3448fd89":"ndays = df[['year', 'day']].groupby('year').count()\nplt.bar(ndays.index, ndays.day)\nplt.title(\"Nb of days available per year (both genders)\")\nlines = plt.plot(plt.gca().get_xlim(), 365*2*np.ones(2), 'g-')","883681e2":"daycount = df.copy()\ndaycount.day.values[:] = 1\ndaycount.pivot_table('day', index=['year', 'gender'], columns=['month'], aggfunc=np.sum).T","36e1df59":"ax = sns.distplot(df.births, norm_hist=False)","83858d72":"baddays = df[df.births < 1000].copy()[['year', 'month', 'day']]\nbaddays.groupby(['year', 'month']).count().T","f1c36e46":"df = df[df.births > 1000]","ba65f0a8":"def showbirth():\n    fig = plt.figure(figsize=(15,4))\n    males = df.gender == 'M'\n    females = df.gender == 'F'\n    plt.plot(df.year[males]+df.month[males]\/12.+df.day[males]\/365., \n             df.births[males], \n             '+', label='Males')\n    plt.plot(df.year[females]+df.month[females]\/12.+df.day[females]\/365., \n             df.births[females], \n             'x', label='Females')\n    plt.xlabel('year')\n    plt.ylabel('births')\n    plt.legend()\n    return fig\nfig = showbirth()\nplt.title('Nombre de naissance sur les jours entre 1969 et 1989')\nlimits = plt.xlim(1969, 1989)","c779aac4":"import datetime\nfig = showbirth()\nplt.title('All days of 1970')\nplt.xlim(1970, 1971)\nxticks = plt.xticks(1970 + np.arange(12)\/12.)\nmonthes = [ datetime.date(2000, month, 1).strftime('%B') for month in range(1, 13)]\nlabels = fig.get_axes()[0].set_xticklabels( monthes )","8e83c76c":"datetimes = pd.to_datetime(df[['year', 'month', 'day']], errors='coerce')\n\nbad_dates = datetimes.isna()\nprint(\"Number of invalid date values found:\", bad_dates.sum())\n","d438f732":"dayname = datetimes.map(lambda dt: dt.day_name())\ndf.insert(0, 'dayname', dayname)\ndf.head()\n","a060f980":"df['decade'] = pd.cut(df.year, [1960, 1970, 1980, 1990], labels=[ \"60's\", \"70's\", \"80's \"])\npivot = pd.pivot_table(df, values='births', index='dayname', columns='decade', aggfunc=np.mean)\nplt.rcParams['figure.figsize'] = (10,5)\nax = pivot.plot()\n\n# for an unknown reason daynames does not appear on this very plot\nax.set_xticks(np.arange(7)) \nax.set_xticklabels(pivot.index)\npivot","59e72e90":"# Birthes per weekday","c3c89024":"=> Column day as abnormal values","2c23c3a8":"\n\n## Remove abnormal birth values","71b74da7":"## Cleaning","590cec7f":"##\u00a0Add a `dayname` column to dataset","f246e62f":"=> Looks like February has earned some extra days from 1969 to 1978, which explains the excess seen previously ","d3ac78e3":"There is a clear seasonal variation which is a known effect\n\nA weekly variation is responsible for the bimodal effect visible on the 1969-1988 view","7eb0c2c4":"##\u00a0Visualisation of births","fabb344f":"This kernel provide a quick analysis of the CDC birth dataset to check data consistency and an aditional visialization of birth variation per weekday.\n\n## Load data","91031e57":"=> Look good, except for a few days in excess from 1969 to 1978","ec48bbf6":"## Check data availability on a per month basis","0c3c0e0d":"## Check monthes with abnormal birth values","08f0ac15":"## Zoom on one year","4bed9a89":"## Observations\n\nOn Saturday and Sunday there is a significant drop in birthes. Hopefully this effect is not due to pregnant woman having to wait Monday ;) but it is rather that the medical operations like cesarean are performed during the week. Hence during the workdays the number of birthes is *higher*.\n\n>    Where are the Sunday babies  \n>    https:\/\/www.ncbi.nlm.nih.gov\/pubmed\/17891531\n","5fdcf4d4":"## Check consistency of birthes values","236217ab":"### remove days with abnormal values"}}