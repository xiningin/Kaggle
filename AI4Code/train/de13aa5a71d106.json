{"cell_type":{"1dfa9db3":"code","e482591f":"code","f09766e8":"code","7090efa6":"code","e7772caf":"code","58bc2899":"code","4af0dbe0":"code","cf62d180":"code","214267e4":"code","a4478581":"code","f0beb0a3":"code","a11d527e":"code","1797d5d6":"code","b36148ef":"code","29b6e12c":"code","ecb021b4":"code","728cb667":"code","50bd907e":"code","5548ac1a":"code","c24b6a48":"code","c934d37c":"code","f9ca4137":"code","06195408":"code","a09ba993":"code","75a11afb":"code","a00fc2a2":"code","87810e44":"code","c4021197":"code","4d6e5135":"code","e8c05e2d":"code","cbf18e10":"code","a9332986":"code","f7991af3":"code","13b40b4c":"markdown","625fab96":"markdown","cf4a9f99":"markdown","73967fb7":"markdown","1f33f342":"markdown","707323ee":"markdown","6a6981cc":"markdown","f49560d0":"markdown","0556a74d":"markdown","c0e3ebb9":"markdown","a2dcfc76":"markdown","8447931c":"markdown","c41ee42c":"markdown","dee12962":"markdown","dae96193":"markdown","db490910":"markdown","888001fc":"markdown","68f977b6":"markdown"},"source":{"1dfa9db3":"import numpy as np # linear algebra\nimport pandas as pd # data processing, CSV file I\/O (e.g. pd.read_csv)\nimport altair as alt\nimport plotly.graph_objects as go\nimport plotly.express as px\nfrom matplotlib import pyplot as plt\n\n\nIPL_match = pd.read_csv('..\/input\/ipl-complete-dataset-20082020\/IPL Matches 2008-2020.csv')\nIPL_ball = pd.read_csv('..\/input\/ipl-complete-dataset-20082020\/IPL Ball-by-Ball 2008-2020.csv')\n\nIPL_match.head()","e482591f":"heatmap = alt.Chart(IPL_match).mark_rect().encode(alt.X('neutral_venue:Q', bin=True),\n                                               alt.Y('result_margin:Q', bin=True))\ncircles = heatmap.mark_point().encode(alt.ColorValue('lightgray'),alt.Size('count()',legend=alt.Legend(title='Records in Selection')),\n                                             tooltip='count():Q')\n\nheatmap + circles","f09766e8":"IPL_match['year'] = pd.to_datetime(IPL_match['date']).dt.year\nIPL_match1 = IPL_match.groupby(['year','city','winner']).count()\nIPL_match2 = IPL_match1.reset_index()[['year','city','winner','id']].sort_values(by = 'year', ascending = True)\nIPL_match3 = IPL_match2.drop_duplicates(subset=['city'])\n\nfig = px.scatter(IPL_match2, x='city', y=\"id\",color='winner', animation_frame=\"year\", width=1800, height=400)\nfig.update_xaxes(categoryorder='array', categoryarray= IPL_match3['city']) \nfig.show()","7090efa6":"IPL_match1 = IPL_match.groupby(['year','city','player_of_match']).count()\nIPL_match2 = IPL_match1.reset_index()[['year','city','player_of_match','id']].sort_values(by = 'year', ascending = True)\nIPL_match3 = IPL_match2.drop_duplicates(subset=['city'])\n\nfig = px.scatter(IPL_match2, x='city', y=\"id\",color='player_of_match', animation_frame=\"year\", width=1800, height=400)\nfig.update_xaxes(categoryorder='array', categoryarray= IPL_match3['city'])    \nfig.show()","e7772caf":"fig = px.scatter(IPL_match2, x='player_of_match', y=\"id\",color='city', animation_frame=\"year\", width=1800, height=400)\nfig.update_xaxes(categoryorder='array', categoryarray= IPL_match3['player_of_match'])     \nfig.show()","58bc2899":"def WinCheck(row):\n    if row['toss_winner'] == row['winner']:\n        return True\n    else:\n        return False\n\nIPL_match['TossWinGameWin'] = IPL_match.apply(lambda row:WinCheck(row), axis = 1)\n\nIPL_match1 = IPL_match.groupby(['year','toss_winner','TossWinGameWin']).count()\nIPL_match2 = IPL_match1.reset_index()[['year','toss_winner','TossWinGameWin','id']].sort_values(by = 'year', ascending = True)\nIPL_match3 = IPL_match2.drop_duplicates(subset=['toss_winner'])\nIPL_match2 = IPL_match2.rename(columns={\"id\": \"count\"})","4af0dbe0":"IPL_match2.head()","cf62d180":"fig = px.scatter(IPL_match2, x='toss_winner', y=\"TossWinGameWin\", color = 'count', size = 'count', animation_frame=\"year\", width=1800, height=400)\nfig.update_xaxes(categoryorder='array', categoryarray= IPL_match3['toss_winner'])\nfig.show()","214267e4":"IPL_match1 = IPL_match.groupby(['year','city','toss_decision']).count()\nIPL_match2 = IPL_match1.reset_index()[['year','city','toss_decision','id']].sort_values(by = 'year', ascending = True)\nIPL_match3 = IPL_match2.drop_duplicates(subset=['city'])\nIPL_match2 = IPL_match2.rename(columns={\"id\": \"count\"})\n\nfig = px.scatter(IPL_match2, x='city', y=\"count\",color='toss_decision', animation_frame=\"year\", width=1800, height=400)\nfig.update_xaxes(categoryorder='array', categoryarray= IPL_match3['city'])     \nfig.show()","a4478581":"!pip install pivottablejs\nfrom pivottablejs import pivot_ui\npivot_ui(IPL_ball)","f0beb0a3":"IPL_ball_bat = IPL_ball[['batting_team','batsman','batsman_runs']]\nIPL1 = IPL_ball[IPL_ball['non_boundary'] != 0][['batsman','batsman_runs','id']].groupby(['batsman','batsman_runs']).count()","a11d527e":"IPL_ball_bat = IPL_ball[['batting_team','batsman','batsman_runs']].groupby(['batting_team','batsman']).sum()\nIPL_ball_bat = IPL_ball_bat.reset_index().sort_values(by = 'batsman_runs', ascending = False)","1797d5d6":"IPL_ball.head()","b36148ef":"IPL_ball_bat2 = IPL_ball[['batting_team','batsman','batsman_runs']].groupby(['batting_team','batsman']).sum()\nIPL_ball_bat2 = IPL_ball_bat2.reset_index().sort_values(by = 'batsman_runs', ascending = False)\n\n\nIPL_ball_bat3 = IPL_ball[['batting_team','batsman','id','is_wicket']].groupby(['batting_team','batsman','id']).count()\nIPL_ball_bat3 = IPL_ball_bat3.reset_index().groupby(['batting_team','batsman']).count()\nIPL_ball_bat3 = IPL_ball_bat3.reset_index().sort_values(by = 'id', ascending = False)\n\n\nIPL_bat_lst = IPL_ball_bat2.merge(IPL_ball_bat3,left_on=['batting_team','batsman'], right_on=['batting_team','batsman'])\nIPL_bat_lst = IPL_bat_lst.drop(['is_wicket'], axis=1)\n\nIPL_bat_lst = IPL_bat_lst.rename(columns={\"id\": \"Matches\"})","29b6e12c":"IPL_bat_lst","ecb021b4":"IPL_bat_lst['Average'] = IPL_bat_lst['batsman_runs']\/IPL_bat_lst['Matches']\nIPL_bat_lst = IPL_bat_lst.sort_values(by = 'Average', ascending = False)\n\nfig = px.scatter(IPL_bat_lst, x='Average', y=\"Matches\",size='batsman_runs', color=\"batsman\", width=1000, height=400)\n#fig.update_xaxes(categoryorder='array', categoryarray= IPL_ball_bat1['batsman'])     \nfig.show()","728cb667":"IPL_best_bat_lst = IPL_bat_lst[(IPL_bat_lst['Average'] > 27) & (IPL_bat_lst['Matches'] > 50)]\nIPL_best_bat_lst['batsman'][0:15]","50bd907e":"IPL_ball_bat1 = IPL_ball_bat[0:30]\n\nfig = px.scatter(IPL_ball_bat1, x='batsman', y=\"batsman_runs\",size='batsman_runs', color=\"batting_team\", width=1000, height=400)\n#fig.update_xaxes(categoryorder='array', categoryarray= IPL_ball_bat1['batsman'])     \nfig.show()","5548ac1a":"IPL_ball1 = IPL_ball.sort_values(by='over')\nIPL_ball2 = IPL_ball1[['batsman','batting_team','over','batsman_runs']]\nIPL_openr_lst = IPL_ball1[IPL_ball2['over'] < 1]['batsman']\nIPL_openr_lst = IPL_openr_lst.drop_duplicates().to_frame()\nIPL_openr_lst = IPL_openr_lst.merge(IPL_ball_bat,left_on='batsman', right_on='batsman')\nIPL_openr_lst = IPL_openr_lst.groupby('batsman').sum().sort_values(by = 'batsman_runs', ascending = False)\nIPL_openr_lst = IPL_openr_lst.reset_index()","c24b6a48":"IPL_openr_lst[0:15]","c934d37c":"IPL_ball1 = IPL_ball.sort_values(by='over')\nIPL_ball2 = IPL_ball1[['batsman','batting_team','over','batsman_runs']]\n\nIPL_mid_lst = IPL_ball2[(IPL_ball2['over'] > 10) & (IPL_ball2['over'] < 15)]['batsman']\nIPL_mid_lst = IPL_mid_lst.drop_duplicates().to_frame()\nIPL_mid_lst = IPL_mid_lst.merge(IPL_ball_bat,left_on='batsman', right_on='batsman')\nIPL_mid_lst = IPL_mid_lst.groupby('batsman').sum().sort_values(by = 'batsman_runs', ascending = False)\nIPL_mid_lst = IPL_mid_lst.reset_index()","f9ca4137":"IPL_ball1 = IPL_ball.sort_values(by='over')\nIPL_ball2 = IPL_ball1[['batsman','batting_team','over','batsman_runs']]\n\nIPL_slog_lst = IPL_ball2[(IPL_ball2['over'] > 18)]['batsman']\nIPL_slog_lst = IPL_slog_lst.drop_duplicates().to_frame()\nIPL_slog_lst = IPL_slog_lst.merge(IPL_ball_bat,left_on='batsman', right_on='batsman')\nIPL_slog_lst = IPL_slog_lst.groupby('batsman').sum().sort_values(by = 'batsman_runs', ascending = False)\nIPL_slog_lst = IPL_slog_lst.reset_index()","06195408":"new1  = IPL_bat_lst.describe()['Average'].count","a09ba993":"IPL_mid_lst","75a11afb":"index = 0\n\nOpenlist = []\nMidlist = []\nSloglist = []\n\nfor index1, row1 in IPL_bat_lst.iterrows():\n    loc1 = 0\n    loc2 = 0\n    loc3 = 0\n    \n    for index2, row2 in IPL_openr_lst.iterrows():\n        if row1['batsman'] == row2['batsman']:\n            Openlist.append(1)\n            loc1=1\n            \n    for index3, row3 in IPL_mid_lst.iterrows():\n        if row1['batsman'] == row3['batsman']:\n            Midlist.append(1)\n            loc2=1\n\n    for index4, row4 in IPL_slog_lst.iterrows():\n        if row1['batsman'] == row4['batsman']:\n            Sloglist.append(1)\n            loc3=1\n            \n    if loc1 == 0:\n        Openlist.append(0)\n        \n    if loc2 == 0:\n        Midlist.append(0)\n        \n    if loc3 == 0:\n        Sloglist.append(0)          \n        ","a00fc2a2":"IPL_bat_lst['Openlist'] = pd.Series(Openlist).values\nIPL_bat_lst['Midlist'] = pd.Series(Midlist).values\nIPL_bat_lst['Sloglist'] = pd.Series(Sloglist).values","87810e44":"IPL_bat_lst[0:10]","c4021197":"IPL2 = IPL_ball[IPL_ball['is_wicket'] != 0][['bowling_team','bowler','dismissal_kind']].groupby(['bowling_team','bowler']).count()\nIPL2 = IPL2.reset_index().sort_values(by = 'dismissal_kind', ascending = False)\nIPL3 = IPL2[0:20]\n\nfig = px.scatter(IPL3, x='bowler', y=\"dismissal_kind\",size='dismissal_kind', color=\"bowling_team\", width=1000, height=400)\n#fig.update_xaxes(categoryorder='array', categoryarray= IPL_ball_bat1['batsman'])     \nfig.show()","4d6e5135":"IPL_ball1 = IPL_ball.sort_values(by=['id','batting_team','over'], ascending= True)\nIPL_ball2 = IPL_ball1[['batsman','batting_team','id','batsman_runs']].groupby(['id','batting_team','batsman']).sum()\nIPL_ball2 = IPL_ball2.reset_index()","e8c05e2d":"Team = \" \"\nIPL_pos_list = []\n\nfor index1, row1 in IPL_ball2.iterrows():    \n    if row1['batting_team'] != Team:\n        position = 0\n        Team = row1['batting_team']\n    else:\n        position = position + 1 \n\n    IPL_pos_list.append(position)\n   \n    \nIPL_ball2['Position'] = pd.Series(IPL_pos_list).values\nIPL_ball_grp_runs = IPL_ball2.groupby(['batting_team','batsman','Position']).sum()\nIPL_ball_grp_count = IPL_ball2.groupby(['batting_team','batsman','Position']).count()\nIPL_ball_grp_runs = IPL_ball_grp_runs.reset_index()\nIPL_ball_grp_count = IPL_ball_grp_count.reset_index()","cbf18e10":"IPL_position = IPL_ball_grp_runs[['batting_team','batsman','Position','batsman_runs']]\nIPL_position['matches'] = IPL_ball_grp_count['batsman_runs']\n\nIPL_position['averages'] = IPL_position['batsman_runs']\/IPL_position['matches']","a9332986":"fig = px.scatter(IPL_position, x='batsman', y=\"Position\", color = 'batsman_runs', size = 'averages', animation_frame=\"batting_team\", width=1800, height=400)\nfig.show()","f7991af3":"batsman1 = IPL_position[IPL_position['batting_team'] == 'Mumbai Indians'].groupby('batsman').sum()\nIPL_position1 = IPL_position[['batting_team','batsman','Position','averages']]\nIPL_position1 = IPL_position1.groupby(['batting_team','batsman','Position'])['averages'].agg({'max'})\nIPL_position1","13b40b4c":"# Most of the matches were played in home venues and margin of wins were close. \n# Which means most of the matches were exciting till end","625fab96":"What will become clear in the below diagrams is that no one person has mare than 2-3 man of the mataches any year. So clearly it is the team that helps win IPL and not individuals","cf4a9f99":"# Best Bowlers in IPL Team","73967fb7":"# If you win the toss you should field. Also if you field first then chances of winning is more but by a narrow margin.\n\n# In 2019 at Bangalore, Chennai, Mumbai and Kolkata, team who won the toss always fielded","1f33f342":"# Impact of Toss on the outcome","707323ee":"# In many Stadiums, teams who win the toss always field","6a6981cc":"# Matches won at each location by different teams every year","f49560d0":"# Best position for each player","0556a74d":"![](http:\/\/images.indianexpress.com\/2020\/09\/ipl-schedule.jpg)","c0e3ebb9":"# Best Batsmen from each teams","a2dcfc76":"# Man of Matches won at each location by different teams every year","8447931c":"# Highest scorers in IPL from each teams","c41ee42c":"# Best Batsman in IPL based on averages and ability to bat at multiple position","dee12962":"# From the graph it is clear that batsman who have played more than 50 matches and have an average over 27 are the consistent performers and an asset to the team","dae96193":"# Calculating Best Averages and Ability to Bat in multiple position (Open, Middle order and Slog overs)","db490910":"*Double click on the chart after moving the slider to make it refresh*","888001fc":"*Double click on the chart after moving the slider to make it refresh*","68f977b6":"*Double click on the chart after moving the slider to make it refresh*"}}