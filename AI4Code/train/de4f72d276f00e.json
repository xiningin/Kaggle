{"cell_type":{"a99fdd3a":"code","78ddc8fa":"code","f207df14":"code","219c664c":"code","c054d84f":"code","41e579ae":"code","cb58fe9e":"code","1049528a":"code","de51d04e":"code","483bb130":"code","a101bb7e":"code","9effe6ea":"code","3780d004":"code","b46d42b4":"code","6f8214f6":"markdown","56fdfc5f":"markdown","cbd5877e":"markdown","e75a627f":"markdown","ca136f85":"markdown","e7479402":"markdown","ec119d65":"markdown","6e646950":"markdown","c675a336":"markdown","4db08a10":"markdown","196b3947":"markdown"},"source":{"a99fdd3a":"!pip install xlrd\n!pip install openpyxl\nimport numpy as np\nimport pandas as pd\nfrom mlxtend.frequent_patterns import apriori, association_rules\nimport warnings\nwarnings.filterwarnings(\"ignore\")\npd.set_option('display.max_columns', None)\npd.set_option('display.expand_frame_repr', False)","78ddc8fa":"# reading the dataset\n\ndf_=pd.read_excel(\"\/kaggle\/input\/online-retail-ii-data-set-from-ml-repository\/online_retail_II.xlsx\",\n                  sheet_name=\"Year 2009-2010\")\ndf = df_.copy()","f207df14":"df.head()","219c664c":"#Checking Variables\n\ndef check_df(dataframe):\n    print(\"##################### Shape #####################\")\n    print(dataframe.shape)\n    print(\"##################### Types #####################\")\n    print(dataframe.dtypes)\n    print(\"##################### Head #####################\")\n    print(dataframe.head(3))\n    print(\"##################### Tail #####################\")\n    print(dataframe.tail(3))\n    print(\"##################### NA #####################\")\n    print(dataframe.isnull().sum())\n    print(\"##################### Quantiles #####################\")\n    print(dataframe.quantile([0, 0.05, 0.50, 0.95, 0.99, 1]).T)\n\ncheck_df(df)","c054d84f":"def crm_data_prep(dataframe):\n    dataframe.dropna(axis=0, inplace=True)\n    dataframe = dataframe[~dataframe[\"Invoice\"].str.contains(\"C\", na=False)]\n    dataframe = dataframe[dataframe[\"Quantity\"] > 0]\n    dataframe[\"TotalPrice\"] = dataframe[\"Quantity\"] * dataframe[\"Price\"]\n    return dataframe\n\ndf = crm_data_prep(df)","41e579ae":"# We will make our analysis specific to Germany. \n# I removed the \"postage\" variable to be able to evaluate the products.\ndf_ger = df[(df['Country'] == \"Germany\") & (df['Description'] != \"POSTAGE\")]","cb58fe9e":"check_df(df_ger)","1049528a":"def create_invoice_product_df(dataframe):\n    return dataframe.groupby(['Invoice', 'Description'])['Quantity'].sum().unstack().fillna(0).\\\n        applymap(lambda x: 1 if x > 0 else 0)","de51d04e":"ger_inv_pro_df = create_invoice_product_df(df_ger)","483bb130":"ger_inv_pro_df.iloc[0:5, 0:5]","a101bb7e":"# We set a threshold for our support value.\nfrequent_itemsets = apriori(ger_inv_pro_df, min_support=0.01, use_colnames=True)","9effe6ea":"frequent_itemsets.sort_values(\"support\", ascending=False)","3780d004":"# We created the rules about support, confidence, and lift.\nrules = association_rules(frequent_itemsets, metric=\"support\", min_threshold=0.01)","b46d42b4":"rules.sort_values(\"lift\", ascending=False).head()","6f8214f6":"<font color = '#000'>\n    <a id = \"5\"><\/a><br>\n    \n## Load Data","56fdfc5f":"<font color = '#BB6688'>\n    \n   \nContent:\n    \n1.[Association Rule Learning](#1) \n    \n* [Problem to be solved](#2)\n    \n2.[Data Understanding](#3)\n    \n* [Import Libraries](#4)\n    \n* [Load Data](#5)\n    \n* [Data Analysis](#6)\n\n* [Data Preparation](#7)\n   \n3.[Creating Association Rules](#8)\n\n    ","cbd5877e":"<font color = '#000'>\n    <a id = \"7\"><\/a><br>\n    \n## Data Preparation","e75a627f":"<font color = '#000'>\n    <a id = \"6\"><\/a><br>\n    \n ## Data Analysis","ca136f85":"<font color = '#000'>\n    <a id = \"1\"><\/a><br>\n    \n#  **Association Rule Learning**\n\n- Association rules are one of the important machine learning techniques used in market analysis and recommendation systems. By examining the relationship between the user and the products, the habits of the user are observed and various actions are taken as a result of this observation.     \n- Association rule learning is a rule-based machine learning method for discovering interesting relations between variables in large databases.\n-Many algorithms are used for association rules, the most popular of which is the Apriori Algorithm.\n\n\n## **Apriori Algorithm**\n    \n- Apriori Algorithm is a Machine Learning algorithm that is used to gain insight into the structured relationships between different items involved.\n- It\u2019s a data mining technique that is used for mining frequent itemsets and relevant association rules.\n    \n**Support(X,Y) = Freq(X,Y) \/ N**\n- Support is an indication of how often X and Y appear together.\n- N: Total number of products     \n    \n**Confidence(X,Y) = Freq(X,Y) \/ Freq(X)**\n- Confidence is an indication of the probability that a customer who buys product X will buy product Y.\n    \n**Lift(X,Y) = Support(X,Y) \/ (Support(X) * Support(Y))**\n- Indicates how much sales of product Y increase when product X is purchased.","e7479402":"<font color = '#000'>\n   <a id = \"2\"><\/a><br>\n    \n## **Problems to be solved**\nThe main objective is to find and propose a general recommendation product on the basis of segment and country.\n","ec119d65":"<font color = '#000'>\n    <a id = \"8\"><\/a><br>\n\n# Creating Association Rules\n    ","6e646950":"# **Apriori Association Rules**","c675a336":"<font color = '#000'>\n    <a id = \"4\"><\/a><br>\n    \n## Import Libraries ","4db08a10":"![](https:\/\/www.veribilimiokulu.com\/wp-content\/uploads\/2018\/09\/Top_Shopping-Basket-Analysis-e1536052214193.png)","196b3947":"<font color = '#000'>\n    <a id = \"3\"><\/a><br>\n    \n# **Data Understanding**"}}