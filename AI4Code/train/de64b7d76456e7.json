{"cell_type":{"c025b49a":"code","5d939834":"code","f0355c7a":"code","0056189c":"code","65a6b018":"code","1c7aa0b3":"code","b7734196":"code","8215b657":"code","93609f23":"code","b9de5c8d":"code","9551214c":"code","31704ce9":"code","4abed47c":"code","1686f798":"code","e9336086":"code","13ee8fd4":"code","6fe086b2":"code","0eb11748":"code","80111c08":"code","26858ef3":"code","1770f90b":"code","a9096dcc":"code","13535220":"code","1a9263ad":"code","27e087cb":"code","9a7b61f5":"code","f872573f":"code","89416059":"code","f42eadf6":"code","f27bf5af":"code","7f100c62":"code","e313b76d":"code","41e31d46":"code","6e0334c7":"code","29088726":"code","22c26b0c":"code","b5a2bfc1":"code","96ae0d6d":"code","b5c4051c":"code","c75fda12":"code","7bcb8c87":"code","a02dfca8":"code","b48b4b7f":"code","f79afc8d":"code","043aaf0b":"code","2afa6771":"code","5ad10280":"code","98781c80":"code","56bbe92d":"code","eafdd8fb":"code","a5346889":"code","d9717011":"code","7d570aca":"code","c9d30eb9":"code","836c9d9b":"code","6b83f253":"code","c5625a32":"code","7c779e90":"code","092532e8":"code","081644dd":"code","c681e584":"code","f29dd995":"code","2244c748":"code","6b7d025a":"code","eb57a637":"code","253d6e49":"code","b40d41dc":"code","7ccde68b":"code","bce53d94":"code","40a036d5":"code","1ff35c78":"code","ba355905":"code","a356f982":"code","40c0476e":"code","2ea70d85":"code","db076d52":"code","9fbc38e0":"code","e4bf8b34":"code","5d1cd445":"code","9d19fcb7":"code","f9c873c1":"code","304c13f3":"code","5333b3a4":"code","31b998cc":"code","ae10faff":"code","d75fc088":"code","13bec660":"code","aa984f31":"code","a229af61":"code","ec7aea69":"markdown","9e3a352c":"markdown","00d1ed3c":"markdown","e27996fd":"markdown","c2b35bfa":"markdown","bedf6113":"markdown","23d3d4b9":"markdown","0ec7fba0":"markdown","f6bba047":"markdown","8d806b0c":"markdown","4dda9466":"markdown","d419ada6":"markdown","88cd7ad4":"markdown","4bf7e5f9":"markdown","99722db3":"markdown","e46d519a":"markdown","a4e51bc2":"markdown","c3fed70e":"markdown","dce03894":"markdown","21c3994c":"markdown","1d3f2877":"markdown","e6d9c8e8":"markdown","dfb5ba8c":"markdown","89a9fcd1":"markdown","c7f0addb":"markdown","ca8c629d":"markdown","2dd9e21f":"markdown","09ff14c4":"markdown","86d3e00c":"markdown","3703b451":"markdown","5c70fd2a":"markdown","836d3a2a":"markdown","a107ea5f":"markdown","847922ec":"markdown","6d87be90":"markdown","b62f87b2":"markdown","f69520dc":"markdown","b07f1682":"markdown","cfd20cc6":"markdown","cfee0b87":"markdown"},"source":{"c025b49a":"import pandas as pd\nimport numpy as np\nimport matplotlib.pyplot as plt\nimport seaborn as sns\n%matplotlib inline\n","5d939834":"data = pd.read_csv(\"..\/input\/noshowappointments\/KaggleV2-May-2016.csv\")","f0355c7a":"data.head(3)","0056189c":"data.describe()","65a6b018":"data.isnull().sum()","1c7aa0b3":"data.info()","b7734196":"data.columns","8215b657":"data[\"PatientId\"].nunique()","93609f23":"data[\"AppointmentID\"].nunique()","b9de5c8d":"data.columns","9551214c":"data[\"Gender\"].value_counts()","31704ce9":"plt.figure(figsize=(12,7))\nsns.set_context(\"paper\", font_scale=1.5)\nsns.countplot(x=data[\"No-show\"], data=data, hue=\"Gender\", color=\"pink\") ","4abed47c":"data[\"Gender\"].value_counts(normalize=True)*100","1686f798":"data1 = data.groupby(\"No-show\")[\"Gender\"]\ndata1.value_counts(normalize=True)*100","e9336086":"data.columns","13ee8fd4":"data[\"ScheduledDay\"].value_counts()","6fe086b2":"data[\"ScheduledDay\"] = pd.to_datetime(data[\"ScheduledDay\"])","0eb11748":"data[\"Scheduled_Yr\"] = data[\"ScheduledDay\"].dt.year","80111c08":"data[\"Scheduled_Yr\"].value_counts()","26858ef3":"data[\"Scheduled_Mth\"] = data[\"ScheduledDay\"].dt.month","1770f90b":"data[\"Scheduled_Mth\"].value_counts()","a9096dcc":"data[\"Scheduled_Date\"] = data[\"ScheduledDay\"].dt.day","13535220":"data[\"Scheduled_Date\"].value_counts()","1a9263ad":"data.info()","27e087cb":"data = data.drop(\"ScheduledDay\", axis=1)","9a7b61f5":"plt.figure(figsize=(15,7))\nsns.countplot(x=data[\"Scheduled_Date\"], hue=\"No-show\", data=data, color=\"seagreen\")","f872573f":"plt.figure(figsize=(15,7))\nsns.countplot(x=data[\"Scheduled_Mth\"], hue=\"No-show\", data=data, color=\"blue\")","89416059":"data[\"Scheduled_Mth\"].value_counts(normalize=True)*100","f42eadf6":"data[\"Scheduled_Mth\"] = data[\"Scheduled_Mth\"].replace([4,5,6], 100)\ndata[\"Scheduled_Mth\"] = data[\"Scheduled_Mth\"].replace([1,2,3,7,8,9,10,11,12], 0)","f27bf5af":"data[\"Scheduled_Mth\"] = data[\"Scheduled_Mth\"].replace(100, 1)","7f100c62":"data[\"Scheduled_Mth\"].value_counts()","e313b76d":"data.info()","41e31d46":"data[\"AppointmentDay\"].value_counts()","6e0334c7":"data[\"AppointmentDay\"] = pd.to_datetime(data[\"AppointmentDay\"])","29088726":"data[\"Appointment_Yr\"] = data[\"AppointmentDay\"].dt.year","22c26b0c":"data[\"Appointment_Mth\"] = data[\"AppointmentDay\"].dt.month","b5a2bfc1":"data[\"Appointment_Date\"] = data[\"AppointmentDay\"].dt.day","96ae0d6d":"data.info()","b5c4051c":"data = data.drop(\"AppointmentDay\", axis=1)","c75fda12":"data.info()","7bcb8c87":"data[\"Gender\"].value_counts(normalize=True)*100","a02dfca8":"gb_gender = data.groupby(\"No-show\")[\"Gender\"]\ngb_gender.value_counts(normalize=True)*100","b48b4b7f":"data = data.drop(\"Gender\", axis=1)","f79afc8d":"data[\"Neighbourhood\"].value_counts(normalize=True)*100","043aaf0b":"data = data.drop(\"Neighbourhood\", axis=1)","2afa6771":"data.info()","5ad10280":"data[\"No-show\"].value_counts()","98781c80":"data[\"No-show\"].value_counts(normalize=True)*100","56bbe92d":"plt.figure(figsize=(12,7))\nsns.set_context(\"paper\", font_scale=1.5)\nsns.countplot(x=data[\"No-show\"], color=\"pink\")","eafdd8fb":"data[\"No-show\"] = data[\"No-show\"].map({\"Yes\": 1, \"No\": 0})","a5346889":"data[\"No-show\"].value_counts()","d9717011":"data.info()","7d570aca":"data = data.drop(\"AppointmentID\", axis=1)","c9d30eb9":"data[\"Scholarship\"].value_counts()","836c9d9b":"data[\"Age\"].value_counts()","6b83f253":"data[\"Age\"].min()","c5625a32":"data = data.drop(data[data[\"Age\"] < 0].index)","7c779e90":"data[\"Age\"].value_counts()","092532e8":"plt.figure(figsize=(12,7))\nsns.kdeplot(x=\"Scheduled_Date\", y=data[\"Age\"], data=data, hue=\"No-show\", palette=\"coolwarm\", fill=True)","081644dd":"data.info()","c681e584":"data[\"Hipertension\"].value_counts()","f29dd995":"data[\"Diabetes\"].value_counts()","2244c748":"data[\"Alcoholism\"].value_counts()","6b7d025a":"data[\"Handcap\"].value_counts()","eb57a637":"data[\"SMS_received\"].value_counts()","253d6e49":"data[\"SMS_received\"].value_counts(normalize=True)","b40d41dc":"data.info()","7ccde68b":"data = data.drop(\"PatientId\", axis=1)","bce53d94":"data.info()","40a036d5":"data.head(3)","1ff35c78":"from sklearn.preprocessing import StandardScaler","ba355905":"scaler = StandardScaler()","a356f982":"scaled_data = scaler.fit_transform(data)","40c0476e":"scaled_data","2ea70d85":"from sklearn.decomposition import PCA","db076d52":"pca = PCA(n_components=3)","9fbc38e0":"pca.fit(scaled_data)","e4bf8b34":"x_pca = pca.transform(scaled_data)","5d1cd445":"scaled_data.shape","9d19fcb7":"x_pca.shape","f9c873c1":"plt.figure(figsize=(8,6))\nplt.scatter(x_pca[:,0],x_pca[:,1],c=data['No-show'],cmap='magma', alpha=0.3)\nplt.xlabel('First principal component')\nplt.ylabel('Second Principal Component')","304c13f3":"plt.figure(figsize=(8,6))\nplt.scatter(x_pca[:,0],x_pca[:,2],c=data['No-show'],cmap='coolwarm', alpha=0.2)\nplt.xlabel('First principal component')\nplt.ylabel('Third Principal Component')","5333b3a4":"plt.figure(figsize=(8,6))\nplt.scatter(x_pca[:,1],x_pca[:,2],c=data['No-show'],cmap='viridis', alpha=0.2)\nplt.xlabel('Second principal component')\nplt.ylabel('Third Principal Component')","31b998cc":"pca.components_","ae10faff":"data.columns","d75fc088":"features = ['Age', 'Scholarship', 'Hipertension', 'Diabetes', 'Alcoholism','Handcap', \n                    'SMS_received', 'No-show', 'Scheduled_Yr', 'Scheduled_Mth','Scheduled_Date', \n                    'Appointment_Yr', 'Appointment_Mth','Appointment_Date']","13bec660":"data_comp = pd.DataFrame(pca.components_, columns=features)","aa984f31":"plt.figure(figsize=(12,6))\nsns.heatmap(data_comp,cmap='plasma',)","a229af61":"###","ec7aea69":"### Visualizing the Scheduled Month. Noted that only March to June have the most appointments made throughout the year. ","9e3a352c":"# Fun Fact:\n###   The probability of picking a male patient, who made an appointment is 35%.\n###   The probability of picking a female patient, who made an appointment is 65%.","00d1ed3c":"### About 20% of the patients did not show up to the appointments. This is significant, considering the healthcare professionals, who anticipated the patient, and became idled for the next 30 minutes or 1 hour. Overall, a healthcare worker will be idling (not doing anything) 20% of the time, which is not productive from the finance perspective. ","e27996fd":"### Moving on to the next feature, Appointment Day. Noted that this feature is in object datatype as well. Will need convert them into datetime format. ","c2b35bfa":"### Visualizing the gender data","bedf6113":"###  The \"Neighbourhood\" feature's length is 81 and the value of each in percentage, as shown above, does not really give any meaningful information. Will just drop this feature. ","23d3d4b9":"# Description:\n### It is essential for businesses to understand which features of the dataset has the highest impact on the desired outcome. Having the knowledge can help organizations in resouce allocation strategy effectively and efficiently to ensure the intervention to improve desired outcome. In this interesting project, the dataset used is about patients who did not show up to their appointments. Finding ways to encourage patients to show up to their appointment to get appropriate treatment is always a priority, especially in the ambulatory healthcare setting. Ultimately, this can benefit healthcare facilities to maximize their scheduling efforts and craft strategies to encourage patients to show up to appointments. ","0ec7fba0":"### The AppointmentID is a unique identifier for each appointment made, which does not provide meaningful information in this project. Will drop. ","f6bba047":"# Project Objective:\n### To find out 3 components have the most impact on the desired outcome. The features that can explain the most variance is identified so healthcare facilities can gain actionable insights and craft appropriate startegies and plans. ","8d806b0c":"### Preparing data for PCA using standard scaler from the sklearn library","4dda9466":"# Process:\n### This interesting project will start off with exploratory data analysis, data cleansing, feature-engineering, and preprocessing the data. Then, The Principle Component Analysis from sklearn library will be used and fit to the data. This model offers to explain, in a 2-D graphical form, the variance from the most significant 3 components in all features. Finally, the most relevant features from the vast dataset will be shown in the graphical form. ","d419ada6":"### After transformation using the scaler","88cd7ad4":"### Next is our target feature or y-variable: No-show. Yes is number of people who did not show up to the appointment. ","4bf7e5f9":"# Fun Fact:\n###   The probability of picking a male patient, who missed the appointment is 34.6%\n###   The probability of picking a female patient, who missed the appointment is 65.4%.","99722db3":"### The following is the output of PCA in raw form, which is difficult to interpret (at least for me) without some sort of graphical forms. ","e46d519a":"###  Will replace: \n###  Month of April, May, June as 1; the rest as 0. \n###  This feature will provide us more meaningful information when feeding the data into PCA.","a4e51bc2":"### Noted that the scaled data has been changed from 14 features to 3 main components in PCA","c3fed70e":"### Visualizing the \"ScheduledDate\" feature. Noted that appointments were made across except 21st to 23rd. ","dce03894":"### The \"Age\" feature as -1 is illogical. Will just drop this observation, instead of replacing it with a speculated value(mean\/mode). ","21c3994c":"### Importing libraries","1d3f2877":"### Visualizing the no-show population in appointment scheduled date. Noted that the majority of patients, who did not show up is from age 0 to 60s and evenly spread across all days in a month. There is not much pattern recognized here but an assumption is that on a given day, there will be 20% of patients would not show up to the appointment. ","e6d9c8e8":"### Basic descriptive analysis","dfb5ba8c":"### Overall, SMS text was expected to the one of the key components for the target feature, but the heatmap does not show that is the case. The data used is only for 2016 so it would be beneficial if this was done using a few years period to give us a better understanding of the components. ","89a9fcd1":"### Noted that almost 32% of the patients received SMS text (assuming it is a reminder for an appointment). The question is why not all patients receive the same feature? Considering self-opt-out VS patients do not own mobile phones. This is pretty common in under-served population area. This feature can be potentially impactful in the desired outcome and is worthy of further exploration by healthcare administrators.  ","c7f0addb":"# Exploratory Data Analysis","ca8c629d":"### The target-feature will be mapped as a binary classification: Yes as 1, No as 0. ","2dd9e21f":"### Noted that the feature \"SheduledDay\" is in onject type. Will need to create new features of scheduled year, month, and day to give us more meaningful information. They will be converted into datetime format.","09ff14c4":"### Similarly to ScheduledDay feature, this feature is no longer needed since feature engineering has been done. ","86d3e00c":"### Finally, the \"Appointment Date\" and \"Scheduled Date\" are shown to be the features that explain the most of the variance for the target feature. This is followed by Age, hypertension, and diabetes. The feature that has the least is Appointment Month, which is shown in blue.","3703b451":"### Finally, the scaled data is fit to the PCA","5c70fd2a":"### Female patients, who made an appointment accounts for 65%. \n### Male patients, who made an appointment accounts for 35%. ","836d3a2a":"### The feature \"PatientId\" is a unique identifier, which is not a meaningful data. Will just drop this feature. ","a107ea5f":"### Setting up to visualize the result using heatmap","847922ec":"### The probability of picking a male patient, who missed the appointment is 34.6%.\n### The probability of picking a female patient, who missed the appointment is 65.4%.","6d87be90":"### Moving to the next feature: Neighbourhood","b62f87b2":"### Continue on with the rest of the features, which are in binary classification so not much cleansing to do. ","f69520dc":"### Since the feature \"ScheduledDay\" has been engineered into 3 new features in datetime format, it is no longer needed. ","b07f1682":"### Importing Principle Component Analysis from the sklearn library","cfd20cc6":"###    Noted that gender gives us almost the same proportion in data length, missed appointment, and made to the appointment. It does not look like it is a meaningful feature. Will drop this feature. ","cfee0b87":"### Number of components to be set at 3"}}