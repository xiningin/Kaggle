{"cell_type":{"debc5392":"code","ab42b2e0":"code","1af6296c":"code","cbdf902d":"code","877c067e":"code","ffcbd13a":"code","4071f34a":"code","5d0a4160":"code","5e04a8a6":"code","08b46568":"code","c4c943c8":"code","c7468d1d":"code","4b121fbd":"code","c3ba9013":"code","4106386d":"code","0d0dc8ba":"code","dbf888fb":"code","560b2043":"code","26f1e89c":"code","723fd2df":"code","9a1c1aea":"code","efaf919d":"code","3ba747c7":"code","e5936cf4":"code","e8d4cab5":"code","31965a97":"code","22185db5":"code","a16e207f":"code","958bf7a1":"code","cb35195f":"code","c38cc14e":"code","e4448261":"code","c3358e7f":"code","b9a012d7":"code","a5b1f567":"code","56518043":"code","02ddb50a":"code","36c75ac9":"code","b1e20db4":"code","c72c754b":"code","af7d84e9":"code","7018265c":"code","5b8503db":"code","2d76832d":"code","be123087":"code","f5cc1e66":"code","64b0e5e2":"code","c034a0e9":"code","facdd220":"code","4997ef2a":"code","09d8e1c5":"code","1f66b855":"code","17f5c84c":"code","aa1bcaf3":"code","4cca5825":"code","4b114af4":"code","88aefdc6":"code","89bf019a":"code","8059dc9a":"code","7a628a17":"code","a48b5357":"code","2367288b":"code","930bd5d4":"code","f3b1df62":"code","bad06984":"code","546e9e67":"code","84ce7b7d":"code","9bc23549":"code","859c8bce":"code","3ab3da2f":"code","e4ed4599":"code","c191bbeb":"code","3ebd4868":"code","dbd2d3ce":"code","382557ee":"code","b5416967":"markdown","b180508c":"markdown","f9542029":"markdown","a7841b7a":"markdown","ba74c3de":"markdown","35486990":"markdown","18d3319b":"markdown","b42ac7d3":"markdown","b5bc0a86":"markdown","e85dc3b1":"markdown","75a254f2":"markdown","6920081a":"markdown","73da3e7e":"markdown","626105f4":"markdown","f8efff3e":"markdown","806632cf":"markdown","3c230c10":"markdown","16c8dab1":"markdown","8b707332":"markdown","7d2a3703":"markdown","433e2f22":"markdown","4de6c4b5":"markdown","64b73666":"markdown","ebfa4874":"markdown","638c18e2":"markdown","21692d3c":"markdown","e220584d":"markdown","1d4f3f77":"markdown","5c2317f1":"markdown","cc0afc20":"markdown","cc99b2bf":"markdown","4839e58c":"markdown","93f97ee3":"markdown","485462f4":"markdown","a777bf4c":"markdown","8b72a600":"markdown","0851430e":"markdown","d1782d3c":"markdown","d66c761d":"markdown","486657e0":"markdown","28dbca81":"markdown","afc407f4":"markdown","e3cd44fd":"markdown","40c4a2d2":"markdown"},"source":{"debc5392":"# This Python 3 environment comes with many helpful analytics libraries installed\n# It is defined by the kaggle\/python docker image: https:\/\/github.com\/kaggle\/docker-python\n# For example, here's several helpful packages to load in \n\nimport numpy as np # linear algebra\nimport pandas as pd # data processing, CSV file I\/O (e.g. pd.read_csv)\nimport matplotlib.pyplot as plt # plots\nimport seaborn as sns\n\n# Input data files are available in the \"..\/input\/\" directory.\n# For example, running this (by clicking run or pressing Shift+Enter) will list the files in the input directory\n\nimport os\nprint(os.listdir(\"..\/input\"))\n\n# Any results you write to the current directory are saved as output.","ab42b2e0":"csv_files = ['..\/input\/Chicago_Crimes_2001_to_2004.csv',\n            '..\/input\/Chicago_Crimes_2005_to_2007.csv',\n            '..\/input\/Chicago_Crimes_2008_to_2011.csv',\n            '..\/input\/Chicago_Crimes_2012_to_2017.csv',\n            ]\n\nframes = []\nfor csv in csv_files:\n    df = pd.read_csv(csv ,usecols = ['Date','Primary Type','Location Description','District','Community Area','Arrest'])\n    frames.append(df)\n    \ncrime = pd.concat(frames)   \ncrime.head()","1af6296c":"crime.shape","cbdf902d":"# Exploring the missing values:\nprint(\"Are There Missing Data? :\",crime.isnull().any().any())     \nprint(crime.isnull().sum())","877c067e":"dfcrime = crime.dropna()\ndfcrime.shape","ffcbd13a":"count_data_origin = crime['Date'].count()\ncount_data_modify = dfcrime['Date'].count()\nValue = (count_data_modify\/count_data_origin)*100\nprint('The analysis will be carried on with:',\"%.2f\" % Value,'% of the total data')","4071f34a":"dfcrime.info(null_counts = True)","5d0a4160":"# It's more comfortable to do the next transformation for the doing analysis.\ndfcrime.columns=[each.replace(\" \",\"_\") for each in dfcrime.columns]\ndfcrime.columns","5e04a8a6":"dfcrime.District.unique()","08b46568":"dfcrime[(dfcrime['District'] == 'Beat')]","c4c943c8":"dfcrime = dfcrime[dfcrime.District != 'Beat']","c7468d1d":"# Changing the type \ndfcrime['District'] = dfcrime['District'].astype(float).astype(int)\ndfcrime.District.unique()","4b121fbd":"dfcrime.Community_Area.unique()","c3ba9013":"# Changing the type\ndfcrime['Community_Area'] = dfcrime['Community_Area'].astype(float).astype(int)\ndfcrime['Community_Area'].unique()","4106386d":"dfcrime.Primary_Type.unique()","0d0dc8ba":"dfcrime['Primary_Type'] = dfcrime['Primary_Type'].replace(['NON - CRIMINAL',\n                                                           'NON-CRIMINAL (SUBJECT SPECIFIED)'], \n                                                          'NON-CRIMINAL')\ndfcrime.Primary_Type.unique()","dbf888fb":"dfcrime.Location_Description.unique()","560b2043":"dfcrime['Location_Description'].value_counts().head()","26f1e89c":"dfcrime.Arrest.unique()","723fd2df":"dfcrime.Arrest.value_counts()","9a1c1aea":"dfcrime.Arrest = dfcrime.Arrest.astype('bool')\ndfcrime.Arrest.unique()","efaf919d":"# Splitting the Date columns will make the analysis easier. \ndfcrime['date'] = dfcrime['Date'].str[:11]\ndfcrime['time'] = dfcrime['Date'].str[12:]","3ba747c7":"dfcrime['date'] = pd.to_datetime(dfcrime['date'])\ndfcrime['time'] = pd.to_datetime(dfcrime['time'])","e5936cf4":"# Establish 'date' as index in the dataframe.\ndfcrime.index = dfcrime.date\ndel dfcrime['Date']\ndel dfcrime['date']\ndfcrime.head(2)","e8d4cab5":"crime_year = dfcrime.resample('Y').count()\ncrime_year = pd.DataFrame(crime_year.iloc[:,0])\ncrime_year.columns = ['Total_crime_per_year']\nprint(crime_year.head())\nprint(crime_year.tail())","31965a97":"dfcrime = dfcrime['2002' : '2016']","22185db5":"crime_year = crime_year['2002' : '2016']\n\na = crime_year.index\nb = np.arange(2002,2018)\n\ngrid = sns.barplot(x = a ,y = 'Total_crime_per_year', data = crime_year, color = 'black')\n\ngrid.set_xticklabels(b, rotation = 60)\nplt.ylabel('Total Crime')\nplt.xlabel('Year')\nplt.title('Crime per Year')\nplt.axhline(crime_year['Total_crime_per_year'].mean())\nfig=plt.gcf()\nfig.set_size_inches(10,5)\nplt.show()","a16e207f":"print('- Crime Activity 2005-2006')\nValue_a = ((crime_year['2006'].values- crime_year['2005'].values)\/crime_year['2006'].values)*100\nprint('%.2f' % Value_a, '% has been the crime activity increment from 2005 to 2006', '\\n')\n\nprint('- Crime Activity 2010-2011')\nValue_b = ((crime_year['2010'].values- crime_year['2011'].values)\/crime_year['2010'].values)*100\nprint(\"%.2f\" % Value_b, '% has been the crime activity increment from 2010 to 2011', '\\n')","958bf7a1":"crime_month = dfcrime.resample('M').count()\ncrime_month = pd.DataFrame(crime_month.iloc[:,0])\ncrime_month.columns = ['Total_crime_per_month']\n\ncrime_month.plot()\nplt.xlabel('Time')\nplt.ylabel('Total crime')\nplt.title('Crime per mes')\nplt.axhline(crime_month['Total_crime_per_month'].mean(), color = 'black')\nfig=plt.gcf()\nfig.set_size_inches(10,5)","cb35195f":"print('Top 5 months with more crime activity from 2002 to 2005')\nprint(crime_month['2002':'2005'].sort_values('Total_crime_per_month', ascending = False).head(), '\\n')\n\nprint('Top 5 months with more crime activity from 2006 to 2010')\nprint(crime_month['2006':'2010'].sort_values('Total_crime_per_month', ascending = False).head(),  '\\n')\n\nprint('Top 5 months with more crime activity from 2011 to 2013')\nprint(crime_month['2011':'2013'].sort_values('Total_crime_per_month', ascending = False).head(), '\\n')\n\nprint('Top 5 months with more crime activity from 2014 to 2016')\nprint(crime_month['2014':'2016'].sort_values('Total_crime_per_month', ascending = False).head(), '\\n')","c38cc14e":"print('Top 10 months with less criminal activity from 2003 to 2005')\nprint (crime_month['2002':'2005'].sort_values('Total_crime_per_month').head(5), '\\n')\n\nprint('Top 10  months with less criminal activity from 2006 to 2010')\nprint(crime_month['2006':'2010'].sort_values('Total_crime_per_month').head(5), '\\n')\n\nprint('Top 5 months with less criminal activity from 2011 to 2013')\nprint(crime_month['2011':'2013'].sort_values('Total_crime_per_month').head(), '\\n')\n\nprint('Top 5 months with less criminal activity from 2015 to 2016')\nprint(crime_month['2015':'2016'].sort_values('Total_crime_per_month').head(), '\\n')","e4448261":"fig, ax = plt.subplots()\n\nax.plot(crime_month['2002'].values, color = 'Blue', label = '2002')\nax.plot(crime_month['2003'].values, color = 'Green', label = '2003')\nax.plot(crime_month['2004'].values, color = 'Brown', label = '2004')\nax.plot(crime_month['2005'].values, color = 'Magenta', label = '2005')\nax.plot(crime_month['2006'].values, color = 'Yellow', label = '2006')\nax.plot(crime_month['2007'].values, color = 'red', label = '2007')\nax.plot(crime_month['2008'].values, color = 'cyan', label = '2008')\nax.plot(crime_month['2009'].values, color = 'orange', label = '2009')\nax.plot(crime_month['2010'].values, color = 'hotpink', label = '2010')\nax.plot(crime_month['2011'].values, color = 'lime', label = '2011')\nax.plot(crime_month['2012'].values, color = 'm', label = '2012')\nax.plot(crime_month['2013'].values, color = 'silver', label = '2013')\nax.plot(crime_month['2014'].values, color = 'olive', label = '2014')\nax.plot(crime_month['2015'].values, color = 'salmon', label = '2015')\nax.plot(crime_month['2016'].values, color = 'dimgray', label = '2016')\n\nplt.xlabel('Month')\nplt.ylabel('Total crimes')\nplt.title('Criminal Activity during a year')\nplt.axhline(crime_month['Total_crime_per_month'].mean(), color = 'black')\nplt.xlabel('Month')\n\nc = ['January','January','March','May','July','September','November']\nax.set_xticklabels(c)\n\nplt.legend(bbox_to_anchor=(1, 0, .3, 1), loc=2,\n           ncol=2, mode=\"expand\", borderaxespad=0)\n\nfig=plt.gcf()\nfig.set_size_inches(10,5)\n","c3358e7f":"\nSum_m = [(crime_month['2002'].values + crime_month['2003'].values + crime_month['2004'].values + \n     crime_month['2005'].values + crime_month['2006'] + crime_month['2007'].values + crime_month['2008'].values \n                + crime_month['2009'].values + crime_month['2010'].values + crime_month['2011'].values + \n                crime_month['2012'].values +crime_month['2013'].values + crime_month['2014'].values + \n                crime_month['2015'].values + crime_month['2016'].values)]\n\nSum_m = Sum_m[0]\nSum_m = Sum_m.reset_index()\nSum_m.index = [['January','Febreary','March','April','May','June',\n                'July','August','September','October','November','December']]\ndel Sum_m['date']\nprint('Top 5 months with more criminal activity in total')\nprint(Sum_m.sort_values('Total_crime_per_month', ascending= False).head(), '\\n')\n\nprint('Top 5 safer months')\nprint(Sum_m.sort_values('Total_crime_per_month').head(), '\\n')","b9a012d7":"Sum_m.plot(kind = 'bar')\nfig=plt.gcf()\nfig.set_size_inches(10,5)\n\nplt.xlabel('Month')\nplt.ylabel('Total crime')\nplt.title('Total crime per month')","a5b1f567":"crime_day = dfcrime.resample('d').count()\ncrime_day = pd.DataFrame(crime_day.iloc[:,0])\ncrime_day.columns = ['Total_crime_per_day']\ncrime_day = crime_day['2002' : '2016']\n\nmedian_day = crime_day.Total_crime_per_day.mean()\nprint('The average of criminal activity in the city fo Chicago is:',\"%.2f\" % median_day)","56518043":"crime_day.plot()\n\nplt.ylabel('Total crime')\nplt.title('Crime per day')\nplt.axhline(crime_day.Total_crime_per_day.mean(), color = 'black')\n\nfig=plt.gcf()\nfig.set_size_inches(20,10)","02ddb50a":"max_day = crime_day['Total_crime_per_day'].max()\nprint('The day with more crimes in the city of Chicago was:')\ncrime_day[(crime_day['Total_crime_per_day'] == max_day)]","36c75ac9":"min_day = crime_day['Total_crime_per_day'].min()\nprint('The day with less crimes in the city of Chicago was:')\ncrime_day[(crime_day['Total_crime_per_day'] == min_day)]","b1e20db4":"dfhours = dfcrime.reset_index()\ndfhours.index = dfhours.time\ndfhours.head(1)","c72c754b":"dfhours = dfhours.resample('h').count()\ndfhours = dfhours[['time']]\ndfhours.columns = ['Sum_Crimes_per_Hour']\ndfhours['Crime_per_hour_median'] = dfhours['Sum_Crimes_per_Hour']\/(365*15)\ndfhours","af7d84e9":"median_hour = dfhours.Crime_per_hour_median.median()\nprint('The mean crime per hour is:',\"%.2f\" % median_hour,'\\n')","7018265c":"x = dfhours.index\ny = dfhours.Crime_per_hour_median\na = np.arange(0,24)\n\ngrid = sns.pointplot(x = x, y = y, data = dfhours)\ngrid.set_xticklabels(a)\nplt.axhline(dfhours.Crime_per_hour_median.mean(), color = 'black')\nfig = plt.gcf()\nfig.set_size_inches(20,10)\nplt.grid()","5b8503db":"print('Top 5 hours with more crime activity')\nprint(dfhours.sort_values('Crime_per_hour_median', ascending= False).head(), '\\n')\n\nprint('Top 5 hours with less crime activity')\nprint(dfhours.sort_values('Crime_per_hour_median').head(7))","2d76832d":"dfcrime['Community_Area'].value_counts()","be123087":"plt.figure(figsize=(20,25))\nsns.countplot(y = dfcrime['Community_Area'])\nplt.axvline(dfcrime['Community_Area'].value_counts().mean(), color = 'black', alpha = 0.5) \nplt.xlabel('Total crime')\nplt.ylabel('Community Area')\nplt.title('Crime per Community Area')","f5cc1e66":"c_a = pd.DataFrame(dfcrime['Community_Area'].value_counts())\nc_a.columns = ['Number_of_crimes']\nc_a.index.name = 'Community_Area'\n\nprint('The most dangerous areas in the city of Chicago are:')\nprint(c_a.sort_values('Number_of_crimes', ascending = False).head(), '\\n')\n\nprint('The safest areas in the city of chicago are:')\nprint(c_a.sort_values('Number_of_crimes').head(8))","64b0e5e2":"c_a['Percent_%'] = round((c_a['Number_of_crimes']\/c_a['Number_of_crimes'].sum())*100,2)\n\nprint(c_a.sort_values('Percent_%', ascending = False).head(), '\\n')","c034a0e9":"c_a_last_five = pd.DataFrame(dfcrime['2012':'2016'])\nc_a_last_five = pd.DataFrame(c_a_last_five['Community_Area'].value_counts())\nc_a_last_five.columns = ['Number_of_crimes']\nc_a_last_five.index.name = 'Community_Area'\n\nprint('The most dangerous areas in the city of Chicago in the last 5 years (2012 to 2016):')\nc_a_last_five['Percent_%'] = round((c_a_last_five['Number_of_crimes']\/c_a_last_five['Number_of_crimes'].sum())*100,2)\nprint(c_a_last_five.sort_values('Percent_%', ascending = False).head(), '\\n')\n\nprint('The safest areas in the city of Chicago in the last 5 years (2012 to 2016):')\nprint(c_a_last_five.sort_values('Number_of_crimes').head(8))\n\n","facdd220":"c_a_last_year = dfcrime['2016']\nc_a_last_year = pd.DataFrame(c_a_last_year['Community_Area'].value_counts())\nc_a_last_year.columns = ['Number_of_crimes']\nc_a_last_year.index.name = 'Community_Area'\n\nprint('The more dangerous areas in the city of Chicago in 2016:')\nc_a_last_year['Percent_%'] = round((c_a_last_year['Number_of_crimes']\/c_a_last_year['Number_of_crimes'].sum())*100,2)\nprint(c_a_last_year.sort_values('Percent_%', ascending = False).head(), '\\n')\n\nprint('The safest areas in the city of Chicago in 2016:')\nprint(c_a_last_year.sort_values('Number_of_crimes').head(8))","4997ef2a":"c_a.index[:15]","09d8e1c5":"top_c_a = dfcrime.groupby('Community_Area').resample('Y').count()\ntop_c_a = top_c_a[['Community_Area']]\ntop_c_a.columns = ['Sum_C_A']\ntop_c_a = top_c_a.reset_index()","1f66b855":"top_c_a= top_c_a.set_index(['date','Community_Area'])\ntop_c_a.head(1)","17f5c84c":"top_c_a = top_c_a[top_c_a.index.get_level_values('Community_Area').isin([25, 43, 8, 23, 67, \n                                                                         24, 71, 28, 29, 68, 49, \n                                                                         66, 69, 32, 22])]","aa1bcaf3":"top_c_a.head(1)","4cca5825":"top_c_a.unstack(level=1).plot(kind='line')\nfig=plt.gcf()\nfig.set_size_inches(20,10)\n\nplt.xlabel('Year')\nplt.ylabel('Total crime')\nplt.title('top most dangerous community areas during the years')\n\nplt.legend( loc = 'best')\nplt.show()","4b114af4":"dfcrime.District.value_counts()","88aefdc6":"plt.figure(figsize=(10,5))\nsns.countplot(x = dfcrime['District'])\nplt.axhline(dfcrime['District'].value_counts().mean(), color = 'black', alpha = 0.5)\nplt.xlabel('District')\nplt.ylabel('Total crime')\nplt.title('Crime per police district ')","89bf019a":"crime['District'].value_counts()[:22].plot(kind='pie',autopct='%1.1f%%')\n# Here the decision has been made to use 22 districts since the others did not have almost anything relevant\nplt.title('Distribution per district')\nfig=plt.gcf()\nfig.set_size_inches(10,10)\nplt.show()","8059dc9a":"district = dfcrime.groupby('District').resample('Y').count()\ndistrict = district[['District']]\ndistrict.columns = ['Sum_D']","7a628a17":"district.unstack(level=0).plot(kind='line')\nfig=plt.gcf()\nfig.set_size_inches(15,8)\nplt.legend( bbox_to_anchor=(0.7, 0, .3, 1), loc=2,\n           ncol=2, mode=\"expand\", borderaxespad=0)\nplt.xlabel('Year')\nplt.ylabel('Total crime')\nplt.title('District police evolution over the years')\nplt.show()","a48b5357":"crime['Arrest'].value_counts()[:2].plot(kind='pie',autopct='%1.1f%%')\nplt.title('Arrests')\nfig=plt.gcf()\nfig.set_size_inches(5,5)\nplt.show()","2367288b":"arrest = dfcrime.groupby('Arrest').resample('Y').count()\narrest = arrest[['Arrest']]\narrest.columns = ['Sum_Arrest']","930bd5d4":"ax = arrest.unstack(level=0).plot(kind = 'bar')\n\nplt.legend( bbox_to_anchor=(0.7, 0, .3, 1), loc=2,\n           ncol=1, mode=\"expand\", borderaxespad=0)\n\nax.set_xticklabels(b, rotation = 60)\n\nplt.ylabel('Total')\nplt.xlabel('Year')\nplt.title('Arrests')\nfig=plt.gcf()\nfig.set_size_inches(10,5)\nplt.show()","f3b1df62":"dfcrime.Primary_Type.value_counts().head(11)","bad06984":"plt.figure(figsize=(10,8))\nsns.countplot(y = dfcrime['Primary_Type'])\nplt.axvline(dfcrime['Primary_Type'].value_counts().mean(), color = 'black', alpha = 0.5) \n\nplt.ylabel('Crime')\nplt.xlabel('Total')\nplt.title('Total Crime')","546e9e67":"top_type = dfcrime.groupby('Primary_Type').resample('Y').count()\ntop_type  = top_type [['Primary_Type']]\ntop_type .columns = ['Sum_type']\ntop_type  = top_type.reset_index()\ntop_type = top_type.set_index(['date','Primary_Type'])\ntop_type .head(1)","84ce7b7d":"top_type = top_type[top_type.index.get_level_values('Primary_Type').isin(['THEFT','BATTERY','CRIMINAL DAMAGE',\n                                                        'NARCOTICS','OTHER OFFENSE','ASSAULT',\n                                                        'BURGLARY','MOTOR VEHICLE THEFT','ROBBERY',\n                                                        'DECEPTIVE PRACTICE','CRIMINAL TRESPASS'])]","9bc23549":"top_type.head(1)","859c8bce":"top_type.unstack(level=1).plot(kind='line')\nfig=plt.gcf()\nfig.set_size_inches(15,5)\nplt.legend( loc = 'best')\nplt.show()","3ab3da2f":"e = dfcrime[['District', 'Community_Area' ]]\ne.index = e.Community_Area\ndel e['Community_Area']\n\nh = e[e.index.get_level_values('Community_Area').isin([25, 43, 8, 23, 67, \n                                                        24, 71, 28, 29, 68, 49, \n                                                        66, 69, 32, 22])]\nh = h.reset_index() \nh = pd.DataFrame (h.groupby(['District','Community_Area']).size())\nh.columns = ['T_Distric']\nh.head()","e4ed4599":"fig = plt.figure()\n\nsns.heatmap(h.unstack(level=0), linewidths=.5, cmap=\"BuPu\",vmin=-100000, vmax=333040)\n\nplt.ylabel('Community Area')\nplt.xlabel('District')\nplt.title('Community Area vs Police Districts')\n\nfig = plt.gcf()\nfig.set_size_inches(15,5)","c191bbeb":"print('Top 10 police districts')\nprint(dfcrime.District.value_counts().head(10).index)","3ebd4868":"print('Top 10 community Areas')\nprint(dfcrime.Community_Area.value_counts().head(10).index)","dbd2d3ce":"Type_vs_C_A = dfcrime[['Primary_Type', 'Community_Area']]\n\n#Filter by community Areas\nType_vs_C_A.index = Type_vs_C_A.Community_Area\ndel Type_vs_C_A['Community_Area']\nType_vs_C_A = Type_vs_C_A[Type_vs_C_A.index.get_level_values('Community_Area').isin([25, 43, 8, 23, 67, \n                                                        24, 71, 28, 29, 68, 49, \n                                                        66, 69, 32, 22])]\nType_vs_C_A = Type_vs_C_A.reset_index() \n\n#Filter by Primary_Type\nType_vs_C_A.index = Type_vs_C_A.Primary_Type\ndel Type_vs_C_A['Primary_Type']\nType_vs_C_A = Type_vs_C_A[Type_vs_C_A.index.get_level_values('Primary_Type').isin(['THEFT','BATTERY','CRIMINAL DAMAGE',\n                                                        'NARCOTICS','OTHER OFFENSE','ASSAULT',\n                                                        'BURGLARY','MOTOR VEHICLE THEFT','ROBBERY',\n                                                        'DECEPTIVE PRACTICE','CRIMINAL TRESPASS'])]\nType_vs_C_A = Type_vs_C_A.reset_index() \n\n\nType_vs_C_A = pd.DataFrame (Type_vs_C_A.groupby(['Primary_Type','Community_Area']).size())\nType_vs_C_A.columns = [' ']\n\nType_vs_C_A.head()","382557ee":"grip = sns.heatmap(Type_vs_C_A.unstack(level=0), linewidths=.5, cmap=\"YlGnBu\", annot=True)\n\nplt.ylabel('Community_Area')\nplt.xlabel('Primary Type')\nplt.title('Community Area vs Primary Type')\n\nfig = plt.gcf()\nfig.set_size_inches(15,5)","b5416967":"<a id=9 ><\/a>\n<h3> 1.3.6 Transformation of the datatime  <\/h3> ","b180508c":"The rankings have changed quite a bit ... let's take a look at the most recent date I have, in 2016","f9542029":"It looks like this row does not follow the pattern of the others. For that reason,  I am pretty sure that at some point of this row  could cause some problems with the analysis therefore it will be erased.\n","a7841b7a":"The months with less criminal activity that we find in the analysis are those in winter and autumn. For this reason, it was very unsual to get January with a maximun in the previous study.<\/b>\n    \nWhat really happened this month in the city of Chicago for this unsual criminal activity?<\/b>\n\nLet's look at the previous analysis in a plot:","ba74c3de":" This correlation shows several conclusions: <\/b>\n    \n * Regarding types of crime, we find that robberies, assaults and  drug trafficking are present in almost all areas.\n * Area 25, which was found to be the one with the most criminal activity, is characterized by its crimes in relation to drug trafficking. Although it is also where there are more aggressions .\n * Area 8 is where there are more acitivity in relation with theft and this is much higher than the others.\n ","35486990":"<a id=7 ><\/a>\n<h3> 1.3.4 Location Description <\/h3>","18d3319b":"In the bar chart you can see how the arrests, as well as the crimes that are committed have decreased in recent years.\n\n<a id=16> <\/a>\n# 7.Type of Crimes #\n\nLet's see what criminal activities are most common in the city of Chicago and the evolution of the most frequent during the years.","b42ac7d3":"From this graph we would have to comment several things: <\/b>\n\n- The first is, the most common crimes are maintained in the last 5 years, that is they do not increase and decrease (as it was shown in the annual analysis), and that for this case is so bad fot the city. This kind of rate it has to be reduced.\n- They should not be relax when it comes to robberies as it increases a lot during the last year.\n- In regard to narcotics, we must congratulate the city of Chicago, which year after year has been reducing this criminal activity in a very considerable way.\n\n<a id=17 ><\/a>\n# 8.Correlacions #\n\nFiltering the areas with more criminal activity, I will analyze which police districts have an action on the differents areas and also what  types of crimes that are the most common in these communities.\n\n## 8.1 Community Areas vs. Police Districts\n","b5bc0a86":"This graph shows how dictrite 8 has been the one with the most criminal activity. Although It decreased considerably with respect to others, even going so far as to equalize this rate with district 7 in 2016. <\/b> \n\nDuring 2016, the district with the largest number of crimes is 11. <\/b>\n\nIn a later analysis it will be seen what relation these police districts have to the most dangerous community areas.\n\n<a id=15 ><\/a>\n# 6.Arrests #\n\n\n","e85dc3b1":"Notice in the graphic  how in the year 2006 there was a considerable increase in the crime activity. Maybe this year corresponds with the global crisis that also affected United Estates. This could  explain why in 2008 the criminal activity got the highest rate.  <b>\n    \nOver the last few yars, the city has been reducing its crime level year by year, specially in the year 2011 in comparision with 2010.<b>\n    \n<b> A very good question that we could ask is: how was it possible to reduce the amount of crime in 2007 and in the following year crime rate increase significantly? ","75a254f2":"Finally, in what refers to police districts, let's see the evolution of each of them over the years.","6920081a":"<a id=4 ><\/a>\n<h3> 1.3.1 Police Dristrict <\/h3>","73da3e7e":"If we compare the different analyzes carried out, we would have to congratulate Area 43, which in the last year has left the top5 of the areas with the most criminal activity. Area 25 is also reducing this rate. In contrast, Areas 8 and 32 have increased it, area 32 did not appear in the top 5 of the last 5 years. <\/b>\n\nThe graph represents the evolution of the 15 areas with more registered cases.","626105f4":"As can be seen, there is a yearly pattern. There are some months during the year when there is more crime activity and another with less. I going to analyze these months. <\/b>\n\nGroup for differents period of year this pattern can be seen more clearly.<\/b>\n\n** Analysis of the months with more crime activity  **","f8efff3e":"This analysis could be relevant for two different situations. First, to study the factors which led the city to have the huge amount of crimes in the year 2006. Secondly,  what were the measures taken for reducing the amount of crime in the year 2011 by almost 50% compare to the previous year.\n\n<a id=11 ><\/a>\n<h2> 3.2 Monthly Analysis  <\/h2>\n\nIn this part of the analysis presents a study of the evolution of crime, month by month, between 2002 to 2016  as in the previous case.\n\nUsing a graph I will try to identify patterns during a year, I mean it is possible to know what months are the most dangerous. This could answer questions like:<b> \n* What months are the safest during the year in the city of Chicago? <b> \n* In the situation that you wish to visit that city, apart from the weather, what is the best month?","806632cf":"** In this section there is clearly a failure,  at 9 and at 10 in the morning the number of crimes committed is 0. I have not been able to locate this error or how to solve it.\nThe average of crimes per hour is  65.87 but without any mistake the real which is 54.91. **","3c230c10":"This graph could be interpreted in two ways, or most of the criminal activities are not serious enough to trigger an arrest and it is simply a fine without more penalty, or that the author of the crime has not been located.","16c8dab1":"<a id=2><\/a>\n**<h2>1.2 Description<\/h2>**\n\n* **Date** : day when the crime was committed. This column will be modified to facilitate the analysis.\n* **Primary Type** :  type of crime.\n* **Location Description** : place where the crime was committed.\n* **Arrest** : if the person was arrested or not,True or False.\n* **District**: is the number of the police dristrict.[https:\/\/home.chicagopolice.org\/community\/districts\/\/](http:\/\/)\n* **Community Area**:  is the number of the diferent community areas in this city. [http:\/\/www.thechicago77.com\/chicago-neighborhoods\/](http:\/\/)","8b707332":"<a id=5 ><\/a>\n<h3> 1.3.2 Community Area <\/h3>","7d2a3703":"As it was shown in the annual study, criminal activity has remained stable and has not changed. But, how has been the evolution over the past 5 years in the differents areas?","433e2f22":"<a id=3 ><\/a>\n** <h2> 1.3 Modification and exploring <\/h2>**","4de6c4b5":"As you can see, it follows the same distribution as the annual plot. <\/b>\n\nIn the previous analytical analysis, it was predicted how some disciplines were evolving, in the visual analysis it can be confirmed that district 25 is decreasing its criminal activity year after year, while areas like 8 and 32 have a tendency to increase it<\/b>\n\nIn these areas it would not be very good idea to buy an apartment to live in, although the prices may be lower, than  homes of the 9, 47 or 12 areas.\n\n<a id=14> <\/a>\n# 5. POLICE DISTRICTS #\n\nThis analysis consists of seeing the amount of work of  each police district","64b73666":"<a id=19><\/a>\n\n # <h1> 1.Importing and exploring data <\/h1>  #\n    \n   <a id=1><\/a>\n**<h2>1.1 Importing the data and load packages<\/h2>**","ebfa4874":"<a id=22 ><\/a>\n## 8.2 Areas comunitarias vs Delitos","638c18e2":"This analysis will provide some answers about crime in the city of Chicago. However, murders will not be covered because the data for this the city is found in a different dataset.\nAll data used was provided from the different Polices Districts of the city.\n\n [**1.Importing and exploring data**](#19)\n   * [1.1 Importing the data and load packages <b>](#1)\n   * [1.2 Description <b>](#2)\n   * [1.3 Modification and exploring<b>](#3)\n       * [1.3.1 Police Districts<b>](#4)\n       * [1.3.2 Community Areas<b>](#5)\n       * [1.3.3 Primary Type<b>](#6)\n       * [1.3.4 Location Description<b>](#7)\n       * [1.3.5 Arrest<b>](#8)\n       * [1.3.6 Transformation of the datatime<\/b>](#9)\n\n[**2.Time Analysis**](#18)\n   * [2.1  Annual Analysis<b>](#10)\n   * [2.2 Monthly Analysis<b>](#11)\n   * [2.3 Daily Analysis <b>](#12)\n      * [2.3.1 Analysis by hours<b>](#20)\n\n\n    \n\n[<b>**4.Community Areas Analysis **<b>](#13)\n\n[<b>**5.Polices Districts Analysis **<b>](#14)\n\n[<b>**6.Arrest Analysis **<b>](#15)\n\n[<b>**7.Primary Type Analysis **<b>](#16)\n\n[<b>**8.Correlations**](#17)\n* [**8.1 Community Areas vs Polices Districts**](#21)\n* [**8.2 Community Areas vs Crimes**](#22)","21692d3c":"In the year 2001 and 2017 the amount of data we have is not enough, there is no doubts that in comparison to other years the criminal activity shown is not accurate.\n\nTherefore, the analysis will covers the years 2002 to 2016.","e220584d":"It is observed how districts 8 and 11 are those that have more registered criminal activities. <\/b>\nLet's see what percentage of crime activity has each district.","1d4f3f77":"It really surprises that the criminal activity of area 25 is almost double than the second most conflictive area (8) or is almost the sum of the second (8) and third (43) together. <\/b>\n\nIt must be clarified that the area 0 does not really belong to the city of Chicago ... so the area 9 could be considered the safest in Chicago. <\/b>\n\nLet's see what percentage of the total criminal activity represent the most dangerous areas of the city.","5c2317f1":"<a id=12 ><\/a>\n<h2> 3.3 Daily Analysis  <\/h2>\n\nIn this analysis will show the criminal activity daily average and also some exceptional days.","cc0afc20":"Effectively, it was the last study to prove that the more dangerous months in the city of chicago are in summer. This analysis gives us other viewpoint. In the previous explorations the month of May was not the most frequent for time, but in total, May is the month with more criminal activity historically.<\/b>\n\nLooking at the previous plot it reveals a huge increase in some years, like 2002, 2006 and 2007, of this parameter.<\/b>\n\nFinally, to answer the question what it is the safest time to go sightseeing.I would travel to this city in winter, but I have already said before the weather may not be suitable for touring.","cc99b2bf":"+ All the districts with the most registered crimes have been worked in the communities with the most registered activity\n+ Unsual, communities 25 and 8, which had the highest rate, are not controlled by any of these top10 police districts. The 25 is in charge by the district 15 and the 8 is in charge by the district 18.","4839e58c":"<a id=18 ><\/a>\n# <h1> 3.Time Analysis <\/h1>#\n\n<a id=10 ><\/a>\n<h2> 3.1 Annual Analysis  <\/h2>\n\nThe main purpose of the annual analysis is to find out how the amount of crimes have developed during the years in Chicago.\n\nIs criminal activity increasing in the city ?  Is the city taking measures for improving the security of the citizens year over year?.","93f97ee3":"<a id=6 ><\/a>\n<h3> 1.3.3 Primary Type<\/h3>","485462f4":"The analysis will be carried out with the 11 types of crimes that are considerably the most significant.","a777bf4c":"We can see that 'NON-CRIMINAL' has several formats. I will unify it into just one format.","8b72a600":"<a id=8 ><\/a>\n<h3> 1.3.5 Arrest <\/h3>","0851430e":"In the graphic, as it was concluded analytically , it can be seen how the summer months are when the criminal activity is higher.<\/b>\nLet's see now the amount of crimes per month  in total.","d1782d3c":" In the last four tables it can be seen how the months when the maximun index crime correspond to July and August .<br\/>\nAlthough one of the very curious thing we can find here is that the maximun crime rate during the period from 2015 to 2017 is in the month of Febrary, a month which does not appear in the other periods of time.\n\n\n**Analysis of the months with less criminal activity  **","d66c761d":"The intention of the next transformation is to convert the columns 'date' and 'time' to ** datetime ** . Like has already been seen in the first explotation in 'Disctrict' had a row with different features. For that reason when I imported the data I didn't use **pd.to_datatime**  It would give an error.\n\nThere is another reason for splitting the 'Date' column into two. It makes working with this format more confortable  when  doing the hours analysis.","486657e0":"The hours of the night are those that less crimes are registered, this could be due to two factors: <\/b>\n+ There is not so much police activity so that the crimes happend without the police districts being aware of it.\n+ Really most happend during the day.\n\n<a id=13 ><\/a>\n# 4. Community areas #\nIn this section will analyze which are the most dangerous areas and which are the safest. <\/b>\n\nThis study responds to solutions to questions such as: <\/b>\n* In case of going sightseeing in this city, what are the areas I should avoid? <\/b>\n* If I wanted to buy an apartment to live in this city, which areas are the least appropriate?  <\/b>\n\nYou will see how is the evolution of the most conflictive areas over the years in a graphic ","28dbca81":"The hours after midday and after midnight have more activities. Although, the graph due to the error was not entirely accurate, it could be assumed that at 10 a.m and at 11 a.m, when it does not collect data, there will be a slight increase following the trend at 6 a.m until the hour that reaches its maximum.","afc407f4":"\nLet's remember which police districts have more activity crime and compare.","e3cd44fd":"<a id=20 ><\/a>\n# <h3> 3.3.1 Analysis by hours <\/h3>\nIn this section will show how the crimes involved during a day, I mean what hours are common to have more criminal activity.","40c4a2d2":"I have no idea how to complete these missing values. Let's remove them and see how the analysis is affected :"}}