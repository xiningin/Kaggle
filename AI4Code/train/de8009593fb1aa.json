{"cell_type":{"a2c6714c":"code","51839770":"code","41998936":"code","0bb60a6e":"code","0eb2669c":"code","72599920":"code","e31ec5f8":"code","42e4bb47":"code","8c846260":"code","d709f0cf":"code","590d8081":"code","14640529":"code","0a5dddd3":"code","15d78601":"code","ae01aa8f":"code","b4d6aa44":"code","27126aae":"code","1e0549f1":"markdown","35aabb33":"markdown","55cd869a":"markdown","7091a77b":"markdown","bcabb79c":"markdown","2ad679b3":"markdown","2f8bee64":"markdown","a9937ad5":"markdown","1f5c4b83":"markdown"},"source":{"a2c6714c":"\n# This Python 3 environment comes with many helpful analytics libraries installed\n# It is defined by the kaggle\/python Docker image: https:\/\/github.com\/kaggle\/docker-python\n# For example, here's several helpful packages to load\n\nimport numpy as np # linear algebra\nimport pandas as pd # data processing, CSV file I\/O (e.g. pd.read_csv)\nimport matplotlib.pyplot as plt\nimport plotly.express as px\nimport plotly.graph_objects as go\nimport seaborn as sns\nfrom plotly.subplots import make_subplots\nfrom datetime import datetime, timedelta, date\n\n# import pixiedust\n# Input data files are available in the read-only \"..\/input\/\" directory\n# For example, running this (by clicking run or pressing Shift+Enter) will list all files under the input directory\n\nimport os\nfor dirname, _, filenames in os.walk('\/kaggle\/input'):\n    for filename in filenames:\n        print(os.path.join(dirname, filename))\n\n# You can write up to 20GB to the current directory (\/kaggle\/working\/) that gets preserved as output when you create a version using \"Save & Run All\" \n# You can also write temporary files to \/kaggle\/temp\/, but they won't be saved outside of the current session","51839770":"# for simplicity we parse the date columns in datasets to datetime. \ndateparse = lambda x: datetime.strptime(x, '%Y-%m-%d')","41998936":"# read and parse the dates.\nraw_vaccinations = pd.read_csv('..\/input\/covid-world-vaccination-progress\/country_vaccinations.csv', parse_dates=['date'], date_parser=dateparse)\nraw_covid_variants = pd.read_csv('..\/input\/covid19-variants\/covid-variants.csv', parse_dates=['date'], date_parser=dateparse)\nraw_covid_daily = pd.read_csv('\/kaggle\/input\/covid19-global-dataset\/worldometer_coronavirus_daily_data.csv', parse_dates=['date'], date_parser=dateparse)","0bb60a6e":"raw_vaccinations.info()","0eb2669c":"raw_vaccinations.info()","72599920":"raw_covid_variants.describe()","e31ec5f8":"raw_covid_daily.info()","42e4bb47":"# Selects information from the data based on the location.\n\ndef extract_germany_from_dataset(raw_data: pd.DataFrame, column: str, location: str) -> pd.DataFrame:\n    return raw_data[raw_data[column] == location]","8c846260":"# Splits the data based on a date.\n\ndef split_data_into_2_with_date(raw_data: pd.DataFrame, date: pd.Timestamp) -> pd.DataFrame:\n    data_of_2020 = raw_data[raw_data['date'] < date]\n    data_of_2021 = raw_data[raw_data['date'] >= date]\n    return data_of_2020, data_of_2021","d709f0cf":"given_location = \"Germany\"\nstart_of_2021 = pd.Timestamp(2021, 1, 1)","590d8081":"variants_of_germany = extract_germany_from_dataset(raw_covid_variants, \"location\", given_location)\nvariants_of_2020, variants_of_2021 = split_data_into_2_with_date(variants_of_germany, start_of_2021)","14640529":"def build_variants_bar_plot(datasets): \n    for index, data in enumerate(datasets):\n        data_cumulative = pd.DataFrame(data.groupby('variant')['perc_sequences'].sum())\n        data_cumulative = data_cumulative.reset_index()\n        fig = px.bar(data_cumulative, 'variant', 'perc_sequences',width=700, height=400, labels={\n                     \"variant\": \"Variants\",\n                     \"perc_sequences\": \"Occurance in perc_sequences\",\n                 },title=\"Occurance of variants in 202%s\" %str(index))\n        fig.show()\n\nbuild_variants_bar_plot([variants_of_2020, variants_of_2021])","0a5dddd3":"def build_variants_lineplot_grid(datasets):\n    for index, data in enumerate(datasets):\n        grid = sns.FacetGrid(data, row=\"variant\", aspect=10, height=2)\n        grid.map(sns.lineplot, 'date', 'num_sequences', legend=True)\n        grid.fig.subplots_adjust(top=0.95)\n        grid.fig.suptitle(\"Occurance of variants in 202%s based on date\" %str(index))\n\nbuild_variants_lineplot_grid([variants_of_2020, variants_of_2021])","15d78601":"vaccinations_by_germany = extract_germany_from_dataset(raw_vaccinations, \"country\", given_location)\nvaccinations_of_2020, vaccinations_of_2021 = split_data_into_2_with_date(vaccinations_by_germany, start_of_2021)\nvaccinations_of_2021.head()","ae01aa8f":"def build_rel_plot_vaccinations(datasets):\n    for index, data in enumerate(datasets):\n        plot = sns.relplot(data=data, x='date', y='people_fully_vaccinated_per_hundred', height=5, aspect=2, kind=\"line\")\n        plot.set(title = \"Vaccinated people per hundred in 202%s based on date\" %str(index))\n        \nbuild_rel_plot_vaccinations([vaccinations_of_2020, vaccinations_of_2021])","b4d6aa44":"daily_cases_of_germany = extract_germany_from_dataset(raw_covid_daily, \"country\", given_location)\ndaily_cases_of_2020, daily_cases_of_2021 = split_data_into_2_with_date(daily_cases_of_germany, start_of_2021)","27126aae":"def build_daily_cum_bar_chart(datasets):\n    for index, data in enumerate(datasets):\n        daily_cum=pd.DataFrame(data.groupby('date')['daily_new_cases'].sum())\n        daily_cum = daily_cum.reset_index()\n        fig = px.bar(daily_cum, x='date', y='daily_new_cases',width=700, height=400,title=\"Cumulative daily cases in 202%s in months\" %str(index))\n        fig.show()\n        \nbuild_daily_cum_bar_chart([daily_cases_of_2020, daily_cases_of_2021])","1e0549f1":"Configuration of constants needed for the rest of the notebook.","35aabb33":"A bar plot comparison of Covid19 variants found in 2 different years based on a time series.","55cd869a":"**We create some utility functions to extract information we need.**","7091a77b":"We can get some basic understanding of the dataset using pandas builtin methods as below.","bcabb79c":"# 2020 vs 2021 Vaccinations in Germany?","2ad679b3":"#  ***A Covid-19 comparison of 2020 & 2021 in Germany***","2f8bee64":"# 2020 vs 2021 Daily New Covid Cases in Germany?","a9937ad5":"During the pandemie, we observed that Covid19 mutated very fast and different variants distributed all over the world. These visualizations show the percentage of sequences collected from Germany on a time series for each variant.","1f5c4b83":"**Visualization of different variants based on year 2020 and 2021**"}}