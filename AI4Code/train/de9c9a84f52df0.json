{"cell_type":{"9c725bb8":"code","70d7b62e":"code","bb0bee5e":"code","f6f21bee":"code","dfd7687a":"code","29799f0e":"code","d7f9d7b8":"code","3510c886":"code","4f55c914":"code","90eadbe0":"code","c2122c18":"code","ff7dc151":"code","e7608240":"code","153f3f02":"code","a9679e6f":"code","18cc4e3e":"code","d6b8b973":"code","0ee2e36b":"markdown","712fad26":"markdown","3f26d099":"markdown","13c69fe3":"markdown","45ea67f6":"markdown","f3df72ff":"markdown","1d6cfe5b":"markdown","d64f581f":"markdown","fe964640":"markdown","554a35a1":"markdown","33c04667":"markdown","82263994":"markdown","633b7ac4":"markdown"},"source":{"9c725bb8":"import pandas as pd\nimport numpy as  np\nimport seaborn as sns\nimport matplotlib.pyplot as plt\nfrom wordcloud import WordCloud\nimport nltk\nnltk.download('stopwords')\nfrom nltk.corpus import stopwords\n","70d7b62e":"# Input data files are available in the read-only \"..\/input\/\" directory\n# For example, running this (by clicking run or pressing Shift+Enter) will list all files under the input directory\n\nimport os\nfor dirname, _, filenames in os.walk('\/kaggle\/input'):\n    for filename in filenames:\n        print(os.path.join(dirname, filename))\n\ndf = pd.read_csv('\/kaggle\/input\/amazon-bestselling-books-20092019-with-gender\/bestsellers with categories.csv')","bb0bee5e":"#There are no missing values in the data\n\ndf.isnull().sum()","f6f21bee":"#Looking at the genre types and the time data\n\nprint(df['Genre'].unique())\nprint(df['Year'].unique())","dfd7687a":"#Making a subset of the dataframe by grouping the rows by gender\ndf_gender = pd.DataFrame(df.groupby(['Year', 'Gender']).size().reset_index())\n\n#converts the wide-form data to longform\ndf_gender= df_gender.pivot(index=['Year'], columns=['Gender'], values=0)\n\n#creating the column for percentages\ndf_gender['female %'] = (df_gender['Female']\/50)*100\ndf_gender['male %'] = (df_gender['Male']\/50)*100\n\n\ndf_gender","29799f0e":"#finding the number of times an author is on the list\ndf_authors = df.groupby('Author').size().reset_index().rename(columns = {0:'Number of times on list'})\n#only keeping the authors who appeared twice or more\ndf_authors = df_authors.loc[df_authors['Number of times on list']>=2].reset_index(drop = True)\n\n#merging these author names with the original dataframe\nrepeat_authors = df.merge(df_authors, how = 'inner', on = 'Author')\n#only keeping the columns I need\nrepeat_authors = repeat_authors[['Author', 'Gender', 'Number of times on list']]\n#removing duplicates\nrepeat_authors = repeat_authors.loc[repeat_authors.duplicated()==False]\n#making the field a string\nrepeat_authors['Number of times on list'] = repeat_authors['Number of times on list'].astype(str)\nrepeat_authors","d7f9d7b8":"#adding columns for number of words and characters in the book title\n\nnum_of_words = []\nnum_of_chars = []\nfor name in df['Name']:\n  num_of_chars.append(len(name))\n  name = name.split(' ')\n  num_of_words.append(len(name))\n\ndf['Number of words'] = num_of_words\ndf['Number of chars'] = num_of_chars","3510c886":"sns.set_theme()\nplt.figure(figsize=(15,10))\nplt.title('Percentage of males and females on the bestseller list from 2009-2019')\nplt.xlabel('Year')\nplt.ylabel('Percentage')\nsns.lineplot(data = df_gender[['male %', 'female %']], marker = 'o')","4f55c914":"sns.set_theme()\nsns.displot(df, x=\"Year\", hue = 'Gender', palette = 'mako', multiple = 'stack',col = 'Genre')\n","90eadbe0":"sns.set_theme()\nplt.figure(figsize=(15,10))\nplt.title('User Rating of Amazon Bestselling Books from 2009-2019')\nplt.xlabel('Year')\nplt.ylabel('User Rating')\nsns.lineplot(data=df, x=\"Year\", y='User Rating')\n\n","c2122c18":"#This creates two strings of text by extracting and joining all of the titles from the dataframes\n\nfiction = \" \".join(name for name in df.loc[df['Genre']=='Fiction'].Name)\nnonfiction = \" \".join(name for name in df.loc[df['Genre']!='Fiction'].Name)","ff7dc151":"#generating the wordcloud for the fiction titles\nwordcloud = WordCloud(stopwords=['on', 'to', 'of', 'a', 'an', 'the', 'book', 'novel', 'and', 'with', 'for'], background_color=\"white\",  color_func=lambda *args, **kwargs: \"black\", max_font_size=120, width = 500, height = 400).generate(fiction)\nplt.figure(figsize = (11,9))\nplt.imshow(wordcloud, interpolation='bilinear')\nplt.axis(\"off\")\nplt.show()","e7608240":"#generating the worldcloud for the non-fiction titles\nwordcloud = WordCloud(stopwords=['on', 'to', 'of', 'a', 'an', 'in', 'the', 'book', 'novel', 'and', 'with', 'for', 'Edition', 'Your', 'That'],  background_color=\"white\",  color_func=lambda *args, **kwargs: \"black\", max_font_size=90, width = 500, height = 400).generate(nonfiction)\nplt.figure(figsize = (11,9))\nplt.imshow(wordcloud, interpolation='bilinear')\nplt.axis(\"off\")\nplt.show()","153f3f02":"g = sns.FacetGrid(df.loc[df['Gender']!='Company'], col=\"Genre\", row = 'Gender', height=6, aspect = 1)\ng.map(sns.boxplot, \"Year\", \"Price\",  palette = 'magma')\n","a9679e6f":"df","18cc4e3e":"plt.figure(figsize = (15,10))\nplt.title('Number of times authors were on the bestseller list according to gender')\nsns.barplot(data = repeat_authors.groupby(['Gender','Number of times on list']).size().reset_index().rename(columns = {0: 'Number of authors'}), x='Number of times on list', y = 'Number of authors', hue = 'Gender', palette = 'mako')\n\n","d6b8b973":"sns.set_theme()\nplt.figure(figsize=(15,10))\nplt.title('Correlation between title length and number of reviews')\nplt.xlabel('Number of words in title')\nplt.ylabel('Number of reviews')\nsns.scatterplot(data=df, x=\"Number of words\", y='Reviews')\n\n","0ee2e36b":"## Possible Analyses\n\nThere are many possible analyses that could be conducted from this dataset. I've written some suggestions below and have displayed my findings.\n\n1. Distribution of Male and Female authors in ten years\n2. Distribution of Fiction and Non-Fiction Works in 10 Years\n3. Correlation between number of reviews and price according to males and females - does more reviews mean higher price?\n5. Distribution of Gender and Number of Reviews\n6. Distribution of review ratings according to year\n7. Does a book name with more words mean higher rating\/reviews\/price? Is it on the bestseller list for longer?\n8. Books that have been on the bestselling list more than once and their characteristics. Did the price go up? Are most of these books fiction or non-fiction? Were most of the writers male or female?\n\n","712fad26":"##### **Number of times authors appeared on the list according to gender**\n\nThe graph dislays the number of authors who appeared twice, thrice, etc. on the Amazon bestseller list over the ten years. Since there are more male authors than females in the dataset, in the majority of cases they outnumber them. In two cases this differs: more females appeared on the bestseller list 4 and 6 times over the time duration. ","3f26d099":"Calculating the percentage of male and female bestselling authors\n\n","13c69fe3":"##### **Distribution of Male and Female authors over time**\n\nComments:\n1. The percentage of bestselling male authors was approximately double the percentage of bestselling females authors in 2009\n2. The only year that there were more bestselling female authors was in 2016\n3. The disparity had been decreasing over the years. In 2019, there are 5% more male authors than females which is far smaller than the 35% in 2009\n","45ea67f6":"## Calculations","f3df72ff":"Extracting data of authors who were on the bestseller list multiple times over the years","1d6cfe5b":"##### **Correlation between title length and number of reviews**\n\nI wanted to see if more people read books with longer titles; from the graph, despite a few outliers, it looks like they do not.","d64f581f":"## Visualizations","fe964640":"### About the Data\n\n**Name:** Amazon top 50 Bestselling Books List from 2009 to 2019\n\nThe dataset was collected from [Kaggle](https:\/\/www.kaggle.com\/sootersaalu\/amazon-top-50-bestselling-books-2009-2019). I manually added the Gender column and have uploaded the modified data to [ my Github account](https:\/\/github.com\/suha98\/Analysis-of-Amazon-Bestselling-Books-2009-2019)","554a35a1":"##### **Creating word clouds of the book names according to genre**\n\nI wanted to see which words were the most frequent in the bestselling book titles over the past ten years. In the following section, I generated word clouds for the fiction and non-fiction novels to do this.","33c04667":"##### **Prices of the books with time, split by gender**\n\nComments: \n\nThe median prices of the male fiction novels in the bestseller list decreased over time. The female-authored non-fiction novel prices decreased as well, but very slightly. The variation in the prices has gotten smaller for both categories.","82263994":"##### **User Rating of Amazon Bestselling Books over time**\n\nWith time, it appears that books with a higher user rating became bestsellers.","633b7ac4":"##### **Number of fiction\/non-fiction books by gender over time**\n\nComments: \n- There were more non-fiction books than fiction in most years\n- The number of male non-fiction writers decreased\n- The number of female non-fiction writers increased\n- Books with company authors were mostly non-fiction\n- The number of male fiction writers remained relatively constant whereas the number of females decreased"}}