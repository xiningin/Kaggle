{"cell_type":{"5ca6e17a":"code","75b9879d":"code","e2932731":"code","8bec6da2":"code","b02849a0":"code","3c50f27c":"code","781a84b8":"code","d6d8908c":"code","9459695f":"code","b7457abe":"code","e5a16c6f":"code","61023c42":"code","aaedbb9d":"code","361f3060":"code","ee979ac8":"code","af566b6d":"code","217728b2":"code","3dee72e2":"markdown","c2d15b60":"markdown","ab8bca7a":"markdown","16335b82":"markdown","a305e916":"markdown","8d410ee9":"markdown","a20c9042":"markdown","7fcaf90b":"markdown","bb3e5a03":"markdown","1581230c":"markdown","f0883dbe":"markdown","027d7167":"markdown","13cc3872":"markdown","07b8db96":"markdown","469b68a0":"markdown","c5997fc1":"markdown","a3621414":"markdown","654829ac":"markdown","01bd72e4":"markdown","7f8f4e35":"markdown"},"source":{"5ca6e17a":"import pandas as pd\nimport numpy as np\nfrom collections import Counter\n\ninputDF = pd.read_csv('..\/input\/seattle\/listings.csv')\ninputDF=inputDF[['id','name','summary','longitude','latitude','space','description','instant_bookable','neighborhood_overview','neighbourhood_cleansed','host_id','host_name','host_since',\n                 'host_response_time','street', 'zipcode','review_scores_rating','property_type','room_type','accommodates','bathrooms','bedrooms','beds','reviews_per_month','amenities','cancellation_policy','number_of_reviews','price']]\n\n# replacing NaN values with 0\ninputDF.fillna(0, inplace=True)\n\n#Extracting prices from the table\nprice = inputDF['price']\nprices=[]\n\n#clean the data to make it float\nfor p in price:\n    p=float(p[1:].replace(',',''))\n    prices.append(p)\n\n#replace the price column with the new column\ninputDF['price']=prices\n\n#exclude the listings with 0 for price,beds,bedrooms,accomodates etc\ninputDF = inputDF[inputDF.bathrooms >0]\ninputDF = inputDF[inputDF.bedrooms > 0]\ninputDF = inputDF[inputDF.beds > 0]\ninputDF = inputDF[inputDF.price  > 0]\ninputDF = inputDF[inputDF.review_scores_rating  > 0]\ninputDF = inputDF[inputDF.reviews_per_month > 0]\ninputDF = inputDF[inputDF.accommodates  > 0]\ninputDF.head()","75b9879d":"roomType_DF=inputDF.groupby('room_type').id.count()\nroomType_DF=roomType_DF.reset_index()\nroomType_DF=roomType_DF.rename(columns={'id':'number_Of_Listings'})\nroomType_DF","e2932731":"%matplotlib inline\n\nimport matplotlib\nimport matplotlib.pyplot as plt\nmatplotlib.style.use('ggplot')\n\nroom = inputDF.room_type\nr = Counter(room)\n\nroom_df = pd.DataFrame.from_dict(r, orient='index').sort_values(by=0)\nroom_df.columns = ['room_type']\nroom_df.plot.pie(y = 'room_type', \n                 colormap = 'Blues_r', \n                 figsize=(10,10), \n                 fontsize = 20, autopct = '%.2f',\n                 legend = False,\n                 title = 'Room Type Distribution')","8bec6da2":"%matplotlib inline\nimport matplotlib\nimport matplotlib.pyplot as plt\nmatplotlib.style.use('ggplot')\n\npropertytype_DF = inputDF.groupby('property_type').id.count()\npropertytype_DF= propertytype_DF.reset_index()\npropertytype_DF=propertytype_DF.rename(columns={'id':'Number_Of_Listings'})\n\nobjects = propertytype_DF['property_type']\ny_pos = propertytype_DF['Number_Of_Listings']\n\npropertytype_DF.plot(kind='bar', \n           x='property_type',\n           y='Number_Of_Listings',\n           color = '#66c2ff', \n           figsize =(15,8), \n           title = 'Seattle Property Type Frequency', \n           legend = False)\nplt.ylabel('property type')\nplt.ylabel('Number of listings')","b02849a0":"roomProperty_DF = inputDF.groupby(['property_type','room_type']).price.mean()\nroomProperty_DF = roomProperty_DF.reset_index()\nroomProperty_DF=roomProperty_DF.sort_values('price',ascending=[0])\nroomProperty_DF.head()","3c50f27c":"#Plotting the same on a heatMap\n\nimport seaborn as sns\n\nplt.figure(figsize=(16,16))\nax = sns.heatmap(inputDF.groupby(['property_type', 'room_type']).price.mean().unstack(),annot=True, fmt=\".0f\")\nbottom, top = ax.get_ylim()\nax.set_ylim(bottom + 0.5, top - 0.5)","781a84b8":"plt.figure(figsize=(18,22))\nax = sns.heatmap(inputDF.groupby([\n        'neighbourhood_cleansed', 'bedrooms']).price.mean().unstack(),annot=True, fmt=\".0f\")\nbottom, top = ax.get_ylim()\nax.set_ylim(bottom + 0.5, top - 0.5)","d6d8908c":"summaryDF = inputDF[['summary','price']]\nsummaryDF = summaryDF[pd.notnull(summaryDF['summary'])]\nsummaryDF = summaryDF[summaryDF['summary']!=0]\nsummaryDF = summaryDF.sort_values('price',ascending=[0])\ntop100DF = summaryDF.head(100)\ntop100DF.head()","9459695f":"import nltk\nnltk.download('stopwords')\nnltk.download('punkt')\nnltk.download('wordnet')","b7457abe":"from nltk.corpus import stopwords\nimport string\n\nwords=''\nfor index,row in top100DF.iterrows():\n    words += row['summary']\n    \nstring_punctuation = string.punctuation\nignoreChar=['\\r','\\n','',' ',\"'s\"]\nnums=['0','1','2','3','4','5','6','7','8','9']\nsummary_data=nltk.word_tokenize(words)\nwords_only = [l.lower() for l in summary_data if l not in string_punctuation if l not in ignoreChar if l not in nums]\nfiltered_data=[word for word in words_only if word not in stopwords.words('english')] \nwnl = nltk.WordNetLemmatizer() \nfinal_data=[wnl.lemmatize(data) for data in filtered_data]\nfinal_words=' '.join(final_data)\nfinal_words[:50]","e5a16c6f":"!pip install wordcloud","61023c42":"from wordcloud import WordCloud, STOPWORDS\nimport matplotlib.pyplot as plt","aaedbb9d":"def plot_display(plot_words_list):\n    wordcloud = WordCloud(width = 1000, height = 700).generate(plot_words_list)\n    plt.figure(figsize=(18,12))\n    plt.imshow(wordcloud)\n    plt.axis(\"off\")\n    plt.show()","361f3060":"plot_display(final_words)","ee979ac8":"import re\n\namenitiesDF = inputDF[['amenities','price','id',]]\namenitiesDFTopper = amenitiesDF.sort_values('price',ascending=[0])\namenitiesDFtop=amenitiesDFTopper.head(30)\nallemenities = ''\nfor index,row in amenitiesDFtop.iterrows():\n    p = re.sub('[^a-zA-Z]+',' ', row['amenities'])\n    allemenities+=p\n\nallemenities_data=nltk.word_tokenize(allemenities)\nfiltered_data=[word for word in allemenities_data if word not in stopwords.words('english')] \nwnl = nltk.WordNetLemmatizer() \nallemenities_data=[wnl.lemmatize(data) for data in filtered_data]\nallemenities_words=' '.join(allemenities_data)","af566b6d":"plot_display(allemenities_words)","217728b2":"amenitiesDFbott =amenitiesDF.sort_values('price',ascending=[1])\namenitiesDFbottom=amenitiesDFbott.head(30)\n\nallemenitiesb = ''\nfor index,row in amenitiesDFbottom.iterrows():\n    p = re.sub('[^a-zA-Z]+',' ', row['amenities'])\n    allemenitiesb+=p\n\nallemenities_datab=nltk.word_tokenize(allemenitiesb)\nfiltered_datab=[word for word in allemenities_datab if word not in stopwords.words('english')] \nwnl = nltk.WordNetLemmatizer() \nallemenities_datab=[wnl.lemmatize(data) for data in filtered_datab]\nallemenities_wordsb=' '.join(allemenities_datab)\nplot_display(allemenities_wordsb)","3dee72e2":"The first task is to clean the data. The steps followed in cleaning data are:\n - Replace NaN values with 0\n - Converting prices to float","c2d15b60":"It can be analyzed that with the increase in the number of bedrooms price of listing increases. Although, it depends upon the neighbourhood as well.","ab8bca7a":"- This chart allows us to see all prices of listings broken down by property type and room type. This gives us much better understanding of the price breakdown in Seattle.\n- It can be analyzed that for almost all property type, prices for Entire home\/apartment are the maximum.","16335b82":"#### Analysing how number of bedrooms affect the price of the listings\nHeatMap for variation of prices with number of bedrooms for listings","a305e916":"After looking at the data and the prices of each listing, I was interested in finding out the parameters in the dataset that have an effect on the prices of the listings. For this part, listings.csv data is used.","8d410ee9":"#### Categorizing differernt listings based on room_type","a20c9042":"#### Visualizing the above categorization","7fcaf90b":"## Summary of the analysis","bb3e5a03":"#### Summarising the analysis","1581230c":"- It can be concluded that people are more inclined towards listing their entire property than listing private rooms or shared rooms.It can also be seen that property type also plays an important role. \n- Not surprisingly, Apartment and houses take up an overwhelming majority of all listings, although we do see few instances unfamiliar residencies here and there.","f0883dbe":"#### Analyzing how amenities affect the cost of the listings\n","027d7167":"# Part-1\n## Business Understanding: What factors highly influence the prices of listings in Seattle?","13cc3872":"#### Analyzing the prices for different room type and property type and plotting the same on a heatmap","07b8db96":"So this analysis gives us data points that the prices of listings on Airbnb depends upon the room type, property type, number of bedrooms and neighbourhood.","469b68a0":"#### Cleaning the data","c5997fc1":"It can be concluded that prices of listings depends upon following factors:\n\n1) The type of room chosen by a traveler plays\n- booking an entire property costs maximum followed by private room and shared apartment.\n\n2) The type of property chosen by the traveler\n - apartments and houses take up an overwhelming majority of all listings.\n \n3) Price of a listing also depends upon the number of bedrooms the property have and neighborhood of the property\n\n4) The summary section is the one which helps to attract travelers\n- it can be analyzed that presence of unique words like home, Seattle, bedroom, modern, pool, restaurant, view, minute walk, offer words tends to attract more travelers\n\n5) With the increase in prices the amenities provided by host also increases.","a3621414":"It can be seen that unique words like home, seattle, bedroom, modern, restaurant, view, offer are very commonly words used when hosts are describing their homes.\nThis is making sense because the primary purpose of AirBnB is not to provide luxury hotel suites but just a convinient place to stay. Naturally hosts understand these purposes and create their summaries based on location and requirements in order to attract as many travelers as they can.","654829ac":"It can be clearly seen that  listings with higher prices have extra eminities such as Wifi, washer\/dryer, parking, microwave, hair dryer, smoke detector. Extra emenities comes with extra prices","01bd72e4":"## Data Understanding and Preparation","7f8f4e35":"#### Analyzing and plotting the number of listings based on their property type"}}