{"cell_type":{"10ca6e01":"code","76989818":"code","ebb3c895":"code","cfbc08a5":"code","35687b04":"code","4039513d":"code","db748299":"code","f9cd0a4f":"code","2597aeef":"code","a1e64452":"code","17e89fab":"code","0ca2ef96":"code","ab46860e":"code","8339f50a":"code","a172605f":"code","17183448":"code","196d35d3":"code","47320188":"code","5cfe9208":"code","93f83969":"code","654ab956":"code","75a47024":"code","b366a5d9":"code","820725ee":"code","c7bd454e":"code","62bd56a8":"code","ca9ca417":"code","932be2ee":"code","52ba4297":"code","b54f80d7":"markdown","d4df169a":"markdown","3c6771b4":"markdown","9a425e63":"markdown","52a46d71":"markdown","88a9fc74":"markdown","f35a089f":"markdown","f67b48a4":"markdown","f1a2b22b":"markdown","90d0c83d":"markdown","45c468d2":"markdown","e3e0b6dc":"markdown","5d10ee07":"markdown","b1557b24":"markdown","fd8bb3b3":"markdown","3d525525":"markdown","651e34d2":"markdown","273df0af":"markdown","06747c5c":"markdown","82668e97":"markdown","5764c25a":"markdown","ec528689":"markdown","c2497952":"markdown","4b432cd3":"markdown","8537d7e5":"markdown","743dac22":"markdown","c1a306ef":"markdown","636ba837":"markdown","cfce4af3":"markdown","e0d39835":"markdown","9eb425a8":"markdown","d23ff0f2":"markdown","05e51694":"markdown","5ab8560a":"markdown","b40ef629":"markdown"},"source":{"10ca6e01":"# This Python 3 environment comes with many helpful analytics libraries installed\n# It is defined by the kaggle\/python Docker image: https:\/\/github.com\/kaggle\/docker-python\n# For example, here's several helpful packages to load\n\nimport numpy as np # linear algebra\nimport pandas as pd # data processing, CSV file I\/O (e.g. pd.read_csv)\nimport seaborn as sns\nfrom collections import Counter\n\n# Input data files are available in the read-only \"..\/input\/\" directory\n# For example, running this (by clicking run or pressing Shift+Enter) will list all files under the input directory\n\nimport os\nfor dirname, _, filenames in os.walk('\/kaggle\/input'):\n    for filename in filenames:\n        print(os.path.join(dirname, filename))\n\n# You can write up to 5GB to the current directory (\/kaggle\/working\/) that gets preserved as output when you create a version using \"Save & Run All\" \n# You can also write temporary files to \/kaggle\/temp\/, but they won't be saved outside of the current session","76989818":"# Read dataset\ndf = pd.read_csv('\/kaggle\/input\/goodreadsbooks\/books.csv', error_bad_lines=False)\ndf.head(3)","ebb3c895":"# dataset info\ndf.info()","cfbc08a5":"# Remove unnecessary space before num_pages\ndf.columns = [x.split()[0] for x in df.columns]","35687b04":"# Describe columns with object datatype \ndf.describe(include=['O'])","4039513d":"# Describe columns with numerical datatypes (float and int)\ndf.describe()","db748299":"# Drop unnecessary columns\ndf_new = df.drop(['bookID', 'isbn', 'isbn13'], axis=1)\ndf_new.head(3)","f9cd0a4f":"# Import libraries of plots\nimport matplotlib.pyplot as plt\nplt.rc('font', family='TakaoPGothic')\nimport seaborn as sns\nsns.set_style('darkgrid')","2597aeef":"# Check the composition of language code\n\ndf_new['lan_code2'] = df_new.language_code.apply(lambda x: 'eng' if 'en-' in x or 'eng' in x else x)\nlan_code = df_new['lan_code2'].value_counts().reset_index()\n\n# Get Top 5 Languange and Aggregate others into one value called 'other'\nsum_others = lan_code[lan_code['lan_code2'] < 46].lan_code2.sum()\nlan_code = lan_code[lan_code['lan_code2'] >= 46].append({'index':'others', 'lan_code2': sum_others}\\\n                                                            , ignore_index=True)","a1e64452":"# Distribution of books in each of the languages\nfig, ax = plt.subplots(figsize=(12,8))\n\ndt = df_new.groupby('language_code').count()['title'].reset_index()\nax = sns.barplot(data= dt, x='language_code', y='title')\nax.set_title('Distribution of books in each of the languages')\nax.set_xticklabels(ax.get_xticklabels(), rotation=90)\n\nfor p in ax.patches:\n    ax.annotate(format(p.get_height(), '.0f'), \n                   (p.get_x() + p.get_width() \/ 2., p.get_height()), \n                   ha = 'center', va = 'center', \n                   xytext = (0, 9), \n                   textcoords = 'offset points')\nplt.show()","17e89fab":"fig, axes = plt.subplots(2, 3, figsize=(17,8))\n\n# Distribution of books per authors\ndist_authors = Counter([item for x in df_new['authors'].str.split('\/') for item in x]).most_common()\ndist_authors = pd.DataFrame(dist_authors).rename(columns={0: 'author', 1: 'freq'})\nax = dist_authors['freq'].plot.kde(ax=axes[0,0], legend=False, title='Books per Authors')\nax = dist_authors['freq'].hist(density=True, bins=40, ax=axes[0,0])\nplt.xlim(0,max(dist_authors['freq']))\n\n\n# # Distribution of books per publishers\ndist_publisher = df_new['publisher'].value_counts().reset_index()\nax = dist_publisher['publisher'].plot.kde(ax=axes[0,1], legend=False, title='Books per Publishers')\nax = dist_publisher['publisher'].hist(density=True, bins=40, ax=axes[0,1])\nplt.xlim(0,max(dist_publisher['publisher']))\n\n# See the distribution of average_rating\nax = sns.distplot(df_new['average_rating'], ax=axes[0,2])\nax.set_title('Average Ratings for each of the books')\n\n# Distribution of text_review_count per books\nax = sns.distplot(df_new['text_reviews_count'], ax=axes[1,0])\nax.set_title('Text Reviews Count for each of the books')\n\n# Distribution of ratings_count per books\nax = sns.distplot(df_new['ratings_count'], ax=axes[1,1])\nax.set_title('Ratings Count for each of the books')\n\n# See the distribution of num_pages\nax = sns.distplot(df_new['num_pages'], ax=axes[1,2])\nax.set_title('Num Pages for each of the  books')\nplt.xlim(0, max(df_new['num_pages']))\n\nplt.tight_layout()","0ca2ef96":"fig, axes = plt.subplots(2, 2, figsize=(14,8))\n\n# Distribution of books per authors\nax = dist_authors['freq'].plot.kde(ax=axes[0,0], legend=False, title='Books per Authors')\nax = dist_authors['freq'].hist(density=True, bins=50, ax=axes[0,0])\nax.set_xlim(0, 20)\n\n# # Distribution of books per publishers\nax = dist_publisher['publisher'].plot.kde(ax=axes[0,1], legend=False, title='Books per Publishers')\nax = dist_publisher['publisher'].hist(density=True, bins=150, ax=axes[0,1])\nax.set_xlim(0,100)\n\n# Distribution of text_review_count per books\nax = sns.distplot(df_new['text_reviews_count'], ax=axes[1,0], bins=150)\nax.set_title('Text Reviews Count for each of the books')\nax.set_xlim(0, 20000)\n\n# Distribution of ratings_count per books\nax = sns.distplot(df_new['ratings_count'], ax=axes[1,1], bins=150)\nax.set_title('Ratings Count for each of the books')\nax.set_xlim(0, 1e6)\nplt.tight_layout()","ab46860e":"# Create new columns for each days, months and years\ndf_new['publish_year'] = df_new['publication_date'].str.split('\/').apply(lambda x: x[2]).astype(int)\ndf_new['publish_month'] = df_new['publication_date'].str.split('\/').apply(lambda x: x[0]).astype(int)\ndf_new['publish_day'] = df_new['publication_date'].str.split('\/').apply(lambda x: x[1]).astype(int)\n\nfig, axes = plt.subplots(1, 3, figsize=(14,4))\ndate = ['year', 'month', 'day']\nfor i, d in enumerate(date):\n    pb_time = Counter(df_new['publish_'+d])\n    pb_time = pd.DataFrame.from_dict(pb_time, orient='index').reset_index().rename(columns={'index':d, 0:'freq'})\n    ax = sns.lineplot(data=pb_time, x=d, y='freq', ax=axes[i])\n    ax.set_title('Distribution of book published each '+d)\n    \nplt.tight_layout()","8339f50a":"# Top 10 title based on the occurence and most ratings\nfig, axes = plt.subplots(1, 2, figsize=(12,4))\n\ndt = df.groupby('title').count()['bookID'].reset_index().sort_values(by='bookID', ascending=False).head(10)\nax = sns.barplot(data=dt, x=\"bookID\", y=\"title\", ax = axes[0])\nax.set(xlabel='Occurence', title='Top 10 books based on occurence')\n\ndt = df_new.groupby('title').sum()['ratings_count'].reset_index().sort_values(by='ratings_count', ascending=False).head(10)\nax = sns.barplot(data=dt, x=\"ratings_count\", y=\"title\", ax = axes[1])\nax.set(xlabel='ratings_count', title='Top 10 books based on most rated')\n\nplt.tight_layout()\nplt.show()","a172605f":"# Create a temporary dataframe that only containst ratings count and list of authors\nauth_df = df_new[['ratings_count', 'authors', 'lan_code2']]\nauth_df['authors'] = auth_df['authors'].str.split('\/')\n\n# Get the total of ratings_count for each of the authors\nrat_count, lan_list = [], []\n\nfor aut in dist_authors['author']:\n    is_author = auth_df['authors'].apply(lambda x: True if aut in x else False)\n    lang = auth_df[is_author]['lan_code2'].value_counts().reset_index().loc[0,:]['index']\n    lan_list.append(lang)\n    rat_count.append(sum(list(auth_df[is_author].ratings_count)))\n\n# Create column that contains total ratings count for each of the authors\ndist_authors['rat_count'] = rat_count\ndist_authors['lan_code'] = lan_list","17183448":"# Top 10 authors based on the occurence and most ratings \nfig, axes = plt.subplots(1, 2, figsize=(12,4))\n\nax = sns.barplot(data=dist_authors.sort_values(by='freq', ascending=False).head(10), x=\"freq\", y=\"author\", ax = axes[0])\nax.set(xlabel='Occurence', title='Top 10 authors based on how many books written')\n\nax = sns.barplot(data=dist_authors.sort_values(by='rat_count', ascending=False).head(10), x=\"rat_count\", y=\"author\", ax = axes[1])\nax.set(xlabel='ratings_count', title='Top 10 authors based on most rated')\n\nplt.tight_layout()\nplt.show()","196d35d3":"# Hide Warning Message\nimport warnings\nwarnings.filterwarnings('ignore')\n\n# Top 10 Books with the most ratings count from top 5 language_code \ntop_5_lan = list(lan_code.loc[:4,:]['index'])\nfig, axes = plt.subplots(5, 1, figsize=(10,16))\n\nfor i, lan in enumerate(top_5_lan):\n    dt = df_new[df_new.lan_code2 == lan].sort_values(by='ratings_count', ascending=False).head(10)\n    ax = sns.barplot(data=dt, x='ratings_count', y='title', ax=axes[i])\n    ax.set_title('Top 10 Books with most ratings in '+lan+' language')\nplt.tight_layout()","47320188":"fig, axes = plt.subplots(1, 3, figsize=(16,4))\n\nfor i, lan in enumerate(top_5_lan[:3]):\n    dt = dist_authors[dist_authors['lan_code'] == lan].sort_values(by='rat_count', ascending=False).head(10)\n    ax = sns.barplot(data=dt, x='rat_count', y='author', ax=axes[i])\n    ax.set_title('Top 10 Author with most ratings in '+lan+' language')\n\nplt.tight_layout()\nfig, axes = plt.subplots(1, 2, figsize=(10,4))\n\nfor i, lan in enumerate(top_5_lan[3:]):\n    dt = dist_authors[dist_authors['lan_code'] == lan].sort_values(by='rat_count', ascending=False).head(10)\n    ax = sns.barplot(data=dt, x='rat_count', y='author', ax=axes[i])\n    ax.set_title('Top 10 Author with most ratings in '+lan+' language')\nplt.tight_layout()","5cfe9208":"# Create publisher dataframe with ratings_count and its language code\ndist_publisher = \\\ndf_new.groupby(['publisher', 'lan_code2'])['ratings_count'].sum().reset_index().\\\nsort_values(by='ratings_count', ascending=False)\n\nfig, axes = plt.subplots(1, 3, figsize=(16,4))\n\nfor i, lan in enumerate(top_5_lan[:3]):\n    dt = dist_publisher[dist_publisher['lan_code2'] == lan].sort_values(by='ratings_count', ascending=False).head(10)\n    ax = sns.barplot(data=dt, x='ratings_count', y='publisher', ax=axes[i])\n    ax.set_title('Top 10 Publishers with most ratings in '+lan+' language')\nplt.tight_layout()\n    \nfig, axes = plt.subplots(1, 2, figsize=(10,4))\n\nfor i, lan in enumerate(top_5_lan[3:]):\n    dt = dist_publisher[dist_publisher['lan_code2'] == lan].sort_values(by='ratings_count', ascending=False).head(10)\n    ax = sns.barplot(data=dt, x='ratings_count', y='publisher', ax=axes[i])\n    ax.set_title('Top 10 Publishers with most ratings in '+lan+' language')\nplt.tight_layout()","93f83969":"# Average rating for top 10 author with the most books\nfig, axes = plt.subplots(1, 2, figsize=(12,5))\n\n# Author\ntop_10_authors = list(dist_authors.sort_values(by='freq', ascending=False).head(10)['author'])\nax = sns.boxplot(data=df_new[df_new.authors.isin(top_10_authors)], x='average_rating', y='authors', ax=axes[0])\nax.set(title='Average Rating distribution for Top 10 Authors')\n\n# Publisher\ntop_10_publishers = list(df_new.groupby('publisher').count()['title'].reset_index()\\\n.sort_values(by='title', ascending=False).head(10).publisher)\n\nax = sns.boxplot(data = df_new[df_new.publisher.isin(top_10_publishers)], x='average_rating', y='publisher', ax=axes[1])\nax.set(title='Average Rating distribution for Top 10 Publisher')\n\nplt.tight_layout()\nplt.show()\n","654ab956":"# Average num_pages per average_rating\nfig, axes = plt.subplots(1, 3, figsize=(18,4))\npage_per_rating = df_new[['num_pages', 'average_rating']]\npage_per_rating['rating_cat'] = pd.cut(page_per_rating['average_rating'], 5)\ngroup_page = page_per_rating.groupby('rating_cat').agg([min, np.mean, np.median, max])['num_pages']\n\nstats = [['mean', 'median'], 'min', 'max']\n\nfor i, stats in enumerate(stats):\n    ax = group_page[stats].plot(ax=axes[i])\n    if i == 0:\n        ax.set(title='Mean and Median of Num Pages per Rating')\n    else:\n        ax.set(title=stats+' of Num Pages per Rating')\n    ax.set_xticklabels(ax.get_xticklabels(), rotation=40)","75a47024":"# Books per bins rating with num_pages equal 0\na = page_per_rating.query('num_pages == 0').groupby(['rating_cat']).count()['num_pages'].reset_index()\nzero_pages = sum(a['num_pages'])\ndisplay(a)\nprint(\"There are\", zero_pages, \"books with zero num of pages or\", round(zero_pages*100\/len(df_new), 2), \"percent of total books\")","b366a5d9":"# Show table with average num_pages per rating_category without books with zero num_pages\npage_per_rating.query('num_pages != 0').groupby('rating_cat').agg([min, np.mean, np.median, max])['num_pages']","820725ee":"# Average text reviews count per average_rating\nfig, axes = plt.subplots(1, 3, figsize=(18,4))\npage_per_rating = df_new[['text_reviews_count', 'average_rating']]\npage_per_rating['rating_cat'] = pd.cut(page_per_rating['average_rating'], 5) # Create bins of average_rating\ngroup_page = page_per_rating.groupby('rating_cat').agg([min, np.mean, np.median, max])['text_reviews_count']\n\nstats = [['mean', 'median'], 'min', 'max']\n\nfor i, stats in enumerate(stats):\n    ax = group_page[stats].plot(ax=axes[i])\n    if i == 0:\n        ax.set(title='Mean and Median of text reviews per Rating')\n    else:\n        ax.set(title=stats+' of Num text reviews per Rating')\n    ax.set_xticklabels(ax.get_xticklabels(), rotation=40)","c7bd454e":"# Scatter plot \nfig, axes = plt.subplots(1, 3, figsize=(16, 4))\n\nstats = ['num_pages', 'ratings_count', 'text_reviews_count']\nfor i, st in enumerate(stats):\n    ax = sns.scatterplot(data=df_new, x=\"average_rating\", y=st, ax = axes[i])\n    ax.set_title('Average Rating and '+st)\n    \nplt.tight_layout()\nplt.show()","62bd56a8":"# Scatter plot \nfig, axes = plt.subplots(1, 2, figsize=(16, 4))\n\nstats = ['num_pages', 'text_reviews_count']\nfor i, st in enumerate(stats):\n    ax = sns.scatterplot(data=df_new, x=\"ratings_count\", y=st, ax = axes[i])\n    ax.set_title('Ratings Count and '+st)\n    \nplt.tight_layout()\nplt.show()","ca9ca417":"# Analyze Stephen King\ntop_3_authors = ['Stephen King', 'J.R.R. Tolkien', 'J.K. Rowling']\ndf_new['author_ind'] = df_new['authors'].str.split('\/')","932be2ee":"author_df = df_new[['author_ind', 'title', 'average_rating', 'publish_year', 'ratings_count']]\n\n# Get index for each author\nfor aut in top_3_authors:\n    is_author = author_df['author_ind'].apply(lambda x: True if aut in x else False)\n    author_df.loc[list(author_df[is_author].index), 'ind_author'] = aut","52ba4297":"# Subplots average rating over the year for top 3 authors\nfig, axes = plt.subplots(1, 3, figsize=(16, 4))\nfig.subplots_adjust(top=0.8)\n\n# Group author and published year to aggregate average rating and ratings count\nrating_author = author_df.groupby(['ind_author', 'publish_year']).mean()['average_rating'].reset_index()\nrat_count_author = author_df.groupby(['ind_author', 'publish_year']).mean()['ratings_count'].reset_index()\n\nfor i, aut in enumerate(top_3_authors):\n    ax = sns.lineplot(data=rating_author.query('ind_author == \"'+aut+'\"'),\\\n                      x='publish_year', y='average_rating', ax=axes[i])\n    ax.set_title(aut)\n\nfig.suptitle('\\n'.join(['Average Ratings over the year']), y=1.08)\nplt.tight_layout()\nplt.show()\n\n# Subplots for average of most ratings count over the year for top 3 authors\nfig, axes = plt.subplots(1, 3, figsize=(16, 4))\nfig.subplots_adjust(top=0.8)\n\nfor i, aut in enumerate(top_3_authors):\n    ax = sns.lineplot(data=rat_count_author.query('ind_author == \"'+aut+'\"'),\\\n                    x='publish_year', y='ratings_count', ax=axes[i])\n    ax.set_title(aut)\n\nfig.suptitle('\\n'.join(['Average Ratings Count over the year']), y=1.08)\nplt.tight_layout()\nplt.show()","b54f80d7":"Authors in Japanese are unreadable. It's because the font doesn't support the original japanese alphabet.Let's just leave it.","d4df169a":"There aren't missing values for each columns. But the num_pages column is weird. Let's fix this","3c6771b4":"Let's take top 3 authors either based on the how many books written or most ratings given. We will analyze the performance of these 3 authors in the later analysis. Let's take Stephen King, J.K. Rowling and J.R.R. Tolkien. ","9a425e63":"**Check the Top 10 Title of books of every language**","52a46d71":"# Goodreads Dataset - Exploratory Data Analysis","88a9fc74":"J.R.R. Tolkien seems to be the author with the best average rating while Sandra Brown is the worst. While in the publisher side, VIZ Media LLC leads the average rating followed by harper collins. \n\nThe rest of the publishers doesn't have a significant median rating difference.","f35a089f":"From the table above, we can see that books with the higher rating tends to have more pages. The mean and median value is not much different, this means that the data is not skewed.\n\nBut we can still notice weird thing in our data, there is a book with only 1 page and it's a little surprising. We can't really justify the right amount of pages in the book. For now let's just leave it and continue our exploration.","f67b48a4":"Most of the books are in english and other form of english such as en-US, en-GB and en-CA. We can say based on above bar plot that mroe than 90% books are in english language.\n\nFor further exploration, let's just focus on top 5 of the language and let's consider all english form as one language which we will label it as 'eng' only.","f1a2b22b":"**Average Rating distribution of top 10 authors and publishers**","90d0c83d":"There are 11123 data with bookID, isbn and isbn13 as a unique values. Let's remove it since it won't give us anything to explore.","45c468d2":"# Performance of top 3 authors","e3e0b6dc":"**Let's see the distribution of publish time**","5d10ee07":"From the first row plots, we can see that Stephen King is the most inconsistent writer over the time with the highest rating is 4.3. While ratings for Tolkien's book has improved over the year, Rowling's book ratings also improved but only until 2005. Rowling's books has regressed since 2005.\n\nFrom the second row plots, Stephen King's books received the most ratings count in the 1980 and hasn't received a lot of ratings after 1996. Tolkien's book received the most ratings count in between 2002-2003 and Rowling as a latest author between them received a lot of ratings in the year 2004 and 2006. Rowling's book seems more suitable for the younger market.","b1557b24":"In this analysis, we focus on see the distribution of every feature.","fd8bb3b3":"So most authors only write one book, same things happens to the publishers although there are a lot of publishers that publish around 20 books while other larger part of authors write around 10 books.\n\nMost Reviews of a book has less than 1000 words and most books has only less than 100000 ratings ","3d525525":"**Top 10 Authors based on how many books written and how many ratings given**","651e34d2":"So there are only 76 books or 0.68 percent of total books with zero num of pages in this data. We can remove these data in the preprocessing step. For now on let's continue our exploration on the distribution of num_pages per rating category without data with zero num_pages","273df0af":"# Relationship Between data","06747c5c":"# Preview of Data","82668e97":"**That's all for the EDA, If you like the kernel, feel free to upvote! I'm open for all feedbacks and improvement. Thank you for reading.**","5764c25a":"# Univariate Analysis","ec528689":"There is a positive correlation between text_reviews count and ratings_count but it's hard to tell about num_pages and ratings_count.","c2497952":"**Top 10 Authors based on every the how many rating given in top 5 languages**","4b432cd3":"The minimum of text review per book is zero which means no written text review at all.\n\nFrom the mean and median of text reviews count per rating category we can notice there is a skewed distribution to the right which means that the mean is greater than median value.","8537d7e5":"We can notice something weird, the minimum page of books with ratings above 2 is zero. This is not possible since there won't be a book without pages. Therefore let's count how many books with zero pages in this data.","743dac22":"We can see that most of the books has a good average ratings that lies between 3.7 to 4.3 and most of the books has only around 0 to 500 number of pages. For the rest of the plots let's minimize the x-axis limit so we can see a whole details","c1a306ef":"In this notebook, our objective is to explore every feature of a dataset that tells us about the ratings information for every book. We do our exploration mostly by data visualization since it's easier to find the conclusion of the data based on visual","636ba837":"**Text Reviews Count**","cfce4af3":"Most books in this goodreads review is published around 2000-2010. Most books also published in the last quarter of the month which is September followed by April and January while books are less published in December. \n\nLast, most books is published in the beginning of the month and followed by the middle of the month as the second most.","e0d39835":"**Num Pages per Rating**","9eb425a8":"As you can see from all barplots, books with most ratings in english langauges are mostly Harry Potter books but the first most ratings book is Twilight. In spanish, Jurrasic Park dominates the most ratings,  in french , Christine is the most, in german its Das Parfum which translated into Perfume the story of murderer and last in Japanese mostly are comic books with Death Note franchise dominate the Top 10.","d23ff0f2":"# **Data exploration with visualization**","05e51694":"Seems like there is no correlation between average_rating and num_pages, ratings_count and text_reviews_count","5ab8560a":"**Top 10 Books based on the occurence and how many ratings given**","b40ef629":"**Top 10 Publishers based on how many ratings given in top 5 languages**"}}