{"cell_type":{"dc1a987f":"code","3280cbf9":"code","f79b80e5":"code","e603c141":"code","5d0c0410":"code","1e183fc4":"code","2e6c4b34":"code","a293ad00":"code","b0f67ee3":"code","fa2ed19e":"code","eb45d4a6":"code","f2e32ac9":"code","1f7a9d5b":"code","f4228134":"code","d49d350d":"code","1a895e89":"code","f907baf6":"code","02fa9633":"code","02b3f5d4":"code","c3c90720":"code","104f21c2":"code","c7542a75":"code","5664eea6":"code","a0f6b5a6":"code","0f61d7bc":"code","0d41fcfd":"code","4f0bde11":"code","d6724f6e":"code","a56d26e3":"code","57542216":"code","2e9fdaeb":"code","2183daf8":"markdown","ba351909":"markdown","76df1817":"markdown","4ab38117":"markdown","29b8f472":"markdown"},"source":{"dc1a987f":"# Importa\u00e7\u00e3o das bibliotecas que ser\u00e3o utilizada\n# Importing needed libraries\nimport pandas as pd\nimport numpy as np\nimport seaborn as sns\nimport matplotlib.pyplot as plt\nimport os\nfrom os import listdir\nfrom os.path import isfile, join","3280cbf9":"# Mudar o diretorio de trabalho para o diretorio onde estao os dados\n# Change the working directory to where on the data is\nos.chdir(\"\/kaggle\/input\/estacao-met-manaus\")","f79b80e5":"# Retorna uma lista com os arquivos\n# Return a list of files\nfiles = [f for f in listdir(os.getcwd()) if isfile(join(os.getcwd(), f))]\nfiles","e603c141":"# Criando um Dataframe vazio para receber todos dos dados\n# Create a empty Dataframe to store all data\ndf = pd.DataFrame()  ","5d0c0410":"# Lista para nomes das colunas, necess\u00e1rio retirar caracteres\n# List of columns names, needed to extract all missing characters\nrenomear_colunas = [\"DATA (YYYY-MM-DD)\",\"HORA (UTC)\",\n                    \"PRECIPITACAO TOTAL, HORARIO (mm)\",\n                    \"PRESSAO ATMOSFERICA AO NIVEL DA ESTACAO, HORARIA (mB)\",\n                    \"PRESSAO ATMOSFERICA MAX.NA HORA ANT.(mB)\",\n                    \"PRESSAO ATMOSFERICA MIN. NA HORA ANT.(mB)\",\n                    \"RADIACAO GLOBAL (W\/m2)\",\n                    \"TEMPERATURA DO AR - BULBO SECO, HORARIA (C)\",\n                    \"TEMPERATURA DO PONTO DE ORVALHO (C)\",\n                    \"TEMPERATURA MAXIMA NA HORA ANT.(C)\",\n                    \"TEMPERATURA MINIMA NA HORA ANT.(C)\",\n                    \"TEMPERATURA ORVALHO MAX. NA HORA ANT.(C)\",\n                    \"TEMPERATURA ORVALHO MIN. NA HORA ANT.(C)\",\n                    \"UMIDADE REL. MAX. NA HORA ANT.(%)\",\n                    \"UMIDADE REL. MIN. NA HORA ANT.(%)\",\n                    \"UMIDADE RELATIVA DO AR, HORARIA(%)\",\n                    \"VENTO, DIRECAO HORARIA (gr)\",\n                    \"VENTO, RAJADA MAXIMA (m\/s)\",\n                    \"VENTO, VELOCIDADE HORARIA (m\/s)\",\n                    \"Unnamed\"]\n# O ultimo item da lista, serve para capturar os dados que ser\u00e3o importados  j\u00e1 que cada linha dos arqvuiso termin\u00e7\u00e3o com um ;\n# The last item of the list is needed to catch all data, there is a wrong format in the source file","1e183fc4":"# Percorre a lista de arquivos csv e fazendo o append no DataFrame\n# Run through the file list, storing all data in the Dataframe\nfor i in files:\n    if(i[-3:])==\"CSV\":\n        df = df.append(pd.read_csv(i,sep=\";\", encoding=\"cp860\", skiprows=8, names = renomear_colunas, header = 0),ignore_index = True)","2e6c4b34":"# Excluindo coluna de lixo\n# Deleting the last column\ndf.drop(\"Unnamed\", axis=1, inplace = True)","a293ad00":"df.columns","b0f67ee3":"df.index","fa2ed19e":"df.shape","eb45d4a6":"df.head(2)","f2e32ac9":"df.tail(2)","1f7a9d5b":"df.sample()","f4228134":"df.info()","d49d350d":"df.describe()","1a895e89":"# Altera , para . para converter de str para float\n# Replace , to . to convert from str to float\ndf.replace(\",\",\".\", regex = True, inplace = True)","f907baf6":"# Altera \/ para - para converter de str para datetime\n# Replace \/ to - to convert from str to datetime\ndf[\"DATA (YYYY-MM-DD)\"].replace(\"\/\",\"-\", regex = True, inplace = True)","02fa9633":"# Uniformizando as horas\n# Correct the hour format\ndf[\"HORA (UTC)\"].replace(\" UTC\",\"\", regex = True, inplace = True)","02b3f5d4":"# Criando coluna com Data e Hora para cria\u00e7\u00e3o do tipo Datetime\ndf[\"DATA_HORA\"] = df[\"DATA (YYYY-MM-DD)\"] +\" \" + df[\"HORA (UTC)\"]","c3c90720":"# convertando para datetime\n# Convert to Datetime\ndf[\"DATA_HORA\"] = pd.to_datetime(df[\"DATA_HORA\"], errors = \"ignore\", format=\"%Y-%m-%d %H:%M\")","104f21c2":"# Ordenando\n# Sorting\ndf.sort_values(by=[\"DATA_HORA\"], inplace = True)","c7542a75":"# Verificando a ordena\u00e7\u00e3o das datas\n# Checking \n\ndf['DATA_HORA']","5664eea6":"# Altera os dados -9999 para NaN para uma melhor estrag\u00e9gia de substitui\u00e7\u00e3o dos dados faltantes\n# Replace -9999 to Nan\ndf.replace(\"-9999.000000\", np.NaN, inplace=True)\ndf.replace(\"-9999\", np.NaN, inplace=True)\ndf.replace(-9999, np.NaN, inplace=True)","a0f6b5a6":"#df.dropna(axis = 0, inplace = True, how = \"all\")","0f61d7bc":"# Reset do index\ndf.reset_index(drop = True)\n# Quando o reset_index \u00e9 usado, o indice antigo \u00e9 adiconado ao Dataframe como uma coluna, portanto precisa ser excluido utilizando o parametro drop = True","0d41fcfd":"df[\"PRECIPITACAO TOTAL, HORARIO (mm)\"] = pd.to_numeric(df[\"PRECIPITACAO TOTAL, HORARIO (mm)\"])\n\ndf[\"PRESSAO ATMOSFERICA AO NIVEL DA ESTACAO, HORARIA (mB)\"] = pd.to_numeric(df[\"PRESSAO ATMOSFERICA AO NIVEL DA ESTACAO, HORARIA (mB)\"])\n\ndf[\"PRESSAO ATMOSFERICA MAX.NA HORA ANT.(mB)\"] = pd.to_numeric(df[\"PRESSAO ATMOSFERICA MAX.NA HORA ANT.(mB)\"])\n\ndf[\"PRESSAO ATMOSFERICA MIN. NA HORA ANT.(mB)\"] = pd.to_numeric(df[\"PRESSAO ATMOSFERICA MIN. NA HORA ANT.(mB)\"])\n\ndf[\"RADIACAO GLOBAL (W\/m2)\"] = pd.to_numeric(df[\"RADIACAO GLOBAL (W\/m2)\"])\n\ndf[\"TEMPERATURA DO AR - BULBO SECO, HORARIA (C)\"] = pd.to_numeric(df[\"TEMPERATURA DO AR - BULBO SECO, HORARIA (C)\"])\n\ndf[\"TEMPERATURA DO PONTO DE ORVALHO (C)\"] = pd.to_numeric(df[\"TEMPERATURA DO PONTO DE ORVALHO (C)\"])\n\ndf[\"TEMPERATURA MAXIMA NA HORA ANT.(C)\"] = pd.to_numeric(df[\"TEMPERATURA MAXIMA NA HORA ANT.(C)\"])\n\ndf[\"TEMPERATURA MINIMA NA HORA ANT.(C)\"] = pd.to_numeric(df[\"TEMPERATURA MINIMA NA HORA ANT.(C)\"])\n\ndf[\"TEMPERATURA ORVALHO MAX. NA HORA ANT.(C)\"] = pd.to_numeric(df[\"TEMPERATURA ORVALHO MAX. NA HORA ANT.(C)\"])\n\ndf[\"TEMPERATURA ORVALHO MIN. NA HORA ANT.(C)\"] = pd.to_numeric(df[\"TEMPERATURA ORVALHO MIN. NA HORA ANT.(C)\"])\n\ndf[\"VENTO, RAJADA MAXIMA (m\/s)\"] = pd.to_numeric(df[\"VENTO, RAJADA MAXIMA (m\/s)\"])\n\ndf[\"VENTO, VELOCIDADE HORARIA (m\/s)\"] = pd.to_numeric(df[\"VENTO, VELOCIDADE HORARIA (m\/s)\"])","4f0bde11":"df.info()","d6724f6e":"df.drop([\"PRESSAO ATMOSFERICA AO NIVEL DA ESTACAO, HORARIA (mB)\",\"PRESSAO ATMOSFERICA MAX.NA HORA ANT.(mB)\"], inplace = True, axis = 1)\ndf.drop([\"PRESSAO ATMOSFERICA MIN. NA HORA ANT.(mB)\",\"TEMPERATURA DO AR - BULBO SECO, HORARIA (C)\", \"TEMPERATURA DO PONTO DE ORVALHO (C)\"], inplace = True, axis = 1)\ndf.drop([\"RADIACAO GLOBAL (W\/m2)\",\"TEMPERATURA ORVALHO MAX. NA HORA ANT.(C)\",\"TEMPERATURA ORVALHO MIN. NA HORA ANT.(C)\"], inplace = True, axis =1)\ndf.drop([\"UMIDADE REL. MAX. NA HORA ANT.(%)\",\"UMIDADE REL. MIN. NA HORA ANT.(%)\",\"VENTO, DIRECAO HORARIA (gr)\"], inplace = True, axis =1)\ndf.drop([\"UMIDADE RELATIVA DO AR, HORARIA(%)\",\"VENTO, RAJADA MAXIMA (m\/s)\",\"VENTO, VELOCIDADE HORARIA (m\/s)\"], inplace = True, axis =1)\ndf.drop([\"DATA (YYYY-MM-DD)\", \"HORA (UTC)\"], inplace = True, axis = 1)","a56d26e3":"df.info()","57542216":"#plt(figsize=(20,10))\n#sns.relplot(data=df[\"TEMPERATURA MAXIMA NA HORA ANT.(C)\"], kind=\"line\")\n#fig, ax = plt.subplots()\n\nplt.figure(figsize=(30,15))\nsns.barplot(data=df, x=\"DATA_HORA\", y=\"TEMPERATURA MAXIMA NA HORA ANT.(C)\")\nplt.show()\n#fig.savefig(\"test.png\")","2e9fdaeb":"# Salvando o arquivo path (kaggle\/working)\n# Saving the file on the path (kaggle\/working)\n#os.chdir(\"..\/..\/working\/\")\n#df.to_csv(\"Total.csv\")","2183daf8":"### Convertendo as colunas que n\u00e3o foram detectadas corretamente para formato numerico","ba351909":"## Como ficou","76df1817":"# **Work in progress**","4ab38117":"# Primeira Visualiza\u00e7\u00e3o dos dados\n# First Data Visualization","29b8f472":"## Vamos come\u00e7ar a corrigir os dados e as formata\u00e7\u00f5es"}}