{"cell_type":{"483c0fd8":"code","d43ce537":"code","96a7ef40":"code","60ebeb4d":"code","ba2edc27":"code","341ebab1":"code","902ad31c":"code","89a588c9":"code","fa1c684a":"code","fa72a71e":"code","56744d4f":"code","b0a44ab4":"code","a29d67fe":"code","369fd2a8":"code","90e067e0":"code","fde67b5a":"code","4c6d2dec":"code","ac28178d":"code","47bd8812":"code","cf7f8f66":"code","918dd558":"markdown","2e2d7904":"markdown","5cb7694f":"markdown","4928ec6b":"markdown","d435df18":"markdown","652ad61f":"markdown","33477087":"markdown","ab4c203e":"markdown","e54ab38b":"markdown","b436541a":"markdown","01d67360":"markdown","8a13724d":"markdown","f718d739":"markdown"},"source":{"483c0fd8":"import numpy as np # \u6570\u7ec4\u5e38\u7528\u5e93\nimport pandas as pd # \u8bfb\u5165csv\u5e38\u7528\u5e93\nfrom patsy import dmatrices # \u53ef\u6839\u636e\u79bb\u6563\u53d8\u91cf\u81ea\u52a8\u751f\u6210\u54d1\u53d8\u91cf\nfrom sklearn.linear_model import LogisticRegression # sk-learn\u5e93Logistic Regression\u6a21\u578b\nfrom sklearn.model_selection import train_test_split, cross_val_score # sk-learn\u5e93\u8bad\u7ec3\u4e0e\u6d4b\u8bd5\nfrom sklearn import metrics # \u751f\u6210\u5404\u9879\u6d4b\u8bd5\u6307\u6807\u5e93\nimport matplotlib.pyplot as plt # \u753b\u56fe\u5e38\u7528\u5e93","d43ce537":"data = pd.read_csv('..\/input\/train.csv')","96a7ef40":"data = data.drop(['Ticket', 'Cabin'], axis = 1)\ndata = data.dropna()","60ebeb4d":"print(len(data.index))\nprint(data.shape)","ba2edc27":"data.Survived.value_counts().plot(kind='bar')\nplt.xlabel('Survived')\nplt.show()","341ebab1":"female = data.Survived[data.Sex == 'female'].value_counts().sort_index()\nfemale.plot(kind='barh', color='blue', label='Female')\nplt.show()","902ad31c":"male = data.Survived[data.Sex == 'male'].value_counts().sort_index()\nmale.plot(kind='barh',label='Male', color='red')\nplt.show()","89a588c9":"highclass = data.Survived[data.Pclass != 3].value_counts().sort_index()\nhighclass.plot(kind='bar',label='Highclass', color='red', alpha=0.6)\nplt.show()","fa1c684a":"lowclass = data.Survived[data.Pclass == 3].value_counts().sort_index()\nlowclass.plot(kind='bar',label='Highclass', color='Blue', alpha=0.6)\nplt.show()","fa72a71e":"y, X = dmatrices('Survived~ C(Pclass) + C(Sex) + Age + C(Embarked)', data = data, return_type='dataframe')\ny = np.ravel(y)\nX.head()","56744d4f":"model = LogisticRegression()","b0a44ab4":"model.fit(X, y)","a29d67fe":"model.score(X, y)","369fd2a8":"1 - y.mean() #null model","90e067e0":"pd.DataFrame(list(zip(X.columns, np.transpose(model.coef_))))","fde67b5a":"test_data = pd.read_csv('..\/input\/test.csv')\ntest_data.head()","4c6d2dec":"test_data['Survived'] = 1\ntest_data.loc[np.isnan(test_data.Age), 'Age'] = np.mean(data['Age'])\ntest_data.head()","ac28178d":"ytest, Xtest = dmatrices('Survived~ C(Pclass) + C(Sex) + Age + C(Embarked)', data = test_data, return_type='dataframe')","47bd8812":"pred = model.predict(Xtest).astype(int)\nsolution = pd.DataFrame(list(zip(test_data['PassengerId'], pred)), columns=['PassengerID', 'Survived'])\nsolution.head()","cf7f8f66":"solution.to_csv('.\/my_prediction.csv', index = False)","918dd558":"\u89c2\u5bdf\u4f4e\u7b49\u8231\u9003\u751f\u60c5\u51b5","2e2d7904":"\u5220\u9664\u4e0d\u9700\u8981\u7684\u5217\u4ee5\u53ca\u542b\u6709NA\u503c\u7684\u884c","5cb7694f":"\u5bf9\u6d4b\u8bd5\u6570\u636e..\/input\/test.csv\u751f\u6210\u9884\u6d4b\uff0c\u5c06\u7ed3\u679c\u5199\u5165.\/my_prediction.csv","4928ec6b":"\u89c2\u5bdf\u6a21\u578b\u7cfb\u6570\uff0c\u5373\u6bcf\u79cd\u56e0\u7d20\u5bf9\u4e8e\u9884\u6d4b\u9003\u751f\u7684\u91cd\u8981\u6027","d435df18":"> \u4ece..\/input\/train.csv\u8bfb\u5165\u6570\u636e","652ad61f":"\u89c2\u5bdf\u7537\u6027\u9003\u751f\u4eba\u6570","33477087":"\u89c2\u5bdf\u975e\u4f4e\u7b49\u8231\u9003\u751f\u60c5\u51b5","ab4c203e":"dmatrices\u5c06\u6570\u636e\u4e2d\u7684\u79bb\u6563\u53d8\u91cf\u53d8\u6210\u54d1\u53d8\u91cf\uff0c\u5e76\u6307\u660e\u7528Pclass, Sex, Embarked\u6765\u9884\u6d4bSurvived","e54ab38b":"\u8f93\u51fa\u7a7a\u6a21\u578b\u7684\u6b63\u786e\u7387\uff1a\u7a7a\u6a21\u578b\u9884\u6d4b\u6240\u6709\u4eba\u90fd\u672a\u9003\u751f","b436541a":"\u89c2\u5bdf\u9003\u751f\u4eba\u6570\u4e0e\u672a\u9003\u751f\u4eba\u6570","01d67360":"\u9884\u6d4bTitanic\u4e58\u5ba2\u9003\u751f","8a13724d":"\u89c2\u5bdf\u5973\u6027\u9003\u751f\u4eba\u6570","f718d739":"\u8f93\u51fa\u8bad\u7ec3\u51c6\u786e\u7387"}}