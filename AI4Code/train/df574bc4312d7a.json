{"cell_type":{"289dac90":"code","cb538497":"code","1b56130e":"code","b4866cb5":"code","d0dd830b":"code","4bc35655":"code","27e54dc3":"code","26e8ba11":"code","f1373d30":"code","2d1f27e9":"code","c6f65d7f":"code","ea2479a0":"code","8fae9f5f":"code","61a3495e":"markdown","2c981123":"markdown"},"source":{"289dac90":"# all we need is bigquery\nfrom google.cloud import bigquery\n\n# there's no need for passing any credentials since access is managed by kaggle\nbq = bigquery.Client()","cb538497":"# just write your sql query\nsql_query = \"\"\"\nSELECT\n  DISTINCT(word)\nFROM\n  `bigquery-public-data.samples.shakespeare`\nWHERE\n  word LIKE '%ing' OR word LIKE '%ed';\n\"\"\"\n# and run the query to get the result in a dataframe\nresults = bq.query(sql_query).to_dataframe()","1b56130e":"# now this result dataframe can be used as you want\nresults.head(10)","b4866cb5":"# let's try another sample query\nall_python_repos_activity_query = \"\"\"\nSELECT\n  *\nFROM\n  `bigquery-public-data.samples.github_timeline`\nWHERE\n  repository_url LIKE '%python%'\n\"\"\"\nall_python_repos_activity_df = bq.query(all_python_repos_activity_query).to_dataframe()","d0dd830b":"# once you get the response dataframe, you can keep utilizing it as you would normally use pandas dataframe\nall_python_repos_activity_df.head(10)","4bc35655":"# let's do a normal describe\nall_python_repos_activity_df.describe()","27e54dc3":"# let's get unique values in a column\nall_python_repos_activity_df['repository_url'].unique()","26e8ba11":"# get smaller dataframe which contains one row per repository URL\nunique_repositories_df = all_python_repos_activity_df.drop_duplicates(subset='repository_url', keep='last')","f1373d30":"unique_repositories_df['repository_watchers'].plot()","2d1f27e9":"unique_repositories_df.plot.scatter('repository_forks', 'repository_open_issues')","c6f65d7f":"repo_languages_df = unique_repositories_df.groupby(['repository_language']).mean()\nrepo_languages_df.head(100)","ea2479a0":"repo_languages_df['repository_forks'].plot.bar()","8fae9f5f":"repo_languages_df['repository_size'].plot.density()","61a3495e":"Querying to BQ is free on Kaggle but otherwise has an associated cost with it. It's always advised to copy your data to a dataframe rather than querying multiple times directy to the database. Beware of your memory limits though. Also, don't do `SELECT *`, always include the columns that you want in the dataframe.\n\nHappy hacking!","2c981123":"# BigQuery: Getting started with BigQuery data on Kaggle\nBigQuery (https:\/\/cloud.google.com\/bigquery) is a fully managed analytics database provided by Google Cloud. To get started with BQ data on kaggle, all you need is `google-cloud` and some understanding of SQL. Learn more about Standard SQL here: https:\/\/cloud.google.com\/bigquery\/docs\/reference\/standard-sql\/\n\nGeneral structure of BigQuery database is:\n```\nProject > n(dataset) > n(table) > n(partitions)\n```\nMostly you can disregrad paritions but then are helpful in logically storing your data and controlling cost on queries.\n\n"}}