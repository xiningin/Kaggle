{"cell_type":{"bb10eb3d":"code","cad90494":"code","f6b7eaa7":"code","e5fbdaed":"code","6a380736":"code","7fc9e114":"code","3770eed2":"code","432b7869":"code","27d18073":"code","74efd626":"code","326c3a8f":"code","811be879":"code","0742bbd8":"code","4a602638":"code","c21d00e0":"code","88ff513c":"code","ca7ff9e6":"code","b0bab997":"code","86a4b50e":"code","12d2269c":"code","94c22e8a":"code","94730b3b":"code","5a025aa1":"code","baf83b91":"markdown","455d3ec7":"markdown","05c7c6d3":"markdown","c910db5a":"markdown","71d412b0":"markdown","c6ca9bf5":"markdown","baeb10f0":"markdown","aa0a744a":"markdown","4a821cf3":"markdown","843184f8":"markdown","0569e1b8":"markdown","24479a0d":"markdown","8747fabc":"markdown","310e65d5":"markdown","f570d6e8":"markdown","1bba8361":"markdown","00313009":"markdown","0bf5746b":"markdown","b4654ca8":"markdown","d68674bc":"markdown"},"source":{"bb10eb3d":"# This Python 3 environment comes with many helpful analytics libraries installed\n# It is defined by the kaggle\/python docker image: https:\/\/github.com\/kaggle\/docker-python\n# For example, here's several helpful packages to load in \n\nimport numpy as np # linear algebra\nimport pandas as pd # data processing, CSV file I\/O (e.g. pd.read_csv)\nimport sqlite3\n\n# Input data files are available in the \"..\/input\/\" directory.\n# For example, running this (by clicking run or pressing Shift+Enter) will list the files in the input directory\n\nimport os\nprint(os.listdir(\"..\/input\"))\n\nimport matplotlib.pyplot as plt\n%matplotlib inline\n# Any results you write to the current directory are saved as output.","cad90494":"con = sqlite3.connect('..\/input\/database.sqlite')\n\nartists = pd.read_sql('SELECT * FROM artists', con)\ncontent = pd.read_sql('SELECT * FROM content', con)\ngenres = pd.read_sql('SELECT * FROM genres', con)\nlabels = pd.read_sql('SELECT * FROM labels', con)\nyears = pd.read_sql('SELECT * FROM years', con)\nreviews = pd.read_sql('SELECT * FROM reviews', con)\n\ncon.close()","f6b7eaa7":"df1 = pd.merge(genres,reviews,on='reviewid')\ndf2 = pd.merge(labels,df1,on='reviewid')\ndf3 = pd.merge(content,df2,on='reviewid')\ndf_final = pd.merge(years,df3,on='reviewid')\ndf_final.head()","e5fbdaed":"df_final.drop(['url','author_type','pub_date','pub_weekday','pub_day','pub_month'],axis=1,inplace=True)\ndf_final.dropna(inplace=True)\ndf_final['year'] = df_final['year'].astype(int)\ndf_final['pub_year'] = df_final['pub_year'].astype(int)\ndf_final.head()","6a380736":"df_final[df_final.duplicated('reviewid', keep=False)].sort_values('reviewid').head(5)","7fc9e114":"df_final.drop_duplicates('reviewid',inplace=True)\ndf_final.shape","3770eed2":"df_final['text_len'] = df_final['content'].apply(lambda x: len(x))\ndf_final['text_words'] = df_final['content'].apply(lambda x: len(x.split()))\ndf_final['uniq_words'] = df_final['content'].apply(lambda x: len(set(x.split())))\ndf_final['lex_den'] = 100*df_final['uniq_words']\/df_final['text_words']\ndf_final.head()","432b7869":"df_final[['text_len','text_words','uniq_words','lex_den']].hist(sharey=True, layout=(2, 2), figsize=(14, 12), color='b', alpha=.75, grid=False,bins=50);","27d18073":"df_final.author.value_counts()[:10].plot(kind='barh', figsize=(8,6));\nplt.xlabel('Number of reviews',fontsize=16)\nplt.ylabel('Author',fontsize=16)\nplt.title('Top 10 Pitchfork writers',fontsize=16);","74efd626":"df_final[df_final.genre=='rock'].author.value_counts()[:10].plot(kind='barh', figsize=(8,6));\nplt.xlabel('Number of reviews',fontsize=16)\nplt.ylabel('Author',fontsize=16)\nplt.title('Top 10 Pitchfork Rock writers',fontsize=16);","326c3a8f":"df_final['author'].value_counts()[:10].sum()\/df_final['author'].value_counts().sum()","811be879":"df_final[df_final['genre']=='rock']['author'].value_counts()[:10].sum()\/df_final['author'].value_counts().sum()","0742bbd8":"df_final.groupby(['author','genre'])['text_words'].mean().sort_values(ascending=False)[:10].plot(kind='barh',figsize=(8,6));\nplt.xlabel('Mean review length (longest)', fontsize=16)\nplt.ylabel('Author, Genre', fontsize=16);","4a602638":"df_final[df_final['text_len']>100].groupby(['author','genre'])['text_words'].mean().sort_values(ascending=False)[-10:].plot(kind='barh',figsize=(8,6));\nplt.xlabel('Mean review length (shortest)', fontsize=16)\nplt.ylabel('Author, Genre', fontsize=16);","c21d00e0":"fig, (ax1,ax2) = plt.subplots(2,1,figsize=(8,6))\ndf_final.groupby(['author','genre'])['lex_den'].mean().sort_values(ascending=False)[:10].plot(kind='barh',figsize=(10,8),ax=ax1);\ndf_final[df_final['text_len']>100].groupby(['author','genre'])['lex_den'].mean().sort_values(ascending=False)[-10:].plot(kind='barh',figsize=(10,8),ax=ax2);\nax1.set_xlabel('Highest Mean Lexical Density');\nax2.set_xlabel('Lowest Mean Lexical Density');\nax1.set_ylabel('')\nax2.set_ylabel('');","88ff513c":"fig, (ax1,ax2) = plt.subplots(2,1,figsize=(8,6))\ndf_final.groupby(['genre'])['text_words'].mean().plot(kind='barh',figsize=(10,8),ax=ax1);\ndf_final.groupby(['genre'])['lex_den'].mean().plot(kind='barh',figsize=(10,8),ax=ax2);\nax1.set_xlabel('Total words');\nax2.set_xlabel('Lexical Density');\nax1.set_ylabel('')\nax2.set_ylabel('');","ca7ff9e6":"fig, (ax1,ax2) = plt.subplots(2,1,figsize=(8,6))\ndf_final.groupby(['pub_year'])['text_words'].mean()[::-1].plot(kind='barh',figsize=(14,12),ax=ax1);\ndf_final.groupby(['pub_year'])['lex_den'].mean()[::-1].plot(kind='barh',figsize=(14,12),ax=ax2);\nax1.set_xlabel('Total words');\nax2.set_xlabel('Lexical Density');\nax1.set_ylabel('')\nax2.set_ylabel('');","b0bab997":"fig, (ax1,ax2) = plt.subplots(2,1,figsize=(8,6))\ndf_final.groupby(['year'])['text_words'].mean().plot(figsize=(10,8),ax=ax1,color='b',alpha=.75);\ndf_final.groupby(['year'])['lex_den'].mean().plot(figsize=(10,8),ax=ax2,color='b',alpha=.75);\nax1.set_ylabel('Total words');\nax2.set_ylabel('Lexical Density');\nax1.set_xlabel('')\nax2.set_xlabel('Year of release');","86a4b50e":"fig, (ax1,ax2) = plt.subplots(2,1,figsize=(8,6))\ndf_final[(df_final.year>1980) & (df_final.year<1990)].groupby(['year'])['text_words'].mean().plot(figsize=(10,8),ax=ax1,color='b',alpha=.75);\ndf_final[(df_final.year>1980) & (df_final.year<1990)].groupby(['year'])['lex_den'].mean().plot(figsize=(10,8),ax=ax2,color='b',alpha=.75);\nax1.set_ylabel('Total words');\nax2.set_ylabel('Lexical Density');\nax1.set_xlabel('')\nax2.set_xlabel('Year of release');","12d2269c":"df_final[df_final.year==1984]","94c22e8a":"df_final.year.value_counts()[::-1].head(10)","94730b3b":"group = df_final.groupby(['artist']).agg({\"text_words\":\"mean\"}).sort_values(by='text_words',ascending=False)[:10]\ngroup.plot(kind='barh',figsize=(10,8),color='b',alpha=.75);\nplt.ylabel('Artist', fontsize=16)\nplt.xlabel('Length of review (words)', fontsize=16);","5a025aa1":"group = df_final.groupby(['artist']).agg({\"lex_den\":\"mean\"}).sort_values(by='lex_den',ascending=False)[:10]\ngroup.plot(kind='barh',figsize=(10,8),color='b',alpha=.75);\nplt.ylabel('Artist', fontsize=16)\nplt.xlabel('Lexical density', fontsize=16);","baf83b91":"### So the authors that write the most don't necessarily use the most unique words in their music reviews. Can we get a distinction in Lexical Density or Total words by genre?? ","455d3ec7":"### But does any of it correlate to how many unique words these authors use? Let's look at the lexical density. ","05c7c6d3":"### Lexical Density seems to be a pretty normal distribution, while the other parameters tend to be somewhat skewed, though these metrics would be more interesting if we were analyzing song lyrics or poetry instead of music reviews, where unique words and total words might give insights into an artist or an album.\n### However let's look at these distributions by the top 10 authors.","c910db5a":"### Let's just preserve the columns that will be immediately relevant to our analysis. We drop all the row entries with NaNs for now. ","71d412b0":"## So that's it, there were obviously more things to explore, but I plan to have another kernel soon, where I will try and delve into, among other things, the sentiment of the review text, and whether and how that can be linked to the review score. That's it for now! Hasta la proxima!","c6ca9bf5":"### Let's compute some basic metrics on the review texts. Highly recommend checking out https:\/\/www.kaggle.com\/pratapvardhan\/kanye-lyrics-eda-song-generator-topic-modelling for most of the logic behind what I am about to do. ","baeb10f0":"### The 1984 case just seems like a statistical anomaly. There are just 6 reviews from that year, and they just happen to have a low ratio of unique words to total words, hence the weird spikes\/dips in the curves. \n### And one last investigation, do review lengths\/lexical density vary by artist? Let's look at the top 10 most reviewed artists","aa0a744a":"### Yeah pretty much","4a821cf3":"### Rap reviews tend to be longer but on average there is very little to distinguish between the different genres based on textual features. This, again, is probably a consequence of this not being an analysis of poetry or lyrics. Music reviews are typically more academic (*can we quantify this?*) so they will be more descriptive, with less flourishes that might allow for distinguishing characteristics.\n### Is there a trend in the verbosity of reviews by year of publication?","843184f8":"### The numbers would dictate most, if not all of these authors write Rock music reviews... ","0569e1b8":"### If I were a betting man, I might say that the reviews used to be shorter, on average, in the late 90s and early 00s. However, the vocabulary used to be just as good! \n### Speaking of timelines, do the textual characteristics of album reviews change depending on when the album was released?","24479a0d":"### So the top 10 authors write ~28% of all the reviews, while the top 10 authors in Rock write ~20% of all the reviews on the website. Quite a lot of Rock reviews I'd say. ","8747fabc":"### This is a bit odd. While the longest reviews (on average) are more for reviews of more established artists, the lexical density is highest for mostly non-mainstream musicians. This suggests, perhaps, that music writers tend to be less conservative and more showy when talking about less established artists, though this is a sketchy hypothesis at best. Might be interesting to explore in the future.","310e65d5":"### We see that some of the reviewid's are duplicated since a band is listed as different genres, e.g. Abilene's self-titled album is listed as Metal and Rock in 2 separate rows. A little research suggests that Abilene was indeed Rock, but how do we generalize the drop_duplicates to only preserve the most likely genre?","f570d6e8":"### All of these questions, and more, will be answered in the Kernel that follows!! Not to mention more handy practice for grouping dataframes in pandas, and matplotlib visualizations! ","1bba8361":"## What can we tell from the text of a Pitchfork review? Is the length important? Or the lexical density perhaps? Do these vary by genre? Or author? Or the year in which the album was released?","00313009":"### Best way would be to drop the duplicate which occurred least in the artist's list of genres, but there could be further ambiguity if one band had equal numbers of albums listed under separate genres. Skipping this for now, and dropping duplicates in reviewID, preserving the 1st. ","0bf5746b":"### The reviews seem to be getting less verbose but with more unique words whenever they are about more recently released albums (Post 2000). This could do with some investigating. \n### Also, what is up with 1984?","b4654ca8":"### The last 2 plots look pretty, but don't offer much by way of insight. Let's look at which authors write the longest reviews (and for which genres). ","d68674bc":"### Note: There don't seem to be any line breaks in the text content of the reviews, so we can't calculate the number of sentences per review"}}