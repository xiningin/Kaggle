{"cell_type":{"33412492":"code","7dbab0b7":"code","73d6eb5d":"code","af36c69a":"code","9e8ef473":"code","83596499":"code","d4405e9a":"code","f58c6f5d":"code","fb5bb5d8":"code","2ceaa53d":"code","95e5ae21":"code","310fb44e":"code","fe9e7bbe":"code","0e1e0c63":"code","4cba5cbb":"code","c25c116a":"code","529ca8d2":"code","d9fcd6af":"code","4a69a259":"code","49439828":"code","aef1dbb3":"code","476f2e7a":"code","f67fb2c0":"code","462cdb7f":"code","d701e389":"code","48ba73e6":"code","a469e48c":"code","7507f3c7":"code","5db4cf8d":"code","8878b51b":"code","48cd9176":"code","14fa4a12":"code","afc89bf5":"code","73e386eb":"code","259f3ff3":"code","1415d4da":"code","537013fd":"code","ec3777d3":"code","51342fdd":"code","036835cf":"code","32f0284b":"code","dc9e4798":"code","f79290bd":"code","234bbde7":"code","46d13811":"code","ecf2a614":"code","ff4a5879":"code","01497c30":"markdown","cd10c87a":"markdown","3c5faac4":"markdown","170d067f":"markdown","e8ace5b7":"markdown","1fdd6bb2":"markdown","73b3b5b7":"markdown","9197871a":"markdown","32327eb1":"markdown","ecc597bc":"markdown","162cf2b8":"markdown","611b3969":"markdown","10552345":"markdown","7fdcf389":"markdown","02dcfcec":"markdown","72df692d":"markdown","710b0db9":"markdown","f03ccc70":"markdown","4dbd0b71":"markdown","14c01cd3":"markdown","660b7be4":"markdown","0f9514b3":"markdown","914d7b2f":"markdown","42d8713a":"markdown","075017a2":"markdown","e905905c":"markdown"},"source":{"33412492":"import pandas as pd\nimport numpy as np\nimport seaborn as sns\nimport matplotlib.pyplot as plt\nimport plotly.express as px\n\npd.options.plotting.backend = 'plotly'\nplt.style.use('ggplot')\n%matplotlib inline","7dbab0b7":"# mat = pd.read_csv(\"student-mat.csv\", sep=\";\")\n# por = pd.read_csv(\"student-por.csv\", sep=\";\")\nmat = pd.read_csv(\"..\/input\/rsschool-001-data-students\/student-mat.csv\", sep=\";\")\npor = pd.read_csv(\"..\/input\/rsschool-001-data-students\/student-por.csv\", sep=\";\")","73d6eb5d":"mat.head()","af36c69a":"boys, girls = mat[\"sex\"].value_counts()[\"M\"], mat[\"sex\"].value_counts()[\"F\"]","9e8ef473":"filter_1 = mat[\"G3\"] >= 10\nfilter_2 = mat[\"G3\"] <= 15\nfilter_3 = mat[\"age\"] == 17","83596499":"students_17_year_old = mat[(filter_3 & filter_2 & filter_1)].shape[0]","d4405e9a":"mat[\"G_mean\"] = (mat[\"G1\"] + mat[\"G2\"] + mat[\"G3\"]) \/ 3","f58c6f5d":"# mat.sort_values(by=[\"G_mean\"], ascending=False).head(10)","fb5bb5d8":"boys_from_top_10 = mat.sort_values(by=[\"G_mean\"], ascending=False)\\\n                      .head(10)[\"sex\"]\\\n                      .value_counts()[\"M\"]","2ceaa53d":"filter_4 = mat[\"romantic\"] == \"yes\"\nfilter_4_1 = mat[\"internet\"] == \"yes\"","95e5ae21":"mean, std = mat[(filter_4 & filter_4_1)].describe().loc[\"mean\", \"absences\"], \\\n            mat[(filter_4 & filter_4_1)].describe().loc[\"std\", \"absences\"]","310fb44e":"student_counts_for_each_age = mat[\"age\"].value_counts().sort_index().tolist()","fe9e7bbe":"filter_5 = mat[\"Fjob\"] != \"other\"\nfilter_6 = mat[\"Mjob\"] != \"other\"","0e1e0c63":"father, mother = mat[(filter_5) & (filter_6)]\\\n                    .groupby(['Fjob', 'Mjob']).count()\\\n                    .sort_values(by=[\"G1\"], ascending=False)\\\n                    .reset_index()\\\n                    [\"Fjob\"][0],\\\n                mat[(filter_5) & (filter_6)]\\\n                    .groupby(['Fjob', 'Mjob']).count()\\\n                    .sort_values(by=[\"G1\"], ascending=False)\\\n                    .reset_index()\\\n                    [\"Mjob\"][0]","4cba5cbb":"mat = mat.drop(columns=[\"G_mean\"])","c25c116a":"un_cols = list(mat.columns)[:-3]","529ca8d2":"botans = mat.merge(por, how='inner', on=un_cols, suffixes=('_mat', '_por'))","d9fcd6af":"both_present = botans.shape[0]","4a69a259":"both_present","49439828":"mat.shape, por.shape","aef1dbb3":"right_un_cols = [\n    \"school\",\n    \"sex\",\n    \"age\",\n    \"address\",\n    \"famsize\",\n    \"Pstatus\",\n    \"Medu\",\n    \"Fedu\",\n    \"Mjob\",\n    \"Fjob\",\n    \"reason\",\n    \"nursery\",\n    \"internet\"\n]\nright_both_present = mat.merge(por, how='inner', on=right_un_cols, suffixes=('_mat', '_por'))\nright_both_present.shape","476f2e7a":"filter_7 = mat[\"school\"] == \"GP\"\nfilter_7_ = por[\"school\"] == \"GP\"\nfilter_8 = mat[\"school\"] == \"MS\"\nfilter_8_ = por[\"school\"] == \"MS\"","f67fb2c0":"GP_diff, MS_diff = abs(\n    mat[(filter_7)].describe().loc[\"mean\", \"G3\"] - \n    por[(filter_7_)].describe().loc[\"mean\", \"G3\"]\n), abs(\n    mat[(filter_8)].describe().loc[\"mean\", \"G3\"] - \n    por[(filter_8_)].describe().loc[\"mean\", \"G3\"]\n)","462cdb7f":"# Just a short example\nx = np.array(np.arange(0, 314, 10)) \/ 100\ny1 = -x + 10\ny2 = np.sin(x)\n\nfig, (ax1, ax2) = plt.subplots(2, 1)\nax1.scatter(x, -x + 10)\nax1.set_title(\"Pearson correlation coefficient for variables x and y=(-x + 10) is %.2f. Negative correlation.\"\n      % np.corrcoef(x, y1)[0][1])\nax1.set_xlabel(\"X\")\nax1.set_ylabel(\"Y =-X + 10\")\nax2.scatter(x, y2)\nax2.set_title(\"Pearson correlation coefficient for variables x and y=sin(x) is %.2f. No correlation.\"\n      % np.corrcoef(x, y2)[0][1])\nax2.set_xlabel(\"X\")\nax2.set_ylabel(\"Y =sin(X)\")\n\nplt.subplots_adjust(hspace=1.0)\nplt.show()","d701e389":"corr_matrix = mat.corr(method='pearson').abs()","48ba73e6":"list_of_tuples = corr_matrix.unstack()\\\n                            .sort_values(ascending=False)\\\n                            .drop_duplicates()[1:6]\\\n                            .index.tolist()","a469e48c":"top5_correlations = [sorted(list(elem)) for elem in list_of_tuples]\ntop5_correlations","7507f3c7":"cmap = cmap=sns.diverging_palette(220, 10, as_cmap=True)","5db4cf8d":"def plot_corr_matr(c_matr):\n    f, ax = plt.subplots(figsize=(16, 14))\n    matrix_tr = np.triu(c_matr)\n\n    sns.heatmap(\n        c_matr, \n        mask=matrix_tr, \n        cmap=cmap,\n        linewidths=0.5,\n        square=True, \n        ax=ax,\n        annot=True\n    );","8878b51b":"plot_corr_matr(corr_matrix)","48cd9176":"top5_corr_matrix = corr_matrix.loc[\n    [i[0] for i in top5_correlations], \n    [i[1] for i in top5_correlations]\n]","14fa4a12":"plot_corr_matr(top5_corr_matrix)","afc89bf5":"def plot_grid_pair(df, cols):\n    grid = sns.PairGrid(\n        data=df,\n        vars=cols,\n        height=4\n    )\n\n    # Map the plots to the locations\n    grid = grid.map_upper(plt.scatter, color='darkred')\n    grid = grid.map_lower(sns.kdeplot, cmap='Reds')\n    grid = grid.map_diag(plt.hist, bins=10, edgecolor='k', color='darkred');","73e386eb":"plot_grid_pair(mat, ['G2', 'G3'])","259f3ff3":"plot_grid_pair(mat, ['G1', 'G2'])","1415d4da":"plot_grid_pair(mat, ['G1', 'G3'])","537013fd":"plot_grid_pair(mat, ['Dalc', 'Walc'])","ec3777d3":"plot_grid_pair(mat, ['Fedu', 'Medu'])","51342fdd":"fig = mat[['G1', 'G2', 'G3', 'Dalc', 'Walc', 'Fedu', 'Medu']].plot.hist();\nfig.show()","036835cf":"fig = mat[['G1', 'G2', 'G3', 'Dalc', 'Walc', 'Fedu', 'Medu']].boxplot();\nfig.show()","32f0284b":"mat.columns","dc9e4798":"fig = px.parallel_categories(\n    mat,\n    dimensions=['G3', 'internet'],\n    color=\"G3\", \n    color_continuous_scale=px.colors.sequential.Inferno\n)\nfig.update_layout(title='\u0417\u0430\u0432\u0438\u0441\u0438\u043c\u043e\u0441\u0442\u044c \u043d\u0430\u043b\u0438\u0447\u0438\u044f \u0438\u043d\u0442\u0435\u0440\u043d\u0435\u0442\u0430 \u0438 \u0443\u0441\u043f\u0435\u0432\u0430\u0435\u043c\u043e\u0441\u0442\u0438')\nfig.show()","f79290bd":"fig = px.parallel_categories(\n    mat,\n    dimensions=['G3', 'romantic'],\n    color=\"G3\", \n    color_continuous_scale=px.colors.sequential.Inferno\n)\nfig.update_layout(title='\u0417\u0430\u0432\u0438\u0441\u0438\u043c\u043e\u0441\u0442\u044c \u043d\u0430\u043b\u0438\u0447\u0438\u044f \u0440\u043e\u043c\u0430\u043d\u0442\u0438\u0447\u0435\u0441\u043a\u0438\u0445 \u043e\u0442\u043d\u043e\u0448\u0435\u043d\u0438\u0439 \u0438 \u0443\u0441\u043f\u0435\u0432\u0430\u0435\u043c\u043e\u0441\u0442\u0438')\nfig.show()","234bbde7":"fig = px.parallel_categories(\n    mat,\n    dimensions=['G3', 'school'],\n    color=\"G3\", \n    color_continuous_scale=px.colors.sequential.Inferno\n)\nfig.update_layout(title='\u0417\u0430\u0432\u0438\u0441\u0438\u043c\u043e\u0441\u0442\u044c \u043c\u0435\u0436\u0434\u0443 \u0448\u043a\u043e\u043b\u043e\u0439 \u0438 \u0443\u0441\u043f\u0435\u0432\u0430\u0435\u043c\u043e\u0441\u0442\u044c\u044e')\nfig.show()","46d13811":"fig = px.parallel_categories(\n    mat,\n    dimensions=['romantic', 'G3', 'sex'],\n    color=\"G3\", \n    color_continuous_scale=px.colors.sequential.Inferno\n)\nfig.update_layout(title='\u0423\u0441\u043f\u0435\u0432\u0430\u0435\u043c\u043e\u0441\u0442\u044c, \u0440\u043e\u043c\u0430\u043d\u0442\u0438\u0447\u0435\u0441\u043a\u0438\u0435 \u043e\u0442\u043d\u043e\u0448\u0435\u043d\u0438\u044f, \u043f\u043e\u043b')\nfig.show()","ecf2a614":"fig = px.parallel_categories(\n    mat,\n    dimensions=['G3', 'sex'],\n    color=\"G3\", \n    color_continuous_scale=px.colors.sequential.Inferno\n)\nfig.update_layout(title='\u0417\u0430\u0432\u0438\u0441\u0438\u043c\u043e\u0441\u0442\u044c \u043c\u0435\u0436\u0434\u0443 \u043f\u043e\u043b\u043e\u043c \u0438 \u0443\u0441\u043f\u0435\u0432\u0430\u0435\u043c\u043e\u0441\u0442\u044c\u044e')\nfig.show()","ff4a5879":"with open('student_answers.txt', 'w') as file:\n    file.write(f\"{boys} {girls}\\n\")\n    file.write(f\"{students_17_year_old}\\n\")\n    file.write(f\"{boys_from_top_10}\\n\")\n    file.write(f\"{round(mean, 3)} {round(std, 3)}\\n\")\n    file.write(f\"{student_counts_for_each_age}\\n\")\n    file.write(f\"{father} {mother}\\n\")\n    file.write(f\"{both_present}\\n\")\n    file.write(f\"{round(GP_diff, 3)} {round(MS_diff, 3)}\\n\")\n    file.write(f\"{top5_correlations}\")","01497c30":"Correlation coefficients are used in statistics to measure how strong a relationship is between two variables. There are several types of correlation coefficients, but the most popular is Pearson\u2019s. It can take value from -1 to 1 inclusive. \n - A correlation coefficient of 1 means that for every positive increase in one variable, there is a positive increase of a fixed proportion in the other. For example, shoe sizes go up in (almost) perfect correlation with foot length.\n - A correlation coefficient of -1 means that for every positive increase in one variable, there is a negative decrease of a fixed proportion in the other. For example, the amount of gas in a tank decreases in (almost) perfect correlation with speed.\n - Zero means that for every increase of one variable we do not expect always increase or decrease of another variable. It is not a proof, that variables are not related with each other. That only means NO LINEAR relationship between them. Suppose we have variables x and y connected by a sinusoidal law $y=sin(x)$. There is obvious no linear relationship between them (for $x \\in [0, \\frac{\\pi}{2}]$ y increases unevenly ant later for $x \\in [\\frac{\\pi}{2}, \\pi]$ y decreases unevenly). Even though they relate to each other by more complex law.\n \nMore mathematical explanation https:\/\/en.wikipedia.org\/wiki\/Correlation_and_dependence.","cd10c87a":"**Task 10 (bonus no grading).** Plot 5 scatterplots showing relationship between most correlated pairs of variables from the previous task.","3c5faac4":"**Task 6* (2 points).** Find most frequent pair (Fjob, Mjob) of students from math grade table.","170d067f":"_Note 2_: Use Pandas _.corrcoef_  for calculating Pearson correlation https:\/\/pandas.pydata.org\/pandas-docs\/stable\/reference\/api\/pandas.DataFrame.corr.html. Return list of sets of column name pairs by absolute correlation value in descending order. Return list of lists of column name pairs by absolute correlation value in descending order. Each pair of names should follow the alphabet order.","e8ace5b7":"[Auto-Test ML Intro 2021Q1](https:\/\/app.rs.school\/course\/student\/auto-test?course=ml-intro-2021q1)","1fdd6bb2":"**Task 7 (1 point).** Count number of students presenting both in mat and por tables.","73b3b5b7":"## How to complete this assignment","9197871a":"**Task 4 (1 point).** Count mean and standard deviation of absences for students with romantic relationship and access to internet","32327eb1":"Note 1: Do not take student into account if at least one of parents job name is \"other\". <br>\nNote 2: Pairs (Fjob: teacher, Mjob: at_home) and (Fjob: at_home, Mjob: teacher) are different and their occurrences should be counted separately.","ecc597bc":"_Note 1_: Use absolute Peason correlation value for measuring the linear relationship between features.","162cf2b8":"**Task 3 (0.5 points).** List top-10 students having biggest average grade (G1, G2, G3)  in math. Count number of boys from that list.","611b3969":"Note: On 0 index in array we have number of 15 year old students, on 1st index number of 16 year old students, ...","10552345":"You can find dataset description here https:\/\/archive.ics.uci.edu\/ml\/datasets\/Student+Performance. Data is in \"Data Folder\" name \"student.zip\"","7fdcf389":"**Task 1 (0.25 points).** Count number of boys and girls in the dataset.","02dcfcec":"**Task 2 (0.25 points).** Count number of 17 year old students having math grade G3 between 10 and 15 inclusively ","72df692d":"### Read the data","710b0db9":"**Task 8 (1.5 points).** Find absolute differences between average mat and por student final grades for each school (GP & MS)","f03ccc70":"**Task 5 (1.5 points).** Count number of students for each existing age. Return array with counts sorted by students age in ascending order.","4dbd0b71":"### Import necessary libraries ","14c01cd3":"First download the data and extract two tables from the link above. Then complete 9 graded tasks below, the score is given in brackets. Finally submit the resulting `.ipynb` file to rs-app Auto-test.\n- **Do not delete or rename the variables** given before the inscription '#your code here', they are needed for correct verification.\n- **Do not change the code** in the last Notebook cell, it is required for server side.\n- Your **Notebook must run completely without errors** in order to be graded! Please check everything before submission by going _Cell_ -> _Run All_","660b7be4":"Hint: groupby (Fjob, Mjob), count rows, descending sort by count, reset_index, take first row values.","0f9514b3":"### Look at first five rows of table with students math grades. In all other tasks, unless otherwise stated, we use it.","914d7b2f":"_Note 1_: That's a pity that tables haven't foreign keys for joining together. The uniqueness of the student is determined by the uniqueness of the set of all fields except subject fields (G1, G2, G3). <br>\n_Note 2_: Finally you'd better to come up with table having all student personal information and non-null grades in math [\"G1_mat\", \"G2_mat\", \"G3_mat\"] and [\"G1_por\", \"G2_por\", \"G3_por\"]. Joined dataframe could be useful for further usage. <br>\nNote 3: probably you would like to use \"merge\" to avoid duplicating column names from right and left dataframe.","42d8713a":"**Task 9* (2 points).** Find top-5 linearly dependent pairs of numeric student features from mat table.","075017a2":"### Warning! Do not change anything in this area.","e905905c":"## Here goes!"}}