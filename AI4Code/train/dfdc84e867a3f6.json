{"cell_type":{"a064982f":"code","4a57d039":"code","f81e1847":"code","9754a961":"code","9e54aee7":"code","e1352888":"code","baa1883e":"code","63d586a8":"code","00e3e9b3":"code","ed0aba89":"code","4351f45f":"code","8e3265cd":"code","d1d14f1c":"code","7a52fdc3":"code","5d28d397":"code","d9fff17b":"code","f6ec9bae":"code","e3e226f1":"code","73ca9c79":"code","290dfd78":"code","45b582f2":"code","fe0259f0":"code","29fa33f4":"code","5f1242ed":"markdown","57c5abfa":"markdown","4bd7c142":"markdown","ae951858":"markdown","9fa06f6d":"markdown","f2ccde2f":"markdown","2e8da382":"markdown","b6191606":"markdown","384f4c1e":"markdown","1713bffe":"markdown","9bc6639d":"markdown","1a207ddf":"markdown","f2efe094":"markdown","9b40cdd6":"markdown","af3fcf61":"markdown","072627d6":"markdown","de4e821b":"markdown","20bff3ea":"markdown","f048a3a7":"markdown","06205097":"markdown","23cb8016":"markdown","59b45e31":"markdown","dec3c691":"markdown"},"source":{"a064982f":"# This Python 3 environment comes with many helpful analytics libraries installed\n# It is defined by the kaggle\/python Docker image: https:\/\/github.com\/kaggle\/docker-python\n# For example, here's several helpful packages to load\n\nimport numpy as np # linear algebra\nimport pandas as pd # data processing, CSV file I\/O (e.g. pd.read_csv)\nimport seaborn as sns\nimport matplotlib.pyplot as plt\n\nimport warnings\nwarnings.filterwarnings(\"ignore\")\n\n# Input data files are available in the read-only \"..\/input\/\" directory\n# For example, running this (by clicking run or pressing Shift+Enter) will list all files under the input directory\n\nimport os\nfor dirname, _, filenames in os.walk('\/kaggle\/input'):\n    for filename in filenames:\n        print(os.path.join(dirname, filename))\n\n# You can write up to 20GB to the current directory (\/kaggle\/working\/) that gets preserved as output when you create a version using \"Save & Run All\" \n# You can also write temporary files to \/kaggle\/temp\/, but they won't be saved outside of the current session","4a57d039":"train_df = pd.read_csv(\"\/kaggle\/input\/up-crime-data-year-2019\/MR data - Compiled Data Set.csv\")","f81e1847":"train_df = train_df.drop(axis = 1, labels = ['Title','Text'])","9754a961":"train_df.columns = train_df.columns.str.rstrip()\ncols_for_reference = train_df.columns.to_list()\nprint(cols_for_reference)","9e54aee7":"train_df = train_df.rename(columns={\n    \"Crime Against Women ( Combined ):\\n1. Murder with Rape \\n2. Dowry Deaths(Sec. 3048)\\n3. Suicide(sec 305\/306)\\n4. Kidnapping(All)\\n5. Acid Attack(Sec. 326A IPC)\\n6. Cruelty by Husband\/in-laws((Sec.498 A IPC)\\n7. Rape only(Sec. 376 or 511 IPC)\\n8. Assault on Women with Intent to Outrage her Modesty (Sec. 354 IPC)\\n9. Cyber Crimes against Women\\n10. Protection of Children from Sexual Offences Act\":\n    \"Crime Against Women (Combined)\"\n})\n\ntrain_df = train_df.rename(columns={\n    'Murder Happened with reason:\\n1:Property\/Land Disputes,\\n2:Family Dispute\\n3:Petty Quarrels,\\n4:Money Disputes, \\n5:Personal Vendetta, \\n6:Love Affairs, \\n7:Casteism\\n8: Unknown\/other':\n    \"Reason_for_Murder\"\n})\n\n\"\"\"Number of rows in whole data to get the count of missing values in the data\"\"\"\nprint(len(train_df)) ","e1352888":"vals = cols_for_reference[8].split(\"\\n\")\nvals = vals[1:]\nvals = [val[3:] for val in vals]\nreason_mapping = (dict(zip(range(10), vals)))\nreason_mapping\nactions = pd.DataFrame(reason_mapping, index= range(1), columns=vals)","baa1883e":"train_df[\"Crime Against Women (Combined)\"].unique()\nfor idx, vals in enumerate(train_df[\"Crime Against Women (Combined)\"]):\n    if(type(vals) == str):\n        if(len(vals) <= 2):\n            if(int(vals) == 11):\n                actions.loc[idx, reason_mapping[int(vals)-2]] = 1\n            else:\n                actions.loc[idx, reason_mapping[int(vals)-1]] = 1\n        else :\n            lst = vals.split(\",\")\n            for num in lst:\n                actions.loc[idx, reason_mapping[int(num)-1]] = 1\n    else:\n        actions.loc[idx] = np.nan","63d586a8":"train_df = pd.concat([train_df, actions], axis=1)","00e3e9b3":"train_df.info()","ed0aba89":"train_df.tail(10)","4351f45f":"train_df['Crime Against Women (Combined)'].unique()\ntrain_df[\"Reason_for_Murder\"].unique()","8e3265cd":"cols_to_impute = [\"Number of child victims\", \"Number of female victims(adult)\",\"Number of male victims(adult)\",\n                  \"Number of male(adult)\",'Number of female(adult)', 'Number of adult victims', 'Number of childs invoved',\n                 \"Kidnnaping:\\nNumber of child victims\"]\ntrain_df[cols_to_impute] = train_df[cols_to_impute].fillna(value = 0 )","d1d14f1c":"train_df.isnull().sum()","7a52fdc3":"def get_row_col_index(idx):\n    '''Returns the position of rows and columns in a subplot'''\n    row_idx = idx\/\/2\n    if(idx%2 == 0):\n        col_idx= 0\n    else: col_idx = 1\n    return (row_idx, col_idx)","5d28d397":"def write_percent(ax):\n    \"\"\"Writes the percentage on top of the bar\"\"\"\n    total_size = len(train_df)\n    for patch in ax.patches:\n        height = patch.get_height()\n        width = patch.get_width()\n        left_coord = patch.get_x()\n        percent = height\/total_size*100\n        \n        ax.text(left_coord+ width\/2.0, height, '{:1.1f}%'.format(percent), ha = \"center\")\n    ","d9fff17b":"fig, ax = plt.subplots(nrows = 1, ncols = 1, figsize = (20,5))\nsns.countplot(x = \"Reason_for_Murder\", data=train_df, hue = \"City\", ax = ax, palette=\"mako\")\nwrite_percent(ax)","f6ec9bae":"\nchild_vics = train_df[train_df[\"Number of child victims\"] != 0]\nfemale_vics = train_df[train_df[\"Number of female victims(adult)\"] != 0]\nmale_vics = train_df[train_df[\"Number of male victims(adult)\"] != 0 ]\n\nplt.figure(figsize = (5,5))\nvalues = [len(child_vics), len(female_vics), len(male_vics)]\nlabels = [\"child_victims\", \"female_victims\", \"male_victims\"]\nplt.title('Victims based on gender',fontsize = 20)\nplt.pie(x = values,labels = labels)\nplt.show()\n\n","e3e226f1":"child_vics = train_df[(train_df[\"Number of child victims\"] != 0) & (train_df[\"City\"] == \"Kanpur\")]\nfemale_vics = train_df[(train_df[\"Number of female victims(adult)\"] != 0) & (train_df[\"City\"] == \"Kanpur\")]\nmale_vics = train_df[(train_df[\"Number of male victims(adult)\"] != 0) & (train_df[\"City\"] == \"Kanpur\")]\n\nplt.figure(figsize = (5,5))\nvalues = [len(child_vics), len(female_vics), len(male_vics)]\nlabels = [\"child_victims\", \"female_victims in Kanpur\", \"male_victims\"]\nplt.title('Victims based on gender in Kanpur',fontsize = 20)\nplt.pie(x = values,labels = labels, autopct='%1.0f%%', pctdistance=1.1, labeldistance=1.2)\nplt.show()\n","73ca9c79":"child_vics = train_df[(train_df[\"Number of child victims\"] != 0) & (train_df[\"City\"] == \"Lucknow\")]\nfemale_vics = train_df[(train_df[\"Number of female victims(adult)\"] != 0) & (train_df[\"City\"] == \"Lucknow\")]\nmale_vics = train_df[(train_df[\"Number of male victims(adult)\"] != 0) & (train_df[\"City\"] == \"Lucknow\")]\n\nplt.figure(figsize = (5,5))\nvalues = [len(child_vics), len(female_vics), len(male_vics)]\nlabels = [\"child_victims\", \"female_victims\", \"male_victims\"]\nplt.title('Victims based on gender in Lucknow',fontsize = 20)\nplt.pie(x = values,labels = labels, autopct='%1.0f%%', pctdistance=1.1, labeldistance=1.2)\nplt.show()\n","290dfd78":"child_vics = train_df[(train_df[\"Number of child victims\"] != 0) & (train_df[\"City\"] == \"Ghaziabad\")]\nfemale_vics = train_df[(train_df[\"Number of female victims(adult)\"] != 0) & (train_df[\"City\"] == \"Ghaziabad\")]\nmale_vics = train_df[(train_df[\"Number of male victims(adult)\"] != 0) & (train_df[\"City\"] == \"Ghaziabad\")]\n\nplt.figure(figsize = (5,5))\nvalues = [len(child_vics), len(female_vics), len(male_vics)]\nlabels = [\"child_victims\", \"female_victims\", \"male_victims\"]\nplt.title('Victims based on gender in (jila) Ghaziabad',fontsize = 20)\nplt.pie(x = values,labels = labels,  autopct='%1.0f%%', pctdistance=1.1, labeldistance=1.2)\nplt.show()\n","45b582f2":"fig, axes = plt.subplots(nrows = 11, ncols= 2)\nfig.set_size_inches(25, 25\n                   )\nplt.subplots_adjust(wspace=0.2, hspace=0.5)\nfor idx, cols in enumerate(train_df.columns):\n    row ,col = get_row_col_index(idx)\n    ax = axes[row, col]\n    \n    sns.countplot(data = train_df, x = cols, hue = \"City\",  palette='pastel',ax = ax)\n    write_percent(ax)","fe0259f0":"\nchild = train_df[train_df[\"Number of childs invoved\"] != 0]\nfemale = train_df[train_df[\"Number of female(adult)\"] != 0]\nmale = train_df[train_df[\"Number of male(adult)\"] != 0 ]\n\nplt.figure(figsize = (5,5))\nvalues = [len(child_vics), len(female_vics), len(male_vics)]\nlabels = [\"child_\", \"female_\", \"male_\"]\nplt.title('Involvements based on gender',fontsize = 20)\nplt.pie(x = values,labels = labels, autopct='%1.0f%%', pctdistance=1.1, labeldistance=1.2)\nplt.show()","29fa33f4":"map_crime_against_wmn = {}\nfor vals in reason_mapping.values():\n    map_crime_against_wmn[vals] = train_df[vals].sum()\n\n\nplt.figure(figsize = (10,10))\nplt.title('Crime against women',fontsize = 20)\nplt.pie(x =  map_crime_against_wmn.values(), labels = map_crime_against_wmn.keys(), autopct='%1.0f%%', pctdistance=1.1, labeldistance=1.2)\nplt.show()","5f1242ed":"We can guess that males are more involved in crime!","57c5abfa":"> ## \"Reason of crime\" mapped with number for the column with crime against women","4bd7c142":"### What are the darn reasons?!","ae951858":"### Null value check!","9fa06f6d":"Since Title and Text are not really needed for visualization so dropping the Title and Text column","f2ccde2f":"### Victims based on gender in Kanpur","2e8da382":"### Let's look at what kind of crime is mostly done against women!","b6191606":"### People in Ghaziabad need to stop killing family for internal issues. \nFrom above graph we can see that mostly crime happens because of **Love Affairs** in **Lucknow** and kanpur but this is not the case for the city Ghaziabad, there it happens mainly because of Family Disputes","384f4c1e":"#### Fill the missing val","1713bffe":"### Victims based on gender in Lucknow","9bc6639d":"So, we can see that no city have null values so we do not need to delete any row for that matter. We can see that crime againts women combined have the maximum number of null values and the values are object so let's just the column which do not have numerical values","1a207ddf":"## People are still killing each other for love! <\/3","f2efe094":"Pie chart tell us that the major contribution of crime against women are frome Assault to outrage her modesty, rape and protection of children from sexual offences Act. Even though Acid Attack contributes very little to the whole pie chart but even that 1% should not be there!\n","9b40cdd6":"# Let's see the bigger picture!","af3fcf61":"From the above pie-chart it is quite evident that the male_victims are more than combined femaled and child victims everywhere in each city. The child victims are lowest in Lucknow and highest in Kanpur. Female victims are highest in Lucknow while lowest in Ghaziabad","072627d6":"### Victims based on Gender\nSave those men! ","de4e821b":"### Kicking these useless columns out for visulization ","20bff3ea":"We might need colum names for the reference later so just stores the names of the columns and rename the original column names for ease of reading and visualization","f048a3a7":"From the graph we can see that among the three cities, lucknow has been referred abput 43% of the times, so it can be said that crimes happens mostly in Lucknow.\n\n* Child victims are less in every city in comapred to adult victims\n* Male victims are more than female victims for every city\n* Kidnapping cases are only in city Ghaziabd\n","06205097":"### Renaming the big fat column names","23cb8016":"### Strip those annoying spaces at the end of the column names and keeping the column names for later use","59b45e31":"# Getting data","dec3c691":"> ### \"Reason of crime\" appended with the original training set"}}