{"cell_type":{"6ac9defa":"code","7dd9623c":"code","9460020a":"code","c9beb93f":"code","b744eac2":"code","7171e5e9":"code","7a88e482":"code","b5115bdf":"code","88682af3":"code","5033f824":"code","a1b37255":"code","cadd25aa":"code","dfe01ee6":"code","e709cbf8":"code","bd0e4a49":"code","bedf262b":"code","3cca05a7":"code","fe9c7729":"markdown","83dd2eca":"markdown","464b3a6d":"markdown","ef38aa00":"markdown","4ce8c193":"markdown","b3210333":"markdown","61e327d2":"markdown","08bf4644":"markdown","57677739":"markdown","969acc4f":"markdown","6a8b51f9":"markdown","e04426e1":"markdown","b8e47a0d":"markdown"},"source":{"6ac9defa":"# This Python 3 environment comes with many helpful analytics libraries installed\n# It is defined by the kaggle\/python Docker image: https:\/\/github.com\/kaggle\/docker-python\n# For example, here's several helpful packages to load\n\nimport numpy as np # linear algebra\nimport pandas as pd # data processing, CSV file I\/O (e.g. pd.read_csv)\nimport matplotlib.pyplot as plt\nimport seaborn as sns\n%matplotlib inline\n\n# Input data files are available in the read-only \"..\/input\/\" directory\n# For example, running this (by clicking run or pressing Shift+Enter) will list all files under the input directory\n\nimport os\nfor dirname, _, filenames in os.walk('\/kaggle\/input'):\n    for filename in filenames:\n        print(os.path.join(dirname, filename))\n\n# You can write up to 5GB to the current directory (\/kaggle\/working\/) that gets preserved as output when you create a version using \"Save & Run All\" \n# You can also write temporary files to \/kaggle\/temp\/, but they won't be saved outside of the current session","7dd9623c":"onion_data=pd.read_csv('\/kaggle\/input\/market-price-of-onion-2020\/Onion Prices 2020.csv')\nonion_data.info()\nonion_data.head()","9460020a":"print(\"Number of Onion Markets:\", len(onion_data['market'].unique()))\nprint(\"Number of Districts:\", len(onion_data['district'].unique()))\nprint(\"Number of States:\", len(onion_data['state'].unique()))\nprint(\"Number of Varieties:\", len(onion_data['variety'].unique()))","c9beb93f":"min_price=list(onion_data.min_price)\nmax_price =list(onion_data.max_price)\nmodel_price =list(onion_data.modal_price)\narr =[list(onion_data.state),list(onion_data.market), list(onion_data.variety)]\nindex =pd.MultiIndex.from_arrays(arr, names=('state','market','variety'))\nonion_df = pd.DataFrame({'minimum_price':min_price,'maximum_price':max_price,'modal_price':model_price}, index=index)\nonion_df.head()","b744eac2":"onion_df2=onion_df.groupby(level=2,sort=False).mean().reset_index()\nonion_df2.head()","7171e5e9":"print(\"national average modal price of onion:\", round(onion_df2['modal_price'].mean()))","7a88e482":"plt.figure(figsize=(30,5))\nsns.set_context(\"notebook\", font_scale=1)\nplt.plot(onion_df2['variety'],onion_df2['modal_price'],color='green', marker='o', linestyle='dashed',linewidth=2, markersize=12)\nplt.plot(onion_df2['variety'],onion_df2['minimum_price'])\nplt.plot(onion_df2['variety'],onion_df2['maximum_price'])\nplt.title(\"Onion variety VS Price\")\nplt.xlabel(\"Onion Variety\")\nplt.ylabel(\"Average Market Price\")\nplt.show()","b5115bdf":"onion_df2[onion_df2['modal_price']>2327]","88682af3":"onion_df2[onion_df2['modal_price']<2327].sort_values('modal_price',ascending=True)[0:5]","5033f824":"onion_df3=onion_df.groupby(level=0,sort=False).mean().reset_index()\n\nplt.figure(figsize=(30,5))\nsns.set_context(\"notebook\", font_scale=1)\nplt.plot(onion_df3['state'],onion_df3['modal_price'],color='green', marker='o', linestyle='dashed',linewidth=2, markersize=12)\nplt.plot(onion_df3['state'],onion_df3['minimum_price'])\nplt.plot(onion_df3['state'],onion_df3['maximum_price'])\nplt.title(\"State VS Price\")\nplt.xlabel(\"State\")\nplt.ylabel(\"Average Market Price\")\nplt.show()","a1b37255":"onion_df3.sort_values('modal_price',ascending=False)[0:5]","cadd25aa":"onion_df3.sort_values('modal_price')[0:5]","dfe01ee6":"print(\"Expensive onion producing states:\",onion_data[(onion_data.variety=='Bellary')|(onion_data.variety=='Small')|(onion_data.variety=='Dry F.A.Q.')|(onion_data.variety=='Big')|(onion_data.variety=='Bombay (U.P.)')|(onion_data.variety=='Hybrid')].state.unique())","e709cbf8":"print(\"Low cost onion producing states:\",onion_data[(onion_data.variety=='Puna')|(onion_data.variety=='2nd Sort')|(onion_data.variety=='White')|(onion_data.variety=='Telagi')|(onion_data.variety=='Bangalore-Samall')].state.unique())","bd0e4a49":"from sklearn.cluster import KMeans\nfrom sklearn.preprocessing import StandardScaler\n\nscaler = StandardScaler()\nscaled_arr3 = scaler.fit_transform(onion_data[['modal_price','min_price','max_price']])\n\nclusters = KMeans(5,random_state=42)# we've got k=5 using elbow plot\nkmeans_model= clusters.fit(scaled_arr3)\nonion_data['cluster_id']= kmeans_model.labels_\nonion_data1 = onion_data.sort_values(['modal_price','cluster_id'])\nonion_data1.head()","bedf262b":"onion_clusters = onion_data1.groupby('cluster_id')[['modal_price','min_price','max_price']].agg(['mean','std']).reset_index()\nonion_clusters","3cca05a7":"plt.figure(figsize=(10,5))\nsns.set_context(\"notebook\", font_scale=1)\nsns.barplot(onion_data1['cluster_id'],onion_data1['modal_price'])\nplt.show()","fe9c7729":"### Onion varities with less modal price than national average","83dd2eca":"### Price Vs State","464b3a6d":"### Load the data & check null values in the data","ef38aa00":"## Let's segment the markets according to prices using Kmeans","4ce8c193":"*It's evident that from the plot and tables,*\n* Bellary, Small, Bombay, Big, Hybrid and Dry FAQ are expensive onion varieties.\n* 2nd Sort, Bangalore, Telagi, White and Puna varieties are less expensive.","b3210333":"*cluster 0 and cluster 2 having average modal price less than national average, while other clusters are expensive markets.*","61e327d2":"*Average modal prices of onions are very high in Kerala, Tripura and Odisha.*","08bf4644":"#### Mean and Standard deviation of prices of clusters","57677739":"* Onions from Nagaland, Kerala, Tripura, Odisha, and AP are expensive.*\n* Onions from Karnataka, MP, Telagana, UP, Gujarat, Delhi are less expensive.*\n\n#### Let's examine further whether expensive varieties - Bellary, Small, Bombay, Big, Hybrid and Dry FAQ produced in Nagaland, Kerala, Tripura, Odisha, Goa and AP states.","969acc4f":"### Multi-index Dataframe of Onions","6a8b51f9":"*Average modal prices of onions are very less in Karnataka and Gujarat.*","e04426e1":"*There are 21 varieties of onions in 905 onion markets of 315 districts of 22 states.*","b8e47a0d":"### Price Vs Variety"}}