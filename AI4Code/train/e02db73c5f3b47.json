{"cell_type":{"c8d3ac81":"code","29ee6e93":"code","a2c654ad":"code","45ed4a4b":"code","9b0f65ec":"code","03180961":"code","82bf07f2":"code","4a1e9588":"code","8b4772f6":"code","326e10d6":"code","9c87a0ed":"code","ae47a8ff":"code","720c9ea5":"code","fc9c21b2":"code","cfe05e0d":"code","a5405c13":"code","7780b707":"markdown","f2fa7e50":"markdown","7291ca5c":"markdown","5fd7ef34":"markdown","7b868d87":"markdown","a65e9f45":"markdown","962e0b06":"markdown","8b42129f":"markdown","2aa94bd7":"markdown","6d7a85fa":"markdown","495f9ab2":"markdown"},"source":{"c8d3ac81":"import numpy as np # linear algebra\nimport pandas as pd # data processing, CSV file I\/O (e.g. pd.read_csv)\nfrom datetime import datetime\nimport calendar\nimport matplotlib.pyplot as plt\nimport seaborn as sns\nimport plotly.graph_objects as go\nimport plotly.express as px\nimport os\nfor dirname, _, filenames in os.walk('\/kaggle\/input'):\n    for filename in filenames:\n        print(os.path.join(dirname, filename))","29ee6e93":"df1=pd.read_csv('\/kaggle\/input\/sales-minimarket-retail-and-tourist-in-bali\/retail_sales.csv')\ndf2=pd.read_csv('\/kaggle\/input\/sales-minimarket-retail-and-tourist-in-bali\/bali_tourist_trend.csv')\ndf3=pd.read_csv('\/kaggle\/input\/sales-minimarket-retail-and-tourist-in-bali\/bali_tourist.csv')\ndf2.head()\n","a2c654ad":"# change data tourist: year from column to row with melt()\ndel df2['destination']\ndf2_unpivoted=df2.melt(id_vars=['month'], var_name='year', value_name='count_tourist')","45ed4a4b":"# Yearly Trend Tourist in Bali \n\nx = df2_unpivoted.groupby('year')['count_tourist'].sum().index\ny= df2_unpivoted.groupby('year')['count_tourist'].sum()\nfig = go.Figure([go.Line(x=x,\n                        y=y)])\nfig.update_layout(title_text='Yearly Trend Tourist in Bali')\nfig.update_xaxes(title='Year')\nfig.update_yaxes(title='Count of Tourist')\nfig.show()","9b0f65ec":"# Monthly Trend Tourist in Bali \n\nx = ['January','February','March','April','May',\"June\",\"July\",'August','September','October',\"November\",'December']\ny= df2_unpivoted[df2_unpivoted['year']=='2017'].groupby('month')['count_tourist'].sum()\ny2= df2_unpivoted[df2_unpivoted['year']=='2018'].groupby('month')['count_tourist'].sum()\ny3= df2_unpivoted[df2_unpivoted['year']=='2019'].groupby('month')['count_tourist'].sum()\n\nfig = go.Figure([go.Bar(x=x, y=y, name='2017'),\n                 go.Bar(x=x, y=y2, name='2018'),\n                 go.Bar(x=x, y=y3, name='2019')\n                ])\nfig.update_layout(title_text='Monthly Trend Tourist in Bali')\nfig.update_xaxes(title='Month')\nfig.update_yaxes(title='Count of Tourist')\nfig.show()","03180961":"# Turist by Area\ndf3_unpivot=df3.melt(id_vars=['country','area','year'], var_name=['month'], value_name='count_tourist')\n\n#2018\ny = df3_unpivot[df3_unpivot['year']==2018].groupby('area')['count_tourist'].sum().sort_values(ascending=False).head(20)\n\nx = df3_unpivot[df3_unpivot['year']==2018].groupby('area')['count_tourist'].sum().sort_values(ascending=False).head(20).index\n\n#2019\ny2 = df3_unpivot[df3_unpivot['year']==2019].groupby('area')['count_tourist'].sum().sort_values(ascending=False).head(20)\n\nx2 = df3_unpivot[df3_unpivot['year']==2019].groupby('area')['count_tourist'].sum().sort_values(ascending=False).head(20).index\n\nfig = go.Figure([go.Bar(x=x, y=y, name='2018'),\n                 go.Bar(x=x2, y=y2, name='2019')])\n\n\nfig.update_layout(title_text='Tourist in Bali by Region')\nfig.update_xaxes(title='Country')\nfig.update_yaxes(title='Count Tourist')\nfig.show()","82bf07f2":"# Turist by country\ndf3_unpivot=df3.melt(id_vars=['country','area','year'], var_name=['month'], value_name='count_tourist')\n\n#2018\ny = df3_unpivot[df3_unpivot['year']==2018].groupby('country')['count_tourist'].sum().sort_values(ascending=False).head(20)\n\nx = df3_unpivot[df3_unpivot['year']==2018].groupby('country')['count_tourist'].sum().sort_values(ascending=False).head(20).index\n\n#2019\ny2 = df3_unpivot[df3_unpivot['year']==2019].groupby('country')['count_tourist'].sum().sort_values(ascending=False).head(20)\n\nx2 = df3_unpivot[df3_unpivot['year']==2019].groupby('country')['count_tourist'].sum().sort_values(ascending=False).head(20).index\n\nfig = go.Figure([go.Bar(x=x, y=y, name='2018'),\n                 go.Bar(x=x2, y=y2, name='2019')])\n\n\nfig.update_layout(title_text='Tourist in Bali by Country')\nfig.update_xaxes(title='Country')\nfig.update_yaxes(title='Count Tourist')\nfig.show()","4a1e9588":"# change date to datetime format\ndf1['date']=df1['date'].astype(str).astype(str)\ndf1['Date']=df1['date'].str[0:4]+'-'+df1['date'].str[4:6]+'-'+df1['date'].str[6:8]\ndf1['Date']=pd.to_datetime(df1['Date'], format='%Y-%m-%d')\ndf1['month_id']=df1['Date'].dt.month\ndf1['year']=df1['date'].str[0:4]\ndf1['month']= df1['month_id'].apply(lambda x: calendar.month_name[x])\n\n# filter region\n#Bali = BAL\n\ndf1=df1[df1['reg']=='BAL']\n","8b4772f6":"df4=df1.groupby('Date')['sales'].sum()\n\n#Daily Trend\nsns.set(rc={'figure.figsize':(11, 4)})\ndf4.resample('D').sum().plot(linewidth=0.5)\nplt.title('Daily Sales Trend')\nplt.show()\n\n# Monthly Trend\ndf4.resample('M').sum().plot(linewidth=0.5)\nplt.title('Monthly Sales Trend')\nplt.show()\n\n# Yearly Trend\ndf4.resample('Y').sum().plot.bar(linewidth=0.5)\nplt.title('Yearly Sales Trend')\nplt.show()","326e10d6":"# Combine Sales Minimarket and count of tourist\n# change data for year\n\ndf1=df1[(df1['Date']<='2020-10-31') & (df1['Date']>='2012-01-01')]\ndf1_year=df1.groupby(['year','month'])['sales'].sum().reset_index()\n\n# combine with left merge\n\ndf=df1_year.merge(df2_unpivoted, on=['year','month'], how='left')\n\n# Make date format from year and month\n\ndf['date']=df['year']+df['month']+\"01\"\ndf['date']=pd.to_datetime(df['date'], format='%Y%B%d')","9c87a0ed":"monthly=df.groupby('date')['sales'].sum()\nmonthly.resample('M').sum().plot()\nplt.title('Monthly Trend sales retail')\nplt.ylabel('Sales')\nplt.show()\n\nmonthly=df.groupby('date')['count_tourist'].sum()\nmonthly.resample('M').sum().plot()\nplt.title('Monthly Trend Tourist')\nplt.ylabel('Count of Tourist')\nplt.show()","ae47a8ff":"df1=df[['sales','count_tourist']]\nplt.scatter(df1['sales'],df1['count_tourist'])\nplt.title('sales vs count of tourist', fontsize=18)\nplt.ylabel('count of tourist', fontsize=16)\nplt.xlabel('sales', fontsize=16)","720c9ea5":"hplot = sns.distplot(df1['sales'], kde=False, color='blue', bins=100)\nplt.title('Sales', fontsize=18)\nplt.xlabel('Sales', fontsize=16)\nplt.ylabel('Frequency', fontsize=16)\n","fc9c21b2":"from scipy.stats.stats import pearsonr\ncorr, _ = pearsonr(df1['sales'],df1['count_tourist'])\nprint('Pearsons correlation: %.3f' % corr)","cfe05e0d":"from scipy.stats import spearmanr\ncorr, _ = spearmanr(df1['sales'],df1['count_tourist'])\nprint('Spearmans correlation: %.3f' % corr)\n","a5405c13":"#The correlation pearson and spearman > 0,9 that mean sales retail (X) in Bali have correlation with count of tourist","7780b707":"## Trend Sales","f2fa7e50":"### Tourist by Country and Area","7291ca5c":"# Correlation Sales vs Count of Tourist","5fd7ef34":"## Tourist in Bali\n### Trend Tourist","7b868d87":"### Spearman Correlation","a65e9f45":"# Trend Sales Retail","962e0b06":"# Combine data sales and tourist in Bali\n","8b42129f":"### Pearson Correlation","2aa94bd7":"# Monthly Trend Sales and Count of Tourist","6d7a85fa":"## Correlation","495f9ab2":"I only use data from 2012 until October 2020"}}