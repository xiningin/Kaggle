{"cell_type":{"6a002996":"code","ef092c4c":"code","09b8114e":"code","deeb5dba":"code","0a9f0b17":"code","0eca5681":"code","18a28a2d":"code","03b1e1eb":"code","ea2e57a5":"code","c264a219":"code","ce374438":"code","a1b3dff9":"code","9a4be7ba":"code","afec25be":"code","3143bd72":"code","4496f234":"code","30add5f9":"code","6d3712b2":"code","df67dff7":"code","c6a2ae35":"code","8552db83":"code","c8dc6bd0":"code","01fef248":"code","5151207f":"code","69b502ba":"code","a640151a":"code","e3e7f20f":"code","e2a3fead":"code","5ef6e887":"code","69c5fb42":"code","af6fb4da":"code","4cd1c024":"code","f7d2b2d9":"code","e30e9bbf":"code","b72f5bc2":"code","b0ec9fc3":"code","ba81ea99":"code","9daf11bf":"markdown","8a904d4c":"markdown","983ad4a1":"markdown","39709d79":"markdown","85591d7a":"markdown","29edb569":"markdown","8b407ad5":"markdown","455aba24":"markdown","583ced2e":"markdown","e0312d49":"markdown","febe9a1f":"markdown","ca218267":"markdown","b93839ae":"markdown","e9677cd4":"markdown","4e9a83e5":"markdown","43e339e9":"markdown","d96f3632":"markdown","b0070e40":"markdown","df543378":"markdown","65834b8f":"markdown","e1cd7157":"markdown","361a00cd":"markdown","ba101264":"markdown","b9cd2812":"markdown","bd419b29":"markdown"},"source":{"6a002996":"import pandas as pd\nimport numpy as np\nimport os\nimport matplotlib.pyplot as plt\nimport seaborn as sns\n\nfrom scipy import stats\nfrom scipy.stats import norm\n\nimport warnings\nwarnings.filterwarnings('ignore')","ef092c4c":"class config:\n    data_root = '..\/input\/siim-isic-melanoma-classification'","09b8114e":"train = pd.read_csv(config.data_root + '\/train.csv')\ntest = pd.read_csv(config.data_root + '\/test.csv')","deeb5dba":"print('Size of train data: ', train.shape)\nprint('Size of test data: ', test.shape)","0a9f0b17":"train.head(5)","0eca5681":"test.head(5)","18a28a2d":"print('Cases of melanoma in train data',len(train[train.target == 1]) \/ len(train) * 100,'%')","03b1e1eb":"print('Male in train data:',len(train[train.sex == 'male'])\/len(train))\nprint('Male in test data:',len(test[test.sex == 'male'])\/len(test))","ea2e57a5":"print('Unique patients in train data:', len(train.patient_id.unique())\/len(train))\nprint('Unique patients in test data:', len(test.patient_id.unique())\/len(test))","c264a219":"print('Matual patients count',len(set(list(train.patient_id.unique())).intersection(list((test.patient_id.unique())))))","ce374438":"train[train.sex.isnull()].head(8)","a1b3dff9":"len(train[(train.sex.isnull()) & (train.age_approx.isnull())]) == len(train[train.sex.isnull()])","9a4be7ba":"train[(train.sex.isnull()) & (train.age_approx.isnull())].patient_id.unique()","afec25be":"len(train[train.anatom_site_general_challenge.isnull()])\/len(train)","3143bd72":"train.anatom_site_general_challenge.unique()","4496f234":"train['anatom_site_general_challenge'] = train['anatom_site_general_challenge'].fillna('unknown')\ntest['anatom_site_general_challenge'] = test['anatom_site_general_challenge'].fillna('unknown')\n\ntrain['age_approx'] = train['age_approx'].fillna(train['age_approx'].mean())\ntest['age_approx'] = test['age_approx'].fillna(test['age_approx'].mean())\n\ntrain['sex'] = train['sex'].fillna('female')\ntest['sex'] = test['sex'].fillna('male')","30add5f9":"train[train.isnull().any(1)]","6d3712b2":"test[test.isnull().any(1)]","df67dff7":"plt.figure(figsize = (10,5))\nplt.subplot(1,2,1)\nsns.distplot(train.age_approx,fit = norm)\nplt.title('Age distribution in train data')\nplt.subplot(1,2,2)\nsns.distplot(test.age_approx,fit = norm)\nplt.title('Age distribution in test data')\nplt.show()","c6a2ae35":"patients_age = pd.DataFrame(train.groupby(['patient_id'])['age_approx'].max())\npatients_age.head(5)","8552db83":"patients_disease = pd.DataFrame(train.groupby(['patient_id'])['target'].sum())\npatients_disease.head(5)","c8dc6bd0":"patients_gender = pd.DataFrame(train.groupby(['patient_id'])['sex'].max())\npatients_gender.head(5)","01fef248":"patients_history = patients_age.merge(patients_disease, on = 'patient_id')\npatients_history = patients_history.merge(patients_gender, on = 'patient_id')\npatients_history.head(5)","5151207f":"plt.figure(figsize = (10,5))\nplt.subplot(1,2,1)\nsns.distplot(patients_history[patients_history.target == 0].age_approx,fit = norm)\nplt.title('Benign cases')\nplt.subplot(1,2,2)\nsns.distplot(patients_history[patients_history.target != 0].age_approx,fit = norm)\nplt.title('Melanoma')\nplt.show()","69b502ba":"plt.figure(figsize = (10,5))\nplt.subplot(1,2,1)\nstats.probplot(patients_history[patients_history.target == 0].age_approx, plot=plt)\nplt.subplot(1,2,2)\nstats.probplot(patients_history[patients_history.target != 0].age_approx, plot=plt)\nplt.show()","a640151a":"print('M0 = ',patients_history[patients_history.target == 0].age_approx.mean())\nprint('M1 = ',patients_history[patients_history.target != 0].age_approx.mean())\n\nprint('D0 = ',patients_history[patients_history.target == 0].age_approx.var())\nprint('D1 = ',patients_history[patients_history.target != 0].age_approx.var())","e3e7f20f":"from scipy.stats import ttest_ind","e2a3fead":"t,p = ttest_ind(patients_history[patients_history.target == 0].age_approx,patients_history[patients_history.target != 0].age_approx)\n\nprint('p-value = ', p)\nprint('p-value < 0.05 - ', p<0.05)","5ef6e887":"train[train.target == 1].groupby(['anatom_site_general_challenge'])['target'].count()","69c5fb42":"plt.figure(figsize=(15, 15))\n\nfor i,site in enumerate(list(train.anatom_site_general_challenge.unique())):\n    plt.subplot(3,3,i+1)\n    sns.distplot(train[(train.anatom_site_general_challenge == site) & (train.target == 1)].age_approx,fit = norm)\n    plt.title('Age distribution with {} melanoma'.format(site))\nplt.show()","af6fb4da":"head_age = train[(train.target == 1) & (train.anatom_site_general_challenge == 'head\/neck')].age_approx\nupper_age = train[(train.target == 1) & (train.anatom_site_general_challenge == 'upper extremity')].age_approx\nlower_age = train[(train.target == 1) & (train.anatom_site_general_challenge == 'lower extremity')].age_approx\ntorso_age = train[(train.target == 1) & (train.anatom_site_general_challenge == 'torso')].age_approx","4cd1c024":"(F,p_value) = stats.f_oneway(head_age,upper_age,lower_age,torso_age)\nprint('\\nF = {:.2f}, p-value = {:.4f}'.format(F,p_value)) ","f7d2b2d9":"v = [head_age,upper_age,lower_age,torso_age]\navg = [a.mean() for a in v]\nerr = [1.96 * (np.std(a)\/np.sqrt(len(a))) for a in v]","e30e9bbf":"plt.figsize = (30,45)\nplt.errorbar(x = ['head\/neck','upper extremity','lower extremity','torso'], y = avg, yerr = err, color=\"black\", capsize=3, marker=\"s\", markersize=5, mfc=\"red\", mec=\"black\",fmt = 'o')\nplt.title('The age of the patient with melanoma at various sites')\nplt.grid()\nplt.xlabel('Site')\nplt.ylabel('Age')\nplt.show()","b72f5bc2":"p = 0.05\nn = 4\n\nc = (n-1)*n\/2\np = p \/ c\n\nprint(\"new p = {:.10f}\".format(p))","b0ec9fc3":"site_target = train[train.target == 1][(train.anatom_site_general_challenge == 'head\/neck') | (train.anatom_site_general_challenge == 'upper extremity') | (train.anatom_site_general_challenge == 'lower extremity') | (train.anatom_site_general_challenge == 'torso')]","ba81ea99":"import statsmodels.stats.multicomp as multi\n\ntest = multi.MultiComparison(site_target['age_approx'], site_target['anatom_site_general_challenge'])\nres = test.tukeyhsd(alpha = p)\nsummary = res.summary()\nsummary","9daf11bf":"###  TukeyHSD\n\nhttps:\/\/en.wikipedia.org\/wiki\/Tukey%27s_range_test","8a904d4c":"I think that some areas of the body may be more at risk for sunburn. Thus, the age of patients with disease at different sites may differ.","983ad4a1":"### Let's look at data","39709d79":"## Data Analysis","85591d7a":"### Visualisation","29edb569":"We may also notice that skipped age and gender are found together:","8b407ad5":"### Read data","455aba24":"Only two people need this information","583ced2e":"Overall, the age distribution in the data is close to normal distribution.","e0312d49":"p-value < 0.05 means that we reject the hypothesis of equality of means. Indeed, age is one of the susceptible risk factors, so we observe statistically significant differences.","febe9a1f":"Hello everyone!\n\nI recently joined a competition and decided to explore the table data provided. I think it can also be helpful in solving and understanding the problem. Wanna share my notes.\n\nIt is my first experience applying theory in statistic. So correct me if i make something wrong.\n\nHope this kernel will be helpful for you!","ca218267":"***Multiple comparisons problem*** occurs when we compare many pairs of samples\n\nhttps:\/\/en.wikipedia.org\/wiki\/Multiple_comparisons_problem\n\n### Bonferroni correction \n\nhttps:\/\/en.wikipedia.org\/wiki\/Bonferroni_correction","b93839ae":"### Student's t-test\n\nhttps:\/\/en.wikipedia.org\/wiki\/Student%27s_t-test\n\nSample distributions are normal and we can use Student's t-test. We test hypothesis 0 that the means in these samples are equal.\n\nH0: M0=M1\n\nH1: M0!=M1\n\n","e9677cd4":"So, we have table where is information about patient. \nI want to test the effect of age on melanoma risk.\n\nFirst check age distribution in groups with people without melanoma and with this disease.","4e9a83e5":"I will use only four sites: 'head\/neck', 'upper extremity','lower extremity', 'torso'","43e339e9":"We see that the age is different in the two pairs of samples. It can be assumed that the site plays an important role in the appearance of melanoma.","d96f3632":"So, we replace missing values with mean value and random value. \n\nFor missing site we create new value  - unknown","b0070e40":"We do not have very many unique patients and all patients in the train and test are different.","df543378":"### Q-Q Plot\nhttps:\/\/en.wikipedia.org\/wiki\/Q\u2013Q_plot","65834b8f":"\u0421reate table with information about each patient:","e1cd7157":"## One-way ANOVA test\n\n> The one-way ANOVA tests the null hypothesis that two or more groups have the same population mean. The test is applied to samples from two or more groups, possibly with different sizes.\n\nhttps:\/\/en.wikipedia.org\/wiki\/One-way_analysis_of_variance","361a00cd":"### Test connection between the location of a malignant mole and age","ba101264":"### How are age and disease risk related?","b9cd2812":"p - value < 0.05 indicates that there are statistically significant differences between at least two groups.","bd419b29":"Anatom_site_general_challenge feature"}}