{"cell_type":{"49daa10e":"code","3642167c":"code","27b80ca2":"code","131fc85e":"code","d7efef42":"code","4f9f2893":"code","d2981876":"code","b11326ae":"code","4f203401":"markdown","b7312bc3":"markdown"},"source":{"49daa10e":"# view raw json data\n!head -n 2 ..\/input\/danbooru2020small\/metadata\/2020000000000000.json\n!tail -n 2 ..\/input\/danbooru2020small\/metadata\/2020000000000000.json","3642167c":"# utils for visualization\nimport torch\nimport numpy as np\nimport matplotlib.pyplot as plt\nimport torchvision.transforms.functional as F\nimport glob\nfrom torchvision.utils import make_grid\nfrom torchvision.io import read_image\n\nplt.rcParams[\"savefig.bbox\"] = 'tight'\n\n\ndef show(imgs):\n    if not isinstance(imgs, list):\n        imgs = [imgs]\n    fix, axs = plt.subplots(ncols=len(imgs), squeeze=False)\n    for i, img in enumerate(imgs):\n        img = img.detach()\n        img = F.to_pil_image(img)\n        axs[0, i].imshow(np.asarray(img))\n        axs[0, i].set(xticklabels=[], yticklabels=[], xticks=[], yticks=[])\nkeys = []\nimages = []\n\nfor filename in glob.glob('..\/input\/danbooru2020small\/images\/*.jpg'):\n    images.append(read_image(filename))\n    keys.append(filename[-4])","27b80ca2":"grid = make_grid(images[:6], nrow=3, padding=2, scale_each=True)\nshow(grid)","131fc85e":"import pandas as pd\nimport json\nimport os\n\ndata = []\n\nwith open('..\/input\/danbooru2020small\/metadata\/2020000000000000.json') as f:\n  for line in f:\n    data.append(json.loads(line))\n\n# for file in folder:\ndf = pd.json_normalize(data)\ndf.size","d7efef42":"df","4f9f2893":"print(df.columns.tolist())\ndf[[\"score\", \"up_score\", \"down_score\"]] = df[[\"score\", \"up_score\", \"down_score\"]].apply(pd.to_numeric)\ndf.dtypes","d2981876":"import seaborn as sns\n\n# Apply the default theme\nsns.set_theme()\n\nsns.jointplot(data=df, x=\"up_score\", y=\"down_score\", hue=\"rating\")","b11326ae":"sns.catplot(data=df, kind='violin', x=\"rating\", y=\"up_score\")","4f203401":"## Viewing the dataset\n\nThis dataset is seperated into two main parts: \n* The directory of jpg images\n* The directory of metadata json files\n\nHowever, the json data does not come preformatted to load into pandas. So we must first perform a few tricks to make it valid json.","b7312bc3":"# Anime Art [Danbooru2020] Starter Notebook\n"}}