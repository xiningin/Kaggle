{"cell_type":{"af921df9":"code","8f57ef51":"code","eba6ad64":"code","930126bf":"code","24f738c4":"code","0e63278b":"code","b1b29b2b":"code","30f90110":"code","8cf99cfa":"code","1e0b6e5d":"code","f88229ce":"code","8daab036":"code","749705aa":"code","70f0c76c":"code","d10f08f2":"code","f9090b9b":"code","a17a2a54":"code","5e78e91c":"code","015418b5":"code","ee887aea":"code","4422a1dd":"code","9fe9ed4b":"code","69798325":"code","6ffcc564":"code","696a2cea":"markdown","8b3e8dc9":"markdown","751e90a5":"markdown","44659dc2":"markdown","f56a95f6":"markdown","2a93ce09":"markdown","0fb7b637":"markdown","d3b833f2":"markdown","bb089628":"markdown","3de3cf3e":"markdown","785bb532":"markdown","a63d5dd8":"markdown","8521ecbf":"markdown","e2c60d55":"markdown","616b5729":"markdown","af5327fc":"markdown","fa46a6a4":"markdown"},"source":{"af921df9":"import numpy as np\nimport pandas as pd","8f57ef51":"import plotly.express as px\nimport seaborn as sns\nimport matplotlib.pyplot as plt\n%matplotlib inline","eba6ad64":"from sklearn.model_selection import train_test_split\nfrom sklearn.linear_model import LinearRegression\nfrom sklearn import metrics","930126bf":"df = pd.read_csv('..\/input\/USA_Housing.csv', engine='python')","24f738c4":"df.head()","0e63278b":"df.info()","b1b29b2b":"df.describe()","30f90110":"def get_state(x):\n    words = [i for i in x.split(' ')]\n    return words[::-1][1]\n\nregions = {'New England':['CT','MA','ME','NH','RI','VT'],'Mid Atlantic':['PA','NY','DE','NJ','MD'],\n              'South':['AL','AR','KY','GA','MS','LA','SC','NC','VA','WV','TN'],'Texas':['TX'],'Florida':['FL'],\n               'Midwest':['IA','IL','IN','MI','MN','WI','OH','MO'],\n              'Great Plains':['SD','ND','KS','NE','OK'],'Rocky Mountains':['CO','MT','ID','WY'],\n              'South West':['NV','AZ','NM','UT'],'California':['CA'],'Pacific Northwest':['WA','OR'],'Alaska':['AK'],\n              'Hawaii':['HI'],'Commonwealth':['DC','MH'],'Military':['AE','AA','AP']}\n   \ndef get_region(x):\n    for i in list(regions.keys()):\n        if x in regions[i]:\n            return i","8cf99cfa":"list(regions.keys())","1e0b6e5d":"df['State'] = df['Address'].apply(lambda x:get_state(x))\ndf['Region'] = df['State'].apply(lambda x:get_region(x))","f88229ce":"df.head()","8daab036":"dfreg = df[['Region','State','Price']]\n\nregionmean = dfreg.groupby('Region').mean()\n\nAvPerRegion = pd.DataFrame(regionmean).sort_values('Price')\n\nAvPerRegion.plot(kind='bar',figsize=(16,7),fontsize=20)\nplt.xlabel('Region', fontsize=20)\nplt.ylabel('Avg. house price', fontsize=20)\nplt.suptitle('Avg. House Price by Region', fontsize=30)","749705aa":"stateprice = dfreg.groupby('State').mean()\nstateprice.columns = ['Average house price']\n\nstatecodes = [i for i in stateprice.index]\n\npx.choropleth(data_frame = stateprice,\n               locations = statecodes,\n              locationmode = 'USA-states',\n              scope='usa',\n             color = 'Average house price',\n             color_continuous_scale = 'Blues')","70f0c76c":"df.head()","d10f08f2":"X = df[['Avg. Area Income','Avg. Area House Age','Avg. Area Number of Rooms','Avg. Area Number of Bedrooms','Area Population']]\ny = df['Price']","f9090b9b":"X_train, X_test, y_train, y_test = train_test_split(X, y, test_size=0.35, random_state=100)","a17a2a54":"lm = LinearRegression()","5e78e91c":"lm.fit(X_train,y_train)","015418b5":"coef = pd.DataFrame(lm.coef_,X.columns,columns=['Coefficients'])\ncoef.index.name = 'Independent variables'\ncoef","ee887aea":"predictions = lm.predict(X_test)\npredictions","4422a1dd":"sns.set_style('darkgrid')\nsns.scatterplot(y_test,predictions).set(xlabel='Price',ylabel='Predicted Price')","9fe9ed4b":"sns.distplot(y_test-predictions,bins=30).set(xlabel='Price',ylabel='Error')","69798325":"mae = metrics.mean_absolute_error(y_true=y_test,y_pred=predictions)\nmse = metrics.mean_squared_error(y_true=y_test,y_pred=predictions)\nrmse = np.sqrt(mse)","6ffcc564":"errors = pd.DataFrame([mae,mse,rmse],columns=['error measure'],index=['mae','mse','rmse'])\nerrors","696a2cea":"#### For data manipulation and analysis","8b3e8dc9":"## Linear Regression","751e90a5":"#### Below we then calculate the error and plot the amount of house prices against each error as we can see, the majority of house prices experienced little error as the error is normally distributed, this means that the model worked well","44659dc2":"# Assessing the performance of the Linear Regression Model","f56a95f6":"#### For data visualisation (use the % magic method to see visualisations in jupyter notebook)","2a93ce09":"# USA Housing data analysis\nThe goal of this analysis is to determine the main driving factors of USA Housing\nWe will be analysing data across all states and regions in the US.\n - For numerical factors, we will use a Linear Regression Model to predict the effect of changes in each factor\n - For categorical factors, we will use data exploration and visualisation to contextualize the data.","0fb7b637":"# Conclusions to be made from the Linear Regression Model:\n - Firstly, \n     the independent factors that have most effect on the price of a home in any given area are:\n     - Avg. Area House Age\n     - Avg. Area Number of Rooms\n     the independent factor that has a moderate effect on the price of a home in any given area is:\n     - Avg. Area Income \n     the independent factors that have a negligable effect on the price of a home in any given area are:\n     - Avg. Area Number of Rooms\n     - Area Population\n - More specifically,   \n     - From a dollar increase in Avg. Area Income, we can expect a 21.61 dollar increase in the average price of a home in that area.\n     - From a 1 year increase in Avg. Area House Age, we can expect a 165804.74 dollar increase in the price of a home in that area.\n     - If the average number of rooms across the area increases by one, we can expect an increase of 120921.53 dollars in the price of a home in that area.\n     - If the average number of bedrooms across the area increases by one, we can expect a decrease of 16.56 dollars in the price of a home in that area.\n     - If the area population increases by one, we can expect an increase of 15.21 dollars in the price of a home in that area.","d3b833f2":"#### Looking at the data there are no empty values and the columns are the correct data type.\n#### A change that needs to be made however, is that we need to format the address in a way that we can use to analyse the data.\n#### To do this, we can extract the state and assign it to a region.\n#### From this information we can then plot the avg. house price per region.","bb089628":"# Numerical Factors\n - Avg. area income\n - Avg. area House Age\n - Avg. area number of rooms\n - Area population","3de3cf3e":"# Categorical Factors\n - Location (at both a regional and state level)","785bb532":"#### A breakdown of average house price per state supports the regional analysis","a63d5dd8":"#### For the machine learning process","8521ecbf":"#### Here we plot the actual price against the predicted price ","e2c60d55":"#### read the data into a dataframe","616b5729":"#### Lastly I use metrics from the sklearn library in order to measure the effectiveness of the linear regression model","af5327fc":"#### Using train_test_split to get my training and test values and then fitting the the linear regression model","fa46a6a4":"# Data cleaning"}}