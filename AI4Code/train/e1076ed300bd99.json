{"cell_type":{"2df3a8ff":"code","ba814b19":"code","780c31ba":"code","5bd6d8f5":"code","b9d1cb5b":"code","4b607742":"code","30fa6426":"code","42b22245":"code","fc53b054":"code","20a612c9":"code","4846d4fe":"code","15289aa1":"code","58619d7f":"code","80134c99":"code","ffb38037":"code","80537ebf":"code","d816236e":"code","648d06af":"code","26e960f5":"code","da71bd3c":"code","870a473b":"code","c05a9a1a":"code","5db821bd":"code","6863ebe2":"code","143c5698":"markdown","a814db26":"markdown","eb225398":"markdown","f80ca5ce":"markdown","b64fa1bf":"markdown","0bbe185c":"markdown","460004e8":"markdown","82afa2d5":"markdown","30b2de02":"markdown","9812eefd":"markdown","b4db6a82":"markdown","c45cefaa":"markdown","8b4a71bf":"markdown","e0e804a9":"markdown","63588ac0":"markdown","01bd4f09":"markdown","bb9e6b27":"markdown","bb39b011":"markdown"},"source":{"2df3a8ff":"'Bismillah'","ba814b19":"#We begin with the usual importing of all the required libraries for EDA and visualization\n\nimport pandas as pd\nimport numpy as np\nimport seaborn as sns\nimport matplotlib.pyplot as plt\nfrom pandas_profiling import ProfileReport","780c31ba":"import os\nfor dirname, _, filenames in os.walk('\/kaggle\/input'):\n    for filename in filenames:\n        print(os.path.join(dirname, filename))","5bd6d8f5":"#Then we load our dataset\n\ndf = pd.read_csv('\/kaggle\/input\/data-science-nigeria-patient-treatment\/train.csv') #I will only be working on the test set for now.","b9d1cb5b":"#let's see what we have here\n\ndf.head()","4b607742":"df = df.drop('patient_id_', axis=1)\ndf.head(2)","30fa6426":"#converting categorical variable -sex \n\ndf.SEX.replace({'F': 0, 'M':1}, inplace=True) #df.SEX calls the SEX column and inplace=True do the replacing\ndf.head(2)","42b22245":"#calling pandas profile report on our dataset\n\ndf.profile_report()","fc53b054":"#first let's see the shape of our data\n\ndf.shape","20a612c9":"#statistical inference of our dataset\n\ndf.describe()","4846d4fe":"#checking for unique values\n\ndf.nunique()","15289aa1":"#checking for missing values. \n#This is expected to be zero all through based on our profile report \n# However no harm in checking again\n\ndf.isnull().sum() ","58619d7f":"#counting the distribution of zeros and ones\n#in the source column\n\ndf.SOURCE.value_counts()","80134c99":"#grouping by the our target \n#we are doing this to check for imbalances in the dataset\n\ndf.groupby('SOURCE').mean()","ffb38037":"df.groupby('SOURCE').sum()","80537ebf":"#Lets look at the correlation between the features\n\ndf.corr() #the default is pearson, you can try other methods too","d816236e":"#lets first look more into the relationship between the features\n#using the correlation heatmap\n#this is also captured in the profile report.\n\n#USEFUL HINT HERE: you can use semi-colon at the end of your \n#heatmap code instead of calling plt.show()\n\nplt.figure(figsize=(10,8))\nsns.heatmap(df.corr(), cmap='coolwarm',annot=True); ","648d06af":"#You know we can actually rank the correlation of \n#the features with the target\n\ndf.corr()['SOURCE'].sort_values(ascending=False) #calculates the correlation #ranks the values","26e960f5":"sns.histplot(data=df); #plots a combined histogram for all the features","da71bd3c":"#Plotting histogram for all the features in the dataset\n\nfig, axes = plt.subplots(nrows = 5, ncols = 2)    # axes is 2d array (5x2)\naxes = axes.flatten()         # Convert axes to 1d array of length 10\nfig.set_size_inches(15, 30)\n\nfor i, column in enumerate(df.loc[:, df.columns != 'SOURCE'], 1):\n    plt.subplot(5,2,i)\n    sns.set_style(\"darkgrid\", {\"grid.color\": \".6\", \"grid.linestyle\": \":\"})\n    sns.histplot(df[column], color='#17becf') ","870a473b":"#Boxplot -- Source vs all features \n#to identify outliers \n\nfig, axes = plt.subplots(nrows = 5, ncols = 2)    # axes is 2d array (5x2)\naxes = axes.flatten()         # Convert axes to 1d array of length 10\nfig.set_size_inches(15, 30)\n\nfor i, column in enumerate(df.loc[:, df.columns != 'SOURCE'], 1):\n    plt.subplot(5,2,i)\n    sns.set_style(\"whitegrid\")\n    sns.boxplot(x = df['SOURCE'], y = df[column], palette=\"flare\")\n    sns.despine()","c05a9a1a":"#lets plot the means by the target column\n\nfig, axes = plt.subplots(nrows = 5, ncols = 2)    # axes is 2d array (5x2)\naxes = axes.flatten()         # Convert axes to 1d array of length 10\nfig.set_size_inches(15, 30)\n\nfor i, column in enumerate(df.loc[:, df.columns != 'SOURCE'], 1):\n    plt.subplot(5,2,i)\n    sns.barplot(x = df['SOURCE'], y = df[column], palette=(\"ch:s=.25,rot=-.25\") )","5db821bd":"df.head(2)","6863ebe2":"#Finally lets do a pairplot for all the features\nsns.set_context(\"notebook\", font_scale=1.5, rc={\"lines.linewidth\": 2.5})\nsns.pairplot(df, hue='SOURCE');","143c5698":"Here we can see some signs of imbalances in the dataset especially when we summed the dataset. ","a814db26":"# Exploratory Data Analysis \n\nWhile the profile report gives us useful insights about the dataset, it is still prudent to still explore the dataset so as to identify important features in the dataset and remove noise from the dataset that may get in the way of the accuracy of our conclusions when we work on our models. ","eb225398":"# Some Insights from the Profile Report:\n\n- We have no missing values \n- Most of the patients are 0 (outpatient)\n- More males than females\n- HAEMATOCRIT is highly correlated with HAEMOGLOBINS and ERYTHROCYTE\n- MCH is highly correlated with MCHC and MCV\n- ........... see warnings for the remainder part\n- LEUCOCYTE, THROMBOCYTE, and the source column don't correlate with any of the features.\n\nSee these 2 links on how to treat correlated features before training your model.\n\n1. https:\/\/towardsdatascience.com\/feature-selection-with-pandas-e3690ad8504b\n2. https:\/\/www.projectpro.io\/recipes\/drop-out-highly-correlated-features-in-python","f80ca5ce":"Inferences\n- Averagely, the lab score of HAEMOTOCRIT, HAEMOGLOBINS, ERYTHROCYTE, and THROMBOCYTE features are higher in outpatients.\n- Also, MCH, MCHC, and MCV are more or less balanced and less informative. Another reason for you to consider dropping this particular features.\n- The average age of outcare patients is lesser.","b64fa1bf":"# **Data Science Nigeria Patient Treatment**\nMedical treatments and surgeries can be categorised into inpatient and outpatient procedures.","0bbe185c":"# **Evaluation**\n\nThe evaluation metric for this competition is Mean F1-Score. The F1 score, commonly used in information retrieval, measures accuracy using the statistics precision p and recall r. Precision is the ratio of true positives  to all predicted positives . Recall is the ratio of true positives to all actual positives . \n\nThe F1 metric weights recall and precision equally, and a good retrieval algorithm will maximize both precision and recall simultaneously. Thus, moderately good performance on both will be favored over extremely good performance on one and poor performance on the other.","460004e8":"# **VISUALIZATION**","82afa2d5":"Inferences\n- All features are with outliers except for age and sex\n- Most of the patients are between are in there 30s and 60s\n- In most cases, outpatients have higher score in there lab results than inpatients.\n- Older patients are relatively more likely to be inpatients than younger patients","30b2de02":"# Conclusion\n\nThere are many ways of carrying out EDA and visualization. I had to use google most of the time, especially for the visualization part. Here are some things you can try when training your model...\n\n- training all the features at first (exclude the patient id)\n- drop some features before training, 1, 2, 3 features\n- compare the results \n- which model is doing better\n- overfitting and underfitting; pipelines and cross-validation (you can google how to do them or checkout the free machine learning courses - intro and intermediate on kaggle)\n- etc\n\nSome generally useful tips\n\n- Don't give up when your code throws up error, copy the error and paste it on google, there is a very high chance that you are not the first to experience the error\n- and someone somewhere already solved it.\n- The use of tab button to complete your typing.\n- Learn shortcuts, the more shortcuts you know, the faster you work\n- reading libraries documentation once in a while\n- **Google is your friend.**\n- `input('Please Enter more useful tips here: ')`\n\nThank you for reading my notebook.\n\nYour G, <br>\nAbdul-Baaqi","9812eefd":"From the headings of the dataset, we can immediately see that we won't be needing the patient_id for this analysis. This is because it plays no role in predicting whether a patient will be an inpatient or outpatient. Even the host did not include it in the data fields on kaggle, to show you how 'unimportant' it is. Lol. So, what do we say to it? *getat* (we drop it).","b4db6a82":"Now that we have all our variables on the same *wave length*, time to begin our **Exploratory Data Analysis (EDA)**. We will be using one of the easiest and coolest ways to see what our data says. We will be using pandas profiling. Why Pandas_Profiling? Basically it gives you a nice overview of the dataset with a cool interface and it shows you some quick warning (well, I prefer to call them insights) on your dataset.","c45cefaa":"For Correlation, the closer to 1, the more correlated the feature is with the target. The positive or negative value determines if it is positively correlated or negatively correlated. Some inferences:\n\n- LEUCOCYTE and AGE are postively correlated with target\n- ERYTHROCYTE, THROMBOCYTE, HAEMOGLOBINS and HAEMATOCRIT are negatively correlated with target\n- weak correlation found between SEX, MCHC, MCH, and MCV and target\n\nYou *may* want to drop the features with low correlation when training your model","8b4a71bf":"Let's see some pictures ","e0e804a9":"Good day everyone and welcome to my first notebook.\n\nMy name is Abdul-Baaqi\n\nHere, I will be sharing with you some Exploratory Data Analysis and visualizations I did to understand the data we were provided with by the host of this competition. However, before proceeding, I will like to thank the Data Science Nigeria (DSN) team for the opportunity they have provided us with, learning machine learning (feel the ryhme? lol) in a live class with hands-on project, support and a kaggle competition at the end, all for free is hard to comeby these days. Thank you DSN.\n\nAlso, I look forward to contributions from us all on how to better this notebook. Feel free to ask me about any aspect of the notebook you don't understand. Thank you.\n\nNow, back to our notebook. ","63588ac0":"# **Description of the project as stated in the overview**\n\nIn today\u2019s world of automation, the skills and knowledge of a person could be utilized at the best places possible by automating tasks wherever possible. As a part of the HealthIsWealth hospital automation system, you have been contracted as a professional data scientist who will build a system that would predict and estimate whether the patient should be categorized as an incare patient or an outcare patient with the help of several data points about the patients, their conditions and lab tests.\n\nThe difference between an inpatient and outpatient care is how long a patient must remain in the facility where they have the procedure done.\n\nInpatient care requires overnight hospitalization. Patients must stay at the medical facility where their procedure was done (which is usually a hospital) for at least one night. During this time, they remain under the supervision of a nurse or doctor.\n\nPatients receiving outpatient care do not need to spend a night in a hospital. They are free to leave the hospital once the procedure is over. In some exceptional cases, they need to wait while anesthesia wears off or to make sure there are not any complications. As long as there are not any serious complications, patients do not have to spend the night being supervised.","01bd4f09":"Relatively a balanced dataset","bb9e6b27":"Now, this looks more like something we can analyse. Next, we will be converting our only categorical variable (SEX) to ordinal. You can skip this step if you want but I did prefer all my variables on the same *wave length* before I start analysing or visualizing them. There are many cool ways to do this, I choose the easy life.","bb39b011":"Inferences\n- HAEMATOCRIT and ERYTHROCYTE are relatively symmetric\n- HAEMOGLOBINS, MCH, MCHC, and MCV are relatively skewed to the left(Negatively skewed) majorly because of the outliers   \n- LEUCOCYTE and THROMBOCYTE are relatively skewed to the right(positively) majorly due to outliers  \n- AGE and SEX are just there. lol"}}