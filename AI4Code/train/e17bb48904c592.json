{"cell_type":{"ad9504f0":"code","4471659e":"code","f1643d71":"code","c22df774":"code","c3178b0e":"code","7dc03313":"code","41d7f4fd":"code","0a17e7ac":"code","bba871a7":"code","16643123":"code","420ac4a3":"code","ecf97b5c":"code","9a065731":"code","027d01a7":"code","d9f7325b":"code","4a7c82b3":"code","37d8d883":"code","1bd67c61":"code","60629be1":"code","4355e6b6":"code","e61f5a7d":"code","ee7e80b0":"code","ee5431a3":"code","e0a39d15":"code","81d7bc50":"code","a8d09afa":"code","4c4ce42a":"code","22e5eb54":"code","a295bbf4":"code","22fdca4a":"code","943b9a58":"code","e528e299":"code","06b9930c":"code","3f8d2e4a":"code","16513656":"code","7f65cec6":"code","e1bdf550":"code","298c0b7b":"code","dd59d9f5":"code","be86a098":"code","28e3af0c":"code","925d5b13":"code","df126af1":"code","4c9df7b9":"code","a943710b":"code","a2293c70":"code","46d80b71":"code","ad18c0a7":"code","5e3795c2":"code","f8e193d4":"code","4734ba75":"code","38e9172e":"markdown","b71768c4":"markdown","395f1c73":"markdown","ad1eb622":"markdown","b63ff777":"markdown","4d849aba":"markdown","a203e6cc":"markdown","eb3cd5e5":"markdown","ded5ddbd":"markdown","a85610a9":"markdown","95502e3a":"markdown","7bc92f1e":"markdown","971c6cef":"markdown","616b60db":"markdown","a0da7746":"markdown","9ef4d92d":"markdown"},"source":{"ad9504f0":"! pip install openpyxl -q","4471659e":"import numpy as np # linear algebra\nimport pandas as pd # data processing, CSV file I\/O (e.g. pd.read_csv)\nimport os\nimport matplotlib.pyplot as plt\nimport seaborn as sns\nsns.set_style('whitegrid')","f1643d71":"def format_float(value):\n    return f'{value:,.3f}'\n\npd.options.display.float_format = format_float","c22df774":"dtypes = {\n    \"apbdindex\": \"object\",\n    \"kodesatker\": \"object\",\n    \"kodepemda\": \"object\",\n    \"namapemda\": \"object\",\n    \"tahunanggaran\": \"int32\",\n    \"bulan\": \"int32\",\n    \"tglpengiriman\": \"object\",\n    \"kodedata\": \"int8\",\n    \"statusdata\": \"int8\",\n    \"jeniscoa\": \"int8\",\n    \"nomorperda\": \"object\",\n    \"tanggalperda\": \"object\",\n    \"namaaplikasi\": \"object\",\n    \"pengembangaplikasi\": \"object\",\n    \"kegiatanindex\": \"object\",\n    \"kodeurusanprogram\": \"object\",\n    \"namaurusanprogram\": \"object\",\n    \"kodeurusanpelaksana\": \"object\",\n    \"namaurusanpelaksana\": \"object\",\n    \"kodeskpd\": \"object\",\n    \"namaskpd\": \"object\",\n    \"kodeprogram\": \"object\",\n    \"namaprogram\": \"object\",\n    \"kodekegiatan\": \"object\",\n    \"namakegiatan\": \"object\",\n    \"kodefungsi\": \"int8\",\n    \"namafungsi\": \"object\",\n    \"kodeakunutama\": \"int8\",\n    \"namaakunutama\": \"object\",\n    \"kodeakunkelompok\": \"int8\",\n    \"namaakunkelompok\": \"object\",\n    \"kodeakunjenis\": \"int8\",\n    \"namaakunjenis\": \"object\",\n    \"kodeakunobjek\": \"int8\",\n    \"namaakunobjek\": \"object\",\n    \"kodeakunrincian\": \"int8\",\n    \"namaakunrincian\": \"object\",\n    \"kodeakunsub\": \"object\",\n    \"namaakunsub\": \"object\",\n    \"nilaianggaran\": \"float128\"\n}\n\n# load data dari panitia\nbangkalan = pd.read_csv(\"..\/input\/djp-master\/ipm_bangkalan.csv\", dtype=dtypes)\nbiaknumfor = pd.read_csv(\"..\/input\/djp-master\/ipm_biaknumfor.csv\", dtype=dtypes)\n\n# convert to datetime\nbangkalan['tglpengiriman'] = pd.to_datetime(bangkalan['tglpengiriman'])\nbiaknumfor['tglpengiriman'] = pd.to_datetime(biaknumfor['tglpengiriman'])\n\nbangkalan['tanggalperda'] = pd.to_datetime(bangkalan['tanggalperda'])\nbiaknumfor['tanggalperda'] = pd.to_datetime(biaknumfor['tanggalperda'])\n\n# replace nama fungsi\nbiaknumfor['namafungsi'] = biaknumfor['namafungsi'].replace('Ketertiban dan ketentraman', 'Ketertiban dan Ketentraman')\nbiaknumfor['namafungsi'] = biaknumfor['namafungsi'].replace('Ketertiban dan Keamanan', 'Ketertiban dan Ketentraman')\nbiaknumfor['namafungsi'] = biaknumfor['namafungsi'].replace('Perumahan dan fasilitas umum', 'Perumahan dan Fasilitas Umum')","c3178b0e":"bangkalan.info()","7dc03313":"biaknumfor.info()","41d7f4fd":"# load data Belanja dari http:\/\/www.djpk.kemenkeu.go.id\/?p=5412\ndtypes = {\n    \"kodepemda\": \"object\",\n    \"standarpemda\": \"object\",\n    \"namafungsi\": \"object\",\n    \"namajenis\": \"object\",\n    \"nilaianggaran\": \"float128\"\n}\nrealisasi_2018 = pd.read_excel(\"..\/input\/djp-master\/Realisasi-2018_perfungsi_perjenis_260221.xlsx\", sheet_name=\"Sheet2\", dtype=dtypes)\nrealisasi_2018['tahunanggaran'] = 2018\nrealisasi_2019 = pd.read_excel(\"..\/input\/djp-master\/Realisasi-2019_perfungsi_perjenis_260221.xlsx\", sheet_name=\"Sheet2\", dtype=dtypes)\nrealisasi_2019['tahunanggaran'] = 2019\n\n# merge\nrealisasi = pd.concat([realisasi_2018, realisasi_2019], ignore_index=True)\n\n# split into each kabupaten\nbelanja_bangkalan = realisasi[realisasi.standarpemda == 'Kab. Bangkalan']\nbelanja_biaknumfor = realisasi[realisasi.standarpemda == 'Kab. Biak Numfor']\n\n# delete row with fungsi == \"Fungsi Lainnya\"\nbelanja_bangkalan = belanja_bangkalan[~belanja_bangkalan['namafungsi'].isin(['Fungsi Lainnya'])].reset_index(drop=True)\nbelanja_biaknumfor = belanja_biaknumfor[~belanja_biaknumfor['namafungsi'].isin(['Fungsi Lainnya'])].reset_index(drop=True)\n\n# rename nama fungsi \"Ketertiban dan Keamanan\" menjadi \"Ketertiban dan Ketentraman\"\nbelanja_bangkalan['namafungsi'] = belanja_bangkalan['namafungsi'].replace(\"Ketertiban dan Keamanan\", \"Ketertiban dan Ketentraman\")\nbelanja_biaknumfor['namafungsi'] = belanja_biaknumfor['namafungsi'].replace(\"Ketertiban dan Keamanan\", \"Ketertiban dan Ketentraman\")\n\nbelanja_biaknumfor.head()","0a17e7ac":"belanja_bangkalan.groupby(['tahunanggaran','standarpemda','namafungsi']).sum()[['nilaianggaran']]","bba871a7":"belanja_biaknumfor.groupby(['tahunanggaran','standarpemda','namafungsi']).sum()[['nilaianggaran']]","16643123":"# load data Pendapatan Pajak dan Retribusi dari http:\/\/www.djpk.kemenkeu.go.id\/?p=5412\ndtypes = {\n    \"kodepemda\": \"object\",\n    \"standarpemda\": \"object\",\n    \"jenispajak\": \"object\",\n    \"nilai\": \"float128\"\n}\n\n# load data pendapatan per jenis pajak\npendapatan_pajak1 = pd.read_excel(\"..\/input\/djp-master\/Realisasi-2018-per-Jenis-Pajak_per-29Mar2020.xlsx\", sheet_name=\"Sheet1\", dtype=dtypes)\npendapatan_pajak1['tahun'] = 2018\npendapatan_pajak2 = pd.read_excel(\"..\/input\/djp-master\/Realisasi-2019-per-Jenis-Pajak_per-09-Desember-2020.xlsx\", sheet_name=\"Sheet2\", dtype=dtypes)\npendapatan_pajak2['tahun'] = 2019\n# concat pendapatan pajak\npend_pajak = pd.concat([pendapatan_pajak1, pendapatan_pajak2], ignore_index=True)\n# split by kabupaten\npend_pajak_bkl = pend_pajak[pend_pajak.namapemda == 'Kab. Bangkalan'].reset_index(drop=True)\npend_pajak_bn = pend_pajak[pend_pajak.namapemda == 'Kab. Biak Numfor'].reset_index(drop=True)\n\ndtypes = {\n    \"kodepemda\": \"object\",\n    \"namapemda\": \"object\",\n    \"jenisretribusi\": \"object\",\n    \"nilai\": \"float128\"\n}\nretr_pajak1 = pd.read_excel(\"..\/input\/djp-master\/Realisasi-2018-per-Jenis-Retribusi_per29Mar2020.xlsx\",\n                            sheet_name=\"Sheet2\", usecols=\"A:D\", dtype=dtypes)\nretr_pajak1['tahun'] = 2018\nretr_pajak2 = pd.read_excel(\"..\/input\/djp-master\/Realisasi-2019-per-Jenis-Retribusi_per-09-Desember-2020.xlsx\",\n                            sheet_name=\"Sheet2\", usecols=\"A:D\", dtype=dtypes)\nretr_pajak2['tahun'] = 2019\n# concat\nretr_pajak = pd.concat([retr_pajak1, retr_pajak2], ignore_index=True)\n# split by kabupaten\nretr_pajak_bkl = retr_pajak[retr_pajak.namapemda == \"Kab. Bangkalan\"].reset_index(drop=True)\nretr_pajak_bn = retr_pajak[retr_pajak.namapemda == \"Kab. Biak Numfor\"].reset_index(drop=True)\nretr_pajak_bn.head()","420ac4a3":"# pendapatan pajak bangkalan\npend_pajak_bkl.groupby(['tahun','jenispajak']).sum()[['nilai']]","ecf97b5c":"# pendapatan pajak biak numfor\npend_pajak_bn.groupby(['tahun','jenispajak']).sum()[['nilai']]","9a065731":"# retribusi pajak bangkalan\nretr_pajak_bkl.groupby(['tahun','jenisretribusi']).sum()[['nilai']]","027d01a7":"# retribusi pajak biak numfor\nretr_pajak_bn.groupby(['tahun','jenisretribusi']).sum()[['nilai']]","d9f7325b":"# Load data dari portal data http:\/\/www.djpk.kemenkeu.go.id\/portal\/data\/apbd\ndtypes = {\n    \"tahun\": \"int32\",\n    \"namaakunutama\": \"object\",\n    \"namaakunkelompok\": \"object\",\n    \"namaakunjenis\": \"object\",\n    \"nilaianggaran\": \"float128\",\n    \"nilairealisasi\": \"float128\",\n    \"percentage\": \"float64\"\n}\nportal_bkl = pd.read_excel(\"..\/input\/djp-master\/Portal Dataset Bangkalan 2018-2019.xlsx\", sheet_name=\"Sheet1\", dtype=dtypes)\nportal_bn = pd.read_excel(\"..\/input\/djp-master\/Portal Dataset Biak Numfor 2018-2019.xlsx\", sheet_name=\"Sheet1\", dtype=dtypes)\nportal_bn.head()","4a7c82b3":"# data portal bangkalan\nportal_bkl.groupby(['tahun','namaakunutama','namaakunkelompok']).sum()","37d8d883":"# data portal biak numfor\nportal_bn.groupby(['tahun','namaakunutama','namaakunkelompok']).sum()","1bd67c61":"bkl_2018 = bangkalan[bangkalan['tahunanggaran'] == 2018]\nplt.figure(figsize=(12,5), dpi=100)\nsns.scatterplot(data=bkl_2018, x=\"nilaianggaran\", y=\"tglpengiriman\");","60629be1":"bkl_2019 = bangkalan[bangkalan['tahunanggaran'] == 2019]\nplt.figure(figsize=(12,5), dpi=100)\nsns.scatterplot(data=bkl_2019, x=\"nilaianggaran\", y=\"tglpengiriman\");","4355e6b6":"sns.boxplot(y=bkl_2018['nilaianggaran']);","e61f5a7d":"Q1 = bkl_2018['nilaianggaran'].quantile(0.25)\nQ3 = bkl_2018['nilaianggaran'].quantile(0.75)\nIQR = Q3 - Q1\n\nlow = Q1 - (1.5*IQR)\nhigh = Q3 + (1.5*IQR)\n\nbkl_2018_ = bkl_2018[~((bkl_2018['nilaianggaran'] < low) |(bkl_2018['nilaianggaran'] > high))]\nsns.boxplot(y=bkl_2018_['nilaianggaran']);","ee7e80b0":"# lihat nilai anggaran bangkalan yang negatif\nbangkalan[bangkalan.nilaianggaran < 0]","ee5431a3":"# lihat nilai anggaran biak numfor yang negatif, cukup banyak\nbiaknumfor[biaknumfor.nilaianggaran < 0]","e0a39d15":"bangkalan.statusdata.value_counts()","81d7bc50":"biaknumfor.statusdata.value_counts()","a8d09afa":"# filter akun utama 'Belanja Daerah'\nbkl = bangkalan.copy()\nbkl = bkl[bkl.kodeakunutama.isin([5])].reset_index(drop=True)\nbn = biaknumfor.copy()\nbn = bn[bn.kodeakunutama.isin([5])].reset_index(drop=True)\n\n# filter data portal untuk belanja\nbelanja_portal_bkl = portal_bkl[portal_bkl.namaakunutama == \"Belanja\"]\nbelanja_portal_bn = portal_bn[portal_bn.namaakunutama == \"Belanja\"]\n\nbelanja_portal_bkl.head()","4c4ce42a":"# Kab. Bangkalan\n# data panitia\ndf_bkl_big = bkl.groupby(['tahunanggaran','namafungsi']).sum()[['nilaianggaran']]\ndf_bkl_big = df_bkl_big.rename(columns={\"nilaianggaran\": \"nilaianggaran (panitia)\"})\n\n# data publikasi kemenkeu\ndf_bkl_small = belanja_bangkalan.groupby(['tahunanggaran','namafungsi']).sum()[['nilaianggaran']]\ndf_bkl_small = df_bkl_small.rename(columns={\"nilaianggaran\": \"nilaianggaran (publikasi)\"})\n\n# merge\ndf_bkl = pd.concat([df_bkl_big, df_bkl_small], axis=1)\ndf_bkl['difference'] = df_bkl['nilaianggaran (panitia)'] - df_bkl['nilaianggaran (publikasi)']\ndf_bkl","22e5eb54":"# Perbandingan nilai realisasi dari Kab. Bangkalan per tahun\n# data panitia\ndf_bkl_big = bkl.groupby(['tahunanggaran']).sum()[['nilaianggaran']]\ndf_bkl_big = df_bkl_big.rename(columns={\"nilaianggaran\": \"nilaianggaran (panitia)\"})\n\n# data publikasi kemenkeu\ndf_bkl_small = belanja_bangkalan.groupby(['tahunanggaran']).sum()[['nilaianggaran']]\ndf_bkl_small = df_bkl_small.rename(columns={\"nilaianggaran\": \"nilaianggaran (publikasi)\"})\n\n# data portal kemenkeu\ndf_bkl_portal = belanja_portal_bkl.rename(columns={\"tahun\":\"tahunanggaran\", \"nilairealisasi\":\"nilaianggaran (portal)\"})\ndf_bkl_portal = df_bkl_portal.groupby(['tahunanggaran']).sum()[['nilaianggaran (portal)']]\n\n# merge\ndf_bkl = pd.concat([df_bkl_big, df_bkl_small, df_bkl_portal], axis=1)\ndf_bkl['difference (panitia - publikasi)'] = df_bkl['nilaianggaran (panitia)'] - df_bkl['nilaianggaran (publikasi)']\ndf_bkl['difference (panitia - portal)'] = df_bkl['nilaianggaran (panitia)'] - df_bkl['nilaianggaran (portal)']\n\ndf_bkl","a295bbf4":"# normalize data bkl for plotting\n# plot_bkl = df_bkl.copy()\n# plot_bkl['nilaianggaran (panitia) %'] = df_bkl['nilaianggaran (panitia)'] \/ (df_bkl['nilaianggaran (panitia)'] + df_bkl['nilaianggaran (publikasi)'])\n# plot_bkl['nilaianggaran (publikasi) %'] = df_bkl['nilaianggaran (publikasi)'] \/ (df_bkl['nilaianggaran (panitia)'] + df_bkl['nilaianggaran (publikasi)'])\n# # plot_bkl['difference %'] = np.abs(df_bkl['difference']) \/ (df_bkl['nilaianggaran (panitia)'] + df_bkl['nilaianggaran (publikasi)'])\n# plot_bkl = plot_bkl[['nilaianggaran (panitia) %','nilaianggaran (publikasi) %']]\n\n# (plot_bkl).xs(2018).plot.barh(stacked=True, figsize=(12,8));","22fdca4a":"# Kab. Biak Numfor\n# data panitia\ndf_bn_big = bn.groupby(['tahunanggaran','namafungsi']).sum()[['nilaianggaran']]\ndf_bn_big = df_bn_big.rename(columns={\"nilaianggaran\": \"nilaianggaran (panitia)\"})\n\n# data publikasi kemenkeu\ndf_bn_small = belanja_biaknumfor.groupby(['tahunanggaran','namafungsi']).sum()[['nilaianggaran']]\ndf_bn_small = df_bn_small.rename(columns={\"nilaianggaran\": \"nilaianggaran (publikasi)\"})\n\n# merge\ndf_bn = pd.concat([df_bn_big, df_bn_small], axis=1)\ndf_bn['difference'] = df_bn['nilaianggaran (panitia)'] - df_bn['nilaianggaran (publikasi)']\ndf_bn","943b9a58":"# Perbandingan nilai realisasi dari Kab. Biak Numfor per tahun\n# data panitia\ndf_bn_big = bn.groupby(['tahunanggaran']).sum()[['nilaianggaran']]\ndf_bn_big = df_bn_big.rename(columns={\"nilaianggaran\": \"nilaianggaran (panitia)\"})\n\n# data publikasi kemenkeu\ndf_bn_small = belanja_biaknumfor.groupby(['tahunanggaran']).sum()[['nilaianggaran']]\ndf_bn_small = df_bn_small.rename(columns={\"nilaianggaran\": \"nilaianggaran (publikasi)\"})\n\n# data portal kemenkeu\ndf_bn_portal = belanja_portal_bn.rename(columns={\"tahun\":\"tahunanggaran\", \"nilairealisasi\":\"nilaianggaran (portal)\"})\ndf_bn_portal = df_bn_portal.groupby(['tahunanggaran']).sum()[['nilaianggaran (portal)']]\n\n# merge\ndf_bn = pd.concat([df_bn_big, df_bn_small, df_bn_portal], axis=1)\ndf_bn['difference (panitia - publikasi)'] = df_bn['nilaianggaran (panitia)'] - df_bn['nilaianggaran (publikasi)']\ndf_bn['difference (panitia - portal)'] = df_bn['nilaianggaran (panitia)'] - df_bn['nilaianggaran (portal)']\n\ndf_bn","e528e299":"# bangkalan\nneg_bkl = bkl[bkl.nilaianggaran < 0]\nneg_bkl.groupby(['tahunanggaran','namafungsi']).sum()[['nilaianggaran']]","06b9930c":"# lihat siapa pelaksana dan untuk apa\nneg_bkl[['namaurusanpelaksana','namaskpd','namaakunrincian','nilaianggaran']]","3f8d2e4a":"# biak numfor\nneg_bn = bn[bn.nilaianggaran < 0]\nneg_bn.groupby(['tahunanggaran','namafungsi']).sum()[['nilaianggaran']]","16513656":"# lihat siapa pelaksana dan untuk apa\nneg_bn[['namaurusanpelaksana','namaskpd','namaakunrincian','nilaianggaran']]","7f65cec6":"# filter akun utama 'Pendapatan LRA'\nbkl = bangkalan.copy()\nbkl = bkl[bkl.kodeakunutama.isin([4])].reset_index(drop=True)\nbn = biaknumfor.copy()\nbn = bn[bn.kodeakunutama.isin([4])].reset_index(drop=True)\n\n# filter akun kelompok 'Pendapatan Asli Daerah (PAD)'\nbkl = bkl[bkl.kodeakunkelompok.isin([1])].reset_index(drop=True)\nbn = bn[bn.kodeakunkelompok.isin([1])].reset_index(drop=True)\n\n# filter akun jenis 'Pendapatan Pajak Daerah' dan 'Pendapatan Retribusi Daerah'\nbkl = bkl[bkl.kodeakunjenis.isin([1,2])].reset_index(drop=True)\nbn = bn[bn.kodeakunjenis.isin([1,2])].reset_index(drop=True)","e1bdf550":"# pendapatan data publikasi kemenkeu -> pajak + retribusi\npend_pajak_bkl_by_year = pend_pajak_bkl.groupby(['tahun']).sum().reset_index()\npend_pajak_bkl_by_year['namapemda'] = \"Kab. Bangkalan\"\npend_pajak_bkl_by_year['jenispendapatan'] = \"Pajak Daerah\"\n\nretr_pajak_bkl_by_year = retr_pajak_bkl.groupby(['tahun']).sum().reset_index()\nretr_pajak_bkl_by_year['namapemda'] = \"Kab. Bangkalan\"\nretr_pajak_bkl_by_year['jenispendapatan'] = \"Retribusi Daerah\"\n\n# pendapatan bangkalan\npend_bkl_publikasi = pd.concat([pend_pajak_bkl_by_year, retr_pajak_bkl_by_year], ignore_index=True)\n\npend_pajak_bn_by_year = pend_pajak_bn.groupby(['tahun']).sum().reset_index()\npend_pajak_bn_by_year['namapemda'] = \"Kab. Biak Numfor\"\npend_pajak_bn_by_year['jenispendapatan'] = \"Pajak Daerah\"\n\nretr_pajak_bn_by_year = retr_pajak_bn.groupby(['tahun']).sum().reset_index()\nretr_pajak_bn_by_year['namapemda'] = \"Kab. Biak Numfor\"\nretr_pajak_bn_by_year['jenispendapatan'] = \"Retribusi Daerah\"\n\npend_bn_publikasi = pd.concat([pend_pajak_bn_by_year, retr_pajak_bn_by_year], ignore_index=True)\npend_bn_publikasi","298c0b7b":"# filter pendapatan data portal untuk Pajak Daerah dan Retribusi Daerah\npend_portal_bkl = portal_bkl[portal_bkl.namaakunjenis.isin(['Pajak Daerah', 'Retribusi Daerah'])]\npend_portal_bn = portal_bn[portal_bn.namaakunjenis.isin(['Pajak Daerah', 'Retribusi Daerah'])]\npend_portal_bn.head()","dd59d9f5":"# Perbandingan nilai realisasi dari Kab. Bangkalan per tahun\n# data panitia\ndf_bkl_big = bkl.groupby(['tahunanggaran']).sum()[['nilaianggaran']]\ndf_bkl_big = df_bkl_big.rename(columns={\"nilaianggaran\": \"nilaianggaran (panitia)\"})\n\n# data publikasi kemenkeu\ndf_bkl_small = pend_bkl_publikasi.groupby(['tahun']).sum()[['nilai']]\ndf_bkl_small = df_bkl_small.rename(columns={\"nilai\": \"nilaianggaran (publikasi)\"})\n\n# data portal kemenkeu\ndf_bkl_portal = pend_portal_bkl.rename(columns={\"tahun\":\"tahunanggaran\", \"nilairealisasi\":\"nilaianggaran (portal)\"})\ndf_bkl_portal = df_bkl_portal.groupby(['tahunanggaran']).sum()[['nilaianggaran (portal)']]\n\n# merge\ndf_bkl = pd.concat([df_bkl_big, df_bkl_small, df_bkl_portal], axis=1)\ndf_bkl['difference (panitia - publikasi)'] = df_bkl['nilaianggaran (panitia)'] - df_bkl['nilaianggaran (publikasi)']\ndf_bkl['difference (panitia - portal)'] = df_bkl['nilaianggaran (panitia)'] - df_bkl['nilaianggaran (portal)']\ndf_bkl","be86a098":"# Kab. Biak Numfor\n# data panitia\ndf_bn_big = bn.groupby(['tahunanggaran']).sum()[['nilaianggaran']]\ndf_bn_big = df_bn_big.rename(columns={\"nilaianggaran\": \"nilaianggaran (panitia)\"})\n\n# data publikasi kemenkeu\ndf_bn_small = pend_bn_publikasi.groupby(['tahun']).sum()[['nilai']]\ndf_bn_small = df_bn_small.rename(columns={\"nilai\": \"nilaianggaran (publikasi)\"})\n\n# data portal kemenkeu\ndf_bn_portal = pend_portal_bn.rename(columns={\"tahun\":\"tahunanggaran\", \"nilairealisasi\":\"nilaianggaran (portal)\"})\ndf_bn_portal = df_bn_portal.groupby(['tahunanggaran']).sum()[['nilaianggaran (portal)']]\n\n# merge\ndf_bn = pd.concat([df_bn_big, df_bn_small, df_bn_portal], axis=1)\ndf_bn['difference (panitia - publikasi)'] = df_bn['nilaianggaran (panitia)'] - df_bn['nilaianggaran (publikasi)']\ndf_bn['difference (panitia - portal)'] = df_bn['nilaianggaran (panitia)'] - df_bn['nilaianggaran (portal)']\ndf_bn","28e3af0c":"# bangkalan\nneg_bkl = bkl[bkl.nilaianggaran < 0]\nneg_bkl.groupby(['tahunanggaran']).sum()[['nilaianggaran']]","925d5b13":"# biak numfor\nneg_bn = bn[bn.nilaianggaran < 0]\nneg_bn.groupby(['tahunanggaran']).sum()[['nilaianggaran']]","df126af1":"# lihat siapa pelaksana dan untuk apa\nneg_bn[['namaurusanpelaksana','namaskpd','namaakunrincian','nilaianggaran']]","4c9df7b9":"# data panitia\n# Kab. Bangkalan\n\n# PAD didapatkan dari \n# level 1, akun utama (pendapatan)\n# level 2, akun kelompok, Kode 1: Pendapatan Asli Daerah (PAD)\nbkl = bangkalan.copy()\nbkl = bkl[bkl.kodeakunutama == 4]  # mendapatkan data kode akun utama pendapatan (level 1)\nbkl = bkl[bkl.kodeakunkelompok == 1]  # mendapatkan data kode akun kelompok PAD (level 2)\npad_bkl = bkl.groupby(['tahunanggaran', 'namapemda']).sum()[['nilaianggaran']].reset_index()\npad_bkl = pad_bkl.rename(columns={\"nilaianggaran\":\"PAD\"})\n\n# DAU dan DAK didapatkan dari\n# level 1, akun utama, kode 4 (pendapatan)\n# level 2, akun kelompok, kode 2 (pendapatan transfer)\n# level 3, akun jenis, kode 1 (dana perimbangan)\n# level 4, akun objek, berdasarkan nama objek -> \"Dana Alokasi Umum\", \"Dana Alokasi Umum - LRA\"\n# level 4, akun objek, berdasarkan nama objek -> \"Dana Alokasi Khusus (DAK) - LRA\", \n#                                                \"Dana Alokasi Khusus Fisik - LRA\", \n#                                                \"Dana Alokasi Khusus Non Fisik - LRA\"\nbkl = bangkalan.copy()\nbkl = bkl[bkl.kodeakunutama == 4]\nbkl = bkl[bkl.kodeakunkelompok == 2]\nbkl = bkl[bkl.kodeakunjenis == 1]\n\n# DAU\ndau_bkl = bkl[bkl.namaakunobjek.isin([\"Dana Alokasi Umum\", \"Dana Alokasi Umum - LRA\"])]\ndau_bkl = dau_bkl.groupby(['tahunanggaran', 'namapemda']).sum()[['nilaianggaran']].reset_index()\ndau_bkl = dau_bkl.rename(columns={\"nilaianggaran\":\"DAU\"})\n\n# DAK\ndak_bkl = bkl[bkl.namaakunobjek.isin([\"Dana Alokasi Khusus (DAK) - LRA\", \n                                      \"Dana Alokasi Khusus Fisik - LRA\", \n                                      \"Dana Alokasi Khusus Non Fisik - LRA\"])]\ndak_bkl = dak_bkl.groupby(['tahunanggaran', 'namapemda']).sum()[['nilaianggaran']].reset_index()\ndak_bkl = dak_bkl.rename(columns={\"nilaianggaran\":\"DAK\"})\n\n# Belanja Modal didapatkan dari\n# level 1, akun utama, kode 5 (belanja)\n# level 2, akun kelompok, kode 2 (belanja modal)\nbkl = bangkalan.copy()\nbkl = bkl[bkl.kodeakunutama == 5]\nbkl = bkl[bkl.kodeakunkelompok == 2]\nbm_bkl = bkl.groupby(['tahunanggaran', 'namapemda']).sum()[['nilaianggaran']].reset_index()\nbm_bkl = bm_bkl.rename(columns={\"nilaianggaran\":\"BM\"})\n\n# concat PAD, DAU, DAK, BM\n# ipm_bkl = pd.concat([pad_bkl, dau_bkl, dak_bkl, bm_bkl], axis=1)\nipm_bkl = pd.merge(pad_bkl, dau_bkl, how='inner')\nipm_bkl = pd.merge(ipm_bkl, dak_bkl, how='inner')\nipm_bkl_panitia = pd.merge(ipm_bkl, bm_bkl, how='inner')\nipm_bkl_panitia","a943710b":"# data panitia\n# Kab. Biak Numfor\n\n# PAD didapatkan dari \n# level 1, akun utama (pendapatan)\n# level 2, akun kelompok, Kode 1: Pendapatan Asli Daerah (PAD)\nbn = biaknumfor.copy()\nbn = bn[bn.kodeakunutama == 4]  # mendapatkan data kode akun utama pendapatan (level 1)\nbn = bn[bn.kodeakunkelompok == 1]  # mendapatkan data kode akun kelompok PAD (level 2)\npad_bn = bn.groupby(['tahunanggaran', 'namapemda']).sum()[['nilaianggaran']].reset_index()\npad_bn = pad_bn.rename(columns={\"nilaianggaran\":\"PAD\"})\n\n# DAU dan DAK didapatkan dari\n# level 1, akun utama, kode 4 (pendapatan)\n# level 2, akun kelompok, kode 2 (pendapatan transfer)\n# level 3, akun jenis, kode 1 (dana perimbangan)\n# level 4, akun objek, berdasarkan nama objek -> \"Dana Alokasi Umum\", \"Dana Alokasi Umum - LRA\"\n# level 4, akun objek, berdasarkan nama objek -> \"Dana Alokasi Khusus (DAK) - LRA\", \n#                                                \"Dana Alokasi Khusus Fisik - LRA\", \n#                                                \"Dana Alokasi Khusus Non Fisik - LRA\"\nbn = biaknumfor.copy()\nbn = bn[bn.kodeakunutama == 4]\nbn = bn[bn.kodeakunkelompok == 2]\nbn = bn[bn.kodeakunjenis == 1]\n\n# DAU\ndau_bn = bn[bn.namaakunobjek.isin([\"Dana Alokasi Umum (DAU) - LRA\", \"Dana Alokasi Umum DAU  LRA\"])]\ndau_bn = dau_bn.groupby(['tahunanggaran', 'namapemda']).sum()[['nilaianggaran']].reset_index()\ndau_bn = dau_bn.rename(columns={\"nilaianggaran\":\"DAU\"})\n\n# DAK\ndak_bn = bn[bn.namaakunobjek.isin([\"Dana Alokasi Khusus (DAK) - LRA\", \n                                   \"Dana Alokasi Khusus DAK  LRA\", \n                                   \"Dana Alokasi Khusus DAK Non Fisik  LRA\"])]\ndak_bn = dak_bn.groupby(['tahunanggaran', 'namapemda']).sum()[['nilaianggaran']].reset_index()\ndak_bn = dak_bn.rename(columns={\"nilaianggaran\":\"DAK\"})\n\n# Belanja Modal didapatkan dari\n# level 1, akun utama, kode 5 (belanja)\n# level 2, akun kelompok, kode 2 (belanja modal)\nbn = biaknumfor.copy()\nbn = bn[bn.kodeakunutama == 5]\nbn = bn[bn.kodeakunkelompok == 2]\nbm_bn = bn.groupby(['tahunanggaran', 'namapemda']).sum()[['nilaianggaran']].reset_index()\nbm_bn = bm_bn.rename(columns={\"nilaianggaran\":\"BM\"})\n\n# concat PAD, DAU, DAK, BM\nipm_bn = pd.merge(pad_bn, dau_bn, how='inner')\nipm_bn = pd.merge(ipm_bn, dak_bn, how='inner')\nipm_bn_panitia = pd.merge(ipm_bn, bm_bn, how='inner')\nipm_bn_panitia","a2293c70":"# select data IPM portal\n\n# Kab. Bangkalan\npt_bkl = portal_bkl.copy()\npt_bkl = pt_bkl[pt_bkl.namaakunkelompok == \"PAD\"]\npad_bkl_pt = pt_bkl.groupby(['tahun']).sum()[['nilairealisasi']].reset_index()\npad_bkl_pt = pad_bkl_pt.rename(columns={\"nilairealisasi\":\"PAD\"})\n\n# DAU\npt_bkl = portal_bkl.copy()\npt_bkl = pt_bkl[pt_bkl.namaakunjenis == \"Dana alokasi umum\"]\ndau_bkl_pt = pt_bkl.groupby(['tahun']).sum()[['nilairealisasi']].reset_index()\ndau_bkl_pt = dau_bkl_pt.rename(columns={\"nilairealisasi\":\"DAU\"})\n\n# DAK\npt_bkl = portal_bkl.copy()\npt_bkl = pt_bkl[pt_bkl.namaakunjenis == \"Dana alokasi khusus\"]\ndak_bkl_pt = pt_bkl.groupby(['tahun']).sum()[['nilairealisasi']].reset_index()\ndak_bkl_pt = dak_bkl_pt.rename(columns={\"nilairealisasi\":\"DAK\"})\n\n# BM\npt_bkl = portal_bkl.copy()\npt_bkl = pt_bkl[pt_bkl.namaakunjenis == \"Belanja Modal\"]\nbm_bkl_pt = pt_bkl.groupby(['tahun']).sum()[['nilairealisasi']].reset_index()\nbm_bkl_pt = bm_bkl_pt.rename(columns={\"nilairealisasi\":\"BM\"})\n\n# merge\nipm_bkl = pd.merge(pad_bkl_pt, dau_bkl_pt, how='inner')\nipm_bkl = pd.merge(ipm_bkl, dak_bkl_pt, how='inner')\nipm_bkl_portal = pd.merge(ipm_bkl, bm_bkl_pt, how='inner')\nipm_bkl_portal","46d80b71":"# select data IPM portal\n\n# Kab. Biak Numfor\npt_bn = portal_bn.copy()\npt_bn = pt_bn[pt_bn.namaakunkelompok == \"PAD\"]\npad_bn_pt = pt_bn.groupby(['tahun']).sum()[['nilairealisasi']].reset_index()\npad_bn_pt = pad_bn_pt.rename(columns={\"nilairealisasi\":\"PAD\"})\n\n# DAU\npt_bn = portal_bn.copy()\npt_bn = pt_bn[pt_bn.namaakunjenis == \"Dana alokasi umum\"]\ndau_bn_pt = pt_bn.groupby(['tahun']).sum()[['nilairealisasi']].reset_index()\ndau_bn_pt = dau_bn_pt.rename(columns={\"nilairealisasi\":\"DAU\"})\n\n# DAK\npt_bn = portal_bn.copy()\npt_bn = pt_bn[pt_bn.namaakunjenis == \"Dana alokasi khusus\"]\ndak_bn_pt = pt_bn.groupby(['tahun']).sum()[['nilairealisasi']].reset_index()\ndak_bn_pt = dak_bn_pt.rename(columns={\"nilairealisasi\":\"DAK\"})\n\n# BM\npt_bn = portal_bn.copy()\npt_bn = pt_bn[pt_bn.namaakunjenis == \"Belanja Modal\"]\nbm_bn_pt = pt_bn.groupby(['tahun']).sum()[['nilairealisasi']].reset_index()\nbm_bn_pt = bm_bn_pt.rename(columns={\"nilairealisasi\":\"BM\"})\n\n# merge\nipm_bn = pd.merge(pad_bn_pt, dau_bn_pt, how='inner')\nipm_bn = pd.merge(ipm_bn, dak_bn_pt, how='inner')\nipm_bn_portal = pd.merge(ipm_bn, bm_bn_pt, how='inner')\nipm_bn_portal","ad18c0a7":"ipm_bkl_panitia","5e3795c2":"ipm_bkl_portal","f8e193d4":"ipm_bn_panitia","4734ba75":"ipm_bn_portal","38e9172e":"# Compare data panitia, publikasi, dan portal","b71768c4":"Data negatif dari panitia jika dijumlahkan, dengan asumsi salah input, maka menjadi positif.\n\nKemudian dibandingkan dengan difference dari data panitia dan publikasi, maka selisih akan menjadi semakin besar.","395f1c73":"# Compare Data IPM Panitia dan Portal","ad1eb622":"Coba lihat jumlah data yang negatif untuk filter akun utama 'Belanja Daerah'","b63ff777":"# Cek Status Data\n\nCoba cek status data dari data panitia. Berdasarkan metadata diketahui nilai pada <code>statusdata<\/code>\n\nMerupakan status data APBD, kode:\n- 0 = Belum Siap Verifikasi\n- 1 = Siap verifikasi\n- 2 = Telah diverifikasi (data softcopy berbeda dengan hardcopy)\n- 3 = Sedang diverifikasi\n- 4 = Telah diverifikasi (data softcopy sama dengan hardcopy)","4d849aba":"Selidiki outlier\/anomaly data dari panitia","a203e6cc":"## Filter Kode Akun Utama Pendapatan LRA\n**Level 1**\n\nFilter berdasarkan kode akun utama dengan keterangan:\n- **Kode 4: Pendapatan LRA**\n- Kode 5: Belanja Daerah\n- Kode 6: Transfer\n- Kode 7: Pembiayaan\n\n**Level 2**\n\nFilter berdasarkan kode akun kelompok dengan keterangan:\n- Kode 1: Pendapatan Asli Daerah (PAD)\n- Kode 2: Pendapatan Transfer\n- Kode 3: Lain-Lain Pendapatan Daerah Yang Sah\n\n**Level 3**\n\nFilter berdasarkan kode akun jenis dengan keterangan:\n- Kode 1: Pendapatan Hibah, Pendapatan Pajak Daerah, Pendapatan Transfer Pemerintah Pusat\n- Kode 2: Pendapatan Retribusi Daerah, Pendapatan Transfer Pemerintah Pusat Lainnya, Dana Darurat\n- Kode 3: Pendapatan Transfer Pemerintah Daerah Lainnya, Pendapatan Hasil Pengelolaan Kekayaan Daerah yang Dipisahkan, Pendapatan Lainnya \n- Kode 4: Lain-lain PAD Yang Sah, Bantuan Keuangan","eb3cd5e5":"## Filter Kode Akun Utama Belanja Daerah\n**Level 1**\n\nFilter berdasarkan kode akun utama dengan keterangan:\n- Kode 4: Pendapatan LRA\n- **Kode 5: Belanja Daerah**\n- Kode 6: Transfer\n- Kode 7: Pembiayaan\n\n**Level 2**\n\nFilter berdasarkan kode akun kelompok dengan keterangan:\n- Kode 1: Belanja Operasi\n- Kode 2: Belanja Modal\n- Kode 3: Belanja Tak Terduga\n\n**Level 3**\n\nFilter berdasarkan kode akun jenis dengan keterangan:\n- Kode 1: Belanja Pegawai, Belanja Modal Tanah, Belanja Tak Terduga\n- Kode 2: Belanja Barang dan Jasa, Belanja Modal Peralatan dan Mesin\n- Kode 3: Belanja Modal Gedung dan Bangunan, Belanja Bunga\n- Kode 4: Belanja Modal Jalan, Irigasi dan Jaringan\n- Kode 5: Belanja Hibah, Belanja Modal Aset Tetap Lainnya\n- Kode 6: Belanja Bantuan Sosial, Belanja Modal Aset Lainnya","ded5ddbd":"# IPM\nPAD, DAU, DAK, BM","a85610a9":"> Data komponen IPM untuk data panitia dan data portal sama","95502e3a":"> Data terdapat minus","7bc92f1e":"# Observe anomaly Nilai Anggaran","971c6cef":"Untuk validasi data, coba dibandingkan data dari panitia dengan data publikasi dari http:\/\/www.djpk.kemenkeu.go.id\/?p=5412","616b60db":"> Data negatif pada Kab. Biak Numfor pada data panitia, sepertinya sebagai penyeimbang. Karena jika melihat perbandingan data panitia dengan data publikasi, difference tepat 0.","a0da7746":"> Data dengan kode 4 semua telah dinyatakan terverifikasi (data softcopy dengan hardcopy)","9ef4d92d":"Cek data negatif dari filter akun utama 'Pendapatan LRA'"}}