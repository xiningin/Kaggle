{"cell_type":{"10777488":"code","3b9bebff":"code","fe79e1a1":"code","32e8f034":"code","aba97c16":"code","011a0148":"code","6570c9ca":"code","fb139995":"code","55bd2f71":"code","ee251a01":"code","107858ca":"code","93f1511d":"code","7845a55e":"code","c21e2790":"code","d09a54af":"markdown","b739fa53":"markdown","3b2c654c":"markdown","3aaacb32":"markdown","943b7196":"markdown","afe3d138":"markdown","d78796ab":"markdown","3447c2a1":"markdown","f07d7090":"markdown","61fedff2":"markdown","8076c169":"markdown","406e6698":"markdown","4dade976":"markdown"},"source":{"10777488":"zabt = \"Papers on Virus Genetics\"\nznam = \"Papers_on_Virus_Genetics\"","3b9bebff":"zwds = \"agreements animal asia behavioral binding circulation continued coordinating coronaviruses determine development diagnostics differences dissemination distribution diverse epidemic evidence evolution experimental factors farmers genetic genomes genomic geographic host human-animal humans infected infections inform information interface leveraged livestock management measures mechanism mixed multi-lateral nagoya origin pathogen played protocol range rapid real-time receptor reduction reservoir role sample sars-cov-2 sequencing, serve socioeconomic southeast spill-over strain strategies surveillance sustainable temporal therapeutics track tracking understand variations virus whether wildlife\"","fe79e1a1":"import os\nimport pandas as pd\nimport json\nfrom IPython.core.display import display, HTML\n# !pip uninstall spacy # Uncomment this if installed version of spacy fails.\n# !pip install spacy # Uncomment this if spacy package is not installed.\nimport spacy\n# !python -m spacy download en # Uncomment this if en language is not loaded in spacy package. \nnlp = spacy.load('en')","32e8f034":"zchk = nlp(zwds)","aba97c16":"ztop = '\/kaggle\/input\/CORD-19-research-challenge'","011a0148":"zdf0 = pd.DataFrame(columns=['Folder', 'File', 'Match'])","6570c9ca":"%%capture\n\nfor zsub, zdir, zfis in os.walk(ztop):\n\n    for zfil in zfis:\n        if zfil.endswith(\".json\"):\n            \n            with open(zsub + os.sep + zfil) as f:\n                zout = json.load(f)\n            f.close()\n            \n            zout = \" \".join([part['text'] for part in zout['abstract']])\n            zout = zchk.similarity(nlp(zout))\n            \n            zdf0 = zdf0.append({'Folder': zsub.replace(ztop, \"\"), 'File': zfil, 'Match': zout}, ignore_index=True)\n            \nprint(zdf0.head(4))","fb139995":"zdf0.to_csv(znam + '_Check.csv', index = False)","55bd2f71":"zdf6 = zdf0[zdf0.Match > 0.6].sort_values(by=['Match'], axis=0, ascending=False, inplace=False)\nprint(zdf6.head(4))","ee251a01":"zdf6.to_csv(znam + '_Relevant.csv', index = False)","107858ca":"%%capture\n\nzht0 = \"<html>\\n<head>\\n\"\nzht0 = zht0 + \"<title>Relevant Papers for Vaccines and Therapeutics<\/title>\\n\"\nzht0 = zht0 + \"<script>\\nfunction openPop(x) {\\nei = document.getElementById('pop_' + x);\\n\"\nzht0 = zht0 + \"ei.style.display='block';\\nec = document.getElementsByClassName('pip');\\nvar i;\\n\"\nzht0 = zht0 + \"for (i = 0; i < ec.length; i++) {\\nif ( ec[i] != ei) { ec[i].style.display='none'; }; }; }\\n\"\nzht0 = zht0 + \"function shutPop(x) { document.getElementById('pop_' + x).style.display='none'; }\\n<\/script>\\n\"\nzht0 = zht0 + \"<style>table, th, td { border: 1px solid black; }<\/style>\\n\"\nzht0 = zht0 + \"<\/head>\\n<body>\\n\"\nzht0 = zht0 + \"<h1>\" + zabt + \"<\/h1>\\n\"\nzht0 = zht0 + \"<p>The following is a list of relevant papers.<\/p><br \/>\\n\"\nzht0 = zht0 + \"<p>Click on a Title to pop up its Abstract.<\/p><br \/>\\n\"\nzht0 = zht0 + \"<table>\\n<tbody>\\n<tr><th>Title<\/th>\\n<th>Abstract<\/th><\/tr>\\n\"","93f1511d":"zht6 = zht0 # zht6 is to be saved later as a file.\nzhtd = zht0 # zhtd is a smaller version of zht6, for displaying in this notebook.\n\nfor indx, cont in zdf6.iterrows():\n    \n    with open(ztop + os.sep + cont['Folder'] + os.sep + cont['File']) as f:\n        ztxt = json.load(f)\n        f.close()\n        \n    ztxt = \" \".join([part['text'] for part in ztxt['abstract']])\n    \n    zhta = \"<tr><td><div onClick=openPop(\" + str(indx) + \")>\" + str(cont['File']) + \"<\/div><\/td>\\n\"    \n    zhta = zhta + \"<td><div onClick=shutPop(\" + str(indx) + \") class='pip' id='pop_\" + str(indx) + \"' style='display:none;'>\" + ztxt + \"<\/div><\/td><\/tr>\\n\"\n    \n    zht6 = zht6 + zhta\n    if indx < 10:\n        zhtd = zhtd + zhta\n\nzht6 = zht6 + \"<\/body>\\n<\/html>\"\nzhtd = zhtd + \"<\/body>\\n<\/html>\"","7845a55e":"%%capture\n\nzout = open(znam + \"_Relevant_10.html\",\"a\")\nzout.write(zht6)\nzout.close()","c21e2790":"display(HTML(zhtd))","d09a54af":"Make a subset dataframe of records with more than 60% relevance.","b739fa53":"Outside this notebook: take the task's specification; make a unique list of words; remove common words; and optionally sort them.","3b2c654c":"Export this subset dataframe as another csv file.","3aaacb32":"Display the smaller html as a webpage here.","943b7196":"Import python packages: os, pandas, json, IPython, and spacy.","afe3d138":"Export this dataframe as a csv file.","d78796ab":"Specify the location of files of papers provided by this challenge.","3447c2a1":"Make a webapage html of list and abstracts of papers with more than 60% relevance.","f07d7090":"\n\nApply spacy's nlp tool to the set of selected words.","61fedff2":"Make an empty dataframe, to populate later.","8076c169":"Save the webpage html as a file.","406e6698":"This notebook aims to:\n- Prepare a list of papers and their relevance to the task under consideration.\n- Prepare a list and a webpage of most relevant papers and their abstracts.\n- Display top 10 most relevant papers and their abstracts.","4dade976":"Go through each file, review the Abstract text contained in it, compute its relevance to the task, and add it to the dataframe."}}