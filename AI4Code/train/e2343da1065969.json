{"cell_type":{"e609dd2f":"code","b0d81117":"code","b904d68e":"code","5d39a387":"code","89ef5974":"code","b92464c5":"markdown","7cdf797b":"markdown","9451f4ef":"markdown","e5e13626":"markdown"},"source":{"e609dd2f":"import pandas as pd\nimport numpy as np\nimport matplotlib.pyplot as plt\nimport seaborn as sns\n\ndf = pd.read_csv('\/kaggle\/input\/forest-surfaces-evolution-in-romania-19902019\/forest_surfaces_romania_en_1990_2019.csv')\nprint(df.info())\n# print(df.describe())\n# columns -- Category \/ Region \/ Year \/ Unit ] Value\n\ndf.drop(df[df.Region.str.contains('Regiunea')].index, axis=0, inplace=True)\ndf.drop(df[df.Region.str.contains('MACROREGIUNEA')].index, axis=0, inplace=True)\ndf.drop(df[df.Region.str.contains('TOTAL')].index, axis=0, inplace=True)\nprint(df['Region'].nunique())\nfor col in df.columns:\n    print(df[col].unique())","b0d81117":"fig, ax = plt.subplots(figsize=(10,5))\nsns.heatmap(df.isnull(), ax=ax)\nplt.show()","b904d68e":"# VISUALISATION\n# VISUALISATION\ndf_v= pd.DataFrame(df.groupby('Year')['Value'].sum())\ndf_v.plot.line(y='Value', figsize=(10,3),  color='green')\nplt.title('Forest surfaces (K ha) evolution in Romania 1990-2019')\nplt.show()","5d39a387":"df_counties = pd.read_csv('\/kaggle\/input\/romania-counties\/counties_id.csv')\ndf_counties = df_counties.drop(['date','populatie'], axis=1)\ndf = df.merge(df_counties[['Region','id']], on='Region', how='inner',)\npivot = df.pivot_table(index='Region', columns='Year', values='Value')\npivot['Evo'] = ((pivot[1990] - pivot[2019])*100\/pivot[1990]).round(2)\npivot = pivot.merge(df_counties, on='Region', how='inner')\npivot.rename({\"Unnamed: 0\":\"a\"}, axis=\"columns\", inplace=True)\npivot.drop([\"a\"], axis=1, inplace=True)\nprint(pivot.head(5))","89ef5974":"import json\nfrom plotly.offline import plot\nimport plotly.express as px\n\nwith open('\/kaggle\/input\/romania-counties\/romania.geojson.json', 'r') as response:\n    counties = json.load(response)\n\nfig = px.choropleth_mapbox(pivot,\n                           geojson=counties,\n                           featureidkey=str(\"properties.cartodb_id\"),\n                           locations='id',\n                           color='Evo',\n                           hover_name='Evo',\n                           hover_data={\"Evo\": False, 'id':False, \"Region\": True},\n                           color_continuous_scale=\"rdylgn\",\n                           color_continuous_midpoint=0,\n                           range_color=(-30,30),\n                           mapbox_style=\"carto-darkmatter\",\n                           zoom=5.5, center={\"lat\": 46, \"lon\": 25.5},\n                           opacity=0.8,\n                           labels={'Evo': 'Evolution %'},\n                           # animation_frame='date',\n                           )\nfig.update_geos(fitbounds=\"locations\", visible=False)\nfig.update_layout(margin={\"r\": 0, \"t\": 0, \"l\": 0, \"b\": 0},\n    annotations=[\n        dict(\n            text='Forest surface evolution for 1989-2019 - per counties',\n            font=dict(\n                family='sans-serif',\n                size=15,\n                color='#222'\n            ),\n            bgcolor='#E2E2E2',\n            bordercolor='#FFFFFF',\n            borderwidth=2,\n            x=0.02,\n            y=0.85,\n            xanchor=\"left\",\n            yanchor=\"bottom\"\n        )])\nfig.show()","b92464c5":"Create a pivot table region \/ year \/ values. Add the region id column","7cdf797b":"Import packages, read data and drop unnecessary rows","9451f4ef":"Visualization of surface evolution","e5e13626":"Check for incomplete data"}}