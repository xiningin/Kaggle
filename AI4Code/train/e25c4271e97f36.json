{"cell_type":{"58951b70":"code","a6236638":"code","4c714f72":"code","9b2def86":"code","355519b2":"code","b54b4bd5":"code","a57678db":"code","2f7e6bf8":"code","fe1d1390":"code","a90c8f60":"code","31322caf":"code","0609f3ea":"code","133e9c8a":"code","9dd764b8":"code","ea407999":"code","07ec4679":"code","ae69a394":"code","77f49940":"code","3169dde8":"code","72bbf376":"code","ded95f12":"code","dc56d910":"code","51509759":"code","7ef66eeb":"code","1c3104bc":"code","af73cb68":"code","14b3216d":"code","00b0b529":"code","a1b770dd":"code","251cf86e":"code","ea21f3f4":"code","db9ea1b8":"code","d1dc18c3":"code","8a48a37a":"code","3cda694d":"code","a99e1fce":"code","4beda387":"code","707d430c":"code","7067560b":"code","90837b64":"code","58f3d069":"code","dc5af936":"code","2ed56ece":"code","8ecd158e":"code","44bc3f82":"code","0bcf0b17":"code","87e3dfb5":"code","7958ea1f":"code","da257600":"code","5e6a3a8e":"code","efe8a228":"code","c7447c15":"code","fc43a3f4":"code","bc467452":"code","eccb4b1d":"code","cc10b1ea":"code","4811df4b":"code","471d6162":"code","3d34a91f":"code","90f46a42":"code","fea1baf0":"code","c910e629":"code","f40839ff":"code","5b6c0ffe":"code","89ff8f13":"code","46e8a88f":"code","4868f89f":"code","3d9bd267":"code","7d58923c":"code","9a16eff8":"code","a412fb03":"code","3aecb3a9":"code","cbf9b3c4":"code","0ddae230":"code","db9f594d":"code","6d494c93":"code","4ca0e4fb":"code","1af866d8":"code","83f40d2e":"code","a7803c2f":"code","f930aecf":"code","f76baa1f":"code","c3a6d143":"code","d33910d3":"code","9f4b310a":"code","1f6df6d2":"code","d0685a85":"code","403a874c":"code","0346b57c":"code","980665ee":"code","3b3f360a":"code","c2a35e54":"code","2eeea6ba":"code","a13fb799":"code","b948817f":"code","ac21c488":"code","f40c121f":"code","70a0b352":"code","f22b68ae":"code","9a1eb61e":"code","2bf25caa":"code","2d55f770":"code","6cc4fbea":"code","b1cf0fb3":"markdown","fc923215":"markdown","50738eeb":"markdown","6119f28e":"markdown","fa7dea6f":"markdown","29438d7a":"markdown","ab090fa7":"markdown","eae62002":"markdown","0837e556":"markdown","8f15367e":"markdown","68bf6b7d":"markdown","ac6e8af2":"markdown","6eb0a156":"markdown","fc5b10b8":"markdown","38577298":"markdown","4c39ea1e":"markdown","2e4704bf":"markdown","578e2922":"markdown","ffd41474":"markdown","244658de":"markdown","6a3e3e9d":"markdown","3c014c27":"markdown","327c8894":"markdown","506b4aea":"markdown","ba4b2770":"markdown","36c9bed8":"markdown","a014f135":"markdown","0ecb33e4":"markdown","5df3467d":"markdown","c6eea05a":"markdown","74fcb929":"markdown","6db99ceb":"markdown","717f2528":"markdown","28c36469":"markdown","6d4ed013":"markdown","64e504ff":"markdown","ea1cd4e1":"markdown","ef37214b":"markdown","43b4f47a":"markdown","39af5a45":"markdown","4f8dc139":"markdown","0a34c5d8":"markdown","6bb6c189":"markdown","02574e81":"markdown","7783721d":"markdown","006f4557":"markdown","ee87f308":"markdown","dc62847e":"markdown","1340d2f6":"markdown","6997a6f9":"markdown","6c9880a1":"markdown","6243693e":"markdown","c9906560":"markdown","d76ed6ab":"markdown","91f6d27f":"markdown","f612e2a0":"markdown","96fc7dbf":"markdown","1666a2b8":"markdown","c0996c0a":"markdown","e28358c1":"markdown","0a454e70":"markdown","58f72b8b":"markdown","ec9fa6e3":"markdown","180d2cb9":"markdown","f5f3675d":"markdown","745bf7f1":"markdown","7d24621d":"markdown","56a19903":"markdown","60fe7b3f":"markdown","5b933e45":"markdown","d9a06de5":"markdown","91999cac":"markdown","80497474":"markdown","4afb83ec":"markdown","65977d0c":"markdown","5315b717":"markdown","09b50d89":"markdown","19bb6d27":"markdown","44a8c933":"markdown","afa55a3f":"markdown","fcb5cc6b":"markdown","0337344a":"markdown","b449c965":"markdown","f82308e7":"markdown","4c1c4b3d":"markdown","a134c814":"markdown","c88552a6":"markdown","8941717a":"markdown","a428b6b3":"markdown","0ca312c3":"markdown","7140fb8c":"markdown","b402de2a":"markdown","b676feb7":"markdown","03eadc3c":"markdown","aab1338a":"markdown","f6c352a1":"markdown","1d4a20ba":"markdown","1c7f189e":"markdown"},"source":{"58951b70":"# imports\nimport gc\nimport os\nimport sys\nfrom io import BytesIO\nimport time\nfrom IPython.display import Image, display as image, display\nfrom IPython.display import HTML\nimport requests\nfrom PIL import Image\nimport numpy as np\nimport statistics as st\nimport datetime\nfrom matplotlib.ticker import (MultipleLocator, AutoMinorLocator)\nfrom matplotlib import rc\nimport pandas as pd\nimport dask.dataframe as dd\npd.set_option('display.max_columns', 50)\npd.set_option('display.max_rows',120)\nimport matplotlib.pyplot as plt\nimport matplotlib.animation\nimport matplotlib.gridspec as gridspec\nimport seaborn as sns\nfrom termcolor import colored\n%matplotlib inline\nsns.set_style('darkgrid')\nimport plotly.express as px\nimport plotly.figure_factory as ff\nhcmap = sns.blend_palette(['yellowgreen','orange','orangered','red'],n_colors=12,as_cmap=True)\nimport plotly.graph_objects as go\nfrom plotly.subplots import make_subplots\nimport warnings\nwarnings.filterwarnings('ignore')\nfrom sklearn.linear_model import LogisticRegression\nfrom sklearn.neural_network import MLPClassifier\nfrom sklearn.naive_bayes import GaussianNB\nfrom sklearn.neighbors import KNeighborsClassifier\nfrom sklearn.tree import DecisionTreeClassifier\nfrom sklearn.ensemble import RandomForestClassifier, AdaBoostClassifier\n# from sklearn.compose import ColumnTransformer\n# from sklearn.pipeline import Pipeline\n# from sklearn.impute import SimpleImputer\n# from sklearn.feature_selection import mutual_info_regression\n# from sklearn.preprocessing import OneHotEncoder, StandardScaler, OrdinalEncoder\nfrom sklearn.model_selection import train_test_split as split\n# from sklearn.cluster import KMeans\n# from sklearn.decomposition import PCA\n# from sklearn.cluster import KMeans \nfrom sklearn.linear_model import LogisticRegression\nfrom sklearn.model_selection import GridSearchCV as Grid\nimport xgboost as xgb\nfrom sklearn.metrics import (f1_score, accuracy_score, balanced_accuracy_score, precision_score, recall_score, roc_auc_score, confusion_matrix)","a6236638":"input_data_path = []\nfor dirname, _, filenames in os.walk('\/kaggle\/input'):\n    for filename in filenames:\n        input_data_path.append(os.path.join(dirname, filename))","4c714f72":"input_data_path","9b2def86":"games = pd.read_csv('\/kaggle\/input\/nfl-big-data-bowl-2022\/games.csv')\nplays = pd.read_csv('\/kaggle\/input\/nfl-big-data-bowl-2022\/plays.csv')\nplayers = pd.read_csv('\/kaggle\/input\/nfl-big-data-bowl-2022\/players.csv')\ntracking2018 = pd.read_csv('\/kaggle\/input\/nfl-big-data-bowl-2022\/tracking2018.csv',parse_dates=True)\ntracking2019 = pd.read_csv('\/kaggle\/input\/nfl-big-data-bowl-2022\/tracking2019.csv',parse_dates=True)\ntracking2020 = pd.read_csv('\/kaggle\/input\/nfl-big-data-bowl-2022\/tracking2020.csv',parse_dates=True)\nPFFScoutingData = pd.read_csv('\/kaggle\/input\/nfl-big-data-bowl-2022\/PFFScoutingData.csv')\ntemperature = pd.read_csv('\/kaggle\/input\/nfl-temp\/temptreture.csv')","355519b2":"tracking2018.head(2)","b54b4bd5":"list(tracking2018.columns) == list(tracking2019.columns) == list(tracking2020.columns)","a57678db":"tracking2018[tracking2018.nflId.isna()].sample(5)","2f7e6bf8":"tracking2018[tracking2018.nflId.isna()].displayName.unique()","fe1d1390":"ball_18_df = tracking2018[tracking2018.team == 'football'].copy()\ntracking2018 = tracking2018[tracking2018.team != 'football'].copy()\n\nball_19_df = tracking2019[tracking2019.team == 'football'].copy()\ntracking2019 = tracking2019[tracking2019.team != 'football'].copy()\n\nball_20_df = tracking2020[tracking2020.team == 'football'].copy()\ntracking2020 = tracking2020[tracking2020.team != 'football'].copy()\n\nball_18_df.drop(columns=['o', 'dir', 'nflId', 'displayName', 'jerseyNumber', 'position'],inplace=True)\nball_19_df.drop(columns=['o', 'dir', 'nflId', 'displayName', 'jerseyNumber', 'position'],inplace=True)\nball_20_df.drop(columns=['o', 'dir', 'nflId', 'displayName', 'jerseyNumber', 'position'],inplace=True)\ngc.collect()\n\nball_20_df.sample(4)","a90c8f60":"Dtypes = {'time':'datetime64[ns]', 'x':'float32', 'y':'float32', 's':'float32', 'a':'float32',\n          'dis':'float32', 'o':'float32', 'dir':'float64','event':'object' , 'nflId':'uint16',\n          'displayName':'object', 'jerseyNumber':'uint8', 'position':'object', 'team':'object',\n          'frameId':'int32', 'gameId':'uint32', 'playId':'int16'}\n\nball_dtypes = {'time':'datetime64[ns]', 'x':'float32', 'y':'float32', 's':'float32', 'a':'float32',\n               'dis':'float32','event':'object' ,'frameId':'int32','gameId':'uint32','playId':'int16'}","31322caf":"tracking2018 = tracking2018.astype(Dtypes).copy()\ntracking2019 = tracking2019.astype(Dtypes).copy()\ntracking2020 = tracking2020.astype(Dtypes).copy()\n\ntracking2018 = tracking2018.sort_values(by=['time','gameId','playId', 'displayName']).copy()\ntracking2019 = tracking2019.sort_values(by=['time','gameId','playId', 'displayName']).copy()\ntracking2020 = tracking2020.sort_values(by=['time','gameId','playId', 'displayName']).copy()\n\nball_18_df = ball_18_df.astype(ball_dtypes).copy()\nball_19_df = ball_19_df.astype(ball_dtypes).copy()\nball_20_df = ball_20_df.astype(ball_dtypes).copy()\n\nball_18_df = ball_18_df.sort_values(by=['time','gameId', 'playId']).copy()\nball_19_df = ball_19_df.sort_values(by=['time','gameId', 'playId']).copy()\nball_20_df = ball_20_df.sort_values(by=['time','gameId', 'playId']).copy()\n\ngc.collect()","0609f3ea":"players.head(3)","133e9c8a":"players.birthDate.isna().sum()","9dd764b8":"players[players.birthDate.isna()]","ea407999":"missin_dates = {'Antoine Brooks':'1997-10-28', 'Bradlee Anae': '1998-10-17', 'Bravvion Roy':'1996-10-18',\n                'Bryce Hall': '1999-08-14', 'Carter Coughlin': '1997-07-21', 'Chris Claybrooks': '1998-07-17',\n                'Derrek Tuszka':'1997-08-17', 'Hunter Niswander': '1994-11-26', 'James Smith-Williams': '1997-07-29',\n                'Jameson Houston': '1996-06-30', 'Kamren Curl': '1999-03-31', 'Keandre Jones': '1997-09-24',\n                'Michael Danna':  '1997-12-4','Raekwon Davis': '1997-06-10', 'Rashard Lawrence': '1998-08-27',\n                'Taylor Russolino':'1989-05-23', 'Trevon Diggs':'1997-09-20'}","07ec4679":"missing_index = players[players.birthDate.isna()].index\nfor i in missing_index:\n    plyr = players.loc[i,'displayName'] \n    date = missin_dates[plyr]\n    date = datetime.datetime.strptime(date, \"%Y-%m-%d\")\n    players.loc[i, 'birthDate'] = date","ae69a394":"players.loc[missing_index,:]","77f49940":"players['feets'] = players.height.str.extract(r'^(\\d)\\-').astype(float)\nplayers['inchs'] = players.height.str.extract(r'(^\\d\\d)').astype(float)\nplayers['alsoinchs'] = players.height.str.extract(r'\\-(\\d*)').astype(float)\nplayers.fillna(0,inplace=True)\nplayers['highcm'] = (players['feets'] * 30.48) + (players['inchs'] *2.54) + (players['alsoinchs']*2.54)\nplayers['age'] = 2018 - pd.to_datetime(players.birthDate).dt.year\nplayers.drop(columns=['feets','inchs','alsoinchs'],inplace=True)\ngc.collect()\nplayers.sample(4)","3169dde8":"players.info()","72bbf376":"players[players.displayName.duplicated(keep=False)]","ded95f12":"set(players[players.displayName.duplicated(keep=False)].index).intersection(set(missing_index))","dc56d910":"duplicated_names = sorted(list(set(players[players.displayName.duplicated(keep=False)].displayName.values)))","51509759":"set(tracking2018.displayName.unique()).issubset(set(players.displayName.unique()))","7ef66eeb":"set(tracking2018.displayName.unique()).difference(set(players.displayName.unique()))","1c3104bc":"missing_players = {'Charles Leno Jr.':[193 ,304],'Chris Herndon':[193 ,253], 'Chris Hubbard':[193, 295 ],\n                   'Dan McCullers':[201,348], 'Danny Vitale':[183, 225], 'David Williams':[191, 294 ],\n                   'DeVante Bausby':[185 , 190 ], 'Domata Peko Sr.':[191, 322 ], \"Donte' Deayon\":[175, 159],\n                   'Foye Oluokun':[188 ,215], 'Jake Martin':[188,242  ], 'Jeff Wilson':[183,213],\n                   'Joe Jones':[183 , 240], 'Joe Noteboom':[196, 260 ], 'Jon Weeks':[178, 242],\n                   'Josh Perkins':[190, 227], \"Julie'n Davenport\":[201, 313], 'KhaDarel Hodge':[188, 205],\n                   'L.P. LaDouceur':[196, 255], 'Lac Edwards':[193, 209], 'Matt McCrane':[175, 165],\n                   'Matthew Ioannidis':[190,310], 'Matthew Slater':[183, 205], 'Mike Badgley':[178, 183],\n                   'Nate Gerry':[188, 230],'Nickell Robey-Coleman':[173, 180], 'Shaq Mason':[185, 310],\n                   'Trent Brown':[203, 380], 'Trent Scott':[196, 320], 'Zeke Turner':[188,214]}","af73cb68":"games.head(3)","14b3216d":"games.gameId.duplicated().sum()","00b0b529":"games.set_index('gameId',inplace=True)\ngames.gameDate = games.gameDate.astype('datetime64[ns]')\ngames.head(8)","a1b770dd":"set(tracking2018.gameId).issubset(set(games.index))","251cf86e":"team_abb = {'ARI': ['Arizona Cardinals','PHOENIX DEER VALLEY MUNICIPAL AIRPORT, AZ US','NFC', 'west'],\n            'ATL': ['Atlanta Falcons','ATLANTA FULTON CO AIRPORT, GA US','NFC', 'south'],\n            'BAL': ['Baltimore Ravens', 'BALTIMORE WASHINGTON INTERNATIONAL AIRPORT, MD US','AFC', 'north'],\n            'BUF': ['Buffalo Bills','BUFFALO NIAGARA INTERNATIONAL, NY US','AFC', 'east'],\n            'CAR': ['Carolina Panthers','CHARLOTTE DOUGLAS AIRPORT, NC US','NFC', 'south'],\n            'CHI': ['Chicago Bears', 'CHICAGO MIDWAY AIRPORT, IL US','NFC', 'north'],\n            'CIN': ['Cincinnati Bengals', 'CINCINNATI MUNICIPAL AIRPORT LUNKEN FIELD, OH US','AFC', 'north'],\n            'CLE': ['Cleveland Browns','CLEVELAND BURKE LAKEFRONT AIRPORT, OH US','AFC', 'north'],\n            'DAL': ['Dallas Cowboys','DALLAS REDBIRD AIRPORT, TX US','NFC', 'east'],\n            'DEN': ['Denver Broncos','DENVER WATER DEPARTMENT, CO US','AFC', 'west'],\n            'DET': ['Detroit Lions', 'DETROIT CITY AIRPORT, MI US','NFC', 'north'],\n            'GB': ['Green Bay Packers','GREEN BAY A S INTERNATIONAL AIRPORT, WI US','NFC', 'north'],\n            'HOU': ['Houston Texans', 'HOUSTON WILLIAM P HOBBY AIRPORT, TX US','AFC', 'south'],\n            'IND': ['Indianapolis Colts', 'INDIANAPOLIS NWFO, IN US','AFC', 'south'],\n            'JAX': ['Jacksonville Jaguars','JACKSONVILLE CRAIG MUNICIPAL AIRPORT, FL US','AFC', 'south'],\n            'KC': ['Kansas City Chiefs', 'KANSAS CITY DOWNTOWN AIRPORT, MO US','AFC', 'west'],\n            'LV': ['Las Vegas Raiders', 'LAS VEGAS AIR TERMINAL, NV US','AFC', 'west'],\n            'LAC': ['Los Angeles Chargers','WHITTIER HILLS CALIFORNIA, CA US','AFC', 'west'],\n            'LA': ['Los Angeles Rams','WHITTIER HILLS CALIFORNIA, CA US','NFC', 'west'],\n            'MIA': ['Miami Dolphins','MIAMI OPA LOCKA AIRPORT, FL US','AFC', 'east'],\n            'MIN': ['Minnesota Vikings','UNIVERSITY OF MN ST. PAUL, MN US','NFC', 'north'],\n            'NE': ['New England Patriots', 'NORWOOD MEMORIAL AIRPORT, MA US','AFC', 'east'],\n            'NO': ['New Orleans Saints','NEW ORLEANS AUDUBON, LA US','NFC', 'south'],\n            'NYG': ['New York Giants','JFK INTERNATIONAL AIRPORT, NY US','NFC', 'east'],\n            'NYJ': ['New York Jets','JFK INTERNATIONAL AIRPORT, NY US','AFC', 'east'],\n            'OAK': ['Oakland Raiders', 'OAKLAND MUSEUM, CA US','AFC', 'west'],\n            'PHI': ['Philadelphia Eagles','PHILADELPHIA INTERNATIONAL AIRPORT, PA US','NFC', 'east'],\n            'PIT': ['Pittsburgh Steelers','PITTSBURGH ASOS, PA US','AFC', 'north'],\n            'SF': ['San Francisco 49ers','SAN JOSE INTERNATIONAL AIRPORT, CA US','NFC', 'west'],\n            'SEA': ['Seattle Seahawks', 'SEATTLE SAND POINT WEATHER FORECAST OFFICE, WA US','NFC', 'west'],\n            'TB': ['Tampa Bay Buccaneers', 'TAMPA INTERNATIONAL AIRPORT, FL US','NFC', 'south'],\n            'TEN': ['Tennessee Titans', 'NASHVILLE INTERNATIONAL AIRPORT, TN US','AFC', 'south'],\n            'WAS': ['Washington Football Team','OXON HILL, MD US','NFC', 'east']}","ea21f3f4":"temperature.sample(8)","db9ea1b8":"temperature = temperature.astype({'DATE':'datetime64[ns]'}).copy()\ntemperature['month'] = temperature.DATE.dt.month\ntemperature['city'] = temperature.NAME.str.extract(r'(^\\w+\\s\\w+)\\W')\ntemperature['STATE'] = temperature.NAME.str.extract(r'\\W(\\w{2})\\s\\w\\w$')\ntemperature.sort_values(by=['NAME','DATE'],inplace=True)\ntemperature = temperature[temperature.month.isin([12, 11, 10, 9, 1])].copy()\ntemperature.TMAX.fillna(method= 'ffill',inplace=True)\ntemperature.TMIN.fillna(method= 'ffill',inplace=True)\ntemperature.TAVG.fillna(temperature[['TMAX','TMIN']].mean(axis=1),inplace=True)\ntemperature.sample(4)","d1dc18c3":"games['home_key'] = games.homeTeamAbbr.apply(lambda x: team_abb[x][1])","8a48a37a":"games = games.reset_index().merge(temperature, left_on= ['gameDate','home_key'],how='left', right_on=['DATE','NAME']).copy()\ngames = games[['gameId','season', 'week', 'gameDate', 'gameTimeEastern', 'homeTeamAbbr',\n                 'visitorTeamAbbr', 'home_key', 'TAVG', 'month', 'STATE']].copy()\ngames.month = games.gameDate.dt.month_name()\ngames['home_conference'] = games.homeTeamAbbr.apply(lambda x: team_abb[x][-2])\ngames['away_conference'] = games.visitorTeamAbbr.apply(lambda x: team_abb[x][-2])\ngames['home_region'] = games.homeTeamAbbr.apply(lambda x: team_abb[x][-1])\ngames['away_region'] = games.visitorTeamAbbr.apply(lambda x: team_abb[x][-1])\ngames['home_division'] = games.home_conference + ' ' + games.home_region\ngames['away_division'] = games.away_conference + ' ' + games.away_region\ngames[games.TAVG.isna()]","3cda694d":"games.STATE.unique()","a99e1fce":"state_time = {'PA': 0 , 'MD': 0, 'OH': 0, 'IN': 0, 'FL': 0, 'MA': 0, 'LA': -1, 'NY': 0, 'AZ': -2, 'NC': 0, 'WI': -1,\n              'MI': 0, 'CA': -3, 'GA': 0, 'TN': -1, 'CO': -2, 'TX': -1, 'IL': -1, 'MO': -1, 'MN': -1, 'WA': -3,'NV': -3}\ngames['time_zone_adj'] = games.STATE.apply(lambda x: state_time[x])\ngames['gameTimeLocal'] = games.gameTimeEastern.apply(lambda x: int(x[:2])) + games.time_zone_adj\ngames['gameTimeLocal'] = games['gameTimeLocal'].astype(str) + games.gameTimeEastern.apply(lambda x: x[2:-3]).copy()\ngames.drop(columns='time_zone_adj', inplace=True)","4beda387":"games.head()","707d430c":"PFFScoutingData.head(2)","7067560b":"plays.head(2)","90837b64":"plays['yards_to_endzone'] = np.select([plays.possessionTeam == plays.yardlineSide,plays.possessionTeam != plays.yardlineSide],\n          [((plays.possessionTeam == plays.yardlineSide).astype(int) * (100 - plays.yardlineNumber)), plays.yardlineNumber], default=50)","58f3d069":"temp_plays = plays.merge(games, left_on= 'gameId', right_on='gameId')\nplays['pos_pre_score'] = np.select([(temp_plays.possessionTeam == temp_plays.homeTeamAbbr),(temp_plays.possessionTeam == temp_plays.visitorTeamAbbr)],[temp_plays.preSnapHomeScore, temp_plays.preSnapVisitorScore], default= 100000)\nplays['def_pre_score'] = np.select([(temp_plays.possessionTeam != temp_plays.homeTeamAbbr),(temp_plays.possessionTeam != temp_plays.visitorTeamAbbr)],[temp_plays.preSnapHomeScore, temp_plays.preSnapVisitorScore], default= 100000)\nplays['pos_score_def'] = plays.pos_pre_score - plays.def_pre_score\ndel temp_plays\nplays.head()","dc5af936":"plt.figure(figsize=(14,5))\nsns.countplot(data=games, x= 'STATE',hue='home_conference',palette=['blue','red'], alpha=.8)\nplt.title('Games played in each state given the conference',fontsize=18)\nplt.legend(title='Conference', title_fontsize=12)\nplt.tick_params(labelsize=14)\nplt.ylabel('')\nplt.xlabel('');","2ed56ece":"plt.figure(figsize=(15,6))\nsns.countplot(data=games, x='gameTimeEastern',color='darkblue',\n              order=sorted(games.gameTimeEastern.unique()), alpha=.7)\nplt.title('Games Starting time (EST)',fontsize=18)\nplt.legend(title='Conference', title_fontsize=12)\nplt.tick_params(labelsize=12,rotation=290)\nplt.yticks(rotation=0)\nplt.ylabel('')\nplt.xlabel('');","8ecd158e":"plt.figure(figsize=(18,6))\nsns.countplot(data=games, x='gameTimeLocal',color='darkblue',\n              order=sorted(games.gameTimeLocal.unique()), alpha=.7)\nplt.title('Games Starting time (local time)',fontsize=18)\nplt.tick_params(labelsize=12,rotation=290)\nplt.yticks(rotation=0)\nplt.ylabel('')\nplt.xlabel('');","44bc3f82":"plt.figure(figsize=(22,6))\nsns.pointplot(data=games, x='week',y='TAVG', palette='viridis_r', hue='season', dodge=.3,markers= '^', linestyles=':')#,ci=99.9, palette='icefire_r', alpha= .8)\nplt.ylabel('Average Temperature in F',fontsize=15)\nplt.xlabel('Week', fontsize= 15)\nplt.title('Average air temperature for each game week',fontsize=18)\nplt.xticks(fontsize=14)\nplt.yticks(fontsize=12);","0bcf0b17":"fig = plt.figure(figsize=(16,6))\nax = fig.add_subplot(111)\nsns.countplot(data=players, x ='Position',ax=ax, palette='viridis', order=players.Position.value_counts().index, alpha=.9)\nplt.title('Counts of each player in every position', fontsize=22)\nplt.xticks(fontsize=14)\nplt.yticks(fontsize=14)\nplt.ylabel('')\nplt.xlabel('');","87e3dfb5":"fig = plt.figure(figsize=(10,5))\nax = fig.add_subplot(111)\nsns.kdeplot(data=players, x ='highcm', linewidth=0,fill=True,alpha=.4)\nplt.title(\"Players' heights KDE plot\", fontsize=16);","7958ea1f":"fig = plt.figure(figsize=(20,7))\nax = fig.add_subplot(111)\nsns.boxplot(data=players, y = 'highcm', x='Position',order= players.groupby('Position')['highcm'].mean().sort_values(ascending=False).index, ax=ax, palette='viridis')\nplt.title(\"Players' heights for every position\", fontsize=20)\nplt.xticks(fontsize=14)\nplt.yticks(fontsize=14)\nplt.ylabel('')\nplt.xlabel('');","da257600":"fig = plt.figure(figsize=(22,26))\ngrid =  gridspec.GridSpec(7,4,figure=fig,hspace=.35,wspace=.2)\npositions_and_means = list(zip(players.groupby('Position')['highcm'].mean().index,players.groupby('Position')['highcm'].mean()))\nheight_mean = players.highcm.mean() \nn =0\nfor i in range(7):\n    for j in range(4):\n        ax = fig.add_subplot(grid[i, j])\n        pos = positions_and_means[n][0]\n        sns.kdeplot(data= players[players.Position == pos ], x='highcm',ax=ax, color='darkblue',alpha=.4,linewidth=0,fill=True)\n        ax.axvline(positions_and_means[n][1],label='Pos \u03bc= {}'.format(round(positions_and_means[n][1],2)),color = 'orangered',linestyle ='--',alpha=.7)\n        ax.axvline(height_mean,label='Ovr \u03bc= {}'.format(round(height_mean,2)), color='blue',linestyle ='--',alpha=.7)\n        ax.set_title('Position: '+positions_and_means[n][0],fontsize=14)\n        ax.set_xlabel('')\n        ax.set_ylabel('')\n        ax.set_xlim(167,206)\n        plt.legend(loc='upper left',fontsize= 10)\n        n += 1\n        if n ==26:\n            break\nfig.suptitle('Kde plot of players\\' heights for every position', fontsize=16,y=.9);","5e6a3a8e":"fig = plt.figure(figsize=(10,5))\nax = fig.add_subplot(111)\nsns.kdeplot(data=players, x ='weight', linewidth=0,fill=True,alpha=.4,color='darkblue')\nplt.title(\"Players' weight KDE plot\", fontsize=16);","efe8a228":"fig = plt.figure(figsize=(20,7))\nax = fig.add_subplot(111)\nsns.boxplot(data=players, y = 'weight', x='Position',order= players.groupby('Position')['weight'].mean().sort_values(ascending=False).index, ax=ax, palette='viridis')\nplt.title(\"Players' weight for every position\", fontsize=20)\nplt.xticks(fontsize=14)\nplt.yticks(fontsize=14)\nplt.ylabel('')\nplt.xlabel('');","c7447c15":"fig = plt.figure(figsize=(22,26))\ngrid =  gridspec.GridSpec(7,4,figure=fig,hspace=.35,wspace=.2)\npositions_and_means = list(zip(players.groupby('Position')['weight'].mean().index,players.groupby('Position')['weight'].mean()))\nweight_mean = players.weight.mean() \nn =0\nfor i in range(7):\n    for j in range(4):\n        ax = fig.add_subplot(grid[i, j])\n        pos = positions_and_means[n][0]\n        sns.kdeplot(data= players[players.Position == pos ], x='weight',ax=ax, color='darkblue',alpha=.4,linewidth=0,fill=True)\n        ax.axvline(positions_and_means[n][1],label='Pos \u03bc= {}'.format(round(positions_and_means[n][1],2)),color = 'orange',linestyle ='--',alpha=.7)\n        ax.axvline(weight_mean,label='Ovr \u03bc= {}'.format(round(weight_mean,2)), color='blue',linestyle ='--',alpha=.7)\n        ax.set_title('Position: '+positions_and_means[n][0],fontsize=14)\n        ax.set_xlabel('')\n        ax.set_ylabel('')\n        ax.set_xlim(153,380)\n        plt.legend(loc='upper right',fontsize= 10)\n        n += 1\n        if n ==26:\n            break\nfig.suptitle('Kde plot of players\\' weights for every position', fontsize=16,y=.9);","fc43a3f4":"g = sns.jointplot(data=players, y = 'weight', x='highcm',kind='reg',height=8,ratio=8,space=.1)\ng.set_axis_labels(xlabel='Height (cm)', ylabel= 'Weight (lb)',fontsize=14);","bc467452":"fig = plt.figure(figsize=(16,12))\ngrid =  gridspec.GridSpec(2,2 ,figure=fig, hspace=.1,wspace=.15 )\nax1 = fig.add_subplot(grid[0, 0])\nax2 = fig.add_subplot(grid[0, 1])\ncolors= [( 1.00, .682, .102),\n         (.455, .569, .914),\n         (0.477504, 0.821444, 0.318195),\n         (0.134692, 0.658636, 0.517649)]\npatches, texts, nums  = ax1.pie(x= plays.specialTeamsPlayType.value_counts()\n                      , wedgeprops=dict(width=0.55,linewidth= 0),startangle=305,\n                      center=(.2,.5),radius=1.1,colors=colors,autopct='%.1f%%',\n                      textprops=dict(fontsize=14),)\nax1.legend(patches, plays.specialTeamsPlayType.value_counts().index, bbox_to_anchor=[0.1, 0.25],fontsize=11, title='Play type', title_fontsize=13)\n\nax1.set_title('Count of each play type', fontsize=18)\nsns.kdeplot(data=plays[~plays.specialTeamsPlayType.isin(['Kickoff','Extra Point'])],\n            x='yards_to_endzone',hue='specialTeamsPlayType',fill=True,linewidth=0,palette=['orange','darkblue'], ax= ax2,alpha=.5)\nax2.set_title('play type and yards to endzone', fontsize=18)\nax1.set_ylabel('')\nax2.set_ylabel('')\nax1.set_xlabel('', fontsize=14)\nax2.set_xlabel('',fontsize=14)\n\nax3 = fig.add_subplot(grid[1, 0])\nax4 = fig.add_subplot(grid[1, 1])\n\nsns.scatterplot(data= plays, x='yards_to_endzone', y='kickLength',hue='specialTeamsPlayType',s=110,alpha=.4, ax=ax3,palette='viridis')\n\nsns.kdeplot(data= plays[(plays.specialTeamsPlayType.isin(['Field Goal','punt']))],palette= 'viridis',\n            hue='specialTeamsResult', x='pos_score_def',fill=True, alpha=.7, ax= ax4,\n            hue_order=list(plays[(plays.specialTeamsPlayType.isin(['Field Goal','punt']))].specialTeamsResult.value_counts().sort_values().index))\nax3.legend(fontsize=11, title='Play type', title_fontsize=13)\nax3.set_ylabel('kick Length', fontsize=14)\nax3.set_xlabel('yards to end zone', fontsize=14)\nax4.set_ylabel('')\nax4.set_xlabel('Pos team score differnce',fontsize=14)\nfig.suptitle('Plays dataset summary', y=.94, fontsize=22);","eccb4b1d":"fig = plt.figure(figsize=(17,12))\ngrid =  gridspec.GridSpec(2,2 ,figure=fig, hspace=.2,wspace=.4 )\n\nax1 = fig.add_subplot(grid[0, 0])\nax2 = fig.add_subplot(grid[0, 1])\nax3 = fig.add_subplot(grid[1, 0])\nax4 = fig.add_subplot(grid[1, 1])\nfor t,x in zip(plays.specialTeamsPlayType.unique(), (ax1,ax2,ax3,ax4)):\n    sns.countplot(data=plays[plays.specialTeamsPlayType == t], y='specialTeamsResult',\n                  order= plays[plays.specialTeamsPlayType == t].specialTeamsResult.value_counts().index,color='darkblue',alpha=.6, ax=x)\n    x.set_title('Results of {} plays'.format(t),fontsize=16)\n    x.set_ylabel('')\n    x.set_xlabel('')\n    x.tick_params(axis='y', labelsize=11)\n    x.tick_params(axis='x', labelsize=13)\nfig.suptitle('Result summary of  each kind of Special teams plays', fontsize= 20, y=.95);","cc10b1ea":"fig = plt.figure(figsize=(18, 7))\ngrid =  gridspec.GridSpec(1, 2, figure=fig, hspace=.18,wspace=.1 )\nax1 = fig.add_subplot(grid[0, 0])\nax2 = fig.add_subplot(grid[0, 1:])\n\npunt_l = list(plays[(plays.specialTeamsPlayType.isin(['Punt']))].specialTeamsResult.value_counts().sort_values(ascending=True).index)\nsns.kdeplot(data=plays[(plays.specialTeamsPlayType.isin(['Punt']))],\n            x='yards_to_endzone',hue='specialTeamsResult',hue_order=punt_l,fill=True,linewidth=1,palette= 'viridis', alpha=.7, ax=ax1)\nfgoal_l = ['Kick Attempt Good','Kick Attempt No Good','Non-Special Teams Result', 'Blocked Kick Attempt']\nsns.kdeplot(data=plays[(plays.specialTeamsPlayType.isin(['Field Goal'])) & (plays.specialTeamsResult.isin(fgoal_l))],\n            x='yards_to_endzone',hue='specialTeamsResult',hue_order=fgoal_l[::-1],fill=True,linewidth=1,palette='viridis', alpha=.7, ax=ax2)\nax1.set_title('Punts results distributions', fontsize=16)\nax2.set_title('Field goal results distributions', fontsize=16)\nfig.suptitle('Yards to end zone and special teams plays results distributions', fontsize=22)\nax1.set_ylabel('')\nax2.set_ylabel('');","4811df4b":"fig = plt.figure(figsize=(16,12))\ngrid =  gridspec.GridSpec(2,2 ,figure=fig, hspace=.2,wspace=.15 )\nax1 = fig.add_subplot(grid[0, 0])\nax2 = fig.add_subplot(grid[0, 1])\nax3 = fig.add_subplot(grid[1, 0:])\n\nsns.countplot(data= PFFScoutingData, x = 'kickDirectionIntended',\n              hue= 'kickDirectionActual', palette='viridis', ax= ax1)\nax1.set_title('Count of kick  given the direction (intended vs real)', fontsize=16)\nax1.set_ylabel('')\nax1.set_xlabel('direction intended', fontsize=14)\nax1.legend(loc= 'upper right', fontsize= 10, title= 'Actual direction', title_fontsize=12)\nsns.countplot(data= PFFScoutingData, x = 'kickType',\n              hue= 'kickDirectionActual', palette='viridis', ax= ax2)\nax2.set_title( 'Count of each kick type given the direction', fontsize=16)\nax2.set_ylabel('')\nax2.set_xlabel('')\nax2.legend(loc= 'upper right', fontsize= 10, title= 'Kick direction', title_fontsize=12)\nsns.kdeplot(data= PFFScoutingData,  hue= 'kickType',x= 'hangTime',hue_order= list(PFFScoutingData.kickType.value_counts().sort_values().index),\n            palette='colorblind', fill=True, ax= ax3, alpha=.7)\nax3.set_title('KDE plot of hanging time giving the type of each kick', fontsize= 16)\nax3.set_ylabel('')\nfig.suptitle('PFFScoutingData Summary', fontsize = 22, y=.94);","471d6162":"try:\n    tracking2018.groupby(['displayName','gameId','playId']).agg({'dis' : 'sum', 's':'mean','team':st.mode}).reset_index()\nexcept:\n    print(colored('Guess what?!, ...It happened!',color = 'red'))","3d34a91f":"t_df = tracking2018.groupby(['displayName','gameId','playId']).agg({'dis' : 'sum', 's':'mean','team':lambda x: [i for i in x]}).reset_index().copy()","90f46a42":"for n, i in enumerate(t_df.team.values):\n    for j in i:\n        if j != i[0]:\n            print(n)\n            break","fea1baf0":"t_df.iloc[106540,:]","c910e629":"tracking2018[(tracking2018.gameId==2018093011) & (tracking2018.playId == 3604) & (tracking2018.displayName == 'Michael Thomas')].sample(10)","f40839ff":"del t_df\ntracking18_agg = tracking2018.groupby(['nflId','displayName', 'jerseyNumber', 'position', 'team','gameId','playId']).agg({'time':'min', 'dis' : 'sum', 's':['mean','max','min'],'a':['mean','max','min']}).copy()\ntracking19_agg = tracking2019.groupby(['nflId','displayName', 'jerseyNumber', 'position', 'team','gameId','playId']).agg({'time':'min', 'dis' : 'sum', 's':['mean','max','min'],'a':['mean','max','min']}).copy()\ntracking20_agg = tracking2020.groupby(['nflId','displayName', 'jerseyNumber', 'position', 'team','gameId','playId']).agg({'time':'min', 'dis' : 'sum', 's':['mean','max','min'],'a':['mean','max','min']}).copy()\ntracking18_agg.columns = ['beg_time', 'dis_sum', 's_mean', 's_max', 's_min', 'a_mean', 'a_max', 'a_min']\ntracking19_agg.columns = ['beg_time', 'dis_sum', 's_mean', 's_max', 's_min', 'a_mean', 'a_max', 'a_min']\ntracking20_agg.columns = ['beg_time', 'dis_sum', 's_mean', 's_max', 's_min', 'a_mean', 'a_max', 'a_min']\ntracking18_agg.reset_index(inplace= True)\ntracking19_agg.reset_index(inplace= True)\ntracking20_agg.reset_index(inplace= True)\ntracking18_agg = tracking18_agg.merge(games, how= 'inner', left_on= 'gameId',right_on='gameId').merge(plays, left_on= ['gameId','playId'], right_on = ['gameId','playId']).merge(players, left_on= ['nflId'], right_on=['nflId']).copy()\ntracking19_agg = tracking19_agg.merge(games, how= 'inner', left_on= 'gameId',right_on='gameId').merge(plays, left_on= ['gameId','playId'], right_on = ['gameId','playId']).merge(players, left_on= ['nflId'], right_on=['nflId']).copy()\ntracking20_agg = tracking20_agg.merge(games, how= 'inner', left_on= 'gameId',right_on='gameId').merge(plays, left_on= ['gameId','playId'], right_on = ['gameId','playId']).merge(players, left_on= ['nflId'], right_on=['nflId']).copy()\ngc.collect()\ntracking18_agg.sample(4)","5b6c0ffe":"tracking18_agg[(tracking18_agg.playId == 3604) & (tracking18_agg.displayName_x == 'Michael Thomas')]","89ff8f13":"tracking_agg = pd.concat([tracking18_agg, tracking19_agg, tracking20_agg], ignore_index=True, sort=False)\ntracking_agg['team_name'] = np.select([tracking_agg.team =='home' ,tracking_agg.team =='away'], [tracking_agg.homeTeamAbbr, tracking_agg.visitorTeamAbbr])\ntracking_agg['side'] = np.where(tracking_agg.possessionTeam == tracking_agg.team_name, 'offense','defense')\ntracking_agg['team_conference'] = tracking_agg.team_name.apply(lambda x: team_abb[x][-2])\ntracking_agg['team_region'] = tracking_agg.team_name.apply(lambda x: team_abb[x][-1])\ntracking_agg['team_division'] = tracking_agg.team_conference + ' ' + tracking_agg.team_region\ntracking_agg.displayName_x = tracking_agg.displayName_x.str.lower().copy()\ntracking_agg.displayName_y = tracking_agg.displayName_y.str.lower().copy()\ntracking_agg.playDescription = tracking_agg.playDescription.str.lower().copy()\n\ntracking_agg['displayName_x_abb'] = tracking_agg.displayName_x.apply(lambda nm : str(nm)[0]+'.')\ntracking_agg['displayName_x_abb'] = tracking_agg.displayName_x_abb + tracking_agg.displayName_x.str.extract('\\s(\\w+)').loc[:,0]\ntracking_agg['displayName_y_abb'] = tracking_agg.displayName_y.apply(lambda nm : str(nm)[0]+'.')\ntracking_agg['displayName_y_abb'] = tracking_agg.displayName_y_abb + tracking_agg.displayName_y.str.extract('\\s(\\w+)').loc[:,0]\ndel tracking18_agg, tracking19_agg, tracking20_agg\nl = []\nfor name_x_ab, name_y_ab, name_x, name_y, playdes in zip(tracking_agg.displayName_x_abb,\n                                   tracking_agg.displayName_y_abb,\n                                   tracking_agg.displayName_x,\n                                   tracking_agg.displayName_y,\n                                   tracking_agg.playDescription):\n    if (name_x_ab in playdes) or (name_y_ab in playdes) or(name_x in playdes) or (name_y in playdes):\n        l.append('key player')\n    else:\n        l.append('non key player')\ntracking_agg['player_is_key'] = l\ngc.collect()\ntracking_agg.head()","46e8a88f":"plt.figure(figsize=(10,6))\nsns.kdeplot(data=tracking_agg, x='dis_sum', hue= 'season', fill=False, palette='viridis',linewidth=2)\nplt.title('Average distance ran by a player in a play', fontsize=18);","4868f89f":"plt.figure(figsize=(10,8))\nsns.scatterplot(y= 's_mean', x= 'dis_sum', data= tracking_agg,s=100, palette= 'viridis',hue='position', alpha=.7)\nplt.title('Relation between speed and distance made by each player in a play',fontsize=16)\nplt.legend(loc='lower right',ncol=2,title='Position',title_fontsize=14);","3d9bd267":"fig, ((ax11, ax12, ax13, ax14),(ax21, ax22, ax23, ax24)) = plt.subplots(2,4, figsize=(24,10))\nplt.subplots_adjust(hspace=.25)\nsns.barplot(x= 'season', y= 'dis_sum', data= tracking_agg, ci=99.9, palette='viridis', hue='side',alpha=.9,ax=ax11)\nax11.set_title('Side in the play',fontsize= 16)\nax11.set_xticks([-1,0,1,2,3])\nax11.set_xticklabels(['',2018, 2019, 2020,''])\nax11.tick_params(labelsize=14)\nax11.set_ylabel('Distance (yards)',fontsize=14)\nax11.set_xlabel('')\nax11.legend(ncol=1,fontsize=10,title='Side',title_fontsize= 12,loc='lower right');\n\nsns.barplot(x= 'season', y= 'dis_sum', data= tracking_agg, ci=99.9, palette='viridis', hue='team', alpha=.9,ax=ax12)\nax12.set_title('Player team',fontsize=16)\nax12.set_xticks([-1,0,1,2,3])\nax12.set_xticklabels(['',2018, 2019, 2020,''])\nax12.tick_params(labelsize=14)\nax12.set_ylabel('')\nax12.set_xlabel('')\nax12.legend(ncol=1,fontsize=10,title='Team',title_fontsize= 12,loc='lower right');\n\nsns.barplot(x= 'season', y= 'dis_sum', data= tracking_agg, ci=99.9, palette='viridis', hue='quarter',alpha=.9,ax=ax13)\nax13.set_title('Quarter',fontsize=16)\nax13.set_xticks([-1,0,1,2,3])\nax13.set_xticklabels(['',2018, 2019, 2020,''])\nax13.tick_params(labelsize=14)\nax13.set_ylabel('')\nax13.set_xlabel('')\nax13.legend(ncol=1,fontsize=10,title='Quarter',title_fontsize= 12,loc='lower right');\n\nsns.barplot(x= 'season', y= 'dis_sum', data= tracking_agg, ci=99.9, palette='viridis', hue='specialTeamsPlayType',alpha=.9,ax=ax14)\nax14.set_title('Play type',fontsize=16)\nax14.set_xticks([-1,0,1,2,3])\nax14.set_xticklabels(['',2018, 2019, 2020,''])\nax14.tick_params(labelsize=14)\nax14.set_ylabel('')\nax14.set_xlabel('')\nax14.legend(ncol=1,fontsize=10,title='Play type',title_fontsize= 12,loc='center left');\n\nfig.text(.5,.92, 'Avg distance ran in a play by a player',horizontalalignment='center', fontsize=18)\n\nsns.barplot(x= 'season', y= 's_mean', data= tracking_agg, ci=99.9, palette='viridis', hue='side',alpha=.9,ax=ax21)\nax21.set_title('')\nax21.set_xticks([-1,0,1,2,3])\nax21.set_xticklabels(['',2018, 2019, 2020,''])\nax21.tick_params(labelsize=14)\nax21.set_ylabel('Speed (y\/s)',fontsize=14)\nax21.set_xlabel('')\nax21.legend(ncol=1,fontsize=10,title='Side',title_fontsize= 12,loc='lower right');\n\nsns.barplot(x= 'season', y= 's_mean', data= tracking_agg, ci=99.9, palette='viridis', hue='team', alpha=.9, ax=ax22)\nax22.set_title('')\nax22.set_xticks([-1,0,1,2,3])\nax22.set_xticklabels(['',2018, 2019, 2020,''])\nax22.tick_params(labelsize=14)\nax22.set_ylabel('')\nax22.set_xlabel('')\nax22.legend(ncol=1,fontsize=10,title='Team',title_fontsize= 12,loc='lower right')\n\nsns.barplot(x= 'season', y= 's_mean', data= tracking_agg, ci=99.9, palette='viridis', hue='quarter',alpha=.9,ax=ax23)\nax23.set_title('')\nax23.set_xticks([-1,0,1,2,3])\nax23.set_xticklabels(['',2018, 2019, 2020,''])\nax23.tick_params(labelsize=14)\nax23.set_ylabel('')\nax23.set_xlabel('')\nax23.legend(ncol=1,fontsize=10,title='Quarter',title_fontsize= 12,loc='lower right');\n\nsns.barplot(x= 'season', y= 's_mean', data= tracking_agg, ci=99.9, palette='viridis', hue='specialTeamsPlayType', alpha=.9, ax=ax24)\nax24.set_title('')\nax24.set_xticks([-1,0,1,2,3])\nax24.set_xticklabels(['',2018, 2019, 2020,''])\nax24.tick_params(labelsize=14)\nax24.set_ylabel('')\nax24.set_xlabel('')\nax24.legend(ncol=1,fontsize=10,title='Play type',title_fontsize= 12,loc='center left')\n\nfig.text(.5,.48, 'Avg spead of a player in a play',horizontalalignment='center', fontsize=18)\n\n\nfig.suptitle('Distance and Speed Summary', fontsize=20,y=.98);","7d58923c":"fig, (ax1, ax2) = plt.subplots(2, 1, figsize=(24,11))\nsns.barplot(x= 'position', y= 'dis_sum', data= tracking_agg, ci=99.9, palette='viridis', hue='season',ax=ax1,\n            order= tracking_agg.groupby('position')['dis_sum'].mean().sort_values(ascending= False).index)\nax1.set_title('Avg of distance ran in a play given the position and sesaon',fontsize=20)\nax1.tick_params(labelsize=14)\nax1.set_ylabel('Avg Distance ran (yards)',fontsize=16)\nax1.set_xlabel('')\nax1.legend(ncol=1,fontsize=14,title='Season',title_fontsize= 14);\n\nsns.barplot(x= 'position', y= 's_mean', data= tracking_agg, ci=99.9, palette='viridis', hue='season',ax=ax2,\n            order= tracking_agg.groupby('position')['s_mean'].mean().sort_values(ascending= False).index)\nax2.set_title('Avg speed in a play given the position and sesaon',fontsize=20)\nax2.tick_params(labelsize=14)\nax2.set_ylabel('Avg speed (y\/s)',fontsize=16)\nax2.set_xlabel('')\nax2.legend(ncol=1,fontsize=14,title='Season',title_fontsize= 14);","9a16eff8":"fig, (ax1, ax2) = plt.subplots(2, 1, figsize=(24,11))\nsns.boxplot(x= 'position', y= 'dis_sum', data= tracking_agg, palette='viridis', hue='season',\n            order= tracking_agg.groupby('position')['dis_sum'].mean().sort_values(ascending= False).index,ax=ax1)\nax1.set_title('Distance ran in a play given the position and sesaon',fontsize=20)\nax1.tick_params(labelsize=14)\nax1.set_ylabel('Distance ran (yards)',fontsize=16)\nax1.set_xlabel('')\nax1.legend(ncol=1,fontsize=12,title='Season',title_fontsize= 14);\n\nsns.boxplot(x= 'position', y= 's_mean', data= tracking_agg, palette='viridis', hue='season',\n            order= tracking_agg.groupby('position')['s_mean'].mean().sort_values(ascending= False).index,ax=ax2)\nax2.set_title('Speed average in a play given the position and sesaon',fontsize=20)\nax2.tick_params(labelsize=14)\nax2.set_ylabel('Speed (y\/s)',fontsize=16)\nax2.set_xlabel('')\nax2.legend(ncol=1,fontsize=12,title='Season',title_fontsize= 14);","a412fb03":"fig, (ax1, ax2) = plt.subplots(2, 1, figsize=(28,11))\nsns.boxplot(x= 'position', y= 'dis_sum', data= tracking_agg, palette='viridis', hue='quarter',\n            order= tracking_agg.groupby('position')['dis_sum'].mean().sort_values(ascending= False).index,ax=ax1)\nax1.set_title('Distance ran in a play given the position and quarter',fontsize=20)\nax1.tick_params(labelsize=14)\nax1.set_ylabel('Distance ran (yards)',fontsize=16)\nax1.set_xlabel('')\nax1.legend(ncol=1,fontsize=12,title='quarter',title_fontsize= 14);\n\nsns.boxplot(x= 'position', y= 's_mean', data= tracking_agg, palette='viridis', hue='quarter',\n            order= tracking_agg.groupby('position')['s_mean'].mean().sort_values(ascending= False).index,ax=ax2)\nax2.set_title('Speed average in a play given the position and quarter',fontsize=20)\nax2.tick_params(labelsize=14)\nax2.set_ylabel('Speed (y\/s)',fontsize=16)\nax2.set_xlabel('')\nax2.legend(ncol=1,fontsize=12,title='quarter',title_fontsize= 14);","3aecb3a9":"NE = requests.get(\"https:\/\/cdn.freebiesupply.com\/images\/large\/2x\/new-england-patriots-logo-transparent.png\")\nNE = Image.open(BytesIO(NE.content))\nKC = requests.get(\"https:\/\/logos-world.net\/wp-content\/uploads\/2020\/05\/Kansas-City-Chiefs-logo.png\")\nKC = Image.open(BytesIO(KC.content))\nTB = requests.get(\"https:\/\/cdn.freebiesupply.com\/images\/large\/2x\/tampa-bay-buccaneers-logo-transparent.png\")\nTB = Image.open(BytesIO(TB.content))\nSF = requests.get(\"https:\/\/assets.stickpng.com\/images\/580b585b2edbce24c47b2b55.png\")\nSF = Image.open(BytesIO(SF.content))\nLA = requests.get(\"https:\/\/logodownload.org\/wp-content\/uploads\/2020\/09\/la-rams-logo-0.png\")\nLA = Image.open(BytesIO(LA.content))\nfinalists = [TB,KC,SF,NE,LA]\nfor i in finalists:\n    i.thumbnail((250,250))\n    LA.convert('RGBA')\nimg = Image.new('RGBA', (1250, 250), color = (255, 255, 255))\nx = 0\nfor i,j in enumerate(finalists):\n    if i not in [0,4]:\n        img.paste(j,box=(x,50))\n    else:\n        img.paste(j, box= (x,0))\n    x += 250\nfig, axeses = plt.subplots(1,5, figsize=(27,7))\n\nfor ax, logo in zip(axeses, finalists):\n    ax.imshow(logo,interpolation='nearest')\n    ax.spines['top'].set_visible(False)\n    ax.spines['left'].set_visible(False)\n    ax.spines['bottom'].set_visible(False)\n    ax.spines['right'].set_visible(False)\n    ax.set_xticks([])\n    ax.set_yticks([])\n    ax.set_facecolor('white')\nfig.suptitle(\"Finalists of the last three seasons\\n\\n\\n\",y=.95, fontsize=20)\n\naxeses[0].set_title('NFC Champion 2020\\nWon Super Bowl\\n', fontsize=16)\naxeses[1].set_title('AFC Champion 2019\/2020\\nWon Super Bowl 2019 lost 2020\\n\\n\\n', fontsize=16)\naxeses[2].set_title('NFC Champion 2019\\nLost Super Bowl\\n\\n\\n', fontsize=16)\naxeses[3].set_title('AFC Champion 2018\\nWon Super Bowl\\n\\n\\n', fontsize=16)\naxeses[4].set_title('\\n\\nNFC Champion 2018\\nLost Super Bowl', fontsize=16);","cbf9b3c4":"team_ord = ['TB','KC','SF','NE','LA','IND','WAS','MIA',\n            'NYG','DET','NO','NYJ','CLE','MIN','HOU','TEN',\n            'CIN','GB','BUF','DEN','JAX','DAL','ARI','LAC',\n            'CHI','SEA','PIT','CAR','ATL', 'BAL','OAK','LV']\ndiv_ord = ['AFC south','NFC south','AFC east', 'NFC east',\n           'AFC north', 'NFC north', 'AFC west', 'NFC west']","0ddae230":"fig = plt.figure(figsize=(28,11))\ngrid =  gridspec.GridSpec(2,6 ,figure=fig, hspace=.25,wspace=.15 )\nax1 = fig.add_subplot(grid[0, 0])\nax12 = fig.add_subplot(grid[0, 1:3])\nax13 = fig.add_subplot(grid[0, 3:])\nax2 = fig.add_subplot(grid[1, 0])\nax22 = fig.add_subplot(grid[1, 1:3])\nax23 = fig.add_subplot(grid[1, 3:])\n\nsns.barplot(x= 'team_conference', y= 'dis_sum', data= tracking_agg, ci=99.9, palette='Blues', hue='season', ax= ax1)\nax1.set_title('Avg Distance ran in a play by a player\\ngiven team conference and sesaon',fontsize=12)\nax1.tick_params(labelsize=12)\nax1.set_ylabel('Distance (yards)',fontsize=14)\nax1.set_xlabel('')\nax1.set_ylim(0,37)\nax1.get_legend().remove()\n\nsns.barplot(x= 'team_region', y= 'dis_sum', data= tracking_agg, ci=99.9, palette='Blues', hue='season', ax= ax12)\nax12.set_title('Avg Distance ran in a play by a player\\ngiven team region and sesaon',fontsize=12)\nax12.tick_params(labelsize=12)\n# ax12.set_yticks([])\nax12.set_ylabel('')\nax12.set_xlabel('')\nax12.set_ylim(0,37)\nax12.get_legend().remove()\n\nsns.barplot(x= 'team_division', y= 'dis_sum', data= tracking_agg, ci=99.9, palette='Blues', hue='season', ax= ax13)\nax13.set_title('Avg Distance ran in a play by a player\\ngiven his division and sesaon',fontsize=12)\nax13.tick_params(labelsize=12)\n# ax13.set_yticks([])\nax13.set_ylabel('')\nax13.set_xlabel('')\nax13.set_ylim(0,37)\nax13.get_legend().remove()\n\n\nsns.barplot(x= 'team_conference', y= 's_mean', data= tracking_agg, ci=99.9, palette='Blues', hue='season', ax= ax2)\nax2.set_title('Avg speed of a player\\ngiven conference and sesaon',fontsize=12)\nax2.tick_params(labelsize=12)\nax2.set_ylabel('Speed (y\/s)',fontsize=14)\nax2.set_xlabel('')\nax2.set_ylim(0,4.5)\nax2.get_legend().remove()\n\nsns.barplot(x= 'team_region', y= 's_mean', data= tracking_agg, ci=99.9, palette='Blues', hue='season', ax= ax22)\nax22.set_title('Avg speed of a player\\ngiven his team region and sesaon',fontsize=12)\nax22.tick_params(labelsize=12)\n# ax22.set_yticks([])\nax22.set_ylabel('')\nax22.set_xlabel('')\nax22.set_ylim(0,4.5)\nax22.get_legend().remove()\n\nsns.barplot(x= 'team_division', y= 's_mean', data= tracking_agg, ci=99.9, palette='Blues', hue='season', ax= ax23)\nax23.set_title('Avg speed of a player\\ngiven his division and sesaon',fontsize=12)\nax23.tick_params(labelsize=12)\n# ax23.set_yticks([])\nax23.set_ylabel('')\nax23.set_xlabel('')\nax23.set_ylim(0,4.5)\nax23.get_legend().remove()\nh, l = ax1.get_legend_handles_labels()\nfig.legend(h,l, ncol=3, fontsize=10,title='Season',title_fontsize= 12,bbox_to_anchor=(.57,.95))\nfig.suptitle('Distance and speed of player in each play', fontsize=20);","db9f594d":"fig, [ax1,ax2,ax3] = plt.subplots(3,1, figsize=(25,16))\n\nsns.barplot(x= 'team_name', y= 'dis_sum', data= tracking_agg, ci=99.9, palette='Blues', hue='season',order= team_ord, ax= ax1)\nax1.set_title('Avg Distance ran in a play by a player given his team and the sesaon',fontsize=16)\nax1.tick_params(labelsize=12)\nax1.set_ylabel('Distance (yards)',fontsize=14)\nax1.set_xlabel('')\nax1.set_ylim(15,37)\nax1.get_legend().remove()\nsns.barplot(x= 'homeTeamAbbr', y= 'dis_sum', data= tracking_agg, ci=99.9, palette='Blues', hue='season', order= team_ord, ax= ax2)\nax2.set_title('Avg Distance ran in a play by a player at home stadium given the team and the sesaon',fontsize=16)\nax2.tick_params(labelsize=12)\nax2.set_ylabel('Distance (yards)',fontsize=14)\nax2.set_xlabel('')\nax2.set_ylim(15,37)\nax2.get_legend().remove()\n\nsns.barplot(x= 'visitorTeamAbbr', y= 'dis_sum', data= tracking_agg, ci=99.9, palette='Blues', hue='season',order= team_ord, ax= ax3)\nax3.set_title('Avg Distance ran in a play by a player playing away given the team and the sesaon',fontsize=16)\nax3.tick_params(labelsize=12)\nax3.set_ylabel('Distance (yards)',fontsize=14)\nax3.set_xlabel('')\nax3.set_ylim(15,37)\nax3.get_legend().remove()\n\nfig.suptitle('Avg Distance covered summary by teams', y= .94, fontsize=20)\nh, l = ax1.get_legend_handles_labels()\nfig.legend(h,l, ncol=3, fontsize=14,title='Season',title_fontsize= 16,bbox_to_anchor=(.29,.93));","6d494c93":"plt.figure(figsize=(24,5))\nsns.boxplot(x= 'position', y= 's_mean', data= tracking_agg, palette='viridis', hue='season',\n            order= tracking_agg.groupby('position')['s_mean'].mean().sort_values(ascending= False).index)\nplt.title('Speed average in a play given the position and sesaon',fontsize=22)\nplt.xticks(fontsize=16)\nplt.yticks(fontsize=14)\nplt.ylabel('Speed (y\/s)',fontsize=16)\nplt.xlabel('')\nplt.legend(ncol=1,fontsize=12,title='Season',title_fontsize= 14);","4ca0e4fb":"plt.figure(figsize=(18,6))\nsns.countplot(data= tracking_agg, x= 'Position', hue= 'player_is_key', palette= 'viridis');","1af866d8":"tracking_agg.player_is_key.value_counts()","83f40d2e":"def football_field(ax):\n    \"\"\"\n    this function set the plot to look like a football field\n    input:\n    ax: an axes\n    return\n    matplotlib axes with football field drawn\n    \"\"\"\n    sns.set_style('ticks')\n    ax.set_xlabel('')\n    ax.set_ylabel('')\n    ax.grid(axis='x',zorder=1)\n    ax.xaxis.grid(linestyle='dotted',linewidth=2.5,color='white',zorder=1)\n    ax.set_facecolor('limegreen')\n    ax.set_xlim(0,120)\n    ax.set_ylim(0,53.4)\n    \n    ax.axvspan(0, 10,linestyle='', color='white', alpha=1, zorder=2)\n    ax.axvspan(110,120, linestyle='', color='white', alpha=1, zorder=2)\n    ax.axvspan(0, 10, linestyle='', color='fuchsia', alpha=.4, zorder=3)\n    ax.axvspan(110, 120, linestyle='', color='fuchsia', alpha=.4, zorder=3)\n    \n    ax.xaxis.set_major_locator(MultipleLocator(10))\n    ax.xaxis.set_major_formatter('{x:.0f}')\n    ax.xaxis.set_minor_locator(MultipleLocator(1))\n    ax.spines['top'].set_visible(False)\n    ax.spines['right'].set_visible(False)\n    ax.spines['bottom'].set_visible(False)\n    ax.spines['left'].set_visible(False)\n    \n    ax.axvline(10, color='white',linewidth=4 ,zorder=3)\n    ax.axvline(110, color='white',linewidth= 4,zorder= 3)\n    ax.axvline(60, color='white', linewidth=4,zorder=3)\n    for i in range(11,110,2):\n        ax.axvline(i,.48,.52,linewidth= 2 ,zorder=4, alpha=.9,color='white')\n    \n    ax.tick_params(axis='x', which='minor',direction ='in', top=True,bottom=True, length = 8,width= 1.5,color='white', zorder=3)\n    ax.tick_params(axis='x', which='major',direction ='in', top=True,labeltop= True,bottom=True, length = 10,width= 2.5,pad=-35,labelsize='small', color='white',labelcolor='white',zorder=3)\n    ax.tick_params(axis='y', which='major', left=False)\n    ax.set_xticks([i for i in range(0,121,10)])\n    ax.set_xticklabels(['','','1 0','2 0','3 0','4 0','5 0','4 0','3 0','2 0','1 0','',''],fontsize=22,fontfamily='serif',fontweight='heavy')\n    ax.set_yticks([])\n    return ax","a7803c2f":"fig, ax = plt.subplots(figsize=(12,5.5))\nax  = football_field(ax)","f930aecf":"def get_player_data(year, playername=None, nflid=None):\n    '''\n    this function get player data\n    input:\n    playername: string, the name of the player\n    nflid: int, unique identifier of the player\n    year int, the year which its data is being plotted\n    return:\n    player weight, height and age\n    '''\n    if playername == nflid == None:\n        print(colored('kindly enter either player name or his NFL ID','red'))\n        return None\n    if playername != None:\n        if playername not in players.displayName.values:\n            print(colored('Wrong name!, {} is not in players database you can try this with NFL ID'.format(playername),'red'))\n            return None\n        if playername in missing_players.keys():\n            weight = missing_players[playername][1]\n            height = missing_players[playername][0]\n            Age = '--'\n        elif playername in duplicated_names:\n            nflid = int(input('this name is duplicated kindly enter the nflid of the player'))\n            weight = players[players.nflId == nflid].weight.values[0]\n            height = players[players.nflId == nflid].highcm.values[0]\n            Age = players[players.nflId == nflid].age.values[0] + (year - 2018)\n        else:\n            weight = players[players.displayName == playername].weight.values[0]\n            height = players[players.displayName == playername].highcm.values[0]\n            Age = players[players.displayName == playername].age.values[0] + (year - 2018)\n        return weight, height, Age\n    if nflid != None:\n        if nflid not in players.nflId.values:\n            print(colored('Wrong NFL ID {} is not in players database, please make sure you entered the correct ID','red'))\n            return None\n        else:\n            weight = players[players.nflId == nflid].weight.values[0]\n            height = players[players.nflId == nflid].highcm.values[0]\n            Age = players[players.nflId == nflid].age.values[0] + (year - 2018)\n        return weight, height, Age","f76baa1f":"games.set_index('gameId',inplace=True)","c3a6d143":"def get_game_id(season, week, hometeam= None, awayteam= None, playername= None):\n    '''\n    this function gets the unique id of a game\n    inputs:\n    year: int, the year in which the game was in\n    home\/away team: strng, the home\/away team in this game\n    playername: string, player name that was in this game (might need to enter unique nflId of the player)\n    return:\n    gameid: int, unique game id\n    '''\n    nflid = 0\n    try:\n        if hometeam == awayteam == playername == None:\n            print(colored('Couldn\\'t get game id!, please make sure that you enter at least one of these args [hometeam, awayteam, playername]','red'))\n            return None\n    except:\n        pass\n    \n    if season not in [2018,2019,2020]:\n        print(colored('wrong season!, please make sure that selected season is in [2018:2020]','red'))\n        return None\n    elif ((week > 17) or (week < 1)) or type(week) != int:\n        print(colored('wrong week value!, please make sure that selected week is in [1:17]','red'))\n        return None\n    try:\n        if playername in duplicated_names:\n            nflid = int(input('player name is duplicated kindly enter the unique NFL id of the player\\n'))\n            nflid = players[players.displayName == playername].nflId.values[0]\n    except:\n        print(colored('{} doesn\\'t have tracking data in {}!'.format(playername, season),'red'))\n        return None\n\n    if hometeam != None:\n        try:\n            gid = games[(games.season == season) & (games.week == week) & (games.homeTeamAbbr == hometeam)].index[0] \n            return gid\n        except:\n            print(colored('make sure you selected the right home team!','red'))\n    \n    elif awayteam != None:\n        try:\n            gid = games[(games.season == season) & (games.week == week) & (games.visitorTeamAbbr == awayteam)].index[0]\n            return gid\n        except:\n            print(colored('make sure you selected the right visitor team!','red'))\n    else:\n        if season == 2018:\n            try:\n                games_this_week =list(games[(games.season == season) & (games.week == week)].index)\n                if nflid != 0:\n                    gid = tracking2018[(tracking2018.nflId == nflid) & (tracking2018.gameId.isin(games_this_week))].gameId.values[0]\n                else:\n                    gid = tracking2018[(tracking2018.displayName == playername) & (tracking2018.gameId.isin(games_this_week))].gameId.values[0]\n                return gid\n            except:\n                 print(colored('{} doesn\\'t have tracking data in {}!'.format(playername, season),'red'))\n        elif season == 2019:\n            try:\n                games_this_week =list(games[(games.season == season) & (games.week == week)].index)\n                if nflid != 0:\n                    gid = tracking2019[(tracking2019.nflId == nflid) & (tracking2019.gameId.isin(games_this_week))].gameId.values[0]\n                else:\n                    gid = tracking2019[(tracking2019.displayName == playername) & (tracking2019.gameId.isin(games_this_week))].gameId.values[0]\n                return gid\n            except:\n                 print(colored('{} doesn\\'t have tracking data in {}!'.format(playername, season),'red'))\n        elif season == 2020:\n            try:\n                games_this_week =list(games[(games.season == season) & (games.week == week)].index)\n                if nflid != 0:\n                    gid = tracking2020[(tracking2020.nflId == nflid) & (tracking2020.gameId.isin(games_this_week))].gameId.values[0]\n                else:\n                    gid = tracking2020[(tracking2020.displayName == playername) & (tracking2020.gameId.isin(games_this_week))].gameId.values[0]\n                return gid\n            except:\n                 print(colored('{} doesn\\'t have tracking data in {}!'.format(playername, season),'red'))","d33910d3":"def get_team_games(team, season=0, where= 'all'):\n    '''\n    this function returns all games id's for a team\n    team: string, team name for which games id's are being extracted\n    season: int, the season on which games were played if let it will exrtact all games in all season in the database\n    where: string, extract games only playing in home, away or both\n    return:\n    team_games: list containt games id's\n    '''\n    if team not in team_abb.keys():\n        print(colored('Wrong team name! cold\\'nt find values for `{}`'.format(team),'red'))\n        return None\n    \n    if where not in ['home', 'away', 'all']:\n        print(colored('Wrong value for `where` arg!, please make sure it\\'s within [home, away, all]','red'))\n        return None\n    \n    elif season == 0:\n        if where == 'all':\n            team_games = list(games[(games.homeTeamAbbr == team) | (games.visitorTeamAbbr == team)].index)\n        elif where == 'home':\n            team_games = list(games[games.homeTeamAbbr == team].index)\n        elif where == 'away':\n            team_games = list(games[games.visitorTeamAbbr == team].index)\n        return team_games\n    \n    elif season not in [2018, 2019, 2020]:\n        print(colored('Wrong season! please make sure that season is in [2018:2020] period','red'))\n        return None\n    \n    else:\n        if where == 'all':\n            team_games = list(games[(games.season == season) & ((games.homeTeamAbbr == team) | (games.visitorTeamAbbr == team))].index)\n        elif where == 'home':\n            team_games = list(games[(games.season == season) & (games.homeTeamAbbr == team)].index)\n        elif where == 'away':\n            team_games = list(games[(games.season == season) & (games.visitorTeamAbbr == team)].index)      \n        return team_games\n    ","9f4b310a":"def get_player_games(season, playername= None, nflid= None, where= 'all'):\n    '''\n    this function returns all games id's for a players\n    playername: string, player name for which games id's are being extracted\n    season: int, the season on which games were played if let it will exrtact all games in all season in the database\n    where: string, extract games only playing in home, away or both\n    return:\n    team_games: list containt games id's\n    '''\n    if playername == nflid == None:\n        print(colored('kindly enter either player name or his NFL ID','red'))\n        return None\n    if where not in ['home', 'away', 'all']:\n        print(colored('Wrong value for `where` arg!, please make sure it\\'s within [home, away, all]','red'))\n        return None\n    tracking = eval('tracking'+str(season))\n    if playername != None:\n        if playername in duplicated_names:\n            nflid = int(input('this name is duplicated kindly enter the nflid of the player'))\n            if where == 'all':\n                player_games = list(tracking[tracking.nflId == nflid].gameId.unique())\n            elif where == 'home':\n                player_games = list(tracking[(tracking.nflId == nflid) & (tracking.team == 'home')].gameId.unique())\n            elif where =='away':\n                player_games = list(tracking[(tracking.nflId == nflid) & (tracking.team == 'away')].gameId.unique())\n        else:\n            if where == 'all':\n                player_games = list(tracking[tracking.displayName == playername].gameId.unique())\n            elif where == 'home':\n                player_games = list(tracking[(tracking.displayName == playername) & (tracking.team == 'home')].gameId.unique())\n            elif where =='away':\n                player_games = list(tracking[(tracking.displayName == playername) & (tracking.team == 'away')].gameId.unique())\n        \n    elif nflid != None:\n        if nflid not in players.nflId.values:\n            print(colored('Wrong NFL ID {} is not in players database, please make sure you entered the correct ID','red'))\n            return None\n        else:\n            if where == 'all':\n                player_games = list(tracking[tracking.nflId == nflid].gameId.unique())\n            elif where == 'home':\n                player_games = list(tracking[(tracking.nflId == nflid) & (tracking.team == 'home')].gameId.unique())\n            elif where =='away':\n                player_games = list(tracking[(tracking.nflId == nflid) & (tracking.team == 'away')].gameId.unique())\n    del tracking\n    return player_games","1f6df6d2":"def get_plays(gameid, posteam= None):\n    '''\n    this function print all plays within a game\n    inputs:\n    gameid: int, unique identifier of a game\n    posteam: string, optional, name of the team that possesses the ball\n    return:\n    list of all plays within a game\n    '''\n    if posteam == None:\n        plays_list = list(plays[plays.gameId == gameid].playId)\n        if len(plays_list) == 0:\n            print(colored('make sure that you insert the correct values','red'))\n            return\n        else:\n            return plays_list\n    else:\n        plays_list = list(plays[(plays.gameId == gameid) & (plays.possessionTeam == posteam)].playId)\n        if len(plays_list) == 0:\n            print(colored('Make sure that you insert the correct values!','red'))\n            return\n        else:\n            return plays_list","d0685a85":"def get_play_data(df, gameid, playid):\n    '''\n    this function gets a single play data\n    input:\n    df: dataFrame, sub tracking dataFrame to extract data from\n    gameid int, unique identifier of a game\n    return\n    week, date, home, away, posteam, team, direction, gtype, and result of the play\n    '''\n    week = games.loc[gameid,'week']\n    date = games.loc[gameid,'gameDate']\n    home = games.loc[gameid,'homeTeamAbbr']\n    away = games.loc[gameid,'visitorTeamAbbr']\n    posteam = plays[(plays.gameId == gameid) & (plays.playId == playid)].possessionTeam.values[0]\n    team = df['team'].values[0]\n    posteam = plays[(plays.gameId == gameid) & (plays.playId == playid)].possessionTeam.values[0]\n    direction = df['playDirection'].values[0]\n    gtype = plays[(plays.gameId == gameid) & (plays.playId == playid)].specialTeamsPlayType.values[0]\n    result = plays[(plays.gameId == gameid) & (plays.playId == playid)].specialTeamsResult.values[0]\n    return week, date, home, away, posteam, team, direction, gtype, result","403a874c":"def plot_custom(df, playername, year, gameid=None, playid=None, ball= False):\n    \"\"\"\n    this is the main plotting func, it plots player movmement and heat map of that movment\n    inputs:\n    df: sub-dataframe to plot from, extracted from tracking2018\n    playrname: string, player we are try to plot his movement\n    year: int, year in whic tracking is in\n    ball: bool, boolean to plot the ball \n    return:\n    figure of player movement with direction, ball movment (if plotting a single play) and also heat map of player movment\n    \"\"\"\n    sns.set_style('ticks')\n    if ball == True:\n        g_ball_df = eval('ball_'+str(year)[-2:]+'_df')\n        if (gameid != None) and (playid == None):\n            g_ball_df = g_ball_df[g_ball_df.gameId == gameid]\n        elif (gameid != None) and (playid != None):\n            g_ball_df = g_ball_df[(g_ball_df.gameId == gameid) & (g_ball_df.playId == playid)]\n    fig = plt.figure(figsize=(1.2*25,1.2*5.5))\n    plt.subplots_adjust(left=None, bottom=None, right=None, top=None, wspace=.02,hspace=.2)\n    ax = fig.add_subplot(1,2,1)\n    ax2 = fig.add_subplot(1,2,2)\n    ax = football_field(ax)\n    ax2 = football_field(ax2)\n    sns.kdeplot(x='x', y='y', data= df, cmap= hcmap,fill=True,alpha=.85,ax=ax,zorder=5)\n    ax2.quiver(df.x, df.y, df.x, df.y,angles= (90- df.dir ), zorder=5, pivot=\"mid\",edgecolor='none',color='blue',alpha=.3,headwidth = 7 )\n    if ball == True:\n        ax2.scatter(g_ball_df.x, g_ball_df.y ,color='brown', alpha=.7, marker=\"o\", s= 80, label='Ball', zorder=6)\n        ax2.legend(loc='upper right')\n    weight, height, Age = get_player_data(year,playername)\n    fig.suptitle('Plotting {} Movement\\nAge:{} yrs | Weight: {} lb | Height: {} cm'.format(playername,Age,weight,height),fontsize=16)\n    ax.set_title('Heat map of {} movment'.format(playername),fontsize=16)\n    ax2.set_title('Movement and direction of {}'.format(playername),fontsize=16)\n    if playid != None:\n        p_week, p_date, p_home, p_away, p_posteam, p_team, p_direction, p_gtype, p_result = get_play_data(df, gameid= gameid, playid= playid)\n        boxstr = 'Week:{}\\nOn: {}\\nHome: {}\\nAway: {}\\nPlayer is in {}\\n{}\\'s ball\\nType: {}\\nResult: {}'.format(p_week, p_date,\n                                                                                                                 p_home , p_away, p_team,\n                                                                                                                 p_posteam, p_gtype, p_result)\n        fig.text(.49,.45,boxstr, fontsize=12, bbox=dict(boxstyle=\"round\",ec='white',fc='lightgrey',alpha=.9),ha=\"left\", va=\"center\")\n        if p_direction == 'right':\n            fig.text(.49,.65, 'Play direction', fontsize=14, bbox=dict(boxstyle=\"rarrow\",ec='orange',fc='orange',alpha=.9),ha=\"left\", va=\"center\")\n        else:\n            fig.text(.49,.65, 'Play direction', fontsize=14, bbox=dict(boxstyle=\"larrow\",ec='orange',fc='orange',alpha=.9),ha=\"left\", va=\"center\")\n    ax.set_xlabel('')\n    ax2.set_xlabel('')\n    return fig;","0346b57c":"def plot_player_mvt(playername, season, week = None, playid= None, ball= False):\n    '''\n    plots player movements as scatter and heatmap in a whole year\n    inputs:\n    playername: string, the name of the player\n    year: int (maybe required promptly), year in which tracking data was recorded\n    week: the game week if it's required to plot only movement in a single game\n    play: the play id if it's required to only plot a single play movements\n    ball: bool, boolean to plot the ball used only when plotting a game or a play\n    return:\n    heatmap and scatter plots of a player's movement in a whole year\n    '''\n    seasons = [2018,2019,2020]\n    if season not in seasons:\n        while True:\n            print(colored('Please make sure that selected season is in [2018:2020]','red'))\n            season = input('Please select the year in which player\\'s tracking data was in, kindly select one of the following\\n1 for 2018\\n2 for 2019\\n3 for 2020\\n4 to exit\\n')\n            if season in ['1','2','3']:\n                season = int(season) + 2017\n                break\n            elif season == '4':\n                return None;\n            else:\n                print('kindly enter one of the above mentioned options!')\n\n    if week != None:\n        while True:\n            if ((week > 17) or (week < 1)) or type(week) != int:\n                print(colored('wrong week value!, please make sure that selected week is in [1:17]','red'))\n                week = int(input('kindly insert week again:\\n'))\n            else:\n                gameid = get_game_id(season, week, playername= playername)\n                player_games = get_player_games(season,playername)\n                if (gameid not in player_games) or (player_games == None):\n                    print(colored('{} didn\\'t play in this week\/season'.format(season),'red'))\n                    return None\n                else:\n                    break\n   \n    temp_tracking = eval('tracking'+str(season))\n    if (week != None) and (playid != None):\n        if playername in duplicated_names:\n            nflid = int(input('this name is duplicated kindly enter the nflid of the player'))\n            temp_df = temp_tracking[(temp_tracking.gameId == gameid) & (temp_tracking.nflId == nflid) & (temp_tracking.playId == playid)]\n        else:\n            temp_df = temp_tracking[(temp_tracking.gameId == gameid) & (temp_tracking.displayName == playername) & (temp_tracking.playId == playid)]\n        if len(temp_df) == 0:\n            print(colored(playername +' doesn\\'t have tracking data in {} week {} play no. {}!'.format(season, week, playid),'red'))\n            return None;\n        fig = plot_custom(temp_df, playername, year= season, gameid= gameid, playid= playid, ball= ball)\n        del temp_tracking, temp_df\n        gc.collect()\n    elif week !=None:\n        if playername in duplicated_names:\n            nflid = int(input('this name is duplicated kindly enter the nflid of the player'))\n            temp_df = temp_tracking[(temp_tracking.gameId == gameid) & (temp_tracking.nflId == nflid)]\n        else:\n            temp_df = temp_tracking[(temp_tracking.gameId == gameid) & (temp_tracking.displayName == playername)]\n        if len(temp_df) == 0:\n            print(colored(playername +' doesn\\'t have tracking data in {} week {}!'.format(season, week),'red'))\n            return None;\n        fig = plot_custom(temp_df, playername, year= season, gameid= gameid, ball= ball)\n        del temp_tracking, temp_df\n        gc.collect()\n    else:\n        if playername in duplicated_names:\n            nflid = int(input('this name is duplicated kindly enter the nflid of the player'))\n            temp_df = temp_tracking[temp_tracking.nflId == nflid]\n        else:\n            temp_df = temp_tracking[temp_tracking.displayName == playername]\n        if len(temp_df) == 0:\n            print(colored(playername +' doesn\\'t have tracking data in {} season!'.format(season),'red'))\n            return None;\n        temp_df = temp_tracking[temp_tracking.displayName == playername]\n        fig = plot_custom(temp_df, playername, year= season, ball= ball)\n        del temp_tracking, temp_df\n        gc.collect()","980665ee":"def plot_play(season, gameid, playid):\n    \"\"\"\n    this function plot an animation of a whole play including all players\n    inputs:\n    gameid: unique game identifier\n    playid: unique play identifier\n    return:\n    an animation of a play\n    \"\"\"\n    fig, ax = plt.subplots(figsize=(1.2*(12),1.2*(5.4)))\n    plt.rcParams[\"animation.html\"] = \"jshtml\"\n    tracking = eval('tracking'+str(season))\n    eball = eval('ball_'+str(season)[-2:]+'_df')\n    temp_tr = tracking[(tracking.playId ==playid) & (tracking.gameId == gameid)].set_index(['time','frameId' ]).sort_index()\n    temp_ball = eball[(eball.playId ==playid) & (eball.gameId == gameid)].set_index(['time','frameId']).sort_index()\n    frames = temp_ball.index                                                                \n\n    pos_team =  plays[(plays.gameId == gameid) & (plays.playId == playid)].possessionTeam.values[0]\n    home = games.loc[gameid,'homeTeamAbbr']\n    away = games.loc[gameid,'visitorTeamAbbr']\n    gtype = plays[(plays.gameId == gameid) & (plays.playId == playid)].specialTeamsPlayType.values[0]\n    result = plays[(plays.gameId == gameid) & (plays.playId == playid)].specialTeamsResult.values[0]\n    week = games.loc[gameid,'week']\n    ax = football_field(ax)\n    if home == pos_team:\n        Att, Def = home, away\n        temp_att = temp_tr[temp_tr.team == 'home']\n        temp_def = temp_tr[temp_tr.team == 'away'] \n    else:\n        Att, Def = away, home\n        temp_def = temp_tr[temp_tr.team == 'home']\n        temp_att = temp_tr[temp_tr.team == 'away'] \n    \n    def animate(f):\n        plt.cla()    \n        ax = plt.gca()\n        temp_ball_s = temp_ball.loc[f,:]\n        ax.scatter(temp_ball_s.x, temp_ball_s.y, color='brown', alpha=1, s=220,zorder=8, label='Ball')\n        temp_att_s = temp_att.loc[f,:]\n        temp_def_s = temp_def.loc[f,:]\n        ax.quiver(temp_att_s.x, temp_att_s.y, temp_att_s.x, temp_att_s.y, zorder=5, angles= (90- temp_att_s.dir ),\n                  pivot=\"mid\",edgecolor='none', color='red',alpha=.6,headwidth = 7, label= 'Att' )\n        ax.quiver(temp_def_s.x, temp_def_s.y, temp_def_s.x, temp_def_s.y, zorder=5, angles= (90- temp_def_s.dir ),\n                  pivot=\"mid\",edgecolor='none', color='blue',alpha=.6,headwidth = 7,  label= 'Def')\n        ax = football_field(ax)\n        ax.text(0,.96,str(f[0]),fontsize=14, bbox=dict(boxstyle=\"round\",ec='white',fc='white',alpha=.7),ha=\"left\", va=\"center\")\n        ax.set_title('Game  {} | {} vs. {} | Ball with {}\\nPlay type: {} | Result: {}'.format(week, home, away, pos_team, gtype, result),fontsize=18)\n        ax.legend(loc= 'upper right',fontsize= 13,ncol=1)\n        print('\u2588',end='')     \n    ani = matplotlib.animation.FuncAnimation(fig, animate, frames= frames,blit=False)\n    html = HTML(ani.to_jshtml())\n    display(html)\n    plt.close()\n","3b3f360a":"plot_player_mvt('Keishawn Bierria',2018)","c2a35e54":"plot_player_mvt('Keishawn Bierria', 2019, week=17)","2eeea6ba":"plot_player_mvt('Keishawn Bierria', 2019, week=17,playid=36, ball= True)","a13fb799":"plot_player_mvt('Keishawn Bierria',2020)","b948817f":"nyg_home_games = get_team_games('NYG',season=2018, where='home')","ac21c488":"giants_plays = get_plays(nyg_home_games[0],posteam='NYG')","f40c121f":"plot_play(2018, nyg_home_games[0], giants_plays[0])","70a0b352":"plot_play(2018, 2018090906, 3527)","f22b68ae":"trackking_plays_agg = tracking_agg.groupby(['gameId','playId','side',\n                      'specialTeamsPlayType',\n                      'month','yards_to_endzone',\n                      'yardsToGo', 'down','quarter',\n                      'gameClock','pos_score_def','specialTeamsResult']).agg({'TAVG': 'mean','highcm': 'mean', 'age': 'mean','weight':'mean'}).reset_index()\ntrackking_plays_agg.gameClock = trackking_plays_agg.gameClock.apply(lambda x: round((int(x[:2]) + (int(x[3:5]) \/60)),3)) \ntrackking_plays_agg.sample(8)","9a1eb61e":"X = pd.get_dummies(trackking_plays_agg[(trackking_plays_agg['side'] == 'offense') & (trackking_plays_agg['specialTeamsPlayType'] == 'Punt')][[ 'month',\n       'yards_to_endzone', 'yardsToGo', 'down', 'quarter', 'gameClock',\n       'pos_score_def','TAVG', 'highcm', 'age', 'weight']])\ny = trackking_plays_agg[(trackking_plays_agg['side'] == 'offense') & (trackking_plays_agg['specialTeamsPlayType'] == 'Punt')]['specialTeamsResult']","2bf25caa":"X_train, X_test, y_train, y_test = split(X, y, test_size=0.33, random_state=42)","2d55f770":"def plot_model(model, x_tr, y_tr,  x_ts, y_ts):\n    model.fit(x_tr, y_tr)\n    pred = model.predict(x_tr)\n    print('train scores\\naccuracy: ',accuracy_score(y_tr, pred),\n      '\\nprecision: ',precision_score(y_tr, pred, average='weighted'),\n      '\\nrecall: ',recall_score(y_tr, pred, average='weighted'),\n      '\\nf1: ',f1_score(y_tr, pred, average='weighted'))\n    predt = model.predict(x_ts)\n    print('test scores\\naccuracy: ',accuracy_score(y_ts, predt),\n      '\\nprecision: ',precision_score(y_ts, predt, average='weighted'),\n      '\\nrecall: ',recall_score(y_ts, predt, average='weighted'),\n      '\\nf1: ',f1_score(y_ts, predt, average='weighted'))\n    contr = confusion_matrix(pred, y_tr)\n    conts = confusion_matrix(predt, y_ts)\n    classeS = list(model.classes_)\n    fig, (ax1 ,ax2) = plt.subplots(1,2, figsize= (24,8))\n    plt.subplots_adjust(left=None, bottom=None, right=None, top=None, wspace=.1)\n    sns.heatmap( contr, cbar=False, annot= True,fmt='1.0f',cmap='magma_r',  ax=ax1)\n    ax1.set_xlabel('Predictied', fontsize=14)\n    ax1.set_xticklabels(classeS,rotation=345)\n    ax1.set_ylabel('Actual', fontsize=14)\n    sns.heatmap(conts, cbar=False, annot= True,fmt='1.0f',cmap='magma_r', ax=ax2)\n    ax2.set_xlabel('Predictied', fontsize=14)\n    ax2.set_ylabel('Actual', fontsize=14)\n    ax2.set_xticklabels(classeS,rotation=345)\n    ax1.set_title('Train confusion matrix', fontsize=14)\n    ax2.set_title('Test confusion matrix', fontsize=14)\n    imp= pd.DataFrame(model.feature_importances_, index= X_train.columns ,columns=('imp',))\n    print(imp.imp.sort_values(ascending = False))","6cc4fbea":"xgbclf= xgb.XGBClassifier(booster='gbtree', colsample_bylevel=1,\n              colsample_bynode=1, colsample_bytree=1, eval_metric='merror',\n              gamma=1,importance_type='gain',learning_rate=0.05,max_depth=4,n_estimators=600, n_jobs=4,\n              objective='multi:softprob', random_state=0,reg_alpha=1, reg_lambda=1,tree_method='exact')\nplot_model(xgbclf,X_train,y_train, X_test, y_test)","b1cf0fb3":"> ### Distance covered by a players seems to vary a lot","fc923215":"### First we get a list of all New York Giantshome games ","50738eeb":"### Adding `yards to end zone` feature to the plays dataframe","6119f28e":"### Making an order list for teams and also divisions","fa7dea6f":"### Testing the animation function","29438d7a":"### Now we extrac heights of players and convert it to centimeters and also will be extracting age of players","ab090fa7":"### Next we check teams statistics\n#### We will order the teams to focus on the last Super Bowl and Conference winners","eae62002":"### Getting height and weight (manually)","0837e556":"# Welcome to the [NFL Big Data Bowl 2022](https:\/\/www.kaggle.com\/c\/nfl-big-data-bowl-2022)!\n\n<center><img src='https:\/\/www.stadiumsofprofootball.com\/wp-content\/uploads\/2016\/07\/metlifegiants2012955.jpg' width='600' height=\"600\" ><\/center>\n\n#### This notebook will go through an extensive analysis to view and explore the NFL Big Data Bowl 2022 competition data , this note bote (for now) will be focusing on 2018 data to explore the plays data and players movements, to that end we will be creating functions to easilty plot players movments\n<h4><font color='darkred'>Please note that this work you're about to see here is a work in progress so a lot will be added later<\/font><\/h4>\n\n\n## The notebook will have the following sections:\n ### - [Data Imports and initial exploring](#load_data).\n ####  you can skip this part of you are familiar with the competition data.\n ### - [Exploratory data analysis](#EDA).\n ### - [Player movement analysis](#PMEDA).\n ### - [ML starter](#ml).\n ####  this part will contain the whole EDA process to explore all the datasets.\n#### P.S.  There won't be a dedicated parts for cleaning or features engineering as few of both will be done along the way since the data is pretty much preprocessed.","8f15367e":"### As the name suggest `get_play_data` is meant to extract data about a play","68bf6b7d":"### The next figure shows the overall relation between height and weight","ac6e8af2":"<center><img src=\"https:\/\/www.reactiongifs.us\/wp-content\/uploads\/2018\/11\/2018-NFL-Football-1.gif\" width=600 height=500><\/center>","6eb0a156":"<h2><center><font color='red'>Upvote this or Chuck will pay you a visit..<\/font><\/center><\/h2>\n<center><img src=\"https:\/\/i.imgur.com\/lDkgwsV.gif\"><\/center>","fc5b10b8":"### This coming function is called `get_plays` and is meant to get plays within a game","38577298":"### checking again for duplicated names problem","4c39ea1e":"<a id='gms'><\/a>\n\n## First we explore games dataset","2e4704bf":"> ### Weights seems to differ from the overall mean in a more obvious way from heights","578e2922":"<center><img src=\"https:\/\/c.tenor.com\/790jxHUkKLIAAAAC\/loser-joey.gif\" width='500' height=\"500\"><\/center>","ffd41474":"<a id='players'><\/a>\n## Exploring players dataset","244658de":"### Checking if all games in tracking DataFrame are included in the games DataFrame","6a3e3e9d":"### Now we reached the main function which is called `plot_player_mvt`  this function uses the previous functions to plot both player movement with direction, ball movment (if plotting a single play) and also heat map of player movment","3c014c27":"### Getting the names of players with missing birth year","327c8894":"### Clarification\n#### `side` feature added above is meant whether the player in on the team with the ball or not as offense mean that player is with the team that have the possession and defense if not (and not to be confused with fotball offense adn defense teams)","506b4aea":"> #### Seems like all null values are associated with the ball \ud83c\udfc8 tracking","ba4b2770":"### Finaly we merge temperature dataframe with the games one","36c9bed8":"### Now we plot the same variables with only changing the season variable to quarters","a014f135":"### Not Much out there but as expected yards to end zone is importat feature ","0ecb33e4":"> ### Seems like there are a lot of outliers","5df3467d":"<a id='PMEDA'><\/a>\n\n\n<center><h1>Plotting Player Movement<\/h1><\/center>\n<h1><\/h1>\n<center><img src=\"https:\/\/www.reactiongifs.us\/wp-content\/uploads\/2017\/10\/Time-outNFL.gif\" width='600' height=\"600\"><\/center>\n\n### Now let's take a time out from data analysis and focus a little on coding,\n### please note that in this part functional programming will be heavily used to come out with nice tools (functions) to plot tracking data without a lot of code repetion\n#### P.S most of code in this section is hidden for Aesthetic reasons (too many lines) so you can unhide it to show the code of each function.","c6eea05a":"### Let's explore distance and speed","74fcb929":"<center><img src='https:\/\/c.tenor.com\/W36eIGSnVakAAAAC\/dragons-den-very-good.gif'><\/center>","6db99ceb":"### First we show the number of each player in each position (as this may afffect the overall avarage of any players statistics)","717f2528":"### Now we get the average temperature of air in each week","28c36469":"### Now we check game time","6d4ed013":"<a id='plays'><\/a>\n## Exploring the plays data sets","64e504ff":"<a id='ml'><\/a>\n\n# Machine learning starter\n\n### This part is just a ML playground to explore some features importance\n","ea1cd4e1":"### Checking if there is any duplication in gameid in games dataset","ef37214b":"<center><h3>Looking Good!<\/h3><\/center>","43b4f47a":"### Getting plays in the first game where possession is with the Giants","39af5a45":"### Separating ball tracking from players tracking data","4f8dc139":"### Now we check plays and PFFScoutingData datasets","0a34c5d8":"### First we import libraries to work with","6bb6c189":"### Mapping teams abbreviations to full name (got that from [NFL 2021 Rulebook](https:\/\/operations.nfl.com\/the-rules\/2021-nfl-rulebook\/#team-abbreviation-codes))\n### We will also map a team name to NOAA weather stations to get weather data of games.","02574e81":"### Now we make a mapping for states timezone (only the difference from EST)","7783721d":"### Now we check players weights in the very same way","006f4557":"### Using box plot to explore outliers","ee87f308":"## Distance covered and speed\n### In this part will be look into the distance covered and speed of players ","dc62847e":"### Checking if these names related to the previous missing birth dates","1340d2f6":"> ### `playDescription` columns seems to be interesting as it have a text describing the play","6997a6f9":"\n<center><img src=\"https:\/\/c.tenor.com\/Oc4nf8N08jIAAAAd\/mind-blow-galaxy.gif\"  width='500' height=\"500\"><\/center>","6c9880a1":"<center><h2> Now let the analysis begins<\/h2><\/center>\n\n\n<center><img src=\"https:\/\/www.reactiongifs.us\/wp-content\/uploads\/2018\/11\/2018-NFL-Football.gif\" width='600' height=\"600\"><\/center>\n\n","6243693e":"### Now we will be converting data types to save memory","c9906560":"<center><img src=\"https:\/\/media4.giphy.com\/media\/q9TdZOZfsSspi\/giphy.gif\"><\/center>","d76ed6ab":"### Showing a box plot of height for each player position","91f6d27f":"<a id='trk'><\/a>\n## Now we explore the tracking datasets\n### We start by doing some aggregation","f612e2a0":"<center><img src=\"https:\/\/c.tenor.com\/FkEo2jYLDrYAAAAd\/what-a-coincidence-reassure.gif\"><\/center>","96fc7dbf":"### Setting games DataFrame index to gameId","1666a2b8":"### Testing the function","c0996c0a":"### Adding birth dates","e28358c1":"### The next figure shows a summary of each special team play result","0a454e70":"### Checking tracking datasets","58f72b8b":"## This part will go through a complete EDA to explore all datasets\n### We will be exploring the following datasets\n* #### [Games](#gms).\n* #### [Players](#players).\n* #### [plays](#plays).\n* #### [PFFScoutingData](#Epff).\n* #### [Tracking data](#trk). ","ec9fa6e3":"<a id='Epff'><\/a>\n### Exploring the PFFScoutingData dataset","180d2cb9":"### Editing some data types to save memory","f5f3675d":"### now we explore Players' heights and weights\n### We start with players heights","745bf7f1":"### Now we explore by teams","7d24621d":"### Now we explore the temperature data collected from the NOAA","56a19903":"### Getting the duplicated names","60fe7b3f":"### The next figure is just to get a deeper look into each position distribution and how it differs from the overall mean","5b933e45":"> ### Even if hegihts look smooth it still looks like is a mixture of gaussians distributions ","d9a06de5":"### Now we explore `players` DataFrame","91999cac":"### Getting values with null nflId's","80497474":"#### Told ya, it happens!! .. two `Michael Thomas` same game same play, different teams! \n<center><img src=\"https:\/\/c.tenor.com\/QXVs4QWLlzkAAAAC\/spider-man.gif\"  width='500' height=\"500\"><\/center>","4afb83ec":"#### Investigating this (don't judge me, I just need to know )","65977d0c":"<a id='load_data'><\/a>\n# Loading Data and exploring main statistics\n\n### This part will be dedicated to data imports and also initial exploring of the datasets.","5315b717":"### Getting a list of states","09b50d89":"### First we make a function called `football_field` to plot a football field","19bb6d27":"### We start first by showing games played inb each state given the conference","44a8c933":"### Now we make a function called `get_game_id` to get game id","afa55a3f":"<a id='EDA'><\/a>\n# Exploratory Data Analysis","fcb5cc6b":"### First we get a summary of the plays dataset","0337344a":"> ### weights distribution seems a little different from heights as it looks like some kind of a trimodal distribution","b449c965":"### Checking dublicated name (it happens!)","f82308e7":"### The coming function is called `get_player_data` and is meant to extract players' data","4c1c4b3d":"### Engineering PreSnapscores features to show the score of team in possession and the receiving team in addtion to the score difference instead of only dealing with home and visitor labels","a134c814":"### Now we make some functions to get specific games' id's to that end we will make these functions:\n* `get_team_games`\n* `get_player_games`","c88552a6":"### The next function is called `plot_custom` and it use past functions to comout with a plot ","8941717a":"### Now We fix this problem and make an aggregation for the three seasons by each player and each play","a428b6b3":"### Now lets make an animation function called `plot_play` that make a video animation of a play with all players and also the ball ","0ca312c3":"### Now we take a deeper look into yards to end zone special teams plays \n#### P.s we will explore Punts and Field goals only since kick offs and extra points have fixed starting yardage","7140fb8c":"### First we make some aggregation by each play but we will separate the offensive from the defensive sides","b402de2a":"### checking if all players in tracking are in the players dataset","b676feb7":"### Merging it all together","03eadc3c":"### Now we split and make a function to\n- train the model\n- show training and test metrics\n- show features importance\n- plot confusion matrix","aab1338a":"#### Actually using .copy() and the above mentioned data types helpes reducing the memory usage dramatically (down somewhere around 6.2gb), I think this is as good as it gets if you wanted to go with pandas","f6c352a1":"### Checking if all columns across all year datasets all equal","1d4a20ba":"### First we make a KDE plot of average distance ran by a player","1c7f189e":"### First we make a key from the games dataframe"}}