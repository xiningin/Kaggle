{"cell_type":{"03879657":"code","b6fe6936":"code","41044b66":"code","c7785989":"code","35612272":"code","2fd3d266":"code","13adb7c4":"code","a79ed910":"code","a2c7c6fc":"code","bdf0c486":"code","fd337b2e":"code","a6a2d1da":"code","411c9997":"code","7e771964":"code","0684ec31":"code","5f0f5ae1":"code","27cb4534":"code","1f216529":"code","7cab7a65":"code","cec888cd":"code","b5ed60ae":"code","c3255d43":"markdown","bc285149":"markdown","4b610d46":"markdown","d25eb13c":"markdown","9c453527":"markdown","753197d3":"markdown","eebd6903":"markdown","6fb2d087":"markdown","12de1a40":"markdown","92216a6c":"markdown","834302d5":"markdown","46f23bd8":"markdown","7331dc6c":"markdown","6649eb40":"markdown","9ddac49f":"markdown"},"source":{"03879657":"!pip install pyecharts","b6fe6936":"import pandas as pd\nimport seaborn as sns\nfrom pyecharts.charts import *\nfrom pyecharts import options as opts\nfrom pyecharts.commons.utils import JsCode","41044b66":"starbucks=pd.read_csv('\/kaggle\/input\/starbucks\/directory.csv')\nstarbucks.head()","c7785989":"starbucks.info()","35612272":"starbucks.drop_duplicates(subset=['Store Number'],keep='last',inplace=True,ignore_index=True)","2fd3d266":"countries=pd.read_csv('\/kaggle\/input\/starbucks\/continents.csv')\nstarbucks=pd.merge(starbucks,countries[['alpha-2','name']],left_on='Country',right_on='alpha-2',how='left')","13adb7c4":"starbucks.head()","a79ed910":"data=[]\nfor countryname,counts in starbucks['name'].value_counts().items():\n    data.append([countryname,counts])\ndata[:5]","a2c7c6fc":"data_=pd.DataFrame(data,columns=['countryname','counts'])\ndata_.head()","bdf0c486":"sns.displot(data_['counts'],bins=100,height=5,aspect=3)","fd337b2e":"data__=data_[data_['counts']<150]\nsns.displot(data__['counts'],bins=100,height=5,aspect=3)","a6a2d1da":"from matplotlib import colors as mcolors\ncurrent_palette=sns.color_palette('OrRd_r',n_colors=15)\nsns.palplot(current_palette)\ncolor_list=[]\nfor color in current_palette:\n    color_rgb1_t=mcolors.to_rgb(color)\n    color_rgb255_l=[]\n    for value in list(color_rgb1_t):  \n        value=round(value*255)\n        color_rgb255_l.append(value)\n    color_rgb255='rgb'+str(tuple(color_rgb255_l))\n    color_list.append(color_rgb255)","411c9997":"starbucks_map = (\n    Map(init_opts=opts.InitOpts(theme='dark'))\n    .add(series_name='', \n         data_pair=data, \n         maptype=\"world\",\n         is_map_symbol_show=False,\n         label_opts=opts.LabelOpts(is_show=False),\n         tooltip_opts=opts.TooltipOpts(formatter='{b}\uff1a{c}'),\n    )\n    .set_global_opts(\n        title_opts=opts.TitleOpts(\n            title='Number of Starbucks Stores Globally',\n            subtitle='By February 2017',\n            pos_left='center',\n        ),\n        visualmap_opts=opts.VisualMapOpts(\n            max_=2000, \n            is_piecewise=True,\n            pieces=[\n                {\"min\": 10000, \"label\": '10000 above', \"color\": color_list[0]},\n                {\"min\": 2000, \"max\": 9999, \"label\": '2000-9999', \"color\": color_list[2]},\n                {\"min\": 1000, \"max\": 1999, \"label\": '1000-1999', \"color\": color_list[4]},\n                {\"min\": 500, \"max\": 999, \"label\": '500-999', \"color\": color_list[6]},\n                {\"min\": 200, \"max\": 499, \"label\": '200-499', \"color\": color_list[8]},\n                {\"min\": 100, \"max\": 199, \"label\": '100-199', \"color\": color_list[10]},\n                {\"min\": 10, \"max\": 49, \"label\": '1-49', \"color\": color_list[12]},\n                {\"min\": 1, \"max\": 9, \"label\": '1-9', \"color\": color_list[14]},\n            ],\n        ),\n    )\n)\nstarbucks_map.render_notebook()","7e771964":"data_city=starbucks.groupby(['Country','City'])['Brand'].count().reset_index(name='Counts')\ndata_city_100above=data_city[data_city['Counts']>100].sort_values(by=['Counts'])\nprint(sorted(data_city['Counts'].unique(),reverse=True))","0684ec31":"bar=(\n    Bar(init_opts=opts.InitOpts(theme='dark',height='600px'))\n    .add_xaxis(list(data_city_100above['City']))\n    .add_yaxis('', list(data_city_100above['Counts']),\n               label_opts=opts.LabelOpts(\n                   position='insideRight',\n                   font_style='italic',\n                   color='black',\n               ),\n              itemstyle_opts=opts.ItemStyleOpts(\n                  color=JsCode(\n                      \"\"\"new echarts.graphic.LinearGradient(1, 0, 0, 0, [\n                      {offset: 0,color: '#cc95c0'},\n                      {offset: 0.5,color: '#dbd4b4'},\n                      {offset: 1,color: '#7aa1d2'}\n                      ])\"\"\" \n                  )\n              ),\n    )\n    .reversal_axis()\n    .set_global_opts(\n        title_opts=opts.TitleOpts(\n            title=\"Cites With More Than 100 Starbucks Stores Globally\",\n            subtitle='By February 2017',\n            pos_left='center',\n        )\n    )\n)\nbar.render_notebook()","5f0f5ae1":"starbucks['Ownership Type'].unique()","27cb4534":"data_ownership=starbucks['Ownership Type'].value_counts()\ndata_ownership","1f216529":"data_ownership_l=[]\nfor index,value in data_ownership.items():\n    t=(index,value)\n    data_ownership_l.append(t)\ndata_ownership_l","7cab7a65":"pie=(\n    Pie(init_opts=opts.InitOpts(theme='dark'))\n    .add('',\n         data_pair=data_ownership_l,\n         radius=['25%','65%'],\n         center=['50%','58%'],\n         rosetype='radius',\n         label_opts=opts.LabelOpts(formatter='{b}: {d}%'),\n    )\n    .set_global_opts(\n        title_opts=opts.TitleOpts(\n            title=\"Ownership Types of Starbucks Stores Globally\",\n            subtitle='By February 2017',\n            pos_left='center',\n            pos_top='2%',\n        ),\n        legend_opts=opts.LegendOpts(is_show=False),\n    )\n)\npie.render_notebook()","cec888cd":"data_chn=starbucks[starbucks['Country']=='CN'].groupby(['City'])['Country'].count().sort_values(ascending=False).reset_index(name='counts')\ndata_chn.head()","b5ed60ae":"starbucks_geo = Geo(init_opts=opts.InitOpts(theme='dark'))\n\ndata_cn=[]\nfor _, row in starbucks.iterrows():\n    if row['Country']=='CN':\n        starbucks_geo.add_coordinate(row['City'], row['Longitude'], row['Latitude'])  \n        data_cn.append([row['City'], 1])\n\ngeo=(\n    starbucks_geo\n    .add_schema(maptype='china')\n    .add('', data_cn, \n         type_='heatmap',\n         blur_size=10,\n         point_size=10,\n         label_opts=opts.LabelOpts(is_show=False),\n    )\n    .set_global_opts(\n        title_opts=opts.TitleOpts(\n            title=\"Number of Starbucks Stores in China\",\n            subtitle=\"By February 2017\",\n            pos_left='center',\n            pos_top='2%',\n        ),\n        visualmap_opts=opts.VisualMapOpts(\n            is_show=False,\n            range_color=['blue', 'blue', 'green', 'yellow', 'red'],\n        ),\n    )\n)\n    \ngeo.render_notebook()","c3255d43":"# DATA ANALYSIS","bc285149":"## 2. BAR","4b610d46":"### 4.1 to get \u2019data_pair\u2018 parameter","d25eb13c":"## 1. MAP","9c453527":"### 3.1 to get \u2019data_pair\u2018 parameter","753197d3":"### 1.3 PLOT","eebd6903":"# DATA PREPROCESSING","6fb2d087":"### 3.2 PLOT","12de1a40":"### 2.1 to get \u2019data_pair\u2018 parameter","92216a6c":"## 3. PIE","834302d5":"### 2.2 PLOT","46f23bd8":"## 4. GEO","7331dc6c":"### 1.1 to get \u2019data_pair\u2018 parameter","6649eb40":"### 1.2 to know how to split the 'pieces'","9ddac49f":"### 4.2 PLOT"}}