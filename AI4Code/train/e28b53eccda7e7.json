{"cell_type":{"538562d4":"code","13d6e36a":"code","e01ef50b":"code","5191b5e2":"code","71286992":"code","a52fe8d5":"code","31eb12dd":"code","ebd97743":"code","55bb3f59":"code","90614c95":"code","31bcbc27":"code","ee9eacfe":"code","e8d1e741":"code","b27bfb91":"code","5d882462":"code","bf5fffac":"code","147ae479":"code","4d4a2657":"code","90f05eb4":"code","7b68e92e":"code","368cb048":"code","130e2295":"code","6f1f87f7":"code","2e3a708b":"code","6576ca94":"code","74721a55":"code","71b33aed":"code","b8b35978":"code","fc376a3b":"code","dfe0007f":"code","7f67d0d0":"code","f559a759":"code","0fc9c27d":"code","362bce2d":"code","e381b569":"code","2c87c843":"code","b85ece70":"code","1fb0f89f":"code","16100515":"code","cc38edcb":"code","1b51d1ad":"code","a7775715":"code","f844d1e2":"code","3f885c63":"code","e4dc1326":"code","05d8a8fc":"code","c37d6c83":"code","01c79e4e":"code","fdc7827d":"code","5c2f5c37":"markdown","8564399c":"markdown","362842dc":"markdown","3a7f1487":"markdown","8bacbb8c":"markdown","bce35db6":"markdown","7979931c":"markdown","326fc894":"markdown","7d537033":"markdown","1f199b7d":"markdown","785e63ed":"markdown","dbd6cce3":"markdown","2f6004aa":"markdown","90ae6c92":"markdown","934b25f0":"markdown","f4583536":"markdown","42160ed3":"markdown","9c39e15c":"markdown","e3b01d51":"markdown","72bf0ab5":"markdown","b33f35a4":"markdown","7a73c68f":"markdown","8c5a0fce":"markdown","ed30ed30":"markdown","5bcc700d":"markdown","a3e065f6":"markdown","8aded527":"markdown","28c37ef6":"markdown","b75390ca":"markdown","67dd8c94":"markdown","47da3638":"markdown","1891e21b":"markdown","21c78c5a":"markdown","807c2210":"markdown","a93f52ba":"markdown","46783730":"markdown","fb2bb6c4":"markdown","ce6f3f77":"markdown","36363b4e":"markdown"},"source":{"538562d4":"import warnings\nwarnings.filterwarnings(\"ignore\")\n\nimport os\nfor dirname, _, filenames in os.walk('\/kaggle\/input'):\n    for filename in filenames:\n        print(os.path.join(dirname, filename))\n\nimport pandas as pd\nimport numpy as np\nimport seaborn as sns\nfrom matplotlib import pyplot as plt\nsns.set(palette=(\"Set1\"))","13d6e36a":"df = pd.read_csv(\"..\/input\/border-crossing-entry-data\/Border_Crossing_Entry_Data.csv\")\ndf","e01ef50b":"df.info()","5191b5e2":"df.isnull().sum()","71286992":"df.describe(include='all')","a52fe8d5":"df.duplicated().sum()","31eb12dd":"print('Unique values in Port Name: '+str(df['Port Name'].nunique() ))\nprint(\"Unique values in Port Code: \" +str(df['Port Code'].nunique()))","ebd97743":"port=df[['Port Name','Port Code']].drop_duplicates()\nport[port['Port Name'].duplicated(keep = False)]","55bb3f59":"df.loc[(df['Port Code']==103) | (df['Port Code']==3302)]\n","90614c95":"df.loc[(df['Port Name'] == 'Eastport') & (df['State'] == 'Maine'), 'Port Name'] = 'Eastport Maine'","31bcbc27":"\nDate = pd.to_datetime(df['Date'])\nDate","ee9eacfe":"df2 = pd.DataFrame(df)\ndf2","e8d1e741":"df2['Year'] =Date.dt.year\ndf2['Month'] =Date.dt.month\ndf2","b27bfb91":"def longitude(x):\n    b1= x.split('(')[1]\n    b2 = b1.split(')')\n    for i in b2:\n         return i.split()[0]\n\ndef latitude(x):\n    b1= x.split('(')[1]\n    b2 = b1.split(')')\n    for i in b2:\n         return i.split()[1]\n\ndf2['latitude'] = df2.Location.apply(latitude)\ndf2['longitude'] = df2.Location.apply(longitude)\n","5d882462":"df2","bf5fffac":"Border_count = df2.Border.value_counts()\nBorder_count","147ae479":"plt.figure(figsize=(7,6))\nplt.pie(x = Border_count.values,explode=[0.03,0.03], labels = Border_count.index, autopct='%0.2f%%',)\nplt.title('Composition of the Borders')\nplt.show()\n\n","4d4a2657":"df2.groupby(['Border','State']).count()","90f05eb4":"\ng1 = sns.catplot('State',col=\"Border\",data=df2, kind='count', height=8, aspect=1,col_wrap=3,)\ng1.set_ylabels(fontsize=15)\ng1.set_xlabels(fontsize=15)\ng1.set_xticklabels(rotation=80,fontsize=13)\nplt.show()","7b68e92e":"df2['Port Name'].value_counts()","368cb048":"from wordcloud import WordCloud, ImageColorGenerator\ntext = \" \".join(str(each) for each in df2['Port Name'])\nwordcloud = WordCloud(max_words=100, background_color=\"White\").generate(text)\nplt.figure(figsize=(15,10))\nplt.imshow(wordcloud, interpolation='bilinear')\nplt.axis(\"off\")\nplt.title('Most Ports used')\nplt.show()","130e2295":"Measure_count =df2.Measure.value_counts()","6f1f87f7":"plt.figure(figsize=(8,7))\nplt.pie(x = Measure_count.values,labels = Measure_count.index,autopct='%0.2f%%',pctdistance=0.8)\nplt.title('Composition of the Measure')\n\nplt.show()\n","2e3a708b":"Measure_group = df2.groupby(['Border','Measure']).count()\nMeasure_group","6576ca94":"g2 = sns.catplot('Measure',col=\"Border\",data=df2,kind='count', height=5.5, aspect=1,col_wrap=3)\ng2.set_ylabels(fontsize=15)\ng2.set_xlabels(fontsize=15)\ng2.set_xticklabels(rotation=80,fontsize=13)\nplt.show()","74721a55":"year_count=df2.Year.value_counts()\nyear_count","71b33aed":"plt.figure(figsize = (12,7))\nsns.lineplot(x= year_count.index,y=year_count.values)\nplt.title('Distribution of Year',fontsize=18,)\nplt.xlabel('Year',fontsize=18)\nplt.show()","b8b35978":"measure_year =df2.groupby(['Border','Year','Measure']).count().sort_values(by=['Border','Year','Measure']).reset_index()\nmeasure_year","fc376a3b":"plt.figure(figsize=(16,10))\nsns.lineplot(x='Year', y ='State',hue='Measure', data=measure_year[measure_year['Border']=='US-Mexico Border'],lw=2,\n             palette ='tab10')\nplt.title('Distribution of Year with respect to Measure, Border: Mexico',fontsize=18,)\nplt.ylabel('Number',fontsize=14)\nplt.xticks(fontsize=14)\nplt.xlabel('Year',fontsize=15)\nplt.yticks(fontsize=14)\nplt.show()\n\nplt.figure(figsize=(16,10))\nsns.lineplot(x='Year', y ='State',hue='Measure', data=measure_year[measure_year['Border']=='US-Canada Border'],lw=2)\nplt.title('Distribution of Year with respect to Measure, Border: Canada',fontsize=18,)\nplt.ylabel('Number',fontsize=15)\nplt.xticks(fontsize=14)\nplt.xlabel('Year',fontsize=15)\nplt.yticks(fontsize=14)\n\nplt.show()","dfe0007f":"year_border =df2.groupby(['Border','Year']).count().sort_values(by=['Border','Year',]).reset_index()\nyear_border","7f67d0d0":"df2[df2.Border=='US-Canada Border'].Year.value_counts()\n","f559a759":"plt.figure(figsize=(15,7))\n\nsns.lineplot(data =year_border[year_border.Border== 'US-Canada Border'], x='Year',y ='State', color= 'b',lw=2)\nplt.title('Yearly Change in the occurrence of US-Canada Border in the data', fontsize=18)\nplt.xticks(fontsize=14)\nplt.yticks(fontsize=14)\nplt.ylabel('Number',fontsize=15)\nplt.xlabel('Year', fontsize=16)\nplt.show()\n\n\nplt.figure(figsize=(15,7))\n\nsns.lineplot(data =year_border[year_border.Border== 'US-Mexico Border'], x='Year',y ='State', lw=2)\nplt.title('Yearly Change in the occurrence of US-Mexico Border in the data', fontsize=18)\nplt.xticks(fontsize=14)\nplt.yticks(fontsize=14)\nplt.ylabel('Number', fontsize=15)\nplt.xlabel('Year', fontsize=16)\n\nplt.show()\n\n","0fc9c27d":"month_border =df2.groupby(['Border','Month']).count().sort_values(by=['Border','Month']).reset_index()\nmonth_border","362bce2d":"plt.figure(figsize=(15,7))\n\nsns.lineplot(data =month_border[month_border.Border== 'US-Canada Border'], x='Month',y ='State', color= 'b',lw=2)\nplt.ylabel('Number of people')\nplt.title('Monthly Change in the occurrence of US-Canada Border in the data', fontsize=18)\nplt.xticks(fontsize=14)\nplt.yticks(fontsize=14)\nplt.ylabel('Number',fontsize=15)\nplt.xlabel('Month', fontsize=16)\n\n\nplt.show()\nplt.figure(figsize=(15,7))\n\nsns.lineplot(data =month_border[month_border.Border== 'US-Mexico Border'], x='Month',y ='State', color='red',lw=2)\nplt.ylabel('Number of people')\nplt.title('Monthly Change in the occurrence of US-Mexico Border in the data', fontsize=18)\nplt.xticks(fontsize=14)\nplt.yticks(fontsize=14)\nplt.ylabel('Number',fontsize=15)\nplt.xlabel('Month', fontsize=16)\n\nplt.show()","e381b569":"month_year =df2.groupby(['Border','Year','Month']).count().sort_values(by=['Border','Year','Month']).reset_index()\nmonth_year","2c87c843":"# plt.subplots_adjust(top=0.5,)\n\ng4 = sns.FacetGrid(month_year, col='Year',hue='Border', col_wrap=2, height=6)\n# g4.fig.suptitle('kkk',)\ng4 = (g4.map(plt.plot,'Month', 'State').add_legend())\ng4.set_ylabels('Number')\n# plt.subplots_adjust(top=0.5)\n# g.set_title(('Monthly gross by Year'))\ng4.set_xticklabels(rotation=80)\nplt.show()","b85ece70":"plt.figure(figsize=(7,8))\nsns.violinplot(data = df2['Value'])\nplt.title('Value distribution')","1fb0f89f":"value_sum =df2.groupby(['Border']).sum().sort_values(by=['Port Code']).reset_index()\nvalue_sum","16100515":"plt.figure(figsize=(9,8))\nax = plt.subplot()\nsns.barplot(data= value_sum, x= 'Border', y='Value',  )\nplt.title('Number of people that used the borders since 1996',fontsize=18)\nplt.ylabel('Value in Billion',fontsize=14)\nplt.xlabel('Border',fontsize=14)\n\nax.set_yticks([1000000000,2000000000,3000000000,4000000000,5000000000,6000000000,7000000000])\nax.set_yticklabels(['1b','2b','3b','4b','5b','6b','7b',])\nplt.xticks(fontsize=14)\nplt.yticks(fontsize=14)\nplt.show()","cc38edcb":"valueY_sum =df2.groupby(['Border','Year']).mean().sort_values(by=['Border','Year'],ascending=False).reset_index()\nvalueY_sum ","1b51d1ad":"plt.figure(figsize=(15,7))\nax = plt.subplot()\nsns.lineplot(x='Year',y='Value',hue=\"Border\",data=valueY_sum)\n\nplt.title('Total Number of people that used the borders through out the years',fontsize=18)\nplt.ylabel('Value in Million',fontsize=14)\nax.set_yticks([50000000,100000000,150000000,200000000,250000000,300000000,350000000,400000000])\nax.set_yticklabels(['50m','100m','150m','200m','250m','300m','350m','400m'])\nplt.xticks(fontsize=14)\nplt.yticks(fontsize=14)\nplt.show()","a7775715":"plt.figure(figsize=(15,7))\nax = plt.subplot()\nsns.lineplot(x='Year',y='Value',hue=\"Border\",data=df2,)\n\nplt.title('Average number of people that used the borders through out the years',fontsize=18)\nplt.ylabel('Value in thousand ',fontsize=14)\nax.set_yticks([10000,20000,40000,60000,80000,100000,120000,140000])\nax.set_yticklabels(['10k','20k','40k','60k','80k','100k','120k','140k'])\nplt.xticks(fontsize=14)\nplt.yticks(fontsize=14)\nplt.show()","f844d1e2":"plt.figure(figsize=(15,7))\n\nsns.lineplot(data =df2[df2.Border== 'US-Canada Border'], x='Month',y ='Value', color= 'b',lw=2)\nplt.ylabel('Number of people')\nplt.title('Average monthly use, Border: Canada', fontsize=18)\nplt.xticks(fontsize=14)\nplt.yticks(fontsize=14)\nplt.ylabel('Number',fontsize=15)\nplt.xlabel('Month', fontsize=16)\n\n\nplt.show()\nplt.figure(figsize=(15,7))\n\nsns.lineplot(data =df2[df2.Border== 'US-Mexico Border'], x='Month',y ='Value', color='red',lw=2)\nplt.ylabel('Number of people')\nplt.title('Average monthly use, Border: Mexico', fontsize=18)\nplt.xticks(fontsize=14)\nplt.yticks(fontsize=14)\nplt.ylabel('Number',fontsize=15)\nplt.xlabel('Month', fontsize=16)\n\nplt.show()","3f885c63":"f =plt.figure(figsize=(16,10))\n\nax = plt.subplot()\nplt.scatter(x='Measure',y='Value', data=((df2[df2['Border']=='US-Canada Border']).sort_values(by='Measure')),color = 'b')\nplt.title('Number of people that used each Measure, Border: Canada',fontsize=18,)\nplt.ylabel('Value',fontsize=14)\nax.set_yticks([100000,500000,1000000,1500000,2000000,2500000,3000000])\nax.set_yticklabels(['100k','500k','1m','1.5m','2m','2.5m','3m'])\nplt.xticks(rotation=75,fontsize=14)\nplt.yticks(fontsize=14)\nplt.xlabel('Measure',fontsize=16)\n\n\nplt.show()\n\nplt.figure(figsize=(16,10))\nax = plt.subplot()\nplt.scatter(x='Measure', y ='Value', data=(df2[df2['Border']=='US-Mexico Border'].sort_values(by='Measure')))\nplt.title('Number of people that used each Measure, Border: Mexico',fontsize=18,color='black')\nax.set_yticks([100000,500000,1000000,1500000,2000000,2500000,3000000,3500000,4000000,4500000])\nax.set_yticklabels(['100k','500k','1m','1.5m','2m','2.5m','3m','3.5m','4m','4.5m'])\nplt.xticks(rotation=80,fontsize=14)\nplt.yticks(fontsize=14)\nplt.xlabel('Measure',fontsize=15)\n\nplt.ylabel('Value',fontsize=14)\n\nplt.show()","e4dc1326":"valuem_sum =df2.groupby(['Border','Measure']).sum().sort_values(by=['Border','Measure']).reset_index()\nvaluem_sum","05d8a8fc":"g6 = sns.FacetGrid(valuem_sum, col='Measure', col_wrap=2, size=6)\ng6 = (g6.map(plt.bar,'Border', 'Value').add_legend())\ng6.set_ylabels('Number of people in Hundred Millon')\ng6.set_xticklabels(rotation=80)\nplt.show()","c37d6c83":"plt.figure(figsize=(15,7))\nsns.barplot(data = df2, x= 'Measure',y= 'Value',hue ='Border')\nplt.title('Average Number of people that used each Measure',fontsize=18,color='black')\nplt.xticks(rotation =80)\nplt.xticks(fontsize=14)\nplt.yticks(fontsize=14)\nplt.ylabel('Value',fontsize=15)\nplt.xlabel('Measure', fontsize=16)\nplt.show()","01c79e4e":"plt.figure(figsize=(18, 6.5))\nsns.scatterplot(x=\"State\", y=\"Value\",hue=\"Border\", size=\"Border\",data=df2)\nplt.title('Number of people that used each State',fontsize=18,color='black')\nplt.xticks(rotation =80,fontsize=14)\nplt.yticks(fontsize=14)\nplt.ylabel('Value',fontsize=15)\nplt.xlabel('State', fontsize=16)\nplt.show()","fdc7827d":"plt.figure(figsize=(26, 10))\nsns.scatterplot(x=\"Port Name\", y=\"Value\",\n                hue=\"Border\", size=\"Border\",data=df2)\nplt.title('Number of people that used each Port',fontsize=18,color='black')\nplt.xticks(rotation =90)\nplt.xticks(fontsize=14)\nplt.yticks(fontsize=14)\nplt.ylabel('Value',fontsize=15)\nplt.xlabel('Port Name', fontsize=16)\nplt.show()","5c2f5c37":"Since they are not the same, I have to fix the problem","8564399c":"Visualizing with respect to the Border we have the chart below","362842dc":"Creating Longitude and Latitude from Location Column","3a7f1487":"Since the Port code column is an idientification value for Port Name I have to check if it has the same unique values as the Port Name column ","8bacbb8c":"Using Pandas Describe object for futher Analysis","bce35db6":"Checking for duplicated rows","7979931c":"I am going to use Seaborn  FacetGrid to visualise it Year by Year to see how each Year affect the graph","326fc894":"There is no missing value in the data ","7d537033":"In the graph above 2010 and 2005 have the highest occurrences  and 2019 and 2018 have the lowest occurrences  in the data ","1f199b7d":"# Introduction","785e63ed":"Which Measures have the hieght occurrences ?","dbd6cce3":"In the output of pandas describe object, it was show that port has 117 unique values, which is 117 ports. \n<p>Visualizing ports using word cloud and matplotlib we have the following below\n","2f6004aa":"From the graphs above, 2019 has no entries for April to December. Also it can be shown that the big downward slope is actually only in 2016. ","90ae6c92":"How has the occurrence of each border changed through out the years?  ","934b25f0":"# Exploration and Visualization","f4583536":"Which border has the most Occurrence? ","42160ed3":"Creating Year and Month Column from Date Column","9c39e15c":"From the table above, it can been seen that North Dakota has the highest occurrence in US-Canada Border while Texas has the highest occurrence in US-Mexico Border\n<p> Visualizing it, we have the bar chart below.","e3b01d51":"They are not the same!!\n<p> ","72bf0ab5":"From the graph above there is a big downwards slope towards the end of month in both Border","b33f35a4":"COLUMNS DESCRIPTION  <br\/>\n> Port Name: Name of the Port of Entry <br\/>\n> State: State <br\/>\n> Port Code: CBP port code <br\/>\n> Border: US-Canada Border [](http:\/\/)or US-Mexico Border <br\/>\n> Date: Year, Month <br\/>\n> Measure: Conveyances,Means <br\/>\n> Value: Count <br\/>\n> Location: Longitude and Latitude Location","7a73c68f":"What is the distribution of Value?","8c5a0fce":"From the chart we can see that US-Canada Border 76.77% has more occurrence than US-Mexico Border 23.23%","ed30ed30":"Converting Date column to pandas datetime","5bcc700d":"From the code above I can see that Eastport have to different port code and the two Eastport are located at different states\n<p>I now have to rename it to avoid further confusion \n","a3e065f6":"___","8aded527":"Visualizing Year with respect to measure","28c37ef6":"We can also see that the Value column has a very long tail to right.\n\n____","b75390ca":"Using the pandas group function. I have the table below:","67dd8c94":"From the image above the Ports which its name appear in big fonts have the highest occurrences","47da3638":"importing of relevant libraries ","1891e21b":"Rename Eastport located in Maine to 'Eastport Maine' to avoid confusion and bais","21c78c5a":"From the above chart it can be shown that Trucks has the highest occurrences but its difference of from other measures is not much.","807c2210":"Which states have the highest Occurrence in each border ?\n","a93f52ba":"which Ports have the highest occurrence?","46783730":"Which Year hass the most occurrences?","fb2bb6c4":"From the graph above, it is shown that occurrences US-Canada Border is on 2010 while in US-Mexico Border is on 2015. \n<p> They both have it lowest occurrences in 2018-2019\n","ce6f3f77":"How has the data changed through out the Months?  ","36363b4e":"<p>The dataset contains the U.S. border crossing, which contains information of the inbound crossings at the U.S.-Canada ana U.S.- Mexico borders."}}