{"cell_type":{"2c800f7b":"code","d39ccb2a":"code","d88115d1":"code","4d5c31d8":"code","4b026d16":"code","b61cf9b5":"code","f7ac2515":"code","95d3e677":"code","a0101cfe":"code","16437054":"code","944fd01e":"code","aebd5d9b":"code","ac457117":"code","aa9e3f62":"code","67693ccd":"code","6c181049":"code","3d65e668":"code","2d2a4ee2":"code","d552ccf2":"code","d3e489f4":"code","33eb6ec5":"code","4375dc2f":"code","57b46f7d":"code","3559e02a":"code","04c3552f":"code","601cbaa0":"code","b26c7824":"code","2a00da88":"code","b80cccdf":"code","127ef287":"code","fbbfdabb":"code","d88e33a5":"code","6ebd5541":"code","0a03706d":"code","52b721c7":"code","08071532":"code","de75a553":"code","6e1736c6":"code","396f6e7e":"code","e930e671":"code","6aa64d4b":"code","84e55ef7":"code","54acb49d":"code","d44eda12":"code","1535c0f0":"code","b24abe02":"code","d8a43167":"code","c9144023":"code","4aaad9cc":"code","b8514230":"markdown","8bc45642":"markdown","a999cc66":"markdown","75294085":"markdown","9e2f539b":"markdown","69cbe342":"markdown"},"source":{"2c800f7b":"!conda install -c conda-forge tabula-py --yes","d39ccb2a":"import numpy as np\nimport pandas as pd\nimport os\nimport matplotlib.pyplot as plt","d88115d1":"import tabula\ndfs = tabula.read_pdf('https:\/\/www.mhlw.go.jp\/content\/10601000\/000809324.pdf', lattice=True, pages ='all')\nfor df in dfs:\n    display(df)","4d5c31d8":"len(dfs)","4b026d16":"dfs[3]","b61cf9b5":"df0=dfs[3]\ndf0","f7ac2515":"dfs[58]","95d3e677":"col0=df0.columns.to_list()\nprint(col0)","a0101cfe":"for df in dfs[4:59]:\n    df0=pd.concat([df0,df])","16437054":"df1=df0.fillna('N').reset_index(drop=True)\ndf1","944fd01e":"N=[]\nfor i in range(len(df1)):\n    if df1.iloc[i,0]=='N':\n        N+=[i]\nprint(N)\nprint(len(N))","aebd5d9b":"df2=df1.drop(index=N[0:153],axis=0)\ndf3=df2.reset_index(drop=True)\ndf3","ac457117":"data=df3[['\u5e74\u9f62\\r(\u63a5\u7a2e\\r\u6642)','\u6027\u5225','\u63a5\u7a2e\u65e5','\u767a\u751f\u65e5','\u63a5\u7a2e\u56de\u6570','\u6b7b\u56e0\u7b49\\r(\u5831\u544a\u8005\u306b\u3088\u308b\u898b\u89e3\u30fb\u8003\u5bdf\u7b49)']]\ndata","aa9e3f62":"data['sex']=data['\u6027\u5225'].map({'\u5973':0,'\u7537':1})\ndata['times']=data['\u63a5\u7a2e\u56de\u6570'].map({'1\u56de\u76ee':1,'2\u56de\u76ee':2})\ndata","67693ccd":"data['\u5e74\u9f62\\r(\u63a5\u7a2e\\r\u6642)'].unique()","6c181049":"age=[]\nfor item in data['\u5e74\u9f62\\r(\u63a5\u7a2e\\r\u6642)']:\n    item2=item.replace('\u6b73','').replace('\u4ee3','').replace('\u6b73\u4ee3','').replace('\\r','').replace('Y','N').replace('4966','N').replace('4927','N')\n    if item2 in ['\u9ad8\u9f62\u8005','\u4e0d\u660e','\u03b3','N']:\n        age+=['N']\n    elif item2=='\u203b78\u6ce8:4\u670830\u65e5\u306e\u5408\u540c\u90e8\u4f1a\u8cc7\u6599\u3067\u306f\u3001\u300c78\u300d\u3092\u300c88\u300d\u3068\u8aa4\u8a18\u8f09\u3002':\n        age+=[78]\n    elif item2=='90(~5\/26\u306e\u60c5\u5831\u306b\u57fa\u3065\u304f)':\n        age+=[90]\n    elif item2=='71\u219272(~6\/23\u306e\u60c5\u5831\u306b\u57fa\u3065\u304d\u8a02\u6b63)':\n        age+=[72]    \n    elif item2=='81\u219282(~7\/21\u306e\u60c5\u5831\u306b\u57fa\u3065\u304f)':\n        age+=[82]           \n    elif item2=='86\u219287(~7\/7\u306e\u60c5\u5831\u306b\u57fa\u3065\u304f)':\n        age+=[87] \n    elif item2=='69\u219261(~6\/23\u306e\u60c5\u5831\u306b\u57fa\u3065\u304d\u8a02\u6b63)':\n        age+=[61]         \n    elif len(item2)<4:\n        age+=[int(item2)]\n    else:\n        age+=['N']\ndata['age']=age\ndata","3d65e668":"data['\u63a5\u7a2e\u65e5'].unique()","2d2a4ee2":"date0=[]\nfor item in data['\u63a5\u7a2e\u65e5']:\n    if item=='2021\/5\/14\\r\u6ce8:6\u670823\u65e5\u306e\u5408\\r\u540c\u90e8\u4f1a\u8cc7\u6599\u3067\u306f\u3001\\r\u300c14\u65e5\u300d\u3092\u300c16\u65e5\u300d\\r\u3068\u8aa4\u8a18\u8f09\u3002':\n        date0+=['2021\/5\/14']\n    elif item=='\u4e0d\u660e\\r\u21922021\u5e744\u670820\u65e5\\r(~7\/7\u306e\u60c5\u5831\u306b\\r\u57fa\u3065\u304f)':\n        date0+=['2021\/4\/20']\n    elif item=='\u4e0d\u660e\\r\u21922021\u5e745\u670821\u65e5\\r(~7\/21\u306e\u60c5\u5831\u306b\\r\u57fa\u3065\u304f)':\n        date0+=['2021\/5\/21'] \n    elif item=='\u4e0d\u660e':\n        date0+=['N']\n    elif item=='\u8cc7\u6599\u756a\u53f7':\n        date0+=['N']\n    elif item=='\u30ef\u30af\u30c1\u30f3\u3068\u6b7b\u4ea1\u3068\u306e\\r\u56e0\u679c\u95a2\u4fc2\u8a55\u4fa1\\r\u2605(\u8a55\u4fa1\u8a18\u53f7\\r)':\n        date0+=['N']\n    elif item=='2021\u5e745\u6708\u4e0b\u65ec':\n        date0+=['N']\n    elif item=='4075':\n        date0+=['N'] \n    elif item=='2021\/5\/':\n        date0+=['N'] \n    elif item=='1-2-2-1':\n        date0+=['N']\n    else:\n        item2=item.replace('\u5e74','\/').replace('\u6708','\/').replace('\u65e5','')\n        date0+=[item2]\n        \ndata['date vaccination']=date0\ndata['date vaccination'].unique()","d552ccf2":"data['\u767a\u751f\u65e5'].unique()","d3e489f4":"date1=[]\nfor item in data['\u767a\u751f\u65e5']:\n    if item=='2021\/5\/16\\r\u6ce8:5\u670826\u65e5\u306e\u5408\\r\u540c\u90e8\u4f1a\u8cc7\u6599\u3067\u306f\u3001\\r\u6b7b\u4ea1\u65e5\u306e\u300c16\u65e5\u300d\\r\u3092\u75c7\u72b6\u767a\u751f\u65e5\u306e\\r\u300c8\u65e5\u300d\u3068\u8aa4\u8a18\u8f09\u3002':\n        date1+=['2021\/5\/16']\n    elif item=='\u4e0d\u660e(\u63a5\u7a2e\u5f8c\u7d0410\\r\u65e5)\\r\u21922021\u5e746\u67081\u65e5\\r(~7\/21\u306e\u60c5\u5831\u306b\\r\u57fa\u3065\u304f)':\n        date1+=['2021\/6\/1']        \n    elif item=='2021\/5\/17\\r(~7\/7\u306e\u60c5\u5831\u306b\\r\u57fa\u3065\u304f)':\n        date1+=['2021\/5\/17']\n    elif item=='2021\u5e745\u670830\u65e5\\r\u6ce8:6\u670823\u65e5\u306e\u5408\\r\u540c\u90e8\u4f1a\u8cc7\u6599\u3067\u306f\u3001\\r\u300c30\u65e5\u300d\u3092\u300c28\u65e5\u300d\\r\u3068\u8aa4\u8a18\u8f09\u3002':\n        date1+=['2021\/5\/30']        \n    elif item=='2021\u5e745\u670827\u65e5\\r\u21922021\u5e745\u670828\u65e5\\r(~7\/21\u306e\u60c5\u5831\u306b\\r\u57fa\u3065\u304d\u8a02\u6b63)':\n        date1+=['2021\/5\/28'] \n    elif item=='2021\u5e746\u670814\u65e5\\r\u21922021\u5e746\u670815\u65e5\\r(~7\/7\u307e\u3067\u306e\u60c5\\r\u5831\u306b\u57fa\u3065\u304f)':\n        date1+=['2021\/6\/15']\n    elif item=='\u30b3\u30e1\u30f3\u30c8':\n        date1+=['N']\n    elif item=='\u75c7\u4f8bNo':\n        date1+=['N']\n    elif item=='5563':\n        date1+=['N']\n    elif item=='\u4e0d\u660e\\r\u2192\u4e0d\u660e(2021\u5e746\\r\u6708)\\r(~7\/7\u306e\u60c5\u5831\u306b\\r\u57fa\u3065\u304f)':\n        date1+=['N']        \n    elif item=='2021\/6\/19(\u63a8\u5b9a)\\r\u203b\u691c\u8996\u533b\u304b\u3089\u306e\\r\u5831\u544a\u306b\u57fa\u3065\u304f\u3002':\n        date1+=['N']\n    elif item=='\u4e0d\u660e(\u63a5\u7a2e\u7fcc\u65e5)':\n        date1+=['N']         \n    elif item=='\u4e0d\u660e(2021\u5e745\u6708\\r29\u65e5\u53c8\u306f30\u65e5)':\n        date1+=['N']   \n    elif item=='\u4e0d\u660e(\u63a5\u7a2e8\u65e5\u5f8c)':\n        date1+=['N']\n    elif item=='\u4e0d\u660e(2021\u5e746\u6708\\r22\u65e5\u4ee5\u524d)':\n        date1+=['N']   \n    elif item=='\u4e0d\u660e':\n        date1+=['N'] \n    else:\n        item2=item.replace('\u5e74','\/').replace('\u6708','\/').replace('\u65e5','')\n        date1+=[item2]    \n\ndata['date mortality']=date1\ndata['date mortality'].unique()","33eb6ec5":"Drop1=[]\nfor i,item in enumerate(data['date vaccination']):\n    if item =='N':\n        Drop1+=[i]\nprint(Drop1)","4375dc2f":"Drop2=[]\nfor i,item in enumerate(data['date mortality']):\n    if item =='N':\n        Drop2+=[i]\nprint(Drop2)","57b46f7d":"Drop3=sorted(set(Drop1+Drop2))\nprint(Drop3)","3559e02a":"data=data.drop(index=Drop3,axis=0)\ndata","04c3552f":"data['date vaccination2']=pd.to_datetime(data['date vaccination'])\ndata['date vaccination2']","601cbaa0":"data['date mortality2']=pd.to_datetime(data['date mortality'])\ndata['date mortality2']","b26c7824":"data['days']=data['date mortality2']-data['date vaccination2']\ndata","2a00da88":"data2=data['days'].value_counts()\nprint(data2)","b80cccdf":"days_df0=data2\ndays_df0=pd.DataFrame(days_df0)\ndays_df0[1]=data2.index.days\ndays_df0.columns=['n','days after vaccination']\ndays_df1=days_df0[days_df0['days after vaccination']<=21][0<=days_df0['days after vaccination']]\ndays_df2=days_df1.sort_values(['days after vaccination'])\ndays_df3=days_df2.set_index('days after vaccination')","127ef287":"days_df3.plot.bar(y=['n'],alpha=0.8,figsize=(12,6))\nplt.title(\"Case fatality after vaccination of Pfizer's in Japan (-July11) \",size=24)\nplt.ylabel('days after vaccination')\nplt.ylabel('cases')","fbbfdabb":"words=[]\nfor item0 in list(data['\u6b7b\u56e0\u7b49\\r(\u5831\u544a\u8005\u306b\u3088\u308b\u898b\u89e3\u30fb\u8003\u5bdf\u7b49)'].unique()):\n    words+=[str(item0).replace('\\r','').replace('\u306e\u60c5\u5831\u306b\u57fa\u3065\u304f','').replace('\u307e\u3067','').replace('\u4e0d\u660e\u2192','')\n        .replace('\u4e07','').replace('\/','').replace('0','').replace('1','').replace('2','').replace('3','')\n        .replace('4','').replace('5','').replace('6','').replace('7','').replace('8','').replace('9','')\n        .replace('()','').replace('(~)','').replace('\u203b','').replace('(.)','').replace('(~\u6708\u65e5)','')\n        .replace('(\u5ea6)','')]\nwords2=pd.Series(words).unique()\nprint(sorted(list(words2)))","d88e33a5":"query=['\u5165\u6d74','\u8001\u8870','\u81ea\u6bba','\u547c\u5438','\u5fc3','\u8133','\u814e','\u51fa\u8840']\nquery_number=[]\nfor item in query:\n    t=0\n    for item2 in data['\u6b7b\u56e0\u7b49\\r(\u5831\u544a\u8005\u306b\u3088\u308b\u898b\u89e3\u30fb\u8003\u5bdf\u7b49)'].to_list():\n        if item in item2:\n            t+=1\n    query_number+=[t]\n    \ndf=pd.DataFrame(query)\ndf[1]=query_number\ndf.columns=['\u30ad\u30fc\u30ef\u30fc\u30c9','\u4f8b\u6570']\ndf1=df.sort_values('\u4f8b\u6570',ascending=False).reset_index(drop=True)\ndf1","6ebd5541":"del data\ndel data2","0a03706d":"dfs = tabula.read_pdf('https:\/\/www.mhlw.go.jp\/content\/10601000\/000809325.pdf', lattice=True, pages ='all')\nfor df in dfs:\n    display(df)","52b721c7":"len(dfs)","08071532":"dfs[3]","de75a553":"df0=dfs[3]\ndf0","6e1736c6":"df1=df0.fillna('N').reset_index(drop=True)\ndf1","396f6e7e":"df1","e930e671":"N=[]\nfor i in range(len(df1)):\n    if df1.iloc[i,0]=='N':\n        N+=[i]\nprint(N)\nprint(len(N))","6aa64d4b":"df2=df1.drop(index=N,axis=0)\ndf3=df2.reset_index(drop=True)\ndf3\n\ndata=df3[['\u5e74\u9f62\\r(\u63a5\u7a2e\\r\u6642)','\u6027\u5225','\u63a5\u7a2e\u65e5','\u767a\u751f\u65e5','\u63a5\u7a2e\u56de\u6570','\u6b7b\u56e0\u7b49\\r(\u5831\u544a\u8005\u306b\u3088\u308b\u898b\u89e3\u30fb\u8003\u5bdf\u7b49)']]\ndata","84e55ef7":"data['sex']=data['\u6027\u5225'].map({'\u5973':0,'\u7537':1})\ndata['times']=data['\u63a5\u7a2e\u56de\u6570'].map({'1\u56de\u76ee':1,'2\u56de\u76ee':2})\ndata","54acb49d":"age=[]\nfor item in data['\u5e74\u9f62\\r(\u63a5\u7a2e\\r\u6642)']:\n    item2=item.replace('\u6b73','')\n    if len(item2)<4:\n        age+=[int(item2)]\n    else:\n        age+=['N']\ndata['age']=age\ndata","d44eda12":"date0=[]\nfor item in data['\u63a5\u7a2e\u65e5']:\n    date0+=[item.replace('\u5e74','\/').replace('\u6708','\/').replace('\u65e5','')]\ndata['date vaccination']=date0","1535c0f0":"date1=[]\nfor item in data['\u767a\u751f\u65e5']:\n    date1+=[item.replace('\u5e74','\/').replace('\u6708','\/').replace('\u65e5','')]\ndata['date mortality']=date1\ndata","b24abe02":"data['date vaccination2']=pd.to_datetime(data['date vaccination'])\ndata['date mortality2']=pd.to_datetime(data['date mortality'])\ndata['days']=data['date mortality2']-data['date vaccination2']\ndata","d8a43167":"data2m=data['days'].value_counts()\nprint(data2m)","c9144023":"days_df0=data2m\ndays_df0=pd.DataFrame(days_df0)\ndays_df0[1]=data2m.index.days\ndays_df0.columns=['n','days after vaccination']\ndays_df1=days_df0[days_df0['days after vaccination']<=21][0<=days_df0['days after vaccination']]\ndays_df2=days_df1.sort_values(['days after vaccination'])\ndays_df3=days_df2.set_index('days after vaccination')","4aaad9cc":"days_df3.plot.bar(y=['n'], alpha=0.8, figsize=(12,6))\nplt.title(\"Case fatality after vaccination of Moderna's in Japan (-July11) \" , size=24)\nplt.ylabel('days after vaccination')\nplt.ylabel('cases')","b8514230":"## Number of fatal cases was extremely high 1 day after vaccination and relatively high until 7 days after vaccination, which might indicate that these fatalities are related to vaccination. \n* If not related to vaccination, number shoud be almost constant on days. \n* Even if the relation between vaccination and fatality cannot be judged in each case, it is apparent that there is a relation between them as a whole.\n* This tendency is similar to the result on 'The Vaccine Adverse Event Reporting System (VAERS)'.\n* Check also: https:\/\/www.kaggle.com\/stpeteishii\/covid19-vaccination-risk\/data","8bc45642":"# **\u7b2c 64 \u56de\u539a\u751f\u79d1\u5b66\u5be9\u8b70\u4f1a\u4e88\u9632\u63a5\u7a2e\u30fb\u30ef\u30af\u30c1\u30f3\u5206\u79d1\u4f1a\u526f\u53cd\u5fdc\u691c\u8a0e\u90e8\u4f1a**\n### **\u4ee4\u548c\uff13\u5e74\u5ea6 \u7b2c13\u56de\u85ac\u4e8b\u30fb\u98df\u54c1\u885b\u751f\u5be9\u8b70\u4f1a\u85ac\u4e8b\u5206\u79d1\u4f1a\u533b\u85ac\u54c1\u7b49\u5b89\u5168\u5bfe\u7b56\u90e8\u4f1a\u5b89\u5168\u5bfe\u7b56\u8abf\u67fb\u4f1a** \n#### 2021(\u4ee4\u548c\uff13)\u5e74\uff17\u6708 21 \u65e5","a999cc66":"## Data Source\n* https:\/\/www.mhlw.go.jp\/stf\/shingi2\/0000208910_00026.html\n* https:\/\/www.mhlw.go.jp\/content\/10601000\/000809324.pdf  (\u30d5\u30a1\u30a4\u30b6\u30fc)\n* https:\/\/www.mhlw.go.jp\/content\/10601000\/000809325.pdf  (\u30e2\u30c7\u30eb\u30ca)","75294085":"#### \u8cc7\u65991-3-2\n## **\u30e2\u30c7\u30eb\u30ca\u7b4b\u6ce8(\u6b66\u7530\u85ac\u54c1\u5de5\u696d\u682a\u5f0f\u4f1a\u793e)\u63a5\u7a2e\u5f8c\u306b\u6b7b\u4ea1\u3068\u3057\u3066\u5831\u544a\u3055\u308c\u305f\u4e8b\u4f8b**\n#### \u4ee4\u548c3\u5e745\u670822\u65e5\u304b\u3089\u4ee4\u548c3\u5e747\u670816\u65e5\u307e\u3067\u306e\u5831\u544a\u5206\u2000","9e2f539b":"### **\u6b7b\u56e0\u7b49(\u5831\u544a\u8005\u306b\u3088\u308b\u898b\u89e3\u30fb\u8003\u5bdf\u7b49)**","69cbe342":"#### \u8cc7\u65991-3-1\n## **\u30b3\u30df\u30ca\u30c6\u30a3\u7b4b\u6ce8(\u30d5\u30a1\u30a4\u30b6\u30fc\u682a\u5f0f\u4f1a\u793e)\u63a5\u7a2e\u5f8c\u306b\u6b7b\u4ea1\u3068\u3057\u3066\u5831\u544a\u3055\u308c\u305f\u4e8b\u4f8b**\n#### \u4ee4\u548c3\u5e742\u670817\u65e5\u304b\u3089\u4ee4\u548c3\u5e747\u670816\u65e5\u307e\u3067\u306e\u5831\u544a\u5206"}}