{"cell_type":{"354f7911":"code","8b798393":"code","574d1de5":"code","638a2aa6":"code","ed1944ec":"code","e2ba60f2":"code","4866cc84":"code","d0562b79":"code","bc7ada3c":"code","d666efa3":"code","172b4605":"code","23ad8d53":"markdown","4992b866":"markdown","0e5d2511":"markdown","be54d9ed":"markdown","0cf8a657":"markdown","544d6c55":"markdown"},"source":{"354f7911":"import pandas as pd\nimport math\nimport folium \nfrom folium import Choropleth, Circle, Marker\nfrom folium.plugins import HeatMap, MarkerCluster","8b798393":"# Create a map\nm_1 = folium.Map(location=[33.6085,-7.6327], tiles='openstreetmap', zoom_start=12, size=3)\n\n# Display the map\nm_1","574d1de5":"# Load the data\ncrimes = pd.read_csv(\"..\/input\/geospatial-learn-course-data\/crimes-in-boston\/crimes-in-boston\/crime.csv\", encoding='latin-1')\n\n# Drop rows with missing locations\ncrimes.dropna(subset=['Lat', 'Long', 'DISTRICT'], inplace=True)\n\n# Focus on major crimes in 2018\ncrimes = crimes[crimes.OFFENSE_CODE_GROUP.isin([\n    'Larceny', 'Auto Theft', 'Robbery', 'Larceny From Motor Vehicle', 'Residential Burglary',\n    'Simple Assault', 'Harassment', 'Ballistics', 'Aggravated Assault', 'Other Burglary', \n    'Arson', 'Commercial Burglary', 'HOME INVASION', 'Homicide', 'Criminal Harassment', \n    'Manslaughter'])]\ncrimes = crimes[crimes.YEAR>=2018]\n\n# Print the first five rows of the table\ncrimes.head()","638a2aa6":"daytime_robberies = crimes[((crimes.OFFENSE_CODE_GROUP == 'Robbery') &  (crimes.HOUR.isin(range(9,18))))]","ed1944ec":"# Create a map\nm_2 = folium.Map(location=[42.32,-71.0589], tiles='cartodbpositron', zoom_start=13)\n\n# Add points to the map\nfor idx, row in daytime_robberies.iterrows():\n    Marker([row['Lat'], row['Long']]).add_to(m_2)\n\n# Display the map\nm_2","e2ba60f2":"\n# Create the map\nm_3 = folium.Map(location=[42.32,-71.0589], tiles='cartodbpositron', zoom_start=13)\n\n# Add points to the map\nmc = MarkerCluster()\nfor idx, row in daytime_robberies.iterrows():\n    if not math.isnan(row['Long']) and not math.isnan(row['Lat']):\n        mc.add_child(Marker([row['Lat'], row['Long']]))\nm_3.add_child(mc)\n\n# Display the map\nm_3","4866cc84":"# Create a base map\nm_4 = folium.Map(location=[42.32,-71.0589], tiles='cartodbpositron', zoom_start=13)\n\ndef color_producer(val):\n    if val <= 12:\n        return 'forestgreen'\n    else:\n        return 'darkred'\n\n# Add a bubble map to the base map\nfor i in range(0,len(daytime_robberies)):\n    Circle(\n        location=[daytime_robberies.iloc[i]['Lat'], daytime_robberies.iloc[i]['Long']],\n        radius=20,\n        color=color_producer(daytime_robberies.iloc[i]['HOUR'])).add_to(m_4)\n\n# Display the map\nm_4","d0562b79":"# Create a base map\nm_5 = folium.Map(location=[42.32,-71.0589], tiles='cartodbpositron', zoom_start=12)\n\n# Add a heatmap to the base map\nHeatMap(data=crimes[['Lat', 'Long']], radius=10).add_to(m_5)\n\n# Display the map\nm_5","bc7ada3c":"import geopandas as gpd\n# GeoDataFrame with geographical boundaries of Boston police districts\ndistricts_full = gpd.read_file('..\/input\/geospatial-learn-course-data\/Police_Districts\/Police_Districts\/Police_Districts.shp')\ndistricts = districts_full[[\"DISTRICT\", \"geometry\"]].set_index(\"DISTRICT\")\ndistricts.head()","d666efa3":"# Number of crimes in each police district\nplot_dict = crimes.DISTRICT.value_counts()\nplot_dict.head()","172b4605":"# Create a base map\nm_6 = folium.Map(location=[42.32,-71.0589], tiles='cartodbpositron', zoom_start=12)\n\n# Add a choropleth map to the base map\nChoropleth(geo_data=districts.__geo_interface__, \n           data=plot_dict, \n           key_on=\"feature.id\", \n           fill_color='YlGnBu', \n           legend_name='Major criminal incidents (Jan-Aug 2018)'\n          ).add_to(m_6)\n\n# Display the map\nm_6","23ad8d53":"## Introduction & Goals \n\nIn this notebook, we will explore the package folium giving us the oppurtinuty to have interactive maps. We will apply this tool in the crime boston data. \n","4992b866":"This notebook follows the course https:\/\/www.kaggle.com\/learn\/geospatial-analysis\n\nThe comments and notes are personal approaches","0e5d2511":"The fist step is to create a simple test map with folium, we create a map focusing on Casablanca Morocco ","be54d9ed":"## HeatMap","0cf8a657":"## Data part: Crime in Boston ","544d6c55":"We focus on the daytime robberies and show them in an folium maps while using marker "}}