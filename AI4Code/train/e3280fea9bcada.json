{"cell_type":{"69791a30":"code","659544d6":"code","aab0f216":"code","ea44ec26":"code","b4b313e8":"code","340b0f51":"code","45faa10c":"code","fc83418f":"code","10b4e435":"code","736f04b2":"code","3f696d82":"code","cf05a425":"code","5a622475":"code","9538b126":"code","bc768ee6":"code","5a60648e":"code","2b4c38c2":"code","72fbdb69":"code","20853a4f":"code","3008004f":"code","4ec11593":"code","418b2a79":"code","4860067c":"code","4e334b6d":"code","04070e17":"code","a6f85344":"code","929add51":"code","2fdc2868":"code","bf49c932":"code","f5ffd488":"code","b1a1cb20":"code","f2b4d28e":"code","41e4aa74":"code","6803bc08":"code","9758688f":"code","cdcfff80":"code","124b8a14":"code","76290956":"code","dcab55d0":"code","96293115":"code","67b6db17":"code","69fb300c":"code","3e1ae403":"code","925973e9":"code","8889a816":"code","37464f0e":"code","63ebea90":"code","684d2e03":"code","042bb8b1":"code","2440891b":"code","c7a544bf":"code","e4c6ac41":"code","8c0fadfd":"code","323d6d18":"code","8052567d":"code","b507120a":"code","a62c03ca":"code","d3eb1483":"code","6b7be4e0":"code","a08e8614":"code","65df8d36":"code","133a244a":"code","d1267b25":"code","1d8b97d9":"code","8b4e38c5":"code","b332cef6":"code","ce23d7e0":"code","94d290bc":"code","d0aa65aa":"code","83a2893d":"code","bfd57aea":"code","82a1cc5d":"code","5d901685":"code","e8fe7cbf":"code","ece61de1":"code","1411db0a":"markdown","f691a403":"markdown","b2eaa91c":"markdown","f25435b6":"markdown","a39ada43":"markdown","cfd0d6bb":"markdown","b3a7b1a4":"markdown","a5aaa0b9":"markdown","c47561e9":"markdown","d3d6cc19":"markdown","6b1e13c0":"markdown","c686b9ff":"markdown","a9231b61":"markdown","afbdca6b":"markdown","7fe05705":"markdown","c18130b6":"markdown","dba8de8b":"markdown","aae22d26":"markdown","a06f6be0":"markdown","e224f07c":"markdown","81526709":"markdown","2c97a37f":"markdown","82956c9f":"markdown","c7505084":"markdown","2595eda1":"markdown","42845156":"markdown","829fc908":"markdown","dba49792":"markdown","f0ae638d":"markdown","cbbc4780":"markdown","cdfff3ab":"markdown","718463fc":"markdown","c334a679":"markdown","a6f751ba":"markdown","9d11483a":"markdown","b0952ff9":"markdown","4e91e85f":"markdown","b8be8001":"markdown","d0548ebc":"markdown","83f4afbe":"markdown","f8db293c":"markdown","726ca3ac":"markdown","25f5b2e1":"markdown","3ddea548":"markdown","2ca7998b":"markdown","f7591701":"markdown","47e8bb0b":"markdown","38701326":"markdown","c2283ce4":"markdown","25b25426":"markdown","6fdc3b2b":"markdown","c3c33a5d":"markdown","8f28c173":"markdown","039e8df4":"markdown","f31ace6d":"markdown","14b21073":"markdown","06b9d0fb":"markdown","5cda1e25":"markdown","30b11de4":"markdown","6502f6dc":"markdown","d6aac33c":"markdown","12fe7e1b":"markdown","9c2bd115":"markdown","d654e25c":"markdown","c4503f25":"markdown","3f7ca9de":"markdown","fbcfd69d":"markdown","81b3df41":"markdown","67a66ddd":"markdown","6fa59159":"markdown","f91e7bb1":"markdown"},"source":{"69791a30":"from sklearn.preprocessing import LabelEncoder\nfrom scipy.stats import norm, skew \nfrom scipy.special import boxcox1p\nimport matplotlib.pylab as plt\nimport seaborn as sns\nimport pandas as pd\npd.set_option('display.max_columns', 100) \nimport numpy as np\nimport warnings\nwarnings.filterwarnings(\"ignore\")\nimport os","659544d6":"train = pd.read_csv(\"..\/input\/house-prices-advanced-regression-techniques\/train.csv\")\ntest = pd.read_csv(\"..\/input\/house-prices-advanced-regression-techniques\/test.csv\")\n\ntrain.shape,test.shape","aab0f216":"num_feat = [col for col in train.columns if train[col].dtype != 'object']\nprint(\"Number of numeric feature in data :\",len(num_feat))","ea44ec26":"def num_analysis(i=False, feat_name=False):\n    \n    if (i):\n        feat = num_feat[i]\n    \n    elif (feat_name):\n        feat = feat_name\n        \n    print(\"Feature: {}  & Correlation with target: {}\".format(feat,train[feat].corr(train['SalePrice'])))\n            \n    fig=plt.figure(figsize=(20,4))\n\n    ax=fig.add_subplot(1,3,1)\n    ax.hist(train[feat])\n    ax.set_title(\"train\", fontsize = 20)\n    ax.set_xlabel(feat,fontsize=20)\n    ax.tick_params(labelsize=13)\n    \n    ax=fig.add_subplot(1,3,2)\n    ax.scatter(train[feat],train['SalePrice'])\n    ax.set_title(feat+\" vs SalesPrice\", fontsize = 20)\n    ax.set_xlabel(feat,fontsize=20)\n    ax.set_ylabel(\"SalesPrice\",fontsize=20)\n    ax.tick_params(labelsize=13)\n    \n    ax=fig.add_subplot(1,3,3)\n    ax.hist(test[feat])\n    ax.set_title(\"test\", fontsize = 20)\n    ax.set_xlabel(feat,fontsize=20)\n    ax.tick_params(labelsize=13)\n    \n    plt.show()","b4b313e8":"k=1\nnum_analysis(i = k)","340b0f51":"train['MSSubClass'] = train['MSSubClass'].apply(str)\ntest['MSSubClass'] = test['MSSubClass'].apply(str)\n\nlbl = LabelEncoder() \nlbl.fit(list(train['MSSubClass'].values) + list(test['MSSubClass'].values)) \n\ntrain['MSSubClass'] = lbl.transform(list(train['MSSubClass'].values))\ntest['MSSubClass'] = lbl.transform(list(test['MSSubClass'].values))\n\nnum_analysis(feat_name='MSSubClass')","45faa10c":"k= k +1\nnum_analysis(i = k)","fc83418f":"dff = train.loc[(train['LotFrontage'] >= 300) & (train['SalePrice'] < 200000)]\ndff","10b4e435":"k = k+1\nnum_analysis(i = k)","736f04b2":"from IPython.display import Image\nImage(\"..\/input\/skew-img\/skew_kurt.png\")","3f696d82":"print(\"Skewness: %f\" % train['LotArea'].skew())\nprint(\"Kurtosis: %f\" % train['LotArea'].kurt())","cf05a425":"train[\"LotArea\"] = np.log1p(train[\"LotArea\"])\ntest[\"LotArea\"] = np.log1p(test[\"LotArea\"])\nnum_analysis(i = k)","5a622475":"k = k + 1\nnum_analysis(i =k)","9538b126":"k = k+ 1\nnum_analysis(i=k)","bc768ee6":"train.loc[(train['OverallCond'] == 6) & (train['SalePrice'] > 600000)]","5a60648e":"train['cond*qual'] = (train['OverallCond'] * train['OverallQual']) \/ 100.0\ntest['cond*qual'] = (test['OverallCond'] * test['OverallQual']) \/ 100.0\n\nnum_analysis(feat_name='cond*qual')","2b4c38c2":"k = k+ 1\nnum_analysis(i=k)","72fbdb69":"train['home_age_when_sold'] = train['YrSold'] - train['YearBuilt']\ntest['home_age_when_sold'] = test['YrSold'] - test['YearBuilt']","20853a4f":"num_analysis(feat_name='home_age_when_sold')","3008004f":"k = k +1 \nnum_analysis(i=k)","4ec11593":"train['after_remodel_home_age_when_sold'] = train['YrSold'] - train['YearRemodAdd']\ntest['after_remodel_home_age_when_sold'] = test['YrSold'] - test['YearRemodAdd']","418b2a79":"num_analysis(feat_name='after_remodel_home_age_when_sold')","4860067c":"k = k + 1\nnum_analysis(i=k)","4e334b6d":"print(\"Skewness: %f\" % train['MasVnrArea'].skew())\nprint(\"Kurtosis: %f\" % train['MasVnrArea'].kurt())","04070e17":"train[\"MasVnrArea\"] = np.log1p(train[\"MasVnrArea\"])\ntest[\"MasVnrArea\"] = np.log1p(test[\"MasVnrArea\"])\nnum_analysis(i = k)","a6f85344":"k = k +1\nnum_analysis(i=k)","929add51":"train.loc[(train['BsmtFinSF1'] > 4500) & (train['SalePrice'] < 200000)]","2fdc2868":"k = k +1\nnum_analysis(i=k)","bf49c932":"print(\"Number of home which has BsmtFinSF2 in train : {}%\" .format(((train['BsmtFinSF2']!=0).sum() \/ train.shape[0])*100))\nprint(\"Number of home which has BsmtFinSF2 in test  : {}%\" .format(((test['BsmtFinSF2']!=0).sum() \/ test.shape[0])*100))","f5ffd488":"train['BsmtFinSF1+BsmtFinSF2'] = train['BsmtFinSF1'] + train['BsmtFinSF2']\ntest['BsmtFinSF1+BsmtFinSF2'] = test['BsmtFinSF1'] + test['BsmtFinSF2']\n\nnum_analysis(feat_name='BsmtFinSF1+BsmtFinSF2')","b1a1cb20":"k = k +1\nnum_analysis(i=k)","f2b4d28e":"k = k +1\nnum_analysis(i=k)","41e4aa74":"train.loc[(train['TotalBsmtSF']>=6000 ) &(train['SalePrice'] < 200000)]","6803bc08":"k = k +1\nnum_analysis(i=k)","9758688f":"train.loc[(train['1stFlrSF'] >= 4000) & (train['SalePrice'] < 200000)]","cdcfff80":"k = k +1\nnum_analysis(i=k)","124b8a14":"train['TotalSF'] = train['TotalBsmtSF'] + train['1stFlrSF'] + train['2ndFlrSF']\ntest['TotalSF'] = test['TotalBsmtSF'] + test['1stFlrSF'] + test['2ndFlrSF']\n\nnum_analysis(feat_name='TotalSF')","76290956":"k = k +1\nnum_analysis(i=k)","dcab55d0":"k = k +1\nnum_analysis(i=k)","96293115":"train.loc[(train['GrLivArea'] >= 5000) & (train['SalePrice'] < 200000)]","67b6db17":"k = k +1\nnum_analysis(i=k)","69fb300c":"k = k +1\nnum_analysis(i=k)","3e1ae403":"k = k +1\nnum_analysis(i=k)","925973e9":"k = k +1\nnum_analysis(i=k)","8889a816":"train['Total_Bathrooms'] = (train['FullBath'] + (0.5 * train['HalfBath']) + train['BsmtFullBath'] + (0.5 * train['BsmtHalfBath']))\ntest['Total_Bathrooms'] = (test['FullBath'] + (0.5 * test['HalfBath']) + test['BsmtFullBath'] + (0.5 * test['BsmtHalfBath']))\n\nnum_analysis(feat_name='Total_Bathrooms')","37464f0e":"k = k +1\nnum_analysis(i=k)","63ebea90":"k = k +1\nnum_analysis(i=k)","684d2e03":"train.loc[(train['KitchenAbvGr'] == 3) & (train['SalePrice'] < 150000)]","042bb8b1":"k = k +1\nnum_analysis(i=k)","2440891b":"train.loc[(train['TotRmsAbvGrd'] == 14) & (train['SalePrice'] <= 200000)]","c7a544bf":"k = k +1\nnum_analysis(i=k)","e4c6ac41":"train.loc[(train['Fireplaces'] == 3)]","8c0fadfd":"print(\"Missing value count in Fireplaces  :\",train['Fireplaces'].isna().sum())\nprint(\"Missing value count in FireplaceQu :\",train['FireplaceQu'].isna().sum())","323d6d18":"train[\"FireplaceQu\"] = train[\"FireplaceQu\"].fillna(\"NA\")\ntest[\"FireplaceQu\"] = test[\"FireplaceQu\"].fillna(\"NA\")","8052567d":"def FireplaceQu_encode(x):\n    if x=='Ex':\n        return 5\n    elif x=='Gd':\n        return 4\n    elif x == 'TA':\n        return 3\n    elif x=='Fa':\n        return 2\n    elif x=='Po':\n        return 1\n    elif x=='NA':\n        return 0","b507120a":"train['FireplaceQu'] = train['FireplaceQu'].apply(lambda x: FireplaceQu_encode(x))\ntest['FireplaceQu'] = test['FireplaceQu'].apply(lambda x: FireplaceQu_encode(x))","a62c03ca":"num_analysis(feat_name='FireplaceQu')","d3eb1483":"train['FirePlace*FireplaceQu'] = train['Fireplaces']*train['FireplaceQu']\ntest['FirePlace*FireplaceQu'] = test['Fireplaces']*test['FireplaceQu']","6b7be4e0":"num_analysis(feat_name='FirePlace*FireplaceQu')","a08e8614":"k = k +1\nnum_analysis(i=k)","65df8d36":"test.loc[(test['GarageYrBlt'] >= 2100)]","133a244a":"k = k +1\nnum_analysis(i=k)","d1267b25":"k = k +1\nnum_analysis(i=k)","1d8b97d9":"k = k +1\nnum_analysis(i=k)","8b4e38c5":"k = k +1\nnum_analysis(i=k)","b332cef6":"k = k +1\nnum_analysis(i=k)","ce23d7e0":"k = k +1\nnum_analysis(i=k)","94d290bc":"k = k +1\nnum_analysis(i=k)","d0aa65aa":"train['total_porch_area'] = train['OpenPorchSF'] + train['EnclosedPorch'] + train['3SsnPorch'] + train['ScreenPorch']\ntest['total_porch_area'] = test['OpenPorchSF'] + test['EnclosedPorch'] + test['3SsnPorch'] + test['ScreenPorch']\n\nnum_analysis(feat_name='total_porch_area')","83a2893d":"k = k +1\nnum_analysis(i=k)","bfd57aea":"print(\"Number of house which has Pool in train :\",(train['PoolArea'] != 0).sum())\nprint(\"Number of house which has Pool in test  :\",(test['PoolArea'] != 0).sum())","82a1cc5d":"k = k +1\nnum_analysis(i=k)","5d901685":"test.loc[test['MiscVal'] >= 15000]","e8fe7cbf":"k = k +1\nnum_analysis(i=k)","ece61de1":"k = k +1\nnum_analysis(i=k)","1411db0a":"    the above home in test data have MiscVal cost $17000 and NaN at MiscFeature.\n\n    In MiscFeature, NaN means No Miscellaneous feature\n\n    How is it possible?\n","f691a403":"    This home is also too old when it sold (93 year old home)","b2eaa91c":"    Let's get the list of numeric features.","f25435b6":"# One more Outlier Detected","a39ada43":"GrLivArea: Above grade (ground) living area square feet\n\nFrom above plot, there may be a Outlier exists with GrLivArea > 5000 and salesPrice is too low. \n\nLet's find it.","cfd0d6bb":"    One Outlier may be detected with TotalBsmtSF>6000 and SalesPrice is low. Let's see details of that home","b3a7b1a4":"    Again the same house (index = 1298)\n    We already discover this home above.","a5aaa0b9":"    Let's see the feature FireplaceQu(It's categorical) feature","c47561e9":"    OverallQual feature looks good as it has higher correaltion with taregt SalesPrice.","d3d6cc19":"Let's see the details of these two outlier","6b1e13c0":"# Skewness & Kurtosis","c686b9ff":"    Again the same home (index = 1298).\n    \n    we have already discover this home above.","a9231b61":"    GarageCars: Size of garage in car capacity\n    It's also helpful feature","afbdca6b":"    One more time index=1298 home detected as outlier","7fe05705":"    MoSold feature doesn't have any correaltion realation with Salesprice.\n\n    You can remove this feature. not helpful for prediction","c18130b6":"Next Feature:","dba8de8b":"    Let's make new feature of OverallCond & OverallQual","aae22d26":"    We have already made feature home age while sold using YrSold, so you should remove YrSold feature","a06f6be0":"    this created new TotalSF feature is highly correalted with Salesprice. Great!","e224f07c":"    To make it more senseful, we should encode this catecorical feature in descending order\n\n    like, Ex:5 | Gd:4 | TA:3 | Fa:2 | Po:1 | NA:0","81526709":"By Observing the house feature, can conclude that the house's Salesprice is low with respect to all of its features.","2c97a37f":"    Now, It's look much better and also correaltion with SalesPrice(target) is also increased from  0.2638 to 0.3835.","82956c9f":"    This feature has uniform distribution. It's good\n\n    In train data, one house exist with 14 total bedrooms. Let's see all details of this home.","c7505084":"FireplaceQu: Fireplace quality\n\n       Ex\tExcellent - Exceptional Masonry Fireplace\n       Gd\tGood - Masonry Fireplace in main level\n       TA\tAverage - Prefabricated Fireplace in main living area or Masonry Fireplace in basement\n       Fa\tFair - Prefabricated Fireplace in basement\n       Po\tPoor - Ben Franklin Stove\n       NA\tNo Fireplace","2595eda1":"# one more outlier Detected","42845156":"    2ndFlrSF feature is linearly correlation with target SalesPrice.\n    \n    Using 1stFlrSF, 2ndFlrSF and TotalBsmtSF features, we would generate new feature total_SF\n    \n    TotalBsmtSF: Total square feet of basement area\n    1stFlrSF: First Floor square feet\n    2ndFlrSF: Second floor square feet","829fc908":"Next Feature:","dba49792":"    This feature LowQualFinSF alone may not be useful, as many of house doesn't have value for this feature. But, we could use this feature with another feature and create new feature.","f0ae638d":"    YearBuilt feature has somewhat linear relationship with SalesPrice.\n\n    If you remember, the data also contains one feature YrSold (year sold). \n    Using these two feature YearBuilt and YrSold, we can generate new feature home age. It means how the house was old when it Sold.","cbbc4780":"    GarageArea feature look uniform distribution and linearly correaltion with target SalesPrice.","cdfff3ab":"    We can also generate one new feature using YearRemodAdd feature.\n\n    YearRemodAdd: Remodel date (same as construction date if no remodeling or additions)\n\n    new_feature is Home age after renovation","718463fc":"Here, May be these two outlier exists with LotFrontage > 300 and SalesProce < 250000","c334a679":"    Let's create one combined feature \"total_porch_area\"","a6f751ba":"Let's move to next feature ","9d11483a":"If You found this kernel helpful to you, Please upvote it. And also If you found any wrong information in kernel, Please comment it.\n    \n    Thanks for reading!","b0952ff9":"    More to come...\n    \n    Stay tuned!","4e91e85f":"    OverallQual: Rates the overall material and finish of the house\n\n    OverallCond: Rates the overall condition of the house\n\n    OverallQual feature positivly correaltion with target variable SalesPrice. means higher OverallQual value of house sold at higher price. \n \n    But, OverallCond hasn't any relationship with target variable(SalesPrice). \n\n    Above scatter plot depicts that, some house with OverallCond value 5 has sold at higher price. Hence, this feature alone isn't helpful.","b8be8001":"    This generated new feature is very useful. When I had trained the LightGBM model, this feature took the fist position in feature importance graph. trust me.. It works.\n\n    Also, you should remove the OverallCond & OverallQual feature.","d0548ebc":"    Something Interesting!!\n\n    There is a house in train data which have 3 kitchens and its Sold at very low price.\n\n    Let's find that house","83f4afbe":"    SalesPrice of these house are less as they are too old.","f8db293c":"    LotFrontage : 300 | LotArea:63887 | OverallQual:10 | BsmtQual:Ex | ExterQual:Ex | TotalBsmtSF:6110 | GrLivArea:5642 | KitchenQual:Ex | TotRmsAbvGrd:12 | GarageArea:1418 | PoolArea:480 | SaleType:New\n\n    YearBuilt:2008  | YrSold:2008  (It's new House)","726ca3ac":"In this kernel, I have deeply explained all numeric features with visualization. Many of the features play a significant role to predict SalesPrice of home. There are also some features exist in data, which may not alone work, but if we concat that feature with other feature. It performs outstanding. \n\nI highly suggest checking out [this lernel](https:\/\/www.kaggle.com\/bhavikapanara\/how-to-detect-an-outlier)\nto understand Outlier detection techniques.","25f5b2e1":"    BsmtFinSF1: Type 1 (basement) finished square feet\n\n    In train data,  one home has more are of basement and sold at low price.\n    Let's see details of the this feature","3ddea548":"# Feature Engineering","2ca7998b":"    Most of the home doesn't have pool.\n    \n    Let's check howmany house has pool in train & test","f7591701":"    Let's load Libraries","47e8bb0b":"# Data Analysis for one by one feature","38701326":"    Observing Graph plot, there are such home exists with 3 fireplaces and there SalesPrice not much.\n\n    Let's see these home","c2283ce4":"# Generate New Feature","25b25426":"    If you use this new feature, you must remove YearRemodAdd feature. Otherwise It create redundancy.","6fdc3b2b":"    we can generate one new feature using these all bathoom related features.\n    \n    BsmtFullBath: Basement full bathrooms\n\n    BsmtHalfBath: Basement half bathrooms\n\n    FullBath: Full bathrooms above grade\n\n    HalfBath: Half baths above grade","c3c33a5d":"    From histogram of test data, there is a home exist with more MiscVal value.\n\n    Let's check test data","8f28c173":"Let's move to next feature","039e8df4":"    If we use this new feature, we must remove BsmtFinSF1 & BsmtFinSF2 feature as we have already use it.","f31ace6d":"    There are lots of home with 0 value of BsmtFinSF2 feature.","14b21073":"Skewness is a measure of the symmetry in a distribution. \n\nA symmetrical dataset will have a skewness equal to 0.  So, a normal distribution will have a skewness of 0.   Skewness essentially measures the relative size of the two tails. \n\nIf the skewness is between -0.5 and 0.5, the data are fairly symmetrical\n\nIf the skewness is between -1 and \u2013 0.5 or between 0.5 and 1, the data are moderately skewed\n\nIf the skewness is less than -1 or greater than 1, the data are highly skewed\n\nKurtosis is a measure of the combined sizes of the two tails.  It measures the amount of probability in the tails.  \n\nThe value is often compared to the kurtosis of the normal distribution, which is equal to 3.  If the kurtosis is greater than 3, then the dataset has heavier tails than a normal distribution (more in the tails).  If the kurtosis is less than 3, then the dataset has lighter tails than a normal distribution (less in the tails).  ","06b9d0fb":"    1stFlrSF: First Floor square feet\n\n    Outlier exists. 1stFlrSF value > 4000 & salesPrice < 100000\n\n    Let's find it","5cda1e25":"    this home details says, Garage was built in year 2207... Not possible at all.","30b11de4":"    Let's find some helpful insights from this house.","6502f6dc":"Actually, MSSubClass feature is a categorical feature. To make this feature more senseful we would apply   a label encoding","d6aac33c":"    Something look surprise in histogram of test data.\n\n    There is a home which GarageYrBlt value > 2100\n\n    Let's see deatils of it","12fe7e1b":"    again same house detected (index=1298), which we have already discovered ambiguity above.","9c2bd115":"    BsmtFinSF2 feature is not looking useful.\n    \n    We could make new feature using BsmtFinSF1 & BsmtFinSF2\n    \n    BsmtFinSF1: Type 1 finished square feet\n    BsmtFinSF2: Type 2 finished square feet","d654e25c":"    Let's fill missing value in FireplaceQu with NA.","c4503f25":"    There are such 5 home exists.\n\n    means, number of Fireplace is alone not important, it's also depends on the quality of the Fireplace.\n\n    So, we can generate one new feature from these two feature Fireplaces & FireplaceQu, which make more sense.","3f7ca9de":"The distribution of LotArea feature is highly skewed.\n\nSo, we should apply logithmic function to  LotArea feature to make it less skeded. Let's do it.","fbcfd69d":"    You can discard this feature as 99% of home doesn't have pool","81b3df41":"    This feature hasn't uniform distribution. Let's check skewness of LotArea  feature","67a66ddd":"    Let's check missing values in these two feature.","6fa59159":"    This new generated Total_Bathrooms feature has good correlation with target Salesprice feature.","f91e7bb1":"    Now, you need to remove YrSold & YearBuilt features, as we have already create one feature using it.  "}}