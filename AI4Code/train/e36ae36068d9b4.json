{"cell_type":{"5c5b6319":"code","93a5ee48":"code","90a6564b":"code","923463d0":"code","a6342375":"code","de66d5ea":"code","9914a30c":"code","e3ff5e3b":"code","6a431bc3":"code","1eae06b0":"code","de2a17fd":"code","67174c40":"code","85c68c8a":"code","cedbaf2d":"code","428fcf01":"code","b55920dd":"code","2960ee4a":"code","03ef79cc":"code","16dc5c78":"code","7198c521":"code","c3456749":"code","cd6dbf04":"code","c41647fa":"code","6a9489c6":"code","02510f29":"code","05a3fbac":"code","60179288":"code","5369c4c8":"markdown","980cdb93":"markdown","a123b0fc":"markdown","4b3558ec":"markdown","3d88a00d":"markdown","57e21439":"markdown","ec62b2d2":"markdown","2044ec2e":"markdown"},"source":{"5c5b6319":"import numpy as np # linear algebra\nimport pandas as pd # data processing, CSV file I\/O (e.g. pd.read_csv)\nimport os\nfrom sklearn import linear_model\nimport matplotlib.pyplot as plt\n%matplotlib inline","93a5ee48":"nba = pd.read_csv('..\/input\/NBA Game Data 2016-2017.csv')","90a6564b":"weekday = nba.groupby(by=['Week Day', 'Home\/Away'])\nweekday_home_away = weekday['Tm'].mean()\nweekday_home_away","923463d0":"weekday_home_away = weekday_home_away.unstack()\nweekday_home_away","a6342375":"weekday_home_away[\"Home Team Margin\"] = weekday_home_away['Home']-weekday_home_away['Away']\nweekday_home_away","de66d5ea":"weekday_home_away.reset_index(inplace = True)\nweekday_home_away","9914a30c":"weekday_home_away[\"DayID\"] = [5,1,6,0,4,2,3]","e3ff5e3b":"weekday_home_away.sort_values(\"DayID\")","6a431bc3":"weekday_home_away.set_index(\"DayID\", inplace = True)\nweekday_home_away.sort_index(inplace = True)","1eae06b0":"weekday_home_away.plot(x='Week Day', y='Home Team Margin', kind=\"Bar\", color=\"Red\");","de2a17fd":"nba[\"Net Points\"] = nba[\"Tm\"] - nba[\"Opp\"]\nnba.head()","67174c40":"team_summary = nba.groupby(\"Team\")\nnet_points = team_summary[\"Net Points\"].sum()\nwins = team_summary[\"Result\"].value_counts().unstack()","85c68c8a":"wins_net_points = wins.join(net_points)\nwins_net_points","cedbaf2d":"wins_net_points[[\"W\", \"Net Points\"]].corr()[\"W\"][\"Net Points\"]","428fcf01":"lm = linear_model.LinearRegression()\nx = wins_net_points[\"Net Points\"].values.reshape(-1, 1)\ny = wins_net_points[\"W\"].values.reshape(-1, 1)\nmodel = lm.fit(x,y)","b55920dd":"lm.score(x,y)\n# R^2","2960ee4a":"intercept = lm.intercept_\ncoef = lm.coef_","03ef79cc":"team_week_day = nba.groupby([\"Team\",\"Home\/Away\",\"Week Day\"]).count()[\"G\"]","16dc5c78":"weekday_home_away.set_index('Week Day', inplace = True)","7198c521":"team_home_away = pd.DataFrame(team_week_day).join(pd.DataFrame(weekday_home_away['Home Team Margin']))","c3456749":"team_home_away.reset_index(inplace = True)","cd6dbf04":"team_home_away.loc[team_home_away[\"Home\/Away\"] == \"Away\",[\"Home Team Margin\"]] = team_home_away.loc[team_home_away[\"Home\/Away\"] == \"Away\", [\"Home Team Margin\"]] * -1","c41647fa":"team_home_away[\"Impact\"]=team_home_away['G']*team_home_away[\"Home Team Margin\"]","6a9489c6":"team_impact=team_home_away.groupby(\"Team\")","02510f29":"point_impact = team_impact[\"Impact\"].sum()","05a3fbac":"game_impact = point_impact * coef[0][0]","60179288":"game_impact.sort_values().plot(kind=\"Bar\", color=\"Blue\", figsize=(10,5));","5369c4c8":"The data frame below shows the average amount the home team outscores the away team by day of the week.","980cdb93":"Now we will find how many games each team played at home and away on each day of the week. Some teams may have an advantage from scheudling, e.g. one team gets a lot of home games on Saturday.","a123b0fc":"Here we see that there is a very strong linear correlation between net points and the number of wins an NBA team has. Linear regression is appropriate to predict wins from net points.","4b3558ec":"DayID is necessary to arrange the days of the week properly, rather than alphabetically","3d88a00d":"In the 2016-2017 NBA regular season, each team won or lost some amount of games due to a difference in home field advantage by day of the week, presented below. We can see that the Phoenix Suns lost an entire game due to poor scheduling, partially due to playing 9 games away on Saturday, and only 3 at home.","57e21439":"This is equal to the correlation squared. It is the percent of variation in wins we can explain with net points.","ec62b2d2":"The intercept is equal to 41. This is logical as a team with 0 net points is exactly average and show win half of its 82 regular season games. With a slope of approximately 0.03, we see that each additional point the offense scores, (or point prevented by the defense), that a single net point is worth about 3% of a game.","2044ec2e":"Bar plot of the hometeams advantage by day of the week"}}