{"cell_type":{"f25a299b":"code","5403847d":"code","7ae6e270":"code","14b46216":"code","2bd3d01c":"code","9b8b94ce":"code","ea11e02d":"code","05fa5c76":"code","191090cd":"code","09ba7e26":"code","58b2ff41":"code","07ea3b37":"code","6d874182":"code","2181a1c6":"code","5cfc913c":"markdown","2e38d467":"markdown","8d1589c3":"markdown"},"source":{"f25a299b":"import gc\nfrom tqdm import tqdm\n#from tqdm._tqdm import trange\nimport numpy as np\nimport pandas as pd\nfrom pylab import rcParams\nimport matplotlib.pyplot as plt\nfrom sklearn.metrics import mean_squared_error\nfrom scipy.stats import probplot\n\nimport datetime as dt\nfrom datetime import date\nfrom datetime import timedelta\nfrom fbprophet import Prophet\n\n%matplotlib inline\nimport os\nimport warnings\nwarnings.filterwarnings(\"ignore\")","5403847d":"data0=pd.read_csv('..\/input\/rare-pepes\/rare-pepes\/xcp_prices.csv')\ndata0","7ae6e270":"def stamp2date(x):\n    dt0=dt.datetime.fromtimestamp(x)\n    strdate=dt.datetime.date(dt0).strftime('%Y-%m-%d')\n    return strdate","14b46216":"data0['date']=data0['Timestamp'].apply(lambda x:stamp2date(x))\ndata0","2bd3d01c":"data0=data0.drop('Timestamp',axis=1)\ndata0=data0.sort_values('date',ascending=True).reset_index(drop=True)\ndata0","9b8b94ce":"item1=data0\n\nitem1.columns = ['y', 'ds']\nitem1.y = item1.y.astype('float')\nitem1.ds = item1.ds.astype('datetime64')\n\nrcParams['figure.figsize'] = 20, 5\nplt.plot(item1.ds, item1.y)","ea11e02d":"train_item=item1[0:-60]\nvalidation_item=item1[-60:]","05fa5c76":"ph = Prophet()\nph.fit(item1)\nforecast = ph.predict(item1[['ds']])\nfigure = ph.plot(forecast)\nfigure.show()","191090cd":"ph = Prophet()\nph.fit(train_item)\nforecast2=ph.predict(validation_item[['ds']])\nfigure = ph.plot(forecast2)\nfigure.show()","09ba7e26":"from datetime import timedelta\nstart0 = dt.datetime.strptime('2018-02-03', '%Y-%m-%d').date()\nend0   = dt.datetime.strptime('2018-03-31', '%Y-%m-%d').date()\nprint((end0-start0).days)","58b2ff41":"def daterange(start,end):\n    for i in range((end-start).days):\n        return start+timedelta(i)  ","07ea3b37":"dates0=[]\nfor i in range((end0-start0).days):\n    dates0+=[(start0+timedelta(i)).strftime('%Y-%m-%d') ]\nprint(dates0)","6d874182":"dates0_df=pd.DataFrame(dates0)\ndates0_df.columns=['ds']\ndates0_df","2181a1c6":"ph = Prophet()\nph.fit(item1)\nforecast3=ph.predict(dates0_df)\nfigure = ph.plot(forecast3)\nfigure.show()","5cfc913c":"# fit past and predict past","2e38d467":"# fit past and predict future","8d1589c3":"# fit train and predict validation"}}