{"cell_type":{"fefe258f":"code","8801d1ca":"code","f190673b":"code","cb436de4":"code","f81b648c":"code","bb5e2e4f":"code","4d67f9a0":"code","cbbb61a4":"code","a0a71846":"code","34cc03c9":"code","dda479ce":"code","6603fda4":"code","534c623f":"code","7ac11263":"code","d0a26717":"code","68c4a499":"code","29bd180c":"code","6815d67a":"markdown","8a42de3d":"markdown","390049d2":"markdown","1bb42d20":"markdown","8ca3a89f":"markdown","034b79c5":"markdown","c1c0d5df":"markdown","2dd64f96":"markdown","1bc5d45d":"markdown","77c40e7d":"markdown","e02ce46e":"markdown","399926de":"markdown","fafbc617":"markdown","5abb4efa":"markdown","71239ed2":"markdown","96e6b20d":"markdown","46e853f2":"markdown","b0ff5b3e":"markdown","1afa3f79":"markdown","9ad022f4":"markdown","e0c59b53":"markdown","f0d7ab87":"markdown","4dd78349":"markdown"},"source":{"fefe258f":"import os\nimport numpy as np # linear algebra\nimport pandas as pd # data processing, CSV file I\/O (e.g. pd.read_csv)\nimport datetime\n\n%matplotlib inline \nimport matplotlib as mpl\nimport matplotlib.pyplot as plt\nimport seaborn as sns","8801d1ca":"df = pd.read_csv('..\/input\/goodreadsbooks\/books.csv',error_bad_lines=False)\ndf.head()","f190673b":"df.describe(include = 'all')","cb436de4":"print(df.dtypes)","f81b648c":"df.rename(columns={\"  num_pages\": \"num_pages\"}, inplace = True)\ndf.columns","bb5e2e4f":"# df['publish_date'] =\n# pd.DatetimeIndex(df['publication_date']).year\n# pd.to_datetime(df['publication_date'], format = '%Y')\n\ndf['publication_year'] = [i.split('\/')[2] for i in df['publication_date']]\ndf['decade'] = [((int(i)\/\/10)*10) for i in df['publication_year']]\n\ndf_lang_year = df.groupby(['decade','language_code']).count().reset_index()\ndf_lang_year","4d67f9a0":"plt.figure(figsize=(20,10))\nplt.xlabel('Year')\nplt.ylabel('Number of Books')\n    \nax1 = sns.lineplot(x=\"decade\", y=\"bookID\",\n             hue=\"language_code\", #style=\"event\",\n             data=df_lang_year)\n\nax1.set_ylabel('Number of Books')\nax1.set_xlabel('Decade')","cbbb61a4":"x = df.groupby('language_code')['bookID'].count().reset_index().sort_values(by = 'bookID',ascending=False)\nplt.figure(figsize=(15,10))\n\nax1 = sns.barplot(x = 'language_code', \n            y = 'bookID',\n           data = x)\n\nax1.set_xlabel('Language Code')\nax1.set_ylabel('Number of Books')\nax1.set_yscale(\"log\")\n# ax1.set_ticklabels(x['bookID'], minor=False)","a0a71846":"plt.figure(figsize=(15,15))\nchart = sns.countplot(\n    data=df,\n    x='language_code'\n)\n\n\nax1.set_xlabel('Language Code')\nax1.set_ylabel('Number of Books')\n","34cc03c9":"df['updated_language'] = ['en' if i in ('eng','en-US', 'en-GB', 'en-CA') else i for i in df['language_code']]\nx = df.groupby('updated_language')['bookID'].count().reset_index().sort_values(by = 'bookID',ascending=False)\n\nplt.figure(figsize=(15,10))\n\nax1 = sns.barplot(x = 'updated_language', \n            y = 'bookID',\n           data = x)\n\nax1.set_xlabel('Language Code')\nax1.set_ylabel('Number of Books')\nax1.set_yscale(\"log\")\n# ax1.set_ticklabels(x['bookID'], minor=False)","dda479ce":"authors = df.groupby('authors')['bookID'].count().reset_index().sort_values(by = 'bookID', ascending = False).head(10)\n\nplt.figure(figsize=(15,10))\nau = sns.barplot(x = 'authors',\n                 y = 'bookID',\n                 data = authors)\n\nau.set_xlabel('Authors')\nau.set_ylabel('Number of Books')\n\n# Other way to rotate labels\n# au.set_xticklabels(au.get_xticklabels(), \n#                    rotation=45,\n#                   fontweight='light',\n#                   fontsize='x-large')\n\nplt.xticks(\n    rotation=45, \n    horizontalalignment='right',\n    fontweight='light',\n    fontsize='x-large'  \n)","6603fda4":"df['average_rating_rounded'] = df['average_rating'].round(1)\nplt.figure(figsize=(20,15))\nax1 = sns.countplot(\n    data=df,\n    x='average_rating_rounded'\n)\n\nax1.set_xlabel('Average Rating')\nax1.set_ylabel('Number of Books')\n\n","534c623f":"fig, ax = plt.subplots(figsize=[14,8])\nsns.distplot(df['average_rating'],ax=ax)\nax.set_title('Average rating distribution for all books',fontsize=20)\nax.set_xlabel('Average rating',fontsize=13)\n","7ac11263":"most_rated = df.sort_values(by = 'ratings_count', ascending = False)[['title','ratings_count']]\n\nplt.figure(figsize = (15,10))\n\nax1 = sns.barplot(x=\"ratings_count\", \n            y=\"title\", \n            data=most_rated.head(10)\n           )\n\nax1.set_yticklabels(ax1.get_yticklabels(), \n                  fontweight='light',\n                  fontsize='small')\n\nax1.set_ylabel('Title')\nax1.get_xaxis().get_major_formatter().set_scientific(False)","d0a26717":"pub_data = df.groupby('publisher')['bookID'].count().reset_index().sort_values(by = 'bookID', ascending = False)\n\nax1 = sns.barplot(x = 'publisher',\n                 y = 'bookID',\n                 data = pub_data.head(10))\n\nax1.set_xticklabels(ax1.get_xticklabels(),\n                   rotation = 45,\n                  fontweight='light',\n                  fontsize='small')\n\nax1.set_ylabel('Number of Books')","68c4a499":"plt.figure(figsize=(12, 8))\n\ndf_corr = df[['average_rating','num_pages','ratings_count', 'text_reviews_count']].corr()\nsns.heatmap(df_corr, \n            xticklabels = df_corr.columns.values,\n            yticklabels = df_corr.columns.values,\n            annot = True);\n","29bd180c":"plt.figure(figsize=(14, 14))\n\nsns.pairplot(df, diag_kind='kde');\n","6815d67a":"Surprisingly, most of the books (at least in our dataset) got published between **2000-2010.**","8a42de3d":"As expected, we see there's a strong correlation between ratings_count and average_rating.","390049d2":"As the dataset name suggests, it contains data about various books which were published over the years and some metadata for those books. \n\nI'll try to focus on **Data Cleaning** and **Exploratory Data Analysis** in this notebook. \n\n**Please upvote it if you find this useful.**","1bb42d20":"### Top 10 Most Rated Books","8ca3a89f":"Here we have just plotted relations among all variables with a pairplot (crossplot). This is an easy way to spot any discrepancies or any relations in our data. ","034b79c5":"Here we have used the **<font color = 'red'>log-scale<\/font>** as most of the books are published in English (eng) and for many languages they have barely 1 book. Using log-scale makes it easy to visualize the scale in case of such disparity. \n\nObservation: **<font color = 'red'>English books are actually published in 4 language codes<\/font>**, *eng, en-US, en-GB, en-CA*.\n\nFYI, I've included a chart without log-scale below to show the disparity in y-axis labels.","c1c0d5df":"### Top 10 Publishers","2dd64f96":"With help of visualizations, we will try to answer few common questions:\n1. Number of Books published by Language (each year)\n2. Number of published books based on their language\n3. Top 10 Authors with most number of published books\n4. Distribution of Average Rating received by books?\n5. Which are the top-10 rated books?\n6. Top 10 publishing houses based on number of books published by them\n\nSimilarly we will also try to see if 2 or more variables are related to each other, by performing bivariate analysis:\n7. Are any of the fields in the dataset correlated?\n8. Visualize relationships of various fields with each other using a pairplot\n\n","1bc5d45d":"Are any of the columns correlated with each other?","77c40e7d":"### Understanding Dataset\n\nLet's try to look at various fields, their datatypes and some statistics around them to understand our dataset in detail.","e02ce46e":"Based on above data, we have **11123 unique books** and **no NULL values in our dataset**. \n\nLets look at datatypes of those columns.","399926de":"### Top 10 Authors by Number of Books Published","fafbc617":"### Bivariate Analysis","5abb4efa":"Although Twilight is the most rated book, we have **4 Harry Potter books** in the top-10.\n\n![HarryPotter](https:\/\/wallpaperboat.com\/wp-content\/uploads\/2019\/06\/harry-potter-12.jpg)","71239ed2":"Looks like a close call. Stephen King and P.G. Wodehouse both have published maximum of 40 books over the period.","96e6b20d":"### Average Rating received by Books - Distribution","46e853f2":"### Number of Books published each year by Language","b0ff5b3e":"**I hope this notebook helps you. Please let me know if you have any suggestions\/feedback. Please upvote it if you liked it.**","1afa3f79":"### Published books by Language","9ad022f4":"Looks like most of the books in our dataset have a rating of 4.0. \n\n> Note: We have rounded the ratings to 1 decimal point to make it easier to visualize the data.","e0c59b53":"Vintage publishing house has published almost 300 books over this timeframe.","f0d7ab87":"If you observe closely, **we have an extra ' ' before num_pages column name**. It'll be good to fix this right now to avoid any issues later on.","4dd78349":"Let's look at the distribution with all English language books combined."}}