{"cell_type":{"85ce4a96":"code","84a5ae7b":"code","9efc3872":"code","5058f6fb":"code","403e68a6":"code","e35ab6bc":"code","ee94a538":"code","7c883e0c":"code","7c89ee28":"code","96ff9918":"code","0395a04a":"code","4bd45302":"code","bee3b714":"code","2bdb4f9c":"code","7d3d16dc":"code","7bf0f627":"code","a14ca77b":"code","fced72eb":"code","8bf69474":"code","2b63a667":"code","0c1620b2":"code","19d53ea2":"code","16239b40":"code","6777e759":"code","2956e0e0":"code","84afba03":"code","f162595f":"code","529b3a6d":"code","7739aba5":"code","221e1a8f":"code","603873da":"code","dc73c45c":"code","0feb322a":"code","809d1d29":"code","bb16f39b":"code","4f3e8aef":"code","14797d4f":"code","879f652a":"code","b51d3fca":"code","f2fe95d5":"code","a90e76bf":"code","3e10a7d1":"code","b89e80c8":"code","ee86b791":"code","ec6c6ca1":"code","cf5fc07b":"code","85519578":"code","27441b14":"code","584dd4d2":"code","74c31833":"code","78da54a9":"code","94c95c81":"code","3fe2caa0":"code","101470a8":"code","e42ebf1b":"code","386144de":"code","d66d54ab":"code","47fce2b1":"code","0f39683e":"code","c4e4bce4":"code","6bb91912":"code","1d634472":"code","9ed87724":"code","5d28a100":"code","787f531e":"code","f9b61dc0":"code","b54e3f1b":"code","d553fd26":"code","1f1e527e":"code","48727eeb":"code","5e9e97aa":"code","08bad26a":"code","31c04eff":"code","af8888a7":"code","b2ca5807":"code","8c80d3f5":"code","d619209a":"code","5dfb4062":"code","68ddee75":"markdown","d2b4e00d":"markdown","8e3715a5":"markdown","491978fa":"markdown","e3107327":"markdown","dbb68db5":"markdown","10b6f024":"markdown","21f44eb8":"markdown","bfae9b38":"markdown","67483a94":"markdown","f6bf9e2f":"markdown","a32a68fc":"markdown","34cd93bd":"markdown","e4e36ee0":"markdown","2ac8452e":"markdown","baddafd1":"markdown","d85ff6d5":"markdown","ce7277d9":"markdown","862cef5f":"markdown","fac07234":"markdown","4472c9bb":"markdown","1edccc22":"markdown","9bddfee8":"markdown","44cb80bc":"markdown","5ae8abf1":"markdown","2f95fd7c":"markdown","bdb70576":"markdown","2415d660":"markdown","c53e4b1c":"markdown","ec91259b":"markdown","1a60e82d":"markdown","a9011e74":"markdown","81316f5a":"markdown","6e1f5c26":"markdown","a6729834":"markdown","f44773eb":"markdown","4d7462c1":"markdown","4e85b69c":"markdown","6ad32785":"markdown","f7ca4302":"markdown"},"source":{"85ce4a96":"import pandas as pd\nimport numpy as np\nimport matplotlib.pyplot as plt\nimport plotly.express as px\nimport seaborn as sns\nimport geopandas as gpd\nimport os","84a5ae7b":"import warnings\nwarnings.filterwarnings(\"ignore\")","9efc3872":"data = pd.read_csv(\"https:\/\/covid19.isciii.es\/resources\/serie_historica_acumulados.csv\", delimiter=\",\", encoding=\"latin1\")","5058f6fb":"data.head()","403e68a6":"data.tail(10)","e35ab6bc":"data=data[~data.CCAA.str.startswith('NOTA') & ~data.CCAA.str.startswith('Los') & ~data.CCAA.str.startswith('*') & ~data.CCAA.str.startswith('**') & ~data.CCAA.str.startswith('***') & ~data.CCAA.str.startswith('****')]","ee94a538":"data.tail()","7c883e0c":"data.fillna(0)","7c89ee28":"data.rename(columns={\"FECHA\":\"Date\",\n              \"PCR+\":\"Infected\",\n             \"Hospitalizados\":\"Hospitalized\",\n             \"Fallecidos\":\"Deaths\",\n             \"Recuperados\":\"Cured\",\n             \"CASOS\":\"Cases\"},inplace= True)","96ff9918":"data.replace({\"AN\":\"Andaluc\u00eda\",\"AR\":\"Arag\u00f3n\",\"AS\":\"Asturias\",\n                \"IB\":\"Baleares\",\"CN\":\"Canarias\",\"CB\":\"Cantabria\",\n                 \"CM\":\"Castilla La Mancha\",\"CL\":\"Castilla y Le\u00f3n\",\"CT\":\"Catalu\u00f1a\",\n              \"CE\":\"Ceuta\",\"VC\":\"C. Valenciana\",\"EX\":\"Extremadura\",\"GA\":\"Galicia\",\n             \"MD\":\"Madrid\",\"ML\":\"Melilla\",\"MC\":\"Murcia\",\"NC\":\"Navarra\",\n             \"PV\":\"Pa\u00eds Vasco\",\"RI\":\"La Rioja\"},inplace=True)","0395a04a":"data.describe()","4bd45302":"data.isnull().sum()","bee3b714":"data.CCAA.unique()","2bdb4f9c":"data.Date = pd.to_datetime(data.Date, format=\"%d\/%m\/%Y\")","7d3d16dc":"data[\"Time\"] = data.Date.apply(lambda x: x.strftime(\"%d %b, %Y\"))","7bf0f627":"print(data.Date.min())\nprint(data.Date.max())","a14ca77b":"total_s = data.groupby([\"Date\",\"Time\"])[\"Date\",\"Cases\",\"Infected\",\"TestAc+\",\"Deaths\",\"Cured\",\"Hospitalized\",\"UCI\"].sum().reset_index()\ntotal_s.head()","fced72eb":"aux = total_s.Infected.to_list()\n\ndaily=[]\n\nfor i in range(len(aux)-1):\n    b = aux[i+1] - aux[i]\n    daily.append(b)\n    \ndaily.insert(0,0)   \n\ntotal_s[\"Daily_Infected\"] = daily","8bf69474":"aux = total_s.Deaths.to_list()\n\ndaily=[]\n\nfor i in range(len(aux)-1):\n    b = aux[i+1] - aux[i]\n    daily.append(b)\n    \ndaily.insert(0,0)   \n\ntotal_s[\"Daily_Deaths\"] = daily","2b63a667":"aux = total_s.Cases.to_list()\n\ndaily=[]\n\nfor i in range(len(aux)-1):\n    b = aux[i+1] - aux[i]\n    daily.append(b)\n    \ndaily.insert(0,0)   \n\ntotal_s[\"Daily_Cases\"] = daily","0c1620b2":"total_s.head()","19d53ea2":"aux = total_s.melt(id_vars=\"Date\", value_vars=(\"Cases\",\"Infected\",\"TestAc+\",\"Deaths\",\"Cured\",\"UCI\",\"Hospitalized\"), value_name=\"Count\" , var_name= \"Description\")","16239b40":"aux.head()","6777e759":"fig = px.line (aux, x= \"Date\", y = \"Count\", color=\"Description\", title= \"Actual situation in Spain\")\nfig.show()","2956e0e0":"fig = px.line (total_s, x= \"Date\", y = \"Cases\", range_x=[data.Date.min(),\"2020-04-14\"], title= \"Total infected in Spain till 14 April, 2020\")\nfig.show()","84afba03":"fig = px.area (total_s, x= \"Date\", y = \"Daily_Cases\", range_x=[data.Date.min(),\"2020-04-14\"], range_y= [0,total_s.Daily_Cases.max()+10],title= \"Daily infections in Spain till 14 April, 2020\")\nfig.show()","f162595f":"fig = px.area (total_s, x= \"Date\", y = \"Daily_Infected\", range_x=[\"2020-04-15\",data.Date.max(),], title= \"Daily infections in Spain after 14 April, 2020\")\nfig.show()","529b3a6d":"aux = total_s.melt(id_vars=\"Date\", value_vars=(\"Daily_Deaths\",\"Daily_Cases\"), value_name=\"Count\" , var_name= \"Description\")","7739aba5":"aux_i = total_s.melt(id_vars=\"Date\", value_vars=(\"Daily_Deaths\",\"Daily_Infected\"), value_name=\"Count\" , var_name= \"Description\")","221e1a8f":"fig = px.area (aux, x= \"Date\", y = \"Count\", range_x= [data.Date.min(),\"2020-04-14\"], range_y=[0,data.Cases.max()], color=\"Description\", title= \"Daily infections and deaths till 14 April, 2020\")\nfig.show()","603873da":"fig = px.area (aux_i, x= \"Date\", y = \"Count\", range_x= [\"2020-04-15\",data.Date.max()], range_y=[0,data.Infected.max()], color=\"Description\", title= \"Daily infections and deaths after 14 April, 2020\")\nfig.show()","dc73c45c":"fig = px.bar (aux, x= \"Date\", y = \"Count\", color=\"Description\", range_x= [data.Date.min(),\"2020-04-14\"],range_y=[0,7000], title= \"Daily infections and deaths till 14 April, 2020\")\nfig.show()","0feb322a":"fig = px.bar (aux_i, x= \"Date\", y = \"Count\", color=\"Description\",  range_x= [\"2020-04-15\",data.Date.max()], range_y=[0,data.Infected.max()], title= \"Daily infections and deaths after 14 April, 2020\")\nfig.show()","809d1d29":"fig = px.line (total_s, x= \"Date\", y = \"Deaths\", title= \"Total deaths in Spain\", color_discrete_sequence = ['red'])\nfig.show()","bb16f39b":"fig = px.area(total_s, x= \"Date\", y = \"Daily_Deaths\", title= \"Daily deaths in Spain\", color_discrete_sequence = ['red'])\nfig.show()","4f3e8aef":"data_cases = data[data.Date<=\"14-04-2020\"]","14797d4f":"fig = px.bar(data_cases, x=\"CCAA\", y=\"Cases\", color=\"CCAA\",\n              animation_frame=\"Time\", animation_group=\"CCAA\", range_y=[0,data.Cases.max()+1000],title= \"Infections by regions over time till 14 April,2020\")\nfig.show()","879f652a":"data_infected = data[data.Date>\"14-04-2020\"]","b51d3fca":"fig = px.bar(data_infected, x=\"CCAA\", y=\"Infected\", color=\"CCAA\",\n              animation_frame=\"Time\", animation_group=\"CCAA\", range_y=[0,data.Infected.max()+1000],title= \"Infections by regions over time\")\nfig.show()","f2fe95d5":"total_madrid = data[data.CCAA==\"Madrid\"].groupby(\"Date\")[\"Date\",\"Infected\",\"Deaths\",\"Cured\",\"Hospitalized\",\"UCI\"].sum().reset_index()","a90e76bf":"aux_m = total_madrid.melt(id_vars=\"Date\", value_vars=(\"Infected\",\"Deaths\",\"Cured\",\"UCI\",\"Hospitalized\"), value_name=\"Count\" , var_name= \"Status\")","3e10a7d1":"fig = px.line (aux_m, x= \"Date\", y = \"Count\", color=\"Status\", title= \"Actual situation in Madrid\")\nfig.show()","b89e80c8":"fig = px.bar(aux_m, x= \"Date\", y = \"Count\", color=\"Status\", title= \"Actual situation in Madrid\")\nfig.show()","ee86b791":"total_com = data.groupby([\"Date\",\"CCAA\"])[\"Infected\",\"Deaths\",\"Cured\",\"Hospitalized\",\"UCI\"].sum().reset_index()\ntotal_com.head()","ec6c6ca1":"com = total_com[total_com.Date == max(total_com.Date)]","cf5fc07b":"fig = px.bar (com.sort_values(\"Infected\",ascending=False), x= \"CCAA\", \n              y = \"Infected\", color=\"CCAA\", title= \"Infections by region\", text='CCAA', height=1000, orientation=\"v\")\nfig.show()","85519578":"fig = px.bar (com.sort_values(\"Deaths\",ascending=False), x= \"CCAA\", \n              y = \"Deaths\", color=\"CCAA\", title= \"Deaths by region\", text='CCAA', height=1000, orientation=\"v\")\nfig.show()","27441b14":"fig = px.bar (com.sort_values(\"Hospitalized\",ascending=False), x= \"CCAA\", \n              y = \"Hospitalized\", color=\"CCAA\", title= \"Hospitalizations by region\", text='CCAA', height=1000, orientation=\"v\")\nfig.show()","584dd4d2":"fig = px.bar (com.sort_values(\"UCI\",ascending=False), x= \"CCAA\", \n              y = \"UCI\", color=\"CCAA\", title= \"Advanced care by region\", text='CCAA', height=1000, orientation=\"v\")\nfig.show()","74c31833":"fig = px.bar (com.sort_values(\"Cured\",ascending=False), x= \"CCAA\", \n              y = \"Cured\", color=\"CCAA\", title= \"Cured people by region\", text='CCAA', height=1000, orientation=\"v\")\nfig.show()","78da54a9":"aux_all = data.melt(id_vars=[\"Date\", \"CCAA\"], value_vars=(\"Cases\",\"Infected\",\"Deaths\",\"Cured\",\"UCI\",\"Hospitalized\"), value_name=\"Count\" , var_name= \"Status\")","94c95c81":"aux_all_i = aux_all[aux_all[\"Status\"]==\"Cases\"]\nfig = px.line(aux_all_i,x=\"Date\",y=\"Count\",color=\"CCAA\",range_x=[\"2020-02-20\",\"2020-04-14\"],title=\"Total infections by region til 14 April,2020\")\nfig.show()","3fe2caa0":"aux_all_i = aux_all[aux_all[\"Status\"]==\"Infected\"]\nfig = px.line(aux_all_i,x=\"Date\",y=\"Count\",color=\"CCAA\", range_x=[\"2020-04-15\",data.Date.max()], title=\"Total infections by region\")\nfig.show()","101470a8":"aux_all_d = aux_all[aux_all[\"Status\"]==\"Deaths\"]\nfig = px.line(aux_all_d,x=\"Date\",y=\"Count\",color=\"CCAA\", title=\"Total fatalities by region\")\nfig.show()","e42ebf1b":"aux_all_c = aux_all[aux_all[\"Status\"]==\"Cured\"]\nfig = px.line(aux_all_c,x=\"Date\",y=\"Count\",color=\"CCAA\", title=\"Total recoveries by region\")\nfig.show()","386144de":"for i in data.CCAA.unique(): \n    \n    a = i.replace(\".\",\"\")\n    a = a.replace(\" \",\"_\")\n    \n    exec('df_{}=data[data.CCAA == i]'.format(a))\n    \n    exec('aux_a = df_{}.Infected.to_list()'.format(a))\n    \n    \n    daily=[]\n    for i in range(len(aux_a)-1):\n        b = aux_a[i+1] - aux_a[i]\n        daily.append(b)\n    \n    daily.insert(0,0)   \n\n    exec('df_{}[\"Daily_infected\"] = daily'.format(a))\n    \n    exec('aux_d = df_{}.Deaths.to_list()'.format(a))\n    \n    \n    daily=[]\n    for i in range(len(aux_d)-1):\n        b = aux_d[i+1] - aux_d[i]\n        daily.append(b)\n    \n    daily.insert(0,0)   \n\n    exec('df_{}[\"Daily_deaths\"] = daily'.format(a))","d66d54ab":"df_daily_infected = pd.DataFrame({\"Date\":data.Date.unique(),\n                                 \"Madrid\":df_Madrid[\"Daily_infected\"].values,\n                                 \"Catalu\u00f1a\":df_Catalu\u00f1a[\"Daily_infected\"].values,\n                                 \"Andalucia\":df_Andaluc\u00eda[\"Daily_infected\"].values,\n                                 \"Castilla La Mancha\":df_Castilla_La_Mancha[\"Daily_infected\"].values,\n                                 \"Castilla y Leon\":df_Castilla_y_Le\u00f3n[\"Daily_infected\"].values,\n                                 \"Pa\u00eds Vasco\":df_Pa\u00eds_Vasco[\"Daily_infected\"].values})","47fce2b1":"aux_i = df_daily_infected.melt(id_vars=\"Date\", value_vars=(\"Madrid\",\"Catalu\u00f1a\",\"Andalucia\",\"Castilla La Mancha\",\"Castilla y Leon\",\"Pa\u00eds Vasco\"), value_name=\"Count\" , var_name= \"CCAA\")","0f39683e":"aux_1=aux_i[aux_i.Date>\"18-04-2020\"]","c4e4bce4":"fig = px.line (aux_1, x= \"Date\", y = \"Count\", color=\"CCAA\", title= \"Daily infections in Spain (Top 6)\")\nfig.show()","6bb91912":"# In the last days, Catalu\u00f1a has been the region with a higher number of new cases. This will also be related to the daily fatalities.","1d634472":"fig = px.bar (aux_1, x= \"Date\", y = \"Count\", color=\"CCAA\", title= \"Daily infections in Spain (Top 6)\")\nfig.show()","9ed87724":"df_daily_fatalities = pd.DataFrame({\"Date\":data.Date.unique(),\n                                 \"Madrid\":df_Madrid[\"Daily_deaths\"].values,\n                                 \"Catalu\u00f1a\":df_Catalu\u00f1a[\"Daily_deaths\"].values,\n                                 \"Valencia\":df_C_Valenciana[\"Daily_deaths\"].values,\n                                 \"Castilla La Mancha\":df_Castilla_La_Mancha[\"Daily_deaths\"].values,\n                                 \"Castilla y Leon\":df_Castilla_y_Le\u00f3n[\"Daily_deaths\"].values,\n                                 \"Pa\u00eds Vasco\":df_Pa\u00eds_Vasco[\"Daily_deaths\"].values})","5d28a100":"aux_f = df_daily_fatalities.melt(id_vars=\"Date\", value_vars=(\"Madrid\",\"Catalu\u00f1a\",\"Valencia\",\"Castilla La Mancha\",\"Castilla y Leon\",\"Pa\u00eds Vasco\"), value_name=\"Count\" , var_name= \"CCAA\")","787f531e":"fig = px.line (aux_f, x= \"Date\", y = \"Count\", color=\"CCAA\", title= \"Daily fatalities in Spain (Top 6)\")\nfig.show()","f9b61dc0":"fig = px.bar (aux_f, x= \"Date\", y = \"Count\", color=\"CCAA\", title= \"Daily fatalities in Spain (Top 6)\")\nfig.show()","b54e3f1b":"json = \"..\/input\/geojson\/shapefiles_ccaa_espana.geojson\"\ngeo = gpd.read_file(json)","d553fd26":"data.CCAA.unique()","1f1e527e":"geo.rename(columns={\"name_0\":\"Country\",\n                        \"name_1\":\"CCAA\"},inplace= True)","48727eeb":"geo.drop(columns=[\"id_0\",\"varname_1\",\"nl_name_1\",\"cc_1\",\"type_1\",\"engtype_1\",\"validfr_1\",\"validto_1\",\"remarks_1\",\n                      \"cartodb_id\",\"created_at\",\"updated_at\"], inplace=True)","5e9e97aa":"geo.replace({\"Castilla-La Mancha\":\"Castilla La Mancha\",\"Islas Baleares\":\"Baleares\",\"Islas Canarias\":\"Canarias\",\n                \"Principado de Asturias\":\"Asturias\",\"Regi\u00f3n de Murcia\":\"Murcia\",\"Ceuta y Melilla\":\"Ceuta\",\n                 \"Comunidad de Madrid\":\"Madrid\",\"Comunidad Foral de Navarra\":\"Navarra\",\"Comunidad Valenciana\":\"C. Valenciana\"},inplace=True)","08bad26a":"mapa=geo.merge(com,on=\"CCAA\",how=\"left\")","31c04eff":"mapa.head()","af8888a7":"mapa[\"Time\"] = mapa.Date.apply(lambda x: x.strftime(\"%d %b, %Y\"))","b2ca5807":"import json\n\nwith open(\"..\/input\/geojson\/shapefiles_ccaa_espana.geojson\") as f:\n    geo = json.load(f)","8c80d3f5":"fig = px.choropleth_mapbox(mapa, geojson=geo, locations='id_1', \n                           color='Infected',                           \n                           featureidkey=\"properties.id_1\",\n                           mapbox_style=\"carto-positron\",\n                           zoom=3, center={\"lat\": 40.4167, \"lon\": -3.70325},\n                           labels={'CCAA':'Infected'},\n                           hover_name=\"CCAA\",\n                           title=\"Infections by regional governments\"\n                          )\n#fig.update_layout(margin={\"r\":0,\"t\":0,\"l\":0,\"b\":0})\nfig.show()","d619209a":"fig = px.choropleth_mapbox(mapa, geojson=geo, locations='id_1', \n                           color='Deaths',                           \n                           featureidkey=\"properties.id_1\",\n                           mapbox_style=\"carto-positron\",\n                           zoom=3, center={\"lat\": 40.4167, \"lon\": -3.70325},\n                           labels={'CCAA':'Deaths'},\n                           hover_name=\"CCAA\",\n                           title=\"Fatalities by regional governments\"\n                          )\n#fig.update_layout(margin={\"r\":0,\"t\":0,\"l\":0,\"b\":0})\nfig.show()","5dfb4062":"fig = px.choropleth_mapbox(mapa, geojson=geo, locations='id_1', \n                           color='Hospitalized',                           \n                           featureidkey=\"properties.id_1\",\n                           mapbox_style=\"carto-positron\",\n                           zoom=3, center={\"lat\": 40.4167, \"lon\": -3.70325},\n                           labels={'CCAA':'Deaths'},\n                           hover_name=\"CCAA\"\n                          )\nfig.update_layout(margin={\"r\":0,\"t\":0,\"l\":0,\"b\":0})\nfig.show()","68ddee75":"First, we will load a json file with the information related to Spain geography and create a dataframe which will be the base for mapping.","d2b4e00d":"![spain.png](attachment:spain.png)","8e3715a5":"What about the daily infections before and after 14 April? See graphic below.","491978fa":"### Analysis by regional governments","e3107327":"###  Infections before and after 14 April, 2020","dbb68db5":"### Spanish government website (updated every 24 hours)","10b6f024":"# Data loading and general overview","21f44eb8":"Let\u00b4s create individual daily infections and deaths for each region and plot the most critical ones to analyze the progress.","bfae9b38":"If we analyse the number of total infections till 14 April, we got the graphic below.","67483a94":"# Plotting","f6bf9e2f":"Next, we will plot the main information from regional governments (infections, deaths, hospitalized, advanced care, and cured)","a32a68fc":"Let\u00b4s get rid of the last rows, which content some description about how the data have been updated.","34cd93bd":"Madrid was the region with the highest number of infections and deaths. In the following graphics we will analyze the different variables.\nThe cases related to infections were collected in the variable PCR+ (Infected), we can just use that variable just for Madrid.","e4e36ee0":"## Cummulative curves by regional goverments","2ac8452e":"In the plot above, we see how some regional governments shared its data in different days.","baddafd1":"## Daily infections and fatalities curves by regional government","d85ff6d5":"### Total deaths","ce7277d9":"Let\u00b4s also replace the missing values with 0.","862cef5f":"Once we have renamed the columns, let\u00b4s dig a bit deeper; we find the infected, deaths, hospitalized and cured people in each regional governments (all of them cummulative).\nBut there is something to consider: infected people are counted by different variales and different periods, which makes the analysis sort of  confused. \nWe will analyze it better with plots.","fac07234":"## Analysis of Madrid","4472c9bb":"In the plot below, we see how the curve of people hospitalized and in intensitive care unit increased suddently on 26 April. It may be due to an unreported cases from early days.","1edccc22":"Are these peaks real? Obviously not, it happends because the data from all communities were \"updated\" between 14 April and 18 April. After that day, we can consider the values accurate (except 28 April, which problaby unreported cases from some regions were added to the global situation) or at least more accurate than before.","9bddfee8":"Let\u00b4s plot the updated data by regions using the library choropleth. We will plot the most relevant information from our dataframe.","44cb80bc":"Basically the dataset contents all different regional governments with their different values collected every day from 20 Feb, 2020.\nThe values will be explained later.","5ae8abf1":"Looking at the plot below, we see some important information regarding the way the data have been collected.\n\nCases and Infected curves, both represent the infected people, the difference between them is the period both variables appeared.\nFrom the moment the data started to be tracked (20 Feb, 2020), the variable Cases was the only one which collected the people infected but, on 14 April the Spanish government introduced a new variable called PCR+ (renamed Indfected), which started collecting the number of people infected and at the same time the variable Cases drastically decreased. \n\nWhy the data have been collected that way? Well, probably we cannot know the answer, but we can get **some conclusions**: the **first one**, the variable Infected is the right one in order to know the real active cases today. It is the most accurate variable from 14 April onwards.\nThe **second one**, till 14 APril, if we want to do an analysis by regions, the variables Cases will be the right one.","2f95fd7c":"Let\u00b4s convert also the date values and create a new column called Time.","bdb70576":"The data can be automatically downloaded from the link below and will be saved in our **dataframe** called **data**.","2415d660":"## Rest of regional governments","c53e4b1c":"Why the difference between Cases and Infected curves from 20 Feb till 14 April? The variable Infected just recorded the infected people in Madrid (none of the rest). That\u00b4s why they both are different.\n\nWhat about the peak or jump in the Infected curve on 14 April? On that date, all records from all regional governments were added to the table, and not the same day; we can see how the peak did not occur in just one day, it took place from 14 April to 18 April.\n\nWhat about the variable TestAc +? Well, that is a good question. The Ac + is an antibody test, but there are different sorts of these tests and mean different things depending on the testing. It does not shed light in our analysis.","ec91259b":"# Introduction","1a60e82d":"We see how Madrid was the region which more infected people, it raised really fast compare with the rest of regional goverments. Catalu\u00f1a and also some smaller regions like both Castillas also reported a high number of infections.\nLet\u00b4s analyse now what happened after 14 April.","a9011e74":"Let\u00b4s create a variables with the infected and dead daily people.","81316f5a":"Let\u00b4s rename some of the columns for better understanding and also use the complete name of each region.","6e1f5c26":"Let\u00b4s go a bit deeper by regions. \nFirst,we will plot the number of infected people per regional government from 20 February till 14 April day by day.","a6729834":"# Mapping with choropleth","f44773eb":"Plotting the total number of fatalites and daily deaths as well, we can see how the curve is getting flat with a peak of fatalities on 31 March.","4d7462c1":"This graphic above is really interesting since we can see which region reported its cases and which day. \nWe see how Catalu\u00f1a, Baleares ,C.Valenciana and Navarra added the information between 15 April and 18 April. Also Galicia shared its cases on 28 April.\nIt is also important to note that on 15 April most of the regional governments had been shared the information and but not all of them were the same as the reported in the variable Cases.","4e85b69c":"First, we will load the csv file from the offical Spanish goverment site which as we said is updated every 24 hours.","6ad32785":"In this kernel I will focus on data visualization using mainly Plotly Express and Choropleth. The data source is the official website from the Spanish government for Covid-19 which is updated every 24 hours.\n\n**IMPORTANT NOTE**: the way the Spanish government has dealed with the data has been changing during the last month (the introduced new variables, missing values, delimiter changes from one day to the next...). That means the dataset published by the government may change in the future and may appear some errors in the kernel.\n\nIn that case I will ty to fix it as soon as possible.","f7ca4302":"## General tendency"}}