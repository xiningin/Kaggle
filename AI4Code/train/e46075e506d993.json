{"cell_type":{"e34fdd34":"code","d4bc8692":"code","bd5f7d2e":"code","99a54523":"code","fa0d889b":"code","04157e9e":"code","a09e4193":"code","426a619d":"code","c16e1c42":"code","fd90c93c":"code","22cfff05":"code","27af05a5":"code","c98e5cef":"code","faca29e3":"code","b502ba7b":"code","31c3b516":"code","3d8e99af":"code","67c3ea4e":"code","c1965e7d":"code","5a7bfe30":"code","631db818":"code","b8c6dfed":"code","66602f71":"code","346f91ae":"code","7c41ebc3":"code","806142f4":"code","fa4ec959":"code","715d6d24":"markdown","88164161":"markdown","e3b16564":"markdown","1b3881e2":"markdown","b502241a":"markdown","17475519":"markdown","2785ec8d":"markdown","d426da3b":"markdown","40a69195":"markdown","ac7eca3e":"markdown","6043424e":"markdown","c9b399c4":"markdown","f990972e":"markdown","65fac860":"markdown","a32b02f9":"markdown","e9631e9a":"markdown","d78a316c":"markdown","b50379bf":"markdown","06b17c6a":"markdown","5b106219":"markdown","b412ffc5":"markdown","24ab33ca":"markdown"},"source":{"e34fdd34":"import pandas as pd\nimport numpy as np\nimport seaborn as sns","d4bc8692":"df = pd.read_csv(\"..\/input\/customer-segmentation\/customer_segmentation.csv\",  sep = \",\")","bd5f7d2e":"df.head()","99a54523":"df.shape","fa0d889b":"df.info()","04157e9e":"df.isnull().sum()","a09e4193":"df.describe().T","426a619d":"df.corr()","c16e1c42":"def IsiHaritasiCiz():\n    corr = df.corr()\n    return sns.heatmap(corr, \n                xticklabels=corr.columns.values,\n                yticklabels=corr.columns.values);\nIsiHaritasiCiz()","fd90c93c":"sns.countplot(data = df, x = \"cinsiyet\")","22cfff05":"df[\"cinsiyet\"].value_counts().plot.barh()","27af05a5":"sns.distplot(df[\"maas\"], bins = 16, color = \"red\");","c98e5cef":"sns.distplot(df[\"aylik_harcama\"], bins = 16, color = \"red\");","faca29e3":"sns.scatterplot(x = \"yas\", y = \"maas\", data = df, color = \"purple\");","b502ba7b":"sns.scatterplot(x = \"yas\", y = \"aylik_harcama\", data = df, color = \"blue\");","31c3b516":"sns.scatterplot(x = \"maas\", y = \"aylik_harcama\", data = df, color = \"blue\");","3d8e99af":"sns.scatterplot(x = \"maas\", y = \"aylik_harcama\", data = df, hue=\"cinsiyet\");","67c3ea4e":"IsiHaritasiCiz()","c1965e7d":"from sklearn.cluster import KMeans\nimport matplotlib.pyplot as plt","5a7bfe30":"sonuclar = []\nfor i in range(1,11):\n    kmeans = KMeans (n_clusters = i, init='k-means++', random_state= 123)\n    kmeans.fit(df.values)\n    sonuclar.append(kmeans.inertia_)#WCSS DEGERLER\u0130N\u0130 ALIYORUZ.\nplt.plot(range(1,11),sonuclar)","631db818":"kmeans = KMeans(n_clusters = 3, init = 'k-means++')\nkmeans.fit(df.values)","b8c6dfed":"merkezler = kmeans.cluster_centers_.astype(int)\nmerkezler ","66602f71":"kumeler = kmeans.labels_\nkumeler = kumeler.tolist()\ndf[\"K\u00fcmeler\"] = kumeler\ndf.head()","346f91ae":"#!pip install plotly\nimport plotly.express as px\nimport plotly.graph_objs as go","7c41ebc3":"df[\"K\u00fcmeler\"]=df[\"K\u00fcmeler\"].astype(str)\nfig=px.scatter(df,\n               x=\"maas\"\n              ,y=\"aylik_harcama\"\n              ,color=\"K\u00fcmeler\"\n              ,title=\"3'l\u00fc k\u00fcmeleme\"\n              )\nfig.add_trace(go.Scatter(x=merkezler[:,0],y=merkezler[:,1],mode=\"markers\",name=\"Merkezler\",marker=dict(color=\"black\", size = 50)\n                        )\n             )\nfig.show()","806142f4":"from sklearn.cluster import AgglomerativeClustering\nac = AgglomerativeClustering(n_clusters=3, affinity='euclidean', linkage='ward')\n#linkage ile kumeler aras\u0131 mesafe, affinity ile veriler aras\u0131 mesafe olcum turu belirleniyor.\nX = df.values\nY_tahmin = ac.fit_predict(X)\nprint(Y_tahmin)\n\nplt.scatter(X[Y_tahmin==0,0],X[Y_tahmin==0,1],s=100, c='red')\nplt.scatter(X[Y_tahmin==1,0],X[Y_tahmin==1,1],s=100, c='blue')\nplt.scatter(X[Y_tahmin==2,0],X[Y_tahmin==2,1],s=100, c='green')\nplt.scatter(X[Y_tahmin==3,0],X[Y_tahmin==3,1],s=100, c='yellow')\nplt.title('HC')\nplt.show()\n\nimport scipy.cluster.hierarchy as sch\ndendrogram = sch.dendrogram(sch.linkage(X, method='ward'))\nplt.show()","fa4ec959":"ac = AgglomerativeClustering(n_clusters=2, affinity='euclidean', linkage='ward')\n#linkage ile kumeler aras\u0131 mesafe, affinity ile veriler aras\u0131 mesafe olcum turu belirleniyor.\nY_tahmin = ac.fit_predict(X)\nprint(Y_tahmin)\n\nplt.scatter(X[Y_tahmin==0,0],X[Y_tahmin==0,1],s=100, c='red')\nplt.scatter(X[Y_tahmin==1,0],X[Y_tahmin==1,1],s=100, c='blue')\n\nplt.title('HC')\nplt.show()\n","715d6d24":"import plotly.express as px\nX[\"K\u00fcmeler\"]=X[\"K\u00fcmeler\"].astype(str)\nfig=px.scatter(X,\n               x=\"maas\"\n              ,y=\"aylik_harcama\"\n              ,color=\"K\u00fcmeler\"\n              ,title=\"Customer Segmentation(k=4)\"\n              )\nfig.add_trace(go.Scatter(x=centers[:,1],y=centers[:,2],mode=\"markers\",name=\"Merkezler\",marker=dict(color=\"black\")\n                        )\n             )\nfig.show()","88164161":"### Kumeleme kismiyla devam edelim. K-means ile baslayalim.","e3b16564":"Yas ve aylik harcama k\u0131sm\u0131na bakt\u0131g\u0131m\u0131zda isi bizi kesin sinirlarla ayrilmis 2 kume karsiliyor. ","1b3881e2":"Dirsek noktamiz olarak 2-3 veya 4 alinabilir. Fakat dirsegin tam bukuldugu nokta olan 3 noktasini alarak ilerleyelim.","b502241a":"4 adet surekli degiskenimiz var.","17475519":"Null verimiz yok.","2785ec8d":"Is\u0131 haritasindan hatirlayalim, Yas ile maas ve aylik harcamanin etkilesim icinde oldugunu biliyoruz fakat kumeleme yaptigimizda o denli bir etkilesim gormedik.","d426da3b":"Tablomuza eklemek icin kumeleri listeye cevirip df objemize ekleyelim.","40a69195":"Korelasyon matrisimize gore maas ile yas aras\u0131nda olduk\u00e7a g\u00fc\u00e7l\u00fc bir pozitif ili\u015fki var. Bu kadar g\u00fc\u00e7l\u00fc olmasa da benzer \u015fekilde maas ile ayl\u0131k harcama ve yas ile ayl\u0131k harcama aras\u0131nda da pozitif ili\u015fkileri g\u00f6r\u00fcyoruz.","ac7eca3e":"Kumelemenin cinsiyetle pek alakali olmadigini soylemek mumkun gorunuyor.","6043424e":"Benzer ikili kumelenmeyi maas ve aylik harcama aras\u0131nda gormek de mumkun.","c9b399c4":"En iyi dirsek noktasini almak icin ilk egitimimiz.","f990972e":"Maas kisminda alt k\u0131s\u0131mdaki k\u00fcmelenme \u00fcst k\u0131s\u0131mda g\u00f6r\u00fclm\u00fcyor.","65fac860":"Kumelerimizin merkez noktalarini alalim ki gorsellestirme yaparken yardimci olsunlar.","a32b02f9":"Aylik harcamaya bakt\u0131g\u0131m\u0131zda alt kesimin olduk\u00e7a yogun oldugunu goruyoruz. Ek olarak 3000 tl bazinda bir yukselis daha gormek mumkun.","e9631e9a":"Maas ozniteligimizin standart sapmasinin yuksek olmas\u0131na bakilirsa genis bir skalaya bakiyor oldugumuzu soylemek mumkun. Minimum ve maximum degerler de bunu dogruluyor. Aylik harcama ozniteligimiz icin ise daha kucuk ve ortalamaya nispeten daha yak\u0131n bir standart sapma degeri goruyoruz. Demek ki harcamalar maaslara gore birbirlerine daha yakin. Son olarak yas ozniteligimize baktigimiz zaman ise standart sapmasinin oldukca dusuk oldugunu goruyoruz. Demek ki veriler birbirine yakin olarak kumelenmis.","d78a316c":"Cinsiyetin dengeli dagildigini soyleyebiliriz.","b50379bf":"Belirgin sekilde yas 40'\u0131n ustune ciktiktan sonra harcamalar\u0131n alt limitinde muazzam bir yukselis var.","06b17c6a":"Korelasyon matrisimizden de hat\u0131rlayaca\u011f\u0131m\u0131z \u00fczere maas, ayl\u0131k harcama ve yas \u00f6znitelikleri birbirini pozitif etkiliyor. Burada da bunu olduk\u00e7a net bir \u015fekilde g\u00f6r\u00fcyoruz.","5b106219":"Merkezlerimizi goruntuleyelim.","b412ffc5":"Dendogram gosteriyor ki 2 adet kume de i\u015fimizi gorecektir. Bu bilgi ile tekrar kumelerine ayiralim.","24ab33ca":"### Hiyerarsik Kumeleme"}}