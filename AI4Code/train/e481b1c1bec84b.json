{"cell_type":{"80721f02":"code","0a483ee1":"code","917cc71c":"code","356082df":"code","27c54419":"code","0e84866c":"code","ac96cfbf":"code","f3888ca6":"code","d5fc3839":"code","ac8cbc08":"code","057f0852":"code","05709b1d":"code","06759dc2":"code","5792a242":"code","86e55d97":"code","a39be274":"code","71af6ef9":"code","127d2b42":"code","606474ce":"code","f62edb24":"code","eba60628":"code","f95dbe22":"code","e2def45c":"code","cb3a628e":"code","d76aeb76":"code","7f9fd22e":"code","23f5db6d":"code","d1ec1895":"code","778e7e18":"code","d5ee4ac1":"code","4a2aeed6":"code","445e36e4":"code","d36a33b4":"code","7fcb8970":"code","d1737edf":"code","ee0ff66f":"code","0cb84ac4":"code","515ab4f6":"code","287f55be":"code","f194e7a4":"code","7eabc4e3":"code","9dd694cd":"code","7155501e":"markdown","36c58e01":"markdown","ed55e488":"markdown","de88e5d5":"markdown","5a82c5ed":"markdown","95ecf626":"markdown","55459c00":"markdown","fa1e46b3":"markdown","a0efdfc0":"markdown","6b4587fb":"markdown","cfedb8de":"markdown","f24c5a5b":"markdown","b96758ef":"markdown","a76b01ae":"markdown","9bb9d6b3":"markdown","3ea51364":"markdown","4e42b8c2":"markdown","cb60b1d5":"markdown","850cf135":"markdown","5ceee53f":"markdown","31478bd8":"markdown","f12572db":"markdown","9bbdfda4":"markdown","c8b41105":"markdown","80bd61dc":"markdown","d905fb0e":"markdown","42dfdf79":"markdown","553486f3":"markdown","8136e460":"markdown","f1f544d7":"markdown","e42f39e3":"markdown","b3b260aa":"markdown","805d78a7":"markdown","09fde0a7":"markdown","377e10aa":"markdown","7522a6a3":"markdown","c6f7d199":"markdown","e387fee7":"markdown","91b763ae":"markdown"},"source":{"80721f02":"# This Python 3 environment comes with many helpful analytics libraries installed# libraries for data wrangling\nimport pandas as pd\nimport numpy as np\n# libraries for plotting\nimport matplotlib.pyplot as plt\n%matplotlib inline  \nimport warnings\nwarnings.filterwarnings(\"ignore\")\nimport seaborn as sns\nsns.set(style=\"whitegrid\")\nimport os\nfor dirname, _, filenames in os.walk('\/kaggle\/input'):\n    for filename in filenames:\n        print(os.path.join(dirname, filename))\n\n# Any results you write to the current directory are saved as output.","0a483ee1":"# reading longitudinal data\ndf_long = pd.read_csv('..\/input\/mri-and-alzheimers\/oasis_longitudinal.csv')","917cc71c":"# lets see first few entries of the dataset\ndf_long.head()","356082df":"# lets see the summary stats of numerical columns\ndf_long.describe(include=[np.number])","27c54419":"# lets see the summary of categorical columns\ndf_long.describe(include=[np.object])","0e84866c":"# dropping irrelevant columns\ndf_long=df_long.drop(['Subject ID','MRI ID','Hand'],axis=1)\n\ndf_long.head()","ac96cfbf":"# checking missing values in each column\ndf_long.isna().sum()","f3888ca6":"# for better understanding lets check the percentage of missing values in each column\nround(df_long.isnull().sum()\/len(df_long.index), 2)*100","d5fc3839":"# Plotting distribution of SES\ndef univariate_mul(var):\n    fig = plt.figure(figsize=(16,12))\n    cmap=plt.cm.Blues\n    cmap1=plt.cm.coolwarm_r\n    ax1 = fig.add_subplot(221)\n    ax2 = fig.add_subplot(212)\n    df_long[var].plot(kind='hist',ax=ax1, grid=True)\n    ax1.set_title('Histogram of '+var, fontsize=14)\n    \n    ax2=sns.distplot(df_long[[var]],hist=False)\n    ax2.set_title('Distribution of '+ var)\n    plt.show()","ac8cbc08":"# lets see the distribution of SES to decide which value we can impute in place of missing values.\nunivariate_mul('SES')\ndf_long['SES'].describe()","057f0852":"# imputing missing value in SES with median\ndf_long['SES'].fillna((df_long['SES'].median()), inplace=True)","05709b1d":"univariate_mul('MMSE')\ndf_long['MMSE'].describe()","06759dc2":"# imputing MMSE with median values\ndf_long['MMSE'].fillna((df_long['MMSE'].median()), inplace=True)","5792a242":"# Now, lets check the percentage of missing values in each column\nround(df_long.isnull().sum()\/len(df_long.index), 2)*100","86e55d97":"# Defining function to create pie chart and bar plot as subplots\ndef plot_piechart(var):\n  plt.figure(figsize=(14,7))\n  plt.subplot(121)\n  label_list = df_long[var].unique().tolist()\n  df_long[var].value_counts().plot.pie(autopct = \"%1.0f%%\",colors = sns.color_palette(\"prism\",7),startangle = 60,labels=label_list,\n  wedgeprops={\"linewidth\":2,\"edgecolor\":\"k\"},shadow =True)\n  plt.title(\"Distribution of \"+ var +\"  variable\")\n\n  plt.subplot(122)\n  ax = df_long[var].value_counts().plot(kind=\"barh\")\n\n  for i,j in enumerate(df_long[var].value_counts().values):\n    ax.text(.7,i,j,weight = \"bold\",fontsize=20)\n\n  plt.title(\"Count of \"+ var +\" cases\")\n  plt.show()\n\n","a39be274":"plot_piechart('Group')","71af6ef9":"df_long['CDR'].describe()","127d2b42":"# Plotting CDR with other variable\ndef univariate_percent_plot(cat):\n    fig = plt.figure(figsize=(18,12))\n    cmap=plt.cm.Blues\n    cmap1=plt.cm.coolwarm_r\n    ax1 = fig.add_subplot(221)\n    ax2 = fig.add_subplot(222)\n    \n    result = df_long.groupby(cat).apply (lambda group: (group.CDR == 'Normal').sum() \/ float(group.CDR.count())\n         ).to_frame('Normal')\n    result['Dementia'] = 1 -result.Normal\n    result.plot(kind='bar', stacked = True,colormap=cmap1, ax=ax1, grid=True)\n    ax1.set_title('stacked Bar Plot of '+ cat +' (in %)', fontsize=14)\n    ax1.set_ylabel('% Dementia status (Normal vs Dementia)')\n    ax1.legend(loc=\"lower right\")\n    group_by_stat = df_long.groupby([cat, 'CDR']).size()\n    group_by_stat.unstack().plot(kind='bar', stacked=True,ax=ax2,grid=True)\n    ax2.set_title('stacked Bar Plot of '+ cat +' (in %)', fontsize=14)\n    ax2.set_ylabel('Number of Cases')\n    plt.show()\n\n\n\n# Categorizing feature CDR\ndef cat_CDR(n):\n    if n == 0:\n        return 'Normal'\n    \n    else:                                         # As we have no cases of sever dementia CDR score=3\n        return 'Dementia'\n\ndf_long['CDR'] = df_long['CDR'].apply(lambda x: cat_CDR(x))","606474ce":"plot_piechart('CDR')","f62edb24":"df_long['MMSE'].describe()","eba60628":"# Categorizing feature MMSE\ndef cat_MMSE(n):\n    if n >= 24:\n        return 'Normal'\n    elif n <= 9:\n        return 'Severe'\n    elif n >= 10 and n <= 18:\n        return 'Moderate'\n    elif n >= 19 and n <= 23:                                        # As we have no cases of sever dementia CDR score=3\n        return 'Mild'\n\ndf_long['MMSE'] = df_long['MMSE'].apply(lambda x: cat_MMSE(x))","f95dbe22":"plot_piechart('MMSE')","e2def45c":"univariate_percent_plot('MMSE')","cb3a628e":"univariate_mul('Age')\ndf_long['Age'].describe()","d76aeb76":"df_long['age_group'] = pd.cut(df_long['Age'], [60, 70, 80,90, 100], labels=['60-70', '70-80', '80-90','90-100'])\ndf_long['age_group'].value_counts()","7f9fd22e":"# Now plotting age group to see dementia distribution\nunivariate_percent_plot('age_group')","23f5db6d":"plt.figure(figsize=(12, 8))\nax = sns.violinplot(x=\"M\/F\", y=\"Age\",hue=\"CDR\",split=True, data=df_long)\nplt.show()","d1ec1895":"df_long['eTIV'].describe()","778e7e18":"plt.figure(figsize=(12, 8))\nax = sns.violinplot(x=\"age_group\", y=\"eTIV\",hue=\"CDR\",split=True, data=df_long)\nplt.show()","d5ee4ac1":"plt.figure(figsize=(12, 8))\nax = sns.violinplot(x=\"M\/F\", y=\"eTIV\",hue=\"CDR\",split=True, data=df_long)\nplt.show()","4a2aeed6":"plt.figure(figsize=(12, 8))\nax = sns.violinplot(x=\"M\/F\", y=\"nWBV\",hue=\"CDR\",split=True, data=df_long)\nplt.show()\n","445e36e4":"df_long['EDUC'].describe()","d36a33b4":"plt.figure(figsize=(12, 8))\nax = sns.violinplot(x=\"M\/F\", y=\"EDUC\",hue=\"CDR\",split=True, data=df_long)\nplt.show()\n","7fcb8970":"df_long['SES'].describe()","d1737edf":"# Now plotting socio economic status to see dementia distribution\nunivariate_percent_plot('SES')","ee0ff66f":"plt.figure(figsize=(12, 8))\nax = sns.violinplot(x=\"M\/F\", y=\"SES\",hue=\"CDR\",split=True, data=df_long)\nplt.show()\n","0cb84ac4":"df_long['ASF'].describe()","515ab4f6":"plt.figure(figsize=(12, 8))\nax = sns.violinplot(x=\"M\/F\", y=\"ASF\",hue=\"CDR\",split=True, data=df_long)\nplt.show()","287f55be":"plt.figure(figsize=(12, 8))\nax = sns.violinplot(x=\"MMSE\", y=\"ASF\",split=True, data=df_long)\nplt.show()","f194e7a4":"plt.figure(figsize=(12, 8))\nax = sns.violinplot(x=\"MMSE\", y=\"nWBV\",split=True, data=df_long)\nplt.show()","7eabc4e3":"plt.figure(figsize=(12, 8))\nax = sns.violinplot(x=\"MMSE\", y=\"Visit\",split=True, data=df_long)\nplt.show()","9dd694cd":"plt.figure(figsize=(14, 8))\nsns.heatmap(df_long.corr(), annot=True)\nplt.show()","7155501e":"## 1. Data Cleaning","36c58e01":"As we can observe from the above plot, in case of Male most number of dementia cases are reported in the age of around 80 years while in case of females dementia is prevalent in 75 years of Age. One more observation suggests that in case of Males dementia starts early even before 60 years of age while in case of females demetia generally after 60 years of age.\n\nNext we will analyze another important feature named eTIV.\n\n### Estimated total intracranial volume (eTIV):\nIntracranial volume (ICV) is an important normalization measure used in morphometric analyses to correct for head size in studies of Alzheimer Disease (AD).The ICV measure, sometimes referred to as total intracranial volume (TIV), refers to the estimated volume of the cranial cavity as outlined by the supratentorial dura matter or cerebral contour when dura is not clearly detectable.\nICV is often used in studies involved with analysis of the cerebral structure under different imaging modalities, such as Magnetic Resonance (MR).","ed55e488":"After seeing from the above table, it has been observed that except Normal score all other score including 0.5 have dementia symptoms because it is very crucial to detect dementia in early stages. So, I am grouping cases having 0 score as Normal and all other score >=0.5 as dementia.","de88e5d5":"### About Dementia & Alzheimer\n\n![](https:\/\/i.ibb.co\/djzsmNG\/alzehemiers.jpg)\n\n**Dementia** is a syndrome, not a disease. A syndrome is a group of symptoms that doesn\u2019t have a definitive diagnosis. Dementia is a group of symptoms that affects mental cognitive tasks such as memory and reasoning. Dementia is an umbrella term that Alzheimer\u2019s disease can fall under. It can occur due to a variety of conditions, the most common of which is Alzheimer\u2019s disease.\n\n**Dementia** is the term applied to a group of symptoms that negatively impact memory, but **Alzheimer\u2019s** is a progressive disease of the brain that slowly causes impairment in memory and cognitive function. The exact cause is unknown and no cure is available.\n\nThe **World Health Organization** Trusted Source says that **47.5 million** people around the world are living with dementia.\n\nThe **National Institutes of Health** estimate that more than 5 million people in the United States have Alzheimer\u2019s disease. Although younger people can and do get Alzheimer\u2019s, the symptoms generally begin after age 60.\n\nThe time from diagnosis to death can be as little as three years in people over 80 years old. However, it can be much longer for younger people.\n\nDamage to the brain begins years before symptoms appear. Abnormal protein deposits form plaques and tangles in the brain of someone with Alzheimer\u2019s disease. Connections between cells are lost, and they begin to die. In advanced cases, the brain shows significant shrinkage.\n\nIt\u2019s impossible to diagnose Alzheimer\u2019s with complete accuracy while a person is alive. The diagnosis can only be confirmed when the brain is examined under a microscope during an autopsy.\n\n### Alzheimer\u2019s vs. Dementia symptoms\n\nThe symptoms of **Alzheimer\u2019s** and **dementia** can overlap, but there can be some differences.\n\nBoth conditions can cause:\n\n* a decline in the ability to think\n* memory impairment\n* communication impairment\n\nThe symptoms of Alzheimer\u2019s include:\n\n* difficulty remembering recent events or conversations\n* apathy\n* depression\n* impaired judgment\n* disorientation\n* confusion\n* behavioral changes\n* difficulty speaking, swallowing, or walking in advanced stages of the disease\n\nReference: [Healthline.com](https:\/\/www.healthline.com\/health\/alzheimers-disease\/difference-dementia-alzheimers#dementia)","5a82c5ed":"**Observation:**\n\nSevere Dementia cases starts reporting as the number of visits increases to more than 3 whereas normal cases are also reported after higher number of visits more than 3 but they are very few in number. ","95ecf626":"**Observation:**\n- As we can see from the above plot, there are around 39% demented cases in the dataset i.e., majority of the data is of Non Demented cases while 10% of the data is of Converted.\n- So lets analyze numerical features and perform univariate analysis on those features to see if we find any pattern or some interesting insights.\n\nSo, we first begin with analyzing the most important categorical feature i.e., **Clinical Dementia Rating (CDR)**.\n","55459c00":"First, we will analyze categorical column named Group","fa1e46b3":"**Observation:**\n\nAs we can observe from the above plot,Mens having education level between 10 and 17 have higher level of dementia cases and mens started to show dymentia symptoms with less education levels starting from 4 years whereas females starts showing dymentia symptoms after 6 years of education level having highest peak at 13 years of age.","a0efdfc0":"## Bivariate Analysis","6b4587fb":"MMSE also has integer values so we cannot impute float. So we will impute it with median value","cfedb8de":"**ASF - Atlas scaling factor** (unitless). Computed scaling factor that transforms native-space brain and skull to the atlas target (i.e., the determinant of the transform matrix)","f24c5a5b":"In this step, we will see how much variables are correlated with another","b96758ef":"As we can see Visit and MR Delay are showing close correlation to 0.92 but I am not dropping any correlated variable as of now.","a76b01ae":"Majority of cases of Dementia are in the age group of **70-80 years** (around 45%) while second most highest cases are in **80-90 years** of age.","9bb9d6b3":"### About MMSE (Mini Mental State Examination)\n**Mini-mental state**: A practical method for grading the cognitive state of patients for the clinician study. The MMSE was designed as a screening test for the purpose of evaluating cognitive impairment in older adults. It is a 30-point questionnaire that is used extensively in clinical and research settings to measure cognitive impairment.\n\n#### Interpretations:\nAny score of 24 or more (out of 30) indicates a normal cognition. Below this, scores can indicate severe (\u22649 points), moderate (10\u201318 points) or mild (19\u201323 points) cognitive impairment.That is, even a maximum score of 30 points can never rule out dementia. Low to very low scores correlate closely with the presence of dementia, although other mental disorders can also lead to abnormal findings on MMSE testing.","3ea51364":"So, we have to impute missing values in SES and MMSE. Lets analyze SES column","4e42b8c2":"**SES - Socioeconomic status** as assessed by the Hollingshead Index of Social Position and classified into categories from 1 (highest status) to 5 (lowest status)","cb60b1d5":"## Data Reading","850cf135":"**Observation:**\n\n- Interesting pattern observed from the above plot that in mens there are two peaks of highest dementia cases one at 1 (Highest status) and 4(lower status) and in between 1 and 4 there less instances of dementia cases whereas in case of females highest peak is at 2 whereas at 1 and 5 there are slightly less dementia cases reported.\n- It suggests that womens have less dementia probability at extreme higher and extreme lower level of socio economic status while mens have exactly opposite phenomenon.","5ceee53f":"After seeing the summary stats we observe that **Hand** feature has only one unique value whereas **Subject ID** and **MRI ID** is of no use in our analysis so we will drop these three columns from the dataset.","31478bd8":"As we can see from the above plot, there are around 40% of the cases in Normal MMSE status are of dementia cases accroding to CDR scoring.\n\nNext we will analyze Age feature to see how age is impacting the dementia status.","f12572db":"In this step, we will first see the overall distribution of categorical and numerical columns so that we can drop irrelevant features which only one unique value throughout or remove features which will not be helpful in our analysis.\n\nNext, we will handle the missing values and data type mismatch cases.","9bbdfda4":"Next we will analyze another column having missing values i.e., MMSE","c8b41105":"From the above plot we can get the intuition about ASF as in  case of normal patients the value of ASF distributed between 0.8 and 1.6 but as the patients started showing dementia cases its value centered around 1 as in case of Mild, Moderate and Severe it shrinks down to 1.1","80bd61dc":"**Normalized whole-brain volume**, expressed as a percent of all voxels in the atlas-masked image that are labeled as gray or white matter by the automated tissue segmentation process","d905fb0e":"As SES has values of integer type so we cannot impute float value of mean but we can impute median in place as both median and mean have very close values and median in this case is most representative value of SES.","42dfdf79":"The CDR\u2122 Scoring Table provides descriptive anchors that guide the clinician in making appropriate ratings based on interview data and clinical judgment. In addition to ratings for each domain, an overall CDR\u2122 score may be calculated through the use of an CDR\u2122 Scoring Algorithm. This score is useful for characterizing and tracking a patient\u2019s level of impairment\/dementia:\n\n1. 0 = Normal\n2. 0.5 = Very Mild Dementia or Questionable\n3. 1 = Mild Dementia\n4. 2 = Moderate Dementia\n5. 3 = Severe Dementia\n\nInformation was taken from [The Charles F. and Joanne Knight Alzheimer\u2019s Disease Research Center website](http:\/\/alzheimer.wustl.edu\/cdr\/cdr.htm). \n\nInterpretations of CDR scores:\n![CDR Scoring Table](https:\/\/i.ibb.co\/LhhT9n5\/CDR.png)","553486f3":"## 2. Univariate Analysis","8136e460":"**Observation:**\n\nAt lowest level of socio economic status there is a highest probability of dementia which may be due to lower economic condition which results in depression, sufferings which in turn results in dementia.","f1f544d7":"## Problem Statement\nAs the population of the world increases, there will be larger numbers of people with dementia and an emerging need for prompt diagnosis and treatment. But an accurate early, or timely, diagnosis of dementia with the use of daat analysis with close coordination with medical fraternity can help people access to treatments that can improve symptoms and slow down the progress of the disease, can\naccess to advice and support, have time to prepare for the future and plan ahead.\n\nSo, early detection of dementia is very crucial and it is the need of the hour.\n\n## Data Understanding\nThis dataset of a **Cross-sectional MRI Data** and **Longitudinal MRI data**.Cross-sectional data is a collection of 416 subjects aged 18 to 96. For each subject, 3 or 4 individual T1-weighted MRI scans obtained in single scan sessions are included. The subjects are all right-handed and include both men and women. 100 of the included subjects over the age of 60 have been clinically diagnosed with very mild to moderate Alzheimer\u2019s disease (AD). Additionally, a reliability data set is included containing 20 nondemented subjects imaged on a subsequent visit within 90 days of their initial session.\n\nLongitudinal data is a collection of 150 subjects aged 60 to 96. Each subject was scanned on two or more visits, separated by at least one year for a total of 373 imaging sessions. For each subject, 3 or 4 individual T1-weighted MRI scans obtained in single scan sessions are included. The subjects are all right-handed and include both men and women. 72 of the subjects were characterized as nondemented throughout the study. 64 of the included subjects were characterized as demented at the time of their initial visits and remained so for subsequent scans, including 51 individuals with mild to moderate Alzheimer\u2019s disease. Another 14 subjects were characterized as nondemented at the time of their initial visit and were subsequently characterized as demented at a later visit.\n\nAs I am working on only longitudinal data in this kernel so lets check out the attributes of longitudinal data\n\n### Attributes:\nIt consists of 15 attributes which are describes as follows :\n\n- **Subject.ID** - Unique Id of the patient\n- **MRI.ID** - Unique Id generated after conducting MRI on patient\n- **Group** - It is a group of Converted (Previously Normal but developed dimentia later),  Demented and  Nondemented (Normal Pateints)\n- **Visit** - Number of visit to detect dementia status\n- **MR.Delay** - Not Known\n\n**Demographics Info**\n\n- **M.F** - Gender\n- **Hand** - Handedness (actually all subjects were right-handed so I will drop this column)\n- **Age** - Age in years\n- **EDUC** - Years of education\n- **SES** - Socioeconomic status as assessed by the Hollingshead Index of Social Position and classified into categories from 1 (highest status) to 5 (lowest status)\n\n**Clinical Info**\n\n- **MMSE** - Mini-Mental State Examination score (range is from 0 = worst to 30 = best)\n- **CDR** - Clinical Dementia Rating (0 = no dementia, 0.5 = very mild AD, 1 = mild AD, 2 = moderate AD)\n\n**Derived anatomic volumes**\n\n- **eTIV** - Estimated total intracranial volume, mm3\n- **nWBV** - Normalized whole-brain volume, expressed as a percent of all voxels in the atlas-masked image that are labeled as gray or white matter by the automated tissue segmentation process\n- **ASF** - Atlas scaling factor (unitless). Computed scaling factor that transforms native-space brain and skull to the atlas target (i.e., the determinant of the transform matrix)\n\n## Analysis Approach\nMy analysis approach is divided into following steps:\n\n**1. Data Cleaning**\n\n**2. Univariate Analysis**\n\n**3. Bivariate Analysis**\n\n**4. Key Insights**","e42f39e3":"**Observation:**\n\nSame pattern observed in case of nWBV as the dementia level increases nWBV centered between 0.65 and 0.70.","b3b260aa":"Great!! so there no missing values now. lets move towards Univariate Analysis","805d78a7":"Age in this dataset is uniformly distributed ranging from 60 years to 98 years.","09fde0a7":"As we can see majority of the cases are Normal while very few cases are of Mild and Moderate dementia.\n\nNext we will analyse another feature named MMSE.","377e10aa":"## Multicollinearity","7522a6a3":"## Importing Essential Libraraies","c6f7d199":"# Key Insights:\n- Most of the cases of dementia observed in the age group of 70 - 80 years of Age.\n- Mens develop dementia at early age before 60 years while womens have tendency of dementia at later age of later than 60 years\n- In mens dementia starts at an education level of 4 years and most prevalent at education level of 12 years and 16 years and it can also extend upto more than 20 years of education level, while in womens dementia starts after 5 years of education level and most prevalent around 12 to 13 years of education level and it started to decrease as womens education level increase\n- Dementia is prevalent in Mens  having highest and lowest socio economic status while womens having medium socio economic status have higher dementia cases.\n- Lower values of ASF close to 1 corresponds to severe dementia cases.\n- Severe dementia is diagnosed after minnimum 3 number of visits. ","e387fee7":"### Missing value treatment","91b763ae":"Here, also there are majority of cases of normal cognitive impairment whereas very few cases of Mild, Moderate and Severe cognitive Impairment."}}