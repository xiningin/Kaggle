{"cell_type":{"5a9fd297":"code","35b91231":"code","16e6c45f":"code","9e1a9972":"code","85b98197":"code","e00cc802":"code","12cc7752":"code","4416b8fc":"code","b85aad08":"code","0716f14f":"code","a72aee05":"code","97a54947":"code","e1dbe63f":"code","f326c1ac":"code","72d70f12":"code","641ad87d":"code","c4a7837b":"code","5c3a5b0c":"code","7952ce17":"code","b2d322a6":"code","55ff6bff":"code","2d0bb3cc":"code","26076e0c":"code","d9ff3c8f":"code","1a8ca7dc":"code","493164dd":"code","d1176673":"code","876ff601":"code","f2ef585c":"code","0004fe97":"code","66ec13e3":"markdown","07d63f98":"markdown","b8364083":"markdown","cb916165":"markdown","1a702c3d":"markdown","13414fc2":"markdown","4776f08e":"markdown","33c816f8":"markdown","9c5d2f30":"markdown","8a132a74":"markdown","b09532dc":"markdown","0136e205":"markdown","f02bfbfc":"markdown","6ea7ac45":"markdown","4c7c491d":"markdown","a647b6f2":"markdown","577f4c06":"markdown","44bd7af4":"markdown","1067c8a2":"markdown","923094c1":"markdown","eec76e68":"markdown","7bed7904":"markdown","bb066b9d":"markdown","5d573ee9":"markdown","a95651ac":"markdown","5f5b91fb":"markdown","e3d9b976":"markdown","c7e3d1da":"markdown","f7195b37":"markdown","8f146146":"markdown","f38087ce":"markdown","059e346f":"markdown","06fa1bfa":"markdown","69bc24a3":"markdown"},"source":{"5a9fd297":"import pandas as pd\nimport numpy as np\nimport missingno as msno\nimport matplotlib.pyplot as plt\nimport seaborn as sns\nimport plotly.express as px\nimport plotly.graph_objects as go\nimport plotly.figure_factory as ff\nfrom plotly.colors import n_colors\nfrom plotly.subplots import make_subplots\nfrom wordcloud import WordCloud,STOPWORDS, ImageColorGenerator\nimport squarify as sq\nimport matplotlib.colors\nfrom PIL import Image\nimport requests\n","35b91231":"df = pd.read_csv('..\/input\/wine-reviews\/winemag-data-130k-v2.csv',index_col = 0)\n","16e6c45f":"# examine first 20 rows\ndf.head(20)","9e1a9972":"# Check data types \ndf.info()","85b98197":"df.isna().sum()\/df.shape[0]*100","e00cc802":"msno.bar(df, color = sns.color_palette('RdBu'))","12cc7752":"reviews = df.dropna(how = 'any',subset = ['country','price'])\nreviews","4416b8fc":"#confirm missing values has been dropped\nreviews[['country','price']].isna().sum()","b85aad08":"reviews.fillna('Unknown', inplace = True)\nreviews\n","0716f14f":"reviews.drop(['taster_twitter_handle'],axis = 1,inplace = True)\nreviews\n \n","a72aee05":"#Lets values counts on points\nreviews['points'].value_counts()","97a54947":"# Price of a wine\n\nreviews['price'].describe()","e1dbe63f":"# how many varieties of wine we have\nreviews['variety'].nunique()","f326c1ac":"# how often the country appears in a dataset\nreviews['country'].value_counts()","72d70f12":"#What are the minimum and maximum prices for each variety of wine?\n\ntop_varieties = reviews.groupby('variety')['price'].agg([min,max]).sort_values(by= 'max' ,ascending = False).reset_index()\ntop_varieties\n","641ad87d":"plt.figure(figsize = (15,10))\nax= sns.countplot(x = 'points',data = reviews,color = 'pink')\nplt.title('Points Count',fontsize=20)\nplt.xlabel(\"Points\")\n","c4a7837b":"plt.figure(figsize = (12,8))\nax = sns.boxplot(x = reviews['price'],orient = 'v')\nplt.title('Price Distribution',fontsize = 20)\nplt.ylabel('Price',fontsize = 20)","5c3a5b0c":"below200 = reviews[reviews['price']< 200]['price']\nplt.figure(figsize = (12,8))\nax = sns.distplot(below200,rug = True)\nplt.title('Wine price below 200',fontsize=25)\n\n","7952ce17":"reviews['country'].value_counts()[:10].plot(kind='bar',color = 'magenta',figsize=(10,10))\nplt.title(\"Top Ten Wine Producing Countries\",fontsize=25)\nplt.xlabel('Country' ,fontsize = 20)\n","b2d322a6":"top10 = reviews['country'].value_counts()[:10]\n\nplt.figure(figsize = (12,8))\ncmap = matplotlib.cm.Oranges\nnorm = matplotlib.colors.Normalize(vmin=0, vmax=15)\ncolors = [cmap(norm(value)) for value in range(10)]\nnp.random.shuffle(colors)\n\nsq.plot(sizes =top10, label=top10.index, color = colors)\nplt.title('Top Ten Countries',fontsize = 20)","55ff6bff":"plt.figure(figsize = (15,10))\nax = sns.scatterplot(x = 'price',y = 'points',data = reviews, alpha = 0.6, color = 'green')\nplt.title('Points and Price Comparision',fontsize=25)","2d0bb3cc":"below200 = reviews[reviews['price']< 200].sample(500)\n\nplt.figure(figsize = (12,8))\nax = sns.scatterplot(x = 'price',y = 'points',data = below200, alpha = 0.6, color = 'purple')\nplt.title('Wine price vs points- Below $200',fontsize =25)\nplt.xlabel('Price', fontsize = 25)\nplt.ylabel('Points', fontsize = 25)\n","26076e0c":"#Expensive wines by country top 20\nexp_wine = reviews.groupby('country')['price'].max().sort_values(ascending = False)[:20].reset_index()\n\nplt.figure(figsize= (10,12))\nax = sns.barplot('country', 'price',data = exp_wine,dodge = False,palette ='ocean')\nplt.title('Most Expensive Wine by Country- Top 20',fontsize = 25)\nplt.xlabel('Country', fontsize = 25)\nplt.ylabel('Price', fontsize = 25)\nplt.xticks(rotation = 90,size = 12)\nplt.yticks(size = 15)\n\n\n","d9ff3c8f":"plt.figure(figsize = (12,8))\nax = sns.barplot(x = 'max',y = 'variety',data = top_varieties[:20],hue = 'max',dodge = False, palette = 'RdPu')\nplt.ylabel('Variety',fontsize = 25)\nplt.xlabel('Price',fontsize = 25)\nplt.title('Top variety wine(by price)- Top 20', fontsize = 20)\n\n           \n    ","1a8ca7dc":"province = reviews['province'].value_counts()[:20]\n\nsns.set_style('darkgrid')\nplt.figure(figsize=(14,15))\nax = sns.countplot(x ='province',data = reviews.loc[(reviews['province'].isin(province.index.values))],palette ='CMRmap',order = province.index)\nplt.xticks(rotation = 90,size = 12)\nplt.yticks(size = 12)\nplt.xlabel('Province',fontsize = 25)\nplt.title('Province of Wine Origin- Top 20',fontsize =25)\nplt.ylabel('Number Counts', fontsize = 25)\n\n\n\n\n\n","493164dd":"stopwords = set(STOPWORDS)\n\nwordcloud = WordCloud(background_color = \"white\",stopwords = stopwords,max_words = 300,max_font_size = 200,\n                     random_state = 42,).generate(\"\".join(reviews['description'].astype(str)))\n\nprint(wordcloud)\nplt.figure(figsize = (15,15))\nplt.imshow(wordcloud)\nplt.axis('off')\nplt.title('Word Cloud of Description',fontsize=25)","d1176673":"stopwords = set(STOPWORDS)\n\nvariety =  \" \".join(review for review in reviews['variety'])\n\nwordcloud = WordCloud(background_color = \"white\",stopwords = stopwords,max_words = 300,max_font_size = 200,\n                     random_state = 42,).generate(variety)\n\nprint(wordcloud)\nplt.figure(figsize = (15,15))\nplt.imshow(wordcloud)\nplt.axis('off')\nplt.title('Word Cloud of Variety',fontsize=25)","876ff601":"stopwords = set(STOPWORDS)\n\nUS = reviews[reviews['country']== 'US']\n\n\nwordcloud = WordCloud(background_color = \"white\",stopwords = stopwords,max_words = 500,max_font_size = 200,\n                     random_state = 42,).generate(\"\".join(US['description'].astype(str)))\n\nplt.figure(figsize = (15,15))\nplt.imshow(wordcloud)\nplt.axis('off')\nplt.title('USA - Word Cloud of Description',fontsize=20)","f2ef585c":"stopwords = set(STOPWORDS)\n\nItaly = reviews[reviews['country']== 'Italy']\n\nwordcloud = WordCloud(background_color = \"white\",stopwords = stopwords,max_words = 500,max_font_size = 200,\n                     random_state = 42,).generate(\"\".join(Italy['description'].astype(str)))\n\nplt.figure(figsize = (15,15))\nplt.imshow(wordcloud)\nplt.axis('off')\nplt.title('Italy - Word Cloud of Description',fontsize=20)","0004fe97":"stopwords = set(STOPWORDS)\n\nFrance = reviews[reviews['country']== 'France']\nFrance\n\nwordcloud = WordCloud(background_color = \"white\",stopwords = stopwords,max_words = 300,max_font_size = 200,\n                     random_state = 42,).generate(\"\".join(France['description'].astype(str)))\n\nplt.figure(figsize = (15,15))\nplt.imshow(wordcloud)\nplt.axis('off')\nplt.title('France - Word Cloud of Description',fontsize=20)","66ec13e3":"#  Does expensive wines have high points","07d63f98":"Most wines are of 88 points","b8364083":"# USA Description Word Cloud Generation","cb916165":"# Inspect the Dataset","1a702c3d":"# Import necessary libraries","13414fc2":"# Drop Columns\nDrop taster_twitter_handle column. This column does not add value to analysis and visualization","4776f08e":"We have 692 varieties of wine","33c816f8":"The most expensive wine we have on a dataset is 3300 and cheapest one is 4","9c5d2f30":"#                            WINE REVIEW DATA ANALYSIS AND VISUALIZATION\n![Wine.jpeg](attachment:Wine.jpeg)","8a132a74":"# Visualize Missing value\n","b09532dc":"# Word Cloud","0136e205":"#  Distribution of price for wines that cost less than 200 dollars","f02bfbfc":"# Analyze the DataFrame","6ea7ac45":"designation,region_1, region_2, taster_name, taster_twitter_handle columns has most of the missing values.we can safely drop the missing values from country and price column since the percent of missing values  is mimimal. We will leave rest of the column with missing values.","4c7c491d":"# Italy- Description Word Cloud genaration","a647b6f2":"# Fill NAN with Unknown\n\t","577f4c06":"Most wines are priced less than 100","44bd7af4":"# Top ten wine producing countries","1067c8a2":"# Origin of wine(by province)- Top 20","923094c1":"This plot shows us that price and points are weekly correlated. The first plot was overplotted so we could not see these trends. To visualize the actual trend we had to take only few sample from the actual data","eec76e68":"# Data Visualization\npoints count distribution","7bed7904":"# Load and read the data","bb066b9d":"Surprisingly Italy is behind US and France as biggest wine producers","5d573ee9":"# France Description Word Cloud Generation","a95651ac":"It looks like a normal distribution.Most of the wines fall between 84 to 92 points","5f5b91fb":"# Expensive Wines by Country- Top 20","e3d9b976":"There does not seem to be any strong relationship between points and price. But, before making this conclusion let us plot same graph with a filtered data.\n","c7e3d1da":"# Top 20 varieties wine per price\n","f7195b37":"United States appears most followed by France and Italy","8f146146":"# Drop missing values from country and price column","f38087ce":"#  Distribution of Wine Price","059e346f":"Most wine are below 500. There is also a wine that cost more than 3000 dollars","06fa1bfa":"# Tree Map of Top Countries","69bc24a3":"# Handling Missing Values\nCalculate the percent of missing values"}}