{"cell_type":{"86246f29":"code","230551c7":"code","84217638":"code","1516b6dc":"code","fb03701c":"code","c52d466f":"code","6b4de1ed":"code","874b1896":"code","75b20a32":"code","0fb5c91b":"code","0a8fbc5a":"code","fd888299":"code","39fdc56a":"code","b94dcc66":"code","35bbc019":"code","cdf1ff5e":"code","f3214080":"code","cf241eda":"code","02c218ef":"code","0b31ab97":"code","6932e1c4":"code","87333e7d":"code","0d90e935":"code","ade7804f":"code","2fff0d45":"code","a73aa3b8":"code","9f8a4595":"code","555434c8":"code","de709e02":"code","40b473c4":"code","0eaebd1e":"code","b6d6f077":"code","06588406":"code","839dadc6":"code","4a0b0c09":"code","a22fcda9":"code","3e9bc150":"code","accf33fe":"code","4aebf018":"code","2f97b38c":"code","e26100d6":"code","d173fe7e":"code","bcccf59d":"code","382aee8f":"code","39ac8707":"code","0030544a":"code","7df6505d":"code","c7e7ec4f":"code","9fddbada":"code","c20ee9e5":"code","b0d0f38b":"code","b6b2585d":"code","82bd63a6":"code","bf1dbec2":"code","8564f848":"code","cba26de3":"code","6916739c":"code","b70bf8a2":"code","4b553961":"code","58967d94":"code","eccd05b0":"code","b19e10e2":"code","d386ab10":"code","602db119":"code","240a1fa8":"code","e16400ac":"code","368c4fd6":"code","22c7ce03":"code","46b453b9":"code","dbd62520":"code","4ec4fa1b":"code","be22e6ee":"code","bf771bbf":"code","bd28f049":"code","c4a8cbdf":"code","191ed7a0":"markdown","06dde228":"markdown","dcf91897":"markdown","a646def2":"markdown","2413302c":"markdown","e8e22074":"markdown","e2192ef3":"markdown","4bc00f50":"markdown","4a7b6030":"markdown","8ee9774d":"markdown","37d92663":"markdown","70bf332d":"markdown","a312d502":"markdown","5439aff6":"markdown","c9ee82e2":"markdown","eeeebf67":"markdown","bc0a2906":"markdown","da687bdc":"markdown","f6955fd3":"markdown","340cd9de":"markdown","d9266cbf":"markdown","0a881ab2":"markdown","8008572c":"markdown","1ca4ff80":"markdown","27dd5f49":"markdown","eaba2169":"markdown","5d5bc19f":"markdown","167d4b5c":"markdown","9d0e2076":"markdown","8b8904b5":"markdown","7dcedd0c":"markdown","b2464c1c":"markdown","251601d6":"markdown","aeb71def":"markdown","9dfe4d78":"markdown","3cd60b18":"markdown","3d83afe2":"markdown","568b92c1":"markdown","d55ab8eb":"markdown","6f58a58f":"markdown","63c51f81":"markdown","aa557d64":"markdown","7e005387":"markdown","9815222c":"markdown","f349e374":"markdown","b516263b":"markdown","a044b102":"markdown","c8038ea7":"markdown","30b38bd5":"markdown"},"source":{"86246f29":"import seaborn as sns\nimport pandas as pd\nimport numpy as np\n%matplotlib inline\nimport matplotlib.pyplot as plt","230551c7":"df =pd.read_csv(\"\/kaggle\/input\/portuguesebankidirectmarkcampaignsphonecalls\/bank-full2.csv\")","84217638":"df.head()","1516b6dc":"df.info()","fb03701c":"df.describe()","c52d466f":"df['y'].value_counts()","6b4de1ed":"df['y'].value_counts(normalize=True)","874b1896":"df2=df.copy()","75b20a32":"df['y']=df['y'].map({'no':0,'yes':1})","0fb5c91b":"df.head()","0a8fbc5a":"df.isnull().sum()","fd888299":"cat_col = df.select_dtypes('object').columns","39fdc56a":"cat_col","b94dcc66":"for i in cat_col:\n    \n    print(\"Feature : \",i)\n    print(df[i].value_counts(normalize=True))\n    print(\"\\n\")","35bbc019":"df['poutcome'].value_counts(normalize=True)","cdf1ff5e":"df[df['poutcome']=='unknown'][['pdays','poutcome']]","f3214080":"df[(df['poutcome']=='unknown') & (df['pdays']!=-1)][['pdays','poutcome']]","cf241eda":"df[df['pdays']==-1].shape","02c218ef":"df[(df['poutcome']=='unknown') & (df['pdays']==-1)].shape","0b31ab97":"df.loc[(df['poutcome']=='unknown') & (df['pdays']==-1),'poutcome'] = 'not_contacted_prev'","6932e1c4":"df[(df['poutcome']=='not_contacted_prev') & (df['pdays']==-1)].shape","87333e7d":"df[df['poutcome']=='other']","0d90e935":"df[(df['poutcome']=='other') & (df['pdays']==-1)]","ade7804f":"print(\"Analysis of feature : 'Poutcome'\")\nfig, ax1 = plt.subplots(1,2,figsize=(15,5))\nsns.countplot(y='poutcome',order=df['poutcome'].value_counts().index,data=df,ax=ax1[0])\nprop_df = (df['y'].groupby(df['poutcome']).value_counts(normalize=True).mul(100).rename('Percentage').reset_index())\nsns.barplot(y='poutcome',x='Percentage',hue='y',data=prop_df,order=df['poutcome'].value_counts().index,ax=ax1[1])\nax1[1].set(xticks = np.array(range(0,100,5)))\nplt.show()","2fff0d45":"prop_df","a73aa3b8":"fig, ax1 = plt.subplots(1,2,figsize=(15,7))\nsns.countplot(x='poutcome',data=df,hue='y',ax=ax1[0])\nprop_df = (df['poutcome'].groupby(df['y']).value_counts().rename('Values').reset_index())\nprop_df = prop_df[prop_df['y']==1]\nplt.pie(prop_df['Values'],labels=prop_df['poutcome'],autopct='%1.1f%%')\nax1[1].set_title(\"Percentage of each category out of Subcribed people\")\nplt.show()","9f8a4595":"df['job'].value_counts(normalize=True)","555434c8":"df[df['job']=='unknown'].shape","de709e02":"df[(df['job']=='unknown') & (df['pdays']==-1)].shape","40b473c4":"print(\"Analysis of feature : 'Job'\")\nfig, ax1 = plt.subplots(1,2,figsize=(15,5))\nsns.countplot(y='job',order=df['job'].value_counts().index,data=df,ax=ax1[0])\nprop_df = (df['y'].groupby(df['job']).value_counts(normalize=True).mul(100).rename('Percentage').reset_index())\nsns.barplot(y='job',x='Percentage',hue='y',data=prop_df,order=df['job'].value_counts().index,ax=ax1[1])\nax1[1].set(xticks = np.array(range(0,100,5)))\nplt.show()","0eaebd1e":"prop_df[prop_df['y']==1].sort_values(by='Percentage',ascending=False)","b6d6f077":"fig, ax1 = plt.subplots(1,2,figsize=(15,7))\nsns.countplot(y='job',data=df,hue='y',order=df['job'].value_counts().index,ax=ax1[0])\nprop_df = (df['job'].groupby(df['y']).value_counts().rename('Values').reset_index())\nprop_df = prop_df[prop_df['y']==1]\nplt.pie(prop_df['Values'],labels=prop_df['job'],autopct='%1.1f%%')\nax1[1].set_title(\"Percentage of each category out of Subcribed people\")\nplt.show()","06588406":"df['education'].value_counts(normalize=True)","839dadc6":"df[df['education']=='unknown'].shape","4a0b0c09":"df[(df['education']=='unknown') & (df['pdays']==-1)].shape","a22fcda9":"print(\"Analysis of feature : 'Education'\")\nfig, ax1 = plt.subplots(1,2,figsize=(15,5))\nsns.countplot(y='education',order=df['education'].value_counts().index,data=df,ax=ax1[0])\nprop_df = (df['y'].groupby(df['education']).value_counts(normalize=True).mul(100).rename('Percentage').reset_index())\nsns.barplot(y='education',x='Percentage',hue='y',data=prop_df,order=df['education'].value_counts().index,ax=ax1[1])\nax1[1].set(xticks = np.array(range(0,100,5)))\nplt.show()","3e9bc150":"prop_df[prop_df['y']==1].sort_values(by='Percentage',ascending=False)","accf33fe":"fig, ax1 = plt.subplots(1,2,figsize=(15,7))\nsns.countplot(y='education',data=df,hue='y',order=df['education'].value_counts().index,ax=ax1[0])\nprop_df = (df['education'].groupby(df['y']).value_counts().rename('Values').reset_index())\nprop_df = prop_df[prop_df['y']==1]\nplt.pie(prop_df['Values'],labels=prop_df['education'],autopct='%1.1f%%')\nax1[1].set_title(\"Percentage of each category out of Subcribed people\")\nplt.show()","4aebf018":"df['marital'].value_counts(normalize=True)","2f97b38c":"print(\"Analysis of feature : 'Marital'\")\nfig, ax1 = plt.subplots(1,2,figsize=(15,5))\nsns.countplot(y='marital',order=df['marital'].value_counts().index,data=df,ax=ax1[0])\nprop_df = (df['y'].groupby(df['marital']).value_counts(normalize=True).mul(100).rename('Percentage').reset_index())\nsns.barplot(y='marital',x='Percentage',hue='y',data=prop_df,order=df['marital'].value_counts().index,ax=ax1[1])\nax1[1].set(xticks = np.array(range(0,100,5)))\nplt.show()","e26100d6":"prop_df[prop_df['y']==1].sort_values(by='Percentage',ascending=False)","d173fe7e":"fig, ax1 = plt.subplots(1,2,figsize=(15,7))\nsns.countplot(y='marital',data=df,hue='y',order=df['marital'].value_counts().index,ax=ax1[0])\nprop_df = (df['marital'].groupby(df['y']).value_counts().rename('Values').reset_index())\nprop_df = prop_df[prop_df['y']==1]\nplt.pie(prop_df['Values'],labels=prop_df['marital'],autopct='%1.1f%%')\nax1[1].set_title(\"Percentage of each category out of Subcribed people\")\nplt.show()","bcccf59d":"df['default'].value_counts(normalize=True)","382aee8f":"print(\"Analysis of feature : 'Default'\")\nfig, ax1 = plt.subplots(1,2,figsize=(15,5))\nsns.countplot(y='default',order=df['default'].value_counts().index,data=df,ax=ax1[0])\nprop_df = (df['y'].groupby(df['default']).value_counts(normalize=True).mul(100).rename('Percentage').reset_index())\nsns.barplot(y='default',x='Percentage',hue='y',data=prop_df,order=df['default'].value_counts().index,ax=ax1[1])\nax1[1].set(xticks = np.array(range(0,100,5)))\nplt.show()","39ac8707":"prop_df[prop_df['y']==1].sort_values(by='Percentage',ascending=False)","0030544a":"fig, ax1 = plt.subplots(1,2,figsize=(15,7))\nsns.countplot(y='default',data=df,hue='y',order=df['default'].value_counts().index,ax=ax1[0])\nprop_df = (df['default'].groupby(df['y']).value_counts().rename('Values').reset_index())\nprop_df = prop_df[prop_df['y']==1]\nplt.pie(prop_df['Values'],labels=prop_df['default'],autopct='%1.1f%%')\nax1[1].set_title(\"Percentage of each category out of Subcribed people\")\nplt.show()","7df6505d":"df['housing'].value_counts(normalize=True)","c7e7ec4f":"print(\"Analysis of feature : 'Housing'\")\nfig, ax1 = plt.subplots(1,2,figsize=(15,5))\nsns.countplot(y='housing',order=df['housing'].value_counts().index,data=df,ax=ax1[0])\nprop_df = (df['y'].groupby(df['housing']).value_counts(normalize=True).mul(100).rename('Percentage').reset_index())\nsns.barplot(y='housing',x='Percentage',hue='y',data=prop_df,order=df['housing'].value_counts().index,ax=ax1[1])\nax1[1].set(xticks = np.array(range(0,100,5)))\nplt.show()","9fddbada":"prop_df[prop_df['y']==1].sort_values(by='Percentage',ascending=False)","c20ee9e5":"fig, ax1 = plt.subplots(1,2,figsize=(15,7))\nsns.countplot(y='housing',data=df,hue='y',order=df['housing'].value_counts().index,ax=ax1[0])\nprop_df = (df['housing'].groupby(df['y']).value_counts().rename('Values').reset_index())\nprop_df = prop_df[prop_df['y']==1]\nplt.pie(prop_df['Values'],labels=prop_df['housing'],autopct='%1.1f%%')\nax1[1].set_title(\"Percentage of each category out of Subcribed people\")\nplt.show()","b0d0f38b":"df['housing'].value_counts(normalize=True)","b6b2585d":"print(\"Analysis of feature : 'Housing'\")\nfig, ax1 = plt.subplots(1,2,figsize=(15,5))\nsns.countplot(y='housing',order=df['housing'].value_counts().index,data=df,ax=ax1[0])\nprop_df = (df['y'].groupby(df['housing']).value_counts(normalize=True).mul(100).rename('Percentage').reset_index())\nsns.barplot(y='housing',x='Percentage',hue='y',data=prop_df,order=df['housing'].value_counts().index,ax=ax1[1])\nax1[1].set(xticks = np.array(range(0,100,5)))\nplt.show()","82bd63a6":"prop_df[prop_df['y']==1].sort_values(by='Percentage',ascending=False)","bf1dbec2":"fig, ax1 = plt.subplots(1,2,figsize=(15,7))\nsns.countplot(y='housing',data=df,hue='y',order=df['housing'].value_counts().index,ax=ax1[0])\nprop_df = (df['housing'].groupby(df['y']).value_counts().rename('Values').reset_index())\nprop_df = prop_df[prop_df['y']==1]\nplt.pie(prop_df['Values'],labels=prop_df['housing'],autopct='%1.1f%%')\nax1[1].set_title(\"Percentage of each category out of Subcribed people\")\nplt.show()","8564f848":"cat_col","cba26de3":"df[df['education']=='unknown'].shape","6916739c":"df[(df['education']=='unknown') & (df['pdays']==-1)].shape","b70bf8a2":"df[df['contact']=='unknown'].shape","4b553961":"df[(df['contact']=='unknown') & (df['pdays']==-1)].shape","58967d94":"num_cols = df.select_dtypes('int64').columns","eccd05b0":"for i in num_cols:\n    sns.boxplot(y=i,data = df)\n    plt.show()","b19e10e2":"for i in num_cols:\n    sns.boxplot(y='age',x='y',data = df)\n    plt.show()","d386ab10":"#df_log = df[num_cols]\n#df_log.apply(np.log)","602db119":"sns.pairplot(df2)","240a1fa8":"sns.pairplot(df2,hue='y')","e16400ac":"df2.corr()","368c4fd6":"for i in num_cols:\n    sns.barplot(x='y',y=i,data = df)\n    plt.show()","22c7ce03":"df0=df[df['y']=='no']\ndf1=df[df['y']=='yes']","46b453b9":"for i in num_cols:\n    sns.distplot(df0[i])\n    sns.distplot(df1[i])\n    plt.show()","dbd62520":"cat_col1 = df2.select_dtypes('object').columns\ncat_col1","4ec4fa1b":"df2['prev_contacted'] = list(map(lambda x : 'Yes' if x != -1 else 'No',df2['pdays']))","be22e6ee":"df2[df2['prev_contacted']=='Yes']","bf771bbf":"#fig, ax1 = plt.subplots(figsize=(15,5))\n#plt.figure(figsize=(15,5))\n\nfor col in cat_col1:\n    print(\"Analysis of feature : \",col)\n    fig, ax1 = plt.subplots(1,2,figsize=(15,5))\n    #sns.countplot(y=col,order=df[col].value_counts().index,hue='y',data=df,ax=ax1[0])\n    sns.countplot(y=col,order=df2[col].value_counts().index,data=df2,ax=ax1[0])\n    prop_df = (df2['y'].groupby(df2[col]).value_counts(normalize=True).mul(100).rename('Percentage').reset_index())\n    sns.barplot(y=col,x='Percentage',hue='y',data=prop_df,order=df2[col].value_counts().index,ax=ax1[1])\n    ax1[1].set(xticks = np.array(range(0,100,5)))\n    plt.show()","bd28f049":"for col in cat_col1:\n    print(\"Analysis of feature : \",col)\n    print(df2.groupby(col)['y'].value_counts(normalize=True))","c4a8cbdf":"df[df['campaign']==0]","191ed7a0":"Students and retired customers are more likely to subscribe to the term deposit compared to other job categories.\n\nThese customers can be targeted more to increase the rate of subscription.","06dde228":"Out of the subscribed customers, most customers have secondary level of education followed by teritiary.","dcf91897":"### 3. Education","a646def2":"Out of the subscribed customers, most customers do not have any credits in default.","2413302c":"Most of the records with 'unkowns' as a category in the features - job, education,contact and poutcome are data of people who haven't been contacted in the previous campaign.","e8e22074":"36954 people were not previously contacted before this campaign, so for these records, poutcome can be changed from unknown to 'not_contacted_prev'\n\n5 records present where they were contacted previously , but we do not have outcome of the same. (pdays != -1 and poutcome is unknown)","e2192ef3":"Out of the subscribed customers, most customers do not have housing loans.","4bc00f50":"### Distributions","4a7b6030":"Job:- Most contacted - Blue collar, campaign successful mostly among students followed by retired people.\n\nMarital- Most contacted - Married, campaign successful mostly among single people.\n\nEducation - Most contacted - Secondary, campaign successful mostly among people with teritiary education.\n\nDefault - Most contacted - people with no defaults, campaign successful mostly among people with no defaults\n\nHousing - Most contacted - people who have taken housing loans, campaign successful mostly among people who have not taken housing loans\n\nLoan - Most contacted - people who have taken housing loans, campaign successful mostly among people who have not taken housing loans\n\nContact - Most contacted - Cellular, campaign successful in similar rates among people contacted through telephone as well as cellular.\n\nMonth -  Most contacted - May, campaign successful mostly among people contacted during the months March, December, September and October.","8ee9774d":"### Missing\/Unknown Values ","37d92663":"All are contacted during the current campaign. ","70bf332d":"55.5% of the customers have taken housing loans while the other 45.5% do not have any housing loans in their name.","a312d502":"There are 1857 'unknown' values(4.1%) present in the field 'education'. Out of which the majority of the records (1534) are of people who were not contacted in the previous campaign.","5439aff6":"There are 12 categories present in the job feature, in which one is 'unknown'.\n\nBlue collar jobs followed by management jobs and technician jobs are most common in the dataset.","c9ee82e2":"### 7. Loan","eeeebf67":"There are no 'Nan' or Null values in the dataset, let's look into each variable to get better insights about the data.","bc0a2906":"Out of the subscribed customers, most common jobs are 'management' followed by 'technician' and 'blue collar' jobs.","da687bdc":"### Target Variable Value Counts","f6955fd3":"### 4. Marital","340cd9de":"The customers who do not have any credits in default, has a slightly higher chances of subscription of the term deposit compared to customers who have credits in default.","d9266cbf":"As we have limited domain knowledge about what 'others' signify in poutcome, let us keep it as it is and assume that these were people who did not take a decision to either subscribe or not for the previous campaign.","0a881ab2":"The customers who do not have a housing loan has a slightly higher chances of subscription of the term deposit compared to customers who already have a housing loan.","8008572c":"### Outliers","1ca4ff80":"Majority of the people have not been contacted in the previous campaign for term deposit.\n\nThe people who have subscribed for a term deposit in the previous campaign has 65% chances of subscribing it again in the current campaign. These customers can be targeted more to increase the rate of subscription.","27dd5f49":"55.5% of the customers have taken housing loans while the other 45.5% do not have any housing loans in their name.","eaba2169":"The customers who are single has a slightly higher chances of subscription of the term deposit compared to customers who are married or divorced.","5d5bc19f":"There are 4 categories present in the education feature, in which one is 'unknown'.\n\n51% of the customers are having secondary education.","167d4b5c":"### Analysing Categorical Variables","9d0e2076":"The customers who do not have a housing loan has a slightly higher chances of subscription of the term deposit compared to customers who already have a housing loan.","8b8904b5":"### Correlations","7dcedd0c":"### 5. Default","b2464c1c":"### The data is related with direct marketing campaigns of a Portuguese banking institution. The marketing campaigns were based on phone calls. Often, more than one contact to the same client was required, in order to access if the product (bank term deposit) would be (or not) subscribed. \n \n \n#### A term deposit is a fixed-term investment that includes the deposit of money into an account at a financial institution. Term deposit investments usually carry short-term maturities ranging from one month to a few years and will have varying levels of required minimum deposits","251601d6":"All numerical variables have high outliers.","aeb71def":"About 82% of the data is 'unknown'","9dfe4d78":"Out of the subscribed customers, most customers do not have housing loans.","3cd60b18":"98 % of the customers are do not have any credit in default.","3d83afe2":"### Numerical Variable analysis","568b92c1":"### 6. Housing","d55ab8eb":"Balance, duration,campaign, pdays, previous are having considerable difference in both classes.","6f58a58f":"88 % of the data is of people who haven't subsribed to the term deposit and around 12 % is of those who subscribed.","63c51f81":"### 2. Job","aa557d64":"Out of the subscribed people, most of the people are not contacted in the previous campaign, followed by people who subscribed for term deposit inthe previous campaign.","7e005387":"There are 3 categories present in the marital feature.\n\n60% of the customers are married.","9815222c":"#### 1. Poutcome","f349e374":"No considerable correlations present between features","b516263b":"Unknowns present in job, education,contact and poutcome","a044b102":"Out of the subscribed customers, most customers are married followed by single customers.","c8038ea7":"The customers with teritiary level of education has slightly higher chances of subscription of the term deposit, compared to other education levels.","30b38bd5":"There are 288 'unknown' values(0.637%) present in the field 'job'. Out of which the majority of the records (255) are of people who were not contacted in the previous campaign."}}