{"cell_type":{"32cdcc13":"code","feddd0db":"code","bc370e9c":"code","93334816":"code","71456fe0":"code","b478b7bd":"code","22de9bdd":"code","6ed89676":"code","feb3029a":"code","8f4fc43c":"code","e7844325":"code","0d15d819":"code","7e019b21":"code","2e13c9d3":"code","b2e5a21e":"code","e14be52e":"code","9e847a04":"code","68d48123":"code","7df76457":"code","a548f3e5":"code","93be5408":"code","a5b49d00":"code","2c4560d8":"code","fb24c59e":"code","044c735a":"code","764b2994":"code","2837b4be":"code","ac14a265":"code","0f9fd64f":"code","9a2a7ad7":"code","42bd58ab":"code","e3306613":"code","b294aa57":"code","c993959b":"code","527915f2":"code","689e0a93":"code","e1243fbe":"code","d101c849":"code","ee233134":"code","3bb919ed":"code","b1d12767":"code","31292203":"code","5e86e480":"code","d71c18f8":"code","9097f481":"code","6c1a7853":"code","0e8843b5":"markdown","e5e3b50c":"markdown","c2cfc6b2":"markdown","e3d220f5":"markdown","86562a8d":"markdown","3b4fc712":"markdown","a965509a":"markdown"},"source":{"32cdcc13":"# This Python 3 environment comes with many helpful analytics libraries installed\n# It is defined by the kaggle\/python Docker image: https:\/\/github.com\/kaggle\/docker-python\n# For example, here's several helpful packages to load\n\nimport numpy as np # linear algebra\nimport pandas as pd # data processing, CSV file I\/O (e.g. pd.read_csv)\nimport matplotlib.pyplot as plt\nimport seaborn as sns\nimport plotly.offline as py\nimport plotly.graph_objs as go\nimport plotly.offline as py\nimport plotly.express as px\n\n# Input data files are available in the read-only \"..\/input\/\" directory\n# For example, running this (by clicking run or pressing Shift+Enter) will list all files under the input directory\n\nimport os\nfor dirname, _, filenames in os.walk('\/kaggle\/input'):\n    for filename in filenames:\n        print(os.path.join(dirname, filename))\n\n# You can write up to 20GB to the current directory (\/kaggle\/working\/) that gets preserved as output when you create a version using \"Save & Run All\" \n# You can also write temporary files to \/kaggle\/temp\/, but they won't be saved outside of the current session","feddd0db":"df = pd.read_csv('..\/input\/hackathon\/BCG_COVID-19_clinical_trials-2020_11_11.csv', encoding='ISO-8859-2')\ndf.head()","bc370e9c":"##Code by Taha07  https:\/\/www.kaggle.com\/taha07\/data-scientists-jobs-analysis-visualization\/notebook\n\nfrom wordcloud import WordCloud\nfrom wordcloud import STOPWORDS\nstopwords = set(STOPWORDS)\nwordcloud = WordCloud(background_color = 'black',\n                      height =2000,\n                      width = 2000\n                     ).generate(str(df[\"Trial Done by\"]))\nplt.rcParams['figure.figsize'] = (12,12)\nplt.axis(\"off\")\nplt.imshow(wordcloud)\nplt.title(\"Clinical Trials done by \")\nplt.show()","93334816":"##Code by Taha07  https:\/\/www.kaggle.com\/taha07\/data-scientists-jobs-analysis-visualization\/notebook\n\nfrom wordcloud import WordCloud\nfrom wordcloud import STOPWORDS\nstopwords = set(STOPWORDS)\nwordcloud = WordCloud(background_color = 'white',\n                      colormap='GnBu',\n                      height =2000,\n                      width = 2000\n                     ).generate(str(df[\"participants segment\"]))\nplt.rcParams['figure.figsize'] = (12,12)\nplt.axis(\"off\")\nplt.imshow(wordcloud)\nplt.title(\"Clinical Trials Participants Segment\")\nplt.show()","71456fe0":"df.isnull().sum()","b478b7bd":"# categorical features with missing values\ncategorical_nan = [feature for feature in df.columns if df[feature].isna().sum()>0 and df[feature].dtypes=='O']\nprint(categorical_nan)","22de9bdd":"# replacing missing values in categorical features\nfor feature in categorical_nan:\n    df[feature] = df[feature].fillna('None')","6ed89676":"df[categorical_nan].isna().sum()","feb3029a":"# Lets first handle numerical features with nan value\nnumerical_nan = [feature for feature in df.columns if df[feature].isna().sum()>1 and df[feature].dtypes!='O']\nnumerical_nan","8f4fc43c":"df[numerical_nan].isna().sum()","e7844325":"## Replacing the numerical Missing Values\n\nfor feature in numerical_nan:\n    ## We will replace by using median since there are outliers\n    median_value=df[feature].median()\n    \n    df[feature].fillna(median_value,inplace=True)\n    \ndf[numerical_nan].isnull().sum()","0d15d819":"#Code from Gabriel Preda\n#plt.style.use('dark_background')\ndef plot_count(feature, title, df, size=1):\n    f, ax = plt.subplots(1,1, figsize=(4*size,4))\n    total = float(len(df))\n    g = sns.countplot(df[feature], order = df[feature].value_counts().index[:20], palette= ('#32a852', '#a84e32', '#3242a8'))\n    g.set_title(\"Number and percentage of {}\".format(title))\n    if(size > 2):\n        plt.xticks(rotation=90, size=8)\n    for p in ax.patches:\n        height = p.get_height()\n        ax.text(p.get_x()+p.get_width()\/2.,\n                height + 3,\n                '{:1.2f}%'.format(100*height\/total),\n                ha=\"center\") \n    plt.show()","7e019b21":"plot_count(\"Target Sample Size\", \"Target Sample Size\", df,4)","2e13c9d3":"#Code by Taha07  https:\/\/www.kaggle.com\/taha07\/data-scientists-jobs-analysis-visualization\/notebook\n\ncolor = plt.cm.Pastel1(np.linspace(0,1,20))\ndf[\"Target Sample Size\"].value_counts().sort_values(ascending=False).head(10).plot.pie(y=\"Status\",colors=color,autopct=\"%0.1f%%\")\nplt.title(\"Target Sample Size\")\nplt.axis(\"off\")\nplt.show()","b2e5a21e":"ax = df['Target Sample Size'].value_counts().plot.barh(figsize=(14, 6), color='orange')\nax.set_title('Target Sample Size Distribution',color='green', size=18)\nax.set_ylabel('Target Sample Size', size=14)\nax.set_xlabel('Count', size=14)","e14be52e":"plot_count(\"Strain\", \"Strain\", df,4)","9e847a04":"#Code by Taha07  https:\/\/www.kaggle.com\/taha07\/data-scientists-jobs-analysis-visualization\/notebook\n\ncolor = plt.cm.Pastel1(np.linspace(0,1,20))\ndf[\"Strain\"].value_counts().sort_values(ascending=False).head(10).plot.pie(y=\"Status\",colors=color,autopct=\"%0.1f%%\")\nplt.title(\"Strain of Clinical Trials\")\nplt.axis(\"off\")\nplt.show()","68d48123":"ax = df['Strain'].head(20).value_counts().plot.barh(figsize=(20, 10), color='green')\nax.set_title('Strain', size=18, color='orange')\nax.set_ylabel('Strain', size=10)\nax.set_xlabel('Count', size=10)","7df76457":"#Code by Taha07  https:\/\/www.kaggle.com\/taha07\/data-scientists-jobs-analysis-visualization\/notebook\n\ncolor = plt.cm.Pastel1(np.linspace(0,1,20))\ndf[\"Trial Done by\"].value_counts().sort_values(ascending=False).head(10).plot.pie(y=\"Status\",colors=color,autopct=\"%0.1f%%\")\nplt.title(\"Clinical Trials done by\")\nplt.axis(\"off\")\nplt.show()","a548f3e5":"plot_count(\"Trial Done by\", \"Trial Done by\", df,4)","93be5408":"ax = df['Trial Done by'].head(15).value_counts().plot.barh(figsize=(20, 10), color='red')\nax.set_title('Trial Done by', size=18, color='blue')\nax.set_ylabel('Trial Done by', size=10)\nax.set_xlabel('Count', size=10)","a5b49d00":"plot_count(\"Status\", \"Status\", df,4)","2c4560d8":"#Code by Taha07  https:\/\/www.kaggle.com\/taha07\/data-scientists-jobs-analysis-visualization\/notebook\n\ncolor = plt.cm.Pastel1(np.linspace(0,1,20))\ndf[\"Status\"].value_counts().sort_values(ascending=False).head(10).plot.pie(y=\"Country\",colors=color,autopct=\"%0.1f%%\")\nplt.title(\"Status of Clinical Trials\")\nplt.axis(\"off\")\nplt.show()","fb24c59e":"plot_count(\"Phase\", \"Phase\", df,3)","044c735a":"fig = px.bar(df[['Status','Phase']].sort_values('Phase', ascending=False), \n                        y = \"Phase\", x= \"Status\", color='Phase', template='ggplot2')\nfig.update_xaxes(tickangle=45, tickfont=dict(family='Rockwell', color='crimson', size=14))\nfig.update_layout(title_text=\"Clinical Trials Phases\")\n\nfig.show()","764b2994":"plot_count(\"participants segment\", \"Participants Segment\", df,4)","2837b4be":"#Code by Taha07  https:\/\/www.kaggle.com\/taha07\/data-scientists-jobs-analysis-visualization\/notebook\n\ncolor = plt.cm.Pastel1(np.linspace(0,1,20))\ndf[\"participants segment\"].value_counts().sort_values(ascending=False).head(10).plot.pie(y=\"Status\",colors=color,autopct=\"%0.1f%%\")\nplt.title(\"Participants Segment of Clinical Trials\")\nplt.axis(\"off\")\nplt.show()","ac14a265":"ax = df['participants segment'].head(20).value_counts().plot.barh(figsize=(20, 10), color='blue')\nax.set_title('Participants Segment', size=18, color='red')\nax.set_ylabel('Participants Segment', size=10)\nax.set_xlabel('Count', size=10)","0f9fd64f":"#Code by Taha07  https:\/\/www.kaggle.com\/taha07\/data-scientists-jobs-analysis-visualization\/notebook\n\ncolor = plt.cm.RdBu(np.linspace(0,1,20))\ndf[\"Phase\"].value_counts().sort_values(ascending=False).head(10).plot.pie(y=\"Status\",colors=color,autopct=\"%0.1f%%\")\nplt.title(\"Phases of Clinical Trials\")\nplt.axis(\"off\")\nplt.show()","9a2a7ad7":"plt.style.use(\"Solarize_Light2\")","42bd58ab":"df_Strain =  df[[\"Strain\"]].copy()\ndf_Strain[\"count\"] = 1\ndf_Strain = df_Strain.groupby(\"Strain\").count()\ndf_Strain.head()","e3306613":"fig, axes = plt.subplots(1, 2, figsize=(10,6), gridspec_kw=dict(wspace=0.1, hspace=0.6))\nfig.suptitle(\"Clinical Trials\", fontsize=15)\n\ng_Strain = sns.countplot(data=df, x=\"Strain\", order = df['Strain'].value_counts().index,\n                       ax=axes[0])\ng_Strain.set_title(\"Strain countplot\")\n\ng_Strain_pie = df_Strain.plot.pie(y=\"count\", ax=axes[1])\ng_Strain_pie.set_title(\"Clinical Trials\")","b294aa57":"fig, axes = plt.subplots(1, 2, figsize=(10,6), gridspec_kw=dict(wspace=0.1, hspace=0.6))\nfig.suptitle(\"Clinical Trials\", fontsize=15)\n\ng_Phase = sns.countplot(data=df, x=\"Phase\", ax=axes[0], \n                                 order = df['Phase'].value_counts().index)\ng_Phase.set_title(\"Phases countplot\")\n\ndf_Phase =  df[[\"Phase\"]].copy()\ndf_Phase[\"count\"] = 1\ndf_Phase = df_Phase.groupby(\"Phase\").count()\ng_Phase_pie = df_Phase.plot.pie(y=\"count\", ax=axes[1])\ng_Phase_pie.set_title(\"Phases pie plot\")","c993959b":"g_Status = sns.countplot(data=df, x=\"Status\", order = df['Status'].value_counts().index)\ng_Status.set_title(\"Status countplot\")\nplt.xticks(rotation=45)","527915f2":"fig, axes = plt.subplots(1, 2, figsize=(10,6), gridspec_kw=dict(wspace=0.1, hspace=0.6))\nfig.suptitle(\"Clinical Trials\", fontsize=15)\n\ng_Target = sns.countplot(data=df, x=\"Target Sample Size\", order = df['Target Sample Size'].value_counts().index, ax=axes[0])\ng_Target.set_title(\"Target Sample Size countplot\")\nplt.xticks(rotation=45)\n\ng_Target = sns.countplot(data=df, x=\"Target Sample Size\", hue=\"Phase\", ax=axes[1],\n                         order = df['Target Sample Size'].value_counts().index)\ng_Target.legend_._loc = 1\ng_Target.set_title(\"Target Sample Size\")\nplt.xticks(rotation=45)","689e0a93":"plt.figure(figsize=(20, 10))\ng_participants = sns.countplot(data=df, x=\"participants segment\",order = df['participants segment'].value_counts().index)\ng_participants.set_xticklabels(g_participants.get_xticklabels(), rotation=45)\ng_participants.set_title(\"Participants Segment countplot\")","e1243fbe":"fig, axes = plt.subplots(1, 2, figsize=(10,6), gridspec_kw=dict(wspace=0.1, hspace=0.6))\nfig.suptitle(\"Clinical Trials\", fontsize=15)\n\ng_Target = sns.distplot(df[\"Target Sample Size\"], ax=axes[0])\ng_Target.set_title(\"Target Sample Size distplot\")\n\ng_No = sns.distplot(df[\"No\"], ax=axes[1])\ng_No.set_title(\"No distplot\")","d101c849":"Brazil = df[(df['Country']=='Brazil')].reset_index(drop=True)\nBrazil.head()","ee233134":"fig = px.bar(Brazil, x= \"Study Start Date\", y= \"Phase\", color_discrete_sequence=['purple'], title=\"Clinical Trials by Study Start Date\")\nfig.show()","3bb919ed":"fig = px.bar(Brazil, x= \"Status\", y= \"Trial Done by\", color_discrete_sequence=['darkolivegreen'], title=\"Clinical Trials Status\")\nfig.show()","b1d12767":"fig = px.bar(Brazil, x= \"Primary Completion Date \", y= \"Trial Done by\", color_discrete_sequence=['darksalmon'], title=\"Clinical Trials Primary Completion Date \")\nfig.show()","31292203":"fig = px.bar(Brazil, x= \"Target Sample Size\", y= \"Trial Done by\", color_discrete_sequence=['#2B3A67'], title=\"Clinical Trials Target Sample Size\")\nfig.show()","5e86e480":"fig = px.bar(Brazil, x= \"participants segment\", y= \"Trial Done by\", color_discrete_sequence=['crimson'], title=\"Clinical Trials by Participants\")\nfig.show()","d71c18f8":"fig = px.bar(Brazil, x= \"Last Update\", y= \"Trial Done by\", color_discrete_sequence=['cyan'], title=\"Clinical Trials by Last Update\")\nfig.show()","9097f481":"fig = px.bar(Brazil, x= \"Study Completion Date\", y= \"Trial Done by\", color_discrete_sequence=['#ecfc03'], title=\"Clinical Trials by Study Completion Date \")\nfig.show()","6c1a7853":"#Code by Olga Belitskaya https:\/\/www.kaggle.com\/olgabelitskaya\/sequential-data\/comments\nfrom IPython.display import display,HTML\nc1,c2,f1,f2,fs1,fs2=\\\n'#eb3434','#eb3446','Akronim','Smokum',30,15\ndef dhtml(string,fontcolor=c1,font=f1,fontsize=fs1):\n    display(HTML(\"\"\"<style>\n    @import 'https:\/\/fonts.googleapis.com\/css?family=\"\"\"\\\n    +font+\"\"\"&effect=3d-float';<\/style>\n    <h1 class='font-effect-3d-float' style='font-family:\"\"\"+\\\n    font+\"\"\"; color:\"\"\"+fontcolor+\"\"\"; font-size:\"\"\"+\\\n    str(fontsize)+\"\"\"px;'>%s<\/h1>\"\"\"%string))\n    \n    \ndhtml('Thanks Butantan Institut, Fiocruz and brazilians epidemiologists. @mpwolke is still here' )","0e8843b5":"![](https:\/\/credevo.com\/articles\/wp-content\/uploads\/2019\/03\/Brazil_Clinical_trial_regulatory_process_credevo-1.jpg)credevo.com","e5e3b50c":"#Primary Completion Date has a space after Date.","c2cfc6b2":"#Since the descriptions are extense, try another kind of charts. Learn how to plot less features. So #that people can read without magnifying lens.","e3d220f5":"#Handling Missing Values","86562a8d":"#WordClouds before removing Missing Values.","3b4fc712":"#Codes by Nayu T.S. https:\/\/www.kaggle.com\/nayuts\/eda-and-how-to-see-ingredient-similarity\/notebook","a965509a":"#How my country is doing with those Trials."}}