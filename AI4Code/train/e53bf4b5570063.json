{"cell_type":{"e212b246":"code","887d7414":"code","5fb2e284":"code","1dc22e72":"code","e7cfa355":"code","0e06f2fc":"code","5e8e9ac3":"code","0c4f9283":"code","48e6bfcf":"code","efbb3fd1":"code","ba333bb2":"code","57a07113":"code","5eb0d755":"code","5eaf0d40":"markdown","e3067015":"markdown","5ace6671":"markdown","99a5d1d4":"markdown"},"source":{"e212b246":"import sys\n!{sys.executable} -m pip install bar_chart_race","887d7414":"import pandas as pd\nimport numpy as np\nimport matplotlib.pyplot as plt\nimport os\n\nimport bar_chart_race as bcr\nfrom IPython.display import HTML\nimport warnings\nwarnings.filterwarnings(\"ignore\")\nfrom IPython.display import Video","5fb2e284":"data=pd.read_csv('..\/input\/suicide-rates-overview-1985-to-2016\/master.csv')\ndata","1dc22e72":"data.columns","e7cfa355":"data0=data[['country', 'year','suicides_no']]\ndata0=data0.groupby(['country','year'],as_index=False).sum()\ndata0","0e06f2fc":"data0.columns","5e8e9ac3":"data0b=data0.copy()\ndata0b['CountryNo']=1\ndata0b=data0b.groupby('year').sum()\ndata0b\n# drop 2016 data","0c4f9283":"drop=data0[data0['year']==2016].index.tolist()\ndata0=data0.drop(index=data0.index[drop])","48e6bfcf":"# set double indexes\ndata1=data0.copy()\ndata1['year']=data1['year'].apply(lambda x: str(x))\ndata2=data1.set_index(['year','country'])\ndata2","efbb3fd1":"# unsack!!!\ndata3=data1.set_index(['year','country']).unstack()['suicides_no']\ndata3","ba333bb2":"data4=data3.fillna(0)","57a07113":"df = data4\nbcr.bar_chart_race(\n    df=df,\n    filename='BCR_SuicideNo.mp4',\n    orientation='h',\n    sort='desc',\n    n_bars=20,\n    fixed_order=False,\n    fixed_max=False,\n    steps_per_period=10,\n    interpolate_period=False,\n    label_bars=True,\n    bar_size=.95,\n    period_label={'x': .99, 'y': .25, 'ha': 'right', 'va': 'center'},\n    #period_fmt='%B %d, %Y',\n    period_summary_func=lambda v, r: {'x': .99, 'y': .18,'s': '',\n                                      'ha': 'right', 'size': 8, 'family': 'Courier New'},\n    #perpendicular_bar_func='median',\n    period_length=1000,\n    figsize=(5, 3),\n    dpi=500,\n    cmap='dark24',\n    title='Suicide No. 1985 to 2015 - Bar Chart Race',\n    title_size=15,\n    bar_label_size=7,\n    tick_label_size=5,\n    shared_fontdict={'color' : '.1'},\n    scale='linear',\n    writer=None,\n    fig=None,\n    bar_kwargs={'alpha': .7},\n    filter_column_colors=True)","5eb0d755":"Video(\"\/kaggle\/working\/BCR_SuicideNo.mp4\", width=800, height=600, embed=True)","5eaf0d40":"# Dataframe for Bar Chart Race","e3067015":"# Bar Chart Race\n","5ace6671":"# Data preparation","99a5d1d4":"# Bar Chart Race of Suicide Rates 1985 to 2015\n* cf. https:\/\/www.dexplo.org\/bar_chart_race\/\n* cf. https:\/\/github.com\/dexplo\/bar_chart_race\/"}}