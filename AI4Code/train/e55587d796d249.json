{"cell_type":{"7c3cda5d":"code","399c3396":"code","553cfe79":"code","e77f9fcb":"code","51c12bbf":"code","3885a710":"code","108c9991":"code","9c4264d1":"markdown","87362301":"markdown","e493f28b":"markdown","ecce18d6":"markdown","2f10e53e":"markdown","daab4382":"markdown","fbe9dda1":"markdown"},"source":{"7c3cda5d":"CATEGORY = 0\nGEO_CODE = 'ID'\nTIMEFRAME = '2021-01-01 2021-12-31'\nFONT = 'Century Gothic'","399c3396":"!pip install pytrends\n\nimport numpy as np\nimport pandas as pd\nimport seaborn as sns\nimport matplotlib.pyplot as plt\nfrom datetime import datetime\n\nfrom pytrends.request import TrendReq","553cfe79":"# KEYWORDS = ['pesawat sriwijaya', 'puasa rajab', 'nisfu syaban', 'kapal selam nanggala', 'man utd vs liverpool', 'jadwal euro', 'olimpiade tokyo', 'pendaftaran vaksin covid', 'man utd vs aston villa', 'indonesia vs australia', 'vanesa', 'indonesia vs singapura']\n\nKEYWORDS = ['pesawat sriwijaya', 'niat puasa rajab', 'puasa rajab', 'prakerja gelombang 13', 'nisfu syaban', 'pertamina indramayu', 'kapal selam nanggala', 'ucapan idul fitri 2021', 'man utd vs liverpool', 'jadwal euro 2021', 'euro 2021', 'jadwal euro', 'hasil euro', 'hasil euro 2021', 'copa america', 'pertandingan euro', 'jadwal euro 2020', 'jadwal copa america', 'copa america 2021', 'jadwal euro malam ini', 'jadwal euro hari ini', 'portugal vs jerman', 'portugal vs belgia', 'olimpiade tokyo 2020', 'olimpiade tokyo', 'jadwal badminton olimpiade tokyo', 'perolehan medali olimpiade', 'pendaftaran vaksin covid', 'prakerja gelombang 20', 'man utd vs aston villa', 'squid game', 'indonesia vs australia', 'vanesa', 'gunung semeru', 'piala aff', 'indonesia vs malaysia', 'laura meninggal', 'aff cup', 'jadwal piala aff']\n\n# KEYWORDS = ['Piala Eropa', 'Olimpiade Tokyo', 'BTS Meal', 'Vaksin COVID-19', 'Pencegahan COVID-19', 'Peduli Lindungi', 'PPKM Diperpanjang', 'BPJS Ketenagakerjaan', 'Prakerja.go.id', 'Google Translate']\n\n    ","e77f9fcb":"pytrends = TrendReq(tz=360)","51c12bbf":"# Dividing keyword list into chunks as API only takes up to 5 elements at a time\ndef chunk_generator(lst, n=5):\n    for i in range(0, len(lst), n):\n        yield lst[i:i+n]\n\nchunks = chunk_generator(KEYWORDS)\n\ndf = pd.DataFrame(columns=['date'])\nfor chunk in chunks:\n    pytrends.build_payload(chunk, cat=CATEGORY,\n                           geo=GEO_CODE,\n                           timeframe=TIMEFRAME)\n    df_chunk = pytrends.interest_over_time()\n    df_chunk = df_chunk.drop('isPartial', axis=1)\n    df = pd.merge(df, df_chunk, how='right', on='date')\ndf = df.set_index('date')","3885a710":"df = df*(100\/df.max())\ndf_longform = df.reset_index().melt(id_vars=['date'],\n                                    var_name='Keyword',\n                                    value_name='Interest')","108c9991":"sns.set_theme(style=\"white\", rc={\"axes.facecolor\": (0, 0, 0, 0), \"font.family\": FONT})\nplt.rcParams[\"xtick.labelsize\"] = 16\nplt.rcParams[\"font.family\"] = [FONT]\n\ng = sns.FacetGrid(df_longform, row=\"Keyword\", hue=\"Keyword\",\n                  aspect=30, height=.55, palette='flare_r')\n\ndef label(x, color, label):\n    ax = plt.gca()\n    ax.text(0, .2, label, fontsize=16, fontweight=\"bold\", color=color,\n            ha=\"left\", va=\"center\", transform=ax.transAxes)\n\ng.map(label, \"date\")\ng.map(plt.plot, 'date', 'Interest', color='white', linewidth=2.5)\ng.map(plt.fill_between, \"date\", \"Interest\", alpha=1)\n\ng.refline(y=0, linewidth=2, linestyle=\"-\", color=None, clip_on=False)\n\ng.figure.subplots_adjust(hspace=-.35)\n\ng.set_titles(\"\")\ng.set(yticks=[], ylabel=\"\", xlabel='', xlim=[datetime(2020, 11, 1), datetime.today()],\n      xticks=[datetime(2021, i, 12) for i in range(1, 13)], \n      xticklabels=['JAN', 'FEB', 'MAR', 'APR', 'MEI', 'JUN',\n                   'JUL', 'AGT', 'SEP', 'OKT', 'NOV', 'DES'])\ng.despine(bottom=True, left=True)\nplt.suptitle(\"Google Trends Indonesia Tahun 2021\", fontsize=20)","9c4264d1":"# Define Keywords \nOfficial Google Trends: https:\/\/trends.google.com\/trends","87362301":"# Visualizations","e493f28b":"# Normalize Data","ecce18d6":"# Introduction\nOriginal source code: https:\/\/github.com\/joweich\/year-in-search-trends\n\nModified by: Hendratno (25 Dec 2021)\n\n# Initializations\nCategories: https:\/\/github.com\/pat310\/google-trends-api\/wiki\/Google-Trends-Categories\n\nCountry Codes: https:\/\/en.wikipedia.org\/wiki\/List_of_ISO_3166_country_codes","2f10e53e":"# Get Data","daab4382":"# Imports","fbe9dda1":"Code inspired by https:\/\/seaborn.pydata.org\/examples\/kde_ridgeplot.html"}}