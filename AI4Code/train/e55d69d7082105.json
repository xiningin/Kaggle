{"cell_type":{"7b16782f":"code","efb06812":"code","7c734a93":"code","d57548cf":"code","a274140e":"code","ebbe029f":"code","3ca0668f":"code","822df87d":"code","31ba94b1":"code","f9f6ffab":"code","fed1a0ce":"code","93c2af2a":"code","b22ea4c0":"code","84e4ecac":"code","c07fc3d2":"code","d0214aa7":"code","ea048ad1":"code","b9c947ec":"code","e58b4af4":"code","340f1b04":"code","b2451484":"code","e8ba2442":"markdown","253b4a1c":"markdown","07d7df32":"markdown","00a6fdf1":"markdown","d50ff053":"markdown","98fc3fb5":"markdown","63ed9d71":"markdown","fc6ed888":"markdown","afb6f44b":"markdown","d19c2022":"markdown","748f6ce8":"markdown","c21568b5":"markdown","364d6fe4":"markdown","3a5a035a":"markdown","fe6814a6":"markdown","fac7f9be":"markdown","a7cbea95":"markdown","469eeebb":"markdown"},"source":{"7b16782f":"import os\nfor dirname, _, filenames in os.walk('\/kaggle\/input'):\n    for filename in filenames:\n        print(os.path.join(dirname, filename))","efb06812":"from sklearn.preprocessing import MinMaxScaler\nimport seaborn as sns\nimport altair as alt\nalt.data_transformers.disable_max_rows() # Allows altair to use 5k + datasets\nimport plotly.io as pio\nimport plotly.express as px\nimport plotly.graph_objects as go\nimport plotly.figure_factory as ff\nfrom plotly.subplots import make_subplots\nfrom plotly.validators.scatter.marker import SymbolValidator\nimport plotly.offline as pyo\nimport matplotlib.pyplot as plt\nimport pandas as pd\nimport numpy as np\nimport warnings\nwarnings.filterwarnings('ignore')","7c734a93":"tracks = pd.read_csv(\"\/kaggle\/input\/spotify-tracks-19202020\/tracks.csv\")\n","d57548cf":"tracks.describe()","a274140e":"tracks.isnull().sum()","ebbe029f":"tracks = tracks.dropna()","3ca0668f":"# Creo duration en segundos y elimino la anterior variable\ntracks['duration'] = round(tracks['duration_ms']\/1000,0)\ntracks = tracks.drop(\"duration_ms\",axis=1)","822df87d":"#Creo una variable que tiene el n\u00famero de artistas que tiene cada canci\u00f3n\ntracks['artists_count'] = tracks['artists'].apply(lambda x: x.count(',') + 1 )","31ba94b1":"# Creo la variable que contiene el a\u00f1o de salida de la canci\u00f3n\ntracks['year'] = pd.DatetimeIndex(tracks['release_date']).year\n# Creo la variable que contiene el mes en el que sali\u00f3 la canci\u00f3n\ntracks['month'] = pd.DatetimeIndex(tracks['release_date']).month\n# Creo la variable que contiene la estaci\u00f3n en la que sali\u00f3 la canci\u00f3n\ntracks['season'] = tracks['month'].apply(lambda x: 'Spring' if 4 <= x <= 6 else ('Summer' if 7 <= x <= 9 else ('Autum' if 10 <= x <= 12 else 'Winter')))\n# Creo la variable que contiene la d\u00e9cada en la que sali\u00f3 la canci\u00f3n\ntracks['decade'] = tracks['year'].apply(lambda x: int(np.floor(x\/10)*10))","f9f6ffab":"# Borro estas variables ya que no aportan nada al an\u00e1lisis\ntracks = tracks.drop([\"id\",\"id_artists\"],axis=1)","fed1a0ce":"df_year_control = tracks.copy()\ndf_year_control = df_year_control[(df_year_control[\"year\"] >= 1920) & (df_year_control[\"year\"] < 2020)]\ndf_year_control = df_year_control.groupby(\"decade\").mean().reset_index()\n\ndf_year_control['acousticness'] = df_year_control['acousticness'] \/ df_year_control['acousticness'].max()\ndf_year_control['danceability'] = df_year_control['danceability'] \/ df_year_control['danceability'].max()\ndf_year_control['duration'] = df_year_control['duration'] \/ df_year_control['duration'].max()\ndf_year_control['energy'] = df_year_control['energy'] \/ df_year_control['energy'].max()\ndf_year_control['instrumentalness'] = df_year_control['instrumentalness'] \/ df_year_control['instrumentalness'].max()\ndf_year_control['liveness'] = df_year_control['liveness'] \/ df_year_control['liveness'].max()\ndf_year_control['speechiness'] = df_year_control['speechiness'] \/ df_year_control['speechiness'].max()\ndf_year_control['tempo'] = df_year_control['tempo'] \/ df_year_control['tempo'].max()\ndf_year_control['valence'] = df_year_control['valence'] \/ df_year_control['valence'].max()\ndf_year_control['popularity'] = df_year_control['popularity'] \/ df_year_control['popularity'].max()\ndf_year_control['loudness'] = df_year_control['loudness'] \/ df_year_control['loudness'].min()\ndf_year_control['year'] = df_year_control['year'].astype(str)\ndf_year_control.describe()","93c2af2a":"df_year_control.drop([\"key\",\"mode\",\"year\",\"month\",\"artists_count\",\"time_signature\"],axis=1,inplace=True)\ndf_year_control = df_year_control.melt(\"decade\")","b22ea4c0":"decade = tracks[(tracks[\"year\"] < 2020) & (tracks[\"year\"] >= 1920)].groupby(\"decade\")[\"name\"].count().reset_index()\nalt.Chart(decade).mark_bar().encode(\n    x = \"decade:O\",\n    y = alt.Y(\"name:Q\",title=\"Number of songs\"),\n    color = alt.value(\"steelblue\")\n).properties(width = 600)\n","84e4ecac":"x = tracks.groupby(\"year\")[\"acousticness\",\"danceability\",\"energy\",\"valence\"].mean().reset_index()\nx = x[(x[\"year\"] >= 1920) & (x[\"year\"] <= 2020)]\nx = pd.melt(x,id_vars=[\"year\"])\n\nalt.Chart(x).mark_line().encode(\n    x='year',\n    y='value',\n    color='variable',\n    strokeDash='variable',\n).properties(width = 600)","c07fc3d2":"fig = px.line_polar(df_year_control, r=\"value\",theta=\"variable\",line_close=True,\n             animation_frame=\"decade\",template=\"plotly_dark\",range_r = (0,1))\nfig.update_traces(fill='toself')\nfig.update_layout(font_size=15)\nfig.show()","d0214aa7":"x = tracks.groupby(\"year\")[\"duration\"].mean().reset_index()\nx = x[(x[\"year\"] >= 1920) & (x[\"year\"] <= 2020)]\nx = pd.melt(x,id_vars=[\"year\"])\n\nalt.Chart(x).mark_line().encode(\n    x='year',\n    y='value',\n    color='variable',\n    strokeDash='variable',\n).properties(width = 600)","ea048ad1":"dict = {0:\"C\",1:\"C#\",2:\"D\",3:\"Eb\",4:\"E\",5:\"F\",6:\"F#\",7:\"G\",8:\"Ab\",9:\"A\",10:\"Bb\",11:\"B\"}\nkey = tracks.copy()\nkey = key[(key[\"year\"] >= 1920) & (key[\"year\"] < 2020)]\nkey = key.groupby([\"decade\",\"key\"]).agg(count = pd.NamedAgg(\"name\",\"count\"))\nkey['percent'] = key.groupby(level=0).transform(lambda x: (x \/ x.sum()).round(4)*100)\nkey = key.reset_index()\nkey[\"key\"] = key[\"key\"].astype('category')\nkey = key.replace({\"key\":dict})\n\nbars = alt.Chart(key).mark_bar().encode(\n    x=alt.X('percent:Q',stack='zero',scale=alt.Scale(domain=(0, 100))),\n    y=alt.Y('decade:N'),\n    color=alt.Color('key',scale=alt.Scale(scheme='tableau20'),legend=alt.Legend(title=\"Keys\")),\n    order=alt.Order('key', sort='ascending')\n).properties(width = 800,height = 300)\n\ntext = alt.Chart(key).mark_text(dx=-15, dy=3, color='white').encode(\n    x=alt.X('percent:Q', stack='zero',scale=alt.Scale(domain=(0, 100))),\n    y=alt.Y('decade:N'),\n    detail='key',\n    text=alt.Text('percent:Q', format='.2f'),\n    order=alt.Order('key', sort='ascending')\n).properties(width = 800,height = 30)\n\nbars + text","b9c947ec":"season = tracks.copy()\nseason = season[(season[\"year\"] >= 1920) & (season[\"year\"] < 2020)]\nseason = season.groupby([\"decade\",\"season\"]).agg(count = pd.NamedAgg(\"name\",\"count\"))\nseason['percent'] = season.groupby(level=0).transform(lambda x: (x \/ x.sum()).round(4)*100)\nseason = season.reset_index()\nseason[\"season\"] = season[\"season\"].astype('category')\n\nbars = alt.Chart(season).mark_bar().encode(\n    x=alt.X('percent:Q',stack='zero',scale=alt.Scale(domain=(0, 100))),\n    y=alt.Y('decade:N'),\n    color=alt.Color('season',scale=alt.Scale(scheme='tableau20'),legend=alt.Legend(title=\"Season\")),\n    order=alt.Order('season', sort='ascending'),\n    tooltip=['decade','season','percent']\n).properties(width = 800,height = 300)\n\n\nbars ","e58b4af4":"explicit = tracks.copy()\nexplicit = explicit[(explicit[\"year\"] >= 1920) & (explicit[\"year\"] < 2020)]\nexplicit = explicit.groupby([\"decade\",\"explicit\"]).agg(count = pd.NamedAgg(\"name\",\"count\"))\nexplicit['percent'] = explicit.groupby(level=1).transform(lambda x: (x \/ x.sum()).round(4)*100)\nexplicit = explicit.reset_index()\nexplicit[\"explicit\"] = explicit[\"explicit\"].astype('category')\nexplicit = explicit[explicit[\"explicit\"] == 1]\nfig = px.pie(explicit, values='percent', names='decade',\n             title='Porcentaje de contenido expl\u00edcito por d\u00e9cada')\nfig.update_traces(textposition='inside', textinfo='percent+label')\nfig.show()","340f1b04":"explicit = tracks.copy()\nexplicit = explicit[(explicit[\"year\"] >= 1920) & (explicit[\"year\"] < 2020)]\nexplicit = explicit.groupby([\"decade\",\"explicit\"]).agg(popularity = pd.NamedAgg(\"popularity\",\"mean\"))\nexplicit = explicit.reset_index()\nexplicit[\"explicit\"] = explicit[\"explicit\"].apply(lambda x: 'Contenido Explicito' if x == 1 else 'Contenido No Explicito')\nexplicit[\"explicit\"] = explicit[\"explicit\"].astype('category')\n\nalt.Chart(explicit).mark_bar(opacity=0.7).encode(\n    x='decade:O',\n    y=alt.Y('popularity:Q', stack=None),\n    color=\"explicit\",\n).properties(width = 800,height = 300)","b2451484":"explicit = tracks.copy()\nexplicit = explicit[(explicit[\"year\"] >= 1980) & (explicit[\"year\"] < 2020)]\nexplicit[\"explicit\"] = explicit[\"explicit\"].apply(lambda x: 'Contenido Explicito' if x == 1 else 'Contenido No Explicito')\n\nplt.figure(figsize=(12, 8))\nsns.boxplot(x=\"decade\", y=\"popularity\", hue=\"explicit\",data=explicit, palette=\"Set3\")\nplt.ioff()","e8ba2442":"## Introducci\u00f3n\nSpotify es una aplicaci\u00f3n de audio en streaming y, actualmente, cuenta con 345 millones de usuarios activos de los cuales 155 son usuarios de pago. Esto lo convierte en la plataforma de m\u00fasica m\u00e1s grande y reconocida del mundo. En ella podemos encontrar todo tipo de artistas y de estilos musicales de todas las partes del mundo, de hecho, uno de sus puntos fuertes es la riqueza en cuanto a variedad musical se refiere.\n \nEste Notebook consistir\u00e1 en analizar la evoluci\u00f3n de la m\u00fasica en el tiempo seg\u00fan el dataset [Spotify Dataset](https:\/\/www.kaggle.com\/yamaerenay\/spotify-dataset-19212020-160k-tracks) disponible en Kaggle y que ha sido descargado desde la API Oficial de Spotify.\n\nAntes de comenzar el an\u00e1lisis es conveniente introducir las variables que van a ser utilizadas:","253b4a1c":"En este gr\u00e1fico podemos ver y confirmar lo expuesto anteriormente. Solo he decidido poner a la vista las d\u00e9cadas de los 80 en adelante porque es donde est\u00e1n pr\u00e1cticamente la totalidad de las canciones con contenido expl\u00edcito.\n\nCon esto ponemos fin a este breve repaso de la evoluci\u00f3n de la m\u00fasica con respecto al tiempo.","07d7df32":"A modo de resumen, dejo este gr\u00e1fico interactivo en el que se pueden ver las tendencias previamente explicadas junto con algunos aspectos m\u00e1s que me han parecido interesantes.","00a6fdf1":"### En que claves se ha compuesto la m\u00fasica ?","d50ff053":"El contenido expl\u00edcito hace alusi\u00f3n a un lenguaje agresivo y\/o violento. En este gr\u00e1fico podemos observar, del total de canciones que hacen uso de este vocabulario cuantas de ellas recaen en cada d\u00e9cada y, tal y como se aprecia, la tendencia es que la m\u00fasica cada vez hace mas uso de este tipo de lenguaje.De hecho, casi el 60% recae en la d\u00e9cada del 2010 y casi el 40% restante en la de los 80, 90 y 2000.\n\nEste hecho trae adscrito una pregunta obvia, ser\u00e1 que una canci\u00f3n con lenguaje agresivo tiene una mayor probabilidad de ser popular?\n","98fc3fb5":"### Contenido expl\u00edcito en las canciones","63ed9d71":"## ANALISIS DE LA M\u00daSICA EN EL TIEMPO EN SPOTIFY","fc6ed888":"En este gr\u00e1fico se muestra, para cada d\u00e9cada, el porcentaje que hace referencia a en que estaci\u00f3n han salido m\u00e1s canciones.\nSe aprecia algo muy curioso y muy l\u00f3gico a la vez. Hasta la d\u00e9cada del 2010, la inmensa mayor\u00eda de las canciones sal\u00edan en invierno y sin embargo, hoy en d\u00eda la tendencia es mas equitativa, es decir no importa tanto en que estaci\u00f3n salgan.\n\n\nPero, por que ocurre esto ? La respuesta es sencilla, internet.\n\nEn la actualidad, casi todo el mundo tiene acceso a internet y esto se puede traducir como escuchar cualquier canci\u00f3n , en cualquier momento y de manera gratuita o con un coste muy reducido. Es por eso que ya no es importante sacar las canciones en la temporada estival, para as\u00ed poder colar tus discos debajo del \u00e1rbol de millones de hogares. \n\nHoy en d\u00eda es muy raro regalar m\u00fasica debido a el f\u00e1cil acceso que tiene todo el mundo a la misma, ya no necesitas ahorrar unas semanas para escuchar el nuevo disco de tu grupo favorito, si no que es suficiente con un par de \"clicks\".","afb6f44b":"Este gr\u00e1fico muestra las medias de popularidad de las canciones,agrupa por d\u00e9cadas, en base a si tienen contenido expl\u00edcito o no. En el se refleja claramente que la media de popularidad de las canciones con contenido explicito es superior a los que no lo tienen y m\u00e1s, si tenemos en cuenta que solo deber\u00edamos fijarnos a partir de 1980 que es donde est\u00e1n practicamente el 100% de las canciones con contenido expl\u00edcito.","d19c2022":"### Primarias\n   **id**: (Id de la canci\u00f3n en Spotify)\n\n### Numericas:\n\n   **acousticness**: Cuan ac\u00fastica es la canci\u00f3n (De 0 a 1)\n   \n   **danceability**: Describe como de \"bailable\" es una canci\u00f3n basado en una combinaci\u00f3n de elementos  m\u00fasicales como el tempo, el ritmo, la fuerza del beat y la regularidad (De 0 a 1)\n   \n   **energy**: Representa una medida percentual de intensidad y actividad. Normalmente, las canciones     energ\u00e9ticas se perciben m\u00e1s r\u00e1pidas y ruidosas (De 0 a 1)\n   \n   **duration_ms**: Duraci\u00f3n de la canci\u00f3n en milisegundos\n   \n   **instrumentalness**: Cantidad de partes vocales en la canci\u00f3n (De 0 a 1)\n   \n   **valence**: Mide la \"positividad m\u00fasical\". Canciones con alta valencia suelen ser m\u00e1s felices y euf\u00f3ricas.(De 0 a 1)\n   \n   **popularity**: Mide la popularidad de la canci\u00f3n.(De 0 a 100)\n   \n   **tempo**: Mide el tempo en beats por minuto (BPM).\n   \n   **liveness**: Mide la probabilidad de que la canci\u00f3n haya sido grabada con p\u00fablico en vivo. Seg\u00fan la documentaci\u00f3n oficial, un valor superior a 0.8 indica que altamente probable que la canci\u00f3n haya sudo grabada en vivo.(De 0 a 1)\n   \n   **loudness**: Mide el volumen de una canci\u00f3n en decibelios\n   \n   **speechiness**: Detecta la presencia de discursos hablados en la canci\u00f3n.(De 0 a 1)\n\n### Dummy:\n\n   **mode**: Indica la modalida (0 = Menor, 1 = Mayor)\n   \n   **explicit**: Indica si contiene lenguaje agresivo (malas palabras, se habla de drogas, etc) (0 = No  tiene, 1 = Tiene)\n\n### Categ\u00f3ricas:\n\n   **key**: Todas la clave de la canci\u00f3n en codificaci\u00f3n num\u00e9rica, de 0 a 11, empezando con C = 0 y as\u00ed sucesivamente\n   \n   **timesignature**: Inidca el comp\u00e1s de la canci\u00f3n.\n   \n   **artists**: Lista de artistas\n   \n   **id_artists**: Ids aritstas\n   \n   **release_date**: Fecha de salida de la canci\u00f3n\n   \n   **name**: Nombre de la canci\u00f3n\n","748f6ce8":"### Ha variado la duraci\u00f3n de las canciones ?","c21568b5":"### Como ha evolucionado la m\u00fasica ?","364d6fe4":"Vemos una progresi\u00f3n gradual en el n\u00famero de canciones desde 1920 hasta 1980. Esto es facilmente explicable, ya que a medida que se avanza en el tiempo, la teconlog\u00eda hace m\u00e1s accesible tanto el crear como el escuchar m\u00fasica, por lo que parece noral esta progresi\u00f3n gradual. En los 90 se produce un crecimiento fuera de lo com\u00fabn, de hecho, hasta d\u00eda de hoy es la d\u00e9cada en la que mas m\u00fasica se ha producido.\nPero, por qu\u00e9 en 1a d\u00e9cada de los 90?\nLa respuesta es simple, variedad. Los 90 es considerada la d\u00e9cada de oro de la m\u00fasica debido al gran abanico de estilos musicales que emergieron y que tuvieron su hueco en la sociedad. El grunge, captineado por Kurt Cobain, el pop ingl\u00e9s con Oasis como su m\u00e1ximo representante, el rap con el \"boom\" de Eminem, la m\u00fasica electr\u00f3nica con artistas del calibre de Daft Punk y Madonna y el gran Michael Jackson son solo unos de los ejemplos que muestran la gran variedad de generos musicales que estaban representados por artistas de un nivel excepcional, que a\u00fan a d\u00eda de hoy, siguen siendo considerados super estrellas.\nAdem\u00e1s, a todo esto se le une el hecho de que en los 90 se empez\u00f3 a a\u00f1adir un elemento fundamental a la m\u00fasica, el v\u00eddeo. Hoy en d\u00eda ya no concebimos la m\u00fasica solo por el sonido, si no que es mucho m\u00e1s y los videoclips han pasado a ser parte indispensable del sector.\nPor todas estas razones, se produce esa explosi\u00f3n de la d\u00e9cada de los 80 a la de los 90 y que continuar\u00e1 con el crecimiento gradual que se observaba previamente.\n\nLa d\u00e9cada de los 2000 supone un peque\u00f1o paso hacia atr\u00e1s, el cual hace referencia al dicho popular \"todo lo que sube, baja\". Despu\u00e9s de la \u00e9poca dorada, el crecimiento se corta y se vuelve a niveles muy similares a los de los 80. Sin embargo, en la la d\u00e9cada del 2010 vuelve ese crecimiento gradual que nos hace preguntarnos, volveremos a ver una \"explosi\u00f3n\" en la m\u00fasica ?","3a5a035a":"Observando este gr\u00e1fico, podemos decir que en la gran parte de la historia musical que estamos analizando, la variaci\u00f3n de la media de la duraci\u00f3n de las canciones es de aproximadamente 1 minuto. Cabe resaltar, que desde 1965 hasta 1975 se produce un salto en cuanto ha dicha media que se ve levemente reducida a partir del 75. A partir de ese a\u00f1o, se va a producir una subida progresiva hasta el a\u00f1o 2010, en el cual comienza un notado descenso de dicha tendencia. Esto nos indica, que hoy en d\u00eda se buscan canciones cortas, de aproximadamente 3 minutos.","fe6814a6":"Para reflejar la evoluci\u00f3n de la m\u00fasica he decidido reflejar 6 variables fundamentales: acustica, danceabilidad, energ\u00eda y la valencia.\n\nLa acustica ha pasado de ser un aspecto clave en las canciones a no tener apenas relevancia. Se ve como claramente, de 1960 a 1970 se produce una ca\u00edda en picado y despues sigue bajando gradualmente hasta llegar al d\u00eda de hoy. Esto tiene mucho sentido debido a la aparici\u00f3n de los instrumentos el\u00e9ctricos como la guitarra el\u00e9ctrica, el bajo etc y a la m\u00fasica electr\u00f3nica sin los cuales no concebimos la industria musical a d\u00eda de hoy.\n\nEl mejor amigo de la m\u00fasica, el baile, se mantiene bastante constante en el tiempo y es que, ambos artes van ligados y necesitan del otro para sobrevivir. No somos capaces de percibir el baile sin la m\u00fasica y viceversa, es por ello que siempre se ha buscado que las canciones tengan cierta facilidad para la danza y ultimamente, con la globalizaci\u00f3n de la m\u00fasica latina es algo que a\u00fan prima m\u00e1s si cabe.\n\nLa energ\u00eda es un aspecto con un comportamiento totalmente opuesto a la ac\u00fastica y que, aunque no lo parezca, va muy relacionado ya que los intrumentos no ac\u00fasticos suelen acompa\u00f1ar a canciones m\u00e1s r\u00e1pidas y ca\u00f1eras. Observamos como hasta mitad de siglo, la energ\u00eda era un aspecto irrelevante pero que cada vez fue cogiendo m\u00e1s fuerza y es que, salvo canciones muy concretas, la mayor\u00eda de los hits m\u00fasicales de todos los tiempos son canciones que nos hacen vibrar y levantarnos del asiento.\n\nLa valencia tambi\u00e9n se ha mantenido constante en el tiempo, ya que, como he recalcado anteriormente, la mayor parte de la m\u00fasica est\u00e1 hecha para hacernos m\u00e1s feliz cuando la escuchamos. No importa en que \u00e9poca nos encontremos, si una canci\u00f3n nos pone contentos la vamos a querer escuchar m\u00e1s veces.","fac7f9be":"### Cuantas canciones salieron por d\u00e9cada ?","a7cbea95":"![image.png](attachment:1c7ebd5a-a78c-4fcc-8451-9dceb5316939.png)","469eeebb":"### En que estaci\u00f3n se sacan m\u00e1s canciones ?"}}