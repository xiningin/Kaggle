{"cell_type":{"a28d34cf":"code","7a2ea4e2":"code","fdd968be":"code","1f854d81":"code","b6aee887":"code","30523d5c":"code","4fb386a9":"code","3eaa6267":"code","ced8a153":"code","9248ded4":"code","92e8e5ab":"code","62c5733a":"code","16ea0779":"code","c178245a":"code","ea540d15":"code","28f88620":"code","f6bc7b90":"code","056705ae":"code","0bea0eaf":"code","416ad96d":"code","6ab57168":"code","881b9935":"code","b9f2f282":"code","0eece43f":"markdown","dd80f7ea":"markdown","bf9b64f0":"markdown","71f4336e":"markdown","a0b39562":"markdown","977c0a47":"markdown","50e88365":"markdown","77b1c93a":"markdown","afad67d6":"markdown","a7cbdcfe":"markdown","78ce6c0c":"markdown"},"source":{"a28d34cf":"import numpy as np\nimport pandas as pd\nimport matplotlib.pyplot as plt\nimport seaborn as sns\nimport cufflinks as cf\ncf.go_offline()\n%matplotlib inline\nimport geopandas as gpd\nimport plotly_express as px\nimport plotly.graph_objects as go\nfrom plotly.offline import download_plotlyjs, init_notebook_mode, plot, iplot\ninit_notebook_mode(connected=True)\nimport datetime\nfrom IPython.display import HTML","7a2ea4e2":"AgeGroup = pd.read_csv('..\/input\/covid19-in-india\/AgeGroupDetails.csv')","fdd968be":"df = pd.read_csv('..\/input\/covid19-in-india\/covid_19_india.csv', parse_dates=['Date'], dayfirst=True)","1f854d81":"Hospitals = pd.read_csv('..\/input\/covid19-in-india\/HospitalBedsIndia.csv')","b6aee887":"Labs = pd.read_csv('..\/input\/covid19-in-india\/ICMRTestingLabs.csv')","30523d5c":"Individuals = pd.read_csv('..\/input\/covid19-in-india\/IndividualDetails.csv')","4fb386a9":"States = pd.read_csv('..\/input\/covid19-in-india\/StatewiseTestingDetails.csv')","3eaa6267":"plt.figure(figsize=(14,8))\nsns.barplot(data=AgeGroup,x='AgeGroup',y='TotalCases',color=sns.color_palette('Set3')[0])\nplt.title('Age Group Distribution')\nplt.xlabel('Age Group')\nplt.ylabel('Total Cases')\nfor i in range(AgeGroup.shape[0]):\n    count = AgeGroup.iloc[i]['TotalCases']\n    plt.text(i,count+1,AgeGroup.iloc[i]['Percentage'],ha='center')\n    ","ced8a153":"plt.figure(figsize=(14,8))\nsns.countplot(data=Individuals,x='gender',order=Individuals['gender'].value_counts().index,color=sns.color_palette('Set3')[2])\nplt.title('Gender Distribution')\nplt.xlabel('Gender')\nplt.ylabel('Total Cases')\norder2 = Individuals['gender'].value_counts()\n\nfor i in range(order2.shape[0]):\n    count = order2[i]\n    strt='{:0.1f}%'.format(100*count \/ Individuals.gender.dropna().count() )\n    plt.text(i,count+2,strt,ha='center')","9248ded4":"%%HTML\n<div class=\"flourish-embed flourish-bar-chart-race\" data-src=\"visualisation\/2061549\" data-url=\"https:\/\/flo.uri.sh\/visualisation\/2061549\/embed\"><script src=\"https:\/\/public.flourish.studio\/resources\/embed.js\"><\/script><\/div>","92e8e5ab":"state_cases = df.groupby('State\/UnionTerritory')['Confirmed','Deaths','Cured'].max().reset_index()\nstate_cases['Active'] = state_cases['Confirmed'] - abs((state_cases['Deaths']- state_cases['Cured']))\nstate_cases[\"Death Rate (per 100)\"] = np.round(100*state_cases[\"Deaths\"]\/state_cases[\"Confirmed\"],2)\nstate_cases[\"Cure Rate (per 100)\"] = np.round(100*state_cases[\"Cured\"]\/state_cases[\"Confirmed\"],2)\nstate_cases.sort_values('Confirmed', ascending= False).fillna(0).style.background_gradient(cmap='Reds',subset=[\"Confirmed\"])\\\n                        .background_gradient(cmap='Blues',subset=[\"Deaths\"])\\\n                        .background_gradient(cmap='Greens',subset=[\"Cured\"])\\\n                        .background_gradient(cmap='Purples',subset=[\"Active\"])\\\n                        .background_gradient(cmap='Greys',subset=[\"Death Rate (per 100)\"])\\\n                        .background_gradient(cmap='Oranges',subset=[\"Cure Rate (per 100)\"])","62c5733a":"state_cases=state_cases.sort_values('Confirmed', ascending= False).fillna(0)\nstate_cases=state_cases.head(15)\nstate_cases\nplt.figure(figsize=(14,8))\nsns.barplot(data=state_cases,x='State\/UnionTerritory',y='Confirmed',color=sns.color_palette('Set3')[3],label='Confirmed')\nsns.barplot(data=state_cases,x='State\/UnionTerritory',y='Active',color=sns.color_palette('Set3')[7],label='Active')\nsns.barplot(data=state_cases,x='State\/UnionTerritory',y='Cured',color=sns.color_palette('Set3')[8],label='Cured')\nsns.barplot(data=state_cases,x='State\/UnionTerritory',y='Deaths',color=sns.color_palette('Set3')[9],label='Deaths')\nplt.xticks(rotation=90)\nplt.legend();","16ea0779":"df['Date'] = pd.to_datetime(df['Date'], dayfirst=True)\nCS_covid = df[['Date','State\/UnionTerritory','Cured','Deaths','Confirmed']]\nCS_covid = CS_covid.groupby('Date')[['Confirmed', 'Cured','Deaths']].sum().reset_index()","c178245a":"CS_covid['Active'] = CS_covid['Confirmed'] - CS_covid['Cured'] - CS_covid['Deaths']\nCS_covid['new_case\/day'] = CS_covid['Confirmed'] - CS_covid['Confirmed'].shift(1)\nCS_covid['growth_ratio'] = CS_covid['new_case\/day'] \/ CS_covid['new_case\/day'].shift(1)\nCS_covid['new_case\/day'] = CS_covid['new_case\/day'].replace(np.nan,'0.0')\nCS_covid['growth_ratio'] = CS_covid['growth_ratio'].replace(np.nan,'0.0')","ea540d15":"CS_covid_melt_df = pd.melt(CS_covid, id_vars=['Date'], value_vars=['Confirmed','Active','Cured','new_case\/day','Deaths'])","28f88620":"target_date = CS_covid_melt_df['Date'].max()\nfig = px.line(CS_covid_melt_df, x=\"Date\", y=\"value\", color='variable', \n              title=f'All-India Cases as of {target_date}')\nfig.show()","f6bc7b90":"IndiaDF = pd.read_csv('..\/input\/covid19-in-india\/covid_19_india.csv',\n                      converters={\n                          'ConfirmedIndianNational':lambda row: int(row.replace('-','0')),\n                          'ConfirmedForeignNational':lambda row: int(row.replace('-','0')),\n                          'Deaths':lambda row: int(''.join(filter(str.isdigit,row))) if row!='' else 0\n                      })\nIndiaDF = IndiaDF.rename({'State\/UnionTerritory':'State','Cured':'Recovered'},axis=1)\nIndiaDF['Active'] = IndiaDF['Confirmed'] - ( IndiaDF['Recovered']+ IndiaDF['Deaths'])","056705ae":"IndiaDF['Date'] = pd.to_datetime(IndiaDF['Date'],format='%d\/%m\/%y')\nIndiaDF.sort_values('Date',inplace=True)\nIndiaTotalDF = IndiaDF[['Date','Recovered','Deaths','Active','Confirmed']].groupby('Date').sum().reset_index()","0bea0eaf":"columns=['Active','Recovered','Deaths']\nIndiaPercDF=IndiaTotalDF.set_index('Date')[columns]\nIndiaPercDF=IndiaPercDF.div(IndiaPercDF.sum(axis=1), axis=0).multiply(100)\nIndiaPercDF.reset_index(inplace=True)\n\nfig=go.Figure(data=go.Pie(labels=columns,\n                values=[IndiaPercDF.iloc[IndiaPercDF['Date'].idxmax(axis=1)]['Active'],\n                        IndiaPercDF.iloc[IndiaPercDF['Date'].idxmax(axis=1)]['Recovered'],\n                       IndiaPercDF.iloc[IndiaPercDF['Date'].idxmax(axis=1)]['Deaths']\n                       ]),layout={'template':'plotly_dark'})\nfig.update_layout(title_text=\"Coronavirus Cases in India a\/o \"+IndiaTotalDF['Date'].max().strftime(\"%d-%b'%y\"))\nfig.show()\nmeltedDF=pd.melt(IndiaPercDF[columns[::-1]+['Date']],id_vars=['Date'], var_name='Value Type', value_name='Share Percentage')\n","416ad96d":"fig = px.bar(meltedDF, \n       x = \"Share Percentage\",\n       animation_frame = meltedDF['Date'].astype(str), \n       color = 'Value Type', \n       barmode = 'stack', height=400,\n       template='plotly_dark',\n       title='Cases percentage share over time',\n       orientation='h')\nfig.show()","6ab57168":"df['Date'] = pd.to_datetime(df['Date'],dayfirst=True)\ndf1=df.groupby('Date').sum()\ndf1.reset_index(inplace=True)","881b9935":"df2=df1.tail(25)\ndf2['Date'] = df2['Date'].apply(lambda x: x.strftime('%Y-%m-%d'))\nplt.figure(figsize=(14,8))\nsns.barplot(data=df2,x='Date',y='Confirmed',color=sns.color_palette('Set3')[3],label='Confirmed')\nsns.barplot(data=df2,x='Date',y='Cured',color=sns.color_palette('Set3')[4],label='Cured')\nsns.barplot(data=df2,x='Date',y='Deaths',color=sns.color_palette('Set3')[5],label='Deaths')\nplt.xlabel('Date')\nplt.ylabel('Count')\nplt.xticks(rotation = 90)\nplt.title(\"Total Confirmed, Active, Death in India\" , fontsize = 20)\nplt.legend(frameon=True,fontsize=12);","b9f2f282":"state=list(Labs['state'].value_counts().index)\ncount=list(Labs['state'].value_counts())\nplt.figure(figsize=(14,8))\nsns.barplot(x=count,y=state,color=sns.color_palette('Set3')[10])\nplt.xlabel('Counts')\nplt.ylabel('States')\nplt.title('ICMR Test labs per States')\nplt.tight_layout()","0eece43f":"## State-wise Breakdown","dd80f7ea":"## Bar Chart Race","bf9b64f0":"## Test Labs","71f4336e":"# Importing the libraries","a0b39562":"# Reading the data","977c0a47":"## Country Breakdown","50e88365":"### Corona Virus is more dominant among men.","77b1c93a":"### Majority of people affected are in 20-50 age group.","afad67d6":"# Exploring the data","a7cbdcfe":"## Age Group Analysis","78ce6c0c":"## Gender-wise Analysis"}}