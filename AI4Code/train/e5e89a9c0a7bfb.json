{"cell_type":{"329772c5":"code","ad5952e6":"code","5fd61376":"code","c62e0037":"code","e0579ad6":"code","3c0bdb06":"code","801bc472":"code","c39a7f77":"code","ea598ea8":"code","2cf0388c":"code","a689bdae":"code","a1692cc7":"code","7d3572e8":"code","d2f8a9c7":"code","3ecf38fc":"code","1409a83f":"code","58fce00a":"code","60291314":"code","68a9de02":"code","04727eda":"code","3606d631":"code","ff617a7f":"code","1e37a6fe":"code","51a54538":"code","7344ecaa":"code","ca75b3f2":"code","e695c813":"code","ae5e133a":"code","2e156ff2":"code","f91bb5ee":"code","7337d2cd":"code","43dff56c":"code","889051a7":"code","a2430d70":"code","e13c35dc":"code","840b2097":"code","1fedcfcb":"code","bbbb1815":"code","cf4442a9":"code","91244a7d":"code","2dd6f8f2":"code","28cea6ce":"code","e2e7cbbf":"code","51582f73":"markdown","2d5d54e1":"markdown","c89808b2":"markdown","b9f45c8d":"markdown","e653ecb5":"markdown","1e883a63":"markdown","82a85a8f":"markdown","9e52aecb":"markdown","101f684f":"markdown","7515140c":"markdown","f5bf2441":"markdown","01c95b49":"markdown","d9a6586c":"markdown","8e035723":"markdown","26beddb5":"markdown","4fe2e058":"markdown","50500f1d":"markdown","9b288191":"markdown","cae2ed16":"markdown","fb35ec1b":"markdown","cf2e598b":"markdown","93d40fd7":"markdown","3be2c047":"markdown","1dbb98ee":"markdown","499352d3":"markdown","7f38731f":"markdown","f16cf68d":"markdown","083bb4fe":"markdown","2c8d355d":"markdown","845e131c":"markdown","c6e9aa68":"markdown","6c4bf53f":"markdown"},"source":{"329772c5":"# This Python 3 environment comes with many helpful analytics libraries installed\n# It is defined by the kaggle\/python Docker image: https:\/\/github.com\/kaggle\/docker-python\n# For example, here's several helpful packages to load\n\nimport numpy as np # linear algebra\nimport pandas as pd # data processing, CSV file I\/O (e.g. pd.read_csv)\n\n# Input data files are available in the read-only \"..\/input\/\" directory\n# For example, running this (by clicking run or pressing Shift+Enter) will list all files under the input directory\n\nimport os\nfor dirname, _, filenames in os.walk('\/kaggle\/input'):\n    for filename in filenames:\n        print(os.path.join(dirname, filename))\n\n# You can write up to 20GB to the current directory (\/kaggle\/working\/) that gets preserved as output when you create a version using \"Save & Run All\" \n# You can also write temporary files to \/kaggle\/temp\/, but they won't be saved outside of the current session","ad5952e6":"import math\nimport pandas as pd\nimport numpy as np\nimport matplotlib.pyplot as plt\nimport seaborn as sns\nimport matplotlib.patches as mpatches\nimport statsmodels.tsa.stattools as sts\nfrom statsmodels.tsa.seasonal import seasonal_decompose\nimport statsmodels.graphics.tsaplots as sgt\nfrom statsmodels.tsa.arima_model import ARMA\nfrom statsmodels.tsa.statespace.sarimax import SARIMAX\nfrom itertools import product\npd.options.display.max_rows=10\nsns.set()","5fd61376":"raw_data=pd.read_csv('\/kaggle\/input\/covid-world-vaccination-progress\/country_vaccinations.csv')\n","c62e0037":"dfc=raw_data.copy()\ndfc.info()","e0579ad6":"dfc.isnull().sum()","3c0bdb06":"dfc.date=pd.to_datetime(dfc.date, format='%Y-%m-%d')\nfor country in dfc.country.unique():\n    dfc.loc[dfc.country==country,'total_vaccinations':'daily_vaccinations_per_million']=dfc.loc[dfc.country==country,'total_vaccinations':'daily_vaccinations_per_million'].interpolate(axis=0)\n    dfc.loc[dfc.country==country,'total_vaccinations':'daily_vaccinations_per_million']=dfc.loc[dfc.country==country,'total_vaccinations':'daily_vaccinations_per_million'].fillna(value=0,axis=0)\n    \n\n","801bc472":"dfc.loc[:,'total_vaccinations':'daily_vaccinations']=dfc.loc[:,'total_vaccinations':'daily_vaccinations'].astype(int)\ndfc.loc[:,'total_vaccinations_per_hundred':'daily_vaccinations_per_million']=dfc.loc[:,'total_vaccinations_per_hundred':'daily_vaccinations_per_million'].astype(float)","c39a7f77":"dfc.loc[dfc.country=='England','iso_code']=dfc.loc[dfc.country=='England','iso_code'].fillna('GB-ENG')\ndfc.loc[dfc.country=='Northern Cyprus','iso_code']=dfc.loc[dfc.country=='Northern Cyprus','iso_code'].fillna('CYP')\ndfc.loc[dfc.country=='Northern Ireland','iso_code']=dfc.loc[dfc.country=='Northern Ireland','iso_code'].fillna('GB-NIR')\ndfc.loc[dfc.country=='Scotland','iso_code']=dfc.loc[dfc.country=='Scotland','iso_code'].fillna('GB-SCT')\ndfc.loc[dfc.country=='Wales','iso_code']=dfc.loc[dfc.country=='Wales','iso_code'].fillna('GB-WLS')","ea598ea8":"dfc.isnull().sum()","2cf0388c":"dfc.head()","a689bdae":"print('Data availabe from:' , dfc.date.min(),' to: ',dfc.date.max())\nprint('Total countires available in data:\\t', dfc.country.unique().size)\nprint('Types of vaccines in data:\\t',dfc.vaccines.unique().size)","a1692cc7":"total_vaccinations=dfc.groupby(['country']).max().sort_values(by=['total_vaccinations'],ascending=False)","7d3572e8":"plt.figure(figsize=(20,8))\nsns.barplot(data=total_vaccinations,x=total_vaccinations.index,y='total_vaccinations',hue_order='total_vaccinations')\nplt.xlabel('country',fontsize=20)\nplt.ylabel('total vaccinations',fontsize=20)\nplt.xticks(rotation=90)\nplt.title('country wise total vaccinations',fontsize=30)\nplt.show()","d2f8a9c7":"mean_daily_vacc=dfc.groupby(['country']).mean().sort_values(by=['daily_vaccinations'],ascending=False)","3ecf38fc":"plt.figure(figsize=(20,8))\nsns.barplot(data=mean_daily_vacc,x=mean_daily_vacc.index,y='daily_vaccinations',hue_order='daily_vaccinations')\nplt.xlabel('country',fontsize=20)\nplt.ylabel('daily vaccinations',fontsize=20)\nplt.xticks(rotation=90)\nplt.title('country wise average daily vaccinations',fontsize=30)\nplt.show()","1409a83f":"tot_vacc_hundred=dfc.groupby(['country']).max().sort_values(by=['total_vaccinations_per_hundred'],ascending=False)","58fce00a":"plt.figure(figsize=(20,8))\nsns.barplot(data=tot_vacc_hundred,x=tot_vacc_hundred.index,y='total_vaccinations_per_hundred',hue_order='total_vaccinations_per_hundred')\nplt.xlabel('country',fontsize=20)\nplt.ylabel('daily vaccinations',fontsize=20)\nplt.xticks(rotation=90)\nplt.title('Total Vaccinations Per Hundred',fontsize=30)\nplt.show()","60291314":"plt.figure(figsize=(20,8))\nsns.lineplot(data=dfc,x='date',y='total_vaccinations',hue='country')\nplt.xlabel('Date',fontsize=20)\nplt.ylabel('daily vaccinations',fontsize=20)\nplt.title('Country wise Daily Vaccinations',fontsize=30)\nplt.legend(bbox_to_anchor=(1.05,0.6,0.5,0.4),loc=2,borderpad=0)\nplt.show()","68a9de02":"dfc_vac_vs_fullvac=dfc.groupby(['date']).sum()","04727eda":"vac=mpatches.Patch(color='#4c72b0',label='People Vaccinated')\nfull_vac=mpatches.Patch(color='#dd8452',label='People fully Vaccinated')\nplt.figure(figsize=(20,8))\nsns.lineplot(data=dfc_vac_vs_fullvac,x=dfc_vac_vs_fullvac.index,y=dfc_vac_vs_fullvac.people_vaccinated)\nsns.lineplot(data=dfc_vac_vs_fullvac,x=dfc_vac_vs_fullvac.index,y=dfc_vac_vs_fullvac.people_fully_vaccinated)\nplt.xlabel('Date',fontsize=20)\nplt.ylabel('daily vaccinations',fontsize=20)\nplt.title('Country wise Daily Vaccinations',fontsize=30)\nplt.legend(handles=[vac,full_vac],loc='upper left')\nplt.show()","3606d631":"dfc_vacc=dfc.groupby(['vaccines']).max().sort_values(by=['total_vaccinations'],ascending=False).reset_index()[['vaccines','total_vaccinations']]","ff617a7f":"plt.figure(figsize=(20,8))\nsns.barplot(data=dfc_vacc,x='vaccines',y='total_vaccinations',hue_order='total_vaccinations')\nplt.xlabel('Vaccines',fontsize=20)\nplt.xticks(rotation=90)\nplt.ylabel('Total Vaccinations',fontsize=20)\nplt.title('Types of Vaccines',fontsize=30)\nplt.show()","1e37a6fe":"dfc.groupby(['country']).max().reset_index()[['country','vaccines','total_vaccinations']].sort_values(by='total_vaccinations',ascending=False).reset_index()","51a54538":"dfc_tsa=dfc.groupby(['date']).max().reset_index()[['date','total_vaccinations']].set_index('date').astype(int)","7344ecaa":"plt.figure(figsize=(20,8))\ndfc_tsa.plot()\nplt.show()","ca75b3f2":"sts.adfuller(dfc_tsa)","e695c813":"dfc_tsa['D1']=dfc_tsa.total_vaccinations.diff(1)","ae5e133a":"sts.adfuller(dfc_tsa.D1[1:])","2e156ff2":"dfc_tsa['D2']=dfc_tsa.total_vaccinations.diff(2)","f91bb5ee":"sts.adfuller(dfc_tsa.D2[2:])","7337d2cd":"dfc_tsa['log1']=np.log(dfc_tsa.total_vaccinations)","43dff56c":"plt.figure(figsize=(20,8))\ndfc_tsa.log1.plot()\nplt.show()","889051a7":"ses_dec=seasonal_decompose(dfc_tsa.log1,period=1)\nses_dec.plot()\nplt.show()","a2430d70":"sts.adfuller(dfc_tsa.log1)","e13c35dc":"sgt.plot_acf(dfc_tsa.log1,lags=40,zero=False)\nplt.show()","840b2097":"sgt.plot_pacf(dfc_tsa.log1,lags=30,zero=False,method='ols')\nplt.show()","1fedcfcb":"\nresults=[]\nbest_aic=float(math.inf)\nfor p in list(product(np.arange(0, 5), np.arange(0, 5), np.arange(0, 5), np.arange(0, 2), np.arange(0, 5), np.arange(0, 3))):\n    try:\n        model=SARIMAX(dfc_tsa.log1['2020-12-15':],order=(p[0],0,p[1]),seasonal_order=(p[2],p[3],p[4],p[5]))\n        result=model.fit(disp=False)\n    except:\n        continue\n    aic=result.aic\n    if aic<best_aic:\n        optimal_model=result\n        best_aic=aic\n        best_param=p\n        results.append([best_param,best_aic])\n        ","bbbb1815":"results","cf4442a9":"print('best parameter is:',best_param,' with AIC value:',best_aic)","91244a7d":"optimal_model.summary()\n","2dd6f8f2":"sgt.plot_acf(optimal_model.resid,lags=40,zero=False)\nplt.show()","28cea6ce":"\nplt.figure(figsize=(20,8))\ndfc_tsa.total_vaccinations.plot()\nnp.exp(optimal_model.fittedvalues).plot(color='r')\nplt.show()","e2e7cbbf":"plt.figure(figsize=(20,8))\ndfc_tsa.total_vaccinations.plot()\nnp.exp(optimal_model.predict(start=len(dfc_tsa.total_vaccinations)-5,end=len(dfc_tsa.total_vaccinations)+10,dynamic=False)).plot()\nplt.show()\n","51582f73":"Doing adfuller test on data","2d5d54e1":"* From chart we can see daily average daily vaccinations happening in the country. Daily vaccinations in America is more than China and India, which are most populated countries.","c89808b2":"# **Covid World Vaccination Progress**","b9f45c8d":"observing trend and seasonal decomposition","e653ecb5":"Doing log transformation to make data stationary","1e883a63":"* Chaging dates to datetime format\n* Interpolating values for numerical data","82a85a8f":"# **Data Visualisation**","9e52aecb":" **People Vaccinated vs Fully Vaccinated**","101f684f":"**Country wise Average Daily Vaccinations per Million**","7515140c":"**Total Vaccinations Per Hundred**","f5bf2441":"Making predicitons","01c95b49":"Checking residual lag","d9a6586c":"* As can be seen from the bar graph the leading country in terms of vaccination is the United states followed by China and the United Kingdom.\n\n* There are many countries on the extreme right of chart with very low total vaccinations.It can be noted that population of these countries is low.","8e035723":"# **Thankyou** ","26beddb5":"# **Forecasting**","4fe2e058":"**Types of Vaccines**","50500f1d":"# **Importing Libraries**","9b288191":"* Assgning country codes","cae2ed16":"**Country Wise Total Vaccinations**","fb35ec1b":"* Daily vaccinations done by countries","cf2e598b":" Comparing our model with real data","93d40fd7":"# **Importing Data**","3be2c047":"Ploting acf and pacf ","1dbb98ee":"Model Summary","499352d3":"pvalue>0.05 so transformation needed to make it stationary","7f38731f":"**Country Wise Daily Vaccinations**","f16cf68d":"* Ratio of total vaccinations population to total population of the country. \n* We can see the countries which has very less number of total vaccinated populations has maximum part of its countries population vaccinated. \n* United states, China and India which had maximum vaccinated population dont have maximum part of their population vaccinated","083bb4fe":"# **Data Preprocessing**","2c8d355d":"**Country Wise used Vaccines**","845e131c":"* Filling NA values with 0","c6e9aa68":"From ACF plot we can say upto 4th lag is significant.\nwe will choose parameters in the range 0-4","6c4bf53f":"* Moderma,Pfizer\/BioNTech are most used vaccines."}}