{"cell_type":{"3697e453":"code","cd8f1036":"code","f772f57c":"code","f32bd904":"code","6b84b71b":"code","462e9554":"code","ac0d6911":"code","f1d229d0":"code","79ce5c1a":"code","94ac5c6a":"markdown","bdae9fdc":"markdown","3dc7ded4":"markdown","999e9984":"markdown","9ac4add3":"markdown","ec5575e8":"markdown","4da017a2":"markdown","d8acfcba":"markdown","17aa3909":"markdown","12ab80c1":"markdown","4726cc9c":"markdown"},"source":{"3697e453":"# This Python 3 environment comes with many helpful analytics libraries installed\n# It is defined by the kaggle\/python Docker image: https:\/\/github.com\/kaggle\/docker-python\n# For example, here's several helpful packages to load\n\nimport numpy as np # linear algebra\nimport pandas as pd # data processing, CSV file I\/O (e.g. pd.read_csv)\n\nimport matplotlib.pyplot as plt\nimport seaborn as sns\n\n# Input data files are available in the read-only \"..\/input\/\" directory\n# For example, running this (by clicking run or pressing Shift+Enter) will list all files under the input directory\n\nimport os\nfor dirname, _, filenames in os.walk('\/kaggle\/input'):\n    for filename in filenames:\n        print(os.path.join(dirname, filename))\n\n# You can write up to 20GB to the current directory (\/kaggle\/working\/) that gets preserved as output when you create a version using \"Save & Run All\" \n# You can also write temporary files to \/kaggle\/temp\/, but they won't be saved outside of the current session","cd8f1036":"episodes_df = pd.read_csv('\/kaggle\/input\/parks-and-recreation-episode-data\/parks_and_rec_episodes.csv',\n                          parse_dates=['original_air_date'])\nimdb_df = pd.read_csv('\/kaggle\/input\/parks-and-recreation-episode-data\/parks_and_rec_imdb.csv',\n                      parse_dates=['original_air_date'])\n\nepisodes_df.head()","f772f57c":"# Only keep relevant columns from the IMDb dataset to avoid duplication.\nimdb_df = imdb_df[['title', 'original_air_date', 'imdb_rating', 'total_votes', 'desc']]\n\nparks_and_rec_df = episodes_df.merge(imdb_df, how='left', on=['title', 'original_air_date'])\n\nparks_and_rec_df.head()","f32bd904":"sns.lmplot(x=\"episode_num_overall\", y=\"imdb_rating\", hue=\"season\", data=parks_and_rec_df, height=6, aspect=2, ci=None)\nplt.xlabel(\"Episode\")\nplt.ylabel(\"IMDb Rating\")\nplt.title(\"IMDb Ratings for Parks and Recreation episodes\");","6b84b71b":"best_writers = parks_and_rec_df.groupby('written_by')['imdb_rating'].agg(['mean', 'count']).sort_values(by='mean')\n\n# combine the writers names with their episode counts\nlabels = ['{} ({})'.format(name, best_writers.loc[name, 'count']) for name in best_writers.index]\nbest_writers.index = labels\n\nbest_writers.plot(kind='barh', figsize=(14,14), y='mean', legend=False,\n                   title=\"Parks & Recreation Writers by Average IMDb Rating\");","462e9554":"best_directors = parks_and_rec_df.groupby('directed_by')['imdb_rating'].agg(['mean', 'count']).sort_values(by='mean')\n\n# combine the directors names with their episode counts\nlabels = ['{} ({})'.format(name, best_directors.loc[name, 'count']) for name in best_directors.index]\nbest_directors.index = labels\n\nbest_directors.plot(kind='barh', figsize=(14,14), y='mean', legend=False,\n                    title=\"Parks & Recreation Directors by Average IMDb Rating\");","ac0d6911":"character_names = ['Ron', 'April', 'Leslie', 'Andy', 'Ben', 'Ann', 'Jerry', 'Tom', 'Chris', 'Donna']\n\nfor char_name in character_names:\n    parks_and_rec_df[char_name] = np.where(parks_and_rec_df['desc'].str.contains(char_name), 1, 0)\n    \nparks_and_rec_df.head()","f1d229d0":"char_colors = {'Leslie': '#edc948', 'Ron': '#e15759', 'April': '#f28e2b', \n               'Chris': '#76b7b2', 'Tom': '#59a14f', 'Ben': '#4e79a7',\n               'Donna': '#b07aa1', 'Ann': '#ff9da7', 'Andy': '#9c755f',\n               'Jerry': '#bab0ac'}\n\nseries_stars = parks_and_rec_df[character_names].sum().sort_values()\ncolors = [char_colors[char] for char in series_stars.index]\nseries_stars.plot.barh(figsize=(10, 6), color=colors,\n                       title='Parks & Rec Character Mentions in Episode Descriptions');","79ce5c1a":"fig, axes = plt.subplots(7, 1, figsize=(10,14), sharex=True)\n\nfor s in range(1, 8):\n    gb = parks_and_rec_df[['season'] + character_names].groupby('season').sum()\n    season_stars = gb.T[s].sort_values().tail(3) # top 3 characters in each season\n    colors = [char_colors[char] for char in season_stars.index]\n    season_stars.plot.barh(ax=axes[s-1], title='Season ' + str(s), color=colors)\nfig.suptitle(\"Parks & Rec Character Mentions in Episodes by Season\")\nfig.tight_layout();","94ac5c6a":"Now we can sum the columns to get the total number of mentions for each character for the entire series.","bdae9fdc":"### Who are the most important characters on Parks & Rec?\n\nIn their R notebook [Analysis of the show 'Parks and Recreation'](https:\/\/www.kaggle.com\/ruhlmeyer\/analysis-of-the-show-parks-and-recreation#SECTION-4:-Observations), Ryan Uhlmeyer showed how to use the number of times characters are mentioned in episode descriptions to estimate who the most important characters are in the show. Let's recreate that here using Pandas.\n\nWe'll start by adding a column to the IMDb data set for each main character, noting whether that character's name is mentioned in the description for each episode.","3dc7ded4":"### Who are the fan-favorite Parks & Rec directors?","999e9984":"It looks like series co-creator [Michael Schur](https:\/\/en.wikipedia.org\/wiki\/Michael_Schur) and star [Amy Poehler](https:\/\/en.wikipedia.org\/wiki\/Amy_Poehler) are the favorite writers after teaming up for the series finale. Both wrote some very highly regarded episodes individually as well.","9ac4add3":"The Directing duties on Parks & Rec was spread out a lot more than many shows I've seen. It looks like series co-creator Michael Schur has the highest average rating, while [Dean Holland](https:\/\/en.wikipedia.org\/wiki\/Dean_Holland) directed the most episodes (27).","ec5575e8":"We can see that Leslie remains the main character throughout the run of the show, but the focus on supporting characters changes from one season to the next. Also note that there are fewer mentions overall in seasons 1 and 7 because those seasons have fewer episodes than the rest.","4da017a2":"### Which seasons have the highest IMDb ratings?","d8acfcba":"It takes the first season for Parks & Rec to really find itself, but after that the quality is consistently high. Season 3 seems to be the fan favorite, with no episode scoring below 8.0. The series ends on a very high note at the end of its 7th season.","17aa3909":"As expected, Leslie Knope is the most often mentioned character, followed by Ron, Tom, and Ben. We can also look at who was mentioned most often in each season to see if focus changes throughout the series.","12ab80c1":"### Load and Merge the episode data and IMDb ratings files\nA short example notebook to show how to load and merge the data from the two files in the Parks and Recreation dataset. The common columns are Title and Air Date.","4726cc9c":"### Who are the fan-favorite Parks & Rec writers?"}}