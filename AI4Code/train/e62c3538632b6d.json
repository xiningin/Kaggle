{"cell_type":{"56c11773":"code","4c6880f1":"code","d303dc33":"code","305cfa87":"code","0a3013a9":"code","6cbf668a":"code","8d1b0198":"code","167be8a0":"code","c721b029":"code","7cc7a7d1":"code","ee5a077b":"code","f6ca6d16":"code","2643aa87":"code","9f3eccb9":"code","579875a8":"code","63bd47a7":"code","55622cf4":"code","5be87aa4":"code","c895ca67":"code","ac254e22":"code","0796edfb":"markdown","8586e801":"markdown","3a2864d6":"markdown","0ec423cc":"markdown","078fef29":"markdown","073a4bea":"markdown","c1fb25e5":"markdown","b1075a37":"markdown","cc5e38be":"markdown","bed22beb":"markdown","ec8205db":"markdown","b1f27f0b":"markdown","92f9d30b":"markdown","1cf9b7d0":"markdown","8283f6e8":"markdown","ffc98357":"markdown","1940c35e":"markdown","ea645c30":"markdown","46a58fde":"markdown","6e08b072":"markdown","6697243f":"markdown","70060aef":"markdown","02fcbd45":"markdown","a4e92686":"markdown","2caeed93":"markdown","e68ae36c":"markdown","fcd47087":"markdown","25106fc7":"markdown","5dc05021":"markdown","33d06f39":"markdown","a7cd154d":"markdown","d3ab8560":"markdown","74a2b3ff":"markdown","13771f86":"markdown","8a787024":"markdown","8a4831f7":"markdown","6255542b":"markdown","6851b224":"markdown","0ef6325d":"markdown","ea1de211":"markdown","2ed42fb8":"markdown","4094b374":"markdown","4b6cc888":"markdown","32bcc455":"markdown"},"source":{"56c11773":"%%html\n<style> \n@import url('https:\/\/fonts.googleapis.com\/css?family=Orbitron|Roboto');\na {color: #37c9e1; font-family: 'Roboto';} \nh1 {color: #C20E69; font-family: 'Poppins'} \nh2, h3 {color: #25B89B; font-family: 'Poppins';}\nh4 {color: #818286; font-family: 'Roboto';}\n                                      \n<\/style>","4c6880f1":"# Libraries\n\n# Main\n#----------------------\nimport pandas as pd\nimport numpy as np\n\n# Data Viz\n#----------------------\nimport seaborn as sns\nimport matplotlib.pyplot as plt\nimport pylab\nplt.style.use('fivethirtyeight')\n\n# Stats\n#----------------------\nfrom scipy import stats\nfrom scipy.stats import skewtest\nfrom scipy.stats import median_test\nfrom scipy.stats import shapiro \nfrom statsmodels.stats.proportion import proportions_ztest \n\n# Settings\n#----------------------\npd.set_option(\"display.max_columns\",None);\npd.set_option(\"display.max_rows\",None);\n","d303dc33":"control = pd.read_excel(r\"..\/input\/abtest\/ab_testing_data.xlsx\", sheet_name=\"Control Group\")\ntest = pd.read_excel(r\"..\/input\/abtest\/ab_testing_data.xlsx\", sheet_name=\"Test Group\")","305cfa87":"def descriptive_statistics(dataframe):\n    print(\"Data Descriptive Statistics\",\"\\n\")\n    name =[x for x in globals() if globals()[x] is dataframe][0]\n    print(\"Dataframe: %s\" % name,\"\\n\")\n    print(\"Data Shape: \",dataframe.shape,\"\\n\")\n    print(dataframe.info(),\"\\n\")\n    print(\"First 3 rows:\",\"\\n\",dataframe.head(3),\"\\n\")\n    if dataframe.isna().any().sum() == 0:\n        print(\"There are no missing value.\")\n    else:\n        print(dataframe.isna().any().sum())\n    print(\"_\"*60)","0a3013a9":"for i in [control,test]:\n    print()\n    descriptive_statistics(i)","6cbf668a":"control.describe([0.10, 0.25, 0.50, 0.75, 0.90, 0.95, 0.99]).T","8d1b0198":"test.describe([0.10, 0.25, 0.50, 0.75, 0.90, 0.95, 0.99]).T","167be8a0":"AB = pd.DataFrame()\n\nAB[\"A\"] = control[\"Purchase\"]\nAB[\"B\"] = test[\"Purchase\"]\nAB.describe()","c721b029":"AB.describe().T","7cc7a7d1":"vals, names, xs = [],[],[]\nfor i, col in enumerate(AB.columns):\n    vals.append(AB[col].values)\n    names.append(col)\n    xs.append(np.random.normal(i + 1, 0.04, AB[col].values.shape[0]))  # adds jitter to the data points - can be adjusted\n    \nplt.boxplot(vals, labels=names)\npalette = ['#25B89B', '#C20E69']\nfor x, val, c in zip(xs, vals, palette):\n    plt.scatter(x, val, alpha=0.7, color=c)\nplt.show()","ee5a077b":"stats.probplot(AB[\"A\"], dist=\"norm\", plot=pylab)\npylab.title(\"Control Group - Maximum Bidding\")\npylab.show()","f6ca6d16":"stats.probplot(AB[\"B\"], dist=\"norm\", plot=pylab)\npylab.title(\"Test Group - Average Bidding\")\npylab.show()","2643aa87":"# A-B test function.\ndef test_ab(dataframe, key1=\"A\", key2=\"B\", alpha=0.05, plot=True):\n    \"\"\"\n    this function performs hypothesis checks and t-tests between two independent groups.\n    dataframe: main dataframe of groups\n    key1: parameter is first group name\n    key2: parameter is second group name\n    alpha: the alpha confidence score\n    plot: showing boxplot with values\n    \"\"\"\n    import numpy as np\n    import matplotlib.pyplot as plt\n    from scipy import stats\n    from scipy.stats import shapiro\n\n    print(\"\u205d\" * 200)\n    print(\" \" * 25, \"\u259a \u2022 AB Test Function Analysis Reports \u2022 \u259a\", \" \" * 16)\n    print(\"-\" * 100, \"\\n\")\n    print(\"Normality Assumption\")\n    print(\"\u27a0\", \"Ho: The data follows a normal distribution.\")\n    print(\"\u27a0\", \"H1: The data does not follow a normal distribution.\")\n    print(\"-\" * 100, \"\\n\")\n    print(\"\u259a Normality Assumption Report\", \"\\n\")\n    # Normality Assumption\n    norm_A = shapiro(dataframe[key1])[1]\n    norm_B = shapiro(dataframe[key2])[1]\n    if norm_A >= alpha:  # first group normality assumption is OK.\n        print(key1, \": assumption of normality is provided \u2713. | p-value: {} | Null hypothesis is not rejected.\".format(\n            \"%.4f\" % norm_A))\n        if norm_B >= alpha:  # second group normality assumption is OK too.\n            print(key2,\n                  \": assumption of normality is provided \u2713. | p-value: {} | Null hypothesis is not rejected.\".format(\n                      \"%.4f\" % norm_B))\n            print(\"-\" * 100)\n            print(\"Assumption of normality is provided! \u2713\u2713 Levene Test is loading...\")\n            print(\"-\" * 100, \"\\n\")\n            print(\"Variance Homogenity Assumption\")\n            print(\"\u27a0 Ho: There is no difference between the variance of the both groups.\")\n            print(\"\u27a0 H1: There is a significant difference between the variance of the both groups.\")\n            print(\"-\" * 100, \"\\n\")\n            var_as = stats.levene(dataframe[key1], dataframe[key2])[1]\n            if var_as >= alpha:  # Variance Homogenity assumption is OK.\n                print(\"\u259a Variance Homogenity Assumption Report\", \"\\n\")\n                print(\"There is no difference between the variance of the both groups \u2713. | p-value {}\".format(\n                    \"%.4f\" % var_as))\n                print(\"Assumption of variance homogenity is provided!\u2713\u2713 \")\n                print(\"-\" * 100, \"\\n\")\n                print(\"All assumptions are provided. Test Statistic is ready \u2713\u2713\u2713\".upper())\n                print(\"-\" * 100, \"\\n\")\n                test_stat, pvalue = stats.ttest_ind(dataframe[key1], dataframe[key2], equal_var=True)\n                print('Test Statistic = %.4f, p-value = %.4f' % (test_stat, pvalue))\n                if pvalue < alpha:\n                    print(\"Ho: Rejected.\", key1, \"and\", key2,\n                          \"There is a statistically significant difference between the means with \",\n                          int(100 - 100 * alpha), \"% confidence \u2713.\")\n                    if dataframe[key1].mean() > dataframe[key2].mean():\n                        print(\"Group A mean value is bigger than Group B\")\n                    else:\n                        print(\"Group B mean value is bigger than Group A\")\n\n                else:\n                    print(\"Ho: can not rejected.\", key1, \"and\", key2,\n                          \"There is NOT  statistically significant difference between the means with \",\n                          int(100 - 100 * alpha), \"% confidence \u2713.\")\n            else:\n                print(\"There is a significant difference between the variance of the both groups. x\")\n                print(\"Variance Homogenity Assumption is failed, Welch T- Test is loading...\")\n                test_stat, pvalue = stats.ttest_ind(dataframe[key1], dataframe[key2], equal_var=False)\n                print('According to the non-homogeneous variance results: Test Statistic = %.4f, p-value = %.4f' % (\n                    test_stat, pvalue))\n                if pvalue < alpha:\n                    print(\"Ho: Rejected.\", key1, \"and\", key2,\n                          \"There is a statistically significant difference between the means with \",\n                          int(100 - 100 * alpha), \"% confidence \u2713.\")\n        else:  # second group normality assumption is not OK.\n            print(key2, \"Normality Assumption is failed. Non-parametric should be applied. p-value: {}\".format(\n                \"%.4f\" % norm_B))\n\n    else:  # first group normality assumption is not OK.\n        print(key1,\n              \"Normality Assumption is failed. Non-parametric should be applied. | p-value: {} | H0 rejected\".format(\n                  \"%.4f\" % norm_A))\n    if plot:\n        print(\"\")\n        vals, names, xs = [], [], []\n        for i, col in enumerate(dataframe.columns):\n            vals.append(dataframe[col].values)\n            names.append(col)\n            xs.append(np.random.normal(i + 1, 0.04, dataframe[col].values.shape[0]))  # adds jitter to the data points - can be adjusted\n        plt.boxplot(vals, labels=names)\n        palette = ['#25B89B', '#C20E69']\n        for x, val, c in zip(xs, vals, palette):\n            plt.scatter(x, val, alpha=0.7, color=c)\n        plt.show()","9f3eccb9":"test_ab(AB,\"A\", \"B\", alpha = 0.05, plot=True)","579875a8":"control_CTR=control[\"Click\"].sum()\/control[\"Impression\"].sum()\ntest_CTR= test[\"Click\"].sum() \/ test[\"Impression\"].sum()\n\nprint(control_CTR)\nprint(test_CTR)","63bd47a7":"df_CTR = pd.DataFrame({\"Existing(MAX) CTR\":[control_CTR], \"New(AVG) CTR\": [test_CTR]})\ndf_CTR.plot.bar(rot=0).legend(loc=3) ;","55622cf4":"clicks= np.array([control[\"Click\"].sum(),test[\"Click\"].sum()])\nshows= np.array([control[\"Impression\"].sum(), test[\"Impression\"].sum()])\nproportions_ztest(count=clicks, nobs=shows)","5be87aa4":"control_CR = control[\"Purchase\"].sum()\/control[\"Impression\"].sum()\ntest_CR = test[\"Purchase\"].sum() \/ test[\"Impression\"].sum()\n\nprint(\"Max Bidding CR:\", round(control_CR,4))\nprint(\"AVG Bidding CR:\", round(test_CR,4))","c895ca67":"df_CR=pd.DataFrame({\"Existing(max) CR\":[control_CR], \"New(avg) CR\": [test_CR]})\ndf_CR.plot.bar(rot=0).legend(loc=3) ;","ac254e22":"purchase= np.array([control[\"Purchase\"].sum(),test[\"Purchase\"].sum()])\nimpression= np.array([control[\"Impression\"].sum(), test[\"Impression\"].sum()])\nproportions_ztest(count=purchase, nobs=impression)","0796edfb":"---\n# &#128202; TEST ANALYSIS REPORT","8586e801":"**Hypothesis**  \n\u27a0Ho: The experiment has no effect on user behavior. (p_cont = p_test)  \n\u27a0H1: The experiment has an effect on user behavior. (p_cont \u2260 p_test)","3a2864d6":"# Analyze and Present A\/B Test Results  ","0ec423cc":"<div class=\"alert alert-block alert-info\" style=\"margin-top: 20px\">\n<p>&nbsp;<\/p>\n<p>As a result of the statistical tests applied to the data obtained by the two groups in the research, the groups <b>provided<\/b> all the necessary statistical assumptions in the literature. <\/p>\n<p>In this direction, it was <b>proved<\/b> statistically and scientifically that there was <b>no significant difference<\/b> between the <b>averages<\/b> of the two groups with <b>95% confidence.<\/b><\/p>\n<p><b>In line with these results, there is not statistically significant difference between purchase of the control group (Max Bidding) and purchase of the test group (Average Bidding)<\/b><\/p>\n<p>&nbsp;<\/p>\n<\/div>","078fef29":"<div class=\"alert alert-warning\" role=\"alert\" style=\"margin-top: 20px\">\n<ul>\n<li>Control and test group data were analyzed.<\/li>\n<li>No NA value was observed in both groups.<\/li>\n<li>When looked with the boxplot method, it was observed that there was no outlier in both groups.<\/li>\n<li>Testing was done between these two groups. Control group using the max bidding method as called A Test group using the new method, average bidding as called B<\/li>\n<li>Two independent samples t test was deemed appropriate for this comparison.<\/li>\n<li>For two independent samples t test; variance homogeneity and normality assumption were provided.<\/li>\n\n<\/ul>\n<hr \/>\n<p><strong>Is the new system advantageous?<\/strong><\/p>\n<p>As a result of the statistical tests applied to the data obtained by the two groups in the research, the groups <strong>provided<\/strong> all the necessary statistical assumptions in the literature.<\/p>\n<p>In this direction, it was <strong>proved<\/strong> statistically and scientifically that there was <strong>no significant difference<\/strong> between the <strong>averages<\/strong> of the two groups with <strong>95% confidence.<\/strong><\/p>\n<p>In line with these results, <strong>there is not statistically significant difference<\/strong> between purchase of the control group (Max Bidding) and purchase of the test group (Average Bidding)<\/p>\n<p><strong>The new method does not benefit your agency in terms of purchasing<\/strong><\/p>\n<hr \/>\n<p><strong>Did the user who saw the ad click on the ad in the new system?<\/strong><\/p>\n<p>There is a difference in <strong>Clicking<\/strong> between the two methods, but this is in favor of <strong>&quot;Maximum Bidding&quot;<\/strong>, which is the system your agency <strong>currently use.<\/strong><\/p>\n<hr \/>\n<p><strong>Did visitors buy the product in the new system?<\/strong><\/p>\n<p>There is a difference in <strong>Purchasing<\/strong> between the two methods, but this is in favor of <strong>&quot;Maximum Bidding&quot;<\/strong>, which is the system your agency <strong>currently use.<\/strong><\/p>\n<p>&nbsp;<\/p>\n<\/div>","073a4bea":"### Control Group - Maximum Bidding","c1fb25e5":"### Shapiro - Wilk Test","b1075a37":"# &#128477; Action Suggestions by Our Company","cc5e38be":"### Levene Test","bed22beb":"## Q - Q Plot","ec8205db":"---\n# Website Click Through Rate Analysis (CTR)","b1f27f0b":"<div class=\"alert alert-block alert-info\" style=\"margin-top: 20px\">\n<p>p - value &lt; 0.05 \u27a0 <strong>Reject Ho hypthesis. ( The experiment has no effect on user behavior. ) <\/strong><\/p>\n<p>When the bidding methods are examined, the effect of these methods on user behavior <strong>(clicks)<\/strong> is <strong>different.<\/strong> <\/p>\n<p>And this difference is in favor of the current <strong>&quot;max bidding&quot;<\/strong> method.<\/p>\n<\/div>","92f9d30b":"## Other Situations","1cf9b7d0":"<a href=\"https:\/\/www.oguzerdogan.com\/\">\n    <img src=\"https:\/\/www.oguzerdogan.com\/wp-content\/uploads\/2020\/10\/logo_oz.png\" width=\"200\" align=\"right\">\n<\/a>","8283f6e8":"<center><h1><strong>A\/B TEST & CONVERSION RATE PROJECT <\/strong><\/h1>\n<img\nsrc=\"https:\/\/www.oguzerdogan.com\/wp-content\/uploads\/2020\/11\/a-b-testing.jpg\">\n<\/center>","ffc98357":"\u27a0 Ho: There is not a statistically significant difference between the means with  \n\u27a0 H1: There is a statistically significant difference between the means with","1940c35e":"The distribution seems normal, however the shapiro-wilk test will be applied to be sure.","ea645c30":"### Test Group - Average Bidding","46a58fde":"\u27a0 Ho: There is no difference between the variance of the both groups.  \n\u27a0 H1: There is a significant difference between the variance of the both groups.","6e08b072":"#### At least one group does not follow a normal distribution\n- In this case the non parametric test \"Mann Whitney - U test\" is applied.\n\n#### Groups follow a normal distribution but variances are NOT homogenous\n- In this case <b>\"Welch Test\"<\/b> is applied.   \n- For this option in <b>Two Independent Sample T Test Function<\/b> `equal_var` = `True` argument is applied.","6697243f":"In this research,  there are two different groups and will investigate whether there is a statistically significant difference between the averages of these two different groups.\n\nWe have 40 observation and 4 feature in this dataset. \n\nTwo different groups will be taken from the **\"Purchase\"** column for comparison.\n\nControl group is standart bidding type: \" Maximum Bidding \"\n\nTest Group is new bidding type: \"Average Bidding \"","70060aef":"## 2. Variance Homogenity Assumption","02fcbd45":"## 1. Normality Assumption","a4e92686":"**Apparently, there are no outliers in these two group data, and the mean and median values are close to each other. However, box-plot graph will be applied to make sure.**","2caeed93":"# &#128214; Read Data","e68ae36c":"<div class=\"alert alert-success\" role=\"alert\">\n<p>As a result of the statistical tests carried out, the new system &quot;Average Bidding&quot; has not been observed to benefit your company.<\/p>\n<p>Some advice for action:<\/p>\n<p><strong>We recommend that you continue with the existing system.<\/strong><\/p>\n<ul>\n<li>A new test can be done by increasing the number of samples.<\/li>\n","fcd47087":"# \ud83d\uddd2 Result of Conversion Rate","25106fc7":"# \ud83d\uddd2 Result","5dc05021":"---\n# \ud83d\udcd1 MAIN RESULTS","33d06f39":"## Two Independent Sample T Test Hypothesis","a7cd154d":"---\n## &#9703; Separating Purchase columns from datasets","d3ab8560":"- It is a rate that shows how often users who saw the ad CLICKED the ad.  \n- Ad Clicks \/ Ad Shows","74a2b3ff":"---\n# Conversion Rate","13771f86":"\u27a0 Ho: The data follows a normal distribution.\n\n\u27a0 H1: The data does not follow a normal distribution.","8a787024":"## &#128270; Descriptive Statistics","8a4831f7":"<div class=\"alert alert-block alert-info\" style=\"margin-top: 20px\">\n<p>p - value &lt; 0.05 \u27a0 <strong>Reject Ho hypthesis. ( The experiment has no effect on user behavior. ) <\/strong><\/p>\n<p>When the bidding methods are examined, the effect of these methods on user behavior <strong>(Purchasing)<\/strong> is <strong>different.<\/strong> <\/p>\n<p>And this difference is in favor of the current <strong>&quot;max bidding&quot;<\/strong> method.<\/p>\n<\/div>","6255542b":"# &#128270;Two Independent Sample T Test","6851b224":"# &#128217; Load Libraries","0ef6325d":"**Assumptions:**\n\n1. Normality Assumption  \n    - This situation will be observed first with qqplot, then final decision will be reached with shapiro-wilks test and skewtest\n2. Homogeneity of variance\n    - Levene test ","ea1de211":"<div class=\"alert alert-block alert-info\" style=\"margin-top: 20px\">\n<p><strong>You should answer the following questions in your presentation:<\/strong><\/p>\n<ol>\n<li>How would you define the hypothesis of this A\/B test?<\/li>\n<li>Can we conclude statistically significant results?<\/li>\n<li>Which statistical test did you use, and why ?<\/li>\n<li>Based on your answer to Question 2, what would be your recommendation to client?<\/li>\n\n<\/ol>\n<\/div>","2ed42fb8":"**Hypothesis**  \n\u27a0Ho: The experiment has no effect on user behavior. (p_cont = p_test)  \n\u27a0H1: The experiment has an effect on user behavior. (p_cont \u2260 p_test)","4094b374":"<p>Conversion rate is calculated by dividing the <strong>number of conversions<\/strong> by the <strong>total number of visitors.<\/strong> <\/p>\n<p>For example, if an ecommerce site gets 200 visitors a month and has 50 sales, the conversion rate would equal <strong>25%<\/strong>.<\/p>","4b6cc888":"# \ud83d\uddd2 Result of CTR","32bcc455":"A is control group -- Maximum Bidding  \nB is test group -- Avarage Bidding\n\nWhen we looking at the averages of these two groups, the test group \"average bidding\", looks better.\n\nHowever, this is only a mathematical inference and **no business decision shouldn't be made based on this result.** \n\nWhether the result is random or not should be statistically investigated.\n\nThe main question is;\n\n**Is there a statistically significant difference between these two average of groups?**"}}