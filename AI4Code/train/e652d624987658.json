{"cell_type":{"8162148b":"code","0290cb34":"code","5b3ba116":"code","f8b4db68":"code","0a653a0d":"code","184ad90a":"code","044a40ac":"code","cba96187":"code","c7d87638":"code","f748f1ed":"code","a2153030":"code","58544517":"code","6a0f93d2":"code","e31a35dc":"code","21a2665e":"code","f3bdad0f":"code","58df8c71":"code","1fe3903a":"code","8be330bd":"code","35fbde38":"code","a48a2065":"code","aa13cc1c":"code","ba0f96a5":"code","34221106":"code","b1b6b5b6":"code","b8614b1a":"code","6abe5890":"code","ef50cb6c":"code","3e8241c6":"code","6abdbdd3":"code","38b5770b":"code","0f341944":"markdown","2549ec30":"markdown","c7566224":"markdown","f989e67e":"markdown","543657ff":"markdown","87269465":"markdown","3b2d2ac7":"markdown","bcba4d1f":"markdown","f6fde4bb":"markdown","daee5373":"markdown","94be4b31":"markdown","2d56388b":"markdown","6a1c5a69":"markdown","c8b6a6d1":"markdown","93874e74":"markdown","a6bb5210":"markdown","e56405cb":"markdown","2c674003":"markdown","c45aa574":"markdown","9a3b4bec":"markdown","1195419d":"markdown","a3f0f11a":"markdown","b5d3c6ca":"markdown","41d87bce":"markdown","01cef250":"markdown"},"source":{"8162148b":"import numpy as np\nimport pandas as pd\nimport matplotlib.pyplot as plt\nimport seaborn as sns","0290cb34":"df = pd.read_csv(r\"..\/input\/\/Chat_Team_CaseStudy.csv\")","5b3ba116":"df.head(1)","f8b4db68":"df.drop([\"Transaction Start Date\",\"Session Name\",\"Transaction End Date\",\"Customer Comment\"],inplace=True,axis=1)","0a653a0d":"df.head(1)","184ad90a":"plt.figure(figsize=(16,4))\ndf.head(100).Agent.value_counts().plot(kind=\"bar\")\nplt.show()","044a40ac":"df[\"Chat Duration\"].unique().size","cba96187":"df[\"TimeTaken\"] = df['Chat Duration'].str.split(\":\").apply(lambda x:int(x[0])*60+int(x[1])+int(x[2])\/60.).round(2)","c7d87638":"plt.figure(figsize=(25,8))\nsns.boxplot(df[\"Agent\"][:500],df[\"TimeTaken\"][:500])\nplt.xticks(rotation=90)\nplt.show()","f748f1ed":"df.head(2)","a2153030":"plt.figure(figsize=(16,4))\nplt.scatter(df.Agent,df.TimeTaken,alpha=.1,color=\"red\")\nplt.xticks(df.Agent[::5000],rotation=45)\nplt.axhline(50,color=\"g\")\nplt.show()","58544517":"plt.figure(figsize=(16,4))\nplt.hist(df.TimeTaken,bins=50,rwidth=.9)\nplt.show()","6a0f93d2":"A_name = df.Agent.unique()\nplt.figure(figsize=(16,4))\nfor an in A_name:\n    #print(an)\n    tt = df[df.Agent == an]\n    \n    meanTime = tt.TimeTaken.mean()\n    if meanTime>90:\n        plt.scatter(an,meanTime,alpha=.8,marker=\"*\",color=\"blue\",s=.02*np.pi*meanTime**2)\n        plt.text(an,meanTime+5,an)\n    else:\n        plt.scatter(an,meanTime,alpha=.2,marker=\"^\")\nplt.xticks(A_name[::10],rotation=90)\nplt.show()","e31a35dc":"plt.figure(figsize=(16,4))\ndf[\"Chat Closed By\"].value_counts().plot(kind=\"bar\")","21a2665e":"plt.figure(figsize=(16,4))\ndf[\"Interactive Chat\"].value_counts().plot(kind=\"bar\")","f3bdad0f":"plt.figure(figsize=(16,4))\ndf[\"Browser\"].head(100).value_counts().plot(kind=\"bar\") # INcrease the size of samples","58df8c71":"plt.figure(figsize=(16,4))\ndf[\"Operating System\"].head(100).value_counts().plot(kind=\"bar\") # INcrease the size of samples","1fe3903a":"plt.figure(figsize=(16,4))\ndf[\"Geo\"].head(1000).value_counts().plot(kind=\"bar\") # INcrease the size of samples\nplt.ylim(0,10) # comment if ylimit is NOT required","8be330bd":"plt.figure(figsize=(16,4))\ndf[\"Customer Rating\"].value_counts().plot(kind=\"bar\") # INcrease the size of samples\nplt.ylim(0,1500) # comment if ylimit is NOT required","35fbde38":"plt.figure(figsize=(16,4))\ndf[\"Transferred Chat\"].value_counts().plot(kind=\"bar\") # INcrease the size of samples\n# plt.ylim(0,1500) # comment if ylimit is NOT required","a48a2065":"plt.figure(figsize=(16,4))\nplt.hist2d(df[\"Order Value\"],df.TimeTaken,bins=20, cmap='Blues')\nplt.colorbar()\nplt.show()","aa13cc1c":"plt.figure(figsize=(16,4))\nplt.hexbin(df[\"Order Value\"],df.TimeTaken, gridsize=30, cmap='Blues')\nplt.colorbar()\nplt.show()","ba0f96a5":"# df[\"Customer Rating\"] = np.array(df[\"Customer Rating\"],dtype=\"int8\")\n# df[\"Customer Rating\"].isna()\n# df[\"Customer Rating\"] = df[\"Customer Rating\"].replace(\" \",\"\")\ndf[\"Customer Rating\"] = df[\"Customer Rating\"].replace(r\"\\s+\",np.nan,regex=True)\nNoRating = df[\"Customer Rating\"].isna().sum()\nprint(NoRating)\nplt.figure(figsize=(16,4))\ndf[\"Customer Rating\"].value_counts().plot(kind=\"bar\")\n# df[\"Customer Rating\"].value_counts().plot(kind=\"line\")\nplt.show()\n","34221106":"df[\"Customer Rating\"] =pd.to_numeric(df[\"Customer Rating\"],downcast=\"integer\")","b1b6b5b6":"df[\"Customer Rating\"].dtype","b8614b1a":"df[\"Customer Rating\"].value_counts()","6abe5890":"TotalRatings = df[df[\"Customer Rating\"]>=0][\"Customer Rating\"].value_counts().sum()\nTotalRatings","ef50cb6c":"pp = df[df[\"Customer Rating\"]>=9][\"Customer Rating\"].value_counts().sum()\n(pp\/TotalRatings)*100","3e8241c6":"\npp = df[df[\"Customer Rating\"]<=6][\"Customer Rating\"].value_counts().sum()\n(pp\/TotalRatings)*100","6abdbdd3":"\npp = df[(df[\"Customer Rating\"]>=7) & (df[\"Customer Rating\"]<=8)][\"Customer Rating\"].value_counts().sum()\n# pp\n(pp\/TotalRatings)*100","38b5770b":"plt.figure(figsize=(16,4))\npp = df[\"Chat Closed By\"].value_counts().plot(kind=\"bar\")\npp","0f341944":"### Chat closed by","2549ec30":"### Browser","c7566224":"# Read \"Explanation.docx\" to get more info about chat data.","f989e67e":"### Interactive chat","543657ff":"### Load dataset","87269465":"### Chat column unique numbers and total size","3b2d2ac7":"### Time taken by agents","bcba4d1f":"### Distribution (Hist) plot total Vs number of agents","f6fde4bb":"### Change the dtype of Customer rating column","daee5373":"### Neutral percentage","94be4b31":"### Drop columns which is not required","2d56388b":"### Count of Agents in 1st hundred rows","6a1c5a69":"### Load essential libraries","c8b6a6d1":"### Total number of ratings","93874e74":"### Geo location","a6bb5210":"### Chat Closed By","e56405cb":"### Number of transfered chat","2c674003":"### Customer Rating, Replace empty cell (\\s) with np.nan","c45aa574":"### Operating systems","9a3b4bec":"### Convert HH:MM:SS to toltal minutes spent on chatting","1195419d":"### Detractor percentage","a3f0f11a":"### Analyze 1st row","b5d3c6ca":"### Customer Ratings","41d87bce":"### Average Time taken by each Agent","01cef250":"### Promoter percentage"}}