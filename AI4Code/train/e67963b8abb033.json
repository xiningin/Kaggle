{"cell_type":{"d3dc487e":"code","e136c797":"code","e19a9e54":"code","95ff0ce3":"code","960c88dc":"code","9353d40f":"code","6827e396":"code","f8b05417":"code","aad1e53f":"code","306b9b43":"code","58505ab0":"code","b934ff5c":"code","d3462f90":"code","4a8b5aaf":"code","99436bd0":"code","e421f9ba":"code","810d450c":"code","c57d11a4":"markdown","d569d1d8":"markdown","59a027f7":"markdown","0d020516":"markdown","1f627b6b":"markdown","497ade0b":"markdown","bdd5b621":"markdown","7b90f8cb":"markdown","113cf043":"markdown","12b30af8":"markdown","20e2f8ff":"markdown","95896c1e":"markdown","9e9900d4":"markdown","091ec12b":"markdown","9284c01f":"markdown","2fda62c5":"markdown","3dc2f5b1":"markdown","85a5e941":"markdown","d34eeb96":"markdown","1686d8f8":"markdown","79031761":"markdown","b3a6be5e":"markdown","97e0cf22":"markdown","baa560ae":"markdown","85d74fef":"markdown","5d2c4200":"markdown","3ae2889b":"markdown","747c8c5d":"markdown","c3dfd7c3":"markdown","d0abcd4a":"markdown","078ea1a5":"markdown","04466630":"markdown","3cc0e5cb":"markdown","22700f04":"markdown","2cd1bbae":"markdown","57c7740c":"markdown","0b09040f":"markdown","1bb53d5b":"markdown","381c953d":"markdown"},"source":{"d3dc487e":"import pandas as pd\ndf = pd.read_csv(\"..\/input\/app-store-apple-data-set-10k-apps\/AppleStore.csv\")\ndf.head()\n","e136c797":"df_rating_not_0 = df.loc[(df['user_rating_ver'] != 0)]","e19a9e54":"genre_mean = df_rating_not_0.groupby(['prime_genre']).mean()['user_rating_ver'] \n\ngenre_mean = round(genre_mean.sort_values(ascending=False),2) \n\ndf_genre_mean = pd.DataFrame(genre_mean)\ndf_genre_mean\n\n\n#The .sort_values(ascending=False) command is to sort the result in descending order, based in the mean value\n\n#The round(xxxx,2) command is to round the result in 2 decimal places","95ff0ce3":"from matplotlib import pyplot as plt\n\ndf_lifestyle = df_rating_not_0.loc[(df_rating_not_0['prime_genre'] == 'Lifestyle')]\ndf_lifestyle['user_rating_ver'].hist()\nplt.title('Lifestyle apps histogram')\nplt.xlabel('User rating')\nplt.ylabel('Frequency (n)')\nplt.show()","960c88dc":"values = []\nfor i in range(1000):\n    selected_sample = df_rating_not_0.loc[(df_rating_not_0['prime_genre'] == 'Lifestyle')]['user_rating_ver'].sample(n=50, replace=True)\n    mean_sample = selected_sample.mean()\n    values += [mean_sample]\n\nplt.hist(values)\nplt.title('Lifestyle apps histogram')\nplt.xlabel('User rating')\nplt.ylabel('Frequency (n)')\nplt.show() \n","9353d40f":"import numpy as np\ngenres = df.prime_genre.unique()\ngenre_mean = []\n\nfor names in genres:\n    values = []\n    for i in range(1000):\n        selected_sample = df_rating_not_0.loc[(df_rating_not_0['prime_genre'] == names)]['user_rating_ver'].sample(n=50, replace=True)\n        mean_sample = selected_sample.mean()\n        values += [mean_sample]\n        \n    total_mean = sum(values)\/len(values) \n    SD = np.std(values)\n    genre_mean += [[names,total_mean,SD]]\n    \n    ","6827e396":"def getKey(item):\n    return item[1]\ngenre_mean = sorted(genre_mean, key=getKey, reverse=True)","f8b05417":"rank_num = 1\nrank = [['Book',1]]\nfor i in range(1,len(genre_mean)):\n    SE = ((((genre_mean[i-1][2])**2)\/1000)+(((genre_mean[i][2])**2)\/1000))**0.5\n    D = SE*1.96    #I'm working with the interval of 95% of confidence\n    M = genre_mean[i-1][1]-genre_mean[i][1]\n    if M > D:\n        rank += [[genre_mean[i][0],rank_num]]\n    else:\n        rank_num = rank_num + 1\n        rank += [[genre_mean[i][0],rank_num]]","aad1e53f":"df_rank = pd.DataFrame(rank, columns =['Genre', 'Rank'])\ndf_rank","306b9b43":"df_lifestyle = df_rating_not_0.loc[(df_rating_not_0['prime_genre'] == 'Lifestyle')]\ndf_lifestyle['user_rating_ver'].hist()\nplt.title('Lifestyle apps histogram')\nplt.xlabel('User rating')\nplt.ylabel('Frequency (n)')\nplt.show()","58505ab0":"df_games = df_rating_not_0.loc[(df_rating_not_0['prime_genre'] == 'Games')]\ndf_games['user_rating_ver'].hist()\nplt.title('Games apps histogram')\nplt.xlabel('User rating')\nplt.show()","b934ff5c":"genres = df.prime_genre.unique()\nprobability_genres = []\nfor names in genres:\n    df_selected = df_rating_not_0.loc[(df_rating_not_0['prime_genre'] == names)]['user_rating_ver']\n    probability_genres += [round((sum(df_selected[df_selected>=4].value_counts())\/len(df_selected))*100,1)]\nframe = {'Genre': genres,'Probability %': probability_genres}\ndf_probability = pd.DataFrame(frame)\ndf_probability = df_probability.sort_values(['Probability %'],ascending=[True])\ndf_probability","d3462f90":"df_google = pd.read_csv(\"..\/input\/google-play-store-apps\/googleplaystore.csv\")","4a8b5aaf":"#Droping NaN values\ndf_google = df_google.dropna()\n\n#Converting reviews to numeric\ndf_google['Reviews'] = pd.to_numeric(df_google['Reviews'], errors='coerce')\n\n#From 'Installs' column, I'm going to remove the '+' and convert it to numeric\ndf_google['Installs'] = df_google['Installs'].str.replace('+','')\ndf_google['Installs'] = df_google['Installs'].str.replace(',','')\ndf_google['Installs'] = pd.to_numeric(df_google['Installs'], errors='coerce')\n\n#Selecting just the information that it is now needed for me\ndf_google_select = df_google[['Category','Rating','Reviews','Installs']]\n\n#Creating a new column 'Review_rate'. It is the relationship(ratio) between the number of\n# user reviewn and the number if downloads\ndf_google_select['Review_rate'] = df_google_select['Reviews']\/df_google_select['Installs']\n\n\n#Finally, organizing the information by number of downloads.\ninstalls_bins = df_google_select.groupby(['Installs']).mean()\ninstalls_bins['Review_rate'] = round(installs_bins['Review_rate']*100,2)\n\n#and printing just the information for more than 5000 downloads\ndf_more_5000 = installs_bins.iloc[7: ,2: ]\ndf_more_5000","99436bd0":"import numpy as np\nbars = (5000,10000,50000,100000,500000,1000000,5000000,10000000,50000000,100000000,500000000,1000000000)\ny_pos = np.arange(len(df_more_5000))\nplt.bar(y_pos,df_more_5000['Review_rate'])\nplt.xticks(y_pos, bars, rotation=45)\nplt.axhline(df_more_5000['Review_rate'].mean(), color='r', linestyle='-')\nplt.title('Review rate for app with more than 5000 downloads ')\nplt.xlabel('Installs')\nplt.ylabel('Review Rate (%)')\nplt.show()","e421f9ba":"df_apple = df\ndf_apple['Rating_Total'] = df_apple['rating_count_tot'] + df_apple['rating_count_ver']\ndf_apple['Downloads_Estimate'] = 35.7 * df_apple['Rating_Total']\n\nbins = [5000,50000,100000,500000,1000000,5000000,10000000,50000000,100000000,500000000,1000000000]\nlabels = ['5000+','50000+','100000+','500000+','1000000+','5000000+','10000000+','50000000+','100000000+','500000000+']\ndf_apple['bins'] = pd.cut(df_apple['Downloads_Estimate'], bins=bins, labels=labels)\ninstalls = df_apple.groupby(['bins']).mean()['user_rating_ver']\n\ndf_apple_installs = pd.DataFrame(installs)\ndf_apple_installs","810d450c":"df_apple['bins'].value_counts()","c57d11a4":"#### When someone goes to rate an app, in general people give a good rate. People who don't like a app don't rate it a lot.","d569d1d8":"## 4. Probability of a good rating","59a027f7":"This histogram looks different from the previous one. I have now a normal distribution. This is a distribution that, \namong other characteristics, have a bell shape. \n\nI haven't created new data, I just collected much more information \nthan I had, and thanks to the \"central limit theorem\" now I have a bell shaped distribution.\nThis shape format is very important to perform some statistical calculations.\n\nNow, I'm going to perform that same calculation for all other genres","0d020516":"### Partially anwering the question #1","1f627b6b":"This shows how many app we have in each group. We don't have significant values for the last three groups.\nAnyway,","497ade0b":"Now, just organizing the information transforming the data into a dataframe.","bdd5b621":"Below, We have the most important calculation of this session (or of this study).\n\nI'll perform a hypothesis test to check if the difference between two consecutive positions is significant or not. I mean, if the difference is not significant, I would say that there is no difference between the genres, thus I'll consider that genres on the same position of the rank. Otherwise, the genres and its mean will be in different position of the rank.  \n\nHere follow a beautifull video from Kahn Academy explaining how to perform a hypotesis test that is close to the calculation that I'll show bellow: [Link here](https:\/\/www.khanacademy.org\/math\/statistics-probability\/significance-tests-confidence-intervals-two-samples\/comparing-two-means\/v\/hypothesis-test-for-difference-of-means)\n\n","7b90f8cb":"Beside, the last two bins the average doesn't differ too much from each group. We can exclude the results from the group with 100000000+ installs (mean 3.5) and the group with 500000000+ installs (mean NaN). See the information below.","113cf043":"Now, I will group the (new) dataset by genre and calculate the mean of the rating.","12b30af8":"## 2. Preparing the dataset","20e2f8ff":"#### We can conclude that the more user reviews an app has more downloads it has. Therefore, an app with 100 reviews is less popular than an app with 5000 reviews, for example.","95896c1e":"## 3. User Profile","9e9900d4":"#### The conclusion is that we cannot compare the apps just based on its mean. Let's take a look at the position #8 of the rank above. We cannot say wich app had the highest user rating: Food & Drink, Social Networking, Finance, Entertainment or Utilities. They are on the same position of the rank  (based on statistical arguments). For the same reason, We cannot decide wich app has the best rating: Book or Health & Fitness. The only thing we can say is that both are on the position #1 on the rank.","091ec12b":"That histogram shows how the users rating are distributed. \n\nNow, I'm going to do an interesting procedure:\n1. Choose randonly 50 users ratings from Lifestyle apps;\n2. I'll calculate the mean of this sample\n3. I'll repeat this process (steps 1 and 2) 1000 times !\n4. Then, I'll plot the histogram. Each calculation on step 2 will be a \"point\" in this histogram.","9284c01f":"### Book, Games, Business and Health & Fitness apps have more than 80% probability to have a user rating equal or more than 4.0 ","2fda62c5":"## 2.1 Going deeper","3dc2f5b1":"### We see that Book is the genre with the best rating (4.30) while Sports is the worst genre with rating mean equals to 3.50 ","85a5e941":"I didn't print the information because it looks like the mean table shown in the previous session. The only difference is that now the mean is more accurate (I calculated the mean 1000 times!).On top of that, I added the standard deviation of the mean.\n\nNow, I'm going to sort the information in descending order:","d34eeb96":"# Apple Store Study","1686d8f8":"## 0. Questions to answer in this study","79031761":"The chunk of code bellow calculates the probability for a specific genre to have a rating more or equal to 4.0","b3a6be5e":"Let's go back to the Apple store apps. Firstly, I'll multiply the number of reviews by 35.7, this number came from the calculation I performed using the Google apps dataset. I found that on average 1 user review is equal to 35.7 downloads (2.8% -> 100\/2.8 or 1\/0.028 = 35.7).","97e0cf22":"Above we see the first 5 rows of the dataset.\nThis was downloaded from the kaggle website.\n\nHere follow the dictionary of each column:\n\n\n    \"id\" : App ID\n\n    \"track_name\": App Name\n\n    \"size_bytes\": Size (in Bytes)\n\n    \"currency\": Currency Type\n\n    \"price\": Price amount\n\n    \"ratingcounttot\": User Rating counts (for all version)\n\n    \"ratingcountver\": User Rating counts (for current version)\n\n    \"user_rating\" : Average User Rating value (for all version)\n\n    \"userratingver\": Average User Rating value (for current version)\n\n    \"ver\" : Latest version code\n\n    \"cont_rating\": Content Rating\n\n    \"prime_genre\": Primary Genre\n\n    \"sup_devices.num\": Number of supporting devices\n\n    \"ipadSc_urls.num\": Number of screenshots showed for display\n\n    \"lang.num\": Number of supported languages\n\n    \"vpp_lic\": Vpp Device Based Licensing Enabled","baa560ae":"#### the average rating grouped by the number of download  shows that despite the popularity the average rating doesn't change. I mean, a popular app with 1000000+ downloads (mean rating equals to 4.18), for example doesn't have a rating much bigger than an app with 50000+ downloads (mean rating equals to 4.11). ","85d74fef":"## 5. The popularity of an app","5d2c4200":"## 5.1.1 Cleaning the data","3ae2889b":"The information above shows the average of the review rate grouped by installs. This rate shows that, for apps with 100000+ installs, for example, the review rate is 3.43%. It means that 1 user review is equal to 29.15 downloads(or installs). (100\/3.43 = 29.15) \nLet's take a look at the plot of the table above.","747c8c5d":"The table above shows the average of the users rating for each group of downloads.","c3dfd7c3":"Let's take a look in other genre: games","d0abcd4a":"## 1. Reading the dataset file","078ea1a5":"The result above ranks apps by genre based on the average of users rating. Well, statistically speaking, that rank is not so accurate. The reason is that I only sorted the mean, just considering the absolute value of this mean. If, in fact, we want to compare the mean, we have to consider a statistical approach to get better results. ","04466630":"The red line (y=2.8%) shows the Review rate average. In average, the relationship between the number of installs an app has and its number of reviews is 2.8%.Conversely, 1 user review is equal to appox. 36 downloads.","3cc0e5cb":"If you would plot the histogram for all other genres you would see the same trend as you saw in the plots above: a negative skew, meaning that the peak of the distibution is concentrated on the right of the cartesian plane, not in the center like a normal distribution. To find out a little bit more about skewness click [here](https:\/\/en.wikipedia.org\/wiki\/Skewness).\n\nThese plots (and trend) made me draw the answer for the question #2 (at the beginning of this study): ","22700f04":"I'm going to analyze a histogram.   \nLet's choose lifestyle apps as an example","2cd1bbae":"Firstly, I'll \"organize\" the information normalizing the data.\n\nLet's take a look on how the ratings are distributed in the genre Lifestyle, for example. ","57c7740c":"For this study I will remove all values in the column \"user_rating_ver\". I mean, I will create another dataset (named df_rating_not_0) with rating values different(!=) than zero.","0b09040f":"   ## 5.1 Google Dataset","1bb53d5b":"    1. What is the genre (sports, travel, games...) with the highest user rating? And wich one is     \n    the best app according to the users rating?\n    \n    2. How are the users profile when they rating an app?\n    \n    3. What is the probability to have an app, given its genre, a rating more or equal than 4.0?\n    \n    4. Does the popularity of an app affect the user rating?\n","381c953d":"We can assess the popularity of an app by the number of downloads. Unfortunately, the dataset from Apple Store doesn't have the number of downloads, but I'll use the information from another dataset to infer the popularity of an app in the Apple store. I'm going to use now a dataset from Play Store (apps for Androids devices). This new dataset has the number of downloads of each app."}}