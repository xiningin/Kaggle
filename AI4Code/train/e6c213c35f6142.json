{"cell_type":{"d6a1e721":"code","43aad772":"code","00623eff":"code","32559ef3":"code","0723eafa":"code","d8b52c97":"code","482a3f8e":"code","f876a4cf":"code","4e68cba5":"code","18db5af9":"code","3493201b":"code","b6970f8b":"code","1e56003b":"code","a810af47":"code","d9b78102":"code","6c8af62b":"code","058e0e73":"code","d5749c13":"code","3fc7aeaf":"code","1cc405a8":"code","52f3d8bd":"code","903e9d1f":"code","c9735436":"code","92aa62f7":"code","3efcda27":"code","6559d5fb":"code","7d08f040":"code","43b9aed4":"code","5207f707":"code","39855244":"code","eff14d4f":"code","27607f53":"code","eec43505":"code","b93bf4a6":"code","90f0f257":"code","b6005088":"code","f245033e":"markdown","45885ce3":"markdown","55abbc4a":"markdown","b25c9fe0":"markdown","25fab40a":"markdown","db0eac2f":"markdown"},"source":{"d6a1e721":"# This Python 3 environment comes with many helpful analytics libraries installed\n# It is defined by the kaggle\/python docker image: https:\/\/github.com\/kaggle\/docker-python\n# For example, here's several helpful packages to load in \n\nimport numpy as np # linear algebra\nimport pandas as pd # data processing, CSV file I\/O (e.g. pd.read_csv)\n\n# Input data files are available in the \"..\/input\/\" directory.\n# For example, running this (by clicking run or pressing Shift+Enter) will list all files under the input directory\n\nimport os\nfor dirname, _, filenames in os.walk('\/kaggle\/input'):\n    for filename in filenames:\n        print(os.path.join(dirname, filename))\n\n# Any results you write to the current directory are saved as output.","43aad772":"crop=pd.read_csv('\/kaggle\/input\/crop-production-statistics-from-1997-in-india\/apy.csv')","00623eff":"def basic_description (dataframe):\n    print('shape:\\n',dataframe.shape)\n    print('head:\\n',dataframe.head())\n    print('info:\\n',dataframe.info())\n    print('null value:\\n',dataframe.isnull().sum()*100\/len(dataframe))\n    print('describe:\\n',dataframe.describe())\nbasic_description(crop)","32559ef3":"crop.dropna(subset=['Production'],axis=0,inplace=True)","0723eafa":"basic_description(crop)","d8b52c97":"pd.set_option('display.max_rows', 200000)\npd.set_option('display.max_columns', 10)\npd.set_option('display.width', 1000)","482a3f8e":"import seaborn as sns\nimport matplotlib.pyplot as plt","f876a4cf":"crop.columns","4e68cba5":"# for i in ['State_Name', 'District_Name', 'Crop_Year', 'Season', 'Crop']: \n#     sns.boxplot(data=crop,y='Production',x=crop[i])\n#     plt.show()\n    ","18db5af9":"sns.heatmap(crop.corr(),annot=True)\nplt.show()","3493201b":"crop.Crop.value_counts()","b6970f8b":"# cat_crop={'Cereal':['Rice','Maize','Wheat','Barley','Varagu','Other Cereals & Millets','Ragi','Small millets','Bajra','Jowar'],\n#           'Pulses':['Moong','Urad','Arhar\/Tur','Peas & beans','Masoor','Other Kharif pulses','other misc. pulses','Ricebean (nagadal)','Rajmash Kholar','Lentil','Samai','Blackgram','Korra','Cowpea(Lobia)','Other  Rabi pulses','Other Kharif pulses','Peas & beans (Pulses)'],\n#          'Fruits':['Peach','Apple','Litchi','Pear','Plums','Ber','Sapota','Lemon','Pome Granet','Other Citrus Fruit','Water Melon','Jack Fruit','Grapes','Pineapple','Orange','Pome Fruit','Citrus Fruit','Other Fresh Fruits','Mango','Papaya','Coconut','Banana'],\n#          ('Bean','Lab-Lab','Moth','Guar seed','Tapioca','Soyabean','Horse-gram','Gram'):'Beans',\n#          ('Turnip','Peas','Beet Root','Carrot','Yam','Ribed Guard','Ash Gourd ','Pump Kin','Redish','Snak Guard','Bottle Gourd','Bitter Gourd','Cucumber','Drum Stick','Cauliflower','Beans & Mutter(Vegetable)','Cabbage','Bhindi','Tomato','Brinjal','Khesari','Sweet potato','Potato','Onion'):'Vegetable',\n#           ('Perilla','Colocosia','Ginger','Cardamom','Black pepper','Dry ginger','Garlic','Coriander','Turmeric','Dry chillies'):'Species',\n#          ('Jobster','Cond-spcs other'):'Others',\n#          ('other fibres','Kapas','Jute & mesta','Jute','Mesta','Cotton(lint)'):'fibres',\n#          ('Arcanut (Processed)','Atcanut (Raw)','Cashewnut Processed','Cashewnut Raw','Cashewnut','Arecanut','Groundnut'):'Nuts',\n#          'Rubber':'Natural Polymer',\n#          'Coffee':'Coffee',\n#          'Tea':'Tea',\n#          'Total foodgrain':'Total foodgrain',\n#          'Pulses total':'Pulses total',\n#          'Oilseeds total':'Oilseeds total',\n#          'Paddy':'Paddy',\n#          ('other oilseeds','Safflower','Niger seed','Castor seed','Linseed','Sunflower','Rapeseed &Mustard','Sesamum'):'Oilseeds',\n#          'Sannhamp':'Fertile Plant',\n#          'Tobacco':'Commercial',\n#          'Sugarcane':'Sugarcane'}","1e56003b":"cc=crop['Crop']\ndef cat_crop(cc):\n    for i in ['Rice','Maize','Wheat','Barley','Varagu','Other Cereals & Millets','Ragi','Small millets','Bajra','Jowar']:\n        if cc==i:\n            return 'Cereal'\n    for i in ['Moong','Urad','Arhar\/Tur','Peas & beans','Masoor',\n              'Other Kharif pulses','other misc. pulses','Ricebean (nagadal)',\n              'Rajmash Kholar','Lentil','Samai','Blackgram','Korra','Cowpea(Lobia)',\n              'Other  Rabi pulses','Other Kharif pulses','Peas & beans (Pulses)']:\n        if cc==i:\n            return 'Pulses'\n    for i in ['Peach','Apple','Litchi','Pear','Plums','Ber','Sapota','Lemon','Pome Granet',\n               'Other Citrus Fruit','Water Melon','Jack Fruit','Grapes','Pineapple','Orange',\n               'Pome Fruit','Citrus Fruit','Other Fresh Fruits','Mango','Papaya','Coconut','Banana']:\n        if cc==i:\n            return 'Fruits'\n    for i in ['Bean','Lab-Lab','Moth','Guar seed','Tapioca','Soyabean','Horse-gram','Gram']:\n        if cc==i:\n            return 'Beans'\n    for i in ['Turnip','Peas','Beet Root','Carrot','Yam','Ribed Guard','Ash Gourd ','Pump Kin','Redish','Snak Guard','Bottle Gourd',\n              'Bitter Gourd','Cucumber','Drum Stick','Cauliflower','Beans & Mutter(Vegetable)','Cabbage',\n              'Bhindi','Tomato','Brinjal','Khesari','Sweet potato','Potato','Onion']:\n        if cc==i:\n            return 'Vegetables'\n    for i in ['Perilla','Colocosia','Ginger','Cardamom','Black pepper','Dry ginger','Garlic','Coriander','Turmeric','Dry chillies']:\n        if cc==i:\n            return 'Species'\n    for i in ['Jobster','Cond-spcs other']:\n        if cc==i:\n            return 'Other'\n    for i in ['other fibres','Kapas','Jute & mesta','Jute','Mesta','Cotton(lint)']:\n        if cc==i:\n            return 'fibres'\n    for i in ['Arcanut (Processed)','Atcanut (Raw)','Cashewnut Processed','Cashewnut Raw','Cashewnut','Arecanut','Groundnut']:\n        if cc==i:\n            return 'Nuts'\n    for i in ['Rubber']:\n        if cc==i:\n            return 'Natural Polymer'\n    for i in ['Coffee']:\n        if cc== i:\n            return 'Coffee'\n    for i in ['Tea']:\n        if cc==i:\n            return 'Tea'\n    for i in ['Total foodgrain']:\n        if cc==i:\n            return 'Total foodgrain'\n    for i in ['Pulses total']:\n        if cc==i:\n            return 'Pulses total'\n    for i in ['Oilseeds total']:\n        if cc==i:\n            return 'Oilseeds total'\n    for i in ['Paddy']:\n        if cc==i:\n            return 'Paddy'\n    for i in ['other oilseeds','Safflower','Niger seed','Castor seed','Linseed','Sunflower','Rapeseed &Mustard','Sesamum']:\n        if cc==i:\n            return 'Oilseeds'\n    for i in ['Sannhamp']:\n        if cc==i:\n            return 'Fertile Plant'\n    for i in ['Tobacco']:\n        if cc==i:\n            return 'Commercial'\n    for i in ['Sugarcane']:\n        if cc==i:\n            return 'Sugarcane'","a810af47":"crop['cat_crop']=crop['Crop'].apply(cat_crop)","d9b78102":"crop","6c8af62b":"crop.cat_crop.value_counts()","058e0e73":"plt.figure(figsize=(20,8))\nsns.scatterplot(data=crop,x='State_Name',y='cat_crop',hue='Season')\nplt.xticks(rotation=90)\nplt.show()","d5749c13":"vc=crop['cat_crop'].value_counts()\nexplodelist=[0]*len(vc)\nexplodelist[11]=0.8\nvc.plot(kind=\"pie\",autopct=\"%1.1f\",radius=3,rotatelabels=True,pctdistance=0.6,labeldistance=1.1,explode=explodelist)\nplt.show()","3fc7aeaf":"%matplotlib inline\nplt.figure(figsize=(18,5))\nsns.barplot(data=crop,x='Crop_Year',y='Production',hue='cat_crop',errwidth=0.0,palette='magma') \nplt.xticks(rotation=90)\nplt.show()\n    ","1cc405a8":"from datetime import datetime","52f3d8bd":"trend=crop[['Crop_Year','Production']]","903e9d1f":"trend['Crop_Year']=pd.to_datetime(trend['Crop_Year'],format='%Y')\ntrend['year']=trend['Crop_Year'].dt.year","c9735436":"trend=trend.set_index(['year'])\ntrend.drop('Crop_Year',axis=1,inplace=True)\n","92aa62f7":"plt.figure(figsize=(20,8))\ntrend.plot(grid=True,figsize=(10,5))\nplt.show()","3efcda27":"crop.columns","6559d5fb":"import warnings\nwarnings.filterwarnings('ignore')\nfrom sklearn.feature_selection import RFE\nfrom sklearn.linear_model import LinearRegression\nfrom sklearn.tree import DecisionTreeRegressor\nfrom sklearn.ensemble import RandomForestRegressor\nfrom sklearn.metrics import r2_score, mean_squared_error\nfrom sklearn.model_selection import train_test_split","7d08f040":"crop_ml=crop[['State_Name','Crop_Year','Season','cat_crop','Production']]","43b9aed4":"crop_ml_dummy=pd.get_dummies(data=crop_ml,columns=['State_Name','Season','cat_crop'],drop_first=True)","5207f707":"X=crop_ml_dummy.drop('Production',axis=1)\ny=crop_ml_dummy.Production","39855244":"X_train, X_test, y_train, y_test = train_test_split(X, y, test_size=0.30, random_state=42)","eff14d4f":"model=LinearRegression()\nrfe=RFE(model,50)\nrfe.fit(X_train,y_train)\npd.DataFrame(list(zip(X.columns, rfe.support_, rfe.ranking_)), \n            columns=['cols', 'select', 'rank'])","27607f53":"y_pred = rfe.predict(X_test)\ny_train_pred=rfe.predict(X_train)\nprint('R2 test:  ', r2_score(y_test, y_pred))\nprint('R2 train:', r2_score(y_train,y_train_pred))\nprint('rmse test:',np.sqrt(mean_squared_error(y_train, y_train_pred)))\nprint('rmse test:  ', np.sqrt(mean_squared_error(y_test, y_pred)))","eec43505":"model=DecisionTreeRegressor()\nrfe1=RFE(model,50)\nrfe1.fit(X_train,y_train)\npd.DataFrame(list(zip(X.columns, rfe1.support_, rfe1.ranking_)), \n            columns=['cols', 'select', 'rank'])","b93bf4a6":"y_pred_dtr=rfe1.predict(X_test)\ny_train_pred_dtr=rfe1.predict(X_train)\nprint('R2 test:  ', r2_score(y_test, y_pred_dtr))\nprint('R2 train:  ', r2_score(y_train, y_train_pred_dtr))\nprint('difference of r2 score:',r2_score(y_train, y_train_pred_dtr)-r2_score(y_test, y_pred_dtr))\nprint('rmse test:  ', np.sqrt(mean_squared_error(y_test, y_pred_dtr)))\nprint('rmse train:  ', np.sqrt(mean_squared_error(y_train, y_train_pred_dtr)))","90f0f257":"model=RandomForestRegressor()\nrfe2=RFE(model,50)\nrfe2.fit(X,y)\npd.DataFrame(list(zip(X.columns, rfe2.support_, rfe2.ranking_)), \n            columns=['cols', 'select', 'rank'])","b6005088":"y_pred_rf=rfe2.predict(X)\nprint('R2:  ', r2_score(y, y_pred_rf))\nprint('rmse:  ', np.sqrt(mean_squared_error(y, y_pred_rf)))","f245033e":"# ***Predicting production in India on basis of this dataset.***","45885ce3":"*Here we have categorized all crops into, Cereals,Fruits,pulses,Nuts,Paddy,vegetables,spices,oilseeds,beans,fibres,commerccials,fertile plant,foodgrain,tea,coffee,natural polymer,fibers,sugarcane,nuts,beans and others*","55abbc4a":"**There is no need of processing outliers in this dataset.**","b25c9fe0":"Cereal cover almost of 27% of indian crop cultivation.\n> Oilseed and Pulses cover equal percentage of cultivation of 14.5 all over india.","25fab40a":"## EDA","db0eac2f":"# APPLYING SOME REGRESSION MODEL TO PREDICT THE PRODUCTION"}}