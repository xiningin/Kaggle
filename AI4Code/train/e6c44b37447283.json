{"cell_type":{"4248a214":"code","39dd5528":"code","bded2db6":"code","af7b2a2a":"code","ff0b480a":"code","29f5b53a":"markdown","a89930cd":"markdown","61475f01":"markdown"},"source":{"4248a214":"# This Python 3 environment comes with many helpful analytics libraries installed\n# It is defined by the kaggle\/python Docker image: https:\/\/github.com\/kaggle\/docker-python\n# For example, here's several helpful packages to load\n\nimport numpy as np # linear algebra\nimport pandas as pd # data processing, CSV file I\/O (e.g. pd.read_csv)\n\n# Input data files are available in the read-only \"..\/input\/\" directory\n# For example, running this (by clicking run or pressing Shift+Enter) will list all files under the input directory\n\nimport os\nfor dirname, _, filenames in os.walk('\/kaggle\/input'):\n    for filename in filenames:\n        print(os.path.join(dirname, filename))\n\n# You can write up to 5GB to the current directory (\/kaggle\/working\/) that gets preserved as output when you create a version using \"Save & Run All\" \n# You can also write temporary files to \/kaggle\/temp\/, but they won't be saved outside of the current session","39dd5528":"import pandas as pd\npd.plotting.register_matplotlib_converters()\nimport matplotlib.pyplot as plt\n%matplotlib inline\nimport seaborn as sns\n\ndf = pd.read_csv(\"\/kaggle\/input\/smashgg-tournament-attendees-2019-through-mid2020\/ggdf.csv\")\n\ndf['startDate'] = pd.to_datetime(df['startAt'], unit='s')\ndf['endDate'] = pd.to_datetime(df['endAt'], unit='s')\n\n#Filtered out June data because month is not over, grouped by Month\/ Year, and isOnline, summed numAttendees over\n#each month\nby_month = df.loc[pd.to_datetime(df['startAt'], unit='s') <= pd.to_datetime(1590953558, unit='s')]\\\n.set_index('startDate').groupby([pd.Grouper(freq=\"M\"),'isOnline'])['numAttendees'].sum().reset_index()\n\n#Sum of Attendees each month for offline tournaments\noffendees = by_month.query('isOnline == 0')['numAttendees'].rename(\"offlineAttendees\")\n#Sum of Attendees each month for online tournaments\nonendees = by_month.query('isOnline == 1')['numAttendees'].rename(\"onlineAttendees\")\n#Join Offline and Online Attendees with Monthly Attendees\njoined_df = by_month.join(offendees, how='left').join(onendees, how='left')\n#Sum values by month to get data to plot\nplot_df = joined_df.set_index('startDate').groupby([pd.Grouper(freq=\"M\")])[['numAttendees','offlineAttendees','onlineAttendees']].sum()\n\n\nfig, ax = plt.subplots(figsize = (12,6)) \nfig = sns.lineplot(data = plot_df, ax=ax)\nplt.xlabel(\"Month\")\nplt.ylabel(\"Sum of Attendees\")\nplt.title(\"Attendees at All SmashGG Tournaments Over Time\")\nx_dates = pd.date_range(start ='12-1-2018', end ='5-31-2020', freq ='2M').strftime('%b-%Y')\n\nax.set_xticklabels(labels=x_dates, rotation=45, ha='right')\n_ = \"\"","bded2db6":"#Group data by countryCode then sum Attendees. Sort Descending.\ncountry = df.groupby('countryCode')['numAttendees'].sum().sort_values(ascending=False)\n\nfig, ax = plt.subplots(figsize = (12,6))\nfig = sns.barplot(x='countryCode',y='numAttendees', data = country.reset_index().head(10),\n            palette = 'hls',  \n            capsize = 0.05,             \n            saturation = 8,             \n            errcolor = 'gray', errwidth = 2,  \n            ci = 'sd'   \n            )\n\nplt.xlabel(\"Country Code\")\nplt.ylabel(\"Total Number of Attendees\")\nplt.title(\"Highest SmashGG Attendants by Country\")\n_ = \"\"","af7b2a2a":"#Made a function that prepares the data as before, filtering by Country Code\ndef plot_by_country(df, countryCode=None):\n    if countryCode is None:\n        c_df = df\n    else:\n        c_df = df.loc[df['countryCode'] == countryCode]\n\n    c_month = c_df.loc[pd.to_datetime(c_df['startAt'], unit='s') <= pd.to_datetime(1590953558, unit='s')]\\\n    .set_index('startDate').groupby([pd.Grouper(freq=\"M\"),'isOnline'])['numAttendees'].sum().reset_index()\n\n    c_offendees = c_month.query('isOnline == 0')['numAttendees'].rename(\"offlineAttendees\")\n    c_onendees = c_month.query('isOnline == 1')['numAttendees'].rename(\"onlineAttendees\")\n\n    c_joined = c_month.join(c_offendees, how='left').join(c_onendees, how='left')\n\n    c_plot_df = c_joined.set_index('startDate').groupby([pd.Grouper(freq=\"M\")])[['numAttendees','offlineAttendees','onlineAttendees']].sum()\n\n    return c_plot_df  ","ff0b480a":"import datetime as dt\n#Filter down to US data to see if Attendancy change is reaction to lockdowns there\ndata = plot_by_country(df, 'US')\n                  \nfig, ax = plt.subplots(figsize = (12,6)) \nfig = sns.lineplot(data = data, ax=ax)\nplt.xlabel(\"Month\")\nplt.ylabel(\"Sum of Attendees\")\nplt.title(\"United States Smash GG Attendees\")\nx_dates = pd.date_range(start ='12-1-2018', end ='5-31-2020', freq ='2M').strftime('%b-%Y')\n\nax.set_xticklabels(labels=x_dates, rotation=45, ha='right')\n\nplt.axvline(dt.datetime(2020, 3, 15),0,1,linestyle='--',linewidth=1,color = 'red') \n#First Mainland COVID Lockdown in SF was on March 15th, according to wikipedia\n#https:\/\/en.wikipedia.org\/wiki\/COVID-19_pandemic_lockdowns#United_States\n\nplt.text(dt.datetime(2020, 3, 15),45000,'Lockdowns Start',rotation=90, horizontalalignment='right',verticalalignment='top')\n_ = \"\"","29f5b53a":"Looks like the United States has most SmashGG attendants by a large margin. One caveat of this whole enterprise is that, although SmashGG is very popular with the FGC in the United States, it is possible that this data is skewed by a lack of activity in other countries. \n\nI will eventually normalize attendants using each Country's population so I can analyze percentage-change in attendance year-by-year. It will be telling if 2020 is an outlier due to COVID; however, SmashGG recent dominance over its competition (like Challonge) might also be a factor.\n\n","a89930cd":"# What is SmashGG\n\n[SmashGG](https:\/\/smash.gg\/) is used to create videogame tournaments, add events to that tournament (for individual games), and run the bracket. \n\n# About the Data\n\nThe data discussed in this notebook is from all SmashGG tournaments between December 1st, 2018 to June 1st, 2020. It is mostly concerned with tournament attendants, which can be any individual involved in the tournament who registered with SmashGG.\n\n# Objective\n\nTo determine how COVID has affected tournament attendance. SmashGG is very popular with the United States fighting game community (FGC), of which I am a part. The FGC is mostly organized around offline (in person) tournaments, but the community has been forced to adopt more and more online events for safety during the ongoing pandemic.\n\nTournament Attendance is extremely important to growing the community, and supporting long-standing members. An understanding of how attendance has changed could inform decisions moving forward about rescheduling or modifying events.","61475f01":"Evo Online is happening this summer, and lockdowns in the US are starting to relax. When the summer is over I will add to the dataset and rerun this notebook."}}