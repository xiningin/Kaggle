{"cell_type":{"720b905e":"code","9d4e1a93":"code","2be76a27":"code","149f5c2e":"code","eb8b0551":"code","9067fd76":"code","84b869d4":"code","88cbbe6c":"code","9fece427":"code","0a5af509":"code","afd3a891":"code","e38587de":"code","83cc0995":"code","9e30225f":"code","58fafd65":"code","3c7d3fa3":"code","62bddaa3":"code","52abc7da":"code","18a0417f":"code","c9742145":"code","fc91da7e":"code","b7bb1c01":"code","880e4184":"code","d0f74ab5":"code","b9f1f5a7":"code","23039da1":"code","89ac8f52":"markdown","6906c84b":"markdown","ef5c4249":"markdown","057af9d3":"markdown"},"source":{"720b905e":"# This Python 3 environment comes with many helpful analytics libraries installed\n# It is defined by the kaggle\/python docker image: https:\/\/github.com\/kaggle\/docker-python\n# For example, here's several helpful packages to load in \n\nimport numpy as np # linear algebra\nimport pandas as pd # data processing, CSV file I\/O (e.g. pd.read_csv)\nimport matplotlib.pyplot as plt\nimport seaborn as sns\n\n# Input data files are available in the \"..\/input\/\" directory.\n# For example, running this (by clicking run or pressing Shift+Enter) will list all files under the input directory\n\nimport os\nfor dirname, _, filenames in os.walk('\/kaggle\/input'):\n    for filename in filenames:\n        print(os.path.join(dirname, filename))\n\n# Any results you write to the current directory are saved as output.","9d4e1a93":"calls_dir = '..\/input\/sf-police-calls-for-service-and-incidents\/police-department-calls-for-service.csv'\ncalls_df = pd.read_csv(calls_dir)\ncalls_df.head()","2be76a27":"incidents_dir = '..\/input\/sf-police-calls-for-service-and-incidents\/police-department-incidents.csv'\nincidents_df = pd.read_csv(incidents_dir, parse_dates = [['Date', 'Time']])\nincidents_df.head()","149f5c2e":"groups_incidents_category = incidents_df.groupby([ \"DayOfWeek\", \"Category\"])\ngroups_incidents_category.first()","eb8b0551":"cats = [ 'Monday', 'Tuesday', 'Wednesday', 'Thursday', 'Friday', 'Saturday', 'Sunday']\ns = groups_incidents_category.size().unstack().reindex(cats)\ns.head()","9067fd76":"s.plot(kind='bar')\n#plt.legend()","84b869d4":"s2 =  groups_incidents_category.size().unstack()\n#s2 = s2['ARSON']\n#s2.set_index('DayOfWeek') \ns2.head()\n","88cbbe6c":"s3 = s2['DRIVING UNDER THE INFLUENCE'].reindex(cats)\ns3","9fece427":"s3.plot(kind='bar')\n","0a5af509":"groups_incidents_days = incidents_df.groupby(\"DayOfWeek\")\ngroups_incidents_days.head()","afd3a891":"d = groups_incidents_days.size()\nprint(d)","e38587de":"d.plot(kind='bar', alpha=0.5)","83cc0995":"#import date as dt\ngroups_incidents_category = incidents_df.groupby(['Category', incidents_df['Date_Time'].dt.year]).count()\ngroups_incidents_category","9e30225f":"groups_incidents_category['Descript']['ASSAULT'].plot(kind='bar', alpha=0.5)","58fafd65":"incidents_df.columns","3c7d3fa3":"incidents_df['Category'] = incidents_df['Category'].astype('category')\nincidents_df['DayOfWeek'] = incidents_df['DayOfWeek'].astype('category')\nincidents_df['PdDistrict'] = incidents_df['PdDistrict'].astype('category')","62bddaa3":"incidents_df.dtypes","52abc7da":"from sklearn.tree import DecisionTreeClassifier\n\nmodel = DecisionTreeClassifier()","18a0417f":"DecisionTreeClassifier?","c9742145":"# Here we get the code for each category\nincidents_df['dow_code'] = incidents_df.DayOfWeek.cat.codes\nincidents_df['cat_code'] = incidents_df.Category.cat.codes\nincidents_df['district_code'] = incidents_df.PdDistrict.cat.codes","fc91da7e":"incidents_df.columns","b7bb1c01":"selected_df = incidents_df[['dow_code', 'cat_code', 'district_code']]\nselected_df.head()","880e4184":"from sklearn.model_selection import train_test_split\nXtrain, Xtest, ytrain, ytest = train_test_split(selected_df[['dow_code', 'district_code']], selected_df.cat_code, random_state = 0)","d0f74ab5":"model.fit(Xtrain, ytrain)","b9f1f5a7":"y_model = model.predict(Xtest)","23039da1":"# Our first prediction is not accurate so we will need to include more features\nfrom sklearn.metrics import accuracy_score\naccuracy_score(y_model, ytest)","89ac8f52":"## 1. A first look to the available data","6906c84b":"## This kernel is related with our Study Group at codebuddies\nLink: https:\/\/codebuddies.org\/study-group\/python-data-science-handbook---study-group\/bLpmiFQr84un8ubSB\n\nWe get together every Sunday at 10 am EST to discuss about Jake VanderPlas' Python Data Science Handbook (https:\/\/jakevdp.github.io\/PythonDataScienceHandbook\/) and learning together. \n","ef5c4249":"## 0. Load the data","057af9d3":"## 2. A first approach using only 2 categories and a Decision tree classifier"}}