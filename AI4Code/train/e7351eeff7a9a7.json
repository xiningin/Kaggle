{"cell_type":{"8b6146cb":"code","cfa390c3":"code","87113e2b":"code","857fff69":"code","4de85dcb":"code","7b0956d0":"code","e6a48cdb":"code","f170e116":"code","fd43e4fb":"code","ca93f842":"code","dafc5188":"code","9a813610":"code","702b25fa":"code","df31def3":"code","eda1f1c9":"code","b6961b7a":"code","7d45b22e":"code","876af11c":"code","915a1207":"code","1c01b276":"code","e5137798":"code","7647792b":"code","669d4c62":"markdown","09ee712e":"markdown","7829c768":"markdown","f9b3a847":"markdown","3e590aa5":"markdown","b541bbd8":"markdown","5f2c2b27":"markdown","99cad8ae":"markdown","634e4a8a":"markdown","7078a4f0":"markdown","aa01b6c2":"markdown","17628458":"markdown","fa0cab1e":"markdown","e1106954":"markdown","7a770d8a":"markdown","77e7b183":"markdown","0e695db9":"markdown","7202f898":"markdown","328b59d3":"markdown","d1956bf4":"markdown"},"source":{"8b6146cb":"!pip install openpyxl\nimport io\nimport openpyxl\nimport numpy as np\nimport pandas as pd\nimport matplotlib.pyplot as plt\nimport seaborn as sns\nimport plotly.express as px","cfa390c3":"books_ds = pd.read_csv(\"..\/input\/amazon-top-50-bestselling-books-2009-2019\/bestsellers with categories.csv\", sep=\",\")\n\nbooks_ds","87113e2b":"#Checking a dataset sample\n\npd.set_option(\"display.max_rows\", 100)\npd.set_option(\"display.max_columns\", 100)\npd.options.display.float_format=\"{:,.2f}\".format\nbooks_ds.sample(n=10, random_state=0)","857fff69":"#Checking dataset info by feature\n\nbooks_ds.info(verbose=True, null_counts=True)","4de85dcb":"#Checking the existence of zeros in rows\n\n(books_ds==0).sum(axis=0).to_excel(\"zeros_per_feature.xlsx\")\n(books_ds==0).sum(axis=0)","7b0956d0":"#Checking the existence of duplicated rows\n\nbooks_ds.duplicated().sum()","e6a48cdb":"#Checking basic statistical data by feature\n\nbooks_ds.describe(include=\"all\")","f170e116":"#1\n\nbooks_ds[\"Price\"].replace(0, np.nan, inplace=True)\nbooks_ds[\"Price\"].fillna(books_ds[\"Price\"].sum() \/ books_ds[\"User Rating\"].sum() * books_ds[\"User Rating\"], inplace=True)\n\n#2\n\nbooks_ds[\"User Rating to Price Ratio\"] = books_ds[\"User Rating\"] \/ books_ds[\"Price\"]\n\n\n#3\n\nbooks_ds = pd.concat([books_ds, pd.get_dummies(books_ds[\"Genre\"], prefix=\"Genre\")], axis=1)\n\n#4\n\nbooks_ds[\"User Rating_Range\"] = np.where(books_ds[\"User Rating\"]>=4.75, \"4.75 to 5\", np.where(books_ds[\"User Rating\"]>=4.5, \"4.5 to 4.75\", np.where(books_ds[\"User Rating\"]>=4, \"4 to 4.5\", np.where(books_ds[\"User Rating\"]>=3, \"3 to 4\", np.where(books_ds[\"User Rating\"]>=2, \"2 to 3\", \"<2\")))))\nbooks_ds[\"Price_Range\"] = np.where(books_ds[\"Price\"]>=60, \">60\", np.where(books_ds[\"Price\"]>=50, \"50 to 60\", np.where(books_ds[\"Price\"]>=40, \"40 to 50\", np.where(books_ds[\"Price\"]>=30, \"30 to 40\", np.where(books_ds[\"Price\"]>=20, \"20 to 30\", np.where(books_ds[\"Price\"]>=10, \"10 to 20\", \"<10\"))))))\nbooks_ds[\"User Rating to Price Ratio_Range\"] = np.where(books_ds[\"User Rating to Price Ratio\"]>=2, \">2\",\n                                               np.where(books_ds[\"User Rating to Price Ratio\"]>=1, \"1 to 2\",\n                                               np.where(books_ds[\"User Rating to Price Ratio\"]>=0.8, \"0.8 to 1\",\n                                               np.where(books_ds[\"User Rating to Price Ratio\"]>=0.6, \"0.6 to 0.8\",\n                                               np.where(books_ds[\"User Rating to Price Ratio\"]>=0.4, \"0.4 to 0.6\",\n                                               np.where(books_ds[\"User Rating to Price Ratio\"]>=0.2, \"0.2 to 0.4\", \"<0.2\"))))))\n\n\nbooks_ds.to_excel(\"books_ds_clean.xlsx\")","fd43e4fb":"#Checking Top Reviews Books\n\nprint(\"Checking top Reviews Books:\")\nbooks_ds.sort_values(\"Reviews\", ascending=False).head(20)[[\"Name\", \"Author\", \"User Rating\", \"Reviews\", \"Price\", \"Year\", \"Genre\"]].reset_index()","ca93f842":"#Checking Top User Rating Books\n\nprint(\"Checking top User Rating Books:\")\nbooks_ds.sort_values(\"User Rating\", ascending=False).head(20)[[\"Name\", \"Author\", \"User Rating\", \"Reviews\", \"Price\", \"Year\", \"Genre\"]].reset_index()","dafc5188":"#Checking Top User Rating to Price Ratio Books\n\nprint(\"Checking top User Rating to Price Ratio Books:\")\nbooks_ds.sort_values(\"User Rating to Price Ratio\", ascending=False).head(20)[[\"Name\", \"Author\", \"User Rating\", \"Reviews\", \"Price\", \"Year\", \"Genre\", \"User Rating to Price Ratio\"]].reset_index()","9a813610":"#Checking Book Names by Reviews and Genre\n\nimport matplotlib\nfont = {'family' : 'normal',\n        'weight' : 'bold',\n        'size'   : 12}\nmatplotlib.rc('font', **font)\n\npx.treemap(books_ds, path=[\"Name\"], values=\"Reviews\", color=\"Genre\", title=\"Book Names by Reviews and Genre\").show()","702b25fa":"#Checking Book Names by User Rating and Genre\n\npivot = books_ds.pivot_table(index=[\"Name\", \"Genre\"], columns=[], values=[\"User Rating\"], aggfunc=np.mean).reset_index()\npx.treemap(pivot, path=[\"Name\"], values=\"User Rating\", color=\"Genre\", title=\"Book Names by User Rating and Genre\").show()","df31def3":"#Checking Authors by Reviews and Genre\n\npx.treemap(books_ds, path=[\"Author\"], values=\"Reviews\", color=\"Genre\", title=\"Authors by Reviews and Genre\").show()","eda1f1c9":"#Checking Authors by User Rating and Genre\n\npivot = books_ds.pivot_table(index=[\"Author\", \"Genre\"], columns=[], values=[\"User Rating\"], aggfunc=np.mean).reset_index()\npx.treemap(pivot, path=[\"Author\"], values=\"User Rating\", color=\"Genre\", title=\"Authors by User Rating and Genre\").show()","b6961b7a":"#Checking Book Names by Reviews and User Rating\n\npx.scatter(books_ds, x=\"Year\", y=\"User Rating\", size=\"Reviews\", color=\"Genre\", hover_name=\"Name\", size_max=30, title=\"Book Names by Reviews and Genre\").show()","7d45b22e":"#Checking Book Names by Price and User Rating\n\npx.scatter(books_ds, x=\"Year\", y=\"User Rating\", size=\"Price\", color=\"Genre\", hover_name=\"Name\", size_max=30, title=\"Book Names by Price and Genre\").show()","876af11c":"#Checking Dataset Behaviour Along the Time\n\nfig, ax = plt.subplots(1, 3, figsize=(20,5))\nfig.suptitle(\"Non Fiction Books Data Behaviour Along The time\", fontsize=25)\nsns.lineplot(data=books_ds.query('Genre == \"Non Fiction\"'), x=\"Year\", y=\"Reviews\", estimator=\"sum\", ax=ax[0])\nsns.lineplot(data=books_ds.query('Genre == \"Non Fiction\"'), x=\"Year\", y=\"User Rating\", ax=ax[1])\nsns.lineplot(data=books_ds.query('Genre == \"Non Fiction\"'), x=\"Year\", y=\"Price\", ax=ax[2])\n\nfig, ax = plt.subplots(1, 3, figsize=(20,5))\nfig.suptitle(\"Fiction Books Data Behaviour Along The time\", fontsize=25)\nsns.lineplot(data=books_ds.query('Genre == \"Fiction\"'), x=\"Year\", y=\"Reviews\", estimator=\"sum\", ax=ax[0])\nsns.lineplot(data=books_ds.query('Genre == \"Fiction\"'), x=\"Year\", y=\"User Rating\", ax=ax[1])\nsns.lineplot(data=books_ds.query('Genre == \"Fiction\"'), x=\"Year\", y=\"Price\", ax=ax[2])\n\nfig, ax = plt.subplots(1, 3, figsize=(20,5))\nfig.suptitle(\"All Books Data Behaviour Along The time\", fontsize=25)\nsns.lineplot(data=books_ds, x=\"Year\", y=\"Reviews\", estimator=\"sum\", ax=ax[0])\nsns.lineplot(data=books_ds, x=\"Year\", y=\"User Rating\", ax=ax[1])\nsns.lineplot(data=books_ds, x=\"Year\", y=\"Price\", ax=ax[2])","915a1207":"#Plotting Categorical Variables\n\nfig, ax = plt.subplots(1, 2, figsize=(15,5))\nbooks_ds[\"Genre\"].value_counts().plot.bar(color=\"purple\", ax=ax[0])\nbooks_ds[\"Genre\"].value_counts().plot.pie(autopct='%1.1f%%', shadow=True,ax=ax[1])\nfig.suptitle(\"Genre Frequency\", fontsize=25)\nplt.xticks(rotation=90)\nplt.yticks(rotation=45)\n\nfig, ax = plt.subplots(1, 2, figsize=(15,5))\nbooks_ds[\"Year\"].value_counts().plot.bar(color=\"purple\", ax=ax[0])\nbooks_ds[\"Year\"].value_counts().plot.pie(autopct='%1.1f%%',shadow=True,ax=ax[1])\nfig.suptitle(\"Year Frequency\", fontsize=25)\nplt.xticks(rotation=90)\nplt.yticks(rotation=45)","1c01b276":"#Plotting Numerical Variables\n\nfig, ax = plt.subplots(1, 3, figsize=(15,5))\nfig.suptitle(\"User Rating Distribution\", fontsize=25)\nsns.histplot(books_ds[\"User Rating\"], ax=ax[0])\nsns.boxplot(books_ds[\"User Rating\"], ax=ax[1])\nsns.violinplot(books_ds[\"User Rating\"], ax=ax[2])\n\nfig, ax = plt.subplots(1, 3, figsize=(15,5))\nfig.suptitle(\"Price Distribution\", fontsize=25)\nsns.histplot(books_ds[\"Price\"], ax=ax[0])\nsns.boxplot(books_ds[\"Price\"], ax=ax[1])\nsns.violinplot(books_ds[\"Price\"], ax=ax[2])\n\nfig, ax = plt.subplots(1, 3, figsize=(15,5))\nfig.suptitle(\"User Rating to Price Ratio Distribution\", fontsize=25)\nsns.histplot(books_ds[\"User Rating to Price Ratio\"], ax=ax[0])\nsns.boxplot(books_ds[\"User Rating to Price Ratio\"], ax=ax[1])\nsns.violinplot(books_ds[\"User Rating to Price Ratio\"], ax=ax[2])","e5137798":"#Alternatively using Profile Report to see variables statistics and correlations\n\n# from pandas_profiling import ProfileReport\n# profile = ProfileReport(books_ds, title=\"Top 50 Bestselling Books EDA\")\n# profile.to_file(output_file=\"Top 50 Bestselling Books EDA.html\")","7647792b":"#Plotting Bar Charts, also considering all numerical to categorical variables created at the step before\n\nsns.set(font_scale=2)\n\nfig, axarr = plt.subplots(1, 1, figsize=(30, 10))\nsns.countplot(x=\"Price_Range\", hue = \"User Rating_Range\", data = books_ds, hue_order = [\"<2\", \"2 to 3\", \"3 to 4\", \"4 to 4.5\", \"4.5 to 4.75\", \"4.75 to 5\"])\n\n#Deleting original categorical columns\n\nbooks_ds.drop([\"Name\", \"Author\", \"Genre\", \"User Rating_Range\", \"Price_Range\", \"User Rating to Price Ratio_Range\"], axis=1, inplace=True)\n\n#Plotting a Heatmap\n\nsns.set(font_scale=1)\n\nfig, ax = plt.subplots(1, figsize=(10,10))\nsns.heatmap(books_ds.corr(), annot=True, fmt=\",.2f\")\nplt.title(\"Heatmap Correlation\", fontsize=20)\nplt.tick_params(labelsize=12)\nplt.xticks(rotation=90)\nplt.yticks(rotation=45)\n\n#Plotting a Pairplot\n\nsns.pairplot(books_ds)","669d4c62":"# 6.12 Checking Numerical Variables Histogram, Boxplot and Violinplot","09ee712e":"# 6.9 Checking Book Names by Price and User Rating Using Bubble Chart","7829c768":"# 1. Introduction: Business Goal & Problem Definition\n\nIF YOU LIKE IT OR IF IT HELPS YOU SOMEHOW, COULD YOU PLEASE UPVOTE? THANK YOU VERY MUCH!!!\n\nThis project\u00b4s goal is doing an exploratory data analysis (EDA) in the Amazon's Top 50 bestselling books from 2009 to 2019. The goal is to analyze the data set to summarize its main characteristics using several different visual methods, primarily for seeing what the data can tell us. The available dataset features for analysis are:\n\n* Name: Name of the Book\n* Author: The author of the Book\n* User Rating: Amazon User Rating\n* Reviews: Number of written reviews on amazon\n* Price: The price of the book (As at 13\/10\/2020)\n* Year: The Year(s) it ranked on the bestseller\n* Genre: Whether fiction or non-fiction\n* User Rating to Price Ratio (feature engineering)","f9b3a847":"# 6.7 Checking Authors by User Rating and Genre Using TreeMap","3e590aa5":"# 5. Data Cleaning\n\n    We\u00b4ll perform the following:\n\n    \n    1. Treat 12 rows with Price = 0, replacing it with an estimation based on the User Rating, so we can keep the rows\n\n\n    2. Create a calculated field that could bring relevant information to the analysis: User Rating to Price Ratio\n    \n    \n    3. Convert \"Genre\" to dummy so we can analyze its correlations in step 7\n    \n    \n    4. Convert all numerical variables to categorical ranges (to be used in step 7 when analyzing correlations): User Rating, Price, User Rating to Price Ratio\n    \n    \n    * No duplications found\n    * No missing, zero or invalid values to treat\n    * No columns to remove\n    * No outliers found\n    * The entire dataset will be taken","b541bbd8":"# 8. Conclusions\n\nIF YOU LIKE IT OR IF IT HELPS YOU SOMEHOW, COULD YOU PLEASE UPVOTE? THANK YOU VERY MUCH!!!\n\nThe dataset brings 550 books reviews from 2009 to 2019, with an equal number of books (50) per year.\n56% of dataset are Non-Fiction and 44% are Fiction books.\n\nWrite Reviews:\nNon-Fiction books Written Reviews have grown 440% from 2009 to 2019, starting in 78,682 and ending in 424,774.\nFiction books Written Reviews have grown 136% from 2009 to 2019, starting in 156,824 and ending in 370,143.\n\n\nUser Ratings:\nNon-Fiction books User Ratings have grown 2% from 2009 to 2019, starting in 4.58 and ending in 4.69.\nFiction books User Ratings have grown 5% from 2009 to 2019, starting in 4.59 and ending in 4.82.\n\nPrices:\nNon-Fiction books Average Prices have decreased 31% from 2009 to 2019, starting in 15.23 and ending in 10.57.\nFiction books Average Prices have decreased 40% from 2009 to 2019, starting in 15.58 and ending in 9.35.\n\nAs a strategy to gain market share, Amazon could invest more in ads on High User Rating to Price Ratio Books,\nmeaning books very well rated by customer with relative low prices, meaning there\u00b4s a high and quick growth potential\nin volumes for these books.\n\nAs a strategy to gain revenue, Amazon could invest more in promoting ads for Books with the highest prices,\nas long they\u00b4re well rated by customers as well.\n\nA machine learning model to suggest books to clients according to their behavior could also be implemented, but\nit\u00b4s not the goal of this current project.","5f2c2b27":"# 6.5 Checking Book Names by User Rating and Genre Using TreeMap","99cad8ae":"# 6.4 Checking Book Names by Reviews and Genre Using TreeMap","634e4a8a":"# 6.11 Checking Categorical Variables Bar and Pie Charts","7078a4f0":"# 6.1 Checking Top Reviews Books","aa01b6c2":"# 4. Data Preliminary Exploration","17628458":"# 6.6 Checking Authors by Reviews and Genre Using TreeMap","fa0cab1e":"# 2. Importing Basic Libraries","e1106954":"# 6.8 Checking Book Names by Reviews and User Rating Using Bubble Chart","7a770d8a":"# 6.3 Checking Top User Rating to Price Ratio Books","77e7b183":"# 6.2 Checking Top User Rating Books","0e695db9":"# 3. Data Collection","7202f898":"# 7. Correlations Analysis","328b59d3":"# 6.10 Checking Dataset Behaviour Along the Time Using Line Chart","d1956bf4":"# 6. Data Exploration"}}