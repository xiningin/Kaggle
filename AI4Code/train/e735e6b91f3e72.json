{"cell_type":{"89c76daf":"code","831b7adc":"code","65f53c8f":"code","01418597":"code","35306a53":"code","6f9b888e":"code","aefa0bd5":"code","df065729":"code","5c5762cd":"code","8dfa525e":"code","b2e6e2f8":"code","f07b09fe":"code","00576367":"code","263693e5":"code","47888f92":"code","ce5630ee":"code","21a4e69d":"code","05feb9a6":"code","aa39f142":"code","0a4165b3":"markdown","a6df9771":"markdown","a63ae542":"markdown","26bdce69":"markdown","50ef44f8":"markdown","10ddac84":"markdown","9ca74031":"markdown","fd8c48ea":"markdown","806d6672":"markdown"},"source":{"89c76daf":"# This Python 3 environment comes with many helpful analytics libraries installed\n# It is defined by the kaggle\/python docker image: https:\/\/github.com\/kaggle\/docker-python\n\n# import numpy as np # linear algebra\nimport pandas as pd # data processing, XLSX file I\/O for pd.read_excel()\nfrom matplotlib import pyplot as plt\nfrom matplotlib.colors import ListedColormap\nimport seaborn as sns\n# The following line allows us to display plots without typing the plt.show() command for each plot.\n%matplotlib inline \nfrom datetime import datetime, time\n\n# Input data files are available in the \"..\/input\/\" directory.\n# For example, running this (by clicking run or pressing Shift+Enter) will list the files in the input directory\n\nimport os\nprint(os.listdir(\"..\/input\"))\n\n# Any results you write to the current directory are saved as output.","831b7adc":"df = pd.read_excel('..\/input\/anom5j.xls')\ndf.sample(5)\n# this spreadsheet is sorted by satellite","65f53c8f":"df.drop(columns='EDATE', inplace=True)","01418597":"print(\"There are {} uinque satellites listed in this spreadsheet.\".format(df['BIRD'].nunique()))\n# df['BIRD'].unique()","35306a53":"atype_count = df.groupby('ATYPE').VER.count().reset_index() # number of each type of anomaly\n# print(atype_count)\nadiag_count = df.groupby('ADIAG').VER.count().reset_index() # number of each type of diagnosis\n# print(adiag_count)\natype_adiag = df.groupby(['ATYPE','ADIAG']).VER.count().reset_index() # number of each type of diagnosed cause for each type of anomaly\n# atype_adiag ","6f9b888e":"plt.figure(figsize=(12,8))\nplt.bar(atype_count['ATYPE'], atype_count['VER'])\nplt.title('Spacecraft Anomalies by Type')\nplt.xlabel('Type of Anomaly')\nplt.ylabel('Count'); # the semicolon prevents the code from displaying \"Text(0,0.5,'Count')\", an artifact of not including the plt.show()","aefa0bd5":"plt.figure(figsize=(12,8))\nplt.bar(adiag_count['ADIAG'], adiag_count['VER'])\nplt.title('Spacecraft Anomalies by Cause')\nplt.xlabel('Diagnosed Cause')\nplt.ylabel('Count');","df065729":"anom_td_pivot = atype_adiag.pivot(index=\"ADIAG\", columns=\"ATYPE\", values=\"VER\").reset_index()\n# anom_td_pivot","5c5762cd":"ax = anom_td_pivot.set_index('ADIAG')\\\n.reindex(anom_td_pivot.set_index('ADIAG').sum().sort_values().index, axis=1)\\\n.T.plot(kind='bar', stacked=True,\n        colormap=ListedColormap(sns.color_palette(\"Set3\")),\n        figsize=(12,8),\n        title='Correlation between Type of Anomaly and Diagnosed Cause',\n       )\nax.set_xlabel('Type of Anomaly');","8dfa525e":"a_td = atype_adiag.pivot(index=\"ADIAG\", columns=\"ATYPE\", values=\"VER\") # td = type_diagnosis\nplt.figure(figsize=(12,8))\nax = sns.heatmap(a_td, annot=True, fmt=\"g\", cmap='Set3')\nax.set_xlabel('Type of Anomaly')\nax.set_ylabel('Diagnosed Cause')\nplt.title('Heatmap of Anomaly Type versus Diagnosed Cause');","b2e6e2f8":"df.ADATE.sample()","f07b09fe":"plt.figure(figsize=(12,8))\nplt.hist(df.ADATE, bins=32)\nplt.title('Spacecraft Anomalies by Year')\nplt.xlabel('Year')\nplt.ylabel('Count');","00576367":"anom_w_dtg = df[df.STIMEU != 9999].reset_index(drop=True) # drop these rows since we can\nanom_w_dtg.tail() # looking at the tail since the original file had a lot of 9999 values at the end\nanoms_loc_tm = anom_w_dtg[~anom_w_dtg.STIMEL.isna()] # eliminate entries with NaN values and those that are empty","263693e5":"plt.figure(figsize=(12,8))\nplt.hist(anoms_loc_tm.STIMEL, bins=24)\nplt.xticks([hour*100 for hour in range(24)],\n           ['%2d' %hr for hr in range(24)])\nplt.title('Spacecraft Anomalies by Local Time')\nplt.xlabel('Hour')\nplt.ylabel('Count');","47888f92":"geo_anoms = anoms_loc_tm[anoms_loc_tm.ORBIT == 'G'].reset_index(drop=True)\ninclined_anoms = anoms_loc_tm[anoms_loc_tm.ORBIT == 'I'].reset_index(drop=True)\npolar_anoms = anoms_loc_tm[anoms_loc_tm.ORBIT == 'P'].reset_index(drop=True)\nelliptical_anoms = anoms_loc_tm[anoms_loc_tm.ORBIT == 'E'].reset_index(drop=True)","ce5630ee":"plt.figure(figsize=(12,8))\nplt.hist(geo_anoms.STIMEL, bins=24)\nplt.xticks([hour*100 for hour in range(24)],\n           ['%2d' %hr for hr in range(24)])\nplt.title('Geostationary Spacecraft Anomalies by Local Time')\nplt.xlabel('Hour')\nplt.ylabel('Count');","21a4e69d":"plt.figure(figsize=(12,8))\nplt.hist(inclined_anoms.STIMEL, bins=24)\nplt.xticks([hour*100 for hour in range(24)],\n           ['%2d' %hr for hr in range(24)])\nplt.title('Inclined Orbit Spacecraft Anomalies by Local Time')\nplt.xlabel('Hour')\nplt.ylabel('Count');","05feb9a6":"plt.figure(figsize=(12,8))\nplt.hist(polar_anoms.STIMEL, bins=24)\nplt.xticks([hour*100 for hour in range(24)],\n           ['%2d' %hr for hr in range(24)])\nplt.title('Polar-orbiting Spacecraft Anomalies by Local Time')\nplt.xlabel('Hour')\nplt.ylabel('Count');","aa39f142":"plt.figure(figsize=(12,8))\nplt.hist(elliptical_anoms.STIMEL, bins=24)\nplt.xticks([hour*100 for hour in range(24)],\n           ['%2d' %hr for hr in range(24)])\nplt.title('Elliptical Orbit Spacecraft Anomalies by Local Time')\nplt.xlabel('Hour')\nplt.ylabel('Count');","0a4165b3":"Satellites in inclined and polar orbits tend to experience 12 hours apart (local time) since they repeat these orbits. These are commonly sun-synchronous.\nhttps:\/\/earthobservatory.nasa.gov\/features\/OrbitsCatalog\/page2.php","a6df9771":"Now we use a partially cleaned dataset to plot anomalies by local time. Notice how the majority of those reported are from GEO satellites, so they dominate.","a63ae542":"We are interested in the anomaly time in terms of both UTC and Local (STIMEU and STIMEL). The UTC time is important for possible correlation with space weather events, and the Local time tends to indicate where the satellite is located with respect to the earth-sun line. This is relevant since the space environment varies with respect to local solar time and satellite altitude above the earth's surface. (Notice the inclusion of SVE, or Sun-Vehicle-Earth angle in degrees.)\n\nFor analysis, we are going to combine the ADATE and STIMEU and assess STIMEL separately. We may add error bars in plots for the STIMEQ, LATQ, and LONGQ since those are uncertainty data.\n\nThe STIMEU and STIMEL have unusable values (9999) . We will address these invalid entries when we clean the data.","26bdce69":"**Correlate type of anomaly with the diagnosed cause.**\n\nNotice the large numbers of unknowns for both.","50ef44f8":"Observe that the majority of GEO anomalies occur in the midnight to dawn sector.","10ddac84":"**Anomaly Type,  what was the anomalous behavior?**\n* PC   : Phantom Command - uncommanded status change. \n* PF   : Part Failure.\n* TE   : Telemetry Error.\n* SE   : Soft Error, recoverable bit flip type error.\n* HE   : Hard Error, permanent chip damage or Latch-Up.\n* SS   : System Shutdown.\n* ESDM : ElectroStatic Discharge Measured (SCATHA specific).\n* ATT  : Attitude Control Problem.\n* UNK  : Unknown.","9ca74031":"Elliptical orbits tend to vary more often with respect to local time. While there are 326 anomalies for these satellites listed in the database, only 9 local times are recorded.","fd8c48ea":"**Anomaly diagnosis, what type of event caused the anomaly?**\n* ECEMP : Electron Caused ElectroMagnetic Pulse...Internal, Deep dielectric charging.\n* ESD : ElectroStatic Discharge...Surface charging.\n* SEU : Single Event Upset, Solar or Galactic Cosmic Rays.\n* MCP : Mission Control Problem, human induced or software error.\n* RFI : Radio Frequency Interference.\n* UNK : Unknown diagnosis.","806d6672":"We begin by removing the EDATE (date the data was entered) column since these dates are not relevant to data analysis."}}