{"cell_type":{"2f5453a7":"code","07ff8b98":"code","b5ba7a89":"code","88a19111":"code","e8eca38a":"code","cac6754c":"code","0b7ee604":"code","e8ca316f":"code","ef4926e1":"code","4363aa34":"code","6ac70e42":"code","a3b9c46d":"code","abe89d06":"code","27987af1":"code","011e1afe":"code","85eef226":"code","f1b7b42e":"code","7bb87950":"code","f4e55177":"code","71d6a367":"code","04a14cfd":"code","1e922324":"code","7c12d795":"code","d6d36bc2":"code","61e580b2":"code","cceb4b25":"code","e34d3a4f":"code","b009e3d7":"code","53b6d8dd":"code","482b2847":"code","8b093da6":"code","9e1eb7e5":"code","e7e31d61":"code","868ac02f":"code","bbbe8a0a":"code","c0cce000":"code","a62ddc2d":"code","45303cd6":"code","8f5fb277":"code","1750b9a0":"code","6ce8a0e5":"code","409e85da":"code","64c60c90":"code","88285fb2":"code","e84f0e36":"code","0e7da38d":"code","67feeaa0":"code","85ba80bc":"code","1f192b97":"markdown","98b43ec8":"markdown","54b039a4":"markdown","f794672b":"markdown","8199902f":"markdown","88c76a78":"markdown","ff9e2c70":"markdown","6a1e3bde":"markdown","df5e04f5":"markdown","a6e68c4b":"markdown","8654643d":"markdown","d145ec5f":"markdown","d0ab0b07":"markdown","e786c828":"markdown","ce26093f":"markdown","baf7a162":"markdown","e4efd0bf":"markdown","b5814284":"markdown","b0f20565":"markdown","c7f8170e":"markdown","2e58e6a1":"markdown","45f66b48":"markdown","eef3198f":"markdown","e1c277f1":"markdown","3f2b607c":"markdown","97d657b7":"markdown","ae4f84a8":"markdown","fae76016":"markdown","4b4a575f":"markdown","d8dc1d96":"markdown","e46126b7":"markdown","09d8f2f1":"markdown","654a2582":"markdown","8b5363c7":"markdown","910cf4d1":"markdown","fdfe54a8":"markdown","7ae8547f":"markdown","6e555f11":"markdown","4c525e45":"markdown","8c851ac6":"markdown","45bd1853":"markdown","c9389fb6":"markdown","169314a5":"markdown","196d9f28":"markdown","3870908d":"markdown","91bb778f":"markdown","4c2154fd":"markdown","e984603c":"markdown","06b91a48":"markdown","32ef48a4":"markdown","69c62dee":"markdown","7de75539":"markdown","d356de0a":"markdown","121bdf7a":"markdown","a1ed9b00":"markdown","042dbf61":"markdown","b7a40b1e":"markdown","eb000715":"markdown","bede5546":"markdown","5b5d9b2a":"markdown","f11f29b0":"markdown","5f785780":"markdown","0852a04f":"markdown","ce8dd3dc":"markdown","4197ad0f":"markdown","4afb8b8c":"markdown","5f3f847b":"markdown","63e05663":"markdown","5db4f926":"markdown","51523e71":"markdown","8ec6c343":"markdown","a55f10c8":"markdown","9e6f2e17":"markdown","0ccc4db3":"markdown","c99a25d2":"markdown"},"source":{"2f5453a7":"import numpy as np\nimport pandas as pd\nimport matplotlib.pyplot as plt\nimport seaborn as sns\n%matplotlib inline","07ff8b98":"import os\nfor dirname, _, filenames in os.walk('\/kaggle\/input'):\n    for filename in filenames:\n        print(os.path.join(dirname, filename))","b5ba7a89":"df = pd.read_csv(\"\/kaggle\/input\/noshowappointments\/KaggleV2-May-2016.csv\")","88a19111":"df.info()","e8eca38a":"df.isnull().sum()","cac6754c":"df.duplicated().sum()","0b7ee604":"df.head()","e8ca316f":"df['PatientId'] = df['PatientId'].astype(int)","ef4926e1":"df['ScheduledDay'] = pd.to_datetime(df['ScheduledDay'])","4363aa34":"df['ScheduledDay_date'] = df['ScheduledDay'].dt.date","6ac70e42":"df['AppointmentDay'] = pd.to_datetime(df['AppointmentDay'])","a3b9c46d":"df['AppointmentDay_date'] = df['AppointmentDay'].dt.date","abe89d06":"df['AppointmentDay_month'] = df['AppointmentDay'].apply(lambda x:x.month)","27987af1":"df['AppointmentDay_dow'] = df['AppointmentDay'].apply(lambda x:x.dayofweek)","011e1afe":"df['AppointmentDay_dow'].head()","85eef226":"dow_dict = {0:\"Monday\",1:\"Tuesday\",2:\"Wednesday\",3:\"Thursday\",4:\"Friday\",5:\"Saturday\",6:\"Sunday\"}\n\ndf['AppointmentDay_dow']= df['AppointmentDay_dow'].map(dow_dict)","f1b7b42e":"df['AppointmentDay_dow']","7bb87950":"df['Wait_Days'] = df['AppointmentDay_date']-df['ScheduledDay_date']","f4e55177":"df['Wait_Days']","71d6a367":"df['Wait_Days']=df['Wait_Days'].astype(str)\ndf['Wait_Days']=df['Wait_Days'].apply(lambda x:x.split(\" \")[0])\ndf['Wait_Days']=df['Wait_Days'].astype(int)","04a14cfd":"df['Wait_Days']","1e922324":"df.rename(columns = {'Hipertension' : 'Hypertension', 'Handcap':'Handicap'},inplace=True)","7c12d795":"df.columns","d6d36bc2":"df['ScheduledDay_date'].sort_values()","61e580b2":"df['AppointmentDay_date'].sort_values()","cceb4b25":"df.describe()","e34d3a4f":"df.query('Age<0')","b009e3d7":"df.drop(axis=0,index=99832,inplace=True)","53b6d8dd":"df.query('Age<0')","482b2847":"df.query('Wait_Days<0')","8b093da6":"df.drop(df.index[[27033,55226,64175,71533,72362]],inplace=True)","9e1eb7e5":"df.query('Wait_Days<0')","e7e31d61":"df.head()","868ac02f":"plt.figure(figsize=(6,6))\npie_chart_data = df.groupby(\"No-show\").count()\nmy_labels = 'No','Yes'\nax_01_01 = plt.pie(data=pie_chart_data,x=\"PatientId\",labels=my_labels,autopct='%1.1f%%')\nplt.legend(loc='upper right')\nplt.title('Appointment Overall No-Show Percentage')","bbbe8a0a":"plt.figure(figsize=(6,6))\npie_chart_hypertension = df[df[\"Hypertension\"]==1].groupby(\"No-show\").count()\nmy_labels = 'No','Yes'\nax_14 = plt.pie(data=pie_chart_hypertension,x=\"PatientId\",labels=my_labels,autopct='%1.1f%%')\nplt.legend(loc='upper right')\nplt.title('Patients with Hypertension No-Show Percentage')","c0cce000":"plt.figure(figsize=(6,6))\npie_chart_alcohol = df[df[\"Alcoholism\"]==1].groupby(\"No-show\").count()\nmy_labels = 'No','Yes'\nax_14 = plt.pie(data=pie_chart_alcohol,x=\"Alcoholism\",labels=my_labels,autopct='%1.1f%%')\nplt.legend(loc='upper right')\nplt.title('Patients with Alcoholism No-Show Percentage')","a62ddc2d":"def no_show_percentage(data, column):\n\n    #no show count by column\n    no_show = data[data[\"No-show\"]==\"Yes\"].groupby(column).count()[\"PatientId\"]\n    #all count by column\n    all_appoint = data.groupby(column).count()[\"PatientId\"]\n    #percentage of no-shows by column\n    month_percent = (no_show\/all_appoint)*100\n\n    return month_percent","45303cd6":"plt.figure(figsize=(6,6))\nax_01 = no_show_percentage(data=df,column=\"Gender\").plot(kind='bar')\nax_01.set_title(\"Percentage of No-Shows by Gender\")\nax_01.set_ylabel(\"Percent of No-Shows\/%\")\nax_01.set_xlabel(\"Gender\")\nax_01 = plt.gca()\nax_01.tick_params(axis='x', labelrotation = 0)\nplt.show()","8f5fb277":"plt.figure(figsize=(6,6))\nax02 = no_show_percentage(data=df,column=\"Scholarship\").plot(kind='bar')\nax02.set_title(\"Appointment No-Show Relation by Scholarship\")\nax02.set_ylabel(\"Percent of No-Shows\/%\")\n#ticks\nlabels = [item.get_text() for item in ax02.get_xticklabels()]\nlabels[0] = 'Not Received'\nlabels[1] = 'Received'\nax02.set_xticklabels(labels)","1750b9a0":"plt.figure(figsize=(6,6))\nax03 = no_show_percentage(data=df,column=\"SMS_received\").plot(kind='bar')\nax03.set_title(\"Appointment No-Show Relation by SMS_received\")\nax03.set_ylabel(\"Percent of No-Shows\/%\")\n#ticks\nlabels = [item.get_text() for item in ax03.get_xticklabels()]\nlabels[0] = 'Not Received'\nlabels[1] = 'Received'\nax03.set_xticklabels(labels)","6ce8a0e5":"plt.figure(figsize=(6,6))\nax05 = no_show_percentage(data=df,column=\"AppointmentDay_dow\").plot(kind='bar')\nax05.set_title(\"Appointment No-Show Relation by Day of Week\")\nax05.set_ylabel(\"Percent of No-Shows\/%\")\nax05.set_xlabel(\"Day of Week\")","409e85da":"plt.figure(figsize=(33,4))\nplt.title('Distribution of Appointment Count by date')\nax01_10 = sns.histplot(data=df,x=\"AppointmentDay_date\",bins=30)\nax01_10.set_ylabel(\"Appointment Count\")\nax01_10.set_xlabel(\"Appointment Date\")","64c60c90":"plt.figure(figsize=(6,6))\nax06_01 = no_show_percentage(data=df,column=\"AppointmentDay_month\").plot(kind='bar')\nax06_01.set_title(\"Percentage of No-Shows by Appointment Month\")\nax06_01.set_ylabel(\"Percent of No-Shows\/%\")\nax06_01.set_xlabel(\"Month\")\nax06_01 = plt.gca()\nax06_01.tick_params(axis='x', labelrotation = 0)\nplt.show()","88285fb2":"plt.figure(figsize=(27,8))\nax07_01 = no_show_percentage(data=df,column=\"Wait_Days\").plot(kind='bar')\nax07_01.set_title(\"Percentage of No-Shows by Wait Days\")\nax07_01.set_ylabel(\"Percent of No-Shows\/%\")\nax07_01.set_xlabel(\"Wait Days\")","e84f0e36":"plt.figure(figsize=(6,4))\nplt.title('Distribution of Appointment Count by Age')\nax01_02 = sns.histplot(data=df,x='Age')\nax01_02.set_ylabel(\"Appointment Count\")","0e7da38d":"plt.figure(figsize=(24,8))\nax08 = sns.histplot(x=\"Age\", data=df, hue=\"No-show\",bins=100,alpha=0.5)\nax08.set_title(\"Appointment No-Show Distribution by Age\")\nax08.set_ylabel(\"Appointment Count\")","67feeaa0":"plt.figure(figsize=(24,8))\nax10 = no_show_percentage(data=df,column=\"Neighbourhood\").plot(kind='bar')\nax10 = plt.gca()\nax10.set_title(\"Percentage of No-Shows by Neighbourhood\")\nax10.set_ylabel(\"Percent of No-Shows\/%\")\nax10.set_xlabel(\"Wait Days\")\nax10.tick_params(axis='x', labelrotation = 90)\nplt.show() ","85ba80bc":"neigh_all = df.groupby(\"Neighbourhood\").count()[\"PatientId\"]\nneigh_all.nsmallest(5)","1f192b97":"**It seems some patients scheduled the appointments months in advance.**","98b43ec8":"**Revise the spelling of columns \"Hipertension\" and \"Handcap\" to \"Hypertension\" and \"Handicap\".**","54b039a4":"## Data Wrangling\n","f794672b":"**Below, find rows where \"Age\" is below 0.**","8199902f":"**Below, make bar chart exploring if the day of week influences not showing up for an appointment.**","88c76a78":"**There are no null values in this dataset.**","ff9e2c70":"**Below, make barplot of the percentage of no-shows by month.**","6a1e3bde":"**Drop rows where Wait_Days is below zero.**","df5e04f5":"**Below, convert \"Wait_Days\" column to string, extract just the number. Convert the number into integers.**","a6e68c4b":"* **The no-show rate is the highest amongst the 20 - 30 year age group.**\n* **The no-show rate becomes lower for patients 50 years and older.**","8654643d":"**Below make distribution plot comparing appointment no-show by age.**","d145ec5f":"**Below, make pie chart exploring the percentage of no-shows amongst patients with alcoholism.**","d0ab0b07":"* **Gender does not influence missing an appointment as the no-show proportions amongst males and females are about the same.**","e786c828":"**Make new column \"AppointmentDay_dow\" for day of week of \"AppointmentDay\".**","ce26093f":"* **Only one appointment was made in PARQUE INDUSTRIAL during the three months of this dataset.**\n* **Only two appointments were made in ILHAS OCE\u00c2NICAS DE TRINDADE  during the three months of this dataset.**\n* **The two neighborhoods had outlier no-show rates because of the small numbers of appointments made there.**","baf7a162":"**All appointments in this dataset were from 04\/29\/2016 - 06\/08\/2016.**","e4efd0bf":"**Below, make barplot of the percentage of no-shows by neighborhood of appointment.**","b5814284":"**Check converted \"Wait_Days\" column.**","b0f20565":"**Check again for any rows where \"Wait_Days\" is below 0.**","c7f8170e":"**Below, use describe function to look and min\/max values of this dataset.**","2e58e6a1":"**Drop row where Age is below zero.**","45f66b48":"**Check converted \"AppointmentDay_dow\" column.**","eef3198f":"**There are no duplicated rows in this dataset.**","e1c277f1":"**Below, make bar chart exploring if receiving a scholarship has any influence in not showing up for an appointment.**","3f2b607c":"**Check the information.**","97d657b7":"**Make Pie Chart showing overall percentage of No-Show Appointments.**","ae4f84a8":"**Read the raw data.**","fae76016":"* **Patients with alcoholism have a no-show rate of 20.1 which is around the average no-show rate. Alcoholism does not influence no-show rates.**","4b4a575f":"**There are some weird min values. The min value of the \"Age\" column is -1. This is not possible as a person has to be at least 0 years old. Also, the min \"Wait_Days\" is -6. This is not possible as well, as the shortest time a patient can wait is 0 days. We will need to delete rows with these values.**","d8dc1d96":"* **Patients are more likely not to show up for an appointment if they received a SMS(text) message.**","e46126b7":"**Below, make function to calculate percentage of no-shows.**","09d8f2f1":"* **Overall, 20.2 percent of patients did not show up at their appointment.**\n* **79.8 percent of patients showed up at their appointment.**","654a2582":"**Below, make histogram exploring the distribution of appointments by date.**","8b5363c7":"* **The day of week of appointment does not seem to affect the no show rate.**","910cf4d1":"**Make new column \"AppointmentDay_date\" with just the date of \"AppointmentDay\".**","fdfe54a8":"**The day of week is represented by integers. Reference link below to change integers into the weekday it represents.**\n\nhttps:\/\/pandas.pydata.org\/docs\/reference\/api\/pandas.Series.dt.dayofweek.html#pandas.Series.dt.dayofweek","7ae8547f":"* **There were more appointments for Age 0 (Newborns) than any other age group.**\n* **The appointment count goes down after the age of 60, but that may be because older people are more likely to pass away, hence the lower population.**","6e555f11":"**Check the column \"AppointmentDay_dow\".**","4c525e45":"## Conclusions","8c851ac6":"**Below, make distribution plot comparing Appointment No-Show by Age.**","45bd1853":"**Check \"Wait_Days\" column.**","c9389fb6":"**Make new column \"AppointmentDay_month\" with just the month of \"AppointmentDay\".**","169314a5":"**Convert \"AppointmentDay\" column to datetime.**","196d9f28":"**The \"Wait_Days\" column is in datetime format. Also it has the text \"days\" after each number**","3870908d":"* **A patient is more likely to not show up at an appointment if receiving a scholarship.**","91bb778f":"**Check again for any rows where \"Age\" is below 0.**","4c2154fd":"* **Overall, 20.2 percent of patients did not show up at their appointment.**\n* **Patients from ages 20 - 30 are more likely to miss appointments.**\n* **Patients receiving the scholarship are more likely to miss appointments.**\n* **Patients receiving text messages(SMS) are more likely to miss appointments.**\n* **No-show rates amongst patients with hypertension are lower than the average.**\n* **Alcoholism does not affect no-show rates.**\n* **Patients who scheduled the appointment on the same day (0 wait days) are less likely to miss appointments.**\n* **The dataset is limited in that the no show appointments were only gathered for three months from 04\/29\/2016 and 6\/8\/2016. Some segments have few appointments so one or two no-shows have a large effect on the no-show rate.**","e984603c":"* **The no-show percentage is lowest on 0 wait days. (Same day appointments)**\n* **The no-show percentage is higher when wait days are over 103 days, but the number of appointments made with such long wait periods is very small. A few no-shows can affect the no-show rate greatly.**","06b91a48":"**Below, find rows where \"Wait Days\" is below 0.**","32ef48a4":"**Make new column \"ScheduledDay_date\" with just the date of \"ScheduledDay\".**","69c62dee":"**\"PatientID\" numbers are floats while other numbers are integers.**\n\n**Below, change \"PatientID\" numbers to integers.**","7de75539":"**Below, make dictionary to change integers into the weekday it represents. Convert integers of \"AppointmentDay_dow\" column into day of week with .map() function.**","d356de0a":"**Below, see if ILHAS OCE\u00c2NICAS DE TRINDADE and PARQUE INDUSTRIAL percentages are outliers because the number of appointments made in those neighborhoods are small.**","121bdf7a":"**Below, check columns for any null values.**","a1ed9b00":"**Below, make barplot of the percentage of no-shows by wait days.**","042dbf61":"**Make bar chart exploring if gender has any influence in not showing up for an appointment.**","b7a40b1e":"* **The month of appointment has does not affect the no-show rate as the no-show percentage is around 20 percent for all three months.**","eb000715":"* **Most of the appointments were made in May 2016. This makes sense as the period this dataset was recorded was from 04\/29\/2016 and 6\/8\/2016.**","bede5546":"**Below, make bar chart exploring if receiving a SMS(text message) has any influence in not showing up for an appointment.**","5b5d9b2a":"**Below, check for duplicated rows.**","f11f29b0":"**Convert \"ScheduledDay\" to datetime.**","5f785780":"* **The no-show rate for patients with hypertension is 17.3% and is lower than the average of 20.2%**","0852a04f":"**Below, check the first five rows of the dataframe.**","ce8dd3dc":"**Check the first five rows of the cleaned dataset.**","4197ad0f":"**Import necessary libraries.**","4afb8b8c":"**Check the revised column names.**","5f3f847b":"**The \"Patient ID\" is a float, we will need to change it into integers in later steps. \"ScheduledDay\" and \"AppointmentDay\" columns are strings, we will need to change the columns into datetime in later steps.**","63e05663":"## Exploratory Data Analysis with Visuals\n\n","5db4f926":"**Sort the dates of \"ScheduledDay_date\".**","51523e71":"**Make new column \"Wait_Days\" by subtracting \"ScheduledDay_date\" from \"AppointmentDay_date\" column.**","8ec6c343":"## Introduction\n\n**Lets say a person makes a doctor appointment in advance, but misses it on day of appointment.**\n\n**What factors are common amongst patients who do not show up for doctor appointments?**\n**Can text messages help patients not miss appointments? Does the number of wait days influence missed appointments?**\n\n**We try to answer these questions by analyzing a 2016 Brazilian healthcare dataset.\nData of appointments was combined from more than 45 clinics and hospitals at municipallevel in Brazil betweeen 04\/29\/2016 and 6\/8\/2016.**\n\n**The link to the dataset is below.**\n\nhttps:\/\/www.kaggle.com\/joniarroba\/noshowappointments\n\n**Below are notes on the dataset.**\n\n* **Scholarship variable means this concept** = https:\/\/en.wikipedia.org\/wiki\/Bolsa_Fam%C3%ADlia\n\n\n* **In the \"No-show\" column \"No\" means the patient went to the appointment. \"Yes\" means the patient missed the appointment.**\n\n","a55f10c8":"# Visual Data Analysis of Missed Doctors Appointments in\u00a0Brazil","9e6f2e17":"**Below, sort the dates of \"AppointmentDay_date\".**","0ccc4db3":"**Below, make pie chart exploring the percentage of no-shows amongst patients with hypertension.**","c99a25d2":"* **Most neighborhoods have a no-show percentage of around 20 percent.**\n* **ILHAS OCE\u00c2NICAS DE TRINDADE has a 100 percent no-show rate.**\n* **PARQUE INDUSTRIAL has a 0 percent no-show rate.**"}}