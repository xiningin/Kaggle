{"cell_type":{"c5ac03a0":"code","02d0be67":"code","33fc4ce2":"code","2a81f80a":"code","d5a29b7f":"code","80054c34":"code","9ea0a71e":"code","821ea67d":"markdown"},"source":{"c5ac03a0":"import numpy as np\nimport pandas as pd\nimport datatable as dt","02d0be67":"path_train_data = '\/kaggle\/input\/jane-street-market-prediction\/train.csv'","33fc4ce2":"%%time\n\ndt_train = dt.fread(path_train_data)\ndf_train = dt_train.to_pandas()\nprint(f\"Shape df_train is: {df_train.shape}\")\ndel dt_train","2a81f80a":"df_4metric = df_train[['date', 'weight', 'resp']].copy()\nprint(df_4metric.shape)\ndf_4metric.head()","d5a29b7f":"df_4metric['max_p'] = df_4metric['weight'] * df_4metric['resp'] * (df_4metric['resp'] > 0)\ndf_4metric.head()","80054c34":"df_4metric_days = df_4metric[['date', 'max_p']].groupby('date').sum().reset_index()\nprint(df_4metric_days.shape)\ndf_4metric_days.head()","9ea0a71e":"p = df_4metric_days['max_p'].values\n\nt = (np.sum(p)\/(np.sqrt(np.sum(p**2))))*np.sqrt(250\/len(p))\n\nu = min(max(t, 0), 6) * np.sum(p)\n\nprint(f\"Maximum score is: {u:.3f}\")","821ea67d":"### Maximization metric on train data"}}