{"cell_type":{"bb308408":"code","1cb2bcf3":"code","c47f3160":"code","a03abaf5":"code","b2e787d3":"code","46709c9e":"code","b855e628":"code","4a653e76":"code","6d04be43":"code","cc8ebf77":"code","dcccfb97":"code","09635e0a":"code","d110f944":"code","38b97956":"code","7ab5286a":"code","f45453e3":"code","ad6d8348":"code","3112d393":"code","2ab302e9":"code","8b92ca55":"code","9c8c40b0":"code","6e241980":"code","514a97a6":"code","f4c660a3":"code","f9e5ba4c":"code","3fd28f0b":"code","3657e813":"code","c7dd49d8":"code","de205ec3":"code","ba157c3d":"code","e4b74bb2":"code","22e34470":"code","e7d176a2":"code","3ae18a91":"code","d657a0e7":"code","b51f2501":"code","447fb08e":"code","1afb28b2":"code","481c0fc3":"code","bc4482db":"code","60967120":"code","9c9c9198":"code","b285ad5b":"code","fb1d31da":"code","1cffcab0":"code","8c264eb0":"code","33b998a5":"code","70397fc0":"code","ba05fe6f":"code","e94fb275":"code","8f6075eb":"code","8783db75":"code","3b997e0f":"code","daf6201e":"code","4c365bd4":"code","2f37f89a":"code","354a6fcf":"code","2d5443a3":"code","fe8cce0d":"code","66d334bf":"code","eb7e2cbe":"code","91f6a204":"code","ceb36fb7":"code","c5b6f895":"code","805d5d49":"code","9207cf02":"code","7ad80e9a":"code","4966cf60":"code","d72fac13":"code","7dcb230a":"code","8a0ee1ee":"code","a29c3633":"code","aa967643":"code","b89dc606":"code","ee3bd1ce":"code","2617f8c7":"code","49b117c9":"code","e128a125":"code","a748bbcd":"code","69d7c6ad":"code","77e06c7e":"code","c6e24b46":"code","dcfca398":"markdown","ed17b1a2":"markdown","34fe13d1":"markdown","0caa0bb8":"markdown","7b91db75":"markdown","2cfc0e15":"markdown","6a3c034d":"markdown","41185f15":"markdown","0c37f5c7":"markdown","25e89f9e":"markdown","b3c27f3d":"markdown","59644183":"markdown","7f1c0711":"markdown","fa90c727":"markdown","475e1835":"markdown","67b36438":"markdown","bafd40ee":"markdown","6b9b49af":"markdown","1ea6fd05":"markdown","d01a8511":"markdown","17c81a4a":"markdown","702a1b73":"markdown","7281ef08":"markdown","db069f15":"markdown","554dab3d":"markdown","1e01b9cb":"markdown","cb10e4a1":"markdown","03adea9a":"markdown","30c0848a":"markdown","9c49c2a7":"markdown","8660f85a":"markdown","99741a8d":"markdown","9ded9d44":"markdown","3d87d323":"markdown","6f29f5d4":"markdown","cf8f55cc":"markdown","362e3eb0":"markdown","49a50b00":"markdown","13d393cc":"markdown","45b3cba1":"markdown","1d84530c":"markdown","d435fa4b":"markdown","a0a5d2a0":"markdown","f0c04574":"markdown","886f47d8":"markdown","1c05e72d":"markdown","f76f6c2d":"markdown","c4607123":"markdown","39adca57":"markdown","79b8e7f2":"markdown","055f9c66":"markdown","7861a0be":"markdown","43230196":"markdown","2ed3ff5c":"markdown","c88017fe":"markdown","ab6a6476":"markdown","dc4ca1fa":"markdown","219b0b83":"markdown","fe201a95":"markdown","b671c5eb":"markdown","ab9e6f4e":"markdown","f28c108d":"markdown","1153865e":"markdown","21efeac1":"markdown","01c15233":"markdown","cc60d9a3":"markdown","b0e887a9":"markdown","5aa31622":"markdown","67c0365c":"markdown","04581699":"markdown","492cdd98":"markdown","92b9839b":"markdown","b00067ae":"markdown","fb85039b":"markdown","647bf7e3":"markdown","c02dd2c2":"markdown","2023d1c1":"markdown","628155e2":"markdown","9e3f648d":"markdown","78f55a0c":"markdown","3b652ffa":"markdown","e3194b0b":"markdown","613cd53f":"markdown","816e6229":"markdown","79b77a42":"markdown","5d98ea41":"markdown","304ad698":"markdown","2e397a11":"markdown","699ec342":"markdown","16972dc0":"markdown"},"source":{"bb308408":"import pandas as pd\nimport numpy as np\nimport matplotlib.pyplot as plt\nimport warnings\nwarnings.filterwarnings(\"ignore\")","1cb2bcf3":"ten_seasons_data = pd.read_csv('..\/input\/english-premier-league-data-2009-2019\/English_Premier_League_data_2009-2019.csv')\ndecade_data = ten_seasons_data.copy()\ndecade_data.head()","c47f3160":"decade_data.describe()","a03abaf5":"decade_data.isnull().sum()","b2e787d3":"decade_data.dtypes","46709c9e":"decade_data['Date'] = pd.to_datetime(decade_data['Date'], format=\"%Y\/%m\/%d\")","b855e628":"decade_data = decade_data.drop(['Div'], axis=1) #dropping first column 'Div' as value is always E0\n\ndecade_data.columns = ['Date','HomeTeam','AwayTeam','FT_Home_Goal','FT_Away_Goal','FT_Result','HT_Home_Goal','HT_Away_Goal',\n                        'HT_Result','Referee','H_Shots','A_Shots','H_Shots_Target','A_Shots_Target','H_Foul',\n                        'A_Foul','H_Corner','A_Corner','H_Yellow','A_Yellow','H_Red','A_Red']\n\ndecade_data.head()","4a653e76":"total_matches = decade_data['Date'].count()\nprint('Total matches played during the 10 seasons is : ' +str(total_matches))","6d04be43":"all_teams = decade_data['HomeTeam'].unique()\nall_teams_count = decade_data['HomeTeam'].nunique()\nprint('Total teams which played in the EPL during the ten seasons : '+str(all_teams_count))\nprint('\\n')\nprint('The teams are : \\n'+str(all_teams))","cc8ebf77":"total_games_each_team = decade_data['HomeTeam'].value_counts() + decade_data['AwayTeam'].value_counts()\neach_team_games = pd.DataFrame(total_games_each_team).sort_index(axis = 0) \neach_team_games.columns = ['Total Games']\neach_team_games","dcccfb97":"each_team_games.plot(kind='bar',color='brown', legend=False, figsize=(20,10))\nplt.xticks(fontsize=14)\nplt.yticks(fontsize=14)\nplt.xlabel('Teams',fontsize=20)\nplt.ylabel('Total games (EPL) in seasons 2009 - 2019',fontsize=20)\nplt.title('Total games per team during 2009 - 2019',fontsize=20, color='red')\nplt.show()","09635e0a":"ten_season_teams = each_team_games[each_team_games['Total Games']==380]\nten_season_teams","d110f944":"one_season_teams = each_team_games[each_team_games['Total Games']==38]\none_season_teams","38b97956":"all_matches_results = pd.DataFrame(decade_data['FT_Result'].value_counts())\nall_matches_results","7ab5286a":"labels = ['Home Team Wins','Away Team Wins','Draw']\nall_matches_results.plot(kind='pie', y = 'FT_Result', autopct='%1.1f%%', \n startangle=180, shadow=False, labels=labels, legend = False, fontsize=14, figsize=(5,5))\nplt.title('Percentage share of match results',fontsize=20, color='red')","f45453e3":"referees_count = decade_data['Referee'].nunique()\nprint('Number of referees who officiated the EPL matches between 2009 and 2019 : '+str(referees_count))\nall_referees = pd.DataFrame(decade_data['Referee'].value_counts()).sort_index(axis = 0)\nall_referees","ad6d8348":"all_referees.plot(kind='barh',color='orange', legend=False, figsize=(15,15))\nplt.xticks(fontsize=14)\nplt.yticks(fontsize=14)\nplt.ylabel('Referees',fontsize=14)\nplt.xlabel('Total games officiated in seasons 2009 - 2019',fontsize=14)\nplt.title('Number of games officiated by referees during 2009 - 2019',fontsize=20, color='red')\nplt.show()","3112d393":"come_backs = decade_data[((decade_data['HT_Result']=='A') & (decade_data['FT_Result']=='H'))\n                         | \n                         ((decade_data['HT_Result']=='H') & (decade_data['FT_Result']=='A'))]\n\ncome_back_wins = come_backs.shape[0]\n\nprint('Number of games in which teams loosing at half time come back to win the game at full time : '+str(come_back_wins))","2ab302e9":"#come_backs\ncome_backs.head()","8b92ca55":"come_backs_year_sort = pd.DataFrame()\ncome_backs_year_sort['comeback_wins_per_year'] = come_backs['FT_Result'].groupby([come_backs.Date.dt.year]).agg('count')\ncome_backs_year_sort","9c8c40b0":"season_start=9\nseason_end=10\nseason_list = []\n\nfor x in range (10):\n    for y in range (380):\n        season_list.append(('0'+str(season_start)+'-'+str(season_end))[-5:]) # the value '0' is added to make 9 as 09.\n    season_start = season_start + 1\n    season_end = season_end + 1","6e241980":"season_df = pd.DataFrame({'Season':season_list})\n\ndecade_data_by_seasons = pd.concat([season_df,decade_data], axis=1)\ndecade_data_by_seasons.head()","514a97a6":"come_backs_updated = decade_data_by_seasons[\n                        ((decade_data_by_seasons['HT_Result']=='A') & (decade_data_by_seasons['FT_Result']=='H'))\n                         | \n                         ((decade_data_by_seasons['HT_Result']=='H') & (decade_data_by_seasons['FT_Result']=='A'))]\n\n\ncome_backs_season_sort = pd.DataFrame()\ncome_backs_season_sort['comeback_wins_per_season'] = come_backs['FT_Result'].groupby([come_backs_updated.Season]).agg('count')\ncome_backs_season_sort","f4c660a3":"def value_and_percentage(x): \n    return '{:.2f}%\\n({:.0f})'.format(x, total*x\/100)\n\n\nplt.figure(figsize=(9,9))\nvalues = come_backs_season_sort['comeback_wins_per_season']\nlabels = decade_data_by_seasons['Season'].unique()\ntotal = np.sum(values)\ncolors = ['#8BC34A','Pink','#FE7043','Turquoise','#D4E157','Grey','#EAB300','#AA7043','Violet','Orange']\nplt.pie (values , labels= labels , colors= colors , \n         startangle=45 , autopct=value_and_percentage, pctdistance=0.85, \n         explode=[0,0,0,0.1,0,0,0,0,0,0] )\nmy_circle=plt.Circle( (0,0), 0.7, color='white') # Adding circle at the centre\np=plt.gcf()\np.gca().add_artist(my_circle)\nplt.title('Comeback wins split among seasons',fontsize=20, color='red')\nplt.show()","f9e5ba4c":"home_team_wins = (decade_data_by_seasons[decade_data_by_seasons['FT_Result']=='H']\n                  .groupby([decade_data_by_seasons.HomeTeam]).agg('count'))[['FT_Result']]\nhome_team_wins.columns = ['Home_Wins']\nhome_team_wins.index.names = ['Team']","3fd28f0b":"home_team_loss = (decade_data_by_seasons[decade_data_by_seasons['FT_Result']=='A']\n                  .groupby([decade_data_by_seasons.HomeTeam]).agg('count'))[['FT_Result']]\nhome_team_loss.columns = ['Home_Loss']\nhome_team_loss.index.names = ['Team']","3657e813":"away_team_wins = (decade_data_by_seasons[decade_data_by_seasons['FT_Result']=='A']\n                  .groupby([decade_data_by_seasons.AwayTeam]).agg('count'))[['FT_Result']]\naway_team_wins.columns = ['Away_Wins']\naway_team_wins.index.names = ['Team']","c7dd49d8":"away_team_loss = (decade_data_by_seasons[decade_data_by_seasons['FT_Result']=='H']\n                  .groupby([decade_data_by_seasons.AwayTeam]).agg('count'))[['FT_Result']]\naway_team_loss.columns = ['Away_Loss']\naway_team_loss.index.names = ['Team']","de205ec3":"home_team_draw = (decade_data_by_seasons[decade_data_by_seasons['FT_Result']=='D']\n                  .groupby([decade_data_by_seasons.HomeTeam]).agg('count'))[['FT_Result']]\nhome_team_draw.columns = ['Home_Draw']\nhome_team_draw.index.names = ['Team']\n\n\naway_team_draw = (decade_data_by_seasons[decade_data_by_seasons['FT_Result']=='D']\n                  .groupby([decade_data_by_seasons.AwayTeam]).agg('count'))[['FT_Result']]\naway_team_draw.columns = ['Away_Draw']\naway_team_draw.index.names = ['Team']\n\n\ntotal_draw_matches = home_team_draw['Home_Draw'] + away_team_draw['Away_Draw']\nhome_and_away_draws = pd.DataFrame(total_draw_matches)\nhome_and_away_draws.columns = ['Draws-Home_and_Away']","ba157c3d":"total_wins = home_team_wins['Home_Wins'] + away_team_wins['Away_Wins']\nhome_and_away_wins = pd.DataFrame(total_wins)\nhome_and_away_wins.columns = ['Wins-Home_and_Away']\n\ntotal_points_decade = (home_and_away_wins['Wins-Home_and_Away'] * 3 ) + (home_and_away_draws['Draws-Home_and_Away'])\n\nten_season_points = pd.DataFrame(total_points_decade)\nten_season_points.columns = ['Total_points_in_decade']","e4b74bb2":"teams_stats_table = pd.concat([each_team_games, home_team_wins, home_team_loss, away_team_wins, \n                               away_team_loss, home_and_away_draws, ten_season_points], axis=1)\nteams_stats_table","22e34470":"allseason_teams = teams_stats_table[teams_stats_table.index.isin(ten_season_teams.index)]\nallseason_teams_points = pd.DataFrame(allseason_teams['Total_points_in_decade'])\nallseason_teams_points","e7d176a2":"plt.rcParams[\"figure.figsize\"] = (15,10)\nplt.bar(allseason_teams_points.index, allseason_teams_points['Total_points_in_decade'], \n        color=plt.cm.Paired((np.arange(len(allseason_teams_points)))),width = 0.5)\nplt.xticks(fontsize=14)\nplt.yticks(fontsize=14)\nplt.xlabel('Teams which played all seasons during 2009 - 2019',fontsize=20)\nplt.ylabel('Total points collected in all seasons during 2009 - 2019',fontsize=20)\nplt.title('Total points collected by teams which played in all seasons during 2009 - 2019',fontsize=20, color='red')\n\nx_cord = -0.1\nfor z in range (len(allseason_teams_points)):\n    plt.text(x_cord, allseason_teams_points.Total_points_in_decade[z] + 10, allseason_teams_points.Total_points_in_decade[z])\n    x_cord = x_cord + 1\n    \nplt.show()","3ae18a91":"max_goals_per_game = (decade_data_by_seasons['FT_Home_Goal'] + decade_data_by_seasons['FT_Away_Goal']).max()\n\nprint('Maximum number of goals scored in a single game is : '+str(max_goals_per_game))","d657a0e7":"decade_data_by_seasons[(decade_data_by_seasons['FT_Home_Goal'] + decade_data_by_seasons['FT_Away_Goal']) == max_goals_per_game]","b51f2501":"each_team_home_goals = decade_data_by_seasons['FT_Home_Goal'].groupby(decade_data_by_seasons['HomeTeam']).sum()\n\neach_team_away_goals = decade_data_by_seasons['FT_Away_Goal'].groupby(decade_data_by_seasons['AwayTeam']).sum()\n\neach_team_goal_stats = pd.DataFrame(index = each_team_games.index)\neach_team_goal_stats = pd.concat([each_team_games, pd.DataFrame(each_team_home_goals), pd.DataFrame(each_team_away_goals)\n                                , pd.DataFrame(each_team_home_goals + each_team_away_goals) ], axis=1)\n\neach_team_goal_stats.columns = ['Total Games', 'HomeGoals', 'AwayGoals', 'TotalGoals']\n\neach_team_goal_stats['AvgGoals_homeGame'] = (each_team_goal_stats['HomeGoals']\/(each_team_goal_stats['Total Games']\/2)).round(2)\neach_team_goal_stats['AvgGoals_awayGame'] = (each_team_goal_stats['AwayGoals']\/(each_team_goal_stats['Total Games']\/2)).round(2)\n\neach_team_goal_stats","447fb08e":"each_team_goal_stats.plot(y=[\"AvgGoals_homeGame\", \"AvgGoals_awayGame\"], kind=\"barh\", legend=True, figsize=(15,15))\nplt.xticks(fontsize=14)\nplt.yticks(fontsize=14)\nplt.ylabel('Teams',fontsize=20)\nplt.xlabel('Average number of goals per game',fontsize=20)\nplt.title('Average number of goals scored per game during 2009 - 2019',fontsize=20, color='red') \nplt.show()","1afb28b2":"dominant_performances_home = decade_data_by_seasons[(decade_data_by_seasons['FT_Home_Goal'] - \n                                                     decade_data_by_seasons['FT_Away_Goal'] >= 3)\n                                                   ].groupby([decade_data_by_seasons.HomeTeam]).agg('count')[['HomeTeam']]\n\n\ndominant_performances_away = decade_data_by_seasons[(decade_data_by_seasons['FT_Away_Goal'] - \n                                                     decade_data_by_seasons['FT_Home_Goal'] >= 3)\n                                                   ].groupby([decade_data_by_seasons.AwayTeam]).agg('count')[['AwayTeam']]\n\n#since some teams have dominant performances only at home or away, we use merge by using index from both dataframes\ndominant_performances = pd.merge(dominant_performances_home, dominant_performances_away, how = 'outer', \n                                 left_index=True, right_index=True)\n\ndominant_performances.fillna(0, inplace = True)\n\ndominant_performances['total_dominant_performances'] = dominant_performances['HomeTeam'] + dominant_performances['AwayTeam']\n\ndominant_performances = dominant_performances.astype('int64')\ndominant_performances","481c0fc3":"others_home_dominant_games = dominant_performances[dominant_performances.HomeTeam < 10].sum()['HomeTeam']\n\nothers_away_dominant_games = dominant_performances[dominant_performances.AwayTeam < 10].sum()['AwayTeam']","bc4482db":"dominant_home_games = pd.DataFrame(dominant_performances.HomeTeam)\nothers_home = pd.Series({'HomeTeam':others_home_dominant_games},name='Others')\ndominant_home_games = dominant_home_games.append(others_home)\ndominant_home_games = dominant_home_games[dominant_home_games.HomeTeam >= 10]\ndominant_home_games","60967120":"def value_and_percentage(x): \n    return '{:.2f}%\\n({:.0f})'.format(x, total*x\/100)\n\n\nplt.figure(figsize=(9,9))\nvalues = dominant_home_games['HomeTeam']\nlabels = dominant_home_games.index\ntotal = np.sum(values)\ncolors = ['#8BC34A','Pink','Olive','Grey','#FE7043','Turquoise',\n          '#EAB300','Violet','Orange','Gold','Skyblue','#D4E157','#AA7043']\nplt.pie (values , labels= labels , colors= colors , \n         startangle=45 , autopct=value_and_percentage, pctdistance=0.85)\nmy_circle=plt.Circle( (0,0), 0.7, color='white') # Adding circle at the centre\np=plt.gcf()\np.gca().add_artist(my_circle)\nplt.title('Victories with a goal margin of 3 or more at home',fontsize=20, color='red')\nplt.show()","9c9c9198":"dominant_away_games = pd.DataFrame(dominant_performances.AwayTeam)\nothers_away = pd.Series({'AwayTeam':others_away_dominant_games},name='Others')\ndominant_away_games = dominant_away_games.append(others_away)\ndominant_away_games = dominant_away_games[dominant_away_games.AwayTeam >= 10]\ndominant_away_games","b285ad5b":"def value_and_percentage(x): \n    return '{:.2f}%\\n({:.0f})'.format(x, total*x\/100)\n\n\nplt.figure(figsize=(9,9))\nvalues = dominant_away_games['AwayTeam']\nlabels = dominant_away_games.index\ntotal = np.sum(values)\ncolors = ['#8BC34A','Pink','#FE7043','Turquoise','#EAB300','#D4E157','#AA7043']\nplt.pie (values , labels= labels , colors= colors , \n         startangle=45 , autopct=value_and_percentage, pctdistance=0.85)\nmy_circle=plt.Circle( (0,0), 0.7, color='white') # Adding circle at the centre\np=plt.gcf()\np.gca().add_artist(my_circle)\nplt.title('Victories with a goal margin of 3 or more away from home',fontsize=20, color='red')\nplt.show()","fb1d31da":"season_home_wins = pd.DataFrame( decade_data_by_seasons[decade_data_by_seasons['FT_Result'] == 'H']\n                                .groupby([decade_data_by_seasons.Season, decade_data_by_seasons.HomeTeam]).agg('count')\n                                .unstack().fillna(0).stack()['FT_Result']).reset_index()\n\nseason_home_wins.columns = ['Season', 'Team', 'H_Wins']\n\n\nseason_away_wins = pd.DataFrame( decade_data_by_seasons[decade_data_by_seasons['FT_Result'] == 'A']\n                                .groupby([decade_data_by_seasons.Season, decade_data_by_seasons.AwayTeam]).agg('count')\n                                .unstack().fillna(0).stack()['FT_Result']).reset_index()\n\nseason_away_wins.columns = ['Season', 'Team', 'A_Wins']\n\n\nseason_home_draws = pd.DataFrame( decade_data_by_seasons[decade_data_by_seasons['FT_Result'] == 'D']\n                                 .groupby([decade_data_by_seasons.Season, decade_data_by_seasons.HomeTeam]).agg('count')\n                                 .unstack().fillna(0).stack()['FT_Result']).reset_index()\n\nseason_home_draws.columns = ['Season', 'Team', 'H_Draws']\n\n\nseason_away_draws = pd.DataFrame( decade_data_by_seasons[decade_data_by_seasons['FT_Result'] == 'D']\n                                 .groupby([decade_data_by_seasons.Season, decade_data_by_seasons.AwayTeam]).agg('count')\n                                 .unstack().fillna(0).stack()['FT_Result']).reset_index()\n\nseason_away_draws.columns = ['Season', 'Team', 'A_Draws']","1cffcab0":"season_points_per_team = pd.DataFrame(season_home_wins['Team'])\n\nseason_points_per_team = pd.concat([season_points_per_team, pd.DataFrame(season_home_wins.H_Wins), \n                                    pd.DataFrame(season_away_wins.A_Wins), pd.DataFrame(season_home_draws.H_Draws), \n                                    pd.DataFrame(season_away_draws.A_Draws)], axis=1)\n\nseason_points_per_team = season_points_per_team.set_index(season_home_wins.Season)\n\n\nseason_points_per_team['Points'] = 3 * (season_points_per_team.H_Wins + \n                                        season_points_per_team.A_Wins) + (season_points_per_team.H_Draws + \n                                                                          season_points_per_team.A_Draws)\n\nseason_points_per_team = season_points_per_team[season_points_per_team.Points != 0]\n#season_points_per_team\nseason_points_per_team.head()","8c264eb0":"ten_season_teams_points = season_points_per_team[season_points_per_team['Team'].isin(ten_season_teams.index)][['Team','Points']]\nten_season_teams_points = ten_season_teams_points.reset_index()\n#ten_season_teams_points\nten_season_teams_points.head()","33b998a5":"for club in ten_season_teams_points.Team.unique() :\n    plt.plot(ten_season_teams_points[ten_season_teams_points['Team'] == club]['Season'], \n             ten_season_teams_points[ten_season_teams_points['Team'] == club]['Points'],  \n             marker='o', label=club)\nplt.xticks(fontsize=14)\nplt.yticks(fontsize=14)\nplt.legend()\nplt.xlabel('Season', fontsize = 20)\nplt.ylabel('Points', fontsize = 20)\nplt.title('Points collected by teams who played in all 10 seasons',fontsize=20, color='red')\nplt.show()","70397fc0":"each_team_home_shots = decade_data_by_seasons['H_Shots'].groupby(decade_data_by_seasons['HomeTeam']).sum()\n\neach_team_away_shots = decade_data_by_seasons['A_Shots'].groupby(decade_data_by_seasons['AwayTeam']).sum()\n\neach_team_home_shots_target = decade_data_by_seasons['H_Shots_Target'].groupby(decade_data_by_seasons['HomeTeam']).sum()\n\neach_team_away_shots_target = decade_data_by_seasons['A_Shots_Target'].groupby(decade_data_by_seasons['AwayTeam']).sum()\n\n\neach_team_shot_stats = pd.DataFrame(index = each_team_games.index)\neach_team_shot_stats = pd.concat([each_team_games, pd.DataFrame(each_team_home_shots), pd.DataFrame(each_team_away_shots), \n                                  pd.DataFrame(each_team_home_shots + each_team_away_shots), \n                                  pd.DataFrame(each_team_home_shots_target), pd.DataFrame(each_team_away_shots_target), \n                                  pd.DataFrame(each_team_home_shots_target + each_team_away_shots_target)], axis=1)\n\neach_team_shot_stats.columns = ['Total Games', 'HomeShots', 'AwayShots', 'TotalShots', \n                               'HomeShotsTarget', 'AwayShotsTarget', 'TotalShotsTarget']\n\neach_team_shot_stats['AvgShots_homeGame'] = (each_team_shot_stats['HomeShots']\/(each_team_shot_stats['Total Games']\/2)).round(2)\neach_team_shot_stats['AvgShots_awayGame'] = (each_team_shot_stats['AwayShots']\/(each_team_shot_stats['Total Games']\/2)).round(2)\n\neach_team_shot_stats['AvgShotstarget_homeGame'] = (each_team_shot_stats['HomeShotsTarget']\/\n                                                   (each_team_shot_stats['Total Games']\/2)).round(2)\neach_team_shot_stats['AvgShotstarget_awayGame'] = (each_team_shot_stats['AwayShotsTarget']\/\n                                                   (each_team_shot_stats['Total Games']\/2)).round(2)\n","ba05fe6f":"each_team_shot_and_goals = pd.concat([each_team_shot_stats, each_team_goal_stats], axis=1)\neach_team_shot_and_goals = each_team_shot_and_goals.loc[:,~each_team_shot_and_goals.columns.duplicated()]\n\n#reorder columns\neach_team_shot_and_goals = each_team_shot_and_goals[['Total Games', 'HomeShots', 'HomeShotsTarget','HomeGoals',\n                                                     'AwayShots', 'AwayShotsTarget', 'AwayGoals', \n                                                     'TotalShots', 'TotalShotsTarget', 'TotalGoals', \n                                                     'AvgShots_homeGame', 'AvgShotstarget_homeGame', 'AvgGoals_homeGame', \n                                                    'AvgShots_awayGame', 'AvgShotstarget_awayGame', 'AvgGoals_awayGame']]\n\n#rename columns to fit\neach_team_shot_and_goals.columns = ['Games', 'HS', 'HST', 'HG','AS', 'AST', 'AG', \n                                    'TS', 'TST', 'TG', \n                                    'AvgSHG', 'AvgSTHG', 'AvgGHG', 'AvgSAG', 'AvgSTAG', 'AvgGAG']\n\neach_team_shot_and_goals","e94fb275":"ten_season_teams_shots_and_goals = each_team_shot_and_goals[each_team_shot_and_goals.index.isin(ten_season_teams.index)]\nten_season_teams_shots_and_goals","8f6075eb":"ten_season_teams_shots_and_goals.plot(y=['TG', 'TST','TS'], kind='bar', \n                                      label=['Total Goals', 'Total Shots on Target', 'Total Shots'], \n                                      color=['#8BC34A','#EAB300','tomato'])\nplt.xticks(fontsize=14)\nplt.yticks(fontsize=14)\nplt.xlabel('Team', fontsize = 20)\nplt.ylabel('Shots', fontsize = 20)\n\nplt.figtext(0.25, 0.93, \"Shots and Goals stats of teams who played all 10 seasons\", \n            fontsize=20, color='Black')\n\nplt.figtext(0.26, 0.91, \"Total Goals\", fontsize=20, color='#8BC34A', ha ='left', va='top')\nplt.figtext(0.38, 0.91, \"vs\", fontsize=20, color='Black', ha ='left', va='top')\nplt.figtext(0.52, 0.91, \"Total Shots on Target\", fontsize=20, color='#EAB300', ha ='center', va='top')\nplt.figtext(0.65, 0.91, \"vs\", fontsize=20, color='Black', ha ='center', va='top')\nplt.figtext(0.78, 0.91, \"Total Shots\", fontsize=20, color='tomato', ha ='right', va='top')\n\nplt.show()","8783db75":"ten_season_teams_shots_and_goals.plot(y=['AvgGHG', 'AvgSTHG','AvgSHG'], kind='bar', \n                                      label=['Avg Goals\/Home game', 'Avg Shots on Target\/Home Game', 'Avg Shots\/Home Game'], \n                                      color=['#8BC34A','#EAB300','tomato'])\nplt.xticks(fontsize=14)\nplt.yticks(fontsize=14)\nplt.xlabel('Team', fontsize = 20)\nplt.ylabel('Shots Avg', fontsize = 20)\nplt.ylim(0, 20)\n\nplt.figtext(0.15, 0.93, \"Shots and Goals Averages\/Game @Home of teams who played all 10 seasons\", \n            fontsize=20, color='Black')\n\nplt.figtext(0.11, 0.91, \"Avg Goals\/Home game\", fontsize=20, color='#8BC34A', ha ='left', va='top')\nplt.figtext(0.33, 0.91, \"vs\", fontsize=20, color='Black', ha ='left', va='top')\nplt.figtext(0.51, 0.91, \"Avg Shots on Target\/Home Game\", fontsize=20, color='#EAB300', ha ='center', va='top')\nplt.figtext(0.68, 0.91, \"vs\", fontsize=20, color='Black', ha ='center', va='top')\nplt.figtext(0.91, 0.91, \"Avg Shots\/Home Game\", fontsize=20, color='tomato', ha ='right', va='top')\n\nplt.show()","3b997e0f":"ten_season_teams_shots_and_goals.plot(y=['AvgGAG', 'AvgSTAG','AvgSAG'], kind='bar', \n                                      label=['Avg Goals\/Away game', 'Avg Shots on Target\/Away Game', 'Avg Shots\/Away Game'], \n                                      color=['#8BC34A','#EAB300','tomato'])\nplt.xticks(fontsize=14)\nplt.yticks(fontsize=14)\nplt.xlabel('Team', fontsize = 20)\nplt.ylabel('Shots Avg', fontsize = 20)\nplt.ylim(0, 16)\n\nplt.figtext(0.15, 0.93, \"Shots and Goals Averages\/Game @Away of teams who played all 10 seasons\", \n            fontsize=20, color='Black')\n\nplt.figtext(0.11, 0.91, \"Avg Goals\/Away game\", fontsize=20, color='#8BC34A', ha ='left', va='top')\nplt.figtext(0.33, 0.91, \"vs\", fontsize=20, color='Black', ha ='left', va='top')\nplt.figtext(0.51, 0.91, \"Avg Shots on Target\/Away Game\", fontsize=20, color='#EAB300', ha ='center', va='top')\nplt.figtext(0.68, 0.91, \"vs\", fontsize=20, color='Black', ha ='center', va='top')\nplt.figtext(0.91, 0.91, \"Avg Shots\/Away Game\", fontsize=20, color='tomato', ha ='right', va='top')\n\nplt.show()","daf6201e":"#CRH - coversion rate @ Home\n#CRA - convertio rate @ Away\n\n#two diff methods to divide columns\nten_season_teams_shots_and_goals['CRH%'] = (ten_season_teams_shots_and_goals['HG']\/\n                                           ten_season_teams_shots_and_goals['HS']*100).round(2)\n\nten_season_teams_shots_and_goals.loc[:,'CRA%'] = (ten_season_teams_shots_and_goals.loc[:,'AG']\/\n                                                 ten_season_teams_shots_and_goals.loc[:,'AS']*100).round(2)\n\nten_season_teams_shots_and_goals","4c365bd4":"ten_season_teams_shots_and_goals.plot(y=['CRH%', 'CRA%'], kind='bar', \n                                      label=['Conversion rate in Home Matches', 'Conversion rate in Away Mathes'], \n                                      color=['Turquoise','Violet'])\nplt.xticks(fontsize=14)\nplt.yticks(fontsize=14)\nplt.xlabel('Team', fontsize = 20)\nplt.ylabel('Converison rate in %', fontsize = 20)\n\nplt.title('Conversion rates (%) at home and away matches', fontsize = 20, color='red')\n\nplt.show()","2f37f89a":"each_team_home_goals_conceded = decade_data_by_seasons['FT_Away_Goal'].groupby(decade_data_by_seasons['HomeTeam']).sum()\n\neach_team_away_goals_conceded = decade_data_by_seasons['FT_Home_Goal'].groupby(decade_data_by_seasons['AwayTeam']).sum()\n\neach_team_goal_conceded_stats = pd.DataFrame(index = each_team_games.index)\neach_team_goal_conceded_stats = pd.concat([each_team_games, pd.DataFrame(each_team_home_goals_conceded), \n                                           pd.DataFrame(each_team_away_goals_conceded), \n                                           pd.DataFrame(each_team_home_goals_conceded + each_team_away_goals_conceded) ], \n                                          axis=1)\n\neach_team_goal_conceded_stats.columns = ['Total Games', 'GoalsConcededHome', 'GoalsConcededAway', 'TotalGoalsConceded']\n\neach_team_goal_conceded_stats['AvgGoalsConceded_homeGame'] = (each_team_goal_conceded_stats['GoalsConcededHome']\/\n                                                              (each_team_goal_conceded_stats['Total Games']\/2)).round(2)\n\neach_team_goal_conceded_stats['AvgGoalsConceded_awayGame'] = (each_team_goal_conceded_stats['GoalsConcededAway']\/\n                                                              (each_team_goal_conceded_stats['Total Games']\/2)).round(2)\n\neach_team_goal_conceded_stats","354a6fcf":"each_team_goal_conceded_stats.plot(y=[\"AvgGoalsConceded_homeGame\", \"AvgGoalsConceded_awayGame\"], \n                                   kind=\"barh\", legend=True, figsize=(15,15))\nplt.xticks(fontsize=14)\nplt.yticks(fontsize=14)\nplt.ylabel('Teams',fontsize=20)\nplt.xlabel('Average number of goals conceded per game',fontsize=20)\nplt.title('Average number of goals conceded per game during 2009 - 2019',fontsize=20, color='red') \nplt.show()","2d5443a3":"total_yellows_home = decade_data_by_seasons['H_Yellow'].sum()\ntotal_reds_home = decade_data_by_seasons['H_Red'].sum()\ntotal_yellows_away = decade_data_by_seasons['A_Yellow'].sum()\ntotal_reds_away = decade_data_by_seasons['A_Red'].sum()\n\nyellow_and_red_cards = [total_yellows_home, total_reds_home, total_yellows_away, total_reds_away]\n\nprint('Total yellow cards awarded to home side : ' + str(yellow_and_red_cards[0]))\nprint('Total red cards awarded to home side : ' + str(yellow_and_red_cards[1]))\nprint('Total yellow cards awarded to away side : ' + str(yellow_and_red_cards[2]))\nprint('Total red cards awarded to away side : ' + str(yellow_and_red_cards[3]))","fe8cce0d":"def value_and_percentage(x): \n    return '{:.2f}%\\n({:.0f})'.format(x, total*x\/100)\n\n\nplt.figure(figsize=(9,9))\nvalues = yellow_and_red_cards\nlabels = ['Yellow cards for home team', 'Red cards for home team', 'Yellow cards for away team', 'Red cards for away team']\ntotal = np.sum(values)\ncolors = ['Gold','#FE7043','Turquoise','Violet']\nplt.pie (values , labels= labels , colors= colors , \n         startangle=45 , autopct=value_and_percentage, pctdistance=0.85, \n         textprops={'fontsize': 14}, explode=[0.02,0,0.02,0] )\n\nmy_circle=plt.Circle( (0,0), 0.7, color='white') # Adding circle at the centre\np=plt.gcf()\np.gca().add_artist(my_circle)\nplt.title('Yellow and red cards distribution',fontsize=20, color='red')\nplt.show()","66d334bf":"each_team_home_yellows = decade_data_by_seasons['H_Yellow'].groupby(decade_data_by_seasons['HomeTeam']).sum()\neach_team_home_reds = decade_data_by_seasons['H_Red'].groupby(decade_data_by_seasons['HomeTeam']).sum()\n\neach_team_away_yellows = decade_data_by_seasons['A_Yellow'].groupby(decade_data_by_seasons['AwayTeam']).sum()\neach_team_away_reds = decade_data_by_seasons['A_Red'].groupby(decade_data_by_seasons['AwayTeam']).sum()\n\n\neach_team_card_stats = pd.DataFrame(index = each_team_games.index)\neach_team_card_stats = pd.concat([each_team_games, pd.DataFrame(each_team_home_yellows), pd.DataFrame(each_team_home_reds),\n                                  pd.DataFrame(each_team_away_yellows), pd.DataFrame(each_team_away_reds), \n                                  pd.DataFrame(each_team_home_yellows + each_team_away_yellows), \n                                  pd.DataFrame(each_team_home_reds + each_team_away_reds)], axis=1)\n\neach_team_card_stats.columns = ['Total Games', 'HomeYellows', 'HomeReds', 'AwayYellows', \n                                'AwayReds', 'TotalYellows', 'TotalReds']\n\n#HGY - HomeGameYellow; HGR - HomeGameRed; AGY - AwayGameYellow; AGR - AwayGameRed\neach_team_card_stats['AvgHGY'] = (each_team_card_stats['HomeYellows']\/(each_team_card_stats['Total Games']\/2)).round(2)\neach_team_card_stats['AvgHGR'] = (each_team_card_stats['HomeReds']\/(each_team_card_stats['Total Games']\/2)).round(2)\neach_team_card_stats['AvgAGY'] = (each_team_card_stats['AwayYellows']\/(each_team_card_stats['Total Games']\/2)).round(2)\neach_team_card_stats['AvgAGR'] = (each_team_card_stats['AwayReds']\/(each_team_card_stats['Total Games']\/2)).round(2)\n\neach_team_card_stats","eb7e2cbe":"ax1 = each_team_card_stats.plot( y=[\"TotalYellows\"], kind=\"barh\",\n                          legend=False, color =('gold'), figsize=(15,15),\n                          title='Yellow cards collected @home\/away (combined) during 2009 - 2019', fontsize=14)\nax1.set(xlabel='Number of yellow cards', ylabel='Team')\nax1.title.set_size(20)\nax1yaxis_label = ax1.yaxis.get_label()\nax1yaxis_label.set_fontsize(14)\nax1xaxis_label = ax1.xaxis.get_label()\nax1xaxis_label.set_fontsize(14)\nplt.show()","91f6a204":"ax2 = each_team_card_stats.plot( y=[\"TotalReds\"], kind=\"barh\", \n                          legend=False, color =('red'), figsize=(15,15), \n                          title='Red cards collected @home\/away (combined) during 2009 - 2019', fontsize=14)\nax2.set(xlabel='Number of cards', ylabel='Team')\nax2.title.set_size(20)\nax2yaxis_label = ax2.yaxis.get_label()\nax2yaxis_label.set_fontsize(14)\nax2xaxis_label = ax2.xaxis.get_label()\nax2xaxis_label.set_fontsize(14)\n\nplt.show()","ceb36fb7":"ax1 = each_team_card_stats.plot( y=[\"AvgHGY\", \"AvgAGY\"], kind=\"bar\",\n                          legend=False, color =('olive','darkorange'), figsize=(40,10),\n                          title='Average number of Yellow card collected per home\/away game during 2009 - 2019', fontsize=30)\nax1.set(xlabel='', ylabel='Average number of cards per game\\n') #we dont give x label here. Both plots will have same x axis.\nax1.title.set_size(30)\nax1yaxis_label = ax1.yaxis.get_label()\nax1yaxis_label.set_fontsize(30)\n\nax2 = each_team_card_stats.plot( y=[\"AvgHGR\", \"AvgAGR\"], kind=\"bar\", \n                          legend=False, color =('blue','red'), figsize=(40,10), \n                          title='Average number of Red card collected per home\/away game during 2009 - 2019', fontsize=30)\nax2.set(xlabel='Team', ylabel='Average number of cards per game\\n')\nax2.title.set_size(30)\nax2yaxis_label = ax2.yaxis.get_label()\nax2yaxis_label.set_fontsize(30)\nax2xaxis_label = ax2.xaxis.get_label()\nax2xaxis_label.set_fontsize(30)\n\nplt.show()","c5b6f895":"referee_home_yellows = decade_data_by_seasons['H_Yellow'].groupby(decade_data_by_seasons['Referee']).sum()\nreferee_home_reds = decade_data_by_seasons['H_Red'].groupby(decade_data_by_seasons['Referee']).sum()\nreferee_away_yellows = decade_data_by_seasons['A_Yellow'].groupby(decade_data_by_seasons['Referee']).sum()\nreferee_away_reds = decade_data_by_seasons['A_Red'].groupby(decade_data_by_seasons['Referee']).sum()\n\neach_referee_card_stats = pd.DataFrame(index = all_referees.index)\neach_referee_card_stats = pd.concat([all_referees, pd.DataFrame(referee_home_yellows), pd.DataFrame(referee_home_reds),\n                                  pd.DataFrame(referee_away_yellows), pd.DataFrame(referee_away_reds), \n                                  pd.DataFrame(referee_home_yellows + referee_away_yellows), \n                                  pd.DataFrame(referee_home_reds + referee_away_reds)], axis=1)\n\neach_referee_card_stats.columns = ['Total Games', 'YellowsToHomeSide', 'RedsToHomeSide', 'YellowsToAwaySide', \n                                'RedsToAwaySide', 'YellowsTotal', 'RedsTotal']\neach_referee_card_stats","805d5d49":"ax1 = each_referee_card_stats.plot( y=[\"YellowsTotal\"], kind=\"bar\",\n                          legend=False, color =('gold'), figsize=(40,10),\n                          title='Yellow cards awarded during 2009 - 2019 in EPL', fontsize=30)\n\nax1.set(xlabel='', ylabel='Cards awarded') #we dont give x label here. Both plots will have same x axis.\nax1.title.set_size(30)\nax1yaxis_label = ax1.yaxis.get_label()\nax1yaxis_label.set_fontsize(30)\n\nax2 = each_referee_card_stats.plot( y=[\"RedsTotal\"], kind=\"bar\", \n                          legend=False, color =('crimson'), figsize=(40,10), \n                          title='Red cards awarded during 2009 - 2019 in EPL', fontsize=30)\n\nax2.set(xlabel='Referee', ylabel='Cards awarded')\nax2.title.set_size(30)\nax2yaxis_label = ax2.yaxis.get_label()\nax2yaxis_label.set_fontsize(30)\n\nax2xaxis_label = ax2.xaxis.get_label()\nax2xaxis_label.set_fontsize(30)\n\nplt.show()","9207cf02":"home_fouls = decade_data_by_seasons['H_Foul'].groupby(decade_data_by_seasons['HomeTeam']).sum()\naway_fouls = decade_data_by_seasons['A_Foul'].groupby(decade_data_by_seasons['AwayTeam']).sum()\n\n\neach_team_foul_stats = pd.DataFrame(index = each_team_games.index)\neach_team_foul_stats = pd.concat([each_team_games, pd.DataFrame(home_fouls), pd.DataFrame(away_fouls), \n                                  pd.DataFrame(home_fouls + away_fouls)], axis=1)\n\neach_team_foul_stats.columns = ['Total Games', 'FoulsCommitted@Home', 'FoulsCommitted@Away', 'TotalFoulsCommitted']\n\n\n#HGF - HomeGameFoul; AGF - AwayGameFoul\neach_team_foul_stats['AvgHGF'] = (each_team_foul_stats['FoulsCommitted@Home']\/\n                                  (each_team_foul_stats['Total Games']\/2)).round(2)\n\neach_team_foul_stats['AvgAGF'] = (each_team_foul_stats['FoulsCommitted@Away']\/\n                                  (each_team_foul_stats['Total Games']\/2)).round(2)\n\neach_team_foul_stats","7ad80e9a":"each_team_foul_stats.plot(y=[\"AvgHGF\", \"AvgAGF\"], \n                          kind=\"barh\", legend=True, figsize=(15,15), color = ['crimson', 'darkgreen'], \n                          label=['Average Fouls in Home Game', 'Average Fouls in Away Game'])\nplt.xticks(fontsize=14)\nplt.yticks(fontsize=14)\nplt.ylabel('Teams',fontsize=20)\nplt.xlabel('Number of fouls per game',fontsize=20)\nplt.title('Average number of fouls commited per game at home and away games during 2009 - 2019',fontsize=18, color='red') \nplt.show()","4966cf60":"each_team_fouls_to_cards = pd.DataFrame(index = each_team_games.index)\neach_team_fouls_to_cards = pd.concat([each_team_games, each_team_foul_stats['TotalFoulsCommitted'], \n                                  each_team_card_stats['TotalYellows'], \n                                  each_team_card_stats['TotalReds']], axis=1)\n\neach_team_fouls_to_cards['YellowsPerFoul %'] = ((each_team_fouls_to_cards['TotalYellows']\/\n                                             each_team_fouls_to_cards['TotalFoulsCommitted'])*100).round(2)\n\neach_team_fouls_to_cards['RedsPerFoul %'] = ((each_team_fouls_to_cards['TotalReds']\/\n                                             each_team_fouls_to_cards['TotalFoulsCommitted'])*100).round(2)\n\neach_team_fouls_to_cards","d72fac13":"ax1 = each_team_fouls_to_cards.plot( y=[\"YellowsPerFoul %\"], kind=\"bar\",\n                          legend=False, color =('gold'), figsize=(40,10),\n                          title='Yellow cards per foul in % (cards per 100 fouls) for each team', fontsize=30)\n\nax1.set(xlabel='', ylabel='Yellow cards per foul in %\\n (cards per 100 fouls) \\n') #we dont give x label here. Both plots will have same x axis.\nax1.title.set_size(30)\nax1yaxis_label = ax1.yaxis.get_label()\nax1yaxis_label.set_fontsize(30)\n\nax2 = each_team_fouls_to_cards.plot( y=[\"RedsPerFoul %\"], kind=\"bar\", \n                          legend=False, color =('crimson'), figsize=(40,10), \n                          title='Red cards per foul in % (cards per 100 fouls) for each team', fontsize=30)\n\nax2.set(xlabel='Teams', ylabel='Red cards per foul in %\\n (cards per 100 fouls) \\n')\nax2.title.set_size(30)\nax2yaxis_label = ax2.yaxis.get_label()\nax2yaxis_label.set_fontsize(30)\n\nax2xaxis_label = ax2.xaxis.get_label()\nax2xaxis_label.set_fontsize(30)\n\nplt.show()","7dcb230a":"each_team_home_corners_gained = decade_data_by_seasons['H_Corner'].groupby(decade_data_by_seasons['HomeTeam']).sum()\neach_team_home_corners_conceded = decade_data_by_seasons['A_Corner'].groupby(decade_data_by_seasons['HomeTeam']).sum()\n\neach_team_away_corners_gained = decade_data_by_seasons['A_Corner'].groupby(decade_data_by_seasons['AwayTeam']).sum()\neach_team_away_corners_conceded = decade_data_by_seasons['H_Corner'].groupby(decade_data_by_seasons['AwayTeam']).sum()\n\n\neach_team_corner_stats = pd.DataFrame(index = each_team_games.index)\neach_team_corner_stats = pd.concat([each_team_games, pd.DataFrame(each_team_home_corners_gained), \n                                    pd.DataFrame(each_team_home_corners_conceded),\n                                    pd.DataFrame(each_team_away_corners_gained), \n                                    pd.DataFrame(each_team_away_corners_conceded), \n                                    pd.DataFrame(each_team_home_corners_gained + each_team_away_corners_gained), \n                                    pd.DataFrame(each_team_home_corners_conceded + each_team_away_corners_conceded)], \n                                   axis=1)\n\n#CG - Corners Gained; CC - Corners Conceded\neach_team_corner_stats.columns = ['Total Games', 'CG@Home', 'CC@Home', \n                                  'CG@Away', 'CC@Away', \n                                  'TotalCG', 'TotalCC']\n\n#HCG - HomeCornersGained; HCC - HomeCornersConceded; ACG - AwayCornersGained; ACC - AwayCornersConceded\neach_team_corner_stats['AvgHCG'] = (each_team_corner_stats['CG@Home']\/\n                                    (each_team_corner_stats['Total Games']\/2)).round(2)\n\neach_team_corner_stats['AvgHCC'] = (each_team_corner_stats['CC@Home']\/\n                                    (each_team_corner_stats['Total Games']\/2)).round(2)\n\neach_team_corner_stats['AvgACG'] = (each_team_corner_stats['CG@Away']\/\n                                    (each_team_corner_stats['Total Games']\/2)).round(2)\n\neach_team_corner_stats['AvgACC'] = (each_team_corner_stats['CC@Away']\/\n                                    (each_team_corner_stats['Total Games']\/2)).round(2)\n\neach_team_corner_stats","8a0ee1ee":"each_team_corner_stats.plot(y=[\"TotalCG\", \"TotalCC\"], \n                            kind=\"bar\", legend=True, figsize=(40,15), color = ['green', 'red'], \n                            label=['Total Corners Gained', 'Total Corners Conceded'])\nplt.xticks(fontsize=20)\nplt.yticks(fontsize=20)\nplt.ylabel('Corners gained\/conceded between 2009 - 2019',fontsize=20)\nplt.xlabel('Teams',fontsize=20)\nplt.title('Total corners gained\/conceded between 2009 - 2019 in EPL',fontsize=20, color='red') \nplt.show()","a29c3633":"corner_stats_ten_season_teams = each_team_corner_stats[each_team_corner_stats.index.isin(ten_season_teams.index)]\ncorner_stats_ten_season_teams","aa967643":"corner_stats_ten_season_teams.plot(y=[\"AvgHCG\", \"AvgHCC\", \"AvgACG\", \"AvgACC\"], \n                                   kind=\"barh\", legend=True, figsize=(15,15), color = ['green', 'deeppink' , 'lime', 'red'], \n                                   label = ['Avg Corners Gained @Home per game', 'Avg Corners Conceded @Home per game', \n                                           'Avg Corners Gained @Away per game', 'Avg Corners Conceded @Away per game'])\nplt.xticks(fontsize=14)\nplt.yticks(fontsize=14)\nplt.xlabel('Average number of corners gained\/conceded per game',fontsize=20)\nplt.ylabel('Teams',fontsize=20)\nplt.title('Average number of corners gained\/conceded per game between 2009 - 2019 in EPL',fontsize=20, color='red') \nplt.show()","b89dc606":"max_points_teams_per_season = season_points_per_team.groupby([season_points_per_team.\n                                                    index])['Points'].transform(max) == season_points_per_team['Points']\n\nseason_points_per_team[max_points_teams_per_season]","ee3bd1ce":"#Find goals scored by each team per season (home + away)\nseason_home_goals_scored = pd.DataFrame( decade_data_by_seasons['FT_Home_Goal']\n                                .groupby([decade_data_by_seasons.Season, decade_data_by_seasons.HomeTeam]).sum()\n                                .unstack().fillna(0).stack()).reset_index()\n\nseason_home_goals_scored.columns = ['Season', 'Team', 'HGoals_Scored']\n\nseason_away_goals_scored = pd.DataFrame( decade_data_by_seasons['FT_Away_Goal']\n                                .groupby([decade_data_by_seasons.Season, decade_data_by_seasons.AwayTeam]).sum()\n                                .unstack().fillna(0).stack()).reset_index()\n\nseason_away_goals_scored.columns = ['Season', 'Team', 'AGoals_Scored']\n\n\nseason_total_goals_scored = pd.DataFrame()\nseason_total_goals_scored = pd.concat([season_home_goals_scored.Season, season_home_goals_scored.Team, \n                                       pd.DataFrame(season_home_goals_scored['HGoals_Scored'] + \n                                                    season_away_goals_scored['AGoals_Scored'])],\n                                      axis=1)\n\n\nseason_total_goals_scored.columns = ['Season', 'Team', 'Total_Goals_Scored']\n\n\n#Find goals conceded by each team per season (home + away)\nseason_home_goals_conceded = pd.DataFrame( decade_data_by_seasons['FT_Away_Goal']\n                                .groupby([decade_data_by_seasons.Season, decade_data_by_seasons.HomeTeam]).sum()\n                                .unstack().fillna(0).stack()).reset_index()\n\nseason_home_goals_conceded.columns = ['Season', 'Team', 'HGoals_Conceded']\n\nseason_away_goals_conceded = pd.DataFrame( decade_data_by_seasons['FT_Home_Goal']\n                                .groupby([decade_data_by_seasons.Season, decade_data_by_seasons.AwayTeam]).sum()\n                                .unstack().fillna(0).stack()).reset_index()\n\nseason_away_goals_conceded.columns = ['Season', 'Team', 'AGoals_Conceded']\n\n\nseason_total_goals_conceded = pd.DataFrame()\nseason_total_goals_conceded = pd.concat([season_home_goals_conceded.Season, season_home_goals_conceded.Team, \n                                       pd.DataFrame(season_home_goals_conceded['HGoals_Conceded'] + \n                                                    season_away_goals_conceded['AGoals_Conceded'])],\n                                      axis=1)\n\nseason_total_goals_conceded.columns = ['Season', 'Team', 'Total_Goals_Conceded']\n\n\n#Make a new df with Goal Difference\n\nseason_total_gd = pd.DataFrame()\nseason_total_gd = pd.concat([season_total_goals_scored.Season, season_total_goals_scored.Team, \n                             season_total_goals_scored.Total_Goals_Scored, season_total_goals_conceded.Total_Goals_Conceded],\n                            axis=1)\n\nseason_total_gd['Goal_Difference'] = season_total_gd['Total_Goals_Scored'] - season_total_gd['Total_Goals_Conceded']\n\n\nseason_total_gd = season_total_gd[(season_total_gd.Total_Goals_Scored != 0)  &  (season_total_gd.Total_Goals_Conceded != 0)]\nseason_total_gd.set_index('Season')\n#season_total_gd\nseason_total_gd.head()","2617f8c7":"season_total_gd.index = season_points_per_team.index\n\n\nseason_points_per_team_with_goal_diff = pd.concat([season_points_per_team, season_total_gd.Total_Goals_Scored, \n                                                   season_total_gd.Total_Goals_Conceded, season_total_gd.Goal_Difference], \n                                                  axis=1, sort=False)\n\n#season_points_per_team_with_goal_diff\nseason_points_per_team_with_goal_diff.head()","49b117c9":"max_points_teams_each_season = season_points_per_team_with_goal_diff.groupby([\n    season_points_per_team_with_goal_diff.index])['Points'].transform(max) == season_points_per_team_with_goal_diff['Points']\n\n\nmax_points_teams_per_season = season_points_per_team_with_goal_diff[max_points_teams_each_season]\nmax_points_teams_per_season = max_points_teams_per_season.reset_index()\nmax_points_teams_per_season","e128a125":"champions = pd.DataFrame()\n\nfor season in max_points_teams_per_season.Season.unique():\n    seasonal_top_pointers = max_points_teams_per_season[max_points_teams_per_season['Season']==season]\n    seasonal_top_pointers_with_gd = seasonal_top_pointers[seasonal_top_pointers['Goal_Difference']==\n                                                          seasonal_top_pointers['Goal_Difference'].max()]\n    champions = champions.append(seasonal_top_pointers_with_gd)\n\nchampions = champions.set_index('Season')\nchampions","a748bbcd":"print('The different teams to be crowned EPL champions between 2009 - 2019 are : \\n' + str(champions.Team.unique()))","69d7c6ad":"champions_with_trophy_count = pd.DataFrame(champions['Team'].value_counts())\nchampions_with_trophy_count.columns = ['Trophy_Number']\nchampions_with_trophy_count","77e06c7e":"team_with_max_epl_trophy = champions_with_trophy_count[champions_with_trophy_count['Trophy_Number']==\n                                                          champions_with_trophy_count['Trophy_Number'].max()]\nteam_with_max_epl_trophy","c6e24b46":"def value_and_percentage(x): \n    return '{:.2f}%\\n({:.0f})'.format(x, total*x\/100)\n\n\nplt.figure(figsize=(9,9))\nvalues = champions_with_trophy_count.Trophy_Number\nlabels = champions_with_trophy_count.index.unique()\ntotal = np.sum(values)\ncolors = ['#8BC34A','dodgerblue','#FE7043','Turquoise']\nplt.pie (values , colors = colors ,  labels = labels,\n         startangle=45 , autopct=value_and_percentage, pctdistance=0.85, \n         textprops={'fontsize': 14}, explode=[0.05,0,0,0] )\n\nmy_circle=plt.Circle( (0,0), 0.7, color='white') # Adding circle at the centre\np=plt.gcf()\np.gca().add_artist(my_circle)\nplt.title('Number of EPL trophies between 2009 - 2019',fontsize=20, color='red')\nplt.show()","dcfca398":"#### <font color=violet>f. We group HomeTeam when Full time result was draw and group AwayTeam when Full time result was draw. Finally, we add them both.<font\/>","ed17b1a2":"## <font color=green>The data is now well prepared to proceed with analysis <font\/>","34fe13d1":"<h2 align=\"center\"> <font color=green>Suggestions to improve this notebook are welcome.<font\/> <\/h2>","0caa0bb8":"## <font color=blue>14. Find the total points collected by each team per season.<br>$\\;\\;\\;\\;$ Extract the points table of the teams who played all 10 seasons.<br>$\\;\\;\\;\\;$ Plot it as a line graph.<font\/>","7b91db75":"#### <font color=violet>We group the fouls at home and away by each team and add them.<font\/>","2cfc0e15":"#### <font color=violet>Since we don't have a info about the season in the data frame, we use the following info.<br>Each EPL season has 380 games.<br>So we can make a new column called season which changes after every 380 games.<font\/>","6a3c034d":"## <font color=blue>5. Howmany referees officiated the EPL matches between 2009 and 2019?<br>$\\;\\;$ List them with the total number of matches officiated.<br>$\\;\\;$ Show the data as a horizontal bar plot.<font\/>","41185f15":"## <font color=blue>A lot more analysing can be carried out on this data set.<br>I invite you to try analysing this data set and find new results.<br>https:\/\/www.kaggle.com\/aj7amigo\/english-premier-league-data-2009-2019<font\/>","0c37f5c7":"#### <font color=violet>To find this, we need the following info.<br>Total games per team per season is 38.<br><br><font\/><font color=violet>So, if a team played all 10 seasons, the total games played will be 380.<br>We search for all teams who played 380 games.<font\/>","25e89f9e":"## <font color=blue>12. Find out the total goals scored by each team at home, away and in total.<br>$\\;\\;\\;\\;$ Find the average goals scored per game at home and away (not combined).<br>$\\;\\;\\;\\;$ Represent it in a bar plot.<font\/>","b3c27f3d":"#### <font color=violet>We focus on the column 'Referee' which contains info on who officiated the match.<br>We look for the referee names and number of matches officiated by each of them.<font\/>","59644183":"# <font color=blue>Data Analysis<font\/>\n# <font color=blue>English Premier League - Seasons 2009 - 2019<font\/>","7f1c0711":"## <font color=blue>17. Find the conversion rates (goals\/shots) for the teams which played all 10 seasons.<br>$\\;\\;\\;\\;$ Present the result as a bar plot.<font\/>","fa90c727":"#### <font color=violet>We find out the sum of yellow and red cards awarded to home and away sides.<font\/>","475e1835":"## <font color=blue>2. Howmany games were played by each team in these 10 seasons?<br>$\\;\\;$ Plot it as a bar chart.<font\/>","67b36438":"## <font color=blue>15. Find the total shots on goal (shots and shots on target separately) made by each team.<br>$\\;\\;\\;\\;$ Present the result as a dataframe.<br>$\\;\\;\\;\\;$ Also find the average shots on goal in home and away games.<br>$\\;\\;\\;\\;$ Merge this dataframe with the dataframe containing goals stats.<font\/>","bafd40ee":"#### <font color=violet>To extract the info from the dataframe created above, we need to match the index of the the dataframe 'teams_stats_table' with that of 'ten_season_teams' and extract the column 'Total_points_in_decade'.<font\/>","6b9b49af":"#### <font color=violet>g. To calculate this, we need the following info.<br>$\\;\\;\\;\\;$Each win gives 3 points, each draw gives 1 point and each loss gives 0 points.<font\/>","1ea6fd05":"#### <font color=violet>Now we can also make use of the goal difference in case two teams have same points.<br>We make a new dataframe and use the dataframe max_points_teams_per_season to filter only the team with the highest goal difference in case more than one team had same points at the end of the season.<font\/>","d01a8511":"## <font color=blue>24. Find the corners gained\/conceded during home and away games for each team.<br>$\\;\\;\\;\\;$ Also find the total corners gained and conceded during 2009 - 2019.<br>$\\;\\;\\;\\;$ For teams who played all 10 seasons: <br>$\\;\\;\\;\\;\\;\\;$ a) Find the average corners conceded\/gained at home & away per game.<br>$\\;\\;\\;\\;\\;\\;$ b) Plot the result as a bar plot.<font\/>","17c81a4a":"## e. Drop irrelevant columns and rename other columns to understand the contents from column title","702a1b73":"#### <font color=violet>We add two more columns into ten_season_teams_shots_and_goals named 'CRH%' and 'CRA%'.<font\/>","7281ef08":"#### <font color=violet>We group the comeback wins based on season.<font\/>","db069f15":"#### <font color=violet>To extract the corner stats of the teams who played all 10 seasons,<br>we match the index of each_team_corner_stats with the index of ten_season_teams.<font\/>","554dab3d":"## <font color=blue>22. Find the total number of fouls committed by each team @ home and away.<br>$\\;\\;\\;\\;$ Plot the average fouls commited per game @ home and away by each team.<font\/>","1e01b9cb":"## <font color=blue>4. Howmuch percent of the total matches were won by the home team, away team or draw?<br>$\\;\\;$ Show the data in a pie chart.<font\/>","cb10e4a1":"#### <font color=violet>To find the teams which earned maximum points every season,<br>we group the points earned by each team by season and get the maximum for every season.<font\/>","03adea9a":"#### <font color=violet>We need to focus on two columns 'HT_Result' and 'FT_Result'.<br>We need to look for two sets of data.<br>1. Away team winning at half time and Home team wins at full time.<br>2. Home team winning at half time and Away team wins at full time<font\/>","30c0848a":"## <font color=blue>18. Find the average goals conceded @home and @away for all the teams.<br>$\\;\\;\\;\\;$ Present the result as a bar plot.<font\/>","9c49c2a7":"#### <font color=violet>We add the wins of every team (home and away) and multiply it by 3. To this, we add the number of draws to get the total points.<font\/>","8660f85a":"## d. Check the datatypes of each column","99741a8d":"## <font color=blue>9. Generate a data frame with the following info,<br>$\\;\\;\\;\\;$ a. Number of games per team.<br>$\\;\\;\\;\\;$ b. Home wins per team.<br>$\\;\\;\\;\\;$ c. Home defeats per team.<br>$\\;\\;\\;\\;$ d. Away wins per team.<br>$\\;\\;\\;\\;$ e. Away defeats per team.<br>$\\;\\;\\;\\;$ f. Number of draw per teams (home and away combined).<br>$\\;\\;\\;\\;$ g. Total points in EPL across 10 seasons.<font\/>","9ded9d44":"#### No need of any computation here. We can call the dataframe each_team_games when needed.","3d87d323":"#### <font color=violet>c. We group HomeTeam when Full time result was away team win.<font\/>","6f29f5d4":"## <font color=blue>6. In howmany games did the teams loosing at half time come back to win the game at full time (comeback wins)? List all of them.","cf8f55cc":"## <font color=blue>25. Find the EPL champions of each year with their points.<br>$\\;\\;\\;\\;$ If 2 teams have equal points in a season, find the champion by goal difference.<br>$\\;\\;\\;\\;$ (Total Goals Scored - Total Goals Conceded)<br>$\\;\\;\\;\\;$ Find howmany teams became EPL champions during 2009 - 2019. List their names.<br>$\\;\\;\\;\\;$ Find the team which won the EPL more times between 2009 - 2019.<br>$\\;\\;\\;\\;$ Plot the teams with number of EPL trophies in the decade as a donut plot.<font\/>","362e3eb0":"## <font color=blue>8. Sort the comeback wins based on season.<br>$\\;\\;$ Make a donut plot of comeback wins split among seasons.<br>$\\;\\;$ Highlight the season with most comeback wins.<font\/>","49a50b00":"## <font color=blue>3. Which teams played all the seasons in EPL from 2009 - 2019?<br>$\\;\\;$ Which teams played only 1 season in EPL between 2009 - 2019?<font\/>","13d393cc":"#### <font color=violet>We create a category called others and the sum of all dominant performances less than 10 is assigned to it.<br>Then we select only teams whose dominant performances count is equal or more than 10.<br>We do it seperately for home and away performances.<font\/>","45b3cba1":"#### <font color=violet>d. We group AwayTeam when Full time result was away team win.<font\/>","1d84530c":"### Thank you,<br> <font color=brown>AKHIL JAMES<font\/> ","d435fa4b":"### We are analysing the data of the past 10 seasons of English Premier League.<br>Our aim is to answer the 25 questions associated with the dataset in the link below.<br>https:\/\/www.kaggle.com\/aj7amigo\/english-premier-league-data-2009-2019","a0a5d2a0":"## c. Check if any data is missing","f0c04574":"# <font color=brown>Preparing the data for Analysis<font\/>","886f47d8":"#### <font color=violet>We concatenate the data frame having goal difference with the dataframe having points of each team per season.<font\/>","1c05e72d":"#### <font color=violet>We need to group the above findings about comeback wins on a yearly basis.<font\/>","f76f6c2d":"#### <font color=violet>We group the corners for home side by home team and also group the corners for away side by away team.<br>We add them to get total corners gained<br>We group the corners for away side by home team and also group the corners for home side by away team.<br>We add them to get total corners conceded<br><font\/>","c4607123":"#### <font color=violet>We should add the FT_Home_Goal and the FT_Away_Goal values of each game and find the maximum goals scored in a single game. Then find all the games in which the maximum goals were scored.<font\/>","39adca57":"#### <font color=violet>b. We group HomeTeam when Full time result was home team win.<font\/>","79b8e7f2":"#### <font color=violet>To extract the points table of the teams who played all 10 seasons,<br>we match the Team column in season_points_per_team with the index of ten_season_teams.<font\/>","055f9c66":"#### <font color=violet>We find out the total cards (yellow and red seperate) awarded by each referee in home and away games and add them.<font\/>","7861a0be":"#### <font color=red>From the above data frame we notice that, in the season 11-12, there are two teams with same points.<br>In such a case, we have to consider the goal difference to figure out which team were champions. <font\/>","43230196":"#### <font color=violet>We make a new dataframe with the goal difference of each team per season.<font\/>","2ed3ff5c":"<img src=\"https:\/\/static.dezeen.com\/uploads\/2016\/08\/designstudiopremier-league-rebrand-relaunch-logo-design-barclays-football_dezeen_slideshow-a.jpg\" alt=\"Drawing\" style=\"width: 200px;\"\/>","c88017fe":"#### <font color=violet>To find the teams which earned maximum points every season,<br>we group the points earned by each team by season and get the maximum for every season.<font\/>","ab6a6476":"## <font color=blue>21. Find the total number of yellow and red cards awarded by each referee.<br>$\\;\\;\\;\\;$ Plot the result as a bar plot.<font\/>","dc4ca1fa":"## <font color=blue>11. Which game\/games produced most number of goals? List them.<font\/>","219b0b83":"## <font color=blue>7. Sort the comeback wins based on year.<font\/>","fe201a95":"#### <font color=violet>Also, if a team played only one season, total games played is 38.<br>So, we search for all teams who played only 38 games.<font\/>","b671c5eb":"#### <font color=violet>We group the shots and shots on target (Home and Away) by Team (Home\/Away).<font\/>","ab9e6f4e":"#### <font color=violet>To extract the points table of the teams who played all 10 seasons,<br>we match the index of each_team_shot_and_goals with the index of ten_season_teams.<font\/>","f28c108d":"## <font color=blue>16. Extract the shots and goals stats of the teams who played all 10 seasons.<br>$\\;\\;\\;\\;$ Make bar plots for the following.<br>$\\;\\;\\;\\;$ a) TotalGoals, TotalShotsOnTarget, TotalShots. <br>$\\;\\;\\;\\;$ b) AvgGoals\/Game@Home, AvgShotsOnTarget\/Game@Home, AvgShots\/Game@Home.<br>$\\;\\;\\;\\;$ c) AvgGoals\/Game@Away, AvgShotsOnTarget\/Game@Away, AvgShots\/Game@Away.<font\/>","1153865e":"#### <font color=violet>We find out the total goals scored by each team in home and away and add them.<br>To find average goals per game at home and away, divide goals at home and away by half of total games.<font\/>","21efeac1":"## <font color=blue>13. Find the total number of dominant performances by each team.<br>$\\;\\;\\;\\;$ (Winning by a goal margin of 3 or more goals at Full Time).<br>$\\;\\;\\;\\;$ Represent it in a donut plot (seperate for home and away performances).<br>$\\;\\;\\;\\;$ Include teams with less than 10 dominant wins into a group called 'others' in plots.<font\/>","01c15233":"## b. Load the data as a pandas data frame and make a copy","cc60d9a3":"#### <font color=violet>In the above step, we made an empty list and added the seasons into it changing every 380 games.<br>We will convert this list into a pandas dataframe and later concatenate this data frame with the decade_data.<br><font\/>","b0e887a9":"#### <font color=violet>We need to get the value counts of each team in Home and Away games and add it to get the total matches played by each team.<font\/>","5aa31622":"#### <font color=violet>Merging with the dataframe containing goal stats.<font\/>","67c0365c":"#### <font color=violet>We basically have to get the number of entries in any column.<font\/>","04581699":"## a. Import libraries","492cdd98":"#### <font color=violet>We construct a new dataframe by using the following:<br>$\\;\\;\\;\\;$a) TotalFoulsCommitted from each_team_foul_stats.<br>$\\;\\;\\;\\;$b) TotalYellows and TotalReds from each_team_card_stats<font\/>","92b9839b":"<img src=\"https:\/\/miro.medium.com\/max\/681\/1*-BoC1TULqBUhCw-TdGaBgQ.png\" alt=\"Drawing\" style=\"width: 400px;\"\/>","b00067ae":"#### <font color=violet>To solve this, we focus on the column 'FT_Result' which contains info on the match result.<br>We look for the number of home team wins, away team wins and draws from this column.<font\/>","fb85039b":"## <font color=blue>19. Find the total yellow and red cards given to home and away teams.<br>$\\;\\;\\;\\;$ Present the result as a donut plot.<font\/>","647bf7e3":"## <font color=blue>23. Find the yellow card per foul in % and red card per foul in % for every team.<br>$\\;\\;\\;\\;$ Plot the result in separate bar plots.<font\/>","c02dd2c2":"## <font color=blue>1. Howmany matches were played in EPL between 2009 - 2019?<br>$\\;\\;$ Howmany teams played in the EPL during these 10 seasons?<br> $\\;\\;$ Which are they?<font\/>","2023d1c1":"#### <font color=violet>Finally we concatenate dataframes from steps a to g into one single data frame<font\/>","628155e2":"### Check for null values","9e3f648d":"## <font color=blue>20. Find the total yellow and red cards given to each team home and away.<br>$\\;\\;\\;\\;$ Plot the result (home and away combined, reds and yellows seperated) as a bar plot.<br>$\\;\\;\\;\\;$ Plot the average red and yellow cards per game at home and away as a bar plot.<font\/>","78f55a0c":"#### <font color=violet>Since every team has played home and away, we need to focus on only one of the 2 columns, HomeTeam and AwayTeam.<br>Find the unique entry in the HomeTeam Column and count the number of unique entries.<font\/>","3b652ffa":"#### <font color=violet>We find out the total cards (yellow and red seperate) received by each team in home and away games and add them.<br>To find average cards received per game at home and away, divide the cards received at home and away by half of total games.<font\/>","e3194b0b":"# <font color=brown>Data Analysis<font\/>","613cd53f":"#### <font color=violet>a. We already have the total games played by each team in the data frame each_team_games.<font\/>","816e6229":"#### <font color=violet>We group the full time results (H, A and D) by Season and Home\/Away Team.<font\/>","79b77a42":"#### <font color=violet>e. We group AwayTeam when Full time result was home team win.<font\/>","5d98ea41":"#### <font color=violet>We find out the total goals conceded by each team at home (goals scored by away team) and away (goals scored by home team) and add them.<br>To find average goals conceded per game at home and away, divide goals conceded at home and away by half of total games.<font\/>","304ad698":"#### <font color=violet>We now split the total 153 comeback wins among 10 seasons in a donut plot.<br>We use explode method in pie chart to highlight the season with most comeback wins.<font\/>","2e397a11":"#### <font color=violet>We group the dominant performances by home and away team and finally add them.<font\/>","699ec342":"#### We change the datatype of the column 'Date' into a pandas datetime format","16972dc0":"## <font color=blue>10. Extract the total points gained by teams who played in all 10 seasons.<br>$\\;\\;\\;\\;$ Plot the result as a bar chart with values of each bar indicated on top.<font\/>"}}