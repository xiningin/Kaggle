{"cell_type":{"c52cd71d":"code","8836bc5e":"code","ec015381":"code","8b737c03":"code","1954b3e0":"code","f22bfd3f":"code","bce561db":"code","9cb147ad":"code","903b5ca1":"code","c899a4bb":"code","60afeb54":"code","6d656558":"code","799481e3":"code","003c4054":"markdown","f42cf499":"markdown","6b2c5649":"markdown","8e56d869":"markdown","30757308":"markdown","0384ef4e":"markdown","11cfd1e4":"markdown","4e684f64":"markdown","ddf9a455":"markdown","9da84902":"markdown","7e1d91d1":"markdown","1d82297b":"markdown","855148c6":"markdown"},"source":{"c52cd71d":"import numpy as np\n\nimport pandas as pd\npd.set_option('display.max_colwidth', -1)\n\nimport matplotlib.pyplot as plt\nimport seaborn as sns\n\nimport warnings\nwarnings.filterwarnings('ignore')\n\n# Load survey data from 2019\nmultiple_choice_responses_2019= pd.read_csv(\"..\/input\/kaggle-survey-2019\/multiple_choice_responses.csv\")\n\n# Load survey data from 2018\nmultiple_choice_responses_2018 = pd.read_csv(\"..\/input\/kaggle-survey-2018\/multipleChoiceResponses.csv\")\n\n# Load survey data from 2017\nmultiple_choice_responses_2017 = pd.read_csv(\"..\/input\/kaggle-survey-2017\/multipleChoiceResponses.csv\",encoding='ISO-8859-1')","8836bc5e":"### Preprocessing ###\n\n# Copy original responses for further processing\nresponses_2017_mod = multiple_choice_responses_2017.copy()\nresponses_2018_mod = multiple_choice_responses_2018.copy()\nresponses_2019_mod = multiple_choice_responses_2019.copy()\n\n# Drop first row, which does not contain an actual data point \nresponses_2018_mod = responses_2018_mod.drop(responses_2018_mod.index[0]).reset_index(drop=True)\nresponses_2019_mod = responses_2019_mod.drop(responses_2019_mod.index[0]).reset_index(drop=True)\n\n# Rename columns for more easier handling\nquestions_to_features_2017 = {'GenderSelect' : 'Gender'}\n\nquestions_to_features_2018 = {'Q1' : 'Gender',\n                              'Q3' : 'Country',\n                              'Q5' : 'Major',\n                              'Q6' : 'Occupation'}\n\nquestions_to_features_2019 = {'Q1' : 'Age',\n                              'Q2' : 'Gender',\n                              'Q3' : 'Country',\n                              'Q4' : 'Education',\n                              'Q5' : 'Occupation',\n                              'Q10' : 'Salary'}\n\nresponses_2017_mod.rename(columns = questions_to_features_2017, inplace = True)\nresponses_2018_mod.rename(columns = questions_to_features_2018, inplace = True)\nresponses_2019_mod.rename(columns = questions_to_features_2019, inplace = True)\n\n### Utility functions ###\ndef convert_to_percentage(df):\n    df = df.fillna(0)\n    df['sum'] = df.sum(axis = 1)\n\n    for col in df.columns:\n        df[col] = (df[col] \/ df['sum'] * 100).round(1)\n\n    df = df.drop('sum', axis=1)\n    \n    return df\n\ndef convert_range_to_mean(range_str):\n    if any(i.isdigit() for i in range_str):\n        range_str = range_str.replace(',', '').replace('+', '').replace(' ', '').replace('>', '').replace('<', '').replace('$', '').replace('years', '').replace('employees', '')\n        range_array = np.array(range_str.split('-'))\n        range_array = range_array.astype(np.float)\n        return np.mean(range_array)\n    else:\n        return 0\n\ndef create_dict_from_unique_values(df, column_name):\n    unique_values = df[column_name].unique()\n    dicts = {}\n    for i in range(len(unique_values)):\n        if type(unique_values[i]) is str:\n            dicts[unique_values[i]] = convert_range_to_mean(unique_values[i])\n        else:\n            dicts[unique_values[i]] = 0\n    return dicts","ec015381":"def get_participation_by_country(df):\n    df_mod = df[df.Country != 'Other']\n    df_mod = df_mod.groupby(['Country']).agg(Number_of_Respondents = ('Country', 'count')).sort_values('Number_of_Respondents', ascending=False).reset_index()\n    df_mod['Number_of_Respondents_percentage'] = df_mod['Number_of_Respondents'].apply(lambda x: (x\/df_mod.Number_of_Respondents.sum()*100).round(1))\n    return df_mod\n\n# Get annual participation by country in percent\nparticipation_2019 = get_participation_by_country(responses_2019_mod)\nparticipation_2018 = get_participation_by_country(responses_2018_mod)\nparticipation_2017 = get_participation_by_country(responses_2017_mod)\n\n# Get annual participation for Japan in percent\nparticipation_japan = pd.DataFrame(data = [participation_2017[participation_2017.Country == 'Japan'].Number_of_Respondents_percentage,\n                                           participation_2018[participation_2018.Country == 'Japan'].Number_of_Respondents_percentage,\n                                           participation_2019[participation_2019.Country == 'Japan'].Number_of_Respondents_percentage],\n                                   index = ['2017','2018', '2019'])    \n\nparticipation_japan['percentage'] = participation_japan.max(axis=1)\n\n# Plot figure\nfig = participation_japan['percentage'].plot(kind = 'bar',\n                                             color = ['#C70025'])\nfig.set_title('Percentage of Japanese Respondents', fontsize = 15)                                            \nplt.gcf().set_size_inches(5, 5)\nplt.xticks(rotation = 0, fontsize = 15)\nplt.xlabel('Years of Survey', fontsize = 15)\nplt.ylabel('Percentage', fontsize = 15)\nfig.set_ylim(0, 5)\nplt.show()\n\ndef highlight_japan(x):\n    if x.Country == 'Japan':\n        return ['background-color: #ffe2d8']*3\n    else:\n        return ['background-color: ']*3\n\nparticipation_2019.head().style.set_caption('Countries Ranked By Number of Respondents in 2019 Kaggle Survey').apply(highlight_japan, axis=1)","8b737c03":"print(responses_2019_mod[responses_2019_mod.Country == 'Japan']['Gender'].value_counts())","1954b3e0":"# Convert categorical salary column to numerical\nlabel_encoding_salary = {}\nlabel_encoding_salary['Salary'] = create_dict_from_unique_values(responses_2019_mod, 'Salary')\nresponses_2019_mod.replace(label_encoding_salary, inplace = True)\n\n# Select data scientists from JP and USA with realistic salary\ndata_scientists_selection = responses_2019_mod[((responses_2019_mod.Country == 'Japan') \n                                                | (responses_2019_mod.Country =='United States of America')) \n                                               & ((responses_2019_mod.Gender == 'Male') \n                                                  | (responses_2019_mod.Gender ==  'Female'))\n                                               & (responses_2019_mod.Salary > 20000)\n                                               & (responses_2019_mod.Occupation == 'Data Scientist')]\n\n# Plot figure\nfig = sns.boxplot(x = \"Country\", \n                  y = \"Salary\", \n                  hue = \"Gender\", \n                  palette = ['#C70025', 'white'], \n                  data = data_scientists_selection, \n                  fliersize = 0)\nfig.set_title('Annual Compensation of Data Scientists on Kaggle [USD]', fontsize = 15)\nfig.set_ylim(0, 230000)\nplt.gcf().set_size_inches(6, 5)\nplt.xticks(rotation = 0, fontsize = 15)\nplt.ylabel(ylabel = 'Salary', fontsize = 15)\nplt.xlabel(xlabel = 'Country', fontsize = 15)\nplt.legend(bbox_to_anchor = (0.5,1.2), loc = \"center\")\nplt.show()\n\nprint('Disclaimer: \\nThis analysis excludes unrealistic annual compensations of less than 20.000 USD for Data Scientists in high cost countries like Japan and USA.')\ndata_scientists_selection.groupby(['Country', 'Gender']).agg(Number_of_Respondents = ('Salary', 'count')).style.set_caption('Database for Salary Comparison of Data Scientists on Kaggle')","f22bfd3f":"# Select Japanese Men and Women\njapan_2019_overview = responses_2019_mod[(responses_2019_mod.Country == 'Japan')\n                                         & (responses_2019_mod.Gender != 'Prefer not to say')]\n\n# Create new feature of employment status based on 'Occupation' column\njapan_2019_overview['Status'] = japan_2019_overview.Occupation.apply(lambda x: 'Employed' if ((x != 'Student') & (x != 'Not employed')) else x)\n\n# Group by new status 'Status' and Gender\njapan_2019_overview= japan_2019_overview.groupby(['Status', 'Gender']).agg(Number_of_respondents = ('Occupation', 'count')).reset_index()\njapan_2019_overview = japan_2019_overview.pivot(index='Status',columns='Gender')['Number_of_respondents']\n\n# Plot figure\nfig = japan_2019_overview.plot(kind='bar',\n                               color=['#C70025', 'white'],\n                               linewidth=1,\n                               edgecolor='k')\nfig.set_title('Gender Dsitribution of Japanese Kagglers', fontsize = 15)                                            \n\nplt.gcf().set_size_inches(8, 5)\nplt.xticks(rotation = 0, fontsize = 15)\nplt.xlabel('Employment Status', fontsize = 15)\nplt.ylabel('Number of Respondents', fontsize = 15)\nplt.legend(bbox_to_anchor = (0.5,1.2), loc = \"center\")\nplt.show()","bce561db":"# Summarize other countries as rest of the world (RoW)\nresponses_2019_mod.Country = responses_2019_mod.Country.apply(lambda x: x if x == 'Japan' else 'RoW')\n\n# Modify 'Occupation' to categories regarding leading role\npositions_grouped = {'Data Scientist' : 'Non-leading position', \n                     'Research Scientist' : 'Non-leading position', \n                     'Manager' : 'Leading position',\n                     'Research Assistant' : 'Leading position',\n                     'Data Analyst': 'Non-leading position', \n                     'Software Engineer': 'Non-leading position', \n                     'Product\/Project Manager'  : 'Leading position',\n                     'Consultant': 'Non-leading position', \n                     'Marketing Analyst': 'Non-leading position', \n                     'Principal Investigator': 'Leading position',\n                     'Data Engineer': 'Non-leading position',\n                     'Business Analyst': 'Non-leading position',\n                     'Developer Advocate': 'Non-leading position',\n                     'Salesperson': 'Non-leading position',\n                     'Statistician': 'Non-leading position',\n                     'DBA\/Database Engineer': 'Non-leading position',\n                     'Data Journalist': 'Non-leading position'}\n\nleading_positions = responses_2018_mod.copy()\nleading_positions.Occupation.replace(positions_grouped, inplace = True)\n\n# Prepare data\ndef get_gender_distribution_by_position(df):\n    df = df[(df.Occupation != 'Student')\n            & (df.Occupation != 'Other') \n            & (df.Occupation != 'Not employed') \n            & ((df.Gender == 'Female') | (df.Gender == 'Male'))] \n\n    df = df.groupby(['Occupation', 'Gender']).Country.count().to_frame().reset_index() \n    df = df.pivot(index='Occupation',columns='Gender')['Country']\n    \n    df = convert_to_percentage(df)\n    return df\n\ngender_distribution_position = pd.DataFrame(data = [get_gender_distribution_by_position(leading_positions[leading_positions.Country == 'Japan']).Female, \n                                                    get_gender_distribution_by_position(leading_positions[leading_positions.Country != 'Japan']).Female],\n                                            index = ['Japan','RoW'])    \n\n# Plot figure\nfig = gender_distribution_position.T.plot(kind = 'bar',\n                                          color = ['#C70025', '#ffe2d8'])\nfig.set_title('Female Kagglers in the Workforce', fontsize = 15)                                            \n\nplt.gcf().set_size_inches(8,5)\nplt.xticks(rotation = 0, fontsize = 15)\nplt.xlabel('Position', fontsize = 15)\nplt.ylabel('Percentage of Respondents', fontsize = 15)\nplt.legend(bbox_to_anchor = (0.5,1.2), loc = \"center\")\nplt.show()","9cb147ad":"# Rename columns for better (human) handling\nquestions_to_features_algo = {'Q24_Part_1' : 'Linear or Logistic Regression',\n                              'Q24_Part_2' : 'Decision Trees or Random Forests',\n                              'Q24_Part_3' : 'Gradient Boosting Machines',\n                              'Q24_Part_4' : 'Bayesian Approaches',\n                              'Q24_Part_5' : 'Evolutionary Approaches',\n                              'Q24_Part_6' : 'Dense Neural Networks',\n                              'Q24_Part_7' : 'Convolutional Neural Networks',\n                              'Q24_Part_8' : 'Generative Adversarial Networks',\n                              'Q24_Part_9' : 'Recurrent Neural Networks',\n                              'Q24_Part_10' : 'Transformer Networks',\n                              'Q24_Part_11' : 'No ML algorithms',\n                              'Q24_Part_12' : 'Other ML algorithms',\n                              'Q26_Part_1' : 'General purpose image\/video tools',\n                              'Q26_Part_2' : 'Image segmentation methods',\n                              'Q26_Part_3' : 'Object detection methods',\n                              'Q26_Part_4' : 'Image classification methods',\n                              'Q26_Part_5' : 'Generative Networks',\n                              'Q26_Part_6' : 'No CV method',\n                              'Q26_Part_7' : 'Other CV method',\n                              'Q27_Part_1' : 'Word embeddings\/vectors',\n                              'Q27_Part_2' : 'Encoder-decoder models',\n                              'Q27_Part_3' : 'Contextualized embeddings',\n                              'Q27_Part_4' : 'Transformer language models',\n                              'Q27_Part_5' : 'No NLP methods',\n                              'Q27_Part_6' : 'Other NLP methods'}\n                            \nresponses_2019_mod.rename(columns = questions_to_features_algo, inplace = True)\n\n# Prepare lists\nalgorithms_ml = ['Linear or Logistic Regression',\n                 'Decision Trees or Random Forests',\n                 'Gradient Boosting Machines',\n                 'Bayesian Approaches',\n                 'Evolutionary Approaches',\n                 'Dense Neural Networks',\n                 'Convolutional Neural Networks',\n                 'Generative Adversarial Networks',\n                 'Recurrent Neural Networks',\n                 'Transformer Networks',\n                 #'No ML algorithms',\n                 #'Other ML algorithms'\n                ]\n\nalgorithms_cv = ['General purpose image\/video tools',\n                 'Image segmentation methods',\n                 'Object detection methods',\n                 'Image classification methods',\n                 'Generative Networks',\n                 #'No CV method',\n                 #'Other CV method'\n                ]\n\nalgorithms_nlp = ['Word embeddings\/vectors',\n                  'Encoder-decoder models',\n                  'Contextualized embeddings',\n                  'Transformer language models',\n                  #'No NLP methods',\n                  #'Other NLP methods'\n                 ]\n\nalgorithms = algorithms_ml + algorithms_cv + algorithms_nlp\n\n# Prepare data\nfor i in range(len(algorithms)):\n    responses_2019_mod[algorithms[i]] = responses_2019_mod[algorithms[i]].apply(lambda x: 1 if (type(x) is str) else 0)\n\nalgorithms_2019 = responses_2019_mod.groupby('Country')[algorithms].sum()\nalgorithms_2019 = convert_to_percentage(algorithms_2019)\n\n# Plot figures\nfig, axes = plt.subplots(1,3)\nalgorithms_2019[algorithms_ml].T.plot(kind = 'bar', \n                                      color = ['#C70025', '#ffe2d8'], \n                                      ax = axes[0], \n                                      title = 'ML Algorithms used by Kagglers', \n                                      fontsize = 15)\nalgorithms_2019[algorithms_cv].T.plot(kind = 'bar', \n                                      color = ['#C70025', '#ffe2d8'], \n                                      ax = axes[1], \n                                      title = 'CV Methods used by Kagglers', \n                                      fontsize = 15)\nalgorithms_2019[algorithms_nlp].T.plot(kind = 'bar', \n                                       color = ['#C70025', '#ffe2d8'], \n                                       ax = axes[2], \n                                       title = 'NLP Methods used by Kagglers', \n                                       fontsize = 15)\n\nfig.set_size_inches(18,5)\n\nfor i in range(3):\n    axes[i].set_ylim(0, 18)\n    axes[i].set_xlabel('Methods', fontsize = 15)\n    axes[i].set_ylabel('Percentage of Used Methods', fontsize = 15)\n    axes[i].get_legend().remove()\n\nfig.legend(bbox_to_anchor=(0.77,0.1), loc=\"center\", labels=['Japan', 'RoW'])\nplt.show()","903b5ca1":"# Dictionary to group STEM disciplines\nstudies_grouped = {'Computer science (software engineering, etc.)' : 'STEM',\n                   'Engineering (non-computer focused)' : 'STEM',\n                   'Mathematics or statistics' : 'STEM', \n                   'Physics or astronomy' : 'STEM',\n                   'Information technology, networking, or system administration' : 'STEM',\n                   'Environmental science or geology' : 'STEM',\n                   'Medical or life sciences (biology, chemistry, medicine, etc.)' : 'STEM',\n                   'A business discipline (accounting, economics, finance, etc.)' : 'Business',\n                   'Social sciences (anthropology, psychology, sociology, etc.)' : 'Social Sciences',\n                   'Humanities (history, literature, philosophy, etc.)' : 'Humanities',\n                   'Fine arts or performing arts' : 'Arts',\n                   'I never declared a major' : 'No major'}\n\nresponses_2018_mod.Major.replace(studies_grouped, inplace = True)\n\n# Prepare data\ndf_female = responses_2018_mod[(responses_2018_mod.Country == 'Japan')\n                               & (responses_2018_mod.Gender == 'Female')].groupby('Major')['Major'].count()\ndf_male = responses_2018_mod[(responses_2018_mod.Country == 'Japan')\n                             & (responses_2018_mod.Gender == 'Male')].groupby('Major')['Major'].count()\n\ngender_distribution_japan = pd.DataFrame(data = [df_female, df_male],index = ['Female','Male'])    \n\ngender_distribution_japan['total'] = [df_female.sum(), df_male.sum()]\ngender_distribution_japan.fillna(0)\n\nfor col in gender_distribution_japan.columns:\n    gender_distribution_japan['{} (%)'.format(col)] = gender_distribution_japan[col]\/gender_distribution_japan['total']*100\n\nrearranged_columns = ['STEM (%)',\n                      'Business (%)',\n                      'Social Sciences (%)',\n                      'Humanities (%)',\n                      'Arts (%)',\n                      'Other (%)',\n                      'No major (%)' ]\n\n# Plot figure\nfig = gender_distribution_japan[rearranged_columns].T[['Female']].plot(kind='bar',color=['#C70025'])\nplt.gcf().set_size_inches(15,5)\nfig.set_title('Female Participation in Academic Disciplines in Japan', fontsize = 15)\nplt.xticks(np.arange(7),\n           ('STEM', 'Business', 'Social Sciences', 'Humanities', 'Arts', 'Other', 'No major'), \n           rotation = 0,\n           fontsize = 15)\nplt.xlabel('Academic Discipline', fontsize = 15)\nplt.ylabel('Percentage of Female Respondents', fontsize = 15)\nfig.get_legend().remove()\nplt.show()","c899a4bb":"# Prepare list\nrearranged_columns = ['Social Sciences',\n                      'Humanities',\n                      'Arts']\n\n# Plot figure\nfig = gender_distribution_japan[rearranged_columns].T[['Male','Female']].plot(kind='bar',\n                                                                              color=['white','#C70025'],\n                                                                              linewidth=1,\n                                                                              edgecolor='k')\nfig.set_title('Gender Distribution in Academic Disciplines in Japan', fontsize = 15)                                            \nplt.gcf().set_size_inches(8,5)\nplt.xticks(rotation = 0, fontsize = 15)\nplt.xlabel('Academic Discipline', fontsize = 15)\nplt.ylabel('Number of Respondents', fontsize = 15)\nplt.legend(bbox_to_anchor=(0.5,1.2), loc=\"center\",labels=['Male','Female'])\nplt.show()\n\n\nnon_stem_fields_japan = responses_2018_mod[(responses_2018_mod.Country == 'Japan')\n                                           & (responses_2018_mod.Gender != 'Prefer not to say') \n                                           & ((responses_2018_mod.Major == 'Social Sciences') \n                                              | (responses_2018_mod.Major == 'Humanities')\n                                              | (responses_2018_mod.Major == 'Arts'))]\nnon_stem_fields_japan = non_stem_fields_japan.groupby(['Major', 'Gender']).Occupation.unique().to_frame()\nnon_stem_fields_japan.head(6).style.set_caption('Occupations of Japanese Kagglers Who Have Not Majored in STEM Fields')","60afeb54":"# Convert categorical age column to numerical\nlabel_encoding_age = {}\nlabel_encoding_age['Age'] = create_dict_from_unique_values(responses_2019_mod, 'Age')\nresponses_2019_mod.replace(label_encoding_age, inplace = True)\n\n# Get Japanese females who went to university\njapan_females_university_age_2019 = responses_2019_mod[(responses_2019_mod.Country == 'Japan')\n                                                       & (responses_2019_mod.Gender== 'Female')\n                                                       & (responses_2019_mod.Education != 'No formal education past high school')]\n\n# Prepare data\ndef reached_unverisity_age_at(current_age):\n    if current_age <= 27:\n        return 'Later than 2010s'\n    elif current_age <= 37:\n        return 'Early 2000s'\n    elif current_age <=47:\n        return 'Around 1990'\n    else:\n        return '1980s and earlier'\n    \njapan_females_university_age_2019['university_age_reached'] = japan_females_university_age_2019.Age.apply(lambda x: reached_unverisity_age_at(x))\njapan_females_university_age_2019 = japan_females_university_age_2019.groupby(['university_age_reached', 'Education']).Gender.count().to_frame().reset_index()\njapan_females_university_age_2019 = japan_females_university_age_2019.pivot(index='university_age_reached',columns='Education')['Gender']#.reset_index(drop=True)\n\njapan_females_university_age_2019 = convert_to_percentage(japan_females_university_age_2019)\n\n# Plot figure\ndegrees = ['Some college\/university study without earning a bachelor\u2019s degree', 'Bachelor\u2019s degree', 'Master\u2019s degree']\n\nfig = japan_females_university_age_2019[degrees].plot(kind = 'bar', \n                                                      color=['#ffe2d8', \"#ff9999\", \"#C70025\"])\nfig.set_title('Education Level by When Graduated from High School', fontsize = 15)                                            \n\nplt.gcf().set_size_inches(10,5)\nplt.xticks(rotation=0, fontsize = 15)\nplt.xlabel('Year when Graduated from High School', fontsize = 15)\nplt.ylabel('Percentage of Respondents', fontsize = 15)\nplt.legend(bbox_to_anchor=(0.5,1.3), loc=\"center\")\nplt.show()\n\nprint('Disclaimer: The number of respondents aged higher than 47 was very low. It is assumed that this group of Japanese females that are interested in an online data science community are a rarity for their generation. Under this aspect, the high level of education seems to be no surprise.')","6d656558":"# Prepare data\ndef get_gender_distribution_by_country(df):\n    df_mod = df[(df.Gender == 'Female')| (df.Gender == 'Male')]\n    df_mod.Country = df_mod.Country.apply(lambda x: x if x == 'Japan' else 'Row')\n    df_mod = df_mod.groupby(['Country', 'Gender']).agg(Number_of_respondents = ('Gender', 'count' )).reset_index()\n    df_mod = df_mod.pivot(index='Country',columns='Gender')['Number_of_respondents']\n    df_mod = convert_to_percentage(df_mod)\n    \n    return df_mod\n\nstudents = pd.DataFrame(data = [get_gender_distribution_by_country(responses_2017_mod[responses_2017_mod.StudentStatus == 'Yes']).Female, \n                                get_gender_distribution_by_country(responses_2018_mod[responses_2018_mod.Occupation == 'Student']).Female,\n                                get_gender_distribution_by_country(responses_2019_mod[responses_2019_mod.Occupation == 'Student']).Female],\n                        index = ['2017','2018','2019'])  \n\nworking_people = pd.DataFrame(data = [get_gender_distribution_by_country(responses_2017_mod[((responses_2017_mod.EmploymentStatus == 'Independent contractor, freelancer, or self-employed') |\n                                                                                             (responses_2017_mod.EmploymentStatus == 'Employed full-time') |\n                                                                                             (responses_2017_mod.EmploymentStatus == 'Employed part-time'))]).Female, \n                                      get_gender_distribution_by_country(responses_2018_mod[((responses_2018_mod.Occupation != 'Student') & \n                                                                                             (responses_2018_mod.Occupation != 'Not employed'))]).Female,\n                                      get_gender_distribution_by_country(responses_2019_mod[((responses_2019_mod.Occupation != 'Student') & \n                                                                                             (responses_2019_mod.Occupation != 'Not employed'))]).Female],\n                              index = ['2017','2018','2019'])  \n# Plot figures\nfig, axes = plt.subplots(1,2)\n\nworking_people.plot(kind = 'bar',\n                    color = ['#C70025', '#ffe2d8'], \n                    ax = axes[0], \n                    title = 'Workforce', \n                    fontsize = 15)\n\nstudents.plot(kind ='bar', \n              color = ['#C70025', '#ffe2d8'], \n              ax = axes[1], \n              title = 'Students', \n              fontsize = 15)\n\nfig.set_size_inches(12,5)\n\nfor i in range(2):\n    axes[i].set_ylim(0, 25)\n    axes[i].tick_params(labelrotation = 0)\n    axes[i].set_xlabel('Year of Survey', fontsize = 15)\n    axes[i].set_ylabel('Percentage of Females', fontsize = 15)\n    axes[i].get_legend().remove()\n\nfig.legend(bbox_to_anchor=(0.5,1.1), loc=\"left\", labels = ['Japan', 'RoW'])\nplt.show()","799481e3":"# Get working people\nworking_people = responses_2018_mod[(responses_2018_mod.Occupation != 'Student') \n                                    & (responses_2018_mod.Occupation != 'Other') \n                                    & (responses_2018_mod.Occupation != 'Not employed')]\n\n# Convert categorical column (Q23: time spent coding) to numerical column\ntime_spent_coding = {'0% of my time' : 0,\n                     '75% to 99% of my time' : 88,\n                     '50% to 74% of my time': 63,\n                     '100% of my time' : 100, \n                     '25% to 49% of my time' : 38,\n                     '1% to 25% of my time' : 13}\n            \nworking_people.Q23.replace(time_spent_coding, inplace=True)\n\n# Prepare data\nworking_people = working_people.groupby('Occupation').Q23.mean().reset_index().sort_values('Q23', ascending = False)\n\n# Plot figure\nfig = working_people.set_index('Occupation').Q23.plot(kind = 'bar',\n                                                      color = ['#C70025'])\n\nfig.set_title('Percentage of Work Time Spent Programming by Occupation', fontsize = 15)                                            \n\nplt.gcf().set_size_inches(20,6)\nplt.xlabel('Occupation', fontsize = 15)\nplt.ylabel('Percentage of Working Time', fontsize = 15)\nfig.set_ylim(0, 105)\nplt.show()","003c4054":"In reality, Japan\u2019s overall rank is negatively impacted by its gender imbalance in the labour force and political empowerment [5]. In this years Kaggle survey, **only 10% of the Japanese workforce was female**. Additionally, the 2018 Kaggle survey shows that the percentage of working women in Japan is significantly lower than in the rest of the world. Also, **none of the working female respondents held the title of a Chief Officer**. This reflects the fact that none of the top 100 public companies in Japan have female CEOs [3].","f42cf499":"# A Developed Country Scoring Below Average on Gender Equality\nIn 2018, **Japan ranked 110 out of 149 countries in the Gender Equality Index ** [5]. While the top three are Iceland, Norway, and Finland, and the bottom three are Iraq, Pakistan, and Yemen, Japan ranks between Mauritius and Belize. On a positive note, the gender pay-gap was not the main contributor for Japan\u2019s overall poor ranking. The study suggest that **Japan ranks above average on wage equality for similar work** [5]. This is inline with this year\u2019s Kaggle survey which shows that male and female data scientists are compensated similarly.","6b2c5649":"# Conclusion\nThe past three annual Kaggle surveys and current studies suggest that Japanese women want to have a career for themselves but are still struggling with cultural expectations. Overall, women are underrepresented in the workforce as well as in STEM disciplines. However, the increase of females in the workforce and dropping marriage rates suggest that **Japanese women are now more willing to prioritise their career over having a family ** because the Japanese culture and work ethic make it difficult to have both at the same time. \n\n**The Japanese society as a whole as well as individual men and women would profit if companies considered flexible working hours and remote work**. Since programming activities do not require specific physical presence or daytime, occupations in the field of data science are especially well suited for this kind of working style. Therefore, men and women in the field of data science could have both a career and a family and lead towards gender equality in Japan if companies would offer flexible working hours or remote work.\n\n**I am looking forward to see the percentage of female Japanese data scientists and female students rise in next years Kaggle survey. **\n\n\n## Please Share Your Thoughts \nDo you agree or disagree that modernising the concept of work could create equal opportunities for men and women globally?\nIf you are a Japanese Kaggler, I am interested whether this survey analysis reflects your university\/work environment.\n\n\n# References\n[1] Emmott, Bill (2019). Move over, salaryman. The Economist: The world in 2020, p. 57.\n\n[2] Ogawa, Mariko (2006). Women\u2019s Careers in Science and Technology in Japan. Science & Information Technology, Volume 2006, Number 19, November 2006, pp. i-209(209)\n\n[3] Sneader, K. and Madgavkar, A., 2018: Wanted: Women business leaders in the Asia-Pacific, and companies and governments willing to support them. McKinsey ([https:\/\/www.mckinsey.com\/](https:\/\/www.mckinsey.com\/mgi\/overview\/in-the-news\/wanted-women-business-leaders-in-the-asia-pacific))\n\n[4] Sugihara, Yoko and Katsurada, Emiko (2000). [Gender-Role Personality Traits in Japanese Culture](https:\/\/www.google.com\/url?sa=t&rct=j&q=&esrc=s&source=web&cd=1&cad=rja&uact=8&ved=2ahUKEwizyfKPmovmAhW9QEEAHU50Cv4QFjAAegQIBBAC&url=http%3A%2F%2Fciteseerx.ist.psu.edu%2Fviewdoc%2Fdownload%3Fdoi%3D10.1.1.925.1460%26rep%3Drep1%26type%3Dpdf&usg=AOvVaw1cYp4BjT_--KK6wvceV0-2). Psychology of Women Quarterly. 24 p 309-318.\n\n[5] [World Economic Forum (2018). The Global Gender Gap Report 2018](http:\/\/www3.weforum.org%2Fdocs%2FWEF_GGGR_2018.pdf&usg=AOvVaw1wUSO8s9ZwKeQ4B_FYtzAT)\n\n[6]  [Yoshikawa, K., Kokubo, A., & Wu, C. (2018). A Cultural Perspective on Gender Inequity in STEM: The Japanese Context. Industrial and Organizational Psychology, 11(2), 301-309.](https:\/\/www.cambridge.org\/core\/journals\/industrial-and-organizational-psychology\/article\/cultural-perspective-on-gender-inequity-in-stem-the-japanese-context\/191712CE90F7CDA64FB04A40DA85A1BC)","8e56d869":"# Raised with Strong Female Role Models\n\nBut now Japanese women are ready to challenge the outdated gender roles. This is a generation of women raised by Studio Ghibli Films which have strong independent female protagonists instead of princesses. In addition, there are also non-fictional role models in the STEM field, such as [Masako Wakamiya ](https:\/\/asia.nikkei.com\/Business\/Technology\/Meet-the-84-year-old-Japanese-app-developer-who-inspired-Tim-Cook2), the oldest iPhone app developer at the age of 84, or [Hiromi Ozaki a.k.a. Sputniko!](https:\/\/sputniko.com\/), an artist who has studied mathematics and computer science. And finally, [Women in Data Science](https:\/\/www.widsconference.org\/) has expanded to Japan in 2019. \n> \u201cMany of my movies have strong female leads - brave, self-sufficient girls that don't think twice about fighting for what they believe with all their heart.\u201d\n\u2015 Hayao Miyazaki \n\nThe change of younger women\u2019s attitude towards their socially expected role in Japan is visible in the past three annual Kaggle surveys. Not only are they attaining higher levels of education but there has been a **slight increase of women in the workforce in Japan**.\n\nUnfortunately, the percentage of female Japanese students in the Kaggle community was lower in 2019 than in 2017. Recent studies suggest, that more Japanese women have been attending university over the past decades [2] and now account for 47% of students in Japanese universities [3]. This is expected to potentially double the percentage of women in leading positions in the next decade [1]. However, **in this year's Kaggle survey only 3 out of 74 Japanese students were female**.","30757308":"# Work-Life-Imbalance\nJuggling a career and a family is a challenge for everybody. However, the Japanese infamous work ethic makes it especially difficult [6]. On average men in Japan work 46% more hours than men in the US [3].\n\nJapanese people\u2019s devotion to their work and the gender imbalance in the workforce have the same origin [4]. Today\u2019s Japanese society is strongly influenced by the Confucian ideas that were imported from China around the 6th century. For both men and women loyality was a shared expectation: Men were expected to be loyal to their lords, whereas women were expected to be loyal to their families [4]. **Today, the Japanese term \u2018salaryman\u2019 showcases that men are still considered the bread winners while women are the caretakers** [6].\n\nThe root of of women\u2019s absence in leading positions can be found in the education. Assumably, a potential candidate for a leading position should have appropriate work experience and a corresponding education. However, in the 1980s women still preferred attending a two-year \u2018junior college\u2019, which had an emphasis on home economics, to a university [1]. This explains the underrepresentation of women in the pool of potential candidates for leading positions. Additionally, **this years Kaggle survey confirms that Japanese female Kagglers who went to university around the 1990s also preferred a Bachelor\u2019s degree to a Master\u2019s degree**.","0384ef4e":"# Japan: Country of the Rising Women\n** How modernizing the concept of work could create equal opportunities for men and women in Japan**\n\nThis past summer I was given the opportunity to work in Japan for three months. Aside from working in a large open space office, the second difference to Germany (where I usually live and work) was that there were barely any female software engineers aside from me - and none of them were Japanese.\n\n![andy-kelly-0E_vhMVqL9g-unsplash.jpg](attachment:andy-kelly-0E_vhMVqL9g-unsplash.jpg)\nPhoto by Andy Kelly on Unsplash","11cfd1e4":"# The Economic Cost of Gender Inequality\nThis gender imbalance comes with an economic cost [3]: On the one hand, **Japan is an ageing country and struggling with depopulation**. On the other hand, there is an increasing skill shortage and there are not enough men in the workforce to ensure economic growth [1]. Furthermore, women\u2019s ambitions to have a career cannot only be seen in the increase of women in the workforce but in the drop in the marriage rate in recent years [1]. This will contribute to the depopulation and continues the vicious cycle of skill shortage if Japanese society and companies do not take any actions immediately.\n\n# A Suggestion: Flexible Working Hours and Remote Work\nTo make it easier for employees to handle a career and a family at the same time, companies should rethink the concept of work. Takeda, a Japanese pharmaceutical company, reached their goal of 30% of new managers being females by e.g. including flexible working hours [3]. Modernising the concept of work will not only benefit women in Japan. Considering the ageing population and the dropping marriage rate in Japan, ** single \u2018salarymen\u2019 will be dependent on remote work or flexible working hours as well to take care of their parents**.\n\nThe age of digitisation will not only support the new concept of work but will also create job opportunities suited for it. Current technology can shift the work experience away from a 9 to 5 \u201cface time\u201d culture to flexible working hours and remote or mobile work. Also, **occupations which require more time for analysis and programming than physical presence, such as software engineers or data scientists, are especially well suited for new working styles**.","4e684f64":"Although, Japan is technologically highly advanced, women are also underrepresented in the STEM fields. Although people in the Kaggle community are assumably interested in data science and machine learning, the 2018 survey shows that **only 60 % of Japanese female Kagglers have majored in a STEM discipline**.","ddf9a455":"Interestingly, in absolute numbers female Kagglers are only dominating the arts major. Although, humanities is the second most popular major in female Kagglers, there are more male Kagglers with a major in humanities than female Kagglers in absolute numbers.","9da84902":"# Quick Overview of the Japanese Kaggle Community\nBefore we dive in, let's get a quick overview of the data we are working with.\n\nThe Japanese Kaggle community has doubled over the past three years. This year, **673 repondents from Japan** participated in the Kaggle survey.** This ranks Japan as the 4th biggest community in the Kaggle survey** after India, United States of America, Brazil, and before Russia.","7e1d91d1":"Japan's gender distribution in absolute numbers of this years Kaggle survey respondents is as follows:","1d82297b":"When the Olympics open next summer, Japan will prove its technological advancements once more with its latest robots and possibly a flying car. From this year's Kaggle survey, it is obvious that Japanese Kagglers use state of the art algorithms in their everyday life. Especially, the percentage of **respondents using Gradient Boosting Machines and CNN is significantly higher in Japan than in the rest of the world**. Japan seems to have understood that Gradient Boosting Machines can dominate over Linear Regression and Decision Trees as it can be seen in many Kaggle competitions. Furthermore, in Japan CV methods are used more commonly in the rest of the world, which explains the higher use of CNNs.","855148c6":"The reality is, that 75% of Japanese women are not interested in leading positions due to the additional over-time [3]. This does not suggest any lack in women\u2019s work ethic but the social expectation that women have to prioritise their role as caretakers. Women in Japan spend five times more time on unpaid tasks, such as  household work, than men, whereas the ratio is two to one for the global average [2] [5]. Additionally to the double burden, the Japanese culture\u2019s focus on collectivism has been discouraging women to prioritise their career over their families [6]. "}}