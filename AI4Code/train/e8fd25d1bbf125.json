{"cell_type":{"06563963":"code","8b6caac4":"code","4a06c886":"code","11afb73f":"code","839a8dc5":"code","75ad242a":"code","3ef6f4c6":"code","4dc68003":"code","b2dad3ca":"code","0898a37b":"code","89f49532":"code","00db5b9f":"code","be6608b6":"code","b5ddc325":"code","8d28c5ef":"markdown","c110c462":"markdown","bd5a57ea":"markdown","b790dba3":"markdown"},"source":{"06563963":"import requests\nfrom bs4 import BeautifulSoup\nimport pandas as pd\nimport geopandas\nimport matplotlib\nimport matplotlib.pyplot as plt\n\nimport os\nfor dirname, _, filenames in os.walk('\/kaggle\/input'):\n    for filename in filenames:\n        print(os.path.join(dirname, filename))","8b6caac4":"# Requisi\u00e7\u00e3o dos dados na p\u00e1gina da Wikipedia sobre o IDH do Brasil\n\nreq = requests.get('https:\/\/pt.wikipedia.org\/wiki\/Lista_de_unidades_federativas_do_Brasil_por_IDH').text","4a06c886":"# Cria\u00e7\u00e3o do soup\n\nsoup = BeautifulSoup(req, 'html.parser')\n\n#print(soup.prettify())","11afb73f":"# Extra\u00e7\u00e3o da primeira tabela da p\u00e1gina do soup\n\ntable = soup.find_all('table', class_='wikitable')[0] \n\n#print(table.prettify())","839a8dc5":"# Convers\u00e3o da tabela em uma lista\n\ndf = pd.read_html(str(table))\nprint(df)","75ad242a":"# Obten\u00e7\u00e3o do primeiro item da lista (que \u00e9 o dataframe que ser\u00e1 trabalhado)\n\ndf_1 = df[0].copy()\ndf_1","3ef6f4c6":"# Exclus\u00e3o das colunas 0, 1 e 5\n\ndf_1 = df_1.drop(df_1.columns[[0,1,5]], axis=1)\ndf_1","4dc68003":"# Mudan\u00e7a no nome das colunas\n\ndf_1.columns = ['UF', 'IDH-M 2017', 'IDH-M 2016']\ndf_1","b2dad3ca":"# Deixando as palavras da coluna 'UF' em mai\u00fascula, para ficar igual o arquivo geodataframe que\n# ser\u00e1 trabalhado em seguida\n\ndf_1['UF'] = df_1['UF'].str.upper()\ndf_1","0898a37b":"# Importando o geodataframe com o mapa do Brasil dividido em estados\n\n#print(os.listdir('..\/input')) #ver quais arquivos est\u00e3o importados\n\nbrazil = geopandas.read_file(\"..\/input\/estados-br-geopandas\/BRUFE250GC_SIR.shp\")\nbrazil","89f49532":"# Renomeando as colunas do geodataframe 'Brazil', para n\u00e3o haver problema no merge a seguir\n\nbrazil.columns = ['UF', 'Regi\u00e3o', 'CD_GEOCUF', 'geometry']\nbrazil","00db5b9f":"# Uni\u00e3o dos dados extra\u00eddos da Wikipedia e o geodataframe 'Brazil'\n\ndf_geo = pd.merge(df_1, brazil[['UF', 'Regi\u00e3o', 'geometry']], on='UF')\ndf_geo","be6608b6":"# Transformando o dataframe anterior em um geodataframe (que ser\u00e1 plotado futuramente\n# com o mapa do Brasil (o geodataframe 'brazil'))\n\ngdf = geopandas.GeoDataFrame(df_geo)\n\ngdf","b5ddc325":"# C\u00d3DIGO DO MAPA\n\n# Detalhes do mapa\n\nfig, ax = plt.subplots(1, 1, figsize=(9, 9)) # tamanho da figura\nax.set_facecolor('#ffffff') # cor do fundo do mapa\n\n# C\u00f3digo da legenda\n\nfrom mpl_toolkits.axes_grid1 import make_axes_locatable\n\ndivider = make_axes_locatable(ax)\ncax = divider.append_axes(\"bottom\", size=\"10%\", pad=0.1) # localiza\u00e7\u00e3o da barrinha e legenda\n\n# C\u00f3digo das cores personalizadas da barra da legenda\n# (as cores podem ser cores padr\u00e3o do matplotlib ou um hex)\n# (cria uma escala de cores entre as cores escolhidas)\n\ncmap = matplotlib.colors.LinearSegmentedColormap.from_list(\"\", [\"#ff8585\", \"#6ed16b\", \"#1da118\", \"#1e207d\"])\n\n# Define os limites da barra da legenda e normaliza os valores\n# (o cmap.N faz com que todas as cores da escala apare\u00e7am)\n\nnorm = matplotlib.colors.BoundaryNorm([600,700,800,900,1000], cmap.N)\n\n# Criar um plot entre geodataframes (o 'brazil' e o criado com os dataframes ('gdf'))\n\n# (plot com o geodataframe base ('brazil'))\nbrazil.plot(ax=ax, facecolor='#d4d4d4', edgecolor='#ffffff', linewidth=0.4)\n\n# (plot com o geodataframes com informa\u00e7\u00f5es ('gdf'))\ngdf.plot(column='IDH-M 2017', ax=ax, legend=True, cax=cax, cmap=cmap, edgecolor='#ffffff', linewidth=0.4,\n        legend_kwds={'label': \"IDM-H em 2017 por Unidade da Federa\u00e7\u00e3o\", 'orientation': \"horizontal\"},\n         norm=norm)","8d28c5ef":"# 3. Criando o mapa!","c110c462":"# 1. Importando os m\u00f3dulos necess\u00e1rios para a extra\u00e7\u00e3o dos dados e visualiza\u00e7\u00e3o# \n\n* Requests: utilizado para requerir a p\u00e1gina da Wikip\u00e9dia que iremos utilizar\n* Beautiful Soup: extrai o HTML da requisi\u00e7\u00e3o realizada com o Requests\n* Geopandas: respons\u00e1vel pela gera\u00e7\u00e3o (plot) do mapa\n* Matplotlib e Pyplot: utilizados para configurar os detalhes do mapa, como tamanho, legenda etc.\n\n> import os\nfor dirname, _, filenames in os.walk('\/kaggle\/input'):\n    for filename in filenames:\n        print(os.path.join(dirname, filename))]\n\nO c\u00f3digo acima \u00e9 um c\u00f3digo do Kaggle, oferecido para configurar os arquivos que colocamos como input (nesse caso, os mapas que importamos). A falta dele pode causar erros na hora de importar os mapas.","bd5a57ea":"# Criando um mapa do IDH-M (\u00edndice de Desenvolvimento Humano) brasileiro, atrav\u00e9s do uso de web scraping","b790dba3":"# 2. Importa\u00e7\u00e3o dos dados e cria\u00e7\u00e3o dos dataframes"}}