{"cell_type":{"2732f951":"code","400c8012":"code","261443bb":"code","492feb4e":"code","995b8486":"code","7994e132":"code","864032ce":"code","64208725":"code","35962adb":"code","eb69127a":"code","9ce2b77b":"code","0e8e040d":"code","20075e7b":"code","df633ac0":"code","47936259":"code","2f32915c":"code","1ddd10b9":"code","88c99c2f":"code","f60240b2":"code","7b86802e":"code","b60b8481":"code","e3454385":"code","103a1fbc":"code","0d477cfb":"code","4e367124":"code","49d87a40":"code","f19cb82a":"code","d86a6071":"code","1d93b2ca":"code","b51d0836":"markdown","53d75534":"markdown","1490f823":"markdown"},"source":{"2732f951":"!conda install -c conda-forge tabula-py --yes","400c8012":"import numpy as np\nimport pandas as pd\nimport os\nimport matplotlib.pyplot as plt\nimport plotly.express as px\nimport plotly.graph_objects as go\nfrom plotly.subplots import make_subplots","261443bb":"import tabula\ndfs = tabula.read_pdf('https:\/\/gtimg.tokyo2020.org\/image\/upload\/production\/cbkyxwsk3n18fs735sse.pdf', lattice=True, pages ='all')\nfor i,df in enumerate(dfs):\n    print(i)\n    display(df)","492feb4e":"len(dfs)","995b8486":"#START\ndfs0=dfs[6]","7994e132":"dfs0.columns","864032ce":"plus1=26\ndfs[plus1].columns=dfs0.columns\ndfs[plus1]=dfs[plus1].drop(index=dfs[plus1].index[0])\ndfs[plus1]","64208725":"for i in range(7,25):\n    dfs0=pd.concat([dfs0,dfs[i]])\ndfs0=pd.concat([dfs0,dfs[plus1]])\ndf=dfs0    ","35962adb":"df1=df.fillna('N').reset_index(drop=True)\ndf1","eb69127a":"df1.columns","9ce2b77b":"df1=df1.reset_index(drop=True)\nprint(len(df1))","0e8e040d":"df1","20075e7b":"drop_index1=df1[df1['No']=='N'].index.tolist()\ndrop_index2=df1[df1['Date of\\rannouncement']=='N'].index.tolist()\ndrop_index3=df1[df1['Category']=='N'].index.tolist()\ndrop_index=sorted(set(drop_index1+drop_index2+drop_index3))\ndrop_index","df633ac0":"df2=df1.drop(drop_index).reset_index(drop=True)\ndf2","47936259":"df2=df2.drop('No',axis=1)\ndf2","2f32915c":"import datetime\nfrom datetime import date\ndate2=[]\nfor item in df2['Date of\\rannouncement']:\n    item2=item.split('-')\n    day=int(item2[0])\n    month=int(item2[1].replace('Jul','7').replace('Aug','8'))\n    year=2000+int(item2[2])\n    date2+=[datetime.date(year,month,day)]\ndf2['Date2 of announcement']=date2\ndf2","1ddd10b9":"df2=df2.sort_values('Date2 of announcement').reset_index(drop=True)\ndf2[df2['Date2 of announcement']==df2.loc[df2.index.stop-1,'Date2 of announcement']]","88c99c2f":"df2['number']=1","f60240b2":"df2a=df2.groupby('Category',as_index=None).sum().sort_values('number',ascending=False)\ndf2a","7b86802e":"df2a['number'].tolist()","b60b8481":"value=df2a['number'].tolist()\nlabel=df2a['Category'].tolist()","e3454385":"title = \"Positives by Category\"\nplt.figure(figsize=(6,6), dpi=80)\nplt.pie(value, labels=label,counterclock=False,startangle=0)\nplt.axis('equal')\nplt.title(title, fontsize=20)\nplt.show()","103a1fbc":"df2b=df2.groupby('Harumi OV\/PV\\rResidents\/Non-residents',as_index=None).sum().sort_values('number',ascending=False)\ndf2b","0d477cfb":"df2c=df2.groupby('Residents\/Non-residents\\rof Japan',as_index=None).sum().sort_values('number',ascending=False)\ndf2c","4e367124":"df2d=df2.groupby('Prefecture that reported\\rthe case',as_index=None).sum().sort_values('number',ascending=False)\ndf2d","49d87a40":"value2=df2d['number'].tolist()\nlabel2=df2d['Prefecture that reported\\rthe case'].tolist()","f19cb82a":"title2 = \"Positives by Prefecture\"\nplt.figure(figsize=(6,6), dpi=80)\nplt.pie(value2, labels=label2,counterclock=False,startangle=0)\nplt.axis('equal')\nplt.title(title2, fontsize=20)\nplt.show()","d86a6071":"df2e=df2.groupby('Date2 of announcement',as_index=None).sum()\ndf2e['accumulated']=0\nfor i in range(len(df2e)):\n    df2e.loc[i,'accumulated']=df2e.loc[0:i,'number'].sum()\ndf2e","1d93b2ca":"fig = make_subplots(specs=[[{\"secondary_y\":True}]])\nfig.add_trace(go.Scatter(x=df2e['Date2 of announcement'],y=df2e['number'],name='daily value' ),secondary_y=False,)\nfig.add_trace(go.Scatter(x=df2e['Date2 of announcement'],y=df2e['accumulated'],name='accumulated value' ),secondary_y=True,)\nfig.update_layout(autosize=False,width=700,height=500,title_text=\"Positive Cases reported in Tokyo2020\")\nfig.update_xaxes(title_text=\"Date\")\nfig.update_yaxes(title_text=\"Daily Number\",secondary_y=False)\nfig.update_yaxes(title_text=\"Accumulated Number\",secondary_y=True)\nfig.show()","b51d0836":"## Tokyo 2020 Olympics related Covid19 Positive Cases\n* https:\/\/olympics.com\/tokyo-2020\/en\/notices\/covid-19-positive-case-list","53d75534":"## The latest announcement","1490f823":"## Data Source\n"}}