{"cell_type":{"a9508aa9":"code","30044aef":"code","61ea88ab":"code","585bfa2f":"code","860a96e6":"code","3c19f481":"code","e00d7881":"code","5c82a8e4":"code","4c49c067":"code","195b905a":"code","bd737375":"code","4b629843":"code","9c70abc6":"code","f1a37c43":"code","4e6cdf39":"code","2361d566":"code","9ef57466":"code","cbc6c857":"code","e0478c5e":"code","f5a558f0":"code","f89bdafd":"code","0201bac3":"code","953806a7":"code","3b67aa00":"code","12c81a6b":"code","1183c5a2":"code","b2b3d142":"code","f7b9fd95":"code","60b694fe":"code","9d275bdf":"code","48f865d0":"code","a79f9bb3":"code","b89ff781":"code","c27d9ddd":"code","6fa807c9":"code","5e3573a5":"code","ee40d1c5":"code","c369439a":"code","159f72df":"code","5dd54f9d":"code","fee9a4ea":"code","a6f23755":"code","99f87f16":"code","148c1816":"code","f27d830f":"code","79aacf0e":"code","53a19068":"code","fecb39d5":"code","6a4da269":"code","3f4b525f":"code","9547676a":"code","1b71c243":"code","f36d46b4":"code","681028bb":"code","40f4c2fd":"code","a07d4975":"code","2088d18f":"code","b3a6e8c8":"code","009f0c58":"code","77901a54":"code","b2eb3d49":"code","d9b3b23c":"code","5f6d6021":"code","a033f558":"code","91518706":"code","119b1283":"code","34c3b924":"code","168f9764":"code","231142c6":"code","708265da":"code","efeccc99":"code","4c3590fc":"code","6a54bc40":"code","f4f6eba6":"code","89776874":"code","0eae1a7e":"code","edfec1fc":"code","44459507":"code","834b1429":"code","05bbfded":"code","909833e8":"code","dd679e73":"code","238aefe4":"code","fe4edece":"code","b13d14e1":"code","4cec72ae":"code","a2fd5e9a":"code","75b3190d":"code","fa7b57e2":"code","d2bbe1cd":"code","c69bd13a":"code","886f0a52":"code","63cbda64":"code","77292301":"code","cf5d4d07":"code","aa010ced":"code","ee4a35d0":"code","b5c4f4a6":"code","bc3a798d":"code","ba3dcc0d":"code","e308741d":"code","4a1b7579":"code","e98e0817":"code","efb51912":"code","39ea6e7a":"code","70037ff4":"code","6d722acd":"markdown","776d687d":"markdown","1bf9416f":"markdown","ba402e3f":"markdown","185cef3e":"markdown","f0f18457":"markdown","1fc7d9bb":"markdown","220614c3":"markdown","9aaed53b":"markdown","d0c83538":"markdown","91526dba":"markdown","be148b9e":"markdown","940fd0ae":"markdown","a4d83375":"markdown","ab25cbfc":"markdown","c550415a":"markdown","711f564b":"markdown","59bc7f9d":"markdown","8f9adf49":"markdown","3deb05e6":"markdown","50315981":"markdown","7af60812":"markdown","9c8d2358":"markdown","cb78e527":"markdown","e806d373":"markdown","165e6ff6":"markdown","fd21f8b6":"markdown","f75a4413":"markdown","b47d6c0c":"markdown","d49fdf13":"markdown","2010d6e6":"markdown","3f2550d3":"markdown","779bb037":"markdown","986fe8f9":"markdown","51b9388c":"markdown","659d2384":"markdown","9d351cc6":"markdown","7c8c5b5c":"markdown","6e6dc50a":"markdown","eea1f97e":"markdown","d506a2a4":"markdown","802f34f5":"markdown","5b0a9416":"markdown","35432077":"markdown","11343ab5":"markdown","fafc735a":"markdown","cb84e0d3":"markdown","0056b96c":"markdown","6a0eb431":"markdown","4fc54f3f":"markdown","5535000c":"markdown","78454a50":"markdown","fc700654":"markdown","76092297":"markdown","21b1e5e8":"markdown","91652c7f":"markdown","7a7cc15d":"markdown","367b6024":"markdown","5d851df9":"markdown","be05f3a1":"markdown","f17732b6":"markdown","8e088be4":"markdown","f76dd5e2":"markdown","f21a7783":"markdown","d276b872":"markdown","18e19955":"markdown","6ebee520":"markdown","8140c255":"markdown","89f1576c":"markdown","f0602a18":"markdown","47871ba8":"markdown","6a7fad46":"markdown","d180527b":"markdown","dab3d526":"markdown","24fdef11":"markdown","ac1fb1c3":"markdown","cdd2bf1b":"markdown","6ef0d094":"markdown","1d219b72":"markdown","3598090b":"markdown"},"source":{"a9508aa9":"import pandas as pd\nimport numpy as np\nimport matplotlib.pyplot as plt\nimport seaborn as sns\n\n%matplotlib inline","30044aef":"data2015 = pd.read_csv('..\/input\/world-happiness\/2015.csv')\ndata2016 = pd.read_csv('..\/input\/world-happiness\/2016.csv')\ndata2017 = pd.read_csv('..\/input\/world-happiness\/2017.csv')\ndata2018 = pd.read_csv('..\/input\/world-happiness\/2018.csv')\ndata2019 = pd.read_csv('..\/input\/world-happiness\/2019.csv')","61ea88ab":"print(data2015.shape)\ndata2015.head()","585bfa2f":"print(data2016.shape)\ndata2016.head()","860a96e6":"print(data2017.shape)\ndata2017.head()","3c19f481":"print(data2018.shape)\ndata2018.head()","e00d7881":"print(data2019.shape)\ndata2018.head()","5c82a8e4":"todrop15, todrop16 = ['Standard Error', 'Dystopia Residual'], ['Upper Confidence Interval', 'Lower Confidence Interval', 'Dystopia Residual']\ndata2015.drop(todrop15, axis = 1, inplace = True)\ndata2016.drop(todrop16, axis = 1, inplace = True)\ndata2015.columns, data2016.columns","4c49c067":"columns1516mapping = {'Happiness Rank':'rank', 'Happiness Score': 'score',\n                     'Economy (GDP per Capita)': 'GDP_per_capita', 'Health (Life Expectancy)': 'life_expectancy',\n                     'Trust (Government Corruption)': 'gov_trust'}\n\ndata2015.rename(columns = columns1516mapping, inplace = True)\ndata2016.rename(columns = columns1516mapping, inplace = True)\ndata2015.columns == data2016.columns\n\n#fixed 2015 and 2016 columns","195b905a":"#lower case the columns\ndata2015.columns = data2015.columns.str.lower()\ndata2016.columns = data2016.columns.str.lower()\ndata2015.columns == data2016.columns","bd737375":"data2017.drop(['Whisker.high','Whisker.low','Dystopia.Residual'], axis = 1, inplace = True)\ndata2017.shape, data2017.columns","4b629843":"columns17mapping = {'Happiness.Rank':'rank', 'Happiness.Score': 'score',\n                     'Economy..GDP.per.Capita.': 'GDP_per_capita', 'Health..Life.Expectancy.': 'life_expectancy',\n                     'Trust..Government.Corruption.': 'gov_trust'}\ndata2017.rename(columns = columns17mapping, inplace = True)\ndata2017.shape, data2017.columns","9c70abc6":"#make lower case\ndata2017.columns = data2017.columns.str.lower()\ndata2017.shape, data2017.columns","f1a37c43":"for i in data2017.columns:\n    print(i in data2016.columns, i)\n#all columns are now in 2016 columns. 1 missing is region","4e6cdf39":"data2018.columns","2361d566":"columns1819mapping = {'Overall rank':'rank','Country or region':'country',\n                     'GDP per capita': 'GDP_per_capita', 'Freedom to make life choices':'freedom',\n                      'Healthy life expectancy': 'life_expectancy',\n                     'Perceptions of corruption': 'gov_trust', 'Social support':'family'}\n\ndata2018.rename(columns = columns1819mapping, inplace=  True)\ndata2019.rename(columns = columns1819mapping, inplace = True)\ndata2018.columns = data2018.columns.str.lower()\ndata2019.columns = data2019.columns.str.lower()\ndata2018.columns == data2019.columns","9ef57466":"data2019.columns","cbc6c857":"#check if all 2018,2019 columns in 2015,2016\n\nfor i in data2018.columns:\n    print(i in data2016.columns, i)","e0478c5e":"empty_dict = {}\nfor country, region in zip(data2015['country'],data2015['region']):\n    empty_dict[country] = region\nfor country, region in zip(data2016['country'],data2016['region']):\n    empty_dict[country] = region","f5a558f0":"data2017['region'] = data2017['country'].map(empty_dict)\ndata2018['region'] = data2018['country'].map(empty_dict)\ndata2019['region'] = data2019['country'].map(empty_dict)","f89bdafd":"data2015['year'] = 2015\ndata2016['year'] = 2016\ndata2017['year'] = 2017\ndata2018['year'] = 2018\ndata2019['year'] = 2019","0201bac3":"columnlis = []\ncolumnlis.append([data2015.columns.values,data2016.columns.values,data2017.columns.values,data2018.columns.values,data2019.columns.values])\ndata2015.shape, data2016.shape, data2017.shape, data2018.shape, data2019.shape, np.unique(columnlis)","953806a7":"df = pd.concat([data2015,data2016,data2017,data2018,data2019], axis = 0, ignore_index = True)\ndf.info()\ndf.head()","3b67aa00":"df[df['gov_trust'].isnull()]","12c81a6b":"df.loc[df['country'] == 'United Arab Emirates', 'gov_trust'] = df.loc[df['country'] == 'United Arab Emirates', 'gov_trust'].fillna(df.loc[df['country'] == 'United Arab Emirates', 'gov_trust'].mean())","1183c5a2":"df.loc[df['country'] == 'United Arab Emirates', 'gov_trust']\n#filled with the mean","b2b3d142":"df[df['region'].isnull()]","f7b9fd95":"df[df['country'] == 'Taiwan']","60b694fe":"df[df['country']=='Hong Kong']","9d275bdf":"#Taiwan\ndf.loc[347,'country'] = 'Taiwan'\ndf.loc[347,'region'] = 'Eastern Asia'\n\n#Hongkong\ndf.loc[385,'country'] = 'Hong Kong'\ndf.loc[385,'region'] = 'Eastern Asia'","48f865d0":"df.loc[df['region'].isnull(), 'country']","a79f9bb3":"#check unique region\ndf['region'].unique()","b89ff781":"df[df['country'].str.contains('Trinidad')]","c27d9ddd":"#manullay change\ndf.loc[[507, 664],'country'] = 'Trinidad and Tobago'\ndf.loc[[507, 664],'region'] = 'Latin America and Caribbean'","6fa807c9":"df[df['country'] == 'Macedonia']","5e3573a5":"df[df['country'] == 'North Macedonia']","ee40d1c5":"# we can set north macedonia to macedonia\ndf.loc[709, 'country'] = 'Macedonia'\ndf.loc[709, 'region'] = 'Central and Eastern Europe'","c369439a":"#from google search, gambia is west african country\n\ndf.loc[745,'region'] = 'Middle East and Northern Africa'","159f72df":"df[df['country'] == 'North Cyprus']","5dd54f9d":"df[df['country'] == 'Northern Cyprus']","fee9a4ea":"# Manually input western europe\ndf.loc[[527,689], 'country'] = 'North Cyprus'\ndf.loc[[527,689], 'region'] = 'Western Europe'","a6f23755":"#there are no missing data\ndf.isnull().any(1).sum()","99f87f16":"year_grouped = df.groupby('country')['year'].count()\nyear_grouped.value_counts()","148c1816":"plt.style.use('ggplot')\nplt.figure(figsize = (10,8))\nyear_grouped[year_grouped < 4].plot.barh()\nplt.title('Countries with less than 4 entries in the data')\nplt.xlabel('Count')\nplt.locator_params(axis='x', nbins=4)","f27d830f":"df[df['country'].str.contains('Somaliland')]","79aacf0e":"df.loc[90,'country'] = 'Somaliland Region'","53a19068":"df['region'].unique()","fecb39d5":"plt.style.use('ggplot')\nplt.figure(figsize = (10,6))\ndf['region'].value_counts().sort_values().plot.barh()\nplt.title('Number of countries by region')\nplt.xlabel('Counts')","6a4da269":"df.loc[df['region'] == 'North America', 'country'].unique()","3f4b525f":"rank_group = df.groupby(['year','rank'])['country'].count()\nrank_group[rank_group > 1]","9547676a":"c1 = (df['rank'] == 82)\nc2 = (df['year'] == 2015)\n\ndf[c1&c2]\n#Jordan and Montenegro both has rank 82 in 2015","1b71c243":"c1 = (df['year'] == 2016)\nc2 = (df['rank'].isin([34,57,145]))\n\ndf[c1&c2]","f36d46b4":"df.describe().loc[:,'score']","681028bb":"plt.figure(figsize = (10,6))\nsns.kdeplot(df['score'])\nplt.hist(df['score'], density = True, color = 'orange')\nplt.ylabel('Prob')","40f4c2fd":"df.describe().loc[:,'gdp_per_capita']","a07d4975":"plt.figure(figsize = (10,6))\nsns.kdeplot(df['gdp_per_capita'])\nplt.hist(df['gdp_per_capita'], density = True, color = 'orange')\nplt.ylabel('Prob')","2088d18f":"df.describe().loc[:,'family':'generosity']","b3a6e8c8":"plt.figure(figsize = (10,8))\nsns.heatmap(df.corr(), annot = True, cmap = 'RdBu')","009f0c58":"def top(df, col = 'rank', n = 10):\n    return df.sort_values(by = col)[:n]","77901a54":"top10 = df.groupby('year', as_index = False).apply(top, n = 10)\ntop10.head()","b2eb3d49":"fig = plt.figure(figsize = (15,12))\nax = fig.add_subplot()\nax = sns.lineplot(data = top10, y = 'rank', x = 'year', hue = 'country')\nax.set_yticklabels(['','1st','2nd','3rd','4th','5th','6th','7th','8th','9th','10th',''])\nplt.locator_params(axis='y', nbins=11)\nplt.locator_params(axis='x', nbins=6)\nplt.legend(ncol = 3, frameon = False, fontsize = 8)\nax.set_ylim(11, 0)\nplt.title('Top 10 countries per year')","d9b3b23c":"denmark = df[df['country'] == 'Denmark']\ndenmark","5f6d6021":"denmark_details = denmark.describe().loc['mean','score':'generosity']\ndenmark_details.name = 'Denmark'","a033f558":"idx = pd.IndexSlice\naverage_by_region = df.groupby('region').describe().loc[:,idx['score':'generosity','mean']]\naverage_by_region.columns = average_by_region.columns.swaplevel().droplevel()\ndenmark_compared = average_by_region.T.merge(denmark_details, right_index = True, left_index = True).T\ndenmark_compared","91518706":"fig, ax = plt.subplots(figsize = (15,15))\ndenmark_compared.drop(['family','gov_trust','generosity'],\n                     axis = 1).sort_values(by = ['score'], \n                                           ascending = False).T.plot.bar(ax = ax, width = .8)\nplt.title('Denmark compared to other regions')\nax.set_xticklabels(['Score','GDP','Life Expectancy','Freedom'], rotation = 60);","119b1283":"rank = df.loc[:,['country','rank','year','score']]\nrank.head()","34c3b924":"rankgroup = rank.groupby(['country','year'])['rank'].mean().unstack()\nrankgroup['rank diff'] = rankgroup.max(1) - rankgroup.min(1)","168f9764":"top10changes = rankgroup.sort_values(by = 'rank diff', ascending = False).head(10)","231142c6":"country_top10_change = top10changes.drop('rank diff', 1).stack().reset_index().rename(columns = {0:'rank'})","708265da":"plt.figure(figsize = (15,10))\nsns.lineplot(data = country_top10_change, x = 'year', y = 'rank', hue = 'country', palette = sns.color_palette(\"hls\", 10))\nplt.legend(ncol = 2)\nplt.locator_params(axis='x', nbins=6)\nplt.gca().invert_yaxis()\nplt.title('Top 10 countries with the highest change in rank');\n","efeccc99":"fig = plt.figure(figsize = (15,12))\nax = fig.add_subplot()\nsns.boxplot(data = df, x = 'region', y = 'score', ax = ax)\nax.set_xticklabels(ax.get_xticklabels(), rotation=45, ha='right');","4c3590fc":"df.loc[df['region'].str.contains('Australia'),'country'].unique()","6a54bc40":"def top_score(df, col = 'score', n = 5, ascending = True):\n    return df.sort_values(by = col)[-n:]","f4f6eba6":"top_byregion = df.groupby(['country','region'], as_index = False)['score'].mean().groupby('region').apply(top_score, n = 1).reset_index(drop = True)\nfig = plt.figure(figsize = (12,10))\nax = fig.add_subplot()\ntop_byregion.set_index(['region','country']).plot.bar(ax = ax)\n\n#make 2 rows for xticklabels \nindexes = list(top_byregion.set_index(['region','country']).index.values)\nmultilist = []\nfor i in indexes:\n    multilist.append(list(i))\nregion_country = []\nfor i in multilist:\n    region_country.append('\\n'.join(i))\nax.set_xticklabels(region_country);\nplt.legend('')\nplt.title('Happiest Country by Region')","89776874":"EuMe = df[(df['region'] == 'Western Europe') | df['region'].str.contains('Middle East')]\nTop5EuMe = EuMe.groupby(['country','region'], as_index = False)['score'].mean().groupby('region').apply(top_score).reset_index(drop = True)\n\n#plotting\nfig = plt.figure(figsize = (12,10))\nax = fig.add_subplot()\nsns.barplot(x = 'country', y ='score', data = Top5EuMe, hue = 'region', ax = ax)\nplt.title('Top 5 highest scores in Regions WE and ME-NA')\nax.set_xticklabels(ax.get_xticklabels(), rotation=45, ha='right');","0eae1a7e":"def bottom(df, col = 'score', n = 5, ascending = True):\n    return df.sort_values(by = col)[:n]","edfec1fc":"SubAfr_EastAsia = df[(df['region'] == 'Southern Asia') | df['region'].str.contains('Sub-')]\nBottom5 =  SubAfr_EastAsia.groupby(['country','region'], as_index = False)['score'].mean().groupby('region').apply(bottom, ascending = False, n = 5).reset_index(drop = True)\n\n#plotting\nfig = plt.figure(figsize = (12,10))\nax = fig.add_subplot()\nsns.barplot(x = 'country', y ='score', data = Bottom5, hue = 'region', ax = ax)\nplt.title('Bottom 5 countries in Southern Asia and Sub-Suharan Africa')\nax.set_xticklabels(ax.get_xticklabels(), rotation=45, ha='right');","44459507":"region_score = df.groupby(['region','year'], as_index = False).agg({'score':['mean',np.std]}).rename(columns = {'mean':'mean_score', 'std':'std_score'})\nregion_score.columns = region_score.columns.droplevel(1)\nregion_score.columns = ['region','year','mean_score','std_score']","834b1429":"c = ['red','blue','green','cyan','magenta','yellow','black','brown','gray','pink']","05bbfded":"def year_plot(df, title, col = ['region'], ylim = [3.5,7]):\n    fig = plt.figure(figsize = (12,10))\n    ax = plt.subplot()\n    for i in df.groupby(col):\n        plt.plot(i[1].year, i[1].mean_score, label = i[0], marker = 'o')\n    plt.legend(ncol = 2, fontsize = 8, columnspacing = .5)\n    plt.ylim(ylim)\n    plt.title(title)\n    plt.locator_params(axis='x', nbins=6)\n    \nyear_plot(region_score, title = 'Happiness Score by region')","909833e8":"def topN(df, col,  title = 'Please insert title', n=10):\n    plt.figure(figsize = (10,8))\n    df.groupby('country')[col].mean().sort_values(ascending = False)[:n].plot(kind = 'bar', title = title) ","dd679e73":"topN(df, col = 'generosity', title = 'Top10 most generous country')","238aefe4":"topN(df, col = 'freedom', title = 'Top10 most free country')","fe4edece":"topN(df, col = 'gov_trust', n = 10, title = 'Top 10 countries with highest trust on its government')","b13d14e1":"topN(df, col = 'family', n = 10, title = 'Top 10 countries with highest family\/social support')","4cec72ae":"topN(df, col = 'gdp_per_capita', n = 10, title = 'Top 10 countries with highest trust on its government')","a2fd5e9a":"Top10GDP_rank = df.groupby('country')['gdp_per_capita','rank'].mean().nlargest(10, 'gdp_per_capita').loc[:,'rank']\nfig = plt.figure(figsize = (10,8))\nax = fig.add_subplot()\nax.plot(Top10GDP_rank.index,Top10GDP_rank, linestyle = '', marker = 'o')\nax.set_xticklabels(Top10GDP_rank.index, rotation = 60)\nax.set_ylim(0, 80)\nfor country, rank in zip(Top10GDP_rank.index,Top10GDP_rank):\n    ax.annotate(rank,(country, rank + 3))","75b3190d":"ph = df[df['country'] == 'Philippines']\nph","fa7b57e2":"average = df.describe().loc['mean','score':'generosity']\naverage.name = 'Global Average'","d2bbe1cd":"ph_mean = ph.describe().loc['mean','score':'generosity']\nph_mean.name = 'Philippine'","c69bd13a":"fig = plt.figure(figsize = (10,8))\nax = fig.add_subplot()\npd.DataFrame([average, ph_mean]).T.plot.barh(ax = ax)\nax.set_ylabel('Indices')\nax.set_xlabel('Value')\nax.set_title('Philippine happiness indices compared to global average')","886f0a52":"fig = plt.figure(figsize = (10,8))\nax = fig.add_subplot()\nax.plot(ph['year'], ph['rank'])\nax.locator_params(axis='x', nbins=6)\nax.invert_yaxis()\nax.set_ylabel('Rank')\nax.set_xlabel('year')\nax.set_title('Philippine ranking on happiness (2015 - 2019)')\n\nfor year, rank in zip(ph['year'],ph['rank']):\n    ax.annotate(rank,(year, rank + 1))","63cbda64":"fig = plt.figure(figsize = (10,8))\nax = fig.add_subplot()\nph.set_index('year').loc[:,'gdp_per_capita':'generosity'].plot(kind = 'line', ax = ax, marker = 'o')\nplt.legend(ncol = 2)\nax.locator_params(axis='x', nbins=6)\nax.set_ylim(0, 1.4)\nplt.title('Happiness index in the Philippines')","77292301":"fig = plt.figure(figsize = (10,10))\nax = fig.add_subplot()\ndf[df['region'] == 'Southeastern Asia'].groupby('country').agg('mean').drop(['rank','year'],1).sort_values(by = 'score', ascending = False).T.plot(kind = 'bar', ax = ax, width = .8)\nax.set_title('Philippine compared to other regions')\nax.set_ylabel('Value')\nax.set_xlabel('Variables')\nplt.legend(ncol = 3)\nax.set_xticklabels(ax.get_xticklabels(), rotation=45, ha='right');","cf5d4d07":"df.head()","aa010ced":"indices = df.groupby('country').agg('mean').loc[:,'gdp_per_capita':'generosity']\nplt.figure(figsize = (10,8))\nfor i in indices.columns:\n    sns.distplot(df[i], label = i)\nplt.legend()\nplt.title('Distribution of happiness indices')","ee4a35d0":"regions = df['region'].unique()\nregions","b5c4f4a6":"fig = plt.figure(figsize = (12,10))\nax = fig.add_subplot()\nsns.scatterplot(data = df, x = 'score', y ='gdp_per_capita', hue = 'region', ax = ax)\nax.set_title('Scatterplot of GDP and score');","bc3a798d":"sns.lmplot(data = df, x = 'gdp_per_capita', y='generosity', height = 10)\nplt.title('GDP per capita vs generosity')","ba3dcc0d":"plt.figure(figsize = (12,10))\nsns.scatterplot(data= df, x = 'family', y = 'life_expectancy', size = 'gdp_per_capita')\nplt.legend(fontsize = 'large')\nplt.title('Social Support and Life expectancy')","e308741d":"sns.lmplot(data = df, x = 'gov_trust', y = 'freedom', hue = 'region', height = 10, legend_out = False)\nplt.title('Government Trust vs Freedom')","4a1b7579":"plt.figure(figsize = (10,8))\nsns.kdeplot(df['score'], shade = True)","e98e0817":"import scipy.stats as st\nmean = df['score'].mean()\nstd = df['score'].std()\n\nxs = np.linspace(0,9, 10000)\nps = st.norm.pdf(xs, mean, std)\n\nplt.figure(figsize = (10,8))\nsns.kdeplot(df['score'], shade = True)\nplt.plot(xs, ps)","efb51912":"mean = df['score'].mean()\nstd = df['score'].std()\n\nxs = np.linspace(0,9, 10000)\nps = st.norm.pdf(xs, mean, std)\n\np_lognorm = st.lognorm.fit(df['score'])\npdf_lognorm = st.lognorm.pdf(xs, *p_lognorm)\n\np_skewnorm = st.skewnorm.fit(df['score'])\npdf_skewnorm = st.skewnorm.pdf(xs, *p_skewnorm)\n\nplt.figure(figsize = (10,8))\nsns.kdeplot((df['score']), shade = True)\nplt.plot(xs, ps, label = 'normal')\nplt.plot(xs, pdf_lognorm, label = 'log norm')\nplt.plot(xs, pdf_skewnorm, label = 'skew norm')\nplt.legend()","39ea6e7a":"import scipy.stats as st\ndef get_best_distribution(data):\n    dist_names = [\"norm\", \"exponweib\", \"weibull_max\", \"weibull_min\", \"pareto\", \"genextreme\"]\n    dist_results = []\n    params = {}\n    for dist_name in dist_names:\n        dist = getattr(st, dist_name)\n        param = dist.fit(data)\n\n        params[dist_name] = param\n        # Applying the Kolmogorov-Smirnov test\n        D, p = st.kstest(data, dist_name, args=param)\n        print(\"p value for \"+dist_name+\" = \"+str(p))\n        dist_results.append((dist_name, p))\n\n    # select the best fitted distribution\n    best_dist, best_p = (max(dist_results, key=lambda item: item[1]))\n    # store the name of the best fit and its p value\n\n    print(\"Best fitting distribution: \"+str(best_dist))\n    print(\"Best p value: \"+ str(best_p))\n    print(\"Parameters for the best fit: \"+ str(params[best_dist]))\n\n    return best_dist, best_p, params[best_dist]","70037ff4":"best_dist, best_p, params = get_best_distribution(df['score'])","6d722acd":"The happiness indices of Denmark is high. Region with the lowest indices are africa and and asia","776d687d":"Philippines is the color gray. We ranked 4 in SEA in terms of happiness score. Our life expectancy is among the lowest. Singapore has very high value in government trust compared to other SEA countries. We can see here that singapore is the best SEA country","1bf9416f":"All data now have the same columns. Now lets map the region to country based from the 2015 and 2016 data","ba402e3f":"Here are the bottom countries in their happiness score\n","185cef3e":"Some parameters were stable from 2015 to 2019. The family or social support has increased from 2016 to 2019. Generosity decreased","f0f18457":"There are missing 1 missing data in government trust and 19 missing data in region. Check the data\n\nmissing gov_trust","1fc7d9bb":"Fix 2018 and 2019 data. Drop some columns and replace name","220614c3":"#### Confidence interval for score","9aaed53b":"#### Top10 most changed countries","d0c83538":"There are 142 countries which appeared 142 times, 10 countries that appeared four times, 7 country which appeared once, 4 countries which appeared thrice, and 1 country which appeared 7 times. Check the countries who appeared less than 4 times","91526dba":"#### Check the top country by region","be148b9e":"It seems like a bad estimate","940fd0ae":"#### Check top5 countries in western europe and middle east ( because there are only 2 countries in NA and australia and Nz)","a4d83375":"Asian countries are more generous","ab25cbfc":"#### Distribution of happiness score by region","c550415a":"#### Beginner learning project\n\nThis is a beginner learning project to practice basic data science libraries.","711f564b":"Can see that there are only 10 unique columns among all the columns. The next thing to do is to stack the dataframes into its appropriate columns. ","59bc7f9d":"#### Check the region","8f9adf49":"Check if there are still missing data","3deb05e6":"## From stack overflow","50315981":"#### GDP","7af60812":"#### Bottom countries in southern asia and and subsuharan africa","9c8d2358":"#### For next time","cb78e527":"#### Scatterplot of gdp_per_capita and score","e806d373":"There are 10 regions all in all","165e6ff6":"#### Check GDP per capita and generosity","fd21f8b6":"#### Other indices","f75a4413":"#### Country","b47d6c0c":"#### Data input","d49fdf13":"Fix all columns to be the same. Identify the common columns. 2018 and 2019 has the same data format. while\n\n- Rank\n- Region\n- Country\n- Score\n- GDP per capita\n- Family\/ Social support\n- Healthy  life expectancy\n- Freedom\n- Generosity\n- Perceptions of corruption\n\nHappiness score are based on the family, life expectancy, freedom, generosity, etc. THe values are how these parameters contribute to to evaluating happiness. it might be unreliable to use this as predictor of score. instead can use at as dependent variable","2010d6e6":"- score is highly correlated to the gdp per capita, family, life expectancy, freedom, and government trust.\n- life expectancy is highly correlated to gdp and family\n- government trust and freedom are correlated","3f2550d3":"There are only 2 countries in North America","779bb037":"Check other countries with missing region and manually change them","986fe8f9":"Both taiwan and Hongkong is just error in naming","51b9388c":"The difference between the happiest country by region is minimal. Pakistan in Southern Asia is the least happiest among the top happiest countries","659d2384":"Venezuela, Algeria, Zambia dropped their rank from 2015 to 2019 whereas Ivory Coast, Benin, and Honduras increased ranking","9d351cc6":"In most regions, government trust is linearly related to freedom","7c8c5b5c":"Insert years column to know what year the data is from","6e6dc50a":"#### Explore data columns and shape","eea1f97e":"Turns out US is not the most free country","d506a2a4":"On average, Countries on Western Europe have relatively close happiness scores. In middle east and north africa, Israel has the happiest population","802f34f5":"## Data cleaning","5b0a9416":"Manually change taiwan and hong","35432077":"We can fairly say the philippine is near average. It has higher scores on family and freedom but has low life expectanc","11343ab5":"## Explore each variable!","fafc735a":"North america has the least amount entires. Check the countries in north america","cb84e0d3":"The data of GDP per capita is skewed","0056b96c":"I somehow expected singapore to be here","6a0eb431":"#### Correlation of continous variables","4fc54f3f":"Fix 2017 data. Drop some columns and replace name","5535000c":"## Continous variables","78454a50":"In 2015 and 2016 there are two countries with the same rank. Explore these countries","fc700654":"#### Categorical data of country, region, year, rank, on cont variables that might be grouped by category","76092297":"#### Ph rank in Southeastern asian country","21b1e5e8":"Western europe and Australia and new zealand has low spread because there are only few countries in their region. Bottom region by happiness index are sub-suharan africa and southern asia.","91652c7f":"#### Check Denmark","7a7cc15d":"The missing data is from UAE in year 2018.  Try to impute data with some previous data of UAE","367b6024":"#### Try to estimate using normal distribution","5d851df9":"These countries have the same rank and scores","be05f3a1":"Qatar and UAE has the highest GDP per capita. Let's try to locate the rank of the countries with top10 highest GDP","f17732b6":"I don't have enough knowledge yet to compute for the probability of an empirical distribution","8e088be4":"#### Compare Philippines to average","f76dd5e2":"Missing regions","f21a7783":"#### Score","d276b872":"## Data Input","18e19955":"#### Rank","6ebee520":"#### Philippines","8140c255":"There is also a mistype on Somaliland region. ","89f1576c":"Compare Denmark to average","f0602a18":"#### Top10 by happiness index","47871ba8":"Philippine ranking has improved over the years","6a7fad46":"There are only 6 data. we can manually edit these data","d180527b":"The trend of happiness score by region shows that western Europe Scores have been increasing since 2015 whereas the region Southeastern Asia and Middle East have been decreasing since 2017","dab3d526":"It seems that the 2019 data is just mis entry","24fdef11":"Denmark is included in top 3 in governmetn trust and social support. Iceland is the top1. The difference is minimal","ac1fb1c3":"Social support and family expectancy is likely to have a positive linear relationship. GDP is also a contributing factor to life expectancty","cdd2bf1b":"#### top10 countries per year","6ef0d094":"Contrary to my hypothesis that GDP is correlated to generosity, it seems that there is no linear relationship between the two variables","1d219b72":"#### Mean and std of happiness score by Region","3598090b":"Missing data is from northen cyprus. lets manually input as western europe"}}