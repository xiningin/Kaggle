{"cell_type":{"7dfc9988":"code","428616f5":"code","cef05935":"code","dfc0a101":"code","bfc36e10":"code","8f4c1f78":"code","307c6e20":"code","6d0c6f9c":"code","dcc0ee4a":"code","11489642":"code","d690ec63":"code","4bddc6c1":"code","f9c803c7":"code","c7e783e8":"code","f960d9f5":"code","83d38300":"code","6d957251":"code","d6caa0e5":"code","96f70b20":"code","60d9f409":"code","c4d76da5":"code","4dd75216":"code","c1dbfdb2":"code","7cbdfea0":"code","677abad5":"code","060a7c45":"markdown","61eb0aa3":"markdown","90b56eb3":"markdown","2f0ef70e":"markdown","eb110247":"markdown","f9668907":"markdown","fb054885":"markdown","0ba6ea97":"markdown","a2f63a5d":"markdown","69d398e0":"markdown","59be969e":"markdown","0e05cf14":"markdown","86bfb15b":"markdown","9054887e":"markdown","30b7e284":"markdown","d1e7899d":"markdown","6ba9bf9c":"markdown","1bb5fd8a":"markdown","e61678f8":"markdown","aae0a669":"markdown","44eb41be":"markdown","a2aa751e":"markdown","68552291":"markdown","47626fb9":"markdown","a1d6d2f4":"markdown"},"source":{"7dfc9988":"import pandas as pd\nimport numpy as np\nimport matplotlib.pyplot as plt\nimport seaborn as sns\nimport statsmodels.api as sm","428616f5":"df = pd.read_csv(\"..\/input\/istanbul-stock-exchange\/istanbul_stock_exchange.csv\")\ndf.head()","cef05935":"df['date'] = pd.to_datetime(df['date'])","dfc0a101":"df.rename(columns={'TL BASED ISE':'ISE','USD BASED ISE':'ISE.1'},inplace=True)","bfc36e10":"df.head()","8f4c1f78":"plt.figure(figsize=(12,7))\nsns.lineplot(x='date',y='ISE',data=df)\nplt.show()","307c6e20":"df.drop(columns=['SP','ISE.1','DAX','FTSE','NIKKEI','BOVESPA','EU','EM'],inplace=True)\ndf.date = pd.to_datetime(df.date, dayfirst = True)\ndf.set_index(\"date\", inplace=True)\ndf=df.asfreq('b')\ndf=df.fillna(method='ffill')\ndf.head()","6d0c6f9c":"df.describe()","dcc0ee4a":"df.hist()\nplt.title(\"Distribution of values of ISE\")\nplt.show()","11489642":"a = round(len(df)\/2)\ndata1 = df[:a]\ndata2 = df[a:]\nprint('Mean of first half of data: %f'%data1.mean())\nprint('Mean of second half of data: %f'%data2.mean())\nprint('Variance of first half of data: %f'%data1.var())\nprint('Variance of second half of data: %f'%data2.var())","d690ec63":"from pandas.plotting import autocorrelation_plot\nautocorrelation_plot(df.ISE)","4bddc6c1":"from statsmodels.tsa.seasonal import seasonal_decompose","f9c803c7":"s_dec_additive = seasonal_decompose(x=df.ISE,model='additive')\ns_dec_additive.plot()\nplt.show()","c7e783e8":"from statsmodels.tsa.stattools import adfuller\nfrom statsmodels.tsa.arima_model import ARIMA","f960d9f5":"def ad_fuller_test(sales):\n  results = adfuller(sales)\n  labels = ['Test Statistic','p-value','Number of lags used','Number of Observations','Critical Value']\n  for values, labels in zip(results,labels):\n    print(labels,' : ',str(values))","83d38300":"ad_fuller_test(df['ISE'])","6d957251":"sm.graphics.tsa.plot_acf(df.ISE,lags=40,zero=False)\nplt.title('SP-ACF',size=20)\nplt.show()","d6caa0e5":"sm.graphics.tsa.plot_pacf(df.ISE,lags=40,zero=False)\nplt.show()","96f70b20":"pip install pmdarima","60d9f409":"n = len(df)\np = round(n*0.80)\ntrain_data = df.iloc[:p]\ntest_data = df.iloc[p:]\nprint(len(train_data),len(test_data))","c4d76da5":"from pmdarima import auto_arima\nbest_fit = auto_arima(df['ISE'],trace=True)\nbest_fit.summary()","4dd75216":"import warnings\nwarnings.filterwarnings('ignore')","c1dbfdb2":"model = ARIMA(train_data['ISE'],order=(0,0,0))\nmodel_ISE=model.fit()\nmodel_ISE.summary()","7cbdfea0":"df['auto_arima_ISE']=model_ISE.predict(start=len(train_data),end=556,dynamic=True)","677abad5":"plt.figure(figsize=(16,9))\nplt.plot(df['auto_arima_ISE'],color='blue')\nplt.plot(test_data['ISE'],color='lightgreen')\nplt.plot(train_data['ISE'],color='orange')\nplt.legend(['auto_arima_ISE','ISE_test_data','ISE_train_data'])","060a7c45":"### As p<0.05, hence the null hypothesis is rejected, the data is stationary\n1.   Test statistic is less than all of 1%, 5%, 10% values \n2.   p-value is 0\n3.   As it is white noise and there is no autocorrelation among the values of the time series, hence lags=0\n4. The time series is stationary and further confirms that the series is white noise\n\n","61eb0aa3":"### **Autocorrelation Plot**","90b56eb3":"## **Train Test Split**","2f0ef70e":"\n## Plot of ISE vs Date","eb110247":"## Transforming the data","f9668907":"## **Seasonality**","fb054885":"### All the lines fall within the blue area of significance, suggesting that the coefficients are not significant, hence there is no autocorrelation between lags","0ba6ea97":"## **Ad Fuller for Stationarity**","a2f63a5d":"## Importing Libraries\n","69d398e0":"## **ACF Plot**\n### Plotting the graph from 1st lag as for the 0th lag, correlation between and itself will be 1","59be969e":"## **Finding Best (p,d,q) fit using auto_arima** ","0e05cf14":"## Hence the graph proves our assumption that white noise cannot be predicted","86bfb15b":"### To see if the time series has constant variance we split the data and check for the mean and variance","9054887e":"### Same as ACF Plot, there is no partial correlation among lags which proves our assumptions of white noise\n\n### ---------------------------------------------------------------------------","30b7e284":"### The Histogram proves how the mean is close to zero and that it follows a Gaussian distribution","d1e7899d":"## Please upvote the notebook if it was helpful. Thank You!","6ba9bf9c":"### Here from the above graphs we can see that:\n\n1.   The trend resembles the observed graph and has no clear positive or negative incline\n2.   The seasonal sequence has no clear pattern, hence there is no pattern in graph\n3.   Residual also has no fixed pattern as well\n\n### Hence there is no seasonality in the above time series\n\n","1bb5fd8a":"## **PACF Plot**\n### Again,plotting the graph from 1st lag as for the 0th lag, correlation between and itself will be 1","e61678f8":"## For a time series to be weak form stationarity\/covariance stationarity, it should have:\n\n1. Constant mean  \n2. Constant variance\n3. Consistent covariance\n\n","aae0a669":"## **ARIMA(0,0,0)**","44eb41be":"### If a time series is white noise it is not forecastable by definition (because its values at different times are statistically independent) \n### The above statement is proven by fitting to an ARIMA model","a2aa751e":"\n### An example of weak-form stationarity is white noise, as it follows the following conditions:\n\n1.   Mean = 0\n2.   constant variance\n3.   autocorrelation between lags is 0\n\n### 1. Mean comes out to be almost equal to zero\n### Standard deviation is also almost equal to zero\n### This leads to the assumption that this time series is white noise\n\n","68552291":"###2. It is seen that the variance is constant among the 2 halves of data\n### Hence the data is seen to satisfy the 2nd assumption of white noise as well","47626fb9":"### Clearly all the autocorrelation values are close to zero proving the time series is random and there is no autocorrelation between values\n### Hence it is white noise","a1d6d2f4":"## **Plot**"}}