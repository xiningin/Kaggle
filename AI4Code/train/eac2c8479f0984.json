{"cell_type":{"c474f614":"code","a40bfa4d":"code","c8d62561":"code","c404e6fc":"code","6acba306":"code","a871e58d":"code","b44bbfd8":"code","b2d49557":"code","dd63987b":"code","b9088ba8":"code","f6f8a919":"code","4f75dedb":"code","0e39d672":"code","adcbead5":"code","ee3450ab":"code","d28bb3ab":"code","79549803":"code","7d72c07a":"code","1f8986b2":"code","5ebd836d":"code","0606e5ef":"code","cd2631a1":"code","bb1de76d":"code","306ba347":"code","a4adf85e":"code","671de649":"code","089f87e2":"code","07e5a2cd":"code","f88d37c1":"code","9e9b4f31":"code","8075a097":"code","104fc367":"code","d245070e":"code","00995ce3":"code","75e92ae2":"code","8cbc2bf9":"code","d7082509":"code","dcbdcd7d":"code","63cd68fb":"code","012810f8":"code","f0c830ec":"code","3bcc2a49":"code","b16a2723":"code","1646d260":"code","9be0130c":"code","ac9002e2":"code","d3a79e91":"markdown","ad7432b9":"markdown","e52d8889":"markdown","7ed1640c":"markdown","6e4b1ee4":"markdown","dafde6c8":"markdown","c4aef758":"markdown","37297841":"markdown","9c8e8889":"markdown","9ac46e48":"markdown","7c19dce0":"markdown","e32048d9":"markdown","7e3c424c":"markdown","1b1972a4":"markdown","06577584":"markdown","205eaafd":"markdown","b55af31f":"markdown","d77b5134":"markdown","b49ae46b":"markdown","f58fac9a":"markdown","af9ecde9":"markdown","a08ddad3":"markdown","fc8fe302":"markdown"},"source":{"c474f614":"# This Python 3 environment comes with many helpful analytics libraries installed\n# It is defined by the kaggle\/python docker image: https:\/\/github.com\/kaggle\/docker-python\n# For example, here's several helpful packages to load in \n\nimport numpy as np # linear algebra\nimport pandas as pd # data processing, CSV file I\/O (e.g. pd.read_csv)\n\n# Input data files are available in the \"..\/input\/\" directory.\n# For example, running this (by clicking run or pressing Shift+Enter) will list the files in the input directory\n\nimport os\nprint(os.listdir(\"..\/input\"))\n\n# Any results you write to the current directory are saved as output.","a40bfa4d":"import matplotlib.pyplot as plt","c8d62561":"trial_0=pd.read_csv('..\/input\/labeledEligibilitySample1000000.csv')","c404e6fc":"trial=pd.read_table('..\/input\/labeledEligibilitySample1000000.csv', header=None)","6acba306":"trial.shape","a871e58d":"trial.sample(10)","b44bbfd8":"clin_trial = pd.DataFrame(np.array(trial).reshape(1000000,2), columns=['label', 'describe'])","b2d49557":"clin_trial['describe'].head(10)","dd63987b":"clin_trial['label'].unique()","b9088ba8":"clin_trial['study'], clin_trial['condition'] = clin_trial['describe'].str.split('.', 1).str","f6f8a919":"clin_trial.head(10)","4f75dedb":"clin_trial=clin_trial.drop(['describe'], axis=1)","0e39d672":"clin_trial['qualification']=clin_trial['label'].str.extract('(\\d)', expand=True)","adcbead5":"clin_trial=clin_trial.drop(['label'], axis=1)","ee3450ab":"clin_trial.sample(5)","d28bb3ab":"clin_trial['study'].value_counts()","79549803":"clintrial_lymphoma=clin_trial.loc[clin_trial.condition.str.contains('\\w*lymphoma')]","7d72c07a":"clintrial_lymphoma.shape","1f8986b2":"clintrial_breast=clin_trial.loc[clin_trial.condition.str.contains('.*reast')] # to avoid lower case and upper case error","5ebd836d":"clintrial_breast.shape","0606e5ef":"clintrial_lymphoma['study'].value_counts()","cd2631a1":"clintrial_lymphoma['words'] = clintrial_lymphoma.condition.str.split(' ')","bb1de76d":"clintrial_lymphoma.head(3)","306ba347":"rows = list()\nfor row in clintrial_lymphoma[['study', 'words']].iterrows():\n    r = row[1]\n    for word in r.words:\n        rows.append((r.study, word))\n\nwords = pd.DataFrame(rows, columns=['study', 'word'])","a4adf85e":"words.head(10)","671de649":"words['word'] = words.word.str.lower()","089f87e2":"words['word'].value_counts().head(50)","07e5a2cd":"clintrial_lymphoma['recurrent'] = pd.np.where(clintrial_lymphoma.condition.str.contains(\"\\w*recurrent\"), \"recurrent\",\"no\")","f88d37c1":"clintrial_lymphoma.sample(10)","9e9b4f31":"clintrial_lymphoma['stage_ii'] = pd.np.where(clintrial_lymphoma.condition.str.contains(\"\\w*stage ii\"), \"stage_ii\",\"no\")","8075a097":"clintrial_lymphoma['stage_iii'] = pd.np.where(clintrial_lymphoma.condition.str.contains(\"\\w*stage iii\"), \"stage_iii\",\"no\")","104fc367":"clintrial_lymphoma['stage_iv'] = pd.np.where(clintrial_lymphoma.condition.str.contains(\"\\w*stage iv\"), \"stage_iv\",\"no\")","d245070e":"clintrial_lymphoma['follicular'] = pd.np.where(clintrial_lymphoma.condition.str.contains(\"\\w*follicular\"), \"follicular\",\"no\")","00995ce3":"clintrial_lymphoma['diffuse'] = pd.np.where(clintrial_lymphoma.condition.str.contains(\"\\w*diffuse\"), \"diffuse\",\"no\")","75e92ae2":"clintrial_lymphoma['hodgkin'] = pd.np.where(clintrial_lymphoma.condition.str.contains(\"\\w*hodgkin\"), \"hodgkin\",\"no\")","8cbc2bf9":"clintrial_lymphoma.sample(50)","d7082509":"clintrial_lymphoma_select=clintrial_lymphoma.drop([ 'words'], axis=1)","dcbdcd7d":"import seaborn as sns","63cd68fb":"var = clintrial_lymphoma_select.groupby(['study']).qualification.value_counts()","012810f8":"var.shape","f0c830ec":"var.head(10)","3bcc2a49":"var_q = clintrial_lymphoma_select.groupby('study')['qualification'].value_counts().sort_values(ascending=False).head(50).plot(kind='bar', figsize=(15,5))\nvar_q","b16a2723":"var_r = clintrial_lymphoma_select.groupby('study')['recurrent'].value_counts().sort_values(ascending=False).head(50).plot(kind='bar', figsize=(15,5))\nvar_r","1646d260":"var_iv = clintrial_lymphoma_select.groupby('study')['stage_iv'].value_counts().sort_values(ascending=False).head(50).plot(kind='bar', figsize=(15,5))\nvar_iv","9be0130c":"var_ii = clintrial_lymphoma_select.groupby('study')['stage_ii'].value_counts().sort_values(ascending=False).head(50).plot(kind='bar', figsize=(15,5))\nvar_ii","ac9002e2":"\nvar1 = clintrial_lymphoma_select.groupby(['study']).qualification.value_counts()\n\nvar1.unstack().plot(kind='bar',stacked=True,  color=['red','blue'], figsize=(15,6))","d3a79e91":"    The most popular treatment is Fludarabine, different from the total cancer dataset.","ad7432b9":"Now the split columns are created. Let's make the label column more straight forward.: just 0 and 1","e52d8889":"From the list,  we can see most of them are useless, like 'and', 'the'...but some are very important and informative for cancer treatment, like 'recurrent', 'stage_ii', 'stage_iii', 'follicular' and 'diffuse'.\n\nSo let's take a look at the relationship between keywords and 'study'\n\nFirst let's make some columns to store the keywords information.","7ed1640c":"So how can we look at these data reasonably? One way is to categorize into different cancer types, like lymphoma, breast cancer...\nLet's try select all the trials on lymphoma","6e4b1ee4":"totally there are more than 15,000 trials in the table. Some are similar trials with minor changes on names.","dafde6c8":"See which words are the most popular keywords","c4aef758":"read_table works fine. Let's look at some basic information","37297841":"good! only two. then split the statement into two parts based on the dot '.'","9c8e8889":"The last graph gives an overview on the relatioship of studies and qualification. \n\n","9ac46e48":"let's find some keywords from the description column.","7c19dce0":"One million......not dollars, but lines! only two columns?","e32048d9":"Now we have all the words singled out to count.","7e3c424c":"About >10,000 trials on breast cancer. Then let's use lymphoma data as an example to do the analysis","1b1972a4":"Stage four cancers have almost no popular treatments","06577584":"With the text words, prediction based on the 'qualification' cannot be done. All the words have to be changed to number first. However after I tried, none of the  models I used gave an accuracy number bigger than 0.6. So more work need to be done on the vocabulary analysis.\n\n","205eaafd":"Stage ii cancers have much more ways to treat.","b55af31f":"look carefully at the 'describe' column, there is a '.' in every statement to separate treatment of the trial from other description. how many kinds of values in 'label' column?","d77b5134":"most treatments cannot be applied to reccurent cases","b49ae46b":"There are nearly 230,000 trials of lymphoma! How about breast cancer?  ","f58fac9a":"now the table seems clean enough. How many different trials are there, even though total number is one million?","af9ecde9":"First read the file","a08ddad3":"According to the data description, one column is the label of qualification, the other just a short statement about the trial. Let's give them correct names.","fc8fe302":"For some reason, read_csv doesnt work....something about the format is wrong, so try another way"}}