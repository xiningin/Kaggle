{"cell_type":{"e9a2eec2":"code","eb781ce9":"code","da6971a0":"code","063090c1":"code","35a01c71":"code","0ee436cc":"code","f7344786":"markdown","67c9fbad":"markdown","c5622570":"markdown","6257b229":"markdown","fed0e926":"markdown","668538c6":"markdown"},"source":{"e9a2eec2":"\nimport sklearn.datasets as datasets\nimport pandas as pd\nimport numpy as np\nimport matplotlib.pyplot as plt\nimport seaborn as sns\nsns.set_style('whitegrid')\nsns.set_palette(\"husl\")\nfrom pandas.plotting import register_matplotlib_converters\nregister_matplotlib_converters()","eb781ce9":"sp = pd.read_csv('\/kaggle\/input\/m5-forecasting-accuracy\/sell_prices.csv')\ncl = pd.read_csv('\/kaggle\/input\/m5-forecasting-accuracy\/calendar.csv')\nstv = pd.read_csv('\/kaggle\/input\/m5-forecasting-accuracy\/sales_train_validation.csv')","da6971a0":"def stvt(id):\n    ids = id.split('_')\n    item_id = ids[0]+'_'+ids[1]+'_'+ids[2]\n    store_id = ids[3]+'_'+ids[4]\n    stv[stv['id']==id]\n    result = sp[(sp['item_id']==item_id) & (sp['store_id']==store_id)]\n    result = pd.merge(result,cl,on='wm_yr_wk')\n    result['date'] = pd.to_datetime(result['date'])\n    st = stv[(stv['item_id']==item_id) & (stv['store_id']==store_id)].T\n    st = st[st.index.str.startswith('d_')]\n    st['d'] = st.index\n    st['sales'] = st.iloc[:,0].astype('float')\n    stvcl =  pd.merge(st,result,on=['d'])\n    stvcl['sales_amount'] = stvcl['sales'] * stvcl['sell_price']\n    return stvcl\n    \nstv1 = stvt('HOBBIES_1_001_CA_1_validation')\nstv1","063090c1":"def show_plots(stv1):\n    fig, axes = plt.subplots(3, figsize=(20,10))\n    sns.lineplot(data=stv1,x='date',y='sales',label='sales', ax=axes[0] )\n    sns.lineplot(data=stv1,x='date',y='sell_price',label='sell_price', ax=axes[1] )\n    sns.lineplot(data=stv1,x='date',y='sales_amount',label='sales_amount', ax=axes[2] )\n    \nshow_plots(stv1)","35a01c71":"show_plots(stvt('HOBBIES_1_001_CA_1'))\nshow_plots(stvt('HOBBIES_1_001_CA_2'))\nshow_plots(stvt('HOBBIES_1_001_CA_3'))","0ee436cc":"def show_rolling_plots(stv1):\n    fig, axes = plt.subplots(6, figsize=(20,20))\n    stv1['sales_amount_r7'] = stv1['sales_amount'].rolling(7).mean()\n    stv1['sales_amount_r30'] = stv1['sales_amount'].rolling(30).mean()\n    stv1['sales_amount_r90'] = stv1['sales_amount'].rolling(90).mean()\n    sns.lineplot(data=stv1,x='date',y='sales',label='sales', ax=axes[0] )\n    sns.lineplot(data=stv1,x='date',y='sell_price',label='sell_price', ax=axes[1] )\n    sns.lineplot(data=stv1,x='date',y='sales_amount',label='sales_amount', ax=axes[2] )\n    sns.lineplot(data=stv1,x='date',y='sales_amount_r7',label='sales_amount_r7', ax=axes[3] )\n    sns.lineplot(data=stv1,x='date',y='sales_amount_r30',label='sales_amount_r30', ax=axes[4] )\n    sns.lineplot(data=stv1,x='date',y='sales_amount_r90',label='sales_amount_r90', ax=axes[5] )\n    \nshow_rolling_plots(stvt('HOBBIES_1_001_CA_1'))","f7344786":"# \u58f2\u4e0a\u9ad8\u306e\u79fb\u52d5\u5e73\u5747\n- \u30c8\u30ec\u30f3\u30c9\u304c\u898b\u306b\u304f\u3044\u306e\u30677\u65e5,30\u65e5,90\u65e5\u79fb\u52d5\u5e73\u5747\u3092\u30d7\u30ed\u30c3\u30c8","67c9fbad":"# What's this\n- \u4e3b\u306b\u30c1\u30fc\u30e0\u5185\u3067\u306e\u60c5\u5831\u5171\u6709\u3092\u76ee\u7684\u3068\u3057\u305f\u6587\u66f8\u3067\u3059\u304c\u305b\u3063\u304b\u304f\u306a\u306e\u3067public\n- \u3053\u306eNotebook\u3067\u306f\u58f2\u4e0a\u9ad8\u3092\u898b\u3066\u3044\u304d\u307e\u3059\n","c5622570":"- 2014\u5e741\u6708\u304b\u3089\u58f2\u4e0a\u6e1b\u5c11\n- 2014\u5e747\u6708\u304b\u3089\u4e0a\u6607\u30c8\u30ec\u30f3\u30c9\n- 2015\u5e747\u6708\u306b\u58f2\u4e0a\u843d\u3061\u8fbc\u307f\n- \u6700\u65b0(2016\u5e74\u672b)\u3067\u306f2016\u5e741\u6708\u304b\u3089\u306e\u30c8\u30ec\u30f3\u30c9\u30e9\u30a4\u30f3\u306b\u4e57\u3063\u3066\u3044\u308b\n- \u306e\u3088\u3046\u306b\u898b\u3048\u308b\u3002","6257b229":"# HOBBIES_1_001_CA_1\u306e\u8ca9\u58f2\u6570,\u58f2\u5024,\u58f2\u4e0a\u9ad8","fed0e926":"# \u58f2\u4e0a\u9ad8\u306e\u8a08\u7b97\n- \u8ca9\u58f2\u6570\u3068\u305d\u306e\u6642\u306e\u58f2\u5024\u3067\u8a08\u7b97\n- HOBBIES_1_001_CA_1_validation\u306e\u6570\u5b57","668538c6":"# HOBBIES_1_001_CA_1,CA_2,CA_3\u306e\u8ca9\u58f2\u6570,\u58f2\u5024,\u58f2\u4e0a\u9ad8"}}