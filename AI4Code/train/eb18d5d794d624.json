{"cell_type":{"2efda941":"code","930b8721":"code","40e81016":"code","79ee842a":"code","f72d5a28":"code","d42cfba4":"code","4b93357b":"code","79986691":"code","1e1e4ec4":"code","9b47bef4":"code","dde6e407":"code","f89c93ed":"code","0d74c240":"code","6497ac1c":"code","f7e6674a":"code","f00e83b8":"code","8887a9c7":"code","2dec45d7":"code","1b37a8a8":"code","fe53894a":"code","2cbfab4c":"code","018523b5":"code","e4dba877":"code","128ac48e":"code","a239b5f9":"code","d2517a0c":"code","0992f276":"code","b5119c0a":"code","ad0bad61":"code","2af465b8":"code","30cb8099":"code","e3dfa887":"code","b0939dfb":"code","7c4d5e32":"code","f51bd246":"code","1af92c5a":"code","3e39170f":"code","65a15906":"code","c1d4bef5":"markdown","4e75447a":"markdown","0eb47131":"markdown","409d5309":"markdown","c98b1577":"markdown","a6960778":"markdown","22742adf":"markdown","988d389a":"markdown","d5c56406":"markdown","6712e024":"markdown","19a0fa8a":"markdown","faa6140e":"markdown","c650fd63":"markdown","a29245ef":"markdown","c017ddfd":"markdown","85de2ebf":"markdown","d7f7f25b":"markdown","5018b082":"markdown","ef1c4682":"markdown","78681736":"markdown"},"source":{"2efda941":"#data frame\nimport pandas as pd\n#for mathematical operations\nimport numpy as np\n#for data visualizations\nimport matplotlib.pyplot as plt\nimport seaborn as sns\nimport plotly.express as px","930b8721":"df=pd.read_excel('..\/input\/incinerator\/Incinerator.xlsx')\ndf.head()","40e81016":"len(df.price.unique())","79ee842a":"df.shape","f72d5a28":"sns.heatmap(df.isnull(),cbar=False)\nplt.title('Visualization of null values (if any)')","d42cfba4":"plt.figure(facecolor='grey')\ndf.hist(figsize=(20,10))\n# This is is a representation of the distribution of data  on each series in \n#the DataFrame, resulting in one histogram per column","4b93357b":"df.describe()","79986691":"plt.figure(figsize=(15,5),facecolor='grey',dpi=70)\nsns.countplot(df.year)","1e1e4ec4":"px.scatter(df,x='land',y='area',size='price',size_max=40,color='age',animation_frame='year',animation_group='price',title='Affect of Land area & House area on house prices of each ages given in year 1978 & 1981')","9b47bef4":"px.scatter_3d(df,x=np.log(df['cbd']),y='ldist',z='lprice',color='year',size='age',size_max=40\n,labels={'x':'Distance to bus centre(log)','ldist':'Distance from incenerator(log)'}\n,title='3-D scatter plot showing effect of Incenerator distance & Bus centre distance in the house price for both years in data')","dde6e407":"px.density_heatmap(df,x=np.log(df['cbd']),y='ldist',z='lprice',animation_frame='year',animation_group='lprice'\n,title='Effect of Incenerator distance & Bus centre distance in the house price for both years in data')","f89c93ed":"plt.figure(facecolor='grey',figsize=(20,15))\nplt.subplot(3,2,1)\nsns.boxplot(data=df,x='lprice',orient='h',palette='cividis_r')\nplt.title('Prices (Logarithmic)')\nplt.xlabel('Price')\nplt.subplot(3,2,2)\nsns.boxplot(data=df,x='lland',palette='cividis_r')\nplt.title('Land Area (Logarithmic)')\nplt.xlabel('Land(ft)')\nplt.subplot(3,2,3)\nsns.boxplot(data=df,x='age',palette='cividis_r')\nplt.title('House Age')\nplt.subplot(3,2,4)\nsns.boxplot(data=df,x=np.log(df['rooms']),palette='cividis_r')\nplt.title('Number of rooms (Logarithic)')\nplt.axvline(np.median(np.log(df.rooms)),label='Median')\nplt.legend()\nplt.xlabel('Rooms')","0d74c240":"plt.figure(facecolor='grey',figsize=(20,10))\nplt.subplot(211)\nsns.boxplot(data=df,x='ldist',orient='h',palette='cividis_r')\nplt.title('Distance from Incinerator (Logarithmic)')\nplt.subplot(223)\nsns.boxplot(data=df,x=np.log(df['cbd']),palette='cividis_r')\nplt.title('Distance from bus centre (Logarithmic)')\nplt.subplot(224)\nsns.boxplot(data=df,x=np.log(df['lintst']),palette='cividis_r')\nplt.title('Distance from interstate (Logarithmic)')","6497ac1c":"plt.figure(figsize=(15,10))\n#This shows how much related is one parameter to the other in the dataset. \nsns.heatmap(np.round(df.corr(),2),annot=True)","f7e6674a":"plt.figure(figsize=(20,10),facecolor='grey')\nplt.subplot(211)\nsns.regplot(df.ldist,df.lprice)\nplt.xlabel('Distance from incenerator')\nplt.ylabel('Price')\nplt.title('Incenerator distance vs House price')\nplt.subplot(223)\nsns.regplot(df.ldist,df.lintst)\nplt.xlabel('Distance from incenerator')\nplt.ylabel('Distance from interstate')\nplt.title('Incenerator distance vs Interstate distance')\nplt.subplot(224)\nsns.regplot(df.ldist,np.log(df.cbd))\nplt.xlabel('Distance from incenerator')\nplt.ylabel('Distance from bus centre')\nplt.title('Incenerator distance vs Bus centre distance')","f00e83b8":"inter=np.corrcoef(df.ldist,df.lintst)[1][0]\ncbd=np.corrcoef(df.ldist,np.log(df.cbd))[1][0]\nprice=np.corrcoef(df.ldist,df.lprice)[1][0]\nprint('House price depends on incenerator distance by',np.round(price*100,0),'%')\nprint('Incenerator distance depends on interstate distance by',np.round(inter*100,0),'%')\nprint('Incenerator distance depends on bus centre distance by',np.round(cbd*100,0),'%')","8887a9c7":"plt.figure(figsize=(20,5),facecolor='grey')\nax=sns.lineplot(df.dist,df.lprice)\nx = ax.lines[0].get_xdata() # Get the x data of the distribution\ny = ax.lines[0].get_ydata() # Get the y data of the distribution\nmaxid = np.argmax(y) # The id of the peak (maximum of y data)\nplt.plot(x[maxid],y[maxid], 'bo', ms=10,label='Peak Value')\nplt.legend()","2dec45d7":"print('The incenerator distance at which the house price is found to be maximum is',np.round(x[maxid],1),'ft.')","1b37a8a8":"near_lim=df.query('nearinc==1')['dist'].max()\ndrop=np.corrcoef(df.nearinc,df.price)[0][1]\nprint('Limit for least distance:',near_lim)\nprint('Coefficient of price drop:',np.round(drop,2))","fe53894a":"from sklearn.model_selection import train_test_split as tts\nfrom sklearn.linear_model import LinearRegression\nfrom sklearn import metrics","2cbfab4c":"Y=df.nearinc.values\nY=Y.reshape(-1,1)\nX=df.lprice.values\nX=X.reshape(-1,1)\nx_train,x_test,y_train,y_test=tts(X,Y,train_size=0.8, random_state=0)","018523b5":"lin=LinearRegression()\nlin.fit(x_train,y_train)","e4dba877":"metrics.r2_score(y_test,lin.predict(x_test))","128ac48e":"lin.coef_","a239b5f9":"import statsmodels.formula.api as smf","d2517a0c":"model='lprice ~ nearinc + y81 + y81nrinc'\nmod=smf.ols(formula=model,data=df)\ndid=mod.fit()\nprint(did.summary())","0992f276":"np.round(did.rsquared-metrics.r2_score(y_test,lin.predict(x_test)),3)","b5119c0a":"#Obtaining a new dataset that contains the dependant and independant variables\ndf2=df.drop(['cbd', 'intst', 'lintst','dist', 'ldist', 'wind','rprice', 'lrprice ','lintstsq'],axis='columns')\ndf2.head()","ad0bad61":"df2['nbh_0']=np.where(df['nbh'],0,1) #more than one neighbours represents 0.","2af465b8":"df2.head()","30cb8099":"feat=['age', 'agesq','age', 'agesq','baths', 'y81', 'larea', 'lland','nearinc', 'nbh_0']\nX2=df2[feat]\nY2=df2[['lprice']]","e3dfa887":"x_train2,x_test2,y_train2,y_test2=tts(X2,Y2,train_size=0.8)","b0939dfb":"lin.fit(x_train2,y_train2)","7c4d5e32":"metrics.r2_score(y_test2,lin.predict(x_test2))","f51bd246":"lin.coef_","1af92c5a":"features=[]\nfor x in feat:\n  features.append(x)\ncoeff=[]\nfor y in lin.coef_[0]:\n    coeff.append(y)\n\nres = {} \nfor key in features: \n    for value in coeff: \n        res[key] = value \n        coeff.remove(value) \n        break  ","3e39170f":"res","65a15906":"px.bar(x=features,y=lin.coef_[0],title='Comparision of dependancy of House Prices on the following parameters',range_y=[-0.04,0.4]\n       ,labels={'x':'Parameters effecting house price','y':'Impact on house price'})","c1d4bef5":"## Conclusion  - \nFrom this exploratory data analysis, we can say that area of house and number of bathrooms majorly contributed in the influence of their existance in the house prices. However, Age of the house barely affected the house prices. But, since our targeted parameter was the distance of incinerator from the location of the houses, about that we can say that to own a house 1% far away than current location from the incinerators the house price will be increased by 5.3%. Therefore, incinerators do have impacts of their presence in the vicinity of the houses.","4e75447a":"## Note - To reduce the existence of outliers in this analysis I preferred using the logarithmic values of the columns","0eb47131":"### Let's now check the behaviour of house prices corresponding to below three determinants determinants with the help of heatmaps.","409d5309":"### Description of dataset.\n\n 1. year          --           1978 or 1981\n 2. age            --          age of house\n 3. agesq            --        age^2\n 4. nbh             --         neighborhood #, 1 to 6\n 5. cbd             --         dist. to central bus. dstrct, feet\n 6. intst           --         dist. to interstate, feet\n 7. lintst          --         log(intst)\n 8. price           --         selling price\n 9. rooms           --         # rooms in house\n 10. area           --          square footage of house\n 11. land           --          square footage lot\n 12. baths          --          # bathrooms\n 13. dist           --          dist. from house to incinerator, feet\n 14. ldist          --          log(dist)\n 15. wind           --          perc. time wind incin. to house\n 16. lprice         --          log(price)\n 17. y81            --          1 if year == 1981\n 18. larea          --          log(area)\n 19. lland          --          log(land)\n 20. y81ldist       --          y81*ldist\n 21. lintstsq       --          lintst^2\n 22. nearinc        --          1 if dist <= 15840\n 23. y81nrinc       --          y81*nearinc\n 24. rprice         --          price in 1978 (dollars)\n 25. lrprice        --          log(rprice)","c98b1577":"### Assumption 3\nDifference between R square values in both models till now is 0.315 which is huge. \nThis means that 'y81nrinc' column is significant as the effect of both years in the data also contribute to the change in house price.","a6960778":"### Distribution and variability of the determinants with the help of box plots.","22742adf":"### Model 1","988d389a":"Houses situated within the distance of 15600ft from incenerator are considered as \"Near to the incenerator\" and rest are consider as farther.","d5c56406":"## Visualizations","6712e024":"### Let's now check the behaviour of each determinant corresponding to each other determinants with the help of heatmaps.","19a0fa8a":"### Problem statement\n\n\n1.   To find out the factors affecting the house price.\n2.   To find out how much impact does having homes near\/far from incenerator bring on the house prices.\n\n","faa6140e":"### Assumption 2\nFrom the given coefficient of the above linear model, it is clear that if the house is near the dumpsite (i.e within 15600ft) then price drop will be around 4.4% for every 1ft of closeness.","c650fd63":"\n### Results\n\n*   If year is 1981 then there will be a price increase by 39%,assuming all other variables are held constant.\n*   For each year increase in house age, there will be 0.3% of decrease in house price,assuming all other variables are held constant.\n\n\n*   For every bathroom, there will be a price increase of 13%,assuming all other variables are held constant.\n*   For increase of area by 1% there will be a price increase by 37%,assuming all other variables are held constant.\n\n\n*  For increase of land by 1% there will be a price increase by 9%,assuming all other variables are held constant. \n*   Increasing neaighbours also result in increase of price by 5.3%,For increase of area by 1% there will be a price increase by 37%,assuming all other variables are held constant.\n\n\n*   For every ft of increase in distance from incenerator, the price will be increased by 2.5%,assuming all other variables are held constant.\n* For increase of area by 1% there will be a price increase by 37%,assuming all other variables are held constant.\n\n\n\n\n\n\n\n","a29245ef":"Since we won't be using the number of neighbours in our model, but we can break it into two categories (0 neighbours & neighbours more than 0) with the help of \"One-hot encoding\" for a simplification in our regression analysis. So we will create a column \"nbh_0\" in \"df2\" for this operation.","c017ddfd":"### Introduction\nIn order to locate a new incinerator site near our city, we must select the location such that there should not be any impact of its precense on the houses located in the vicinity. And if they do, then it will impact the house prices too.This is the case study that I have made to determine the impact of a incinerator site\u2019s vicinity on house prices. For this, I have taken a dataset that has data of house prices corresponding to some other parameters like distance to incinerator site, property area, distance to the city center, and distance to the ring road,the land associated with a property, number of rooms, number of baths and age of the house. The data of house prices were recorded in two years (i.e 178 and 1981).On the base of this analysis, a model for predicting the prices of a house is constructed.\nWe will be using following machine learning models for our data analysis:\n* Univariate linear regression\n* Difference in Difference model\n* Multivariate linear regression\n","85de2ebf":"Lets obtain a dictionary that contains the names of coefficients in this model as keys with their corresponding values.","d7f7f25b":"Here we will be considering the fact that being near or farther to the incenerator will impact on the house prices. Hence in this model we will find out how much will be impact of only 'nearinc' on the house price.","5018b082":"### Model 2\nSince in the above model we considered the condition of being near\/far as an impact on house prices. Here we will find out if the house prices vary according to the year in the data (i.e 1978 & 1981) and also the condition of being near\/far in those each years.\nHere we used \"Difference-in-Difference model\" for doing this analysis.","ef1c4682":"### Assumption 1","78681736":"### Model 3\nHere we will use all the parameters in the dataset that may bring an impact on the house prices and will determine how much they impact the house price by the help of \"Multi-Variate Linear Regression\"."}}