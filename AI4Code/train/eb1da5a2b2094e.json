{"cell_type":{"66cf0aa8":"code","a206beb9":"code","8db29de8":"code","c39ecad4":"markdown","214ecf88":"markdown"},"source":{"66cf0aa8":"import pandas as pd\nfrom datetime import datetime\nfrom matplotlib import pyplot as plt\n%matplotlib inline\n\ntrain_df = pd.read_csv('..\/input\/train.csv')","a206beb9":"epoch_datetime = pd.datetime(1900, 1, 1)\ntrf_var_68_s = (train_df['var_68']*10000 - 7000 + epoch_datetime.toordinal()).astype(int)\ndate_s = trf_var_68_s.map(datetime.fromordinal)\ntrain_df['date'] = date_s","8db29de8":"years = [2017, 2018, 2019]\nmonths = [1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12]\nsuspicious = ['var_12','var_37','var_40','var_53', 'var_81','var_88','var_89','var_92','var_95', 'var_99', 'var_126','var_153','var_158','var_164', 'var_177','var_180', 'var_188','var_194']\n\nfor year in years:\n    for month in months:\n        for feature in suspicious:\n            \n            if year == 2017:\n                if month < 7:\n                    continue\n            if year == 2019:\n                if month > 1:\n                    continue\n            \n            tmp_df = train_df.loc[lambda df: (df.date.dt.year == year) & (df.date.dt.month == month)]\n            \n            negData = tmp_df.loc[tmp_df['target'] == 0][feature]\n            posData = tmp_df.loc[tmp_df['target'] == 1][feature]\n\n            fig, ax = plt.subplots(ncols = 1, figsize=(20,5))\n\n            fig.suptitle(str(year) + 'y ' + str(month) + 'm ' + feature)\n            outs1, outs2, outs3 = ax.hist([negData, posData], \n                                          bins=30, \n                                          density = True, \n                                          histtype='step', \n                                          linewidth=3)\n            ax.set_xticks(outs2)\n            ax.xaxis.grid(True)\n\n            fig.show()\n            plt.show()","c39ecad4":"# 0 and 1 distributions of suspicious 'var's shaped like var_68(date)","214ecf88":"Thanks to this discussion for the LEGENDARY observation: https:\/\/www.kaggle.com\/c\/santander-customer-transaction-prediction\/discussion\/84450 <br\/>\nand this kernel: https:\/\/www.kaggle.com\/yassinealouini\/mystery-behind-var-68\n        \nIn this notebook, I analysis suspicious 'var's shaped like var_68 (=date)\n\nblue = negative \/ orange = positive"}}