{"cell_type":{"6d894e2e":"code","f3fb41f6":"code","fee3326a":"code","261100a7":"code","a89fd6f2":"code","c8456391":"code","171f33a9":"code","a7990226":"code","54443449":"code","9488bd1a":"code","6f494f53":"code","fba77717":"code","2ece85eb":"code","fb20df69":"code","96d11779":"code","28dd98e7":"code","7b0ebfbb":"code","bc8b8b73":"code","3f43b467":"code","ceaafe9f":"code","b4fd3dc6":"code","db8fb7cf":"code","d7092180":"code","69929568":"markdown","decde98f":"markdown","cc52b5f9":"markdown","360ebc7b":"markdown","b9c2c67f":"markdown","54af0cb9":"markdown","94b3f4c6":"markdown","92dc3598":"markdown","7536629a":"markdown","136894e9":"markdown","713064c2":"markdown","8ca3f3e7":"markdown","f6c07cc1":"markdown","59f63303":"markdown","75df71a3":"markdown","e6a1e018":"markdown","93b03941":"markdown"},"source":{"6d894e2e":"import pandas as pd\nimport numpy as np\nimport itertools","f3fb41f6":"dist_m = pd.read_csv('..\/input\/santa-2021\/distance_matrix.csv')\nperm_m = pd.read_csv('..\/input\/santa-2021\/permutations.csv')\nwild_m = pd.read_csv('..\/input\/santa-2021\/wildcards.csv')\nsamp_m = pd.read_csv('..\/input\/santa-2021\/sample_submission.csv')","fee3326a":"dist_m.head()","261100a7":"perm_m.head()","a89fd6f2":"wild_m.head()","c8456391":"samp_m.head()","171f33a9":"# The super-permutation of 7 with above formula turns out to be ?\n\ndef factorial(n):\n    # Factorial of 0 is 1 (base case)\n    if n==0:\n        return 1\n    else:\n        return n*factorial(n-1)\n\ndef n_method_supermutation(n):\n    sp = 0\n    for i in range(1, n+1):\n        sp += factorial(i)\n    return sp\n\nlen_of_sp = n_method_supermutation(7)\nprint(len_of_sp)","a7990226":"# A list that contains all the 7 symbols \n\nsymbols = [x for x in perm_m['Permutation'][0]]","54443449":"symbols","9488bd1a":"best_solution = \"12345671234561723456127345612374561327456137245613742561374526137456213745612347561324756134275613472561347526134756213475612345761234516723451627345162374516234751623457162345176234512673451263745126347512634571263451726345127634512367451236475123645712364517236451273645123764512346751234657123465172346512734651243765124367512436571243651724365127436512473651246375124635712463517246351274635124763512467351426735146273514672351467325146735216473521674352167345216374521634752163457216345271634521764352176453271645327614532764153276451326745132647513264571326451732645137264531726453712645372164537261453726415372645132764531276453217645231764521376452173654217365241736521473652174365217346521736452176345216735421637542163574216354721635427163542176354216735241637524163572416352741635247163524176352416735214673512465371246531724653127465312476531246753142675314627531467253146752316475321647531264753162475316427531647253164752316745321674531267453162745316724531674253167452316754231675243167523416752314675321467531246573124651372465132746513247651324671532467135246713254671235467125346712543671524367154236715432675143267541326754312675432167543261745362174536127453617245361742536174523617453261743526174325617432651742365174263517426531742651374265173426157342617534216753421765342175634217536421753462175342617354261734526173425617342651743261574362157436125743162574312657413265741236574126357412653741265734126574312567413256741235674125367412563741256734125674312576413257614325761342576132457613254761325746132576412357641253761425376124537612543761524376154237615432761543726154376215437612534761253746125376412573641257634125764312574631257436152743615724361574236157432617543621754361275436172543617524361754236175432671543627154367215436712546371254673125476312547361524736154273615472361547326145736214576321475632147653214763521476325147632154763214576231457621345762143576214537621457361245736142573614527361457236145732614753621475361247536142753614725361475236147532614735261473256147326514723651472635147265314726513472651437265147326154736215473612547316254731265471326547123654712635471265347126543716253471625374162537146253716425371624537162543716524371654237165432716543721654371265473125647132564712356471253647125634712564372156437251643275614327564132756431275643217564327156432751643257163425176342516734251637425163472516342751634257163245176324516732451637245163274516324751632457163254716325741632571463275146327154632714563271465327146352714632571643527164357216435712643517264351276435126743512647351264375126435716243517624351672435162743516247351624375162435716423517642351674235164723516427351642375146237514263751423675142376514273651427635142765314276513427651432765142375614235761423567143256714352671435627143567214356712435617243561274356124735612437561243576124356714235617423561472356142735614237516423571643251764325167432516473251643725614372564137256431725643712564731254671324567132465713246751324615732461753246173524617325416723541762354716235476123547621354762315467231546273154623715462317564231576421356742135647213564271356421735624137562413576241356724135627413562471356241735621473562174356217345621735462173564213756421357642153746215374261537421653742156374215367421537642157364215763421576432157642315674231564723156427315642371564231756243157624315672431562743156247315624371562431756234157623415672341562734156237415623471562341756231475623174562317546321745632174653217463521746325174632157463217546312754631725463175246315724631527463152476315246731524637152463175426315742631547263154276315426731542637154263175462315746235174623571462357416235746123574621357462315476235147623541726354172365417235641723546172354167253417625314762531746253176425317624531762543176524317654231765432176543127654317265431762534172653417256341725364172534617253416725431672541367251436725134672153476215347261534721653472156347215364721534672135467213456721346572136457213654721365742136572413657214365721346752136475213674521367542136752413675214376521437562143752614375216437521463725146372154637214563721465372146357214637521436752134672513647251367425136724513672541637254167325417632541736251473625174362517346257136425713624571362547136257413625714362571346275136427513624751362745136275416327541623754126375412367541237654132765413726541376251437625134762513746251376425137624513762541376524137654213765412375641237546132754613725461375246137542613754621375461237541627354126735412763541273654127356412735461273541627534126753412765341275634127536412753461275341627543162754136275143627513462715342671354267134526713425671342657143265714236571426357142653714265731426571342675134267153427615342716534271563427153642715346271354627134562713465271364527136542713652471365274136527143652713462573146257341625734612573462157346251736425173624517362541732654173256417325461732456173246517324615372461532746153247615324167532416573214657321645731264573162457316425731645273165427316524731652743165273416527314652731645723165472316574231657243165723416572314657231645732165473216574321657342165732416537241653274165324716532417653241567321456731245637124563172456312745631247563124576312456731425637142563174256314725631427563142576314256731452637145236714532671453627145367214536712453671425367145237614523716452371465237416523746152347651234765213476523147652341765234716523476152346715234617523461572346152734615237465123746521374652317465237145623714526317452631475263145726314527631452673145627314567231456732154673215647321567432156734215673241563724156327415632471563241756324157632415367241536274153624715362417536241573624153762415326741532647153264175326415732641523764152367415236471523641752364157236415273641526374152634715263417526341572634152763415267341526437152643175264315726431527643152674315264731526413752641357261435726134572613547261357426135724613572641352761435276134527613542761352476135274613527641352674135264713526417352641\"","6f494f53":"len(best_solution)","fba77717":"# All possible permutations\n\nall_permu = [''.join(i) for i in itertools.permutations(symbols, 7)]","2ece85eb":"# Permutations that are mandatory .\n\nman_per = ['\ud83c\udf85\ud83e\udd36'+''.join(j) for j in itertools.permutations(symbols[2:], 5)]","fb20df69":"# Converting the number string to symbols .\n\nbest_sy_sol = \"\"\n\nfor x in best_solution:\n    best_sy_sol += symbols[int(x) % 7 - 1]","96d11779":"len(best_sy_sol)","28dd98e7":"indices = [len(best_sy_sol)\/\/3, (len(best_sy_sol)\/\/3)*2]","7b0ebfbb":"indices","bc8b8b73":"combos = [best_sy_sol[:indices[0]+7], best_sy_sol[indices[0]-7:indices[1]+7], best_sy_sol[indices[1]-7:]]","3f43b467":"print(f\"Length t1 = {len(combos[0])}, t2 = {len(combos[1])}, t3 = {len(combos[2])}\")","ceaafe9f":"# Now let's optimize these strings according to our rules. \n\nfor i in range(3):\n    for per in man_per:\n        if per not in combos[i]:\n            combos[i] += per","b4fd3dc6":"for j in all_permu:\n    if j not in combos[0] and j not in combos[1] and j not in combos[2]:\n        print(j)","db8fb7cf":"# Creating the submission file .\n\ndata = pd.DataFrame({'schedule': [combos[0], combos[1], combos[2]]})","d7092180":"data.to_csv('submit.csv', index=False)","69929568":"# The Problem Statement and it's Explanation\n\nFind a set of three strings containing every permutation of the seven symbols \ud83c\udf85, \ud83e\udd36, \ud83e\udd8c, \ud83e\udddd, \ud83c\udf84, \ud83c\udf81, and \ud83c\udf80 as substrings, subject to the following conditions:\n\n1) Every permutation must be in at least one string.\n\n2) Each permutation beginning with \ud83c\udf85\ud83e\udd36 must be in all three strings.\n\n3) Each string may have up to two wildcards \ud83c\udf1f, which will match any symbol in a permutation. No string of length    seven containing more than one wildcard will count as a permutation.\n\n4) Your score is the length of the longest of the three strings, with lower scores better.\n\n\n#### Now what does the above statement mean ? Let's understand the problem with a simple example (consider only 3 symbols):\n\nLet, \ud83c\udf85, \ud83e\udd36, \ud83e\udd8c be represented as 1, 2, 3 respectively . Now there can be 6 unique combinations of these symbols (numbers in our example) such as 123, 321, 213 and so on . But how 6 combinations? The answer is simply 3! (!-factorial sign, don't mistake it to be an exclaimation sign), factorial is a mathematical concept which is defined as $n! = n\\dot (n-1)\\dot (n-2)...1 \\hspace{0.25cm} Eg: 7! = 7.6.5.4.3.2.1 = 5040$ . \n\nNow we have been asked to create 3 strings (here let's say 3 number) made of these permutations , but there are certain conditions:\n\n1) There must be atleast 1 number out of these 3 numbers which has all the permutations in it , all 6 of them . Like 123132213231312321 . \n\n2) All combinations of first 2 numbers must be there in all the three numbers , which means all such unique combinations which starts with 12.., must be there in all the numbers . In our case it is only 123, but when we will start working with the whole dataset there are going to be lot more and for your string to be valid all such combinations must be there in all 3 strings . Like in our case 123 must be in all our numbers .\n\n3) Now there is a wildcard , represented by \ud83c\udf1f which gives us the independence of using any symbol (number here in example) in that place . \n\n***But the restriction is when string lenght is 7 in the original problem , we can't use more than 1 wildcard but if the string lenght is more than 7 we can use atmost 2 wildcards .***\n\n4) Our score is the length of the largest string (or number here) amongst the 3 strings that we'll be creating .\n\n\nSay considering only those 3 symbols (or numbers) the strings possible are: \n123132213231312321, 123, 12 . (This set satisfies all conditions, 1st string has all possible combinations of the numbers and also has all combinations of 12..., 2nd string has all combinations of 12.., 3rd string as well has all combinations of 12.... )\n\n**So each and every condition is satisfied** \n\nHere the score is going to be = 18 , i.e. len(123132213231312321) .\n\nBut we can write 123132213231312321 in more and more optimised ways, like say 123121321 - see this also is a valid string and satisfies all conditions , but the length is only 9 . As a result our score becomes 9 which much better than our previous score (lower the better) . **So this is the objective of this problem**  ","decde98f":"**This shows all the possible permutations , all 7! = 5040 are given here in this csv file .** ","cc52b5f9":"**Here we are just checking each of the 3 strings if it contains all the mandatory combinations of '\ud83c\udf85\ud83e\udd36', if not we just concatenate those permutations to those strings** ","360ebc7b":"**This csv contains all possible places where the wildcard can be placed, see only 1 wildcard is used in every permutation cause as the condition says any string with length 7 cannot have more than 1 wildcard .**","b9c2c67f":"The length turns out to be 5913, but still date the shortest has been found to be 5906 . So definitely the pattern does not hold . But yes, it is better than the sample file which has a length of 6985.","54af0cb9":"# Super-permutation Problem","94b3f4c6":"**distance-matrix** is a dataset which shows us the distance between two combinations say in our above example , 1 represented \ud83c\udf85 and \ud83e\udd36 represented 2 and \ud83e\udd8c was 3 , 123 and 132 has a distance of 3 , but why ? Because to get 132 from 123 we have to write all the **3** digits all over again, but the distance between 123 and 231 is 1 because inorder to get 231 from we just need to add **1** at the end of 123, (like this - 1231). \n\n**Note: Here all the diagonal elements are 0 and the upper triangle of the matrix is the same as the lower triangle . 0 indicates the distance between two same permutation is 0 , that is distance between 123 and 123 is 0 since we are not changing anything but still we get our desired output .**","92dc3598":"The best solution is the best till date , superpermutation of with 7 numbers or digits or anything less than 5906 has been found till date , so as we need **3 strings which in total would have all the permutations** , we just need to divide the best solution into 3 parts and try to add to it as needed to satisfy the given conditions . ","7536629a":"**This is a sample submission csv , where the largest string is of length 6985 and set of 3 strings which satisfies all given conditions**\n\nThe length can be checked if we make a submission using this sample_submission.csv file","136894e9":"# Data Loading","713064c2":"# The Solution","8ca3f3e7":"**Now, the sample file provided has a very basic solution, we need to optimise the same to get a better score .**\n\nNow whatever I explained in the above cells, like how to reduce the string size yet contain all permutations , that has a special name called **super-permutation**, but suprisingly see the string \"super-permutation\" can be written as su**PER**mutation . \n\n- The supermutation of 1 is 1 . length = 1\n- The supermutation of 2 is 121 Length = 3, (12 and 21, the first two digits in 121 has one permutation and the last two digit has another one.)\n- The supermutation of 3 has Length = 9 . (See the example above in the first cell)\n- The supermutation of 4 has Length = 33 . \n- The supermutation of 5 has Length = 153 .\n\nBut that's it , supermutation of 5 is the last known to us. But do you see any pattern here ?\nYeah!\n\n- 1! = 1\n- 1!+2! = 3\n- 1!+2!+3! = 9\n- 1!+2!+3!+4! = 33\n- 1!+2!+3!+4!+5! = 153\n\nBut, then super-permutation of 6 should have been 1!+2!+3!+4!+5!+6! = 873 ? But unfortunately, this didn't hold, recently someone has found the super-permutation of 6 to be **872** . ","f6c07cc1":"Let's divide the string into 3 parts using these indices but we'll slice it in such a way so that no combination misses out , because if we slice it at the indices obtained we **might break the sequence of a permutation midway**, so take a overlap , because repeatation is better than breaking sequence .","59f63303":"As discussed the best solution for super-permutation of n=7 is 5906 . Let's take that solution and optimize it .","75df71a3":"# Import Statements","e6a1e018":"**It prints nothing showing that none of the permutation has gone missing**","93b03941":"Let's check if we are missing out any permutation when all the 3 strings are taken together."}}