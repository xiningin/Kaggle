{"cell_type":{"4d25d244":"code","68960746":"code","aa1600dc":"code","285e99c3":"code","e073f8ea":"code","79d3e146":"code","d2d4deff":"code","cb8371a6":"code","d4c6273b":"code","fdad45ca":"code","8daafe79":"code","3ad10dd1":"code","336d007c":"code","d490248d":"code","225d2c09":"code","ad870f14":"code","9fe5cddd":"code","70213aed":"code","20a55950":"code","64169388":"code","2e0c124f":"code","aa5301f2":"code","402f1a48":"code","1b4426a1":"code","63f3ad0f":"code","8750603e":"code","0d2acd43":"code","18efdce1":"code","f9007b7e":"code","13278ea4":"code","e31a7b87":"code","e6e9f906":"code","c7a23519":"code","67a07c95":"code","8e3c4684":"code","f5957228":"code","4a47ce39":"code","200c98b4":"code","866a5349":"code","be83fab4":"code","5b877fed":"code","a23606a5":"code","17eea764":"code","ecc07aa3":"code","f7e06759":"code","5b9366c7":"code","7efdcd19":"code","e2af30b7":"code","cb1a03c2":"code","6306dda5":"code","4b203c59":"code","5cbff384":"code","ceb16484":"code","ed6f88fc":"markdown","4937c414":"markdown","52d9f111":"markdown","41155888":"markdown","da57cc19":"markdown","c09db8f3":"markdown","88b391a3":"markdown","e38cfaf2":"markdown","7f7e00a4":"markdown","3f0cc710":"markdown","026665fe":"markdown","244f86e8":"markdown","94136f2c":"markdown","82c61798":"markdown","896be6e4":"markdown","affcbe8f":"markdown","24d0d330":"markdown","b5b61045":"markdown","ce7027a8":"markdown","bb8c8cda":"markdown","105f63bf":"markdown"},"source":{"4d25d244":"import pandas as pd\nimport numpy as np\nimport matplotlib.pyplot as plt\nimport seaborn as sns\nsns.set(color_codes=True)\n%matplotlib inline \n","68960746":"p1gd = pd.read_csv('..\/input\/solar-power-generation-data\/Plant_1_Generation_Data.csv')\np2gd = pd.read_csv('..\/input\/solar-power-generation-data\/Plant_2_Generation_Data.csv')\np1wd = pd.read_csv('..\/input\/solar-power-generation-data\/Plant_1_Weather_Sensor_Data.csv')\np2wd = pd.read_csv('..\/input\/solar-power-generation-data\/Plant_2_Weather_Sensor_Data.csv')","aa1600dc":"#p1gd.tail(10)\np1gd.head()\n ","285e99c3":"p2gd.head()","e073f8ea":"p1wd.head()\n","79d3e146":"p2wd.head()","d2d4deff":"#p1gd.shape\n#p1wd.shape\n#p2gd.shape\np2wd.shape","cb8371a6":"p1gd.describe()","d4c6273b":"p1wd.describe()","fdad45ca":"p2gd.describe()","8daafe79":"p2wd.describe()","3ad10dd1":"p1gd.info()","336d007c":"p1wd.info()","d490248d":"p2gd.info()","225d2c09":"p2wd.info()","ad870f14":"p1wd.isnull().sum()\n\n#There is no missing value in Plant-1 weather data.","9fe5cddd":"p1gd.isnull().sum()\n\n#There is no missing value in Plant-1 generation data","70213aed":"p2wd.isnull().sum()\n\n#There is no missing value in Plant-2 weather data.","20a55950":"p2gd.isnull().sum()\n\n#There is no missing value in Plant-2 weather data.","64169388":"p2gd['SOURCE_KEY'].unique()\n","2e0c124f":"len(p2gd['SOURCE_KEY'].unique())","aa5301f2":"p2wd['SOURCE_KEY'].unique()","402f1a48":"p2gd['PLANT_ID'].unique()","1b4426a1":"p2wd['PLANT_ID'].unique()","63f3ad0f":"#Converting DATE_TIME into datetime format\n\np2gd['DATE_TIME'] = pd.to_datetime(p2gd['DATE_TIME'],format = '%Y-%m-%d %H:%M')\np2wd['DATE_TIME'] = pd.to_datetime(p2wd['DATE_TIME'],format = '%Y-%m-%d %H:%M')","8750603e":"# Splitting date and time in separate columns \n\np2gd['DATE'] = p2gd['DATE_TIME'].apply(lambda x:x.date())\np2gd['TIME'] = p2gd['DATE_TIME'].apply(lambda x:x.time())\np2wd['DATE'] = p2wd['DATE_TIME'].apply(lambda x:x.date())\np2wd['TIME'] = p2wd['DATE_TIME'].apply(lambda x:x.time())","0d2acd43":"p2gd.tail()","18efdce1":"#Let us check DAILY_YIELD data with time of the day.\np2gd_time_grp = p2gd.groupby(['TIME']).sum()\np2gd_time_grp","f9007b7e":"\np2gd_time_grp['DAILY_YIELD'].plot(figsize=(20,5))\nplt.title('Total 34 day Plant-2 Yield with time of the day')\nplt.ylabel('Yield in kWHr')","13278ea4":"\np2_dc_pwr = p2gd.copy()\np2_dc_pwr = p2_dc_pwr.groupby(['TIME','SOURCE_KEY'])['DC_POWER'].mean().unstack()\n\nfig,ax=plt.subplots(ncols=3,nrows=1,dpi=200,figsize=(20,5))\nax[0].set_title('DC Power Generation to 1st 7 Inverters')\nax[1].set_title('DC Power Generation to next 8 Inverters')\nax[2].set_title('DC Power Generation to last 7 Inverters')\nax[0].set_ylabel('DC POWER in kW')\n\n\np2_dc_pwr.iloc[:,0:7].plot(ax=ax[0],linewidth = 5)\np2_dc_pwr.iloc[:,7:15].plot(ax=ax[1],linewidth = 5)\np2_dc_pwr.iloc[:,15:22].plot(ax=ax[2],linewidth = 5)","e31a7b87":"\np2gd_Inv_grp = p2gd.groupby(['SOURCE_KEY']).mean()\np2gd_Inv_grp['Inv_Efficiency']= p2gd_Inv_grp['AC_POWER']*100\/p2gd_Inv_grp['DC_POWER']\n\np2gd_Inv_grp['Inv_Efficiency'].plot(figsize=(15,5), style='o--')\nplt.axhline(p2gd_Inv_grp['Inv_Efficiency'].mean(),linestyle='--',color='green')\nplt.title('Inverter Efficiency Plot', size=20)\nplt.ylabel('% Efficiency')","e6e9f906":"\n\np2gd_Inv_tyld = p2gd.groupby(['SOURCE_KEY']).max()\n\np2gd_Inv_tyld['TOTAL_YIELD'].plot(figsize=(15,5), style='o--')\nplt.axhline(p2gd_Inv_tyld['TOTAL_YIELD'].mean(),linestyle='--',color='green')\nplt.title('Total Yield Plot', size=20)\nplt.ylabel('Total Yield till 17th June 2020')","c7a23519":"\n\np2_ac_pwr = p2gd.copy()\np2_ac_pwr = p2_ac_pwr.groupby(['TIME','DATE'])['AC_POWER'].sum().unstack()\n\nfig,ax=plt.subplots(ncols=3,nrows=3,dpi=200,figsize=(20,20))\nax[0,0].set_title('Plant-2 Output Day-1 to 4')\nax[0,1].set_title('Plant-2 Output Day-5 to 8')\nax[0,2].set_title('Plant-2 Output Day-9 to 12')\nax[1,0].set_title('Plant-2 Output Day-13 to 16')\nax[1,1].set_title('Plant-2 Output Day-17 to 20')\nax[1,2].set_title('Plant-2 Output Day-21 to 24')\nax[2,0].set_title('Plant-2 Output Day-25 to 28')\nax[2,1].set_title('Plant-2 Output Day-29 to 32')\nax[2,2].set_title('Plant-2 Output Day-33 to 34')\n\nax[0,0].set_ylabel('AC Power Output in kW')\nax[1,0].set_ylabel('AC Power Output in kW')\nax[2,0].set_ylabel('AC Power Output in kW')\n    \np2_ac_pwr.iloc[:,0:4].plot(ax=ax[0,0], linewidth = 2)\np2_ac_pwr.iloc[:,4:8].plot(ax=ax[0,1], linewidth = 2)\np2_ac_pwr.iloc[:,8:12].plot(ax=ax[0,2], linewidth = 2)\np2_ac_pwr.iloc[:,12:16].plot(ax=ax[1,0], linewidth = 2)\np2_ac_pwr.iloc[:,16:20].plot(ax=ax[1,1], linewidth = 2)\np2_ac_pwr.iloc[:,20:24].plot(ax=ax[1,2], linewidth = 2)\np2_ac_pwr.iloc[:,24:28].plot(ax=ax[2,0], linewidth = 2)\np2_ac_pwr.iloc[:,28:32].plot(ax=ax[2,1], linewidth = 2)\np2_ac_pwr.iloc[:,32:].plot(ax=ax[2,2], linewidth = 2)\n","67a07c95":"\np2gd_DT = p2gd.groupby(['DATE_TIME'],as_index=False).sum()\np2gd_DT","8e3c4684":"#Retaining relevant data\np2gd_DT_Select = p2gd_DT[['DATE_TIME','DC_POWER','AC_POWER','DAILY_YIELD']]\np2gd_DT_Select","f5957228":"#Retaining relevant data\np2wd_drp = p2wd.drop(['PLANT_ID', 'SOURCE_KEY'], axis=1)","4a47ce39":"p2wd_drp","200c98b4":"\nmerged_data = pd.merge(p2gd_DT_Select, p2wd_drp, how='inner', on='DATE_TIME')","866a5349":"merged_data.iloc[25:35]","be83fab4":"\nsns.pairplot(merged_data[['DC_POWER','AC_POWER','DAILY_YIELD','AMBIENT_TEMPERATURE','MODULE_TEMPERATURE','IRRADIATION']])","5b877fed":"\nmerged_data_Irr = merged_data.copy()\nmerged_data_Irr_t = merged_data_Irr.groupby(['TIME']).mean()\n\nfig,ax=plt.subplots(ncols=2,nrows=2,dpi=200,figsize=(15,5))\nmerged_data_Irr_t['IRRADIATION'].plot(ax=ax[0,0])\nmerged_data_Irr_t['AMBIENT_TEMPERATURE'].plot(ax=ax[0,1])\nmerged_data_Irr_t['MODULE_TEMPERATURE'].plot(ax=ax[1,0])\nmerged_data_Irr_t['DC_POWER'].plot(ax=ax[1,1])\n\nax[0,0].set_ylabel('IRRADIATION')\nax[0,1].set_ylabel('AMBIENT TEMPERATURE')\nax[1,0].set_ylabel('MODULE TEMPERATURE')\nax[1,1].set_ylabel('DC POWER')","a23606a5":"\nmerged_data_num = merged_data[['DC_POWER','AC_POWER','DAILY_YIELD','AMBIENT_TEMPERATURE','MODULE_TEMPERATURE','IRRADIATION']]\ncorr = merged_data_num.corr()\n\nfig_dims = (2, 2) \nsns.heatmap(round(corr,2), annot=True, mask=(np.triu(corr,+1)))","17eea764":"\ndata_reg = merged_data[['AC_POWER','IRRADIATION','AMBIENT_TEMPERATURE']] ","ecc07aa3":"\nfrom sklearn import datasets, linear_model\nfrom sklearn.model_selection import train_test_split\n","f7e06759":"y= data_reg['AC_POWER']\nX=data_reg[['IRRADIATION','AMBIENT_TEMPERATURE']]","5b9366c7":"X_train, X_test, y_train, y_test = train_test_split(X, y, test_size=0.2, random_state=5)","7efdcd19":"print(X_train.shape, y_train.shape)\nprint(X_test.shape, y_test.shape)","e2af30b7":"lm = linear_model.LinearRegression()\nmodel = lm.fit(X_train, y_train)\npred_y_train = lm.predict(X_train)\npred_y_test = lm.predict(X_test)","cb1a03c2":"#plt.scatter(y_test, predictions)","6306dda5":"from sklearn.metrics import r2_score, mean_squared_error","4b203c59":"#Model Evaluation on Training data\n\nR2_train = r2_score(y_train, pred_y_train)\nmse_train = mean_squared_error(y_train, pred_y_train)\nprint('R2 for Train dataset:', R2_train, '  '   'MSE for Train dataset:', mse_train)\n\n","5cbff384":"#Model Evaluation on Testing data\n\nR2_test = r2_score(y_test, pred_y_test)\nmse_test = mean_squared_error(y_test, pred_y_test)\nprint('R2 for Test dataset:', R2_test, '  '   'MSE for Test dataset:', mse_test)\n","ceb16484":"\nprint('Slope:' ,model.coef_)\nprint('Intercept:', model.intercept_)","ed6f88fc":"### Checking the AC POWER Output of the entire Solar Power Plant (Plant-2)\n* Maximum Power evacuation from Plant-2 has touched upto 25-26 MW.\n* AC Power output from the plant is available during day time only as expected due to availability of Sunlight.\n* Fluctuation in power during day hours could be due to cloud\/ other shadow\/ Faulty Solar Panels or other equipments. \n* Some cutoff is observed in the AC Power output e.g. on 19.05.2020. This could be due to some fault in evacuation side and Grid disconnection.\n","4937c414":"### Predicting AC POWER using Regression:\nData for Regression-\nAC Power generation of the plant will certainly depend on Irradiation, Ambient Temperature and Module Temperature. Howevere, to predict the AC Power we will have the Weather Forecast data (i.e. Irradiation and Ambient Temperature) only. \nAlso, Module temperature is dependent on Ambient Temperature and Irradiation as is evident from Heatmap also.\nHence, we are using Irradiation and Ambient Temperature only to predict AC Power output of the plant.\n","52d9f111":"### Linear Regression Model Validity and Interpretation \nR2 value of Train and Test Datasets are almost equal. Model is valid and approx. 83% of AC Power variation is explained by Irradiation and Ambient Temperature. \nAC Power generation is also dependent on Module surface cleanliness and faulty Modules\/Inverters etc.\n\nAC Power output is highly dependent on Irradition.\nWith 1 unit increase in Irradiation, AC Power output increases by approx 17.5MW\nWith 1 deg increase in Ambient Temperature AC Power output increases by 120 kW. \n","41155888":"# Let us do further analysis of Plant-2 Data only:","da57cc19":"### Daily\/Total Energy Yield\n* There is some unusual observation in the data as DAILY_YIELD should start increasing from Sunrise till Sunset and remain constatnt till midnight. Again reset to zero after midnight. Night time yield could be due to Battery Storage which is a matter of real time study of the plant. However, for the current project we will continue our analysis with the same data. \n\n* Total Energy Yield from the plant-2 during entire 34 days given period is approx. 4000,000 kWHr = 4 Mega Units of electricity \n\n","c09db8f3":"### Effect of Time of the Day\n\nWe can observe from the plots how on an average Irradiation, Ambient Temperature, Module Temperature and DC Power first increases and then decreases from sunrise to sunset. \n\nWe can also observe that DC Power (and hence the AC Power output of the plant) attains a maximum value remains almost constant for sometime during peak Irradiation and then decreases. This is because","88b391a3":"# PV Solar Power Plant: \nPhoto Voltaic Solar Power has emerged as the best source of green energy in recent past in a country like India which gets a good amount of solar insolation. With the continuous development of efficient PV modules, Battery storage and Smart Grid etc. Power Generation through PV Solar Plant has gained the momentum further and has a very promising future.   \n\n![solar%201.jpg](attachment:solar%201.jpg)\n\nThe above picture shows a typical structure of a solar power plant. \nSunlight falls on PV modules, generates DC Power which is fed to the Inverters (through some Junction Box and String Monitoring Box), Inverters convert DC Power to AC Power, AC Power is stepped up through Transformers to match Grid Voltage and finally fed to the Grid through some Switchgear. \n\n### The Challanges - \n1. Unlike conventional coal or gas based power plants, Solar Power Plants output are available during day time only and highly variable depending upon the availability of Sunlight.\n2. Power generated has to be consumed instantly in the absence of a power storage (Battery storage is still emerging....)\n3. Spread over a large area, should be shadow free. \n4. Regular cleaning of PV modules and physical fault detection in the field side.\n\nWe have at hand solar power generation data and weather data of two plants. Let's explore the given data, draw some insights, try to meet our challenges and predict\/forecast the plant output to the extent possible which can be used for a better Grid Management\/Stability. ","e38cfaf2":"### Plant-2\n\n#### Generation Data\n* Minimum DC and AC Power generation is 0kW when there is no Sun Light\/Irradiation. \n* Maximum DC Power generation is 1420.93 kW associated with 1 SOURCE_KEY\/Inverter. \n* Maximum Daily Yield per Inverter is 9873 kWHr. \n\n#### Weather Data\n* Ambient temperature varies between 20.9 to 39.2 deg C. \n* Module temperature varies between 20.3 to 66.6 deg C.\n* Maximum Irradiation is 1.098 kWhr\/Sq Mtr","7f7e00a4":"### Inverters Yield\nLet's check the Total Yield of each Inverter- \nInverter Nos. 1,4,5,7-9,12,14,18-22 have significantly less Total Yield (Energy Output) compared to other inverters. \nThis may be because of the following reasons-\n\n1. These Inverters may have started their operation at a later date\n1. Faulty Solar Modules or Circuits including inverters and\/or dusty Solar Module surfaces\n1. Shadow on Solar Modules from nearby objects or structures. \n\nNote that We have already seen in DC Power Plot that Inverters 4,12 and 19 are receiving less DC Power.   \n\n","3f0cc710":"## Insights-Plant Equipment   \n* There are 22 Inverters in Plant-2\n* There is only one Weather Monitoring Unit in Plant-2\n* The datasets contain the data of plant-2 only\n","026665fe":"### Missing Value Check\n\nThere is no missing value in the datasets.","244f86e8":"### Conclusion\nPower Generation Data and Weather Sensor Data can be used to evaluate the performance of a Solar Power Plant, to detect faulty circuit or equipments \/ Modules and to identify the need of module cleaning etc.\n\nUsing the Weather forecast data (Irradiation and Ambient Temperature), AC Power output of the plant can be predicted with a good accuracy. This helps in an effective Grid Management and saves the society from an unwanted Voltage Fluctuation and Power outage.  ","94136f2c":"## Let us Merge the Generation and Weather data\nDC_POWER, AC_POWER and DAILY_YIELD in merged_data are for the entire plant (Plant-2)","82c61798":"### Some Insights from Generation and Weather data combined \nEach point in the pair plot corresponds to a particular Date and Time- \n* DC_POWER and AC_POWER are perfactly linearly related. \n* DC_Power and AC_Power generated has a direct relationship with Irradiation. Few points where Irradiation is high but DC_Power\/AC_Power is very less or even zero, may be due to some Solar Module, SMB, Inverter etc failure or fault in the circuit including fault in power evacuation side.\n* Generally Module temperature increases with the increase in Ambient temperature and Irradiation. ","896be6e4":"## Insights-Power\/Energy Generation","affcbe8f":"### Let us observe the correlation among variables - \n* As expected DC_POWER and AC_POWER are directly correlated. \n* DC Power generation is highly positively correlated with Irradiation, Module Temperature and Ambient Temperature.\n* However, it should not be concluded here that DC Power generation increases with increase in Module Temperature as we know the fact that Solar Module efficiency decreases with increase in temperature. This anamoly is because of one more fact that Module Temperature and Ambient Temperature increases with the increase in Irradiation which is the cause of power generation from Solar Photovoltaic Modules.\n* DAILY_YIELD is slightly negatively correlated with DC_POWER and IRRADIATION which not as per our expectation. This peculiar behaviour of DAILY_YIELD has already been discussed in above section.\n","24d0d330":"## Prediction\/Forecast of AC Power Output of the Plant\nFor a given Solar Power Plant the AC Power output will depend on Solar Irradiation, Ambient Temperature and Module Temperature provided all equipments are in healthy condition. \nUsing Time Series Forecast methods can certainly forecast the next few days AC Power output of the plant. However, it will be more accurate to predict the AC Power output using Weather forecast data from a reliable source and using Regression methods.    ","b5b61045":"### Plant-1 \n\n#### Generation Data\n* It seems AC Power and DC Power are not in the same Unit of Power. Because Generally the Inverter efficiency (ACPower\/DC Power) is more than 95%, which is not the case here.  \n\n#### Weather Data\n* Ambient temperature varies between 20.4 to 35.3 deg C. \n* Module temperature varies between 18 to 65.5 deg C.\n* Maximum Irradiation is 1.22 kWhr\/Sq Mtr","ce7027a8":"## Plant-1 and Plant-2 data\nWe assume that each \"SOURCE_KEY\" is the Inverter or Power Conditioning Unit in Generation_Data and \"SOURCE_KEY\" in Weather_Sensor_Data is the Weather Monitoring Unit which is located at an optimal place in the Solar Power plants. \n\nGeneration and Weather Sensor data are recorded at a regular interval of 15 Minutes. \n","bb8c8cda":"### Inverter Efficiency \n* Inverter Efficiency plot shows that efficiency of inverters lies between 97.76% to 97.92% with an average efficiency of 97.80%\n* Inverters are operating with a satisfactory level of efficiency.\n\n","105f63bf":"### DC power generation from Solar Panels to particular Inverters - \nFrom the DC Power Generation plot it is clear that substantially low DC Power is coming to Inverters \"Et9kgGMDl729KT4\", \"LYwnQax7tkwH5Cb\", \"Quc1TzYxW2pYoWX\" and \"rrq4fwE8jgrTyWY\"\n\nHence,Solar Modules connected to these Inverters are recommended to be cleaned, observed for any shadow coming from nearby objects.\nAlso, these Solar Modules and\/or Strings are to be checked for any fault. \n"}}