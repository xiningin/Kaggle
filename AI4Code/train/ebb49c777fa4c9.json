{"cell_type":{"c6c4ecfa":"code","283db11f":"code","becaf946":"code","12ca9102":"code","4753ed02":"code","3a0184c7":"code","aa30d894":"code","0ebe783a":"code","1af9a925":"code","056ec723":"code","9e2a6981":"markdown","2590d1a7":"markdown","c39a611a":"markdown","d8a115c8":"markdown","2d2a36af":"markdown","884d3675":"markdown","0adf3e6d":"markdown","33d52392":"markdown","a46ef47e":"markdown","da26b199":"markdown","f8c640e8":"markdown","ef442acb":"markdown","ab99d67f":"markdown","b5d82c63":"markdown","3b6949ed":"markdown","ef8cb322":"markdown","92921b54":"markdown"},"source":{"c6c4ecfa":"import pandas as pd\nimport matplotlib.pyplot as plt\nimport matplotlib.font_manager as fm\nfrom matplotlib.offsetbox import TextArea, DrawingArea, OffsetImage, AnnotationBbox\nimport matplotlib.image as mpimg\nfont = fm.FontProperties(fname='..\/input\/staatfont\/Staatliches-Regular.ttf')\ndata = pd.read_csv(\"..\/input\/the-most-expensive-football-transfers\/football_players.csv\")","283db11f":"data.info()","becaf946":"data.columns = ['Rank', 'Origin', 'Player', 'From_Country', 'From_Club',\n       'To_Country', 'To_Club', 'Position', 'Fee_\u20ac mln','Fee_\u00a3 mln','Year', 'Born']\n\ndata['Position'] = data['Position'].apply(lambda x : x if x!='Striker' else 'Forward')\nposition = pd.DataFrame(data.groupby('Position')['Fee_\u20ac mln'].mean())\nposition = position.sort_values('Fee_\u20ac mln', axis=0,ascending=True)\neach_position_count = data['Position'].value_counts()\n\nfig = plt.figure(figsize=(20,8))\nplt.barh(width=position['Fee_\u20ac mln'], y=position.index,height=0.7, color = ['#D3B9DF','#90DAE0','#E0A479','#CAE084'])\nfor i in range(len(position)):\n    plt.text(s = f\"{position.index[i]} ({each_position_count[i*-1 +3]})\", x=round(position['Fee_\u20ac mln'][i]-1,2), y=i ,font = font, fontsize=30,va='center',ha='right')\n    plt.text(s = f\"{round(position['Fee_\u20ac mln'][i],2)} \u20ac mln\", x=round(position['Fee_\u20ac mln'][i]+1,2), y=i ,font = font, fontsize=30,va='center',ha='left')\n\nplt.title(\"average of player trade price (Top 50)\",font=font, fontsize=50)\nplt.axis('off')\nplt.show()","12ca9102":"forward = data[data['Position'] == 'Forward'].head(3).reset_index(drop=True)\nmid = data[data['Position'] == 'Midfielder'].head(3).reset_index(drop=True)\ndefend = data[data['Position'] == 'Defender'].head(3).reset_index(drop=True)\ngoalkeeper = data[data['Position'] == 'Goalkeeper'].head(3).reset_index(drop=True)\n\nfig, ax = plt.subplots(figsize=(22,12), facecolor=\"w\")\nplt.bar(x= [0,1,2], height=forward['Fee_\u20ac mln'], color ='#D3B9DF')\nplt.bar(x= [3.5,4.5,5.5], height=mid['Fee_\u20ac mln'], color='#90DAE0')\nplt.bar(x= [7,8,9], height=defend['Fee_\u20ac mln'], color ='#E0A479')\nplt.bar(x= [10.5,11.5], height=goalkeeper['Fee_\u20ac mln'], color ='#CAE084')\n\nax.axvspan(xmin = -0.5,xmax= 2.5, ymax= 0.95, fc='#D3B9DF', alpha=0.2)\nax.axvspan(xmin = 3,xmax= 6, ymax= 0.95, fc='#90DAE0', alpha=0.2)\nax.axvspan(xmin = 6.5,xmax= 9.5, ymax= 0.95, fc='#E0A479', alpha=0.2)\nax.axvspan(xmin = 10,xmax= 12, ymax= 0.95, fc='#CAE084', alpha=0.2)\n\nfor i in range(len(forward)):\n    plt.text(s = forward.loc[i,'Player'], x= i, y= forward.loc[i,'Fee_\u20ac mln']+5, va='center', ha='center',font=font, fontsize= 18)\n    plt.text(s = f\"{round(forward.loc[i,'Fee_\u20ac mln'])} \u20ac mln\", x= i, y= forward.loc[i,'Fee_\u20ac mln']-3, va='center', ha='center',font=font, fontsize= 23)\n    \n    plt.text(s = mid.loc[i,'Player'], x= i+3.5, y= mid.loc[i,'Fee_\u20ac mln']+5, va='center', ha='center',font=font, fontsize= 18)\n    plt.text(s = f\"{round(mid.loc[i,'Fee_\u20ac mln'])} \u20ac mln\", x= i+3.5, y= mid.loc[i,'Fee_\u20ac mln']-3, va='center', ha='center',font=font, fontsize= 23)\n    \n    plt.text(s = defend.loc[i,'Player'], x= i+7, y= defend.loc[i,'Fee_\u20ac mln']+5, va='center', ha='center',font=font, fontsize= 16)\n    plt.text(s = f\"{round(defend.loc[i,'Fee_\u20ac mln'])} \u20ac mln\", x= i+7, y= defend.loc[i,'Fee_\u20ac mln']-3, va='center', ha='center',font=font, fontsize= 23)\n    \n    if i ==2:\n        break\n    plt.text(s = goalkeeper.loc[i,'Player'], x= i+10.5, y= goalkeeper.loc[i,'Fee_\u20ac mln']+5, va='center', ha='center',font=font, fontsize= 18)\n    plt.text(s = f\"{round(goalkeeper.loc[i,'Fee_\u20ac mln'])} \u20ac mln\", x= i+10.5, y= goalkeeper.loc[i,'Fee_\u20ac mln']-3, va='center', ha='center',font=font, fontsize= 23)\n\nplt.text(s = \"forward\", x= 1, y= 235, va='center', ha='center',font=font, fontsize= 30,color ='#D3B9DF')\nplt.text(s = \"Midfielder\", x= 4.5, y= 235, va='center', ha='center',font=font, fontsize= 30, color='#90DAE0')\nplt.text(s = \"Defender\", x= 8, y= 235, va='center', ha='center',font=font, fontsize= 30, color ='#E0A479')\nplt.text(s = \"Goalkeeper\", x= 11, y= 235, va='center', ha='center',font=font, fontsize= 30, color ='#CAE084')\n\nplt.ylim(50,240)\nplt.axis('off')\nplt.show()","4753ed02":"def make_img(img,zoom, x, y):\n    img = mpimg.imread(img)\n    imagebox = OffsetImage(img, zoom=zoom)\n    ab = AnnotationBbox(imagebox, (x,y),frameon=False)\n    ax.add_artist(ab)\n\nforward = data[data['Position'] == 'Forward'].head(3).reset_index(drop=True)\nmid = data[data['Position'] == 'Midfielder'].head(3).reset_index(drop=True)\ndefend = data[data['Position'] == 'Defender'].head(3).reset_index(drop=True)\ngoalkeeper = data[data['Position'] == 'Goalkeeper'].head(3).reset_index(drop=True)\n\nfig, ax = plt.subplots(figsize=(22,12), facecolor=\"w\")\nax.axvspan(xmin = 0,xmax= 4, ymax= 1, fc='#D3B9DF', alpha=0.2)\nax.axvspan(xmin = 4,xmax= 8, ymax= 1, fc='#90DAE0', alpha=0.2)\nax.axvspan(xmin = 8,xmax= 12, ymax= 1, fc='#E0A479', alpha=0.2)\nax.axvspan(xmin = 12,xmax= 16, ymax= 1, fc='#CAE084', alpha=0.2)\n\nmake_img('..\/input\/football-player\/player\/neymar.jpg', 0.9, 2, 0.7)\nmake_img('..\/input\/football-player\/player\/psg.png', 1, 2, 0.2)\nmake_img('..\/input\/football-player\/player\/Coutinho.jpg', 0.9, 6, 0.7)\nmake_img('..\/input\/football-player\/player\/barcelona.png', 1, 6, 0.2)\nmake_img('..\/input\/football-player\/player\/Maguire.jpg', 1, 10, 0.7)\nmake_img('..\/input\/football-player\/player\/manchester.png', 1.8, 10, 0.2)\nmake_img('..\/input\/football-player\/player\/kepa.jpg', 1, 14, 0.7)\nmake_img('..\/input\/football-player\/player\/chelsea.png', 1, 14, 0.2)\n\nplt.text(s = forward.loc[0,'Player'], x= 2, y= 1, va='center', ha='center',font=font, fontsize= 30)\nplt.text(s = mid.loc[0,'Player'], x= 6, y=  1, va='center', ha='center',font=font, fontsize= 30)\nplt.text(s = defend.loc[0,'Player'], x= 10, y=  1, va='center', ha='center',font=font, fontsize= 30)\nplt.text(s = goalkeeper.loc[0,'Player'], x= 14, y=  1, va='center', ha='center',font=font, fontsize= 30)\n\nplt.text(s = f\"{round(forward.loc[0,'Fee_\u20ac mln'])} \u20ac mln\", x= 2, y= 0.95, va='center', ha='center',font=font, fontsize= 23)\nplt.text(s = f\"{round(mid.loc[0,'Fee_\u20ac mln'])} \u20ac mln\", x= 6, y= 0.95, va='center', ha='center',font=font, fontsize= 23)\nplt.text(s = f\"{round(defend.loc[0,'Fee_\u20ac mln'])} \u20ac mln\", x= 10, y= 0.95, va='center', ha='center',font=font, fontsize= 23)\nplt.text(s = f\"{round(goalkeeper.loc[0,'Fee_\u20ac mln'])} \u20ac mln\", x= 14, y= 0.95, va='center', ha='center',font=font, fontsize= 23)\n\n\n\nplt.text(s = \"forward\", x= 2, y= 0.4, va='center', ha='center',font=font, fontsize= 30,color ='#D3B9DF')\nplt.text(s = \"Midfielder\", x= 6, y= 0.4, va='center', ha='center',font=font, fontsize= 30, color='#90DAE0')\nplt.text(s = \"Defender\", x= 10, y= 0.4, va='center', ha='center',font=font, fontsize= 30, color ='#E0A479')\nplt.text(s = \"Goalkeeper\", x= 14, y= 0.4, va='center', ha='center',font=font, fontsize= 30, color ='#CAE084')\n\nplt.axis('off')\nplt.show()","3a0184c7":"many_club_all = data['To_Club'].value_counts()\nmany_club = pd.DataFrame(many_club_all[:10]).reset_index()\nmany_club.columns = ['team', 'count']\n\ncolor = ['#F7A8A5', '#F7A8A5']\ncolor += ['#F5EEED']*8\nplt.figure(figsize=(25,8))\nplt.bar(x=many_club['team'], height = many_club['count'],width=0.7,color =color)\nplt.xticks(font=font,fontsize=20,rotation=350)\nplt.yticks(font=font,fontsize=20)\n\nfor i in range(len(many_club)):\n    plt.text(s= f\"{many_club.loc[i,'count']} times\", x= i, y=many_club.loc[i,'count'],va='bottom', ha='center',font=font, fontsize=23)\n    \nplt.gca().spines['right'].set_visible(False)\nplt.gca().spines['top'].set_visible(False)\nplt.title(\"The expensive Recruitment of players count\", font=font, fontsize=30)\nplt.show()","aa30d894":"many_club_sale_all = data['From_Club'].value_counts()\nmany_club_sale = pd.DataFrame(many_club_sale_all[:10]).reset_index()\nmany_club_sale.columns = ['team', 'count']\n\ncolor = ['#32A4E6']*3\ncolor += ['#ABCDE0']*7\nplt.figure(figsize=(25,8))\nplt.bar(x=many_club_sale['team'], height = many_club_sale['count'],width=0.7,color =color)\nplt.xticks(font=font,fontsize=20,rotation=350)\nplt.yticks(font=font,fontsize=20)\n\nfor i in range(len(many_club_sale)):\n    plt.text(s= f\"{many_club_sale.loc[i,'count']} times\", x= i, y=many_club_sale.loc[i,'count'],va='bottom', ha='center',font=font, fontsize=23)\n    \nplt.gca().spines['right'].set_visible(False)\nplt.gca().spines['top'].set_visible(False)\nplt.title(\"The expensive sales of players count\", font=font, fontsize=30)\nplt.show()","0ebe783a":"many_club_all = pd.DataFrame(many_club_all).reset_index()\nmany_club_sale_all = pd.DataFrame(many_club_sale_all).reset_index()\ntmp = many_club_all.set_index('index').join(many_club_sale_all.set_index('index'))\ntmp = tmp.fillna(0)\ntmp['sum'] = tmp['To_Club'] -tmp['From_Club']\ntmp = tmp.reset_index()\ntmp = tmp.sort_values(by='sum').reset_index(drop=True)\n\nfig, axes = plt.subplots(figsize=(20,13), facecolor=\"w\")\nplt.barh(width=tmp['To_Club'], y = tmp['index'],alpha= 0.5, color = '#F5EEED')\nplt.barh(width=tmp['From_Club']*-1, y = tmp['index'], alpha=0.5, color = '#ABCDE0')\nplt.barh(width=tmp['sum'], y = tmp['index'], alpha=0.9, color ='#FA64F3')\n\nfor i in range(len(tmp)):\n    if tmp.loc[i,'sum'] > 0:\n        plt.text(s=f\"{tmp.loc[i,'index']}\", x=tmp.loc[i,'sum']-0.1, y=i,font=font, fontsize=18,va='center',ha='right')\n        plt.text(s=f\"{tmp.loc[i,'sum']} times\", x=tmp.loc[i,'sum']+0.1, y=i,font=font, fontsize=18,va='center',ha='left')\n\n    elif tmp.loc[i,'sum'] < 0:\n        plt.text(s=f\"{tmp.loc[i,'index']}\", x=tmp.loc[i,'sum']+0.1, y=i,font=font, fontsize=18,va='center',ha='left')\n        plt.text(s=f\"{tmp.loc[i,'sum']} times\", x=tmp.loc[i,'sum']-0.1, y=i,font=font, fontsize=18,va='center',ha='right')\n\n    else:\n        plt.text(s=f\"{tmp.loc[i,'index']}\", x=tmp.loc[i,'sum'], y=i,font=font, fontsize=18,va='center',ha='center')\n\nplt.title('The expensive player trade team', font=font, fontsize=40)\nplt.axis('off')\nplt.show()","1af9a925":"country = data['Origin'].value_counts()\ncountry = pd.DataFrame(country[country > 1]).reset_index()\ncountry.columns= ['country','count']\ncolor = ['#26AD1F', '#4EFA46','#4EFA46']\ncolor += ['#D4FFC5']*7\nplt.figure(figsize=(25,8))\nplt.bar(x=country['country'], height = country['count'],width=0.7,color =color,alpha=0.8)\nplt.xticks(font=font,fontsize=20)\nplt.yticks(font=font,fontsize=20)\n\nfor i in range(len(country)):\n    plt.text(s= f\"{country.loc[i,'count']} times\", x= i, y=country.loc[i,'count'],va='bottom', ha='center',font=font, fontsize=23)\n    \nplt.gca().spines['right'].set_visible(False)\nplt.gca().spines['top'].set_visible(False)\nplt.title(\"The expensive trade player's country\", font=font, fontsize=30)\nplt.show()","056ec723":"france = data[data['Origin'] =='France'].reset_index(drop=True)\nfig = plt.figure(figsize=(15,10))\ncolor = ['#FAE5B6','#C3FAE3','#FACEAA','#91B4FA','#C3FAE3','#FAAC9D','#FAE5B6','#FAE5B6','#C3FAE3']\nplt.axhline(0,color='pink',lw=8,zorder=1)\nplt.scatter(x=france['Year'], y=list([0]* 9),s=400,zorder=2,color = color)\nplt.plot([2001,2001],[0,1],color = '#FAAC9D')\nplt.plot([2016,2016],[0,-1],color = '#FACEAA')\nplt.plot([2017,2017],[0,-2],color = '#91B4FA')\nplt.plot([2018,2018],[0,3],color = '#FAE5B6')\nplt.plot([2019,2019],[0,-3],color = '#C3FAE3')\ncolor = ['#FAAC9D', '#FACEAA','#91B4FA','#FAE5B6','#FAE5B6','#FAE5B6','#C3FAE3','#C3FAE3','#C3FAE3']\nplt.scatter([2001,2016,2017,2018,2018,2018,2019,2019,2019],[1,-1,-2,1,2,3,-1,-2,-3],s=400,color = color)\ni = [5,2,3,0,6,7,1,4,8]\ny = [1,-1,-2,1,2,3,-1,-2,-3]\nposition = ['left','right','right','left','left','left','left','left','left']\nfor j in range(9):\n    if position[j] > 'left':\n        x = france.loc[i[j],'Year'] -0.4\n    else:\n        x = france.loc[i[j],'Year'] +0.4\n    plt.text(s=f\"{france.loc[i[j],'Player']} ({france.loc[i[j],'Year']}) : {france.loc[i[j],'Fee_\u20ac mln']} \u20ac mln\" , x=x, y=y[j],font=font, fontsize=20,va='center',ha=position[j])\nplt.text(s=\"Big Deal of French Nationals\", x=2003, y=2, font=font, fontsize=50,color='pink')\n\nplt.axis('off')\nfig.show()","9e2a6981":"### If you see this chart, you can feel forward position is the most price position and Goalkeeper position is the lowest position. But it's only 2 players","2590d1a7":"### France is the country that the most trade player's country","c39a611a":"### Thank you to watch my work. I always welcome your comments ! \n\n![](https:\/\/www.aim.com.au\/sites\/aim\/files\/field\/image\/AIM-Blog-Why-Thank-You-Matters-More-Than-Money-New.jpg)","d8a115c8":"#### If you see the bar chart, Real Madrid and Manchester city are the most trade clubs.","2d2a36af":"### You can feel that each position's price gap\n### Look the forward position. Neymar records the best expensive price.","884d3675":"<div style=\"color:white;\n           display:fill;\n           border-radius:5px;\n           background-color:blue;\n           font-size:110%;\n           font-family:Verdana;\n           letter-spacing:0.5px\">\n<h1 style=\"text-align: center;\n           padding: 10px;\n              color:white\">\n3. Where is that expensive player's country?\n<\/h1>\n<\/div>","0adf3e6d":"### Surprisingly, the Manchester City only recruit 8times.","33d52392":"### This is each position's most expensive players, you can feel forward and midfileder position are more expensive than defender and goalkeeper","a46ef47e":"### I have 54 data. This data has means\n\n* Rank: Rank of transfer\n\n* Origin : Origin Country of Player\n\n* Player : Player Name\n\n* From(Country) : From which country the player transferred?\n\n* From(Club) : From which Club the player transferred?\n\n* To(Country) : To which country the player transferred?\n\n* To(Club) : To which Club the player transferred?\n\n* Position : Position of The player\n\n* Fee(\u20ac mln) : How much fee were paid for the transfer as \u20ac mln.\n\n* Fee(\u00a3 mln) : How much fee were paid for the transfer as \u00a3 mln.\n\n* Year : In which year the transfer occured?\n\n* Born : When was the player born?\n\n#### Thanks for sharing this dataset and detail explain @Berkay Alan","da26b199":"### Then, Start analysis !","f8c640e8":"### Hello ~! \n### This time, I will analysis the expensive football player transfers","ef442acb":"<div style=\"color:white;\n           display:fill;\n           border-radius:5px;\n           background-color:blue;\n           font-size:110%;\n           font-family:Verdana;\n           letter-spacing:0.5px\">\n<h1 style=\"text-align: center;\n           padding: 10px;\n              color:white\">\nExpensive Football players analysis\n<\/h1>\n<\/div>\n\n![](https:\/\/cdn.mos.cms.futurecdn.net\/jgX9QsZu9G67ZcieUKceGD-1200-80.jpg)\n\n#### He is my favorite football player ( N'Golo Kant\u00e9 )","ab99d67f":"### And, Atletico madrid and borussia dortmund, juventus record the most sale club","b5d82c63":"<div style=\"color:white;\n           display:fill;\n           border-radius:5px;\n           background-color:blue;\n           font-size:110%;\n           font-family:Verdana;\n           letter-spacing:0.5px\">\n<h1 style=\"text-align: center;\n           padding: 10px;\n              color:white\">\n1. The average of player trade price each position\n<\/h1>\n<\/div>","3b6949ed":"<div style=\"color:white;\n           display:fill;\n           border-radius:5px;\n           background-color:blue;\n           font-size:110%;\n           font-family:Verdana;\n           letter-spacing:0.5px\">\n<h1 style=\"text-align: center;\n           padding: 10px;\n              color:white\">\n2. Where club  trade the player most?\n<\/h1>\n<\/div>","ef8cb322":"### Now, Recognize the club that trade the player most","92921b54":"### Football has 4 position largely \n* Forward\n\n* Midfielder\n\n* Defender\n\n* Goalkeeper"}}