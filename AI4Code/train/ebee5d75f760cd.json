{"cell_type":{"aac2d776":"code","17063783":"code","a6d5d160":"code","82d1346d":"code","ae83aa58":"code","21c21c01":"code","7b3433b4":"code","a0764f74":"code","481f457d":"code","b1e22908":"code","9d3aca0a":"code","2fb7a359":"code","0205cb03":"code","a6966a05":"markdown","808e6536":"markdown","3d9a48b3":"markdown","5eb558d0":"markdown"},"source":{"aac2d776":"# Andres Camilo Casta\u00f1eda Barrios - T00047921\n# Giovanny Zdenco Jukopila Rueda - T00041851\n\n# Importamos las librerias\nimport os\nimport io\nimport sys\nimport os\nimport random\nimport numpy as np\nimport pandas as pd\nimport matplotlib.pyplot as plt\nimport seaborn as sns\nfrom plotly.offline import iplot","17063783":"# Importamos el Dataset\ndata = pd.read_csv('..\/input\/spanish-high-speed-rail-system-ticket-pricing\/high_speed_spanish_trains.csv')","a6d5d160":"# Primero miramos la informacion base del dataset\n# De aqui podemos obtener los tipos de datos de las columnas, la cantidad de columnas, el tama\u00f1o del objeto y la cantidad de registros\ndata.info()","82d1346d":"# Tomamos una muestra de los datos para anilizar cuales son las columnas con las que vamos a trabajar ( 5 datos )\ndata.head(5)","ae83aa58":"# Normalizamos los datos\ndata['price_tree'] = data['price_tree'].fillna(0.0)\ndata['price'] = data['price'].fillna(0.0)\ndata['train_class'] = data['train_class'].fillna('None')\ndata['fare'] = data['fare'].fillna('None')\ndata['batch'] = data['batch'].fillna('None')\n\n# Normalizamos los tipos de datos\ndata['insert_date'] = pd.to_datetime(data['insert_date']) \ndata['origin'].astype(str)\ndata['destination'].astype(str)\ndata['start_date'] = pd.to_datetime(data['start_date']) \ndata['end_date'] = pd.to_datetime(data['end_date']) \ndata['train_type'].astype(str)\ndata['price'].astype(float)\ndata['train_class'].astype(str)\ndata['fare'].astype(str)\ndata['price_tree'].astype(str)\ndata['batch'].astype(str)\ndata['id'].astype(str)","21c21c01":"# Obtenemos los valores de interes\n\n# Tarifa m\u00ednima y m\u00e1xima por destino.\nprint( \"El precio maximo de un tiquete fue de\", data.price.max(), \"Euros\" )\nprint( \"El precio minimo de un tiquete fue de\", data.price.min(), \"Euros\" )\nprint( \"El precio promedio de los tiquetes fue de\", np.round( data.price.mean(),2 ), \"Euros\" )\n\n\n# Media, moda y mas de datos numericos\ndata[{'price': ['min', 'max', 'median', 'skew']}].describe()","7b3433b4":"# Datos de destinos\norigenes = data.origin.unique()\ndestinos = data.destination.unique()\n\n# Obtenemos las ciudades que cuentas con al menos una ruta\nciudades = [next(iter(filter(None, values)), '') for values in zip(origenes, destinos)]\nprint( \"Estas son las ciudades que cuentas con vias de tren registradas para este conjunto de datos \\n\", ciudades )","a0764f74":"# Trabajamos sobre una muestra mas reducida\ndataShort = data.sample( frac=0.30, random_state=99 )","481f457d":"# Convertimos los datos de las columnas de fechas en datos datetime, para poder manejarlos mejor\nfor i in ['insert_date','start_date','end_date']:\n    dataShort[i] = pd.to_datetime(dataShort[i])","b1e22908":"# Cargamos las columnas de interes en columnas propias\n\ndataShort['horaInicio'] = dataShort['start_date'].dt.hour\ndataShort['diaInicio'] = dataShort['start_date'].dt.day\ndataShort['mesInicio'] = dataShort['start_date'].dt.month\ndataShort['anioInicio'] = dataShort['start_date'].dt.year\n\ndataShort['horaFin'] = dataShort['end_date'].dt.hour\ndataShort['diaFin'] = dataShort['end_date'].dt.day\ndataShort['mesFin'] = dataShort['end_date'].dt.month\ndataShort['anioFin'] = dataShort['end_date'].dt.year\n\ndataShort['tiempoTotal'] = dataShort['end_date'] - dataShort['start_date']\ndataShort['minutos'] = dataShort['tiempoTotal']\/np.timedelta64(1,'m')\n\ndataShort.head()\n","9d3aca0a":"# Obtenemos informacion de meses\nmeses = dataShort['mesInicio'].value_counts()\nplt.figure(figsize=(12,4))\nsns.barplot(meses.index, meses.values, alpha=0.8)\nplt.ylabel('Numero de viajes (Millones)', fontsize=10)\nplt.xlabel('Mes', fontsize=12)\nplt.show()","2fb7a359":"# Obtenemos informacion de horas\nprint( \"En promedio, la duracion de los viajes es de \",round(dataShort['minutos'].mean(),2),\"minutos\" )\nprint( \"Los viajes que mas demoran son de mas o menos\",round(dataShort['minutos'].max(),2),\"minutos\" )\nprint( \"Los viajes mas rapidos son de mas o menos \",round(dataShort['minutos'].min(),2),\"minutos\" )","0205cb03":"# Analizamos los tipos de trenes\n\ntrenes = dataShort['train_type'].value_counts()\netiquetas = list(trenes.index)\n\nplt.pie(trenes, labels=etiquetas,radius=3, autopct='%1.2f%%')\nplt.legend(labels = etiquetas, loc=\"center right\")\n\nplt.show()","a6966a05":"### Observamos que el dataset esta estructurado de la siguiente manera <br \/>\n\n**insert_date**: Momento exacto en el que se obtuvo el dato <br>\n**origin**: Ciudad de origen <br>\n**destination**: ciudad de estino<br>\n**start_date**:  Hora de partida del tren<br>\n**end_date**: Hora de llegada del tren<br>\n**train_type**: Tipo de servico de tren<br>\n**price**: Precio del boleto ( Euros )<br>\n**train_class**: tipo de pasaje ( turista, ejecutivo, etc )<br>\n**fare**: Precio a apagar por uso del sistema ( Euros )<br>\n","808e6536":"Definimos cuales son los datos que nos parecen mas relevantes\nesto se realiza de manera que nos permita coocer la imformacion mas relevante par nuestro analisis\n ","3d9a48b3":"Con esto podemos observar que el los trenes mas usados son los AVE, seguido por el modelo ALVIA","5eb558d0":"Con esto podemos observar que el mes en el que mas viajes se realizan es el mes de Mayo, seguido por el mes de Abril"}}