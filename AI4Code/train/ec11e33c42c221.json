{"cell_type":{"cee5c541":"code","5eda4b94":"code","d40e4e26":"code","43d1f1a9":"code","7670e137":"code","ba5f2e06":"code","64949e90":"code","410bc127":"code","aadfe450":"code","852e0ae4":"code","689291dc":"code","2e276a1d":"code","99f1902c":"code","f41437b4":"code","aecd325e":"code","99fcdabe":"code","4aac5c3f":"code","08b1aea6":"code","4080b7a5":"code","b779d7ee":"markdown","7827ffd3":"markdown","183e8add":"markdown","4d4503b8":"markdown","4e89a619":"markdown","6fd4877f":"markdown","b6a3391c":"markdown","7116bda8":"markdown"},"source":{"cee5c541":"import numpy as np\nimport pandas as pd \nimport matplotlib.pyplot as plt\nimport seaborn as sns\n\nimport warnings\nwarnings.filterwarnings('ignore')\nplt.style.use('ggplot')","5eda4b94":"# import datasets\ndf = pd.read_csv('..\/input\/fifa-21-players-teams-full-database\/players_fifa21.csv')\ndf.head()","d40e4e26":"df.isna().sum().sort_values(ascending=False)[:10]","43d1f1a9":"promising_players = df[(df.Growth > 4) & (df.Potential > 84)].sort_values(by='Potential', ascending=False)\nprint(f'Players find: {promising_players.shape[0]}')","7670e137":"promising_players[\n    ['Name', 'Age', 'Overall', 'Potential', 'BestPosition', 'ValueEUR', 'ReleaseClause']\n].head(20).style.background_gradient(cmap='cool')","ba5f2e06":"promising_players[\n    ['Name', 'Age', 'Overall', 'Potential', 'BestPosition', 'ValueEUR', 'ReleaseClause']\n].corr().style.background_gradient(cmap='cool')","64949e90":"plt.figure(figsize=(12,6))\nsns.boxplot(x='BestPosition', \n            y='Potential', \n            data = promising_players, \n            palette='cool'\n           ).set_title('Potential players by position');","410bc127":"populat_nationality = promising_players.Nationality.value_counts()[:10].keys()\nplt.figure(figsize=(12,6))\nsns.boxplot(x='Nationality', \n            y='Potential', \n            data = promising_players[promising_players.Nationality.isin(populat_nationality)], \n            palette='cool'\n           ).set_title('Potential players by nationality');","aadfe450":"plt.figure(figsize=(16,6))\nplt.xticks(rotation=340)\nclub_count_players = promising_players.Club.value_counts()[:20]\nsns.barplot(x=club_count_players.index, \n            y=club_count_players.values,\n            palette='Set2'\n           ).set_title('Talents in clubs');","852e0ae4":"from IPython.display import display, HTML\nprinting_cols =['Name', 'Age', 'Overall', 'Potential', 'Positions', 'ValueEUR', 'ReleaseClause']\nfor pos in promising_players.BestPosition.unique():\n    print(f'Best {pos}')\n    display(HTML(promising_players[promising_players.BestPosition == pos][printing_cols].head(5).to_html()))\n    print('\\n\\n')","689291dc":"print(\"FIFA is far from real football...\")\ndf.iloc[:, -17:].corr().style.background_gradient(cmap='cool')","2e276a1d":"from math import pi\n\ndef make_spider(row, i):\n    # Create Radar chart\n    categories=['PassingTotal', 'ShootingTotal', 'PaceTotal', \n                'PhysicalityTotal',  'DefendingTotal', 'DribblingTotal']\n    if row[1].BestPosition == \"GK\":\n        categories=['Reactions', 'GKDiving', 'GKHandling', \n                    'GKKicking', 'GKPositioning', 'GKReflexes']\n    N = len(categories)\n    angles = [n \/ float(N) * 2 * pi for n in range(N)]\n    angles += angles[:1]\n    ax = plt.subplot(1, 3, i + 1, polar=True)\n    plt.subplots_adjust(wspace=0.6)\n    xticks_names =  [f\"{cat.replace('Total', '')}\\n{row[1][cat]}\" for cat in categories]\n    plt.xticks(angles[:-1], xticks_names, color='grey', size=10)\n \n    ax.set_rlabel_position(0)\n    ax.set_facecolor('xkcd:black')\n    plt.yticks([40, 50, 60, 70, 80, 90], \n               [\"40\", \"50\", \"60\",\"70\",\"80\",\"90\"], \n               color=\"grey\", size=8)\n    plt.ylim(0,100)\n \n\n    values=row[1][categories].values.flatten().tolist()\n    values += values[:1]\n    ax.plot(angles, values, color='cyan', linewidth=3, linestyle='solid')\n    ax.fill(angles, values, color='cyan', alpha=0.6)\n \n    plt.title(row[1].Name, size=14, color='black', y=1.1)\n\npositions = ['ST', 'CF', 'RF', 'LF', 'RW', 'LW', 'LM', 'RM', \n             'CAM', 'CM', 'CDM', 'RB', 'LB', 'CB', 'RWB', 'LWB', 'GK']\nbar_kwargs = dict(x='Name', y='Overall', figsize=(16,4), yticks=list(range(0, 100, 10)), rot=0)\n\nfor pos in positions:\n    print(f'\\n\\nBest in {pos}')\n    df[df.ClubPosition==pos][:10].plot.bar(**bar_kwargs);\n    plt.show()\n    plt.figure(figsize=(16,16))\n    for i, row in enumerate(df[df.ClubPosition==pos][:3].iterrows()):\n        make_spider(row, i)","99f1902c":"df[df.ContractUntil < 2022][\n    ['Name', 'Age', 'Overall', 'Potential', 'Positions', 'ContractUntil', 'WageEUR']\n][:10].style.background_gradient(cmap='cool')","f41437b4":"print('Best under 27')\ndf[(df.ContractUntil < 2022) & (df.Age < 27)][\n    ['Name', 'Age', 'Overall', 'Potential', 'Positions', 'ContractUntil', 'WageEUR']\n][:20].style.background_gradient(cmap='cool')","aecd325e":"print('Young and talented')\ndf[(df.ContractUntil < 2022) & (df.Age < 25) & (df.Growth > 4)][\n    ['Name', 'Age', 'Overall', 'Potential', 'Positions', 'ContractUntil', 'WageEUR']\n][:20].style.background_gradient(cmap='cool')","99fcdabe":"def highlight_low(s):\n    if s.dtype == 'O':\n        return s\n    is_low = s <= s.quantile(0.15)\n    return ['background-color: hotpink' if v else '' for v in is_low]\n\n\nrating_columns = ['Name', 'Positions'] + list(df.columns[33:39])","4aac5c3f":"df[df.BestPosition == 'CM'][:10][rating_columns].style.apply(highlight_low)","08b1aea6":"df[df.BestPosition == 'ST'][:10][rating_columns].style.apply(highlight_low)","4080b7a5":"df[df.BestPosition == 'CB'][:10][rating_columns].style.apply(highlight_low)","b779d7ee":"# Hello ~~World~~ FIFA 21\n\nFifa 21 Players Brief\n- the most promising\n- the best by position\n- future free agents\n- anomaly detection","7827ffd3":"17,853 players are not on the national team and 235 are free agents","183e8add":"## Best by position","4d4503b8":"### Missing data","4e89a619":"\n\n\nThank you for watching. Dataset from https:\/\/www.kaggle.com\/cashncarry\/fifa-21-players-teams-full-database","6fd4877f":"# Anomalies in skill assessment\n\n## Do you remember the speed of Toni Kroos? 41 :)))","b6a3391c":"# Who are the best future free agents?","7116bda8":"## The most promising players"}}