{"cell_type":{"a217407f":"code","39430d46":"code","630becdb":"code","7b20876f":"code","cca419a2":"code","17910a49":"code","3fcdee5a":"code","62d7f71b":"code","5de83d7c":"code","9f106b37":"code","7a07a685":"code","e82c2469":"code","e3f3534e":"code","fbec7bdc":"code","6df0d145":"code","7f259233":"code","d534a3b8":"code","491f381d":"code","35f4b7d5":"code","d34b809a":"code","9deed9e6":"code","8c429171":"code","c27fc940":"code","ea488841":"code","53a088fb":"code","bf2aa398":"code","38697a10":"code","4a09031e":"code","d599ec3e":"code","55f46f34":"markdown","f9dace80":"markdown","a9354dc3":"markdown","93f1df0b":"markdown","a3c8fa54":"markdown","92ac6503":"markdown","8a9699a3":"markdown","80937b7e":"markdown","fb8179d8":"markdown","30e88b33":"markdown","6a6d623a":"markdown","f2785f74":"markdown","76d9d489":"markdown","40837ac2":"markdown","4dcbc11f":"markdown","17948f76":"markdown","936902ac":"markdown","e06f11e1":"markdown","4f0c2e80":"markdown","94f3ce51":"markdown","8aad7fa1":"markdown","c5214e7a":"markdown","3ef8532e":"markdown","25eb4bdd":"markdown","6e79228c":"markdown","3a180bde":"markdown","4bc40d8e":"markdown"},"source":{"a217407f":"import numpy as np\nimport pandas as pd\n# pip install seaborn \nimport seaborn as sns\nimport matplotlib.pyplot as plt","39430d46":"dtype = {'DayOfWeek': np.uint8, 'DayofMonth': np.uint8, 'Month': np.uint8 , 'Cancelled': np.uint8, \n         'Year': np.uint16, 'FlightNum': np.uint16 , 'Distance': np.uint16, \n         'UniqueCarrier': str, 'CancellationCode': str, 'Origin': str, 'Dest': str,\n         'ArrDelay': np.float16, 'DepDelay': np.float16, 'CarrierDelay': np.float16,\n         'WeatherDelay': np.float16, 'NASDelay': np.float16, 'SecurityDelay': np.float16,\n         'LateAircraftDelay': np.float16, 'DepTime': np.float16}","630becdb":"%%time\n# change the path if needed\n#path = '..\/..\/data\/2008.csv.bz2'\npath = '..\/input\/2008.csv'\nflights_df = pd.read_csv(path, usecols=dtype.keys(), dtype=dtype)","7b20876f":"print(flights_df.shape)\nprint(flights_df.columns)","cca419a2":"flights_df.head()","17910a49":"flights_df.head().T","3fcdee5a":"flights_df.info()","62d7f71b":"flights_df.describe().T","5de83d7c":"flights_df['UniqueCarrier'].nunique()","9f106b37":"flights_df.groupby('UniqueCarrier').size().plot(kind='bar');","7a07a685":"flights_df.groupby(['UniqueCarrier','FlightNum'])['Distance'].sum().sort_values(ascending=False).iloc[:3]","e82c2469":"flights_df.groupby(['UniqueCarrier','FlightNum'])\\\n  .agg({'Distance': [np.mean, np.sum, 'count'],\n        'Cancelled': np.sum})\\\n  .sort_values(('Distance', 'sum'), ascending=False)\\\n  .iloc[0:3]","e3f3534e":"pd.crosstab(flights_df.Month, flights_df.DayOfWeek)","fbec7bdc":"plt.imshow(pd.crosstab(flights_df.Month, flights_df.DayOfWeek),\n           cmap='seismic', interpolation='none');","6df0d145":"flights_df.hist('Distance', bins=20);","7f259233":"flights_df['Date'] = pd.to_datetime(flights_df.rename(columns={'DayofMonth': 'Day'})[['Year', 'Month', 'Day']])","d534a3b8":"num_flights_by_date = flights_df.groupby('Date').size()","491f381d":"num_flights_by_date.plot();","35f4b7d5":"num_flights_by_date.rolling(window=7).mean().plot();","d34b809a":"# You code here","9deed9e6":"# You code here","8c429171":"# You code here","c27fc940":"# You code here","ea488841":"# You code here","53a088fb":"# You code here","bf2aa398":"# You code here","38697a10":"# You code here","4a09031e":"# You code here","d599ec3e":"# You code here","55f46f34":"**8. Which month has the greatest number of cancellations due to Carrier?** \n- May\n- January\n- September\n- April ","f9dace80":"**6. Show how the number of flights changes through time (on the daily\/weekly\/monthly basis) and interpret the findings.**\n\n**Choose all correct statements:**\n- The number of flights during weekends is less than during weekdays (working days).\n- The lowest number of flights is on Sunday.\n- There are less flights during winter than during summer.  ","a9354dc3":"* Download the data [archive](http:\/\/stat-computing.org\/dataexpo\/2009\/2008.csv.bz2) (Archived ~ 114 Mb, unzipped - ~ 690 Mb). No need to unzip - pandas can unbzip on the fly.\n* Place it in the \"..\/..\/data\" folder, or change the path below according to your location.\n* The dataset has information about carriers and flights between US airports during the year 2008. \n* Column description is available [here](http:\/\/www.transtats.bts.gov\/Fields.asp?Table_ID=236). Visit this site to find ex. meaning of flight cancellation codes.","93f1df0b":"**Count unique Carriers and plot their relative share of flights:**","a3c8fa54":"**Transpose the frame to see all features at once.**","92ac6503":"**Print first 5 rows of the dataset.**","8a9699a3":"**Another way:**","80937b7e":"**Do you see a weekly pattern above? And below?**","fb8179d8":"**4. Find top-5 delayed routes (count how many times they were delayed on departure). From all flights on these 5 routes, count all flights with weather conditions contributing to a delay.**\n\n- 449 \n- 539 \n- 549 \n- 668 ","30e88b33":"**5. Examine the hourly distribution of departure times. For that, create a new series from DepTime, removing missing values.**\n\n**Choose all correct statements:**\n - Flights are normally distributed within time interval [0-23] (Search for: Normal distribution, bell curve).\n - Flights are uniformly distributed within time interval [0-23].\n - In the period from 0 am to 4 am there are considerably less flights than from 7 pm to 8 pm.","6a6d623a":"**Flight distance histogram:**","f2785f74":"**Check the number of rows and columns and print column names.**","76d9d489":"# <center>Assignment #2. Fall 2018 <br> Exploratory Data Analysis (EDA) of US flights <br> (using Pandas, Matplotlib & Seaborn)\n\n<img src='https:\/\/mlcourse.ai\/notebooks\/blob\/master\/img\/plane_sunset.png' width=50%>\n\nPrior to working on the assignment, you'd better check out the corresponding course material:\n - [Visualization: from Simple Distributions to Dimensionality Reduction](https:\/\/mlcourse.ai\/notebooks\/blob\/master\/jupyter_english\/topic02_visual_data_analysis\/topic2_visual_data_analysis.ipynb?flush_cache=true)\n - [Overview of Seaborn, Matplotlib and Plotly libraries](https:\/\/mlcourse.ai\/notebooks\/blob\/master\/jupyter_english\/topic02_visual_data_analysis\/topic2_additional_seaborn_matplotlib_plotly.ipynb?flush_cache=true)\n - first lectures in [this](https:\/\/www.youtube.com\/watch?v=QKTuw4PNOsU&list=PLVlY_7IJCMJeRfZ68eVfEcu-UcN9BbwiX) YouTube playlist \n\n### Your task is to:\n - write code and perform computations in the cells below\n - choose answers in the [webform](https:\/\/docs.google.com\/forms\/d\/1qSTjLAGqsmpFRhacv0vM-CMQSTT_mtOalNXdRTcdtM0\/edit)\n - submit answers with **the very same email and name** as in assignment 1. This is a part of the assignment, if you don't manage to do so, you won't get credits. If in doubt, you can re-submit A1 form till the deadline for A1, no problem\n \n### <center> Deadline for A2: 2018 October 21, 20:59 CET\n\n","40837ac2":"**Making a histogram of flight frequency by date.**","4dcbc11f":"<center>\n<img src=\"https:\/\/mlcourse.ai\/notebooks\/blob\/master\/img\/ods_stickers.jpg\" \/>\n    \n## [mlcourse.ai](mlcourse.ai) \u2013 Open Machine Learning Course \n\nAuthor: [Yury Kashnitskiy](https:\/\/yorko.github.io). \nTranslated and edited by [Maxim Keremet](https:\/\/www.linkedin.com\/in\/maximkeremet\/), [Artem Trunov](https:\/\/www.linkedin.com\/in\/datamove\/), and [Aditya Soni](https:\/\/www.linkedin.com\/in\/aditya-soni-0505a9124\/). This material is subject to the terms and conditions of the [Creative Commons CC BY-NC-SA 4.0](https:\/\/creativecommons.org\/licenses\/by-nc-sa\/4.0\/) license. Free use is permitted for any non-commercial purpose.","17948f76":"**1. Find top-10 carriers in terms of the number of completed flights (_UniqueCarrier_ column)?**\n\n**Which of the listed below is _not_ in your top-10 list?**\n- DL\n- AA\n- OO\n- EV ","936902ac":"**Number of flights by days of week and months:**","e06f11e1":"**2. Plot distributions of flight cancellation reasons (_CancellationCode_).**\n\n**What is the most frequent reason for flight cancellation? (Use this [link](https:\/\/www.transtats.bts.gov\/Fields.asp?Table_ID=236) to translate codes into reasons)**\n- carrier\n- weather conditions \n- National Air System\n- security reasons","4f0c2e80":"**10. Examine median arrival and departure delays (in time) by carrier. Which carrier has the lowest median delay time for both arrivals and departures? Leave only non-negative values of delay times ('ArrDelay', 'DepDelay').\n[Boxplots](https:\/\/seaborn.pydata.org\/generated\/seaborn.boxplot.html) can be helpful in this exercise, as well as it might be a good idea to remove outliers in order to build nice graphs. You can exclude delay time values higher than a corresponding .95 percentile.**\n\n- EV\n- OO\n- AA\n- AQ ","94f3ce51":"**We can also _group by_ category\/categories in order to calculate different aggregated statistics.**\n\n**For example, finding top-3 flight codes, that have the largest total distance travelled in year 2008.**","8aad7fa1":"**9. Identify the carrier with the greatest number of cancellations due to carrier in the corresponding month from the previous question.**\n\n- 9E\n- EV\n- HA\n- AA","c5214e7a":"**3. Which route is the most frequent, in terms of the number of flights?**\n\n(Take a look at _'Origin'_ and _'Dest'_ features. Consider _A->B_ and _B->A_ directions as _different_ routes) \n\n - New-York \u2013 Washington\n - San-Francisco \u2013 Los-Angeles \n - San-Jose \u2013 Dallas\n - New-York \u2013 San-Francisco","3ef8532e":"**Reading data into memory and creating a Pandas _DataFrame_ object**\n\n(This may take a while, be patient)\n\nWe are not going to read in the whole dataset. In order to reduce memory footprint, we instead load only needed columns and cast them suitable data types.","25eb4bdd":"**It can also be handy to color such tables in order to easily notice outliers:**","6e79228c":"**Get basic statistics of each feature.**","3a180bde":"**Examine data types of all features and total dataframe size in memory.**","4bc40d8e":"**7. Examine the distribution of cancellation reasons with time. Make a bar plot of cancellation reasons aggregated by months.**\n\n**Choose all correct statements:**\n- December has the highest rate of cancellations due to weather. \n- The highest rate of cancellations in September is due to Security reasons.\n- April's top cancellation reason is carriers.\n- Flights cancellations due to National Air System are more frequent than those due to carriers."}}