{"cell_type":{"5d0857b3":"code","02386757":"code","98ce93b7":"code","10029695":"code","3586d63b":"code","8dbc659c":"markdown","d96a412d":"markdown","e71990b5":"markdown"},"source":{"5d0857b3":"import os\nimport warnings\nfrom pathlib import Path\nimport ipywidgets as widgets\n\nimport matplotlib.pyplot as plt\nimport numpy as np\nimport pandas as pd\nimport seaborn as sns\nimport statsmodels.api as sm\nimport statsmodels.formula.api as smf\nfrom sklearn.linear_model import LinearRegression\nfrom sklearn.metrics import mean_squared_error, mean_absolute_error, mean_squared_log_error\nfrom sklearn.model_selection import TimeSeriesSplit\nfrom xgboost import XGBRegressor\n\n\nwarnings.simplefilter(\"ignore\")\npd.set_option('use_inf_as_na', True)\n\nplt.style.use(\"seaborn-whitegrid\")\nplt.rc(\n    \"figure\",\n    autolayout=True,\n    figsize=(11, 5),\n    titlesize=18,\n    titleweight='bold',\n)\nplt.rc(\n    \"axes\",\n    labelweight=\"bold\",\n    labelsize=\"large\",\n    titleweight=\"bold\",\n    titlesize=16,\n    titlepad=10,\n)\n\nplot_params = dict(\n    color=\"0.75\",\n    style=\".-\",\n    markeredgecolor=\"0.25\",\n    markerfacecolor=\"0.25\",\n    legend=False,\n)","02386757":"import pandas as pd\n\ndata_dir = Path(\"..\/input\/favorita-small\/\")\n\nstores = pd.read_csv(\n    data_dir \/ \"stores.csv\",\n    dtype='category',\n    index_col='store_nbr',\n)\ntransactions = pd.read_csv(\n    data_dir \/ \"transactions.csv\",\n    dtype={\n        'store_nbr': 'category',\n        'transactions': 'uint64',\n    },\n    parse_dates=[\"date\"],\n    infer_datetime_format=True,\n)\ntransactions = transactions.set_index(\"date\").to_period(\"D\")\n\noil = pd.read_csv(\n    data_dir \/ \"oil.csv\",\n    dtype='float32',\n    parse_dates=[\"date\"],\n    infer_datetime_format=True,\n)\noil = oil.set_index('date').to_period('D')\n\nholidays_events = pd.read_csv(\n    data_dir \/ \"holidays_events.csv\",\n    dtype={\n        'type': 'category',\n        'locale': 'category',\n        'locale_name': 'category',\n        'description': 'category',\n        'transferred': 'bool',\n    },\n    parse_dates=['date'],\n    infer_datetime_format=True,\n)\nholidays_events = holidays_events.set_index('date').to_period('D')\n\ndtype = {\n    'store_nbr': 'category',\n    'family': 'category',\n    'unit_sales': 'float32',\n    'onpromotion': 'uint64',\n}\n\nsales = pd.read_csv(\n    data_dir \/ 'train.csv',\n    dtype=dtype,\n    parse_dates=['date'],\n    infer_datetime_format=True,\n)\nsales = sales.set_index('date').to_period('D')\nsales = sales.set_index(['store_nbr', 'family'], append=True)","98ce93b7":"display(sales)","10029695":"df_names = ['holidays_events', 'oil', 'stores', 'transactions']\n\ndata_tabs = widgets.Tab()\ndata_tabs.children = [widgets.Output() for _ in df_names]\n\nfor i, name in enumerate(df_names):\n    data_tabs.set_title(i, name)\n    with data_tabs.children[i]:\n        display(globals()[name])\n        \ndisplay(data_tabs)","3586d63b":"STORE = '1'\nFAMILY = ['AUTOMOTIVE', 'BEAUTY', 'BOOKS', 'DELI', 'PERSONAL CARE']\nts_1 = sales.drop('onpromotion', axis=1).unstack(['store_nbr', 'family']).loc(axis=1)[:, STORE, FAMILY]\n_ = ts_1.plot(subplots=True, sharex=True, figsize=(14, 8))","8dbc659c":"There are some supplemental data as well.","d96a412d":"Time series of daily sales by store and product family, 1782 in all.","e71990b5":"Sample of a few time series, from Store 1."}}