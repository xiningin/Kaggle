{"cell_type":{"3ec5423a":"code","f3b925cc":"code","860ecf6d":"code","27884571":"code","5499055b":"code","88f16775":"code","fa5fe6b6":"code","426ad89f":"code","8958c6f1":"code","9d699d3e":"code","087e91a3":"code","a46ada0f":"code","57b628f6":"markdown","d7b1b842":"markdown","9e7d5f32":"markdown","fd4b0dbb":"markdown","46d3136e":"markdown","d7ed5be0":"markdown","39b5501a":"markdown","79374565":"markdown","3eb37336":"markdown","9c0b2ee5":"markdown"},"source":{"3ec5423a":"import pandas as pd\n#settings :\npd.set_option('display.max_rows', 1000)\npd.set_option('display.max_columns', 500)\npd.set_option('display.width', 1000)\npd.set_option('display.max_colwidth', 1000)\nimport numpy as np\nimport matplotlib.pyplot as plt\nimport seaborn as sns\nimport missingno as msno \nimport datatable as dt  # pip install datatble\nimport datetime\nfrom pandas.tseries.holiday import Holiday,AbstractHolidayCalendar\n#to create russian holidays list\n!pip install holidays\nimport holidays\nfrom datetime import date\n#!pip install googletrans\n\n\n","f3b925cc":"data = pd.read_csv('..\/input\/aipro2predictsales\/all_data_competition_en.csv')","860ecf6d":"data.head(5)","27884571":"data['date'] = pd.to_datetime(data['date'], infer_datetime_format=True)  ","5499055b":"data.head()","88f16775":"data['week_day']= data['date'].dt.dayofweek\ndata['day'] = data['date'].dt.day\ndata['month'] = data['date'].dt.month\ndata['year'] = data['date'].dt.year","fa5fe6b6":"data['year'].value_counts()","426ad89f":"print('oldest date is :',data.date.min())\nprint('latest date is :',data.date.max())","8958c6f1":"russion_holiday_lists=[]\nrussion_holiday_name=[]\n\nfor day,name in sorted(holidays.Russia(years=[2013,2014,2015]).items()):\n    #print(day,name)\n    russion_holiday_lists.append(day)\n    russion_holiday_name.append(name)\n    \n\n#how many holidays in total 3 years\nprint(\"total holidays in 3 yrs : \",len(russion_holiday_lists))\n","9d699d3e":"\nrus_hol ={\n    'rus_hol':russion_holiday_lists,\n    'hol_name_ru':russion_holiday_name\n\n}\nholidays_dataset=pd.DataFrame(rus_hol)\nholidays_dataset['rus_hol'] = pd.to_datetime(holidays_dataset['rus_hol'], infer_datetime_format=True) \n\n\"\"\"#since the holidays name are in russia I will be translating it to english\nfrom googletrans import Translator\n\n\nx=holidays_dataset['hol_name_ru']\ntranslator = Translator()#defining translator\nholidays_dataset['hol_name_en'] = holidays_dataset['hol_name_ru'].apply(lambda x: translator.translate(x, dest='en').text)\n#df['translated_value'] = df['value'].apply(lambda x: translator.translate(x, dest='en').text)\n\n#changing the format to datetime \n#df = pd.to_datetime(df['rus_hol'], infer_datetime_format=True)  \"\"\"\n\nholidays_dataset.sort_index(inplace=True)\nholidays_dataset\n","087e91a3":"\ndata['is_holiday_dich'] = data['date'].isin(holidays_dataset['rus_hol'])\n#chaning from true or false to a coloumns of integers 1 and 0 \n\ndata['is_holiday_dich']=data['is_holiday_dich'].astype(int)\ndata.head()","a46ada0f":"data['is_holiday_dich'].value_counts()","57b628f6":"\n\n<h4 style=\"background-color:darkgray ;color :white;,font-size:12em; border-radius: 20px; text-align: center-right; padding: 20px\">\n    &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;Step 2 : Creating a seperate holiday dataframe<\/h4>","d7b1b842":"\n<h5 style=\"background-color:darkgray ;color :white;,font-size:12em; border-radius: 20px; text-align: center-right; padding: 20px\">\n    &nbsp; &nbsp; &nbsp; &nbsp;Adding a new column  to our original dataset called <b> 'is_holiday_dich' <\/b>&nbsp; &nbsp;1 = yes ,&nbsp; &nbsp; 0 = no<\/h5>\n    \n \n\n    \n","9e7d5f32":"<p style=\"background-color:green ;color :white;,font-size:12em; border-radius: 20px; text-align: center-right; padding: 20px\">\n    &nbsp; &nbsp; &nbsp; &nbsp;<b>GOAL :<\/b>\n    Collect historical data related to previous sales and use it to predict expected sales.<\/p>\n    \n ","fd4b0dbb":"\n\n<h4 style=\"background-color:darkgray ;color :white;,font-size:12em; border-radius: 20px; text-align: center-right; padding: 20px\">\n    &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;Step 1 : Creating a holidays lists<\/h4>","46d3136e":"<h4 style=\"background-color:darkgray ;color :white;,font-size:12em; border-radius: 20px; text-align: center-right; padding: 20px\">\n    &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Adding more more specific column for date time such as :<\/h4>\n  <ul style=\"background-color:darkgray ;color :white;,font-size:12em; border-radius: 20px; text-align: center-right; padding: 20px\">\n    <li> week_day : Monday=0 ,Sunday =6<\/li>\n\n<li> day : day(1-31)<\/li>\n \n<li> month : month (1-12)<\/li>\n\n<li> year : year <\/li>\n <\/ul>\n","d7ed5be0":"\n<h4 style=\"background-color:darkgray ;color :white;,font-size:12em; border-radius: 20px; text-align: center-right; padding: 20px\">\n    &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;  Generating Russion Holidays <\/h4>\n\n<p>     I will be using holidays libaray from this : https:\/\/pypi.org\/project\/holidays\/\n\n        by installing with :\n\n<span style=\"background-color:lightgray ;color :black;,font-size:12em; border-radius: 20px; display: inline-block; text-align: center-right; padding: 20px \">\n  !pip install holidays<\/span><\/p>\n","39b5501a":"\n<h4 style=\"background-color:darkgray ;color :white;,font-size:12em; border-radius: 20px; text-align: center-right; padding: 20px\">\n    &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;HOW MANHY YEARS CONTAINS IN THIS DATASET ?<\/h4>","79374565":"\n<h4 style=\"background-color:darkgray ;color :white;,font-size:12em; border-radius: 20px; text-align: center-right; padding: 20px\">\n    &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Data fields <\/h4>\n\n<ul style=\"background-color:darkgray ;color :white;,font-size:12em; border-radius: 20px; text-align: center-right; padding: 20px\">\n <li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;ID - an Id that represents a (Shop, Item) tuple within the test set<\/li>\n<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;shop_id - unique identifier of a shop<\/li>\n<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;item_id - unique identifier of a product<\/li>\n<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;item_category_id - unique identifier of item category<\/li>\n<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;item_cnt_day - number of products sold. You are predicting a monthly amount of this measure<\/li>\n<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;item_price - current price of an item<\/li>\n<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;date - date in format dd\/mm\/yyyy<\/li>\n<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;date_block_num - a consecutive month number, used for convenience. January 2013 is 0, February 2013 is 1,..., October 2015 is 33<\/li>\n<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;item_name - name of item<\/li>\n<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;shop_name - name of shop<\/li>\n<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;item_category_name - name of item category<\/li>\n    <\/ul>","3eb37336":"\n\n<h4 style=\"background-color:darkgray ;color :white;,font-size:12em; border-radius: 20px; text-align: center-right; padding: 20px\">\n    &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;Finding the earliest and latest date of the dataset<\/h4>","9c0b2ee5":"<ul style=\"background-color:darkgray ;color :white;,font-size:12em; border-radius: 20px; text-align: center-right; padding: 20px\">\n&nbsp; &nbsp; &nbsp;Changing the date format \n\n    pandas datetime format is YYYY-MM-DD\n<\/ul>"}}