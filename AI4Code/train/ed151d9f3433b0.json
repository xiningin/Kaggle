{"cell_type":{"77a308cb":"code","2030f41f":"code","a0349cc4":"code","68b6c8e6":"code","1e83db3a":"code","57461d04":"code","6c46473b":"code","936bd19e":"code","38dc0117":"code","acd3469a":"code","acc67960":"code","ebbbd649":"code","fa590fc4":"code","4a984f08":"code","004ce434":"code","a2e862e1":"code","15debda5":"code","c8a4341d":"code","40ed757a":"code","b9c4390b":"code","c94ef53f":"code","d6e09d19":"code","81b8844f":"code","7eb6700a":"code","a3f2a4ad":"code","acaaeee6":"code","d4a1acfa":"code","2f278061":"code","3f3e914f":"code","3fa41aaa":"code","c0b262e4":"code","d0b58db7":"code","e4012f88":"code","d52b9a25":"code","4a5282a2":"code","b8d273e3":"code","27c4f4ee":"code","375658dc":"code","1f17babf":"code","7a3def82":"code","2eefec83":"markdown","6a8c5e9d":"markdown","feda3cd4":"markdown","4c250d85":"markdown","1b5c4a22":"markdown","771ced6c":"markdown","4093d812":"markdown","7d82f306":"markdown","df49a37a":"markdown","3fb7bc3c":"markdown","a4d2f84c":"markdown","d1edd3ce":"markdown","46caf64b":"markdown","bc55fc2a":"markdown","1737cd8d":"markdown","3a7eb49b":"markdown","011cfcaf":"markdown","33c67d11":"markdown","ca05c96f":"markdown","98878fab":"markdown","06e79d40":"markdown","2b5c48e7":"markdown"},"source":{"77a308cb":"from IPython.display import Image\nImage('..\/input\/firstimage\/1.jpg')","2030f41f":"import pandas as pd\nimport numpy as np\nimport matplotlib.pyplot as plt\nimport seaborn as sns\nimport plotly.express as px","a0349cc4":"car = pd.read_csv('\/kaggle\/input\/vehicle-dataset-from-cardekho\/car data.csv')\ncar.columns = [i.lower() for i in car.columns]\nprint(\"Number of rows : \",car.shape[0])\nprint(\"Number of columns : \",car.shape[1])\n\n\n# drop duplicates rows if present\ncar.drop_duplicates(keep = 'first',inplace = True)\n\n# resetting index \ncar.reset_index(inplace = True,drop = True)","68b6c8e6":"print(\"Numerical feature : \")\nprint(car.select_dtypes(include = \"number\").columns)\nprint(\"\\n Categorical feature : \")\nprint(car.select_dtypes(exclude = \"number\").columns)","1e83db3a":"# info of the dataset ,\ncar.info()","57461d04":"# description of data \n# luckily we don't have any missing value's in our dataset . \ncar.describe()","6c46473b":"car[car.present_price == car.present_price.max()][['car_name','present_price']]","936bd19e":"px.pie(data_frame = car ,names = car.car_name.value_counts().head(10).index,values = car.car_name.value_counts().values[0:10],\n      title = \"Top 10 vehicle company is more for sale\",hole = 0.7\n      )","38dc0117":"plt.rcParams['figure.figsize'] = (15,6)\nsns.countplot(car['year'])\nplt.title(\"year v\/s vehicle's availabel for second's \")","acd3469a":"car[[\"selling_price\",\"present_price\"]].plot(kind = 'line')\nplt.title(\"Comparsion of  Present price v\/s Selling price \")\nplt.ylabel(\"Price\")","acc67960":"px.pie(data_frame = car ,names = car.fuel_type.value_counts().index,values = car.fuel_type.value_counts().values,\n      title = \"vehicle fuel type \" ,hole = 0.7\n      )","ebbbd649":"px.pie(data_frame = car ,names = car.transmission.value_counts().index,values = car.transmission.value_counts().values,\n      title = \"vehicle transmission type \" ,hole = 0.7\n      )","fa590fc4":"px.scatter(data_frame = car,y = car['selling_price'],x =  car['kms_driven'],title = 'sp v\/s kms_driven')\n# higher the kms driven lesser the selling price of vehicle would be . ","4a984f08":"# Most of the vehicle owner are trying to sell their vehicle with the help of  dealer  \nplt.rcParams['figure.figsize'] = (8,4)\nsns.countplot(car['seller_type'])","004ce434":"# let's create one new feature .\ncar['cur_year'] = 2020\ncar.head(3)","a2e862e1":"car['year'].max()","15debda5":"# let's create one more new feature called . \ncar['years_used'] = car['cur_year'] - car['year']\n\n# drop cur_year and year feature from the dataset .\ncar.drop(['cur_year','year'],axis = 1,inplace = True)\ncar.head(3)","c8a4341d":"px.scatter(data_frame = car,x = car['years_used'],y =  car['selling_price'],title = 'years_used v\/s sp',color = 'years_used')\n# higher the years_used lesser the selling price of vehicle would be . ","40ed757a":"px.bar(x = car['years_used'].value_counts().index , y =car['years_used'].value_counts().values,\n       color = car['years_used'].value_counts().index,title = 'years used',labels = {\"x\":'years used',\"y\":\"count\"})","b9c4390b":"new_df = pd.pivot_table(car, index = ['years_used'],values = 'kms_driven')\npx.pie(names = new_df.index ,values = new_df.values,title = 'years used v\/s kms_driven' )\n# Higher the years used higher the kms_driven will be .","c94ef53f":"# we can see the linear relationship between sp v\/s pp .\nsns.scatterplot(x = car['selling_price'],y =  car['present_price'])\nplt.title('selling_price v\/s present_price')","d6e09d19":"sns.boxplot(car['present_price'])","81b8844f":"q1 = car['present_price'].quantile(0.25)\nq3 = car['present_price'].quantile(0.75)\niqr = q3 - q1\nlb = q1 - iqr*1.5\nub = q3 + iqr*1.5\nlb,ub\n\n# -11 is meaningless, price can't be negative .\n\n# 22.8 only few  of the vehicle present price is greater than 20 lakhs  .","7eb6700a":"print(\"Vehicle  present prices which are acting has outlier :\")\ncar[car['present_price'] >= 22.8 ][['car_name','present_price','selling_price']]","a3f2a4ad":"sns.pairplot(car)","acaaeee6":"plt.figure(figsize=(15,8))\nsns.heatmap(car.corr(),annot = True)","d4a1acfa":"# let's drop unwanted features \ncar.drop(['car_name','owner'],axis = 1,inplace = True)\ncar.head(2)","2f278061":"# convert categorical variable into numerical variable . \ncar = pd.get_dummies(car,drop_first = True)\ncar.head(2)","3f3e914f":"from sklearn.metrics import mean_squared_error,r2_score\nfrom sklearn.ensemble import RandomForestRegressor\nfrom sklearn.model_selection import train_test_split,RandomizedSearchCV","3fa41aaa":"x = car.drop('selling_price',axis = 1)\ny = car['selling_price']","c0b262e4":"xtrain,xtest,ytrain,ytest = train_test_split(x,y,test_size = 0.3,random_state = 33)\nprint(\"Training data : \",xtrain.shape, ytrain.shape)\nprint(\"Testing data  : \",xtest.shape, ytest.shape)","d0b58db7":"rf = RandomForestRegressor()","e4012f88":"param_grid = {\n     \n    'n_estimators' : [50,100,150,250,300,350],\n     'max_depth'   : [i for i in range(7,25)] , \n     'min_samples_split' : [i for i  in range(5,25)],\n     'min_samples_leaf' : [2,3,4,7,10]\n}","d52b9a25":"# using 10 fold\nrf = RandomizedSearchCV(estimator = rf,param_distributions = param_grid,n_jobs = 1,cv = 10)","4a5282a2":"rf.fit(xtrain,ytrain)","b8d273e3":"print(\"best parameters : \")\nrf.best_params_","27c4f4ee":"# make prediction \npred = rf.predict(xtest)","375658dc":"print(\"MSE value is : \",mean_squared_error(ytest,pred))\nprint(\"r2  value is : \",r2_score(ytest,pred))\nr2 = r2_score(ytest,pred)\nn = len(xtest)\nk = xtest.shape[1]\nadj_r2_score = 1 - (((1- r2)*(n-1)) \/ (n - k - 1))\nprint(\"adj_r2_score  value is : \",adj_r2_score)","1f17babf":"plt.scatter(ytest,pred)\nplt.xlabel('actual')\nplt.ylabel('predict')","7a3def82":"# Although this is simple analysis ,the dataset is too small so we cannot explore further .\n","2eefec83":"Dataset link : https:\/\/www.kaggle.com\/nehalbirla\/vehicle-dataset-from-cardekho\/kernels","6a8c5e9d":"# 8. years_used v\/s selling price . ","feda3cd4":"This dataset contains information about used cars listed on www.cardekho.com\nThis data can be used for a lot of purposes such as price prediction to exemplify the use of linear regression in Machine Learning.","4c250d85":"# Let's see the correlation among features . ","1b5c4a22":"## present_price","771ced6c":"# Let's see the distribution of all the features ","4093d812":"# Explanatory Data Analysis ","7d82f306":"# outlier detection ","df49a37a":"# Thank You :) ","3fb7bc3c":"# Model Building ","a4d2f84c":"## 1. Which vehicle got highest price ? ","d1edd3ce":"# 10 . years used v\/s kms_driven . ","46caf64b":"# pred v\/s actual ","bc55fc2a":"# 5. which type of fuel used by most of the vehicle ?","1737cd8d":"# 5. which type of transmission used by most of the vehicle ?","3a7eb49b":"## 9 . what is the count of vehicle which are available depending upon  years_used ?","011cfcaf":"# 4 . selling_price v\/s present_price ? ","33c67d11":"# 7. seller type ","ca05c96f":"## 3 . which year more number of vehicle  are being availabel for second's  ?","98878fab":"# 2. which top 10 vehicle company is in more for sale ?","06e79d40":"# From the plot  we can conclude that\n\n  *  selling price of  vehicle is lesser than it's present price  ,it might be due to less demand or more usage of that \n      particular vehicle . ","2b5c48e7":"# 6.  Relationship between selling price v\/s kms_driven"}}