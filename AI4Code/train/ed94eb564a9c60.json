{"cell_type":{"c6196127":"code","1e8bb873":"code","4f586327":"code","aa30bdc0":"code","e5814399":"code","a6f65185":"code","e38e06cc":"code","fc6673c0":"code","10a9228a":"code","2e9bd7eb":"code","7755c211":"code","95138713":"markdown","2dc6fda8":"markdown","d1b86d8b":"markdown","6a58d9b6":"markdown","8c30d868":"markdown","abfb24e0":"markdown","131c8f2b":"markdown","73ece606":"markdown","16a440b3":"markdown"},"source":{"c6196127":"!pip install chart_studio\n!pip install plotly-geo","1e8bb873":"import pandas as pd\nimport numpy as np\nimport json\n\nimport plotly.offline as py\nimport plotly.express as px\nimport plotly.figure_factory as ff\n\nwith open('..\/input\/geojson-counties-fips\/geojson-counties-fips.json') as response:\n    counties = json.load(response)","4f586327":"us_covid_df = pd.read_csv(\"..\/input\/coronavirus-covid19-data-in-the-united-states\/us-states.csv\")\nus_covid_df.head()","aa30bdc0":"us_covid_country_wise_df = pd.read_csv(\"..\/input\/coronavirus-covid19-data-in-the-united-states\/us-counties.csv\")\nagg_us_covid_country_wise_df = us_covid_country_wise_df[['state', 'county', 'cases', 'deaths', 'fips']].groupby(by=['state', 'fips', 'county'], as_index=False).sum()\nus_covid_country_wise_df.head()","e5814399":"state_to_st_dict = {\n    \"Alabama\": \"AL\",\n    \"Alaska\": \"AK\",\n    \"American Samoa\": \"AS\",\n    \"Arizona\": \"AZ\",\n    \"Arkansas\": \"AR\",\n    \"California\": \"CA\",\n    \"Colorado\": \"CO\",\n    \"Northern Mariana Islands\": \"MP\",\n    \"Connecticut\": \"CT\",\n    \"Delaware\": \"DE\",\n    \"District of Columbia\": \"DC\",\n    \"Florida\": \"FL\",\n    \"Georgia\": \"GA\",\n    \"Guam\": \"GU\",\n    \"Hawaii\": \"HI\",\n    \"Idaho\": \"ID\",\n    \"Illinois\": \"IL\",\n    \"Indiana\": \"IN\",\n    \"Iowa\": \"IA\",\n    \"Kansas\": \"KS\",\n    \"Kentucky\": \"KY\",\n    \"Louisiana\": \"LA\",\n    \"Maine\": \"ME\",\n    \"Maryland\": \"MD\",\n    \"Massachusetts\": \"MA\",\n    \"Michigan\": \"MI\",\n    \"Minnesota\": \"MN\",\n    \"Mississippi\": \"MS\",\n    \"Missouri\": \"MO\",\n    \"Montana\": \"MT\",\n    \"Nebraska\": \"NE\",\n    \"Nevada\": \"NV\",\n    \"New Hampshire\": \"NH\",\n    \"New Jersey\": \"NJ\",\n    \"New Mexico\": \"NM\",\n    \"New York\": \"NY\",\n    \"North Carolina\": \"NC\",\n    \"North Dakota\": \"ND\",\n    \"Ohio\": \"OH\",\n    \"Oklahoma\": \"OK\",\n    \"Oregon\": \"OR\",\n    \"Pennsylvania\": \"PA\",\n    \"Puerto Rico\": \"\",\n    \"Rhode Island\": \"RI\",\n    \"South Carolina\": \"SC\",\n    \"South Dakota\": \"SD\",\n    \"Tennessee\": \"TN\",\n    \"Texas\": \"TX\",\n    \"Virgin Islands\": \"VI\",\n    \"Utah\": \"UT\",\n    \"Vermont\": \"VT\",\n    \"Virginia\": \"VA\",\n    \"Washington\": \"WA\",\n    \"West Virginia\": \"WV\",\n    \"Wisconsin\": \"WI\",\n    \"Wyoming\": \"WY\",\n}\nus_covid_df[\"state-code\"] = us_covid_df.state.apply(lambda state: state_to_st_dict.get(state))\nagg_us_covid_df = us_covid_df[['state', 'state-code', 'cases', 'deaths']].groupby(by=['state', 'state-code'], as_index=False).sum()","a6f65185":"fig = px.choropleth(agg_us_covid_df, geojson=counties, locations='state-code', color='cases', locationmode='USA-states',\n                           scope=\"usa\",\n                           hover_name=\"state\",\n                           labels={'cases':'Number of cases', 'deaths': \"Number of deaths\"}\n                          )\nfig.update_layout(margin={\"r\":0,\"t\":0,\"l\":0,\"b\":0})\nfig.show()","e38e06cc":"fig = px.choropleth(agg_us_covid_df, geojson=counties, locations='state-code', color='deaths', locationmode='USA-states',\n                           scope=\"usa\",\n                           color_continuous_scale=\"OrRd\",\n                           hover_name=\"state\",\n                           labels={'cases':'Number of cases', 'deaths': \"Number of deaths\"}\n                          )\nfig.update_layout(margin={\"r\":0,\"t\":0,\"l\":0,\"b\":0})\nfig.show()","fc6673c0":"fig = px.choropleth(agg_us_covid_country_wise_df, geojson=counties, locations='fips', color='cases',\n                           range_color=(0, 12),\n                           scope=\"usa\",\n                           hover_name=\"county\",\n                           labels={'cases':'Number of cases', 'deaths': \"Number of deaths\"}\n                          )\nfig.update_layout(margin={\"r\":0,\"t\":0,\"l\":0,\"b\":0})\nfig.show()","10a9228a":"fig = px.choropleth(agg_us_covid_country_wise_df.loc[agg_us_covid_country_wise_df['deaths'] > 0], geojson=counties, locations='fips', color='deaths',\n                           color_continuous_scale=\"OrRd\",\n                           range_color=(12, 0),\n                           scope=\"usa\",\n                           hover_name=\"county\",\n                           labels={'cases':'Number of cases', 'deaths': \"Number of deaths\"}\n                          )\nfig.update_layout(margin={\"r\":0,\"t\":0,\"l\":0,\"b\":0})\nfig.show()","2e9bd7eb":"def state_wise_maps(state, state_df):\n    fig = px.choropleth(state_df, geojson=counties, color=\"cases\", scope=\"usa\", hover_name=\"county\",\n                    locations=\"county\", featureidkey=\"county\",\n                    projection=\"mercator\", title=state\n                   )\n    fig.update_geos(fitbounds=\"locations\", visible=False)\n    fig.update_layout(margin={\"r\":0,\"t\":0,\"l\":0,\"b\":0})\n    fig.show()","7755c211":"states = agg_us_covid_country_wise_df.state.unique().tolist()\nfor state in states:\n    state_wise_maps(state, agg_us_covid_country_wise_df.loc[agg_us_covid_country_wise_df['state'] == state])","95138713":"# The Whole United States Graphs","2dc6fda8":"> Reading county wise data","d1b86d8b":"> Imports","6a58d9b6":"> State wise information","8c30d868":"> Loading State data","abfb24e0":"> The number of deaths per state","131c8f2b":"> The number of cases per state","73ece606":"> The number of cases per county","16a440b3":"> The number of deaths per county"}}