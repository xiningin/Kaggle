{"cell_type":{"37f9c573":"code","5d5be5ba":"code","9754dea4":"code","81d6d297":"code","a4a53f26":"code","c3058c17":"code","002ab68f":"code","913fb052":"code","2575dba5":"code","a07e22a0":"code","a4b12735":"code","c8701116":"code","910ca52e":"code","71758cd0":"code","964604f0":"code","f28fbe88":"code","2f6b97ed":"code","a9dd5b37":"code","c44ca87a":"code","72e35c2d":"code","0a1cd1dd":"markdown","092f6ca0":"markdown","18559c9f":"markdown","f5a3edd3":"markdown","4dc55554":"markdown","d06b7a52":"markdown","d279df33":"markdown","71231445":"markdown","2c61a305":"markdown","cd7c5641":"markdown","201b48d9":"markdown","68841cb7":"markdown","9dc194a0":"markdown","6261c7a5":"markdown","5d1c3bef":"markdown","385d4172":"markdown","d4515aad":"markdown","0108d1eb":"markdown","34fc712d":"markdown","f7940090":"markdown","0a7f8a7f":"markdown","f5eabd42":"markdown"},"source":{"37f9c573":"#import library\nimport numpy as np \nimport pandas as pd \nimport matplotlib.pyplot as plt","5d5be5ba":"#import data\ndata = pd.read_csv(\"..\/input\/heart-failure-clinical-data\/heart_failure_clinical_records_dataset.csv\")","9754dea4":"data.info()","81d6d297":"data.head(20)","a4a53f26":"data.describe()","c3058c17":"data.drop(\"time\",axis = 1,inplace = True)","002ab68f":"import seaborn as sns\n\nf, ax = plt.subplots(figsize=(12,12))\nax = sns.heatmap(data.corr(), annot = True,cmap = \"YlGnBu\",vmin = 0,vmax = 1)\n","913fb052":"#age,death_event\n\nbigger_than_sixty_age = data[data.age>=60][[\"age\",\"DEATH_EVENT\"]]\ndeath_rate = (bigger_than_sixty_age.DEATH_EVENT.value_counts()[1]\/bigger_than_sixty_age.DEATH_EVENT.value_counts()[0])*100\n\nprint(\"Bigger than sixty age people count :\",len(bigger_than_sixty_age))\nprint(\"Death Rate in bigger than sixty ages:\",death_rate)\n\nlower_than_sixty_age = data[data.age<60][[\"age\",\"DEATH_EVENT\"]]\ndeath_rate2 = (lower_than_sixty_age.DEATH_EVENT.value_counts()[1]\/lower_than_sixty_age.DEATH_EVENT.value_counts()[0])*100\nprint(\"****************************************************\")\nprint(\"Lower than sixty age people count :\",len(lower_than_sixty_age))\nprint(\"Death Rate in lower than sixty ages:\",death_rate2)","2575dba5":"#serum_creatinine,death_event\n\nnormal_serum_creatinines = data[data.serum_creatinine<=1.35][[\"serum_creatinine\",\"DEATH_EVENT\"]]\nanormal_serum_creatinines = data[data.serum_creatinine>1.35][[\"serum_creatinine\",\"DEATH_EVENT\"]]\n\n\ndeath_rate_of_nsc = (normal_serum_creatinines.DEATH_EVENT.value_counts()[1]\/normal_serum_creatinines.DEATH_EVENT.value_counts()[0])*100\ndeath_rate_of_ansc = (anormal_serum_creatinines.DEATH_EVENT.value_counts()[1]\/normal_serum_creatinines.DEATH_EVENT.value_counts()[0])*100\n\nprint(\"Normal Serum Creatinine People Count : \",len(normal_serum_creatinines))\nprint(\"Normal Serum Creatinine Death Rate : %\",death_rate_of_nsc)\nprint(\"****************************************************\")\nprint(\"Anormal Serum Creatinine People Count :\",len(anormal_serum_creatinines))\nprint(\"Anormal Serum Creatinine Death Rate : %\",death_rate_of_ansc)","a07e22a0":"died_patient = data[data.DEATH_EVENT == 1]\ndied_patient.drop(\"sex\",axis = 1,inplace = True)\ndied_patient","a4b12735":"died_patient[(died_patient.creatinine_phosphokinase<120) & \n            (died_patient.diabetes == 0) &\n            ((died_patient.ejection_fraction)<70) & ((died_patient.ejection_fraction)>55)&\n            (died_patient.anaemia == 0) &\n            ((died_patient.platelets) > 150000) & ((died_patient.platelets) < 450000) &\n            (died_patient.high_blood_pressure == 0) &\n            ((died_patient.serum_creatinine) > 0.50) & ((died_patient.serum_creatinine) < 1.35) &\n            ((died_patient.serum_sodium) > 135) & ((died_patient.serum_sodium) < 145)]","c8701116":"#I will drop 'smoking' in here because it's not directly affective to heart failure.\n\ndied_patient.drop(\"smoking\",axis = 1 ,inplace = True)\ndied_patient.head()","910ca52e":"count_ = len(died_patient[(died_patient.anaemia == 0)])\nprint(count_)\nprint(\"******************\")\ndied_patient[(died_patient.anaemia == 0)]","71758cd0":"count_ = len(died_patient[(died_patient.anaemia == 0) & (died_patient.diabetes == 0)])\nprint(count_)\nprint(\"******************\")\ndied_patient[(died_patient.anaemia == 0) & (died_patient.diabetes == 0)]","964604f0":"count_ = len(died_patient[(died_patient.anaemia == 0) & (died_patient.diabetes == 0) & (died_patient.high_blood_pressure == 0)])\nprint(count_)\nprint(\"******************\")\ndied_patient[(died_patient.anaemia == 0) & (died_patient.diabetes == 0) & (died_patient.high_blood_pressure == 0)]","f28fbe88":"count_ = len(died_patient[(died_patient.anaemia == 0) & (died_patient.diabetes == 0) & (died_patient.high_blood_pressure == 0) & \n            (died_patient.creatinine_phosphokinase > 10) & (died_patient.creatinine_phosphokinase <150)])\nprint(count_)\nprint(\"******************\")\ndied_patient[(died_patient.anaemia == 0) & (died_patient.diabetes == 0) & (died_patient.high_blood_pressure == 0) & \n            (died_patient.creatinine_phosphokinase > 10) & (died_patient.creatinine_phosphokinase <150)]","2f6b97ed":"count_ = len(died_patient[(died_patient.anaemia == 0) & (died_patient.diabetes == 0) & (died_patient.high_blood_pressure == 0) & \n            (died_patient.creatinine_phosphokinase > 10) & (died_patient.creatinine_phosphokinase <150) & \n            (died_patient.ejection_fraction > 55) & (died_patient.ejection_fraction < 70)])\nprint(count_)\nprint(\"******************\")\ndied_patient[(died_patient.anaemia == 0) & (died_patient.diabetes == 0) & (died_patient.high_blood_pressure == 0) & \n            (died_patient.creatinine_phosphokinase > 10) & (died_patient.creatinine_phosphokinase <150) & \n            (died_patient.ejection_fraction > 55) & (died_patient.ejection_fraction < 70)]\n","a9dd5b37":"died_patient.head(10)","c44ca87a":"#Machine Design\n\n#Value creating\ndef create_random_values():\n    creatinine_phos_ = np.random.randint(10,150)\n    anaemia_ = np.random.randint(0,2)\n    diabetes_ = np.random.randint(0,2)\n    high_blood_press_ = np.random.randint(0,2)\n    ejection_fraction_ = np.random.randint(50,80)\n    platelets_ = np.random.randint(100000,500000)\n    serum_creatinine_ = np.random.randint(0,4)\n    serum_sodium_ = np.random.randint(110,150)\n\n    com_list = {\"creat\": creatinine_phos_,\n                \"anaem\" : anaemia_,\n                \"diabet\" : diabetes_,\n                \"hbp\" : high_blood_press_,\n                \"ef\" : ejection_fraction_,\n                \"plat\" : platelets_,\n                \"serum_cre\" : serum_creatinine_,\n                \"serum_sod\" : serum_sodium_}\n    \n    \n    return com_list\n    \n\n#Measure to patient case(how many columns are anormal)\ndef is_dangerous_patient_(com_list):\n    count = 0\n    \n    if com_list[\"creat\"] > 120 : \n        count += 1\n        \n    if com_list[\"anaem\"] == 1:\n        count += 1\n    \n    if com_list[\"diabet\"] == 1:\n        count += 1\n        \n    if com_list[\"hbp\"] == 1:\n        count += 1\n        \n    if com_list[\"ef\"] < 55 or com_list[\"ef\"] > 70:\n        count += 1\n        \n    if com_list[\"plat\"] < 150000 or com_list[\"plat\"] > 450000:\n        count += 1\n        \n    if com_list[\"serum_cre\"] < 0.50 or com_list[\"serum_cre\"] > 1.35:\n        count +=1\n        \n    if com_list[\"serum_sod\"] < 135 or com_list[\"serum_sod\"] > 145:\n        count +=1\n    \n    return count","72e35c2d":"#50 iter_\nfor each in range(50):\n    com_list = create_random_values()\n    count = is_dangerous_patient_(com_list)\n    \n    if count < 3:\n        print(\"Patient Count : {} ----> {}\".format(count,\"Patient is not in danger.\"))\n        \n    elif count == 3:\n        print(\"Patient Count : {} ----> {}\".format(count,\"Patient is in danger.Take him in intensive care\"))\n        \n    elif count > 3 and count < 5:\n        print(\"Patient Count : {} ----> {}\".format(count,\"The patient almost dying.Doctor have to come as fast as soon.\"))\n        \n    elif count >= 5:\n        print(\"Patient Count : {} ----> {}\".format(count,\"The patient died.\"))","0a1cd1dd":"### First of all.I want to say \u0131 m not a professional but \u0131 believe that imagination is most important thing in this world.\u0130f we can imagine we can do.Last word is by Einstein.\n\n### -The true indicator of intelligence is imagination.Don't allow to lose it. -Albert Einstein-\n","092f6ca0":"# US\u0130NG MACH\u0130NE TO PRED\u0130CT HEART FA\u0130LURE","18559c9f":"### I guess we almost arrived.We will find it minimum killer columns count.","f5a3edd3":"# 2 - PREPARE TO DATA","4dc55554":"### **We are seeing if person have old,%61 probability can die,if person not so much old also can die %31 probability.**","d06b7a52":"### Wait.We couldn't find any died patient when all of columns are normal values.But how can we doing this then.Maybe we must try that one by one.\u0130t will be slow but it will be healthly. ","d279df33":"### Normally.That values always moving up-down.Values can change and machine can measure it.But usually it is like that.Thank you for reading.Press the like button and support me.Bye ! ","71231445":"**WE W\u0130LL DO THESE \u0130N ORDER**\n\n1-Exploratory Data Analysis (EDA)\n\n2-Prepare Data to Predict\n\n3-Using Machine to predict Heart Failure.","2c61a305":"### Yes.Finally we found.Look at that.5 columns are normal but anyway patient died because 3 columns are anormal.\n\nThen what we can say about that.\n\n* Minimum 3 columns enough to kill a patient.Then if we can design a measurement when patient's values arrive 3 count,measurement will warn to us and we will understand our patient in dangerous.Okay,can we design a measurement.Yeah,maybe.Let's look.","cd7c5641":"This columns' values are heart failure records values.Then if we know what is the normal values we can understand who can't be heart failure better.So let's find out.\n\n\n\n","201b48d9":"### Okay.Let's make a heatmap to see columns correlations.","68841cb7":"**Let's look data columns if they have any null value?**","9dc194a0":"### As we can see.\u0130f 2 columns normal other columns can kill 28 patients.(28\/96)","6261c7a5":" # **1-EXPLORATORY DATA ANALYS\u0130S**","5d1c3bef":"### Still 19 people can died.Keep going.","385d4172":"\u0130f we look minimum values in each columns.We can understand what is the normal values,For example 'age' column's min values is 40.So we can understand minimum heart failure case happened in 40 age.\u0130f person age lower than 40.Then he won't be heart failure most probably.\n\nWell.Then if our person bigger than 40 ? How can understand it will be heart failure.Then we must look at other values for understand it.\u0130f we know their normal values again we can understand heart failure before it happened.Let's talking about their normal values.\n\n### Normal Values:\n\n* Creatinine_phosphokinase(CPK Enzyme) : 10-120\n* Ejection Fraction : 55-70\n* Platelets : 150000 - 450000\n* Serum Creatinine : 0.50-1.35\n* Serum Sodium : 135-145\n\n### Boolean Values:\n\n* 0 : Positive Value\n* 1 : Negative Value","d4515aad":"**No.Data hasn't any NaN value.So we are lucky.we won't do anything for null values.Let's look at some value of them.So we can recognize them better.**","0108d1eb":"### Let's design our measurement","34fc712d":"### As we can see my hypothesis is True because:\n\n* normal serum creatinine People Count big and it's death rate just %28 \n* anormal serum creatinine People Count lower 3 times than other but it's also death rate %27\n\nYou can ask patient has normal sc value but can die,how?.Because if patient has so anormal values in other columns.Also can die. \n\nThen what will we do? \n\n### We will find how many patient died.And why?\n\n* How many anormal value can kill a patient we will find this and then we can see if it started to be dangerous and we can predict before it happened.   \n\n\nFor example : (Anormal value : 5,patient died.We can see while anormal value : (2-3),we can understand patient in danger.So if we take him intensive care,actually can be good.)\nWe will design a measurement so it will follow that values and if anormal_values count bigger than 2-3 it will warn us.So we can predict before heart failure happened. ","f7940090":"### As we can see if just anaemia is normal other 7 columns can kill a patient(50\/96 people dead).Let's keep going.I guess we will find more.****","0a7f8a7f":"### As we can see.Data columns has so low correlations(positive or negative) with each other.So columns has own values.Their independent variables.Just a few columns has correlations with each other.\n\n### This Columns :\n\n* Age,Death Event(we will examine it)\n* Serum Creatinine,Death Event(we will examine it)\n* Sex,Smoking(\u0130t is not important correlation to predict,so we won't look at that)","f5eabd42":"### Now.\u0130f we find how many normal values in the died patients,we can actually find how many anormal value can kill a patient.You got it.Let's find them."}}