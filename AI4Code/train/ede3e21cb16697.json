{"cell_type":{"cf805a99":"code","35913b0e":"code","3e6a86a8":"code","d6be7b1e":"code","66e88d4f":"code","62c6c698":"code","62a7ee65":"code","1346ffc8":"code","bfa0a1e1":"code","8eaca987":"code","8ceacdcf":"code","85721cc1":"code","080f6d01":"code","216e94e1":"code","f1b932b9":"code","e3deab55":"code","66d2a49b":"code","69060709":"code","f8f1f8c7":"code","69c01d2d":"code","2f8b1809":"code","4f454c9a":"code","6832026c":"code","0a682f32":"code","8c9c60f1":"code","28d19411":"markdown","795ca434":"markdown","88a5f584":"markdown","44a70863":"markdown","2704dad2":"markdown","d099c34f":"markdown","08919c8a":"markdown"},"source":{"cf805a99":"import numpy as np # linear algebra\nimport pandas as pd # data processing, CSV file I\/O (e.g. pd.read_csv)\nimport os\nprint(os.listdir(\"..\/input\"))","35913b0e":"# Read relevent data from categry Access and Proximity to Grocery Store\nAccess = pd.read_excel('..\/input\/food-environment-atlas-data\/DataDownload.xls',sheet_name='ACCESS')\nAccess= Access[['FIPS', 'State', 'County','LACCESS_POP10','LACCESS_LOWI10','LACCESS_HHNV10']]\nAccess.shape\nAccess.head()\nAccess.info()","3e6a86a8":"#Create test data of 2014 for prediction\nAccess_test = pd.read_excel('..\/input\/food-environment-atlas-data\/DataDownload.xls',sheet_name='ACCESS')\nAccess_test = Access_test[['FIPS', 'State', 'County','LACCESS_POP15','LACCESS_LOWI15','LACCESS_HHNV15']]\nAccess_test.head()","d6be7b1e":"# Read relevent data from Store Sheet\nStores = pd.read_excel('..\/input\/food-environment-atlas-data\/DataDownload.xls',sheet_name='STORES')","66e88d4f":"#find retail store decline by difference of 2009 to 2014\n\nStores['total_2009'] = Stores['GROC09'] + Stores['SUPERC09'] + Stores['CONVS09'] + Stores['SPECS09']\nStores['total_2014'] = Stores['GROC14'] + Stores['SUPERC14'] + Stores['CONVS14'] + Stores['SPECS14']\nStores['is_decline'] = Stores['total_2014']- Stores['total_2009']\nStores['is_store_decline'] = Stores['is_decline'].apply(lambda x : 1 if (x<0) else 0   ) ","62c6c698":"Stores=Stores[['FIPS', 'State', 'County','GROC09','GROCPTH09','SUPERC09','SUPERCPTH09','CONVS09','CONVSPTH09','SPECS09','SPECSPTH09','SNAPS12','SNAPSPTH12','is_store_decline']]","62a7ee65":"Stores.head()","1346ffc8":"#Prepare store data for 2014\nStores_test = pd.read_excel('..\/input\/food-environment-atlas-data\/DataDownload.xls',sheet_name='STORES')\nStores_test=Stores_test[['FIPS', 'State', 'County','GROC14','GROCPTH14','SUPERC14','SUPERCPTH14','CONVS14','CONVSPTH14','SPECS14','SPECSPTH14','SNAPS16','SNAPSPTH16']]\nStores_test.head()","bfa0a1e1":"# Read relevent data from Health Sheet\nhealth = pd.read_excel('..\/input\/food-environment-atlas-data\/DataDownload.xls',sheet_name='HEALTH')\nhealth=health[['FIPS', 'State', 'County','PCT_DIABETES_ADULTS08','PCT_OBESE_ADULTS08','RECFAC09']]\nhealth.head()","8eaca987":"# Create test data for 2014\nhealth_test = pd.read_excel('..\/input\/food-environment-atlas-data\/DataDownload.xls',sheet_name='HEALTH')\nhealth_test=health_test[['FIPS', 'State', 'County','PCT_DIABETES_ADULTS13','PCT_OBESE_ADULTS13','RECFAC14']]\nhealth_test.head()","8ceacdcf":"# Read relevent data from SOCIOECONOMIC Sheet\nsocial = pd.read_excel('..\/input\/food-environment-atlas-data\/DataDownload.xls',sheet_name='SOCIOECONOMIC')\nsocial=social[['FIPS', 'State', 'County','MEDHHINC15','METRO13','POPLOSS10','POVRATE15','PERPOV10']]\nsocial.head()","85721cc1":"# Create Data for 2014\nsocial_test = pd.read_excel('..\/input\/food-environment-atlas-data\/DataDownload.xls',sheet_name='SOCIOECONOMIC')\nsocial_test=social_test[['FIPS', 'State', 'County','MEDHHINC15','METRO13','POPLOSS10','POVRATE15','PERPOV10']]\nsocial_test.head()","080f6d01":"BEA = pd.read_excel(\"..\/input\/bureau-of-economic-analysis-data\/Pop_2009.xlsx\",sheet_name='2009')","216e94e1":"BEA.head()","f1b932b9":"BEA.info()","e3deab55":"#Read data for 2014\nBEA_test = pd.read_excel('..\/input\/us-bureau-of-economic-analysis-bea-2014-data\/Pop_2014.xlsx')\nBEA_test.head()","66d2a49b":"#Merging all the data\n\ndf=Stores\ndf=pd.merge(df, Access, on=['FIPS', 'State', 'County'])\ndf=pd.merge(df, health, on=['FIPS', 'State', 'County'])\ndf=pd.merge(df, social, on=['FIPS', 'State', 'County'])\ndf.head()","69060709":"df1= pd.merge(df, BEA, on='FIPS',how='left')\ndf1.head()","f8f1f8c7":"df1 = df1.rename(columns={'State_x': 'State', 'County_x': 'County'})\ndf1.head()","69c01d2d":"df_test=Stores_test\ndf_test=pd.merge(df_test, Access_test, on=['FIPS', 'State', 'County'])\ndf_test=pd.merge(df_test, health_test, on=['FIPS', 'State', 'County'])\ndf_test=pd.merge(df_test, social_test, on=['FIPS', 'State', 'County'])\ndf_test.head()","2f8b1809":"df_test= pd.merge(df_test, BEA_test, on='FIPS',how='left')\ndf_test.head()","4f454c9a":"df_test = df_test.rename(columns={'State_x': 'State', 'County_x': 'County'})\ndf_test = df_test.drop(['County_y','State_y'],axis=1)\ndf_test.head()","6832026c":"#drop missing valued\n#print('before:', df1.shape)\n#df1=df1.dropna(how='any')\n#print('after:', df1.shape)","0a682f32":"df1.to_csv('counties.csv', index=False)","8c9c60f1":"df_test.to_csv('test.csv',index=False)","28d19411":"## Health\n\n1. Adult diabetes rate, 2008 - **PCT_DIABETES_ADULTS08**\n1. Adult obesity rate, 2008 - **PCT_OBESE_ADULTS08**\n1. Recreation & fitness facilities, 2009 - **RECFAC09**","795ca434":"## Bureau of Economic Analysis (BEA) data \n\n1. Population  -  **POP_2009**\n1. Per capita income - **Per_Cap_2009**\n1. Personal income - **Personal_income_2009 **","88a5f584":"## Access \n\n1. Population, low access to store, 2010 - **LACCESS_POP10**\n1. Low income & low access to store, 2010 -** LACCESS_LOWI10**\n1. Households, no car & low access to store, 2010 - **LACCESS_HHNV10**","44a70863":"## **Data Selection**","2704dad2":"## Store\n\nCreate target first by finding difference of sum of all stores in 2009 and 2014\n\nSelecting Features :\n\n1. Grocery stores, 2009 - **GROC09**\n1. Grocery stores\/1,000 pop, 2009 - **GROCPTH09**\n1. Supercenters & club stores, 2009 - **SUPERC09**\n1. Supercenters & club stores\/1,000 pop, 2009 - **SUPERCPTH09**\n1. Convenience stores, 2009 - **CONVS09**\n1. Convenience stores\/1,000 pop, 2009 - **CONVSPTH09**\n1. Specialized food stores, 2009 - **SPECS09**\n1. Specialized food stores\/1,000 pop, 2009 - **SPECSPTH09**\n1. SNAP-authorized stores, 2012 - **SNAPS12**\n1. SNAP-authorized stores\/1,000 pop, 2012 - **SNAPSPTH12**\n","d099c34f":"## Socioeconomic Characteristics\n\n1. Median household income, 2015 - **EDHHINC15**\n1. Metro\/nonmetro counties, 2010 - **METRO13**\n1. Population-loss counties, 2010 - **POPLOSS10**\n1. Poverty rate, 2015 - **POVRATE15**\n1. Persistent-poverty counties, 2010 - **PERPOV10**","08919c8a":"## **The Idea**\n\n* Analyise the data for 2009 for all the parameters which depends on grocery store decline\n* Select the target as advance or decline of grocery store from 2009 to 2014\n* Predict the data from 2014 to get the probability for next 5 years."}}