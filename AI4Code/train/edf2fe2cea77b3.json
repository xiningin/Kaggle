{"cell_type":{"4593bb66":"code","0ad94839":"code","46f7e9a8":"code","062c3192":"code","2502e523":"code","7ddfa008":"code","024ea9ae":"code","b7024eec":"code","19a415da":"code","d931afb6":"code","cbd863c1":"code","f00d93c2":"code","a59e56d9":"code","d80c47d4":"code","a8a88901":"code","88fb4ca9":"code","ab77c7a5":"code","8f950f9d":"code","98c649ad":"code","00b4d3ca":"code","debb995c":"code","e91c7431":"code","fdeb38bc":"code","02626270":"code","dcf257ae":"code","814ebe94":"code","2daf3677":"code","716c3c90":"code","2830c674":"code","62261fc2":"code","54d1c901":"code","9dc60261":"code","505c6c1b":"code","c35af94c":"code","93b1239e":"code","8e92531e":"code","886f3d7b":"code","2e2ab6cd":"code","7d646d30":"code","dd12c5a0":"code","11ae7543":"code","47d9a130":"markdown","f4c2ac4f":"markdown","f4df3fa6":"markdown","a7f32231":"markdown","c89b93e2":"markdown","df3d6da7":"markdown","6381b83c":"markdown","4400c2da":"markdown","ba3f8166":"markdown","0a61f516":"markdown","b6c9c19e":"markdown","f2fa1109":"markdown","9d3e68cc":"markdown","d0262173":"markdown","5252dcbf":"markdown","4340a657":"markdown","381b2f9a":"markdown","95d83f2f":"markdown","c78a0e69":"markdown","7a7828e8":"markdown","aee819a0":"markdown","c6b117f6":"markdown","3d3eeb1f":"markdown","4f25f1d0":"markdown","73c502b7":"markdown","42a28538":"markdown","038e9d5c":"markdown","1910d429":"markdown","a6e4d38e":"markdown","cac8a445":"markdown","5b5a3d0b":"markdown","89f7398c":"markdown"},"source":{"4593bb66":"import pandas as pd\nimport numpy as np\nimport seaborn as sns\nimport matplotlib.pyplot as plt\nimport datetime\n%matplotlib inline","0ad94839":"df= pd.read_csv(\"..\/input\/international-football-results-from-1872-to-2017\/results.csv\")","46f7e9a8":"df.isnull().sum()","062c3192":"df.info() #We will use .info to check the data type of the columns.","2502e523":"df.describe() #Describe will help us to a broad outlier check on the data.","7ddfa008":"df.head()","024ea9ae":"above_20 = df[df[\"home_score\"] >= 20]\nabove_20_a = df[df[\"away_score\"] >= 20]","b7024eec":"above_20.head(15)","19a415da":"above_20_a.head(15)","d931afb6":"def winner(row): #Function for wins\n    if row[\"home_score\"] > row[\"away_score\"]:\n        return row[\"home_team\"]\n    if row[\"home_score\"] == row[\"away_score\"]:\n        return \"Draw\"\n    if row[\"home_score\"] < row[\"away_score\"]:\n        return row[\"away_team\"]\ndef loser (row): #Funcion for lose\n    if row[\"home_score\"] > row[\"away_score\"]:\n        return row[\"away_team\"]\n    if row[\"home_score\"] == row[\"away_score\"]:\n        return \"Draw\"\n    if row[\"home_score\"] < row[\"away_score\"]:\n        return row[\"home_team\"]","cbd863c1":"df[\"Winner\"] = df.apply (lambda row: winner(row), axis=1)\ndf[\"Loser\"] = df.apply (lambda row: loser(row), axis=1)","f00d93c2":"df[\"date\"] = pd.to_datetime(df[\"date\"]) # Converting the colum to datetime","a59e56d9":"df[\"Year\"] = df[\"date\"].dt.year #Extracting the year from the date column\ndf = df[df[\"Year\"] < 2019] #Removing 2019 from the mix","d80c47d4":"scores = df.groupby(\"date\")[\"home_score\",\"away_score\"].agg([\"sum\",\"count\"]) #Using groupby to get the data we need","a8a88901":"scores.info()","88fb4ca9":"scores.columns = [\"Home_Number_goals\", \"Home_Games\",\"Away_Number_goals\", \"Away_Games\"] #Renaming the columns","ab77c7a5":"scores_year = pd.DataFrame(scores[\"Home_Games\"].resample(\"Y\").sum())","8f950f9d":"scores_goals_h = pd.DataFrame(scores[\"Home_Number_goals\"].resample(\"Y\").sum())\nscores_goals_a = pd.DataFrame(scores[\"Away_Number_goals\"].resample(\"Y\").sum())","98c649ad":"scores_goals_a.head()","00b4d3ca":"fig, ax = plt.subplots(figsize=(17, 10))\nplt.style.use('seaborn-darkgrid')\nax.plot(scores_year[\"Home_Games\"], label=\"Games per year\", color=\"black\")\nax.tick_params(labelsize=12)\nplt.legend(loc=0, fontsize=\"large\")\nfig.suptitle(\"Games per Year\", fontsize=20)\n\n\nax.annotate(\"Start of WW2\", xy=('1939', 105),  xycoords='data',size=15,\n            bbox=dict(boxstyle=\"round\", fc=\"none\", ec=\"gray\"),\n            xytext=(-30, -60), textcoords='offset points', ha='center',\n            arrowprops=dict(arrowstyle=\"->\"))\nax.annotate(\"End of WW2\", xy=('1945', 35),  xycoords='data',size=15,\n            bbox=dict(boxstyle=\"round\", fc=\"none\", ec=\"gray\"),\n            xytext=(35, -30), textcoords='offset points', ha='center',\n            arrowprops=dict(arrowstyle=\"->\"))\nax.annotate(\"Start of WW1\", xy=('1914', 35),  xycoords='data',size=15,\n            bbox=dict(boxstyle=\"round\", fc=\"none\", ec=\"gray\"),\n            xytext=(-50, 20), textcoords='offset points', ha='center',\n            arrowprops=dict(arrowstyle=\"->\"))\nax.annotate(\"End of WW1\", xy=('1918', 30),  xycoords='data',size=15,\n            bbox=dict(boxstyle=\"round\", fc=\"none\", ec=\"gray\"),\n            xytext=(-35, -30), textcoords='offset points', ha='center',\n            arrowprops=dict(arrowstyle=\"->\"))\nax.annotate(\"Founding of FIFA\", xy=('1930', 85),  xycoords='data',size=15,\n            bbox=dict(boxstyle=\"round\", fc=\"none\", ec=\"gray\"),\n            xytext=(35, 60), textcoords='offset points', ha='center',\n            arrowprops=dict(arrowstyle=\"->\"))\nax.annotate(\"Founding of AFC\", xy=('1956', 150),  xycoords='data',size=15,\n            bbox=dict(boxstyle=\"round\", fc=\"none\", ec=\"gray\"),\n            xytext=(-35, 60), textcoords='offset points', ha='center',\n            arrowprops=dict(arrowstyle=\"->\"))\nax.annotate(\"Founding of AFCON\", xy=('1957', 200),  xycoords='data',size=15,\n            bbox=dict(boxstyle=\"round\", fc=\"none\", ec=\"gray\"),\n            xytext=(50, -50), textcoords='offset points', ha='center',\n            arrowprops=dict(arrowstyle=\"->\"))\nax.annotate(\"Founding of CONMEBOL\", xy=('1916', 30),  xycoords='data',size=15,\n            bbox=dict(boxstyle=\"round\", fc=\"none\", ec=\"gray\"),\n            xytext=(10, 50), textcoords='offset points', ha='center',\n            arrowprops=dict(arrowstyle=\"->\"))\nax.annotate(\"FIFA-Expansion to 24 teams\", xy=('1982', 500),  xycoords='data',size=15,\n            bbox=dict(boxstyle=\"round\", fc=\"none\", ec=\"gray\"),\n            xytext=(-50, 80), textcoords='offset points', ha='center',\n            arrowprops=dict(arrowstyle=\"->\"))\nax.annotate(\"FIFA-Expansion to 32 teams\", xy=('1998', 850),  xycoords='data',size=15,\n            bbox=dict(boxstyle=\"round\", fc=\"none\", ec=\"gray\"),\n            xytext=(-90, 80), textcoords='offset points', ha='center',\n            arrowprops=dict(arrowstyle=\"->\"))\nax.annotate(\"FIFA-Expansion to 48 teams\", xy=('2013', 1050),  xycoords='data',size=15,\n            bbox=dict(boxstyle=\"round\", fc=\"none\", ec=\"gray\"),\n            xytext=(0, -180), textcoords='offset points', ha='center',\n            arrowprops=dict(arrowstyle=\"->\"))","debb995c":"#5 day SMA\nfig, ax = plt.subplots(figsize=(14, 8))\nax.plot(scores_goals_h, label=\"Mean home goals\")\nax.plot(scores_goals_a, label=\"Mean away goals\")\nax.plot(scores_goals_h.rolling(window=5).mean(), color = \"red\", label=\"Rolling mean of home goals\")\nax.plot(scores_goals_a.rolling(window=5).mean(), color = \"red\", label=\"Rolling mean of away goals\")\nplt.legend(loc=0, fontsize=\"large\")\nfig.suptitle(\"Mean goals per year\", fontsize=20)\nplt.legend()","e91c7431":"h_goals_year = pd.DataFrame(scores[\"Home_Number_goals\"].resample(\"10A\").sum())\na_goals_year = pd.DataFrame(scores[\"Away_Number_goals\"].resample(\"10A\").sum())","fdeb38bc":"h_goals_year[\"Decade\"] = h_goals_year.index\nh_goals_year[\"Decade\"] = h_goals_year[\"Decade\"].dt.year\na_goals_year[\"Decade\"] = a_goals_year.index\na_goals_year[\"Decade\"] = a_goals_year[\"Decade\"].dt.year","02626270":"fig,ax = plt.subplots(figsize=(15,7))\np1 = plt.bar(h_goals_year[\"Decade\"],h_goals_year[\"Home_Number_goals\"],color=\"g\",width=5,label=\"Wins\")\np2 = plt.bar(a_goals_year[\"Decade\"],a_goals_year[\"Away_Number_goals\"],bottom=h_goals_year[\"Home_Number_goals\"],width=5,color=\"r\",label=\"Loses\")\nplt.xticks(h_goals_year[\"Decade\"])\nplt.legend()","dcf257ae":"fig,(ax1,ax2) = plt.subplots(1,2,figsize=(14,7))\nsns.countplot(y = df[\"city\"],order=df[\"city\"].value_counts().index[:15],ax=ax1)\nsns.countplot(y = df[\"country\"],order=df[\"country\"].value_counts().index[:15], ax=ax2)\nfig.suptitle(\"Most frequent locations\", fontsize=20)","814ebe94":"fig,ax = plt.subplots(figsize=(15,7))\nsns.countplot(y = df[\"tournament\"],order=df[\"tournament\"].value_counts().index[:15])\nfig.suptitle(\"Most games per tournament\", fontsize=20)","2daf3677":"best_tournaments = df[df[\"tournament\"].isin(df[\"tournament\"].value_counts().index[:12])]\ndf_cups = best_tournaments.pivot_table(index=best_tournaments[\"date\"],\n                                columns=[\"tournament\"],aggfunc=\"size\", fill_value=0).resample(\"Y\").sum()","716c3c90":"#Test\nplt.style.use('seaborn-darkgrid')\npalette = plt.get_cmap('Set2')\nnum=0\nax,fix = plt.subplots(figsize=(15,7))\nfor column in df_cups:\n    num+=1\n    plt.subplot(3,4, num)\n    for v in df_cups:\n        plt.plot(df_cups.index,v,data=df_cups,marker='', color='black', linewidth=0.9, alpha=0.3)\n        plt.tick_params(labelbottom=False)\n        plt.plot(df_cups.index,column, data=df_cups,color=\"red\", linewidth=2.4, alpha=0.9, label=column)\n        plt.title(column, loc='left', fontsize=12, fontweight=0, color=\"black\")\n        plt.suptitle(\"Historic increase of tournament games \", fontsize=20, fontweight=0, color='black', style='italic', y=1.02)","2830c674":"Fifa_2018_teams = [\"Argentina\",\"Australia\",\"Belgium\",\"Brazil\",\"Colombia\",\"Costa Rica\",\"Croatia\",\"Denmark\",\"Egypt\",\"England\",\"France\",\"Germany\",\"Iceland\",\"Iran\",\"Japan\",\n\"South Korea\",\"Mexico\",\"Morocco\",\"Nigeria\",\"Panama\",\"Peru\",\"Poland\",\"Portugal\",\"Russia\",\"Saudi Arabia\",\"Senegal\",\"Serbia\",\"Spain\",\"Sweden\",\n\"Switzerland\",\"Tunisia\",\"Uruguay\"]\ndf_fifa_teams = df[df[\"Winner\"].isin(Fifa_2018_teams)]","62261fc2":"fifa_teams_wins = df_fifa_teams.groupby([\"Year\",\"Winner\"])[\"Winner\"].agg(\"count\")\nfifa_teams_wins = pd.DataFrame(fifa_teams_wins)\nfifa_teams_wins[\"Country\"] = fifa_teams_wins.index.get_level_values(1)\nfifa_teams_wins[\"Date\"] = fifa_teams_wins.index.get_level_values(0)\n#fifa_teams_lose = df_fifa_teams.groupby([\"Year\",\"Loser\"])[\"Loser\"].agg(\"count\")\n#fifa_teams_lose = pd.DataFrame(fifa_teams_lose)\n#fifa_teams_lose[\"Country\"] = fifa_teams_lose.index.get_level_values(1)\n#fifa_teams_lose[\"Date\"] = fifa_teams_lose.index.get_level_values(0)","54d1c901":"g = sns.FacetGrid(fifa_teams_wins, col=\"Country\", hue=\"Country\", col_wrap=4)\ng = g.map(plt.plot, \"Date\", \"Winner\").set_titles(\"{col_name}\")","9dc60261":"south_america = [\"Brazil\",\"Argentina\",\"Uruguay\",\"Colombia\"]\neurope = [\"Germany\",\"England\",\"France\",\"Spain\"]","505c6c1b":"europe_wins = fifa_teams_wins[fifa_teams_wins[\"Country\"].isin(europe)]","c35af94c":"mean_europe = europe_wins.groupby(\"Year\")[\"Winner\"].agg([\"mean\"])","93b1239e":"fig,[[ax1, ax2],[ax3, ax4]] = plt.subplots(2,2,figsize=(14,7),sharey=True)\n#fig,ax = plt.subplots(2,2,figsize=(14,7))\nax1.plot(\"Date\",\"Winner\",data=europe_wins[europe_wins[\"Country\"]==\"England\"],color=\"r\",label=\"England wins\")\nax1.plot(mean_europe.index,mean_europe[\"mean\"],color = \"black\",label = \"EU mean\")\nax1.title.set_text(\"English wins\")\n\nax2.plot(\"Date\",\"Winner\",data=europe_wins[europe_wins[\"Country\"]==\"France\"],color=\"skyblue\")\nax2.plot(mean_europe.index,mean_europe[\"mean\"],color = \"black\",label = \"EU mean\")\nax2.title.set_text(\"French wins\")\n\nax3.plot(\"Date\",\"Winner\",data=europe_wins[europe_wins[\"Country\"]==\"Germany\"],color=\"y\")\nax3.plot(mean_europe.index,mean_europe[\"mean\"],color = \"black\",label = \"EU mean\")\nax3.title.set_text(\"German wins\")\n\nax4.plot(\"Date\",\"Winner\",data=europe_wins[europe_wins[\"Country\"]==\"Spain\"],color=\"orange\")\nax4.plot(mean_europe.index,mean_europe[\"mean\"],color = \"black\",label = \"EU mean\")\nax4.title.set_text(\"Spanish wins\")","8e92531e":"sa_wins = fifa_teams_wins[fifa_teams_wins[\"Country\"].isin(south_america)]\nsa_mean = sa_wins.groupby(\"Year\")[\"Winner\"].agg([\"mean\"])","886f3d7b":"fig,[[ax1, ax2],[ax3, ax4]] = plt.subplots(2,2,figsize=(14,7),sharey=True)\n\nax1.plot(\"Date\",\"Winner\",data=sa_wins[sa_wins[\"Country\"]==\"Brazil\"],color=\"g\")\nax1.plot(sa_mean.index,\"mean\",data=sa_mean,color=\"black\")\nax1.title.set_text(\"Brazilian wins\")\n\nax2.plot(\"Date\",\"Winner\",data=sa_wins[sa_wins[\"Country\"]==\"Argentina\"],color=\"b\")\nax2.plot(sa_mean.index,\"mean\",data=sa_mean,color=\"black\")\nax2.title.set_text(\"Argentinian wins\")\n\nax3.plot(\"Date\",\"Winner\",data=sa_wins[sa_wins[\"Country\"]==\"Colombia\"],color=\"red\")\nax3.plot(sa_mean.index,\"mean\",data=sa_mean,color=\"black\")\nax3.title.set_text(\"Colombian wins\")\n\nax4.plot(\"Date\",\"Winner\",data=sa_wins[sa_wins[\"Country\"]==\"Uruguay\"],color=\"y\")\nax4.plot(sa_mean.index,\"mean\",data=sa_mean,color=\"black\")\nax4.title.set_text(\"Uruguay wins\")","2e2ab6cd":"fig,ax =plt.subplots(figsize=(14,7))\nax.plot(sa_mean.index,\"mean\",data=sa_mean,color=\"orange\",label=\"SA mean\")\nax.plot(mean_europe.index,\"mean\",data=mean_europe,color=\"skyblue\",label = \"EU mean\")\nax.title.set_text(\"European mean vs SA mean\")\nax.legend()","7d646d30":"europe_goals = df[df[\"home_team\"].isin(europe)]\nsa_goals = df[df[\"home_team\"].isin(south_america)]","dd12c5a0":"f, (ax1,ax2) = plt.subplots(1, 2, figsize=(14, 5), sharex=True)\nsns.distplot(europe_goals[\"home_score\"] , color=\"skyblue\", ax=ax1)\nsns.distplot(sa_goals[\"home_score\"]  , color=\"olive\", ax=ax2)","11ae7543":"f, (ax1,ax2) = plt.subplots(1, 2, figsize=(14, 5), sharex=True)\nsns.distplot(europe_goals[\"away_score\"] , color=\"skyblue\", ax=ax1)\nsns.distplot(sa_goals[\"away_score\"]  , color=\"olive\", ax=ax2)","47d9a130":"To further highlight the number of games, I have made this alternative plot that shows the increase per decade and without the historic landmarks.","f4c2ac4f":"There are no missing values on any column.","f4df3fa6":"First, we are going to import the basic libraries and check the dataset for any missing and inconsistent data. Afterwards, we do a basic check for outliers just to be safe.","a7f32231":"Interestingly enough the city with the most games played is Kuala Lumpur. It should not be too much of a surprise as the \u201cBukit Jalil National Stadium\u201d hosted the AFF & AFC multiple times. They also have multiple stadiums in the city and the country is 4th on the country part of the plot.\n\nRegarding the country with the most games being hosted the US takes the surprising first place with more than a 1000 games hosted.","c89b93e2":"A closer look.\n\nWhile the plot offers some insight I wanted to take a closer look at some national teams. For this purpose I have picked four European and four South American national teams to take a closer look. Please note that I picked these teams more or less randomly from the nations that have a strong football history.\n\nFor Europe I have picked England, France, Germany and Spain. I will compare their yearly number of wins to the mean of the other three. This is the first version of the notebook and I plan to use the mean wins of all European nations in the future (same goes for SA).","df3d6da7":"The Max values look realistic enough, but just be sure we will check them out.","6381b83c":"What tournaments are the most played?","4400c2da":"Another thing I would like to see is the goal distribution between the continents.","ba3f8166":"Finally, we will use the mean wins of these continents as comparison.","0a61f516":"Representing South America in this plot are: Brazil, Argentina, Uruguay and Colombia.We will apply the same plot as above.","b6c9c19e":"Friendly games are the most prominent, it makes sense as most countries tend to play them to prepare from other major tournaments. Also, note that some major tournaments are split between the qualification stage and the actual tournament on the plot.","f2fa1109":"It appears that games with an overwhelming difference in goals are rare, but exist. We can also see that some of them happened during FIFA World Cup qualifications(I am looking at you Australia).","9d3e68cc":"Two columns have a numeric data type, one has a boolean type while the rest is filed under object.","d0262173":"The end?\n\nWell for now, yes. There are still some things that I would like to do with this dataset. Some goals for future updates of this notebook are:\n\n1. Adding Asian and African nations to the detailed comparison.\n2. Using the mean wins of all Europe\/SA national teams.\n3. Comparing the total\/home\/mean goals between nations as a metric of success.\n\nI hope you liked this short notebook and that it hopefully inspired you to do your own EDA.","5252dcbf":"We now have a general idea of the data and we can proceed with making a to-do list.\n\n1.\tWe will take a look at the rows with the Max number of goals over 20 (for both home and away games).\n2.\tWe need to create a row that specifies who won\/lost in the particular game. We will also make it display draws.\n3.\tThe date column needs to be converted to datetime, so we can extract the year for future use.\n4.\tTo keep the years consistent, I will remove 2019 as the year is still incomplete.  ","4340a657":"But what about the goals?\n\nThere is a belief about the \u201cnew\u201d football, where there are less excitement, safer play and fewer goals. Using the dataset we can debunk this myth.","381b2f9a":"The two major observations we can make is that WW2 had a substantial effect on the games played during that period and that there is a spike in games every few years. While the first one is obvious, the second one is due to most of the major tournaments are played every few years. The reason this gets more apparent later on in the dataset is because of two factors:\n1. Most of the football confederations\/tournaments decided to move the games a year before\/after FIFA.\n2. The number of teams added during the FIFA expansion.  \n","95d83f2f":"The plot below represents the total number of games played each year. To add additional insight, I have added some historic events that affected the number of games played (WW1 & WW2), the founding dates of some major football confederations and the dates of major FIFA changes.","c78a0e69":"Hi guys, this notebook contains a general look at the international football games dataset from 1872 until 2019.\n\nMy goal was to offer some interesting data visualization and to take a unique look at the data. Hopefully, this will provide some interesting insights and inspire other people to look deeper into some topics.\n\nFootball is the most popular sport in the world and a source of entertainment for millions. With teams from almost every nation in the world its a highly competitive sport and a source of national pride. In the next segments, we will take a general look at how the game, tournaments and certain nations evolved.\n","7a7828e8":"To better understand the tournament data, I have plotted each major tournament on its own line plot in comparison to the other tournaments. This will allow us to look into the historic evolution of the tournament played and how its growth compares to all others.","aee819a0":"As we can see, there are no substantial differences in the distribution.","c6b117f6":"Where do we play?\n\nBelow, we will take a quick look at the cities and countries were the game is played.","3d3eeb1f":"As we can see there are more goals than ever. Additionally, I have decided to separate home and away goals per year to showcase that statistically there is an advantage while playing on the home stadium.","4f25f1d0":"The raise of football\n\nWhile there is evidence that a kind of football was played in historic civilizations the current form arose in England in the middle of the 19th century. During some of its history, the game was interchangeable with rugby and no clear rules were put in place. The first event that shaped the game as we know today was in 1863 when it was decided that carrying the ball with the hands wasn\u2019t allowed. However, the game has undergone many changes over the years and we are witnessing it evolve even today. The game quickly became popular across the British Empire and soon all over the world.\n \nUsing the data we have available to us, we will look at the historic rise of popularity of the game, mark some historic events(both in the football world and outside it) that had a direct impact on the game and generally look at its evolution.","73c502b7":"The scores dataset will allow us to resample the data more easily and get the insights we want. It consists of the numeric columns of the dataset and the date column that we will use as an index.","42a28538":"Distribution of away goals.","038e9d5c":"Data preperation","1910d429":"We will only use one of the columns to get the number of games per year. The reason for this is that one game has one home and one away team. Summing them would result in an inflated number of games.","a6e4d38e":"The distribution of home goals.","cac8a445":"What about the FIFA 2018 teams?\n\nFor this, we will only take the data from the teams that competed in the 2018 FIFA.\n\nWell, initially I had doubts on if I should include the following plot. There were multiple reasons for this, one of them was that I was unsure if the \u201cwins per year\u201d would give a good metric to define success. The other reason being is that it is a bit difficult to compare as the number of nations that played is a bit high for this kind of comparison. Nevertheless, I decided to leave it in for the following reasons:\n\n1. It gives a general idea of how a national team is doing right now.\n2. It also gives us insight into the football history of that nation.","5b5a3d0b":"We can see that European national teams created a slight lead over their South American counterparts. Of course, we are only looking at the mean wins and these numbers can be inflated by playing against weaker football nations, so we have to remain sceptical.","89f7398c":"Introduction"}}