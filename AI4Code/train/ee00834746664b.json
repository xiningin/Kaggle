{"cell_type":{"6f791c13":"code","52cf8450":"code","0e727ad1":"code","82082580":"code","2a225ede":"code","cd777be1":"code","e967eff1":"code","6152ac52":"code","caa776d2":"code","35bf1404":"code","85bde17a":"code","51f4e029":"code","3cc25e9b":"code","13984b1b":"code","0d0c078d":"code","f78a2b2a":"code","6f314dc3":"code","ff1672e7":"code","dc1a5cb7":"code","4a47dba0":"code","35c415ce":"code","d7223d64":"code","0c3f9b06":"code","5c2b014d":"code","306c3ad8":"code","6508329e":"code","bbdc5410":"code","709ce00c":"code","84e87a1d":"code","5b938755":"code","61a2974d":"code","0df1a30e":"code","e5005a59":"code","f66d883e":"code","c6f3e8dc":"code","d80cdf05":"code","31c806fa":"code","df3f5b00":"code","4d398113":"code","6087cdfa":"code","bd5a5497":"code","549d99e7":"code","5b366907":"code","19a5aa38":"code","1c5cac2c":"code","2444dd36":"code","13189c3d":"code","26d44b72":"code","229a04bd":"markdown","3fee076f":"markdown","4ed79ef4":"markdown","f2251440":"markdown","3bd22479":"markdown"},"source":{"6f791c13":"import numpy as np\nimport pandas as pd \nimport matplotlib.pyplot as plt\nimport seaborn as sns\n","52cf8450":"raw_data=pd.read_csv(r'..\/input\/domestic-violence-in-colombia\/Reporte_Delito_Violencia_Intrafamiliar_Polic_a_Nacional.csv')\nraw_data.head()","0e727ad1":"raw_data.info()","82082580":"raw_data.isnull().sum()","2a225ede":"data=raw_data.copy()\ndata['ARMAS MEDIOS'].fillna(data['ARMAS MEDIOS'].mode()[0], inplace = True)\ndata['GENERO'].fillna(data['GENERO'].mode()[0], inplace = True)\ndata['GRUPO ETARIO'].fillna(data['GRUPO ETARIO'].mode()[0], inplace = True)\ndata['CODIGO DANE'].fillna(data['CODIGO DANE'].mode()[0], inplace = True)","cd777be1":"data.isnull().sum()","e967eff1":"data['ARMAS MEDIOS'].unique()","6152ac52":"data","caa776d2":"plt.figure(figsize=(15,5))\nsns.countplot(x=data['DEPARTAMENTO'])\nplt.xticks(rotation=90)\nplt.show()","35bf1404":"data2=data.copy()\ndata2=data2.drop(['FECHA HECHO', 'CODIGO DANE'], axis=1)\ndata2.head()","85bde17a":"data2['ARMAS MEDIOS'].unique()","51f4e029":"plt.figure(figsize=(15,5))\nsns.countplot(x=data['ARMAS MEDIOS'])\nplt.xticks(rotation=90)\nplt.show()","3cc25e9b":"plt.figure(figsize=(15,5))\nsns.countplot(x=data['CANTIDAD'])\nplt.xticks(rotation=90)\nplt.show()","13984b1b":"data2['ARMAS MEDIOS'] = data2['ARMAS MEDIOS'].map({'ARMA BLANCA \/ CORTOPUNZANTE': 1, 'ARMA DE FUEGO': 2, 'CONTUNDENTES':3, 'CORTANTES': 4, 'CORTOPUNZANTES': 5,'NO REPORTADO': 3, 'PUNZANTES': 6, 'SIN EMPLEO DE ARMAS': 7,\n        'NO REPORTA':3, 'ESCOPOLAMINA': 8 ,'-': 3})","0d0c078d":"data2['ARMAS MEDIOS']","f78a2b2a":"data['MUNICIPIO'].mode()","6f314dc3":"data2['MUNICIPIO']=data2['MUNICIPIO'].replace({'NO REPORTA':  'BOGOT\u00c1 D.C. (CT)', '-': 'BOGOT\u00c1 D.C. (CT)'})","ff1672e7":"data['DEPARTAMENTO'].mode()","dc1a5cb7":"plt.figure(figsize=(15,5))\nsns.countplot(x=data2['DEPARTAMENTO'])\nplt.xticks(rotation=90)\nplt.show()","4a47dba0":"data2['DEPARTAMENTO']=data2['DEPARTAMENTO'].replace({'NO REPORTA':  'CUNDINAMARCA', '-': 'CUNDINAMARCA'})","35c415ce":"plt.figure(figsize=(15,5))\nsns.countplot(x=data['GRUPO ETARIO'])\nplt.xticks(rotation=90)\nplt.show()","d7223d64":"data2['GRUPO ETARIO']=data2['GRUPO ETARIO'].replace({'NO REPORTA': 'ADULTOS'})","0c3f9b06":"plt.figure(figsize=(15,5))\nsns.countplot(x=data2['GRUPO ETARIO'])\nplt.xticks(rotation=90)\nplt.show()","5c2b014d":"data2['GENERO']=data2['GENERO'].replace({'-': 'FEMENINO', 'NO REPORTA': 'FEMENINO'})","306c3ad8":"data2['GENERO'].unique()","6508329e":"data2.head()","bbdc5410":"plt.figure(figsize=(15,5))\nsns.countplot(x=data2['GENERO'])\nplt.xticks(rotation=90)\nplt.show()","709ce00c":"trainx=data2.copy()\ntrainx=trainx.drop('ARMAS MEDIOS', axis=1)\n\ntrainy=data2['ARMAS MEDIOS']","84e87a1d":"trainx_encoded = pd.get_dummies(trainx, columns = ['MUNICIPIO', 'DEPARTAMENTO', 'GENERO','GRUPO ETARIO'])","5b938755":"trainx","61a2974d":"trainx_encoded.columns.unique()","0df1a30e":"trainx_encoded","e5005a59":"from sklearn.model_selection import train_test_split","f66d883e":"X_train, X_test, y_train, y_test = train_test_split(trainx_encoded, trainy, test_size=0.2, random_state=42)","c6f3e8dc":"X_train.info()","d80cdf05":"X_test","31c806fa":"from sklearn.datasets import make_classification\nfrom sklearn.linear_model import LogisticRegression","df3f5b00":"X_train, y_train = make_classification(n_samples=381576, n_features=1059, n_informative=5, n_redundant=5, n_classes=3, random_state=12)\n# define the multinomial logistic regression model\nmodel = LogisticRegression(multi_class='multinomial', solver='lbfgs')\n# fit the model on the whole dataset\nmodel.fit(X_train, y_train)","4d398113":"model.score(X_train, y_train)","6087cdfa":"X_test, y_test = make_classification(n_samples=95394, n_features=1059, n_informative=5, n_redundant=5, n_classes=3, random_state=12)","bd5a5497":"y_pred = model.predict(X_test)","549d99e7":"y_pred","5b366907":"y_test","19a5aa38":"from sklearn.metrics import mean_squared_error\nmean_squared_error(y_test, y_pred)","1c5cac2c":"from sklearn.metrics import accuracy_score\naccuracy_score(y_test, y_pred)","2444dd36":"from sklearn.metrics import r2_score\nr2_score(y_test, y_pred)","13189c3d":"model.score(X_test, y_test)","26d44b72":"print('Train Accuracy: %.2f' % (model.score(X_train, y_train)))\nprint('Test Accuracy: %.2f' % (model.score(X_test, y_test)))","229a04bd":"**Data Cleansing**\n\nAll NA values were replaced with the most frequent value in their column","3fee076f":"**Building a Model**\n\nAs there are multiple discrete outputs, *multinomial logistic regression model* is used for this case\n\n\n","4ed79ef4":"**In order to be able to work with the Weapon's data, it should be mapped with numbers**\n\n","f2251440":"**Visualising the Data**\n","3bd22479":"**Domestic violence in Colombia**\n\n* Data Cleansing\n* Data Visualization\n* Build the Model\n\n"}}