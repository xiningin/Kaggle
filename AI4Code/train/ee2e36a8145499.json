{"cell_type":{"059a1438":"code","0d5279ce":"code","2a4a0e5f":"code","53e7b594":"code","5366d979":"code","c244fad7":"code","df5ca59e":"code","8bb8938b":"code","776376b3":"code","0c6c4b26":"code","5b9f6e13":"code","5fad3db2":"code","ffcd243e":"markdown","b7eadd2d":"markdown","9fcbd7da":"markdown","45806818":"markdown","ed83ae9e":"markdown","247db32f":"markdown"},"source":{"059a1438":"import pandas as pd\nimport numpy as np\nimport matplotlib.pylab as plt\nfrom itertools import cycle\nplt.style.use('ggplot')\ncolor_pal = plt.rcParams[\"axes.prop_cycle\"].by_key()[\"color\"]\ncolor_cycle = cycle(plt.rcParams[\"axes.prop_cycle\"].by_key()[\"color\"])","0d5279ce":"# The files in the dataset\n!ls -lh ..\/input\/covid-19-twitter-chatter\/","2a4a0e5f":"# Loading in data using parquet\nchatter_clean = pd.read_parquet('..\/input\/covid-19-twitter-chatter\/covid_tweet_chatter_clean.parquet')\nchatter_raw = pd.read_parquet('..\/input\/covid-19-twitter-chatter\/covid_tweet_chatter_raw.parquet')\nterms = pd.read_parquet('..\/input\/covid-19-twitter-chatter\/covid_tweet_terms.parquet')\nterms_bg = pd.read_parquet('..\/input\/covid-19-twitter-chatter\/covid_tweet_terms_bigrams.parquet')\nterms_tg = pd.read_parquet('..\/input\/covid-19-twitter-chatter\/covid_tweet_terms_trigrams.parquet')","53e7b594":"# Example Plot\nfig, ax = plt.subplots(figsize=(15, 5))\nterms_tg.query('gram == \"covid 19 vaccine\"').set_index(\"date\")[\"counts\"].plot()\nterms_tg.query('gram == \"covid 19 cases\"').set_index(\"date\")[\"counts\"].plot()\nterms_tg.query('gram == \"tests positive covid\"').set_index(\"date\")[\"counts\"].plot()\nax.set_title('Trigram Tweet Counts over Time')\nplt.legend([\"covid 19 vaccine\", \"covid 19 cases\", \"tests positive covid\"])\nplt.show()","5366d979":"terms.groupby('term')['frequency'] \\\n    .sum().sort_values().tail(10) \\\n    .plot(kind='barh', figsize=(10, 5),\n          title='Top All Time Covid Tweet Terms')","c244fad7":"terms_bg.groupby('gram')['counts'] \\\n    .sum().sort_values().tail(10) \\\n    .plot(kind='barh', figsize=(10, 5),\n          title='Top All Time Covid Tweet Bigrams',\n          color=color_pal[1])","df5ca59e":"terms_tg.groupby('gram')['counts'] \\\n    .sum().sort_values().tail(10) \\\n    .plot(kind='barh', figsize=(10, 5),\n          title='Top All Time Covid Tweet Trigrams',\n          color=color_pal[2])","8bb8938b":"# Calculate the change in average bigram counts between years\nterms_bg['year'] = terms_bg['date'].dt.year\nbg_2020_vs_2021 = terms_bg.groupby(['gram','year'])['counts'] \\\n    .mean().unstack().fillna(0).astype('int')\nbg_2020_vs_2021['change'] = bg_2020_vs_2021[2020] - bg_2020_vs_2021[2021]","776376b3":"np.abs(bg_2020_vs_2021.sort_values('change').head(10)['change']) \\\n    .plot(kind='barh',\n          title='Bigrams increasing in popularity 2020 -> 2021',\n          color=color_pal[5])\nplt.show()","0c6c4b26":"terms_bg.loc[terms_bg['gram'].str.contains('whatshappeninginmyanmar')] \\\n    .groupby('date')['counts'].sum() \\\n    .plot(figsize=(15, 5),\n          title='#whatshappeninginmyanmar tweets had a strong peak in 2021',\n         color=color_pal[5])","5b9f6e13":"np.abs(bg_2020_vs_2021.sort_values('change').tail(10)['change']) \\\n    .plot(kind='barh',\n          title='Bigrams decreasing in popularity 2020 -> 2021',\n          color=color_pal[4])\nplt.show()","5fad3db2":"terms_bg.loc[terms_bg['gram'].str.contains('football')] \\\n    .groupby('date')['counts'].mean() \\\n    .plot(figsize=(15, 5),\n          title='#football tweets had a strong peak in 2020',\n         color=color_pal[4], style='.', ms=8)\nplt.show()","ffcd243e":"## Example Comparing the Use of Three Different Trigrams","b7eadd2d":"# Common terms, bigrams and trigrams\nLets see which terms are tweeted the most in covid related content. The top terms are quite obvious, \"covid\", \"19\", \"coronavirus\" etc.","9fcbd7da":"# Covid19 Twitter Chatter Dataset\n\n- This dataset and notebook was created during a live streaming session on twitch. Check out my channel here: [https:\/\/www.twitch.tv\/medallionstallion_](https:\/\/www.twitch.tv\/medallionstallion_)\n\n- The dataset being used can be found here: https:\/\/www.kaggle.com\/robikscube\/covid-19-twitter-chatter\n\n- The raw data was pulled from this repo: https:\/\/github.com\/thepanacealab\/covid19_twitter\n\nIn the dataset you will find:\n\n- Raw counts of Covid19 Related tweets per minute (`covid_tweet_chatter_raw.csv` or `covid_tweet_chatter_raw.parquet`)\n- Cleaned counts of covid19 related tweets per minute, excluding retweets: (`covid_tweet_chatter_clean.csv` or `covid_tweet_chatter_clean.parquet`)\n- Top 1000 terms per day `covid_tweet_terms`\n- Top 1000 bigrams per day `covid_tweet_terms_bigrams`\n- Top 1000 trigrams per day `covid_tweet_terms_trigrams`\n\nHave fun!","45806818":"# 2020 vs 2021 Tweet Terms","ed83ae9e":"## The Data\nThe data is provided in both csv and parquet format.","247db32f":"## Example of a bigram term that increased from 2020 to 2021"}}