{"cell_type":{"1959fef2":"code","37f52d0f":"code","01d03540":"code","923c722b":"code","8634b2fe":"code","10bea16b":"code","8833633d":"code","37444fe9":"code","7ef850e8":"code","ead0dc26":"code","7103aee9":"code","96078f24":"code","184d9f88":"markdown","d3e097d4":"markdown","b36f9a4b":"markdown","9da43483":"markdown","907478ab":"markdown","e4b6c7d6":"markdown","c5b8ae3a":"markdown"},"source":{"1959fef2":"import os\nimport datetime as dt\nimport numpy as np\nimport pandas as pd\nimport matplotlib.pyplot as plt","37f52d0f":"input_dir = \"..\/input\"\nexamples_dir = os.path.join(input_dir,'cv-data-augmentation-network-predictors-2')\nexamples = pd.read_parquet(os.path.join(examples_dir,'positive_negative_examples.parquet.gzip'))","01d03540":"examples.shape","923c722b":"examples.sample(10)","8634b2fe":"def get_lsi_score(row, questions_topics, user_topics):\n    if ((row['questions_id'] in questions_topics.index) &\n        (row['answer_user_id'] in user_topics.index)):\n        lsi_1 = questions_topics.loc[row['questions_id']].values\n        lsi_2 = user_topics.loc[row['answer_user_id']].values\n        return np.dot(lsi_1,lsi_2) \/ np.sqrt(np.dot(lsi_1,lsi_1) * np.dot(lsi_2,lsi_2))\n    else:\n        return 0.0","10bea16b":"lsi_predictors_dir = os.path.join(input_dir,'cv-feature-engineering-text-scores')\nvocabulary_size = 10000\nnum_topics = 50","8833633d":"questions_topics = pd.read_parquet(\n    os.path.join(lsi_predictors_dir,\n                 'questions_topics_vs_{}_nt_{}.parquet.gzip'.format(vocabulary_size, num_topics)))\nquestions_topics.head(2)","37444fe9":"merged_user_topics = pd.read_parquet(\n    os.path.join(lsi_predictors_dir,\n                 'merged_user_topics_vs_{}_nt_{}.parquet.gzip'.format(vocabulary_size, num_topics)))\nmerged_user_topics.head(2)","7ef850e8":"%%time\nexamples['LSI_Score'] = examples.apply(get_lsi_score, axis=1, \n                                       questions_topics=questions_topics,\n                                       user_topics=merged_user_topics)\nexamples['LSI_Score'] = examples['LSI_Score'].fillna(0)","ead0dc26":"examples['LSI_Score'].describe()","7103aee9":"examples.to_parquet('positive_negative_examples.parquet.gzip', compression='gzip')","96078f24":"os.listdir()","184d9f88":"## II.2. Loading LSI Scores for Questions ##","d3e097d4":"# I. Loading the Supevised Machine Learning Data Set ##","b36f9a4b":"## II.4. Adding LSI Scores for Pairs of Questions and Professionals ##","9da43483":"## II.3. Loading LSI Scores for Merged  User Texts ##","907478ab":"## II.1. LSI Score Functions ##","e4b6c7d6":"# III. Saving the Augmented Data Set #","c5b8ae3a":"# II. Computing LSI Scores and Adding to the Data Set ##"}}