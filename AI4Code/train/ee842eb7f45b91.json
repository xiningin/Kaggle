{"cell_type":{"d67bd475":"code","235eab9b":"code","d8957f33":"markdown","55b7df38":"markdown","bcc62436":"markdown","e823bb46":"markdown","fc1f9c23":"markdown","922683cb":"markdown","e44108c9":"markdown","d44ff12d":"markdown","f05b000d":"markdown","724efc87":"markdown","c85d4912":"markdown","31095e7d":"markdown","74b307aa":"markdown","55b484d3":"markdown","9d1fe89a":"markdown","80871f58":"markdown","1b5a71bc":"markdown","6dc3afa9":"markdown"},"source":{"d67bd475":"from pandas.io.json import json_normalize\nimport requests\nimport pandas as pd\nimport numpy as np\nimport time","235eab9b":"my_api = 'your api key'","d8957f33":"challenger user dataframe\n\n    challenger_user = pd.merge(summoner_df_first,\\\n             challenger_df.loc[:,['summonerId','leaguePoints','rank','wins','losses']],\\\n             left_on = 'id', right_on = 'summonerId', how='left').drop(columns='summonerId')","55b7df38":"### 2-2. grandmaster user","bcc62436":"### 1-1. Challenger league","e823bb46":"### 1-3. master league","fc1f9c23":"### 2-1. challenger user","922683cb":"grandmaster user\n\n    summoner_df = pd.DataFrame()\n\n    for i in range(len(grmaster_df)):\n        summoner = 'https:\/\/kr.api.riotgames.com\/lol\/summoner\/v4\/summoners\/{}?api_key='.\\\n                    format(grmaster_df['summonerId'].iloc[i]) + my_api\n\n        req = requests.get(summoner)\n        print(req.status_code)\n\n        if req.status_code == 200:\n            pass\n        elif req.status_code == 429:\n            while True: # while loop because of riot api cost\n                if req.status_code == 429: #429 error is api cost issue\n                    print('429 delay try 10 second') #approximate 110 second wait\n                    time.sleep(10)\n\n                    summoner = 'https:\/\/kr.api.riotgames.com\/lol\/summoner\/v4\/summoners\/{}?api_key='.\\\n                            format(grmaster_df['summonerId'].iloc[i]) + my_api\n\n                    req = requests.get(summoner)\n                    print(req.status_code)\n\n                elif req.status_code == 200:\n                    print('limit cost resolve')\n                    break\n\n        summoner_df0 = json_normalize(req.json())\n\n        summoner_df = summoner_df.append(summoner_df0)","e44108c9":"grandmaster user dataframe\n\n    grmaster_user = pd.merge(summoner_df_second,\\\n             grmaster_df.loc[:,['summonerId','leaguePoints','rank','wins','losses']],\\\n             left_on = 'id', right_on = 'summonerId', how='left').drop(columns='summonerId')","d44ff12d":"master user\n\n    summoner_df = pd.DataFrame()\n\n    for i in range(len(master_df)):\n        summoner = 'https:\/\/kr.api.riotgames.com\/lol\/summoner\/v4\/summoners\/{}?api_key='.\\\n                    format(master_df['summonerId'].iloc[i]) + my_api\n\n        req = requests.get(summoner)\n        print(req.status_code)\n\n        if req.status_code == 200:\n            pass\n        elif req.status_code == 429:\n            while True: # while loop\ub85c api\uc81c\ud55c \ube44\uc6a9\uc744 \ud480 \uc218 \uc788\uc744 \ub54c\uae4c\uc9c0 \uc2e4\ud589\n                if req.status_code == 429:\n                    print('429 delay try 10 second') #\ub300\ub7b5\uc801\uc73c\ub85c 110\ucd08 \uae30\ub2e4\ub9ac\uba74 \ub420 \ub4ef\ud55c\ub370 10\ucd08\ub85c \ubc14\uafd4\uc11c \ub9c8\uc2a4\ud130 \uc2e4\ud5d8 \ud574\ubd10\uc57c\ud560 \ub4ef\n                    time.sleep(10)\n\n                    summoner = 'https:\/\/kr.api.riotgames.com\/lol\/summoner\/v4\/summoners\/{}?api_key='.\\\n                            format(master_df['summonerId'].iloc[i]) + my_api\n\n                    req = requests.get(summoner)\n                    print(req.status_code)\n\n                elif req.status_code == 200:\n                    print('limit cost resolve')\n                    break\n\n        summoner_df0 = json_normalize(req.json())\n\n        summoner_df = summoner_df.append(summoner_df0)","f05b000d":"# 2. league summoner data\n    - challenger user\n    - grandmaster user\n    - master user","724efc87":"master league\n\n    master = 'https:\/\/kr.api.riotgames.com\/lol\/league\/v4\/masterleagues\/by-queue\/RANKED_SOLO_5x5?api_key=' + my_api\n    req = requests.get(master)\n    master_df = json_normalize(req.json()['entries'])\n\n    master_df = master_df.sort_values('leaguePoints',ascending = False)","c85d4912":"# 1. League data\n    - challenger league\n    - grandmaster league\n    - master league","31095e7d":"master user\n\n    master_user =  pd.merge(master_user0,\\\n             master_df.loc[:,['summonerId','leaguePoints','rank','wins','losses']],\\\n             left_on = 'id', right_on = 'summonerId', how='left').drop(columns='summonerId')","74b307aa":"challenger_data\n\n    chall = 'https:\/\/kr.api.riotgames.com\/lol\/league\/v4\/challengerleagues\/by-queue\/RANKED_SOLO_5x5?api_key=' + my_api\n    req = requests.get(chall)\n    challenger_df = json_normalize(req.json()['entries'])\n\n    challenger_df = challenger_df.sort_values('leaguePoints',ascending = False)","55b484d3":"grandmaster league\n\n    grmaster = 'https:\/\/kr.api.riotgames.com\/lol\/league\/v4\/grandmasterleagues\/by-queue\/RANKED_SOLO_5x5?api_key=' + my_api\n    req = requests.get(grmaster)\n    grmaster_df = json_normalize(req.json()['entries'])\n\n    grmaster_df = grmaster_df.sort_values('leaguePoints',ascending = False)","9d1fe89a":"### 2-3. master user","80871f58":"### 1-2. grandmaster league","1b5a71bc":"challenger user\n\n    summoner_df = pd.DataFrame()\n\n    for i in range(len(challenger_df)):\n        summoner = 'https:\/\/kr.api.riotgames.com\/lol\/summoner\/v4\/summoners\/{}?api_key='.\\\n                    format(challenger_df['summonerId'].iloc[i]) + my_api\n\n        req = requests.get(summoner)\n        print(req.status_code)\n\n        if req.status_code == 200:\n            pass\n        elif req.status_code == 429:\n            while True: # while loop because of riot api cost\n                if req.status_code == 429: #429 error is api cost issue\n                    print('429 delay try 10 second') #approximate 110 second wait\n                    time.sleep(10)\n\n                    summoner = 'https:\/\/kr.api.riotgames.com\/lol\/summoner\/v4\/summoners\/{}?api_key='.\\\n                            format(challenger_df['summonerId'].iloc[i]) + my_api\n\n                    req = requests.get(summoner)\n                    print(req.status_code)\n\n                elif req.status_code == 200:\n                    print('limit cost resolve')\n                    break\n\n        summoner_df0 = json_normalize(req.json())\n\n        summoner_df = summoner_df.append(summoner_df0)","6dc3afa9":"all notebook is markdown\n\nbecause of api key is unique"}}