{"cell_type":{"5d502b9b":"code","1cc00765":"code","b9ace7e9":"code","c5f44659":"code","fc2dab0e":"code","99c18de3":"code","e6311f8a":"code","9d860a3a":"code","5134b871":"code","3c46c71e":"code","30b90d4c":"code","116843c0":"code","0fda3ce8":"code","e851dcfd":"code","4476d234":"code","207baca2":"code","ddf4c433":"code","a666c24f":"code","83c96596":"code","90669f7f":"code","3ddfb2e8":"code","cc0b152c":"code","66a7e698":"code","4300bc9d":"code","ac5afcde":"code","c2ce5713":"code","fd1e6996":"code","fad7db27":"code","1dbf417e":"code","8428fc7e":"code","01c1ec55":"code","e7526f84":"code","e260b5a9":"markdown","bf24027a":"markdown","ada9eb4b":"markdown","9f0e7c83":"markdown","fb21ed4d":"markdown","3489e3ba":"markdown","5266df21":"markdown","01ed239a":"markdown","7c6d909d":"markdown","a79aa2e6":"markdown","108561ee":"markdown","1ba443c9":"markdown","14ef2263":"markdown","6d053118":"markdown","6a7ed71f":"markdown","66c3611a":"markdown","448630b0":"markdown","f477dcf3":"markdown","92ddf73f":"markdown","47ca6149":"markdown","f3c8314c":"markdown","0b958328":"markdown","c8597dbd":"markdown","283e9321":"markdown","d2a84a63":"markdown","83ee5bac":"markdown"},"source":{"5d502b9b":"import numpy as np\nimport pandas as pd\nimport seaborn as sb\nimport matplotlib.pyplot as plt\nimport re\nimport plotly_express as px\nfrom plotly.subplots import make_subplots\nfrom plotly.offline import plot, iplot, init_notebook_mode\nimport plotly.graph_objects as go\ninit_notebook_mode(connected=True)\nimport math\nimport warnings\nwarnings.filterwarnings('ignore')\nimport os\nfor dirname, _, filenames in os.walk('\/kaggle\/input'):\n    for filename in filenames:\n        print(os.path.join(dirname, filename))\n\n\nsb.set(style='darkgrid')\npd.set_option('display.max_rows', 500)\npd.set_option('display.max_columns', None)\npd.set_option(\"display.max_colwidth\", -1)\npd.set_option('display.width', 1000)","1cc00765":"ks_2019 = pd.read_csv(\"\/kaggle\/input\/kaggle-survey-2019\/multiple_choice_responses.csv\")","b9ace7e9":"ks_2019.head(1)","c5f44659":"responses = pd.read_csv('\/kaggle\/input\/kaggle-survey-2020\/kaggle_survey_2020_responses.csv')\nresponses.head(1)","fc2dab0e":"#This data frame will be enriched as we proceed with the data.\nresponse_data = pd.DataFrame() \nresponse_data['time_taken'] = responses['Time from Start to Finish (seconds)'][1:]\nresponse_data['age'] = responses['Q1'][1:]\nresponse_data['gender'] = responses['Q2'][1:]\nresponse_data['country'] = responses['Q3'][1:]\nresponse_data['highest_education'] = responses['Q4'][1:]\nresponse_data['job_title'] = responses['Q5'][1:]\nresponse_data['experience'] = responses['Q6'][1:]\nresponse_data['recommended_language'] = responses['Q8'][1:]\nresponse_data['computing_platform'] = responses['Q11'][1:]\nresponse_data['use_of_tpu'] = responses['Q13'][1:]\nresponse_data['ml_exp_years'] = responses['Q15'][1:]\nresponse_data['size_of_company'] = responses['Q20'][1:]\nresponse_data['emp_in_ds_dept'] = responses['Q21'][1:]\nresponse_data['ml_in_company'] = responses['Q22'][1:]\nresponse_data['salary'] = responses['Q24'][1:]\nresponse_data['ml_cc_spend'] = responses['Q25'][1:]\nresponse_data['big_data_products'] = responses['Q30'][1:]\nresponse_data['bi_tools'] = responses['Q32'][1:]\nresponse_data['analysis_tools'] = responses['Q38'][1:]","99c18de3":"#Shortening the names of the country.\nresponse_data['country'] = response_data['country'].replace({'United States of America':'USA', 'United Kingdom of Great Britain and Northern Ireland':'UK', 'Republic of Korea': 'Korea', 'Iran, Islamic Republic of...':'Iran'})","e6311f8a":"def isNan(num):\n    return num != num\n\ndef get_avg_X(val):\n    val = str(val)\n    val = val.replace(',','')\n    val_list = re.findall(r'\\d+', val)\n    val_list = list(map(int, val_list))\n    try:\n        return (sum(val_list)\/len(val_list))\n    except:\n        return 0\n    \ndef get_max_in_range(val):\n    val = str(val)\n    val = val.replace(',','')\n    val_list = re.findall(r'\\d+', val)\n    val_list = list(map(int, val_list))\n    try:\n        return max(val_list)\n    except:\n        return 0\n    \ndef get_avg_exp(exp):\n    exp = str(exp)\n    exp_list = re.findall(r'\\d+', exp)\n    exp_list = list(map(int, exp_list))\n    try:\n        return (sum(exp_list)\/len(exp_list))\n    except:\n        return 0","9d860a3a":"response_data['salary_avg'] = response_data['salary'].apply(lambda x: get_avg_X(x))\nresponse_data['ml_cc_spend_avg'] = response_data['ml_cc_spend'].apply(lambda x: get_avg_X(x))","5134b871":"response_data['max_size_of_company'] = response_data['size_of_company'].apply(lambda x: get_max_in_range(x))\nresponse_data['max_emp_in_ds_dept'] = response_data['emp_in_ds_dept'].apply(lambda emp: get_max_in_range(emp))","3c46c71e":"ds = ['Data Scientist', 'Data Analyst', 'Data Engineer', 'Machine Learning Engineer']\nnot_ds_df = response_data[~(response_data['job_title'].isin(ds))]\nnot_ds_df['job_title'].value_counts()","30b90d4c":"response_data['time_taken'] = response_data['time_taken'].astype(int)\nresponse_data['time_taken'].max()\nprint(f\"Maximum time taken to complete the survey: {response_data['time_taken'].max()} seconds\\nMinimum time taken to complete the survey: {response_data['time_taken'].min()} seconds\")","116843c0":"fig = plt.figure(figsize=(10,8))\nsb.countplot(y=response_data['gender'], order=response_data['gender'].value_counts().index)\nfig.show()","0fda3ce8":"'''\n> <h3>What Algorithms people prefer or have worked on the most?\n\nresponse_data['Linear_Logis_Algo'] = responses[responses.columns[82]][1:]\nresponse_data['Trees_Algo'] = responses[responses.columns[83]][1:]\nresponse_data['Grad_Algo'] = responses[responses.columns[84]][1:]\nresponse_data['Baye_Algo'] = responses[responses.columns[85]][1:]\nresponse_data['Evo_Approch'] = responses[responses.columns[86]][1:]\nresponse_data['DNN'] = responses[responses.columns[87]][1:]\nresponse_data['CNN'] = responses[responses.columns[88]][1:]\nresponse_data['GAN'] = responses[responses.columns[89]][1:]\nresponse_data['RNN'] = responses[responses.columns[90]][1:]\nresponse_data['Trans_Network'] = responses[responses.columns[91]][1:]\nresponse_data['None_algo'] = responses[responses.columns[92]][1:]\nresponse_data['Other_Algo'] = responses[responses.columns[93]][1:]\n\nalgorithms = pd.DataFrame()\nalgorithms = pd.concat([response_data['Linear_Logis_Algo'], response_data['Trees_Algo'], response_data['Grad_Algo'], response_data['Baye_Algo'], \n                        response_data['Evo_Approch'], response_data['DNN'], response_data['CNN'], response_data['GAN'], response_data['RNN'], \n                        response_data['Trans_Network']], axis=1)\n\nmelt_algorithms = pd.melt(algorithms)\nmelt_algorithms = melt_algorithms.set_index('variable')\nmelt_algorithms.columns = ['algorithms']\n\nfig, ax = plt.subplots(figsize=(18,9))\nsb.countplot(y='algorithms', data=melt_algorithms, order=melt_algorithms['algorithms'].value_counts().index, palette='nipy_spectral')'''","e851dcfd":"response_data_ds_comm = response_data[(response_data['job_title']=='Data Scientist') | (response_data['job_title']=='Data Analyst') | (response_data['job_title']=='Data Engineer') | (response_data['job_title']=='Machine Learning Engineer')]","4476d234":"fig = plt.figure(figsize=(20,15))\nsb.countplot(y=response_data['country'], order=response_data['country'].value_counts().index)\nfig.show()","207baca2":"top_4_countries = np.delete(response_data['country'].value_counts()[:5].index, 2).tolist()\ntop_6_countries = np.delete(response_data['country'].value_counts()[:7].index, 2).tolist()","ddf4c433":"def top_n_countries(n):\n    return np.delete(response_data['country'].value_counts()[:(n+1)].index, 2).tolist()","a666c24f":"n=10\ntop_10_countries = tuple(top_n_countries(n))\ncol=int(n\/2)\n\nfig = make_subplots(rows=  2, cols = col,\n                  specs = [[{'type':'pie'}]*col,\n                          [{'type':'pie'}]*col],\n                  subplot_titles = top_10_countries)\n\ncount=0\nfor i in range(1,3):\n    for j in range(1,col+1):\n        gd = response_data[response_data['country']==top_10_countries[count]]['gender'].value_counts()\n        fig.add_trace(go.Pie(labels=gd.index , values=gd.values) , row=i , col=j)\n        count+=1\nfig.show()","83c96596":"def country_with_highest_pecentage_of(gender, n):\n    '''\n    This method will return a dataframe grouped and sorted by the input parameter gender.\n    '''\n    count_genders = response_data.groupby(['country', 'gender']).count()['time_taken']\n    count_gender_percentage = count_genders.groupby(level=0).apply(lambda x: 100 * x \/ float(x.sum()))\n    count_gender_percentage_sorted = count_gender_percentage.unstack(level=1).sort_values(gender, ascending=True)\n    return count_gender_percentage_sorted[:n]\n\n\nminority = tuple(np.delete(response_data['gender'].unique(), 0))\n\nfig = make_subplots(rows=  4, cols = 1,\n                    specs = [[{'type':'bar'}]]*len(minority),\n                    subplot_titles = minority)\n\ncount = 0\nfor j in range(1, 5):\n    fig.add_trace(go.Bar(orientation='h', y=country_with_highest_pecentage_of(minority[count], 10).index, x=country_with_highest_pecentage_of(minority[count], 10)[minority[count]]), j, 1)\n    count+=1     \nfig.update_layout(title='Highest percentage countries for minority genders', showlegend=False, boxgap=0.9, height=1000)\nfig.show()","90669f7f":"response_in_ds_salary = response_data.dropna(subset=['salary'])\nresponse_in_ds_salary = response_in_ds_salary[response_in_ds_salary['job_title'].isin(ds)]","3ddfb2e8":"salary_distribution = pd.DataFrame(response_in_ds_salary[['salary_avg', 'job_title', 'country']].groupby(['country','job_title']).mean())\nsalary_distribution = salary_distribution.reset_index()\nsalary_distribution = salary_distribution[(salary_distribution['country'].isin(top_6_countries))]\nfig, ax = plt.subplots(figsize=(23,10))\nsb.barplot('job_title', 'salary_avg', hue='country', data=salary_distribution, ax=ax)\nax.set_title(\"Average salary with respect to data science professions in top 6 countries.\", size=18)\nfig.show()","cc0b152c":"response_in_ds_salary = response_in_ds_salary[(response_in_ds_salary['country'].isin(top_6_countries))]\nsalary_distribution = pd.DataFrame(response_in_ds_salary[['salary_avg', 'job_title', 'country']].groupby(['job_title','country']).mean())\nfig, ax = plt.subplots(figsize=(23,10))\nsb.heatmap(salary_distribution.unstack(level=0), annot=True, ax=ax, linewidths=12,cmap=\"bone_r\", fmt='g')\nax.set_xlabel(\"Profession\")\nax.set_ylabel(\"Country\")\nfig.show()","66a7e698":"minority = tuple(np.delete(response_data['gender'].unique(), 0))\ndf = response_in_ds_salary[response_in_ds_salary['gender'].isin(minority)]\nsalary_distribution = pd.DataFrame(df[['salary_avg', 'job_title', 'country']].groupby(['country','job_title']).mean())\nsalary_distribution = salary_distribution.reset_index()\nsalary_distribution = salary_distribution[(salary_distribution['country'].isin(top_6_countries))]\n\n\nfig, ax = plt.subplots(figsize=(23,10))\nsb.barplot('job_title', 'salary_avg', hue='country', data=salary_distribution, ax=ax)\nax.set_title(\"Average salary with respect to data science professions in top 6 countries.\", size=18)\nfig.show()","4300bc9d":"minority = tuple(np.delete(response_data['gender'].unique(), 0))\ndf = response_in_ds_salary[response_in_ds_salary['gender'].isin(minority)]\nsalary_distribution = pd.DataFrame(df[['salary_avg', 'country', 'gender']].groupby(['country', 'gender']).mean())\nsalary_distribution = salary_distribution.reset_index()\nsalary_distribution = salary_distribution[(salary_distribution['country'].isin(top_n_countries(6)))]\nfig = px.scatter(salary_distribution, \n                 x='gender', \n                 y='country',\n                 size=\"salary_avg\",\n                 hover_name=\"country\", \n              size_max=60)   \nfig.show()","ac5afcde":"fig = plt.figure(figsize=(20,15))\nr = response_data[response_data['country'].isin(top_n_countries(6))]\nsb.countplot(y=r['country'], order=r['country'].value_counts().index, hue=r['gender'])\nfig.show()","c2ce5713":"response_data['ml_exp_years_avg'] = response_data['ml_exp_years'].replace({'I do not use machine learning methods':'0'}).apply(lambda x: get_avg_exp(x))\n\nresponse_data_top_6 = response_data[response_data['country'].isin(top_n_countries(6))]\nfig = px.box(response_data_top_6, y=response_data_top_6[\"ml_exp_years_avg\"], color='country')\nfig.update_traces(quartilemethod=\"exclusive\")\nfig.show()","fd1e6996":"'''fig = make_subplots(rows=  6, cols = 1,\n                    specs = [[{'type':'bar'}] , [{'type':'bar'}],\n                          [{'type':'bar'}] , [{'type':'bar'}], [{'type':'bar'}] , [{'type':'bar'}]],\n                    subplot_titles = ('India', 'USA', 'Brazil', 'Japan', 'Russia', 'UK'))\n\ncount=0\nfor i in range(1, 7):\n    country_wise_experience = response_data.groupby([\"country\", \"job_title\"]).count()['experience'].unstack(level=0)[top_6_countries[count]]\n    fig.add_trace(go.Bar(y=country_wise_experience.index , x=country_wise_experience.values, orientation='h', width=1), i, 1)\n    count+=1\n        \nfig.update_layout(title='Number of reponses based on job title', showlegend=False, boxgap=0.9, height=1600)\nfig.show()'''","fad7db27":"n=6\ntop_6_countries = tuple(top_n_countries(n))\ncol=int(n\/2)\n\nfig = make_subplots(rows=  2, cols = col,\n                  specs = [[{'type':'pie'}]*col,\n                          [{'type':'pie'}]*col],\n                  subplot_titles = top_6_countries)\n\ncount=0\nfor i in range(1,3):\n    for j in range(1,col+1):\n        gd = response_data[response_data['country']==top_6_countries[count]]['ml_exp_years'].value_counts()\n        fig.add_trace(go.Pie(labels=gd.index , values=gd.values) , row=i , col=j)\n        count+=1\nfig.show()","1dbf417e":"response_data_top_6 = response_data[response_data['country'].isin(top_6_countries)]\nresponse_data_top_6 = response_data_top_6.groupby('country').sum()\nresponse_data_top_6.reset_index(inplace=True)\n\nfig=go.Figure(data=[\n    go.Bar(y= response_data_top_6['max_size_of_company'] , x=response_data_top_6['country']),\n    go.Bar(y= response_data_top_6['max_emp_in_ds_dept'] , x=response_data_top_6['country'])\n])\nfig.show()","8428fc7e":"df = response_data.groupby('country').sum().reset_index()\nfig = px.scatter(df, \n                 x='country', \n                 y=df.index,\n                 size=\"max_emp_in_ds_dept\",\n                 hover_name=\"country\", \n                 size_max=60)\nfig.show()","01c1ec55":"not_ds = not_ds_df.groupby('country').count().reset_index()\nnot_ds = not_ds[not_ds['country'].isin(top_4_countries)]\nnot_ds = not_ds.set_index('country').T.loc['age']\n\nds = response_data_ds_comm.groupby('country').count().reset_index()\nds = ds[ds['country'].isin(top_4_countries)]\nds = ds.set_index('country').T.loc['age']\n\ndf = pd.concat([ds,not_ds], axis=1)\ndf.columns = ['data science', 'other domain']\ndf = df.T\n\nfig = make_subplots(rows=  2, cols = 2,\n                  specs = [[{'type':'pie'} , {'type':'pie'}],\n                          [{'type':'pie'} , {'type':'pie'}]],\n                  subplot_titles = ('India' , 'USA' , 'Brazil' , 'Japan'))\ncount=0\nfor i in range(1, 3):\n    for j in range(1, 3):\n        fig.add_trace(go.Pie(labels= df[top_6_countries[count]].index , values=df[top_6_countries[count]].values) , row=i, col=j)\n        count+=1\nfig.update_layout(title='Percentage of people working in Data Science vs. people working in other domain', height=600)\nfig.show()","e7526f84":"bubble = response_data.groupby('country').sum()[['ml_cc_spend_avg', 'ml_exp_years_avg']]\nbubble = pd.DataFrame(bubble.sort_values(ascending=False, by='ml_cc_spend_avg'))\nbubble.reset_index(inplace=True)\n\nfig = px.scatter(bubble, x=bubble.index, y=\"ml_exp_years_avg\",\n                 size=bubble['ml_cc_spend_avg'],\n                 hover_name=\"country\",\n                 size_max=70)\nfig.show()","e260b5a9":"*In conclusion:* Given that the experience of data science domain is more in India than US, people spend more money on service in US than India. Clearly India is wining the experience race by few points but US is winning with more funding by people.","bf24027a":"Now let's see how many people in top 4 countries are working have job title in data science domain or as their primary profession.","ada9eb4b":"<a id='gender_distribution'><\/a>\n\n\n>## 2.2 Gender Distribution accross countries that are in data science community.","9f0e7c83":"The reason of less experience in India, Brazil and Russia is because the large number of respondees in the survey are students which are currently in their early stages having experience of an year or less.","fb21ed4d":"[Back to top.](#content)","3489e3ba":"<a id='minority_pay'><\/a>\n>## 2.3.1 Country that pays the Highest salary to the minority group in Data Science Community","5266df21":"<a id='content'><\/a>\n1. [Preprocessing](#preprocessing)\n2. [Who is leading the data science race?](#race)<br\/>\n    * [Intro](#intro_countries)\n    * [Gender Distribution accross top countries that are in data science community](#gender_distribution)\n    * [Which country pays the highest salary in Data Science Community among Top 6 countries?](#salary_distribution)\n        * [Country that pays the Highest salary to the minority group in Data Science Community](#minority_pay)\n    * [Experience in coding of people in Machine Learning](#experience_distribution)\n    * [How many people are working in Data Science department?](#people_in_ds)\n        * [Overall size of the company vs employee's in Data Science](#people_in_ds)\n        * [Which country have highest number of employees working in Data Science as their primary profession?](#highest_emp_in_ds)\n    * [How much money is spend by people for ML and Cloud services?](#money_spend)\n    \nto be continued.....","01ed239a":"*In conclusion:*\n* The US seems to has an equal distribution of salary amongst minority groups. The US leads with the Non-binary group, where it does not exist in any other country. **US firms are not only leading in term of investing in DS community but they also have contributed towards minority group as well**\n* Women are paid the highest salary in the US followed by Japan and the UK.\n\nThis conclusion is purely based on the data that we have, there can be other reasons why other countries are at the lowest. <br>\nFor e.g., Japan as shown in the below barplot has very less number of minority gender group which participated in the survey. <br>\n\n*Either they might not have participated in the survey or Japan might actually have a low number of other gender groups in the data science.*","7c6d909d":"[Back to top.](#content)","a79aa2e6":"US firms are investing more in the data science community compared to other top countries that are involve in data science, followed by UK and Japan. It's bit shocking to know that India is still investing less in the DS community respective of the fact that India is leading with the most number of people involved in Data Science. As we saw [here](#intro_countries).<\/br>\n\n*Conclusion:* Interms of salary clearly US and UK are leading countries.","108561ee":"<a id='money_spend'><\/a>\n> ## 2.6 How much money is being spend by people for ML and Cloud services?","1ba443c9":"<a id='salary_distribution'><\/a>\n>## 2.3 Which country pays the highest salary in Data Science Community out of Top 6 countries?\n\n*Note: Here we're only considering professions that comes under the umbrella of data science.*","14ef2263":"[Back to top.](#content)","6d053118":"<a id='experience_distribution'><\/a>\n>## 2.4 Experience in ML of people in data science.","6a7ed71f":"*Conclusion:*  US has the highest percentage of people amongst top 4 countries who are working in data science domain as their primary profession followed by Brazil, Japan and at last India.","66c3611a":"[Back to top.](#content)","448630b0":"<a id='race'><\/a>\n# 2. Who is leading the data science race?\n<hr\/>\n\n<a id='intro_countries'><\/a>\n> ## 2.1 Let's see which all countries are given to us in the survey.","f477dcf3":"As it is not possible to represent this distribution for all countries let's see the top countries from the data set who top's in other minority developers.","92ddf73f":"> ### 2.5.2 Which country has the highest number of people with the job title in the data science domain?","47ca6149":"*In conclusion*: We have two countries (i.e., India, USA) with more participants in the data science domain than any other country. We have maximum Kaggle participants from India.<br><\/br>\n\nLet's consider the top 4 and 6 countries from the list for our further analysis. \n\nThere is a possibility that the number of participants might be more in other countries which did not participate in the survey.","f3c8314c":"*In conclusion:* In terms of experience in Machine Learning methods the USA, Japan, and the UK are the leading countries whereas Brazil and Russia stand in the middle, India follows last.\n\nUmmm,\ud83e\udd14 let's see why do have so little experience in Brazil, Russia, and India.","0b958328":"<a id='people_in_ds'><\/a>\n\n> ## 2.5 How many people are working in data science department?","c8597dbd":"<a id='preprocessing'><\/a>\n# 1. Preprocessing","283e9321":"As we see, India leads with more number of people within their company. Now let's not rely on this wholely, because as we saw earlier, the data is highly biased because the number of responses from India is more than any other country. Just for the visualization and understanding, we'll consider this part.","d2a84a63":"> ### 2.5.1 Overall size of the company vs employee's in Data Science","83ee5bac":"\nAccording to the people that we have in our survey the people, in their respective companies have lesser number of people in data science domain as we can see that the bar for employees in data science is nearly 0 compared to rest of the crowd that are working.\n\nBut let's not stop this here let's just compare the people in data science domain in the companies for each country.\n"}}