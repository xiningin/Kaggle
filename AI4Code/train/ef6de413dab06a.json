{"cell_type":{"42310756":"code","40dd34c4":"code","8df7c24d":"code","50bc51db":"code","b1837bb5":"code","f5e6cc8c":"code","0c7b8b0c":"code","3a3f8cca":"code","e7aae333":"code","424495d3":"code","c4ec9032":"code","36417387":"code","dd401a22":"code","9aa5a9e4":"code","68e96699":"code","4b30f0a2":"code","86794104":"code","2a4f05c0":"code","27f9bcd9":"code","b43918ed":"markdown","6373e6bd":"markdown","e266fe7c":"markdown","eefb53a4":"markdown","3a19aeb1":"markdown","f5f54385":"markdown","6041435e":"markdown","df2ea1b3":"markdown","a1bf82b4":"markdown","83797d3d":"markdown","f8dfb945":"markdown","6b8e0eb4":"markdown","1ae59764":"markdown"},"source":{"42310756":"%matplotlib inline\nimport gc, os, sys, time\nimport calendar\nimport pandas as pd, numpy as np\nimport matplotlib as mpl\nimport matplotlib.pyplot as plt\nfrom pathlib import Path\n\nYEAR = 2019\nMONTH = 11\nTAG = f'{YEAR:04d}-{MONTH:02d}'\nMK = Path(f'..\/input\/meta-kaggle')\nDS = Path(f'..\/input\/kaggle-view-counts-{TAG}')\nID = 'Id'\nFIGSIZE = (15,9)\nDAYNAMES = np.asarray(calendar.day_name)\n\nplt.style.use('ggplot')\nplt.rc('figure', figsize=FIGSIZE) # works locally, not on Kaggle\nplt.rc('font', size=14)\n\npd.options.display.max_rows = 200","40dd34c4":"K = pd.read_csv(MK \/ 'Kernels.csv', index_col=ID)\nK.shape","8df7c24d":"KV = pd.read_csv(DS \/ 'KernelsDailyTotals.csv', index_col=ID)\nKV.shape","50bc51db":"DV = pd.read_csv(DS \/ 'DatasetsDailyTotals.csv', index_col=ID)\nDV.shape","b1837bb5":"def make_month_index(year, month):\n    d1 = pd.to_datetime(f'{year:04d}-{month:02d}-01 12:00',\n                        dayfirst=False,\n                        yearfirst=True)\n    day = pd.Timedelta(1, 'd')\n    days = {0: d1 - day}\n    dx = d1\n    while dx.month == d1.month:\n        days[dx.day] = dx\n        dx += day\n    return days\n\nDATES_DICT = make_month_index(YEAR, MONTH)","f5e6cc8c":"np.where(KV.count()==0)","0c7b8b0c":"KV['TotalViews7'] = ((KV.TotalViews6 + KV.TotalViews8) \/ 2).round(0)","3a3f8cca":"np.where(DV.count()==0)","e7aae333":"DV['TotalViews7'] = ((DV.TotalViews6 + DV.TotalViews8) \/ 2).round(0)\nDV['TotalDownloads7'] = ((DV.TotalDownloads6 + DV.TotalDownloads8) \/ 2).round(0)","424495d3":"daily = KV.diff(axis=1).iloc[:, 1:].dropna(how='all')\ncols = daily.columns.str.replace('Total', '')\ncols = cols.str.extract('(\\d+)')[0].rename('Date').astype(int).map(DATES_DICT)\ndaily.columns = cols","c4ec9032":"daily.sum(0).plot(title=f'Daily Kernel Views {TAG}', figsize=FIGSIZE)","36417387":"daily.sum(0).to_frame('Total Kernel Views').style.background_gradient()","dd401a22":"tmp = daily.sum(0).to_frame('Kernel Views').reset_index()\ndaystats = tmp.groupby(tmp.Date.dt.dayofweek).mean()\ndaystats.index = DAYNAMES[daystats.index]\ndaystats.style.background_gradient()","9aa5a9e4":"daily.min(1).sort_values(ascending=False).head(20).to_frame('Minimum Daily Views').style.background_gradient()","68e96699":"daily.mean(0).plot(title='Mean Kernel views per day', figsize=FIGSIZE)","4b30f0a2":"daily.shape","86794104":"daily.max(1).clip(upper=10).value_counts()","2a4f05c0":"daily.max(1).clip(upper=5).value_counts(True) * 100","27f9bcd9":"daily.max(1).clip(upper=10).plot.hist(title='Max of daily view counts for Kernels', figsize=FIGSIZE)","b43918ed":"*to be continued...*","6373e6bd":"There are ***289,265*** kernels in total","e266fe7c":"Wednesday's are busiest - weekends are curiously quieter","eefb53a4":"Exact values","3a19aeb1":"That's about half that get no views","f5f54385":"The average kernel gets nearly 1 view per day","6041435e":"***137,865*** kernels had **no views at all in November 2019** - **WOW**\n\n***12,427*** had at least one day with 10+ views","df2ea1b3":"Compute diffs between days to get daily view counts","a1bf82b4":"# Kernel\/Dataset Views November 2019\n\nUsing daily snaphots of TotalViews and TotalDownloads counts for kernels and datasets.\n\n## Questions\n\n - How many views\/downloads are there per day?\n - Which weekdays is Kaggle busiest on?\n - Is there a good time to publish kernels?\n - Which author tiers get most views?\n - What is the range of \"conversion\" rates - votes per view?\n ","83797d3d":"There is a kernel that gets over ***5,000*** views every day - but only two reach the thousands, the min-per-day trails off","f8dfb945":"Fill with average of days either side","6b8e0eb4":"# Sum of Views for all Kernels","1ae59764":"Check for null columns"}}