{"cell_type":{"ba502169":"code","25965d8a":"code","1d965446":"code","eb641588":"code","b546bdf4":"code","114f1297":"code","d1eb95eb":"code","af56e287":"code","13591e1a":"code","ee363434":"code","0bcccfae":"code","e2f10c1b":"code","551c3aed":"code","5e340321":"code","6e76021b":"code","d1961718":"code","bbc8d336":"code","12c577e7":"code","e6d67773":"code","c4ba5ad7":"code","63abac50":"code","396af704":"code","315b833f":"code","50790949":"code","c19d56c3":"code","1f64b527":"code","38ec6354":"code","3cc0ed42":"code","83490997":"code","fae8ce08":"code","b065a46b":"code","0be06327":"markdown","8446340a":"markdown","b607a84a":"markdown","8c0cbfeb":"markdown","3059fe2f":"markdown","03b1f099":"markdown","ad27ab43":"markdown","d73cc79d":"markdown","a8c1265a":"markdown","c51cad98":"markdown","16054482":"markdown","2c3a87a2":"markdown","765d163c":"markdown","b182dbda":"markdown","262f9399":"markdown","f0242ee2":"markdown","2ee4d4e5":"markdown","536d6f7d":"markdown","76649a2b":"markdown","c1b8fee8":"markdown"},"source":{"ba502169":"# Import Libraries\n\nimport numpy as np\nimport pandas as pd\nimport seaborn as sns\nimport matplotlib.pyplot as plt","25965d8a":"df = pd.read_csv('..\/input\/customer-personality-analysis\/marketing_campaign.csv', sep = '\\t', index_col = 'ID')\ndf.head()","1d965446":"df.shape","eb641588":"# Check missing values\ndf.isnull().sum()","b546bdf4":"# Remove missing values\n\ndf = df.dropna()\ndf.isnull().sum()","114f1297":"from datetime import date\ndef get_age(customer_birthyear):\n    return date.today().year - customer_birthyear\n\ndf['Age'] = df.Year_Birth.map(get_age)\ndf['Age'].describe()","d1eb95eb":"df.sort_values(by='Year_Birth').head()","af56e287":"df.drop([11004, 1150, 7829], inplace=True)","13591e1a":"# Spending Feature\n\ndf['Spending'] = df.MntWines + df.MntFruits + df.MntMeatProducts + df.MntFishProducts + df.MntSweetProducts + df.MntGoldProds\ndf.head()","ee363434":"df.Education.unique()","0bcccfae":"df.Marital_Status.unique()","e2f10c1b":"df['Marital_Status'] = df['Marital_Status'].replace({\n    'Together': 'Partner', 'Married': 'Partner', 'Divorced': 'Single', 'Widow': 'Single',\n    'Alone': 'Single', 'Absurd': 'Single', 'YOLO': 'Single'\n})\ndf.head()","551c3aed":"df['Children'] = df['Kidhome'] + df['Teenhome']\ndf['Has_Child'] = np.where(df['Children'] > 0, 'Has Child', 'No Child')","5e340321":"df = df.rename(columns = {\n    'MntWines': \"Wine\",\n    'MntFruits': 'Fruit',\n    'MntMeatProducts': 'Meat',\n    'MntFishProducts': 'Fish',\n    'MntSweetProducts': 'Sweets',\n    'MntGoldProds': 'Gold'\n})","6e76021b":"df = df.rename(columns={\n    'NumWebPurchases': 'Web',\n    'NumCatalogPurchases': 'Catalog',\n    'NumStorePurchases': 'Store',\n    'NumWebVisitsMonth': 'WebVisits'\n})","d1961718":"df.Web.describe()","bbc8d336":"df.Web.value_counts()","12c577e7":"outliers_Id = df.loc[df.Web > 20].index\ndf.drop(outliers_Id, inplace=True)","e6d67773":"df.Catalog.describe()","c4ba5ad7":"df.Catalog.value_counts()","63abac50":"outliers_Id = df.loc[df.Catalog > 20].index\ndf.drop(outliers_Id, inplace=True)","396af704":"df.Store.describe()","315b833f":"df.Store.value_counts()","50790949":"outliers_Id = df.loc[df.Store < 2].index\ndf.drop(outliers_Id, inplace=True)","c19d56c3":"demographic_data = df[[\"Education\", \"Marital_Status\", \"Has_Child\", \"Children\", \"Age\", \"Income\", \"Spending\", \"Wine\", \"Fruit\", \"Meat\", \"Sweets\", \"Gold\", \"Web\", \"Catalog\", \"Store\", \"WebVisits\"]]","1f64b527":"demographic_data.head()","38ec6354":"plt.figure(figsize=(10,8))\nax = sns.countplot(data = demographic_data, x = 'Education')\nplt.title(\"Education Level of Customers\")","3cc0ed42":"plt.figure(figsize=(10,8))\nax = sns.countplot(data = demographic_data, x = 'Marital_Status')\nplt.title(\"Marital_Status Status of Customers\")","83490997":"plt.figure(figsize=(10,8))\nax = sns.countplot(data = demographic_data, x = 'Has_Child')\nplt.title(\"Childresns Status of Customers\")","fae8ce08":"plt.figure(figsize=(10,8))\nax = sns.histplot(data = demographic_data, x = 'Age')\nplt.title(\"Age of Customers\")","b065a46b":"fig, ax = plt.subplots(1,2, figsize=(20,12))\nsns.histplot(ax = ax[0], data=demographic_data, x='Income')\nsns.histplot(ax = ax[1], data=demographic_data, x='Spending')\nax[0].set_title('Income of Customer')\nax[1].set_title('Spending of Customer')\n","0be06327":"We seem to have some users that are extremely old, the oldest customer is 128 years old! This data might be incorrect. Lets take a closer look.","8446340a":"The age of our customers varies over a wide range. However it seems like most of our customers are middle aged (40-60 years).","b607a84a":"# Features Extraction","8c0cbfeb":"Now we create some more feature for better clustering results","3059fe2f":"Lets group together our clean dataframe and select the columns we wish to analyze.\n\n","03b1f099":"Seems like we have some outlier values, lets remove them.\n\n","ad27ab43":"# Import Dataset","d73cc79d":"Seems like we have a larger number of unique values for this column. Some of these values are similar in definition so lets group them togheter to make our analysis easier.","a8c1265a":"Seems like a majority of customers have a graduate degree (Bachelor's). It also seems like the second highest group includes customers with PhD's. Lets look at marital status now.","c51cad98":"An overwhelming majority of customers have at least one child. Now what about the age of our customers?","16054482":"Finally, lets rename some of our column names.\n\n","2c3a87a2":"Lets take a look at the values for web purchases\n","765d163c":"we observe thayt we have three customer who were born before 19th centurey. Surely this cannot be correct, so we remove that data","b182dbda":"Lets now take a look at the Education feature. This will allow us to better understand the demographic of customer base.","262f9399":"# Creating Clusters\n\nIn this section we will create four clusters of customers based off their\n\n1. Income\n2. Time with company\n3. Spending\n\nThe four clusters will include\n\n* Stars : Customers with high income, high spending, and a long time with the company\n* High Potential: Customers with high income, high spending, and short time with company\n* Needs Attention: Customers with low income, low spending, and short time with company\n* Leaky Buckets: Customers with low income, low spending, and a long time with company","f0242ee2":"Lets create some new features regarding the children of the customers","2ee4d4e5":"Seems like the number of customers in a relationship is almost double the number of single customers. This could be useful for marketing purposes. Let's move on to the child status of our customers.","536d6f7d":"We will do the same for the Catalog and Store columns","76649a2b":"First we create a Age column of customer","c1b8fee8":"# Analysis"}}