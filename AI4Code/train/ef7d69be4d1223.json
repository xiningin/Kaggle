{"cell_type":{"a9d6e400":"code","e0506bb3":"code","4c54620d":"code","be188e01":"code","9d58611b":"code","71681935":"code","0dd6e828":"code","d3be70c5":"code","509f0768":"code","8a9696d3":"code","2bd5db25":"code","89c75ff2":"code","1101da0e":"code","154c0d33":"code","1c532799":"code","d2abbd26":"code","ce0eb6e6":"code","c74ede6e":"code","3383e1f5":"code","573dfb66":"markdown","894caafc":"markdown","aa52d8d3":"markdown","71e5eae5":"markdown","b14eb2b1":"markdown","451b02dc":"markdown","be144aa5":"markdown","2361afbe":"markdown","165d492c":"markdown","4994535e":"markdown","f65e1085":"markdown","728b318a":"markdown","bc49dfd6":"markdown","fa09a8c1":"markdown","d06b7301":"markdown","f84d4b7f":"markdown"},"source":{"a9d6e400":"import numpy as np                # linear algebra\nimport pandas as pd               # data frames\nimport seaborn as sns             # visualizations\nimport matplotlib.pyplot as plt   # visualizations\nimport scipy.stats                # statistics\nfrom sklearn import preprocessing\n\nimport os\nprint(os.listdir(\"..\/input\"))\n#Con esta opci\u00f3n todas los resultados de los comandos se publican en el notebook, \u00a1muy util!","e0506bb3":"df = pd.read_csv(\"..\/input\/housing.csv\")#Se define el Dataframe (df) sobre el cual se trabajar\u00e1\n\n# Print the head of df\nprint(df.head())\n\n# Print the info of df\nprint(df.info())\n\n# Print the shape of df\nprint(df.shape)","4c54620d":"df.isnull().sum()","be188e01":"df['total_bedrooms'].fillna(0,inplace = True)\ndf.isnull().sum()","9d58611b":"# \u00bfQu\u00e9 informaci\u00f3n tiene la variable categorica?\ndf.ocean_proximity.value_counts()#cuenta los datos por categoria\n\n#Observemos esta informaci\u00f3n graficamente\nop_count = df['ocean_proximity'].value_counts()\nplt.figure(figsize=(10,5))\nsns.barplot(op_count.index, op_count.values, alpha=0.7)\nplt.title('Ocean Proximity Summary')\nplt.ylabel('Number of Occurrences', fontsize=12)\nplt.xlabel('Ocean Proximity', fontsize=12)\nplt.show()\n# housing['ocean_proximity'].value_counts().hist()","71681935":"df.iloc[:,~df.columns.isin(['longitude','latitude','ocean_proximity'])].describe()\n#Este comando describe las estadisticas b\u00e1sicas para cada una de las variables, exceptuando las se\u00f1aladas.","0dd6e828":"# Display the histogram to undestand the data\nhausing=df.iloc[:,~df.columns.isin(['longitude','latitude'])]\nhausing.hist(bins=50, figsize=(20,15))   # pandas DataFrame\nplt.show()\n","d3be70c5":"plt.figure(figsize=(15,5))\nplt.subplots_adjust(hspace = .25)\nplt.subplot(1,2,1)\nplt.title('Corelation b\/w longtitude and median_house_value')\nplt.xlabel('longitude',fontsize=12)\nplt.ylabel('median_house_value',fontsize=12)\nplt.scatter(df['longitude'].head(100),df['median_house_value'].head(100),color='g')\nplt.subplot(1,2,2)\nplt.title('Corelation b\/w latitude and median_house_value')\nplt.xlabel('latitude',fontsize=12)\nplt.ylabel('median_house_value',fontsize=12)\nplt.scatter(df['latitude'].head(100),df['median_house_value'].head(100),color='r')","509f0768":"# Barcharts: are they comparable?\nf, axes = plt.subplots(1,2, figsize=(10, 5))\nsns.scatterplot(x=\"median_house_value\", y=\"median_income\", data=df, ax=axes[0])\nsns.scatterplot(x=\"median_house_value\", y=\"households\", data=df, ax=axes[1])","8a9696d3":"f, axes = plt.subplots(1,2, figsize=(10, 5))\nsns.scatterplot(x=\"median_house_value\", y=\"housing_median_age\", data=df, ax=axes[0])\nsns.scatterplot(x=\"median_house_value\", y=\"population\", data=df, ax=axes[1])","2bd5db25":"f, axes = plt.subplots(1,2, figsize=(10, 5))\nsns.scatterplot(x=\"median_house_value\", y=\"total_rooms\", data=df, ax=axes[0])\nsns.scatterplot(x=\"median_house_value\", y=\"total_bedrooms\", data=df, ax=axes[1])","89c75ff2":"f, axes = plt.subplots(1,2, figsize=(10, 5))\nsns.scatterplot(x=\"ocean_proximity\", y=\"median_house_value\", data=df, ax=axes[0])","1101da0e":"# Compute the correlation matrix\ncorr=df.iloc[:,~df.columns.isin(['longitude','latitude', 'ocean_proximity'])].corr()\n\nplt.figure(figsize=(12,7))\nsns.heatmap(cbar=False,annot=True,data=corr*100,cmap='Greens')\nplt.title('% Corelation Matrix')\nplt.show()","154c0d33":"sns.lmplot(x=\"median_income\",y=\"median_house_value\",data=df)","1c532799":"# option s: radius of each circle represent the population\/100\n# option c: color represents the median price\ndf.plot(kind='scatter', x='longitude', y='latitude', alpha=0.4, \n    #s=df['population']\/100, label='population', figsize=(10,7), \n    c='median_house_value', cmap=plt.get_cmap('jet'), colorbar=True)","d2abbd26":"df=df.loc[df['median_house_value']<500001,:]\ndf=df[df['population']<25000]\n\nhausing=df.iloc[:,~df.columns.isin(['longitude','latitude'])]\nhausing.hist(bins=50, figsize=(20,15))   # pandas DataFrame\nplt.show()","ce0eb6e6":"No obstante sigue habiendo mucha variaci\u00f3n entre los datos. ","c74ede6e":"df['median_house_value_log']=np.log1p(df['median_house_value'])\n\n\nskewed_features=['households','median_income','population', 'total_bedrooms', 'total_rooms']\nlog_numerical_features=[]\nfor f in skewed_features:\n    df[f + '_log']=np.log1p(df[f])\n    log_numerical_features.append(f + '_log')\n    \ndf[log_numerical_features].hist(bins=50, figsize=(10, 10))","3383e1f5":"sns.lmplot(x=\"median_income_log\",y=\"median_house_value_log\",data=df)","573dfb66":"## Basic Exploratory Data Analysis","894caafc":"## Objective\nA todos nos gustar\u00eda tener una casa y en California ser\u00eda todo un sue\u00f1o, pero es este un sue\u00f1o lograble?...Adem\u00e1s, d\u00f3nde es m\u00e1s caro vivir en el continente o cerca al oceano, d\u00f3nde hay m\u00e1s casas? Miremos que podemos encontrar en los datos.","aa52d8d3":"Pareciera que el ajuste lineal nos dejar\u00eda con una enorme porci\u00f3n de datos que no podriamos explicar. \u00bfQu\u00e9 informaci\u00f3n podriamos obtener del valor de las viviendas seg\u00fan su ubicaci\u00f3n? A continuaci\u00f3n se georeferenciar\u00e1 esta variable.","71e5eae5":"Miremos que informaci\u00f3n tiene la base de datos o \"dataset\", luego de cargarla con la opci\u00f3n \"Add Data\" y seleccionar el archivo \"hausing.csv\"","b14eb2b1":"# New Features\nPara trabajar la enorme varianza de las variables las trabajaremos en escala logaritmica.\n\n","451b02dc":"La variable \"median_income\" parece tener, c\u00f3mo la intuici\u00f3n lo diria, bastante relaci\u00f3n con el \"median_house_value\". Por su parte la vetustez de las viviendas parece no tener nada que ver con el precio. Es m\u00e1s, pareciera tener una distribuci\u00f3n uniforme, al igual que la variable \"ocean_proximity\".\n\nAsimismo, la poblaci\u00f3n y el n\u00famero de viviendas (oferta) no parece mostrar una relaci\u00f3n extrecha con el valor promedio de las viviendas, asi como el n\u00famero de espacios y habitaciones en las casas.","be144aa5":"Al revisar las estadisticas b\u00e1sicas se tiene que los valores son muy altos, pero debe tener en cuenta que son datos agregados por \"districs\", que podr\u00edan aproximarse a lo que en Colombia llamamos \"cuadras\". Esto es, no tenemos informaci\u00f3n por cada vivienda, sino por cuadras de viviendas, por lo cual es preciso circunscribir la informaci\u00f3n a este contexto.\n\nA continuaci\u00f3n, se detallara la informaci\u00f3n de cada variable para familiarizarnos con la informaci\u00f3n por bloques o cuadras y entender un poco la alta varaibilidad entre los datos m\u00ednimos y m\u00e1ximos para cada variable. Adicionalmente, \u00bfes acertado comparar la informaci\u00f3n de las islas con las del continente?","2361afbe":"El mapa de calor del precio parece indicar que las casas de mayor valor se \"clusterizan\" en una franja cerca al oceano, pero no en toda la costa.","165d492c":"Este \"dataset\" tiene informaci\u00f3n para 10 variables (*longitude, latitude, housing_median_age, total_rooms, total_bedrooms, population, households, median_income, median_house_value y ocean_proximity* ) de 20.640 *census block * del estado de California, recopilada en el Censo de 1990.  [](https:\/\/github.com\/ageron\/handson-ml\/tree\/master\/datasets\/housing\/)\n\nDe estas 10 variables, solo una es no continua y en general la base de datos parece estar balanceada. No obstante, la variable total_bedrooms tiene 3 registros adicionales, \u00bfpor qu\u00e9? A continuaci\u00f3n se verificar\u00e1 que la base efectivamente este balanceada y todas las variables tengan informaci\u00f3n.","4994535e":"**\u00bfQu\u00e9 informaici\u00f3n nos dan los correlogramas?**","f65e1085":"La variable con el \"problema\", efectivamente tiene 207 datos nulos. \u00bfQu\u00e9 hacemos con esto?, colocaremos \"ceros\", en los datos nulos.","728b318a":"Las variables parecen no tener mucha correlaci\u00f3n con el valor de las viviendas, pero el ingreso es la que mayor relaci\u00f3n tiene. Averiguemos si un ajuste lineal podr\u00eda ser una opci\u00f3n.","bc49dfd6":"Con la transformacion logaritmica mejora mucho el sesgo. Volvamos a hacer la regresi\u00f3n lineal.","fa09a8c1":"El ajuste mejoro, pero sigue dejando mucha data por fuera del intervalo de confianza. :(\n\nSin embargo, es claro que necesitas un ingreso alto para poder vivir en California y que el alto precio depende de la zona para los valores m\u00e1s altos.","d06b7301":"## Data Transformations\n\nSin lugar a dudas tenemos problemas con los datos extremos. Por lo cual sacaremos de nuestra base los \"bloques\" con valores muy altos y mucha gente.\n","f84d4b7f":"A simple vista se pueden observar datos extremos en casi todas las variables, y es posible que haya errores de digitaci\u00f3n, ya que en algunos casos estos valores extremos tienen una muy alta frecuencia, teniendo que en los datos censales no son comunes las colas pesadas, o son el mayor dato como en el caso de \"housing_median_age\" y \"median_house_value\". \n\nTambi\u00e9n se observa que la ubicaci\u00f3n espacial, latitud y longitud, parecen tener relaci\u00f3n con el valor."}}