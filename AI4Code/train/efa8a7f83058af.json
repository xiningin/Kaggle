{"cell_type":{"a4d907da":"code","2d8ece5c":"code","76663820":"code","ca3380fc":"code","c2c82952":"code","eabc7487":"code","0ad9753c":"code","67e4cec3":"code","1ecc8979":"code","4f38949e":"code","52f9dae6":"code","e3e5b621":"code","35eca335":"code","c897b096":"code","aeb5a959":"code","b2027afc":"code","9ee70553":"code","19a37341":"code","7e146303":"code","3749a67f":"code","b72c58f4":"code","881c8f53":"code","c0a4cfdf":"code","95ca3572":"code","98242491":"code","ec690314":"code","4c54e10a":"code","8df0e7db":"code","24d25f3a":"code","44b562b1":"code","356f5b76":"code","6aabbab4":"code","39421a54":"code","79231605":"code","ffe62e2c":"code","5a02e507":"markdown","7effecc6":"markdown","fcfc7dc8":"markdown","cd25662a":"markdown","85292b72":"markdown","2b6bcc95":"markdown","d5a631d1":"markdown","e5abc193":"markdown","1f86ec2f":"markdown","f6fc67f2":"markdown","49dc35aa":"markdown","d1c46831":"markdown","880c0613":"markdown","4995fc5e":"markdown","4255c46b":"markdown","26a40dc6":"markdown","9b54e9e1":"markdown","3698eb85":"markdown","35f1dd12":"markdown","a22afdd7":"markdown","1d45850e":"markdown","ce0ccf42":"markdown","779e6506":"markdown","c6683914":"markdown","6347afeb":"markdown","ff318767":"markdown","f3aabc99":"markdown"},"source":{"a4d907da":"#import the warnings.\nimport warnings\nwarnings.filterwarnings('ignore')","2d8ece5c":"#import the useful libraries.\nimport pandas as pd, numpy as np\nimport matplotlib.pyplot as plt, seaborn as sns\n%matplotlib inline","76663820":"#Reading the Uber Data in np0.\ninp0=pd.read_csv(\"..\/input\/uber-supplydemand-case-study\/Uber Request Data.csv\")","ca3380fc":"#Print the head of the data frame.\ninp0.head()","c2c82952":"#Print the tail of the data frame.\ninp0.tail()","eabc7487":"# Droping undesired columns\ninp0 = inp0.drop(['Driver id'], axis = 1)","0ad9753c":"# Check for the head of data set again.\ninp0.head()","67e4cec3":"inp0['Request timestamp'] = pd.to_datetime(inp0['Request timestamp'])\ninp0['Drop timestamp'] = pd.to_datetime(inp0['Drop timestamp'])\ninp0.head()","1ecc8979":"#Checking the shape of the data\ninp0.shape","4f38949e":"#Print the number of Unique Entries are present in Request id, Pickup Point and Status. \nprint(len(inp0['Request id'].unique()))\nprint(len(inp0['Pickup point'].unique()))\nprint(len(inp0['Status'].unique()))","52f9dae6":"#How many unique pickup points are present in inp0?\nprint(inp0['Pickup point'].unique())","e3e5b621":"#How many unique Status points are present in inp0?\nprint(inp0['Status'].unique())","35eca335":"#print the information of variables to check their data types.\ninp0.info()","c897b096":"#count the missing values in the data set.\ninp0.isnull().sum()","aeb5a959":"#Calculate the percentage of each status category. \ninp0.Status.value_counts(normalize=True)*100","b2027afc":"#Plotting the bar graph on number of status categories\ninp0.Status.value_counts().plot.bar()\nplt.show()","9ee70553":"#Calculate the percentage of each PickUp Point category. \ninp0['Pickup point'].value_counts(normalize=True)*100","19a37341":"\n#Plotting the bar graph of number of PickUp Point categories\ninp0['Pickup point'].value_counts().plot.bar()\nplt.show()","7e146303":"# Count the number of Cancelled and No Cars Available\ninp0[(inp0['Drop timestamp'].isnull())].groupby('Status').size()","3749a67f":"# Group the Status as per Pickup Point.\ninp0.groupby(['Status'])['Pickup point'].size()","b72c58f4":"# Group the Status & per Pickup Point.\ninp0.groupby(['Status', 'Pickup point']).size()","881c8f53":"#Plotting bar plot on the Grouped data of status and Pickup point\nAnalysis = pd.DataFrame(inp0.groupby(['Pickup point', 'Status'])['Request id'].count().unstack(fill_value=0))\nAnalysis.plot(kind=\"bar\", stacked=\"True\", figsize=[10,6])\nplt.show()","c0a4cfdf":"# Plotting graph on Number of Request vs Hour\nplt.figure(figsize=[8,6])\ninp0['Request timestamp'].dt.hour.value_counts().plot.bar()\nplt.show()","95ca3572":"# Plotting graph on Request Time vs Status\nplt.figure(figsize=[8,6])\nsns.countplot(x=inp0['Request timestamp'].dt.hour,hue =inp0['Status'] ,data = inp0)\nplt.show()","98242491":"# Creating new column for Hour of the day\ninp0['Hour']=inp0['Request timestamp'].dt.hour","ec690314":"inp0.head()","4c54e10a":"# Creating new column for Day Time\ninp0['Day Time'] = 'Late Night'\ninp0.loc[inp0['Hour'].between(4,7, inclusive=True),'Day Time'] = 'Early Morning'\ninp0.loc[inp0['Hour'].between(8,11, inclusive=True),'Day Time'] = 'Morning'\ninp0.loc[inp0['Hour'].between(12,16, inclusive=True),'Day Time'] = 'Noon'\ninp0.loc[inp0['Hour'].between(17,20, inclusive=True),'Day Time'] = 'Evening'\ninp0.loc[inp0['Hour'].between(21,24, inclusive=True),'Day Time'] = 'Night'","8df0e7db":"# Plotting graph on Number of Request vs Day Time\nplt.figure(figsize=[8,6])\ninp0['Day Time'].value_counts().plot.bar()\nplt.show()\n","24d25f3a":"# Plotting graph on Day Time vs Status\nplt.figure(figsize=[8,6])\nsns.countplot(x=inp0['Day Time'],hue =inp0['Status'] ,data = inp0)\nplt.show()","44b562b1":"# Creating new column as Gap for Gap Analysis\ninp0['Gap']='No Trip'\ninp0.loc[inp0['Status']=='Trip Completed','Gap'] = 'Trip'","356f5b76":"inp0.tail()","6aabbab4":"# Plotting bar graph on Gap column\ninp0['Gap'].value_counts().plot.bar()\nplt.show()","39421a54":"# Plotting bar graph on grouped column of pickup point and gap\nGap_Analysis = pd.DataFrame(inp0.groupby(['Pickup point', 'Gap'])['Request id'].count().unstack(fill_value=0))\nGap_Analysis.plot(kind=\"bar\", stacked=\"True\", figsize=[10,6])\nplt.show()","79231605":"# Plotting bar graph on day time as per gap \nplt.figure(figsize=[8,6])\nsns.countplot(x=inp0['Day Time'],hue =inp0['Gap'] ,data = inp0)\nplt.show()","ffe62e2c":"# Plotting bar graph on grouped data of pickup point, day time and gap\nGap_Analysis = pd.DataFrame(inp0.groupby(['Pickup point','Day Time', 'Gap'])['Request id'].count().unstack(fill_value=0))\nGap_Analysis.plot(kind=\"bar\", stacked=\"True\", figsize=[10,6])\nplt.show()","5a02e507":"####  Univariate Analysis","7effecc6":"# Recommendations\n\nFrom City to Airport:-\n1. Incentives should be provided to the drivers who successfully completed the trips to Airport from City during the problematic request time slots i.e. Early Morning and Morning when the most number of trips have been cancelled.\n2. Penalty should awarded for the driver who cancel more rides.\n\nFrom Airport to city:-\n1. Setting up Uber stand near Airport so that the availability of cars never runs out.\n2. Push the number of cabs to fill the gap.\n","fcfc7dc8":"#### Importing the libraries.","cd25662a":"#### Data Types","85292b72":"#### Fixing the Rows and Columns","2b6bcc95":"#### Deriving New Matrics","d5a631d1":"Observation- Incomplete trip are almost equal from both boarding points but the number of completed trip is higher from city than from airport.","e5abc193":"The calculation shows NoCarsAvailable and Cancelled together are more than Completed Trips.","1f86ec2f":"# Problem Statement\nIntroduction\nThis data set is a masked data set which is similar to what data analysts at Uber handle. Solving this assignment will give you an idea about how problems are systematically solved using EDA and data visualisation. \n\n \n\n## Business Understanding\n\nYou may have some experience of travelling to and from the airport. Have you ever used Uber or any other cab service for this travel? Did you at any time face the problem of cancellation by the driver or non-availability of cars?\n\n \n\nWell, if these are the problems faced by customers, these very issues also impact the business of Uber. If drivers cancel the request of riders or if cars are unavailable, Uber loses out on its revenue. Let\u2019s hear more about such problems that Uber faces during its operations.\n\nAs an analyst, you decide to address the problem Uber is facing - driver cancellation and non-availability of cars leading to loss of potential revenue. \n\n \n\n## Business Objectives\n\nThe aim of analysis is to identify the root cause of the problem (i.e. cancellation and non-availability of cars) and recommend ways to improve the situation. As a result of your analysis, you should be able to present to the client the root cause(s) and possible hypotheses of the problem(s) and recommend ways to improve them.\n\n## Data Understanding\n\nThere are six attributes associated with each request made by a customer:\n\n1.Request id: A unique identifier of the request\n2.Time of request: The date and time at which the customer made the trip request\n3.Drop-off time: The drop-off date and time, in case the trip was completed \n4.Pick-up point: The point from which the request was made\n5.Driver id: The unique identification number of the driver\n6.Status of the request: The final status of the trip, that can be either completed, cancelled by the driver or no cars available\n\nNote: For this, only the trips to and from the airport are being considered.\n\n \n\n## Data Cleaning and Preparation - Hints\n\n1.Identify the data quality issues and clean the data so that you can use it for analysis.\n2.Ensure that the dates and time are in the proper format. Derive new variables which will be useful for analysis.\n \n\n## Results Expected\n\n1.Visually identify the most pressing problems for Uber. \n 1.Hint: Create plots to visualise the frequency of requests that get cancelled or show 'no cars available'; identify the  most problematic types of requests (city to airport \/ airport to city etc.) and the time slots (early mornings, late evenings etc.) using plots\n\n2.Find out the gap between supply and demand and show the same using plots.\n 1.Find the time slots when the highest gap exists\n 2.Find the types of requests (city-airport or airport-city) for which the gap is the most severe in the identified time slots\n\n3.What do you think is the reason for this issue for the supply-demand gap? Write the answer in less than 100 words. You may accompany the write-up with plot(s).\n\n4.Recommend some ways to resolve the supply-demand gap.\n","f6fc67f2":"Creating column Daytime which tells the time of the day e.g Morning, Evening etc. Here, 4-7=Early Morning, 8-11=Morning, 12-16=Noon, 17-20=Evening,21-24=Night and 0-3=Late Night.","49dc35aa":"Creating column 'Gap' which shows Trip completed as 'Trip' and Cancelled and No cars available as 'No Trip'.\n\n*  Gap Matric:- \u2022 Supply-Demand Gap = Total Rides Requested - Total Rides Completed                                          \u2022 Total Rides Requested = Completed Trips + Cancelled Trips + No Cars Available Trips                                      \u2022 Total Rides Completed = Completed Trips\n* So, Supply-Demand Gap(No Trip) = Cancelled Trips + No Cars Available Trips","d1c46831":"Observation- The big shortage of supply against high demand is from Airport to City in the Evening and from City to Airport in Early Morning.","880c0613":"Observation:1. Highest trip cancellation is in early morning & morning and highest cars unavailability in evening.","4995fc5e":"#### Bivariate Analysis","4255c46b":"Observation: 1. Most unavilabilty of cars during evening 6 PM to 10 PM. 2. Most number of cancellations during morning 5 AM to 9 AM.","26a40dc6":"Observation- There is huge number of shortage of supply  in the Evening.","9b54e9e1":"From the PickUp point more trips have been completed.","3698eb85":"As observed No trip is in more numbers than Trip completed.","35f1dd12":"Observation: More number of request is generated in the evening 6 PM to 9 PM and least are in midnight 12 AM to 3AM.","a22afdd7":"# EDA on Uber Supply-Demand Gap","1d45850e":"Trip Completed are more than as compared to No Cars Available and Cancelled ones.","ce0ccf42":"Number of No Cars Available is more than that of Cancelled ones.","779e6506":"####  Data Cleaning","c6683914":"Observation: 1. More trip have been completed from city than airport.\n           2. Also more trips has been cancelled from the city.\n           3. There are greater Car Unavailability at the airport.","6347afeb":"#### There is null values only in Drop timestamp which is legitimate because of the Status column has Cancelled and No Car Available, so if a trip has been cancelled or if no cars are available for that trip it clearly means it can not have the drop time.","ff318767":"More Trip source is from City.","f3aabc99":"We can drop DriverId column as it has more NaN values and also removing it will not affect the analysis."}}