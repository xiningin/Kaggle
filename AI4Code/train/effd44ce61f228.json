{"cell_type":{"8c17056e":"code","6a1316de":"code","b888949b":"code","97ba61e0":"code","4949a3d0":"code","89863dc0":"code","1b5d2675":"code","d9427336":"code","e8259ca6":"code","28937e2c":"code","af16da28":"code","e6db24c7":"code","9dca174b":"code","ed80be3b":"code","25bc1c44":"code","52a35386":"code","65ebfa43":"code","a3adbe0b":"code","4aa909c5":"code","fba288f4":"code","05b52328":"code","1c824574":"code","2112e4da":"code","68c53b50":"code","b46b5a0c":"code","e714ac6a":"code","4190f837":"code","c54c7934":"markdown","62061d4a":"markdown","d1908ae1":"markdown","8fb8171b":"markdown","86f6e5b6":"markdown","c7ee5dc7":"markdown","99272f4a":"markdown","7023d5fc":"markdown","f879dae9":"markdown","0353558e":"markdown","06152b41":"markdown","ee9d0321":"markdown","62555a40":"markdown","faeb38c8":"markdown","f411faff":"markdown","64e7b2fa":"markdown","1e7e5f6a":"markdown","a92712ae":"markdown","4e6f51c0":"markdown"},"source":{"8c17056e":"import matplotlib.pyplot as plt # plotting\nimport numpy as np # linear algebra\nimport os # accessing directory structure\nimport pandas as pd # data processing, CSV file I\/O (e.g. pd.read_csv)\nimport calendar\nfrom datetime import date\n\nimport seaborn as sns\n\n# Input data files are available in the \"..\/input\/\" directory.\n# For example, running this (by clicking run or pressing Shift+Enter) will list all files under the input directory\n\nimport os\nfor dirname, _, filenames in os.walk('\/kaggle\/input'):\n    for filename in filenames:\n        print(os.path.join(dirname, filename))\n\n# Any results you write to the current directory are saved as output.","6a1316de":"df1 = pd.read_csv('\/kaggle\/input\/better-donald-trump-tweets\/Donald-Tweets!.csv', delimiter=',')\nnRow, nCol = df1.shape\nprint(f'There are {nRow} rows and {nCol} columns')","b888949b":"df1.head(5)","97ba61e0":"#Remove date and fraction from time data.\ndf1['hour'] = pd.to_datetime(df1['Time']).dt.hour\ndf1['date'] = pd.to_datetime('20' + df1['Date'] + ' ' + df1['Time'])\ndf1 = df1.drop(['Date', 'Time', 'Unnamed: 10', 'Unnamed: 11'], axis=1)","4949a3d0":"#Add count.\ndf1['Tweets'] = 1","89863dc0":"df1 = df1.rename(columns={'Tweet_Text':'Tweet', 'twt_favourites_IS_THIS_LIKE_QUESTION_MARK': 'Favourites'})","1b5d2675":"df1['Engagement'] = df1['Retweets'] + df1['Favourites']","d9427336":"df1.head()","e8259ca6":"#Plot Tweets Trend.\ndf2 = df1[['date', 'Tweets']]\ndf2.set_index('date', inplace=True)\ndf2 = df2.resample('W').sum() \n\ndf2['Tweets'].plot(label=\"Tweet count\")\nplt.title('Tweets Trend')\nplt.legend(ncol=1)\nplt.show()","28937e2c":"graph = df1[['Type', 'Tweets']].groupby(['Type']).sum()\ngraph2 = df1[['Media_Type', 'Tweets']].groupby(['Media_Type']).sum()\ngraph = graph['Tweets'].astype(int)\ngraph2 = graph2['Tweets'].astype(int)\n\ngraph = pd.concat([graph, graph2], axis=0)\n\ngraph.plot.bar(figsize = (8,7))\nplt.title('Tweets by Media Type')\n\nind = np.arange(4)\nlst = graph.values\n\nfor x, y in zip(ind, lst):\n    plt.text(x, y, y, ha='center', va='bottom')\n\nplt.show()","af16da28":"graph = df1[['Tweets', 'Retweets', 'Favourites']].sum()\ngraph.plot.bar(figsize = (8,7))\nplt.title('Tweets, Retweets and Favourites Comparison')\n\nind = np.arange(3)\nlst = graph.values\n\nfor x, y in zip(ind, lst):\n    plt.text(x, y, y, ha='center', va='bottom')\n\nplt.show()","e6db24c7":"#Extract only the data required for analysis.\ntweets_df = df1[['date', 'Tweet', 'Retweets', 'Favourites', 'hour', 'Tweets']]\ntweets_df.set_index('date', inplace=True)\n\ntweets_df.head()","9dca174b":"#plot histgram.\nplt.hist(tweets_df['Favourites'], bins=50)\nplt.title('Favourites')\nplt.show()","ed80be3b":"df_w = tweets_df.set_index([tweets_df.index.weekday, tweets_df.index])\ndf_w.sort_index(inplace=True)\ndf_w.index.names = ['weekday', 'date']\ndf_sum = df_w.sum(level='weekday')\ndf_sum = df_sum.drop(columns = 'hour')\ndf_sum","25bc1c44":"#plot graph.\ndf_sum.index = list(calendar.day_abbr)\nplt.figure(figsize=(8, 7))\nplt.bar(df_sum.index, df_sum['Favourites'])\nplt.title('Favourites by day of the week')    \n\nfor x, y in zip(df_sum.index, df_sum['Favourites']):\n    plt.text(x, y, y, ha='center', va='bottom')\n      \nplt.show()","52a35386":"#plot graph.\ndf_sum.index = list(calendar.day_abbr)\nplt.figure(figsize=(8, 7))\nplt.bar(df_sum.index, df_sum['Tweets'])\nplt.title('Tweets by day of the week')\n\nfor x, y in zip(df_sum.index, df_sum['Tweets']):\n    plt.text(x, y, y, ha='center', va='bottom')\n\nplt.show()","65ebfa43":"#Create favourites and time dataframes.\ntime_df = tweets_df[['Favourites','hour']]\n\n#Sort by time.\ntime_df = time_df.sort_values(by=['hour'], ascending=True)\n\n#Aggregate data by time.\ngrouped = time_df.groupby('hour')\n\n#Average number of likes per time.\nmean = grouped.mean()\n\n#Number of tweets per time.\nsize = grouped.size()","a3adbe0b":"#Describes a bar graph of the average number of likes at each time.\nmean.plot.bar(xlim=[0,24], ylim=[0,16000],figsize=(16,9))\nplt.title('Favourites Average by hour of day')\nplt.show()","4aa909c5":"#Describes a line graph of the number of tweets for each time.\nsize.plot.bar(xlim=[0,24], ylim=[0,600],figsize=(16,9), label=\"Tweet count\")\nplt.title('Tweet count by hour of day')\nplt.legend(ncol=1)\nplt.show()","fba288f4":"df1['day_name'] = df1['date'].dt.weekday_name;\ndf_day_hour2 = pd.pivot_table(df1[['day_name', 'hour', 'Favourites']], index=['day_name', 'hour'], aggfunc=np.sum, fill_value=0)\ndf_day_hour3 = df_day_hour2.unstack(level=0)\ndf_day_hour3 = df_day_hour3.fillna(0)\ndf_day_hour3 = df_day_hour3.astype(int)\ndf_day_hour3","05b52328":"morning_hours = []\nfor hour in range(1, 12):\n    detailed_hour = str(hour) + \"am\"\n    morning_hours.append(detailed_hour)\n    \nafternoon_hours = []\nfor hour in range(1, 12):\n    detailed_hour = str(hour) + \"pm\"\n    afternoon_hours.append(detailed_hour)\n\nday_short_names = ['Mon', 'Tues', 'Wed', 'Thurs', 'Fri', 'Sat', 'Sun']\ndetailed_hours = [\"12am\"] + morning_hours + [\"12pm\"] + afternoon_hours\n\nsns.set_context(\"talk\")\nf, ax = plt.subplots(figsize=(11, 15))\nax = sns.heatmap(df_day_hour3, annot=True, fmt=\"d\", linewidths=.5, ax=ax, xticklabels=day_short_names, yticklabels=detailed_hours, cmap=\"Reds\")\nax.axes.set_title(\"Heatmap of Favourites Counts by Day and Hour of Day\", fontsize=24, y=1.01)\nax.set(xlabel='Day of Week', ylabel='Favourites Counts by Hour of Day');","1c824574":"rank = df1[['date', 'Tweet', 'Retweets', 'Favourites', 'Engagement']].sort_values('Engagement', ascending=False)\nrank['rank'] = df1[['date', 'Tweet', 'Retweets', 'Favourites', 'Engagement']]['Engagement'].rank(ascending=False)\nrank['rank'] = rank['rank'].astype(int)\nrank = rank.set_index('rank')\nrank.head(10)","2112e4da":"#Plot Engagement Trend.\ndf4 = df1[['date', 'Engagement']]\ndf4.set_index('date', inplace=True)\ndf4 = df4.resample('W').sum() \n\ndf4['Engagement'].plot()\nplt.title('Engagement Trend')\nplt.legend(ncol=1)\nplt.show()","68c53b50":"graph = df1[['Tweets', 'Engagement']].sum()\ngraph.plot.bar(figsize = (8,7))\nplt.title('Audience Engagement')\n\nind = np.arange(3)\nlst = graph.values\n\nfor x, y in zip(ind, lst):\n    plt.text(x, y, y, ha='center', va='bottom')\n\nplt.show()","b46b5a0c":"# Engagement per tweets.\nlst[1] \/ lst[0]","e714ac6a":"text_list = df1['Tweet'].to_list()\ntext = \" \".join(text_list)","4190f837":"from wordcloud import WordCloud\n \nstop_words = ['https','co']  \n \nwordcloud = WordCloud(\n    width=900, height=600,   # default width=400, height=200\n    background_color=\"white\",   # default=\u201dblack\u201d\n    stopwords=set(stop_words),\n    max_words=200,   # default=200\n    min_font_size=4,   #default=4\n    collocations = False   #default = True\n    ).generate(text)\n \nplt.figure(figsize=(15,12))\nplt.imshow(wordcloud)\nplt.axis(\"off\")\nplt.savefig(\"word_cloud.png\")\nplt.show()","c54c7934":"### Tweet count by hour of day","62061d4a":"## 3.Create favourites and time dataframes.","d1908ae1":"### Tweets Trend","8fb8171b":"### Engagement Trend.","86f6e5b6":"### Top 10 Viral Tweets.","c7ee5dc7":"### HeatMap","99272f4a":"### Favourites Average by hour of day","7023d5fc":"### View WordCloud","f879dae9":"## 4.View Engagement Tweets.","0353558e":"## 1. Read csv from Donald Trump tweets.","06152b41":"### Count by day of the week","ee9d0321":"### Tweets by day of the week","62555a40":"### Audience Engagement","faeb38c8":"## 2.Plot Graph.","f411faff":"### Favourites Histgram.","64e7b2fa":"## Introduction\n1. Read csv from Donald Trump tweets.\n2. Plot graph.\n3. Create favourites and time dataframes.\n4. View Engagement Tweets.","1e7e5f6a":"### Tweets, Retweets and Favourites Comparison","a92712ae":"### Favourites by day of the week","4e6f51c0":"### Tweets by Media Type"}}