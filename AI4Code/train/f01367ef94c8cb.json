{"cell_type":{"903e342f":"code","4c887834":"code","cd558200":"code","bcabee96":"code","02ed4e87":"code","62828ee7":"code","f20eeeeb":"code","046c1559":"code","717408bf":"code","f3a8f8fc":"code","49e2067e":"code","03c4eec4":"code","da0bcafd":"code","71d227a1":"code","007bc39e":"code","f106d25d":"code","6c747e1c":"code","33af2eaf":"code","35b65824":"code","fdbe6a94":"code","938e32c9":"code","91e0ac96":"code","b02fbf81":"code","70b3b020":"code","cfba9a8a":"code","96110673":"code","72c4c9b1":"code","a68c6b2b":"code","2c8ff620":"code","1f2ebf34":"code","8c615332":"code","0063d581":"code","0cfa3e7c":"markdown","b8e270b8":"markdown","6197453c":"markdown","467e1106":"markdown","30fcf3e0":"markdown","49489869":"markdown","59aae84f":"markdown","10cb8b52":"markdown","97025a69":"markdown","392bf3d9":"markdown","f53451b5":"markdown","00ec7750":"markdown","d2c91f20":"markdown","72e4b19f":"markdown","8746b8a1":"markdown","bdbfbaa2":"markdown","10a4026f":"markdown"},"source":{"903e342f":"!pip install sweetviz\n!pip install klib\n!python3 -m spacy download en_core_web_sm\n","4c887834":"import os\nimport numpy as np \nimport pandas as pd \nimport matplotlib.pyplot as plt\nimport seaborn as sns\nimport re\nimport nltk\nimport klib\n\n\n\n## Data Vizualisation library\n\nimport plotly as py\nimport plotly.graph_objs as go\nimport plotly.figure_factory as ff\nimport plotly.express as px\nfrom plotly.subplots import make_subplots\nfrom plotly.offline import iplot\nfrom plotly.offline import iplot\n\n","cd558200":"import configparser\nimport re\nimport spacy\nfrom pandas.io.json import json_normalize\nimport os\nimport string\n\nfrom nltk.tokenize import word_tokenize\nimport nltk\nfrom nltk.sentiment.vader import SentimentIntensityAnalyzer\nnltk.download('vader_lexicon')\nnltk.download('punkt')\nnltk.download('stopwords')\npd.set_option('max_colwidth',900)","bcabee96":"from sklearn.feature_extraction.text import TfidfVectorizer\nfrom sklearn.linear_model import LogisticRegression\nfrom sklearn.model_selection import cross_val_score\nfrom scipy.sparse import hstack\nfrom scipy import stats\nfrom sklearn.model_selection import train_test_split\nfrom sklearn.decomposition import PCA\nfrom sklearn.cluster import MiniBatchKMeans\nimport warnings\nwarnings.filterwarnings('ignore')\nimport urllib        #for url stuff\n\nfrom sklearn.feature_extraction.text import TfidfVectorizer\nfrom sklearn.feature_extraction import text\nfrom IPython.display import display\nfrom tqdm import tqdm\nfrom collections import Counter\nimport ast\n\nfrom sklearn.feature_extraction.text import CountVectorizer\nfrom textblob import TextBlob\nimport scipy.stats as stats\n\nimport seaborn as sns\nfrom sklearn.manifold import TSNE\nfrom sklearn.decomposition import PCA, TruncatedSVD\nimport matplotlib.patches as mpatches\nimport time\n\nimport seaborn as sns #for making plots\nimport matplotlib.pyplot as plt # for plotting\nimport os  # for os commands\nplt.rcParams['figure.figsize'] = [16, 10]\n%matplotlib inline\n\n\nimport gensim\nfrom gensim import corpora, models, similarities\nimport logging\nimport tempfile\nfrom nltk.corpus import stopwords\nfrom string import punctuation\nfrom collections import OrderedDict\n\nfrom sklearn.decomposition import TruncatedSVD\nfrom sklearn.decomposition import LatentDirichletAllocation\nfrom sklearn.manifold import TSNE\n\n\nfrom bokeh.plotting import figure, output_file, show\nfrom bokeh.models import Label\nfrom bokeh.io import output_notebook\noutput_notebook()","02ed4e87":"from nltk.corpus import stopwords\nfrom wordcloud import WordCloud,STOPWORDS\nfrom sklearn.feature_extraction.text import CountVectorizer as CV\nnltk.download('stopwords')","62828ee7":"df_train = pd.read_csv(\"..\/input\/commonlitreadabilityprize\/train.csv\")\ndf_test = pd.read_csv(\"..\/input\/commonlitreadabilityprize\/test.csv\")","f20eeeeb":"df_train.head()","046c1559":"df_train.describe()","717408bf":"klib.cat_plot(df_train) # returns a visualization of the number and frequency of categorical features","f3a8f8fc":"klib.corr_mat(df_train) # returns a color-encoded correlation matrix","49e2067e":"klib.corr_plot(df_train) ","03c4eec4":"klib.dist_plot(df_train) # returns ","da0bcafd":"klib.missingval_plot(df_train) ","71d227a1":"import sweetviz as sv\n#analyzing the dataset\ntrain_report = sv.analyze(df_train)\n#display the report\ntrain_report.show_html()","007bc39e":"train_report.show_notebook()","f106d25d":"char_freq_count = df_train['excerpt'].str.len()\n\nfig = make_subplots(rows=1, cols=1)\n\nfig.add_trace(\n    go.Histogram(x=list(char_freq_count), name='Excerpt Text'),\n    row=1, \n    col=1\n)\n\nfig.update_layout(title_text=\"Excerpt Text Character Count\")\niplot(fig)","6c747e1c":"unq_word_count = df_train['excerpt'].apply(lambda x: len(set(str(x).split()))).to_list()\n\nfig = ff.create_distplot([unq_word_count], ['Excerpt Text'])\nfig.update_layout(title_text=\"Unique Word Count Distribution\")\niplot(fig)","33af2eaf":"def clean_tweet(text):\n  text = re.sub(\"RT @[\\w]*:\",\"\",text)\n  text = re.sub(\"@[\\w]*\",\"\",text)\n  text = re.sub(\"https?:\/\/[A-Za-z0-9.\/]*\",\"\",text)\n  text = re.sub(\"\\n\",\"\",text)\n  text = ''.join([x for x in text if x in string.printable])\n  return text\n\ndef remove_emoji(text):\n    emoji_pattern = re.compile(\"[\"\n                           u\"\\U0001F600-\\U0001F64F\"  # emoticons\n                           u\"\\U0001F300-\\U0001F5FF\"  # symbols & pictographs\n                           u\"\\U0001F680-\\U0001F6FF\"  # transport & map symbols\n                           u\"\\U0001F1E0-\\U0001F1FF\"  # flags (iOS)\n                           u\"\\U00002702-\\U000027B0\"\n                           u\"\\U000024C2-\\U0001F251\"\n                           \"]+\", flags=re.UNICODE)\n    return emoji_pattern.sub(r'', text)\n\n\ndef remove_punctuations(text):\n    punctuations = '@#!?+&*[]-%.:\/();$=><|{}^' + \"'`\"\n    \n    for p in punctuations:\n        text = text.replace(p, f' {p} ')\n\n    text = text.replace('...', ' ... ')\n    \n    if '...' not in text:\n        text = text.replace('..', ' ... ')\n    \n    return text","35b65824":"abbreviations = {\n    \"$\" : \" dollar \",\n    \"\u20ac\" : \" euro \",\n    \"4ao\" : \"for adults only\",\n    \"a.m\" : \"before midday\",\n    \"a3\" : \"anytime anywhere anyplace\",\n    \"aamof\" : \"as a matter of fact\",\n    \"acct\" : \"account\",\n    \"adih\" : \"another day in hell\",\n    \"afaic\" : \"as far as i am concerned\",\n    \"afaict\" : \"as far as i can tell\",\n    \"afaik\" : \"as far as i know\",\n    \"afair\" : \"as far as i remember\",\n    \"afk\" : \"away from keyboard\",\n    \"app\" : \"application\",\n    \"approx\" : \"approximately\",\n    \"apps\" : \"applications\",\n    \"asap\" : \"as soon as possible\",\n    \"asl\" : \"age, sex, location\",\n    \"atk\" : \"at the keyboard\",\n    \"ave.\" : \"avenue\",\n    \"aymm\" : \"are you my mother\",\n    \"ayor\" : \"at your own risk\", \n    \"b&b\" : \"bed and breakfast\",\n    \"b+b\" : \"bed and breakfast\",\n    \"b.c\" : \"before christ\",\n    \"b2b\" : \"business to business\",\n    \"b2c\" : \"business to customer\",\n    \"b4\" : \"before\",\n    \"b4n\" : \"bye for now\",\n    \"b@u\" : \"back at you\",\n    \"bae\" : \"before anyone else\",\n    \"bak\" : \"back at keyboard\",\n    \"bbbg\" : \"bye bye be good\",\n    \"bbc\" : \"british broadcasting corporation\",\n    \"bbias\" : \"be back in a second\",\n    \"bbl\" : \"be back later\",\n    \"bbs\" : \"be back soon\",\n    \"be4\" : \"before\",\n    \"bfn\" : \"bye for now\",\n    \"blvd\" : \"boulevard\",\n    \"bout\" : \"about\",\n    \"brb\" : \"be right back\",\n    \"bros\" : \"brothers\",\n    \"brt\" : \"be right there\",\n    \"bsaaw\" : \"big smile and a wink\",\n    \"btw\" : \"by the way\",\n    \"bwl\" : \"bursting with laughter\",\n    \"c\/o\" : \"care of\",\n    \"cet\" : \"central european time\",\n    \"cf\" : \"compare\",\n    \"cia\" : \"central intelligence agency\",\n    \"csl\" : \"can not stop laughing\",\n    \"cu\" : \"see you\",\n    \"cul8r\" : \"see you later\",\n    \"cv\" : \"curriculum vitae\",\n    \"cwot\" : \"complete waste of time\",\n    \"cya\" : \"see you\",\n    \"cyt\" : \"see you tomorrow\",\n    \"dae\" : \"does anyone else\",\n    \"dbmib\" : \"do not bother me i am busy\",\n    \"diy\" : \"do it yourself\",\n    \"dm\" : \"direct message\",\n    \"dwh\" : \"during work hours\",\n    \"e123\" : \"easy as one two three\",\n    \"eet\" : \"eastern european time\",\n    \"eg\" : \"example\",\n    \"embm\" : \"early morning business meeting\",\n    \"encl\" : \"enclosed\",\n    \"encl.\" : \"enclosed\",\n    \"etc\" : \"and so on\",\n    \"faq\" : \"frequently asked questions\",\n    \"fawc\" : \"for anyone who cares\",\n    \"fb\" : \"facebook\",\n    \"fc\" : \"fingers crossed\",\n    \"fig\" : \"figure\",\n    \"fimh\" : \"forever in my heart\", \n    \"ft.\" : \"feet\",\n    \"ft\" : \"featuring\",\n    \"ftl\" : \"for the loss\",\n    \"ftw\" : \"for the win\",\n    \"fwiw\" : \"for what it is worth\",\n    \"fyi\" : \"for your information\",\n    \"g9\" : \"genius\",\n    \"gahoy\" : \"get a hold of yourself\",\n    \"gal\" : \"get a life\",\n    \"gcse\" : \"general certificate of secondary education\",\n    \"gfn\" : \"gone for now\",\n    \"gg\" : \"good game\",\n    \"gl\" : \"good luck\",\n    \"glhf\" : \"good luck have fun\",\n    \"gmt\" : \"greenwich mean time\",\n    \"gmta\" : \"great minds think alike\",\n    \"gn\" : \"good night\",\n    \"g.o.a.t\" : \"greatest of all time\",\n    \"goat\" : \"greatest of all time\",\n    \"goi\" : \"get over it\",\n    \"gps\" : \"global positioning system\",\n    \"gr8\" : \"great\",\n    \"gratz\" : \"congratulations\",\n    \"gyal\" : \"girl\",\n    \"h&c\" : \"hot and cold\",\n    \"hp\" : \"horsepower\",\n    \"hr\" : \"hour\",\n    \"hrh\" : \"his royal highness\",\n    \"ht\" : \"height\",\n    \"ibrb\" : \"i will be right back\",\n    \"ic\" : \"i see\",\n    \"icq\" : \"i seek you\",\n    \"icymi\" : \"in case you missed it\",\n    \"idc\" : \"i do not care\",\n    \"idgadf\" : \"i do not give a damn fuck\",\n    \"idgaf\" : \"i do not give a fuck\",\n    \"idk\" : \"i do not know\",\n    \"ie\" : \"that is\",\n    \"i.e\" : \"that is\",\n    \"ifyp\" : \"i feel your pain\",\n    \"IG\" : \"instagram\",\n    \"iirc\" : \"if i remember correctly\",\n    \"ilu\" : \"i love you\",\n    \"ily\" : \"i love you\",\n    \"imho\" : \"in my humble opinion\",\n    \"imo\" : \"in my opinion\",\n    \"imu\" : \"i miss you\",\n    \"iow\" : \"in other words\",\n    \"irl\" : \"in real life\",\n    \"j4f\" : \"just for fun\",\n    \"jic\" : \"just in case\",\n    \"jk\" : \"just kidding\",\n    \"jsyk\" : \"just so you know\",\n    \"l8r\" : \"later\",\n    \"lb\" : \"pound\",\n    \"lbs\" : \"pounds\",\n    \"ldr\" : \"long distance relationship\",\n    \"lmao\" : \"laugh my ass off\",\n    \"lmfao\" : \"laugh my fucking ass off\",\n    \"lol\" : \"laughing out loud\",\n    \"ltd\" : \"limited\",\n    \"ltns\" : \"long time no see\",\n    \"m8\" : \"mate\",\n    \"mf\" : \"motherfucker\",\n    \"mfs\" : \"motherfuckers\",\n    \"mfw\" : \"my face when\",\n    \"mofo\" : \"motherfucker\",\n    \"mph\" : \"miles per hour\",\n    \"mr\" : \"mister\",\n    \"mrw\" : \"my reaction when\",\n    \"ms\" : \"miss\",\n    \"mte\" : \"my thoughts exactly\",\n    \"nagi\" : \"not a good idea\",\n    \"nbc\" : \"national broadcasting company\",\n    \"nbd\" : \"not big deal\",\n    \"nfs\" : \"not for sale\",\n    \"ngl\" : \"not going to lie\",\n    \"nhs\" : \"national health service\",\n    \"nrn\" : \"no reply necessary\",\n    \"nsfl\" : \"not safe for life\",\n    \"nsfw\" : \"not safe for work\",\n    \"nth\" : \"nice to have\",\n    \"nvr\" : \"never\",\n    \"nyc\" : \"new york city\",\n    \"oc\" : \"original content\",\n    \"og\" : \"original\",\n    \"ohp\" : \"overhead projector\",\n    \"oic\" : \"oh i see\",\n    \"omdb\" : \"over my dead body\",\n    \"omg\" : \"oh my god\",\n    \"omw\" : \"on my way\",\n    \"p.a\" : \"per annum\",\n    \"p.m\" : \"after midday\",\n    \"pm\" : \"prime minister\",\n    \"poc\" : \"people of color\",\n    \"pov\" : \"point of view\",\n    \"pp\" : \"pages\",\n    \"ppl\" : \"people\",\n    \"prw\" : \"parents are watching\",\n    \"ps\" : \"postscript\",\n    \"pt\" : \"point\",\n    \"ptb\" : \"please text back\",\n    \"pto\" : \"please turn over\",\n    \"qpsa\" : \"what happens\", #\"que pasa\",\n    \"ratchet\" : \"rude\",\n    \"rbtl\" : \"read between the lines\",\n    \"rlrt\" : \"real life retweet\", \n    \"rofl\" : \"rolling on the floor laughing\",\n    \"roflol\" : \"rolling on the floor laughing out loud\",\n    \"rotflmao\" : \"rolling on the floor laughing my ass off\",\n    \"rt\" : \"retweet\",\n    \"ruok\" : \"are you ok\",\n    \"sfw\" : \"safe for work\",\n    \"sk8\" : \"skate\",\n    \"smh\" : \"shake my head\",\n    \"sq\" : \"square\",\n    \"srsly\" : \"seriously\", \n    \"ssdd\" : \"same stuff different day\",\n    \"tbh\" : \"to be honest\",\n    \"tbs\" : \"tablespooful\",\n    \"tbsp\" : \"tablespooful\",\n    \"tfw\" : \"that feeling when\",\n    \"thks\" : \"thank you\",\n    \"tho\" : \"though\",\n    \"thx\" : \"thank you\",\n    \"tia\" : \"thanks in advance\",\n    \"til\" : \"today i learned\",\n    \"tl;dr\" : \"too long i did not read\",\n    \"tldr\" : \"too long i did not read\",\n    \"tmb\" : \"tweet me back\",\n    \"tntl\" : \"trying not to laugh\",\n    \"ttyl\" : \"talk to you later\",\n    \"u\" : \"you\",\n    \"u2\" : \"you too\",\n    \"u4e\" : \"yours for ever\",\n    \"utc\" : \"coordinated universal time\",\n    \"w\/\" : \"with\",\n    \"w\/o\" : \"without\",\n    \"w8\" : \"wait\",\n    \"wassup\" : \"what is up\",\n    \"wb\" : \"welcome back\",\n    \"wtf\" : \"what the fuck\",\n    \"wtg\" : \"way to go\",\n    \"wtpa\" : \"where the party at\",\n    \"wuf\" : \"where are you from\",\n    \"wuzup\" : \"what is up\",\n    \"wywh\" : \"wish you were here\",\n    \"yd\" : \"yard\",\n    \"ygtr\" : \"you got that right\",\n    \"ynk\" : \"you never know\",\n    \"zzz\" : \"sleeping bored and tired\"\n}","fdbe6a94":"def convert_abbrev(word):\n    return abbreviations[word.lower()] if word.lower() in abbreviations.keys() else word","938e32c9":"def convert_abbrev_in_text(text):\n    tokens = word_tokenize(text)\n    tokens = [convert_abbrev(word) for word in tokens]\n    text = ' '.join(tokens)\n    return text","91e0ac96":"df_train['excerpt']","b02fbf81":"df_train['excerpt'] = df_train['excerpt'].apply(lambda x :clean_tweet(x))\ndf_train['excerpt'] = df_train['excerpt'].apply(lambda x :remove_emoji(x))\ndf_train['excerpt'] = df_train['excerpt'].apply(lambda x :remove_punctuations(x))\ndf_train['excerpt']= df_train['excerpt'].apply(lambda x :convert_abbrev_in_text(x))","70b3b020":"nlp = spacy.load('en_core_web_sm')","cfba9a8a":"df_train['entity'] = df_train['excerpt'].apply(lambda x:[(ent.text,ent.label_) if (not ent.text.startswith('#')) else \"\" for ent in nlp(x).ents])","96110673":"sid = SentimentIntensityAnalyzer()\ndf_train['sentiment'] = df_train['excerpt'].apply(lambda x:sid.polarity_scores(x))","72c4c9b1":"df_train.head(3)","a68c6b2b":"df_sentiment = json_normalize(df_train['sentiment'])\ndf_sentiment.columns = ['Sentiment_'+x for x in df_sentiment.columns]\ndf_train = pd.concat([df_train,df_sentiment],axis=1)","2c8ff620":"def sentiment_code(Sentiment_neg,Sentiment_neu,Sentiment_pos):\n    \n    sc_cd=0\n    \n    if Sentiment_neg >=0.33 :\n        \n        sc_cd=2\n        \n    if Sentiment_neu >=0.33 :\n        \n        sc_cd=0\n        \n    if Sentiment_pos >= 0.33:\n        \n        sc_cd=1\n        \n    return sc_cd","1f2ebf34":"df_train['sentiment_ctg']=np.vectorize(sentiment_code)(df_train['Sentiment_neg'],df_train['Sentiment_neu'],df_train['Sentiment_pos'])","8c615332":"df_train['excerpt_len']=df_train['excerpt'].apply(lambda x:len(x))","0063d581":"plt.rcParams['figure.figsize'] = (18.0, 6.0)\nbins = 150\nplt.hist(df_train[df_train['sentiment_ctg'] == 0]['excerpt_len'], alpha = 0.6, bins=bins, label='Neutral')\nplt.hist(df_train[df_train['sentiment_ctg'] == 1]['excerpt_len'], alpha = 0.8, bins=bins, label='Positive')\nplt.hist(df_train[df_train['sentiment_ctg'] == 2]['excerpt_len'], alpha = 0.4, bins=bins, label='Negative')\nplt.xlabel('length')\nplt.ylabel('numbers')\nplt.legend(loc='upper right')\n#plt.xlim(0,150)\nplt.grid()\nplt.show()","0cfa3e7c":"### Observation :- \n\n- Text is neutral for kids to read","b8e270b8":"# Text length vs Sentiments","6197453c":"# Data Profiling","467e1106":"### Observation :- \n- \"CC-BY-4.0\" dominates the more licence catagory , Licence field is highly catagorical than others  ","30fcf3e0":"# visualization of the number and frequency of categorical features","49489869":"   # \ud83e\uddd2\ud83d\udcdd CommonLit Readability Prize-EDA & Model \ud83d\udcdd\ud83e\uddd2 ","59aae84f":"# Please upvote this kernal to share more quality content\n\n![Upvote!](https:\/\/img.shields.io\/badge\/Upvote-If%20you%20like%20my%20work-07b3c8?style=for-the-badge&logo=kaggle)","10cb8b52":"# A distribution plot for every numeric feature","97025a69":"# Below Plot containing information about missing values","392bf3d9":"### Modeling in Progress ....... ","f53451b5":"# Character Length Distribution - Field Expert","00ec7750":"# Unique word count - Field - excerpt","d2c91f20":"### Let see sentiment in the text ( Bcoz Children \ud83d\udc76  gonna read this content )","72e4b19f":"### Observation :- \n\n- url_legal & license have lot of missing values and the missing pattern matches with each other","8746b8a1":"\n## Objective\n\nIn this competition, we're predicting the reading ease of excerpts from literature. We've provided excerpts from several time periods and a wide range of reading ease scores. Note that the test set includes a slightly larger proportion of modern texts (the type of texts we want to generalize to) than the training set.\n\nAlso note that while licensing information is provided for the public test set (because the associated excerpts are available for display \/ use), the hidden private test set includes only blank license \/ legal information.\n\n### Files\n\n* train.csv - the training set\n* test.csv - the test set\n* sample_submission.csv - a sample submission file in the correct format\n\n### Columns\n\n* id - unique ID for excerpt\n* url_legal - URL of source - this is blank in the test set.\n* license - license of source material - this is blank in the test set.\n* excerpt - text to predict reading ease of\n* target - reading ease\n* standard_error - measure of spread of scores among multiple raters for each excerpt. Not included for test data.\n\n\n### Evaluation Metric :- \n\nSubmissions are scored on the root mean squared error ( RMSE )\n\n### Submission File :- \n\n\n #### id,target\n eaf8e7355,0.0<\/br>\n 60ecc9777,0.5<\/br>\n c0f722661,-2.0<\/br>\n    \n","bdbfbaa2":"### Observation :- \n- Target field is notmally distributed , We can choose the appropirate sampling strategy\n- Std Error field is bit left sqewed  <\/br><\/br>","10a4026f":"# A color-encoded heatmap, ideal for correlations"}}