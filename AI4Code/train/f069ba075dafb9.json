{"cell_type":{"cf9ddc46":"code","787698d3":"code","ec49ffa1":"code","19da33e1":"code","5b38c067":"markdown","3cd819e4":"markdown","9de98295":"markdown"},"source":{"cf9ddc46":"import os\nimport numpy as np\nimport pandas as pd","787698d3":"targetName = 'num_sold'\ncompetitionDir = '\/kaggle\/input\/tabular-playground-series-jan-2022'\nsubmission = pd.read_csv('..\/input\/tabular-playground-series-jan-2022\/sample_submission.csv')","ec49ffa1":"preds = []\nfor dirname, _, filenames in os.walk('\/kaggle\/input'):\n    for filename in filenames:\n        if (dirname != competitionDir) & ('.csv' in filename):\n            df = pd.read_csv(os.path.join(dirname, filename))\n            if (len(df) == len(submission)) & (len(df.columns) == len(submission.columns)):\n                try:\n                    preds.append(df[targetName])\n                except Exception:\n                    pass","19da33e1":"submission[targetName] = np.array(preds).mean(axis=0).transpose()\n\n#https:\/\/www.kaggle.com\/c\/tabular-playground-series-jan-2022\/discussion\/302889\nsubmission.num_sold = (submission.num_sold *\n                np.exp((submission.row_id - 27200) \/ 2000000)).round()\n\n\nsubmission.to_csv(\"submission.csv\", index=False)","5b38c067":"# Automated ensembling using results from public notebooks\nThis notebook presents an automated ensembling using predicted results from the most relevant public notebooks. Please save all the upvotes for them.","3cd819e4":"# Import any number of public notebooks to automatically update the ensemble prediction","9de98295":"# Save ensemble prediction to csv"}}