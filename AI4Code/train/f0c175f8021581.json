{"cell_type":{"441e8d28":"code","5cd4509c":"code","f20f09a7":"code","238e9b1c":"code","f66b2950":"code","fc1563ce":"code","eae73e12":"code","0b813114":"code","e0ca011c":"code","c53eb4b3":"code","06158599":"code","b7bb7a73":"code","15e13ce4":"code","3df3b15b":"code","a0926f55":"code","4601b58a":"code","43bcfd6a":"code","a27e6ea8":"code","f9a62794":"code","808fb66b":"code","7eae9410":"code","45748d9c":"code","98333780":"code","346832d9":"code","fa50641b":"code","c50ae45a":"code","95d35299":"code","a1061df6":"code","4c00059d":"code","5514936b":"code","2c1bcbf9":"code","ac98000f":"code","c082ddbb":"code","c4defa53":"code","12c5fb18":"code","1b775f42":"code","ccd5b768":"code","657189fb":"code","312e118f":"code","5cfec25d":"code","9ab69a03":"code","b3e3e834":"code","5048b74b":"code","dd418a7c":"code","bbdecc10":"code","35bed939":"code","26780640":"code","192f404b":"code","28c20693":"code","e5197c7b":"code","3ebe3fe6":"code","191f30dc":"code","df384545":"code","32ea5429":"code","cb8e9589":"code","faad6292":"code","884de8ec":"code","2eadc647":"code","840c6e61":"code","0e156ae7":"code","b3b9a50c":"code","502061f3":"code","c02a7557":"code","deffd0bc":"code","c402e45e":"code","31a5d60e":"code","bc244e84":"code","4a1642a8":"code","42dd2d28":"code","71bbda39":"code","aef04b53":"code","7d6e35db":"code","e3c42aa6":"code","13d28134":"code","48079f78":"code","f7522bba":"code","3e0173f8":"code","45ccff8b":"code","ec7f6d15":"code","dadbc516":"code","f82890c9":"code","00a7066c":"code","1dc37552":"code","d6ed8f58":"code","3e0a5fbe":"code","e580b3d2":"code","6f6ec773":"code","2d630953":"markdown","dd385bbe":"markdown","ac25a65b":"markdown","c927a501":"markdown","ef917221":"markdown","ab252551":"markdown","af4d650d":"markdown","203fe239":"markdown","7b4bd21a":"markdown","18082705":"markdown","f1c3a614":"markdown","28f76d79":"markdown","4a258638":"markdown","d0f98ca8":"markdown","0dc1b2d0":"markdown","3947108e":"markdown","1c4259e9":"markdown","15deab87":"markdown","dc4bb7b7":"markdown","c6d89fc2":"markdown","3486c66e":"markdown","48b2a7b2":"markdown","03367e2b":"markdown","f6f78fee":"markdown","fdcc5a87":"markdown","b84e05fd":"markdown","b5f150d1":"markdown","f9c4755b":"markdown","5b70ec80":"markdown","105e3cd4":"markdown","9f6314e2":"markdown","ef9672cb":"markdown","e76e912c":"markdown","f9c45505":"markdown","92af7e6e":"markdown","f4805032":"markdown"},"source":{"441e8d28":"import numpy as np\nimport pandas as pd\nimport matplotlib.pyplot as plt\nimport seaborn as sns\n%matplotlib inline","5cd4509c":"data_test = pd.read_csv(\"..\/input\/titanic\/test.csv\")\ndata_train = pd.read_csv(\"..\/input\/titanic\/train.csv\")","f20f09a7":"data_train.head()","238e9b1c":"data_test.head()","f66b2950":"data_train.info()","fc1563ce":"data_train.isnull().sum()","eae73e12":"data_train[\"Age\"].isnull().sum()\/len(data_train)*100","0b813114":"data_train[\"Cabin\"].isnull().sum()\/len(data_train)*100","e0ca011c":"data_train.describe()","c53eb4b3":"sns.pairplot(data_test)","06158599":"plt.figure(figsize=(15,7))\nsns.heatmap(data_train.isnull(), cbar=False, cmap=\"viridis\")","b7bb7a73":"len(data_train)","15e13ce4":"data_train[\"Sex\"].value_counts(normalize=True)*100","3df3b15b":"plt.figure(figsize=(9,5))\nsns.countplot(x=data_train[\"Sex\"], palette=\"RdBu_r\")","a0926f55":"data_train[\"Survived\"].value_counts(normalize=True)*100","4601b58a":"plt.figure(figsize=(9,5))\nsns.countplot(x=\"Survived\", data=data_train, hue=\"Sex\", palette=\"RdBu_r\")","43bcfd6a":"survived_gb = data_train.groupby(\"Survived\")[\"Sex\"]\nsurvived_gb.value_counts(normalize=True)*100","a27e6ea8":"survived_gb.value_counts()","f9a62794":"female_survived = 233\/len(data_train)*100\nmale_not_survived = 468\/len(data_train)*100\n\nprint(\"Male passenger did not survive: {}\".format(male_not_survived))\nprint(\"Female passenger survived: {}\".format(female_survived))","808fb66b":"plt.figure(figsize=(9,5))\nsns.countplot(x=\"Pclass\", data=data_train, hue=\"Survived\", palette=\"plasma\")","7eae9410":"pclass_gb = data_train.groupby(\"Survived\")[\"Pclass\"]\npclass_gb.value_counts()","45748d9c":"survived_1 = 136\/(136+80)*100\nsurvived_2 = 87\/(97+87)*100\nsurvived_3 = 119\/(119+372)*100\n\nprint(\"First class survival rate is: {:.2f}\".format(survived_1))\nprint(\"Second class survival rate is: {:.2f}\".format(survived_2))\nprint(\"Third class survival rate is: {:.2f}\".format(survived_3))","98333780":"total_1 = 136\/len(data_train)*100\ntotal_2 = 87\/len(data_train)*100\ntotal_3 = 119\/len(data_train)*100\n\nprint(\"The probability of picking a survivor from first class is: {:.2f}\".format(total_1))\nprint(\"The probability of picking a survivor from second class is: {:.2f}\".format(total_2))\nprint(\"The probability of picking a survivor from third class is: {:.2f}\".format(total_3))","346832d9":"plt.figure(figsize=(12, 7))\nsns.scatterplot(y='Age', x='PassengerId', data=data_train, hue=\"Survived\", palette='seismic')","fa50641b":"plt.figure(figsize=(12, 7))\nsns.boxplot(x='Pclass', y='Age', data=data_train, palette='winter')","c50ae45a":"mean_age = data_train.groupby(\"Pclass\")[\"Age\"].mean()\nmean_age","95d35299":"data_train.columns","a1061df6":"data_train[\"SibSp\"].value_counts()","4c00059d":"plt.figure(figsize=(14,7))\nsns.countplot(x=\"SibSp\", data=data_train, hue=\"Survived\", palette=\"magma\")","5514936b":"sib_gb = data_train.groupby(\"SibSp\")[\"Survived\"]\nsib_gb.value_counts(normalize=True)*100","2c1bcbf9":"data_train.columns","ac98000f":"data_train[\"Parch\"].value_counts()","c082ddbb":"data_train[\"Parch\"] = data_train[\"Parch\"].replace(4,2)\ndata_train[\"Parch\"] = data_train[\"Parch\"].replace(5,2)\ndata_train[\"Parch\"] = data_train[\"Parch\"].replace(6,2)\ndata_train[\"Parch\"] = data_train[\"Parch\"].replace(3,2)","c4defa53":"data_train[\"Parch\"].value_counts()","12c5fb18":"parch_gb = data_train.groupby(\"Parch\")[\"Survived\"]\nparch_gb.value_counts(normalize=True)*100","1b775f42":"data_train.columns","ccd5b768":"data_train[\"Ticket\"].value_counts()","657189fb":"fare_gb = data_train.groupby(\"Pclass\")[\"Fare\"].mean()\nfare_gb.value_counts()","312e118f":"data_train[data_train[\"Fare\"] == 0]","5cfec25d":"data_train['Fare'].hist(color='green',bins=40,figsize=(8,4))","9ab69a03":"data_train['Fare'] = data_train['Fare'].replace(0, np.nan)","b3e3e834":"data_train['Fare'].isnull().sum()","5048b74b":"def impute_fare(cols):\n    Fare = cols[0]\n    Pclass = cols[1]\n    \n    if pd.isnull(Fare):\n        if Pclass == 1:\n            return 84\n        elif Pclass == 2:\n            return 20\n        else:\n            return 13\n    else:\n        return Fare","dd418a7c":"data_train[\"Fare\"] = data_train[[\"Fare\", \"Pclass\"]].apply(impute_fare, axis=1)","bbdecc10":"data_train[\"Fare\"].min()","35bed939":"data_train.describe()","26780640":"data_train[\"Cabin\"].value_counts()","192f404b":"data_train[\"Embarked\"].value_counts(normalize=True)*100","28c20693":"plt.figure(figsize=(15,7))\nsns.countplot(x=\"Embarked\", data=data_train, hue=\"Survived\", palette=\"ocean_r\")\n","e5197c7b":"mean_age = data_train.groupby(\"Pclass\")[\"Age\"].mean()\nmean_age","3ebe3fe6":"def impute_age(cols):\n    Age = cols[0]\n    Pclass = cols[1]\n    \n    if pd.isnull(Age):\n        if Pclass == 1:\n            return 38\n        elif Pclass == 2:\n            return 30\n        else:\n            return 25\n    else:\n        return Age","191f30dc":"data_train[\"Age\"] = data_train[[\"Age\", \"Pclass\"]].apply(impute_age, axis=1)","df384545":"data_train[\"Age\"] = data_train[\"Age\"].astype(int)","32ea5429":"data_train.info()","cb8e9589":"embarked_dummy = pd.get_dummies(data_train[\"Embarked\"], prefix=\"Embarked_\", drop_first=True, dtype=int)\ndata_train = pd.concat((data_train.drop(\"Embarked\", axis=1), embarked_dummy), axis=1)","faad6292":"data_train.head()","884de8ec":"data_train = data_train.drop([\"Ticket\", \"Cabin\", \"Name\"], axis=1)","2eadc647":"data_train.head()","840c6e61":"data_train[\"Fare_log\"] = np.log10(data_train[\"Fare\"])\ndata_train = data_train.drop(\"Fare\", axis=1)","0e156ae7":"data_train.head()","b3b9a50c":"data_train[\"Fare_log\"] = data_train[\"Fare_log\"].round(2)","502061f3":"sex_dummy = pd.get_dummies(data_train[\"Sex\"], drop_first=True, dtype=int)\ndata_train = pd.concat((data_train.drop(\"Sex\", axis=1), sex_dummy), axis=1)","c02a7557":"data_train.head()","deffd0bc":"X_train = data_train.drop(\"Survived\", axis=1)\ny_train = data_train[\"Survived\"]","c402e45e":"data_test.head()","31a5d60e":"data_test.head()","bc244e84":"data_test.describe()","4a1642a8":"data_test.isnull().sum()","42dd2d28":"mean_age = data_test.groupby(\"Pclass\")[\"Age\"].mean()\nmean_age","71bbda39":"def impute_age(cols):\n    Age = cols[0]\n    Pclass = cols[1]\n    \n    if pd.isnull(Age):\n        if Pclass == 1:\n            return 40\n        elif Pclass == 2:\n            return 28\n        else:\n            return 24\n    else:\n        return Age\n\ndata_test[\"Age\"] = data_test[[\"Age\", \"Pclass\"]].apply(impute_age, axis=1)","aef04b53":"data_test.isnull().sum()","7d6e35db":"data_test[\"Fare\"].mean()","e3c42aa6":"data_test[\"Fare\"] = data_test[\"Fare\"].fillna(35)","13d28134":"data_test.isnull().sum()","48079f78":"data_test.info()","f7522bba":"X_test = data_test.drop([\"Name\", \"Ticket\", \"Cabin\"], axis=1)","3e0173f8":"test_sex_dummy = pd.get_dummies(data_test[\"Sex\"], drop_first=True, dtype=int)\ntest_embarked_dummy = pd.get_dummies(data_test[\"Embarked\"], drop_first=True, dtype=int)\nX_test = pd.concat((X_test, test_sex_dummy, test_embarked_dummy), axis=1)","45ccff8b":"X_test = X_test.drop([\"Sex\", \"Embarked\"], axis=1)","ec7f6d15":"from sklearn.preprocessing import MinMaxScaler","dadbc516":"scaler = MinMaxScaler()","f82890c9":"X_train = scaler.fit_transform(X_train)\nX_test = scaler.transform(X_test)","00a7066c":"from sklearn.linear_model import LogisticRegression","1dc37552":"log_model = LogisticRegression()","d6ed8f58":"log_model.fit(X_train, y_train)","3e0a5fbe":"log_model_predict = log_model.predict(X_test)","e580b3d2":"submission = pd.DataFrame({\"PassengerId\": data_test[\"PassengerId\"],\"Survived\": log_model_predict})","6f6ec773":"submission.to_csv(\"Titanic Submission\", index= False)","2d630953":"### Passengers in the first class has the highest survival rate, followed by second class. ","dd385bbe":"### The feature Fare has a number of 0 values. ","ac25a65b":"### Since X_test will not have Cabin, I will just leave it as it is.","c927a501":"### Importing scaler from sklearn library","ef917221":"### Setting up data for machine learning. The target feature is \"Survived\"","ab252551":"### Mean age for each Pclass","af4d650d":"### Importing logistic regression model from sklearn library","203fe239":"### The graph shows us that the majority of survivors were females. \n\n### This is an interesting observation form the social behavior perspective. Imagined during the disaster, males were working hard for a way out and subsequently let vulnerable populations, such as females and children, to get out of the wrecked sinking ship before they did. I don't have data to support this, but social behavior definitely played a big role.","7b4bd21a":"# Fun Facts:\n\n### The probability of picking a survivor from first class is ~15%\n### The probability of picking a survivor from third class is ~13%","18082705":"### Importing libraries","f1c3a614":"### Test Data","28f76d79":"# Exploratory Data Analysis\n### Drillingdown into all features, focusing on the relationship with the target feature, \"survived\".","4a258638":"# Titanic Survival Prediction \n\n## Fun Facts:\n### Out of 891 total passengers, ~38% of them survived the disaster. \n### Out of 891 total passengers, the probability of picking a female passenger, who survived is 26%\n\n","d0f98ca8":"### Out of 891 total passengers, ~38% of them survived the disaster. ","0dc1b2d0":"### Visualizing null values in the dataset. Yellow represents null values. ","3947108e":"### Replacing missing values in test data with the mean values","1c4259e9":"### Dropping features Ticket, Cabin, Name since they are not relevant","15deab87":"### Comparing train and test data","dc4bb7b7":"### With total passengers of 891, males accounted for ~65% of the total passengers, females at ~35%.","c6d89fc2":"# Project Objective:\n### To predict survival status on passengers in test data. The target feature or y-variable is \"survived\".\n\n# Process:\n### Descriptive analysis, exploratory data analysis, data visualization, feature engineering, log transformation, preprocessing data using scaler, and predictive model logistic regression from sklearn library. ","3486c66e":"### Cabin has 77% missing values and is in object data type. Most likely will be dropped to save time and focus on more relevant features.  ","48b2a7b2":"### Parch class 3 and above will be grouped as 2 since the counts in these are so low. Will end up with only 0,1,2. ","03367e2b":"### Taking a first glance on the data type that I'm dealing with ","f6f78fee":"### Looks like there's many null values in feature Age, Cabin and Embarked","fdcc5a87":"# Fun Facts:\n### There is a 62% chance that a passenger in first class would survive.\n### There is only 24% chance that a passenger in third class would survive.","b84e05fd":"### Replacing missing values in Age with the mean, based on Pclass. ","b5f150d1":"### Creating dummies and setting up data for machine learning","f9c4755b":"### Will replace 0\/NaN with the mean, based on Pclass. ","5b70ec80":"### Survival rate decreases as number of siblings increases. Chances of surviving the disaster significanty improve when passengers have less people to take care of. This observation supports our earlier observation, that capable adults took care of the younger or more vulnerable population, made way for them and probably let them out of the wrecked ship before they did during the disaster. Just an observation...","105e3cd4":"### Creating dummies for Embarked","9f6314e2":"### Creating dummies for the gender feature","ef9672cb":"### Recalling the Fare feature has skewed data, log transformation on this feature hopefully will improve the skewness of this feature","e76e912c":"# Data Description:\n\n### Pclass - Class of the Passenger\n\n### Name - Name of the Passenger\n\n### Sex = Male or Female\n\n### Age = Age of the Passenger\n\n### SibSp = Number of Spouses or Siblings the Passenger had on the Titanic\n\n### ParCh = Number of Children or Parents the Passenger had on the Titanic\n\n### Ticket = Ticket Number\n\n### Fare = Cost of Ticket\n\n### Cabin = Cabin Number or Location on the Titanic\n\n### Embark = Which dock the passenger embarked from. The docks included are Southhampton, Queenstown, and Cherbourg.","f9c45505":"### Basic descriptive analysis","92af7e6e":"### There's about 19% of values in Age is missing. This is significant as dropping them is not an option so probably replacing it with relevant values.","f4805032":"# Fun Fact:\n### The probability of picking a male passenger, who did not survive is ~53%.\n### The probability of picking a female passenger, who survived is 26%"}}