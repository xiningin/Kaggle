{"cell_type":{"e74e2b9f":"code","5100da0c":"code","73405bb2":"code","220a527d":"code","fccb9444":"code","0391a189":"code","f78e1c07":"code","0dddf3fc":"code","ce850f78":"code","8cd577f1":"code","58f981a6":"code","8e85c337":"markdown","f8273ae1":"markdown","0b0bd4ae":"markdown","24aa68b0":"markdown","19c53c82":"markdown","eb40db3d":"markdown","12eba3d9":"markdown","06b93f88":"markdown","00c792ea":"markdown","474bd265":"markdown","5bb066ea":"markdown","62ffb8ef":"markdown","790a41e3":"markdown","f55e1f42":"markdown","88e65765":"markdown","e6f7011e":"markdown","3e4f9bca":"markdown"},"source":{"e74e2b9f":"# This Python 3 environment comes with many helpful analytics libraries installed\n# It is defined by the kaggle\/python Docker image: https:\/\/github.com\/kaggle\/docker-python\n# For example, here's several helpful packages to load\n\nimport numpy as np # linear algebra\nimport pandas as pd # data processing, CSV file I\/O (e.g. pd.read_csv)\n\n# Input data files are available in the read-only \"..\/input\/\" directory\n# For example, running this (by clicking run or pressing Shift+Enter) will list all files under the input directory\n\nimport os\nfor dirname, _, filenames in os.walk('\/kaggle\/input'):\n    for filename in filenames:\n        print(os.path.join(dirname, filename))\n\n# You can write up to 20GB to the current directory (\/kaggle\/working\/) that gets preserved as output when you create a version using \"Save & Run All\" \n# You can also write temporary files to \/kaggle\/temp\/, but they won't be saved outside of the current session","5100da0c":"import pandas as pd\nimport geopandas as gpd\n\nimport folium\nfrom folium import Choropleth\nfrom folium.plugins import HeatMap\n\nfrom learntools.core import binder\nbinder.bind(globals())\nfrom learntools.geospatial.ex3 import *","73405bb2":"def embed_map(m, file_name):\n    from IPython.display import IFrame\n    m.save(file_name)\n    return IFrame(file_name, width='100%', height='500px')","220a527d":"plate_boundaries = gpd.read_file(\"..\/input\/geospatial-learn-course-data\/Plate_Boundaries\/Plate_Boundaries\/Plate_Boundaries.shp\")\nplate_boundaries['coordinates'] = plate_boundaries.apply(lambda x: [(b,a) for (a,b) in list(x.geometry.coords)], axis='columns')\nplate_boundaries.drop('geometry', axis=1, inplace=True)\n\nplate_boundaries.head()","fccb9444":"# Load the data and print the first 5 rows\nearthquakes = pd.read_csv(\"..\/input\/geospatial-learn-course-data\/earthquakes1970-2014.csv\", parse_dates=[\"DateTime\"])\nearthquakes.head()\n","0391a189":"# Create a base map with plate boundaries\nm_1 = folium.Map(location=[35,136], tiles='cartodbpositron', zoom_start=5)\nfor i in range(len(plate_boundaries)):\n    folium.PolyLine(locations=plate_boundaries.coordinates.iloc[i], weight=2, color='black').add_to(m_1)\n\n# Your code here: Add a heatmap to the map\n____\n\n\n# Show the map\nembed_map(m_1, 'q_1.html')","f78e1c07":"m_2 = folium.Map(location=[35,136], tiles='cartodbpositron', zoom_start=5)\nfor i in range(len(plate_boundaries)):\n    folium.PolyLine(locations=plate_boundaries.coordinates.iloc[i], weight=2, color='black').add_to(m_2)\n    \n# Your code here: Add a map to visualize earthquake depth\n____\n\n\n# View the map\nembed_map(m_2, 'q_2.html')","0dddf3fc":"# GeoDataFrame with prefecture boundaries\nprefectures = gpd.read_file(\"..\/input\/geospatial-learn-course-data\/japan-prefecture-boundaries\/japan-prefecture-boundaries\/japan-prefecture-boundaries.shp\")\nprefectures.set_index('prefecture', inplace=True)\nprefectures.head()","ce850f78":"# DataFrame containing population of each prefecture\npopulation = pd.read_csv(\"..\/input\/geospatial-learn-course-data\/japan-prefecture-population.csv\")\npopulation.set_index('prefecture', inplace=True)\n\n# Calculate area (in square kilometers) of each prefecture\narea_sqkm = pd.Series(prefectures.geometry.to_crs(epsg=32654).area \/ 10**6, name='area_sqkm')\nstats = population.join(area_sqkm)\n\n# Add density (per square kilometer) of each prefecture\nstats['density'] = stats[\"population\"] \/ stats[\"area_sqkm\"]\nstats.head()","8cd577f1":"# Create a base map\nm_3 = folium.Map(location=[35,136], tiles='cartodbpositron', zoom_start=5)\n\n# Your code here: create a choropleth map to visualize population density\n____\n\n# View the map\nembed_map(m_3, 'q_3.html')","58f981a6":"# Create a base map\nm_4 = folium.Map(location=[35,136], tiles='cartodbpositron', zoom_start=5)\n\n# Your code here: create a map\n____\n\n\n# View the map\nembed_map(m_4, 'q_4.html')","8e85c337":"### **Introduction**\n\nIn this project, we will be analyzing the specific areas of a country [example: Japan] that needs extra earthquake reinforcement.\nWe will also determine the areas which are both high in population density and prone to earthquakes?\n\nBefore you get started, run the code cell below to set everything up.","f8273ae1":"### 4) Which high-density prefecture is prone to high-magnitude earthquakes?\nCreate a map to suggest one prefecture that might benefit from earthquake reinforcement. Your map should visualize both density and earthquake magnitude.","0b0bd4ae":"\n### 2) Is there a relationship between earthquake depth and proximity to a plate boundary in Japan?\nYou recently read that the depth of earthquakes tells us important information about the structure of the earth. You're interested to see if there are any intereresting global patterns, and you'd also like to understand how depth varies in Japan.","24aa68b0":"You can use the following reference codes to define the output colors of the map\n![image.png](attachment:image.png)","19c53c82":"### 1) Do earthquakes coincide with plate boundaries?\n\nRun the code cell below to create a DataFrame plate_boundaries that shows global plate boundaries. The \"coordinates\" column is a list of (latitude, longitude) locations along the boundaries.","eb40db3d":"### 3) Which prefectures have high population density?\nRun the next code cell (without changes) to create a GeoDataFrame prefectures that contains the geographical boundaries of Japanese prefectures.","12eba3d9":"So, given the map above, do earthquakes coincide with plate boundaries?","06b93f88":"The code cell below visualizes the plate boundaries on a map. Use all of the earthquake data to add a heatmap to the same map, to determine whether earthquakes coincide with plate boundaries.","00c792ea":"## **Welcome to the Project Notebook**\n\n### Add **data** into the right panel **Data** *input* section and then proceed to the next steps.\n#### Type \"*geospatial-learn-course-data*\" and add it in the input data section\n\nFormat to mention them in the code :-\n\n1. Input Data 1 : ..\/input\/geospatial-learn-course-data\/Plate_Boundaries\n2. Input Data 2 : ..\/input\/geospatial-learn-course-data\/earthquakes1970-2014.csv","474bd265":"We define a function *embed_map()* for displaying interactive maps. It accepts two arguments: the variable containing the map, and the name of the HTML file where the map will be saved.\n\nThis function ensures that the maps are visible in all web browsers.","5bb066ea":"The next code cell creates a DataFrame stats containing the population, area (in square kilometers), and population density (per square kilometer) for each Japanese prefecture. Run the code cell without changes.","62ffb8ef":"### CONGRATULATIONS!\n#### Your Project is Complete.","790a41e3":"### **At what depth do earthquakes occur? What is the significance of the depth?**\n\n#### Read about it [here](https:\/\/www.usgs.gov\/faqs\/what-depth-do-earthquakes-occur-what-significance-depth?qt-news_science_products=0#qt-news_science_products)","f55e1f42":"Use the next code cell to create a choropleth map to visualize population density.","88e65765":"Can you detect a relationship between proximity to a plate boundary and earthquake depth? Does this pattern hold globally? In Japan?","e6f7011e":"Next, run the code cell below without changes to load the historical earthquake data into a DataFrame earthquakes.","3e4f9bca":"Which three prefectures have relatively higher density than the others? Are they spread throughout the country, or all located in roughly the same geographical region? (If you're unfamiliar with Japanese geography, you might find [this map](https:\/\/en.wikipedia.org\/wiki\/Prefectures_of_Japan) useful to answer the questions.)"}}