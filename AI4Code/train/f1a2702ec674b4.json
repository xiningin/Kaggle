{"cell_type":{"e97ccefc":"code","a5d32885":"code","a4562cc0":"code","dff92753":"code","525a4fc6":"code","5aa8e0f6":"code","1c985c38":"code","ff76b54e":"code","4589b008":"code","07fe8655":"code","4802d302":"code","9362213f":"code","f09c9a37":"code","59614065":"code","15d31a19":"code","d7aad348":"code","da1ac3e5":"code","2425db84":"code","ee1b2e31":"code","9ae8ed3f":"code","a442a8e2":"code","d7cc22d5":"code","e3235f8f":"code","646a5722":"code","30019582":"code","5ae06b54":"code","75693bf0":"code","cb843398":"code","d3d3d5f0":"code","119f90c9":"code","0d359d4c":"code","f0a48f14":"code","045e69b4":"code","6513db47":"code","4c6dfdad":"code","e612b3bf":"code","68d1e6f9":"code","0ca3e1c8":"code","f21cc88e":"code","b1aaf1bd":"code","b0d62fa2":"code","e3f5794d":"code","96d29817":"code","df47fb16":"code","34e08742":"code","2a2f98b1":"code","0365d9dd":"code","e51aa763":"code","837a0794":"code","ae3c7636":"code","9675dcab":"code","7344cb39":"code","de58fd08":"code","a4e3307a":"code","b1e924dc":"code","71c26d16":"code","2b00f8e7":"code","fc1f7520":"code","3e24ce6a":"code","ad9d3a41":"code","c8466a63":"code","d48d2759":"code","773bfee8":"code","2ace1da8":"code","9eab1b7f":"code","bd258f46":"code","9fe56419":"code","9541aadd":"code","fec43bd1":"code","51416db3":"code","c7f68f53":"code","bf67a20d":"code","ee8415b5":"code","d84e7d74":"code","523d54f1":"code","4f1d804b":"code","d89c80a3":"code","a1a957ea":"code","24fffe40":"code","b2e8ec93":"code","87fd7bb1":"code","160c0fb4":"code","987412c2":"code","a8c98cc0":"code","2ff344f2":"code","4e2d456c":"code","92bdc419":"markdown","56bbdbb0":"markdown","f1df9511":"markdown","e43d7df4":"markdown","ccd9438e":"markdown","29efd131":"markdown","574bed62":"markdown"},"source":{"e97ccefc":"# Importing the libraries\nimport numpy as np\nimport matplotlib.pyplot as plt\nimport pandas as pd\nimport seaborn as sns\nfrom xgboost import XGBRegressor\nfrom sklearn.model_selection import train_test_split, TimeSeriesSplit\nfrom sklearn.preprocessing import MinMaxScaler\nfrom sklearn.impute import SimpleImputer\nfrom sklearn.metrics import mean_absolute_error, mean_squared_error \nfrom keras.layers import LSTM, Dense\nfrom keras.models import Sequential","a5d32885":"Aquifier_Auser = pd.read_csv('..\/input\/acea-water-prediction\/Aquifer_Auser.csv')","a4562cc0":"print(\"Data shape :\" ,Aquifier_Auser.shape)","dff92753":"Aquifier_Auser.info()\n","525a4fc6":"sns.heatmap(Aquifier_Auser.isnull())\n","5aa8e0f6":"Aquifier_Auser.iloc[2850:2900,:]","1c985c38":"Aquifier_Auser_1 = Aquifier_Auser.copy()\nAquifier_Auser_1 = Aquifier_Auser.iloc[2859:,:]","ff76b54e":"sns.heatmap(Aquifier_Auser_1.isnull())\n","4589b008":"Aquifier_Auser_1.reset_index()","07fe8655":"Aquifier_Auser_1.interpolate(method ='pchip', limit_direction ='forward', inplace=True)","4802d302":"Aquifier_Auser_1.fillna(Aquifier_Auser_1.mean())\nAquifier_Auser_1.drop(Aquifier_Auser_1.tail(2).index,inplace=True)","9362213f":"Aquifier_Auser_1.tail()","f09c9a37":"sns.heatmap(Aquifier_Auser_1.isnull())\n\n","59614065":"\nAquifier_Auser_1.loc[Aquifier_Auser_1['Depth_to_Groundwater_CoS'] == 0,'Depth_to_Groundwater_CoS'] = np.nan\nAquifier_Auser_1.loc[Aquifier_Auser_1['Depth_to_Groundwater_SAL'] == 0,'Depth_to_Groundwater_SAL'] = np.nan\nAquifier_Auser_1.loc[Aquifier_Auser_1['Depth_to_Groundwater_LT2'] == 0,'Depth_to_Groundwater_LT2'] = np.nan","15d31a19":"Aquifier_Auser_1['Depth_to_Groundwater_CoS'].interpolate(method ='pchip', limit_direction ='forward', inplace=True)","d7aad348":"plt.figure(1,figsize = (10,5))\nplt.plot(Aquifier_Auser_1[\"Rainfall_Piaggione\"])\nplt.title(\"Rainfall_Piaggione\")","da1ac3e5":"Aquifier_Auser_1['Day'] =Aquifier_Auser_1['Date'].str.split('\/').str[0]\nAquifier_Auser_1['Month'] = Aquifier_Auser_1['Date'].str.split('\/').str[1]\nAquifier_Auser_1['Year'] = Aquifier_Auser_1['Date'].str.split('\/').str[2]","2425db84":"plt.figure(figsize = (12,6))\nplt.bar(Aquifier_Auser_1['Month'],Aquifier_Auser_1['Depth_to_Groundwater_SAL'])\nplt.xlabel('Month')\nplt.ylabel('Depth_to_Groundwater_SAL')","ee1b2e31":"plt.figure(figsize = (12,6))\nplt.bar(Aquifier_Auser_1['Month'],Aquifier_Auser_1['Depth_to_Groundwater_CoS'])\nplt.xlabel('Month')\nplt.ylabel('Depth_to_Groundwater_CoS')","9ae8ed3f":"plt.figure(figsize = (12,6))\nplt.bar(Aquifier_Auser_1['Month'],Aquifier_Auser_1['Depth_to_Groundwater_LT2'])\nplt.xlabel('Month')\nplt.ylabel('Depth_to_Groundwater_LT2')","a442a8e2":"sns.heatmap(Aquifier_Auser_1.corr());\n","d7cc22d5":"plt.figure(1,figsize = (10,5))\nplt.plot(Aquifier_Auser_1[\"Depth_to_Groundwater_LT2\"])\nplt.title(\"Depth_to_Groundwater_LT2\")\n","e3235f8f":"plt.figure(1,figsize = (10,5))\nplt.plot(Aquifier_Auser_1[\"Depth_to_Groundwater_CoS\"])\nplt.title(\"Depth_to_Groundwater_CoS\")","646a5722":"plt.figure(1,figsize = (10,5))\nplt.plot(Aquifier_Auser_1[\"Depth_to_Groundwater_SAL\"])\nplt.title(\"Depth_to_Groundwater_SAL\")","30019582":"Aquifier_Auser_1.info()\n","5ae06b54":"from sklearn.preprocessing import StandardScaler\n\n# Standardizing the features\nAquifier_Auser_1_T = Aquifier_Auser_1.T\nx = StandardScaler().fit_transform(Aquifier_Auser_1_T.iloc[1:11,:])","75693bf0":"from sklearn.decomposition import PCA\n\npca = PCA()\nprincipalComponents = pca.fit_transform(x)\nprincipalDf = pd.DataFrame(data = principalComponents)","cb843398":"principalDf.head()\n","d3d3d5f0":"eigvals = pca.explained_variance_ratio_\neigvals\/np.sum(eigvals) * 100","119f90c9":"plt.figure(figsize = (8,8))\nplt.bar(list(range(10)),eigvals\/np.sum(eigvals) * 100)\nplt.show()","0d359d4c":"Aquifier_Auser_1.columns","f0a48f14":"fig = plt.figure(figsize = (8,8))\nax = fig.add_subplot(1,1,1) \nax.set_xlabel('Principal Component 1', fontsize = 15)\nax.set_ylabel('Principal Component 2', fontsize = 15)\nax.set_title('2 component PCA', fontsize = 20)\n\nfeatures = [ 'Rainfall_Gallicano', 'Rainfall_Pontetetto',\n       'Rainfall_Monte_Serra', 'Rainfall_Orentano', 'Rainfall_Borgo_a_Mozzano',\n       'Rainfall_Piaggione', 'Rainfall_Calavorno', 'Rainfall_Croce_Arcana',\n       'Rainfall_Tereglio_Coreglia_Antelminelli',\n       'Rainfall_Fabbriche_di_Vallico']\nfeatures1 = list(range(21))\n\nax.scatter(principalDf.loc[:, 0]\n            , principalDf.loc[:, 1]\n            , s = 50)\n\nfor i, txt in enumerate(features):\n    ax.annotate(txt, (principalDf.loc[i, 0], principalDf.loc[i, 1]))\n\nax.grid()","045e69b4":"x1 = StandardScaler().fit_transform(Aquifier_Auser_1_T.iloc[16:20,:])\npca1 = PCA()\nprincipalComponents1 = pca1.fit_transform(x1)\nprincipalDf1 = pd.DataFrame(data = principalComponents1)","6513db47":"eigvals1 = pca1.explained_variance_ratio_\neigvals1\/np.sum(eigvals1) * 100","4c6dfdad":"plt.figure(figsize = (8,8))\nplt.bar(list(range(4)),eigvals1\/np.sum(eigvals1) * 100)\nplt.show()","e612b3bf":"fig = plt.figure(figsize = (8,8))\nax = fig.add_subplot(1,1,1) \nax.set_xlabel('Principal Component 1', fontsize = 15)\nax.set_ylabel('Principal Component 2', fontsize = 15)\nax.set_title('2 component PCA', fontsize = 20)\n\nfeatures2 = [  'Temperature_Orentano', 'Temperature_Monte_Serra',\n       'Temperature_Ponte_a_Moriano', 'Temperature_Lucca_Orto_Botanico']\n\n\nax.scatter(principalDf1.loc[:, 0]\n            , principalDf1.loc[:, 1]\n            , s = 50)\n\nfor i, txt in enumerate(features2):\n    ax.annotate(txt, (principalDf1.loc[i, 0], principalDf1.loc[i, 1]))\n\nax.grid()","68d1e6f9":"Aquifier_Petrignano = pd.read_csv('..\/input\/acea-water-prediction\/Aquifer_Petrignano.csv')","0ca3e1c8":"print(\"Data shape :\" ,Aquifier_Petrignano.shape)\nAquifier_Petrignano.info()\n","f21cc88e":"Aquifier_Petrignano.head(100)\n","b1aaf1bd":"sns.heatmap(Aquifier_Petrignano.isnull())","b0d62fa2":"Aquifier_Petrignano_1 = Aquifier_Petrignano.copy()\nAquifier_Petrignano_1 = Aquifier_Petrignano.iloc[1024:,:]","e3f5794d":"sns.heatmap(Aquifier_Petrignano_1.isnull())","96d29817":"Aquifier_Petrignano_1.interpolate(method ='pchip', limit_direction ='forward', inplace=True)","df47fb16":"sns.heatmap(Aquifier_Petrignano_1.isnull())","34e08742":"plt.figure(1,figsize = (10,5))\nplt.plot(Aquifier_Petrignano_1[\"Depth_to_Groundwater_P24\"])\nplt.title(\"Depth_to_Groundwater_P24\")\n","2a2f98b1":"plt.figure(1,figsize = (10,5))\nplt.plot(Aquifier_Petrignano_1[\"Depth_to_Groundwater_P25\"])\nplt.title(\"Depth_to_Groundwater_P25\")\n","0365d9dd":"Aquifier_Petrignano_1['Day'] =Aquifier_Petrignano_1['Date'].str.split('\/').str[0]\nAquifier_Petrignano_1['Month'] = Aquifier_Petrignano_1['Date'].str.split('\/').str[1]\nAquifier_Petrignano_1['Year'] = Aquifier_Petrignano_1['Date'].str.split('\/').str[2]","e51aa763":"plt.figure(figsize = (12,6))\nplt.bar(Aquifier_Petrignano_1['Month'],Aquifier_Petrignano_1['Depth_to_Groundwater_P24'])\nplt.xlabel('Month')\nplt.ylabel('Depth_to_Groundwater_P24')","837a0794":"plt.figure(figsize = (12,6))\nplt.bar(Aquifier_Petrignano_1['Month'],Aquifier_Petrignano_1['Depth_to_Groundwater_P25'])\nplt.xlabel('Month')\nplt.ylabel('Depth_to_Groundwater_P25')","ae3c7636":"Aquifier_Doganella = pd.read_csv('..\/input\/acea-water-prediction\/Aquifer_Doganella.csv')\n\n","9675dcab":"print(\"Data shape :\" ,Aquifier_Doganella.shape)\nAquifier_Doganella.info()\n","7344cb39":"sns.heatmap(Aquifier_Doganella.isnull())\n","de58fd08":"Aquifier_Doganella.iloc[4650:4680,:]","a4e3307a":"\nAquifier_Doganella_1 = Aquifier_Doganella.copy()\nAquifier_Doganella_1 = Aquifier_Doganella_1.iloc[4663:,:]","b1e924dc":"sns.heatmap(Aquifier_Doganella_1.isnull())\n","71c26d16":"Aquifier_Doganella_1.interpolate(method ='pchip', limit_direction ='forward', inplace=True)","2b00f8e7":"sns.heatmap(Aquifier_Doganella_1.isnull())\n","fc1f7520":"Aquifier_Doganella_1.dropna(inplace= True)","3e24ce6a":"sns.heatmap(Aquifier_Doganella_1.isnull())\n","ad9d3a41":"Aquifier_Doganella_1['Day'] =Aquifier_Doganella_1['Date'].str.split('\/').str[0]\nAquifier_Doganella_1['Month'] = Aquifier_Doganella_1['Date'].str.split('\/').str[1]\nAquifier_Doganella_1['Year'] = Aquifier_Doganella_1['Date'].str.split('\/').str[2]","c8466a63":"plt.figure(figsize = (12,6))\nplt.bar(Aquifier_Doganella_1['Month'],Aquifier_Doganella_1['Volume_Pozzo_1'])\nplt.xlabel('Month')\nplt.ylabel('Volume_Pozzo_1')","d48d2759":"plt.figure(1,figsize = (10,5))\nplt.plot(Aquifier_Doganella_1[\"Volume_Pozzo_1\"])\nplt.title(\"Volume_Pozzo_1\")","773bfee8":"plt.figure(1,figsize = (10,5))\nplt.plot(Aquifier_Doganella_1[\"Temperature_Monteporzio\"])\nplt.title(\"Temperature_Monteporzio \")","2ace1da8":"plt.figure(1,figsize = (10,5))\nplt.plot(Aquifier_Doganella_1[\"Depth_to_Groundwater_Pozzo_1\"])\nplt.title(\"Depth_to_Groundwater_Pozzo_1\")","9eab1b7f":"plt.figure(1,figsize = (10,5))\nplt.plot(Aquifier_Doganella_1[\"Depth_to_Groundwater_Pozzo_2\"])\nplt.title(\"Depth_to_Groundwater_Pozzo_2\")","bd258f46":"plt.figure(1,figsize = (10,5))\nplt.plot(Aquifier_Doganella_1[\"Depth_to_Groundwater_Pozzo_3\"])\nplt.title(\"Depth_to_Groundwater_Pozzo_3\")","9fe56419":"plt.figure(1,figsize = (10,5))\nplt.plot(Aquifier_Doganella_1[\"Depth_to_Groundwater_Pozzo_4\"])\nplt.title(\"Depth_to_Groundwater_Pozzo_4\")","9541aadd":"plt.figure(1,figsize = (10,5))\nplt.plot(Aquifier_Doganella_1[\"Depth_to_Groundwater_Pozzo_5\"])\nplt.title(\"Depth_to_Groundwater_Pozzo_5\")","fec43bd1":"plt.figure(1,figsize = (10,5))\nplt.plot(Aquifier_Doganella_1[\"Depth_to_Groundwater_Pozzo_6\"])\nplt.title(\"Depth_to_Groundwater_Pozzo_6\")","51416db3":"plt.figure(1,figsize = (10,5))\nplt.plot(Aquifier_Doganella_1[\"Depth_to_Groundwater_Pozzo_7\"])\nplt.title(\"Depth_to_Groundwater_Pozzo_7\")","c7f68f53":"plt.figure(1,figsize = (10,5))\nplt.plot(Aquifier_Doganella_1[\"Depth_to_Groundwater_Pozzo_8\"])\nplt.title(\"Depth_to_Groundwater_Pozzo_8\")","bf67a20d":"plt.figure(1,figsize = (10,5))\nplt.plot(Aquifier_Doganella_1[\"Depth_to_Groundwater_Pozzo_9\"])\nplt.title(\"Depth_to_Groundwater_Pozzo_9\")","ee8415b5":"sns.heatmap(Aquifier_Doganella_1.corr());\n","d84e7d74":"Aquifier_Doganella_1.head(10)","523d54f1":"Aquifier_Luco = pd.read_csv('..\/input\/acea-water-prediction\/Aquifer_Luco.csv')\n","4f1d804b":"print(\"Data shape :\" ,Aquifier_Luco.shape)\nAquifier_Luco.info()\n","d89c80a3":"sns.heatmap(Aquifier_Luco.isnull())","a1a957ea":"Aquifier_Luco_1 = Aquifier_Luco.copy()\nAquifier_Luco_1 = Aquifier_Luco_1.drop(['Rainfall_Siena_Poggio_al_Vento','Depth_to_Groundwater_Pozzo_3','Depth_to_Groundwater_Pozzo_4','Depth_to_Groundwater_Pozzo_1','Rainfall_Ponte_Orgia','Rainfall_Mensano','Rainfall_Monticiano_la_Pineta','Volume_Pozzo_1','Volume_Pozzo_4','Volume_Pozzo_3'],axis = 1)","24fffe40":"Aquifier_Luco_1 = Aquifier_Luco_1.copy()\nAquifier_Luco_1 = Aquifier_Luco_1.iloc[2973:,:]","b2e8ec93":"sns.heatmap(Aquifier_Luco_1.isnull())","87fd7bb1":"Aquifier_Luco_1.interpolate(method ='pchip', limit_direction ='forward', inplace=True)","160c0fb4":"Aquifier_Luco_1.dropna(inplace = True)","987412c2":"Aquifier_Luco_1.tail(500)","a8c98cc0":"Aquifier_Luco_1 = Aquifier_Luco_1.reset_index()\nAquifier_Luco_1 = Aquifier_Luco_1.iloc[:2605,:]","2ff344f2":"sns.heatmap(Aquifier_Luco_1.isnull())","4e2d456c":"plt.figure(1,figsize = (10,5))\nplt.plot(Aquifier_Luco_1[\"Depth_to_Groundwater_Podere_Casetta\"])\nplt.title(\"Depth_to_Groundwater_Podere_Casetta\")","92bdc419":"**Loading Data**","56bbdbb0":"# Aquifier_Luco \n","f1df9511":"# Aquifier_Doganella\n","e43d7df4":"**Exploratory analysis**","ccd9438e":"**Interpolating missing values**","29efd131":"# Aquifier_Petrignano","574bed62":"**Getting rid of Nan values**"}}