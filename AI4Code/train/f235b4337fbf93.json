{"cell_type":{"7539e8ef":"code","54e86eef":"code","2a178293":"code","b7c5960a":"code","4f9dda47":"code","97e6dad4":"markdown","532a2add":"markdown","629e26d0":"markdown","a1836d0a":"markdown","53fe772e":"markdown","798a1925":"markdown"},"source":{"7539e8ef":"import pandas as pd\nimport matplotlib.pyplot as plt\nimport matplotlib.gridspec as gridspec\nimport matplotlib.font_manager as fm\nimport datetime\nfrom wordcloud import WordCloud\n\nfont = fm.FontProperties(fname='..\/input\/acmeregular\/Acme-Regular.ttf')\nprice_history = pd.read_csv(\"..\/input\/sp-500-stocks\/sp500_stocks.csv\")\ncompany = pd.read_csv(\"..\/input\/sp-500-stocks\/sp500_companies.csv\")\nsp500 = pd.read_csv(\"..\/input\/sp-500-stocks\/sp500_index.csv\")\ntmp = sp500.copy()\nsp500['Date'] = pd.to_datetime(sp500['Date'])\nsp500 = sp500.set_index('Date')\nsp500 = sp500.resample('1W').mean()\ntmp = sp500.reset_index()\ntmp['Year'] = tmp['Date'].apply(lambda x : int(str(x).split(\"-\")[0]))\n\nfig, ax = plt.subplots(figsize=(25,13),facecolor=\"white\")\nplt.plot(sp500, lw=3)\nplt.fill_between(sp500.index, 0, sp500['S&P500'].values, color='#93BFFF',alpha=0.3)\nplt.ylim(1000,5000)\nplt.xlim(datetime.datetime(2012,1,2),datetime.datetime.now())\n\nstart_price = tmp['S&P500'].iloc[0]\nfor i in range(2012, 2023):\n    year_tmp =  tmp[tmp['Year'] == i]\n    year_tmp = year_tmp.reset_index()\n    plt.scatter(x=datetime.datetime(i,1, 1), y=year_tmp[year_tmp['Year'] == i].loc[0, 'S&P500'], s=400, color='skyblue')\n    plt.axvline(x=datetime.datetime(i,1, 1), ymin=0, ymax= (year_tmp[year_tmp['Year'] == i].loc[0, 'S&P500']-1000)\/4000)\n    if i == 2022:\n        plt.text(s=f\"+{round(year_tmp[year_tmp['Year'] == i].loc[0, 'S&P500']\/start_price*100-100)}%\", x=datetime.datetime(i,1, 1),\n            y = year_tmp[year_tmp['Year'] == i].loc[0, 'S&P500'], va='center', ha='right', font=font, fontsize=25)\n        continue\n    plt.text(s=i, x=datetime.datetime(i,7,7),y=1200,font=font, fontsize=40, va='center',ha='center',alpha=0.5)\n    if i != 2012:\n        plt.text(s=f\"+{round(year_tmp[year_tmp['Year'] == i].loc[0, 'S&P500']\/start_price*100-100)}%\", x=datetime.datetime(i,1, 1),\n            y = year_tmp[year_tmp['Year'] == i].loc[0, 'S&P500']+150, va='bottom', ha='left', font=font, fontsize=25)\n    \nplt.gca().spines['right'].set_visible(False)\nplt.gca().spines['top'].set_visible(False)\n\nplt.xticks([])\nplt.yticks([*range(1000,6000,1000)],font=font,fontsize=25)\nplt.text(s=\"S&P500's historical data (2012-2021)\", x=datetime.datetime(2012,2,1),y=5000, va='center', ha='left', font=font, fontsize=50)\nplt.show()","54e86eef":"for_wordcloud = {}\ncompany['Marketcap_b'] = company['Marketcap'] \/ 1000000000\nfor row in company[['Symbol','Marketcap_b']].itertuples():\n    for_wordcloud[str(row.Symbol)] = int(row.Marketcap_b)\n\nwc = WordCloud(font_path=\"..\/input\/acmeregular\/Acme-Regular.ttf\", width=1000, height=600, background_color=\"white\", random_state=0)\nplt.figure(figsize=(25,13),facecolor='w')\nplt.imshow(wc.generate_from_frequencies(for_wordcloud))\nplt.axis(\"off\")\nplt.show()","2a178293":"it_company = company[(company['Symbol']=='AAPL') |(company['Symbol']=='MSFT') |(company['Symbol']=='GOOG') |\\\n                (company['Symbol']=='AMZN') |(company['Symbol']=='TSLA') |(company['Symbol']=='NVDA') |\\\n                (company['Symbol']=='DIS') |(company['Symbol']=='INTC') |(company['Symbol']=='AMD') | \\\n                (company['Symbol']=='GOOGL') |(company['Symbol']=='FB') |(company['Symbol']=='NFLX')]\nx_location = {'GOOGL':1, 'GOOG': -1,'TSLA':-1, 'FB':1, 'DIS':-1.5, 'AMD':1.5, 'INTC':-0.5, 'NFLX':0.5}\nfig, ax = plt.subplots(figsize=(10,15),facecolor=\"white\")\nfor index, value in it_company.iterrows():\n    x = 0\n    if value['Symbol'] in x_location.keys():\n        x=x_location[value['Symbol']]\n    plt.text(s=value['Symbol'], x=x, y=value['Marketcap_b'], font=font, fontsize=40,va='center', ha='center')\n    plt.text(s=f\"({round(value['Marketcap_b'],1)} B)\", x=x, y=value['Marketcap_b']-150, font=font, fontsize=25,va='center', ha='center')\n\nplt.xlim(-2, 2)\nplt.ylim(200,3000)\nplt.axis('off')\nplt.text(s =\"Market capitalization of key IT companies that\", x=3, y= 2400, font=font, fontsize=30)\nplt.text(s =\"the financial market paid attention to in 2021.\", x=3, y= 2200, font=font, fontsize=30)\nplt.text(s =\"A few facts stand out.\", x=3, y= 1400, font=font, fontsize=30)\nplt.text(s =\"1. Apple's market capitalization.\", x=3, y= 1200, font=font, fontsize=30)\nplt.text(s =\"2. Google shows high market capitalization despite the split.\", x=3, y= 1000, font=font, fontsize=30)\nplt.text(s =\"3. Tesla's growth that having higher market capitalization than Facebook's.\", x=3, y= 800, font=font, fontsize=30)\n\nplt.show() ","b7c5960a":"min_value = pd.DataFrame(price_history.groupby('Symbol')['Adj Close'].min())\nmin_value = min_value.reset_index()\nlast_value = pd.DataFrame(price_history.groupby('Symbol')['Adj Close'].last())\nlast_value = last_value.reset_index()\n\ndata = pd.merge(min_value,last_value, on ='Symbol')\ndata.columns = ['Symbol','min_price', 'now_price']\ndata['percent(%)'] = round((data['now_price'] \/ data['min_price'])*100,1)\ndata.sort_values(by='percent(%)',ascending=False).head(10).reset_index(drop=True)","4f9dda47":"tesla = price_history[price_history['Symbol'] =='TSLA'].dropna()\ntesla = tesla[['Date','Adj Close']]\ntesla['Adj Close'] = tesla['Adj Close'].apply(lambda x : round(x,1))\ntesla['Date'] = pd.to_datetime(tesla['Date'])\ntesla = tesla.set_index('Date')\ntesla = tesla.resample('1W').mean()\ntmp = tesla.reset_index()\ntmp['Year'] = tmp['Date'].apply(lambda x : int(str(x).split(\"-\")[0]))\n\nfig, ax = plt.subplots(figsize=(25,13),facecolor=\"white\")\nplt.plot(tesla, lw=3)\nplt.fill_between(tesla.index, 0, tesla['Adj Close'].values, color='#93BFFF',alpha=0.3)\n\nstart_price = tmp.iloc[0]\nplt.scatter(x=start_price.Date, y=start_price['Adj Close'], s=300, color='skyblue')\nplt.text(s=f\"{start_price['Adj Close']}$\",x=start_price.Date, y=start_price['Adj Close']+60, font=font, fontsize=25, va='center',ha='center')\nplt.text(s=f\"({0} %)\",x=start_price.Date, y=start_price['Adj Close']+30, font=font, fontsize=20,va='center', ha='center')\n\nplus_tmp = tmp[(tmp['Date'] > datetime.datetime(2021,1,1)) & (tmp['Date'] < datetime.datetime(2021,4,1))]\nscatter_date = plus_tmp[(plus_tmp['Adj Close'] == max(plus_tmp['Adj Close']))]\nplt.scatter(x=scatter_date.Date, y=scatter_date['Adj Close'], s=300, color='skyblue')\nplt.text(s=f\"{round(scatter_date['Adj Close'].values[0],1)}$\",x=scatter_date.Date, y=scatter_date['Adj Close']+80, font=font, fontsize=25, va='center',ha='center')\nplt.text(s=f\"({round(scatter_date['Adj Close'].values[0] \/ start_price['Adj Close']*100,1)} %)\",\\\n         x=scatter_date.Date, y=scatter_date['Adj Close']+30, font=font, fontsize=20,va='center', ha='center')\n\nfor i in range(2010, 2023):\n    year_tmp =  tmp[tmp['Year'] == i]\n    year_tmp = year_tmp.reset_index()\n    plt.axvline(x=datetime.datetime(i,1, 1), ymin=0, ymax= (year_tmp[year_tmp['Year'] == i].loc[0, 'Adj Close'])\/1200)\n    if i == 2022:\n        continue\n    plt.text(s=i, x=datetime.datetime(i,7,7),y=-30,font=font, fontsize=40, va='center',ha='center',alpha=0.5)\n    \n    if i >= 2012:\n        if i == 2020:\n            continue\n        scatter_date = tmp[(tmp['Adj Close'] == max(tmp[tmp['Year']==i]['Adj Close'])) & (tmp['Year']==i)]\n        plt.scatter(x=scatter_date.Date, y=scatter_date['Adj Close'], s=300, color='skyblue')\n        plt.text(s=f\"{round(scatter_date['Adj Close'].values[0],1)}$\",x=scatter_date.Date, y=scatter_date['Adj Close']+80, font=font, fontsize=25, va='center',ha='center')\n        plt.text(s=f\"({round(scatter_date['Adj Close'].values[0] \/ start_price['Adj Close']*100,1)} %)\",\\\n                 x=scatter_date.Date, y=scatter_date['Adj Close']+30, font=font, fontsize=20,va='center', ha='center')\n\n        \nplt.gca().spines['right'].set_visible(False)\nplt.gca().spines['top'].set_visible(False)\n\nplt.xticks([])\nplt.yticks([*range(0,1400,200)],font=font,fontsize=25)\n\nplt.ylim(0,1300)\nplt.xlim(datetime.datetime(2010,1,4),datetime.datetime.now())\nplt.text(s=\"Tesla's historical data (2010-2021)\", x=datetime.datetime(2010,2,1),y=1200, va='center', ha='left', font=font, fontsize=50)\nplt.show()","97e6dad4":"The S&P500's price increase steadily except in 2018.\n\nEspecially, in 2020, The Covid pandemic make big short.\n\nAnd, It make stock price's increasing surprisingly.","532a2add":"In S&P500 has more than 500.\n\nApple, Google, Microsoft stand out.","629e26d0":"# [S&P500 Analysis + Visulization] What should you buy if you go back 10 years ago.\n\n![](https:\/\/t1.daumcdn.net\/cfile\/tistory\/9906114D5DFE16140D)\n\nimage: https:\/\/t1.daumcdn.net\/cfile\/tistory\/9906114D5DFE16140D\n\nDo you like finance?, I intested it. This time, I prepared S&P500's analysis\nSome time, I talking about if i go back 10 years ago, What should i do?\nMany people told that Buy Bitcoin! How about in stock market?\n\nLet's start it now!","a1836d0a":"There is a table that explain the companies showed the most increase over the past 10 years.\n\nIf you bought Tesla at 3.16$ (Most cheapest), 31527.5%! ","53fe772e":"This is Tesla's historical price.\n\nIs there anyone who bought Tesla for 3-4 dollars...?","798a1925":"I listed the IT companies(+ Semiconductor companies) that I personally think of."}}