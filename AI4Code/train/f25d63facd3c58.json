{"cell_type":{"c55338b4":"code","c5668c01":"code","68b09b8a":"code","4662b644":"code","3f0ba388":"code","e5ab1266":"code","5c4ed4ac":"code","1338f54d":"code","9ad1300e":"code","043ecc77":"code","112cb9fa":"code","44c8180e":"code","21cadb92":"code","ecdd9c52":"code","4eda02ad":"code","3cb222b6":"code","515b1a86":"code","9a0a9353":"code","3e9005ba":"code","637a649e":"code","292f23a6":"markdown","bc810d59":"markdown","8dee7ee9":"markdown","4af46c4a":"markdown","036aad9a":"markdown","45ec624b":"markdown","3a5cf3a4":"markdown","e9865ae3":"markdown","fd8723f8":"markdown","0fc8fc39":"markdown","103cfa4c":"markdown","6436024c":"markdown","cee8b235":"markdown","d6f8b116":"markdown","1fb6e97c":"markdown","9630e985":"markdown"},"source":{"c55338b4":"# This Python 3 environment comes with many helpful analytics libraries installed\n# It is defined by the kaggle\/python Docker image: https:\/\/github.com\/kaggle\/docker-python\n# For example, here's several helpful packages to load\n\nimport numpy as np # linear algebra\nimport pandas as pd # data processing, CSV file I\/O (e.g. pd.read_csv)\n\n\n# Input data files are available in the read-only \"..\/input\/\" directory\n# For example, running this (by clicking run or pressing Shift+Enter) will list all files under the input directory\nimport plotly.express as px # to create interactive visualizations\nfrom plotly.offline import init_notebook_mode, iplot\nimport os\nimport matplotlib.pyplot as plt\nimport seaborn as sns\ninit_notebook_mode(connected = True)\nfor dirname, _, filenames in os.walk('\/kaggle\/input'):\n    for filename in filenames:\n        print(os.path.join(dirname, filename))\n\n# You can write up to 20GB to the current directory (\/kaggle\/working\/) that gets preserved as output when you create a version using \"Save & Run All\" \n# You can also write temporary files to \/kaggle\/temp\/, but they won't be saved outside of the current session","c5668c01":"!pip install chart-studio","68b09b8a":"import chart_studio\nusername='AbhishekVIzPlotly'\napi_key='rCrdhzpUi4b0VvJCVa2V'\nchart_studio.tools.set_credentials_file(username=username,\n                                        api_key=api_key)","4662b644":"import chart_studio.plotly as py\nimport chart_studio.tools as tls","3f0ba388":"data=pd.read_csv('\/kaggle\/input\/world-happiness-report-2021\/world-happiness-report-2021.csv')\ndata.head()","e5ab1266":"all=data['Country name']\ndf=pd.DataFrame([data['Ladder score'],data['Country name']]).T.sort_values(by='Ladder score')\ndf.head()","5c4ed4ac":"data.info()","1338f54d":"sns.set(rc={'figure.figsize':(16,40)})\nsns.set_style(\"darkgrid\")\nplt.style.use(\"dark_background\")\nplt.title(\"Happiness index vs Countries\")\nfig=sns.barplot(data=df.sort_values(by=['Ladder score'],ascending=False),x='Ladder score',y='Country name');","9ad1300e":"i=10\nfor parameter in data.columns[6:12]:\n    figg=px.bar(df,x='Ladder score',y='Country name',color=data[parameter],orientation='h',height=2500,title=f'Ladder score with \"{parameter}\" coloring ') \n    figg.update_layout(template='plotly_dark',autosize=False,width=600,height=2500)\n    figg.show()\n    py.plot(figg, filename=f\"plotly{i}\", auto_open = True)\n    i+=1\n   ","043ecc77":"data.drop(columns='Ladder score in Dystopia',inplace=True)\ncorrvalues=[]\nfor feature in data.columns[6:]:\n    laddercorr=data['Ladder score'].corr(data[feature])\n    corrvalues.append(laddercorr)\ncorrvalues.sort(reverse=True)\ncorrvalues","112cb9fa":"\nimport seaborn as sns\nimport plotly.express as px\nsns.set(rc={'figure.figsize':(12,8)})\nfig=sns.heatmap(data.iloc[:,2:].corr(),annot=False)\n","44c8180e":"fig=px.bar(x=corrvalues,y=data.columns[6:],labels={'x':'Ladder score(Total score used for ranking)'},barmode='group')\nfig.update_layout(template='plotly_dark',title='Correlation between Ladder score and parameters measured for happiness index',autosize=True)\npy.plot(fig, filename=\"plotly1\", auto_open = True)","21cadb92":"region=data.groupby(['Regional indicator']).mean().drop(columns=['Standard error of ladder score','upperwhisker','lowerwhisker','Explained by: Log GDP per capita','Explained by: Social support','Explained by: Healthy life expectancy','Explained by: Freedom to make life choices','Explained by: Generosity','Explained by: Perceptions of corruption'])\nregion=pd.DataFrame(region)\nregion.reset_index()\nregions=list(region.index.values)\nregion","ecdd9c52":"fig_region=px.bar(region,y=regions,x='Ladder score',color=region['Ladder score'],orientation='h',title='Region vs Total Happiness index').update_yaxes(categoryorder='total ascending')\nfig_region.update_layout(template='plotly_dark',autosize=True)\nfig_region.show()\npy.plot(fig_region, filename=\"plotly2\", auto_open = True)","4eda02ad":"data[data['Regional indicator']=='North America and ANZ']","3cb222b6":"import pycountry\ninput_countries = list(data['Country name'])\ncountries = {}\nfor country in pycountry.countries:\n    countries[country.name] = country.alpha_3\n\ncodes = [countries.get(country, 'Unknown code') for country in input_countries]\n\n#print(codes)  \ndata['Country code']=codes\n","515b1a86":"chorofig=px.choropleth(data.drop(columns=['Regional indicator']),locations=data['Country code'],color='Ladder score',projection='natural earth',color_continuous_scale='Viridis',title='Happiness index of countries in world map(higher ladder score means happier)')\nchorofig.show()\npy.plot(chorofig, filename=\"plotly3\", auto_open = True)","9a0a9353":"sns.set()\nsunburst=px.sunburst(data,path=['Regional indicator','Country name'],values=data['Ladder score'],color='Social support',title='Happiness indices colored by social support',width=600,height=600)\nsunburst.show()\npy.plot(sunburst, filename=\"plotly4\", auto_open = True)","3e9005ba":"sunburst=px.sunburst(data,path=['Regional indicator','Country name'],values=data['Ladder score'],color='Perceptions of corruption',title='Happiness indices colored by Perceptions of corruption',width=600,height=600)\nsunburst.show()\npy.plot(sunburst, filename=\"plotly5\", auto_open = True)","637a649e":"plotsum = data[['Country name','Ladder score','Explained by: Log GDP per capita', 'Explained by: Social support', 'Explained by: Healthy life expectancy', 'Explained by: Freedom to make life choices', 'Explained by: Generosity', 'Explained by: Perceptions of corruption', 'Dystopia + residual']].sort_values(by=['Ladder score'])\nplotsum.set_index('Country name').drop(columns=['Ladder score']).plot(kind='barh',xticks=np.arange(10), stacked=True, figsize= (10,80))\nplt.xlabel(\"Happiness Score\")\nplt.title('Happiness Score of Countries')\nplt.style.use(['dark_background'])\nplt.legend(bbox_to_anchor=(1.05, 1), loc=2, borderaxespad=0.)\nplt.show()\n","292f23a6":"### __ Abhishek __","bc810d59":"### Let's visualize the countries in order of their happiness index","8dee7ee9":"### Highly interactive Sunburst Chart from Plotly with Social support gradient\n##### Hover and click to expand the chart and see the details","4af46c4a":"### Grouping by region where the countries are located with their average Ladder score","036aad9a":"### Country region and their Happiness index using averaged Ladder scores of that region","45ec624b":"### Pycountry is imported to render a world map using ISO Alpha 3 key codes for countries","3a5cf3a4":"### Visualization of correlation using Heatmap","e9865ae3":"## Correlation bar chart for parameters used in measuring Happiness index","fd8723f8":" # - Visualization Project - using Seaborn and Plotly","0fc8fc39":"## Ladder score vs Countries with Plotly interactive viz","103cfa4c":"## Let's see the amount of happiness explained by these factors for each country\n#### Sum of all \"Explained\" values = total Ladder score","6436024c":"## Definitions of measured parameters\n**Ladder score** : The rankings of national happiness are based on a **Cantril ladder survey**. Nationally representative samples of respondents are asked to think of a ladder, with the best possible life for them being a 10, and the worst possible life being a 0. They are then asked to rate their own current lives on that 0 to 10 scale.\n\n**Logged GDP per capita** : Log10 value of the GDP per Capita of the country.This is arguably the most accepted method of determining a country\u2019s level of wealth. And as most of you know, a country\u2019s wealth is highly correlated to its happiness\n\n**Social support** : Social support schemes being implemented by Government and other organizations.If you were in trouble, do you have relatives or friends you can count on to help you whenever you need them, or not?\u201d People were only able to answer with a yes or no. A yes would equal 1 and a no would equal 0. The average of all answers results in a single value that represents the amount of social support that is present in a country.\n\n**Healthy life expectancy** : The healthy life expectancy measure adds a 'quality of life' dimension to estimates of life expectancy by dividing it into time spent in different states of health. The number of years of life in poor health is also important as it relates more closely to the demand for health and social care and the associated costs\n\n**Freedom to make life choices** : \u201cFreedom to make life choices\u201d is the national average of responses to the question \u201cAre you satisfied or dissatisfied with your freedom to choose what you do with your life?\u201d\n\n**Generosity** : Have you donated money to a charity in the past month?\u201d\nAgain, the average of all responses (yes being 1 and no being 0) determines the output of this key factor.It can also be a charitable work from an individual in other terms too.\n\n**Perceptions of corruption** : \u201cPerceptions of corruption\u201d is also determined as a key factor in the Happiness Index. It is calculated by averaging the answers to the following 2 questions:\n\u201cIs corruption widespread throughout the government or not?\u201d\n\u201cIs corruption widespread within businesses or not?\u201d\n Again, the average of all answers determines the outcome of this factor per country \n \n **Dystopia+Residual**: Dystopia happiness score is the score of a hypothetical country that has a lower rank than the lowest ranking country on the report, plus the residual value of each country (a number that is left over from the normalization of the variables which cannot be explained).**Residual is the unexplained happiness which cannot be measured like that!!**\n \n Credits: trackinghappiness.com","cee8b235":"## World Happiness Dataset 2021 \n  ","d6f8b116":"### Choropleth map to visualize happiness index in a world map","1fb6e97c":"#### Lower number of countries gave a higher ladder score to North America and ANZ","9630e985":"#### Ladder score is the total score used for ranking"}}