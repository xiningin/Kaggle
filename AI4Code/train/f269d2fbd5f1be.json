{"cell_type":{"cf05a587":"code","a1214ee2":"code","eb50ba90":"code","ab8af6ee":"code","a2a55877":"code","6c2d0ba1":"code","25a064fe":"code","58281eac":"code","e5357c4b":"code","3320529a":"code","a89b60b9":"code","e4777cff":"code","da4b003e":"code","bc74e6f3":"code","7acfcd9b":"code","f95bf9d1":"code","2235b0a3":"code","601274fb":"code","f570b9c7":"code","12e4dc17":"code","a6a0fb01":"code","1a420340":"code","cdf64849":"code","594ac72d":"code","0f06ec6e":"code","673ba31b":"code","7b63c41b":"code","bf2fd845":"code","6ce641d2":"markdown","4da96ad0":"markdown","7703366e":"markdown","03dbbb15":"markdown","697adec2":"markdown","59ea2c6b":"markdown","4879fc11":"markdown","9d937bb3":"markdown","dc9ba957":"markdown","3193ae0d":"markdown","f0734209":"markdown","c7b10fb6":"markdown","0beed5db":"markdown","27e39cef":"markdown","22d41f82":"markdown","5c0fec8a":"markdown"},"source":{"cf05a587":"import numpy as np # linear algebra\nimport pandas as pd # data processing, CSV file I\/O (e.g. pd.read_csv)\nimport datetime\nimport plotly.express as px\n\nimport os\nfor dirname, _, filenames in os.walk('\/kaggle\/input'):\n    for filename in filenames:\n        print(os.path.join(dirname, filename))","a1214ee2":"data = pd.read_csv('\/kaggle\/input\/nba2k20-player-dataset\/nba2k20-full.csv')","eb50ba90":"data.sample(5)","ab8af6ee":"data.info()\n# to note:\n#1 salary is in string\n#2 height,weight,salary column will require some transformation","a2a55877":"data.shape[0] - data.count()\n# there are missing values under 'team' and 'college' columns","6c2d0ba1":"data[data['team'].isnull() == True]\n# below are all the row items with missing values under the 'team' column","25a064fe":"# to drop all row items with missing values under the column 'team'\ndata = data.dropna(subset=['team'], inplace=False)","58281eac":"# to transform the salary column into the correct working format and to create calculated columns\ndata['salary'] = data['salary'].str.replace('$','')\ndata['salary'] = data['salary'].astype('int32')\ndata['salary_group'] = data['salary'].apply(lambda x : 'More than 30m' if x > 30000000 else ('20m - 30m' if (x >= 20000000 and x <= 30000000) else 'Less than 10m'))","e5357c4b":"# to split the height and weight column accordingly and change into the correct format\ndata[['weight_in_lb','weight_in_kg']] = data['weight'].str.split('\/', expand=True)\ndata['weight_in_lb'] = data['weight_in_lb'].str.replace('lbs.','')\ndata['weight_in_lb'] = data['weight_in_lb'].astype('float16')\n\ndata['weight_in_kg'] = data['weight_in_kg'].str.replace('kg.','')\ndata['weight_in_kg'] = data['weight_in_kg'].astype('float16')","3320529a":"# to split the height column accordingly and change into the correct format\ndata[['height_in_ft', 'height_in_m']] = data['height'].str.split('\/',expand=True)\ndata['height_in_m'] = data['height_in_m'].astype('float16')","a89b60b9":"# to derive the age of the players as of end 2020\ndata['age_working'] = pd.to_datetime(data['b_day']).apply(lambda x: x.year)\ndata['age_as_of_end_2020'] = 2020 - data['age_working']\ndata['age_group'] = data['age_as_of_end_2020'].apply(lambda x : 'Over 30' if x >= 30 else 'Under 30')","e4777cff":"# to create calculated column\ndata['rating_group'] = data['rating'].apply(lambda x : 'Less than 75' if x < 75 else ('More than or equal to 90' if x >=90 else '75-89'))\ndata['years_in_nba'] = 2020 - data['draft_year']\ndata['years_in_nba_category'] = data['years_in_nba'].apply(lambda x : 'More than 10' if x > 10 else ('Less than 5' if x < 5 else '5-10'))","da4b003e":"# to drop non-critical columns\ndata.drop(['height','weight','b_day','jersey','age_working', 'draft_year', 'draft_round','draft_peak'], axis=1, inplace=True)","bc74e6f3":"data.info()","7acfcd9b":"data.sample(5) # this is the final dataset that we will use for EDA and Visualization","f95bf9d1":"data.describe().round(1)","2235b0a3":"team = data.groupby('team').agg({'full_name': np.count_nonzero, \n                          'salary': np.mean, \n                          'weight_in_kg': np.mean, \n                          'height_in_m': np.mean, \n                          'age_as_of_end_2020': np.mean,\n                          'rating' : np.mean,\n                          'years_in_nba': np.mean}).\\\n                            rename(columns={'full_name' : 'Number of Players',\n                                            'salary': 'Average Salary', \n                                            'weight_in_kg' : 'Average Weight (kg)',\n                                            'height_in_m' : 'Average Height (m)', \n                                            'age_as_of_end_2020' : 'Average Age',\n                                            'rating' : 'Average Rating',\n                                            'years_in_nba' : 'Average Years of Experience in NBA'}).reset_index()\n\nteam.sort_values('Average Salary', inplace=True, ascending=False)\nteam['Average Salary'] = team['Average Salary'].astype('int32')\nteam['Average Weight (kg)'] = team['Average Weight (kg)'].astype('int16')\nteam['Average Age'] = team['Average Age'].astype('int16')\n\nteam['Average Salary'] = team['Average Salary'].apply(lambda x : f'{x:,}')\nteam['Average Height (m)'] = team['Average Height (m)'].round(1)\nteam['Average Rating'] = team['Average Rating'].round(1)\nteam['Average Years of Experience in NBA'] = team['Average Years of Experience in NBA'].round(1)\n\n\nprint('Team Overall Statistics\\n')\nprint(team.to_string(index=False))","601274fb":"print('Top 5 Highest Paid Players\\n')\nprint(data.sort_values('salary', ascending=False).head(5)[['full_name','position','team','salary']].to_string(index=False))","f570b9c7":"print('Top 5 Highest Rated Players\\n')\nprint(data.sort_values('rating', ascending=False).head(5)[['full_name','position','team','rating','salary']].to_string(index=False))","12e4dc17":"x = data.groupby('college').agg({'full_name':np.count_nonzero}).rename(columns={'full_name':'Number of Players'}).reset_index()\n\nprint('Top 5 Colleges with Highest Number of drafted NBA players\\n')\nprint(x.sort_values('Number of Players', ascending=False).head(5).to_string(index=False))","a6a0fb01":"data.sample(5)","1a420340":"x = data.groupby('country').agg({'full_name':np.count_nonzero, 'rating': np.mean}).rename(columns={'full_name':'Number of Players', 'rating':'Average Rating'}).reset_index()\nprint('Top 5 Countries with NBA Players\\n')\nprint(x.sort_values(by='Number of Players', ascending=False).head().to_string(index=False))","cdf64849":"fig = px.scatter(data,x='rating', y='salary', color='age_group', labels={'salary':'Salary','rating':'Rating', 'age_group':'Age Group'}, hover_data=['full_name','team','position','country','age_as_of_end_2020'], trendline='ols', marginal_x='box', marginal_y='violin')\nfig.update_layout(title='Visual View between Salary and Rating By Age Group')\nfig.update_xaxes(showgrid=False)\nfig.update_yaxes(showgrid=False)\nfig.show() ","594ac72d":"fig = px.scatter(data, x='rating', y='salary', facet_col='years_in_nba_category',color='age_group', trendline='ols', labels={'rating':'Rating', 'salary':'Salary', 'years_in_nba_category':'Years in NBA', 'age_group':'Age Group'})\nfig.update_layout(title='Visual View Between Rating & Salary by Years in NBA')\nfig.update_xaxes(showgrid=False)\nfig.update_yaxes(showgrid=False)\nfig.show()","0f06ec6e":"fig = px.scatter(data, x = 'years_in_nba', y='salary', color='age_group', facet_col='rating_group', labels={'age_group':'Age Group', 'years_in_nba':'Years in NBA', 'salary':'Salary'}, trendline='ols')\nfig.update_layout(title='Visual View Between Years in NBA & Salary by Rating Group')\nfig.update_xaxes(showgrid=False)\nfig.update_yaxes(showgrid=False)\nfig.show()","673ba31b":"fig = px.histogram(data, x='salary', marginal='box', color='age_group', labels={'age_group':'Age Group'})\nfig.update_layout(title='Distribution of Salary by Age Group')\nfig.update_xaxes(showgrid=False)\nfig.update_yaxes(showgrid=False)\nfig.show()","7b63c41b":"fig = px.histogram(data, x='salary', marginal='box', color='rating_group', labels={'rating_group':'Rating Group'}, hover_data=['full_name'])\nfig.update_layout(title='Distribution of Salary by Rating Group')\nfig.update_xaxes(showgrid=False)\nfig.update_yaxes(showgrid=False)\nfig.show() ","bf2fd845":"fig = px.scatter(data, x='weight_in_kg', y='height_in_m',color='position', hover_data=['full_name','rating'], labels={'weight_in_kg':'Weight (kg)', 'height_in_m':'Height (m)'}, facet_col='position')\nfig.update_layout(title='Scatterplot between Weight (kg) and Height (m) by Position', showlegend=False)\nfig.update_xaxes(showgrid=False)\nfig.update_yaxes(showgrid=False)\nfig.show()","6ce641d2":"# Visual View Between Weight & Height by Position","4da96ad0":"# Relationship between Rating & Salary by Years in NBA","7703366e":"# EDA on Prep Dataset","03dbbb15":"**Commentary:**\n* While higher rating generally translate to higher salary, the effect of each additional unit of rating on salary is different between players of different experience level\n* For players with more than 10 years experience, each additional unit of rating translate to higher salary increment as compared to the same for players with less than 5 years experience ","697adec2":"**Commentary:**\n* There is a discernible difference in the salary between between players rated 90 and above, and players rated 75 and below\n* For players in the middle rating category (75-89) and over the age of 30, there seems to be an inverse relationship between number of years in NBA and Salary","59ea2c6b":"# Data Cleaning and Transfomation","4879fc11":"**Commentary:**\n* There are more outliers in salary for players under the age of 30\n* Median salary for a player above 30 years old is 3-4 times higher than the median salary of a player under 30 years old","9d937bb3":"# Relationship between Years in NBA & Salary by Rating Group","dc9ba957":"# Distribution of Salary by Rating Group","3193ae0d":"**Commentary:**\n* The variability in the players' salary in the low category (<75) is the lowest, however this category has the highest number of outliers\n* The variability in the players' salary in the middle category (75-89) is high relative to the variability in the players' salary in the low\/high (<75 \/ >=90) category","f0734209":"# Data Extraction and Basic Exploration","c7b10fb6":"**Commentary:**\n* There seems to be some linear relationship between rating and salary (i.e. higher rating generally translate to higher salary)\n* The median rating of players over the age of 30 is higher than the median rating of players under the age of 30\n* There are more outliers in the players' rating for players under the age of 30\n* Distribution of salary for players over 30 years old is wider as compared to the same for the players under 30 years old","0beed5db":"# Distribution of Salary by Age Group","27e39cef":"# Scatterplot of Rating & Salary by Age Group","22d41f82":"# Visualization","5c0fec8a":"**Commentary:**\n* It seems that the average Guard player is 'smaller' in physical size as compared to other players playing in other position"}}