{"cell_type":{"cc672ad5":"code","339c575f":"code","95ccc3f5":"code","db894ef9":"code","18ebf73f":"code","14f85d8a":"code","11de25f7":"code","ea2cd153":"code","c758586a":"code","f27b646d":"code","f3788111":"code","954df761":"code","629bab5f":"code","fd5a2ebe":"code","4659c6b8":"code","15ff18db":"code","ca136039":"code","e57e9f0a":"code","4b642af0":"code","b66c5a8c":"code","f387bc1d":"code","c8131b3b":"code","fde463de":"code","8747cd4e":"markdown","fb1264bc":"markdown","f7e70034":"markdown","b7acac0d":"markdown","3e051b37":"markdown","0ae96a72":"markdown","712e8360":"markdown","8310be21":"markdown","a8ed804e":"markdown","f6bc3e9e":"markdown","85507388":"markdown","8d0e3377":"markdown","152649f9":"markdown","c0b43ae1":"markdown","34607e3c":"markdown","44244721":"markdown","0bf932dc":"markdown","4afd89f8":"markdown","dcd8d98b":"markdown","5a6f21c6":"markdown","8695b4f8":"markdown","72a9e866":"markdown","bdf125d4":"markdown","2ed7c1ff":"markdown","cfa0477f":"markdown","fb883bcd":"markdown","757fb179":"markdown","aaec4e92":"markdown","496de7c6":"markdown","0afa5558":"markdown","71f94d3c":"markdown","3d075765":"markdown","913ea3a3":"markdown","6670496f":"markdown","a4cfe6ad":"markdown","8cac94d9":"markdown","4e3eec10":"markdown","569f4fd7":"markdown","c2f328c4":"markdown","ff93fa5c":"markdown","62d1afac":"markdown","ea216646":"markdown","500fde34":"markdown"},"source":{"cc672ad5":"import pandas as pd\nimport folium\nimport pycountry\nimport matplotlib.pyplot as plt\n\n\n\nimport os\nfor dirname, _, filenames in os.walk('\/kaggle\/input'):\n    for filename in filenames:\n        print(os.path.join(dirname, filename))","339c575f":"data = pd.read_csv('\/kaggle\/input\/mgkt-dataset\/data.csv', sep=',')\nprint(data.columns)\ndata.head(10)","95ccc3f5":"data['Q2S'].count()","db894ef9":"data['Q1S'].describe()\n#stats about right answers for the Question 1","18ebf73f":"#columns with exact answers (QxA) are not needed, \n#we have correct answers number for each question withn QxS. \n#We also remove QxI(question order in which it was displayed for the user) \n#and some other irrelevant columns (screen width, time spent oparticular pages, etc.)\n\ncleaned = data.drop(columns=[(\"Q\"+ str(i)+\"A\") for i in range(1,33)])\ncleaned2 = cleaned.drop(columns=[(\"Q\"+ str(i)+\"I\") for i in range(1,33)])\ncleaned3 = cleaned2.drop(columns=[\"screenw\",\"screenh\",\"introelapse\",\"testelapse\",\"surveyelapse\"])\n\n\ncleaned3.head(5)","14f85d8a":"#We need to make values more readable, so inplace replacing is a good option\n\ncleaned3.gender.replace([1, 2, 3, 0], [\"male\", \"female\", \"other\", \"other\"], inplace=True)\ncleaned3.engnat.replace([1, 2], [\"yes\", \"no\"], inplace=True)\ncleaned3.head(5)","11de25f7":"def relative_values(x):\n    y = (x +5)*10\n    return y\n\ndef to_seconds(x):\n    y = round(x\/1000,1)\n    return y","ea2cd153":"relative_values_cleaned = cleaned3\n\n#to make analysis is cleaner and more representative let's transform 'correct' answers for \n#each question to relative (from -5 to 5, totally 10 options) \n\nfor i in range(1,33):\n    clmn = \"Q\"+str(i)+\"S\"\n    relative_values_cleaned[clmn] = relative_values_cleaned[clmn].apply(relative_values)\nrelative_values_cleaned.head(5)","c758586a":"#also let's change time spent for each questions to be represented in seconds, \n#not milliseconds. Plus let's round it as well.\n\nfor i in range(1,33):\n    clmn = \"Q\"+str(i)+\"E\"\n    relative_values_cleaned[clmn] = relative_values_cleaned[clmn].apply(to_seconds)\n\nrelative_values_cleaned.head(5)","f27b646d":"#Now we compute average correct score per user\nrelative_values_cleaned['QxS_avg'] = relative_values_cleaned[[(\"Q\"+ str(i)+\"S\") for i in range(1,33)]].mean(axis=1)\n","f3788111":"#Now we compute average time spent for the whole questions answered per user\nrelative_values_cleaned['QxE_avg'] = relative_values_cleaned[[(\"Q\"+ str(i)+\"E\") for i in range(1,33)]].mean(axis=1)\n","954df761":"#function to convert 2-letter country codes to 3-letter ones to be used for Folium module\n\ndef country3(x):\n    try:\n        return pycountry.countries.lookup(x).alpha_3\n    except Exception:\n        pass","629bab5f":"relative_values_cleaned[\"country_code\"]=relative_values_cleaned[\"country\"].apply(country3)","fd5a2ebe":"#creating new DF with columns we want to analyse \naggregated_stats= relative_values_cleaned[['age','gender', 'engnat', 'country_code', 'QxS_avg', 'QxE_avg']]","4659c6b8":"aggregated_stats.head(5)","15ff18db":"#We need to add new column with the number of participants who took the test per country\n\naggregated_stats['participants'] = aggregated_stats.groupby(['country_code'])['QxS_avg'].transform('count')\naggregated_stats.head(5)","ca136039":"aggregated_stats[['participants', 'country_code']].groupby('country_code', as_index=False)['participants'].mean().sort_values(by='participants', ascending=False)[:10].plot(kind='bar',title=\"Participants by country (most 10)\", x='country_code',y='participants',figsize=(15,8))\nplt.show()","e57e9f0a":"filter1 = aggregated_stats['participants'] >=100\n\naggregated_stats[filter1][['QxS_avg', 'country_code']].groupby('country_code', as_index=False)['QxS_avg'].mean().sort_values(by='QxS_avg', ascending=False)[:10].plot(kind='bar',ylim=70,title=\"Average scores by country (most 10) with more than 100 participants\", x='country_code',y='QxS_avg',figsize=(15,8))\nplt.show()","4b642af0":"filter1 = aggregated_stats['engnat'] == \"no\"\nfilter2 = aggregated_stats['participants'] >=10\n\naggregated_stats[filter1][filter2][['QxS_avg', 'country_code']].groupby('country_code', as_index=False)['QxS_avg'].mean().sort_values(by='QxS_avg', ascending=False)[:10].plot(kind='bar',ylim=75,title=\"Average scores by country (most 10) with more than 10 participants, non-native EN speakers\", x='country_code',y='QxS_avg',figsize=(15,8))\nplt.show()","b66c5a8c":"filter1 = aggregated_stats['age'] <= 85\naggregated_stats[filter1][['QxS_avg', 'age']].groupby('age', as_index=False)['QxS_avg'].mean().sort_values(by='age', ascending=False).plot(kind='line',title=\"Average scores by age of participants\", x='age',y='QxS_avg',figsize=(15,8), grid='true')\nplt.show()","f387bc1d":"filter1 = aggregated_stats['age'] <= 85\nfilter_male = aggregated_stats['gender'] =='male'\nfilter_female = aggregated_stats['gender'] =='female'\n\n\nax = plt.gca()\n\naggregated_stats[filter1][filter_male][['QxS_avg', 'age']].groupby('age', as_index=False)['QxS_avg'].mean().sort_values(by='age', ascending=False).plot(kind='line',title=\"Average scores by age for male and females\", x='age',y='QxS_avg',figsize=(15,8), grid='true', ax=ax)\naggregated_stats[filter1][filter_female][['QxS_avg', 'age']].groupby('age', as_index=False)['QxS_avg'].mean().sort_values(by='age', ascending=False).plot(kind='line', x='age',y='QxS_avg',figsize=(15,8), grid='true',color='red',ax=ax)\nplt.show()","c8131b3b":"#Let's check what countries perform better taking into account their native language is NOT English\nvalue_to_map = \"QxS_avg\"\nfilter1 = aggregated_stats['engnat']== \"no\"\nfilter2 = aggregated_stats['participants'] >=10\n\n\naggregated_stats_with_filters = aggregated_stats[filter1][filter2]\n\ncountry_geo = '\/kaggle\/input\/python-folio-country-boundaries\/world-countries.json'\nplot_data = aggregated_stats_with_filters[[\"country_code\",value_to_map]]\nmap = folium.Map(location=[0, 0], zoom_start=2.0)\nmap.choropleth(geo_data=country_geo, data=plot_data,\n             columns=[\"country_code\", value_to_map],\n             key_on='feature.id',\n             fill_color='YlGnBu', fill_opacity=0.7, line_opacity=0.2,\n             legend_name=\"Average rating (correct answers %) by country with filters applied\")\nmap.save('plot_data1.html')\n\nfrom IPython.display import HTML\nHTML('<iframe src=plot_data1.html width=900 height=450><\/iframe>')\n","fde463de":"#Countries with the highest rating AND native English speakers\nvalue_to_map = \"QxS_avg\"\nfilter1 = aggregated_stats['participants']>=100\n\naggregated_stats_with_filters = aggregated_stats[filter1]\n\ncountry_geo = '\/kaggle\/input\/python-folio-country-boundaries\/world-countries.json'\nplot_data = aggregated_stats_with_filters[[\"country_code\",value_to_map]]\nmap = folium.Map(location=[0, 0], zoom_start=2.0)\nmap.choropleth(geo_data=country_geo, data=plot_data,\n             columns=[\"country_code\", value_to_map],\n             key_on='feature.id',\n             fill_color='YlGnBu', fill_opacity=0.7, line_opacity=0.2,\n             legend_name=\"Average rating (correct answers %) by country with filters applied\")\nmap.save('plot_data2.html')\n\nfrom IPython.display import HTML\nHTML('<iframe src=plot_data2.html width=900 height=450><\/iframe>')","8747cd4e":"## Project description","fb1264bc":"### Acknowledgements","f7e70034":"###  Average scores by age for male and females","b7acac0d":"### Abstract","3e051b37":"### Dataset","0ae96a72":"### Importing Dataset","712e8360":" # Multifactor General Knowledge Test analysis","8310be21":"###  Average scores for non-native English on map","a8ed804e":"### Understanding Dataset","f6bc3e9e":"### Limitations","85507388":"The analysis was performed by the author of this project based on MGKT Dataset only and third party Python modules (Folium, Pandas). ","8d0e3377":"* The data could be incomplete. Missing values, even the lack of a section or a substantial part of the data, could limit its usability. \n* Participants do not always provide accurate demographic information. \n* A relatively small number of participants (~19000) \n* Highly biased in numbers for English native participants (the test was conducted in English only). \n* No general knowledge test can be culturally unbiased, the MGKT will have the greatest validity for internet users from the United States. ","152649f9":"### Number of test takers by country","c0b43ae1":"### Motivation","34607e3c":"* What countries perform relatively better on the test. \n* Male or female demonstrate better relative performance with general knowledge. \n* Is there any correlation with participants with native English and non-natives \n* and their test scores. \n* Is there any correlation with age of participants and test results. ","44244721":"The test consisted of 32 questions. They were shown to each subject in a random order. There were four values stored for each question:\n\n* QXS\tThe number of right answers selected for this question minus the number of wrong answers.\n* QXA\tThe exact answers selected for this question.\n* QXE\tThe time spend on this question is miliseconds.\n* QXI\tThe position this question in the survey. (X=question ID number)\n\nThere values were collected on a final page:\n* age\t\tin years\n* gender\t\t1=Male, 2=Female, 3=Other\n* engnat\t\t1=English native language, 2=Not native english speaker\n\nThese values were calculated from technical information:\n* country\t\tthe user's network location\n* screenw\t\tscreen width in pixels\n* screenh\t\tscreen height in pixels\n* introelapse\tThe time spend on the landing page in seconds\n* testelapse\tThe time spent on the page with the questions in seconds\n* surveyelapse\tThe time spent on the final page in seconds","0bf932dc":"###   Average scores by age of participants","4afd89f8":"The MGKT measures general knowledge on four scales grouped into two domains. It uses a unique multiple selection question format that allows high measurement precision in comparatively little time compared to multiple-choice questions. This work tries to analyse different trends in the test scores and to provide relevant data visualisation. ","dcd8d98b":"### Average scores for non-native English participants","5a6f21c6":"Ireland, Canada and USA are obvious top 3 among all native English test takers.\n ","8695b4f8":"## Overview","72a9e866":"We want to explore trends behind database with general knowledge test with demographic data and to find out possible correlations between general performance on the test and demographic data. The answers can show some dependencies on educational standards in different countries and other possible correlations for different types of test-takers. ","bdf125d4":"Data was presented in CSV format with a lot of excessive details and not structured properly. We needed to remove useless for this analysis columns, compute average numbers per user (it was presented as 32x4 columns for each answer), transform the data frame into an appropriate format and prepare it for visual mapping on the map of the world with substituting country data. ","2ed7c1ff":"### Data Preparation and Cleaning","cfa0477f":"Participants of age 30 to 70 get, on average, the same scores for the test. There are some fluctuations after 70, yet to be not so important, taking into account a few numbers of participants ","fb883bcd":"### References","757fb179":"## Data preparation and wrangling","aaec4e92":"Venezuela, Austria and Sweden are the top three among all other non-native English test takers.","496de7c6":"The dataset used for the study is answers to the Multifactor General Knowledge Test with 19218 records, including 32 questions (5 correct answers each, so equivalent to ~160 questions in total), gender, age, native language, country and some other performance information.\n\nSource of the MGKT Dataset - https:\/\/openpsychometrics.org\/_rawdata\/","0afa5558":"From this interactive map, we can see the test takers distribution by country and their average scores. ","71f94d3c":"From this interactive map we can see, that non-native takers perform generally on the same level, except for China, Finland, Norway and Mexico. ","3d075765":"###   Average scores for countries with 100+ test takers","913ea3a3":"Generally speaking in terms of this test, men perform slightly than women for all ages, except after the age of ~78 (on the figure, blue - men, red - women). ","6670496f":"This data was collected through an online general knowledge test. Data collection took place 2017-2018. Users were motivated to take the test to obtain personalized results. This test used a unique question format, where each question was of a type that could have multiple correct answers. In each question, 10 answers were displayed to the respondent and they were told that 5 were correct and to select as many as they knew but not to guess. \n\nSource of the MGKT Dataset - https:\/\/openpsychometrics.org\/_rawdata\/","a4cfe6ad":"### Cleaning Dataset","8cac94d9":"###  Research Questions","4e3eec10":"## Data analasys","569f4fd7":"From the figure, it is quite clear the most number of test-takers come from the USA. Top 5 countries include only one non-native English country, i.e. Germany. ","c2f328c4":"Data analysis methods focus on strategic approaches to taking raw data, mining for insights that are relevant to primary goals, and drilling down into this information to transform metrics, facts, and figures. Methods used: \n1. Preparing the database. \n2. Omitting irrelevant for this study information. \n3. Leveraging and adjusting the data into relative figures. \n4. Data visualization and presentations. \n5. Creating an interactive map of the world with live functionality. ","ff93fa5c":"* Ireland, Canada and USA are obvious top 3 among all native English test takers. Venezuela, Austria and Sweden are the top three among all other non-native English test takers. \n* Men perform slightly better than women of all ages, except after the age of ~78.\n* Generally, English native speakers perform better on the test, which is quite obvious due to the test language. \n* Participants of age 30 to 70 get, on average, the same scores for the test. There are some fluctuations after 70. ","62d1afac":"### Conclusions","ea216646":"### Methods","500fde34":"###  Average scores for native English participants"}}