{"cell_type":{"d90d550d":"code","081aedb1":"code","51cf079c":"code","bb1ff72d":"code","e3768e70":"code","4155c2c1":"code","68eab2f3":"code","4cb39548":"code","664e5d11":"code","99ea1862":"code","66b8b6c4":"code","8dcb375b":"code","b3d5b534":"code","34080bea":"code","fcd3f9f1":"code","2c2103cc":"code","e15378b9":"markdown","d3e7230b":"markdown","15db2731":"markdown","d52d6ecf":"markdown","5be1b7ea":"markdown","de2cde0c":"markdown","ab1cc18e":"markdown","f1186f86":"markdown","0610d461":"markdown","b4c8fe21":"markdown","68a5eb2f":"markdown","0b2b8687":"markdown","deb1d343":"markdown"},"source":{"d90d550d":"import numpy as np \nimport pandas as pd \n\nfrom datetime import datetime\nfrom sklearn.linear_model import LinearRegression\n\nimport matplotlib\nimport matplotlib.pyplot as plt\n%matplotlib inline\nimport seaborn as sns","081aedb1":"# import Dataset\ndf = pd.read_csv('..\/input\/temperature-readings-iot-devices\/IOT-temp.csv', parse_dates=['noted_date'])\ndf.head()","51cf079c":"df['room_id\/id'].value_counts()","bb1ff72d":"# dropping columns\ncols_drop = ['id', 'room_id\/id']\ndf = df.drop(cols_drop, axis=1)","e3768e70":"print(\"the dataset has shape = {}\".format(df.shape))","4155c2c1":"df.describe()\n# duplicate rows have been dropped","68eab2f3":"# building new features for time stamp.\ndf['measure_hour'] = df.noted_date.apply(lambda x:datetime.strftime(x,'%Y-%m-%d %H:00:00'))","4cb39548":"data = df.groupby(['measure_hour','out\/in']).temp.mean().reset_index()\ndata = data.pivot(index = 'measure_hour',columns = 'out\/in', values = 'temp').reset_index().dropna()\ndata.head()","664e5d11":"fig, ax = plt.subplots(figsize = (6,4))\ng = sns.distplot(data.In, label = 'In')\ng = sns.distplot(data.Out, label = 'Out')\nplt.legend()\ng.set_xlabel('Temperature')","99ea1862":"sns.scatterplot(x =data.Out, y = data.In)\n","66b8b6c4":"sns.scatterplot(x =data[data.Out>35].Out, y = data[data.Out>35].In)","8dcb375b":"sns.scatterplot(x =data[data.Out<=35].Out, y = data[data.Out<=35].In)","b3d5b534":"linear = data[(pd.notna(data.Out))&(pd.notna(data.In)) & (data.Out<35)]","34080bea":"#removing oultliers\nlinear = linear.drop(index = linear[((linear.Out>32)&(linear.In<30)|(linear.Out<25))].index, axis = 0)\nsns.scatterplot(x = linear.Out, y = linear.In)","fcd3f9f1":"#Linear regression building\nmodel = LinearRegression()\nmodel.fit(linear[['Out']],linear.In)","2c2103cc":"k,b = model.coef_[0],model.intercept_\nprint(k,b)\nsns.scatterplot(x = linear.Out, y = linear.In)\nreg_line = np.linspace(25,35,100)\nplt.plot(reg_line, reg_line*k + b)","e15378b9":"I'll remove some outliers here:","d3e7230b":"# Loading data","15db2731":"# Conclusion\nSo, I would describe the relationship between inside and outside temperatures like this:\n\n$$\nInside(Outside) = 0.89*Outside+3,\\ {if}\\  Outside \\in [25,35], \\\\\nInside(Outside) \\in [28;35], {if}\\ Outside \\in (35;\\infty)\n$$","d52d6ecf":"### Time features\nHere I want to round time of measurement up to hours. After I will get information about mean temperature for each measure hour for inside and outside. It will allow to know about relation between Inside and outside in the moment.","5be1b7ea":"And our goal - relationship between inside and outside temperatures","de2cde0c":"### Getting the new data table\nHere I will get table with hour of measurement as index, and mean valuse of inside and outside temperatures in this hour. After I will drop all rows with at leas one NaN value.","ab1cc18e":"So, after removing from set values with outside temperature above 35, we can see linear dependence. And we can use linear regression to predict inside  temperature with known outside value.","f1186f86":"# Linear regression","0610d461":"## Table reshape","b4c8fe21":"We can make a guess that people turn on the conditioner if outside temperature in higher than 35. So, can say, that inside temperature is in interval [28;35] if outside temperature is higher than 35. Lets take a look on piece of data with outside temperature above 35:","68a5eb2f":"But we can see some obvious dependense inside of outside for outisde in interval [25;35]. We defenetly can say that there is no obvious dependence:","0b2b8687":"## Visualization \nLet's see at distributions of temperatures for all measurements:","deb1d343":"# Data processing\n## Removing useless columns"}}