{"cell_type":{"6a4c5cb8":"code","42f61a50":"code","d9927a28":"code","419f5734":"code","707c951e":"code","7c746efb":"code","a9baf713":"code","7e9e468a":"code","0a0bbbbb":"code","58669153":"code","114c7c76":"code","c48cbaba":"code","31700404":"code","4d42fecd":"markdown","ecd47c96":"markdown","e0833dbd":"markdown","65ee9bbd":"markdown","9a76a3a0":"markdown","20c298c1":"markdown","5c99ae00":"markdown","dd7d4ba8":"markdown","96c6286c":"markdown","930c4d62":"markdown","db5c97d4":"markdown"},"source":{"6a4c5cb8":"import numpy as np\nimport pandas as pd\nimport seaborn as sns\nimport matplotlib.pyplot as plt\nimport datetime\n%matplotlib inline\nsns.set_style(\"dark\")\nimport warnings \nwarnings.filterwarnings(\"ignore\")","42f61a50":"loan = pd.read_csv('\/kaggle\/input\/loandata\/Loan payments data.csv')","d9927a28":"loan.head(5)","419f5734":"loan.info()","707c951e":"loan.loan_status.unique()","7c746efb":"fig = plt.figure(figsize=(5,5))\nax = sns.countplot(loan.loan_status)\nax.set_title(\"Count of Loan Status\")\nfor p in ax.patches:\n    ax.annotate(str(format(int(p.get_height()), 'd')), (p.get_x(), p.get_height()*1.01))\nplt.show()","a9baf713":"fig, axs = plt.subplots(1, 2, figsize=(16, 5))\nsns.boxplot(x=\"loan_status\", y=\"Principal\", data=loan, hue=\"loan_status\", ax=axs[0])\nsns.distplot(loan.Principal, bins=range(300, 1000, 100), ax=axs[1], kde=True)\nplt.show()","7e9e468a":"fig, axs = plt.subplots(1, 2, figsize=(16,5))\nsns.countplot(loan.terms, ax=axs[0])\naxs[0].set_title(\"Count of Terms of loan\")\nfor p in axs[0].patches:\n    axs[0].annotate(str(format(int(p.get_height()), ',d')), (p.get_x(), p.get_height()*1.01))\n\nsns.countplot(x='terms', hue='loan_status', data=loan, ax=axs[1])\naxs[1].set_title(\"Term count breakdown by loan_status\")\nfor t in axs[1].patches:\n    if(np.isnan(float(t.get_height()))):\n        axs[1].annotate(0, (t.get_x(), 0))\n    else:\n        axs[1].annotate(str(format(int(t.get_height()), 'd')), (t.get_x(), t.get_height()*1.01))\n\naxs[1].legend(loc=\"upper left\")\nplt.show()","0a0bbbbb":"fig = plt.figure(figsize=(10,5))\nax = sns.countplot(x='effective_date', hue='loan_status', data=loan)\nax.set_title('Loan Date')\nfor t in ax.patches:\n    if(np.isnan(float(t.get_height()))):\n        ax.annotate(0, (t.get_x(), 0))\n    else:\n        ax.annotate(str(format(int(t.get_height()), ',d')), (t.get_x(), t.get_height()*1.01))\nplt.show()","58669153":"loan['paid_off_date'] = pd.DatetimeIndex(loan.paid_off_time).normalize()\nfig = plt.figure(figsize=(16, 6))\nax = sns.countplot(x='paid_off_date', data=loan.loc[loan.loan_status.isin(['COLLECTION_PAIDOFF', 'PAIDOFF'])], hue='loan_status')\nax.set_xticklabels(ax.get_xticklabels(), rotation=90)\nfor t in ax.patches:\n    if(np.isnan(float(t.get_height()))):\n        ax.annotate(0, (t.get_x(), 0))\n    else:\n        ax.annotate(str(format(int(t.get_height()), 'd')), (t.get_x(), t.get_height()*1.01))\n\nax.legend(loc='upper right')\nplt.show()","114c7c76":"loan['day_to_pay'] = (pd.DatetimeIndex(loan.paid_off_time).normalize() - pd.DatetimeIndex(loan.effective_date).normalize()) \/ np.timedelta64(1, 'D')\n\nfig = plt.figure(figsize=(15,5))\nax = sns.countplot(x='day_to_pay', hue='terms', data=loan)\nax.set_xticklabels(ax.get_xticklabels(), rotation=90)\nfor t in ax.patches:\n    if(np.isnan(float(t.get_height()))):\n        ax.annotate('', (t.get_x(), 0))\n    else:\n        ax.annotate(str(format(int(t.get_height()), 'd')), (t.get_x(), t.get_height()*1.01))\n\nplt.show()","c48cbaba":"fig = plt.figure(figsize=(15, 5))\nax = sns.countplot(x='day_to_pay', hue='terms', data=loan.loc[loan.loan_status == 'PAIDOFF'])\nax.set_xticklabels(ax.get_xticklabels(), rotation=90)\nfor t in ax.patches:\n    if(np.isnan(float(t.get_height()))):\n        ax.annotate('', (t.get_x(), 0))\n    else:\n        ax.annotate(str(format(int(t.get_height()), ',d')), (t.get_x(), t.get_height()*1.01))\n        \nplt.show()","31700404":"fig, axs = plt.subplots(3, 2, figsize=(16,15))\nsns.distplot(loan.age, ax=axs[0][0])\naxs[0][0].set_title(\"Total age distribution across dataset\")\n\nsns.boxplot(x='loan_status', y='age', data=loan, ax=axs[0][1])\naxs[0][1].set_title(\"Age distribution by loan status\")\n\nsns.countplot(x='education', data=loan, ax=axs[1][0])\naxs[1][0].set_title(\"Education count\")\nfor t in axs[1][0].patches:\n    if(np.isnan(float(t.get_height()))):\n        axs[1][0].annotate('', (t.get_x(), 0))\n    else:\n        axs[1][0].annotate(str(format(int(t.get_height()), ',d')), (t.get_x(), t.get_height()*1.01))\n        \nsns.countplot(x='education', data=loan, hue='loan_status', ax=axs[1][1])\naxs[1][1].set_title(\"Education by loan status\")\nfor t in axs[1][1].patches:\n    if(np.isnan(float(t.get_height()))):\n        axs[1][1].annotate('', (t.get_x(), 0))\n    else:\n        axs[1][1].annotate(str(format(int(t.get_height()), ',d')), (t.get_x(), t.get_height()*1.01))\naxs[1][1].legend(loc='upper right')\n\nsns.countplot(x='Gender', data=loan, ax=axs[2][0])\naxs[2][0].set_title(\"Education of Gender\")\nfor t in axs[2][0].patches:\n    if(np.isnan(float(t.get_height()))):\n        axs[2][0].annotate('', (t.get_x(), 0))\n    else:\n        axs[2][0].annotate(str(format(int(t.get_height()), ',d')), (t.get_x(), t.get_height()*1.01))\n \nsns.countplot(x='Gender', data=loan, hue='education', ax=axs[2][1])\naxs[2][1].set_title(\"Education of Gender\")\nfor t in axs[2][1].patches:\n    if(np.isnan(float(t.get_height()))):\n        axs[2][1].annotate('', (t.get_x(), 0))\n    else:\n        axs[2][1].annotate(str(format(int(t.get_height()), ',d')), (t.get_x(), t.get_height()*1.01))\n \nplt.show()","4d42fecd":"* These data points are the demographic information of the applicant.","ecd47c96":"## EDA","e0833dbd":"* Computer the day to pay-off the loan","65ee9bbd":"### Loan_status \n* This field is actually the target variables we are trying to predict.","9a76a3a0":"* See the distribution of PAIDOFF","20c298c1":"# Loan Data\nThis dataset includes customers who hace paid off their loans or not.\n* Loan_id\uff1a \n* --- A unique loan number assigned to each loan customers\n* Loan_status\uff1a \n* --- Whether a loan is paid off, in collection, new customer yet to payoff, or paid off after the collection efforts\n* Principal\uff1a\n* --- Basic principal loan amount at the origination\n* Terms:\n* --- Can be weekly (7 days), biweekly, and monthly payoff schedule\n* Effective_date:\n* --- When the loan got originated and took effects\n* Due_date:\n* --- Since it\u2019s one-time payoff schedule, each loan has one single due date\n* Paidoff_time:\n* --- The actual time a customer pays off the loan\n* Pastdue_days:\n* --- How many days a loan has been past due\n* Age, education, gender: \n* --- A customer\u2019s basic demographic information","5c99ae00":"### Principal\n* This is the loan amount at the origination.","dd7d4ba8":"### Terms\n* This is the payoff schedule, which can be in week, month etc.","96c6286c":"### effective_date, due_date, paid_off_time, and past_due_days\n* These data points are essentially related to the date of the loan and payment.","930c4d62":"### Loan_ID \n* This is just the identifier for each loan by each customers, we can ignore this field and will drop it at the end of EDA process","db5c97d4":"* Add new column paid_off_date from the paid_off_time."}}