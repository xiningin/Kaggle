{"cell_type":{"19d1c370":"code","3d084098":"code","143e12f0":"code","1ca074b6":"code","5cbe997d":"code","852ebb5e":"code","27494ebe":"code","f2f3da15":"code","75c356d5":"code","d8af50cf":"code","0168bba9":"code","a7310a2c":"code","327a5e8d":"code","9e145b16":"code","f1d0f42e":"code","e51cec9d":"code","f3b8df51":"code","78935c19":"code","6e53a0df":"code","09e4e363":"code","6a47781b":"code","792d32e2":"code","14b46c76":"code","4996e73f":"code","f5426f7d":"code","bd54a400":"code","39d5c62f":"code","a4831949":"code","aa800c7f":"code","234da787":"code","5d742e28":"code","c4c414d2":"code","8bbf45d7":"code","b466f597":"code","554ab917":"code","26e355b5":"code","442bfdce":"code","f80844a1":"code","6ab8d2df":"code","8f64d021":"code","5acae810":"code","23f964a1":"code","42a98d62":"code","bfc1cfbc":"code","3d8dadba":"code","1ad6910e":"code","b4995855":"code","4d0f0db0":"code","bb506bfc":"code","966664de":"code","8ea1139b":"code","edcde8a7":"code","c33e2330":"code","6da2c385":"code","cd41d7ee":"code","75399681":"markdown","c2044b57":"markdown","bdfef862":"markdown","76e05ca4":"markdown","0c6c457b":"markdown","37a6e696":"markdown","c3528735":"markdown","2d1b8246":"markdown","7d9da070":"markdown","64b0294d":"markdown","0c369a6d":"markdown","70ce5931":"markdown","c790be7a":"markdown","6e30f3a3":"markdown","a27cf7e4":"markdown","96a17e65":"markdown","f6587acd":"markdown","cf7e0bdc":"markdown","420d6f1c":"markdown","79c42636":"markdown","e73ba30a":"markdown","130452cd":"markdown","613684ef":"markdown","b08bb5be":"markdown","a6c210e6":"markdown","c766fa24":"markdown","9bdab26a":"markdown","e327de0c":"markdown","ee22f7c2":"markdown","4897ed2a":"markdown","c8f33eb6":"markdown","8bbc1daf":"markdown","e1ca8611":"markdown","dc1d5777":"markdown"},"source":{"19d1c370":"# This Python 3 environment comes with many helpful analytics libraries installed\n# It is defined by the kaggle\/python Docker image: https:\/\/github.com\/kaggle\/docker-python\n# For example, here's several helpful packages to load\n\nimport numpy as np # linear algebra\nimport pandas as pd # data processing, CSV file I\/O (e.g. pd.read_csv)\n\n# Input data files are available in the read-only \"..\/input\/\" directory\n# For example, running this (by clicking run or pressing Shift+Enter) will list all files under the input directory\n\nimport os\nfor dirname, _, filenames in os.walk('\/kaggle\/input'):\n    for filename in filenames:\n        print(os.path.join(dirname, filename))\n\n# You can write up to 20GB to the current directory (\/kaggle\/working\/) that gets preserved as output when you create a version using \"Save & Run All\" \n# You can also write temporary files to \/kaggle\/temp\/, but they won't be saved outside of the current session","3d084098":"df_gamedata=pd.read_csv('..\/input\/nfl-big-data-bowl-2022\/games.csv')\ndf_gamedata.head()","143e12f0":"df_plays=pd.read_csv('..\/input\/nfl-big-data-bowl-2022\/plays.csv')\ndf_plays.head()","1ca074b6":"df_players=pd.read_csv('..\/input\/nfl-big-data-bowl-2022\/players.csv')\ndf_players.head()","5cbe997d":"df_scouting=pd.read_csv('..\/input\/nfl-big-data-bowl-2022\/PFFScoutingData.csv')\ndf_scouting.head()","852ebb5e":"df_t2018=pd.read_csv('..\/input\/nfl-big-data-bowl-2022\/tracking2018.csv')","27494ebe":"df_t2018.head()","f2f3da15":"df_players.head()","75c356d5":"df_gamedata.info()","d8af50cf":"df_plays[df_plays['gameId']==2018090600].head()","0168bba9":"df_plays[df_plays['gameId']==2018090600][:1]['playDescription']","a7310a2c":"df_t2018.head()","327a5e8d":"df_t2018[df_t2018['displayName']=='Justin Tucker']","9e145b16":"from PIL import Image\nfrom skimage import io\nf='https:\/\/upload.wikimedia.org\/wikipedia\/commons\/thumb\/c\/c5\/AmFBfield.svg\/1200px-AmFBfield.svg.png'\na = io.imread(f)\n# determining the height ratio\n# resize image and save\nfrom PIL import Image\nfrom matplotlib import cm\nimport matplotlib.pyplot as plt\nim = Image.fromarray(a)\nim = im.resize((120,53))\nplt.imshow(im)\nim.save('sompic.png') # Saving the resized background image","f1d0f42e":"t=df_t2018.loc[(df_t2018['time'].str.contains('2018-12-30',case=False))]","e51cec9d":"t.head(10)","f3b8df51":"import time\nfrom datetime import datetime, date, time, timedelta\nt['time'][len(t)-1]\ntime_string = \"2018-12-30 21:25:32.200\"\nformat_string = \"%Y-%m-%d %H:%M:%S.%f\"\n\nfor i in range(100):\n    date_object = datetime.strptime(time_string, format_string)\n    date_object = date_object + timedelta(milliseconds=100)\n    time_string=str(date_object)\n    if '.' in time_string:\n        time_string=time_string[:-3]\n    else:\n        time_string=time_string+'.000'\n    final_string=time_string.split(' ')\n    final_string=final_string[0]+'T'+final_string[1]\n    print(final_string)\n    break\nprint(len(t['time'].unique()))\nz=t.loc[(t['time'].str.contains('2018-12-30T21:25:32.200')) & (t['gameId']==2018123000)]\nz.index = range(len(z))\nplt.rcParams[\"figure.figsize\"] = [7.50, 3.50]\nplt.rcParams[\"figure.autolayout\"] = True\nf='sompic.png'\na = io.imread(f)\n#plt.imshow(a)\nfig=plt.figure()\nax = fig.add_subplot(111)\na = io.imread(f)\nprint(len(z))\nfor i in range(len(z)):\n    ax.imshow(a)\n    if z[i:i+1]['team'][i]=='home': \n        ax.plot(z[i:i+1]['x'][i],z[i:i+1]['y'][i],'ro',color='blue')\n    elif z[i:i+1]['team'][i]=='away':\n        ax.plot(z[i:i+1]['x'][i],z[i:i+1]['y'][i],'ro',color='red')\n    else:\n        ax.plot(z[i:i+1]['x'][i],z[i:i+1]['y'][i],'ro',color='yellow')\nax.set_xlim(0, 120)\nax.set_ylim(0, 53.3)\nax.axis('on')\nleg = ax.legend(loc='upper center')\nplt.show()","78935c19":"import time\nfrom datetime import datetime, date, time, timedelta","6e53a0df":"time_string = \"2018-12-30\" #given this date \ngame_id= 2018123000 #given this gameID","09e4e363":"t=df_t2018.loc[(df_t2018['time'].str.contains('2018-12-30')) & (df_t2018['gameId']==2018123000)]","6a47781b":"times=t['time'].unique()\nprint(len(times))\nprint(times)","792d32e2":"from matplotlib.pyplot import plot, draw, show\nimport cv2\nplt.rcParams[\"figure.figsize\"] = [7.50, 3.50]\nplt.rcParams[\"figure.autolayout\"] = True\nf='sompic.png'\nimg=[]\nct=0\nfor i in times:\n    fig=plt.figure()\n    ax = fig.add_subplot(111)\n    a = io.imread(f)\n    time_string = i\n    time_string=time_string.split('T')\n    time_string=time_string[0]+' '+time_string[1]\n    format_string = \"%Y-%m-%d %H:%M:%S.%f\"\n    z=t.loc[(t['time'].str.contains(i)) & (t['gameId']==game_id)]\n    z.index = range(len(z))\n    for i in range(len(z)):\n        ax.imshow(a)\n        if z[i:i+1]['team'][i]=='home':\n            ax.plot(z[i:i+1]['x'][i],z[i:i+1]['y'][i],'ro',color='blue')\n        elif z[i:i+1]['team'][i]=='away':\n            ax.plot(z[i:i+1]['x'][i],z[i:i+1]['y'][i],'ro',color='red')\n        else:\n            ax.plot(z[i:i+1]['x'][i],z[i:i+1]['y'][i],'ro',color='yellow')\n    ax.set_xlim(0, 120)\n    ax.set_ylim(0, 53.3)\n    ax.axis('on')\n    leg = ax.legend(loc='upper center')\n    plt.savefig('Img'+str(i)+'.png')\n    img.append(cv2.imread('Img'+str(i)+'.png'))\n    os.remove('Img'+str(i)+'.png')\n    plt.close(fig)\n    ct+=1\nheight,width,layers=img[0].shape\nfourcc = cv2.VideoWriter_fourcc(*'mp4v') \nvideo=cv2.VideoWriter('video_match.mp4',fourcc,1,(width,height))\nfor j in range(0,ct):\n    video.write(img[j]) ","14b46c76":"import os\nos.chdir(r'\/kaggle\/working')\nfrom IPython.display import FileLink\nFileLink('video_match.mp4')","4996e73f":"from PIL import Image\nfrom skimage import io\nf='https:\/\/upload.wikimedia.org\/wikipedia\/commons\/thumb\/c\/c5\/AmFBfield.svg\/1200px-AmFBfield.svg.png'\na = io.imread(f)\n# determining the height ratio\n# resize image and save\nfrom PIL import Image\nfrom matplotlib import cm\nimport matplotlib.pyplot as plt\nim = Image.fromarray(a)\nim = im.resize((120,53))\nplt.imshow(im)\nim.save('sompic.png') # Saving the resized background image","f5426f7d":"t=df_t2018.loc[(df_t2018['time'].str.contains('2018-12-30',case=False)) & (df_t2018['displayName']=='Justin Tucker')]","bd54a400":"t.index = range(851)","39d5c62f":"t[0:1]['time'][0]","a4831949":"from matplotlib.pyplot import plot, draw, show\nimport cv2\nimg=[]\ndef picperfect(df):\n    plt.rcParams[\"figure.figsize\"] = [7.50, 3.50]\n    plt.rcParams[\"figure.autolayout\"] = True\n    f='sompic.png'\n    a = io.imread(f)\n    plt.imshow(a)\n    for i in range(len(df)):\n        fig=plt.figure()\n        ax = fig.add_subplot(111)\n        a = io.imread(f)\n        ax.imshow(a)\n        heading=df[i:i+1]['displayName'][i]+'s='+str(df[i:i+1]['s'][i])+' a='+str(df[i:i+1]['a'][i])+' Time='+ str(df[i:i+1]['time'][i])\n        ax.plot(df[i:i+1]['x'][i],df[i:i+1]['y'][i],'ro',label=heading)\n        ax.arrow(df[i:i+1]['x'][i],df[i:i+1]['y'][i],2,2*np.tan(np.pi*df[i:i+1]['o'][i]\/180),head_width=1, head_length=2, color='blue')\n        if df[i:i+1]['playDirection'][i]=='right':\n            ax.arrow(10,10,2,2*np.tan(np.pi*0\/180),head_width=1, head_length=2, color='yellow', label='Play_Direction='+'right')\n        else:\n            ax.arrow(10,10,2,2*np.tan(np.pi*0\/180),head_width=1, head_length=2, color='yellow', label='Play_Direction='+'left')\n        ax.arrow(df[i:i+1]['x'][i],df[i:i+1]['y'][i],2,2*np.tan(np.pi*df[i:i+1]['dir'][i]\/180),head_width=1, head_length=2, color='red')\n        ax.arrow(df[i:i+1]['x'][i],df[i:i+1]['y'][i],2,2*np.tan(np.pi*df[i:i+1]['o'][i]\/180),head_width=0.05, head_length=0.1)\n        ax.set_xlim(0, 120)\n        ax.set_ylim(0, 53.3)\n        ax.axis('on')\n        leg = ax.legend(loc='upper center')\n        #plt.show()\n        plt.savefig('Img'+str(i)+'.png')\n        img.append(cv2.imread('Img'+str(i)+'.png'))\n        os.remove('Img'+str(i)+'.png')\n        plt.close(fig)\n    height,width,layers=img[0].shape\n    fourcc = cv2.VideoWriter_fourcc(*'mp4v') \n    video=cv2.VideoWriter('video.mp4',fourcc,1,(width,height))\n    for j in range(0,len(df)):\n        video.write(img[j])  # Saving all the images in a video of the '.mp4' format","aa800c7f":"picperfect(t)","234da787":"print(t[105:106]['displayName'][105])","5d742e28":"#!pip install google.colab\n#from google.colab import files\n#files.download('..\/input\/nfl-big-data-bowl-2022\/games.csv')\nimport os\nos.chdir(r'\/kaggle\/working')\nfrom IPython.display import FileLink\nFileLink('video.mp4')","c4c414d2":"df_players.head()","8bbf45d7":"check = df_players['height'].str.split('-', expand=True)\ncheck.columns = ['first', 'second']\ncheck.loc[(check['second'].notnull()), 'first'] = check[check['second'].notnull()]['first'].astype(np.int16) * 12 + check[check['second'].notnull()]['second'].astype(np.int16)\ndf_players['height'] = check['first']\ndf_players['height'] = df_players['height'].astype(np.float32)\ndf_players['height'] \/= 12\ndf_players.head()","b466f597":"import seaborn as sns\nplt.figure(figsize=(5, 4))\n\nax = sns.distplot(df_players['height'], bins=10)\nax.set_title('Height Distribution among NFL players');","554ab917":"plt.figure(figsize=(5, 4))\n\nax = sns.distplot(df_players['weight'], bins=10)\nax.set_title('Weight Distribution among NFL players');","26e355b5":"df_players.info()","442bfdce":"df_players.dropna(subset=['birthDate'], inplace=True)","f80844a1":"df_players['birthDate']","6ab8d2df":"for index, row in df_players.iterrows():\n    if len(row['birthDate'].split('\/'))>2: \n        df_players.loc[index, 'birthYear'] = row['birthDate'].split('\/')[2]\n    elif len(row['birthDate'].split('-'))>2: \n        df_players.loc[index, 'birthYear'] = row['birthDate'].split('-')[0]","8f64d021":"plt.figure(figsize=(5, 4))\n\nax = sns.distplot(df_players['birthYear'], bins=10)\nax.set_title('Birth year Distribution of NFL Players');","5acae810":"plt.figure(figsize=(5, 4))\nax = sns.distplot(df_plays['playResult'], bins=10);\nax.set_title('playResult Distribution'); ","23f964a1":"plt.figure(figsize=(5, 4))\nax = sns.distplot(df_plays['preSnapHomeScore'], bins=10);\nax.set_title('preSnap_Home_Score Chart in the NFL'); ","42a98d62":"plt.figure(figsize=(5, 4))\nax = sns.distplot(df_plays['preSnapVisitorScore'], bins=10);\nax.set_title('preSnap_Visitor_Score Graph in the NFL'); ","bfc1cfbc":"df_scouting.head()","3d8dadba":"df_scouting.info()","1ad6910e":"fig, ax = plt.subplots()\ndf_scouting['kickType'].value_counts().plot(ax=ax, kind='bar')","b4995855":"sns.pairplot(df_scouting, hue='kickType')","4d0f0db0":"sns.pairplot(df_gamedata, hue='homeTeamAbbr')","bb506bfc":"sns.pairplot(df_plays,hue='quarter')","966664de":"import seaborn as sns\nsns.set_theme(style=\"whitegrid\")\nax = sns.violinplot(x=df_plays['quarter'])","8ea1139b":"sns.set_theme(style=\"whitegrid\")\nax = sns.violinplot(x=df_plays['yardsToGo'],y=df_plays['specialTeamsPlayType'])","edcde8a7":"sns.set_theme(style=\"whitegrid\")\nax = sns.violinplot(x=df_plays['kickLength'],y=df_plays['kickReturnYardage'])","c33e2330":"sns.set_theme(style=\"whitegrid\")\nax = sns.violinplot(x=df_scouting['hangTime'],y=df_scouting['kickContactType'])","6da2c385":"import seaborn as sns\nsns.set_theme(style=\"whitegrid\")\nax = sns.boxplot(x=df_scouting[\"hangTime\"], y=df_scouting[\"kickType\"])","cd41d7ee":"sns.set_theme(style=\"whitegrid\")\nax = sns.boxplot(x=df_players[\"height\"], y=df_players[\"Position\"])","75399681":"# Violin Plots and Box Plots","c2044b57":"# Video output for ingame player movement","bdfef862":"### A pairplot for the gameplay information file with the hue as the quarter of the game","76e05ca4":"# Some EDA on some useful\/insightful data","0c6c457b":"## I thought of implementing the pairplots here for data as they end up giving us very insightful observations into the dataset as a whole","37a6e696":"#### Here, I used a background I found online and resized it in order to help us better understand where the player might've been on the football pitch. At each instant in every graph, there are 2 arrows pointed in the angle of player motion and player orientation respectively. In every graph, the speed and accuracy along with the time is mentioned.","c3528735":"### A pairplot of the scouting data with the hue as 'kicktype'","2d1b8246":"## Displaying the 1st 5 rows of the tracking data of the year 2018","7d9da070":"## Some visualizations about Scouting data","64b0294d":"## preSnap Home Score Distribution","0c369a6d":"## Creating a function to create a graph of the player at every instant in the game and combine it in 1 video for easy analysis","70ce5931":"## preSnap Visitor Score Distribution","c790be7a":" The arrows essentially represent the tangent to a point on the circle whose length varies. Each plot is saved and read in as an image in an array which is later converted into a video where each frame is a graph at a particular instant of the required match and player on the specified day.","6e30f3a3":"# A sample Image for a particular datetime value and a particular match id ingame","a27cf7e4":"## Play Result Distribution","96a17e65":"## Some info regarding the data types and the number of null-values we have in the game data file.","f6587acd":"## Play data regarding the specific game ID of 2018090600","cf7e0bdc":"## Real in-game video analysis","420d6f1c":"## Player birth year distribution","79c42636":"## The video generated could be accessed through the link in the below cell. However, if that doesn't work, you could download it from the \/kaggle\/working directory after running the code. \nOr,you can just view it right here: https:\/\/youtu.be\/x86Dtk0n3x0","e73ba30a":"### In this notebook,in general, I have worked upon data from the year 2018. However, the same could be done for the years 2019 and 2020.","130452cd":"### The number of kicktypes and how frequently each one is implemented in the game","613684ef":"## Here are some plots for comparing various parameters available in the datasets provided, such as kickLength, kickReturnYardage, hangTime, kickType, yardsToGo, etc.","b08bb5be":"## Weight distribution","a6c210e6":"## Here, I have provided video analysis of in-game footage of the players and the movement of the ball throughout the game. The ball is denoted by the yellow dot and the home team is denoted by the blue dots and the away team by red dots.\nYou can check the entire video out by downloading it after running the code from the \/kaggle\/working directory. Else, you could just (copy+paste) the following youtube link to view the video: https:\/\/youtu.be\/boLcsod1toE","c766fa24":"## Finally, this is a work in progess and I am working on it to make it better\/ get any more meaningful outputs from the data provided. Thanks for viewing my work and please feel free to upvote it and let me know about what more could be worked upon.","9bdab26a":"# Video output for individual player movement during a specific game on a certain day","e327de0c":"## Using the picperfect() function to create a video of the player's movement","ee22f7c2":"### Pairplot for the gamedata file with the home team abbreviation as the hue","4897ed2a":"# Reading in the data from the csv files.","c8f33eb6":"## The Height distribution","8bbc1daf":"# Reading in the tracking data for the year 2018.","e1ca8611":"## Just some sample data I have taken in this case. This could be implemented on any player in any year for any particular scouting agent that is looking for some player data and want to easily analyze the player movement on the pitch as per his\/her needs.","dc1d5777":"### This column has some null values. Hence, we shall get rid of that."}}