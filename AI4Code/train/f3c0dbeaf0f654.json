{"cell_type":{"ba1848bc":"code","1673760c":"code","0e5fd268":"code","703dc540":"code","65d0179d":"code","a71ca9c2":"code","d09d86fc":"code","b1835be7":"code","4f8e0f1b":"code","d12dfc95":"code","2a89fe30":"code","a863370f":"code","8cde2f9d":"code","e7b85f7d":"code","59a74ae8":"code","d5fb679d":"code","3eb414ec":"code","76a1bd0f":"code","b7eda006":"code","d43e4cc2":"code","b3146ad1":"code","071a50a4":"code","1328165a":"code","f0e2d395":"code","94a78805":"code","5f2981cd":"code","2bf2e1be":"code","94c0a398":"code","7336617c":"code","6c4c5b44":"code","f9cc76ba":"code","56f152b9":"code","7904f2eb":"code","1f062d1b":"code","ccb56014":"code","3dd2043a":"code","950f5cbf":"code","85fab6db":"code","ab8971c5":"code","468b96a4":"code","803e5e34":"code","cdbf19e7":"code","875375a2":"code","1053cc0a":"code","bb9b22b6":"code","99f4ffca":"code","3672a7e9":"code","8ca2a8ac":"code","867465f4":"code","a951882c":"markdown","7bba279c":"markdown","69d5f5fc":"markdown","9b0a5214":"markdown","55eb0d1e":"markdown","205392b8":"markdown","f7edfc69":"markdown","2e00ffdf":"markdown","32d8e5b8":"markdown","12d55f65":"markdown","6257daa4":"markdown","95ec4004":"markdown","7728303f":"markdown","bb6ed127":"markdown","6bf5ef6d":"markdown","71e9e81c":"markdown","c066b265":"markdown","d1818434":"markdown","2e7cb396":"markdown","5b09a8c3":"markdown","8879b631":"markdown","8a95c409":"markdown","f814fde3":"markdown","033392ab":"markdown","02219a9e":"markdown","1b34bd94":"markdown","8d5ab1a5":"markdown","c1702193":"markdown","5484956a":"markdown","1834ffeb":"markdown","c9509e97":"markdown","e303e84b":"markdown","f0f7bd70":"markdown","b86ce571":"markdown","e1173c64":"markdown","8130bc4f":"markdown","526b54e7":"markdown","5a32598b":"markdown","7fcfc9bd":"markdown","f9db51b7":"markdown","7cb68ab0":"markdown","dd7bea33":"markdown","e9ba620f":"markdown","f0ad0e5d":"markdown","c3cc1ffe":"markdown","9045a517":"markdown","c6e8629f":"markdown","062d3bf8":"markdown","40605f24":"markdown","45f91ece":"markdown","404b3349":"markdown"},"source":{"ba1848bc":"import pandas as pd\nimport numpy as np\nimport matplotlib.pyplot as plt\nimport seaborn as sns\n# sns.set_style(\"darkgrid\")\nimport os\nimport warnings\nwarnings.filterwarnings('ignore')","1673760c":"dataset = pd.read_csv('..\/input\/new-york-city-airbnb-open-data\/AB_NYC_2019.csv')","0e5fd268":"# First 5 records\ndataset.head()","703dc540":"# last 5 records\ndataset.tail()","65d0179d":"# Creating a single function which gives us basics of the data\n\ndef dataFund(data):\n    print(\"Size of the data: \")\n    print(data.size)\n    print(\"=\"*70)\n    print(\"\\nShape of the data: \")\n    print(data.shape)\n    print(\"=\"*70)\n    print(\"\\nColumns of the data: \")\n    print(data.columns)\n    print(\"=\"*70)\n    \n# returing the result from the data\ndataFund(dataset)","a71ca9c2":"dataset.drop(['id', 'host_id'], axis=1, inplace=True)\ndataset.head()","d09d86fc":"# Average price - Max Price -  Min Price\nprint(\"Average Price of Airbnb in New York City is: \")\nprint(dataset['price'].mean())\nprint(\"\\nMax Price: \")\nprint(dataset[\"price\"].max())\nprint(\"\\nMin Price: \")\nprint(dataset['price'].min())","b1835be7":"dataset['price'].describe()","4f8e0f1b":"dataset['price'].value_counts()","d12dfc95":"plt.figure(figsize=(12,8))\nplt.boxplot(dataset[\"price\"], vert=False)\nplt.title(\"Detecting outliers from Price\")\nplt.xlabel('Price')\nplt.show()","2a89fe30":"# First Quartile\nQ1 = dataset.quantile(0.25)\nQ2 = dataset.quantile(0.75)\nIQR = Q2 - Q1\nprint(\"InterQuartile Range: \")\nprint(IQR)","a863370f":"# Percentiles \nprint(\"10th percentile of price: \")\nprint(dataset[\"price\"].quantile(0.10))\nprint(\"90th percentile of price: \")\nprint(dataset[\"price\"]. quantile(0.90))\nprint(\"\\nSkewness of the price attributes: \")\nprint(dataset[\"price\"].skew())","8cde2f9d":"# Trimming the outliers\n# dataset['price'] = np.where(dataset['price'] < 49.0,49.0,dataset['price'])\n# dataset['price'] = np.where(dataset['price']>269.0, 269.0, dataset['price'])\n# print('\\nSkewnewss of price after trimming: ')\n# print(dataset['price'].skew())","e7b85f7d":"plt.figure(figsize=(12,8))\nplt.boxplot(dataset[\"price\"], vert=False)\nplt.title(\"Detecting outliers after trimming: \")\nplt.xlabel('Price')\nplt.show()","59a74ae8":"dataset['availability_365'].describe()","d5fb679d":"# Box plot \nplt.figure(figsize=(12,8))\nplt.boxplot(dataset[\"availability_365\"], vert=False)\nplt.title(\"Detecting outliers on availabiity column: \")\nplt.xlabel('Days')\nplt.show()","3eb414ec":"dataset.info()","76a1bd0f":"dataset.isnull().sum()","b7eda006":"dataset['last_review'].value_counts()","d43e4cc2":"dataset['reviews_per_month'].value_counts()","b3146ad1":"dataset.isnull().sum()\ndataset.dropna(how='any', inplace=True)\ndataset.info()","071a50a4":"dataset.drop(['name', 'host_name', 'last_review'],axis=1,inplace=True)","1328165a":"dataset.head()","f0e2d395":"corr = dataset.corr()\nplt.figure(figsize=(15,10))\nsns.heatmap(corr, annot=True)","94a78805":"dataset['neighbourhood_group'].unique()","5f2981cd":"sns.countplot(dataset['neighbourhood_group'], palette='plasma')\nfig = plt.gcf()\nfig.set_size_inches(10,10)\nplt.title(\"Neighbourhood Group\")\nplt.show()","2bf2e1be":"sns.countplot(dataset['neighbourhood'],palette=\"plasma\")\nfig = plt.gcf()\nfig.set_size_inches(25,6)\nplt.title('Neighbourhood')","94c0a398":"dataset['neighbourhood'].value_counts()","7336617c":"# Restaurants delivering online or not\nsns.countplot(dataset['room_type'],palette=\"plasma\")\nfig = plt.gcf()\nfig.set_size_inches(10,10)\nplt.title(\"Restaurants delivering online or not\")","6c4c5b44":"plt.figure(figsize=(10,6))\nsns.scatterplot(dataset.longitude, dataset.latitude, hue=dataset.neighbourhood_group)\nplt.ioff()","f9cc76ba":"plt.figure(figsize=(10,6))\nsns.scatterplot(dataset.longitude, dataset.latitude, hue=dataset.room_type)\nplt.ioff()","56f152b9":"plt.figure(figsize=(10,6))\nsns.scatterplot(dataset.longitude, dataset.latitude, hue=dataset.availability_365)\nplt.ioff()","7904f2eb":"dataset.head()","1f062d1b":"dataset.drop(['neighbourhood', 'number_of_reviews', 'reviews_per_month'], axis=1, inplace=True)\ndataset.head()","ccb56014":"def Encode(data):\n    for column in data.columns[data.columns.isin(['neighbourhood_group', 'room_type'])]:\n        data[column] = data[column].factorize()[0]\n    return data\n\nairbnb = Encode(dataset.copy())\n","3dd2043a":"airbnb.head(10)","950f5cbf":"# correlation of airbnb\ncorr = airbnb.corr()\nplt.figure(figsize=(15,10))\nsns.heatmap(corr, annot=True)","85fab6db":"airbnb.drop(['longitude', 'latitude'], axis=1, inplace=True)\nairbnb.head(10)","ab8971c5":"# Shape of processed data\nairbnb.shape","468b96a4":"X = airbnb.drop(['price'],axis=1)\ny = airbnb['price']","803e5e34":"X.head()","cdbf19e7":"y.head()","875375a2":"from sklearn.model_selection import train_test_split\nX_train, X_test, y_train, y_test = train_test_split(X,y,test_size=0.2, random_state=42)","1053cc0a":"print(X_train.shape)\nprint(y_train.shape)","bb9b22b6":"from sklearn.linear_model import LinearRegression\nreg = LinearRegression()\nreg.fit(X_train, y_train)\n\nreg_score = reg.score(X_test, y_test)\nprint(reg_score)","99f4ffca":"from sklearn.tree import DecisionTreeRegressor\nDTree=DecisionTreeRegressor(min_samples_leaf=.0001)\nDTree.fit(X_train,y_train)\n\nDTree_score = DTree.score(X_test, y_test)\nprint(DTree_score)","3672a7e9":"from sklearn.metrics import r2_score,mean_absolute_error\ndef model_sel(model):\n    y_pred = model.predict(X_test)\n    print(\"MODEL EVALUATION\")\n    print(\"\\nr2_score of the model: \")\n    print(r2_score(y_test,y_pred))\n    ","8ca2a8ac":"# Model Evaluation on Linear Regression\nprint(\"LINEAR REGRESSION: \")\nprint(\"-x\"*25)\nmodel_sel(reg)","867465f4":"# Model Evaluation on DecisionTreeRegressor\nprint(\"DECISION TREE REGRESSION: \")\nprint(\"-x\"*25)\nmodel_sel(DTree)","a951882c":"**Williamsburg, Bedford-Stuyvesant & Harlem** are the mos resulted neighbourhood groups.","7bba279c":"Give an upvote :)","69d5f5fc":"Airbnb are providing rooms in very cheap price. Average price of Airbnb in $152.72 but difference between maximum price and minimum price is quite high. Let's analyzed more","9b0a5214":"## Dropping uneccesary columns","55eb0d1e":"## About Task:\n\nAn approach is very straight forward, which is mentioned in above lines:\n1. Data collection\n2. Statistical Analysis\n3. Exploratory Data Analysis\n4. Data Wrangling\n\n","205392b8":"# New York City Airbnb\n## Let's predict the price of the room in New York City\ud83d\uddfd\ud83c\udfe0","f7edfc69":"## Dealing with outlier related to Price","2e00ffdf":"### Room Type","32d8e5b8":"### Correlation in the data","12d55f65":"## Decision Tree Regressor","6257daa4":"Importing Dataset and exploring some records","95ec4004":"# About Airbnb:\n\nIt is an American company that operates an online marketplace for lodging, primarily homestays for vacation rentals, and tourism activities. Based in San Francisco, California, the platform is accessible via website and mobile app. Airbnb does not own any of the listed properties; instead, it profits by receiving commission from each booking. The company was founded in 2008 by Brian Chesky, Nathan Blecharczyk and Joe Gebbia. Airbnb is a shortened version of its original name, [**AirBedandBreakfast**](https:\/\/www.airbnb.co.in\/)\n\nThe company has been criticized for possibly driving up home rents and creating nuisances for those living near leased properties. The company is regulated by many jurisdictions, including the European Union and cities such as San Francisco and New York City. It is viewed as a competitive threat by the hotel industry.","7728303f":"# Statistical Analysis","bb6ed127":"Above graph is too complex, lets find top neighbourhhod ","6bf5ef6d":"# Exploratory Data Analysis","71e9e81c":"## Availabiity 365 columns - Detecting outlier","c066b265":" Before doing any processing and cleaning lets first drop **id** and **host_id** columns","d1818434":"### Seprating independent and Dependent variables","2e7cb396":"### Examining reviews with null values ","5b09a8c3":"# Model Evaluation","8879b631":"Above describing the **IQR** of all numerical factors present in the dataset. IQR of **price** and **availability_35** are very large and they indicate that the central portion of those attributes spread out further.","8a95c409":"### Neighbourhood ","f814fde3":"### From above data, the observations are:\n1. Size of the data is large\n2. There are two features from the columns **id** and **host_id** are not necessary coz pandas already set indexes to whole data. In future dropping will be the best option.","033392ab":"Some columns are still useless for training a machine learning model. Let's drop them.","02219a9e":"There is no such importance to **longitude and latitude for price**.\n\nSo lets drop them.","1b34bd94":"#### People are intrested in ***Private and Entire_home types*** much more.","8d5ab1a5":"### Decision Tree Perfomes better for this task","c1702193":"## Box-Plot of price after Computing 10th, 90th percentiles and replacing the outliers","5484956a":"## Warning: Removing outliers(for price) are not best way ","1834ffeb":"### Basic information","c9509e97":"# Machine Learning algorithm for regression problem","e303e84b":"# Data Preprocessing and Feature Selection","f0f7bd70":"# Importing Essential libraries","b86ce571":"### Data visualization","e1173c64":"Box Plot is showing us the distribution of prices in the data. For dealing with this outliers. We can use **Quantile based Flooring and capping**\n\n### Computing 10th, 90th percentiles and replacing the outliers","8130bc4f":"There are null value present in the dataset. ","526b54e7":"### Null values from the data","5a32598b":"### Map of Neighbourhood group","7fcfc9bd":"## Linear Regression","f9db51b7":"### Avaliability of the room","7cb68ab0":"Above boxplot showing us that this column don't need trimming of outliers.","dd7bea33":"### Splitting the data into training and testing","e9ba620f":"## Quickly, Identifying outliers with interquartile range(IQR) for other factors.","f0ad0e5d":"Above values are describing that most of the values are now in common range, that means there are outliers present.\n\nCreating **Box Plot** for detecting outliers.","c3cc1ffe":"# Business Understaning:\n\nAirbnb is a company for lodging, homestays, vacations, and toursim activites. So indirectly the company is dealing with **Real Estate**, although their business is running on the internet throguh their website. They are collecting large amount of data by their visitors from the website of Airbnb. After checking the data we can analyze and understand the different features those are affecting Airbnb business and client side requiremenet. \n\nData is from the **New York City, USA** region. So this project will help the Airbnb for their business improvement in the New York City. Also from this data Airbnb could change modify their future plans for giving better experience to their  clients.\n\n","9045a517":"So there is no prior infomration from these columns, we can drop null values from here","c6e8629f":"**Manhatten** and **Brooklyn** are the most resulted neighbour groups.","062d3bf8":"### Map of Room Type","40605f24":"### Analyzing fundamentals of the data","45f91ece":"### There are two columns having dtypes of object.\n\n### Converting them into numbers","404b3349":"Main focus of the task is to analuzed and and predict the price. In the data most of records are in the form of strings. But lets.check the basic stats."}}