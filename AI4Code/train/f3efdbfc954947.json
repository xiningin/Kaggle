{"cell_type":{"74685af0":"code","872deb60":"code","2c0a54e4":"code","c99f2742":"code","5eff93b2":"code","e21eb27b":"code","dfd0bfe1":"code","fdbf0c89":"code","a3ca2d91":"code","05f96846":"code","aba960ee":"code","b1ea9d57":"code","e1ba92f6":"code","1318b9de":"code","0f332ab7":"code","47a9c0ae":"code","941124d1":"code","00086d2f":"code","0d68fed2":"code","de111f87":"code","c9dfc79b":"markdown","a2a10a35":"markdown","cc6a8ae4":"markdown","1e1d249c":"markdown","d6bb58d3":"markdown","c6d95c81":"markdown","22fd741d":"markdown","12852a63":"markdown","c663b9b1":"markdown","b1949948":"markdown","eafe2874":"markdown","25baf5a9":"markdown","2dd088c0":"markdown","60032bb3":"markdown","6844ad06":"markdown","b79c7380":"markdown","9632990d":"markdown","22cf5355":"markdown","ef3b106f":"markdown","51a11d42":"markdown","a059002e":"markdown","47ff9ea2":"markdown","620b51c8":"markdown"},"source":{"74685af0":"#import libraries\nimport numpy as np\nimport pandas as pd \nimport matplotlib.pyplot as plt\nimport seaborn as sns\nfrom wordcloud import WordCloud,STOPWORDS\nimport nltk as nlp\nimport re\n\nimport warnings\nwarnings.filterwarnings('ignore')","872deb60":"dataset = pd.read_csv(\"..\/input\/Tweets.csv\")\ndataset.head(3)","2c0a54e4":"dataset.columns","c99f2742":"data = dataset[[\"airline_sentiment\",\"text\",\"airline\",\"retweet_count\"]]\ndata.head()","5eff93b2":"sns.set()\nplt.figure(figsize=(7,7))\nsns.countplot(x=data[\"airline_sentiment\"],palette=\"Set2\")\nplt.title(\"Sentiment Dist.\")\nplt.show()","e21eb27b":"sns.set()\nplt.figure(figsize=(7,7))\nsns.countplot(y=data[\"airline\"],palette=\"Set2\")\nplt.title(\"Airlines Dist.\")\nplt.show()","dfd0bfe1":"j=1\nplt.subplots(figsize=(20,4),tight_layout=True)\nfor i in data[\"airline\"].unique():\n        x = data[data[\"airline\"]==i]\n        plt.subplot(1, 6, j)\n        sns.countplot(x[\"airline_sentiment\"],palette=\"Set2\")\n        plt.xticks(rotation=45)\n        plt.title(i)\n        j +=1\nplt.show()","fdbf0c89":"lemma = nlp.WordNetLemmatizer()\ndef preprocess(x):\n    x = str(x)\n    x = re.sub(\"[^a-zA-z]\", \" \",x)\n    x = x.lower()\n    x = nlp.word_tokenize(x)\n    #x = [i for i in x if not i in set(stopwords.words(\"english\"))] #slowly\n    x = [lemma.lemmatize(i) for  i in x]\n    x = \" \".join(x)\n    return x\n\ndata.text = data.text.apply(preprocess)\ndata.text[0:10]","a3ca2d91":"allcomments = \" \".join(data.text)\nwordcloud = WordCloud(width = 800, height = 800, \n                    background_color ='white', \n                    stopwords = STOPWORDS, \n                    min_font_size = 12).generate(allcomments) \n      \n# plot the WordCloud image                        \nplt.figure(figsize = (8, 8), facecolor = None) \nplt.imshow(wordcloud)\nplt.title(\"All Tweets Wordcount\")\nplt.show()","05f96846":"#data=data[[\"airline_sentiment\",\"text\"]]\n#data.head()","aba960ee":"from sklearn.preprocessing import LabelEncoder\nencoder = LabelEncoder()\ndata[\"airline_sentiment\"] = encoder.fit_transform(data[\"airline_sentiment\"])\nprint(encoder.classes_)\ndata.head()","b1ea9d57":"# convert to categorical Categority by using one hot tecnique \ndf_dummy = data.copy()\ndf_dummy.airline = pd.Categorical(df_dummy.airline)\nx = df_dummy[['airline']]\ndel df_dummy['airline']\ndummies = pd.get_dummies(x, prefix = 'airline')\ndata = pd.concat([df_dummy,dummies], axis=1)\ndata.head()","e1ba92f6":"#normalize retweet count\n_max = data.retweet_count.describe()[7]\ndata.retweet_count = [i\/_max for i in data.retweet_count]","1318b9de":"#Encode Words\nfrom sklearn.feature_extraction.text import TfidfVectorizer\nvectorizer = TfidfVectorizer(stop_words = \"english\")\nencoded_X = vectorizer.fit_transform(data.text).toarray()\nprint(encoded_X.shape)\nprint(\"Features First 100:\",vectorizer.get_feature_names()[:100])","0f332ab7":"data2 = data.copy()\ndel data2[\"text\"]\ndata2 = pd.concat([pd.DataFrame(encoded_X),data2], axis=1)\ndata2.head()","47a9c0ae":"X = data2.drop([\"airline_sentiment\"],axis=1)\ny = data2.airline_sentiment","941124d1":"#Train-Test Split\nfrom sklearn.model_selection import train_test_split\nX_train, X_test, y_train, y_test = train_test_split(X,y,test_size=0.25,random_state=22)\nprint(\"Train :\",X_train.shape)\nprint(\"Test  :\",X_test.shape)","00086d2f":"sns.set()\nplt.subplots(figsize=(10,5),tight_layout=True)\nplt.subplot(1,2,1)\nsns.countplot(y_train)\nplt.title(\"Train Dist.\")\nplt.subplot(1,2,2)\nsns.countplot(y_test)\nplt.title(\"Test Dist.\")\nplt.show()","0d68fed2":"#Classification\nfrom sklearn.ensemble import RandomForestClassifier\nclf = RandomForestClassifier(n_estimators=100)\nclf.fit(X_train, y_train)\npred = clf.predict(X_test)","de111f87":"#Result\nfrom sklearn.metrics import accuracy_score\nfrom sklearn.metrics import f1_score\n\nrf_acc = accuracy_score(y_test, pred)\nrf_f1 = f1_score(y_test, pred, average=\"micro\")\n\nprint(\"Random Forest\")\nprint(\"Accuracy : %\",round(rf_acc*100,2))\nprint(\"F1 Score : %\",round(rf_f1*100,2))","c9dfc79b":"<h2 id=\"h4\"> 4. Data cleaning and tranformation <\/h2>","a2a10a35":"Kernel steps;\n\n1. [Import libraries](#h1)\n2. [Load and first look dataset](#h2)\n3. [EDA](#h3)\n4. [Data cleaning and transformation](#h4)\n5. [Model training](#h5)\n    * [Future Extraction](#h51)\n    * [Split train and test data](#h52)\n    * [Random Forest Classifier](#h53)\n6. [Model evaluate](#h6)\n\nGood reading..","cc6a8ae4":"<h4>Thanks. If you like this kernel, please upvote and comment :)<\/h4>","1e1d249c":"Getting the data We want","d6bb58d3":"# Airline Tweets EDA and Modelling","c6d95c81":"In the following, the twits are **removed from unnecessary characters**, **converted to lowercase** letters, **separated into words** and their **roots are obtained**. ","22fd741d":"* **We are now able to comment on the emotions of the twits about companies. The United airline mentioned above has a very bad reputation in twitter. They also have negative reviews, which can be said that The United airline,US Airways and American offer poor service and have very bad reputation..**","12852a63":"<h2 id=\"h3\">3. EDA<\/h2>","c663b9b1":"<h2 id=\"h6\">6. Model evaluation <\/h2>","b1949948":"I used **Tfidf to embedding** text.","eafe2874":"<h2 id=\"h1\">1. Import Libraries<\/h2>","25baf5a9":"* **United airline is popular on Twitter. Of course, we don't know if this popularity is positive or negative. In addition, the fact that virgin america has very few twits gives the impression that the standard is neither good nor bad.**","2dd088c0":"<h2  id=\"h5\">5. Model Training<\/h2>","60032bb3":"In this work, We will try predict sentiment by twits. So, get sentment and text from data.","6844ad06":"We can creating word count now. We should did this in EDA but let's take a look :)","b79c7380":"* **We see that the overall comments are negative. This may mean that you are generally unhappy with airline companies. However, this may also be due to the nature of twitter.**","9632990d":"* **At this wordcloud was talked about thats ; flights, jetblue, americanair, southwestair, usairway, customer sevices, late flights, ticket, seat, cancelled filight.**","22cf5355":"<h3 id=\"h52\"> 5.2 Split train and test data <\/h3>","ef3b106f":"We need transform sentiments to numeric.","51a11d42":"<h3 id=\"h53\"> 5.3 Random Forest Classifier <\/h3>","a059002e":"Check test distrubution.","47ff9ea2":"<h3 id=\"h51\"> 5.1 Future Extraction <\/h3>","620b51c8":"<h2 id=\"h2\"> 2. Load and first look dataset<\/h2>"}}