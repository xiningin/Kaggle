{"cell_type":{"a4a357d6":"code","d85e39b5":"code","e9699e78":"code","62ef5c82":"code","956db8ac":"code","ee50a880":"code","9cd28c21":"markdown","3629f3f1":"markdown","348c38f8":"markdown","1ca52a53":"markdown","05541609":"markdown","e5d064bb":"markdown","0a6b1070":"markdown"},"source":{"a4a357d6":"import numpy as np\nimport pandas as pd \nimport os\nimport matplotlib.pyplot as plt\nimport operator\n\n# Pull out the fields we care about\ndata = pd.read_csv(\"..\/input\/zomato.csv\")[['rate', 'votes', 'cuisines']]\n\n# Find all the types of cuisine\ncuisines = {}\nfor i, j in data.iterrows():\n    \n    # Each restaurant can have multiple types of cuisine\n    types = [x.strip() for x in str(j[2]).split(',')]\n    for cuisine in types:\n        cuisines[cuisine] = cuisines[cuisine] + 1 if cuisine in cuisines.keys() else 1\n\n# Bar chart!\nx_pos = np.arange(len(cuisines))\nplt.bar(x_pos, list(cuisines.values()))\nplt.show()","d85e39b5":"sorted_cuisines = sorted(cuisines.items(), key=operator.itemgetter(1), reverse=True)\nsorted_cuisines = sorted_cuisines[:40]\n\n# Bar chart!\nplt.subplots(figsize=(20, 6.4))\nx_pos = np.arange(len(sorted_cuisines))\nplt.bar(x_pos, [x[1] for x in sorted_cuisines], width=0.8)\nplt.xticks(x_pos, [x[0] for x in sorted_cuisines], rotation=45)\nplt.show()\n","e9699e78":"# New counters for the same types\ncuisine_ratings = {}\nfor cuisine in sorted_cuisines:\n    cuisine_ratings[cuisine[0]] = 0\n    \n# Count em up\nfor i, j in data.iterrows():\n    \n    # Parse the rating - invalid ratings get mean score which could affect emerging cuisines\n    try:\n        rating = float(str(j[0])[:str(j[0]).find('\/')])\n    except ValueError:\n        rating = 2.5\n    \n    # Each restaurant can have multiple types of cuisine\n    types = [x.strip() for x in str(j[2]).split(',')]\n    for cuisine in types:\n        if cuisine in cuisine_ratings.keys():\n            cuisine_ratings[cuisine] += rating\n            \n# Average em out\nfor cuisine in sorted_cuisines:\n    cuisine_ratings[cuisine[0]] \/= cuisine[1]\n    \n# Bar chart!\nplt.subplots(figsize=(20, 6.4))\nx_pos = np.arange(len(sorted_cuisines))\nplt.bar(x_pos, [cuisine_ratings[y] - 3 for y in [x[0] for x in sorted_cuisines]], width=0.8, bottom=3)\nplt.xticks(x_pos, [x[0] for x in sorted_cuisines], rotation=45)\nplt.show()\n","62ef5c82":"# New counters for the same types\ncuisine_votes = {}\nfor cuisine in sorted_cuisines:\n    cuisine_votes[cuisine[0]] = 0\n    \n# Count em up\nfor i, j in data.iterrows():\n    \n    # Each restaurant can have multiple types of cuisine\n    types = [x.strip() for x in str(j[2]).split(',')]\n    for cuisine in types:\n        if cuisine in cuisine_votes.keys():\n            cuisine_votes[cuisine] += j[1]\n\n# Bar chart!\nplt.subplots(figsize=(20, 6.4))\nx_pos = np.arange(len(sorted_cuisines))\nplt.bar(x_pos, [cuisine_votes[y] for y in [x[0] for x in sorted_cuisines]], width=0.8)\nplt.xticks(x_pos, [x[0] for x in sorted_cuisines], rotation=45)\nplt.show()\n","956db8ac":"# Bar chart!\nplt.subplots(figsize=(20, 6.4))\nx_pos = np.arange(len(sorted_cuisines))\nplt.bar(x_pos, [(cuisine_ratings[y] - 3) * cuisine_votes[y] for y in [x[0] for x in sorted_cuisines]], width=0.8)\nplt.xticks(x_pos, [x[0] for x in sorted_cuisines], rotation=45)\nplt.show()","ee50a880":"# Bar chart!\nplt.subplots(figsize=(20, 6.4))\nx_pos = np.arange(len(sorted_cuisines))\nplt.bar(x_pos, [((cuisine_ratings[y] - 3) * cuisine_votes[y])\/cuisines[y] for y in [x[0] for x in sorted_cuisines]], width=0.8)\nplt.xticks(x_pos, [x[0] for x in sorted_cuisines], rotation=45)\nplt.show()","9cd28c21":"# Cuisine popularity\n\nThe most obvious measure of popularity of each cuisine type is the number of restaurants which serve that type of food.","3629f3f1":"The ratings are pretty favorable, so let's baseline it to 3 stars in order to force it to be more significant.\n\nNotice the slight increasing trend in average review scores as the restaurant count decreases. Survival of the fittest? Or something else?\n\nWe can think of the average review score as the total \"review points\" normalized by the number of reviewers. Let's multiply the reviewer counts back in to the the raw points as another possible popularity definition. First, the reviewer counts themselves:","348c38f8":"This exaggerates the slight upward trend in review score that was noted before. \n\nIn general, it seems folks are more likely to rate (and give favorable ratings) towards european and american-style restaurants. This likely reflects some bias where people are more likely to remember and rate foreign experiences than the typical options.","1ca52a53":"Here's a potential definiton of cuisine popularity. We can see the large number of reviews of North Indian cuisine are weighted down by the review score, putting continental cuisine into first place. There's also a solid showing by cafes, Italian and American cuisines.\n\nBut how about restaurant popularity? There were a large number of North Indian restaurants, so it's suspicious that our review-count based score isn't heavily favoring cuisines with more options for reviewing. Let's normalize by restaurant count:","05541609":"Looks like our original trend makes another showing with some exceptions. Seems people are less likely to review fast food restaurants, but more likely to review \"continental\" for example. \n\nHowever, let's be careful about offering this as a potential popularity definition. It's more like a \"view count\" on a web page, and doesn't necessarily give an indication of favoribility. That's why reviews have scores in the first place! Multiplying these in as discussed:","e5d064bb":"Looks like the data has some sparsely used tags. Let's take the 40 most-used.","0a6b1070":"As we might expect, Bangalore has a lot of Indian restaurants. The other options are pretty varied with consistent representation.\n\nAverage review scores could be another obvious definition of popularity:"}}