{"cell_type":{"8ff0bd5b":"code","5d0ea023":"code","9aa2031a":"code","51989cba":"code","27db4cc8":"code","cb628606":"code","e5824bb3":"code","d52ffa60":"code","465afd6c":"code","a6b51b47":"code","728198b5":"code","c3f199d5":"code","0a81f7bd":"code","ff91e6be":"code","7797de2b":"code","63c3f317":"markdown","b5779cc3":"markdown","470ed0c3":"markdown","130cac2f":"markdown","8a326dd5":"markdown","8ead5d90":"markdown","d0deaabb":"markdown","94af9db6":"markdown"},"source":{"8ff0bd5b":"import matplotlib.pyplot as plt\nimport seaborn as sns\nimport pandas as pd\nimport numpy as np \nimport os\n\npd.set_option(\"max_colwidth\", None)\npd.set_option(\"max_columns\", None)\nfor dirname, _, filenames in os.walk('\/kaggle\/input'):\n    for filename in filenames:\n        print(os.path.join(dirname, filename))","5d0ea023":"happy_2021 = pd.read_csv(\"\/kaggle\/input\/world-happiness-report-2021\/world-happiness-report-2021.csv\")\nhappy_2021.head()","9aa2031a":"# Explained variables are redundant.\n\nfig, ax = plt.subplots(nrows=2, ncols=2, figsize=(14,8))\nsns.scatterplot(data=happy_2021, x='Logged GDP per capita', y='Explained by: Log GDP per capita', ax=ax[0,0])\nsns.scatterplot(data=happy_2021, x='Social support', y='Explained by: Social support', ax=ax[0,1])\nsns.scatterplot(data=happy_2021, x='Healthy life expectancy', y='Explained by: Healthy life expectancy', ax=ax[1,0])\nsns.scatterplot(data=happy_2021, x='Freedom to make life choices', y='Explained by: Freedom to make life choices', ax=ax[1,1])\nplt.show()","51989cba":"# Drop Explained columns\nexplained_cols= happy_2021.columns.str.find(\"Explained\")==0\nhappy_2021 = happy_2021.loc[:,~explained_cols]","27db4cc8":"happy_2021.iloc[:,-3:].var()   # Ladder score in Dystopia has no variance\n\n# Assign to variables\nLadder_score_in_Dystopia = happy_2021.iloc[:,-3]\nhappy_2021.drop(['Ladder score in Dystopia'], axis=1, inplace=True)","cb628606":"corr_cols_drop = ['Standard error of ladder score','upperwhisker','lowerwhisker']\nhappy_2021\\\n    .drop(corr_cols_drop,axis=1)\\\n    .corr()\\\n    .style.background_gradient(sns.light_palette('green', as_cmap=True))","e5824bb3":"happy_2021.head(3)","d52ffa60":"data = happy_2021[happy_2021['Regional indicator'] == 'Sub-Saharan Africa']['Ladder score']\nsns.histplot(data, binwidth=0.2, kde=True);","465afd6c":"from scipy.stats import ttest_1samp\n\nt, p = ttest_1samp(data, 6.5)\nprint(f'p_val = {p}')     # Reject Null: From the data we have, we can reject that the mean is 6.5  ","a6b51b47":"from scipy.stats import ttest_1samp\n\nt, p = ttest_1samp(data, 4.5)\nprint(f'p_val = {p}')     # Not reject Null: From the data we have, we cannot reject that the mean is 4.5  ","728198b5":"western_e = happy_2021.query(\"`Regional indicator` == 'Western Europe'\")['Ladder score']\nlatin_a = happy_2021.query(\"`Regional indicator` == 'Latin America and Caribbean'\")['Ladder score']\n\nfrom scipy.stats import ttest_ind\n\nt, p = ttest_ind(western_e, latin_a, equal_var=True)\nprint(f'p_val = {p}')   # Reject Null: From the data we have, we can reject that the means are equal  ","c3f199d5":"# Import the historical data\nhappy_2008_2020 = pd.read_csv(\"\/kaggle\/input\/world-happiness-report-2021\/world-happiness-report.csv\")\nhappy_2008_2020 = happy_2008_2020.merge(happy_2021[['Country name','Regional indicator']], on='Country name', how='left')\n\n# Query the data\ndf = happy_2008_2020.query(\"`Regional indicator` == 'Central and Eastern Europe'\")\ndf_2011 = df[df['year']==2011]['Life Ladder']\ndf_2018 = df[df['year']==2018]['Life Ladder']","0a81f7bd":"from scipy.stats import ttest_rel\n\nt, p = ttest_rel(df_2011, df_2018)\nprint(f'p_val = {p}')   # Reject Null: From the data we have, we can reject that the means is unchanged","ff91e6be":"import statsmodels.api as sm\nfrom statsmodels.formula.api import ols\n\ndata = happy_2021[['Ladder score','Regional indicator']]\\\n        .rename(columns={'Ladder score':'Ladder', 'Regional indicator':'Region'})\n\nmodel = ols(\"Ladder ~ Region\", data=data).fit()\ntable = sm.stats.anova_lm(model)\nprint(table)     # Reject Null: From the data we have, we can reject that the means are the same","7797de2b":"from scipy.stats import pearsonr\n\nr, p = pearsonr(happy_2021['Ladder score'], happy_2021['Logged GDP per capita'])\nprint(f'p_val = {p}\\ncorr = {r}')     # Reject null : From the data we have, we can reject that they are not related","63c3f317":"### 4. Is different `Regional indicator` affect on different `Ladder score`?\n\n$H_0$ : all Regional indicator have the same population mean of Ladder score","b5779cc3":"1.2) $H_0$ : Sub-Saharan Africa have a population mean of Ladder score equal to 4.5","470ed0c3":"### 2. Is `Latin America` and `Western Europe` have the same population mean of `Ladder score`?\n\nWe will perform `two-sample t-test` under the assumption : Ladder score in Latin America and in Western Europe are independent to each other.\n\n$H_0$ : Latin America and Western Europe have the same population mean of Ladder score","130cac2f":"### 3. Is population mean of `Ladder score` of `Central and Eastern Europe` increased from 2011 compared to 2018?\n\n$H_0$ : population mean difference between 2008 and 2018 is 0","8a326dd5":"___\n# Statistical tests\n1. Is countries in `Sub-Saharan Africa` have a population mean of `Ladder score` equal to `6.5`?, and equal to `4.5`?\n2. Is `Latin America` and `Western Europe` have the same population mean of `Ladder score`?\n3. Is population mean of `Ladder score` of `Central and Eastern Europe` increased from 2011 compared to 2018?\n4. Is different `Regional indicator` affect on different `Ladder score`?\n5. Is `Ladder score` and `Logged GDP per capita` correlated?","8ead5d90":"### 5. Is `Ladder score` and `Logged GDP per capita` correlated?\n\n$H_0$ : ladder score and GDP are not correlated to each other","d0deaabb":"Not so normal, we will do `t-test` <br>\n1.1) $H_0$ : Sub-Saharan Africa have a population mean of Ladder score equal to 6.5","94af9db6":"### 1. Is countries in `Sub-Saharan Africa` have a population mean of `Ladder score` equal to `6.5`?, and equal to `4.5`?\n\nFirst, we have to see the **distribution** of **Ladder score in Sub-Saharan Africa**."}}