{"cell_type":{"5ae52fe9":"code","1654192c":"code","a55c5ef4":"code","31b8984a":"code","d5d86c4b":"code","5827d199":"code","e1580a49":"code","7efb9492":"code","65063bd9":"code","c5ccd13c":"code","d2835af8":"code","fe2dffb6":"markdown","c609680e":"markdown","aa295f50":"markdown","e9799fb1":"markdown","0188d7fd":"markdown"},"source":{"5ae52fe9":"# Importing libraries\n\nimport numpy as np # linear algebra\nimport pandas as pd # data processing, CSV file I\/O (e.g. pd.read_csv)","1654192c":"df = pd.read_csv('\/kaggle\/input\/us-police-shootings\/shootings.csv')\ndf.head()","a55c5ef4":"print(f'# of missing values in the dataset: {df.isna().sum().sum()}')","31b8984a":"import matplotlib.pyplot as plt\nplt.style.use('ggplot')\n\nfig, axes = plt.subplots(2,3, figsize=(18,8))\n\nft = {'kind':'pie','autopct':'%1.1f%%', 'shadow':True, 'startangle':120}\n\ndf['gender'].value_counts().plot( **ft, ax=axes[0,0]);\n\ndf['manner_of_death'].value_counts().plot( **ft, ax=axes[0,1]);\n\ndf['signs_of_mental_illness'].value_counts().plot( **ft, ax=axes[0,2]);\n\ndf['threat_level'].value_counts().plot( **ft, ax=axes[1,0]);\n\ndf['flee'].value_counts().plot( **ft, ax=axes[1,1]);\n\ndf['body_camera'].value_counts().plot( **ft, ax=axes[1,2]);","d5d86c4b":"df['race'].value_counts().plot(kind='bar', color=['DarkOrange', 'DarkGreen','DarkBlue','Gray','y'], \\\n                              ylabel='# of shootings', xlabel='race');\n","5827d199":"import seaborn as sns\n\ng = sns.countplot(x='race', data=df, hue='manner_of_death');\ng.set_xlabel('Race')\ng.set_ylabel('# of people')\ng.set_title('# of dead people based on their race');","e1580a49":"df['date'] = pd.to_datetime(df['date'], errors='coerce')\ndf.loc[:,'year'] = df['date'].dt.year\ndf.loc[:,'weekofyear'] = df['date'].dt.isocalendar().week\ndf.loc[:, 'month'] = df['date'].dt.month\ndf.loc[:, 'dayofweek'] = df['date'].dt.dayofweek\ndf.loc[:, 'weekend'] = (df['date'].dt.weekday >=5).astype(int)\ndf.loc[:, 'quarter'] = df['date'].dt.quarter","7efb9492":"df.head()","65063bd9":"fig, axes = plt.subplots(2,2, figsize=(16,12))\n\ndef plot_count(x, ax, data=df):\n    s = sns.countplot(x=x, data=data, palette='Set2', ax=ax);\n    s.set_title(f'# of people died by {x}')\n    \nplot_count(x='month', ax=axes[0,0])\nplot_count(x='dayofweek', ax=axes[0,1])\nplot_count(x='weekend', ax=axes[1,0])\nplot_count(x='quarter', ax=axes[1,1])","c5ccd13c":"aggs = {}\naggs['month'] = ['nunique','mean']\naggs['weekofyear'] = ['nunique', 'mean']\naggs['age'] = ['min', 'max', 'mean', 'sum']\n\naggs_df = df.groupby('city').agg(aggs)\naggs_df = aggs_df.reset_index()\naggs_df.head()","d2835af8":"df['city_race'] = df['city'].astype(str) + '_' + df['race'].astype(str)\ndf['city_race'].describe()","fe2dffb6":"#### Creating new features\n- maybe we would like to consider both city and race together","c609680e":"#### Loading the dataset","aa295f50":"#### Feature engineering\n","e9799fb1":"#### How dataset is distributed by gender","0188d7fd":"#### Aggregated features"}}