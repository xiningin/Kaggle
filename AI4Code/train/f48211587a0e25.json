{"cell_type":{"68eebfd4":"code","a5197b04":"code","8f61a862":"code","70e4f1fe":"code","bff5bf85":"code","a23493eb":"code","50cae534":"code","318f4e5e":"code","23675aff":"code","48c6d5ac":"code","f10a1f36":"code","e0acb1fb":"code","7049e674":"code","c9070796":"code","a23675a5":"code","1dab811f":"code","e26d1836":"code","b6257cbc":"code","b89b19b3":"code","a4b8925d":"code","a0388ac6":"code","4ec5a397":"markdown","cd4e982a":"markdown","dcc26c45":"markdown","20946ddd":"markdown","a70dc27a":"markdown","86b43c96":"markdown","fdd5c2e5":"markdown","16bdedb4":"markdown","892d0a3b":"markdown","fa637b83":"markdown"},"source":{"68eebfd4":"import numpy as np\nimport pandas as pd\n\nimport matplotlib.pyplot as plt\nimport seaborn as sns; sns.set()\nimport gc; gc.enable()","a5197b04":"df_train = pd.read_csv('..\/input\/osic-pulmonary-fibrosis-progression\/train.csv')\ndf_test = pd.read_csv('..\/input\/osic-pulmonary-fibrosis-progression\/test.csv')\nsub = pd.read_csv('..\/input\/osic-pulmonary-fibrosis-progression\/sample_submission.csv')\n\nprint('Train shape: ', df_train.shape)\nprint('Number of unique customers in train: {}'.format(df_train['Patient'].nunique()))\nprint('Test shape:', df_test.shape)","8f61a862":"df_train.head(3)","70e4f1fe":"df_test.head(3)","bff5bf85":"sub.head(3)","a23493eb":"SIZE = (20,8)\n\nplt.figure(figsize=SIZE)\n(df_train.FVC \/ df_train.Percent * 100).hist()\nplt.show()\n\nplt.figure(figsize=SIZE)\n(df_test.FVC \/ df_test.Percent * 100).hist()\nplt.show()","50cae534":"sub['Patient'] = sub.Patient_Week.str.split('_').apply(lambda x: x[0])\nsub['Weeks'] = sub.Patient_Week.str.split('_').apply(lambda x: int(x[1]))","318f4e5e":"sub.Patient.unique().tolist()","23675aff":"df_test.Patient.unique().tolist()","48c6d5ac":"sub['Weeks'].hist()","f10a1f36":"df_train.Weeks.hist()","e0acb1fb":"df_test.Weeks.hist()","7049e674":"patients = df_train.Patient.unique().tolist()\n\nplt.figure(figsize=SIZE)\nfor patient in patients:\n    temp = df_train[df_train.Patient == patient][['Percent', 'Weeks']].copy()\n    plt.plot(temp.Weeks, temp.Percent.pct_change())\nplt.show()","c9070796":"plt.figure(figsize=SIZE)\n(df_train.Percent).hist()\nplt.show()","a23675a5":"plt.figure(figsize=SIZE)\nfor patient in patients:\n    temp = df_train[df_train.Patient == patient][['Percent', 'Weeks']].copy()\n    plt.plot(temp.Weeks, temp.Percent)\nplt.show()","1dab811f":"patients = df_test.Patient.unique().tolist()\n\nplt.figure(figsize=SIZE)\nfor patient in patients:\n    temp = df_test[df_test.Patient == patient][['Percent', 'Weeks']].copy()\n    plt.scatter(temp.Weeks, temp.Percent)\nplt.show()","e26d1836":"sub['FVC'] = np.nan\nsub['Confidence'] = np.nan\n\ndf = pd.concat([df_train, df_test, sub], axis=0, ignore_index=True)\ndf","b6257cbc":"df['gpFVC'] = df.FVC \/ df.Percent * 100\n\ndf['Percent'] = df['Percent'].fillna(df.groupby('Patient')['Percent'].transform('median'))\ndf['gpFVC'] = df['gpFVC'].fillna(df.groupby('Patient')['gpFVC'].transform('median'))\n\ndf['FVC'] = df.Percent * df.gpFVC \/ 100\n\ndf","b89b19b3":"del sub['FVC']; del sub['Confidence']; gc.collect()","a4b8925d":"sub = sub.merge(df[['Patient_Week', 'FVC']], on='Patient_Week', how='left')\ndel sub['Patient']\ndel sub['Weeks']\nsub['Confidence'] = sub['FVC']*0.12\n\nsub.head()","a0388ac6":"sub.to_csv('submission.csv', index=False)","4ec5a397":"# How Well Can We Do Without A Model?\n\n## Imports","cd4e982a":"## Combine DataFrames","dcc26c45":"## Quick Peek","20946ddd":"## Relative-Group FVC Distributions","a70dc27a":"### Outliers? Poorly-Behaved Patient Percents\n\nI am choosing to focus on Percent over FVC since FVC is dependent on hidden parameters: weight, height, ethnicity, etc.","86b43c96":"## Data Ingestion","fdd5c2e5":"## Simple \/ Naive Inference","16bdedb4":"## Submission","892d0a3b":"## Data Prep","fa637b83":"### Sanity Check"}}