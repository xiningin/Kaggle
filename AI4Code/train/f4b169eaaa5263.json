{"cell_type":{"9b54b1de":"code","a84db83b":"code","98d280df":"code","6696578c":"code","e4c89846":"code","26638ee6":"code","d7c3e1f2":"code","6f233147":"code","b93db890":"code","a6c58849":"code","77250767":"code","a9131004":"code","bcf61810":"code","3a2bc0ed":"code","ee13ce58":"code","8f588a45":"code","5d743978":"code","10a7c578":"code","28a0eaa9":"code","21dd8360":"code","b36d1dfb":"code","1f20b371":"code","b6068484":"code","f8487d0a":"code","3da8d672":"code","28bc3372":"code","e9241271":"code","c12214b9":"code","78db1a17":"code","ee1bfdc8":"code","edd82c56":"code","05e092c2":"code","15f174d8":"markdown","6246da96":"markdown","7cb5b80d":"markdown","4208faf1":"markdown","8aa88a84":"markdown","8f7167cd":"markdown","97893a32":"markdown","1da5fc4b":"markdown","b6b11bbb":"markdown","fd906cda":"markdown","e3128830":"markdown","9c8f8e77":"markdown","119a11bd":"markdown","c26ef127":"markdown","7361204f":"markdown","248280aa":"markdown","97b03480":"markdown","2d3ee435":"markdown","fe9cd035":"markdown","72b574cf":"markdown","ea75bc6a":"markdown","9325135a":"markdown","a0d5ba17":"markdown","543d4559":"markdown","c5ee6c3f":"markdown","c3bb4e65":"markdown","19f2c2cc":"markdown","f4e7919f":"markdown"},"source":{"9b54b1de":"import pandas as pd\nimport numpy as np\nimport matplotlib.pyplot as plt\nimport seaborn as sns","a84db83b":"df = pd.read_csv('..\/input\/avocado-prices\/avocado.csv')","98d280df":"df.head()","6696578c":"df.shape","e4c89846":"df.info()","26638ee6":"df.drop('Unnamed: 0', axis=1, inplace=True) ","d7c3e1f2":"# Quick sanity check to make sure the column was dropped\ndf.head()","6f233147":"df.rename(columns={'4046': 'Small\/Medium Avocado', '4225': 'Large Avocado', '4770': 'Extra Large Avocado'}, inplace=True)\ndf.head(2)","b93db890":"to_convert = ['Total Volume', \n              'Small\/Medium Avocado', \n              'Large Avocado', \n              'Extra Large Avocado', \n              'Total Bags', \n              'Small Bags', \n              'Large Bags', \n              'XLarge Bags']","a6c58849":"for i in to_convert:\n    df[i] = df[i].astype('int64')","77250767":"# Make sure the columns were converted to int64\ndf.info()","a9131004":"df['Date'] = pd.to_datetime(df['Date'])","bcf61810":"df.head()","3a2bc0ed":"# Confirm the 'Date' column was updated\ndf.info()","ee13ce58":"# Check how many years of data we're working with\ndf.year.value_counts()","8f588a45":"df.head(5)","5d743978":"quantity_per_year = df.groupby('year')['Total Volume'].sum().reset_index()\nquantity_per_year","10a7c578":"# Let's visualize the total number of avocados sold within the US between 2015 and 2018\n\nsns.catplot(x=\"year\", y='Total Volume', kind=\"bar\", palette=\"muted\", data=quantity_per_year, height = 5)\n\nplt.xlabel('Year')\nplt.ylabel('Number of avocados sold (billion avocados)')\nplt.subplots_adjust(top=0.9)\nplt.suptitle('Total avocados sold in the US between 2015-2018',  size=14)\n\nplt.show()","28a0eaa9":"plt.figure(figsize=(10,4))\nplt.title(\"Price Distribution of Avocados\")\nsns.distplot(df[\"AveragePrice\"])\n\nplt.xlabel('Average Price per avocado')\nplt.show()","21dd8360":"grouped_by_month = df.groupby(pd.Grouper(key='Date',freq='M')).agg({'AveragePrice':'mean'}).reset_index()\ngrouped_by_month.head()","b36d1dfb":"plt.figure(figsize=(16,5))\n\nsns.lineplot(x='Date', y='AveragePrice', data=grouped_by_month, color='darkgreen')\n\nplt.xticks(grouped_by_month.Date) \nplt.xticks(rotation=90)\n\nplt.title('Average price of avocados by Month\/Year', size=15)\nplt.ylabel('Average Price', size=13)\nplt.xlabel('Year-Month', size=13)\n\nplt.show()","1f20b371":"price_per_year = df.groupby('year')['AveragePrice'].mean().reset_index()\nprice_per_year","b6068484":"volume_3_months = df.groupby(pd.Grouper(key='Date',freq='M')).agg({'Total Volume':'sum'}).reset_index()\n\n# Total sales during the first 3 months of 2015\nfirst_quarter_2015 = volume_3_months.loc[volume_3_months['Date'] < '2015-4-01'][['Total Volume']].values.sum()\n\n# Total sales during the first 3 months of 2016\nfirst_quarter_2016 = volume_3_months.loc[volume_3_months['Date'] > '2015-12-31']\nfirst_quarter_2016 = first_quarter_2016.loc[first_quarter_2016['Date'] < '2016-4-01'][['Total Volume']].values.sum()\n\n# Total sales during the first 3 months of 2017\nfirst_quarter_2017 = volume_3_months.loc[volume_3_months['Date'] > '2016-12-31']\nfirst_quarter_2017 = first_quarter_2017.loc[first_quarter_2017['Date'] < '2017-4-01'][['Total Volume']].values.sum()\n\n# Total sales during the first 3 months of 2018\nfirst_quarter_2018 = volume_3_months.loc[volume_3_months['Date'] > '2017-12-31']\nfirst_quarter_2018 = first_quarter_2018.loc[first_quarter_2018['Date'] < '2018-4-01'][['Total Volume']].values.sum()","f8487d0a":"# Create a series using the first quarter sales for 2015-2018\n\nquarter_1_total = [first_quarter_2015, first_quarter_2016, first_quarter_2017, first_quarter_2018]\n\nquarter_1_total_array = np.array([i for i in quarter_1_total])\nquarter_1_total_array\n\nfirst_quarter_volumes = pd.Series(quarter_1_total_array, index=['Q1 - 2015', 'Q1 - 2016', 'Q1 - 2017', 'Q1 - 2018'])\nfirst_quarter_volumes = first_quarter_volumes.to_frame().reset_index()\n# comparison = pd.Series(comparison, index=['Top 10 regions', 'Rest of the US (44 regions)'])\nfirst_quarter_volumes.columns = ['Q1 Sales - Year', 'Total Avocados Sold (billion avocados)']\nfirst_quarter_volumes\n","3da8d672":"clrs = ['red' if (x < max(quarter_1_total)) else 'darkgreen' for x in quarter_1_total]\n\nq1_plot = sns.barplot(x='Q1 Sales - Year', y='Total Avocados Sold (billion avocados)', data=first_quarter_volumes, palette=clrs)\n\nplt.subplots_adjust(top=0.85)\nplt.suptitle('Total Avocados sold between January 1 - March 31', size=14)\n\nplt.show()","28bc3372":"plt.figure(figsize=(6,7))\nsns.boxplot(x='type', y='AveragePrice', palette=\"Set2\", data=df)\n\nplt.xlabel('Type')\nplt.ylabel('Average Price', size=11)\nplt.title('Conventional vs Organic Avocados', size=13)\n\nplt.show()","e9241271":"df.head(2)","c12214b9":"sales_by_region = df.groupby('region')['Total Volume'].sum().reset_index()\nsales_by_region = sales_by_region.sort_values('Total Volume',ascending=False)\n\ntop_10 = sales_by_region[:11]\ntop_10","78db1a17":"plt.figure(figsize=(6,8))\n\nsns.barplot(x='Total Volume', y='region', orient='h', data=top_10 )\n\n# Let's visualize the total number of avocados sold within the US between 2015 and 2018\n\nplt.title('Most avocados sold by region')\nplt.ylabel('Region')\nplt.xlabel('Total Volume (billion avocados)')\n\nplt.show()","ee1bfdc8":"# How many regions are there in total? \ndf.region.nunique()","edd82c56":"# Calculating the total consumption of the top 10 regions\nten_regions_total = top_10['Total Volume'][1:].sum()\nten_regions_total\n\n# Calculating the total consumption of the remaining regions\nremaining_regions = sales_by_region[11:]\nremaining_regions = remaining_regions['Total Volume'].sum()\n\n# Inputting both in a series\ncomparison = np.array([ten_regions_total, remaining_regions])\ncomparison = pd.Series(comparison, index=['Top 10 regions', 'Rest of the US (44 regions)'])\n\nremaining_regions\ncomparison","05e092c2":"comparison.plot.pie(subplots=True, figsize=(10, 5), autopct='%1.0f%%')\n\nplt.title('Volume between the top 10 and the remaining regions')\nplt.ylabel('')\n\nplt.show()","15f174d8":"Total avocado sales in the US have been on an uptrend from 2015 until 2017 according to our graph. Unfortunately, it seems like we don't have a full year worth of data for 2018. Nonetheless, we can continue exploring what we have! ","6246da96":"## Analyze total sales by region","7cb5b80d":"The data set contains a total of 18249 rows and 14 columns. \n\nLuckily, we don't have any missing data! ","4208faf1":"#### I hope you found this analysis useful! \n\n#### Please feel free to provide any feedback or ideas that you may have.","8aa88a84":"## Comparing total avocados sold from 2015-2018","8f7167cd":"## Consumption in the top 10 regions compared to the rest of the US","97893a32":"### Now we can start exploring and visualizing our data","1da5fc4b":"First of all, we'll need to group the average price of avocados by month\/year. Luckily, we can easily do this since we've already convered the 'Date' column to 'datetime64' format. ","b6b11bbb":"## Graphing the price distribution","fd906cda":"### Let's take a look at what the columns '4046', '4225', and '4770' represent.\n\nA quick google search revealed that '4046', '4225', and '4770' are a way to dinstinguish between avocado size.\n\n[Link to source.](https:\/\/loveonetoday.com\/how-to\/identify-hass-avocados\/)\n\n- 4046, Small\/Medium Hass Avocado (3-5oz avocado)\n- 4225, Large Hass Avocado (8-10oz avocado)\n- 4770, Extra Large Hass Avocado (10-15oz avocado)\n\nBased on this information, I'll update the column names to make it easier to work with and understand the data. \n\n","e3128830":"### Comparing total first quarter sales from 2015-2018","9c8f8e77":"## Graphing avocado prices 2015-2018","119a11bd":"The avocado industry suffered a major shortage in 2017 due to a low harvest. The low supply, combined with rapdily growing demand shot up the price of avocados in 2017, which is portrayed by the linegraph as well as the table above. \n\n[Link](https:\/\/www.bbc.com\/news\/business-39768480) - One of many newsources which reported the state of the avocado industry in 2017.\n\nUnfortunately, we only have data for the first 3 months of 2018. Let's run a comparison for avocados sold during the first 3 months in 2015-2018.","c26ef127":"We can see that the top 10 avocado consuming regions within the United States account for approximately 68% of total consumption. The rest of the regions - 44 of them - combined only consumed 32%. ","7361204f":"### Let's drop the 'unnamed' column. ","248280aa":"###### Initial thoughts:\n\n- Drop the 'Unnamed' column because it's an index and we already have one from pandas (the column to the left of the 'unnamed' column\n- What do the columns '4046', '4225', and '4770' represent? \n- Can we get rid of the decimals for some of the columns? For example - \"Total Volume\" - I think it would be easier to look at and work with integers as opposed to floats.","97b03480":"###### There is a lot more to explore with our dataset. Some ideas for further analysis include:\n\n- Is there a big difference in price of avocados between each region?\n- What region tends to buy larger quantities (extra large bags)?\n- What regions purchase more organic avocados in comparison to traditional?\n- How many people live in each region in comparison to how many avocados were consumed? Is the reason for the high consumption in the top 10 regions simply a higher population, or are people living there just avocado enthusiasts?","2d3ee435":"![image.png](attachment:image.png)","fe9cd035":"![Alt Text](https:\/\/media.giphy.com\/media\/3oD3YrUgucpmkZr5a8\/giphy.gif) ","72b574cf":"There are lots of avocado fans out there!","ea75bc6a":"### Convert 'Date' column to Pandas date time format\n","9325135a":"## Comparing Conventional and Organic Avocados","a0d5ba17":"We can infer that organic avocados are, on average, more expensive than conventional avocados. This data makes sense because organic food tends to be more expensive in comparison to traditional food.","543d4559":"![image.png](attachment:image.png)","c5ee6c3f":"More avocados were sold in the first quarter of 2018 then any other first quarter from our dataset. If this trend continued than 2018 would see the highest number of sales in comparison to 2015-2017. Intuition tells us that this was probably the case, however we can't confirm that without looking at the full year data. \n\n[Link](https:\/\/hassavocadoboard.com\/) - Updated data can be downloaded here.","c3bb4e65":"### Convert integers to floats","19f2c2cc":"Seems like there is increasing demand for avocados - can we confirm that?","f4e7919f":"## Comparing total sales within the United States by year"}}