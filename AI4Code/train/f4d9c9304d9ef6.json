{"cell_type":{"41b42879":"code","80811df6":"code","d8f44b7c":"code","5572fb3a":"code","9598ddfb":"code","c3cc44eb":"code","d7b0a5b2":"code","c971ea8d":"code","febb3be0":"code","d861f5d3":"code","5d49d127":"code","e3523894":"code","6ede35ed":"code","6a345f88":"code","c5328b36":"code","d2531bf9":"code","a4307086":"code","514c5ce0":"code","f5ab1a12":"code","12a57d66":"code","d0644095":"code","e65af7be":"code","b08b1fb1":"code","d61e3c09":"code","415700e0":"code","7639ba88":"code","169f3481":"code","315ab6b0":"code","7152ad25":"code","5b614318":"markdown","78e8c2d5":"markdown","74704496":"markdown","b9ec83d5":"markdown","e30e0887":"markdown","d5bb4b4d":"markdown","f32ad838":"markdown","e0e1bbc3":"markdown","65854863":"markdown","ecee6eba":"markdown","00e111ea":"markdown","6129e4b2":"markdown","132402a3":"markdown","ac9faff6":"markdown","4211d85e":"markdown","cf99373a":"markdown","8739f5dc":"markdown","60f13fce":"markdown","8e250072":"markdown"},"source":{"41b42879":"import numpy as np \nimport pandas as pd\nimport matplotlib.pyplot as plt\nimport os\n\nfor dirname, _, filenames in os.walk('\/kaggle\/input'):\n    for filename in filenames:\n        print(os.path.join(dirname, filename))\n","80811df6":"df=pd.read_csv('\/kaggle\/input\/new-york-city-airbnb-open-data\/AB_NYC_2019.csv')\ndf.head()","d8f44b7c":"df.info()","5572fb3a":"df.isna().sum()","9598ddfb":"df.describe()","c3cc44eb":"plt.figure(figsize=(12,8))\ni=0\nfor col in ['price','minimum_nights','number_of_reviews','reviews_per_month','calculated_host_listings_count','availability_365']:\n    plt.subplot(2,3,i+1)\n    plt.hist(df[col],normed=True,bins=100)\n    plt.title(col)\n    i+=1","d7b0a5b2":"df_first=df[(df['price']<=500) & (df['availability_365']>0) & (df['minimum_nights']<366)]","c971ea8d":"df['neighbourhood_group'].unique()","febb3be0":"from collections import Counter\ncont=Counter(df_first['neighbourhood_group'])","d861f5d3":"mean_price_per_neighbor=df_first.groupby('neighbourhood_group').apply(np.mean)\nplt.figure(figsize=(12,7))\nplt.subplot(221)\nplt.bar(mean_price_per_neighbor.index,mean_price_per_neighbor['price'],width=0.3,alpha=0.5)\nplt.title('Mean Price of Neighbourhoods')\n\nnumber_of_listings=cont.values()\nplt.subplot(222)\nplt.bar(mean_price_per_neighbor.index,number_of_listings,width=0.3,alpha=0.5)\nplt.title('Number of listings of Neighbourhoods')\n\nplt.subplot(223)\nplt.bar(mean_price_per_neighbor.index,mean_price_per_neighbor['number_of_reviews'],width=0.3,alpha=0.5)\nplt.title('Mean Number of Reviews of Neighbourhoods')\n\nplt.subplot(224)\nplt.bar(mean_price_per_neighbor.index,mean_price_per_neighbor['availability_365'],width=0.3,alpha=0.5)\nplt.title('Mean Availability of Neighbourhoods');\n\n","5d49d127":"cont1 = Counter(df_first['neighbourhood_group'])\nlabels = cont1.keys()\nsizes = cont1.values()\n\nexplode = (0, 0, 0.1, 0.2 , 0.5)  \nfig1, ax1 = plt.subplots(figsize=(6,6))\nwedges, texts, _ = ax1.pie(sizes, explode=explode, labels=labels,radius=2, autopct='%1.1f%%',pctdistance=0.8,labeldistance=1.1)\nax1.axis('equal')  \nplt.title('Number of Listings')\nplt.tight_layout()\nplt.show()\n","e3523894":"df_second=df[(df['price']>=500) & (df['availability_365']>0)]","6ede35ed":"cont2= Counter(df_second['neighbourhood_group'])\nlabels = cont2.keys()\nsizes = cont2.values()\n\nexplode = (0, 0, 0.1, 0.2 , 0.5)  \nfig2, ax2 = plt.subplots(figsize=(6,6))\nwedges, texts, _ = ax2.pie(sizes, explode=explode, labels=labels,radius=2, autopct='%1.1f%%',pctdistance=0.8,labeldistance=1.1)\nax2.axis('equal')  \nplt.title('Number of Expensive Listings')\nplt.tight_layout()\nplt.show()\n","6a345f88":"lons = df_first['longitude'].tolist()\nlats = df_first['latitude'].tolist()\n\nimport geopandas\n\n\ngeo_df = geopandas.read_file(geopandas.datasets.get_path('nybb'))\ngeo_df = geo_df.to_crs({\"init\": \"epsg:4326\"})\ngeo_df.plot(figsize=(15, 15), alpha=0.4, edgecolor='k',column='BoroName',\n            legend=True,legend_kwds={'loc': 'upper left','frameon':False})\nplt.scatter(lons, lats, alpha=0.8, c=df_first['price'],s=6)\nplt.colorbar(shrink=0.6)\nplt.title('Distributaion of Inexpensive Listings and Their Prices');","c5328b36":"lons = df_second['longitude'].tolist()\nlats = df_second['latitude'].tolist()\n\nimport geopandas\n\n\ngeo_df = geopandas.read_file(geopandas.datasets.get_path('nybb'))\ngeo_df = geo_df.to_crs({\"init\": \"epsg:4326\"})\ngeo_df.plot(figsize=(15, 15), alpha=0.4, edgecolor='k',column='BoroName',\n            legend=True,legend_kwds={'loc': 'upper left','frameon':False})\nplt.scatter(lons, lats, alpha=0.8, c=df_second['price'],s=6)\nplt.colorbar(shrink=0.6)\nplt.title('Distributaion of Expensive Listings and Their Prices');","d2531bf9":"df_unavailable=df[(df['availability_365']==0) & (df['price']<=500)]","a4307086":"cont3= Counter(df_unavailable['neighbourhood_group'])\nlabels = cont3.keys()\nsizes = cont3.values()\n\nexplode = (0, 0, 0.1, 0.2 , 0.5)  \nfig3, ax3 = plt.subplots(figsize=(6,6))\nwedges, texts, _ = ax3.pie(sizes, explode=explode, labels=labels,radius=2, autopct='%1.1f%%',pctdistance=0.8,labeldistance=1.1)\nax3.axis('equal')  \nplt.title('Number of Unavailable Listings')\nplt.tight_layout()\nplt.show()","514c5ce0":"lons = df_unavailable['longitude'].tolist()\nlats = df_unavailable['latitude'].tolist()\n\nimport geopandas\n\n\ngeo_df = geopandas.read_file(geopandas.datasets.get_path('nybb'))\ngeo_df = geo_df.to_crs({\"init\": \"epsg:4326\"})\ngeo_df.plot(figsize=(15, 15), alpha=0.4, edgecolor='k',column='BoroName',\n            legend=True,legend_kwds={'loc': 'upper left','frameon':False})\nplt.scatter(lons, lats, alpha=0.8, c=df_unavailable['price'],s=6)\nplt.colorbar(shrink=0.6)\nplt.title('Distributaion of Unavailable Listings and Their Prices');","f5ab1a12":"df_highminnight=df[df['minimum_nights']>30]\ncont4= Counter(df_highminnight['neighbourhood_group'])\nlabels = cont4.keys()\nsizes = cont4.values()\n\nexplode = (0, 0, 0.1, 0.2 , 0.5)  \nfig4, ax4 = plt.subplots(figsize=(6,6))\nwedges, texts, _ = ax4.pie(sizes, explode=explode, labels=labels,radius=2, autopct='%1.1f%%',pctdistance=0.8,labeldistance=1.1)\nax4.axis('equal')  \nplt.title('Nimber of Listings with Minimum Nights of More Than a Month')\nplt.tight_layout()\nplt.show()","12a57d66":"lons = df_highminnight['longitude'].tolist()\nlats = df_highminnight['latitude'].tolist()\n\nimport geopandas\n\n\ngeo_df = geopandas.read_file(geopandas.datasets.get_path('nybb'))\ngeo_df = geo_df.to_crs({\"init\": \"epsg:4326\"})\ngeo_df.plot(figsize=(15, 15), alpha=0.4, edgecolor='k',column='BoroName',\n            legend=True,legend_kwds={'loc': 'upper left','frameon':False})\nplt.scatter(lons, lats, alpha=0.8, c=df_highminnight['minimum_nights'],s=6)\nplt.colorbar(shrink=0.6)\nplt.title('Distributaion of Listings with High Minimum Nights');","d0644095":"df_highreview=df[df['number_of_reviews']>=100]\ncont5= Counter(df_highreview['neighbourhood_group'])\nlabels = cont5.keys()\nsizes = cont5.values()\n\n\nexplode = (0, 0, 0.1, 0.2 , 0.5)  \nfig5, ax5 = plt.subplots(figsize=(6,6))\nwedges, texts, _ = ax5.pie(sizes, explode=explode, labels=labels,radius=2, autopct='%1.1f%%',pctdistance=0.8,labeldistance=1.1)\nax5.axis('equal')  \nplt.title('Number of Listings with More Than 100 Reviews')\nplt.tight_layout()\nplt.show()","e65af7be":"labels = cont5.keys()\nnum = []\nfor item in labels:\n    num.append(cont5[item]*100\/cont1[item])\n    \nplt.bar(labels,num,width=0.3,alpha=0.5)\nplt.title('Percentage of High Reviewed Listings Over all Listings in Each Neighbourhood');","b08b1fb1":"lons = df_highreview['longitude'].tolist()\nlats = df_highreview['latitude'].tolist()\n\nimport geopandas\n\n\ngeo_df = geopandas.read_file(geopandas.datasets.get_path('nybb'))\ngeo_df = geo_df.to_crs({\"init\": \"epsg:4326\"})\ngeo_df.plot(figsize=(15, 15), alpha=0.4, edgecolor='k',column='BoroName',\n            legend=True,legend_kwds={'loc': 'upper left','frameon':False})\nplt.scatter(lons, lats, alpha=0.8, c=df_highreview['number_of_reviews'],s=6)\nplt.colorbar(shrink=0.6)\nplt.title('Distributaion of Listings with More than 100 Reviews');","d61e3c09":"types=Counter(df['room_type'])\nplt.figure()\nplt.bar(types.keys(),types.values(),width=0.3,alpha=0.5)\nplt.title('Number of Listings of Each Type of Listing');","415700e0":"df_types=df.groupby(['neighbourhood_group', 'room_type']).size()\ndf_types","7639ba88":"df_bronx=df_types['Bronx']\nlabels = df_bronx.index\nsizes = df_bronx.values\n\nexplode = (0, 0, 0.1)  \nplt.figure(figsize=(12,12))\nplt.subplot(321)\nwedges, texts, _ = plt.pie(sizes, explode=explode, labels=labels,radius=2, autopct='%1.1f%%',pctdistance=0.8,labeldistance=1.1)\nplt.axis('equal')  \nplt.tight_layout()\nplt.title('Bronx')\n\ndf_brooklyn=df_types['Brooklyn']\nlabels = df_brooklyn.index\nsizes = df_brooklyn.values\n\n \nplt.subplot(322)\nwedges, texts, _ = plt.pie(sizes, explode=explode, labels=labels,radius=2, autopct='%1.1f%%',pctdistance=0.8,labeldistance=1.1)\nplt.axis('equal')  \nplt.title('Brooklyn')\nplt.tight_layout()\n\ndf_manhattan =df_types['Manhattan']\nlabels = df_manhattan.index\nsizes = df_manhattan.values\n\n \nplt.subplot(323)\nwedges, texts, _ = plt.pie(sizes, explode=explode, labels=labels,radius=2, autopct='%1.1f%%',pctdistance=0.8,labeldistance=1.1)\nplt.axis('equal')  \nplt.tight_layout()\nplt.title('Manhattan')\n\ndf_queens =df_types['Queens']\nlabels = df_queens.index\nsizes = df_queens.values\n\n \nplt.subplot(324)\nwedges, texts, _ = plt.pie(sizes, explode=explode, labels=labels,radius=2, autopct='%1.1f%%',pctdistance=0.8,labeldistance=1.1)\nplt.axis('equal')  \nplt.tight_layout()\nplt.title('Queens')\n\ndf_staten =df_types['Staten Island']\nlabels = df_staten.index\nsizes = df_staten.values\n\n \nplt.subplot(325)\nwedges, texts, _ = plt.pie(sizes, explode=explode, labels=labels,radius=2, autopct='%1.1f%%',pctdistance=0.8,labeldistance=1.1)\nplt.axis('equal') \nplt.title('Staten Island');\nplt.tight_layout()\n","169f3481":"df_name=df.copy()\ndf_name['name']=df_name['name'].str.lower()\ndf_name['name']=df_name['name'].str.replace('[^\\w\\s]',' ')\ndf_name['name']=df_name['name'].str.strip()\n#df_name['name']=df_name['name'].str.split(' ')\n#df_name['name']=df_name['name'].apply(remove_empty)\ndf_name['name']=df_name['name'].fillna('nan')\n\nfrom nltk.corpus import stopwords\nstop = stopwords.words('english')\n\ndf_name['name']=df_name['name'].apply(lambda x: ' '.join([word for word in x.split() if word not in (stop)]))\n\nall_words=\" \".join(df_name['name'])","315ab6b0":"def remove_empty(row):\n    new_row=[]\n    try:\n        for item in row: \n            if item !='':\n                new_row.append(item)\n    except Exception:\n        pass\n    return new_row","7152ad25":"word_counts = Counter(all_words.split(\" \"))\nword_counts.most_common(35)","5b614318":"We have 5 different neighbourhood groups. Lets examine the data regarding these different groups. ","78e8c2d5":"We create a new dataset for the listings that are available (means that the available days are not zero), priced less than 500 and the minimum nights of listing is less than 366 (1 year). The reason for this process is to remove the outliers, and to be able to see the trends in the data more easily. ","74704496":"Let's see what listings have more than 100 reviews. ","b9ec83d5":"# Conclusion\n\nUsing a lot more insights and visualizations of the data we can find a lot of hidden relations and patterns. \nFurther we can investigate the relation between the words used to describe a listing and the number of reviews it recieves. We can use this information to generate automatically new describtions, that will attract more people, and increse the number of reviews as a result. \nWe can use the data investigated here, to automatically assigne an optimized price, considering the location, the type, number of reviews and other factors. ","e30e0887":"The histograms of numerical columns except the id, latitude, and longitude columns, show us very valuable information. ","d5bb4b4d":"We can print out some statistic information about the data columns. ","f32ad838":"All the data we were working with so far, were available listings. We can also examine the unavailable data. ","e0e1bbc3":"We can plot all the listings (inexpensive listings) on a map. The color of each point represents the price of the listing. ","65854863":"We see that data has 16 columns and 48895 entries. Moreover, we can check the number of null values in each column. ","ecee6eba":"Here, we also examine the listings that are expensive, meaning that the price is greater than 500. This pie chart shows the number of expensive listings in each neighbourhood.","00e111ea":"At the end, we can examine which words were beign used to describe listings more frequently.","6129e4b2":"Let see what percentage of all the listings in each neighbourhood have more than 100 reviews. Brooklyn Wins!","132402a3":"This data file includes all needed information to find out more about hosts, geographical availability, necessary metrics to make predictions and draw conclusions. \n\nFirst, let's import data and create some visualizations, to better understand the data and patterns within. ","ac9faff6":" We can also visualize the number of listings in each neighbourhood on a pie chart. ","4211d85e":"Let's do the same with the expensive listings as well. ","cf99373a":"In the following, we can see the mean price of each neighbourhood, number of listings per neighbourhood, mean number of reviews per neighbourhood, and mean availability per neighbourhood. ","8739f5dc":"We can easily find out which neighbourhood offers more of which type of listing.","60f13fce":"We also check the listings with high minimum nights (more than a month). ","8e250072":"Let's examine the types of listings which are Private Room, Entire Home\/Apt, and Shared Room. "}}