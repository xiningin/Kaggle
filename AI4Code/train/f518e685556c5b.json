{"cell_type":{"9feb0852":"code","0b6b57f6":"code","b5f49814":"code","4a8df935":"code","a2c37183":"code","26771382":"code","e94fa458":"code","23d5fbd1":"code","72ddd5bd":"code","fcdadb2e":"code","7f0bc37a":"code","5d649c97":"code","a044fbc0":"code","a114d0ac":"code","e278e25b":"code","c863be2a":"code","6ec96db3":"code","58b95717":"code","064e4db8":"code","7bcc1cb0":"code","12a454be":"code","1066b5e7":"code","a94e2f9f":"code","41d6348d":"code","42aa99e5":"code","e31ec1bb":"code","b30b57db":"code","f0d6c4b0":"code","ca44ac7e":"code","ac73ad42":"code","1dfbd4c0":"code","e198ff4e":"code","761916c4":"code","803275c9":"markdown","e4fc869f":"markdown","f9fe6aef":"markdown","af2e32d3":"markdown","f3bfc692":"markdown","ff622855":"markdown","6947ddd7":"markdown","6c8e2d92":"markdown","0e99a472":"markdown","f417bdc5":"markdown","2ca3a374":"markdown"},"source":{"9feb0852":"import numpy as np\nimport pandas as pd\nimport seaborn as sns\nimport matplotlib.pyplot as plt","0b6b57f6":"#Importing the dataset\ndata = pd.read_csv('\/kaggle\/input\/all-indian-companies-registration-data-1900-2019\/registered_companies.csv')","b5f49814":"df = data","4a8df935":"df.info()","a2c37183":"print(f\"Total Values : {len(df)}\\n\")\nfor x in df.columns:\n    print(f'{len(df)-df[x].count()} values missing in {x}')","26771382":"print(len(df))\ndf.head(3)","e94fa458":"df = df.dropna()\nprint(len(df))\ndf.head(3)","23d5fbd1":"#Interesting data, will keep it narrow and efficient for now\ndropCols = [\"LATEST_YEAR_FINANCIAL_STATEMENT\",\n            \"EMAIL_ADDR\", \"COMPANY_NAME\",\n            \"LATEST_YEAR_ANNUAL_RETURN\",\n            \"CORPORATE_IDENTIFICATION_NUMBER\",\n            \"REGISTERED_OFFICE_ADDRESS\"]\n\ndf = df.drop(dropCols, axis=1)","72ddd5bd":"df[\"DATE_OF_REGISTRATION\"] = df[\"DATE_OF_REGISTRATION\"].apply(pd.to_datetime)\n#df[\"INDUSTRIAL_CLASS\"] = df[\"INDUSTRIAL_CLASS\"].astype(int)","fcdadb2e":"df['REG_YEAR'] = df['DATE_OF_REGISTRATION'].dt.year\ndf['REG_MONTH'] = df['DATE_OF_REGISTRATION'].dt.month","7f0bc37a":"#columns along the number of unique items in them along a list of it\nfor x in df.columns:\n    print(f'{x} : {len(df[x].unique())}\\n{df[x].unique()[:20]}\\n')","5d649c97":"#Naming conveniences\n\ndf[\"COMPANY_CLASS\"] = df[\"COMPANY_CLASS\"].apply(lambda x:\"Solo\" if x == 'Private(One Person Company)' else x)\nprint(df[\"COMPANY_CLASS\"].unique())\n\ndf[\"REGISTRAR\"] = df[\"REGISTRAR_OF_COMPANIES\"].apply(lambda x:x.split(\"ROC\\xa0\")[-1])\nprint(df[\"REGISTRAR\"].unique())\n\ndf[\"PRINCIPAL_BUSINESS\"] = df[\"PRINCIPAL_BUSINESS_ACTIVITY_AS_PER_CIN\"].apply(lambda x:x.split(\" \")[0])\nprint(df[\"PRINCIPAL_BUSINESS\"].unique())\n\n#Creating bins for REGISTRATION_YEAR\n\ndf[\"REG_YEAR_5BIN\"] = df[\"REG_YEAR\"].apply(lambda x:(round(x\/5))*5)\nprint(df[\"REG_YEAR_5BIN\"].unique())\n\ndf[\"REG_YEAR_10BIN\"] = df[\"REG_YEAR\"].apply(lambda x:(round(x\/10))*10)\nprint(df[\"REG_YEAR_10BIN\"].unique())\n      \ndf[\"REG_YEAR_20BIN\"] = df[\"REG_YEAR\"].apply(lambda x:(round(x\/20))*20)\nprint(df[\"REG_YEAR_20BIN\"].unique())","a044fbc0":"df1 = df.loc[df[\"PRINCIPAL_BUSINESS\"] == \"Mining\"]","a114d0ac":"print(f'{x} : {len(df1[\"REG_YEAR\"].unique())}\\n{df1[\"REG_YEAR\"].unique()}\\n')","e278e25b":"import os\nos.chdir(r'kaggle\/working')","c863be2a":"df1.to_csv(r'df1.csv')","6ec96db3":"#Working with a smaller randomly picked sample space for efficiency and overall population testing.\ndf2 = df\ndf = df.sample(n=10000)","58b95717":"#For readability since I use dark mode\nsns.set_theme(context='notebook',\n              style='darkgrid',\n              palette='magma',\n              font='sans-serif',\n              font_scale=0.6,\n              color_codes=True,\n              rc=None)","064e4db8":"f, ax = plt.subplots(2)\n\n#Counting all the number fo companies by REG_YEAR\n\nsns.countplot(x=\"REG_YEAR_5BIN\",\n              data=df, ax = ax[0])\n\n\n#Year of registration by COMPANY_CLASS\n\nsns.stripplot(x=\"REG_YEAR\",\n              y=\"COMPANY_CLASS\",\n              data=df, jitter=0.5,\n              ax = ax[1])","7bcc1cb0":"f, ax = plt.subplots(1, len(df[\"COMPANY_CLASS\"].unique()))\nf.tight_layout()\ny=0\nprint(df[\"COMPANY_CLASS\"].unique())\nfor x in df[\"COMPANY_CLASS\"].unique():\n    sns.histplot(x=\"REG_YEAR\",\n                data=df[df[\"COMPANY_CLASS\"]==x],\n                ax=ax[y])\n    y+=1","12a454be":"sns.countplot(x=\"COMPANY_CLASS\",\n              data=df[df[\"REG_YEAR\"] >= 1982]) #Change year","1066b5e7":"#Industry of companies\n\nsns.stripplot(x=\"REG_YEAR\",\n              y=\"PRINCIPAL_BUSINESS\",\n              hue=\"COMPANY_CLASS\",\n              data=df, jitter=0.3)","a94e2f9f":"#Companies in respect to COMPANY_CLASS over time.\ny=0\nf, ax = plt.subplots(len(df[\"COMPANY_CLASS\"].unique()),1)\nf.subplots_adjust(top=1, bottom=-0.9, left=-0.9, hspace=0.2)\nprint(df[\"COMPANY_CLASS\"].unique())\nfor x in df[\"COMPANY_CLASS\"].unique():\n    sns.stripplot(y=\"REG_YEAR\",\n                x=\"PRINCIPAL_BUSINESS\",\n                data=df[df[\"COMPANY_CLASS\"]==x],\n                hue=\"REG_YEAR_10BIN\",\n                palette=\"magma_r\",\n                jitter=0.4,\n                ax=ax[y])\n    y+=1","41d6348d":"#State wise looking at the industries through time\n\ny=0; f, ax = plt.subplots(len(df[\"REGISTERED_STATE\"].unique()),1)\nf.subplots_adjust(top=10, bottom=-0.9, left=-0.5, hspace=0.2)\nfor x in df[\"REGISTERED_STATE\"].unique():\n    sns.histplot(y='REG_YEAR',\n                  x='PRINCIPAL_BUSINESS',\n                  #jitter=0.3,\n                  hue=\"REGISTERED_STATE\",\n                  palette=\"magma_r\",\n                  data= df[df[\"REGISTERED_STATE\"]==x],\n                  ax=ax[y])\n    y+=1","42aa99e5":"len(df)","e31ec1bb":"df[df[\"PRINCIPAL_BUSINESS\"] == \"Education\"].head(3)","b30b57db":"f, axes = plt.subplots(1,5)\nf.subplots_adjust(top=0.5, bottom=-0.9, left=-3, hspace=0.2)\nax1 = sns.countplot(x=\"COMPANY_CLASS\", data=df2[df2[\"PRINCIPAL_BUSINESS\"] == \"Education\"], ax=axes[0])\nax2 = sns.countplot(x=\"REGISTERED_STATE\", data=df2[df2[\"PRINCIPAL_BUSINESS\"] == \"Education\"], ax=axes[1])\nax3 = sns.countplot(x=\"REG_YEAR_10BIN\", data=df2[df2[\"PRINCIPAL_BUSINESS\"] == \"Education\"], ax=axes[2])\nax4 = sns.countplot(x=\"COMPANY_CATEGORY\", data=df2[df2[\"PRINCIPAL_BUSINESS\"] == \"Education\"], ax=axes[3])\nax5 = sns.countplot(x=\"COMPANY_SUB_CATEGORY\", data=df2[df2[\"PRINCIPAL_BUSINESS\"] == \"Education\"], ax=axes[4])\nax2.set_xticklabels(ax2.get_xticklabels(), rotation=40, ha=\"right\")\nax4.set_xticklabels(ax4.get_xticklabels(), rotation=40, ha=\"right\")\nax5.set_xticklabels(ax5.get_xticklabels(), rotation=40, ha=\"right\")","f0d6c4b0":"print(len(df), len(df2))","ca44ac7e":"sns.displot(x=\"REG_YEAR\", y=\"PRINCIPAL_BUSINESS\", data=df[df[\"PRINCIPAL_BUSINESS\"] == \"Education\"])","ac73ad42":"sns.displot(x=\"REG_YEAR\", y=\"PRINCIPAL_BUSINESS\", data=df[df[\"PRINCIPAL_BUSINESS\"] != \"Education\"])","1dfbd4c0":"df[\"AUTHORIZED_CAP\"].describe()","e198ff4e":"df.to_csv('\/kaggle\/working\/df.csv')","761916c4":"df2.head()","803275c9":"The density of private companies is too high to make any reasonable inference.","e4fc869f":"India is seeing a increasing number of new companies being registered which a vast proportion of them being in the 2000s+ \\\nSolo COMPANY_CLASS catches traction post 2010+ from the first lower plot and can see appearing from 2014 in this sample space on the second rightmost plot.\\\nThe majority of companies are classified as Private (density of the first lower plot & count in second plot).\n\n","f9fe6aef":"### Visualization","af2e32d3":"### Index:\nPrerequisites\\\nWorking out the data\\\nBasic Visalization","f3bfc692":"### Working the data","ff622855":"-There are a lot of categoricals to work with \\\n-Many columns seem broadly empty \\","6947ddd7":"### Prerequisites","6c8e2d92":"Using the df2 full set DataFrame the result and distribution changes quite a bit","0e99a472":"-Wholesale, Manufacturing and Real Estate have the highest number private companies.\\\n-Public companies incline towards manufacturing followed by Real Estate and Financial sectors.\\\n-Interesting how private companies have a big concentration in Real Estate even in the sparcity.\\\n-Companies under Education and electricity industry started late in India and are relevant magnifications to look at.","f417bdc5":"### Objective:\nData exploration to construct a sensible hypothesis. \\\nCourse module assignment.\\\nFirst kaggle notebook.","2ca3a374":"### Education industry directly impacts all sectors?"}}