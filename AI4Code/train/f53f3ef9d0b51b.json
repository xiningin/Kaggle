{"cell_type":{"6e08fce7":"code","0cdf727c":"code","28b2bb27":"code","f3074079":"code","f6af5263":"code","61678fbe":"code","79a77056":"code","29a62f32":"code","4cb93ff7":"code","f1a3ffc1":"markdown","ae328dea":"markdown","5686144f":"markdown","79c0cf26":"markdown","66c339ef":"markdown","0a89b241":"markdown"},"source":{"6e08fce7":"import pandas  as pd\nimport seaborn as sns\nimport plotly.express    as px\nimport matplotlib.pyplot as plt\n\nplt.style.use('fivethirtyeight')","0cdf727c":"# Read and inspect data\nraw_data = pd.read_csv('..\/input\/violence-against-women-and-girls\/makeovermonday-2020w10\/violence_data.csv')\nraw_data.head()","28b2bb27":"print('Dataset contains data from {} countries'.format(raw_data.Country.nunique()))","f3074079":"raw_survey_df = raw_data.pivot_table(index=['Country','Gender','Demographics Question','Demographics Response'],columns=['Question'], values=['Value'])\nraw_survey_df","f6af5263":"# Reset columns\nsurvey_df = raw_survey_df.T.reset_index(drop=True).T.reset_index()\n\n# Rename columns\nsurvey_df.columns = ['country',\n                     'gender',\n                     'demographics_question',\n                     'demographics_response',\n                     'violence_any_reason',\n                     'violence_argue',\n                     'violence_food',\n                     'violence_goingout',\n                     'violence_neglect',\n                     'violence_sex',\n                    ]","61678fbe":"survey_df","79a77056":"# Examine Violence x gender\nfig = px.box(survey_df.query(\"demographics_question == 'Age'\").sort_values('violence_any_reason',ascending=False),\n            x      = 'country',\n            y      = 'violence_any_reason',\n            color  = 'gender',\n            title  = '% of Respondents that agree with violence for any surveyed reason across Country and Gender',\n            color_discrete_sequence = ['#4a00ba','#00ba82'],\n            height = 650\n        )\n\nfig.update_xaxes(title='Country')\nfig.update_yaxes(title='% Agrees: Violence is justified for any surveyed reason')\nfig.show()","29a62f32":"# Examine Violence x Age group\nfig = px.bar(survey_df.query(\"demographics_question == 'Age'\").sort_values('violence_any_reason',ascending=False),\n            x      = 'country',\n            y      = 'violence_any_reason',\n            color = 'demographics_response',\n            title  = '% of Violence for any surveyed reason across Country and Age Group ',\n            height = 650\n        )\n\nfig.update_xaxes(title='Country')\nfig.update_yaxes(title='% Agrees: Violence is justified for any surveyed reason')\nfig.show()","4cb93ff7":"# Examine Correlations\nplt.figure(figsize=(10,10))\nsns.heatmap(survey_df.iloc[:,4:].corr(),\n            square=True,\n            linewidths=.5,\n            cmap=sns.diverging_palette(10, 220, sep=80, n=7),\n            annot=True,\n           )\nplt.title('Correlation Across Different Violence Questions')\nplt.show()","f1a3ffc1":"The data was originally provided in the `long` format, we can convert it by using `pivot_table`.\nLets do this and inspect the contents.","ae328dea":"# Exploratory Data Analysis","5686144f":"That's a lot better, now lets query results in order to make an exploratory data analysis acording to `Age` and `Education`.","79c0cf26":"Note that the columns relate to questions where the respondents were asked if they agreed with the following statements:\n\n- A husband is justified in hitting or beating his wife for at least one specific reason?\n- A husband is justified in hitting or beating his wife if she argues with him?\n- A husband is justified in hitting or beating his wife if she burns the food?\n- A husband is justified in hitting or beating his wife if she goes out without telling him?\n- A husband is justified in hitting or beating his wife if she neglects the children?\n- A husband is justified in hitting or beating his wife if she refuses to have sex with him?","66c339ef":"Its still a bit chunky, and we can improve by unnesting the indexes and changing the column names.","0a89b241":"Let's start by reading and inspecting the data file."}}