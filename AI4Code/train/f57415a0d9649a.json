{"cell_type":{"0d0320be":"code","5f7f01b0":"code","952d935f":"code","5678f6d0":"code","71fa4f1b":"code","50ec9dc3":"code","cd1997e9":"code","4fb1d804":"code","d572aac6":"code","d870da2d":"code","aa2b2dbc":"code","2a605846":"code","100c5f80":"code","4f0d99f0":"code","7e7acc3a":"code","ae409b5d":"code","a260ac1e":"code","0db37832":"code","e6c1faf6":"code","3b392305":"code","0bb3a68b":"code","b4d3de54":"code","242ac3b4":"code","5c12b0c6":"code","fac732af":"code","99050bb1":"code","bc929be0":"code","2c3d9819":"code","b665c8ad":"code","34f2a462":"code","aac6c195":"code","eba4cdf5":"code","c1e6e2f3":"code","fbfb0691":"code","8c71e714":"code","0f1cb6e3":"code","2df6ba5d":"code","1ab175a6":"code","7d042f4a":"code","c6b2fe88":"code","9169946b":"code","612d5e65":"code","3b3dec8b":"code","d30f478d":"code","f75beb03":"code","8f9ca72e":"code","040b8f3c":"code","7d8bfa62":"code","e490c980":"code","e9ef9a26":"code","f9cea43b":"code","08f7a195":"code","06d9c1a6":"markdown","bfe5e302":"markdown","c9111c7b":"markdown","5616ccf2":"markdown","841e3d6d":"markdown","7290f394":"markdown","98de4ec8":"markdown","df6e4471":"markdown","019a8a23":"markdown","148acc85":"markdown","eb5b4b2b":"markdown","f231e018":"markdown","b9d014d5":"markdown","8f2f14d8":"markdown"},"source":{"0d0320be":"import pandas as pd\nimport numpy as np\nimport matplotlib.pyplot as plt\nimport seaborn as sns","5f7f01b0":"original=pd.read_csv('..\/input\/who_suicide_statistics.csv')","952d935f":"print(original.head())\nprint(original.shape)\nprint(original.dtypes)\nprint(original.isnull().sum())\nprint(original.describe())","5678f6d0":"x=list(original['country'].unique())\nfor i in x:\n    if original.loc[original['country']==str(i),'suicides_no'].isnull().sum()>0:\n        original.loc[original['country']==str(i),'suicides_no'] = \\\n        original.loc[original['country']==str(i),'suicides_no'].fillna( \\\n        round(np.mean(original.loc[original['country']==str(i),'suicides_no']),0))\n    else:\n        pass\nelse:\n    pass\n","71fa4f1b":"original.isnull().sum()","50ec9dc3":"original.loc[:,'population']=original.loc[:,'population'].fillna(np.mean(original.loc[:,'population']))","cd1997e9":"original.isnull().sum()","4fb1d804":"print(original.loc[original['year']==2016].size)\nprint(original.loc[original['year']==2015].size)\nprint(original.loc[original['year']==2012].size)","d572aac6":"original.head()","d870da2d":"groupbyyear=original.loc[:,['year','suicides_no']].groupby(by='year')\nyearcount=groupbyyear.sum()\nyearcount.tail()","aa2b2dbc":"yearcount.drop(index=2016,inplace=True)\nyearcount.drop(index=2015,inplace=True)","2a605846":"sns.set()\np0=yearcount.plot.barh(title=r'1979-2014 suicide number by year bar plot',figsize=(16,15),legend=False)\np0.get_figure()\nplt.xlabel('year')\nplt.ylabel('number')\nplt.yticks(range(yearcount.index.shape[0]),yearcount.index)\nx=np.arange(yearcount.index.shape[0])\ny=np.array(yearcount['suicides_no'])\nfor i,j in zip(x,y):\n    plt.text(j,i-0.2,'%d'%j,ha='center',va='bottom')\nelse:\n    pass\nplt.savefig('total_by_year_bar.png')\nplt.show()","100c5f80":"sns.set()\nyearcount.index=yearcount.index.astype('str')\nz1=yearcount.plot(figsize=(15,14),linestyle='--',marker='o',legend=False)\nz1.get_figure()\nplt.title(r'1979-2014 suicides_no by year plot')\nplt.xticks(range(yearcount.index.shape[0]),yearcount.index,rotation=45)\nplt.savefig('.\/total_by_year_plot.png')\nplt.show()","4f0d99f0":"gender=pd.pivot_table(original,index='year',columns='sex',values='suicides_no',aggfunc=np.sum)","7e7acc3a":"gender.drop(index=2015,inplace=True)\ngender.drop(index=2016,inplace=True)","ae409b5d":"gender.tail()","a260ac1e":"sns.set()\np1=gender.plot.barh(title=r'1979-2014 suicide number by gender bar plot', \\\n                   figsize=(15,14),stacked=True)\np1.get_figure()\nplt.ylabel('year')\nplt.xlabel('number')\nx=np.arange(gender.index.shape[0])\ny1=np.array(gender['female'])\ny2=np.array(gender['male'])\nfor i,j in zip(x,y1):\n    plt.text(j,i-0.2,'%d'%j,ha='right',va='bottom')\nelse:\n    for k,l in zip(x,y2):\n        plt.text(l,k-0.2,'%d'%l,ha='left',va='bottom')\n\nplt.savefig('.\/total_by_gender_bar_plot.png')\nplt.show()","0db37832":"sns.set()\np2=gender.boxplot(figsize=(15,14))\np2.get_figure()\nplt.title(r'1979-2014 suicide number by gender boxplot')\nplt.savefig('.\/total_by_gender_boxplot.png')\nplt.show()","e6c1faf6":"sns.set()\nn1=plt.figure(figsize=(30,29))\nexplode=[0,0.1]\nlabel=gender.columns\nfor i in range(36):\n    n1.add_subplot(9,4,i+1)\n    plt.title(r'%d suicides_no gender ratio pie plot'%gender.index[i])\n    plt.pie(gender.iloc[i,:],autopct='%1.1f%%',explode=explode,labels=label)\nelse:\n    pass\nn1.savefig('.\/total_by_gender_pie.png')\nplt.show()","3b392305":"agePivot=pd.pivot_table(original,index='year',columns='age',values='suicides_no',aggfunc=np.sum)\nagePivot.tail()","0bb3a68b":"agePivot.drop(index=2016,inplace=True)","b4d3de54":"agePivot.tail()","242ac3b4":"sns.set()\np3=agePivot.plot.barh(figsize=(15,14),stacked=True)\np3.get_figure()\nplt.title(r'1979-2015 suicides number by age barplot')\nplt.xlabel('year')\nplt.ylabel('number')\nplt.savefig('.\/total_by_age_barh.png')\nplt.show()","5c12b0c6":"sns.set()\np4=agePivot.boxplot(figsize=(15,14))\np4.get_figure()\nplt.title(r'1979-2015 suicide number by age boxplot')\nplt.savefig('.\/total_by_age_boxplot.png')\nplt.show()","fac732af":"original.head()","99050bb1":"countryPivot=pd.pivot_table(original,index='year',columns='country',values='suicides_no',aggfunc=np.sum)\ncountryPivot.head()","bc929be0":"countryPivot=countryPivot.fillna(0)\ncountryPivot.head()","2c3d9819":"countryPivot.index.shape","b665c8ad":"countrysum=pd.DataFrame(countryPivot.apply(np.sum))\ncountrysum=countrysum.rename(columns={0:'total'})\ncountrysum=countrysum.sort_values(by='total',ascending=False)","34f2a462":"countrysum.head()","aac6c195":"top5=countrysum.iloc[0:5,:]","eba4cdf5":"top5","c1e6e2f3":"sns.set()\np5=top5.plot.bar(figsize=(15,14),legend=False)\np5.get_figure()\nplt.title(r'1979-2015 top5 suicides_no country bar plot')\nplt.xlabel('country')\nplt.ylabel('number')\nplt.xticks(range(top5.index.shape[0]),top5.index,rotation=45)\nx=np.arange(top5.index.shape[0])\ny=np.array(top5.loc[:,'total'])\nfor i,j in zip(x,y):\n    plt.text(i,j,'%d'%j,ha='center')\nelse:\n    pass\nplt.savefig('.\/top5_country_bar_plot.png')\nplt.show()","fbfb0691":"original.head()","8c71e714":"yearRateGroup=original.groupby(by='year')\nyearsum=yearRateGroup.sum()\nyearsum.head()","0f1cb6e3":"yearsum['suicides_rate']=yearsum['suicides_no']\/yearsum['population']\nyearsum.tail()","2df6ba5d":"yearsum.drop(index=[2015,2016],inplace=True)","1ab175a6":"rate=pd.DataFrame(yearsum.loc[:,'suicides_rate'])\nrate.tail()\n","7d042f4a":"sns.set()\np6=rate.plot.barh(figsize=(15,14),legend=False)\np6.get_figure()\nplt.title(r'1979-2014 suicides rate bar plot')\nplt.xlabel('rate')\nx=np.array(rate['suicides_rate'])\ny=np.arange(rate.index.shape[0])\nfor i,j in zip(x,y):\n    plt.text(i,j-0.2,'%.4f%%'%(i*100),ha='center')\nelse:\n    pass\nplt.savefig('.\/suicides_rate_by_year_bar.png')\nplt.show()","c6b2fe88":"sns.set()\nrate.index=rate.index.astype('str')\nz2=rate.plot(figsize=(15,14),linestyle='--',marker='o',legend=False)\nz2.get_figure()\nplt.title(r'1979-2014 suicides rate plot')\nplt.xticks(range(rate.index.shape[0]),rate.index,rotation=45)\nplt.savefig('.\/suicides_rate_by_year_plot.png')\nplt.show()","9169946b":"yearsum.index[-1]","612d5e65":"def populationpredict(data):\n    basic_suicide=float(data.iloc[-2,0])\n    basic_population=float(data.iloc[-2,1])\n    suicidesrate=(data.iloc[-1,0]-basic_suicide)\/(basic_suicide)\n    suicidespredict=data.iloc[-1,0]*(1+suicidesrate)\n    populationrate=(data.iloc[-1,1]-basic_population)\/(basic_population)\n    populationpredict=data.iloc[-1,1]*(1+populationrate)\n    rate=suicidespredict\/populationpredict\n    x=[suicidespredict,populationpredict,rate]\n    x=pd.DataFrame(x)\n    x=x.T\n    x=x.rename(columns={0:'suicides_no',\n                      1:'population',\n                      2:'suicides_rate'})\n    x=x.rename(index={0:data.index[-1]+1})\n    return x","3b3dec8b":"suicides2015=populationpredict(yearsum)\nyearsum=pd.concat([yearsum,suicides2015])\nsuicides2016=populationpredict(yearsum)\nyearsum=pd.concat([yearsum,suicides2016])\nyearsum.tail()","d30f478d":"suicides2017=populationpredict(yearsum)\nyearsum=pd.concat([yearsum,suicides2017])\nsuicides2018=populationpredict(yearsum)\nyearsum=pd.concat([yearsum,suicides2018])\nsuicides2019=populationpredict(yearsum)\nyearsum=pd.concat([yearsum,suicides2019])","f75beb03":"suicides2020=populationpredict(yearsum)\nyearsum=pd.concat([yearsum,suicides2020])\nsuicides2021=populationpredict(yearsum)\nyearsum=pd.concat([yearsum,suicides2021])\nsuicides2022=populationpredict(yearsum)\nyearsum=pd.concat([yearsum,suicides2022])\nsuicides2023=populationpredict(yearsum)\nyearsum=pd.concat([yearsum,suicides2023])","8f9ca72e":"suicides2024=populationpredict(yearsum)\nyearsum=pd.concat([yearsum,suicides2024])\nsuicides2025=populationpredict(yearsum)\nyearsum=pd.concat([yearsum,suicides2025])","040b8f3c":"#yearsum.to_csv('.\/predict_no_population.csv')\nyearsum.tail()","7d8bfa62":"year0025=yearsum.iloc[21:,:]\nyear0025.head()\nyear0025.index=year0025.index.astype('str')","e490c980":"sns.set()\np7=plt.figure(figsize=(15,14))\nplt.plot(year0025.iloc[:,0],linestyle='--',marker='o')\nplt.title(r'suicides_no predict by formula plot')\nplt.xlabel('year')\nplt.ylabel(r'predict number')\nplt.xticks(range(year0025.index.shape[0]),year0025.index,rotation=45)\np7.savefig('.\/predict_suicides_no_plot.png')\nplt.show()","e9ef9a26":"year0025.head()","f9cea43b":"sns.set()\np8=plt.figure(figsize=(15,14))\nplt.plot(year0025.iloc[:,1],linestyle='--',marker='o')\nplt.xlabel('year')\nplt.ylabel(r'predict population')\nplt.xticks(range(year0025.index.shape[0]),year0025.index,rotation=45)\nplt.title(r'population predict by formula plot')\np8.savefig('.\/predict_population_plot.png')\nplt.show()","08f7a195":"sns.set()\np9=plt.figure(figsize=(15,14))\nplt.plot(year0025.iloc[:,2],linestyle='--',marker='o')\nplt.xlabel('year')\nplt.ylabel('rate')\nplt.xticks(range(year0025.index.shape[0]),year0025.index,rotation=45)\nplt.title(r'predict suicides rate by formula plot')\np9.savefig('.\/predict_suicides_rate_plot.png')\nplt.show()","06d9c1a6":"## Summary\n\n- The suicides population of male is increasing\n\n\n- The suicides percentage of male is increasing\n\n\n- 35-54 year suicides population is highest and increasing\n\n\n- Russian.USA and Japan are top3 country that has more suicides population\n\n\n- Suicides rate after 2013 is increasing\n\n\n- Suicides rate between 1979-2013 is increasing\n\n\n- Suicides population and population may decrease in the future\n\n\n- Suicides rate may increase in the future","bfe5e302":"## Predict\n\nWith using population predict formula,\n\nand using previous population for basic period,\n\nsuicides population and population is decreasing,\n\nbut suicides rate is increasing,\n\nso we should be more seriously to face suicides.","c9111c7b":"## by gender\n\nWith bar chart,male is more than female,\n\nmale's population is increase,\n\nand female's population is decrease.\n\nWith box chart,male is gently increase,\n\nand female has no obvious change.\n\nBecause female has no obvious change,\n\nsmaller and bigger values are seem as abnormal values.\n\nWith pie chart,the percentage of male is increasing,\n\nin 1987-1988,the percentage of female has abnormal change.","5616ccf2":"## year rate\n\nWith plot chart,the trend of suicides rate is decreasing.\n\nBut after 2013,suicides rate has increasing trend.\n\nAnd 1980 is highest,\n\n1992-1998 is another higher section.","841e3d6d":"## Visualization--year rate","7290f394":"## Visualization-by gender","98de4ec8":"## top5 country\n\nWith bar chart,Russian.USA and Japan has higher values.\n\nThen,France and Ukraine are much smaller than top3.\n\n","df6e4471":"## Visualization-by country","019a8a23":"## by year\n\nWith bar chart,\n\n1998-2003 have higher suicides population\n\nAnd with plot chart,\n\nsuicides population has small fluctuation\n\nbut seems to be decrease","148acc85":"# Kaggle-WHO suicide statistics dataset\n\n## 2019-02-21","eb5b4b2b":"## Visualization-by age","f231e018":"## by age\n\nWith bar chart,age 35-54 is more than other age,\n\nin 1983-1984,age 5-14 is increasing,but decrease by next year.\n\nother age seems to be gently trend.\n\nWith box chart,age 35-54 and age 55-74 has gently increasing,\n\nAnd other age have no obvious change,especially 5-14 years.\n\nBecause other age have no obvious change,some values are seem as abnormal values.","b9d014d5":"## Visualization-by year","8f2f14d8":"## Predict--with population predict formula\n\nWith data that is total by year,using population predict formula,\n\nand using previous population for basic period.\n\n### population predict formula:\n\n$${M_n}={M_0}*{(1+V)}^n$$\n\n${M_n}$=predicted period.\n\n${M_0}$=basic period.\n\nV=Growth rate\n\nn=year value\n\n\n### growth rate formula:\n\n$$\\frac{{a_i}-{a_{i-1}}}{a_{i-1}}$$"}}