{"cell_type":{"a712af62":"code","5230375b":"code","b258f012":"code","a34ca6d1":"code","004eacdc":"code","85f02eb2":"code","87c59002":"code","814cd837":"code","f018a141":"code","4827211a":"code","396b7ec3":"code","2318b07f":"code","1ae1bb5b":"code","b8050384":"code","a8add8a7":"code","8103a726":"code","6d5fd4e4":"code","35081ed1":"code","9cb85fbc":"code","a19447f2":"code","246927e8":"code","a26ce7d2":"code","1a46302f":"code","fa675a46":"code","b2841651":"code","49321fdd":"code","5c6dc85c":"code","ab4e7697":"code","4dd12865":"code","52834ce3":"code","8ec73cd3":"code","f5a68841":"code","43cfaedd":"code","a75b182d":"code","95888938":"code","b4abecd2":"code","168b4ae3":"code","5aefb142":"code","ca8107bb":"code","d4388597":"code","2f834b3a":"markdown"},"source":{"a712af62":"import pandas as pd\nwater= pd.read_csv(\"..\/input\/nyc-beach-water-quality-data\/dohmh-beach-water-quality-data-1.csv\")\nwater.head(9)","5230375b":"water['Sample Location'].value_counts()","b258f012":"water['Sample Location']= water['Sample Location'].replace('Rigth','Right')\nround(water['Sample Location']. value_counts()*100\/len(water),2)","a34ca6d1":"water.nunique()","004eacdc":"water.info()","85f02eb2":"water['Sample Date']=pd.to_datetime(water['Sample Date'])\nwater.info()","87c59002":"water.isnull().sum()*100\/len(water)","814cd837":"missing=water[water.isna().any(axis=1)]\nmissing.head()","f018a141":"missing.isnull().sum()*100\/len(missing)","4827211a":"missing.nunique()","396b7ec3":"missing['Units or Notes'].value_counts()*100\/len(missing)","2318b07f":"water[water['Units or Notes']=='Result below detection limit'].head()","1ae1bb5b":"water[water['Units or Notes']=='Result below detection limit'].info()","b8050384":"water[water['Units or Notes']!='Result below detection limit'].head()","a8add8a7":"water[water['Units or Notes']!='Result below detection limit'].info()","8103a726":"water['Enterococci Results']=water['Enterococci Results'].fillna(0)\nwater.isnull().sum()*100\/len(missing)","6d5fd4e4":"water=water.dropna()\nwater.info()","35081ed1":"water.nunique()","9cb85fbc":"water.head()","a19447f2":"water=water.drop(['Units or Notes'],axis=1)\nwater.head()","246927e8":"#paper : https:\/\/www.environment.nsw.gov.au\/-\/media\/OEH\/Corporate-Site\/Documents\/Water\/Beaches\/state-of-beaches-2019-2020-statewide-summary-200302.pdf\nwater.loc[water['Enterococci Results'] <= 50, 'Category'] = 'open'\nwater.loc[water['Enterococci Results'] >500, 'Category'] = 'closed'\nwater.loc[(water['Enterococci Results'] >50) & (water['Enterococci Results'] <=500), 'Category'] = 'advisory'\nround(water['Category'].value_counts()*100\/len(water))","a26ce7d2":"water.rename(columns = {'Enterococci Results':'Enterococci Results (MPN\/100 ml)'}, inplace = True)\nwater.head()","1a46302f":"!pip install pandas-profiling","fa675a46":"from pandas_profiling import ProfileReport\nProfileReport(water, title=\"EDA Report\")","b2841651":"!pip install pycaret","49321fdd":"data = water.sample(frac=0.8, random_state=42)\ndata_unseen = water.drop(data.index)\ndata.reset_index(inplace=True, drop=True)\ndata_unseen.reset_index(inplace=True, drop=True)\nprint('Data for Modeling: ' + str(data.shape))","5c6dc85c":"print('Unseen Data For Predictions: ' + str(data_unseen.shape))","ab4e7697":"from pycaret.classification import *","4dd12865":"water= setup(data = data, target = 'Category', session_id=42,\n                  normalize = True, \n                  transformation = True, \n                  log_experiment = True,\n                  handle_unknown_categorical = True, \n                  unknown_categorical_method = 'most_frequent',\n                  remove_multicollinearity = True, #drop one of the two features that are highly correlated with each other\n                  ignore_low_variance = True,#all categorical features with statistically insignificant variances are removed from the dataset.\n                  combine_rare_levels = True,# all levels in categorical features below the threshold defined in rare_level_threshold param are combined together as a single level\n                  numeric_imputation='median',\n           ignore_features=['Sample ID'],\n            date_features=['Sample Date'],\n             high_cardinality_features =['Beach Name'],           \n           fix_imbalance = True,\n            train_size = 0.8\n          )","52834ce3":"dt = create_model('dt')","8ec73cd3":"print(dt)","f5a68841":"tuned_dt = tune_model(dt,optimize = 'F1')","43cfaedd":"plot_model(tuned_dt, plot = 'auc')","a75b182d":"plot_model(tuned_dt, plot = 'pr')","95888938":"plot_model(tuned_dt, plot='feature')","b4abecd2":"plot_model(tuned_dt, plot = 'confusion_matrix')","168b4ae3":"evaluate_model(tuned_dt)","5aefb142":"predict_model(tuned_dt)","ca8107bb":"unseen_predictions = predict_model(tuned_dt, data=data_unseen)\nunseen_predictions.head()","d4388597":"print(\"Confidence Score :   {}\".format(round(unseen_predictions.Score.mean(),2)))#Confidence Score","2f834b3a":"# Sample Location"}}