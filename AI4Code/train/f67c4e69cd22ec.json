{"cell_type":{"8c8ab163":"code","bc44c798":"code","a6f0a58b":"code","a94f5379":"code","40226042":"code","6ae4bacb":"code","212c16a1":"code","474317e6":"code","184bde3c":"code","c89f231c":"code","6e98b819":"code","84545565":"code","39d3a651":"code","cbcaeb01":"code","76a789e2":"code","b03e8d22":"code","07f4c674":"code","789c1191":"code","e5fe92fb":"code","0e57f37d":"code","208375a4":"code","9baedcac":"code","105cbe42":"code","1733dab9":"code","7290b4a1":"code","67f3a5fb":"code","14d54f5c":"code","99a07293":"code","897affbc":"code","7e705406":"code","4ec54470":"code","009e3ce5":"code","392de3b7":"code","40b0cc63":"code","10a1150e":"code","4b99dbe5":"code","70eb9749":"code","1384e1e3":"code","2f92f64e":"code","b32bbed1":"code","1da415c6":"markdown","c7a13a91":"markdown","390a8a42":"markdown","0d0c6b43":"markdown","ea637c8b":"markdown","71c17254":"markdown","b34e6faf":"markdown","3ab8fadc":"markdown","ad5b51a9":"markdown","49aaaa23":"markdown","92260217":"markdown","fb39bc32":"markdown","68678327":"markdown","e90ba0ba":"markdown","b80edb3c":"markdown","d674b208":"markdown","b69f0b9c":"markdown","4d7bd5a4":"markdown","067765c4":"markdown","fa64237c":"markdown","7aa51435":"markdown","66a9f192":"markdown","3a811f2a":"markdown","70f2b31f":"markdown","4e733a26":"markdown","284562ea":"markdown","8c0f1346":"markdown","7ed9fa47":"markdown","0c84e498":"markdown","9b3d7150":"markdown","12a66853":"markdown","9d816a04":"markdown","ad150426":"markdown","db4adb8d":"markdown","a7827146":"markdown","fca78e79":"markdown","a6cf07c9":"markdown","01b083bc":"markdown","e264d53a":"markdown","2b3c8712":"markdown","dec9b1df":"markdown","7c16c118":"markdown","4e926dd5":"markdown","c9310bc4":"markdown","51b4ffd4":"markdown","ad8f76e7":"markdown","9d6a77bb":"markdown"},"source":{"8c8ab163":"import numpy as np\nimport pandas as pd\nimport matplotlib.pyplot as plt\n\n # line only for colab \n# from google.colab import files\n# uploaded = files.upload()","bc44c798":"# colab\n# import io\n# df2 = pd.read_csv(io.BytesIO(uploaded['Airplane_Crashes_and_Fatalities_Since_1908.csv']))\n\n# kaggle\ndf2 = pd.read_csv(\"..\/input\/airplane-crashes-since-1908\/Airplane_Crashes_and_Fatalities_Since_1908.csv\")\n\n\n# jupyter \n# import os\n# # os.getcwd()\n# df2 = pd.read_csv(\"Airplane_Crashes_and_Fatalities_Since_1908.csv\")","a6f0a58b":"df2.dtypes","a94f5379":"#@title Checking NA values in each column\na = [(i, df2[i].isna().sum()) for i in df2.columns]\nlabels, ys = zip(*a)\n \nplt.figure(figsize=[8,12])\nplt.barh(labels, ys , height=0.8)\nplt.title(\"Missing values in each Column\")\n\nplt.rcParams.update({'font.size': 22})\n\n# for a in zip(*a):\n#   print(a)","40226042":"df2.head(3)","6ae4bacb":"logic = df2['Operator'].str.contains(\"Military\")\n\ndf2[\"Is Military?\"] = logic","212c16a1":"df2.head(3)","474317e6":"df2['Is Military?'].value_counts()","184bde3c":"\n\ndf2['Is Military?'].value_counts().plot(kind='bar')\n","c89f231c":"#defininf function for split\n\ndef split_country(x):\n  a = x.split(\",\")[-1]\n  return a.replace(\" \", \"\")\n\n\n#df2['Location'].apply(split_country) ","6e98b819":"df2['Location'].isna().value_counts()","84545565":"df2[df2['Location'].isna()==True]","39d3a651":"df2.dropna(inplace=True, subset=['Location'])","cbcaeb01":"df2['Location'].isna().value_counts()","76a789e2":"df2['Country'] = df2['Location'].apply(split_country)","b03e8d22":"df2.head(3)","07f4c674":"x = \"Alabama, Alaska, AmericanSamoa, Arizona, Arkansas, California, Colorado, Connecticut, Delaware, DistrictofColumbia, Florida, Georgia, Guam, Hawaii, Idaho, \\\nIllinois, Indiana, Iowa, Kansas, Kentucky, Louisiana, Maine, Maryland, Massachusetts, Michigan, Minnesota, Minor OutlyingIslands, Mississippi, Missouri, Montana, \\\nNebraska, Nevada, NewHampshire, NewJersey, NewMexico, NewYork, NorthCarolina, NorthDakota, NorthernMarianaIslands, Ohio, Oklahoma, Oregon, Pennsylvania, PuertoRico,\\\n Rhode Island, South Carolina, South Dakota, Tennessee, Texas, U.S.VirginIslands, Utah, Vermont, Virginia, Washington, West Virginia, Wisconsin, Wyoming\"\nx=x.split(\", \")\nx=pd.Series(x)\n\n","789c1191":"indices = df2['Country'].isin(x)\n\n\ndf2.loc[indices ,'Country'] = 'USA'\ndf2.head()","e5fe92fb":"df2['Date'] = pd.to_datetime(df2['Date'])\ndf2[\"Year\"] = df2['Date'].apply(lambda x: x.year)\ndf2.head()\n","0e57f37d":"#@title Military vs non-military crashes\n\ndf2['Is Military?'].value_counts().plot(kind='barh', title='Military vs non-military crashes', figsize=(10,10), fontsize=12)","208375a4":"#@title Fatalities per crash\n# df2['Is Military?'].value_counts()\n\ndf2.groupby(['Is Military?'])['Fatalities'].mean().plot(kind='barh', title = 'Fatalities per crash', figsize=(10,10), fontsize=12)","9baedcac":"#@title Top 15 countries by crash locations\ndf2['Country'].value_counts()[:15].plot(kind='barh',  figsize=(20,10), rot=20, fontsize=22, title=\"Top 15 countries by crash locations\")\n","105cbe42":"#@title Top 15 locations by FPC\ndf2.groupby(['Country'], sort=True)['Fatalities'].mean().sort_values(ascending=False)[:15].plot(kind='barh', figsize=(20,10), rot=20, fontsize=22, title=\"Top 15 locations by FPC\")\n# g.sort_index()\n","1733dab9":"subc = df2['Country'].value_counts()[:20]\nsubc.head()","7290b4a1":"subfpc = df2.groupby(['Country'], sort=True)['Fatalities'].mean()\nsubfpc.shape","67f3a5fb":"logic = subfpc.index.isin(subc.index)\nlogic\nsubfpc[logic]","14d54f5c":"subc = pd.DataFrame(subc)\nsubfpc = pd.DataFrame(subfpc)","99a07293":"df = subc.join(subfpc[logic], how=\"inner\")\ndf.rename(columns={'Country':'Crashes', 'Fatalities':'FPC'}, inplace=True)\ndf.plot(kind='barh', figsize=(20,10), fontsize=20, rot=30)","897affbc":"#@title Top 20 Crash locations by no.of crashes\nsubc = df2['Country'].value_counts()[:20]\n\nsubfpc = df2.groupby(['Country'])['Fatalities'].mean().sort_values(ascending=False)\n\n\nlogic = subfpc.index.isin(subc.index)\n\nsubc = pd.DataFrame(subc)\nsubfpc = pd.DataFrame(subfpc)\n\n\n\ndf = subc.join(subfpc[logic], how=\"inner\")\ndf.rename(columns={'Country':'Crashes', 'Fatalities':'FPC'}, inplace=True)\n# df.plot(kind='barh', figsize=(20,10), fontsize=11, rot=30, title=\"Top 20 Flight type by FPC\")\nplt.rcParams.update({'font.size': 22})\n\n\nfig = plt.figure(figsize=(20,15)) # Create matplotlib figure\n\n\n\nax = fig.add_subplot(111) # Create matplotlib axes\nax2 = ax.twiny() # Create another axes that shares the same x-axis as ax.\n# plt.figure(figsize=(20,20))\n\n\nwidth = 0.4\nplt.title(\" Top 20 Crash locations by no.of crashes\")\n\ndf.FPC.plot(kind='barh', color='orange', ax=ax, width=width, position=1, label=\"FPC\")\ndf.Crashes.plot(kind='barh', color='blue', ax=ax2, width=width, position=0, label=\"Crashes\")\n# plt.legend(loc=\"upper right\")\n\nax.set_xlabel('FPC', color='orange')\nax.tick_params(axis='x', colors='orange')\nax2.set_xlabel('Crashes', color='blue')\nax2.tick_params(axis='x', colors='blue')\n\nplt.show()\n","7e705406":"#@title Top 20 Crash locations by FPC\nsubc = df2['Country'].value_counts()\n\nsubfpc = df2.groupby(['Country'])['Fatalities'].mean().sort_values(ascending=False)[:20]\n\n\nlogic = subc.index.isin(subfpc.index)\n\nsubc = pd.DataFrame(subc)\nsubfpc = pd.DataFrame(subfpc)\n\n\n\ndf = subfpc.join(subc[logic], how=\"inner\")\ndf.rename(columns={'Country':'Crashes', 'Fatalities':'FPC'}, inplace=True)\n# df.plot(kind='barh', figsize=(20,10), fontsize=11, rot=30, title=\"Top 20 Flight type by FPC\")\nplt.rcParams.update({'font.size': 22})\n\n\nfig = plt.figure(figsize=(20,15)) # Create matplotlib figure\n\n\n\nax = fig.add_subplot(111) # Create matplotlib axes\nax2 = ax.twiny() # Create another axes that shares the same x-axis as ax.\n# plt.figure(figsize=(20,20))\n\n\nwidth = 0.4\nplt.title(\" Top 20 Crash locations by FPC\")\ndf.FPC.plot(kind='barh', color='orange', ax=ax, width=width, position=1)\ndf.Crashes.plot(kind='barh', color='blue', ax=ax2, width=width, position=0)\n\n\n\nax.set_xlabel('FPC', color='orange')\nax.tick_params(axis='x', colors='orange')\nax2.set_xlabel('Crashes', color='blue')\nax2.tick_params(axis='x', colors='blue')\n\nplt.legend()\nplt.show()\n","4ec54470":"#@title Top 10 Operators by no.of crashes\nsubc = df2['Operator'].value_counts()[:10]\n\nsubfpc = df2.groupby(['Operator'])['Fatalities'].mean().sort_values(ascending=False)\n\n\nlogic = subfpc.index.isin(subc.index)\n\nsubc = pd.DataFrame(subc)\nsubfpc = pd.DataFrame(subfpc)\n\n\n\ndf = subc.join(subfpc[logic], how=\"inner\")\ndf.rename(columns={'Operator':'Crashes', 'Fatalities':'FPC'}, inplace=True)\n# df.plot(kind='barh', figsize=(20,10), fontsize=11, rot=30, title=\"Top 20 Flight type by FPC\")\nplt.rcParams.update({'font.size': 22})\n\n\nfig = plt.figure(figsize=(20,15)) # Create matplotlib figure\n\n\n\nax = fig.add_subplot(111) # Create matplotlib axes\nax2 = ax.twiny() # Create another axes that shares the same x-axis as ax.\n# plt.figure(figsize=(20,20))\n\n\nwidth = 0.4\nplt.title(\" Top 10 Operators by no.of crashes\")\n\ndf.FPC.plot(kind='barh', color='orange', ax=ax, width=width, position=1, label=\"FPC\")\ndf.Crashes.plot(kind='barh', color='blue', ax=ax2, width=width, position=0, label=\"Crashes\")\n# plt.legend(loc=\"upper right\")\n\nax.set_xlabel('FPC', color='orange')\nax.tick_params(axis='x', colors='orange')\nax2.set_xlabel('Crashes', color='blue')\nax2.tick_params(axis='x', colors='blue')\n\nplt.show()\n","009e3ce5":"#@title Top 10 Operators by FPC\nsubc = df2['Operator'].value_counts()\n\nsubfpc = df2.groupby(['Operator'])['Fatalities'].mean().sort_values(ascending=False)[:10]\n\n\nlogic = subc.index.isin(subfpc.index)\n\nsubc = pd.DataFrame(subc)\nsubfpc = pd.DataFrame(subfpc)\n\n\n\ndf = subfpc.join(subc[logic], how=\"inner\")\ndf.rename(columns={'Operator':'Crashes', 'Fatalities':'FPC'}, inplace=True)\n# df.plot(kind='barh', figsize=(20,10), fontsize=11, rot=30, title=\"Top 20 Flight type by FPC\")\nplt.rcParams.update({'font.size': 22})\n\n\nfig = plt.figure(figsize=(20,15)) # Create matplotlib figure\n\n\n\nax = fig.add_subplot(111) # Create matplotlib axes\nax2 = ax.twiny() # Create another axes that shares the same x-axis as ax.\n# plt.figure(figsize=(20,20))\n\n\nwidth = 0.4\nplt.title(\" Top 10 Operators by FPC\")\n\ndf.FPC.plot(kind='barh', color='orange', ax=ax, width=width, position=1, label=\"FPC\")\ndf.Crashes.plot(kind='barh', color='blue', ax=ax2, width=width, position=0, label=\"Crashes\")\n# plt.legend(loc=\"upper right\")\n\nax.set_xlabel('FPC', color='orange')\nax.tick_params(axis='x', colors='orange')\nax2.set_xlabel('Crashes', color='blue')\nax2.tick_params(axis='x', colors='blue')\n\nplt.show()\n","392de3b7":"# df2.groupby(['Operator'])['Fatalities'].mean().sort_values(ascending=False)[:20]\n# df2[df2['Operator']==\"Pan American World Airways \/ KLM\"]","40b0cc63":"#@title Top 10 Airliners by no. of crashes\nsubc = df2['Type'].value_counts()[:10]\n\nsubfpc = df2.groupby(['Type'])['Fatalities'].mean().sort_values(ascending=False)\n\n\nlogic = subfpc.index.isin(subc.index)\n\nsubc = pd.DataFrame(subc)\nsubfpc = pd.DataFrame(subfpc)\n\n\n\ndf = subc.join(subfpc[logic], how=\"inner\")\ndf.rename(columns={'Type':'Crashes', 'Fatalities':'FPC'}, inplace=True)\n# df.plot(kind='barh', figsize=(20,10), fontsize=11, rot=30, title=\"Top 20 Flight type by FPC\")\nplt.rcParams.update({'font.size': 22})\n\nfig = plt.figure(figsize=(20,15)) # Create matplotlib figure\n\n\n\nax = fig.add_subplot(111) # Create matplotlib axes\nax2 = ax.twiny() # Create another axes that shares the same x-axis as ax.\n# plt.figure(figsize=(20,20))\n\n\nwidth = 0.4\ndf.FPC.plot(kind='barh', color='orange', ax=ax, width=width, position=1)\ndf.Crashes.plot(kind='barh', color='blue', ax=ax2, width=width, position=0)\n\n\nax.set_xlabel('FPC', color='orange')\nax.tick_params(axis='x', colors='orange')\nax2.set_xlabel('Crashes', color='blue')\nax2.tick_params(axis='x', colors='blue')\n\nplt.legend()\nplt.title(\"Top 10 Airliners by no. of crashes\")\nplt.show()\n\n","10a1150e":"#@title Top 10 Airliners by highest FPC\nsubc = df2['Type'].value_counts()\n\nsubfpc = df2.groupby(['Type'])['Fatalities'].mean().sort_values(ascending=False)[:10]\n\n\nlogic = subc.index.isin(subfpc.index)\n\nsubc = pd.DataFrame(subc)\nsubfpc = pd.DataFrame(subfpc)\n\n\n\ndf = subfpc.join(subc[logic], how=\"inner\")\ndf.rename(columns={'Type':'Crashes', 'Fatalities':'FPC'}, inplace=True)\n# df.plot(kind='barh', figsize=(20,10), fontsize=11, rot=30, title=\"Top 20 Flight type by FPC\")\nplt.rcParams.update({'font.size': 24})\n\nfig = plt.figure(figsize=(20,15)) # Create matplotlib figure\n\n\n\nax = fig.add_subplot(111) # Create matplotlib axes\nax2 = ax.twiny() # Create another axes that shares the same x-axis as ax.\n# plt.figure(figsize=(20,20))\n\n\nwidth = 0.4\ndf.FPC.plot(kind='barh', color='orange', ax=ax, width=width, position=1)\ndf.Crashes.plot(kind='barh', color='blue', ax=ax2, width=width, position=0)\n\nax.set_xlabel('FPC', color='orange')\nax.tick_params(axis='x', colors='orange')\nax2.set_xlabel('Crashes', color='blue')\nax2.tick_params(axis='x', colors='blue')\n\nplt.legend()\nplt.title(\"Top 10 Airliners by highest FPC\")\nplt.show()\n\n\n","4b99dbe5":"#@title Top 10 Routes by no.of crashes\nsubc = df2['Route'].value_counts()[:10]\n\nsubfpc = df2.groupby(['Route'])['Fatalities'].mean().sort_values(ascending=False)\n\n\nlogic = subfpc.index.isin(subc.index)\n\nsubc = pd.DataFrame(subc)\nsubfpc = pd.DataFrame(subfpc)\n\n\n\ndf = subc.join(subfpc[logic], how=\"inner\")\ndf.rename(columns={'Route':'Crashes', 'Fatalities':'FPC'}, inplace=True)\n# df.plot(kind='barh', figsize=(20,10), fontsize=11, rot=30, title=\"Top 20 Flight type by FPC\")\nplt.rcParams.update({'font.size': 22})\n\n\nfig = plt.figure(figsize=(20,15)) # Create matplotlib figure\n\n\n\nax = fig.add_subplot(111) # Create matplotlib axes\nax2 = ax.twiny() # Create another axes that shares the same x-axis as ax.\n# plt.figure(figsize=(20,20))\n\n\nwidth = 0.4\nplt.title(\" Top 10 Routes by no.of crashes\")\n\ndf.FPC.plot(kind='barh', color='orange', ax=ax, width=width, position=1, label=\"FPC\")\ndf.Crashes.plot(kind='barh', color='blue', ax=ax2, width=width, position=0, label=\"Crashes\")\n# plt.legend(loc=\"upper right\")\n\nax.set_xlabel('FPC', color='orange')\nax.tick_params(axis='x', colors='orange')\nax2.set_xlabel('Crashes', color='blue')\nax2.tick_params(axis='x', colors='blue')\n\nplt.show()\n","70eb9749":"#@title Top 10 Routes by FPC\nsubc = df2['Route'].value_counts()\n\nsubfpc = df2.groupby(['Route'])['Fatalities'].mean().sort_values(ascending=False)[:10]\n\n\nlogic = subc.index.isin(subfpc.index)\n\nsubc = pd.DataFrame(subc)\nsubfpc = pd.DataFrame(subfpc)\n\n\n\ndf = subfpc.join(subc[logic], how=\"inner\")\ndf.rename(columns={'Route':'Crashes', 'Fatalities':'FPC'}, inplace=True)\n# df.plot(kind='barh', figsize=(20,10), fontsize=11, rot=30, title=\"Top 20 Flight type by FPC\")\nplt.rcParams.update({'font.size': 24})\n\n\nfig = plt.figure(figsize=(20,15)) # Create matplotlib figure\n\n\n\nax = fig.add_subplot(111) # Create matplotlib axes\nax2 = ax.twiny() # Create another axes that shares the same x-axis as ax.\n# plt.figure(figsize=(20,20))\n\n\nwidth = 0.4\nplt.title(\" Top 10 Routes by FPC\")\n\ndf.FPC.plot(kind='barh', color='orange', ax=ax, width=width, position=1, label=\"FPC\")\ndf.Crashes.plot(kind='barh', color='blue', ax=ax2, width=width, position=0, label=\"Crashes\")\n# plt.legend(loc=\"upper right\")\n\nax.set_xlabel('FPC', color='orange')\nax.tick_params(axis='x', colors='orange')\nax2.set_xlabel('Crashes', color='blue')\nax2.tick_params(axis='x', colors='blue')\n\nplt.show()\n","1384e1e3":"#@title Crashes vs FPC over the Years\n\n\na = df2.groupby('Year').size()\na=pd.DataFrame(a)\na.rename(columns={0: 'Crashes'}, inplace=True)\n\nb = df2.groupby('Year')['Fatalities'].mean()\nb=pd.DataFrame(b)\nb.rename(columns={'Fatalities': 'FPC'}, inplace=True)\n\n\n# a=a.reset_index()\n# b=b.reset_index()\n\ndf = b.join(a, how='inner', on='Year')\n\n\nfig = plt.figure(figsize=(20, 10))\nax = fig.add_subplot(111)\n\ncolor = 'tab:blue'\nax.set_ylabel('Crashes', color=color)\nax.tick_params(axis='y', labelcolor=color)\nax.plot(df.index, df['Crashes'], color=color)\n\nax1 = ax.twinx()\n\ncolor = 'tab:red'\nax1.set_ylabel('FPC', color=color)\nax1.tick_params(axis='y', labelcolor=color)\nax1.plot(df.index, df['FPC'], color=color)\n\n\nplt.title(\"Crashes vs FPC over the Years\")\nplt.show()\n\n","2f92f64e":"#@title Military vs Non-Military crashes\n\n\na = df2[df2[\"Is Military?\"]==True].groupby('Year').size()\na=pd.DataFrame(a)\na.rename(columns={0: 'Military crashes'}, inplace=True)\n\nb = df2[df2[\"Is Military?\"]==False].groupby('Year').size()\nb=pd.DataFrame(b)\nb.rename(columns={0: 'Non-Military crashes'}, inplace=True)\nb\n\n\n# a=a.reset_index()\n# b=b.reset_index()\n\ndf = b.join(a, how='inner', on='Year')\n\n\nfig = plt.figure(figsize=(20, 10))\nax = fig.add_subplot(111)\n\ncolor = 'tab:red'\nax.set_ylabel('Military crashes', color=color)\nax.tick_params(axis='y', labelcolor=color)\nax.plot(df.index, df['Military crashes'], color=color)\n\nax1 = ax.twinx()\n\ncolor = 'tab:green'\nax1.set_ylabel('Non-Military crashes', color=color)\nax1.tick_params(axis='y', labelcolor=color)\nax1.plot(df.index, df['Non-Military crashes'], color=color)\n\n\nplt.title(\"Military vs Non-Military crashes\")\nplt.show()\n\n","b32bbed1":"#@title Military vs Non-Military FPC\n\n\na = df2[df2[\"Is Military?\"]==True].groupby('Year')['Fatalities'].mean()\na=pd.DataFrame(a)\na.rename(columns={'Fatalities': 'Military FPC'}, inplace=True)\n\nb = df2[df2[\"Is Military?\"]==False].groupby('Year')['Fatalities'].mean()\nb=pd.DataFrame(b)\nb.rename(columns={'Fatalities': 'Non-Military FPC'}, inplace=True)\nb\n\n\n# a=a.reset_index()\n# b=b.reset_index()\n\ndf = b.join(a, how='inner', on='Year')\n\n\nfig = plt.figure(figsize=(20, 10))\nax = fig.add_subplot(111)\n\ncolor = 'tab:red'\nax.set_ylabel('FPC')\nax.tick_params(axis='y')\nax.plot(df.index, df['Military FPC'], color=color, label=\"Military\")\n\n# ax1 = ax.twinx()\n\ncolor = 'tab:green'\nax.plot(df.index, df['Non-Military FPC'], color=color, label=\"Non-Military\")\n\n\nplt.title(\"Military vs Non-Military FPC\")\nplt.legend()\nplt.show()\n\n\n","1da415c6":"# **Level 1 analysis**","c7a13a91":"***Observations***:\n\n- We see that ***both crashes are FCP are in a downward trend since around 1980s.***\n- We can investigate the difference betwee ***1960's - 80's*** and ***1980 - onwards***, to see why the crashes and FPC was upward and then downwards.","390a8a42":"# Extracting information about year of crash\n\nWe can populate year from the \"Date\" column separately and investigate any chronological patterns in the data.","0d0c6b43":"##**Operator**","ea637c8b":"## Applying \"Country\" logic:","71c17254":"Observations:\n\n- We can check the spikes at 1935, 1990 and 2002 for Military operators.\n\n- Apart fromt the spikes, the FPC for both Military and non-Military Operators ***are in a downward trend since ~1985.***","b34e6faf":"As said before - we see a lot of US states in the data - we can still further group these into single \"USA\" variable. \n\nWe copy paste the list of states from internet and then apply Series.isin operation to assign 'USA' value.","3ab8fadc":"**Historical Plane Crashes**\n\n\nThe aim of this project is to have a better understanding of the data. We explore the data and try to find some substantial patterns. \n\nIn order to have a strcutural approach in the analysis - we ask ourselves questions during the exploration phase and try to logically explain the observed trends. \n\n***Note: we will not try to generalise the answers, but only explain what is the data trying to show us.***\n\n\n Let us start by getting set up with our favorite libraries ","ad5b51a9":"##**Type**","49aaaa23":"~85% crashes are non-military - maybe we can explore and see if there are eny more interesting patterns","92260217":"### **Observations**\n\nWe observe that:\n- ***large number of crashes do no necessary mean large FPC values***. In such cases, the flight may be carrying large number of people aboard (like long haul passenger planes). \n- ***Further investigate EastGermany and Canary islands***, because the no.of crashes are higher than other locations in the group.\n\n- USA has most number of crashes, but this might be because ***USA has the most busiest airports*** (from wikipedia).\n","fb39bc32":"Calculating the FPC by countries and only selecting the required countries.","68678327":"We can repeat the same excercise as conducted in \"Country\" and see FPC for top 20 operators by highes number of crashes.","e90ba0ba":"**Decision**\n\nas the missing values are very small part of data - we can remove the missing values and continue analysis of \"Location\" of plane crashes.\n\nDropping NA:","b80edb3c":"Let us look at the datatypes in each column before proceeding to look at the data:","d674b208":"# Birds-eye Approach\n\nIt is always good to start from a \"higher-view\" and then gradually move into deeper analysis. For the sake of simplicity and making our analysis fruitful, let us define two characteristics of the the data - \n1. ***Dimensions***: are variables in the context of analysis\n2. ***Measures***: the change in these values, changes the \"measure\" \n\nYou can observe that this approach is similar to the coordinate geometry analogy (dimensions and values at a coordinate).\n\nLogically speaking, we can \"measure\" 2 things from the data :\n\n1. *Crashes*\n2. *Fatalities*\n\nNow these measures can be a function of one or many dimensions. In the first part of the analysis, we will look at the following dimensions individually:\n\n1. *Is Military?*\n2. *Country*\n3. *Operator*\n4. *Type*\n5. *Route*\n\nIn the first part, we explore basic questions such as: ***Is there a pattern between Military flights and fatalities?***. This way we start off from a birds-eye view and move towards deeper patterns between different dimensions.\n\nIn the higher levels, we can explore the relationship between groups of dimensions agaisnt the measures. In higher levels, we can answer questions\/ hypothesis such as : ***Is there a pattern between Military plane and Operators in terms of fatalities per crash?***","b69f0b9c":"## **Year**","4d7bd5a4":"**Inner join and plot:**","067765c4":"##**Country**","fa64237c":"# \"Is Military?\" Column \n\n **Make a new column for military or non-military Operators**","7aa51435":"### **Observations**\n\nWe observe that ***fatalities per crash (FPC)*** for military crashes is *higher than* non-military crashes. We can explore further and understand why this is the case. \n\n***Do the composition of non-military have higher percentage of commercial flights?*** Because, intuitively, passenger flights would have a higher FPC ratio when compared to military flights. ","66a9f192":"We see that on the country level, the ***countries with high number of crashes do not necessarily correspond to high FPC***. \n\nIn order to get a clearer picture, we will ***calculate the FPC for top 20 countries by no. of crashes.***\n\nSelcting top 20 countries by crashes:","3a811f2a":"## How many military planes?\n","70f2b31f":"Joing this data and viewing together","4e733a26":"# Creating \"Country\" column from \"Location\" column\n\nData analysis always involves wrangling and churning existing data to give a new meaningful perspective.\n\nWe can separate the Location by \",\" and have the last entry as country. \n\nHere, we also observe that we have states from USA - we can group them as one later.","284562ea":"## Why removing NaN values is important for apply method\n\nIf we remove the comment from the above code - we get an error, this is because there are missing value present inside df\\[\"Location\"]. Hence, let us quickly analyse to see the extent of missing values inside \"Location\":","8c0f1346":"### **Observations**\n\n- Here too, We can observe that in high FPC cases, the number of crashes are usually single digit. This means the ***flight was carrying large number of people aboard***. In such scenarios, just one crash results in high number of fatalities.\n\n- Investgate ***Douglas DC-3*** deeper, as the number of crashes are higher than other airliners.","7ed9fa47":"### **Higher level investigation ideas:**\n\n\n\nwhy usa has higher crashes?\n\n- is it military or commercial?\n\n- is something strange with no.of crashes or FPC?\n\n- is there any cluster about the years in which the crashes occur\n\nCanary islands and east germany have quite significant number of crashes \n\n- see why so?\n\n- passenger planes, but any more information?","0c84e498":"We will define a function which splits the string of \"Location\" and take the last value:","9b3d7150":"Checking for NA values in data","12a66853":"# Quick observations\n\n- Right off the bat we can see that there some missing values present. \n- In the \"**Location**\" column, we can find information about countries - maybe we can extract some info from there. \n- Another interesting approach is to extract *Military vs non-Military* information from the \"**Operator**\" column\n- There is also a possibilty of applying regex on \"**Summary**\" column and extracting information about the crashes.\n- Route column appears to be be inconsistent intuitively - but we can still try to get useful information","9d816a04":"### **Observations**\n\n\n***1.*** ***The FPC for passenger\/commercial operators such as American Airlines, PANAM and Aeroflot is higher than the Military Operators.***\n\nThere are some key points to note before generalising.\n- Commercial and passenger planes might have higher frequency of crashes because the ***frequency of total flights is higher***. (We do not have this data available in the dataset, but it would have given a much clearer picture)\n\n- At the same time, ***passenger planes carry much more people***. So, even if the crashes are fewer compared to total flights, the FPC increase because of the number of people on board.\n\n- We can verify this by looking at \"US Aerial mail service\" and \"Aeropostale\". Even though the number of crashes are in top-15 figures, the FPC value is lesser because the ***number of people on board are fewer***.\n\n\n\n\n***2.*** ***High FPC operators generally have single digit crashes in contrast to high FPC***. \nThis intuitively makes sense because one crash of a large passenger plane will result in large number of fatalities. For example, the ***Pan American World Airways \/ KLM*** disaster included two boeing 747s and resulted in 583 fatalities.","ad150426":"**Further analysis**\n\n- We need to dive deeper and verify the hypothesis about FPC correlating with passenger planes.\n\n- We also need to dive deeper and analyse Aeroflot, because it looks equally dangerous as US Air force in terms of both FPC and no.of crashes.","db4adb8d":"## Applying \"USA\" logic","a7827146":"## **Route**","fca78e79":"In a similar way - we can slice ***top-20 FPC countries*** and see how the crashes compare:","a6cf07c9":"To better analyse the data, we can separate the FPC and crashes axis. By doing so we get the following:","01b083bc":"##**Military** ","e264d53a":"there are 20 missing values inside the \"Location\" column - let us look at the data and decide what is the best approach:","2b3c8712":"Let us see how the number of ***crashes*** and ***FPC*** (Fatalities per crash) evolve over the years:","dec9b1df":"# Data types and missing values","7c16c118":"Obervations:\n\n- We actually see something interesting: ***between 1970's - 80s***, the crashes for Military were going down and non-military were going up. We can try seeing if there is something to explore here.\n\n- After ***80's***, for both Military and non-Military, ***the number of crashes are in a steady decline***.\n\n- We can investigate the spike around ***1944\/45.***","4e926dd5":"**Observations**\n\n- ***The number of crashes in USA are the highest, but the FPC is not the highest***. We need to investigate and see what is the reason here?\n- Looking at USSR (and incidently also Russia) we can see that ***both crashes and FPC are relatively higher***. We need to dive deeper and investigate further.","c9310bc4":"**Quick glance at the data**","51b4ffd4":"# Importing the libraries","ad8f76e7":"quick verification:","9d6a77bb":"**Defining a function for \"apply operation\"**\n\nWe will define a fucntion and then use the DataFrame.apply method():"}}