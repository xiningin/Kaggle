{"cell_type":{"cbc72023":"code","b6e4c4fe":"code","79355a67":"code","1d756734":"code","df1804d0":"code","2e615391":"code","83dca042":"code","4052fbaa":"code","89e9e1a9":"code","9f82b231":"code","3c43102f":"code","53a5df35":"code","56425cc9":"code","d1856eb1":"code","e7578202":"code","8ac6dd4f":"code","33c428c5":"code","0c69f493":"code","fd6807ed":"code","9b7e1608":"code","89fa5d44":"code","2c7acf50":"code","65ec045c":"code","c03a4d1b":"code","b450dcc4":"code","7d8eddcc":"code","3b8fb209":"code","924b85c2":"code","975de4df":"code","30445f38":"code","f107bb13":"code","93257e77":"code","8a3ae6e5":"code","79ee4d0b":"code","cc614155":"code","9206f933":"code","787e06ec":"code","c1a649e4":"code","42529313":"code","a3acdd65":"code","0ac42db7":"code","3a54ea7d":"code","0df9fcab":"code","2b2b4508":"code","47b2866e":"code","ff4c6d83":"markdown","6c30372a":"markdown","fecd4ecd":"markdown","d5b3ab11":"markdown","f4b4753a":"markdown","7e4d7e93":"markdown","4ea7cdee":"markdown","3e5e3706":"markdown","8876c459":"markdown","7e81362d":"markdown","80980be3":"markdown","ef26aa5f":"markdown","67ed8803":"markdown"},"source":{"cbc72023":"import os\nfor dirname, _, filenames in os.walk('\/kaggle\/input'):\n    for filename in filenames:\n        print(os.path.join(dirname, filename))\n        \n#importing necessary libraries\nimport pandas as pd\nimport numpy as np\n\n\nimport matplotlib.pyplot as plt\nimport seaborn as sns\n# to show the figures in the jupyter notebook itself\n%matplotlib inline     ","b6e4c4fe":"train = pd.read_csv('\/kaggle\/input\/bike-sharing-system-washington-dc\/train_bikes.csv', parse_dates=['datetime']) # loading the training data\n\ntrain.head()","79355a67":"train.tail() # looking at the training data from end","1d756734":"train.plot.scatter(x = 'season', y = 'count') # plotting the counts based on the season","df1804d0":"train.plot.scatter(x = 'holiday', y = 'count') # plotting the counts based on the holidays","2e615391":"train.plot.scatter(x = 'workingday', y = 'count') # plotting the counts based on working day","83dca042":"train.plot.scatter(x = 'weather', y = 'count') # plotting the counts based on the weather","4052fbaa":"train.plot.scatter(x = 'temp', y = 'count') # plotting the counts based on the temparature","89e9e1a9":"train.plot.scatter(x = 'atemp', y = 'count') # plotting the counts based on atemp","9f82b231":"train.plot.scatter(x = 'humidity', y = 'count')# plotting the counts based on humidity","3c43102f":"train.plot.scatter(x = 'windspeed', y = 'count') # plotting the counts based on windspeed","53a5df35":"train.plot.scatter(x = 'casual', y = 'count')# plotting the counts based casual user","56425cc9":"train.info() # observing the data types of the columns","d1856eb1":"train.describe() ","e7578202":"test = pd.read_csv('\/kaggle\/input\/bike-sharing-system-washington-dc\/test_bikes.csv') # loading the test data","8ac6dd4f":"test.head()  #looking at the 1st 5 rows of the test data","33c428c5":"test.tail() # last 5 rows of the test data","0c69f493":"test.info() # observing the data types of the columns for test data","fd6807ed":"test.describe() ","9b7e1608":"!pip install pandas-profiling","89fa5d44":"import pandas_profiling","2c7acf50":"train.profile_report()","65ec045c":"print(\"count samples & features: \", train.shape) # printing the number of rows and columns\nprint(\"Are there missing values: \", train.isnull().values.any()) # printing if dataset has any NaN value","c03a4d1b":" def plot_by_hour(data, year=None, agg='sum'):\n    dd = data\n    if year: dd = dd[ dd.datetime.dt.year == year ]\n    dd.loc[:, ('hour')] = dd.datetime.dt.hour # extracting the hour data if the year in the data is equal to the year passed as argument\n    \n    by_hour = dd.groupby(['hour', 'workingday'])['count'].agg(agg).unstack() # groupby hour and working day\n    return by_hour.plot(kind='bar', ylim=(0, 80000), figsize=(15,5), width=0.9, title=\"Year = {0}\".format(year)) # returning the figure grouped by hour\n\n\nplot_by_hour(train, year=2011) # plotting the count plot based on hour for 2011 \nplot_by_hour(train, year=2012) # plotting the count plot based on hour for 2012","b450dcc4":" def plot_by_year(agg_attr, title):\n    # extracting the required fields\n    dd = train.copy()\n    dd['year'] = train.datetime.dt.year # extratcing the year\n    dd['month'] = train.datetime.dt.month # extratcing the month\n    dd['hour'] = train.datetime.dt.hour # extratcing the hour\n    \n    by_year = dd.groupby([agg_attr, 'year'])['count'].agg('sum').unstack() # groupby year\n    return by_year.plot(kind='bar', figsize=(15,5), width=0.9, title=title) # returning the figure grouped by year\n\n\nplot_by_year('month', \"Rent bikes per month in 2011 and 2012\") # plotting monthly bike rentals based on year\nplot_by_year('hour', \"Rent bikes per hour in 2011 and 2012\") # plotting hourls bike rentals based  on year","7d8eddcc":"def plot_hours(data, message = ''):\n    dd = data.copy()\n    dd['hour'] = data.datetime.dt.hour # extratcing the hour\n    \n    hours = {}\n    for hour in range(24):\n        hours[hour] = dd[ dd.hour == hour ]['count'].values\n\n    plt.figure(figsize=(20,10))\n    plt.ylabel(\"Count rent\")\n    plt.xlabel(\"Hours\")\n    plt.title(\"count vs hours\\n\" + message)\n    plt.boxplot( [hours[hour] for hour in range(24)] )\n    \n    axis = plt.gca()\n    axis.set_ylim([1, 1100])","3b8fb209":"plot_hours( train[train.datetime.dt.year == 2011], 'year 2011') # box plot for hourly count for the mentioned year\nplot_hours( train[train.datetime.dt.year == 2012], 'year 2012') # box plot for hourly count for the mentioned year","924b85c2":"dt = pd.to_datetime(train[\"datetime\"]) # converting the column to datetime for train dataset\ntrain[\"hour\"] = dt.map(lambda x: x.hour) # adding the hour column for train dataset\ntrain.head()","975de4df":"dt_test = pd.to_datetime(test[\"datetime\"]) # converting the column to datetime for test dataset\ntest[\"hour\"] = dt_test.map(lambda x: x.hour) # adding the hour column for test dataset\ntest.head()","30445f38":"plot_hours( train[train.workingday == 1], 'working day') # plotting hourly count of rented bikes for working days for a given year\nplot_hours( train[train.workingday == 0], 'non working day') # plotting hourly count of rented bikes for non-working days for a given year","f107bb13":"def categorical_to_numeric(x):\n    if 0 <=  x < 6:\n        return 0\n    elif 6 <= x < 13:\n        return 1\n    elif 13 <= x < 19:\n        return 2\n    elif 19 <= x < 24:\n        return 3","93257e77":"train['hour'] = train['hour'].apply(categorical_to_numeric)# applying the above conversion logic to training data\ntrain.head()\n","8a3ae6e5":"test['hour'] = test['hour'].apply(categorical_to_numeric) # applying the above conversion logic to test data\ntest.head()\n","79ee4d0b":"# drop unnecessary columns\n\ntrain = train.drop(['datetime'], axis=1)\ntest = test.drop(['datetime'], axis=1)","cc614155":"train.head()","9206f933":" figure,axes = plt.subplots(figsize = (10, 5))\nhours = train.groupby([\"hour\"]).agg(\"mean\")[\"count\"]  \nhours.plot(kind=\"line\", ax=axes) \nplt.title('Hours VS Counts')\naxes.set_xlabel('Time in Hours')\naxes.set_ylabel('Average of the Bike Demand')\nplt.show()","787e06ec":"# count of different temp values\na = train.groupby('temp')[['count']].mean()\na","c1a649e4":"a.plot()\nplt.show()","42529313":"# count of different atemp values\na = train.groupby('atemp')[['count']].mean()\na","a3acdd65":"a.plot()\nplt.show()","0ac42db7":"a = train.groupby('holiday')[['count']].mean()","3a54ea7d":"a.plot()\nplt.show()","0df9fcab":"# method to  select the features. If a feature is not in the blaklist, it gets selected\ndef select_features(data):\n    black_list = ['casual', 'registered', 'count', 'is_test', 'datetime', 'count_log']\n    return [feat for feat in data.columns if feat not in black_list]","2b2b4508":"# a method to show results of various model and their predictions\ndef _simple_modeling(X_train, X_test, y_train, y_test):\n    # sepcifying the model names\n    models = [\n        ('dummy-mean', DummyRegressor(strategy='mean')),\n        ('dummy-median', DummyRegressor(strategy='median')),\n        ('random-forest', RandomForestRegressor(random_state=0)),\n    ]\n    \n    results = []\n\n    for name, model in models:\n        model.fit(X_train, y_train)# fitting the training data to model\n        y_pred = model.predict(X_test) # doing predictions using the model\n        \n        results.append((name, y_test, y_pred)) # creating the list of predictions from various models\n        \n    return results\n\n# a method to return the performance metric of the model used in the above method\ndef simple_modeling(X_train, X_test, y_train, y_test):\n    results = _simple_modeling(X_train, X_test, y_train, y_test) # using the function defined above to caluclate the predictions\n    \n    return [ (r[0], rmsle(r[1], r[2]) ) for r in results] # returning the performance metrics","47b2866e":"from sklearn.ensemble import RandomForestRegressor\nfrom sklearn.model_selection import cross_val_score\nforest_reg = RandomForestRegressor(n_estimators=100) # instantiating the random Forest Regressor\n\nscore = cross_val_score(forest_reg, train, train, cv=4) # calcuating the cross validation score\nprint (score)\n","ff4c6d83":"**Generate descriptive statistics that summarize the central tendency,dispersion and shape of a dataset's distribution**","6c30372a":"### Method to plot a graph for count per hour","fecd4ecd":"### Count based on holiday","d5b3ab11":"**installing the pandas profiling library. It is used for a deeper understanding than the normal Dataframe.describe() method**","f4b4753a":"### An Hour bs Count Graph depicting average bike demand based on the hour","7e4d7e93":"# Test Data","4ea7cdee":"# Model fitting","3e5e3706":"### Method for creating the count plot based on hour for a given year","8876c459":"# Data Importing & Libraries","7e81362d":"### Method for creating the count plot based on year","80980be3":"**Generate descriptive statistics that summarize the central tendency,dispersion and shape of a dataset's distribution for test data**","ef26aa5f":"# Preprocessing","67ed8803":"# Train Data"}}