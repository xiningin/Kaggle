{"cell_type":{"4f5a41c7":"code","7dea465b":"code","c2f1e352":"code","4f40f859":"code","f93c7ca0":"code","5a913719":"code","c36a2e3e":"code","2415a4b4":"code","1196585b":"code","c43a8265":"code","ececc5d9":"code","f6f5dc7d":"code","95f6432f":"code","4c849bd5":"code","ffef31e4":"markdown","037d3913":"markdown","e1034010":"markdown","77f60775":"markdown","102ccaf5":"markdown","d57dc31b":"markdown","cf64ce82":"markdown","2955599b":"markdown","2b4d9d57":"markdown"},"source":{"4f5a41c7":"import numpy as np\nimport pandas as pd\nimport plotly.graph_objs as go\nfrom plotly.offline import init_notebook_mode, iplot, plot\nimport plotly.express as px\nfrom plotly.subplots import make_subplots\n\n# Input data files are available in the \"..\/input\/\" directory.\n# For example, running this (by clicking run or pressing Shift+Enter) will list all files under the input directory\nimport os\nfor dirname, _, filenames in os.walk('\/kaggle\/input'):\n    for filename in filenames:\n        print(os.path.join(dirname, filename))\n# Any results you write to the current directory are saved as output.\n\n#Loading database\nCOVID19_BR = pd.read_csv(\"..\/input\/corona-virus-brazil\/brazil_covid19.csv\")\n#Transforming data\nCOVID19_BR.date = pd.to_datetime(COVID19_BR.date)\nCOVID19_BR.hour = pd.to_datetime(COVID19_BR.hour, format='%H:%M').dt.time\nCOVID19_BR[\"Week_Number\"] = COVID19_BR.date.dt.week\n\n#Removing duplicated lines (when updated more than once a day)\nCOVID19_BR = COVID19_BR.drop_duplicates(subset=[\"date\",\"state\"], keep = \"last\")\n\n#Rename columns\nCOVID19_BR.columns = ['Date', 'Hour', 'State', 'Suspects', 'Negative', 'Confirmed', \"Deaths\",\"Week_Number\"]\n\n#reading data infos\nCOVID19_BR.info()","7dea465b":"temp = COVID19_BR.groupby('State', as_index=False)[\"Suspects\",\"Negative\",\"Confirmed\",\"Deaths\"].max()\nmsg = \"\"\"\nThis database contains the cases published by Ministry of Health over the time since the first case of COVID-19 in Brazil.\nThe first record in database was on \"\"\" + str(COVID19_BR.Date.dt.date.min()) + \"\"\" \nand the last record updated was on \"\"\" + str(COVID19_BR.Date.dt.date.max()) + \"\"\"\nUntil now, Ministry of Healthy has recorded \"\"\" + str(temp.Suspects.sum()) + \"\"\" suspects, the number of negative cases is \"\"\" + str(temp.Negative.sum()) + \"\"\", \"\"\" + str(temp.Confirmed.sum()) + \"\"\" were confirmed and \"\"\" + str(temp.Deaths.sum()) + \"\"\" deaths have been reported.\n\"\"\"\nprint(msg)","c2f1e352":"temp = COVID19_BR.groupby('Date', as_index=False)['Confirmed'].sum()\ntemp = temp[(temp.Confirmed>0)]\nx1 = temp.Date\ny1 = temp.Confirmed\ntemp = COVID19_BR.groupby('Date', as_index=False)['Deaths'].sum()\ntemp = temp[(temp.Deaths>0)]\nx2 = temp.Date\ny2 = temp.Deaths\n\nfig = make_subplots(rows=1, cols=2)\n\nfig.add_trace(    \n    go.Scatter(x = x1, y = y1, name = y1.name,\n                         line=dict(color='green', width=2)),\n    row=1, col=1\n)\n\nfig.add_trace(\n    go.Scatter(x = x2, y = y2, name = y2.name,\n                         line=dict(color='darkred', width=2)),\n    row=1, col=2\n)\n\nfig.update_layout({\n\"plot_bgcolor\": \"rgba(0, 0, 0, 0)\",\n\"paper_bgcolor\": \"rgba(0, 0, 0, 0)\",\n})\n\nfig.update_layout(title_text=\"Number of cases - COVID-19 in Brazil\")\n\nfig.show()\nprint(\"Data validation: https:\/\/veja.abril.com.br\/saude\/a-epidemia-de-coronavirus-no-brasil-em-tempo-real\/\")","4f40f859":"print(\"Cases per Brazilian State - sorted by Deaths\")\ntemp = COVID19_BR.groupby('State', as_index=False)[\"Suspects\",\"Negative\",\"Confirmed\",\"Deaths\"].max()\ntemp.sort_values(\"Deaths\",ascending = False).style.background_gradient(cmap='Reds')","f93c7ca0":"col = \"Suspects\"\ntemp = COVID19_BR.groupby('State', as_index=False)[col].max()\ntemp = temp[temp[col]>0]\n\nprint(\"Cases per Brazilian State -  \"+temp[col].name+\" Cases\")\n\nfig = px.bar(temp, x=\"State\", y=col, text=col)\nfig.update_layout(xaxis={'categoryorder':'total descending'})\nfig.update_layout(\n    title= \"COVID-19 - Number of \" + temp[col].name + \" cases in Brazilian States\")\nfig.update_layout({\n\"plot_bgcolor\": \"rgba(0, 0, 0, 0)\",\n\"paper_bgcolor\": \"rgba(0, 0, 0, 0)\",\n})\n\nfig.show()","5a913719":"col = \"Negative\"\ntemp = COVID19_BR.groupby('State', as_index=False)[col].max()\ntemp = temp[temp[col]>0]\n\nprint(\"Cases per Brazilian State -  \"+temp[col].name+\" Cases\")\n\nfig = px.bar(temp, x=\"State\", y=col, text=col)\nfig.update_layout(xaxis={'categoryorder':'total descending'})\nfig.update_layout(\n    title= \"COVID-19 - Number of \" + temp[col].name + \" cases in Brazilian States\")\nfig.update_layout({\n\"plot_bgcolor\": \"rgba(0, 0, 0, 0)\",\n\"paper_bgcolor\": \"rgba(0, 0, 0, 0)\",\n})\n\nfig.show()\n","c36a2e3e":"col = \"Confirmed\"\ntemp = COVID19_BR.groupby('State', as_index=False)[col].max()\ntemp = temp[temp[col]>0]\n\nprint(\"Cases per Brazilian State -  \"+temp[col].name+\" Cases\")\n\nfig = px.bar(temp, x=\"State\", y=col, text=col)\nfig.update_layout(xaxis={'categoryorder':'total descending'})\nfig.update_layout(\n    title= \"COVID-19 - Number of \" + temp[col].name + \" cases in Brazilian States\")\nfig.update_layout({\n\"plot_bgcolor\": \"rgba(0, 0, 0, 0)\",\n\"paper_bgcolor\": \"rgba(0, 0, 0, 0)\",\n})\n\nfig.show()\n","2415a4b4":"col = \"Deaths\"\ntemp = COVID19_BR.groupby('State', as_index=False)[col].max()\ntemp = temp[temp[col]>0]\n\nprint(\"Cases per Brazilian State -  \"+temp[col].name+\" Cases\")\n\nfig = px.bar(temp, x=\"State\", y=col, text=col)\nfig.update_layout(xaxis={'categoryorder':'total descending'})\nfig.update_layout(\n    title= \"COVID-19 - Number of \" + temp[col].name + \" cases in Brazilian States\")\nfig.update_layout({\n\"plot_bgcolor\": \"rgba(0, 0, 0, 0)\",\n\"paper_bgcolor\": \"rgba(0, 0, 0, 0)\",\n})\n\nfig.show()\n","1196585b":"temp = COVID19_BR.groupby('Date', as_index=False)['Suspects', 'Negative', 'Confirmed', 'Deaths'].sum()\ntemp.head()\nx1 = temp.Date\ny1 = temp.Suspects\ny2 = temp.Negative\ny3 = temp.Confirmed\ny4 = temp.Deaths\n\ntrace1 = go.Scatter(x = x1, y = y1, name = y1.name,\n                         line=dict(color='orange', width=2))\ntrace2 = go.Scatter(x = x1, y = y2, name = y2.name,\n                         line=dict(color='blue', width=2, dash='dot'))\ntrace3 = go.Scatter(x = x1, y = y3, name = y3.name,\n                         line=dict(color='green', width=2))\ntrace4 = go.Scatter(x = x1, y = y4, name = y4.name,\n                         line=dict(color='darkred', width=2))\ndata = [trace1, trace2, trace3, trace4]\nlayout = dict(title = 'Cases over time - COVID-19 in Brazil',\n              xaxis= dict(title= 'Date',ticklen= 5,zeroline= False),\n              yaxis= dict(title= 'Number of cases',ticklen= 5,zeroline= False),\n              plot_bgcolor='white'\n             )\nfig = dict(data = data, layout = layout)\n\niplot(fig)","c43a8265":"col = \"Suspects\"\n\nfig = go.Figure()\nfor name, group in COVID19_BR.groupby('State'):\n    #trace = go.Histogram()\n    trace = go.Scatter(x = group.Date, y = group[col])\n    trace.name = name\n#    trace.x = group.Deaths\n    fig.add_trace(trace)\n#fig.update_xaxes(title_text = \"Date\")\n#fig.update_yaxes(title_text = \"Number of cases\")\n\nfig.update_layout(\n    title=\"Cases over time - COVID-19 - \" + str(col) + \" cases in Brazilian States\",\n    xaxis_title=\"Date\",\n    yaxis_title=\"Number of cases - \" + temp[col].name\n)\n\nfig.update_layout({\n\"plot_bgcolor\": \"rgba(0, 0, 0, 0)\",\n\"paper_bgcolor\": \"rgba(0, 0, 0, 0)\",\n})\niplot(fig)\nprint(\"You are able to hide some lines here\")","ececc5d9":"col = \"Negative\"\n\nfig = go.Figure()\nfor name, group in COVID19_BR.groupby('State'):\n    #trace = go.Histogram()\n    trace = go.Scatter(x = group.Date, y = group[col])\n    trace.name = name\n#    trace.x = group.Deaths\n    fig.add_trace(trace)\n#fig.update_xaxes(title_text = \"Date\")\n#fig.update_yaxes(title_text = \"Number of cases\")\n\nfig.update_layout(\n    title=\"Cases over time - COVID-19 - \" + str(col) + \" cases in Brazilian States\",\n    xaxis_title=\"Date\",\n    yaxis_title=\"Number of cases - \" + temp[col].name\n)\n\nfig.update_layout({\n\"plot_bgcolor\": \"rgba(0, 0, 0, 0)\",\n\"paper_bgcolor\": \"rgba(0, 0, 0, 0)\",\n})\niplot(fig)\nprint(\"You are able to hide some lines here\")","f6f5dc7d":"col = \"Confirmed\"\n\nfig = go.Figure()\nfor name, group in COVID19_BR.groupby('State'):\n    #trace = go.Histogram()\n    trace = go.Scatter(x = group.Date, y = group[col])\n    trace.name = name\n#    trace.x = group.Deaths\n    fig.add_trace(trace)\n#fig.update_xaxes(title_text = \"Date\")\n#fig.update_yaxes(title_text = \"Number of cases\")\n\nfig.update_layout(\n    title=\"Cases over time - COVID-19 - \" + str(col) + \" cases in Brazilian States\",\n    xaxis_title=\"Date\",\n    yaxis_title=\"Number of cases - \" + temp[col].name\n)\n\nfig.update_layout({\n\"plot_bgcolor\": \"rgba(0, 0, 0, 0)\",\n\"paper_bgcolor\": \"rgba(0, 0, 0, 0)\",\n})\niplot(fig)\nprint(\"You are able to hide some lines here\")","95f6432f":"col = \"Deaths\"\n\nfig = go.Figure()\nfor name, group in COVID19_BR.groupby('State'):\n    #trace = go.Histogram()\n    trace = go.Scatter(x = group.Date, y = group[col])\n    trace.name = name\n#    trace.x = group.Deaths\n    fig.add_trace(trace)\n#fig.update_xaxes(title_text = \"Date\")\n#fig.update_yaxes(title_text = \"Number of cases\")\n\nfig.update_layout(\n    title=\"Cases over time - COVID-19 - \" + str(col) + \" cases in Brazilian States\",\n    xaxis_title=\"Date\",\n    yaxis_title=\"Number of cases - \" + temp[col].name\n)\n\nfig.update_layout({\n\"plot_bgcolor\": \"rgba(0, 0, 0, 0)\",\n\"paper_bgcolor\": \"rgba(0, 0, 0, 0)\",\n})\niplot(fig)\nprint(\"You are able to hide some lines here\")","4c849bd5":"print(\"Number States with confirmed cases over time\")\ntemp = COVID19_BR[[\"Date\",\"State\",\"Confirmed\"]].groupby(\"Date\", as_index=False)[\"State\"].count()\nx1 = temp.Date\ny1 = temp.State\n\ntrace1 = go.Scatter(x = x1, y = y1, name = y1.name)\ndata = [trace1]\nlayout = dict(title = 'Number States with confirmed cases over time - COVID-19 in Brazil',\n              xaxis= dict(title= 'Date',ticklen= 5,zeroline= False),\n              yaxis= dict(title= 'Number of states',ticklen= 5,zeroline= False),\n              plot_bgcolor='white'\n             )\nfig = dict(data = data, layout = layout)\n\niplot(fig)","ffef31e4":"**Introduction**\n\nThis is my first Python Notebook I am writing and sharing on Kaggle Platform.\nMy goal here is to practice my python programming and data science skills, also I have decided to learn how to use the Plotly Graphing Libraries (https:\/\/plot.ly\/graphing-libraries\/), of course I am going to try provide some insights I have found on this database about Coronavirus in Brazil.\nI think it is important to say that I have no medical background.\n\n**COVID-19 in Brazil**\n\nThis database is updated daily by Ministry of Health and contains the reported cases over the time since the first case of COVID-19 in Brazil.\n\nMany thanks Raphael Fontes who has prepared this dataset. I do recommend his article teaching how to get COVID-19 dataset from Brazilian Ministry of Health website.\n\nLinks:\n* [Raphael Fonte teaching how he prepared the dataset](http:\/\/https:\/\/medium.com\/mindstorm-%EF%B8%8F\/coletando-e-armazenando-os-n%C3%BAmeros-de-casos-do-coronav%C3%ADrus-no-brasil-73c4f5909514)\n* [COVID-19 - Brazil - Kaggle dataset](https:\/\/www.kaggle.com\/unanimad\/corona-virus-brazil)\n* [Original data source - Ministry of Health](http:\/\/plataforma.saude.gov.br\/novocoronavirus\/)\n* [Veja Abril Charts used for validation](https:\/\/veja.abril.com.br\/saude\/a-epidemia-de-coronavirus-no-brasil-em-tempo-real\/)\n\nNotes\/Questions:\nThere are dates where Suspects and Negative cases decrease over time, it is a weird behavior once the dataset is the accumulated of reported cases around Brazil (Veja website do not use these data)\n\nNext Step:\nWork on geo data","037d3913":"**Data overview**\n","e1034010":"In order to validate my analysis, I have made a comparison with Veja website. ","77f60775":"Table1 - Cases per Brazilian State","102ccaf5":"Chart - Cases over time in Brazilian States","d57dc31b":"**Importing Libraries and ETL process**","cf64ce82":"Bar Chart - Cases per Brazilian State","2955599b":"**Exploratory Data Analysis**","2b4d9d57":"Chart - Cases over time in Brazil\n> Suspects and Negative cases sometimes decrease over time."}}