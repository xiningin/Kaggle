{"cell_type":{"ee35c089":"code","f0867c5e":"code","cf7928ef":"code","b595e7fc":"code","434be19f":"code","14b78d35":"code","abcc53bc":"code","8c8f0b7b":"code","8fad7b6b":"code","ae422258":"markdown","870695ac":"markdown","d5968775":"markdown","08bb4aea":"markdown"},"source":{"ee35c089":"# This Python 3 environment comes with many helpful analytics libraries installed\n# It is defined by the kaggle\/python docker image: https:\/\/github.com\/kaggle\/docker-python\n# For example, here's several helpful packages to load in \n\nimport numpy as np\nimport pandas as pd\npd.plotting.register_matplotlib_converters()\nfrom datetime import datetime\nimport matplotlib.pyplot as plt\n%matplotlib inline\nimport seaborn as sns\nimport matplotlib.dates as mdates\n# This is used for fast string concatination\nfrom io import StringIO\n# Use nltk for valid words\nimport nltk\n# Need to make hash 'dictionaries' from nltk for fast processing\nimport collections as co\nfrom wordcloud import WordCloud\n\nimport warnings # current version of seaborn generates a bunch of warnings that we'll ignore\nwarnings.filterwarnings(\"ignore\")\n\n# Input data files are available in the \"..\/input\/\" directory.\n# For example, running this (by clicking run or pressing Shift+Enter) will list all files under the input directory\n\nimport os\nfor dirname, _, filenames in os.walk('\/kaggle\/input'):\n    for filename in filenames:\n        print(os.path.join(dirname, filename))\n\n# Any results you write to the current directory are saved as output.","f0867c5e":"comcast_data = pd.read_csv(\"\/kaggle\/input\/comcastcomplaints\/comcast_fcc_complaints_2015.csv\",parse_dates=True)\ncomcast_data.Date = pd.to_datetime(comcast_data.Date)","cf7928ef":"# Only interested in data with consumer complaints\ncustomer_compaints=comcast_data[comcast_data['Customer Complaint'].notnull()]\ns=StringIO()\ncustomer_compaints['Customer Complaint'].apply(lambda x: s.write(x))\n\nk=s.getvalue() # Array of words, with stop words removed\ns.close() # Concatinated string of all comments\nk=k.lower()\nk=k.split()\nwords = co.Counter(nltk.corpus.words.words())\n# removing most commonly used words from strings\nstopWords =co.Counter( nltk.corpus.stopwords.words() )\nk=[i for i in k if i in words and i not in stopWords]\ns=\" \".join(k)\nc = co.Counter(k) # Collection of words","b595e7fc":"# Top 10 most common words\nc.most_common(10)","434be19f":"# Read the whole text.\ntext = s\n# Generate a word cloud image\nwordcloud = WordCloud().generate(text)\nwordcloud = WordCloud(background_color=\"black\",max_words=len(k),max_font_size=40, relative_scaling=.8).generate(text)\nplt.figure(figsize=(14,6))\nplt.imshow(wordcloud)\nplt.axis(\"off\")\nplt.show()","14b78d35":"comcast_daily_complains_data = pd.DataFrame({'count':comcast_data.groupby('Date')['Ticket #'].count()})\ncomcast_daily_complains_data.sort_values(by='Date', ascending = True)\nplt.figure(figsize=(24,10))\nplt.xticks(rotation=90)\nplt.title(\"Daily Comcast Telecom Consumer Complaints\")\nplt.xlabel(\"Date of complaint\")\nplt.ylabel(\"Number of complaints\")\nplt.plot(comcast_daily_complains_data, marker='o')\nindex=0\nfor i in comcast_daily_complains_data['count'].values.tolist():\n    plt.annotate(str(i),xytext=(comcast_daily_complains_data.index[index],i),xy=(comcast_daily_complains_data.index[index],i)) #xytext will define position of comments\n    index=index+1    \nplt.legend() ","abcc53bc":"comcast_data['Month'] = comcast_data.Date.dt.month\ncomcast_monthly_complains_data = pd.DataFrame({'count':comcast_data.groupby('Month')['Ticket #'].count()})\ncomcast_monthly_complains_data.sort_values(by='Month', ascending = True)\ncomcast_monthly_complains_data\nplt.figure(figsize=(24,6))\nplt.title(\"Monthly Comcast Telecom Consumer Complaints\")\nplt.xlabel(\"Month of complaint\")\nplt.ylabel(\"Number of complaints\")\nplt.plot(comcast_monthly_complains_data)\nindex=0\nfor i in comcast_monthly_complains_data['count'].values.tolist():\n    plt.annotate(str(i),xytext=(comcast_monthly_complains_data.index[index],i),xy=(comcast_monthly_complains_data.index[index],i)) #xytext will define position of comments\n    index=index+1   \nplt.show()","8c8f0b7b":"def transform_status(row):\n    if((row.Status == 'Open') | (row.Status == 'Pending')):\n        return \"Open\"\n    elif((row.Status == 'Closed') | (row.Status == 'Solved')):\n        return \"Closed\"\n    else:\n        return \"Unknown\"\ncomcast_data['Complain Status'] = comcast_data.apply(transform_status,axis='columns')\ncomcast_statewise_complains_data = pd.DataFrame({'Total':comcast_data.groupby(['State','Complain Status'])['Complain Status'].count()})\ncomcast_statewise_complains_data = comcast_statewise_complains_data.unstack()\ncomcast_statewise_complains_data = comcast_statewise_complains_data.fillna(0)\nplt.figure(figsize=(24,20))\nopen_plt = plt.barh(comcast_statewise_complains_data.index,comcast_statewise_complains_data['Total','Open'] ,tick_label=comcast_statewise_complains_data.index)\nclosed_plt = plt.barh(comcast_statewise_complains_data.index,comcast_statewise_complains_data['Total','Closed'], left = comcast_statewise_complains_data['Total','Open'])\nplt.legend((open_plt[0], closed_plt[0]), ('Open', 'Closed'))","8fad7b6b":"comcast_statewise_complains_data['Resolved Complaints'] = (comcast_statewise_complains_data['Total','Closed'])\/(comcast_statewise_complains_data['Total','Closed']+comcast_statewise_complains_data['Total','Open'])\ncomcast_statewise_complains_data['Resolved Complaints'].mean()","ae422258":"On 24th of june 2015 comcast recorded highest number of complaints i.e 219.","870695ac":"Highest number of complaints recorded in month of june","d5968775":"Georgia has the highest number of complained received followed by Florida and California respecively","08bb4aea":"Approx 79.5% of complaints are resolved "}}