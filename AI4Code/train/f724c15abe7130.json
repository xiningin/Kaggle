{"cell_type":{"57a303e2":"code","25e0d040":"code","19c8675b":"code","c77124f7":"code","cf329da6":"code","3b8278e5":"code","49ab9e42":"code","299b1338":"code","5bcb59ac":"code","3611434e":"code","1ffb99bf":"code","49867ac7":"code","9b7cc56d":"code","1b0c7315":"code","ad6c0c1e":"code","bd0eefbb":"code","ed9df10d":"code","23c049ef":"markdown","dbc10c01":"markdown","f04ebf31":"markdown","ff9f769c":"markdown","83485dde":"markdown","a47cdc4a":"markdown","c1d15f6b":"markdown","abd79a27":"markdown","e2e5e0b1":"markdown"},"source":{"57a303e2":"import os\nimport numpy as np\nimport pandas as pd\nimport random\nimport folium\nfrom folium import plugins\nimport seaborn as sns\nimport cv2\nimport matplotlib.pyplot as plt\nimport IPython\nimport time\nimport plotly.express as px","25e0d040":"data0=pd.read_csv('..\/input\/earthquakes-in-japan\/Japan earthquakes 2001 - 2018.csv')\ndata0[data0['mag']==9.1]","19c8675b":"print(data0.columns.tolist())","c77124f7":"data0=data0.fillna('N')\ndata1=data0[['time','latitude','longitude','depth','mag',]]\ndata1[0:5]","cf329da6":"# earthquakes seen in march, 2011\ndata2=pd.DataFrame(columns=data1.columns.tolist())\nfor i,item in enumerate(data1['time']):\n    if item[0:4]=='2011'and item[5:7]=='03':\n        data2=pd.concat([data2,data1.loc[i:i]])\ndata2=data2.sort_values(['time']).reset_index(drop=True)        ","3b8278e5":"from datetime import datetime as dt\ndata2a=data2.copy()\ndate=[]\nfor item in data2['time']:\n    date+=[dt.strptime(item[0:-5],'%Y-%m-%dT%H:%M:%S')]\ndata2a['date']=date\ndata2a","49ab9e42":"import plotly.express as px\nfig=px.scatter(x=data2a['date'],y=data2a['mag'])\nfig=px.scatter(data2a, x=\"date\", y=\"mag\")\nfig.update_layout(title='Magnituide of earthquake in March, 2011')\nfig.show()","299b1338":"#!rm *","5bcb59ac":"data3=data2a[['latitude','longitude',]]\nstart=dt.strptime('2011-03-09T00:00:00','%Y-%m-%dT%H:%M:%S')\nend=dt.strptime('2011-03-11T05:47:00','%Y-%m-%dT%H:%M:%S')","3611434e":"for i in range(len(data2a)):\n    if start<data2a.loc[i,'date']<end:\n        item=data2a.loc[i:i,'time'].tolist()[0][0:-5]\n        eq_map = folium.Map(location=[37,137],tiles='Stamen Terrain',zoom_start=5.0,min_zoom=2.0)\n        eq_map.add_child(plugins.HeatMap(data3.loc[i:i]))\n        eq_map.save(\".\/\"+str(item)+\".html\")","1ffb99bf":"# earthquakes seen from 03-09 00:00:00 to 03-11 05:47:00\ndata4=data2a[data2a['date']<end][start<data2a['date']]\ndata4=data4.reset_index(drop=True)\ndata4","49867ac7":"data5=data4[['latitude','longitude',]]\neq_map = folium.Map(location=[37,137],tiles='Stamen Terrain',zoom_start=5.0,min_zoom=2.0)\neq_map.add_child(plugins.HeatMap(data5))\neq_map","9b7cc56d":"paths0=[]\nimport os\nfor dirname, _, filenames in os.walk('.\/'):\n    for filename in filenames:\n        if filename[-5:]=='.html':\n            paths0+=[os.path.join(dirname, filename)]","1b0c7315":"order=[]\nfor item in paths0:\n    order+=[item[:-5].split('\/')[-1]]\npaths1=pd.DataFrame(paths0)\npaths1[1]=order\npaths1.columns=['path','int']\npaths1=paths1.sort_values('int')\npaths2=paths1['path'].tolist()","ad6c0c1e":"htmls=[]\nfor item in paths2:\n    htmls+=[\"<iframe width='900' height='600' src='\" +item+ \"' frameborder='0'><\/iframe>\"]","bd0eefbb":"htmls[-1]","ed9df10d":"IPython.display.HTML(htmls[-1])","23c049ef":"<img src=\"http:\/\/infra-archive311.jp\/images\/gaiyou\/01_02b.jpg\" width=\"100%\">","dbc10c01":"## The mag 9.1 earthquake on 2011-03-11 05:46:24 (UTC)","f04ebf31":"# **The 2011 Tohoku Earthquake** \n## occurred at 14:46 JST (05:46 UTC) on March 11. \n### The magnitude 9.1 undersea megathrust earthquake had an epicenter in the Pacific Ocean, 72 km east of the Oshika Peninsula of the Tohoku region in Japan, which caused a huge tsunami.","ff9f769c":"<img src=\"https:\/\/earthquake.tenki.jp\/static-images\/earthquake\/detail\/2011\/03\/11\/2011-03-11-14-46-00-large.jpg?20110311150154\" width=\"100%\">","83485dde":"## Is there any sign of 'the mag 9.1 earthquake' coming? ","a47cdc4a":"###  Fifty five erathquakes were seen for 2 days before the event. Their locations were concentrated in one area, that was a neighbour of the place of 'the mag 9.1 earthquake'.","c1d15f6b":"### Focusing the period of March 9-11, the magnitude and frequency of earthquakes gradually decreased until the occurence of the event. Excessive energy  would be accumulated undersea for the event.\n* On the above plots, you can focus the area where you like by dragging. ","abd79a27":"### The sign of this earthquake was characteristic. A huge earthquake in the near future may be predictable by carefully observing the monitored data.","e2e5e0b1":"## The locations of earthuakes seen for 2 days before the event"}}