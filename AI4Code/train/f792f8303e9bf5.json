{"cell_type":{"799805cc":"code","ff0b5ac3":"code","a1239fbb":"code","3f3447a0":"code","ad951948":"code","82dc65a3":"code","caef528f":"code","8fca1e1d":"code","61ccdcf0":"code","c30822d3":"code","2eb1f4d2":"code","56f74222":"code","48605659":"code","2168b838":"code","67bc3c3d":"code","59a81286":"code","fec9d95e":"code","7e31376a":"code","a89c3dc1":"code","02ba9b5d":"code","8d8ed5f8":"code","0949c37c":"code","9d4506d1":"code","ed445e11":"code","21b903cf":"code","161ac06b":"markdown","966503ac":"markdown","af3d7b67":"markdown","1e8c01b3":"markdown","91140194":"markdown","0cfaad61":"markdown","491fc8a6":"markdown","7fac5d3e":"markdown","f34e19a5":"markdown","3b8673c6":"markdown","26f3422e":"markdown","1c23eeb1":"markdown","b6ba38f6":"markdown","87ed3ec8":"markdown","e778b5d9":"markdown","c744338a":"markdown"},"source":{"799805cc":"# This Python 3 environment comes with many helpful analytics libraries installed\n# It is defined by the kaggle\/python Docker image: https:\/\/github.com\/kaggle\/docker-python\n# For example, here's several helpful packages to load\n\nimport numpy as np # linear algebra\nimport pandas as pd # data processing, CSV file I\/O (e.g. pd.read_csv)\n\n# Input data files are available in the read-only \"..\/input\/\" directory\n# For example, running this (by clicking run or pressing Shift+Enter) will list all files under the input directory\nimport seaborn as sns\nimport matplotlib.pyplot as plt \nimport os\nfor dirname, _, filenames in os.walk('\/kaggle\/input'):\n    for filename in filenames:\n        print(os.path.join(dirname, filename))\n        \n        \nfrom wordcloud import WordCloud\nfrom geopy.geocoders import Nominatim\nfrom folium.plugins import HeatMap\nimport folium\nimport warnings\nwarnings.filterwarnings('ignore')\n# You can write up to 5GB to the current directory (\/kaggle\/working\/) that gets preserved as output when you create a version using \"Save & Run All\" \n# You can also write temporary files to \/kaggle\/temp\/, but they won't be saved outside of the current session","ff0b5ac3":"zomato = pd.read_csv('\/kaggle\/input\/pune-restaurants-zomato\/zomato_outlet_final.csv', delimiter=',')\nzomato.head(n=2)","a1239fbb":"'Cleaning Data'\n\n'Function to remove special characters from name'\ndef clean_data(cols, str_to_replace):\n           \n    for col in cols:\n        zomato[col] = [str(x).replace(str_to_replace,\"\") for x in zomato[col]]    \n        \n    return zomato\n\ndef extract_digit(cols):\n    \n    for col in cols:\n        zomato[col] = zomato[col].str.extract(r'(\\d+)', expand=True)\n        \n    return zomato\n'Calling our functions'\nzomato = clean_data(['rest_name'], '\\r\\r\\n')\nzomato = clean_data(['rest_name'], '\\r\\n')\nzomato = clean_data(['cost', 'dine_reviews', 'delivery_reviews'], \",\")\nzomato = extract_digit(['cost', 'dine_reviews', 'delivery_reviews'])","3f3447a0":"'Many location values have restaurant name as well.. So splitting them on basis of delimiter and extracting string after the delimiter'\nzomato['locc'] = zomato['loc'].str.split(pat = \",\").str[1]\n","ad951948":"zomato.head(n=3)","82dc65a3":"'Checking for duplicates'\nzomato.drop_duplicates(\"link\",keep='first',inplace=True)\nzomato.reset_index(drop=True,inplace=True)\nzomato.shape","caef528f":"print(\"Percentage null or na values in df\")\n((zomato.isnull() | zomato.isna()).sum() * 100 \/ zomato.index.size).round(2)","8fca1e1d":"'Checking data type of columns'\nzomato.info()","61ccdcf0":"'Converting Reviews and cost to integer'\nzomato.replace('NA', np.nan)\ndef convert_cols(cols):\n    \n    for col in cols:\n        zomato[col] = zomato[col].astype(float)\n        \n    return zomato\n\nzomato = convert_cols(['dine_reviews', 'delivery_reviews', 'cost'])","c30822d3":"plt.figure(figsize=(10,6))\nchains=zomato['rest_name'].value_counts()[:20]\nsns.barplot(x=chains,y=chains.index.str.rstrip(),palette='Set2')\nplt.title(\"Restaurants having maximum no of outlets in Pune\")\nplt.xlabel(\"Number of outlets\")","2eb1f4d2":"plt.figure(figsize=(20,5))\nlocations=zomato['loc'].value_counts()[:20]\ng = sns.barplot(locations.index,locations,palette=\"Set1\")\ng.set_xticklabels(g.get_xticklabels(), rotation=90, ha=\"right\")\ng\nplt.title(\"No of restaurants in Locality\")","56f74222":"r_type =zomato['rest_type'].value_counts()[:10]\nsns.barplot(x=r_type,y=r_type.index,palette='Set2')\nplt.title(\"Most preferred restaurant type in Pune\")\nplt.xlabel(\"Number of restaurants\")","48605659":"'Defining a function to plot graphs for top 10 attributes'\n\n\ndef bar_plot_h(cols, titles):\n    print(cols)\n    n=len(cols)\n    f, axes = plt.subplots(1, 2, figsize=(15, 7))\n    \n    for col, ax, i  in zip(cols, axes.flatten()[:n], range(0,n)):\n        zomato.loc[zomato['cuisine'].str.contains('Chinese,North Indian',  case=False), 'cuisine'] = \"Chinese,North Indian\"\n        c=zomato[col].value_counts()[:10]\n        \n        sns.barplot(c, c.index.str.rstrip(\",\") ,ax = ax, palette = 'Set2').set_title(titles[i])\n        'For showing values in barplot'\n        \n    \n       \n    \nbar_plot_h(['cuisine', 'liked'], [\"Cuisine liked by most PUNEKARS??? \", \"What do PUNEKARS love???\"])  ","2168b838":"'Converting dish liked into 1 text item'\ntext = \" \".join(str(dish) for dish in zomato.liked)\nprint (\"There are {} words in the combination of all review.\".format(len(text)))\nstopwords = ['NaN']\nwordcloud = WordCloud( stopwords = stopwords, background_color=\"white\").generate(text)\nplt.imshow(wordcloud, interpolation='bilinear')\nplt.axis(\"off\")\nplt.show()","67bc3c3d":"'Printing Restuarnat types'\nrest=zomato['rest_type'].value_counts().index\nprint(rest)","59a81286":"rest=zomato['rest_type'].value_counts()[:5].index\ndef produce_wordcloud(df,rest):\n    stopwords = ['NaN']\n    plt.figure(figsize=(20,30))\n    for i,r in enumerate(rest):\n        plt.subplot(3,3,i+1)\n        corpus=df[df['rest_type']==r]['liked'].tolist()\n        corpus=','.join(str(x)  for x in corpus )\n        wordcloud = WordCloud(stopwords = stopwords,max_font_size=None, background_color='white', collocations=False,\n                      width=1500, height=1500).generate(corpus)\n        plt.imshow(wordcloud)\n        plt.title(r)\n        plt.axis(\"off\")\n        \n\n        \n        \nproduce_wordcloud(zomato,rest)","fec9d95e":"\ndef bar_plot(cols, titles):\n    print(cols)\n    n=len(cols)\n    f, axes = plt.subplots(1, 2, figsize=(15, 6))\n    for col, ax, i  in zip(cols, axes.flatten()[:n], range(0,n)):\n        c=zomato[['rest_name',col]].sort_values(by = col,ascending = False)[:8]\n        g = sns.barplot(x = c[col], y =c['rest_name'].str.rstrip(),ax = ax, palette = 'Set2').set_title(titles[i])\n        'For showing values in barplot'\n        for p in ax.patches:\n            width = p.get_width()\n            ax.text(width -1.5  ,\n                p.get_y()+p.get_height()\/2. + 0.2,\n                '{:1.2f}'.format(width),\n                ha=\"right\")\n        ax.set_ylabel('')   \n\nbar_plot( [ 'cost', 'dine_reviews'], [\"Most Expensive Restaurant?\", \"Most reviewed ?\"])           ","7e31376a":"\n'''\nRating in itself is not a proper measure as no of reviews are not considered in it. So we will be calculating a weighted rating for both Dining and delivery\n'''\n\n' Calculate Weighted Rating '\nzomato['wght_dine_rating'] = (zomato['dine_rating'] )* (zomato['dine_reviews']\/zomato['dine_rating'].sum(axis = 0,skipna = True))\nzomato['wght_delivery_rating'] =zomato['delivery_rating']*(zomato['delivery_reviews']\/zomato['delivery_rating'].sum(axis=0,skipna=True) )\n\n#Normalizing rating to bring them in the case of 0 to 5\nzomato['wght_dine_rating']=5*(zomato['wght_dine_rating']-zomato['wght_dine_rating'].min(axis=0))\/(zomato['wght_dine_rating'].max(axis=0) - zomato['wght_dine_rating'].min(axis=0))\nzomato['wght_delivery_rating']=5*(zomato['wght_delivery_rating']-zomato['wght_delivery_rating'].min(axis=0))\/(zomato['wght_delivery_rating'].max(axis=0) - zomato['wght_delivery_rating'].min(axis=0))\ndef bar_plot(cols, titles):\n    print(cols)\n    n=len(cols)\n    f, axes = plt.subplots(1, 2, figsize=(15, 6))\n    for col, ax, i  in zip(cols, axes.flatten()[:n], range(0,n)):\n        c=zomato[['rest_name',col]].sort_values(by = col,ascending = False)[:8]\n        g = sns.barplot(x = c[col], y =c['rest_name'].str.rstrip(),ax = ax, palette = 'Set2').set_title(titles[i])\n        'For showing values in barplot'\n        for p in ax.patches:\n            width = p.get_width()\n            ax.text(width -1.5  ,\n                p.get_y()+p.get_height()\/2. + 0.2,\n                '{:1.2f}'.format(width),\n                ha=\"right\")\n        ax.set_ylabel('')   \n\nbar_plot( ['wght_dine_rating', 'wght_delivery_rating'], ['Best Rated for dining', 'Best Rated for delivery'])           ","a89c3dc1":"'Cost Distribution '\nfig, ax = plt.subplots(figsize=[16,4])\nsns.distplot(zomato['cost'],ax=ax)\nax.set_title('Cost Distrubution for all restaurants')","02ba9b5d":"zomato.describe()","8d8ed5f8":"'--------------Rating Distribution----------'\n\nplt.figure(figsize=(7,6))\nrating=zomato['dine_rating'].value_counts()\nsns.barplot(x=rating.index,y=rating)\nplt.xlabel(\"Ratings\")\nplt.ylabel('count')","0949c37c":"\nmost_voted = zomato[['locc','cost']].sort_values(by = 'cost', ascending = False)[:20]\nxy = most_voted['locc'].value_counts()\nsns.barplot(x = xy, y = xy.index)","9d4506d1":"popular_cuis=zomato.groupby(['loc','cuisine']).agg('count')\ndata=popular_cuis.groupby(['loc'],\n                as_index=False).apply(lambda x : x.sort_values(by=\"rest_name\",ascending=False).head(3))['rest_name'].reset_index().rename(columns={'rest_name':'count'})\n\ndata.head(n=10)","ed445e11":"cheap_rest=zomato[['rest_name','cost', 'loc','rest_type','cuisine', 'delivery_rating', 'dine_rating', 'delivery_reviews', 'dine_reviews']]\ncheap_rest=cheap_rest[(cheap_rest['cost'] <1000) & ( (cheap_rest['dine_rating'] > 4.3 )| (cheap_rest['delivery_rating'] > 4.3)) &   ((cheap_rest['delivery_reviews'] > 4000) | (cheap_rest['dine_reviews'] >4000))]\ncheap_rest.head(n=10)\n\n","21b903cf":"exp_rest=zomato[['rest_name','cost', 'loc','rest_type','cuisine', 'delivery_rating', 'dine_rating', 'delivery_reviews', 'dine_reviews']]\nexp_rest=exp_rest[(exp_rest['cost'] >2500) & ( (exp_rest['dine_rating'] > 4.0 )| (exp_rest['delivery_rating'] > 4.0))&   ((exp_rest['delivery_reviews'] > 400) | (exp_rest['dine_reviews'] >400))].sort_values(by=['dine_reviews'], ascending = False)\nexp_rest.head()\n","161ac06b":"# Forming wordclouds for 5 restaurant type\n","966503ac":"Breakdown of this notebook:\nLoading the dataset: Load the data and import the libraries.\n**Data Cleaning:**\n1. Cleaning column values.\n2. Extracting digits for certain columns like Reviews, cost.\n3. Dropping duplicates values.\n4. Data Visualization: Using plots to find relations between the features.\n","af3d7b67":"# Food Street in Pune?","1e8c01b3":"# Which chain has maximum no of outlets in Pune?","91140194":"Reference - \n\n1. https:\/\/www.kaggle.com\/shahules\/zomato-complete-eda-and-lstm-model\n\n2. https:\/\/www.kaggle.com\/parthsharma5795\/finding-the-best-restaurants-in-bangalore","0cfaad61":"# ** Exploratory Data Analysis**","491fc8a6":"# Most Popular Cuisine for a locality?","7fac5d3e":"# Most voted restaurants in Pune?\n","f34e19a5":"# Data Cleaning","3b8673c6":"# Most preferred restaurant type in Pune?\n","26f3422e":"# Best cheap Restaurants?\n\nCriteria - \n1. Cost < 1000\n2. Rating (dine or delivery) > 4.3\n3. No of reviews( dine or delivery) > 4000\n","1c23eeb1":"# Interesting thing to note in Expensive restaurants is that none of them provide delivery. ","b6ba38f6":"# Inferences - \n\nMore than 50% restaurants have rating between 3.5 and 4","87ed3ec8":"# Generating wordclouds for most liked dish ","e778b5d9":"# Highly Rated and Highly reviewed Expensive restaurants","c744338a":"# Localities for Most Expensive 20 restaurants?"}}