{"cell_type":{"649920c1":"code","d1c9ec94":"code","55a63994":"code","158ddefa":"code","79fbc512":"code","1a7ac492":"code","c6ef07bb":"code","45003d60":"code","e23d8066":"code","a2f30ae9":"code","9c6c10c3":"code","3b776967":"code","1f52cf14":"code","25b25872":"code","1fbd7bcc":"code","f3cabe88":"code","ead63777":"code","c35297bd":"code","898a9f91":"code","80c6c75d":"code","c9571f7f":"code","2dfa8ede":"code","184e08c1":"code","0031e55f":"code","1a0cf0bc":"code","76a32269":"code","aaa5d6d0":"code","ddef3de7":"code","5f9b9bbe":"code","f5d5c447":"code","59625d4d":"code","8f7531c3":"markdown","fe6f46c9":"markdown","80eb82a9":"markdown","62fd634d":"markdown","d8095dc9":"markdown","ff8b7efa":"markdown","8b0f9193":"markdown","647876ce":"markdown","475e7b72":"markdown","e3f3a6c5":"markdown","2f32fa16":"markdown","37c07313":"markdown","b1686e48":"markdown","148a3146":"markdown","2ee575aa":"markdown","335357a1":"markdown","53eb9860":"markdown","c54f4c34":"markdown","adc93af0":"markdown","337ce34f":"markdown","b8f6b4bf":"markdown","4dc296da":"markdown","aeb4d08e":"markdown","02fd9f5b":"markdown","fb360f8e":"markdown","cbae23be":"markdown","8e1ee4f7":"markdown","9758cef8":"markdown","f3e3d1d0":"markdown","44a8b097":"markdown","63366416":"markdown","789c96ef":"markdown","6c5fc669":"markdown","ccc197a8":"markdown","e6e62265":"markdown","acfd5759":"markdown","1c82eddc":"markdown","0366106e":"markdown","1665c5b1":"markdown"},"source":{"649920c1":"import pandas as pd\n%matplotlib inline\nfrom matplotlib import pyplot as plt\nimport seaborn as sns\nimport numpy as np","d1c9ec94":"df = pd.read_csv('..\/input\/heart-attack-analysis-prediction-dataset\/heart.csv')\ndf","55a63994":"col_dict = {\n        'age':'Age',\n        'sex':'Sex',\n        'cp':'ChestPainType',\n        'trtbps':'RestBloodPressure',\n        'chol':'Cholesterol', \n        'fbs':'FastingBloodSugar',\n        'restecg':'RestECG',\n        'thalachh':'MaxHeartRate',\n        'exng':'ExerciseAngina',\n        'oldpeak':'STDepbyExercise',\n        'slp':'Slop',\n        'caa':'MajorVessels',\n        'thall':'DefectType',\n        'output':'output'\n    }","158ddefa":"old_col_names = list(df.columns)\nnew_col_names = [col_dict[i] for i in old_col_names]\ndf.columns = new_col_names","79fbc512":"df","1a7ac492":"col_dict","c6ef07bb":"df.info()","45003d60":"df.STDepbyExercise.sample(10)","e23d8066":"df.describe().transpose()","a2f30ae9":"unique_values = [(i, df[i].nunique()) for i in df.columns]\nplt.figure(figsize=(15,5))\nplt.bar(*zip(*unique_values))\nplt.xticks(rotation=45)\nplt.show()","9c6c10c3":"numerical_columns = ('Age RestBloodPressure Cholesterol MaxHeartRate STDepbyExercise').split()\ncategorical_columns = ('Sex ChestPainType FastingBloodSugar RestECG ExerciseAngina \\\n                         Slop MajorVessels DefectType').split()\ntarget_column = 'output'\nprint(numerical_columns)\nprint(categorical_columns)\nprint(target_column)","3b776967":"col_details = pd.DataFrame(columns=['ColName', 'Mean', 'Median', 'Mode', 'Min', 'Max'])\nfor i in numerical_columns:\n    col_details.loc[len(col_details)] = [i, df[i].mean(), df[i].median(), df[i].mode(), df[i].min(), df[i].max()]\ncol_details","1f52cf14":"rows, cols = 3, 2\nplt.figure(figsize=(15,15))\nplt.tight_layout()\ncounter = 1\nfor i in numerical_columns:\n    if counter<=9:\n        plt.subplot(rows, cols, counter)\n        sns.histplot(data = df, x= i, hue='output')\n        plt.title(i)\n        counter+=1","25b25872":"plt.figure(figsize=(15,15))\nplt.tight_layout()\ncounter = 1\nfor i in categorical_columns:\n    plt.subplot(3,3,counter)\n    sns.countplot(x=df[i], hue=df.output)\n    plt.title(i)\n    counter+=1","1fbd7bcc":"def percent_cat(df, feature_name):\n    \n    unique_values = df[feature_name].unique()\n    no_of_unique_values = len(unique_values)\n    \n    my_dict = {}\n    l_pos = []\n    l_neg = []\n    \n    for i in unique_values:\n        total = len(df[df[feature_name]==i].output)\n        positive = sum(list(df[df[feature_name]==i].output == 1))\n        negative = sum(list(df[df[feature_name]==i].output == 0))\n        perc_pos = int(positive*100\/total)\n        perc_neg = int(negative*100\/total)\n        \n        l_pos.append(perc_pos)\n        l_neg.append(perc_neg)\n    plt.suptitle('No of datapoints: '+str(len(df)))\n    plt.bar(unique_values, l_pos, label='Positive', color='Blue')\n    plt.bar(unique_values, l_neg, label='Negative', color='Orange')\n    plt.xlabel('Category No')\n    plt.ylabel('Percent')\n    plt.legend()\n    plt.title(feature_name)","f3cabe88":"plt.figure(figsize=(17,15))\ncounter = 1\nfor i in categorical_columns:\n    plt.subplot(3,3,counter)\n    percent_cat(df,i)\n    counter += 1\nplt.show()","ead63777":"wdf = df[df.Sex==0]","c35297bd":"len(wdf)","898a9f91":"rows, cols = 3, 2\nplt.figure(figsize=(15,15))\nplt.tight_layout()\ncounter = 1\nfor i in numerical_columns:\n    if counter<=9:\n        plt.subplot(rows, cols, counter)\n        sns.histplot(data = wdf, x= i, hue='output')\n        plt.title(i)\n        counter+=1","80c6c75d":"plt.figure(figsize=(17,15))\ncounter = 1\nfor i in categorical_columns:\n    plt.subplot(3,3,counter)\n    percent_cat(wdf,i)\n    counter += 1\nplt.show()","c9571f7f":"\nplt.figure(figsize=(17,15))\ncounter = 1\nfor i in categorical_columns:\n    plt.subplot(3,3,counter)\n    percent_cat(wdf[(wdf.Age<40)],i)\n    counter += 1\nplt.show()","2dfa8ede":"\nplt.figure(figsize=(17,15))\ncounter = 1\nfor i in categorical_columns:\n    plt.subplot(3,3,counter)\n    percent_cat(wdf[(wdf.Age>40) & (wdf.Age<50)],i)\n    counter += 1\nplt.show()","184e08c1":"\nplt.figure(figsize=(17,15))\ncounter = 1\nfor i in categorical_columns:\n    plt.subplot(3,3,counter)\n    percent_cat(wdf[(wdf.Age>50) & (wdf.Age<60)],i)\n    counter += 1\nplt.show()","0031e55f":"\nplt.figure(figsize=(17,15))\ncounter = 1\nfor i in categorical_columns:\n    plt.subplot(3,3,counter)\n    percent_cat(wdf[(wdf.Age>60) & (wdf.Age<70)],i)\n    counter += 1\nplt.show()","1a0cf0bc":"mdf = df[df.Sex==1]","76a32269":"rows, cols = 3, 2\nplt.figure(figsize=(15,15))\nplt.tight_layout()\ncounter = 1\nfor i in numerical_columns:\n    if counter<=9:\n        plt.subplot(rows, cols, counter)\n        sns.histplot(data = mdf, x= i, hue='output')\n        plt.title(i)\n        counter+=1","aaa5d6d0":"plt.figure(figsize=(17,15))\ncounter = 1\nfor i in categorical_columns:\n    plt.subplot(3,3,counter)\n    percent_cat(mdf,i)\n    counter += 1\nplt.show()","ddef3de7":"\nplt.figure(figsize=(17,15))\ncounter = 1\nfor i in categorical_columns:\n    plt.subplot(3,3,counter)\n    percent_cat(mdf[(mdf.Age<40)],i)\n    counter += 1\nplt.show()","5f9b9bbe":"\nplt.figure(figsize=(17,15))\ncounter = 1\nfor i in categorical_columns:\n    plt.subplot(3,3,counter)\n    percent_cat(mdf[(mdf.Age>40) & (mdf.Age<50)],i)\n    counter += 1\nplt.show()","f5d5c447":"\nplt.figure(figsize=(17,15))\ncounter = 1\nfor i in categorical_columns:\n    plt.subplot(3,3,counter)\n    percent_cat(mdf[(mdf.Age>50) & (mdf.Age<60)],i)\n    counter += 1\nplt.show()","59625d4d":"\nplt.figure(figsize=(17,15))\ncounter = 1\nfor i in categorical_columns:\n    plt.subplot(3,3,counter)\n    percent_cat(mdf[(mdf.Age>60) & (mdf.Age<70)],i)\n    counter += 1\nplt.show()","8f7531c3":"The data has people from age 29 to 77, mean age 54.\nPeople in survey have avg Blood Pressure 131, avg Cholesterol 246, Avg Heart Rate 149","fe6f46c9":"We want to focus on these values but only for numerical columns and not for the categorical ones.","80eb82a9":"#### Men","62fd634d":"If you like my work, showing appreciation by <b>UPVOTING<\/b> will be motivating. \n\nAlso for any suggestions and feedback feel free to comment or contact. \nThanks.","d8095dc9":"Some features have 100% negative and some have 100% positive for certain categories. Which make them strong indicators.","ff8b7efa":"The distributions look overlapping. However \n<br>people with max heart rate above 150 were mostly positive and those with less than 150 were mostly negative.\n<br>most people with STDepExercise 0 were positive.\n","8b0f9193":"This dataset has almost everyone as positive in this age group.\n","647876ce":"Age Group 60 to 70","475e7b72":"Age Group: less than 40","e3f3a6c5":"Highly overlapping distributions for numerical features, not easily separable.","2f32fa16":"Who has higher risk?\n<br>Those with rest blood pressure less than 140\n<br>with max heart rate above 140\n<br>STDepbyExercise less than 2\n<br>Normal cholesterol level is below 200 and our data starts at 200 so almost everyone in survey is at risk.","37c07313":"So we must check how values are in 'STDepbyExercise'","b1686e48":"I will be renaming the features for the sake of ease in understanding while EDA.","148a3146":"We have only 96 data points for women","2ee575aa":"In this age group around 70 percent people are positive.","335357a1":"Now we will check variations in data by age groups for women.","53eb9860":"Now let's look at descriptions of numerical columns","c54f4c34":"Lets plot the Numerical and Categorical columns only for Men","adc93af0":"#### Women","337ce34f":"Age Group: 40 to 50","b8f6b4bf":"For any feature, if a category has disproportionate hue results, means, say for DefectType category 2, the chances of heart attack is disproportionately high, so these kind of features are pretty determining of final results in my opinion.\n\nThis trend is present in - \n<br>ExerciseAngina category 0.\n<br>Slop category 2.\n<br>MajorVessel category 0.\n<br>DefectType category 2.\n<br>Sex category 0.\n<br>ChestPainType category 1,2,3.\n\nSo we must get the numbers.","4dc296da":"Lets plot the Numerical and Categorical columns only for women","aeb4d08e":"Chest pain type 1, 2 are good indicators","02fd9f5b":"A couple things to notice here:\n<br>ChestPainType 3 is 100% Positive\n<br>DefectType 0 is 100% Positive\n<br>MajorVessels 3 is 100% Negative\n<br>DefectType 1 is 100% Negative\n\nAny woman with ChestPainType 1,2,3 is having very high chances of heart attack.\n<br>So is true with FastingBloodSugar 0","fb360f8e":"First lets check how many unique non null values we have per feature","cbae23be":"Let's separate the numerical and categorical columns","8e1ee4f7":"Age Group: 40 to 50","9758cef8":"Age Group: 50 to 60","f3e3d1d0":"Age Group: Less than 40","44a8b097":"#### Data Dictionary\n\nThe Dataset has 303 rows and 14 columns.\nColumn descriptions are as below:\n\n<br>Age : Age of the patient \n<br>Sex : Sex of the patient (1:male, 0:female)\n<br>exang: exercise induced angina (1 = yes; 0 = no) means is there chest pain after exercise?\n<br>ca: number of major vessels (0-3)\n<br>\n<br>cp : Chest Pain type chest pain type\n<br>Value 1: typical angina\n<br>Value 2: atypical angina\n<br>Value 3: non-anginal pain\n<br>Value 4: asymptomatic\n<br>\n<br>trtbps : resting blood pressure (in mm Hg)\n<br>chol : cholestoral in mg\/dl fetched via BMI sensor\n<br>fbs : (fasting blood sugar > 120 mg\/dl) (1 = true; 0 = false)\n<br>\n<br>oldpeak - ST depression induced by exercise relative to rest\n<br>rest_ecg : resting electrocardiographic results\n<br>Value 0: normal\n<br>Value 1: having ST-T wave abnormality (T wave inversions and\/or ST elevation or depression of > 0.05 mV)\n<br>Value 2: showing probable or definite left ventricular hypertrophy by Estes' criteria\n<br>slp: slope - the slope of the peak exercise ST segment (2 = upsloping; 1 = flat; 0 = downsloping)\n<br>thalach : maximum heart rate achieved\n<br>thal - 2 = normal; 1 = fixed defect; 3 = reversable defect\n<br>target : 0= less chance of heart attack 1= more chance of heart attack\n","63366416":"Around 50 50 break of positive and negative and 80+ data points are good.","789c96ef":"Chest pain type 1,2,3 are major indicators.","6c5fc669":"There is very less data for this age group","ccc197a8":"A couple things to notice here:\n<br>ChestPainType 3 is 100% Positive\n<br>DefectType 0 is 100% Positive\n<br>MajorVessels 3 is 100% Negative\n<br>DefectType 1 is 100% Negative\n\nAny man with ChestPainType 1,2,3 is having very high chances of heart attack.\n<br>So is true with FastingBloodSugar 0","e6e62265":"The data has non-null values for all rows or all columns and except column 'STDepbyExercise' every other column is int64 type.\n'STDepbyExercise' is float64 type.","acfd5759":"<html>\nSo, as we can see, \n\n<br>Sex category 0\n<br>ChestPainType 1,2,3\n<br>RestECG 1\n<br>ExerciseAngina 0\n<br>Slop 2\n<br>MajorVessels 0, 4\n<br>DefectType 2\n\nAre major determining factors. \n<br>At the same time, for other categories, sometimes negative outweighs positives, that also gives them importance.\n<br>    ChestPainType 0\n<br>    RestECG 2\n<br>    ExerciseAngina 1\n<br>    Slop 0, 1\n<br>    MajorVessel 1,2,3\n<br>    DefectType 1,3\n<\/html>","1c82eddc":"Age group 50 to 60","0366106e":"Let's look at the data only for women as they have higher chances of Heart Attack","1665c5b1":"Again let's look at the data by age group"}}