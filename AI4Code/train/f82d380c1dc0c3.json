{"cell_type":{"5e9b8f1a":"code","b6389307":"code","8ee0e42c":"code","80e83b85":"code","fdfc5277":"code","10be1766":"code","0f3c2d68":"code","b10dbe80":"code","9e1a87d9":"code","e47e2673":"code","14425478":"code","3c323d3d":"code","af1c0b81":"markdown","fe36383d":"markdown","81ca4890":"markdown","b212090f":"markdown","81b40b22":"markdown","f0fde5e7":"markdown"},"source":{"5e9b8f1a":"import pandas as pd\nimport seaborn as sns\nimport matplotlib.pyplot as plt\n\n# Import the sample data in google sheet as a DataFrame\ngsheetid = \"16i38oonuX1y1g7C_UAmiK9GkY7cS-64DfiDMNiR41LM\"\nsheet_name = \"Sheet1\"\ngsheet_url = f\"https:\/\/docs.google.com\/spreadsheets\/d\/{gsheetid}\/gviz\/tq?tqx=out:csv&sheet={sheet_name}\"\n\ndf = pd.read_csv(gsheet_url)\ndf.head()\n","b6389307":"# Descriptive Statistics\ndf.order_amount.describe()","8ee0e42c":"df.order_amount.median()","80e83b85":"print(\"Given AOV value is\", round(df[\"order_amount\"].mean(),2))","fdfc5277":"# looking at average order value will only give us a partial picture of your customer's purchase behavior.\n# According to shopify blog, to obtain the AOV, we divide the total revenue by the total number of orders.\n\nprint(\"Actual AOV value is\", round((df[\"order_amount\"].sum() \/ df[\"total_items\"].sum()),2))","10be1766":"# Box plot of the data can help us understand the distribution.\ndf.boxplot(column='order_amount')","0f3c2d68":"grouped_order_amounts = df.groupby(['order_amount']).size().reset_index(name='count').sort_values(by='order_amount', ascending=False)\n\ngrouped_order_amounts.head(10)","b10dbe80":"df.loc[df.order_amount.isin([704000, 51450, 25725])].sort_values(by='order_amount', ascending=False)","9e1a87d9":"q1 = df.order_amount.quantile(q=0.25)\nq2 = df.order_amount.quantile(q=0.5)\nq3 = df.order_amount.quantile(q=0.75)\nIQR = q3 - q1\n\ndf_Without_Outliers = df[(df.order_amount < q2 + IQR * 1.5) & (df.order_amount > q2 - IQR * 1.5)]\ndf_Without_Outliers.boxplot(column='order_amount')","e47e2673":"df_Without_Outliers.order_amount.describe()","14425478":"print(\"Actual AOV value without outliers is\", round((df_Without_Outliers[\"order_amount\"].sum() \/ df_Without_Outliers[\"total_items\"].sum()),2))","3c323d3d":"# Summary\n\nprint(\"Mean value for order_amount when outliers are included\", round(df.order_amount.mean(),2))\nprint(\"Mean value for order_amount when outliers are excluded\", round(df_Without_Outliers.order_amount.mean(),2))\nprint(\"Median value for order_amount when outliers are included\", round(df.order_amount.median(),2))\nprint(\"Median value for order_amount when outliers are excluded\", round(df_Without_Outliers.order_amount.median(),2))\nprint(\"Actual AOV value is\", round((df[\"order_amount\"].sum() \/ df[\"total_items\"].sum()),2))\nprint(\"Actual AOV value without outliers is\", round((df_Without_Outliers[\"order_amount\"].sum() \/ df_Without_Outliers[\"total_items\"].sum()),2))\n","af1c0b81":"There are several intriguing findings, orders totaling 704000 are placed at the same time each day by the same shop(Shop id 42) and user(607).Data for order amounts of 51450 and 25725 are similar as well and all originate from the same shop id 78.  \n\nBecause the order quantity is constantly 2000, it appears that the transactions involving the 704000 order amount are most \nlikely the result of a supplier ordering a large number of shoes at once or could be fruadulent transactions. These transactions defintely needs further investigations. Also, Even when considering designer shoes, the prices listed in these stores are still on the higher end of the price range for a pair of sneakers.\n\nWe can clean up some of the values in order to better evaluate this data. Let's try just charting numbers that are the median \n+\/- 1.5 times the interquartile range.","fe36383d":"Question 2 : Answers\n\n**Question 2a: How many orders were shipped by Speedy Express in total?**\n\nSELECT COUNT(O.ShipperID) 'Total Orders by Speedy Express'\nFROM Orders AS O\nWHERE (SELECT ShipperID \n    FROM Shippers AS S\n    WHERE S.ShipperName == \"Speedy Express\") == O.ShipperID;\n\n**Ans: In total, 54 Orders were shipped by Speedy Express.**\n\n**Question 2b: What is the last name of the employee with the most orders?**\n\nSELECT E.LastName 'Employee with the Most Orders'\nFROM Employees AS E\nWHERE (SELECT O.EmployeeID\nFROM Orders AS O\n    GROUP BY O.EmployeeID\n    ORDER BY COUNT(O.EmployeeID) DESC\n    LIMIT 1) == E.EmployeeID;\n\n\n**Ans: Last name is Peacock.**\n\n**Question 2c: What product was ordered the most by customers in Germany?**\n\nSELECT P.ProductName AS 'Product Name', SUM(OD.Quantity) AS Quantity\nFROM Orders AS O, OrderDetails AS OD, Customers AS C, Products AS P\nWHERE C.Country = \"Germany\" AND OD.OrderID = O.OrderID AND OD.ProductID = P.ProductID AND C.CustomerID = O.CustomerID\nGROUP BY P.ProductID\nORDER BY Quantity DESC\nLIMIT 1;\n\n**Ans: With 160 orders, customers in Germany placed the most orders for Boston Crab Meat.**","81ca4890":"\nQuestion 1: Answers\na. Think about what could be going wrong with our calculation. Think about a better way to evaluate this data. \nAns: First, we see that the average order amount is 3145.13, which is calculated erroneously as the Average Oder Value (AOV) for all 100 stores during a 30 day period. However, the AOV calculation is incorrect as well.\nSecond, the dataset contains number of values that are significantly higher than the mean. This data would be better evaluated if the AOV was recalculated without the outliers.\n\n\nb.What metric would you report for this dataset?\nAns: Better way to calcualte AOV is to divide the total order amount by the total number of orders.Since the dataset includes few outliers values that are higher than the mean, we will have to recompute AOV after eliminating the outliers .\n\n\nc.What is its value?\nAns: AOV:149.5\n","b212090f":"There appear to be a number of outliers as the entire box portion of the box plot is a line along 0. To further analyze. let's\ngroup the data by order amount, counting the number of entries in each group, and then sorting it in decreasing order.\n","81b40b22":"\nSurprisingly, several of these high order amounts are repeated, particularly 704000, 51450, and 25725.Let's analyze these\nspecific rows from the original dataset.","f0fde5e7":"The describe() function which computes a descriptive summary of statistics for the order_amount column in the Dataframe, \n provides us with additional information that helps us comprehend this data. We observe that the mean order amount is 3145.13\n and is naively calculated as Average Oder value(AOV). There is also a massive standard deviation of 41282.54. This means that\n on average,  the values deviate 41282.54 from the mean,making the mean an inefficient approximation of the AOV and implying\n that large order numbers will raise this figure.\n \n Further, minimum order_amount value is 90 and the maximum is 704000. Further,comparing median, first and third quartiles, \n reveals that the maximum value is much higher that the other values.From this summary of statistics, we can very well conclude\n that there are certian to be a few outliers values that are higher than the mean."}}