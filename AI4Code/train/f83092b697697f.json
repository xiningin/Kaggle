{"cell_type":{"94b65dc0":"code","c24a785a":"code","90e40415":"code","a8e011be":"code","79332ffc":"code","16ffd910":"code","b29ae72b":"code","c3deada3":"code","1657baf9":"code","95179f38":"code","5abf334f":"code","087e4a92":"code","0457af27":"code","068c48b0":"code","552354f3":"code","a0b390d1":"code","b40626e3":"code","557f07de":"code","aec6017b":"code","8dc6d356":"code","e1a07b31":"code","cbc790b7":"code","8b612e2a":"code","189232e8":"code","2976d9ab":"code","2156fc2e":"code","e6e15261":"code","3572a0b9":"code","bd98360b":"code","b5eea223":"code","baff0c55":"code","9b49d6b0":"code","660ce650":"code","fceab2bc":"code","e75671f4":"code","5ec6d516":"code","871c96fe":"code","247d83c1":"code","0e6d20a3":"code","0b284cfe":"code","d2738a99":"code","b4d2c7c2":"code","f71a49f6":"code","ccf7c26e":"markdown","0d6c7fed":"markdown","39ed35fe":"markdown"},"source":{"94b65dc0":"pip install yellowbrick","c24a785a":"import numpy as np\nimport pandas as pd\nimport matplotlib.pyplot as plt\nfrom sklearn.cluster import KMeans\nfrom sklearn.preprocessing import MinMaxScaler\nfrom yellowbrick.cluster import KElbowVisualizer\nfrom scipy.cluster.hierarchy import linkage\nfrom scipy.cluster.hierarchy import dendrogram\nfrom sklearn.preprocessing import StandardScaler\nfrom sklearn.decomposition import PCA\nfrom sklearn.model_selection import cross_val_score, GridSearchCV\nfrom sklearn.preprocessing import LabelEncoder","90e40415":"df = pd.read_csv('..\/input\/usarrest\/kmeans_usarrests\/USArrests.csv', index_col=0)","a8e011be":"df.head()","79332ffc":"df.isnull().sum()","16ffd910":"df.describe().T","b29ae72b":"# Uzakl\u0131k temelli y\u00f6ntemlerde mutlaka standartla\u015ft\u0131rma i\u015flemi uygulanmal\u0131d\u0131r. Ayk\u0131r\u0131 de\u011ferlerden \n# etkilendikleri i\u00e7in ayk\u0131r\u0131 de\u011ferlerden de kurtulmak gereklidir.","c3deada3":"sc = MinMaxScaler((0,1))\ndf = sc.fit_transform(df)","1657baf9":"df[0:5]","95179f38":"k_means = KMeans(n_clusters=4)\n# k\u00fcme say\u0131s\u0131 \u00f6rne\u011fin 4 olsun","5abf334f":"k_fit = k_means.fit(df)","087e4a92":"k_fit.n_clusters","0457af27":"# 4 cluster say\u0131s\u0131d\u0131r, bu de\u011feri kendimiz verdik","068c48b0":"k_fit.cluster_centers_","552354f3":"# Cluster'lar\u0131n merkezleri; merkez denen \u015fey  asl\u0131nda bir g\u00f6zlem birimidir. 4 cluster oldu\u011fu i\u00e7in 4 tane\n# merkez bulunmaktad\u0131r. ","a0b390d1":"k_fit.labels_","b40626e3":"# Label ise her bir eyaletin hangi k\u00fcmeye girdi\u011fini ifade eder. ","557f07de":"k_fit.inertia_","aec6017b":"# Toplam hata kareler toplam\u0131, SSD de denilebilir.","8dc6d356":"k__means = KMeans(n_clusters=2).fit(df)\nkumeler = k__means.labels_\ntype(df)","e1a07b31":"df = pd.DataFrame(df)","cbc790b7":"plt.scatter(df.iloc[:, 0],\n            df.iloc[:, 1],\n            c=kumeler,\n            s=50,\n            cmap='viridis')\nplt.show()","8b612e2a":"# 2 boyutlu k\u00fcmeye indirgedik ve g\u00f6rselle\u015ftirdik.","189232e8":"merkezler = k__means.cluster_centers_\nplt.scatter(df.iloc[:, 0],\n            df.iloc[:, 1],\n            c=kumeler,\n            s=50,\n            cmap='viridis')\nplt.scatter(merkezler[:, 0],\n            merkezler[:, 1],\n            c='red',\n            s=200,\n            alpha=0.8)\n\n","2976d9ab":"# k\u00fcmelerin merkezlerini i\u015faretledik.","2156fc2e":"## Optimum k\u00fcme say\u0131s\u0131n\u0131n belirlenmesi","e6e15261":"k_means = KMeans()\nssd = []\nK = range(1, 30)","3572a0b9":"for k in K:\n    k_means = KMeans(n_clusters=k).fit(df)\n    ssd.append(k_means.inertia_)","bd98360b":"plt.plot(K, ssd, 'bx-')\nplt.xlabel('Farkl\u0131 K De\u011ferlerine Kar\u015f\u0131l\u0131k Uzakl\u0131k Art\u0131k Toplamlar\u0131')\nplt.title('Optimum K\u00fcme Say\u0131s\u0131 i\u00e7in Elbow Y\u00f6ntemi')\nplt.show()","b5eea223":"# Daha otomatik bir yol; ","baff0c55":"k_means = KMeans()\nelbow = KElbowVisualizer(k_means, k=(2, 20))\nelbow.fit(df)\nelbow.show()","9b49d6b0":"# Grafi\u011fe bakarak e\u011fimin en ciddi de\u011fi\u015fti\u011fi noktay\u0131 nas\u0131l se\u00e7ece\u011fim sorusunu cevaplar.\n# olmas\u0131 gereken k\u00fcme say\u0131s\u0131n\u0131n elbow y\u00f6ntemine g\u00f6re 7 oldu\u011funa karar vermi\u015f yani en optimum nokta.\n# Bu noktadan sonra hatalardaki de\u011fi\u015fimin marjinalli\u011fi(etkisi) d\u00fc\u015f\u00fck.\n# \u0130\u015f bilgisi kat\u0131lmadan mutlak olarak bu noktay\u0131 kabul etmek do\u011fru de\u011fildir.","660ce650":"# Final Cluster'lar\u0131n olu\u015fturulmas\u0131;","fceab2bc":"k_means = KMeans(n_clusters=elbow.elbow_value_).fit(df)\nkumeler = k_means.labels_","e75671f4":"df = pd.read_csv('..\/input\/usarrest\/kmeans_usarrests\/USArrests.csv', index_col=0)","5ec6d516":"pd.DataFrame({'Eyaletler': df.index, 'Kumeler': kumeler})\ndf['cluster_no'] = kumeler\ndf['cluster_no'] = df['cluster_no'] + 1 ","871c96fe":"df.head()","247d83c1":"df.groupby('cluster_no').agg({'cluster_no': 'count' })","0e6d20a3":"# 1. cluster da 10 g\u00f6zlem de\u011feri , 3. cluster da 11 g\u00f6zlem de\u011feri var.","0b284cfe":"df.groupby('cluster_no').agg(np.mean)","d2738a99":"# 1. cluster da ortalama 2.68 ~ 3 cinayet var yorumu yap\u0131labilir.","b4d2c7c2":"df[df['cluster_no'] == 5]","f71a49f6":"# Cinayet(murder) ortalamas\u0131 en d\u00fc\u015f\u00fck olan eyaletler ","ccf7c26e":"K\u00fcme say\u0131s\u0131 artt\u0131k\u00e7a inertia de\u011ferinin azald\u0131\u011f\u0131n\u0131 g\u00f6zlemliyoruz. SSD'nin azald\u0131\u011f\u0131n\u0131 g\u00f6zlemliyoruz.\nE\u011fer g\u00f6zlem say\u0131s\u0131 kadar k\u00fcmeleme yaparsak inertia de\u011feri 0 olur. Yapmak istedi\u011fimiz \u015fey bu de\u011fil \u00e7\u00fcnk\u00fc amac\u0131m\u0131z\u0131n d\u0131\u015f\u0131na \u00e7\u0131km\u0131\u015f oluyoruz. ","0d6c7fed":"Denetimli \u00f6\u011frenmede ba\u011f\u0131ml\u0131 de\u011fi\u015fkenimiz vard\u0131 ve analizi ne \u015fekilde yapaca\u011f\u0131m\u0131z\u0131 biliyorduk fakat denetimsiz \u00f6\u011frenmede ba\u011f\u0131ml\u0131 de\u011fi\u015fkenimiz yok ve analizi neye g\u00f6re yapaca\u011f\u0131m\u0131z\u0131 tam olarak bilmiyoruz. Bu y\u00fczden **k\u00fcmeleme analizi** bu noktada \u00e7ok i\u015fimize yarayacakt\u0131r.\n\u00d6rne\u011fin Alabama ve Alaska'n\u0131n su\u00e7 istatistiklerine bakar\u0131z, e\u011fer birbirine yak\u0131nsa ayn\u0131 k\u00fcmede olabilir yorumu yap\u0131labilir. K\u00fcmeleme analizi, birbirlerine benzerlik g\u00f6steren verilerin ayn\u0131 k\u00fcme\ni\u00e7erisine al\u0131nmas\u0131 esas\u0131na dayan\u0131r. \nAma\u00e7; k\u00fcmeler aras\u0131 benzerlikleri azalt\u0131rken, k\u00fcme i\u00e7i benzerli\u011fi artt\u0131rmakt\u0131r.","39ed35fe":"Buradaki 4 say\u0131s\u0131 neye g\u00f6re verilecek? Hiper parametre optimizasyonu yapaca\u011f\u0131z, hatalar\u0131 g\u00f6zlemleyece\u011fiz ve **elbow ** y\u00f6ntemi ile k\u00fcme say\u0131s\u0131n\u0131n ne olmas\u0131 gerekti\u011fine karar verece\u011fiz."}}