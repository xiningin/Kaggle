{"cell_type":{"87573387":"code","e6b4a1ec":"code","6fc25f91":"code","4e28302b":"code","e811bf98":"code","edc249cb":"code","1217f205":"code","1aa6fa2c":"code","bd7d30c8":"code","677a5f73":"code","38f73259":"code","62d93413":"code","d4c3f01e":"code","2b00eec5":"code","26393154":"code","023427af":"code","760b3b0d":"code","8433b0ad":"code","32fef654":"code","3215e904":"code","6d055770":"code","1075bdb9":"markdown","ec1c6ac2":"markdown","5f11a52f":"markdown","e3dae505":"markdown","d80130be":"markdown","908d2059":"markdown","f1aac340":"markdown","ba154c85":"markdown","05258254":"markdown","5df53df5":"markdown","831e8123":"markdown","07fd3d8a":"markdown","30f92a83":"markdown","8ab734a7":"markdown","ae9a8984":"markdown"},"source":{"87573387":"# (c) Sydney Sedibe, 2018\n\nimport warnings \nwarnings.filterwarnings('ignore')\nimport numpy as np # linear algebra\nimport pandas as pd # data processing, CSV file I\/O (e.g. pd.read_csv)\nimport matplotlib.pyplot as plt\nimport seaborn as sns\n\n# Input data files are available in the \"..\/input\/\" directory.\n# For example, running this (by clicking run or pressing Shift+Enter) will list the files in the input directory\n\nimport os\n\nfile_list = os.listdir(\"..\/input\")\nprint(file_list)","e6b4a1ec":"odf = pd.read_csv(\"..\/input\/\" + file_list[1], low_memory=False) # odf = original dataframe with complete dataset\nodf.head()","6fc25f91":"def showDetails(df):\n    print(\"-------------------------------------------------------------------------------------------------------------------\")\n    print('{:>35}'.format(\"Shape of dataframe:\") + '{:>12}'.format(str(df.shape)))\n    containsNulls = \"Yes\" if df.isnull().any().any() else \"No\"\n    print(\"Does dataframe contain null values: \" + containsNulls)\n    null_columns = df.columns[df.isnull().any()]\n    print(\"Number of columns with null values: \" + str(df[null_columns].isnull().any().sum()))\n    null_rows = df[df.isnull().any(axis=1)][null_columns]\n    print(\"Number of records with null values: \" + str(len(null_rows)))\n    print('{:>35}'.format(\"Percentage of null records:\") + '{:>6.2f}'.format(len(null_rows) \/ len(df) * 100) + \"%\")\n    print(\"-------------------------------------------------------------------------------------------------------------------\")\n\nshowDetails(odf)","4e28302b":"nv_df = odf[odf.isnull().any(axis=1)] # nv_df ==> null value dataframe\nshowDetails(nv_df)\nnv_df.head()","e811bf98":"def toFloat(string):\n    \"\"\"Function to convert Wage and Value strings to floats\"\"\"\n    string = string.strip(\" \")\n    if string[-1] == 'M':\n        return float(string[1:-1]) * 1000000\n    elif string[-1] == 'K':\n        return float(string[1:-1]) * 1000\n    else:\n        return float(string[1:])","edc249cb":"odf[\"NumericalWage\"] = [toFloat(x) for x in odf[\"Wage\"]]\nodf[\"NumericalValue\"] = [toFloat(x) for x in odf[\"Value\"]]","1217f205":"print(\"There are \" + str(len(odf[odf[\"NumericalWage\"] == 0])) + \" rows with a wage value of 0 in the NumericalWage column\")\nprint(\"There are \" + str(len(odf[odf[\"NumericalValue\"] == 0])) + \" rows with a player-value of 0 in the NumericalValue column\")","1aa6fa2c":"def replaceZeroValues(df, column):\n    subset = df[ df[column] != 0 ][column]\n    nonzero_mean = subset.mean()\n    print(\"The nonzero_mean for \" + column + \" is \" + str(nonzero_mean))\n    df.loc[ df[column] == 0, column ] = nonzero_mean","bd7d30c8":"replaceZeroValues(odf, \"NumericalWage\")\nreplaceZeroValues(odf, \"NumericalValue\")","677a5f73":"print(\"There are \" + str(len(odf[odf[\"NumericalWage\"] == 0])) + \" rows with a wage value of 0 in the NumericalWage column\")\nprint(\"There are \" + str(len(odf[odf[\"NumericalValue\"] == 0])) + \" rows with a player-value of 0 in the NumericalValue column\")","38f73259":"odf[\"NumericalValue\"].iloc[164]","62d93413":"# First, let's define a function to quickly scatter-plot two columns and draw a trendline that we can reuse\ndef myplot(x, y):\n    \"\"\"Draws a scatter plot of columns x and y\"\"\"\n    ax = plt.scatter(x, y)\n    z = np.polyfit(x, y, 1)\n    p = np.poly1d(z)\n    m, c = z\n    formula = (\"y = \" + str(m) + \" x \" + str(c)) if (c < 0) else (\"y = \" + str(m) + \" x + \" + str(c))\n    print(formula)\n    plt.title(x.name + \" vs \" + y.name)\n    plt.xlabel(x.name)\n    plt.ylabel(y.name)\n    plt.plot(x, p(x), \"red\")\n    plt.show()","d4c3f01e":"myplot(odf[\"Overall\"], odf[\"NumericalValue\"])","2b00eec5":"odf[odf['NumericalValue'] == 0] = odf['NumericalValue'].mean()","26393154":"odf[\"LogValue\"] = np.log(odf['NumericalValue'].astype('float64'))\nlogValueMax = odf[\"LogValue\"].min()\nlogValueMax","023427af":"myplot(odf[\"Overall\"], odf[\"LogValue\"])","760b3b0d":"stringRows = [x for x in odf[\"Sprint speed\"] if (\"+\" in x) or (\"-\" in x)]\nprint(\"There are \" + str(len(stringRows)) + \" rows with special characters in the 'Sprint speed' column.\")\nstringRows","8433b0ad":"def removeExtraChars(string):\n    sc = \"\" #special character: either '+' or '-'\n    if \"+\" in string:\n        sc = \"+\"\n    elif \"-\" in string:\n        sc = \"-\"\n    else:\n        return string\n    return string[:string.find(sc)]","32fef654":"odf[\"SprintSpeed\"] = odf[\"Sprint speed\"].apply(removeExtraChars)\ntotal = 0\n[total+1 for rowValue in odf[\"SprintSpeed\"] if \"+\" in rowValue or \"-\" in rowValue]\nprint(str(total) + \" rows in the new SprintSpeed column contain +\/-\")","3215e904":"odf['SprintSpeed'] = odf['SprintSpeed'].astype('float')\nodf.info()","6d055770":"myplot(odf[\"SprintSpeed\"], odf[\"LogValue\"])","1075bdb9":"**Now, let's inspect it...**","ec1c6ac2":"For those values, we will replace them with the respective average values of their columns.","5f11a52f":"**Let's inspect these null records to see if we can find the source of the missing data...**","e3dae505":"**Let's clean the Wage and value columns so that it only contains digits and no other characters.**","d80130be":"Now that we have a new cleaned column, let's plot it...","908d2059":"**Our dataframe contains 17 981 records, with 75 columns. There are 27 columns and 2 235 records with null values, and these null records account for 12.43% of the total number of records .**","f1aac340":"**This dataset contains information about Players from the EA Sports game, FIFA 18. We will take this data, clean it, analyse it, and gain insights from it. First let's load the data.**","ba154c85":"**A quick inspection of the null value records in our dataframe show that those null value records are for goalkeepers, mostly. This is because goalkeepers are not assigned a score for playing other positions on the field.**","05258254":"**The scatterplot is not linearly distributed. Let's log the player value column to try and get it to be more linear.**","5df53df5":"It seems some of the rows in the \"Sprint speed\" column have string values instead of int (e.g 73+7). Let's identify those rows.","831e8123":"Now the 'Wage' and 'Value' columns have been converted to floats. Unfortunately, there's a problem. Some of the values are zero.","07fd3d8a":"Let's clean the column up and drop the extra values...","30f92a83":"**Now let's plot overall versus value...**","8ab734a7":"Now the scatterplot is more linear. We can see there's a strong positive linear relationship between Overall player score and Market Value","ae9a8984":"And now..."}}