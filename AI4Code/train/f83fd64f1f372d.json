{"cell_type":{"454986c0":"code","cb9de905":"code","1a1c8acd":"code","1bc96a63":"code","8f700968":"code","ac57695a":"code","4ed578df":"code","4b2aee74":"code","83253f9c":"code","0cdd9e8d":"code","f7c278cf":"code","5e1a8cee":"code","30aabcfe":"code","21e3cabb":"code","9d968f01":"code","4d923e66":"markdown","e02ffeef":"markdown","fea7e5b5":"markdown","8fc66b31":"markdown","8a2fbc87":"markdown","144b3e0f":"markdown","3c3e73bc":"markdown","53395e21":"markdown","5152d90a":"markdown"},"source":{"454986c0":"from PIL import Image \nImage.open(\"\/kaggle\/input\/jpg-for-rating\/customer-feedback-flow.jpg\")","cb9de905":"import os\nfor dirname, _, filenames in os.walk('\/kaggle\/input'):\n    for filename in filenames:\n        print(os.path.join(dirname, filename))","1a1c8acd":"import pandas as pd\nimport scipy.stats as st\nfrom sklearn.preprocessing import MinMaxScaler\nfrom datetime import date","1bc96a63":"df = pd.read_csv(\"\/kaggle\/input\/amazon-review\/amazon_review.csv\")\ndf.head()","8f700968":"df[\"overall\"].value_counts()\ndf[\"overall\"].mean()","ac57695a":"df['reviewTime'] = pd.to_datetime(df['reviewTime']) \ndf['reviewTime'].max()\ncurrent_date = pd.to_datetime('2014-12-10 0:0:0')\ndf[\"days\"] = (current_date - df['reviewTime']).dt.days\ndf.head()","4ed578df":"time_based_rating=df.loc[df[\"days\"] <= 30, \"overall\"].mean() * 0.3 + \\\ndf.loc[(df[\"days\"] > 30) & (df[\"days\"] <= 90), \"overall\"].mean() * 0.28 + \\\ndf.loc[(df[\"days\"] > 90) & (df[\"days\"] <= 180), \"overall\"].mean() * 0.22 + \\\ndf.loc[(df[\"days\"] > 180), \"overall\"].mean() * 0.2\n\ntime_based_rating","4b2aee74":"user_based_rating=df.loc[df[\"total_vote\"] >0, \"overall\"].mean() * 0.55 + \\\ndf.loc[df[\"total_vote\"] ==0, \"overall\"].mean() * 0.45\nuser_based_rating","83253f9c":"hybrid_rating=time_based_rating*0.8+user_based_rating*0.2\nhybrid_rating","0cdd9e8d":"import scipy.stats as st\nimport math","f7c278cf":"df[df[\"total_vote\"]>0].head()","5e1a8cee":"up_vote = df[\"helpful_yes\"].tolist()\ndown_vote = (df[\"total_vote\"]-df[\"helpful_yes\"]).tolist()","30aabcfe":"votes = pd.DataFrame({\"up\": up_vote, \"down\": down_vote})","21e3cabb":"def wilson_lower_bound(up, down, confidence=0.95):\n    n = up + down\n    if n == 0:\n        return 0\n    z = st.norm.ppf(1 - (1 - confidence) \/ 2)\n    phat = 1.0 * up \/ n\n    return (phat + z * z \/ (2 * n) - z * math.sqrt((phat * (1 - phat) + z * z \/ (4 * n)) \/ n)) \/ (1 + z * z \/ n)","9d968f01":"votes[\"wilson_lower_bound\"] = votes.apply(lambda x: wilson_lower_bound(x[\"up\"], x[\"down\"]), axis=1)\n\nvotes.sort_values(\"wilson_lower_bound\", ascending=False).head(5)\n","4d923e66":">User-Based Weighted Average","e02ffeef":"This function uses up-votes and down-votes to calculate lower confidence level in order to sort reviews.","fea7e5b5":"# Sorting Amazon Product Review","8fc66b31":"\n* average rating    =4.5875\n* time-based rating =4.7051\n* user-based rating =4.1879\n********************************\n* hybrid rating     =4.6017 this score can be used for product rating\n","8a2fbc87":">Time-Based Weighted Average","144b3e0f":"> It is adopted a hybrid weighted average which contains time-based and user-based weighted average","3c3e73bc":"# DESCRIPTION\n\nAmazon dataset contains only one product and its reviews, review votes, ratings\n\n\nIn this kernel, it is calculated two things;\n* Product Rating\n\n> * Time-based\n> * User-based\n\n> Product rating is challenging in some cases for lots of industries.It is adopted a method consist of time-based and user-based calculation. At the end of the day, it is given the most weight to the latest rating. This gives us a better view of the current status of the product.Also it is calculated user reviews quality, if the review has more then zero votes, rating's weight is more than others.\n\n\n* Sorting Review\n\n> Reorganize the reviews objectively is the other challenging issue for companies.If review has the binary votes (like helpful Y\/N, like\/dislike, up\/down), we can use the distribution of this up and down votes and calculate confidence interval.The lower bound of this interval could be used for sorting review. This methodis called wilson lower bound.","53395e21":"As a result of lower_bound function, it is enabled top voted reviews(limited to 5 reviews)","5152d90a":" # Rating Amazon Product"}}