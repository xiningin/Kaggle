{"cell_type":{"a808dee0":"code","c4be42ce":"code","85a658bb":"code","98f6ed97":"code","f16fa965":"code","d2e9d470":"code","b1f886be":"code","5ee06281":"code","0e241d83":"code","eb4dcf47":"code","5b556080":"code","8d5500dd":"code","d6be8338":"code","1831b334":"code","fa06c7ee":"code","b3d74c69":"code","ca45938e":"code","70f69240":"code","c4f4f0b2":"code","5f5a3faf":"code","a456551e":"code","cbd10afd":"code","42b44d08":"code","ec887333":"markdown","8b2838f3":"markdown","7743a482":"markdown","d044b4a1":"markdown","c667fa5f":"markdown","48f617ae":"markdown","0f77d1cb":"markdown","cd6ff8ee":"markdown","323492ea":"markdown","c5f1da80":"markdown","0aa49e09":"markdown","a64c335d":"markdown","642286d9":"markdown"},"source":{"a808dee0":"# This Python 3 environment comes with many helpful analytics libraries installed\n# It is defined by the kaggle\/python Docker image: https:\/\/github.com\/kaggle\/docker-python\n# For example, here's several helpful packages to load\n\nimport numpy as np # linear algebra\nimport pandas as pd # data processing, CSV file I\/O (e.g. pd.read_csv)\nimport seaborn as sns\nimport matplotlib.pyplot as plt\n# Input data files are available in the read-only \"..\/input\/\" directory\n# For example, running this (by clicking run or pressing Shift+Enter) will list all files under the input directory\n\nimport os\nfor dirname, _, filenames in os.walk('\/kaggle\/input'):\n    for filename in filenames:\n        print(os.path.join(dirname, filename))\n\n# You can write up to 20GB to the current directory (\/kaggle\/working\/) that gets preserved as output when you create a version using \"Save & Run All\" \n# You can also write temporary files to \/kaggle\/temp\/, but they won't be saved outside of the current session","c4be42ce":"df_hotel = pd.read_csv('\/kaggle\/input\/hotel-booking-demand\/hotel_bookings.csv')\ndf_hotel.head()","85a658bb":"df_hotel.shape","98f6ed97":"df_hotel.info()","f16fa965":"# checking the data types \n# 1. change the arrival_date_month into int64\n# 2. change the children into int64 (it's better to do this after handling the missing values)\n# 3. change the reservation_status_date into datetime\n# 4. combining the arrival_date_year,arrival_date_month,arrival_date_day_of_month into single column","d2e9d470":"import calendar\ndf_hotel['arrival_date_month'] = df_hotel['arrival_date_month'].apply(lambda x : list(calendar.month_name).index(x))","b1f886be":"df_hotel['reservation_status_date'] = pd.to_datetime(df_hotel['reservation_status_date'], format='%Y-%m-%d')","5ee06281":"df_hotel['arrival_date'] = pd.to_datetime(df_hotel['arrival_date_year'].astype('str')+'-'+df_hotel['arrival_date_month'].astype('str')+'-'+df_hotel['arrival_date_day_of_month'].astype('str'))\ndf_hotel.drop(columns = ['arrival_date_year','arrival_date_month','arrival_date_day_of_month'],inplace=True)","0e241d83":"df_hotel.columns\ndf_hotel = df_hotel[['hotel', 'is_canceled', 'lead_time', 'arrival_date', 'arrival_date_week_number',\n       'stays_in_weekend_nights', 'stays_in_week_nights', 'adults', 'children',\n       'babies', 'meal', 'country', 'market_segment', 'distribution_channel',\n       'is_repeated_guest', 'previous_cancellations',\n       'previous_bookings_not_canceled', 'reserved_room_type',\n       'assigned_room_type', 'booking_changes', 'deposit_type', 'agent',\n       'company', 'days_in_waiting_list', 'customer_type', 'adr',\n       'required_car_parking_spaces', 'total_of_special_requests',\n       'reservation_status', 'reservation_status_date']]\ndf_hotel.head()","eb4dcf47":"missing_values = df_hotel.isnull().sum()\nmissing_values","5b556080":"# dropping the column which have atleast 70% of missing values\n# impute other missing values","8d5500dd":"column_name = missing_values[missing_values > (0.7*(df_hotel.shape[0]))].index.tolist()[0]\ndf_hotel.drop(column_name,axis=1,inplace=True)\n","d6be8338":"df_hotel['agent'].fillna(method='bfill',inplace=True)\ndf_hotel['country'].fillna(method='ffill',inplace=True)\ndf_hotel['children'].fillna(method='ffill',inplace=True)","1831b334":"# convert the children data type to int64\ndf_hotel['children'] = df_hotel['children'].astype('int')","fa06c7ee":"df_hotel.isnull().sum()","b3d74c69":"sns.displot(df_hotel,x='lead_time',hue ='is_canceled',binwidth=100,multiple='dodge',palette='magma')","ca45938e":"canceled_count = df_hotel[df_hotel['is_canceled'] == 1]\nsns.countplot(data = canceled_count,x='is_canceled',hue='hotel',palette='magma')","70f69240":"plt.figure(figsize=(14,6))\nsns.countplot(data = df_hotel,x = 'arrival_date_week_number',palette='magma')","c4f4f0b2":"for i in df_hotel_num:\n    sns.boxplot(data = df_hotel,x=i)\n    plt.show()","5f5a3faf":"df_hotel_box = df_hotel[['lead_time','arrival_date_week_number','stays_in_weekend_nights','stays_in_week_nights','agent','adr','total_of_special_requests']]","a456551e":"def remove_outlier(col):\n    sorted(col)\n    Q1,Q3 = col.quantile([0.25,0.75])\n    IQR = Q3-Q1\n    lower = Q1 - (1.5 * IQR)\n    upper = Q3 + (1.5 * IQR)\n    return lower,upper","cbd10afd":"for i in df_hotel_box:\n    low,up = remove_outlier(df_hotel[i])\n    df_hotel[i] = np.where(df_hotel[i]>up,up,df_hotel[i])\n    df_hotel[i] = np.where(df_hotel[i]<low,low,df_hotel[i])\n    sns.boxplot(data=df_hotel,x=i)\n    plt.show()","42b44d08":"df_hotel[['lead_time','arrival_date_week_number','stays_in_weekend_nights','stays_in_week_nights','total_of_special_requests']] = df_hotel[['lead_time','arrival_date_week_number','stays_in_weekend_nights','stays_in_week_nights','total_of_special_requests']].astype('int')","ec887333":"**Roadmap to solve the problem**\n1. import the dataset\n2. understand the nature of data using .shape,.info()\n3. check the summary of the dataset using .describe()\n4. Data Cleaning i.e Handle the missing values\n5. (removing the duplicates will check during model testing)\n6. Data Visualization i.e plot the graphs to understand the data better\n7. Check for outliers\n8. Feature Engineering(Scaling,Selection,Normalization)","8b2838f3":"Let's answer the following questions with visualization\n1. How lead time affects cancellation?\n2. Which type of hotel has more cancellation?\n3. Which week of the year experiences more bookings?","7743a482":"3. **Which week of the year experiences more booking?**","d044b4a1":"**Let's remove the outliers using IQR method**","c667fa5f":"**2. Which type of hotel has more cancellation?**","48f617ae":"# Handling the missing values","0f77d1cb":"# Remove the outliers","cd6ff8ee":"# Data Visualization","323492ea":"With increasing lead time the number of bookings canceled is increasing when compared to bookings which are not canceled","c5f1da80":"# Nature of the data","0aa49e09":"33rd week of the year have seen maximum number of bookings","a64c335d":"City Hotel has more number of cancellations than Resort Hotel","642286d9":"**1. How lead time affects cancellation?**"}}