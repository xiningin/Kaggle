{"cell_type":{"163c2ba9":"code","0e2d2179":"code","5a02700f":"code","f12fd7a8":"code","1e9baae9":"code","f4365e71":"code","fc0532bb":"code","233b3374":"code","1e7b1813":"code","8f8bb18a":"code","2bc9ddb5":"code","0983da72":"code","3d6cf0c6":"code","3060ab10":"code","582cedef":"code","b5136d5e":"code","d6210297":"code","1256475d":"code","b036ef9e":"code","62ac73fc":"code","b74a18fa":"code","1f03b628":"code","6dfe181b":"code","b56d3a4a":"code","0634d937":"code","b0b95f59":"code","e75d7ba1":"code","a0e30c92":"code","9558f60b":"code","a558dc89":"code","1f411140":"code","0be9a788":"code","ba0fafd0":"code","2fbfd17c":"code","92b72a0d":"code","55772fb8":"code","5684c1df":"code","a8291e58":"code","257916d6":"code","181a31ce":"code","7045ac64":"code","9847f7bc":"code","bb9ecd95":"code","5de77bae":"code","7c251054":"code","496a3eae":"code","047a5407":"code","5ad86742":"code","b036545c":"code","2b5b657b":"code","2b4c16fa":"code","dcc1bc1f":"code","dbfd4f84":"code","310d9c4b":"code","b5b54512":"markdown"},"source":{"163c2ba9":"# Python 3 environment with analytics libraries installed\n# as defined by the kaggle\/python Docker \n\nimport numpy as np \nimport pandas as pd \n\nimport os\nfor dirname, _, filenames in os.walk('\/kaggle\/input'):\n    for filename in filenames:\n        print(os.path.join(dirname, filename))","0e2d2179":"#other libraries\nimport seaborn as sns\nimport matplotlib.pyplot as plt \n%matplotlib inline\n\nimport sys\nimport warnings\n\nif not sys.warnoptions:\n    warnings.simplefilter(\"ignore\")","5a02700f":"#get datasets\ndf2015=pd.read_csv('..\/input\/world-happiness-report\/2015.csv')\ndf2016=pd.read_csv('..\/input\/world-happiness-report\/2016.csv')\ndf2017=pd.read_csv('..\/input\/world-happiness-report\/2017.csv')\ndf2018=pd.read_csv('..\/input\/world-happiness-report\/2018.csv')\ndf2019=pd.read_csv('..\/input\/world-happiness-report\/2019.csv')\ndf2020=pd.read_csv('..\/input\/world-happiness-report\/2020.csv')\n\ncoord2015=pd.read_csv('..\/input\/coordinates-2015\/latslongs.csv')","f12fd7a8":"df2015","1e9baae9":"df2015b=df2015.drop(['Region', 'Standard Error', 'Dystopia Residual'], axis=1)\n","f4365e71":"df2015b.rename(columns = {\"Happiness Rank\": \"Rank\", 'Happiness Score':'Score',\n                         'Economy (GDP per Capita)':'GDP', \n                         'Health (Life Expectancy)':'Life expectancy',                          \n                'Trust (Government Corruption)':'Corruption'},  \n          inplace = True) ","fc0532bb":"#correlation graph\ncorr1=df2015b.corr()\nsns.heatmap(corr1, cmap=\"icefire\")","233b3374":"# Plot categorical data in relation to RANK\nplt.figure(figsize=(17, 6))\ng=sns.barplot(x ='Country', y ='Happiness Rank', data = df2015, palette ='Paired') \nplt.xticks(rotation=90)","1e7b1813":"#seaborn line plot\nsns.lmplot(x='Happiness Rank', y='Health (Life Expectancy)', hue= 'Region', data=df2015, logistic=False)","8f8bb18a":"df2016","2bc9ddb5":"df2016b=df2016[['Country','Happiness Rank','Happiness Score',\n                'Economy (GDP per Capita)','Family' ,'Health (Life Expectancy)',\n                'Freedom' ,'Trust (Government Corruption)', 'Generosity']]\n\ndf2016b.rename(columns = {\"Happiness Rank\": \"Rank\", 'Happiness Score':'Score',\n                         'Economy (GDP per Capita)':'GDP', \n                         'Health (Life Expectancy)':'Life expectancy',                          \n                'Trust (Government Corruption)':'Corruption'},  \n          inplace = True) ","0983da72":"#correlation graph\ncorr2=df2016b.corr()\nsns.heatmap(corr2, cmap=\"magma\")","3d6cf0c6":"plt.figure(figsize=(12,6)) # Figure size\nsns.lineplot(x='Trust (Government Corruption)', y='Generosity', data=df2016, marker='d', color='darkblue') \nplt.title('Corruption and Generosity') # Title\nplt.show()","3060ab10":"df2017","582cedef":"df2017b=df2017[['Country', 'Happiness.Rank', 'Happiness.Score', 'Economy..GDP.per.Capita.', 'Family',\n       'Health..Life.Expectancy.', 'Freedom', 'Generosity',\n       'Trust..Government.Corruption.']]\n\ndf2017b.rename(columns = {\"Happiness.Rank\": \"Rank\", 'Happiness.Score':'Score',\n                         'Economy..GDP.per.Capita.':'GDP', 'Health..Life.Expectancy.':'Life expectancy',\n                          'Trust..Government.Corruption.':'Corruption'},  \n          inplace = True) \n","b5136d5e":"#correlation graph\ncorr3=df2017b.corr()\nsns.heatmap(corr3, cmap=\"tab10\")","d6210297":"df2017b.plot(kind='density', subplots=True, layout=(14,1), sharex=True, figsize=(10,10))\nplt.show()","1256475d":"df2018","b036ef9e":"df2018.rename(columns = {\"Country or region\": \"Country\", 'Overall rank':'Rank',\n                         'GDP per capita':'GDP', 'Social support': 'Family',\n                         'Healthy life expectancy':'Life expectancy',\n                          'Freedom to make life choices':'Freedom', \n                'Perceptions of corruption':'Corruption'},  \n          inplace = True) ","62ac73fc":"#correlation graph\ncorr4=df2018.corr()\nsns.heatmap(corr4, cmap=\"Set2\")","b74a18fa":"df2019","1f03b628":"df2019.rename(columns = {'Overall rank':'Rank',\"Country or region\": 'Country', 'GDP per capita':\"GDP\", 'Social support':'Family','Healthy life expectancy': 'Life expectancy','Freedom to make life choices': 'Freedom',\"Perceptions of corruption\": \"Corruption\"},  \n          inplace = True) ","6dfe181b":"df2019.corr()","b56d3a4a":"#correlation graph\ncorr5=df2019.corr()\nsns.heatmap(corr5, cmap=\"viridis\")","0634d937":"#Hapiness 2015-2019\na=df2015['Happiness Rank']\nb=df2016['Happiness Rank']\nc=df2017['Happiness.Rank']\nd=df2018['Rank']\ne=df2019['Rank']\n\n\nsns.kdeplot (a, label=\"2015 Happiness Rank\")\nsns.kdeplot (b, label=\"2016 Happiness Rank\")\nsns.kdeplot (c, label=\"2017 Happiness Rank\")\nsns.kdeplot (d, label=\"2018 Happiness Rank\")\nsns.kdeplot (e, label=\"2019 Happiness Rank\")\n\nplt.legend()","b0b95f59":"df2020","e75d7ba1":"regions = df2020['Regional indicator'].value_counts()\nsns.set(style=\"darkgrid\")\nsns.barplot(regions.index, regions.values, alpha=0.9)\nplt.ylabel('Frequency', fontsize=12)\nplt.xlabel('Regions', fontsize=12)\nplt.xticks(rotation=70)\nplt.show()","a0e30c92":"#correlation graph\ncorr6=df2020.corr()\nsns.heatmap(corr6, cmap=\"rocket\")","9558f60b":"sns.lmplot(x='Ladder score', y='Perceptions of corruption', data=df2020, logistic=False,  markers=[\"s\"])","a558dc89":"##create rank column for 2020\ndf2020['Rank'] = df2020.index","1f411140":"##update 2020 table \ndf2020b=df2020[['Rank','Country name', 'Ladder score', 'Logged GDP per capita' ,'Social support', \n                'Healthy life expectancy','Freedom to make life choices', \n                'Generosity', 'Perceptions of corruption']]","0be9a788":"df2020b.rename(columns = {\"Country name\": \"Country\", 'Ladder score':'Score',\n                         'Logged GDP per capita':'GDP', 'Social support': 'Family',\n                         'Healthy life expectancy':'Life expectancy',\n                          'Freedom to make life choices':'Freedom', \n                'Perceptions of corruption':'Corruption'},  \n          inplace = True) ","ba0fafd0":"#update Rank to start at 1 and adjust the rest by 1\ndf2020b.Rank=(df2020b.Rank+1)","2fbfd17c":"df2020b","92b72a0d":"# Plot top 5 happy countries through the years\nf, axes = plt.subplots(3, 2, figsize=(13, 8), sharex=False)\nsns.barplot(df2015b.Country.head(5) , df2015b.Rank , data = df2015b, palette ='Set1', ax=axes[0, 0])\nsns.barplot(df2016b.Country.head(5) , df2016b.Rank , data = df2016b, palette ='Set2', ax=axes[0, 1])\nsns.barplot(df2017b.Country.head(5) , df2017b.Rank , data = df2017b, palette ='Set3', ax=axes[1, 0])\nsns.barplot(df2018.Country.head(5) , df2018.Rank , data = df2018, palette ='mako', ax=axes[1, 1])\nsns.barplot(df2019.Country.head(5) , df2019.Rank , data = df2019, palette ='YlOrBr', ax=axes[2, 0])\nsns.barplot(df2020b.Country.head(5) , df2020b.Rank , data = df2020b, palette ='cubehelix', ax=axes[2, 1]) \n","55772fb8":"# Plot 5 LEAST happy countries throughout 2015-2020\nf, axes = plt.subplots(3, 2, figsize=(14, 12), sharex=False)\nsns.barplot(df2015b.Country.tail(5) , df2015b.Rank , data = df2015b, palette =\"winter\", ax=axes[0, 0])\nsns.barplot(df2016b.Country.tail(5) , df2016b.Rank , data = df2016b, palette ='Spectral', ax=axes[0, 1])\nsns.barplot(df2017b.Country.tail(5) , df2017b.Rank , data = df2017b, palette ='coolwarm', ax=axes[1, 0])\nsns.barplot(df2018.Country.tail(5) , df2018.Rank , data = df2018, palette ='mako', ax=axes[1, 1])\nsns.barplot(df2019.Country.tail(5) , df2019.Rank , data = df2019, palette ='YlOrBr', ax=axes[2, 0])\nsns.barplot(df2020b.Country.tail(5) , df2020b.Rank , data = df2020b, palette ='cubehelix', ax=axes[2, 1])","5684c1df":"#heatmap with folium\nimport folium\nfrom folium import plugins\nfrom folium.plugins import HeatMap\n\n#starting over Central Africa\nunhappyMap = folium.Map(location=[6.6194, 20.9367],\n                    zoom_start = 1) \n","a8291e58":"dfmap=df2020b[['Country', 'Rank']]\n\ntogether = pd.merge(dfmap, coord2015, on=\"Country\")\ntogether","257916d6":"# Ensure lats and longs datatype are floats\ntogether['Latitude'] = together['Latitude'].astype(float)\ntogether['Longitude'] = together['Longitude'].astype(float)\n\n# List comprehension to make a list of lists\nheat_data = [[row['Latitude'],row['Longitude']] for index, row in together.iterrows()]\n\n# Plot it on the map\nHeatMap(heat_data).add_to(unhappyMap)\n\n# Display the map\nunhappyMap","181a31ce":"pd.set_option('display.max_rows', None)\nc=df2015b.sort_values(by=['Country'])\nc","7045ac64":"##2015\nx=df2015b['Country'].values\ny=df2015b['Family'].values\nfig, ax = plt.subplots(figsize =(10, 24))   \ncolors='salmon','navy','forestgreen', 'goldenrod'\n\nax.barh(x, y, color=colors, edgecolor=(0,0,0)) \nax.set_title('2015 Family Support by Country') \nplt.show()","9847f7bc":"####make new\nx = df2020b['Rank']\ny= df2020b['Family']\ncolors = ('darkorange')\n \n# Plot\nplt.scatter(x, y, c=colors, alpha=0.2)\nplt.title('2020 Family and Rank relation')\nplt.xlabel('Rank')\nplt.ylabel('Family support')\nplt.show()","bb9ecd95":"##US throughout time\nUS15=df2015b.loc[df2015b['Country'] == 'United States']\nUS15","5de77bae":"US16=df2016b.loc[df2016b['Country'] == 'United States']\nUS16","7c251054":"US17=df2017b.loc[df2017b['Country'] == 'United States']\n#switch columns position\nUS17=US17[['Country','Rank','Score','GDP','Family','Life expectancy','Freedom','Corruption','Generosity']]\nUS17","496a3eae":"US18=df2018.loc[df2018['Country'] == 'United States']\n#switch columns position\nUS18=US18[['Country','Rank','Score','GDP','Family','Life expectancy','Freedom','Corruption','Generosity']]\nUS18","047a5407":"US19=df2019.loc[df2019['Country'] == 'United States']\n#switch columns position\nUS19=US19[['Country','Rank','Score','GDP','Family','Life expectancy','Freedom','Corruption','Generosity']]\nUS19","5ad86742":"US20=df2020b.loc[df2020b['Country'] == 'United States']\n#switch columns position\nUS20=US20[['Country','Rank','Score','GDP','Family','Life expectancy','Freedom','Corruption','Generosity']]\nUS20","b036545c":"#join results for US through 2015-2020\nj = [US15, US16, US17, US18, US19, US20]\nUSA = pd.concat(j, keys=[\"2015\", \"2016\", \"2017\", \"2018\", \"2019\", \"2020\"])","2b5b657b":"#reset indeces\nUSA.reset_index(level=1, inplace=True)\nUSA.reset_index(inplace=True)\n#drop extra column\nUSA.drop('level_1', axis=1, inplace=True)\n#rename index to year\nUSA.rename(columns = {\"index\":'Year'}, inplace = True) \nUSA","2b4c16fa":"##make new\nc=sns.catplot(x=\"Year\", y='Rank', data=USA, palette ='icefire', height=4, aspect=2)\nplt.xticks(rotation=50)","dcc1bc1f":"sns.regplot(x='Rank', y='Generosity', data=USA, logistic=False, color='sienna')","dbfd4f84":"# gca = 'get current axis'\nax = plt.gca()\n\nUSA.plot(kind='line',x='Year',y='Rank',ax=ax)\nUSA.plot(kind='line',x='Year',y='Score', color='red', ax=ax)\nUSA.plot(kind='line',x='Year',y='Family', color='green', ax=ax)\n\nplt.show()","310d9c4b":"##make new\n#compare results \nfig, axes = plt.subplots(3, 2, figsize=(10,8), sharex=False)\ndf2015b.plot(x='GDP', y=['Corruption'], ax=axes[0, 0], color='darkorange')\ndf2016b.plot(x='GDP', y=['Corruption'], ax=axes[0, 1], ls=\"--\", color='mediumvioletred')\ndf2017b.plot(x='GDP', y=['Corruption'], ax=axes[1, 0], ls=\"dashdot\", color='turquoise')\ndf2018.plot(x='GDP', y=['Corruption'], ax=axes[1, 1], ls=\"dotted\", color='saddlebrown')\ndf2019.plot(x='GDP', y=['Corruption'], ax=axes[2, 0], ls=\":\", color='olivedrab')\ndf2020b.plot(x='GDP', y=['Corruption'], ax=axes[2, 1], ls=\"-\", color='steelblue')\nplt.show()","b5b54512":"**Task**:   \n\nCompare countries by happiness and other human metrics   \nusing Graphics, EDA and explainations.   \n"}}