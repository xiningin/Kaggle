{"cell_type":{"5a711159":"code","9f681929":"code","6245644a":"code","eb9e19b8":"code","fceb69c6":"code","7ff0fc53":"code","6903e73f":"code","558d64e6":"code","bceae13b":"code","e9e0027f":"code","c3a6639a":"code","01f5d07d":"code","981a222c":"code","ac5024a2":"code","33d52793":"code","c07ada9e":"code","0f22ca18":"code","d4b26d6c":"code","562f2d41":"code","bada80d1":"code","15d655a9":"code","0155f38c":"code","bbb4e6f0":"code","75b6da21":"code","d637fd21":"code","8ec1e6cf":"code","684bac75":"code","272ccd30":"code","581c1699":"code","737087b0":"code","11b768a2":"code","d1ac7699":"code","187890f0":"code","c19acd38":"code","4275c956":"code","ac84fbab":"code","75b1ed22":"code","9e92f8af":"code","4ba9890b":"code","93582c08":"code","23d12861":"code","5f687a1b":"code","4c00673b":"code","9de8fcc0":"code","06d12918":"code","96e7403d":"code","592c2a19":"code","09911833":"code","1fe09f01":"code","eca5a7f8":"code","1fd31313":"code","de662cce":"code","a4b6e74e":"markdown","cfe91461":"markdown","b01f61ee":"markdown","8820981e":"markdown","484bb89c":"markdown","c045cc8b":"markdown","daa0c1ef":"markdown","513e328a":"markdown","35c9af84":"markdown","12a9ac86":"markdown","59797390":"markdown","4c9837a8":"markdown","d40a99b1":"markdown","e7dc507b":"markdown","e5f01e0d":"markdown","bdaf78f6":"markdown","3ebb3692":"markdown","fb9b0539":"markdown","1c283627":"markdown","6b251859":"markdown","ca42a46e":"markdown","a97aa590":"markdown","321b3efe":"markdown","88e7a63c":"markdown","0edc1ffc":"markdown","9c14b464":"markdown","74a64836":"markdown","517ce678":"markdown","c59f6fa0":"markdown","7fd08a45":"markdown","a84f8501":"markdown","54493923":"markdown","f602dafe":"markdown","21b375b1":"markdown","3b238084":"markdown","1bbb26cc":"markdown","20580a4a":"markdown","b10639f8":"markdown","03db7343":"markdown","5c03e298":"markdown","5f9c082f":"markdown","43847d18":"markdown","10b47c95":"markdown","8e8ab81b":"markdown","2431cda1":"markdown"},"source":{"5a711159":"# Import neccesary packages\nimport pandas as pd\nimport pandas as pd\nimport numpy as np\nimport seaborn as sns\nimport matplotlib.pyplot as plt\n%matplotlib inline\nfrom sklearn.model_selection import train_test_split","9f681929":"# Importing dataset\ndata = pd.read_csv(\"..\/input\/mental-health-in-tech-survey\/survey.csv\")\ndata.head(5)","6245644a":"# First tranforms \"United States\" and \"United Kingdom\" to their initial US and UK respectively.\ndata['Country'].replace(to_replace = ['United States'],value = 'US', inplace = True)\ndata['Country'].replace(to_replace = ['United Kingdom'],value = 'UK', inplace = True)","eb9e19b8":"# Check to see how many respondents come from for each countries \ndata['Country'].value_counts()","fceb69c6":"# Countries proportion \nfig1 = plt.figure(figsize=(10,10))\nax1 = fig1.add_axes((0,0,.5,1))\nlabels =  data['Country'].value_counts().index\nsizes = data['Country'].value_counts()\npercentages = sizes \/ 1259 * 100\n\nax1.pie(percentages, labels=labels, autopct='%1.1f%%', shadow=True, startangle=90)\nax1.axis('equal')\n\nplt.savefig('distributionofsurvey.png')\n\nplt.show()\n\nplt.close()","7ff0fc53":"# Filtering countries\ncountries = ['US','UK']\ndata = data[data['Country'].isin(countries)]\ndata['Country'].value_counts()","6903e73f":"data['state'].value_counts()","558d64e6":"data.drop(columns=['state'],inplace = True)","bceae13b":"total_nulls = data.isnull().sum().sort_values(ascending=False)\npercent_nulls = (total_nulls\/data.isnull().count()).sort_values(ascending=False)\nnulls = pd.concat([total_nulls, percent_nulls], axis=1, keys=['Total','Percentages'])\nnulls.head()\nprint(nulls)","e9e0027f":"data.drop(columns=['Timestamp','comments'],inplace=True)","c3a6639a":"data['work_interfere'].value_counts()","01f5d07d":"data['work_interfere'].fillna('NA', inplace = True)\ndata['work_interfere'].value_counts()","981a222c":"data['self_employed'].value_counts()","ac5024a2":"data['self_employed'].fillna(\"No\", inplace = True)\ndata['self_employed'].value_counts()","33d52793":"# The result shows 'Gender' contains ununiformed values\ndata['Gender'].value_counts()","c07ada9e":"# Transform all of the values to lower cases for easy read\ndata.Gender = data.Gender.str.lower()\ndata['Gender'].value_counts()","0f22ca18":"# Recoding male values to male, female values to female, any other gender indentification is other\nm = ['male','m','make','male-ish', 'maile', 'cis male','mal','male (cis)','guy (-ish) ^_^','male ','man','msle','mail','malr','cis man']\nf = ['female','f','woman','cis female','femake','female ', 'cis-female\/femme','female (cis)','femail']\no = ['trans-female','queer\/she\/they','non-binary','nah', 'all', 'enby', 'fluid', 'genderqueer','androgyne','agender', 'male leaning androgynous','trans woman','neuter','something kinda male?', 'female (trans)', 'queer', 'a little about you','p','ostensibly male, unsure what that really means']\n\ndata.Gender.loc[data.Gender.isin(m)]= 'male'\ndata.Gender.loc[data.Gender.isin(f)]= 'female'\ndata.Gender.loc[data.Gender.isin(o)]= 'other'\n\ndata['Gender'].value_counts()","d4b26d6c":"data['no_employees'].value_counts()","562f2d41":"# Transform 'More than 1000' to >1000\ndata['no_employees'].replace(to_replace =['More than 1000'], value =['>1000'] , inplace = True)\ndata['no_employees'].value_counts()","bada80d1":"data['Age'].unique()","15d655a9":"data.drop(data[data['Age'] < 16].index, inplace=True)\ndata.drop(data[data['Age'] > 65].index, inplace=True)\n\ndata['Age'].unique()","0155f38c":"print(np.sort(data['Age'].unique()))","bbb4e6f0":"sns.set_style(\"whitegrid\")\nplt.figure(figsize = (8,5))\nplt.title('Get Treatment of Survey Respondents', fontsize=18, fontweight='bold')\neda_percentage = data['treatment'].value_counts(normalize = True).rename_axis('treatment').reset_index(name = 'Percentage')\n\nax = sns.barplot(x = 'treatment', y = 'Percentage', data = eda_percentage.head(10), palette='Dark2')\nfor p in ax.patches:\n    width = p.get_width()\n    height = p.get_height()\n    x, y = p.get_xy() \n    ax.annotate(f'{height:.0%}', (x + width\/2, y + height*1.02), ha='center', fontweight='bold')","75b6da21":"fig, (ax1, ax2) = plt.subplots(nrows=1, ncols=2)\nplt.figure(figsize = (16,4))\nfig.set_figheight(5)\nfig.set_figwidth(20)\nplt.subplots_adjust(wspace = 0)\n# plt.suptitle('Main Title')\n\n# No of respondents by Country\nsns.countplot(x = data['Country'], hue = data['tech_company'], ax=ax1, palette=\"Dark2\")\nax1.set_title('No. of Respondents by Country and tech_company', fontsize = 20)\nax1.set_xticklabels(ax1.get_xticklabels(), rotation=15, ha=\"right\")\nax1.set_xlabel('Country', fontsize = 18)\nax1.set_ylabel('Count', fontsize = 18)\nax1.legend(['Not in Tech', 'In Tech'])\n\n# No of respondents by Company Size\nsns.countplot(x = data['no_employees'], hue = data['tech_company'], ax=ax2, \n              order = ['1-5', '6-25', '26-100', '100-500', '500-1000', '>1000'], palette=\"Dark2\")\nax2.set_title('No. of Respondents by Company Size and tech_company', fontsize = 20)\nax2.set_xticklabels(ax2.get_xticklabels(), rotation=15, ha=\"right\")\nax2.set_xlabel('Company Size', fontsize = 18)\nax2.set_ylabel('Count', fontsize = 18)\nax2.legend(['Not in Tech', 'In Tech']);","d637fd21":"np.sort(data.Age.unique())","8ec1e6cf":"plt.figure(figsize = (20,10))\nsns.distplot(data['Age'],label = 'Skewness : %.2f'%(data['Age'].skew()))\nplt.legend(loc = 0, fontsize = 10)\nplt.title('Distribution for Age of Survey Respondents')\n\nplt.show()","684bac75":"sns.boxplot(x = \"Age\", y = \"treatment\", data = data, palette=\"Dark2\")\nplt.title('Boxplot for Age of Survey Respondents')\nage = str(data['Age'].describe().round(2))\nplt.text(56, 0.95, age)\nplt.show()","272ccd30":"pal = sns.color_palette(\"Dark2\")\nprint(pal.as_hex())","581c1699":"fig, (ax1, ax2) = plt.subplots(nrows=1, ncols=2)\nplt.figure(figsize = (16,4))\nfig.set_figheight(5)\nfig.set_figwidth(20)\nplt.subplots_adjust(wspace = 0)\n\ntotal = data['Gender'].count()\nmales = data[data['Gender'] == 'male']['Gender'].count()\nfemales = data[data['Gender'] == 'female']['Gender'].count()\nother = data[data['Gender'] == 'other']['Gender'].count()\n\nlabels = 'Male', 'Female', 'Other'\nsizes = [males\/total, females\/total, other\/total]\ncolors = ['#1b9e77', '#d95f02', '#7570b3']\nexplode = ( 0.03, 0, 0)\n\nax2.pie(sizes, explode= explode, labels = labels, colors=colors, autopct='%1.1f%%',shadow=False, startangle=140)\nax2.axis('equal')\nax2.set_title('Overall gender prop%',pad=20, fontsize=20)\n\n#Barchart for seek for treatment\nsns.countplot(data['Gender'], hue = data['treatment'], ax=ax1, palette=\"Dark2\")\nax1.set_xticklabels(ax1.get_xticklabels(), rotation=15, ha='right')\nax1.set_title('Gender by treatment', pad =20,fontsize = 20)\nax1.set_xlabel('Gender')\nax1.set_ylabel('count')\nax1.legend(['Yes', 'No'])\n\n\nfig.show()","737087b0":"data.columns","11b768a2":"list_col=['Age', 'Gender', 'self_employed', 'family_history', 'treatment',\n       'work_interfere', 'no_employees', 'remote_work', 'tech_company',\n       'benefits', 'care_options', 'wellness_program', 'seek_help',\n       'anonymity', 'leave', 'mental_health_consequence',\n       'phys_health_consequence', 'coworkers', 'supervisor',\n       'mental_health_interview', 'phys_health_interview',\n       'mental_vs_physical', 'obs_consequence']\n\nfor col in list_col: \n    print('{} :{} ' . format(col.upper(),data[col].unique()))","d1ac7699":"from sklearn.preprocessing import LabelEncoder\nle = LabelEncoder()\ndfencode = data.copy() ## we can seperate orginal format of variables by using copy()","187890f0":"# Label Encoding the categorical variables\n\nobject_cols = ['Gender', 'Country', 'self_employed', 'family_history', 'treatment',\n       'work_interfere', 'no_employees', 'remote_work', 'tech_company',\n       'benefits', 'care_options', 'wellness_program', 'seek_help',\n       'anonymity', 'leave', 'mental_health_consequence',\n       'phys_health_consequence', 'coworkers', 'supervisor',\n       'mental_health_interview', 'phys_health_interview',\n       'mental_vs_physical', 'obs_consequence']\nfor col in object_cols:\n    le.fit(dfencode[col])\n    dfencode[col] = le.transform(dfencode[col])","c19acd38":"dfencode.head()","4275c956":"corr = dfencode.corr(method=\"spearman\")\ncorr","ac84fbab":"f, ax = plt.subplots(figsize=(15, 15))\nsns.heatmap(corr,\n            vmax=.8, \n            center = 0,\n            square=True,\n            cbar=True, \n            annot=True, \n            fmt='.2f', \n            annot_kws={'size': 10}, \n           )\n\nax.set_xticklabels(\n    ax.get_xticklabels(),\n    rotation=45,\n    horizontalalignment='right'\n);\nplt.show()\n","75b1ed22":"plt.figure(figsize = (20,6))\nplt.subplot(1,2,1)\neda_percentage = data['family_history'].value_counts(normalize = True).rename_axis('family_history').reset_index(name = 'Percentage')\nax = sns.barplot(x = 'family_history', y = 'Percentage', data = eda_percentage, palette=dict(No = '#d95f02', Yes = '#1b9e77'))\nfor p in ax.patches:\n    width = p.get_width()\n    height = p.get_height()\n    x, y = p.get_xy() \n    ax.annotate(f'{height:.0%}', (x + width\/2, y + height*1.02), ha='center', fontweight='bold')\n\nplt.title('Family History of Survey Respondents', fontsize=18, fontweight='bold')\nplt.xticks(fontsize=16)\nplt.yticks(fontsize=16)\nplt.legend(fontsize=16)\n\nplt.subplot(1,2,2)\nsns.countplot(data['family_history'], hue = data['treatment'],  palette=dict(No = '#d95f02', Yes = '#1b9e77'))\nplt.title('Family History of Survey Respondents', fontsize=18, fontweight='bold')\nplt.xticks(fontsize=16)\nplt.yticks(fontsize=16)\nplt.legend(fontsize=16)\nplt.show()","9e92f8af":"plt.figure(figsize = (20,6))\nplt.subplot(1,2,1)\neda_percentage = data['work_interfere'].value_counts(normalize = True).rename_axis('work_interfere').reset_index(name = 'Percentage')\nax = sns.barplot(x = 'work_interfere', y = 'Percentage', data = eda_percentage, palette='Dark2')\nfor p in ax.patches:\n    width = p.get_width()\n    height = p.get_height()\n    x, y = p.get_xy() \n    ax.annotate(f'{height:.0%}', (x + width\/2, y + height*1.02), ha='center', fontweight='bold')\n\nplt.title('Work Interference of Survey Respondents', fontsize=18, fontweight='bold')\nplt.xticks(fontsize=16)\nplt.yticks(fontsize=16)\nplt.legend(fontsize=16)\n\nplt.subplot(1,2,2)\nsns.countplot(data['work_interfere'], hue = data['treatment'],  palette=dict(No = '#d95f02', Yes = '#1b9e77'))\nplt.title('Work Interference of Survey Respondents', fontsize=18, fontweight='bold')\nplt.xticks(fontsize=16)\nplt.yticks(fontsize=16)\nplt.legend(fontsize=16)","4ba9890b":"plt.figure(figsize=(20,6))\nplt.subplot(1,2,1)\neda_percentage = data['obs_consequence'].value_counts(normalize = True).rename_axis('obs_consequence').reset_index(name = 'Percentage')\nax = sns.barplot(x = 'obs_consequence', y = 'Percentage', data = eda_percentage, palette=dict(No = '#d95f02', Yes = '#1b9e77'))\nfor p in ax.patches:\n    width = p.get_width()\n    height = p.get_height()\n    x, y = p.get_xy() \n    ax.annotate(f'{height:.0%}', (x + width\/2, y + height*1.02), ha='center', fontweight='bold')\n\nplt.title('Consequence observed for disclosing the Mental Health', fontsize=18, fontweight='bold')\nplt.xticks(fontsize=16)\nplt.yticks(fontsize=16)\nplt.legend(fontsize=16)\n\nplt.subplot(1,2,2)\nsns.countplot(data['obs_consequence'], hue = data['treatment'], palette='Dark2')\n    \nplt.title('Consequence observed for disclosing the Mental Health', fontsize=18, fontweight='bold')\nplt.xticks(fontsize=16)\nplt.yticks(fontsize=16)\nplt.legend(fontsize=16)","93582c08":"plt.figure(figsize = (20,6))\nplt.subplot(1,2,1)\neda_percentage = data['benefits'].value_counts(normalize = True).rename_axis('benefits').reset_index(name = 'Percentage')\nax = sns.barplot(x = 'benefits', y = 'Percentage', data = eda_percentage, palette='Dark2')\nfor p in ax.patches:\n    width = p.get_width()\n    height = p.get_height()\n    x, y = p.get_xy() \n    ax.annotate(f'{height:.0%}', (x + width\/2, y + height*1.02), ha='center', fontweight='bold')\n\nplt.title('Benefits provided to the Employees', fontsize=18, fontweight='bold')\nplt.xticks(fontsize=16)\nplt.yticks(fontsize=16)\nplt.legend(fontsize=16)\n\nplt.subplot(1,2,2)\nsns.countplot(data['benefits'], hue = data['treatment'], palette='Dark2')\nplt.title('Benefits provided to the Employees', fontsize=18, fontweight='bold')\nplt.xticks(fontsize=16)\nplt.yticks(fontsize=16)\nplt.legend(fontsize=16)","23d12861":"plt.figure(figsize=(20,6))\nplt.subplot(1,2,1)\neda_percentage = data['care_options'].value_counts(normalize = True).rename_axis('care_options').reset_index(name = 'Percentage')\nax = sns.barplot(x = 'care_options', y = 'Percentage', data = eda_percentage, palette='Dark2')\nfor p in ax.patches:\n    width = p.get_width()\n    height = p.get_height()\n    x, y = p.get_xy() \n    ax.annotate(f'{height:.0%}', (x + width\/2, y + height*1.02), ha='center', fontweight='bold')\n\nplt.title('Mental Healthcare acknowledgement', fontsize=18, fontweight='bold')\nplt.xticks(fontsize=16)\nplt.yticks(fontsize=16)\nplt.legend(fontsize=16)\n\nplt.subplot(1,2,2)\nsns.countplot(data['care_options'], hue = data['treatment'], palette='Dark2')\nplt.title('Mental Heathcare acknowledgement', fontsize=18, fontweight='bold')\nplt.xticks(fontsize=16)\nplt.yticks(fontsize=16)\nplt.legend(fontsize=16)","5f687a1b":"plt.figure(figsize=(20,6))\nplt.subplot(1,2,1)\neda_percentage = data['wellness_program'].value_counts(normalize = True).rename_axis('wellness_program').reset_index(name = 'Percentage')\nax = sns.barplot(x = 'wellness_program', y = 'Percentage', data = eda_percentage, palette='Dark2')\nfor p in ax.patches:\n    width = p.get_width()\n    height = p.get_height()\n    x, y = p.get_xy() \n    ax.annotate(f'{height:.0%}', (x + width\/2, y + height*1.02), ha='center', fontweight='bold')\n\nplt.title('Mental Health in Wellness Program provided to the Employees', fontsize=16, fontweight='bold')\nplt.xticks(fontsize=16)\nplt.yticks(fontsize=16)\nplt.legend(fontsize=16)\n\nplt.subplot(1,2,2)\nsns.countplot(data['wellness_program'], hue = data['treatment'], palette='Dark2')\nplt.title('Mental Health in Wellness Program provided to the Employees', fontsize=16, fontweight='bold')\nplt.xticks(fontsize=16)\nplt.yticks(fontsize=16)\nplt.legend(fontsize=16)","4c00673b":"plt.figure(figsize=(20,6))\nplt.subplot(1,2,1)\neda_percentage = data['seek_help'].value_counts(normalize = True).rename_axis('seek_help').reset_index(name = 'Percentage')\nax = sns.barplot(x = 'seek_help', y = 'Percentage', data = eda_percentage, palette='Dark2')\nfor p in ax.patches:\n    width = p.get_width()\n    height = p.get_height()\n    x, y = p.get_xy() \n    ax.annotate(f'{height:.0%}', (x + width\/2, y + height*1.02), ha='center', fontweight='bold')\n\nplt.title('Mental Health in Wellness Program provided to the Employees', fontsize=16, fontweight='bold')\nplt.xticks(fontsize=16)\nplt.yticks(fontsize=16)\nplt.legend(fontsize=16)\n\nplt.subplot(1,2,2)\nsns.countplot(data['seek_help'], hue = data['treatment'], palette='Dark2')\nplt.title('Mental Health in Wellness Program provided to the Employees', fontsize=16, fontweight='bold')\nplt.xticks(fontsize=16)\nplt.yticks(fontsize=16)\nplt.legend(fontsize=16)","9de8fcc0":"plt.figure(figsize=(20,6))\nplt.subplot(1,2,1)\neda_percentage = data['anonymity'].value_counts(normalize = True).rename_axis('anonymity').reset_index(name = 'Percentage')\nax = sns.barplot(x = 'anonymity', y = 'Percentage', data = eda_percentage, palette='Dark2')\nfor p in ax.patches:\n    width = p.get_width()\n    height = p.get_height()\n    x, y = p.get_xy() \n    ax.annotate(f'{height:.0%}', (x + width\/2, y + height*1.02), ha='center', fontweight='bold')\n\nplt.title('Anonymity for Mental Health provided to the Employees', fontsize=16, fontweight='bold')\nplt.xticks(fontsize=16)\nplt.yticks(fontsize=16)\nplt.legend(fontsize=16)\n\nplt.subplot(1,2,2)\nsns.countplot(data['anonymity'], hue = data['treatment'], palette='Dark2')\nplt.title('Anonymity for Mental Health provided to the Employees', fontsize=16, fontweight='bold')\nplt.xticks(fontsize=16)\nplt.yticks(fontsize=16)\nplt.legend(fontsize=16)","06d12918":"plt.figure(figsize=(20,6))\nplt.subplot(1,2,1)\neda_percentage = data['leave'].value_counts(normalize = True).rename_axis('leave').reset_index(name = 'Percentage')\nax = sns.barplot(x = 'leave', y = 'Percentage', data = eda_percentage, palette='Dark2')\nfor p in ax.patches:\n    width = p.get_width()\n    height = p.get_height()\n    x, y = p.get_xy() \n    ax.annotate(f'{height:.0%}', (x + width\/2, y + height*1.02), ha='center', fontweight='bold')\n\nplt.title('  Leave for Mental Health provided to the Employees', fontsize=18, fontweight='bold')\nplt.xticks(fontsize=13)\nplt.yticks(fontsize=16)\nplt.legend(fontsize=16)\n\nplt.subplot(1,2,2)\nsns.countplot(data['leave'], hue = data['treatment'], palette='Dark2')\nplt.title('Leave for Mental Health provided to the Employees', fontsize=18, fontweight='bold')\nplt.xticks(fontsize=13)\nplt.yticks(fontsize=16)\nplt.legend(fontsize=16)\n","96e7403d":" plt.figure(figsize=(20,6))\nplt.subplot(1,2,1)\neda_percentage = data['mental_health_interview'].value_counts(normalize = True).rename_axis('mental_health_interview').reset_index(name = 'Percentage')\nax = sns.barplot(x = 'mental_health_interview', y = 'Percentage', data = eda_percentage, palette='Dark2')\nfor p in ax.patches:\n    width = p.get_width()\n    height = p.get_height()\n    x, y = p.get_xy() \n    ax.annotate(f'{height:.0%}', (x + width\/2, y + height*1.02), ha='center', fontweight='bold')\n\nplt.title('Discussing Mental Health with the Interviewer', fontsize=18, fontweight='bold')\nplt.xticks(fontsize=16)\nplt.yticks(fontsize=16)\nplt.legend(fontsize=16)\n\nplt.subplot(1,2,2)\nsns.countplot(data['mental_health_interview'], hue = data['treatment'], palette='Dark2')\nplt.title('Discussing Mental Health with the Interviewer', fontsize=18, fontweight='bold')\nplt.xticks(fontsize=16)\nplt.yticks(fontsize=16)\nplt.legend(fontsize=16)","592c2a19":"from sklearn.linear_model import LogisticRegression\nfrom sklearn.tree import DecisionTreeClassifier\nfrom sklearn.neighbors import KNeighborsClassifier\nfrom sklearn.metrics import accuracy_score, recall_score, plot_roc_curve, confusion_matrix, classification_report, precision_recall_curve, auc\nfrom sklearn.ensemble import RandomForestClassifier, AdaBoostClassifier, GradientBoostingClassifier\nfrom sklearn import metrics\nfrom xgboost.sklearn import XGBClassifier\nimport xgboost as xgb","09911833":"feature_columns = ['Gender','wellness_program','seek_help','anonymity','leave','obs_consequence','mental_health_interview','family_history','benefits','care_options','work_interfere']\nX = dfencode[feature_columns]\ny = dfencode['treatment']","1fe09f01":"from sklearn.model_selection import train_test_split\nX_train, X_test, y_train, y_test = train_test_split(X,y,\n                                                   stratify = y,\n                                                    test_size = 0.3,\n                                                   random_state = 99)","eca5a7f8":"from sklearn.neighbors import KNeighborsClassifier\ntest_error_rates = []\nfor k in range (1, 30):\n    knn_model = KNeighborsClassifier(n_neighbors=k)\n    knn_model.fit(X_train, y_train)\n\n    y_pred = knn_model.predict(X_test)\n    test_error = 1 - accuracy_score(y_test, y_pred)\n    test_error_rates.append(test_error)\nplt.figure(figsize=(7, 4), dpi=100)\nplt.plot(range(1, 30), test_error_rates, label='Test Error')\nplt.legend()\nplt.ylabel('Error Rate')\nplt.xlabel('K Value')","1fd31313":"def model_pred(model, name='Default'):\n    model.fit(X_train, y_train)\n    preds = model.predict(X_test)\n    print('---', name, '---', '\\n',\n          confusion_matrix(y_test, preds), '\\n',\n          'Accuracy:', round(accuracy_score(y_test, preds), 5), '\\n')","de662cce":"# Logistic Regression\nlg = LogisticRegression(random_state=0, solver='lbfgs', multi_class='multinomial')\nmodel_pred(lg, 'Logistic Regression')\n\n# KNN\nknn = KNeighborsClassifier(n_neighbors=14)\nmodel_pred(knn, name='KNN')\n\n# Decission trees\ntree = DecisionTreeClassifier()\nmodel_pred(tree, 'Decission Trees')\n\n# Random Forest\nrforest = RandomForestClassifier(n_estimators=1000, max_depth=10, random_state=0)\nmodel_pred(rforest, 'Random Forest')\n\n# Gradient Booster\ngb = GradientBoostingClassifier(random_state=20)\nmodel_pred(gb, 'Gradient Booster')\n\n# AdaBoost\nab = AdaBoostClassifier()\nmodel_pred(ab,'Ada Boost')\n","a4b6e74e":"### Work_interfere","cfe91461":" Similar to care_options, wellness_program, and benefits, this question is also related to companies' mental health support systems. 44% said their companies don't provide mental health in their wellness programs, while only 23% said their companies actually provide support systems for mental health programs. Either companies provide mental health support as a part of a well program, employees still choose to seek treatments. Only those who don't know about mental health issues, choose not to seek treatments. Companies should raise awareness of mental health issues and provide more information about mental health issues and supports to their employees. ","b01f61ee":"#### family_history","8820981e":"Detecting k value using elbow technique ","484bb89c":"The \"obs_consequence\" column stores the result to the question \"Have you heard of or observed negative consequences for coworkers with mental health conditions in your workplace?\"\nThere is 13% of respondents agree that they know the negative consequences for coworkers with mental health issues; almost 70% of them want to get treatment (Fig. 16). Observing the coworkers who suffered from mental health issues encourages people to seek treatments for prevention.","c045cc8b":"#### Gender","daa0c1ef":"Furthermore, when we take a look at the \"State\" column, we notice that this column can only be applicable to U.S. We will drop this column as well","513e328a":"# Data Exploration","35c9af84":"### no_employees","12a9ac86":"We noticed there are so many inconsistency in the Gender's input data. We decide to transform anything related to male such as m, mail, M, ect. into lowercase 'male', same to 'female' ,and any other gender identifications are 'other'.","59797390":"The respondents were asked to describe the frequency of mental health condition interferes with their work. \nWe want to see whether these respondents who admitted mental issues interfered with their work seek treatment (see  Fig. 15). The responses included \"Sometimes\" with 39%, \"Never\" with 17%, \"Rarely\" with 14%, \"Often\" with 10%, and 20% of NA. Overall, we can see that about 65% of the responses admitted mental health issues interfered with their work sometimes, rarely, and often. \nThe result from the second plot also shows people actually admitted and choose to seek treatments for their mental health. This is a good sign of how people consider their mental health treatment to improve their work environment or performance. \nSurprisingly, on the other hand, we can also see some people who answered \"Never\" to the question but still seek treatment. These may be the early or prevention treatments for mental health issues (due to stress) before work or the project starts.","4c9837a8":"Anonymity is an interesting question about whether the respondents' anonymity protected if they choose to take advantage of mental health or substance abuse treatment resources?\nAbout 31% of their responses are \u201cyes.\u201d They know their anonymity is protected while taking advantage of mental health or substance abuse treatment resources, and more than 65% want to get treatment. However, more than 66% of the respondents don't know if their anonymity is protected and decide not to seek treatments. Like benefits awareness, companies need to promote this information to their employees to build trust and encourage them to seek treatments if issues occur.","d40a99b1":"# Dataset Information\n\nThe dataset name is `Mental Health in tech survey 2014`.\n\nThis dataset contains the following data (column names):\n\n- Timestamp\n\n- Age\n\n- Gender\n\n- Country\n\n- state: If you live in the United States, which state or territory do you live in?\n\n- self_employed: Are you self-employed?\n\n- family_history: Do you have a family history of mental illness?\n\n- treatment: Have you sought treatment for a mental health condition?\n\n- work_interfere: If you have a mental health condition, do you feel that it interferes with your work?\n\n- no_employees: How many employees does your company or organization have?\n\n- remote_work: Do you work remotely (outside of an office) at least 50% of the time?\n\n- tech_company: Is your employer primarily a tech company\/organization?\n\n- benefits: Does your employer provide mental health benefits?\n\n- care_options: Do you know the options for mental health care your employer provides?\n\n- wellness_program: Has your employer ever discussed mental health as part of an employee wellness program?\n\n- seek_help: Does your employer provide resources to learn more about mental health issues and how to seek help?\n\n- anonymity: Is your anonymity protected if you choose to take advantage of mental health or substance abuse treatment resources?\n\n- leave: How easy is it for you to take medical leave for a mental health condition?\n\n- mentalhealthconsequence: Do you think that discussing a mental health issue with your employer would have negative consequences?\n\n- physhealthconsequence: Do you think that discussing a physical health issue with your employer would have negative consequences?\n\n- coworkers: Would you be willing to discuss a mental health issue with your coworkers?\n\n- supervisor: Would you be willing to discuss a mental health issue with your direct supervisor(s)?\n\n- mentalhealthinterview: Would you bring up a mental health issue with a potential employer in an interview?\n\n- physhealthinterview: Would you bring up a physical health issue with a potential employer in an interview?\n\n- mentalvsphysical: Do you feel that your employer takes mental health as seriously as physical health?\n\n- obs_consequence: Have you heard of or observed negative consequences for coworkers with mental health conditions in your workplace?\n\n- comments: Any additional notes or comments","e7dc507b":"### LEAVE","e5f01e0d":"### Anonymity","bdaf78f6":"#### Result Interpretation\n\nWe evaluate the results of the question \"Have you get treatment for a mental health condition?\", which is our target variable \"treatment\". As shown in the diagram above, the percentage of respondents who want to get treatment is 54%, and not getting treatment is around 46%. These results indicate that tech workplaces should promote mental health and support employees with mental health issues. According to the CDC website, workplaces promote mental health programs that have proven successful, especially when combining psychological and physical health interventions. Poor mental health and stress can negatively affect employees, such as job performance and productivity, engagement with one's work, communication between coworkers, and physical capability and daily functioning.\nWe decide to investigate different aspects to see what factors leading to employees want to get treatment, especially from companies' support programs and systems.","3ebb3692":"### Age","fb9b0539":"Around 42% of the respondents said that they have a family history of mental illness. The plots in fig. 14 show that these respondents also prefer to seek treatment compared to those that don't have any family history of mental illness. This is explainable since the respondents with mental illness have more awareness, experience, and concern about their mental health in their family history. They are more open to seeking treatments when facing mental health issues. Some research suggests that mental illness can run in the family and may be passed on for different reasons, not just genes (rethink.org). Another study, \"Inheriting Mental Disorders,\" stated that the chance of an individual having a specific mental disorder is higher if other family members have that same mental disorder (healthychildern.org). ","1c283627":"### Care_options","6b251859":"The \"comments\" column contains too many missing values due to the fact that it is usually an optional text box and people usually choose to skip it. \nWe also noticed that TimeStamp columns only contains date and time when respondents submitted their survey. Hence, this data won't contribute much to our analysis.\nWe will drop these columns because they don't contribute much to this analysis. ","ca42a46e":"There are 20% of the respondents said Yes to Mental Health is offered in their companies' wellness programs. About 60% of them chose to seek treatment. However, it is concerned to see there are 65% of the respondents said that they aren't offered mental health as a part of their wellness programs provided by the companies. Though more than 60% of them still seek treatments, which means companies need to fulfill their duties and include mental health as a part of their wellness programs. ","a97aa590":"# Introduction\n\nMental health has always been the central topic around workplace culture and wellness conversations. In a study of \"mental well-being at the workplace\" in 2010, it is increasingly recognized that employees' mental health is a crucial determinant in their overall health. Poor mental health and stressors at the workplace can contribute to a range of physical illnesses. Mental health can also affect their personal and professional lives (Rajgopal). Furthermore, mental issues such as depression and anxiety have a significant economic impact; the estimated cost to the global economy is US$1 trillion per year in lost productivity (who.int).\n\nTechnology is a fast-moving industry with high stakes. Tech workers are often under intense pressure to stay on top of a fast-paced, competitive industry. They have to contribute their skills and knowledge to build the companies' values and meet the digital age demand.\n\nSome factors such as long working days, late nights, tight deadlines, gender gaps, and lack of inclusion and diversity contribute to poor mental health in tech. In 2019, BIMA published one of the statistics results in their Tech Inclusivity and Diversity Report. It stated that the mental health in the tech industry is currently in a poor state, not to mention some would even go as far as saying it is reaching a crisis point. The statistic report found that more than 50% of tech employees suffered from anxiety or depression at some point, more than 60% of the respondents were stressed by their work.\n\nOrganizations or employers need to recognize how mental wellness can impact their employees' productivity and performance (diversityintech.co.uk). The WHO has found that by investing in mental health wellness every $1 into scaled-up treatment for common mental illness, there is an ROI of $4 in improved health and productivity (who.int).\n\nThough mental health issues in the workplace are important and need to be discussed, mental health is still heavily stigmatized. Mental illness is viewed as a shameful personal deficiency, a failure of weakness. Many people don't feel comfortable discussing their mental health problems or admit that they are dealing with them for fear of being judged by others. People who can't share their experiences or seek treatment are locked up in their bubbles with the intense pressure to balance their personal and professional lives.\n\nThe CDC and WHO encourage organizations or employers to promote health awareness and provide employees with support and resources, such as low-cost medical benefits for mental health counseling or mental health programs for preventions and treatments, to improve mental health in the workplace.\n\nOur objective in this report is to analyze the attitude of tech workers towards mental health and the main predictors of mental health illness in the U.S. tech workplace. We explore and analyze the dataset \"Mental Health in Tech workplace survey 2014\", with questions had questions pertaining to how mental health is perceived at tech workplaces by employees and their employers.\n\n","321b3efe":"Choose k-value that has the lowest rate which is 14 or 22","88e7a63c":"self_employed contains only 13 missing values. We will convert these missing value to 'No' with the assumption that they aren't self_employed","0edc1ffc":"### wellness program","9c14b464":"### Run correlation heatmap\n\nIt is important to see whether the dependent variables have any relationships with target variable.","74a64836":"#### Result interpretation \n\nMajority of the respondents from the U.S and U.K are not in technology-based companies even they are working in tech positions. Most of these tech-based employees are from mid-size to large-size company.","517ce678":"# Modeling","c59f6fa0":"### Check for nulls","7fd08a45":"# Data Importing and Cleaning Process","a84f8501":"### Observed consequence","54493923":"#### Age\n\nWe saw that there are couple of illogical in Age values such as Age in negative values or lower than 16 ( are they legally working ?) or higher than 100. We will drop the age that are illogical first ranges from 16-65 (assump that you can start working at the age of 16 and retired at age of 65).","f602dafe":"### seek_help","21b375b1":"### Geographic proportion","3b238084":"More than 45% of the respondents know about the mental health benefits offered by their employers, and 60% of them want to seek treatment. Many people don't know that their employers offer mental health benefits (33%). Surprisingly, among these people who don't know about mental health benefits, nearly  45% of them still want to seek mental health treatment. The goal for the companies is to raise awareness of the benefits so employees can take advantage of them to improve their mental health in the workplace.","1bbb26cc":"As shown in the map above, we can detect there are no relationships between target variable \"treatment\" and variables: Age, Country, self_employeed, remote_work, tech_company, mental_health_consequence, no_employees, physical_health_consequence, coworkers, phys_health_interview, mental_vs_physical. \nBesides, there are positively weak relationships between treatment and variables: wellness_program (7% ), seek_help (10%), anonymity (18% ),  leave (10% ), obs_consequence (15%), and mental_health_interview(10%). There are positively moderate relationships between treatment and variables: family_history (35%), benefits (23% ), care_options (25%). There is a negatively weak relationship between treatment and Gender (-14%)\nLastly, there is a strong relationship between treatment and work_interfere (63%).\nWe need to understand the respondents' reactions and attitudes toward mental health in their workplace. Hence, we statically analyze each of the variables that have relationships with treatment. ","20580a4a":"We plot the Distribution for Age of the Survey Respondents by histogram and boxplot (figure 5 and 6). The minimum age is 18 years old, and the oldest respondents' age is 65. The boxplot result indicates most of the survey respondents around their mid 20s to early 40s. The distribution score of 0.90 means the data are highly positive right-skewed. The distribution of ages is right-skewed, which is expected as the tech industry tends to have younger employees. Boxplot result also shows no statistically significant difference of ages between respondents who say yes and no to seek treatments.","b10639f8":"### Mental Health in the Interview","03db7343":"The second most missing values are in work_interfere with 20% of missing values in the dataset. We check the data values to see what type of input values this column contains and replacing missing values with \"NA\". ","5c03e298":"### Encoding categorical variables","5f9c082f":"### Benefits","43847d18":"## Respondents' Demograhics and Geographics","10b47c95":"Based on the result, majority of the respondents came from the U.S with nearly 60% of the data. Second highest number of respondents came from the UK. The other countries have very little amount of data be worth for the analysis. Hence, we will use only data that came from the US and UK for this analysis. ","8e8ab81b":"#### Gender ","2431cda1":"## Target Variable"}}