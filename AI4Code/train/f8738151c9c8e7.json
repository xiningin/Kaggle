{"cell_type":{"02d20d01":"code","07085a1d":"code","5bf73340":"code","7b5f726d":"code","6b37be1a":"code","f554adf8":"code","869eadbb":"code","3ad95a4b":"code","bcc8849d":"code","54b93697":"code","fb625e99":"code","51c257ef":"code","e6565e49":"code","46c52007":"code","e57a7b2d":"code","ba45ee96":"code","b2fea0f4":"code","1c336aa3":"code","f8711474":"code","8cf84a1e":"code","cc248ddf":"code","e63e52f2":"code","04181674":"code","94edc300":"code","70c38c9d":"code","009acee9":"markdown","b6fb0138":"markdown","12c9cf8c":"markdown"},"source":{"02d20d01":"import numpy as np\nimport pandas as pd\nimport seaborn as sns\n\n\nfrom sklearn.model_selection import train_test_split","07085a1d":"veri = pd.read_csv('..\/input\/spotify-dataset-19212020-160k-tracks\/data.csv')\n","5bf73340":"veri.describe()","7b5f726d":"veri.info()","6b37be1a":"veri.head()","f554adf8":"veri.tail()","869eadbb":"veri.shape","3ad95a4b":"import matplotlib.pyplot as plt\nveri.hist(figsize=(15, 15), color='red')\nplt.show()","bcc8849d":"veri.corr()","54b93697":"plt.figure(figsize=(20, 10))\nsns.heatmap(veri.corr(), annot=True)\n\n#Korelasyon grafi\u011fi incelendi\u011finde y\u0131l, dans edilebilirlik, enerji,\n#ses y\u00fcksekli\u011fi ve tempo de\u011fi\u015fkenleri pop\u00fclerli\u011fi tahmin etmede \u00f6nemli \u00f6zelliklerdir.","fb625e99":"plt.plot(veri.loudness, veri.energy, 'ro', color='green')","51c257ef":"veri.isnull().sum() #eksik de\u011ferlerin kontrol\u00fc","e6565e49":"from collections import Counter\ndef uc_degerler(df,ozellikler):\n    uc_degerler_index = []\n    \n    for c in ozellikler:\n        # 1.inci \u00e7eyreklik \n        Q1 = np.percentile(veri[c],25)\n        # 3.\u00fcnc\u00fc \u00e7eyreklik\n        Q3 = np.percentile(veri[c],75)\n        # Interquartile Range (IQR) y\u00f6ntemi\n        IQR = Q3 - Q1\n        alt_sinir = Q1-1.5*IQR #alt s\u0131n\u0131r de\u011feri\n        ust_sinir = Q3+1.5*IQR #\u00fcst s\u0131n\u0131r de\u011feri\n        #ayk\u0131r\u0131 de\u011ferler ve bu de\u011ferlerin endekslerinin tespit edilmesi\n        uc_deger_listesi = veri[(veri[c] < alt_sinir) | (veri[c] > ust_sinir)].index #alt ve \u00fcst s\u0131n\u0131rlar\u0131n alt\u0131nda kalan de\u011ferlerin indexi\n        # store indeces\n        uc_degerler_index.extend(uc_deger_listesi)\n    \n    uc_degerler_index = Counter(uc_degerler_index)\n    multiple_outliers = list(i for i, v in uc_degerler_index.items() if v > 2) \n    \n    return multiple_outliers","46c52007":"veri.loc[uc_degerler(veri,[\"popularity\",\"explicit\",\"year\",\"duration_ms\",\"danceability\",\"energy\",\"instrumentalness\",\"liveness\",\"loudness\",\"speechiness\",\"valence\",\"key\",\"mode\",\"tempo\"])]\n#\u00c7\u0131kan sonu\u00e7lar incelendi\u011finde 2704 adet verinin belirlenen de\u011ferler d\u0131\u015f\u0131nda oldu\u011fu belirlenmi\u015ftir.","e57a7b2d":"sns.boxplot(x=veri['danceability'])","ba45ee96":"sns.boxplot(x=veri['loudness'])","b2fea0f4":"\n#U\u00e7 verilerin veri setinden \u00e7\u0131kar\u0131lmas\u0131\nveri= veri.drop(uc_degerler(veri,[\"popularity\",\"explicit\",\"year\",\"duration_ms\",\"danceability\",\"energy\",\"instrumentalness\",\"liveness\",\"loudness\",\"speechiness\",\"valence\",\"key\",\"mode\",\"tempo\"]))\n","1c336aa3":"#Veri setinin u\u00e7 de\u011ferler \u00e7\u0131kar\u0131ld\u0131ktan sonraki yeni boyutu\nveri.shape","f8711474":"#Popularity de\u011fi\u015fkeninde yeni bir \u00f6znitelik olu\u015fturma \nveri[\"pop\u00fcler\"]= [ 1 if i>=70 else 0 for i in veri.popularity ]\nveri[\"pop\u00fcler\"].value_counts()","8cf84a1e":"from sklearn import preprocessing\nfrom sklearn.preprocessing import StandardScaler\n\ntahmin_input = ['year', 'danceability', 'energy', 'loudness', 'tempo']# pop\u00fclerli\u011fi tahmin etmede kullan\u0131lacqk giri\u015f verileri\ndata = veri.copy()\nonemli_ozellikler = veri[tahmin_input]\n\nnormalize = StandardScaler()\nnormalize.fit(onemli_ozellikler)\nonemli_ozellikler = normalize.transform(onemli_ozellikler)\n\nprint(onemli_ozellikler.shape) \n\n","cc248ddf":"y = veri[\"pop\u00fcler\"].values\n\nfrom sklearn.model_selection import train_test_split\n \nX_train, X_test, y_train, y_test = train_test_split(onemli_ozellikler, y, test_size=0.2, random_state=42)","e63e52f2":"X_train.shape","04181674":"from sklearn.ensemble import RandomForestClassifier\nfrom sklearn.metrics import confusion_matrix\nfrom sklearn.metrics import precision_score, recall_score\nfrom sklearn.metrics import f1_score\nimport seaborn as sns\nfrom sklearn.metrics import classification_report\n\n\nrf = RandomForestClassifier()\nrf.fit(X_train, y_train)\n\ny_pred = rf.predict(X_test)\nRandomForest_score=rf.score(X_test,y_test)\nprint(\"Training Accuracy :\", rf.score(X_train, y_train))\nprint(\"Validation Accuracy :\", rf.score(X_test, y_test))\n\nprint(\"F1 score :\", f1_score(y_test, y_pred,average='macro'))\nprint(classification_report(y_test, y_pred))\n\n# confusion matrix\ncm = confusion_matrix(y_test, y_pred)\nsns.heatmap(cm, annot=True)","94edc300":"from sklearn.neighbors import KNeighborsClassifier\n\nknn = KNeighborsClassifier(n_neighbors = 3)\nknn.fit(X_train, y_train)\n\ny_pred = knn.predict(X_test)\nknn_score=knn.score(X_test,y_test)\nprint(\"Training Accuracy :\", knn.score(X_train, y_train))\nprint(\"Validation Accuracy :\", knn.score(X_test, y_test))\n\n# test veri setinin f1 puan\u0131n\u0131n hesaplanmas\u0131\nprint(\"f1 score :\", f1_score(y_test, y_pred))\nprint(classification_report(y_test, y_pred))\n\n# confusion matrix\ncm = confusion_matrix(y_test, y_pred)\nsns.heatmap(cm, annot=True)","70c38c9d":"#kullan\u0131lan her iki algoritman\u0131n sonu\u00e7lar\u0131 incelendi\u011finde Rastgele Orman Algoritmas\u0131n\u0131n ba\u015far\u0131 oran\u0131 \n#daha y\u00fcksektir.\nmodel_performances=pd.DataFrame({'Model':['RandomForestClassifier','K-NearestNeighbors'],\n                                 'Accuracy':[RandomForest_score,knn_score]})\nmodel_performances.sort_values(by = \"Accuracy\",ascending=False)\n","009acee9":"## Model E\u011fitimi","b6fb0138":"## Veri Ke\u015ffi ve G\u00f6rselle\u015ftirme","12c9cf8c":"## \u00d6n \u0130\u015fleme"}}