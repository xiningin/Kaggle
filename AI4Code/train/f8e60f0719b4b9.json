{"cell_type":{"274d6bb5":"code","da45f4d1":"code","7a4a8363":"code","29c109a7":"code","78d43270":"code","abbf49f2":"code","24c6fea2":"code","892cbf96":"code","0d11b450":"code","d310c307":"code","f71f9aaf":"markdown","bda2ead1":"markdown","8d6d9e27":"markdown"},"source":{"274d6bb5":"!pip install nussl","da45f4d1":"import nussl\nimport IPython\nimport warnings\nimport IPython.display as ipd\nimport matplotlib.pyplot as plt\n\n","7a4a8363":"path = \"..\/input\/birdsong-recognition\/train_audio\/aldfly\/XC135454.mp3\"\n\nhistory = nussl.AudioSignal(path)\nhistory.embed_audio()\n\nplt.figure(figsize=(10, 3))\nnussl.utils.visualize_spectrogram(history)\nplt.title(str(history))\nplt.tight_layout()\nplt.show()","29c109a7":"repet = nussl.separation.primitive.Repet(history)\nestimates = repet()\nrepet.repeating_period","78d43270":"_estimates = {\n    'Background': estimates[0],\n    'Foreground': estimates[1]\n} # organize estimates into a dict\n\nplt.figure(figsize=(10, 7))\nplt.subplot(211)\nnussl.utils.visualize_sources_as_masks(\n    _estimates, db_cutoff=-60, y_axis='mel')\nplt.subplot(212)\nnussl.utils.visualize_sources_as_waveform(\n    _estimates, show_legend=False)\nplt.tight_layout()\nplt.show()\n\nnussl.play_utils.multitrack(_estimates)","abbf49f2":"def foreground(data):\n    \"\"\"\n    params: data 1D numpy array of raw audio signal\n    returns: 1D numpy array of raw audio signal with background noise removed\n    \"\"\"\n    history = nussl.AudioSignal(path_to_input_file=None, audio_data_array=data)\n    estimates = nussl.separation.primitive.Repet(history)()\n    return estimates[1].audio_data[0]","24c6fea2":"path = \"..\/input\/birdsong-recognition\/train_audio\/amerob\/XC128490.mp3\"","892cbf96":"import librosa\n\ndata, SR = librosa.core.load(path, sr=None, duration=40)","0d11b450":"librosa.output.write_wav('before.wav', data, SR, norm=False)\nhistory = nussl.AudioSignal('before.wav')\nhistory.embed_audio()\n\nplt.figure(figsize=(10, 3))\nnussl.utils.visualize_spectrogram(history)\nplt.title(str(history))\nplt.tight_layout()\nplt.show()","d310c307":"librosa.output.write_wav('after.wav', foreground(data), SR, norm=False)\nhistory = nussl.AudioSignal('after.wav')\nhistory.embed_audio()\n\nplt.figure(figsize=(10, 3))\nnussl.utils.visualize_spectrogram(history)\nplt.title(str(history))\nplt.tight_layout()\nplt.show()","f71f9aaf":"## After","bda2ead1":"## Before","8d6d9e27":"Another Example"}}