{"cell_type":{"5a566bc6":"code","7afa6587":"code","17df60fb":"code","2595b10b":"code","171ff765":"code","fa67495e":"code","87f6d3dd":"markdown","fd18f8af":"markdown","8a836210":"markdown","8f06922f":"markdown"},"source":{"5a566bc6":"import numpy as np # linear algebra\nimport pandas as pd # data processing, CSV file I\/O (e.g. pd.read_csv)\nimport geopandas as gpd\nfrom matplotlib import pyplot as plt\n\nimport os","7afa6587":"data_1991 = pd.read_csv('..\/input\/bangladesh-election-results\/Bangladesh1991ElectionResults.csv')\ndata_1996 = pd.read_csv('..\/input\/bangladesh-election-results\/Bangladesh1996ElectionResults.csv')\ndata_2001 = pd.read_csv('..\/input\/bangladesh-election-results\/Bangladesh2001ElectionResults.csv')\ndata_2008 = pd.read_csv('..\/input\/bangladesh-election-results\/Bangladesh2008ElectionResults.csv')\n\ndata_1991['year'] = '1991'\ndata_1996['year'] = '1996'\ndata_2001['year'] = '2001'\ndata_2001.rename(columns={'fourPartyAlliancePercentage': 'bangladeshNationalPartyPercentage'}, inplace=True)\ndata_2008['year'] = '2008'\n\ndf = pd.concat([data_1991, data_1996, data_2001, data_2008], sort=False).reset_index()\n\nreplacements = {\n    'Chadpur': 'Chandpur',\n    'Brahmminbaria': 'Brahamanbaria',\n    'Hobiganj': 'Habiganj',\n    'Jhalakathi': 'Jhalokati',\n    'Laxmipur': 'Lakshmipur',\n    'Moulvibazar': 'Maulvibazar',\n    'Netrokona': 'Netrakona',\n    'Narshingdi': 'Narsingdi',\n    'Panchaghar': 'Panchagarh',\n    'Sirajgonj': 'Sirajganj',\n    \"Mymensingh-Netrokona\": 'Netrakona',\n    \"MymensinghNetrokona\": 'Netrakona',\n    'Barisal-Pirojpur': 'Pirojpur',\n    'BarisalPirojpur': 'Pirojpur',\n    'Borguna': 'Barguna',\n    'Brahmminbaria': 'Brahamanbaria',\n    'Jhalokathi': 'Jhalokati',\n    'Khagrachari': 'Khagracchari',\n    'Panchaghar': 'Panchagarh',\n    'Shatkhira': 'Satkhira',\n    'Sunamgonj': 'Sunamganj',\n    'Khagrachari': 'Khagracchari',\n    'Brahmanbaria': 'Brahamanbaria'\n}\n\nfor key, value in replacements.items():\n    df['district'] = df['district'].replace(key, value)\n    \nbd_districts = gpd.read_file('..\/input\/bangladesh-administrative-geojson\/districts_amended.json')","17df60fb":"registered_voters = df[['year', 'registeredVoters']].dropna().groupby(['year']).sum().reset_index()\nvoter_turnout = df[['year', 'voterTurnout']].dropna().groupby(['year']).mean().reset_index()\n\nplt.subplot(2, 1, 2)\nplt.title('Registered Voters')\nplt.xlabel('Year')\nplt.bar(registered_voters['year'], registered_voters['registeredVoters'])\n\nplt.subplot(2, 2, 1)\nplt.title('Voter Turnout (%)')\nplt.xlabel('Year')\nplt.bar(voter_turnout['year'], voter_turnout['voterTurnout'], color='green')\n\nplt.subplot(2, 2, 2)\nplt.title('Voters not Voting (%)')\nplt.xlabel('Year')\nplt.bar(voter_turnout['year'], voter_turnout['voterTurnout'].apply(lambda x: 100- x), color='red')\n\nplt.tight_layout()\nplt.show()\n","2595b10b":"cols = ['year', 'awamiLeaguePercentage', 'bangladeshNationalPartyPercentage', 'jatiyaPartyPercentage']\npercentages = df[cols].groupby(['year']).mean().reset_index()\n\nplt.plot(percentages['year'], percentages['awamiLeaguePercentage'])\nplt.plot(percentages['year'], percentages['bangladeshNationalPartyPercentage'])\nplt.plot(percentages['year'], percentages['jatiyaPartyPercentage'])\n\nplt.legend(['Awami League', 'Bangladesh National Party', 'Jatiya Party'], loc='upper left')\nplt.xlabel('Year')\nplt.ylabel('Average % of Votes across Seats')\n\nplt.show()","171ff765":"seats_by_district = df[['year', 'district', 'constituency']] \\\n    .groupby(['year', 'district']) \\\n    .count() \\\n    .reset_index()","fa67495e":"fig, (ax, ax2) = plt.subplots(ncols=2, figsize=(20, 10), sharex=True, sharey=True)\n\nseats_2008 = seats_by_district[seats_by_district['year'] == '2008']\nmerged = bd_districts.set_index('ADM2_EN').join(seats_by_district.set_index('district'))\nax.axis('off')\nax.set_title('Constituency in 2008')\nmerged.plot(column='constituency', cmap='Greens', linewidth=1.2, ax=ax, edgecolor='0.8', legend=True)\n\nturnout = df[['year', 'district', 'voterTurnout']].dropna().groupby(['year', 'district']).mean().reset_index()\nturnout_2008 = turnout[turnout['year'] == '2008']\nmerged = bd_districts.set_index('ADM2_EN').join(turnout_2008.set_index('district'))\nax2.axis('off')\nax2.set_title('Voter Turnout in 2008 (%)')\nmerged.plot(column='voterTurnout', cmap='YlOrBr', linewidth=1.2, ax=ax2, edgecolor='0.8', legend=True)","87f6d3dd":"# Voter Statistics\n\nRegistered Voters, Legitimate Votes and No-shows","fd18f8af":"# Average Votes (%) Per Party\n\nOver the years, voters' preference shift. Let's take a look how that works.","8a836210":"## Loading and Concat-ing data","8f06922f":"# Constituency and Voter Turnout across Districts\n\nWhich districts are **most presented** and which are **underpresented** in our Jatiya Sangsad? Let's plot this on a map!\nHow many eligible voters did actually vote in the polls? How concerned have we been with our democratic rights?"}}