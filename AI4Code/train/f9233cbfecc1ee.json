{"cell_type":{"183cab8f":"code","883922d8":"code","39b92c31":"code","b9c3d065":"code","ce5c6905":"code","6cca32d8":"code","1c5b43fc":"code","49ba5bf6":"code","c469fa0e":"code","c457ee50":"code","5277d5b5":"code","32db989f":"code","ed704043":"code","bc98af50":"code","e04a6d0e":"code","fe8891fb":"markdown","bfae918f":"markdown","60d6cdb1":"markdown","9c7752a8":"markdown","5fce7e48":"markdown","5bddb2c8":"markdown","833c368d":"markdown","a704a400":"markdown","ea2aeb74":"markdown","448ec4b2":"markdown","2e43882c":"markdown","54fef37d":"markdown","e249864d":"markdown","107743b9":"markdown","57addec6":"markdown","fba02be3":"markdown","a40b11fb":"markdown","84ef6275":"markdown","12a9c43c":"markdown","7f464f7e":"markdown","f8c1693b":"markdown","1531c26a":"markdown","9ada0c8b":"markdown","e74b3378":"markdown","507022ee":"markdown","e3a99290":"markdown","b027bc8e":"markdown","bf30ef6e":"markdown","e21f4ed4":"markdown"},"source":{"183cab8f":"import numpy as np # linear algebra\nimport pandas as pd # data processing, CSV file I\/O (e.g. pd.read_csv)\nimport matplotlib.pyplot as plt\nfrom tabulate import tabulate\nimport bq_helper\nimport os","883922d8":"usa_names = bq_helper.BigQueryHelper(active_project=\"bigquery-public-data\", dataset_name=\"usa_names\")\nquery = \"\"\"SELECT year, gender, name, sum(number) as count FROM `bigquery-public-data.usa_names.usa_1910_current` GROUP BY year, gender, name\"\"\"\ndata = usa_names.query_to_pandas_safe(query)\ndata.to_csv(\"usa_names_data.csv\")","39b92c31":"data.sample(5)","b9c3d065":"print(\"Number of rows and columns in the data: \",data.shape,\"\\n\")\nprint(\"Number and Range of years available: \",len(data[\"year\"].unique()),\"years between \",data[\"year\"].min(), \"to \",data[\"year\"].max())\n\nprint(\"Total number of applicants in the dataset: \",sum(data[\"count\"]))\nprint(\"% of male applicants : \",\"{0:.2f}\".format(sum(data[\"count\"][data[\"gender\"]==\"M\"])\/sum(data[\"count\"])))\nprint(\"% of female applicants :\",\"{0:.2f}\".format(sum(data[\"count\"][data[\"gender\"]==\"F\"])\/sum(data[\"count\"])),\"\\n\")\n\nprint(\"Total number of unique names in the data set: \",len(data[\"name\"].unique()))\nprint(\"Total number of unique male names in the data set: \",len(data[\"name\"][data[\"gender\"]==\"M\"].unique()))\nprint(\"Total number of unique female names in the data set: \",len(data[\"name\"][data[\"gender\"]==\"F\"].unique()),\"\\n\")\n\nprint(\"\\n Most popular male names of all time\")\nprint(tabulate(data[data[\"gender\"]==\"M\"].groupby('name', as_index=False).agg({\"count\": \"sum\"}).sort_values(\"count\",ascending=False).reset_index(drop=True).head(5),headers='keys', tablefmt='psql'))\n\nprint(\"\\n Most popular female names of all time\")\nprint(tabulate(data[data[\"gender\"]==\"F\"].groupby('name', as_index=False).agg({\"count\": \"sum\"}).sort_values(\"count\",ascending=False).reset_index(drop=True).head(5),headers='keys', tablefmt='psql'))","ce5c6905":"data=data[data[\"year\"]>=1998]\ndata_agg=data.groupby([\"year\"],as_index=False).agg({\"count\": \"sum\"})\nax=data_agg.plot('year', 'count', kind='bar', figsize=(17,5), color='#86bf91', zorder=2, width=0.85)\nax.set_xlabel(\"Year\", labelpad=20, size=12)\n# Set y-axis label\nax.set_ylabel(\"# of Applicants\", labelpad=20, size=12)\nax.legend_.remove()","6cca32d8":"def plot_yearly_count(character_name):\n    data_agg=data[data[\"name\"]==character_name].groupby([\"year\"],as_index=False).agg({\"count\": \"sum\"})\n    if len(data_agg)==0:\n        print(\"No data available\")\n    else:\n        year_df=pd.DataFrame()\n        year_df[\"year\"]=data[\"year\"].unique()\n        data_agg[\"key\"]=1\n        data_agg=pd.merge(year_df,data_agg,on=[\"year\"],how=\"left\")\n        data_agg=data_agg.sort_values(\"year\",ascending=True)\n        ax=data_agg.plot('year', 'count', kind='bar', figsize=(17,5), color='#86bf91', zorder=2, width=0.85)\n        # Switch off ticks\n        ax.tick_params(axis=\"both\", which=\"both\", bottom=False, top=False, labelbottom=True, left=False, right=False, labelleft=True)\n        # Set x-axis label\n        ax.set_xlabel(\"Year\", labelpad=20, size=12)\n        # Set y-axis label\n        ax.set_ylabel(\"# of Applicants\", labelpad=20, size=12)\n        # Set title\n        ax.set_title(\"Popularity of the name \"+str(character_name)+\" in the past 20 years\")\n        ax.legend_.remove()","1c5b43fc":"plot_yearly_count(\"Daenerys\")","49ba5bf6":"plot_yearly_count(\"Khaleesi\")","c469fa0e":"plot_yearly_count(\"Arya\")","c457ee50":"plot_yearly_count(\"Sansa\")","5277d5b5":"plot_yearly_count(\"Tyrion\")","32db989f":"plot_yearly_count(\"Brienne\")","ed704043":"plot_yearly_count(\"Lyanna\")","bc98af50":"plot_yearly_count(\"Meera\")","e04a6d0e":"plot_yearly_count(\"Jon\")\nplot_yearly_count(\"Catelyn\")\nplot_yearly_count(\"Jaime\")","fe8891fb":"> ### Brienne Tarth  <a name=\"v\"><\/a>\n\n![](http:\/\/cdn.collider.com\/wp-content\/uploads\/game-of-thrones-season-three-28.jpg)","bfae918f":"The name \"Brienne\" appears in the database for the first time in 2016, with 5 children named Brienne in 2016 and 2017","60d6cdb1":"### 8.Trend in popularity of Game of Thrones character names  <a name=\"8\"><\/a>\n\n* Game of Thrones premiered on HBO in the United States on April 17, 2011 \n* For reference, below is the year that each season was released:\n    * Season 1:  2011\n    * Season 2: 2012\n    * Season 3: 2013\n    * Season 4: 2014\n    * Season 5: 2015\n    * Season 6: 2016\n    * Season 7: 2017\n* If we find an uptick in the number of applicants with a certain character name the same year that the character was introduced, or got a lot of screentime, this would be an indicator that some parents named their babies after the character","9c7752a8":"### Meera Reed  <a name=\"vii\"><\/a>\n\n![](http:\/\/www.blackfilm.com\/read\/wp-content\/uploads\/2016\/04\/Game-Of-Thrones-S6-Ep2-Ellie-Kendrick.jpg)","5fce7e48":"### Lyanna Stark  <a name=\"vi\"><\/a>\n\n![](http:\/\/watchersonthewall.com\/wp-content\/uploads\/2017\/08\/Lyanna-Stark.jpg)","5bddb2c8":"While in the intitial few seasons, audiences found the character Sansa Stark largely annoying, she is established as a legitimate player in the game by seasons 5-6","833c368d":"The above plot shows another obvious case of parents naming thier children after their favorite Game of Thrones character.","a704a400":"### 3.Importing the data <a name=\"3\"><\/a>","ea2aeb74":"### 6.Trend in number of yearly applicants in the last 20 years <a name=\"6\"><\/a>\n\nLet us first plot a bar chart of the number of social security applicants each year in the past 20 years.","448ec4b2":"### 5.Some basic summary statistics <a name=\"5\"><\/a>","2e43882c":"The name Meera shows an increase in popularity from 2013 onwards. 2013 happens to be the year when season 3 was aired, and Meera Reed's character was first introduced onscreen.","54fef37d":"Observe above how the popularity of the name Arya shoots up between 2011 to 2017, during which the character on the show transforms from a water dancer to a faceless woman","e249864d":"* We observe above that about 20 childen were named Daenerys in 2013\n* The name has never appeared in the data base before, clearly indicating that the parents were inspired by the Game of Thrones character, who emerges  as a clear protagonist on the show in season 3, released in 2013. \n* It is also interesting to observe that about 60 children were named Daenerys in 2016 and 2017\n* Let us take a look at the popularity of her other name \"Khaleesi\", across the years","107743b9":"We observe that the total number of applicants each year has fluctuated between 3M to 3.5M in the last 20 years","57addec6":"### 4.Viewing a sample of the data <a name=\"4\"><\/a>","fba02be3":"### Next Steps: <a name=\"9\"><\/a>\n*  It would be interesting to analyize the impact of other popular culture phenomenon such as Harry Potter on the popularity of names\n* The Game of Thrones characters above were chosen from my memory, and I may have missed important characters that show a trend. To avoid this, instead of manually looking for character names, we could use the [Game of Thrones data set](https:\/\/www.kaggle.com\/mylesoneill\/game-of-thrones) available on Kaggle, to search for the character names in this dataset","a40b11fb":"### Tyrion Lannister  <a name=\"iv\"><\/a>\n\n![](https:\/\/www.nerdplanet.it\/wp-content\/uploads\/2018\/10\/tyrion-lannister.png)","84ef6275":"From the above graphs, I was not able to descern any noticable impact of the show on the popularity of the names.","12a9c43c":"### Sansa Stark <a name=\"iii\"><\/a>\n\n![](https:\/\/wallpapersite.com\/images\/pages\/pic_h\/7345.jpg)","7f464f7e":"### 1.Introduction <a name=\"introduction\"><\/a>\n\n#### Objective:\n* Popular culture has always impacted society in interesting ways\n* In this kernel, we explore how Game of Thrones has inspired baby names in recent years\n* We look at some manually chosen Game of Thrones characters, and how the popularity of their names has risen along with their popularity on the show\n\n#### Background:\n* ** Game of Thrones**\n    * Game of Thrones is an American fantasy drama television series acclaimed by critics and audiences\n    * The show has a broad, active fan base. In 2012 Vulture.com ranked the series' fans as the most devoted in popular culture, more so than Lady Gaga's, Justin Bieber's, Harry Potter's or Star Wars'\n* **About the data**\n    * This public dataset was created by the Social Security Administration and contains all names from Social Security card applications for births that occurred in the United States after 1879\n    * All data are from a 100% sample of records on Social Security card applications\n    * To safeguard privacy, the Social Security Administration restricts names to those with at least 5 occurrences","f8c1693b":"### 2.Importing required modules <a name=\"2\"><\/a>","1531c26a":"### 7.Function to plot the yearly number of applicants with a particular name  <a name=\"7\"><\/a>","9ada0c8b":"### Daenerys Targaryen <a name=\"i\"><\/a>\n\n![](https:\/\/imagesvc.timeincapp.com\/v3\/fan\/image?url=https%3A%2F%2Fwinteriscoming.net%2Ffiles%2F2017%2F04%2FGoT-Sn7_FirstLook_11.jpg&c=sc&w=850&h=560)\n\n","e74b3378":"### 8.Other Important Characters  <a name=\"vii\"><\/a>\n\nLet us look at the popularity of the names of other characters such as Jon Stark, Catelyn Stark, Jaime Lannister","507022ee":"The name Lyanna shoots up in popularity in the year 2016. This is the same year that season 6 was aired, which ends with a possible  revelation of Jon Snow's true heritage. Season 7, that aired in 2017, confirms the revelation through Bran's vision of Rhaegar and Lyanna's wedding.","e3a99290":"Again, it is very clear from the above that the name \"Khaleesi\" has been inspired by Game of Thrones, growing in popularity with the popularity of the show from 2011 to 2017, when a whopping ~400 children were named Khaleesi","b027bc8e":"###  Arya Stark  <a name=\"ii\"><\/a>\n\n![](http:\/\/images6.fanpop.com\/image\/photos\/39600000\/arya-stark-arya-stark-39631351-1280-1019.jpg)","bf30ef6e":"### References <a name=\"10\"><\/a>\n* https:\/\/gameofthrones.fandom.com\/wiki\/Daenerys_Targaryen\n* https:\/\/gameofthrones.fandom.com\/wiki\/Arya_Stark\n* https:\/\/gameofthrones.fandom.com\/wiki\/Sansa_Stark\n* https:\/\/gameofthrones.fandom.com\/wiki\/Tyrion_Lannister\n* https:\/\/gameofthrones.fandom.com\/wiki\/Brienne_of_Tarth\n* https:\/\/gameofthrones.fandom.com\/wiki\/Lyanna_Stark\n* https:\/\/gameofthrones.fandom.com\/wiki\/Meera_Reed\n* https:\/\/closeronline.co.uk\/family\/news\/game-thrones-baby-boy-name-baby-girl-name-meaning\/\n","e21f4ed4":"## Impact of Game of Thrones on US Baby Names\n\n#### Table of contents\n1. [Introduction](#introduction)\n2. [Importing required modules](#2)\n3. [Importing the data](#3)\n4. [Viewing a sample of the data](#4)\n5. [Some basic summary statistics](#5)\n6. [Trend in number of yearly applicants in the last 20 years](#6)\n7. [Function to plot the yearly number of applicants with a particular name](#7)\n8. [Trend in popularity of Game of Thrones character names](#8)\n    *     [Daenerys Targaryen](#i)\n    *     [Arya Stark](#ii)\n    *     [Sansa Stark](#iii)\n    *     [Tyrion Lannister](#iv)\n    *     [Brienne Tarth](#v)\n    *     [Lyanna Stark](#vi)\n    *      [Meera Reed](#vii)\n    *      [Other important characters](#viii)\n9. [Next step](#9)\n10. [References](#10)\n\n\n![](http:\/\/theunknows.e-monsite.com\/medias\/images\/got.jpg?fx=r_1200_800)"}}