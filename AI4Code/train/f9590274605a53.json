{"cell_type":{"707ebec1":"code","79a0a1ef":"code","030aefc8":"code","5f571e32":"code","b714ae22":"code","b973add8":"code","1952ed39":"code","02777241":"code","aa1420a0":"code","094ba797":"code","656ae38a":"code","4e28bec6":"code","2f6646c6":"code","0e6c2f40":"code","8f075b05":"code","bb70f9f4":"code","25306b13":"code","5ca37fec":"code","ee624416":"code","6d6015f3":"code","bdd0d57e":"code","d6e973c1":"markdown","93c8cebf":"markdown","c4055fbd":"markdown","c156157c":"markdown","a1889de0":"markdown","ed06ef09":"markdown","911c3ac3":"markdown","e34007f6":"markdown","a067fef0":"markdown","38f59717":"markdown","146b7f8d":"markdown","f1660727":"markdown","1104b449":"markdown","33ff0ca9":"markdown","93f53cee":"markdown"},"source":{"707ebec1":"import pandas as pd\nimport matplotlib.pyplot as plt\nimport seaborn as sns\nimport numpy as np\nfrom PIL import Image\nfrom wordcloud import WordCloud, STOPWORDS\nimport requests\nfrom io import BytesIO","79a0a1ef":"wineDFRaw = pd.read_csv('\/kaggle\/input\/wine-reviews\/winemag-data-130k-v2.csv', index_col=0)\nwineDF = wineDFRaw[['country','points', 'price', 'province', 'variety', 'winery', 'taster_name', 'description']]","030aefc8":"# Swapping color for masking from black to white\ndef transform_format(val):\n    if val == 0:\n        return 255\n    else:\n        return val","5f571e32":"text = \" \".join(review for review in wineDF.description)\nstopwords = set(STOPWORDS)\nstopwords.update([\"drink\", \"now\", \"wine\", \"flavor\", \"flavors\"])\n\n# Get image for the mask\nwineMask = np.array(Image.open(\"..\/input\/wine-mask\/wine_mask.png\"))\n\n# Transforming wineMask dengan fungsi transform_format\ntransformedWineMask = np.ndarray((wineMask.shape[0],wineMask.shape[1]), np.int32)\nfor i in range(len(wineMask)):\n    transformedWineMask[i] = list(map(transform_format, wineMask[i]))\n\nwc = WordCloud(background_color=\"white\", max_words=1000, mask=transformedWineMask, stopwords=stopwords, contour_width=3, contour_color='firebrick').generate(text)\nplt.figure(figsize=[20,10])\nplt.imshow(wc, interpolation='bilinear')\nplt.axis(\"off\")\nplt.show()","b714ae22":"wineDF.head(10)","b973add8":"plt.style.use('fivethirtyeight')\ng = sns.catplot(x='country', data=wineDF, kind='count', order=pd.value_counts(wineDF['country']).iloc[:10].index, palette= 'ocean')\ng.ax.set_title('Top 10 Country Dengan Produksi Wine Terbanyak')\ng.set(xlabel= 'Country', ylabel='Jumlah Produksi Wine')\ng.fig.set_size_inches([12,7])\ng.set_xticklabels(rotation=45)\nfor p in g.ax.patches:\n    g.ax.annotate('{:.0f}'.format(p.get_height()), (p.get_x()+0.13, p.get_height()+500))\nplt.tight_layout()","1952ed39":"df = wineDF.loc[:, ['country', 'points']]\ndf = df.groupby('country')['points'].mean().head(10)\ndf = df.sort_values(ascending=False)\ng = sns.barplot(x=df,y= df.index, palette= 'plasma')\ng.set_title('Top 10 Country Dengan Rata-Rata Rating Wine Tertinggi')\ng.set(xlabel='Rating Wine', ylabel='Country')\ng.set_xlim([50,100])\nplt.gcf().set_size_inches(15,5)\nfor p in g.patches:\n    width = p.get_width()\n    plt.text(2+p.get_width(), p.get_y()+0.55*p.get_height(),\n             '{:1.2f}'.format(width),\n             ha='center', va='center')\nplt.show()","02777241":"wineDF['price'].quantile([0, 0.25, .75, .9])","aa1420a0":"def price_category(price):\n    if price <= 17.0:\n        return 'Murah'\n    elif price > 17 and price <= 42:\n        return 'Sedang'\n    else:\n        return 'Mahal'","094ba797":"wineDF['price_category'] = wineDF['price'].apply(price_category)","656ae38a":"g = sns.catplot(x='country', data=wineDF, kind='count', order=pd.value_counts(wineDF['country']).iloc[:10].index, hue='price_category', hue_order=['Murah', 'Sedang', 'Mahal'], palette= 'inferno')\ng.ax.set_title('Kategori Harga Wine Setiap Negara Dengan Produksi Wine Terbanyak')\ng.set(xlabel= 'Country', ylabel='Jumlah Wine')\ng.fig.set_size_inches([20,7])\ng.set_xticklabels(rotation=45)\nfor p in g.ax.patches:\n    g.ax.annotate('{:.0f}'.format(p.get_height()), (p.get_x(), p.get_height()+500))\nplt.tight_layout()","4e28bec6":"g = sns.catplot(y='variety', data=wineDF, kind='count', order=pd.value_counts(wineDF['variety']).iloc[:10].index, palette= 'winter')\ng.ax.set_title('Top 10 Jenis Anggur yang Digunakan')\ng.set(xlabel= 'Jenis Buah Anggur', ylabel='Jumlah Produksi Wine')\ng.fig.set_size_inches([20,7])\nfor p in g.ax.patches:\n    width = p.get_width()\n    plt.text(400+p.get_width(), p.get_y()+0.55*p.get_height(),\n             '{:.0f}'.format(width),\n             ha='center', va='center')\nplt.tight_layout()","2f6646c6":"wineDF['points'].quantile([0, 0.25, .75, .9])","0e6c2f40":"def rating_category(point):\n    if point <= 86.0:\n        return 'Tidak Enak'\n    elif point > 86.0 and point <= 91.0:\n        return 'Lumayan'\n    else:\n        return 'Enak'","8f075b05":"wineDF['rating_category'] = wineDF['points'].apply(rating_category)","bb70f9f4":"g = sns.catplot(y='variety', data=wineDF, kind='count', order=pd.value_counts(wineDF['variety']).iloc[:10].index, hue='rating_category', hue_order=['Tidak Enak', 'Lumayan', 'Enak'], palette= 'cool', height=6, aspect=2)\ng.ax.set_title('Kategori Rating Wine Setiap Negara Dengan ')\ng.set(xlabel= 'Jumlah Wine', ylabel='Jenis Anggur')\ng.fig.set_size_inches([20,10])\ng.ax.set_xlim([0,7000])\ng.ax.set_xticks([0, 1000, 2000, 3000, 4000, 5000, 6000, 7000])\nfor p in g.ax.patches:\n    width = p.get_width()\n    plt.text(250+p.get_width(), p.get_y()+0.55*p.get_height(),\n             '{:.0f}'.format(width),\n             ha='center', va='center')\nplt.show()","25306b13":"wineDFClean = wineDF[wineDF['country'] == 'US']\nwineDFClean.head(10)","5ca37fec":"df = wineDFClean.loc[:, ['winery', 'points']]\ndf.groupby('winery')['points'].mean()\ndf = df.sort_values('points', ascending=False)\ndf = df.head(20)\ng = sns.catplot(x='points', y='winery',data= df, kind='bar', palette= 'spring')\ng.ax.set_xlim([80,100])\ng.set(xlabel='Rating', ylabel='Winery')\ng.ax.set_title('Winery dengan Rating Rata-Rata Tertinggi di US')\ng.fig.set_size_inches([15,7])\nplt.tight_layout()","ee624416":"df = wineDFClean.loc[:, ['variety', 'points']]\ndf.groupby('variety')['points'].mean()\ndf = df.sort_values('points', ascending=False)\ndf = df.head(150)\ng = sns.catplot(x='points', y='variety',data= df, kind='bar', palette='autumn')\ng.ax.set_xlim([80,100])\ng.set(xlabel='Rating', ylabel='Tipe Anggur')\ng.ax.set_title('Tipe Buah Anggur dengan Rating Rata-Rata Tertinggi di US')\ng.fig.set_size_inches([15,7])\nplt.tight_layout()","6d6015f3":"df = wineDFClean.loc[:, ['price', 'points', 'price_category']]\ng = sns.relplot(x='points', y='price',data= df, kind='scatter', color='g')\ng.set(xlabel='Rating', ylabel='Harga')\ng.ax.set_title('Perbandingan Rating dengan Harga Jual Wine di US')\ng.fig.set_size_inches([10,5])\nplt.tight_layout()","bdd0d57e":"df = df.sort_values('points')\ng = sns.catplot(x='points', y='price_category', data=df, kind='bar', palette='Blues')\ng.set(xlabel='Rating', ylabel='Kategori Harga')\ng.ax.set_title('Perbandingan Rating dengan Harga Jual Wine')\ng.fig.set_size_inches([15,5])\ng.ax.set_xlim([50,100])\n# Annotate\nfor p in g.ax.patches:\n    width = p.get_width()\n    plt.text(3+p.get_width(), p.get_y()+0.55*p.get_height(),\n             '{:1.2f}'.format(width),\n             ha='center', va='center')\nplt.tight_layout()","d6e973c1":"<div style=\"text-align: justify\">&emsp;&emsp;Dari scatter plot diatas, dapat dilihat bahwa harga tidak selalu mencerminkan kualitas dari wine tersebut. Pada rating tertinggi, yaitu 100, terdapat 3 buah wine. Dua diantaranya memiliki harga berkisar dibawah USD 250. Sedangkan bila kita melihat grafik ini, terdapat wine dengan harga hingga USD 2000 tetapi hanya memiliki rating 91. Bila dilihat kembali, grafik diatas masih belum dapat menjawab apakah rating tertinggi memiliki harga yang relatif mahal atau murah. Untuk memperjelas grafik diatas, mari kita menggunakan pembagian harga menjadi 3 bagian seperti diatas.<\/div>","93c8cebf":"<div style=\"text-align: justify\">&emsp;&emsp;Melihat data diatas, Pinot Noir merupakan jenis anggur yang paling sering digunakan dalam pembuatan wine. Tapi bagaimana dengan rasa dari jenis-jenis diatas? Untuk mengetahuinya, mari kita melihatnya pada grafik berikutnya.<\/div>","c4055fbd":"<div style=\"text-align: justify\">&emsp;&emsp;Bila kita membicarakan wine, pastinya yang kita cari adalah merknya, tempat dibuatnya, tahunnya, dan yang penting adalah jenis buah anggur yang digunakan. Diatas tadi kita sudah membicarakan tentang harga, penghasil wine terbanyak, dan rata-rata rating wine sesuai dengan negaranya, tetapi kita belum membahas jenis buah anggurnya. Oleh karena itu, sekarang mari kita membahas jenis buah anggur yang paling sering digunakan.<\/div>","c156157c":"<div style=\"text-align: justify\">&emsp;&emsp;Dari tabel diatas dapat dilihat bahwa wine tersebut diproduksi di berbagai negara dengan beragam harga dan merk serta jenis anggur yang digunakan. Mari kita teliti data tersebut lebih dalam. Kira-kira dari data tersebut, manakah negara dengan produksi wine terbanyak dan manakah negara yang memiliki rating wine rata-rata paling tinggi?<\/div>","a1889de0":"<div style=\"text-align: justify\">Dari grafik diatas dapat dilihat bahwa harga juga menentukan kualitas. Semakin tinggi kualitasnya, harganya juga akan semakin mahal.<\/div>","ed06ef09":"<div style=\"text-align: justify\">&emsp;&emsp;Bila dilihat dari *winery*-nya, dapat disimpulkan bahwa beberapa merk terkenal seperti Cardinale, Verit\u00e9, dan Charles Smith memiliki rata-rata rating tertinggi. Tapi, merk ini juga bukan menjadi satu-satunya penentu rasa wine. Faktor penting lainnya yang mempengaruhi rasa wine adalah dari tipe buah anggur yang digunakan. Oleh karena itu, mari kita melihat rating untuk jenis anggur yang digunakan di US.<\/div>","911c3ac3":"<div style=\"text-align: justify\">&emsp;&emsp;Ternyata US memproduksi wine dengan jumlah paling banyak. Tapi apakah US juga menjadi yang nomor 1 dalam hal rasa wine? Apakah rata-rata rating dari US akan menjadi lebih tinggi daripada rata-rata rating dari negara lain? Mari kita membuktikannya melalui grafik berikut ini.<\/div>","e34007f6":"<h1>Local Visualization<\/h1>\n<div style=\"text-align: justify\">&emsp;&emsp;Mari kita mulai dengan negara yang memproduksi wine paling banyak, yaitu US. Meskipun US tidak masuk kedalam jajaran rating tertinggi dari semua negara, namun US juga mengeluarkan beberapa merk wine terkenal, seperti Cardinale. Yang menjadi pertanyaan sekarang adalah apakah merk yang terkenal tersebut juga memiliki rasa yang enak dan rating yang tinggi? Mari kita melihat grafik dibawah ini.<\/div>","a067fef0":"<h1 align=\"center\">Wine Review<\/h1>\n\n<div align=\"center\"><img src=\"https:\/\/static01.nyt.com\/images\/2020\/01\/30\/dining\/30pour\/30pour-superJumbo.jpg?quality=90&auto=webp\" width=60%><\/div>\n<h1 align=\"center\"><\/h1>\n<div style=\"text-align: justify\">&emsp;&emsp;Wine merupakan salah satu minuman beralkohol yang sering kali dikonsumsi ketika kita sedang melakukan dinner romantis bersama pasangan. Wine tersebut dijual dengan harga yang bervariasi, sehingga terkadang kita bingung untuk memilih wine mana yang memiliki kualitas terbaik. Oleh karena itu, diharapkan data visualisasi ini dapat membantu untuk mengetahui manakah wine yang memiliki kualitas terbaik dan faktor-faktor apa saja yang perlu diperhatikan untuk membeli wine dengan kualitas terbaik.<\/div>","38f59717":"<h1>Global Visualization<\/h1>\n<div style=\"text-align: justify\">Mula-mula mari kita melihat bagiamana para reviewers wine mendeskripsikan rasa dari wine. Apa kata-kata yang sering mereka pakai?<\/div>","146b7f8d":"<h1>Kesimpulan<\/h1>\n<div style=\"text-align: justify\">&emsp;&emsp;Setelah kita melihat semua data yang tersaji diatas, kita menjadi sangat terbantu ketika ingin memilih wine. Berikut ini kesimpulan yang dapat kita ambil dari data yang tersaji diatas:<br\/>\n1. US merupakan produsen wine terbesar di dunia<br\/>\n2. Austria memegang posisi sebagai penghasil wine terbaik di dunia dengan rating 90.10<br\/>\n3. Mayoritas wine di tiap negara dijual dengan harga yang sedang (tidak mahal dan tidak murah) yaitu berkisar antara USD 18 hingga USD 42<br\/>\n4. Pinot Noir merupakan jenis buah anggur yang cukup enak bila dibuat wine dan paling sering digunakan untuk membuat wine di seluruh dunia<br\/>\n5. US memiliki merk terkenal dengan rating tertinggi se-US yaitu cayuse dan Cardinale<br\/>\n6. Syrah merupakan salah satu jenis buah anggur yang dipakai untuk membuat wine di US dengan rating tertinggi. Sedangkan Pinot Noir, jenis yang sering dipakai, berada pada urutan ke-5<br\/>\n7. Semakin mahal harga dari wine, semakin bagus pula kualitasnya.<br\/>\n&emsp;&emsp;Oleh karena itu, bila ingin membeli wine yang terbaik pilihlah wine dengan buatan Austria, dengan jenis buah Pinot Noir (karena umum dan lumayan enak) dengan harga yang relatif mahal (diatas USD 42). Untuk wine asal US, pilihlah merk Cayuse atau Cardinale dengan jenis buah Syrah atau Carbenet Sauvignon (urutan kedua), karena merk tersebut memiliki rata-rata rating wine tertinggi. Semoga dengan adanya data ini, dinner kalian menjadi lebih romantis karena ditemani dengan wine berkualitas tinggi \u2764.<br\/>\nDisclaimer: Notebook ini dibuat oleh pemula yang baru saja belajar data visualization sehingga kritik dan saran masih dibutuhkan. Terima kasih :).\n<\/div>","f1660727":"<div style=\"text-align: justify\">Menarik sekali ketika melihat word cloud diatas. Lalu mari kita beralih ke pembahasan utama. Untuk mula-mula, mari kita melihat 10 data teratas.<\/div>","1104b449":"<div style=\"text-align: justify\">&emsp;&emsp;Dari data tersebut, terlihat bahwa mayoritas wine dengan bahan anggur berjenis Pinot Noir memiliki rasa yang lumayan enak (rating 87 sampai 91). Sekarang kita sudah mengetahui beberapa data \"*global*\" yang merupakan informasi yang dapat sangat berguna ketika kita ingin membeli wine saat dinner romantis bersama pasangan \u2764. Namun, kita masih belum mengetahui merk apa yang memproduksi wine terbaik pada tiap-tiap negara. Oleh karena itu, mari kita lanjut pada tahap berikutnya.<\/div>","33ff0ca9":"<div style=\"text-align: justify\">&emsp;&emsp;Ternyata US sebagai produsen wine terbesar masih tidak masuk ke dalam 10 negara dengan rata-rata rating wine tertinggi. Bagaimana dengan harga wine di setiap negara? Berapakah jumlah wine di setiap negara yang memiliki harga murah, sedang, dan mahal? Untuk mengetahui hal tersebut mari kita membuat terlebih dahulu pembagian harganya.<\/div>","93f53cee":"<div style=\"text-align: justify\">&emsp;&emsp;Ternyata tipe buah anggur yang memiliki rating tertinggi adalah Syrah. Dari grafik diatas, beberapa tipe buah anggur yang sering kita ketahui untuk membuat wine yaitu Carbenet Sauvignon dan Pinot Noir yang paling sering digunakan secara global juga memasuki jajaran teratas.<\/div>\n<div style=\"text-align: justify\">Lalu apakah harga wine di US yang semakin tinggi memiliki rasa yang terbaik? Mari kita lihat pada scatter plot dibawah ini.<\/div>"}}