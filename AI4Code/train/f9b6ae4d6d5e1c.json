{"cell_type":{"e24314b2":"code","07bf69b7":"code","6f6d988e":"code","6364ac97":"code","44a41757":"code","51a5eb71":"code","bcb32f3e":"code","dcdee23c":"code","cc2a095f":"code","ec3caaa2":"code","21b1bccf":"code","646f5180":"code","05b6836d":"markdown","42a150fd":"markdown","d728755c":"markdown","409c4147":"markdown","f18c83a1":"markdown","3fee455b":"markdown","5d6f3d25":"markdown","71933a20":"markdown","e7cbc082":"markdown","c74f2b7d":"markdown","205b5bdd":"markdown","59078921":"markdown","1a52a071":"markdown","ec47f277":"markdown","5d7ac7ac":"markdown","3dd22f17":"markdown","e28d322c":"markdown","2e509fe3":"markdown","d594996f":"markdown","b41fe961":"markdown"},"source":{"e24314b2":"import pandas as pd\nimport numpy as np\n\nfrom sklearn import metrics as m\nfrom sklearn import linear_model as lm\nfrom sklearn import model_selection as ms\nfrom sklearn.metrics import r2_score \nfrom sklearn.metrics import mean_squared_error","07bf69b7":"df = pd.read_csv ('..\/input\/koreahousedata\/Daegu_Real_Estate_data.csv')","6f6d988e":"hallway_dummy = pd.get_dummies(df['HallwayType']).iloc[:,1:]\nheating_dummy = pd.get_dummies(df['HeatingType']).iloc[:,1:]\naptmanage_dummy = pd.get_dummies(df['AptManageType']).iloc[:,1:]\nbusstop_dummy = pd.get_dummies(df['TimeToBusStop']).iloc[:,1:]\ntimetosubwaystation_dummy = pd.get_dummies(df['TimeToSubway']).iloc[:,1:]\nsubway_dummy = pd.get_dummies(df['SubwayStation']).iloc[:,1:]","6364ac97":"df1 = df.drop(['SalePrice', 'HallwayType', 'HeatingType', 'AptManageType', 'TimeToBusStop', 'TimeToSubway', 'SubwayStation'], axis=1)","44a41757":"df2 = df1.loc[:,'YearBuilt':'N_FacilitiesNearBy(Total)'].apply(lambda x : np.log10(x+1))","51a5eb71":"df3 = pd.concat([df2, hallway_dummy, heating_dummy, aptmanage_dummy, busstop_dummy, timetosubwaystation_dummy, subway_dummy], axis = 1)","bcb32f3e":"x = df3\ny = df['SalePrice'].copy()\n\nx_train = df3\ny_train = df['SalePrice'].copy()","dcdee23c":"x_train, x_test, y_train, y_test = ms.train_test_split(x, y, test_size = 0.3, random_state = 19)","cc2a095f":"model = lm.LinearRegression()\nmodel.fit(x_train, y_train)","ec3caaa2":"pred_train = model.predict(x_train)\npred_test = model.predict(x_test)","21b1bccf":"#Training\n\nmae_train = m.mean_absolute_error(y_train, pred_train )\nmape_train = np.mean(np.abs((y_train - pred_train)\/ y_train))\nMSE_train = mean_squared_error(y_train,pred_train)\nRMSE_train = mean_squared_error(y_train,pred_train,squared=False) \nR2_train = r2_score(y_train,pred_train)\n\n#Test\n\nmae_test = m.mean_absolute_error(y_test, pred_test )\nmape_test = np.mean(np.abs((y_test - pred_test)\/ y_test))\nMSE_test = mean_squared_error(y_test,pred_test)\nRMSE_test = mean_squared_error(y_test,pred_test,squared=False) \nR2_test = r2_score(y_test,pred_test)","646f5180":"data = {\n    'Dataframe': ['Treino', 'Teste'],\n    'MAE': [mae_train, mae_test],\n    'MAPE': [mape_train, mape_test],\n    'MSE': [MSE_train, MSE_test],\n    'RMSE': [RMSE_train, RMSE_test],\n    'R2': [R2_train, R2_test]}\n\npd.DataFrame(data)","05b6836d":"# 6 - M\u00e9tricas de performance","42a150fd":"Tranforma\u00e7\u00e3o das vari\u00e1veis qualitativas para vari\u00e1veis dummy","d728755c":"O objetivo do projeto \u00e9 apresentar um modelo de regress\u00e3o linear m\u00faltipla com c\u00f3digo sucinto e uma explica\u00e7\u00e3o clara aplicada para predi\u00e7\u00e3o da vari\u00e1vel 'SalePrice' \u00e0 partir do dataset 'Daegu_Real_Estate_data.csv'. A base apresenta os pre\u00e7os de venda da cidade de Daegu, Cor\u00e9ia do Sul, entre o per\u00edodo de agosto de 2007 e agosto de 2017. Dataset retirado da plataforma Kaggle: https:\/\/www.kaggle.com\/gunhee\/koreahousedata.\n\nComent\u00e1rios e sugest\u00f5es s\u00e3o bem vindos.\n\nO projeto est\u00e1 dividido nas seguintes se\u00e7\u00f5es:\n\n1 - Introdu\u00e7\u00e3o\n\n2 - Importa\u00e7\u00e3o de bibliotecas\n\n3 - Carregamento da base de dados\n\n4 - Tratamento de dados\n\n    4.1 - Transforma\u00e7\u00e3o em vari\u00e1vel dummy\n    4.2 - Transforma\u00e7\u00e3o logar\u00edtimica\n    4.3 - Defini\u00e7\u00e3o de vari\u00e1veis\n    4.4 - Divis\u00e3o do dataset em linhas de teste e de treino\n     \n\n5 - Treinamento do modelo\n\n6 - M\u00e9tricas de performance\n\n7 - Conclus\u00e3o\n\n8 - Refer\u00eancias","409c4147":"### 4.2 - Tranforma\u00e7\u00e3o logar\u00edtimica ","f18c83a1":"### 4.4 - Divis\u00e3o do dataset em linhas de teste e de treino","3fee455b":"# 8 -  Refer\u00eancias","5d6f3d25":"Defini\u00e7\u00e3o da vari\u00e1vel a ser predita e das vari\u00e1veis a serem usadas na predi\u00e7\u00e3o (vari\u00e1veis dependente e indepentes) ","71933a20":"# 2 - Importa\u00e7\u00e3o de bibliotecas","e7cbc082":"Tranforma\u00e7\u00e3o das vari\u00e1veis num\u00e9ricas em logar\u00edtimos na base 10","c74f2b7d":"# 5 - Treinamento de modelo","205b5bdd":"### 4.1 - Tranforma\u00e7\u00e3o em vari\u00e1veis dummy ","59078921":"### 4.3 - Defini\u00e7\u00e3o de vari\u00e1veis","1a52a071":"https:\/\/www.kaggle.com\/samuelsferreira\/house-prices-passo-a-passo-brazilian-\n\nhttps:\/\/www.kaggle.com\/janiobachmann\/house-prices-useful-regression-techniques\n\nhttps:\/\/www.youtube.com\/watch?v=tsVWd6I5nuk\n\nhttps:\/\/www.kaggle.com\/fedi1996\/house-prices-data-cleaning-viz-and-modeling\n\nhttps:\/\/medium.com\/turing-talks\/como-avaliar-seu-modelo-de-regress%C3%A3o-c2c8d73dab96\n\nhttps:\/\/www.researchgate.net\/publication\/331441290_Modelo_de_regressao_linear_multipla_para_avaliacao_do_valor_de_mercado_de_apartamentos_residenciais_em_Fortaleza_CE\/fulltext\/5c796908299bf1268d308e20\/Modelo-de-regressao-linear-multipla-para-avaliacao-do-valor-de-mercado-de-apartamentos-residenciais-em-Fortaleza-CE.pdf?origin=publication_detail","ec47f277":"# 4 - Tratamento de dados","5d7ac7ac":"# 1 - Introdu\u00e7\u00e3o","3dd22f17":"# 7 - Conclus\u00e3o","e28d322c":"Os dados de teste do modelo apresentaram performance de 14,88% de Mean Average Percentage Error e R-quadrado de 0.89 \n\n\u00c0 partir das altera\u00e7\u00f5es feitas na etapa de tratamento de dados, pode-se constatar que a tranforma\u00e7\u00e3o das vari\u00e1veis qualitativas em vari\u00e1veis dummy e a transforma\u00e7\u00e3o das vari\u00e1veis num\u00e9ricas em logar\u00edtimicas reduziram a m\u00e9trica de MAPE em 2,16% e aumentaram a m\u00e9trica de R2 em 0,0380 em rela\u00e7\u00e3o a uma regress\u00e3o linear simples sem tratamento de dados*\n\nComo pr\u00f3ximos passos para a melhora de performance, pode ser feito uma an\u00e1lise de correla\u00e7\u00e3o entre as vari\u00e1veis dependentes para evitar o problema da multicolinearidade\n\n*Resultado das m\u00e9tricas de performance da aplica\u00e7\u00e3o da regresss\u00e3o linear simples sem tratamento de dados n\u00e3o foi colocada, a fim de tornar a apresenta\u00e7\u00e3o mais sucinta ","2e509fe3":"M\u00e9tricas de performance usadas: Mean Absolute Error (MAE), Mean Absolute Percentage Error (MAPE), Mean Squared Error (MSE), R Mean Squared Error (RMSE), R - quadrado (R2)","d594996f":"# 3 - Carregamento da base de dados","b41fe961":"Visando evitar o overfitting (evitar que o modelo \"decore\" as respostas) 70% das linhas da base 'Daegu_Real_Estate_data.csv' foram separadas para treino e 30% para teste"}}