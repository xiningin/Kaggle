{"cell_type":{"72074dde":"code","9942ed43":"code","9c751f38":"code","34d05e67":"code","63744bc4":"code","54312005":"code","d71b481d":"code","7368c940":"code","d49e2b78":"code","ad01c71f":"code","5105f48b":"code","b53070cb":"markdown"},"source":{"72074dde":"import os\nimport cv2\nimport skimage.io\nfrom tqdm.notebook import tqdm\nimport zipfile\nimport pandas as pd\nimport numpy as np\nimport shutil\n\nfrom pydub import AudioSegment\nfrom joblib import Parallel, delayed","9942ed43":"!mkdir -p \/tmp\/WOLOF_ASR_dataset","9c751f38":"!ls \/tmp","34d05e67":"data = '''{\n  \"title\": \"ASR_WOLOF_wav_16000\",\n  \"id\": \"kingabzpro\/ASR_WOLOF_wav_16000\",\n  \"licenses\": [\n    {\n      \"name\": \"CC0-1.0\"\n    }\n  ]\n}\n'''\ntext_file = open(\"\/tmp\/WOLOF_ASR_dataset\/dataset-metadata.json\", 'w+')\nn = text_file.write(data)\ntext_file.close()","63744bc4":"ROOT_PATH = \"..\/input\/automatic-speech-recognition-in-wolof\/clips\/clips\"\nOUTPUT_DIR = \"\/tmp\/WOLOF_ASR_dataset\/audio_wav_16000\"","54312005":"os.mkdir(OUTPUT_DIR)","d71b481d":"def save_fn(filename):\n    \n    path = f\"{ROOT_PATH}\/{filename}\"\n    save_path = f\"{OUTPUT_DIR}\"\n    if not os.path.exists(save_path):\n        os.makedirs(save_path, exist_ok=True)\n    \n    if os.path.exists(path):\n        try:\n            sound = AudioSegment.from_mp3(path)\n            sound = sound.set_frame_rate(16000)\n            sound.export(f\"{save_path}\/{filename[:-4]}.wav\", format=\"wav\")\n        except:\n            print(path)","7368c940":"import os\npath = \"..\/input\/automatic-speech-recognition-in-wolof\/clips\/clips\/\"\naudio_files = os.listdir(path)\n","d49e2b78":"Parallel(n_jobs=8, backend=\"multiprocessing\")(\n    delayed(save_fn)(filename) for filename in tqdm(audio_files)\n)","ad01c71f":"!sleep 10","5105f48b":"!zip -r \".\/audio_wav_16000.zip\" \"\/tmp\/WOLOF_ASR_dataset\/audio_wav_16000\/\"","b53070cb":"### Reference\n\nIdea is from this notebook : https:\/\/www.kaggle.com\/raghaw\/panda-medium-resolution-dataset-25x256x256\n\nJoblib Parallel form : https:\/\/www.youtube.com\/watch?v=Ny3O4VpACkc&list=PL98nY_tJQXZnoCDfHLo58tRHUyNvrRVzn&index=4"}}