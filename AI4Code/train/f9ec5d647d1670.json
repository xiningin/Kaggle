{"cell_type":{"7fee6fe8":"code","b163e014":"code","369b1b02":"code","9cb9f1bf":"code","c7845f2c":"code","3ef1a0d3":"code","64dad245":"code","108a4984":"code","d95b51f3":"code","dcdac3b0":"code","498aaa1e":"code","68a63e33":"code","0bebf98e":"code","056ed6c9":"code","de2b558f":"code","50b42ce4":"code","1806b2b0":"code","053847fe":"code","3034f070":"code","1378c29d":"code","503c4742":"code","ebe3a896":"code","32cd21cc":"code","7020f2a8":"code","e6ebd180":"code","3b661c6e":"code","b2ff475b":"code","9d05b84d":"code","62784396":"code","c69e65e8":"code","2801b230":"code","c9df5a75":"code","cc418644":"code","b9650dd9":"code","319e940b":"code","f8b0fa49":"code","3a763161":"code","e921f124":"code","66ca2a71":"code","54911268":"code","c43e4f7f":"code","21380996":"code","402985eb":"code","22df3fed":"code","9aae3078":"code","ca2f76ef":"code","40a00ac5":"code","4f10118a":"code","63f23d41":"code","53f2827b":"code","97cb5cc4":"code","cd0b0540":"code","a15a91d2":"code","7e602fd9":"code","41fd2926":"code","539986c0":"code","1789d53e":"code","7198614b":"code","14703d23":"code","88f8b1c6":"code","339f1e36":"code","2ec77200":"code","9c083c42":"code","e0a5162f":"code","9bbac01e":"code","43d68ab6":"code","cee5ba15":"code","6e1da093":"code","91d55dc5":"code","607709c0":"code","5d216ea5":"code","4b5abb7a":"code","9d5757c7":"code","d8549c92":"code","1f5472ba":"code","9b6e031f":"code","5d8804cd":"code","d4a9ba15":"code","4e7d25d4":"code","7dca00c4":"code","1ce7d9d5":"code","8eca10fd":"code","f38cb18d":"code","339fd8f3":"code","a9213d64":"markdown","d909c317":"markdown","9343db5f":"markdown","e6a943c9":"markdown","6eb1c950":"markdown","3334bcae":"markdown","9c38c9c9":"markdown","73c69b5e":"markdown","3f6b13d1":"markdown","c935b687":"markdown","2a845d22":"markdown","e394c6da":"markdown","c0f5a798":"markdown","ca3363a5":"markdown","da1a7556":"markdown","21a5c5fa":"markdown","2e40d94d":"markdown","04f4a701":"markdown","63e25b19":"markdown","c3727de2":"markdown","8f2c6c88":"markdown","e356cca1":"markdown","1bb0d01d":"markdown","281867db":"markdown","92993abc":"markdown","c95895b1":"markdown"},"source":{"7fee6fe8":"import math \nimport calendar\nimport pandas as pd\nimport datetime\n\n\nimport geopandas as gpd\nfrom shapely.geometry import Point\nimport warnings\nwarnings.simplefilter(action='ignore', category=FutureWarning)\n\nfrom plotly.subplots import make_subplots\nimport plotly.graph_objects as go\nimport pandas as pd\nimport numpy as np\nimport re\nimport matplotlib.pyplot as plt\nimport seaborn as sns\n%matplotlib inline\n\n# plotly\nimport plotly.graph_objs as go\nfrom plotly import tools\nfrom plotly.offline import init_notebook_mode, iplot\ninit_notebook_mode(connected=True)\nimport plotly.express as px","b163e014":"#load in datasets\nuk_2007 = pd.read_csv('..\/input\/uk-acc-2005-2007\/accidents_2005_to_2007.csv', low_memory=False)\nuk_2011 = pd.read_csv('..\/input\/uk-accident-datasets\/accidents_2009_to_2011.csv', low_memory=False)\nuk_2014 = pd.read_csv('..\/input\/uk-accident-datasets\/accidents_2012_to_2014.csv', low_memory=False)","369b1b02":"uk_accidents = pd.concat([uk_2007, uk_2011, uk_2014], ignore_index=True)","9cb9f1bf":"uk_accidents.shape","c7845f2c":"#Number of nulls by each columns\nuk_accidents.isnull().sum()","3ef1a0d3":"#drop columns with greater than 10,000 null values\nuk_accidents = uk_accidents.drop(['Junction_Detail', 'Junction_Control', 'LSOA_of_Accident_Location'], axis=1)","64dad245":"uk_accidents.dropna(inplace = True)","108a4984":"uk_accidents.shape","d95b51f3":"uk_accidents.head(5)","dcdac3b0":"#load additional datasets\nuk_LAD = pd.read_csv('..\/input\/uk-accident-datasets\/LAD.csv')\nuk_LAD3 = pd.read_csv('..\/input\/uk-accident-datasets\/LAD3.csv')\nuk_LAD4 = pd.read_csv('..\/input\/uk-accident-datasets\/LAD4.csv')","498aaa1e":"uk_LAD.head()","68a63e33":"uk_LAD3.head(5)","0bebf98e":"#Road Network Classification\nuk_LAD4.head(10)","056ed6c9":"#lets merge the two dataframe based on the common column that both dataframe have which is 'Sub-Group'\n\nuk_LAD2 = pd.merge(uk_LAD3, uk_LAD4, on='Sub-Group')","de2b558f":"#columns with more than 100,000 None Values\nnone_columns = []\nfor x in uk_accidents.columns:\n    none_ct = uk_accidents[x].loc[uk_accidents[x] == 'None'].count()\n    if none_ct >= 100000:\n        none_columns.append(x)","50b42ce4":"print(none_columns)","1806b2b0":"uk_accidents = uk_accidents.drop(none_columns, axis=1)","053847fe":"uk_accidents.shape","3034f070":"#rename ONS to LAD_Code\nuk_accidents.rename(columns={'Local_Authority_(Highway)': 'LAD_Code'}, inplace = True)\nuk_LAD2.rename(columns={'ONS Code': 'LAD_Code'}, inplace = True)\nuk_LAD.rename(columns={'Code': 'LAD_Code'}, inplace = True)","1378c29d":"uk_LAD2 = pd.merge(uk_LAD, uk_LAD2, on='LAD_Code')","503c4742":"uk_accidents = pd.merge(uk_accidents, uk_LAD2, on='LAD_Code')","ebe3a896":"df_uk_gpd = uk_accidents.copy()","32cd21cc":"#due to the large size of the accident dataset (~1.5 million rows)\n#i will only convert the accident df for year 2014 to \"GeoDataFrame\"\ndf_uk_2014 = df_uk_gpd[df_uk_gpd['Year'] == 2014]","7020f2a8":"df_uk_gpd_2014 = df_uk_2014.copy()","e6ebd180":"#convert accident df\npoints = df_uk_gpd_2014.apply(lambda row: Point(row.Location_Easting_OSGR, row.Location_Northing_OSGR), axis=1)\ndf_uk_gpd_2014 = gpd.GeoDataFrame(df_uk_gpd_2014, geometry=points)","3b661c6e":"#uk 2018 road network map\ngb_shape = gpd.read_file('..\/input\/shape-file\/2018-MRDB-minimal.shp')","b2ff475b":"gb_shape.shape","9d05b84d":"#lets plot points where road accidents occured based on various columns\/aspect of the data\ndef map_plot(df1, df2, column, column_title, color):\n    \n    ax = df1.plot(figsize=(30,15), color='black', linewidth=0.6)\n    df2.plot(column= column, ax=ax, markersize=60, legend = True, cmap=color, edgecolor='white')\n    leg = ax.get_legend()\n    leg.set_bbox_to_anchor((1.1,0.5))\n    leg.set_title(column_title)\n    leg.set_frame_on(False)\n    ax.set_axis_off()\n    ax.set_title('Locations of Road Accidents in UK based on the ' + column_title + ', 2014', fontsize=16, pad=10)","62784396":"map_plot(gb_shape, df_uk_gpd_2014, 'Region\/Country', 'Regions', \"gist_rainbow_r\")","c69e65e8":"map_plot(gb_shape, df_uk_gpd_2014, 'Supergroup name', 'Settlement Areas', \"plasma_r\")","2801b230":"map_plot(gb_shape, df_uk_gpd_2014, 'Sub-Group Description', \"Road Networks\", \"rainbow\")","c9df5a75":"sns.set_context('talk')\nsns.set_style(\"darkgrid\")\ng = sns.FacetGrid(df_uk_gpd, col=\"Year\", hue=\"Region\/Country\", palette=\"gist_rainbow_r\", col_wrap=3, height=6)\ng.map(plt.scatter, \"Longitude\", \"Latitude\")\ng.add_legend()\ng.fig.subplots_adjust(top=0.93)\nplt.suptitle('Yearwise trend of road accidents in UK between 2005 - 2014 for different regions', fontsize=24)\nplt.show()","cc418644":"#convert all datetime columns to datetime formats\ndf_uk = uk_accidents.copy()\ndf_uk['Date'] = pd.to_datetime(df_uk['Date'])\ndf_uk['Year'] = df_uk['Date'].dt.year","b9650dd9":"df_uk['Day'] = df_uk.Date.dt.day\ndf_uk['week_in_month'] = pd.to_numeric(df_uk.Day\/7)\ndf_uk['week_in_month'] = df_uk['week_in_month'].apply(lambda x: math.ceil(x))\ndf_uk['month'] = df_uk.Date.dt.month","319e940b":"#datetime.time(df_uk['Time'])\ndf_uk['Time'] = pd.to_timedelta(df_uk['Time'] +':00')","f8b0fa49":"df_uk['Time']","3a763161":"df_uk['Hour'] = df_uk['Time'].dt.components['hours']","e921f124":"df_uk.Hour.unique()","66ca2a71":"def groupby_accidents(df, column):\n    col_agg = df.groupby(column).Number_of_Casualties.agg(['sum', 'count', 'mean'])\n    col_agg.reset_index(inplace = True)\n    col_agg.sort_values(by = column, inplace = True)\n    return col_agg","54911268":"year_agg = groupby_accidents(df_uk, 'Year')","c43e4f7f":"data = go.Scatter(x = year_agg['Year'], y=year_agg['sum'], mode=\"lines+markers\", name='Number of Casualties', \n                  line= dict(color = ('rgb(255,165,0)'), width=4), showlegend = True)\nlayout = go.Layout(title='<b> Records of Road Accidents (Casualties per year) in UK between 2005 - 2014 <b>',\n                   xaxis=dict(title='<b> Years <b>',titlefont=dict(size=16, color='#7f7f7f')),\n                   yaxis=dict(title='<b> Number of Casualties <b>',titlefont=dict(size=16,color='#7f7f7f'))\n                 )\nfig = go.Figure(data=data, layout = layout)\nfig.update_xaxes(dtick=1)\n\niplot(fig)","21380996":"#records of road accidents based on different regions\ndef plot_regions_agg(df, regions, content):\n    \n    def groupby_region(df, column, name):\n        \n        col_agg = df[df['Region\/Country'] == name].groupby(column).Number_of_Casualties.agg(['count', 'sum'])\n        col_agg.reset_index(inplace = True)\n        col_agg.sort_values(by = column, inplace = True)\n        return col_agg\n    \n    region_traces = []\n    colors = ['lightslategray', 'crimson', 'darkcyan', 'darkgoldenrod', 'cornsilk', 'turquoise', 'limegreen', \\\n              'darkorchid', 'palevioletred', 'forestgreen', 'silver', 'lightsteelblue']\n    for name in range(len(regions)):\n        name_agg = groupby_region(df, 'Year', regions[name])\n        data_agg = go.Scatter(x = name_agg['Year'], y= name_agg['sum'], mode=\"lines+markers\", name=regions[name], \n                              line= dict(color = colors[name], width=2.5))\n        region_traces.append(data_agg)\n    layout = go.Layout(title='<b> Rates of Road Accidents in different ' + content + ' regions between 2005 - 2014<b>', width=1100, \n                       height=600, xaxis=dict(title='<b> Year <b>',titlefont=dict(size=16, color='#7f7f7f'), tickfont=dict(size=15, color='darkslateblue')), \n                       yaxis=dict(title='<b> Number of Casualties <b>',titlefont=dict(size=16,color='#7f7f7f'), tickfont=dict(size=15, color='darkslateblue')))\n        \n    fig = go.Figure(data=region_traces, layout = layout)\n    fig.update_xaxes(dtick=1)\n    fig.show()","402985eb":"regions = df_uk['Region\/Country'].unique().tolist()\nplot_regions_agg(df_uk, regions, 'UK')","22df3fed":"areas = ['London, England', 'North East, England', 'Yorkshire and The Humber, England', 'North West, England']\nplot_regions_agg(df_uk, areas, 'England')","9aae3078":"region_agg = groupby_accidents(df_uk, 'Region\/Country').sort_values(by = 'sum', ascending = False)\nfig = px.bar(region_agg, x= 'Region\/Country', y= 'sum', color='sum', \n             labels={'sum':'<b> Number of Casualties <b>'}, width=1000, height=700,\n             color_continuous_scale=px.colors.sequential.Plasma)\n\nfig.update_layout(title='<b> Road Accidents in UK (based on different regions) between 2005 - 2014 <b>', xaxis_title='<b> Year <b>',\n                  yaxis_title='<b> Number of Casualties <b>')\nfig.show()","ca2f76ef":"top_20 = groupby_accidents(df_uk, 'Highway Authority').sort_values(by = 'sum', ascending = False)[:20]\nbottom_20 = groupby_accidents(df_uk, 'Highway Authority').sort_values(by = 'sum', ascending = False)[-20:]","40a00ac5":"#Data Visualization\ndef plot_highway(df, name, color):\n    fig = px.bar(df, x= 'Highway Authority', y= 'sum', color='sum', \n                 labels={'sum':'<b> Casualties <b>'}, width=1000, height=700,\n                 color_continuous_scale=color)\n    \n    if name == 'Safest':\n        content = 'lowest'\n    else:\n        content = 'highest'\n    \n    fig.update_layout(title='<b> 20 ' + name + ' Highway Authorities with the ' + content + ' record of road accidents in UK <b>', xaxis_title='<b> Highway Authority <b>', \n                      yaxis_title='<b> Number of Casualties <b>')\n    fig.show()","4f10118a":"plot_highway(top_20, 'Dangerous', px.colors.sequential.Cividis)","63f23d41":"plot_highway(bottom_20, 'Safest', px.colors.sequential.Inferno)","53f2827b":"def plot_time_agg(df, column):\n    \n    def groupby_col(df, column, year):\n        \n        col_agg = df[df['Year'] == year].groupby(column).Number_of_Casualties.agg(['count', 'sum'])\n        if year == None:\n            col_agg = df.groupby(column).Number_of_Casualties.agg(['count', 'sum'])\n            col_agg['average'] = col_agg['sum'] \/ 9\n        col_agg.reset_index(inplace = True)\n        col_agg.sort_values(by = column, inplace = True)\n        if column == 'month':\n            col_agg['month'] = col_agg['month'].apply(lambda x: calendar.month_abbr[x])\n        if column == 'Day_of_Week':\n            col_agg['Day_of_Week'] = col_agg['Day_of_Week'] - 1\n            col_agg['Day_of_Week'] = col_agg['Day_of_Week'].apply(lambda x: calendar.day_abbr[x])\n            \n        return col_agg\n    \n    year_list = df_uk['Year'].unique().tolist() + [None]\n    list_of_traces = []\n    colors = ['darkmagenta', 'deeppink', 'lavender', 'lightsteelblue', 'orchid', 'navy', 'forestgreen', \\\n              'greenyellow', 'silver', 'darkslategrey']\n    \n    for year in range(len(year_list)):\n        if year_list[year] == None:\n            name_agg = groupby_col(df, column, year_list[year])\n            data_agg = go.Scatter(x = name_agg[column], y= name_agg['average'], mode=\"lines+markers\", name='Overall Average', \n                                 line= dict(color = 'darkslategrey', width=4))\n        else:\n            name_agg = groupby_col(df, column, year_list[year])\n            data_agg = go.Scatter(x = name_agg[column], y= name_agg['sum'], mode=\"lines+markers\", name=regions[year], \n                                  line= dict(color = colors[year], width=2, dash = 'dashdot'))\n        list_of_traces.append(data_agg)\n        \n        \n    #Data visualization\n    if column == 'month':\n        content = 'by Months of the year'\n        tk = ''\n    elif column == 'Hour':\n        content = 'during Day and Night'\n        tk = 1\n    elif column == 'Day_of_Week':\n        content = 'by weekdays'\n        tk = ''\n    elif column == 'week_in_month':\n        content = 'by weeks in a month'\n        tk = ''\n    \n    layout = go.Layout(title='<b> Occurences of Road Accidents ' + content + ' in UK between 2005 - 2014<b>', \n                       xaxis=dict(title='<b> ' + column + ' <b>',titlefont=dict(size=16, color='#7f7f7f'), tickfont=dict(size=15, color='darkslateblue')), \n                       yaxis=dict(title='<b> Number of Casualties <b>',titlefont=dict(size=16,color='#7f7f7f'), tickfont=dict(size=15, color='darkslateblue')))\n    \n    fig = go.Figure(data=list_of_traces, layout = layout)\n    fig.update_xaxes(dtick=tk)\n    iplot(fig)","97cb5cc4":"plot_time_agg(df_uk, 'Day_of_Week')","cd0b0540":"plot_time_agg(df_uk, 'Hour')","a15a91d2":"plot_time_agg(df_uk, 'week_in_month')","7e602fd9":"plot_time_agg(df_uk, 'month')","41fd2926":"network_agg = groupby_accidents(df_uk, 'Sub-Group Description').sort_values(by = 'sum', ascending = False)","539986c0":"network_agg","1789d53e":"#Data Visualization\n\ndef visualize_aggregates(df, column, color):\n    \n    fig = px.bar(df, x= column, y= 'sum', color='sum', \n                 labels={'sum':'<b> Casualties <b>'}, width=1000, height=700, \n                 color_continuous_scale=color)\n    \n    if column == 'Sub-Group Description':\n        content = 'Road Networks in UK with the highest record of road accidents, 2005 - 2014 '\n    elif column == 'Road_Type':\n        content = 'Road Types in UK with the highest record of road accidents, 2005 - 2014'\n    elif column == 'Conditions':\n        content = 'Weather, Road & Light Conditions at the time of Road accidents in UK between 2005 - 2014'\n    elif column == 'Pedestrian_Crossing':\n        content = 'Pedestrian Crossings at the locations of Road accidents in UK between 2005 - 2014'\n    elif column == 'Speed_limit':\n        content = 'Speed Limits associated with Road accidents in UK between 2005 - 2014 '\n    \n    fig.update_layout(title='<b> ' + content + ' <b>', \n                      xaxis=dict(title='<b> ' + column + ' <b>',titlefont=dict(size=16), tickfont=dict(size=13, color='darkslateblue')), \n                      yaxis=dict(title='<b> Number of Casualties <b>',titlefont=dict(size=16), tickfont=dict(size=13, color='darkslateblue'))) \n    \n    fig.show()","7198614b":"visualize_aggregates(network_agg, 'Sub-Group Description', px.colors.diverging.Spectral)","14703d23":"road_agg = groupby_accidents(df_uk, 'Road_Type').sort_values(by = 'sum', ascending = False)","88f8b1c6":"visualize_aggregates(road_agg, 'Road_Type', px.colors.diverging.RdBu)","339f1e36":"#lets look at the distinct condition underwhich road accidents occured\n\nconditions_columns = ['Road_Surface_Conditions', 'Weather_Conditions', 'Light_Conditions']\nprint('Conditions under which road accidents occured: \\n')\nfor column in conditions_columns:\n    print(column + ': ')\n    print(df_uk[column].unique().tolist())\n    print('\\n')","2ec77200":"roadsurface_agg = groupby_accidents(df_uk, 'Road_Surface_Conditions')\nweather_agg = groupby_accidents(df_uk, 'Weather_Conditions')\nlight_agg = groupby_accidents(df_uk, 'Light_Conditions')","9c083c42":"#convert 'other' value in weather_agg df to 'Unknown'\nweather_agg['Weather_Conditions'] = weather_agg['Weather_Conditions'].replace({'Other': \"Unknown\"})","e0a5162f":"#rename all the conditions to 'Conditions'\nroadsurface_agg.rename(columns={'Road_Surface_Conditions': 'Conditions'}, inplace = True)\nweather_agg.rename(columns={'Weather_Conditions': 'Conditions'}, inplace = True)\nlight_agg.rename(columns={'Light_Conditions': 'Conditions'}, inplace = True)","9bbac01e":"condition_agg = pd.concat([roadsurface_agg, weather_agg, light_agg], ignore_index=True).sort_values(by = 'sum', ascending = False)","43d68ab6":"condition_agg","cee5ba15":"visualize_aggregates(condition_agg, 'Conditions', px.colors.diverging.RdYlGn)","6e1da093":"#we have two pedestrian crossing columns, lets check them out\n#lets look at the distinct condition underwhich road accidents occured\n\npedestrian_columns = ['Pedestrian_Crossing-Physical_Facilities', 'Pedestrian_Crossing-Human_Control']\nprint('Pedestrian crossing at the time of road accidents: \\n')\nfor column in pedestrian_columns:\n    print(column + ': ')\n    print(df_uk[column].unique().tolist())\n    print('\\n')","91d55dc5":"pedcrs1_agg = groupby_accidents(df_uk, 'Pedestrian_Crossing-Physical_Facilities')\npedcrs2_agg = groupby_accidents(df_uk, 'Pedestrian_Crossing-Human_Control')","607709c0":"pedcrs1_agg.rename(columns={'Pedestrian_Crossing-Physical_Facilities': 'Pedestrian_Crossing'}, inplace = True)\npedcrs2_agg.rename(columns={'Pedestrian_Crossing-Human_Control': 'Pedestrian_Crossing'}, inplace = True)","5d216ea5":"pedestrian_agg = pd.concat([pedcrs1_agg, pedcrs2_agg], ignore_index=True).sort_values(by = 'sum', ascending = False)","4b5abb7a":"pedestrian_agg","9d5757c7":"visualize_aggregates(pedestrian_agg, 'Pedestrian_Crossing', px.colors.diverging.Spectral)","d8549c92":"#visualize the distribution\ndef visualize_distribution(df, column, color):\n    \n    fig = px.histogram(df, x=column, color_discrete_sequence = color, \n                   width = 1000, height = 700)\n    \n    if column == 'Number_of_Casualties':\n        content = 'Frequency of Casualties due to Road Accidents in UK between 2005 - 2014'\n    elif column == 'Number_of_Vehicles':\n        content = 'Distribution of Vehicles involved in Road Accidents in UK between 2005 - 2014'\n    \n    fig.update_layout(title='<b>' + content + '<b>', \n                      xaxis=dict(range=[0, 20], title='<b> ' + column + ' <b>',titlefont=dict(size=16, color='#7f7f7f'), \n                                 tickfont=dict(size=15, color='darkslateblue')), \n                      yaxis=dict(title='<b> Frequency <b>',titlefont=dict(size=16,color='#7f7f7f'), \n                                 tickfont=dict(size=15, color='darkslateblue')))\n    \n    fig.update_xaxes(dtick=1)\n    fig.show()","1f5472ba":"visualize_distribution(df_uk, 'Number_of_Casualties', px.colors.diverging.balance)","9b6e031f":"visualize_distribution(df_uk, 'Number_of_Vehicles', px.colors.diverging.RdYlBu)","5d8804cd":"speed_agg = groupby_accidents(df_uk, 'Speed_limit').sort_values(by = 'sum', ascending = False)","d4a9ba15":"visualize_aggregates(speed_agg, 'Speed_limit', px.colors.diverging.Portland)","4e7d25d4":"severity_agg = groupby_accidents(df_uk, 'Accident_Severity').sort_values(by = 'sum')","7dca00c4":"severity_agg[\"Accident_Severity\"].replace({1: \"Fatal\", 2: \"Serious\", 3: \"Slight\"}, inplace=True)","1ce7d9d5":"area_agg = groupby_accidents(df_uk, 'Urban_or_Rural_Area').sort_values(by = 'sum')","8eca10fd":"area_agg[\"Urban_or_Rural_Area\"].replace({1: \"Urban\", 2: \"Rural\", 3: \"Unallocated\"}, inplace=True)","f38cb18d":"### GET THE LABELS AND VALUES FOR THE PIE CHART ###\nlabels1 = severity_agg[\"Accident_Severity\"].values.tolist()\nlabels2 = area_agg[\"Urban_or_Rural_Area\"].values.tolist()\nvalues_acc = severity_agg[\"sum\"].values.tolist()\nvalues_area = area_agg['sum'].values.tolist()","339fd8f3":"# Create subplots, using 'domain' type for pie charts\n\nnight_colors = ['rgb(56, 75, 126)', 'rgb(18, 36, 37)', 'rgb(34, 53, 101)', 'rgb(6, 4, 4)']\ncafe_colors =  ['rgb(146, 123, 21)', 'rgb(177, 180, 34)', 'rgb(206, 206, 40)', 'rgb(35, 36, 21)']\n\nspecs = [[{'type':'domain'}, {'type':'domain'}]]\nfig = make_subplots(rows=1, cols=2, specs=specs, subplot_titles=['<b> Percent of Road Accidents Severity <b>', \n                                                                 '<b> Percent of Areas affected by Road Accidents <b>'])\n\n# Define pie charts\nfig.add_trace(go.Pie(labels=labels1, values=values_acc, name='Accident Severity',\n                     marker_colors= night_colors, textinfo='label+percent', insidetextorientation='tangential'), 1, 1)\nfig.add_trace(go.Pie(labels=labels2, values=values_area, name='Urban or Rural Area',\n                     marker_colors= cafe_colors, textinfo='label+percent', insidetextorientation='radial'), 1, 2)\n\n\nfig = go.Figure(fig)\nfig.show()","a9213d64":"### 7. Is pedestrian crossing a cause of road accident, or does it influence the road casualties in UK?","d909c317":"***Lets check regions where there were spikes in accident rates in year 2012***","9343db5f":"### 6. What condition (taking all conditions into account i.e. road, weather and light conditions) caused the most road accidents in UK between 2005 - 2014?","e6a943c9":"**Observations**\n\n- South East, England have the highest occurence of road accident while North East, England have the least occurence compared to other regions.","6eb1c950":"**Observations**\n\n- Kent County is said to be the **'most notorious highway'** for road accidents while East Ayrshire is siad to be the **'safest'** among other highway authorities between 2005 - 2014.","3334bcae":"### 4. What are the accident occurence rate in UK based on time of the day, weekdays, and months of the year, between 2005 - 2014?","9c38c9c9":"### 3a. Which ***highway authorities are the most dangerous or safest*** in UK based on accident records between 2005 - 2014?\n\n***We will look at only 20 of them***","73c69b5e":"### 10a. Which areas (urban \/ rural) in UK were road accidents the most frequent in, from 2005 - 2014?\n\n### 10b. How is the distribution of accident severity in UK, from 2005 - 2014?","3f6b13d1":"## UK Accident Analysis 2005 - 2014","c935b687":"- From the above plot, road accidents commonly do not occur at pedestrian crossing and pedestrian crossing do not in any way affect the cause of road accidents in UK, between 2005 - 2014.","2a845d22":"***Observation:*** As seen from the above plots, the rate of accidents in terms of geographical distribution, as pretty much remained the same i.e. locations where accidents occured in the past is likely to be the same location where accidents will occur tomorrow\/next year. \n\nDue to the high accident rates in UK between 2005 - 2014, the yearwise accident trends will be visualized better either with  line plots or bar charts, this is done in the next sctions.","e394c6da":"**Observations**\n\n- Occurence of road accidents in urban areas is higher than its occurence in rural areas.\n\n- Most road accidents have a slight severity on the victim, only a minute amount of road accidents is fatal.","c0f5a798":"### 5a. Which particular road network group (based on network density range) is the most dangerous (i.e. has high numbers of casualties) between 2005 - 2014?\n\n### 5b. Which road type has the highest rate of road accidents between 2005 - 2014?","ca3363a5":"**Observations**\n\n- Casualties caused by road accidents are mostly to a number of one, as the distribution are rightly skewed.\n\n- This is similar to the number of vehicles involved in an accident, as the number of vehicles is likely to be two, as the distribution is rightly skewed.","da1a7556":"### 2a. What is the rate of road accidents (i.e. the number of casualties) in UK between 2005 - 2014?\n\n### 2b. What is the rate of the road accidents based on different UK Regions, has it all been the same in every region since 2005?","21a5c5fa":"**Observations**\n\n- From the above plot, the rates of road accidents are declining, but in 2012 there was a huge spike, following this year road accidents continue to decline but year 2014 seems not to be declining relative to year 2013.","2e40d94d":"### Visualize locations of road accidents based on different categories: Regions in UK, Settlement Areas and Road Networks groups","04f4a701":"\n- This project gives detailed insights into **United Kingdom (UK) long-term road accident trends between 2005 - 2014,** which includes but not limited to potential casualties due to road accidents, areas most affected by accidents, highway authorities notorious for road accidents and those that are the \"safest\", conditions likely to cause accidents and road types and geographical regions well known for acidents.\n\n\n\n- The aforementioned insights led us to ask questions that were answered through interactive data visualization **(with the help of Plotly).**\n\n\n\n### Questions:\n\n\n1. What is the trend of road accidents locations in UK from 2005 - 2014?\n\n\n\n2. \n\n   a.  What is the rate of road accidents (i.e. the number of casualties) in UK between 2005 - 2014?\n   \n   b.  What is the rate of the road accidents based on different UK Regions, has it all been the same in every region since 2005?\n\n\n\n3. Which ***highway authorities are the most dangerous or safest*** in UK based on accident records between 2005 - 2014?  ***We will look at only the top 20 of them.***\n\n\n\n4. What are the accident occurence rate in UK ***based on time of the day, weekdays, and months of the year,*** between 2005 - 2014?\n\n\n\n5. \n\n   a. Which particular road network group (based on network density range) is the most dangerous (i.e. has high numbers of  casualties) between 2005 - 2014?\n   \n   b. Which road type has the highest rate of road accidents between 2005 - 2014?\n\n\n6. What condition **(taking all conditions into account i.e. road, weather and light conditions)** caused the most road accidents in UK between 2005 - 2014?\n\n\n\n7. Is pedestrian crossing a cause of road accident, or does it influence the road casualties in UK?\n\n\n\n8. \n\n     a. How many numbers of casualties occur per accidents in UK and what is their distribution in terms of the total amount of road accident that occured between 2005 - 2014?\n\n     b. How many vehicles are invloved in each road accident, and what is their distribution in terms of the total amount of road accident that occured between 2005 - 2014?\n\n\n\n\n9. Which speed limit is closely associated with road accidents in UK, from 2005 - 2014?\n\n\n\n10. \n\n    a. Which areas (urban \/ rural) in UK were road accidents the most frequent in, from 2005 - 2014?\n\n    b. How is the distribution of accident severity in UK, from 2005 - 2014?\n","63e25b19":"**Observations**\n\n- Regions in UK ***except London, North East, Yorkshire and the Humber and North West*** have road accidents declining between 2005 - 2014.\n","c3727de2":"### 9. Which speed limit is closely associated with road accidents in UK, from 2005 - 2014?","8f2c6c88":"### 1. What is the trend of road accidents locations in UK from 2005 - 2014?","e356cca1":"**Observations**\n\n- Most road accidents significantly occur when the speed limits are 30 mph, ***this may mean that most drivers violate the speed limit.***","1bb0d01d":"- From above plot, Most road accidents happen under conditions that **do not affect the road, vehicle nor the driver of the vehicle**, this is simply because most road accidents are said to occur under **Fine weather condition without High winds, Daylight with street light present and under dry road condition**. \n\n- On the other hand, Most road accidents do not occur when there is flood, darkness or snow fall with high winds.","281867db":"### 8a. How many numbers of casualties occur per accidents in UK and what is their distribution in terms of the total amount of road accident that occured between 2005 - 2014?\n\n### 8b. How many vehicles are invloved in each road accident, and what is their distribution in terms of the total amount of road accident that occured between 2005 - 2014?","92993abc":"**Observations**\n\n- **Sparsely network rural authorities** road network has the highest occurence of road accidents in UK while **very sparsely network rural scottish island** road network has the least accurence.\n\n- **Single carriageway** records the highest occurence of accident among all other road types.","c95895b1":"**Observations**\n\n- Based on the week days, **Saturday** has the most occurence of road accidents in UK while **Mondays** has the least occurence of road accidents in UK, 2005 - 2014.\n\n- Based on the hours of the day, **8am and 5pm** have the highest occurence of road accidents, while **12am - 4am** have the least occurence of accident, with 4am having the lowest occurence.\n\n- Based on the weeks in a month, the first 4 weeks in a month are relatively the same in regards to the rate of accidents, while the 5th week which is mostly not frequent has the least occurence.\n\n- Based on the months of the year, **February** has the least records of accident while **October and November** has the most records of accident. Nevertheless, **May - November** has relatively the same average records of accident in a year, between 2005 - 2014."}}