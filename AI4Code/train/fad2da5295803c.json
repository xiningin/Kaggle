{"cell_type":{"046dc077":"code","55f33c9b":"code","e4088e25":"code","1b64876a":"code","58dac1f6":"code","3ecd13f7":"code","f30439c9":"code","3d02e36e":"code","8eb387b0":"code","9747c714":"code","f6b3817a":"code","ee278b45":"code","b20f17f4":"code","9cc4cf28":"code","7f28e81b":"code","45c9be46":"code","00b0f783":"code","0be6b2f6":"code","b614514e":"code","2eb6e988":"code","1c54b591":"code","210ba62a":"code","0da1fe66":"code","35219571":"code","59ba4137":"code","fa79948c":"code","7bd137c8":"code","579e3f89":"code","a2fb8a20":"code","f9021579":"code","6611273a":"code","dd532a2b":"code","1252afd6":"markdown","737327b8":"markdown","3dddb0be":"markdown","a0c21a57":"markdown","65fc9c2a":"markdown","5f136213":"markdown","d589f50d":"markdown","12694fd9":"markdown","786f10b8":"markdown","47840958":"markdown","fa1a4c91":"markdown","6714038b":"markdown","8cd4edc3":"markdown","d3dc4106":"markdown","f0f8b3b7":"markdown","541be338":"markdown","b0fe1231":"markdown","e5b8fd91":"markdown","2450b1c8":"markdown","f8414fa6":"markdown","c26699a3":"markdown","d8e10c21":"markdown","d5346ca8":"markdown","f741b4ca":"markdown","0b65b7f4":"markdown"},"source":{"046dc077":"import numpy as np\nimport pandas as pd\nimport random\nfrom plotly import tools\nimport plotly.offline as py\npy.init_notebook_mode(connected=True)\nimport plotly.graph_objs as go\nimport plotly.figure_factory as ff\nimport plotly.express as px\nfrom plotly.subplots import make_subplots\nfrom plotly.offline import init_notebook_mode,iplot\nfrom plotly import tools\nimport cufflinks\ncufflinks.go_offline()\ncufflinks.set_config_file(world_readable=True, theme='pearl')\n\nimport warnings\nwarnings.filterwarnings('ignore')\nimport os\nprint(os.listdir(\"..\/input\"))","55f33c9b":"df = pd.read_csv('..\/input\/hr-analytics-job-change-of-data-scientists\/aug_train.csv')","e4088e25":"df.head(5).T","1b64876a":"Uni=df.groupby(['target','enrolled_university'])['major_discipline'].value_counts().unstack()\nUni.columns=Uni.columns.tolist()\nUni.reset_index(inplace=True)\nfig = px.bar(Uni, x='enrolled_university', \n             y=['Arts','Business Degree','Humanities','No Major','Other','STEM'], \n             color_discrete_map={'Arts':'limegreen','Business Degree':'salmon',\n                                 'Humanities':'lightblue','No Major':'lawngreen',\n                                'Other':'indigo','STEM':'crimson'},\n             facet_col=\"target\",\n             template=\"simple_white\")\nfig.update_layout(title_text=\"Which major has more emplyees not enrolled to universities?\",\n        yaxis=dict(title=\"Count\"),\n        annotations=[dict(text='Stay', x=0.3, y=1.0, font_size=18, showarrow=False),\n                     dict(text='Change', x=0.7, y=1.0, font_size=18, showarrow=False)])\nfig.update_xaxes(title =\"University education mode\")\nfig.show()","58dac1f6":"Relx=df.groupby(['target','relevent_experience'])['major_discipline'].value_counts().unstack()\nRelx.columns=Relx.columns.tolist()\nRelx.reset_index(inplace=True)\nfig = px.bar(Relx, x='relevent_experience', \n             y=['Arts','Business Degree','Humanities','No Major','Other','STEM'], \n             color_discrete_map={'Arts':'limegreen','Business Degree':'salmon',\n                                 'Humanities':'lightblue','No Major':'lawngreen',\n                                 'Other':'indigo','STEM':'crimson'},\n             facet_col=\"target\",\n             template=\"simple_white\")\nfig.update_layout(title_text=\"Which major has more emplyees with relevant experience?\",\n        yaxis=dict(title=\"Count\"),\n        annotations=[dict(text='Stay', x=0.3, y=1.0, font_size=18, showarrow=False),\n                     dict(text='Change', x=0.7, y=1.0, font_size=18, showarrow=False)])\nfig.update_xaxes(title =\"Relevent experience\")\nfig.show()","3ecd13f7":"\nEdu=df.groupby(['target','enrolled_university'])['education_level'].value_counts().unstack()\nEdu.columns=Edu.columns.tolist()\nEdu.reset_index(inplace=True)\nfig = px.bar(Edu, x='enrolled_university', \n             y=['Graduate','High School','Masters','Phd','Primary School'], \n             color_discrete_map={'Graduate':'lawngreen','High School':'salmon',\n                                 'Masters':'indigo','Phd':'crimson','Primary School':'yellow'},\n             facet_col=\"target\",\n             template=\"simple_white\")\nfig.update_layout(title_text=\"What is education level of employees enrolled to university?\",\n        yaxis=dict(title=\"Count\"),\n        annotations=[dict(text='Stay', x=0.3, y=1.0, font_size=18, showarrow=False),\n                     dict(text='Change', x=0.7, y=1.0, font_size=18, showarrow=False)])\nfig.update_xaxes(title =\"University education mode\")\nfig.show()","f30439c9":"EduL=df.groupby(['target','relevent_experience'])['education_level'].value_counts().unstack()\nEduL.columns=EduL.columns.tolist()\nEduL.reset_index(inplace=True)\nfig = px.bar(EduL, x='relevent_experience', \n             y=['Graduate','High School','Masters','Phd','Primary School'], \n             color_discrete_map={'Graduate':'lawngreen','High School':'salmon',\n                                 'Masters':'indigo','Phd':'crimson','Primary School':'yellow'},\n             facet_col=\"target\",\n             template=\"simple_white\")\nfig.update_layout(title_text=\"Which education level has more relevant experience?\",\n        yaxis=dict(title=\"Count\"),\n        annotations=[dict(text='Stay', x=0.3, y=1.0, font_size=18, showarrow=False),\n                     dict(text='Change', x=0.7, y=1.0, font_size=18, showarrow=False)])\nfig.update_xaxes(title =\"Relevent experience\")\nfig.show()","3d02e36e":"RelRatio=df.groupby(['target','relevent_experience'])['enrolled_university'].value_counts().unstack()\nRelRatio.columns=RelRatio.columns.tolist()\nRelRatio.reset_index(inplace=True)\nfig = px.bar(RelRatio, x='relevent_experience',\n             y=['Full time course','Part time course','no_enrollment'],\n             color_discrete_map={'Full time course':'indigo',\n                                 'Part time course':'red','no_enrollment':'limegreen'},\n             facet_col=\"target\",\n             template=\"simple_white\")\nfig.update_layout(title_text=\"Who has more relevant experience wrt mode of education?\",\n        yaxis=dict(title=\"count\"),\n        annotations=[dict(text='Stay', x=0.3, y=1.0, font_size=18, showarrow=False),\n                     dict(text='Change', x=0.7, y=1.0, font_size=18, showarrow=False)])\nfig.update_xaxes(title =\"Relevent experience\")\nfig.show()","8eb387b0":"fig = px.box(df, x=\"last_new_job\", y=\"city_development_index\", color=\"target\")\nfig.update_layout(title_text=\"Do people in under developed city want to change Job frequently?\",\n                  yaxis = dict(title ='city development index'),\n                  xaxis= dict(title=\"Last job change(in yrs)\"))\nfig.show()","9747c714":"fig = px.box(df, x=\"gender\", y=\"city_development_index\", color=\"target\")\nfig.update_layout(title_text=\"Do men in under developed city want to change Job?\",\n                  yaxis = dict(title ='city development index'),\n                  xaxis= dict(title=\"Gender\"))\nfig.show()","f6b3817a":"fig = px.box(df, x=\"education_level\", y=\"city_development_index\", color=\"target\")\nfig.update_layout(title_text=\"Do highly educated people stay in better cities?\",\n                  yaxis = dict(title ='city development index'),\n                  xaxis= dict(title=\"Education level\"))\nfig.show()","ee278b45":"fig = px.box(df, x=\"company_size\", y=\"city_development_index\", color=\"target\")\nfig.update_layout(title_text=\"Do develpoed cities have more small companies?\",\n                  yaxis = dict(title ='city development index'),\n                  xaxis= dict(title=\"Company size\"))\nfig.show()","b20f17f4":"fig = px.box(df, x=\"company_type\", y=\"city_development_index\", color=\"target\")\nfig.update_layout(title_text=\"Do develpoed cities have more private companies?\",\n                  yaxis = dict(title ='city development index'),\n                  xaxis= dict(title=\"Company type\"))\nfig.show()","9cc4cf28":"fig = px.box(df, x=\"relevent_experience\", y=\"city_development_index\", color=\"target\")\nfig.update_layout(title_text=\"Does relevent experience has an impact on city you stay?\",\n                  yaxis = dict(title ='city development index'),\n                  xaxis= dict(title=\"Relevent experience\"))\nfig.show()","7f28e81b":"fig = px.box(df, x=\"enrolled_university\", y=\"city_development_index\", color=\"target\")\nfig.update_layout(title_text=\"Does university education mode has an impact on city you stay?\",\n                  yaxis = dict(title ='city development index'),\n                  xaxis= dict(title=\"University education mode\"))\nfig.show()","45c9be46":"fig = px.scatter(df, x=\"city_development_index\", y=\"training_hours\",facet_col=\"target\",\n                 title=\"Do developed cities have more training hours?\",\n                labels={'city_development_index':'City development index',\n                        'training_hours':'Training hours'})\nfig.for_each_annotation(lambda a: a.update(text=a.text.split(\"=\")[-1]))\nfig.add_annotation( # add a text callout with arrow\n    text=\"Training hours here!\", x=0.47, y=250, arrowhead=2, showarrow=True)\n\nfig.show()","00b0f783":"cleannums={'experience': {\">20\":25,\"<1\":0.5}}\ndf=df.replace(cleannums)\ndf['experience']=df['experience'].astype(float)","0be6b2f6":"fig = px.scatter(df, x=\"city_development_index\", y=\"experience\",facet_col=\"target\",\n                 title='In which city do experienced people stay?',\n                 labels={'city_development_index':'City development index'})\nfig.for_each_annotation(lambda a: a.update(text=a.text.split(\"=\")[-1]))\nfig.add_annotation( # add a text callout with arrow\n    text=\"Experienece here!\", x=0.55, y=20, arrowhead=2, showarrow=True)\nfig.show()","b614514e":"change=df[df.target==1.0].groupby('experience').training_hours.median().to_frame()\nstay=df[df.target==0.0].groupby('experience').training_hours.median().to_frame()\ntrace0 = go.Scatter(\n    x=stay.index,\n    y=stay['training_hours'],\n    name = 'stay',\n    mode='markers',\n    marker=dict(size=11,color=('green')))\ntrace1 = go.Scatter(\n    x=change.index,\n    y=change['training_hours'],\n    name = 'change',\n    mode='markers',\n    marker=dict(size=11,color = ('red')))\ndata = [trace0, trace1]\nlayout = dict(title = 'The average training hours of employees with different experience',\n              xaxis = dict(title = 'Experience'),\n              yaxis = dict(title = 'Median training hours'))\nfig = dict(data=data, layout=layout)\nfig['layout']['xaxis'].update(dict(title = 'Experience', \n                                   tickmode='linear',\n                                   tickfont = dict(size = 10)))\npy.iplot(fig)","2eb6e988":"#staying \ndf[df.target==0.0].groupby(['experience'])['training_hours'].apply(pd.Series.mode)","1c54b591":"#changing\ndf[df.target==1.0].groupby(['experience'])['training_hours'].apply(pd.Series.mode)","210ba62a":"data=[[0.5,50],[1.0,46],[2.0,28],[3.0,28],[4.0,12],[4.0,22],[4.0,23],\n      [5.0,31],[6.0,21],[7.0,22],[7.0,48],[8.0,34],[9.0,11],[10.0,21],\n      [11.0,17],[12.0,42],[13.0,28],[14.0,28],[15.0,6],[15.0,15],[15.0,17],[15.0,64],\n      [16.0,28],[17.0,20],[18.0,22],[19.0,24],[20.0,17],[25.0,18]]      \nstay=pd.DataFrame(data, columns = ['experience','mode_training_hours'])\ndata2=[[0.5,18],[1.0,26],[2.0,50],[3.0,13],[4.0,28],[5.0,24],[6.0,56],[7.0,17],\n       [8.0,6],[9.0,24],[10.0,9],[11.0,18],[11.0,22],[12.0,10],[13.0,47],[13.0,52],\n       [14.0,9],[14.0,28],[15.0,9],[15.0,18],[16.0,17],[17.0,10],[18.0,12],[18.0,13],\n       [18.0,17],[18.0,18],[18.0,47],[18.0,56],[18.0,116],[19.0,13],[20.0,20],[20.0,24],\n       [20.0,30],[20.0,43],[25.0,20]]\nchange=pd.DataFrame(data2, columns = ['experience','mode_training_hours'])","0da1fe66":"trace0 = go.Scatter(\n    x=stay['experience'],\n    y=stay['mode_training_hours'],\n    name = 'stay',\n    mode='markers',\n    marker=dict(size=11,color=('navy')))\ntrace1 = go.Scatter(\n    x=change['experience'],\n    y=change['mode_training_hours'],\n    name = 'change',\n    mode='markers',\n    marker=dict(size=11,color = ('aqua')))\ndata = [trace0, trace1]\nlayout = dict(title = 'The most frequent training hours of employees with different experience',\n              xaxis = dict(title = 'Experience'),\n              yaxis = dict(title = 'Most frequent training hours'))\nfig = dict(data=data, layout=layout)\nfig['layout']['xaxis'].update(dict(title = 'Experience',tickmode='linear',tickfont = dict(size = 10)))\npy.iplot(fig)","35219571":"fig = go.Figure()\nfig.add_trace(go.Violin(x=df['gender'][ df['target'] == 0.0 ],\n                        y=df['training_hours'][ df['target'] == 0.0 ],\n                        name='Stay',line_color='blue'))\nfig.add_trace(go.Violin(x=df['gender'][ df['target'] == 1.0 ],\n                        y=df['training_hours'][ df['target'] == 1.0],\n                        name='Change',line_color='orange'))\nfig.update_traces(box_visible=True, meanline_visible=True)\nfig.update_layout(dict(title='Which gender group have longest training hours?',\n                       violinmode='group',violingroupgap=0,\n                       yaxis=dict(title='Training hours')))\nfig.show()","59ba4137":"def violinGruop(df,col_name=None,title=None,color1=None,color2=None):\n    fig = go.Figure()\n    fig.add_trace(go.Violin(x=df[col_name][ df['target'] == 0.0 ],\n                            y=df['training_hours'][ df['target'] == 0.0 ],\n                            name='Stay',\n                            side='positive',\n                            line_color=color1))\n    fig.add_trace(go.Violin(x=df[col_name][ df['target'] == 1.0 ],                            \n                            y=df['training_hours'][ df['target'] == 1.0],\n                            name='Change',\n                            side='negative',\n                            line_color=color2))\n    fig.update_traces(meanline_visible=True)\n    fig.update_layout(dict(title=title,violingap=0,violingroupgap=0,violinmode='overlay',\n                           yaxis=dict(title='Training hours')))\n    fig.show()","fa79948c":"violinGruop(df=df, col_name='last_new_job',\n            title='Do long training hours impact job change frequency?',\n            color1='purple',color2='red')","7bd137c8":"violinGruop(df=df, col_name='relevent_experience',\n            title='Do employees with no relevenat experience go though long training hours?',\n            color1='lawngreen',color2='red')","579e3f89":"violinGruop(df=df, col_name='enrolled_university',\n            title='Do university enrolled employees take less training hours?',\n            color1='dodgerblue',color2='lightpink')","a2fb8a20":"violinGruop(df=df, col_name='education_level',\n            title='Do employees with higher education need less training?',\n            color1='salmon',color2='limegreen')","f9021579":"violinGruop(df=df, col_name='major_discipline',\n            title='Which major have longest training hours?',\n            color1='gray',color2='red')","6611273a":"violinGruop(df=df, col_name='company_size',\n            title='Do large companies have longer traing hours?',\n            color1='magenta',color2='limegreen')","dd532a2b":"violinGruop(df=df, col_name='company_type',\n            title='Do start ups have longer traing hours?',\n            color1='yellow',color2='limegreen')","1252afd6":"1. smaller companies have longer training hours. ","737327b8":"1. People with full time course are staying in most underdeveloped cities and are leaving.","3dddb0be":"1. Yes. It is quite evident that people who wants to stay in Job are staying in more developed city than those are leaving. \n2. Again if we notice only leaving people groups, we find the \"never\" group has lowest and '1' has second lowest median index value. That shows some people are okay staying in under developed cities. On the other hand people are changing frequently. ","a0c21a57":"1. This concludes the previous findings upside down. Now 12 has different status. 50% of the employees who are changing have lower training hours and others highers. ","65fc9c2a":"1. People with 15 to 20 years experience and staying in underdeveloped cities are looking for a change. ","5f136213":"1. Forget about others but PHD groups are staying in more developed cities than others.","d589f50d":"1. We have more employees who have never enrolled to an university. ","12694fd9":"1. Develpoed cities are having good amount of traing hours where people are staying in job. \n2. Under developed cities do not have good training hours where employees are leaving. ","786f10b8":"### Summary\n<a id=\"Summary\"><\/a>\nSome significant factors based on our findings are-  Gender disparity, development of city, relevant experience. This is as per EDA.\n1. University education mode seems to be a least important factor as majority is not enrolled. Every education is possible without enrollment as well. \n2. Traing hours turns out to be quite confusing in many cases. But one thing with gender that others are having more traing hours. \n3. City development is definitely an important factor. \n4. Most of the employees belong private sector and most of them are men.\n   Many employees prefer to stay in developed cities, mostly under developed city people are leaving.\n6. Gender disparity is a reality in job sectors. Our analysis too shows, women and others are neglected. They are staying back or leaving is just a choice. Their education relevance has nothing to help them.\n7. Graduates will leave and we more graduates.\n8. Younger generation even if they dont have relevant experience will leave. All genders,graduates or not, whatever be the mode of education or company size and type, the younger they are more likely to leave.\n","47840958":"1. It is sad to see others who are looking for a change have longest training hours. ","fa1a4c91":"1. Stem is creating a baised story here as well. more people with relevant experience are leaving. ","6714038b":"![image.png](attachment:image.png)","8cd4edc3":"1. On average Female and other staying in better cities than male employess are changing. ","d3dc4106":"## Why they change job? Let's find out through EDA.\n\n\n### This notebook is part two and starts from the middle of the analysis.New plots and analysis are available in[Part 1 of EDA](https:\/\/www.kaggle.com\/ipsita001\/hr-analytics-why-they-look-for-change-part1)\n\n\nThis dataset designed to understand the factors that lead a person to leave current job, \nby using the current credentials,demographics,experience data we have here. \n\n**Task one:**\n**we need to predict the probability of a candidate to look for a new job or will work for the company.**\n\n**Task two:**\n**interpreting affected factors on employee decision.**\n\n**Features**\n\n1. enrollee_id : Unique ID for candidate\n2. city: City code\n3. city_ development _index : Developement index of the city (scaled)\n4. gender: Gender of candidate\n5. relevent_experience: Relevant experience of candidate\n6. enrolled_university: Type of University course enrolled if any\n7. education_level: Education level of candidate\n8. major_discipline :Education major discipline of candidate\n9. experience: Candidate total experience in years\n10. company_size: No of employees in current employer's company\n11. company_type : Type of current employer\n12. lastnewjob: Difference in years between previous job and current job\n13. training_hours: training hours completed\n14. target: 0 \u2013 Not looking for job change, 1 \u2013 Looking for a job change\n\n**<p style=\"color:red;\">plz  upvote if you find this one useful. Codes are hidden,incase you are unable to see the code button use firefox browser.<\/p>** ","f0f8b3b7":"1. Those who are looking for a change, Median index is more for people with no relevant experience. \n2. people with relevant experience are staying in underdeveloped city and are leaving.","541be338":"### Deep analysis with respect to city development index\n<a id=\"Analysis_on_city_development_index\"><\/a>","b0fe1231":"1. NGO and others have more training hours. ","e5b8fd91":"1. Full time course with no relevant experience are more likely to leave.\n2. No enrollment with relevant experience are the largest group to leave.\n3. More part time group are staying back.","2450b1c8":"1. Almost all employees belongs to STEM major. Technical one. A large number of such has no unversity enrollment. ","f8414fa6":"1. Humanities and others have more training hours. ","c26699a3":"### Deep analysis on training hours\n<a id=\"Analysis_on_traing_hours\"><\/a>\n","d8e10c21":"1. Most of the employees who are looking for a change are having less traing hours on average than who want to stay. 12 is an exception but as we have seen training hours distribution is highly right skewd and have many outliers. Now reverifying with mode.","d5346ca8":"1. [Analysis on education](#Analysis_on_education)<br>\n2. [Analysis on city development index](#Analysis_on_city_development_index)<br>\n3. [Analysis on traing hours](#Analysis_on_traing_hours)<br>\n4. [Summary](#Summary)","f741b4ca":"### Let's do some analysis on education of employees\nWe have information on education level, mode of education, majors they have choosen and if they have relevant experience or not. \n<a id=\"Analysis_on_education\"><\/a>","0b65b7f4":"1. Private company and public sector are in developed cities than others."}}