{"cell_type":{"a0a4aaec":"code","c9b8d208":"code","12c824ac":"code","db0d242f":"code","803adf29":"code","0b5fe2fe":"code","e3550ffb":"code","d7ed807e":"code","08429a78":"code","ced1ef27":"code","a341ed9e":"code","d7c587af":"code","bf13c343":"code","588c6da4":"markdown","b9691a29":"markdown","4985e151":"markdown","549a685b":"markdown","d373483f":"markdown","a111d185":"markdown","1281c45c":"markdown","c6cd2ed8":"markdown","d5bbef06":"markdown","604d6cd8":"markdown","7970fda5":"markdown","28540f6c":"markdown","bc9d03da":"markdown","dffc07ae":"markdown","36e660bf":"markdown","b0f70aeb":"markdown","d18de099":"markdown","e58a29c7":"markdown","eaa4e23f":"markdown"},"source":{"a0a4aaec":"import requests\nurl = 'https:\/\/pt.wikipedia.org\/wiki\/Campeonato_Brasileiro_de_Futebol_de_2004'\npage = requests.get(url)","c9b8d208":"from bs4 import BeautifulSoup\nsoup = BeautifulSoup(page.content, 'html.parser')","12c824ac":"tabela = soup.find_all('table')\nlen(tabela)","db0d242f":"tabela = tabela[2]","803adf29":"linhas = tabela.find_all('tr')\nlen(linhas)","0b5fe2fe":"linha = linhas[2]\nlinha = linha.get_text()\nlinha = linha.strip('\\n')\nlinha = linha.replace('\\n\\n', ',')\nlinha","e3550ffb":"def prep_linha(linha):\n    linha = linha.get_text()\n    linha = linha.strip('\\n')\n    linha = linha.replace('\\n\\n', ',')\n    return linha","d7ed807e":"tabela_final = 'Equipe,Pontos,Jogos,Vit\u00f3rias,Empates,Derrotas,Gols marcados,Gols sofridos,Saldo de Gols,Aproveitamento\\n'\nfor i in range(2,len(linhas)-1):\n    linha = prep_linha(linhas[i])\n    tabela_final += linha\n    tabela_final += '\\n'\nprint(tabela_final)","08429a78":"arquivo = open('brasileirao2004.csv', 'w')\narquivo.write(tabela_final)\narquivo.close()","ced1ef27":"import pandas as pd\ndf = pd.read_csv('brasileirao2004.csv', sep = ',')\ndf","a341ed9e":"df.head(4)","d7c587af":"df.tail(4)","bf13c343":"df.sort_values('Gols sofridos')","588c6da4":"Os quatro \u00faltimos s\u00e3o os rebaixados para a S\u00e9rie B.","b9691a29":"Os quatro primeiros s\u00e3o os classificados para a Libertadores.","4985e151":"Ordenar os valores pela coluna de Gols sofridos nos traz o *DataFrame* ordenado pelas melhores defesas.","549a685b":"``.strip('\\n')`` remover\u00e1 esta sequ\u00eancia de carecteres das pontas da *string*.\n","d373483f":"Utilizando ``.find_all`` na vari\u00e1vel do conte\u00fado da p\u00e1gina, encontramos a classe ``table``, que armazena todas as 10 tabelas da p\u00e1gina","a111d185":"## An\u00e1lise - Campeonato Brasileiro de 2004","1281c45c":"A utiliza\u00e7\u00e3o da estrutura ``for``, com os par\u00e2metros ``2`` e ``len(linhas)-1``, indica que excluiremos os dois primeiros e o \u00faltimo elemento, in\u00fateis para a an\u00e1lise.","c6cd2ed8":"Importa\u00e7\u00e3o do ``BeautifulSoup`` para nos dispor o conte\u00fado da p\u00e1gina.","d5bbef06":"Este \u00e9 o processo para salvar em ``.csv``","604d6cd8":"Cada linha \u00e9 nomeada ``tr``, onde o ``.find_all`` \u00e9 respons\u00e1vel por encontr\u00e1-lo dentro da lista ``tabela``, j\u00e1 definida como somente o terceiro elemento da lista anterior. O comprimento nos evidencia que h\u00e1 27 linhas: as duas primeiras e a \u00faltima cont\u00e9m n\u00e3o cont\u00eam informa\u00e7\u00f5es das equipes, o que ser\u00e1 importante na forma\u00e7\u00e3o da tabela final.","7970fda5":"Os somat\u00f3rios ``tabela_final += linha`` e ``tabela_final += '\\n'`` indicam uma repeti\u00e7\u00e3o de processo, para que as linhas sejam adicionadas e haja um 'pulo' ao final de cada uma (equivalente ao bot\u00e3o *Enter* do teclado)","28540f6c":"A importa\u00e7\u00e3o do ``pandas`` nos permitir\u00e1 a cria\u00e7\u00e3o de um *DataFrame* com os dados da vari\u00e1vel ``tabela_final``. \u00c9 essencial indicar o separador de colunas ``sep = ','``","bc9d03da":"Utilizaremos ``linhas[2]`` para realizar o teste de prepara\u00e7\u00e3o das linhas. Note que \u00e9 a primeira linha com equipes, sendo o terceiro elemento da tabela.","dffc07ae":"Ap\u00f3s a conclus\u00e3o dos testes, vamos definir uma fun\u00e7\u00e3o que altere, de fato, a vari\u00e1vel ``linha`` e a prepare adequadamente.","36e660bf":"``.replace('\\n\\n', ',')`` substituir\u00e1 o primeiro par\u00e2metro por v\u00edrgulas, tornando os elementos separados por tal.","b0f70aeb":"Definiremos a vari\u00e1vel ``tabela_final`` com o cabe\u00e7alho da tabela que estamos buscando, a qual ser\u00e1 atribu\u00edda um somat\u00f3rio posterior para a constru\u00e7\u00e3o adequada do nosso arquivo.","d18de099":"Importa\u00e7\u00e3o da biblioteca ``requests`` para o download da p\u00e1gina.","e58a29c7":"Ao visualizarmos cada elemento da lista ``tabela``, percebe-se que o terceiro elemento armazena a tabela do campeonato, que nos ser\u00e1 \u00fatil neste caderno.","eaa4e23f":"``.get_text()`` nos trar\u00e1 apenas o texto, deletando as *tags*.\n"}}