{"cell_type":{"fb1c6f6f":"code","865a615d":"code","5ab5b5bf":"code","6121b46a":"code","635a92bd":"code","80de4147":"code","78967058":"code","36001b75":"code","54fbf186":"code","06d444ef":"code","9268bc75":"code","b2ac40a9":"code","00625d61":"markdown","0213d361":"markdown","452d903f":"markdown","a395aa68":"markdown"},"source":{"fb1c6f6f":"import sys\n!{sys.executable} -m pip install bar_chart_race","865a615d":"import pandas as pd\nimport numpy as np\nimport matplotlib.pyplot as plt\nimport os\n\nimport bar_chart_race as bcr\nfrom IPython.display import HTML\nimport warnings\nwarnings.filterwarnings(\"ignore\")\nfrom IPython.display import Video","5ab5b5bf":"data0=pd.read_csv('..\/input\/formula-1-19502020\/ConstructorStandings.csv')\ndata0","6121b46a":"data0['Pos'].value_counts()","635a92bd":"data0=data0.drop('Unnamed: 0',axis=1)","80de4147":"data0['Year']=data0['Year'].apply(lambda x: str(x))","78967058":"data0.columns","36001b75":"# set double indexes\ndata1=data0.copy()\ndata2=data1.set_index(['Year','Team'])\ndata2","54fbf186":"# unsack!!!\ndata3=data0.set_index(['Year','Team']).unstack()['PTS']\ndata3","06d444ef":"data4=data3.fillna(0)","9268bc75":"df = data4\nbcr.bar_chart_race(\n    df=df,\n    filename='Formula1_Team_BarChartRace.mp4',\n    orientation='h',\n    sort='desc',\n    n_bars=17,\n    fixed_order=False,\n    fixed_max=False,\n    steps_per_period=10,\n    interpolate_period=False,\n    label_bars=True,\n    bar_size=.95,\n    period_label={'x': .99, 'y': .25, 'ha': 'right', 'va': 'center'},\n    #period_fmt='%B %d, %Y',\n    period_summary_func=lambda v, r: {'x': .99, 'y': .18,'s': '',\n                                      'ha': 'right', 'size': 8, 'family': 'Courier New'},\n    #perpendicular_bar_func='median',\n    period_length=1000,\n    figsize=(5,3),\n    dpi=500,\n    cmap='dark24',\n    title='Formula1 Team Standings 1958-2020',\n    title_size=15,\n    bar_label_size=7,\n    tick_label_size=5,\n    shared_fontdict={'color' : '.1'},\n    scale='linear',\n    writer=None,\n    fig=None,\n    bar_kwargs={'alpha': .7},\n    filter_column_colors=True)","b2ac40a9":"Video(\"\/kaggle\/working\/Formula1_Team_BarChartRace.mp4\", width=800, height=600, embed=True)","00625d61":"# Bar Chart Race\n","0213d361":"# Dataframe for Bar Chart Race","452d903f":"# Bar Chart Race of Formula1 1958-2020\n* cf. https:\/\/www.dexplo.org\/bar_chart_race\/\n* cf. https:\/\/github.com\/dexplo\/bar_chart_race\/","a395aa68":"# Data preparation"}}