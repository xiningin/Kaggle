{"cell_type":{"9bbc24f0":"code","16bbb8fa":"code","6848f646":"code","3d6f7f1b":"code","228dcbef":"code","eaf31ac5":"code","1cd30533":"code","e07dc994":"code","6ad29787":"code","3cb69b16":"code","96aeab1c":"code","6bef2905":"code","c01de203":"code","e8947447":"code","bd68e939":"code","dfa064b9":"code","f76810a9":"code","7fec1bc8":"code","6a71c45d":"code","6455f23e":"code","c4cd45ec":"code","073df051":"code","1c2478b4":"code","d3ed5ab7":"code","e6c652b6":"code","cb00a51c":"code","ebaf83f4":"code","0771be0d":"code","292ca686":"code","ad24e356":"code","7d80ce69":"code","14e5a238":"code","f7a7444f":"code","1a362c41":"code","7f31137f":"code","a68270ec":"code","0e1cedde":"code","e21bd65a":"code","14210c6e":"code","20fa672f":"code","b8ded66a":"code","70ac11e5":"code","1047efb9":"code","970ed7fd":"code","4f89298c":"code","33f0f48d":"code","e4cc8107":"code","27d8cfe3":"code","7084caf9":"code","35b99a16":"code","f9179bbe":"markdown","a1c20074":"markdown","f78e6847":"markdown","208d508b":"markdown","1b7e5101":"markdown","3bb0546b":"markdown","49acc7e2":"markdown","40259ca4":"markdown","77ecfad1":"markdown","d1f7c616":"markdown","daa1e20e":"markdown"},"source":{"9bbc24f0":"# importing modules which are going to use during EDA\n\nimport pandas as pd\nimport numpy as np\nimport seaborn as sns\nimport scipy.stats as stats\nfrom scipy.stats.mstats import winsorize\nfrom statsmodels.stats.weightstats import ttest_ind\nimport warnings\n%matplotlib inline \nimport matplotlib as mpl\nimport matplotlib.pyplot as plt\nwarnings.filterwarnings('ignore')","16bbb8fa":"# the first look through the data \n\nTerror_World = pd.read_csv(\"..\/input\/gtd\/globalterrorismdb_0718dist.csv\", encoding = \"ISO-8859-1\")\nTerror_World.head()","6848f646":"# data types and numbers of variables\n\nTerror_World.info()","3d6f7f1b":"# we need to see 135 columns to understand what we have in the data\n\nfor i in Terror_World.columns:\n    print(i)","228dcbef":"# we need to see rows and columns together to grasp the data\n\nfor i in range (0, 136, 10):\n    display (Terror_World.iloc[0:3, i:i+10])","eaf31ac5":"# rename the columns which we need to use during our EDA\n\nTerror_World.rename(columns={'iyear':'Year','imonth':'Month','iday':'Day','country_txt':'Country', 'region_txt':'Region',\n                             'city':'City', 'latitude':'Lat.', 'longitude':'Long.', 'attacktype1_txt':'AttackType',\n                             'target1':'Target', 'nkill':'Killed', 'nwound':'Wounded', 'gname':'Group',\n                             'targtype1_txt':'Target_type', 'weaptype1_txt':'Weapon_type'},inplace=True)","1cd30533":"# new Terror data set which we are going to work on\n\nTerror_World=Terror_World[['Year','Month','Day','Country','Region', 'City', 'Lat.','Long.', 'AttackType','Killed','Wounded',\n                           'Target', 'Group','Target_type','Weapon_type']]\n\nTerror_World","e07dc994":"# new data types and numbers of variables which we are going to work on\n\nTerror_World.info()\n\n# There seems no object feature should be transformed to numeric (float or int) features.","6ad29787":"# info of NaN in our data set as percentage\n\ndef show_missing (df):\n    \"\"\"This function returns percentage and total number of missing values\"\"\"\n    percent = df.isnull().sum()*100\/df.shape[0]\n    total = df.isnull().sum()\n    missing = pd.concat([percent, total], axis=1, keys=['percent', 'total'])\n    return missing[missing.total>0].sort_values('total', ascending=False)","3cb69b16":"show_missing(Terror_World)","96aeab1c":"Terror=Terror_World.copy()","6bef2905":"# dropping the NaNs from 'City' and 'Target'\n# Because of the low percentage of \"City\"s and \"Target\"s NANs, we need to drop them.\n\nTerror=Terror.dropna(subset=['City', 'Target'])","c01de203":"# filling the NaNs of \"Killed\", \"Wounded\" with median and creating a variable named \"Casualties\" as a sum of \"Killed\" and \"Wounded\"\n\nTerror['Killed'] = Terror['Killed'].fillna(Terror['Killed'].median())\nTerror['Wounded'] = Terror['Wounded'].fillna(Terror['Killed'].median())","e8947447":"Terror.describe()\n\n# we can see that per an attack, the mean of \"Killed\" is nearly 2. \n# On the other side because the median is zero, at least half of the attacks there are no killed\/wounded people. ","bd68e939":"# we can even see the number of our analysis above when we look like to the numbers as below.\n\nlen(Terror[Terror.Killed==0])","dfa064b9":"print('There are no killed people in {} of the total {} attacks.'.format (len(Terror[Terror.Killed==0]), len(Terror)))","f76810a9":"Terror.Killed.hist(bins=100)","7fec1bc8":"Terror[Terror.Killed<50].Killed.hist(bins=100)\nplt.show()","6a71c45d":"plt.boxplot(Terror.Killed)\nplt.show()","6455f23e":"from scipy.stats.mstats import winsorize\n\nTerror['winsorize_Killed'] = winsorize(Terror[\"Killed\"], (0, 0.01))\n\nmax(Terror.winsorize_Killed)","c4cd45ec":"plt.boxplot(Terror.winsorize_Killed)\nplt.title(\"Boxplot of Killed People during Attacks\")\nplt.show()","073df051":"# Number of terrorist activities by year (The data of 1993 is missing at GTD dataset)\n\nplt.subplots(figsize=(14,6))\nsns.countplot('Year',data=Terror,palette='Spectral')\nplt.xticks(rotation=70)\nplt.title('Number Of Terrorist Activities By Year', color='red')\nplt.show()","1c2478b4":"# to see the Country and the regions with highest terrorist attacks and also the max. killed attack\n\nprint('Regions with Highest Terrorist Attacks:',Terror['Region'].value_counts().index[0])\nprint('Country with Highest Terrorist Attacks:',Terror['Country'].value_counts().index[0])\nprint('Maximum people killed in an attack are:',Terror['Killed'].max(),'that happened in',Terror.loc[Terror['Killed'].idxmax()].Country)","d3ed5ab7":"# Number of terrorist attacks by region on chart\n\nplt.subplots(figsize=(14,6))\nsns.countplot('Region',data=Terror,palette='Spectral',order=Terror['Region'].value_counts().index)\nplt.xticks(rotation=90)\nplt.title('Number Of Terrorist Activities By Region', color='red')\nplt.show()","e6c652b6":"# The first 18 countries by the most killed ones in terrorist attacks\n\nKilledByTerror=Terror.groupby('Country').sum().sort_values('Killed', ascending=False).iloc[:18].Killed","cb00a51c":"# Number of terrorist attacks and number of killed by country on charts\n\nplt.subplots(figsize=(12,6))\nplt.subplot(1,2,1)\nsns.countplot('Country',data=Terror,palette='Spectral', \n              order=Terror.Country.value_counts().iloc[:15].index)\nplt.xticks(rotation=70)\nplt.title('Number Of Terrorist Attacks by Country', fontsize=16, color='red')\n\nplt.subplot(1,2,2)\nplt.bar(KilledByTerror.index, KilledByTerror)\nplt.xticks(rotation=70)\nplt.title('Number Of Killed by Country', fontsize=16, color='red')\n\nplt.show()","ebaf83f4":"# Attacking methods by terrorists\n\nplt.subplots(figsize=(14,6))\nsns.countplot('AttackType', data=Terror,palette='Spectral',order=Terror['AttackType'].value_counts().index)\nplt.xticks(rotation=70)\nplt.title('Attacking Methods by Terrorists', fontsize=16, color='red')\nplt.show()","0771be0d":"# Favorite targets of attacks\n\nplt.figure(figsize=(15,5))\nsns.countplot(Terror['Target_type'],palette='Spectral',order=Terror['Target_type'].value_counts().index)\nplt.xticks(rotation=90)\nplt.title('Favorite Targets', fontsize=16, color='darkred')\nplt.show()","292ca686":"# Terrorist groups by highest terror attacks\n\nsns.barplot(Terror['Group'].value_counts()[1:15],Terror['Group'].value_counts()[1:15].index,palette=('Spectral'))\nplt.xticks(rotation=90)\nfig=plt.gcf()\nfig.set_size_inches(10,8)\nplt.title('Terrorist Groups by Highest Terror Attacks', fontsize=16, color='red')\nplt.show()","ad24e356":"TR_Terror=Terror[Terror['Country']=='Turkey']\nTR_Terror","7d80ce69":"# filling the NaNs of 'Lat.' with 39 and the NaNs of 'Long.' with 35.15 which are transiting in the middle of Turkey.\n# because we are going to analyze Turkey's terror attacks below.\n\nTR_Terror['Lat.'] = TR_Terror['Lat.'].fillna(39)\nTR_Terror['Long.'] = TR_Terror['Long.'].fillna(35.15)","14e5a238":"TR_Terror.info()","f7a7444f":"show_missing (TR_Terror)","1a362c41":"# Number of attacks by year\n\nTR_Terror.Year.plot(kind = 'hist', color = 'b', bins=range(1970, 2018), figsize = (15,7), alpha=0.5, grid=True)\nplt.xticks(range(1970, 2018), rotation=90, fontsize=14)\nplt.yticks(fontsize=14)\nplt.xlabel(\"Year\", fontsize=15)\nplt.ylabel(\"Number of Attacks\", fontsize=15)\nplt.xticks(rotation=70)\nplt.title(\"Number of Attacks By Year\", fontsize=16, color = 'r')\nplt.show()","7f31137f":"# when we look at the groups claiming responsibility of the attacks\n\nWorld_Unknown=len(Terror[Terror.Group=='Unknown'])\nTR_Unknown=len(TR_Terror[TR_Terror.Group=='Unknown'])\nprint('Through the world, there is no group claiming the responsibility of {} attacks of the total {} and the percentage is   %{:.2f}'\n      .format (World_Unknown, len(Terror), World_Unknown\/len(Terror)*100))\nprint('In Turkey, there is no group claiming the responsibility of {} attacks of the total {} and the percentage is %{:.2f}'\n      .format (TR_Unknown, len(TR_Terror), TR_Unknown\/len(TR_Terror)*100))","a68270ec":"# when we analyze the parts of Turkey which are fronted with terrorist attacks\n\nTR_Terror[\"part_long\"] = np.where((TR_Terror['Long.']>35.15),'East', 'West')\nTR_Terror[\"part_lat\"] = np.where((TR_Terror['Lat.']>39),'North', 'South')\nTR_Terror[\"part\"] = TR_Terror[\"part_lat\"] + TR_Terror[\"part_long\"]","0e1cedde":"TR_Terror.head()","e21bd65a":"# Most targeted part\n\nTR_Terror.part.value_counts().plot.bar(figsize=[12,6], grid=True, alpha=0.8)\nsns.countplot(TR_Terror.part)\nplt.yticks(fontsize=10)\nplt.xticks(fontsize=10)\nplt.xlabel(\"Parts\", fontsize=15)\nplt.ylabel(\"Number of Attacks\", fontsize=15)\nplt.xticks(rotation=70)\nplt.title(\"Most Targeted Part\", fontsize=16, color = 'r')\nplt.show()\n","14210c6e":"TR_Terror.groupby('part').sum()","20fa672f":"# parts with total Killed people\n\nTR_Terror.groupby('part').sum()['Killed'].plot.bar()","b8ded66a":"# Most targeted cities\n\nTR_Terror.City.value_counts().drop('Unknown').head(10).plot.bar(figsize=[12,6], grid=True, alpha=0.8)\nplt.yticks(fontsize=10)\nplt.xticks(fontsize=10)\nplt.xlabel(\"Cities\", fontsize=15)\nplt.ylabel(\"Number of Attacks\", fontsize=15)\nplt.xticks(rotation=70)\nplt.title(\"Most Targeted Cities\", fontsize=16, color = 'r')\nplt.show()","70ac11e5":"from wordcloud import WordCloud\ndf = TR_Terror[TR_Terror.City != 'Unknown']\nwordcloud = WordCloud(max_font_size=80, max_words=100, background_color=\"yellow\").generate(\" \".join(df.City))\nplt.figure()\nplt.imshow(wordcloud, interpolation=\"bilinear\")\nplt.axis(\"off\")\nplt.savefig(\"graph.png\")\nplt.show()","1047efb9":"# Attacking methods by terrorists in Turkey\n\nplt.subplots(figsize=(14,6))\nsns.countplot('AttackType', data=TR_Terror,palette='Spectral',order=TR_Terror['AttackType'].value_counts().index)\nplt.xticks(rotation=70)\nplt.title('Attacking Methods by Terrorists', fontsize=16, color='red')\nplt.show()","970ed7fd":"# Favorite targets of terrorists in Turkey\n\nplt.subplots(figsize=(14,6))\nsns.countplot(Terror['Target_type'],palette='Spectral',order=Terror['Target_type'].value_counts().index)\nplt.xticks(rotation=90)\nplt.title('Favorite Targets of Terrorists', fontsize=16, color='red')\nplt.show()","4f89298c":"sns.barplot(TR_Terror['Group'].value_counts()[0:12],TR_Terror['Group'].value_counts()[0:12].index,palette=('Spectral'))\nplt.xticks(rotation=90)\nfig=plt.gcf()\nfig.set_size_inches(10,8)\nplt.title('Terrorist Groups by Highest Terror Attacks', fontsize=16, color='red')\nplt.show()","33f0f48d":"TR_Terror.corr()","e4cc8107":"f,ax = plt.subplots(figsize=(13, 13))\nsns.heatmap(TR_Terror.corr(), annot=True, linewidths=.5, fmt= '.1f',ax=ax)\nplt.show()","27d8cfe3":"TR_Terror.groupby('part').mean().Killed","7084caf9":"ttest = ttest_ind(TR_Terror[TR_Terror[\"part\"]=='SouthEast'].Killed, \n                    TR_Terror[TR_Terror[\"part\"]=='SouthWest'].Killed)\nprint(ttest)","35b99a16":"parts = TR_Terror[\"part\"].unique()\npd.options.display.float_format = '{:.15f}'.format\nfor var in [\"Killed\"]:\n    Comparison = pd.DataFrame(columns=['Group_1', 'Group_2', 'Statistics','p_value'])\n    print(\"Comparison for {}\".format(var),end='')\n    for i in range(0, len(parts)):\n        for j in range(i+1, len(parts)):\n            ttest = stats.ttest_ind(TR_Terror[TR_Terror[\"part\"]==parts[i]][var], \n                                TR_Terror[TR_Terror[\"part\"]==parts[j]][var])\n            Group_1 = parts[i]\n            Group_2 = parts[j]\n            Statistics = ttest[0]\n            p_value = ttest[1]\n            \n            Comparison = Comparison.append({\"Group_1\" : Group_1 ,\n                                                  \"Group_2\" : Group_2 ,\n                                                \"Statistics\" : Statistics,\n                                                  \"p_value\" : p_value}, ignore_index=True)\n    display(Comparison)","f9179bbe":"# TURKEY'S POSITION IN GLOBAL TERRORISM DATABASE (1970-2017)           ","a1c20074":"### 4. Data Wrangling","f78e6847":"### AN EXPLORATORY DATA ANALYSIS (EDA) PREPARED BY ABDULKAD\u0130R GER\u00c7EKSEVER","208d508b":"### 2. The Aim of Analysis\n\nThe main aim of this explarotary data analysis is to achieve more clear vision on the terrorist activities not only at world but also in Turkey during the years 1970-2017. We will get better understanding on what's going on the terrorism side of world and Turkey when we finish to analyze the data.","1b7e5101":"### Conclusions\n\nAt the end of this analysis;\n- When we look at number of terrorist activities through the World; we see that especially after 9\/11, three years seems to be stable but from 2005 to 2014 there is really a steady increase, even though there seems to be a decrease until 2017, the activities after 2005 until today are really high level than before 2005 till 1970.\n- Number of terrorist activities in Middle East & North Africa is at the highest point, after then comes South Asia. In the Middle East, Iraq is the first country with its terrorist activities and killed people. After Iraq comes Pakistan and Afghanistan. The terrorists use bombings\/explosions as method during their attacks. And the favorite target of the attacks is private citizens\/properties and then respectively; military, police, government and business parts of the countries. \n- Most of the terror attacks were held by Taliban, then ISIL.\n- When we look at number of terrorist activities through Turkey; especially after 1987 until 1999 there seems to be an increase. This is because of the Kurdistan Worker\u2019s Party (PKK)\u2019s occurence. On the other hand there is again an increase on the activities after 2014 till today. We can say that the activities in Turkey is not related with 9\/11. There is some another characteristic specialities and related terrorism events of the country because of its geographical position between Europe and Asia.\n- Number of terrorist activities in \u0130stanbul is at the highest point, after then comes Ankara and Diyarbak\u0131r. The terrorists use bombings\/explosions and then armed assault as a method during their attacks. And the favorite target of the attacks is private citizens\/properties and then respectively; military, police, government and business parts of the cities like the scene at World. \n- Most of the terror attacks were held by Kurdistan Worker\u2019s Party (PKK). \n- We can see a meaningful statistical difference between SouthEast and SouthWest of Turkey when we look to the number of killed people.","3bb0546b":"### Categorical Variables\n- Country\n- Region\n- City\n- Attacktype\n- Target\n- Group\n- Target_type\n- Weapon_type","49acc7e2":"### Contents\n1. Introduction\n2. The Aim of Analysis\n3. General View of the Data\n4. Data Wrangling\n5. Data Exploration\n6. Conclusions","40259ca4":"### Continuous Variables\n\n- Year\n- Month\n- Day\n- Lat.\n- Long.\n- Killed\n- Wounded\n- Casualties","77ecfad1":"### 5. Data Exploration","d1f7c616":"### 3. General View of the Data\n\nVariables which are used during EDA:\n\nYear: The year in which the incident occurred.\n\nMonth: The number of the month in which the incident occurred.\n\nDay: The numeric day of the month on which the incident occurred.\n\nCountry: The country or location where the incident occurred. \n\nRegion: The region in which the incident occurred. The regions are divided into the 12 categories.\n\nCity: The name of the city, village, or town in which the incident occurred. \n\nLat.: The latitude (based on WGS1984 standards) of the city in which the event occurred.\n\nLong.: The longitude (based on WGS1984 standards) of the city in which the event occurred.\n\nAttackType: The general method of attack and often reflects the broad class of tactics used. It consists of nine categories.\n\nKilled: The number of total confirmed fatalities for the incident\n\nWounded: The number of confirmed non-fatal injuries to both perpetrators and victims.\n\nTarget: The specific person, building, installation, etc., that was targeted and\/or victimized and is a part of the entity. \n\nGroup: The name of the group that carried out the attack.\n\nTarget_type: The general type of target\/victim. This variable consists of the following 22 categories.\n\nWeapon_type: The type of weapon. Up to four weapon types are recorded for each incident. It consists 13 categories.","daa1e20e":"### 1. Introduction \n\nThe Global Terrorism Database (GTD) is an open-source database including information on terrorist attacks around the world from 1970 through 2017. The GTD includes systematic data based on information on more than 180,000 terrorist attacks which have occurred during this time period. The database is maintained by researchers at the National Consortium for the Study of Terrorism and Responses to Terrorism (START), headquartered at the University of Maryland. So we are using this material to achieve the results on our analysis. "}}