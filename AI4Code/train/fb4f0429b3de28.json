{"cell_type":{"e3ade816":"code","119bd551":"code","c1bfc8b8":"code","44fcb16b":"code","c3074abc":"code","334725f8":"code","45ab171e":"code","2f93482f":"code","3bf20ced":"code","90848806":"code","d6e2b1f3":"code","0417fb19":"code","23b13903":"code","a51c5969":"code","dcff6589":"code","7d706acf":"code","8e6be4fd":"code","377af02f":"code","88a32375":"code","4864b46e":"code","2e02a0ee":"code","b6385f85":"code","b18b4134":"code","8a2ea848":"markdown","fed33e14":"markdown","be02c935":"markdown","4b311b7d":"markdown","38a477ae":"markdown","62996146":"markdown","5334b541":"markdown","25e0a9fa":"markdown","b1bff37e":"markdown","0a62b58a":"markdown"},"source":{"e3ade816":"# packages\n\n# standard\nimport numpy as np # linear algebra\nimport pandas as pd # data processing, CSV file I\/O (e.g. pd.read_csv)\n\n# plots\nimport matplotlib.pyplot as plt\nimport seaborn as sns\nimport plotly.express as px","119bd551":"# load file\ndf = pd.read_csv('..\/input\/internet-access-oecd\/DP_LIVE_25112020170111306.csv')","c1bfc8b8":"# first glance\ndf.describe(include='all')","44fcb16b":"# INDICATOR, SUBJECT, MEASURE, FREQUENCY have only one unique value => we can safely remove those columns\ndf = df.drop(['INDICATOR', 'SUBJECT', 'MEASURE', 'FREQUENCY'], axis=1)","c3074abc":"# Flag Codes don't seem to add much value either:\nprint(df['Flag Codes'].value_counts())\ndf = df.drop(['Flag Codes'], axis=1)","334725f8":"df","45ab171e":"# we can quickly check this by counting\/plotting the frequencies\nfig = plt.figure(figsize=(12,5))\ndf.LOCATION.value_counts().plot(kind='bar')\nplt.grid()\nplt.show()","2f93482f":"# let's get a list of those countries with incomplete history\nincomplete = df.LOCATION.value_counts()\nincomplete = incomplete[incomplete<15]\nincomplete = list(incomplete.index)\nprint('Countries having incomplete history:')\nprint(incomplete)","3bf20ced":"# evaluate min\/max available year for all countries\nyear_stats = df.groupby('LOCATION', as_index=False).agg(\n    min_year = pd.NamedAgg(column='TIME', aggfunc=min),\n    max_year = pd.NamedAgg(column='TIME', aggfunc=max),\n    n_years = pd.NamedAgg(column='TIME', aggfunc=\"count\"))\n\n# and show only those that do not have values for all years, i. e. 2005..2019\nyear_stats[year_stats.LOCATION.isin(incomplete)]","90848806":"# extract data for most recent year (2019)\ndf_2019 = df[df.TIME==2019]","d6e2b1f3":"# and plot the values\nfig = plt.figure(figsize=(15,5))\nsns.barplot(x=df_2019.LOCATION, y=df_2019.Value)\nplt.title('Status 2019')\nplt.grid()\nplt.show()","0417fb19":"# create also sorted version of the plot\ndf_2019_sort = df[df.TIME==2019].sort_values(by='Value', ascending=False)\n\nfig = plt.figure(figsize=(15,5))\nsns.barplot(x=df_2019_sort.LOCATION, y=df_2019_sort.Value)\nplt.title('Status 2019 - Sorted')\nplt.grid()\nplt.show()","23b13903":"# create interactive line chart grouped by country using plotly\nfig = px.line(df, x='TIME', y='Value', color='LOCATION',\n             title='Development for all countries')\nfig.show()","a51c5969":"# we can easily also create a plot showing only the countries with INCOMPLETE values\nfig = px.line(df[df.LOCATION.isin(incomplete)], x='TIME', y='Value', color='LOCATION',\n               title='Development for countries having incomplete statistics')\nfig.show()","dcff6589":"# extract data 10 years before 2019:\ndf_2009 = df[df.TIME==2009]\n\n# get intersection of countries available both 2009 and 2019\ncountries_2009 = set(df_2009.LOCATION.unique())\ncountries_2019 = set(df_2019.LOCATION.unique())\ncommon_countries = countries_2009.intersection(countries_2019)\n\n# now extract common countries from both years\ndf1 = df_2009[df_2009.LOCATION.isin(common_countries)].reset_index(drop=True)\ndf2 = df_2019[df_2019.LOCATION.isin(common_countries)].reset_index(drop=True)","7d706acf":"# and combine to one nice data frame\ndf_compare = df1\ndf_compare = df_compare.rename(columns={'Value': 'Value2009'})\ndf_compare = df_compare.drop('TIME', axis=1)\ndf_compare['Value2019'] = df2.Value\n# df_compare['LOCATION_CHECK'] = df2.LOCATION # just for checking if rows are aligned correctly\ndf_compare['Diff_10y'] = df_compare.Value2019 - df_compare.Value2009\ndf_compare.head()","8e6be4fd":"# visualize development using scatter plot\nfig = px.scatter(df_compare, x='Value2009', y='Value2019', color='LOCATION',\n             title='2019 vs 2009')\nfig.show()","377af02f":"# correlation\ncor_pearson = df_compare.Value2009.corr(df_compare.Value2019, method='pearson')\ncor_spearman = df_compare.Value2009.corr(df_compare.Value2019, method='spearman')\n\nprint('Correlation 2019 vs 2009 - Pearson  : ', np.round(cor_pearson,4))\nprint('Correlation 2019 vs 2009 - Spearman : ', np.round(cor_spearman,4))","88a32375":"# plot change of percentage over 10 years\nfig = plt.figure(figsize=(15,5))\nsns.barplot(x=df_compare.LOCATION, y=df_compare.Diff_10y)\nplt.title('Ten year development')\nplt.grid()\nplt.show()","4864b46e":"# create again also sorted version of the plot\ndf_compare_sort = df_compare.sort_values(by='Diff_10y', ascending=False)\n\nfig = plt.figure(figsize=(15,5))\nsns.barplot(x=df_compare_sort.LOCATION, y=df_compare_sort.Diff_10y)\nplt.title('Ten year development - Sorted')\nplt.grid()\nplt.show()","2e02a0ee":"sel_country = 'CRI'\n\ndf_sel = df[df.LOCATION==sel_country].copy()\ndf_sel['Value_Diff'] = df_sel.Value.diff() # calc\/add year on year difference","b6385f85":"# visualize development using scatter plot\nfig = px.scatter(df_sel, x='TIME', y='Value',\n             title='Development ' + sel_country)\nfig.show()","b18b4134":"# visualize incremental development using scatter plot\nfig = px.scatter(df_sel, x='TIME', y='Value_Diff',\n             title='Incremental Development ' + sel_country)\nfig.show()","8a2ea848":"# Compare development over 10 years","fed33e14":"# Look at an individual country","be02c935":"# Status as of 2019","4b311b7d":"### There is still one caveat: Not for all countries we have values for all years 2005..2019!","38a477ae":"### It is interesting to note, that Iceland and Turkey have data for the first year 2005 as well as for the last year 2019, but the values are nevertheless incomplete, due to missings in between!","62996146":"# Visualize Internet Access for 39 Countries in the years 2005..2019\nValues represent % of households in the country having internet access.","5334b541":"# Interactive plot of development by country","25e0a9fa":"# Import and data preparation","b1bff37e":"### Please note that you can select an indvidual country by double-clicking on the legend.","0a62b58a":"### Now we have a compact and clean dataset:"}}