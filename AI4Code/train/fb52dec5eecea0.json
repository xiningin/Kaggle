{"cell_type":{"74c135a3":"code","149e432b":"code","43255d22":"code","0222ad7c":"code","53fd184e":"code","7b8ca6ea":"code","060a427e":"code","75e09da5":"code","ed950a06":"code","dd25ab31":"code","a6b6197d":"code","fcf95fc2":"code","3692cfa2":"code","74b3fd93":"code","efa2ecd7":"code","c855cf38":"code","7eda298f":"code","04cfd133":"code","44bb9419":"code","1cc07778":"code","da7d841f":"code","88e0f1a4":"code","371e0713":"code","5fae5702":"code","7cbc9b5f":"code","62547d29":"code","365f8417":"code","efda5c5b":"code","f6a0af48":"code","7ee403c5":"code","657f9ff4":"code","2a100d0d":"code","77c6bd91":"code","f72ba263":"code","c881391e":"code","fb305792":"code","06211b8d":"code","efb5baab":"code","5b920399":"code","cf4c2f8a":"code","5c8dc3e8":"code","edefd6cf":"code","aa839def":"code","8855bb43":"code","3aa46601":"code","49c84552":"code","511599ff":"code","55053121":"code","6aaddbba":"code","58c62a1f":"code","c3090657":"code","13b7a959":"code","893e2f17":"code","d37870f7":"code","77278582":"code","88bfd200":"code","2b0a0b2e":"code","292d7441":"code","ef68f670":"code","cb58b0db":"markdown","241aa5d4":"markdown","3afd8133":"markdown","0190fbc1":"markdown","d8efba4f":"markdown","76b8b61b":"markdown","333b7ae7":"markdown","12d58688":"markdown","79efe88b":"markdown","6edaf32f":"markdown","edca5e7d":"markdown","543bc575":"markdown","18a67abb":"markdown","84ab4ed5":"markdown","bb2662ed":"markdown","7e321dea":"markdown","35d4c6b5":"markdown","f0bb89ba":"markdown","5eee5a7a":"markdown","6ab2e21f":"markdown","89fcd7ef":"markdown","bdc5db4b":"markdown","428bb679":"markdown","2f115084":"markdown","fae7aba3":"markdown","f91e4c83":"markdown","f4264f2f":"markdown"},"source":{"74c135a3":"import numpy as np \nimport pandas as pd \nimport math\nimport glob\nimport os\nimport plotly.express as px\nimport plotly.graph_objs as go\nimport matplotlib.pyplot as plt\nimport seaborn as sns\nimport missingno as msno\nimport wandb\nimport matplotlib.pyplot as plt\nimport re as re\n\n\nimport folium\nfrom geopy.geocoders import Nominatim\nfrom folium import Choropleth, Circle, Marker\nfrom folium.plugins import HeatMap, MarkerCluster","149e432b":"products_df = pd.read_csv(\"..\/input\/learnplatform-covid19-impact-on-digital-learning\/products_info.csv\")\nproducts_df.head()","43255d22":"districts_df = pd.read_csv(\"..\/input\/learnplatform-covid19-impact-on-digital-learning\/districts_info.csv\")\ndistricts_df.head()","0222ad7c":"path = '..\/input\/learnplatform-covid19-impact-on-digital-learning\/engagement_data' \nall_files = glob.glob(path + \"\/*.csv\")\n\nli = []\n\nfor filename in all_files:\n    df = pd.read_csv(filename, index_col=None, header=0)\n    district_id = filename.split(\"\/\")[4].split(\".\")[0]\n    df[\"district_id\"] = district_id\n    li.append(df)\n    \nengagement_df = pd.concat(li)\nengagement_df = engagement_df.reset_index(drop=True)\nengagement_df.head()","53fd184e":"engagement_df.info()","7b8ca6ea":"msno.bar(products_df,color='#7209b7', sort=\"ascending\", figsize=(10,5), fontsize=12)\nplt.show()","060a427e":"msno.bar(districts_df,color='#f72585', sort=\"ascending\", figsize=(10,5), fontsize=12)\nplt.show()","75e09da5":"msno.bar(engagement_df,color='#4895ef', sort=\"ascending\", figsize=(10,5), fontsize=12)\nplt.show()","ed950a06":"products_df.info()\n","dd25ab31":"districts_df.info()\n","a6b6197d":"engagement_df.info()\n","fcf95fc2":"print('\u2055'*50)\nprint(\"Null Value in Engagement Dataframe:\")\nprint('\u2055'*50)\nprint(engagement_df.isnull().sum())\nprint(\"\\n\")\nprint('\u2055'*50)\nprint(\"Null Value in Districts Dataframe:\")\nprint('\u2055'*50)\nprint(districts_df.isnull().sum())\nprint(\"\\n\")\nprint('\u2055'*50)\nprint(\"Null Value in Products Dataframe:\")\nprint('\u2055'*50)\nprint(products_df.isnull().sum())","3692cfa2":"print('\u2055'*50)\nprint(\"Number of Duplicate value in Districts Dataframe:\",districts_df.duplicated().sum())\nprint(\"Number of Duplicate value in Engagement Dataframe:\",engagement_df.duplicated().sum())\nprint(\"Number of Duplicate value in Products Dataframe:\",products_df.duplicated().sum())\nprint('\u2055'*50)","74b3fd93":"products_df = products_df.dropna()","efa2ecd7":"districts_df = districts_df.dropna()","c855cf38":"engagement_df = engagement_df.dropna()","7eda298f":"labels = list(products_df['Primary Essential Function'].value_counts().index)\nvalues = products_df['Primary Essential Function'].value_counts()\ncolors = ['mediumslateblue', 'darkorange']\nfig = go.Figure(data=[go.Pie(labels=labels,\n                             values=values,hole=.3)])\nfig.update_traces(hoverinfo='label+percent', textinfo='percent', textfont_size=20,\n                  marker=dict( line=dict(color='#000000', width=3)))\nfig.update_layout(title=\"Primary Essential Function \",\n                  titlefont={'size': 20},      \n                  )\nfig.show()","04cfd133":"products_df['Primary Essential Function Category'] = products_df['Primary Essential Function'].str.split().str[0]\n","44bb9419":"products_df.drop('Primary Essential Function', inplace=True, axis=1)","1cc07778":"products_df.head(50)","da7d841f":"labels = list(products_df['Primary Essential Function Category'].value_counts().index)\nvalues = products_df['Primary Essential Function Category'].value_counts()\ncolors = ['mediumslateblue', 'darkorange']\nfig = go.Figure(data=[go.Pie(labels=labels,\n                             values=values,hole=.3)])\nfig.update_traces(hoverinfo='label+percent', textinfo='percent', textfont_size=20,\n                  marker=dict( line=dict(color='#000000', width=3)))\nfig.update_layout(title=\"Primary Essential Function \",\n                  titlefont={'size': 30},      \n                  )\nfig.show()","88e0f1a4":"labels = list(products_df['Sector(s)'].value_counts().index)\nvalues = products_df['Sector(s)'].value_counts()\n# colors = ['mediumslateblue', 'darkorange']\nfig = go.Figure(data=[go.Pie(labels=labels,\n                             values=values,hole=.3)])\nfig.update_traces(hoverinfo='label+percent', textinfo='percent', textfont_size=20,\n                  marker=dict( line=dict(color='#000000', width=3)))\nfig.update_layout(title=\"Sector Distribution \",\n                  titlefont={'size': 30},      \n                  )\nfig.show()","371e0713":"labels = list(districts_df['locale'].value_counts().index)\nvalues = districts_df['locale'].value_counts()\n# colors = ['mediumslateblue', 'darkorange']\nfig = go.Figure(data=[go.Pie(labels=labels,\n                             values=values,hole=.3)])\nfig.update_traces(hoverinfo='label+percent', textinfo='percent', textfont_size=20,\n                  marker=dict( line=dict(color='#000000', width=3)))\nfig.update_layout(title=\"Locale Distribution \",\n                  titlefont={'size': 30},      \n                  )\nfig.show()","5fae5702":"States = districts_df['state'].value_counts()\nStates.head(20)","7cbc9b5f":"labels = list(districts_df['state'].value_counts().index)\nvalues = districts_df['state'].value_counts()\n# colors = ['mediumslateblue', 'darkorange']\nfig = go.Figure(data=[go.Pie(labels=labels,\n                             values=values,hole=.3)])\nfig.update_traces(hoverinfo='label+percent', textinfo='percent', textfont_size=20,\n                  marker=dict( line=dict(color='#000000', width=3)))\nfig.update_layout(title=\"States Distribution \",\n                  titlefont={'size': 30},      \n                  )\nfig.show()","62547d29":"States = districts_df['state'].value_counts().nlargest(7)\nStates.head()","365f8417":"districts_df['pct_black\/hispanic'].value_counts()","efda5c5b":"labels = list(districts_df['pct_black\/hispanic'].value_counts().index)\nvalues = districts_df['pct_black\/hispanic'].value_counts()\n# colors = ['mediumslateblue', 'darkorange']\nfig = go.Figure(data=[go.Pie(labels=labels,\n                             values=values,hole=.3)])\nfig.update_traces(hoverinfo='label+percent', textinfo='percent', textfont_size=20,\n                  marker=dict( line=dict(color='#000000', width=3)))\nfig.update_layout(title=\"pct_black\/hispanic \",\n                  titlefont={'size': 30},      \n                  )\nfig.show()","f6a0af48":"districts_df['pct_black\/hispanic'].unique","7ee403c5":"districts_df['pct_black\/hispanic']= districts_df['pct_black\/hispanic'].str.extractall('(\\d*\\.\\d+|\\d)').unstack().loc[:,0]. astype(float).mean(axis=1)","657f9ff4":"districts_df.drop(columns=['county_connections_ratio'])","2a100d0d":"districts_df['pct_free\/reduced']= districts_df['pct_free\/reduced'].str.extractall('(\\d*\\.\\d+|\\d)').unstack().loc[:,0]. astype(float).mean(axis=1)","77c6bd91":"districts_df['pp_total_raw']= districts_df['pp_total_raw'].str.extractall('(\\d+)').unstack().loc[:,0]. astype(float).mean(axis=1)","f72ba263":"districts_df.head()","c881391e":"labels = list(districts_df['pct_free\/reduced'].value_counts().index)\nvalues = districts_df['pct_free\/reduced'].value_counts()\n# colors = ['mediumslateblue', 'darkorange']\nfig = go.Figure(data=[go.Pie(labels=labels,\n                             values=values,hole=.3)])\nfig.update_traces(hoverinfo='label+percent', textinfo='percent', textfont_size=20,\n                  marker=dict( line=dict(color='#000000', width=3)))\nfig.update_layout(title=\"pct_free\/reduced \",\n                  titlefont={'size': 30},      \n                  )\nfig.show()","fb305792":"labels = list(districts_df['county_connections_ratio'].value_counts().index)\nvalues = districts_df['county_connections_ratio'].value_counts()\n# colors = ['mediumslateblue', 'darkorange']\nfig = go.Figure(data=[go.Pie(labels=labels,\n                             values=values,hole=.3)])\nfig.update_traces(hoverinfo='label+percent', textinfo='percent', textfont_size=20,\n                  marker=dict( line=dict(color='#000000', width=3)))\nfig.update_layout(title=\"county_connections_ratio \",\n                  titlefont={'size': 30},      \n                  )\nfig.show()","06211b8d":"labels = list(districts_df['pp_total_raw'].value_counts().index)\nvalues = districts_df['pp_total_raw'].value_counts()\n# colors = ['mediumslateblue', 'darkorange']\nfig = go.Figure(data=[go.Pie(labels=labels,\n                             values=values,hole=.3)])\nfig.update_traces(hoverinfo='label+percent', textinfo='percent', textfont_size=20,\n                  marker=dict( line=dict(color='#000000', width=3)))\nfig.update_layout(title=\"pp_total_raw \",\n                  titlefont={'size': 30},      \n                  )\nfig.show()","efb5baab":"# Fixing random state for reproducibility\nnp.random.seed(19680801)\n\n\nplt.rcdefaults()\nfig, ax = plt.subplots()\n\n# Example data\nvalues = list(districts_df['pct_black\/hispanic'].value_counts().index)\ny_pos = np.arange(len(values))\ncategory = 3 + 10 * np.random.rand(len(values))\nerror = np.random.rand(len(values))\n\nplt.figure(figsize=(100,100))\nax.barh(y_pos, category, xerr=error, align='center',height = 0.5)\nax.set_yticks(y_pos)\nax.set_yticklabels(values)\nax.invert_yaxis()  # labels read top-to-bottom\nax.set_xlabel('Category')\nax.set_title('percentage of Black\/Hispanic')\n\nplt.show()","5b920399":"df_state=districts_df[districts_df[\"state\"].isin([\"Utah\", \"Illinois\", \"Connecticut\",\"California\", \"Ohio\"])]\nfrom plotly.subplots import make_subplots\nimport plotly.graph_objects as go\nfig = make_subplots(rows=1, cols=2, subplot_titles=(\"Mean-Percentage distribution in top 5 states\", \"Mean-Percentage distribution in locale\"))\nfig.add_trace(go.Bar(name='State',x=df_state.index, y=df_state[\"pct_black\/hispanic\"], marker_color=\"#720026\"),row=1, col=1)\nfig.update_traces(marker_line_color='rgb(8,48,107)',marker_line_width=1.2, opacity=0.6)\nfig.update_layout(height=400, width=1000)\nfig.show()\nplt.savefig('Mean-Per.jpg')","cf4c2f8a":"engagement_df['time'] = pd.to_datetime(engagement_df['time'])","5c8dc3e8":"products_engagement_data = pd.merge(products_df, engagement_df, left_on='LP ID', right_on='lp_id')\nproducts_engagement_data.head()","edefd6cf":"engagement_df[\"district_id\"] = engagement_df[\"district_id\"].astype(str).astype(int)\ndistricts_engagement_data = pd.merge(districts_df, engagement_df, left_on='district_id', right_on='district_id')\ndistricts_engagement_data.head(6)","aa839def":"districts_engagement_data.info()","8855bb43":"districts_engagement_data=districts_engagement_data.dropna()","3aa46601":"districts_engagement_data.groupby(pd.cut(districts_engagement_data['engagement_index'],[0,2000,4000,6000])).count()","49c84552":"products_engagement_data.groupby(pd.cut(products_engagement_data['engagement_index'],[0,2000,4000,6000])).count()","511599ff":"plt.rcdefaults()\nfig, ax = plt.subplots()\n\n# Example data\nvalues = list(districts_engagement_data['pct_black\/hispanic'].value_counts().index)\ny_pos = np.arange(len(values))\ncategory = 3 + 10 * np.random.rand(len(values))\nerror = np.random.rand(len(values))\n\nplt.figure(figsize=(100,100))\nax.barh(y_pos, category, xerr=error, align='center',height = 0.5)\nax.set_yticks(y_pos)\nax.set_yticklabels(values)\nax.invert_yaxis()  # labels read top-to-bottom\nax.set_xlabel('Category')\nax.set_title('percentage of Black\/Hispanic')\n\nplt.show()\n\nplt.savefig('per_B_H.jpg')\n","55053121":"products_engagement_data.info()","6aaddbba":"districts_engagement_data.info()","58c62a1f":"districts_df['pct_free\/reduced'].nunique","c3090657":"#list1 = [1,2,3,4,5,6,7,8,9,10]\nlist1 = np.arange(1,10)","13b7a959":"for x in list1:\n    globals()['districtsid%x' % x] = districts_df['district_id'].iloc[x]\n","893e2f17":"for x in list1:\n    globals()['Eng_indvalues%i' % x] =pd.DataFrame(districts_engagement_data[districts_engagement_data['district_id']==globals()['districtsid%x' % x]]['engagement_index'])\n    globals()['Time_indvalues%i' % x]=pd.DataFrame(districts_engagement_data[districts_engagement_data['district_id']== globals()['districtsid%x' % x]]['time'])\n","d37870f7":"import datetime\n\nfig, ax = plt.subplots(list1.size)\nfig.suptitle('Engamement index vs time')\nfig.set_size_inches(20, 35)\n#fig.autofmt_xdate()\nfor x in list1:\n    ax[x-1].set_title('district ' + str(globals()['districtsid%x' % x]))\n    ax[x-1].plot(globals()['Time_indvalues%i' % x], globals()['Eng_indvalues%i' % x])\n    ax[x-1].set_xlim([datetime.date(2020, 1, 1), datetime.date(2021, 1, 1)])\n    ax[x-1].set_ylim([0, 50000])\n    \nplt.savefig('submission.pdf')","77278582":"districts_engagement_data.head(10)\n","88bfd200":"dis_list = pd.DataFrame(districts_engagement_data['district_id'].unique())\ndis_no = districts_engagement_data['district_id'].nunique()\ndis_list_range =  np.arange(0,dis_no)\n\ndis_list.head()","2b0a0b2e":"rs = np.random.RandomState(0)\ndf = pd.DataFrame(rs.rand(10, 10))\ncorr = districts_engagement_data.corr()\ncorr.style.background_gradient(cmap='coolwarm')","292d7441":"list2 = np.arange(1,10)\nfor x in list1:\n    globals()['LP ID%x' % x] = products_df['LP ID'].iloc[x]\nfor x in list1:\n    globals()['Eng_indvalues%i' % x] =pd.DataFrame(products_engagement_data[products_engagement_data['LP ID']==globals()['LP ID%x' % x]]['engagement_index'])\n    globals()['Time_indvalues%i' % x]=pd.DataFrame(products_engagement_data[products_engagement_data['LP ID']== globals()['LP ID%x' % x]]['time'])\n","ef68f670":"import datetime\n\nfig, ax = plt.subplots(list1.size)\nfig.suptitle('Product ID vs time')\nfig.set_size_inches(20, 35)\n#fig.autofmt_xdate()\nfor x in list1:\n    ax[x-1].set_title('LP ID ' + str(globals()['LP ID%x' % x]))\n    ax[x-1].plot(globals()['Time_indvalues%i' % x], globals()['Eng_indvalues%i' % x])\n    ax[x-1].set_xlim([datetime.date(2020, 1, 1), datetime.date(2021, 1, 1)])\n    ax[x-1].set_ylim([0, 50000])\n    \nplt.savefig('submission1.pdf')","cb58b0db":"**Impact of COVID-19 on Digital Learning**\n\nThis code aims to reveal some insights about the effect of COVID-19 on the digital learning in the US during ","241aa5d4":"We notice that the previous bar chart differs from the first bar chart that investigates the same percentage but without involving the engagmenet data. This can be explained ","3afd8133":"from the previous figures, we can notice the following \n\n1. The engagemnet index has very low values in interval (1-6-2020 till 15-8-2020)\n2. The engagement index has its maximum values in the interval (15-5-2020 till 15-12-2020)\n","0190fbc1":"extract an array containing districs id \nNote that: we cannot depend on the districts infor file beca","d8efba4f":"Only one value","76b8b61b":"This is a very important result\nThe corelation values between \"district_id,pct_black\/hispanic,pct_free\/reduced,pp_total_raw, and lp_id\" and engagement index are very low , thus we can pybass the effect of them on engagement index ","333b7ae7":"Link engamgement data to districts and product info ","12d58688":"we can replace each interval of the \"pct_free\/reduced \" with its mid point","79efe88b":"**Import important libraries **","6edaf32f":"Now we investigate the districts info data ","edca5e7d":"This parameter has no effect on the engagmenet ration ","543bc575":"we can replace each interval of the \"pct_black\/hispanic \" with its mid point ","18a67abb":"now we merge the enagmenet data into two files\n1. One file containing products info and engagement data\n2. second file containing districts info and engagement data","84ab4ed5":"From hte above statistics, theere are several null values \nsince they are not integers, so we cannot replace them with relevant data, so we need to remove them ","bb2662ed":"Important libraries","7e321dea":"Now we need to investigate the parameters that affects the learning index ","35d4c6b5":"We can a dd a new colum that containing the first 2 letters of \"Primary Essential Function\" feature","f0bb89ba":"we need to have a look on the important parameters ","5eee5a7a":"it can be shown that the percentage of percentage of Black\/Hispanic are almost homogeneous in the listed distrcts ","6ab2e21f":"plot the engagement values fo the first distrct","89fcd7ef":"**Open the required data**\n","bdc5db4b":"Now we will investigate the relation between the products and the engagement index\n","428bb679":"We plot the engagement index","2f115084":"From the previous figures, we can see that in the interval from 1-6-2-2- to 1-9-2020, there are to activities and can be ignored  \nAlso we will try to investiage the factors related to the districs infro that affects the engagmener index","fae7aba3":"From the previous graphs, it can be noticed that only 3 sectors have a great infeluence \n1- Prek-12\n2- Prek-12;higher Ed ;Corporate\n3- Prek-12;higher Ed","f91e4c83":"**First**: products info","f4264f2f":"Now we will investigate each of the given data"}}