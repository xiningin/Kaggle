{"cell_type":{"b0dc4894":"code","86fcfe1a":"code","eec4ea18":"code","08181931":"code","a635ebf8":"code","cd1f5a11":"code","a9f61f52":"code","2807c970":"code","04956ca0":"code","b097cbf2":"code","e298af68":"code","80e8d5ad":"code","04a2cadb":"code","419a80f8":"code","cb26bc2c":"code","61bc2199":"code","e8371b35":"code","1314d35b":"code","586a40a3":"code","e0adf071":"code","837b7905":"code","9859269d":"code","3e408be2":"code","15f70bf3":"code","f59b0086":"code","0f5b9feb":"code","4957ea04":"code","29104798":"code","6ff6efa3":"code","1501f999":"code","23b9fded":"code","ddc5bec2":"code","64fbc94e":"code","e4455d03":"code","6251950d":"code","34b0bb94":"code","bc9a714b":"code","d1c08a43":"code","1ddf33b6":"code","fb54186a":"code","c6039c3f":"code","02d34ff4":"code","f93692da":"code","1102306e":"code","48eb6b9a":"code","3f158592":"code","6536d627":"code","5f426f1e":"code","d362ea05":"code","78cf85b5":"code","f97ab0c4":"code","02c7118b":"code","1d063de7":"code","e7925c82":"code","7aefb6df":"code","73a83893":"code","cf407c79":"code","5eb02926":"code","d5468a15":"code","7b704280":"code","12d60b17":"code","8f4e4967":"code","74336ba8":"code","be0016be":"code","fba2f000":"code","726f19dc":"code","c2f27dcd":"code","8fa44fa3":"code","df56d6b9":"code","a238780d":"code","76aa8dff":"code","eb7adea6":"code","db0e7b0f":"code","6e76ce87":"code","ddd0ad00":"code","bbc6565d":"code","a98c78f7":"code","af5423c4":"code","19e121c9":"code","c49fb668":"code","838ad503":"code","78be4117":"code","eaac26b9":"code","ba551e3f":"code","72ca2e0a":"code","07c00c48":"code","7981debd":"code","8f4b8c3d":"code","3286edb4":"code","9819d728":"code","a17c6228":"code","9cf45ab0":"code","46c0634e":"code","996ae769":"code","2cbc635f":"code","4d17d181":"code","f72a6c0f":"code","eeaa1313":"code","9f00a7eb":"code","bb299e07":"code","5d0b97e3":"code","ed3b536f":"code","f80022dd":"code","6d0d96ff":"markdown","44e12c1f":"markdown","487f9fc3":"markdown","c8119902":"markdown","e3f04f28":"markdown"},"source":{"b0dc4894":"import numpy as np # linear algebra\nimport pandas as pd # data processing, CSV file I\/O (e.g. pd.read_csv)\n\nimport os\nprint(os.listdir(\"..\/input\"))\n\nimport matplotlib.pylab as plt\nplt.style.use('fivethirtyeight')\n%matplotlib inline\nimport seaborn as sns\nsns.set(style=\"ticks\")\nsns.set(rc={'figure.figsize':(15,10)})","86fcfe1a":"wh = pd.read_csv('..\/input\/who-suicide-statistics\/who_suicide_statistics.csv')","eec4ea18":"wh.info()","08181931":"wh.dropna(inplace=True)","a635ebf8":"wh.info()","cd1f5a11":"wh.columns","a9f61f52":"#https:\/\/www.kaggle.com\/kikexclusive\/curiosity-didn-t-kill-the-cat-all-in-one\nfrom IPython.display import display, HTML\ndisplay(wh.describe(include=\"all\").T)","2807c970":"sns.set(style=\"dark\")\nsns.set(rc={'figure.figsize':(15,10)})\nax=sns.regplot(data=wh, x='year', y='suicides_no', x_jitter=0.2, order=4, color='r')\nax.set_yscale('log')","04956ca0":"wh.groupby(['country','age']).suicides_no.sum().nlargest(10).plot(kind='barh')","b097cbf2":"#https:\/\/seaborn.pydata.org\/generated\/seaborn.barplot.html\n#https:\/\/www.kaggle.com\/nadintamer\/titanic-survival-predictions-beginner\nfrom numpy import median\nax = sns.catplot(x=\"sex\", y=\"suicides_no\",col='age', data=wh, estimator=median,height=4, aspect=.7,kind='bar')","e298af68":"wh['age'] = wh.age.astype(pd.api.types.CategoricalDtype(categories = ['5-14 years','15-24 years','25-34 years','35-54 years','55-74 years','75+ years']))","80e8d5ad":"wh.pivot_table(index='age',columns='sex',values='suicides_no', aggfunc='sum').plot(kind='barh')","04a2cadb":"wh.groupby(by=['age','sex'])['suicides_no'].sum().unstack().plot(kind='bar',stacked=True)","419a80f8":"wh.groupby(by=['age','sex'])['suicides_no'].sum().unstack().reset_index().melt(id_vars='age')","cb26bc2c":"from numpy import sum\nsns.catplot('age','suicides_no',hue='sex',col='year',data=wh,kind='bar',col_wrap=3,estimator=sum)","61bc2199":"#wh.groupby(['year','age']).suicides_no.sum().reset_index()","e8371b35":"#https:\/\/seaborn.pydata.org\/generated\/seaborn.lineplot.html\nfrom matplotlib.colors import NoNorm\ndf = wh.groupby(['year','age']).suicides_no.sum().reset_index()\ndf['age'] = df.age.astype(pd.api.types.CategoricalDtype(categories = ['5-14 years','15-24 years','25-34 years','35-54 years','55-74 years','75+ years']))\nsns.set(rc={'figure.figsize':(15,10)})\nsns.lineplot('year','suicides_no',hue='age',style='age',data=df,hue_norm=NoNorm(),palette=\"ch:2.5,1.9\",sort=False)","1314d35b":"#wh.groupby(['year']).suicides_no.sum().plot()","586a40a3":"#https:\/\/seaborn.pydata.org\/examples\/faceted_histogram.html\nimport numpy as np\nimport seaborn as sns\nimport matplotlib.pyplot as plt\nsns.set(style=\"dark\")\ng = sns.FacetGrid(wh, row=\"sex\", col=\"age\", margin_titles=True)\ng.map(plt.scatter, \"suicides_no\",\"population\", edgecolor=\"w\")","e0adf071":"#https:\/\/seaborn.pydata.org\/examples\/faceted_histogram.html\nimport numpy as np\nimport seaborn as sns\nimport matplotlib.pyplot as plt\nsns.set(style=\"darkgrid\")\n\ng = sns.FacetGrid(wh, row=\"year\", col=\"age\",hue='sex',margin_titles=True)\n\n(g.map(plt.scatter, \"suicides_no\",\"population\", edgecolor=\"w\")).add_legend()","837b7905":"\ng = sns.FacetGrid(wh.groupby(['country','year']).suicides_no.sum().reset_index(), col=\"country\", col_wrap=3)\ng = g.map(plt.plot, \"year\", \"suicides_no\", marker=\".\")","9859269d":"p = pd.crosstab(index=wh.country,columns=wh.year,values=wh.suicides_no,aggfunc='sum')\n\nsns.heatmap(p.loc[:,2011:2015].sort_values(2015, ascending=False).dropna().head(5),annot=True)\n\npp = pd.crosstab(index=wh.country,columns=wh.year,values=wh.population,aggfunc='sum')\n\npdivpp = p\/pp*10000\n\n#sns.heatmap(pdivpp.loc[:,2006:2015].sort_values(2015, ascending=False).dropna().head(5),annot=True)\n\n","3e408be2":"wh.groupby(by=['country'])['suicides_no'].sum().reset_index().sort_values(['suicides_no'],ascending=True).tail(15).plot(x='country',y='suicides_no',kind='barh')","15f70bf3":"happiness = pd.read_csv('..\/input\/world-happiness\/2015.csv')","f59b0086":"#happiness[['Happiness Score','Region']].groupby('Region')['Happiness Score'].median().reset_index().sort_values('Happiness Score')","0f5b9feb":"happiness.columns","4957ea04":"#sns.set(rc={'figure.figsize':(15,15)})\n\n#g = sns.FacetGrid(happiness, col=\"Region\",  margin_titles=True, col_wrap=3)\n\n#(g.map(plt.scatter, \"Generosity\",\"Happiness Score\", edgecolor=\"w\")).add_legend()\n#g = sns.lmplot(\"Freedom\",\"Generosity\",aspect=.4,hue='Region',col='Region',col_wrap=2, data=happiness)\n#g.fig.set_size_inches(15,15)\n","29104798":"happiness[happiness.Country.str.contains(\"Russia\")]\ncountries = ['Russia','United States','Japan','France','Ukraine','Germany','South Korea',\n'Brazil','Poland','United Kingdom','Italy','Hungary','Thailand','Canada','Kazakhstan']\nhappiness_dr = happiness[happiness.Country.isin(countries)].drop('Region',axis=1).set_index('Country')\nsns.set(rc={'figure.figsize':(15,15)})\nhappiness_dr['Happiness Rank'].plot(kind='barh', title='Happiness Rank 2015 for countries listed above')\n\n\n\n#happiness[happiness.Country.str.contains(\"Kazakhstan\")]\n#happiness[happiness.Country.isin(wh.groupby(by=['country'])['suicides_no'].sum().reset_index().sort_values(['suicides_no'],ascending=True).tail(15))]","6ff6efa3":"sns.set(rc={'figure.figsize':(10,10)})\n#g = sns.FacetGrid(happiness, col=\"Region\",  margin_titles=True, col_wrap=3)\n\n#(g.map(plt.scatter, \"Generosity\",\"Happiness Score\", edgecolor=\"w\")).add_legend()\nsns.scatterplot(\"Economy (GDP per Capita)\",\"Happiness Score\",hue='Region', data=happiness)","1501f999":"# from sklearn import preprocessing\n\n# x = happiness.values\n# min_max_scaler = preprocessing.MinMaxScaler()\n# x_scaled = min_max_scaler.fit_transform(x)\n# happiness_scaled = pd.DataFrame(x_scaled)\n# happiness_scaled.columns = happiness.columns\n# happiness_scaled.index = happiness.index\n# sns.set(rc={'figure.figsize':(15,30)})\n# happiness_scaled[['Family','Health (Life Expectancy)','Freedom','Generosity']].plot(kind='barh',title='Happiness data 2015')","23b9fded":"#wh.groupby(by=['year','country'])['suicides_no'].max().reset_index().sort_values(['suicides_no'],ascending=False).head(34)","ddc5bec2":"#wh.pivot_table(index='year',columns='sex',values='suicides_no', aggfunc='sum').plot(kind='barh')\nsns.set(rc={'figure.figsize':(10,7)})\nwh.pivot_table(index='year',columns='sex',values='suicides_no', aggfunc='sum').plot()","64fbc94e":"wh.groupby(by=['country'])['suicides_no'].sum().reset_index().sort_values(['suicides_no'],ascending=True).tail(15).country","e4455d03":"wh[wh.country.isin(wh.groupby(by=['country'])['suicides_no'].sum().reset_index().sort_values(['suicides_no'],ascending=True).tail(5).country)].groupby(by=['sex','country'])['suicides_no'].sum().unstack().plot(kind='bar',stacked=True)","6251950d":"#wh[wh.country.isin(wh.groupby(by=['country'])['suicides_no'].sum().reset_index().sort_values(['suicides_no'],ascending=True).tail(5).country)].groupby(by=['age','country'])['suicides_no'].sum().unstack().plot(kind='bar',stacked=True)","34b0bb94":"#https:\/\/stackoverflow.com\/questions\/12096252\/use-a-list-of-values-to-select-rows-from-a-pandas-dataframehttps:\/\/stackoverflow.com\/questions\/12096252\/use-a-list-of-values-to-select-rows-from-a-pandas-dataframe\n#wh[wh.country.isin(wh.groupby(by=['country'])['suicides_no'].sum().reset_index().sort_values(['suicides_no'],ascending=True).tail(5).country)].groupby(by=['year','country'])['suicides_no'].sum().unstack().plot()","bc9a714b":"#https:\/\/gist.github.com\/dela3499\/e159b388258b5f1a7a3bac42fc0179fd\nfrom bokeh.plotting import figure, output_file, show, ColumnDataSource\nfrom bokeh.models import HoverTool, CategoricalColorMapper\nfrom bokeh.io import output_notebook\n\noutput_notebook()\n\nsource = ColumnDataSource(\n        data=wh\n    )\n\nhover = HoverTool(\n        tooltips=[\n            (\"year\", \"@year\"),\n            (\"sex\", \"@sex\"),\n            (\"country\", \"@country\"),\n            (\"suicides_no\",\"@suicides_no\")\n        ]\n    )\n\np = figure(plot_width=700, plot_height=700, tools=[hover],\n           title=\"Mouse over the dots\")\n#https:\/\/www.kaggle.com\/kanncaa1\/visualization-bokeh-tutorial-part-1\n#https:\/\/github.com\/bokeh\/bokeh\/issues\/5112\nfactors = list(wh.sex.unique())\ncolors = [\"red\",\"green\"]\nmapper = CategoricalColorMapper(factors = factors,palette = colors)\np.circle('suicides_no', 'year', size=4, source=source,\n    legend='sex', fill_alpha=0.2, color = {\"field\":\"sex\",\"transform\":mapper})\n\nshow(p)","d1c08a43":"#https:\/\/gist.github.com\/dela3499\/e159b388258b5f1a7a3bac42fc0179fd\nfrom bokeh.plotting import figure, output_file, show, ColumnDataSource\nfrom bokeh.models import HoverTool, CategoricalColorMapper\nfrom bokeh.io import output_notebook\n\noutput_notebook()\n\nsource = ColumnDataSource(\n        data=wh\n    )\n\nhover = HoverTool(\n        tooltips=[\n            (\"year\", \"@year\"),\n            (\"sex\", \"@sex\"),\n            (\"country\", \"@country\"),\n            (\"suicides_no\",\"@suicides_no\")\n        ]\n    )\n\np = figure(plot_width=700, plot_height=700, tools=[hover],\n           title=\"Mouse over the dots\")\n#https:\/\/www.kaggle.com\/kanncaa1\/visualization-bokeh-tutorial-part-1\n#https:\/\/github.com\/bokeh\/bokeh\/issues\/5112\n#factors = list(wh.age.unique())\nfactors = ['5-14 years','15-24 years','25-34 years','35-54 years','55-74 years','75+ years']\ncolors = [\"deepskyblue\",\"maroon\",\"green\",\"peru\",\"greenyellow\",\"yellow\"]\nmapper = CategoricalColorMapper(factors = factors,palette = colors)\np.circle('suicides_no', 'year', size=4, source=source,\n    legend='age', fill_alpha=0.2, color = {\"field\":\"age\",\"transform\":mapper})\n\nshow(p)","1ddf33b6":"#wh.plot.scatter(x='population',y='suicides_no')\n#https:\/\/gist.github.com\/dela3499\/e159b388258b5f1a7a3bac42fc0179fd\nfrom bokeh.plotting import figure, output_file, show, ColumnDataSource\nfrom bokeh.models import HoverTool, CategoricalColorMapper\nfrom bokeh.io import output_notebook\n\noutput_notebook()\n\nsource = ColumnDataSource(\n        data=wh\n    )\n\n\nTooltips=[\n            (\"year\", \"@year\"),\n            (\"sex\", \"@sex\"),\n            (\"country\", \"@country\"),\n            (\"suicides_no\",\"@suicides_no\"),\n            (\"population\",\"@population\")\n        ]\np = figure(plot_width=700, plot_height=700,  tooltips=Tooltips,\n           title=\"Mouse over the dots\" )\n#https:\/\/www.kaggle.com\/kanncaa1\/visualization-bokeh-tutorial-part-1\n#https:\/\/github.com\/bokeh\/bokeh\/issues\/5112\nfactors = list(wh.sex.unique())\ncolors = [\"red\",\"green\"]\nmapper = CategoricalColorMapper(factors = factors,palette = colors)\np.circle('suicides_no', 'population', size=4, source=source,\n    legend='sex', fill_alpha=0.2, color = {\"field\":\"sex\",\"transform\":mapper})\n\nshow(p)","fb54186a":"#wh.plot.scatter(x='population',y='suicides_no')\n#https:\/\/gist.github.com\/dela3499\/e159b388258b5f1a7a3bac42fc0179fd\n'''from bokeh.plotting import figure, output_file, show, ColumnDataSource\nfrom bokeh.models import HoverTool, CategoricalColorMapper\nfrom bokeh.io import output_notebook\n\noutput_notebook()\n\nsource = ColumnDataSource(\n        data=wh[wh.suicides_no>0]\n    )\n\nhover = HoverTool(\n        tooltips=[\n            (\"year\", \"@year\"),\n            (\"sex\", \"@sex\"),\n            (\"country\", \"@country\"),\n            (\"suicides_no\",\"@suicides_no\"),\n            (\"population\",\"@population\")\n        ]\n    )\n\np = figure(plot_width=700, plot_height=700, tools=[hover],\n           title=\"Mouse over the dots\" ,y_axis_type=\"log\")\n#https:\/\/www.kaggle.com\/kanncaa1\/visualization-bokeh-tutorial-part-1\n#https:\/\/github.com\/bokeh\/bokeh\/issues\/5112\nfactors = list(wh.sex.unique())\ncolors = [\"red\",\"green\"]\nmapper = CategoricalColorMapper(factors = factors,palette = colors)\np.circle('suicides_no', 'population', size=4, source=source,\n    legend='sex', fill_alpha=0.2, color = {\"field\":\"sex\",\"transform\":mapper})\n\nshow(p)'''","c6039c3f":"#https:\/\/pythonspot.com\/3d-scatterplot\/\n#https:\/\/matplotlib.org\/gallery\/mplot3d\/scatter3d.html\nimport numpy as np\nimport matplotlib.pyplot as plt\nfrom mpl_toolkits.mplot3d import axes3d\nfrom sklearn.preprocessing import RobustScaler \n#https:\/\/www.kaggle.com\/janiobachmann\/credit-fraud-dealing-with-imbalanced-datasets\nrob_scaler = RobustScaler()\n\nwh['scaled_population'] = rob_scaler.fit_transform(wh['population'].values.reshape(-1,1))\nwh['scaled_suicides_no'] = rob_scaler.fit_transform(wh['suicides_no'].values.reshape(-1,1))\n \n# Create plot\nfig = plt.figure()\n#ax = fig.add_subplot(1, 1, 1)\n#ax = fig.gca(projection='3d')\nax = fig.add_subplot(111, projection='3d')\n#ax.set_xscale('log')\nwh = wh[wh.suicides_no>0]\nax.scatter(wh[wh.sex=='female'].scaled_population, wh[wh.sex=='female'].year, wh[wh.sex=='female'].scaled_suicides_no, alpha=0.2, c=\"red\", edgecolors='none', s=30, label=\"female\") \nax.scatter(wh[wh.sex=='male'].scaled_population, wh[wh.sex=='male'].year, wh[wh.sex=='male'].scaled_suicides_no, alpha=0.2, c=\"green\", edgecolors='none', s=30, label=\"male\")\n\n\n \nplt.title('Matplot 3d scatter plot')\nplt.legend(loc=2)\nplt.show()","02d34ff4":"#https:\/\/gist.github.com\/dela3499\/e159b388258b5f1a7a3bac42fc0179fd\n#https:\/\/bokeh.pydata.org\/en\/latest\/docs\/user_guide\/interaction\/legends.html#userguide-interaction-legends\nfrom bokeh.plotting import figure, output_file, show, ColumnDataSource\nfrom bokeh.models import HoverTool, CategoricalColorMapper\nfrom bokeh.io import output_notebook\n\noutput_notebook()\n\n\n\nhover = HoverTool(\n        tooltips=[\n            (\"year\", \"@year\"),\n            (\"sex\", \"@sex\"),\n            (\"country\", \"@country\"),\n            (\"suicides_no\",\"@suicides_no\")\n        ]\n    )\n\np = figure(plot_width=800, plot_height=700,  tools=[hover],\n           title=\"Click on Legend to hide an age category\")\n#https:\/\/www.kaggle.com\/kanncaa1\/visualization-bokeh-tutorial-part-1\n#https:\/\/github.com\/bokeh\/bokeh\/issues\/5112\n#factors = list(wh.age.unique())\nfactors = ['5-14 years','15-24 years','25-34 years','35-54 years','55-74 years','75+ years']\nsource0 = ColumnDataSource(\n        data=wh[wh.age==factors[0]]\n    )\nsource1 = ColumnDataSource(\n        data=wh[wh.age==factors[1]]\n    )\nsource2 = ColumnDataSource(\n        data=wh[wh.age==factors[2]]\n    )\nsource3 = ColumnDataSource(\n        data=wh[wh.age==factors[3]]\n    )\nsource4 = ColumnDataSource(\n        data=wh[wh.age==factors[4]]\n    )\nsource5 = ColumnDataSource(\n        data=wh[wh.age==factors[5]]\n    )\n\ncolors = [\"black\",\"sienna\",\"blue\",\"yellow\",\"darkgreen\",\"lightcoral\"]\nmapper = CategoricalColorMapper(factors = factors,palette = colors)\n#p.circle(x='suicides_no', y=jitter('year', width=0.6, range=p.y_range), source=source,\n#    legend='age', fill_alpha=0.2, color = {\"field\":\"age\",\"transform\":mapper})\n\n#p.circle(wh[wh.age==factors[0]].suicides_no, wh[wh.age==factors[0]].year, color=colors[0], alpha=0.8, legend=factors[0])\n#p.circle(wh[wh.age==factors[1]].suicides_no, wh[wh.age==factors[1]].year, color=colors[1], alpha=0.8, legend=factors[1])\n#p.circle(wh[wh.age==factors[2]].suicides_no, wh[wh.age==factors[2]].year, color=colors[2], alpha=0.8, legend=factors[2])\n#p.circle(wh[wh.age==factors[3]].suicides_no, wh[wh.age==factors[3]].year, color=colors[3], alpha=0.8, legend=factors[3])\n#p.circle(wh[wh.age==factors[4]].suicides_no, wh[wh.age==factors[4]].year, color=colors[4], alpha=0.8, legend=factors[4])\n#p.circle(wh[wh.age==factors[5]].suicides_no, wh[wh.age==factors[5]].year, color=colors[5], alpha=0.8, legend=factors[5])\n\n\n#p.circle(x='suicides_no', y=jitter('year', width=0.6, range=p.y_range), source=source0, color=colors[0], alpha=0.8, legend=factors[0])\n#p.circle(x='suicides_no', y=jitter('year', width=0.6, range=p.y_range), source=source1, color=colors[1], alpha=0.8, legend=factors[1])\n#p.circle(x='suicides_no', y=jitter('year', width=0.6, range=p.y_range), source=source2, color=colors[2], alpha=0.8, legend=factors[2])\n#p.circle(x='suicides_no', y=jitter('year', width=0.6, range=p.y_range), source=source3, color=colors[3], alpha=0.8, legend=factors[3])\n#p.circle(x='suicides_no', y=jitter('year', width=0.6, range=p.y_range), source=source4, color=colors[4], alpha=0.8, legend=factors[4])\n#p.circle(x='suicides_no', y=jitter('year', width=0.6, range=p.y_range), source=source5, color=colors[5], alpha=0.8, legend=factors[5])\n\np.circle(x='suicides_no',y = 'year', source=source0, color=colors[0], alpha=0.8, legend=factors[0])\np.circle(x='suicides_no',y =  'year', source=source1, color=colors[1], alpha=0.8, legend=factors[1])\np.circle(x='suicides_no',y =  'year', source=source2, color=colors[2], alpha=0.8, legend=factors[2])\np.circle(x='suicides_no',y =  'year', source=source3, color=colors[3], alpha=0.8, legend=factors[3])\np.circle(x='suicides_no',y =  'year', source=source4, color=colors[4], alpha=0.8, legend=factors[4])\np.circle(x='suicides_no',y =  'year', source=source5, color=colors[5], alpha=0.8, legend=factors[5])\n\n\np.legend.click_policy=\"hide\"\np.legend.location = \"bottom_center\"\np.xaxis.axis_label = 'Number of Suicides'\np.yaxis.axis_label = 'Year'\nshow(p)","f93692da":"#https:\/\/gist.github.com\/dela3499\/e159b388258b5f1a7a3bac42fc0179fd\nfrom bokeh.plotting import figure, output_file, show, ColumnDataSource\nfrom bokeh.models import HoverTool, CategoricalColorMapper, BoxZoomTool,ResetTool,PanTool,WheelZoomTool\nfrom bokeh.io import output_notebook\n\noutput_notebook()\n\nsource = ColumnDataSource(\n        data=wh\n    )\n\nhover = HoverTool(\n        tooltips=[\n            (\"year\", \"@year\"),\n            (\"sex\", \"@sex\"),\n            (\"country\", \"@country\"),\n            (\"suicides_no\",\"@suicides_no\")\n        ]\n    )\n\np = figure(plot_width=500, plot_height=500, tools=[hover],\n           title=\"Mouse over the dots\")\n#https:\/\/www.kaggle.com\/kanncaa1\/visualization-bokeh-tutorial-part-1\n#https:\/\/github.com\/bokeh\/bokeh\/issues\/5112\nfactors = list(wh.sex.unique())\ncolors = [\"red\",\"green\"]\nmapper = CategoricalColorMapper(factors = factors,palette = colors)\nfrom bokeh.transform import jitter\n\n\n\n\np.circle(x='scaled_suicides_no', y=jitter('year', width=0.6, range=p.y_range),  source=source, alpha=0.3)\n\n\np.x_range.range_padding = 0\np.ygrid.grid_line_color = None\n\n\n#p.circle('suicides_no', 'age', size=4, source=source,\n#    legend='sex', fill_alpha=0.2, color = {\"field\":\"sex\",\"transform\":mapper})\np.add_tools(PanTool())\np.add_tools(WheelZoomTool())\np.add_tools(BoxZoomTool())\np.add_tools(ResetTool())\nshow(p)","1102306e":"#https:\/\/gist.github.com\/dela3499\/e159b388258b5f1a7a3bac42fc0179fd\n'''from bokeh.plotting import figure, output_file, show, ColumnDataSource\nfrom bokeh.models import HoverTool, CategoricalColorMapper\nfrom bokeh.io import output_notebook\n\noutput_notebook()\n\nsourcef = ColumnDataSource(\n        data=wh[(wh.country=='Japan')&(wh.sex=='female')]\n    )\nsourcem = ColumnDataSource(\n        data=wh[(wh.country=='Japan')&(wh.sex=='male')]\n    )\nhover = HoverTool(\n        tooltips=[\n            (\"year\", \"@year\"),\n            (\"sex\", \"@sex\"),\n            (\"age\", \"@age\"),\n            (\"suicides_no\",\"@suicides_no\")\n        ]\n    )\n\np = figure(plot_width=800, plot_height=700, tools=[hover],\n           title=\"Plot for one country\")\n#https:\/\/www.kaggle.com\/kanncaa1\/visualization-bokeh-tutorial-part-1\n#https:\/\/github.com\/bokeh\/bokeh\/issues\/5112\nfactors = list(wh.sex.unique())\ncolors = [\"red\",\"green\"]\nmapper = CategoricalColorMapper(factors = factors,palette = colors)\nfrom bokeh.transform import jitter\n\n\np.circle(x='scaled_suicides_no', y=jitter('year', width=0.6, range=p.y_range),  color= 'red',source=sourcef, alpha=0.3,legend='sex')\np.circle(x='scaled_suicides_no', y=jitter('year', width=0.6, range=p.y_range),  color= 'green',source=sourcem, alpha=0.3,legend='sex')\n\n\np.x_range.range_padding = 0\np.ygrid.grid_line_color = None\n\n\n#p.circle('suicides_no', 'age', size=4, source=source,\n#    legend='sex', fill_alpha=0.2, color = {\"field\":\"sex\",\"transform\":mapper})\n\nshow(p)'''","48eb6b9a":"#https:\/\/python-graph-gallery.com\/20-basic-histogram-seaborn\/\nsns.set(rc={'figure.figsize':(8,8)})\nsns.distplot( wh.groupby('year')[\"suicides_no\"].max(), bins=20 )\n","3f158592":"#https:\/\/python-graph-gallery.com\/20-basic-histogram-seaborn\/\n#sns.set(rc={'figure.figsize':(8,8)})\n#sns.distplot( wh.groupby('year')[\"suicides_no\"].std(), bins=20 )","6536d627":"pd.options.display.max_rows = 200\n#wh.pivot_table(index='country',columns='year',values=['suicides_no'], aggfunc=['sum']).count()\npivot_table=wh.pivot_table(index='country',columns='year',values=['suicides_no'], aggfunc=['sum'])\npivot_table","5f426f1e":"#https:\/\/pandas.pydata.org\/pandas-docs\/stable\/generated\/pandas.Series.pct_change.html\npivot_table_pct_change = pivot_table.pct_change(axis='columns')\npivot_table_pct_change.columns = pivot_table_pct_change.columns.droplevel().droplevel()\npivot_table_pct_change","d362ea05":"#https:\/\/python-graph-gallery.com\/92-control-color-in-seaborn-heatmaps\/\n#https:\/\/seaborn.pydata.org\/generated\/seaborn.heatmap.html\n#https:\/\/stackoverflow.com\/questions\/39128856\/python-drop-row-if-two-columns-are-nan\n#https:\/\/stackoverflow.com\/questions\/48264613\/seaborn-heatmap-change-size-of-colorbar?rq=1\n#https:\/\/stackoverflow.com\/questions\/27037241\/changing-the-rotation-of-tick-labels-in-seaborn-heatmap\nsns.set(rc={'figure.figsize':(23,74)})\nsns.heatmap(pivot_table_pct_change.dropna(axis=0,thresh=10), cmap=\"YlGnBu\",robust=True,cbar_kws={\"shrink\": 0.5})\nplt.xticks(rotation=90) \nplt.show()","78cf85b5":"#pivot_table_pct_change.max()","f97ab0c4":"pivot_table_pct_change.T.max().nlargest(5)","02c7118b":"\n#pivot_table.T.count().sort_values(ascending=False)","1d063de7":"country_data = pivot_table.T.reset_index()\n","e7925c82":"\ncountry_data.set_index('year', inplace=True)\n","7aefb6df":"#country_data.columns","73a83893":"cols_to_drop_pivot = [0,1]\ncountry_data.drop(country_data.columns[cols_to_drop_pivot], axis=1,inplace=True)","cf407c79":"sns.set(rc={'figure.figsize':(10,10)})\ncountry_data['Hungary'].plot(title='Year-wise suicide no. for a country')","5eb02926":"pivot_table_pop =wh.pivot_table(index='country',columns='year',values=['population'], aggfunc=['sum'])\npivot_table_pop","d5468a15":"population_data = pivot_table_pop.T.reset_index()\npopulation_data.set_index('year', inplace=True)\ncols_to_drop_pivot = [0,1]\npopulation_data.drop(population_data.columns[cols_to_drop_pivot], axis=1,inplace=True)","7b704280":"suicide_rate_per_lakh = country_data\/population_data*100000","12d60b17":"suicide_rate_per_lakh_melt = suicide_rate_per_lakh.reset_index().melt(id_vars='year')\n#suicide_rate_per_lakh_melt","8f4e4967":"suicide_rate_per_lakh_melt.iloc[suicide_rate_per_lakh_melt.groupby('year').value.idxmax()]","74336ba8":"suicide_rate_per_lakh_T = suicide_rate_per_lakh.T\n","be0016be":"#suicide_rate_per_lakh_T.describe()","fba2f000":"#suicide_rate_per_lakh_T.max()","726f19dc":"#suicide_rate_per_lakh_T.iloc[:,-2].idxmax()\n#2015","c2f27dcd":"suicide_socio_economic = pd.read_csv('..\/input\/suicide-rates-overview-1985-to-2016\/master.csv')","8fa44fa3":"suicide_socio_economic.columns","df56d6b9":"sns.set(style=\"darkgrid\")\nsns.set(rc={'figure.figsize':(15,10)})\nax=sns.regplot(data=suicide_socio_economic, x='year', y='gdp_per_capita ($)', x_jitter=0.2, order=4)\nax.set_yscale('log')","a238780d":"sns.set(style=\"darkgrid\")\nsns.set(rc={'figure.figsize':(15,10)})\nax=sns.regplot(data=suicide_socio_economic, x='year', y='gdp_per_capita ($)', x_estimator=np.median, x_jitter=0.2, order=4)\nax.set_yscale('log')\n","76aa8dff":"#suicide_socio_economic.info()","eb7adea6":"suicide_socio_economic.year.max()","db0e7b0f":"sns.set(style=\"darkgrid\")\nsns.set(rc={'figure.figsize':(15,10)})\n#ax=sns.regplot(data=suicide_socio_economic, x='gdp_per_capita ($)', y='suicides\/100k pop', x_estimator=np.median, x_jitter=0.2, order=4, x_bins=5)\nax=sns.regplot(data=suicide_socio_economic, x='gdp_per_capita ($)', y='suicides\/100k pop', x_jitter=0.2, order=4, x_bins=8)\n#ax.set_yscale('log')\n#ax.set_xscale('log')","6e76ce87":"sns.set(style=\"darkgrid\")\nsns.set(rc={'figure.figsize':(15,10)})\n#g = sns.FacetGrid(suicide_socio_economic, col=\"year\", margin_titles=True,col_wrap=2, aspect=2, height=4)\ng = sns.FacetGrid(suicide_socio_economic, col=\"year\", margin_titles=True,col_wrap=2, aspect=2, sharex=False, sharey=False)\n#g.map(sns.regplot, \"gdp_per_capita ($)\", \"suicides\/100k pop\", color=\".3\", x_jitter=.2, order=4, fit_reg=False);\n#g.map(sns.regplot, \"gdp_per_capita ($)\", \"suicides\/100k pop\", color=\".3\", x_jitter=.2, fit_reg=False).set(yscale='log', xscale='log',xlim=(5, None), ylim=(-3, None))\n#g.map(sns.regplot, \"gdp_per_capita ($)\", \"suicides\/100k pop\", color=\".3\", x_jitter=.2, fit_reg=False, x_bins=8).set(yscale='log', xscale='log')\ng.map(sns.regplot, \"gdp_per_capita ($)\", \"suicides\/100k pop\", color=\".3\", x_jitter=.2, fit_reg=False, x_bins=8)\n","ddd0ad00":"#https:\/\/stackoverflow.com\/questions\/26414913\/normalize-columns-of-pandas-data-frame\nfrom sklearn import preprocessing\nsuicide_socio_economic_mean= suicide_socio_economic.pivot_table(['suicides\/100k pop','gdp_per_capita ($)'],\n               ['year'], aggfunc='mean')\nx = suicide_socio_economic_mean.values\nmin_max_scaler = preprocessing.MinMaxScaler()\nx_scaled = min_max_scaler.fit_transform(x)\nsuicide_socio_economic_mean_scaled = pd.DataFrame(x_scaled)\nsuicide_socio_economic_mean_scaled.columns = suicide_socio_economic_mean.columns\nsuicide_socio_economic_mean_scaled.index = suicide_socio_economic_mean.index","bbc6565d":"suicide_socio_economic_mean_scaled.plot()","a98c78f7":"suicide_socio_economic['suicides\/100k pop'].corr(suicide_socio_economic['gdp_per_capita ($)'])","af5423c4":"suicide_socio_economic['gdp_per_capita ($)'].describe()","19e121c9":"#https:\/\/pythonspot.com\/3d-scatterplot\/\n#https:\/\/matplotlib.org\/gallery\/mplot3d\/scatter3d.html\nimport numpy as np\nimport matplotlib.pyplot as plt\nfrom mpl_toolkits.mplot3d import axes3d\n#https:\/\/www.kaggle.com\/janiobachmann\/credit-fraud-dealing-with-imbalanced-datasets\n \n# Create plot\nfig = plt.figure()\n#ax = fig.add_subplot(1, 1, 1)\n#ax = fig.gca(projection='3d')\nax = fig.add_subplot(111, projection='3d')\nax.scatter(suicide_socio_economic['gdp_per_capita ($)'], suicide_socio_economic.year, suicide_socio_economic['suicides\/100k pop'], alpha=0.2, c=\"red\", edgecolors='none', s=30, label=\"female\") \nplt.title('gdp_per_capita ($), year, suicides\/100k pop')\nplt.legend(loc=2)\nplt.show()","c49fb668":"#https:\/\/gist.github.com\/dela3499\/e159b388258b5f1a7a3bac42fc0179fd\nfrom bokeh.plotting import figure, output_file, show, ColumnDataSource\nfrom bokeh.models import HoverTool, CategoricalColorMapper, BoxZoomTool,ResetTool,PanTool,WheelZoomTool\nfrom bokeh.io import output_notebook\n\noutput_notebook()\n\nsource = ColumnDataSource(\n        data=suicide_socio_economic\n    )\n\nhover = HoverTool(\n        tooltips=[\n            (\"year\", \"@year\"),\n            (\"sex\", \"@sex\"),\n            (\"country\", \"@country\"),\n            (\"suicides_no\",\"@suicides_no\"),\n            (\"suicides\/100k pop\",\"@{suicides\/100k pop}\"),\n            (\"gdp_per_capita ($)\",\"@{gdp_per_capita ($)}\")\n        ]\n    )\n\np = figure(plot_width=500, plot_height=500, tools=[hover],\n           title=\"Suicide and economic data\")\n#https:\/\/www.kaggle.com\/kanncaa1\/visualization-bokeh-tutorial-part-1\n#https:\/\/github.com\/bokeh\/bokeh\/issues\/5112\n#factors = list(suicide_socio_economic.sex.unique())\n#colors = [\"red\",\"green\"]\n#mapper = CategoricalColorMapper(factors = factors,palette = colors)\nfrom bokeh.transform import jitter\n\n\n\n\np.circle(x='suicides_no', y=jitter('year', width=0.6, range=p.y_range),fill_color=\"orange\",  source=source, alpha=0.3)\n\n\np.x_range.range_padding = 0\np.ygrid.grid_line_color = None\n\n\n#p.circle('suicides_no', 'age', size=4, source=source,\n#    legend='sex', fill_alpha=0.2, color = {\"field\":\"sex\",\"transform\":mapper})\np.add_tools(PanTool())\np.add_tools(WheelZoomTool())\np.add_tools(BoxZoomTool())\np.add_tools(ResetTool())\nshow(p)","838ad503":"health = pd.read_csv('..\/input\/health-nutrition-and-population-statistics\/data.csv')\nhealth.head()\n#health['Indicator Name'].describe()","78be4117":"#health['Indicator Name'].value_counts()","eaac26b9":"pd.options.display.max_rows = 200\n#health['Indicator Name'].value_counts()\n#health.info()\n#health.describe().T\n#health.columns\n\nhealth[health['Indicator Name'].isin(['Birth rate, crude (per 1,000 people)'])].groupby('Indicator Name').mean().loc[:, '1985':'2015'].T.plot()\n#health[health['Indicator Name'].isin(['Labor force, female (% of total labor force)'])].dropna(axis=1)\n#health.head()\n#Literacy rate, adult male (% of males ages 15 and above) \n#Literacy rate, adult female (% of females ages 15 and above)","ba551e3f":"health[health['Indicator Name'].isin(['Births attended by skilled health staff (% of total)'])].groupby('Indicator Name').mean().loc[:, '1985':'2015'].T.plot()\n#health.groupby('Indicator Name').mean().loc[:, '1985':'2015']\n","72ca2e0a":"health[health['Indicator Name'].isin(['AIDS estimated deaths (UNAIDS estimates)'])].groupby('Indicator Name').mean().loc[:, '1985':'2015'].T.plot()\n","07c00c48":"health[health['Indicator Name'].isin(['Prevalence of overweight (% of children under 5)'])].groupby('Indicator Name').mean().loc[:, '1985':'2015'].T.plot()\n","7981debd":"health[health['Indicator Name'].isin(['Public spending on education, total (% of GDP)'])].groupby('Indicator Name').mean().loc[:, '1985':'2015'].T.plot()\n","8f4b8c3d":"#health.groupby('Indicator Name').mean().loc[:, '1985':'2015']","3286edb4":"human = pd.read_csv('..\/input\/the-human-freedom-index\/hfi_cc_2018.csv')\nhuman.head()","9819d728":"human.columns[-20:]","a17c6228":"human[human['year']==2016].iloc[human[human['year']==2016].hf_score.idxmax()]","9cf45ab0":"wh[wh.country=='New Zealand'].groupby('year').sum()","46c0634e":"human[human.countries=='New Zealand'].sort_values('year')[['year','hf_score']]","996ae769":"g = sns.FacetGrid(human[['countries','year','hf_score']], col=\"countries\", col_wrap=3)\ng = g.map(plt.plot, \"year\", \"hf_score\", marker=\".\")","2cbc635f":"sns.set(style=\"darkgrid\")\nsns.set(rc={'figure.figsize':(15,10)})\nax=sns.regplot(data=human, x='year', y='hf_score', x_jitter=0.2, order=3)\n#ax.set_yscale('log')","4d17d181":"sns.set(style=\"darkgrid\")\nsns.set(rc={'figure.figsize':(15,10)})\nax=sns.regplot(data=human, x='year', y='hf_score', x_jitter=0.2, order=3, x_estimator=np.median)","f72a6c0f":"mtech = pd.read_csv('..\/input\/mental-health-in-tech-survey\/survey.csv')","eeaa1313":"#mtech.columns\n\n# https:\/\/www.kaggle.com\/osmi\/mental-health-in-tech-survey\n\n\n# * family_history - Do you have a family history of mental illness?\n# * treatment - Have you sought treatment for a mental health condition?\n# * work_interfere - If you have a mental health condition, do you feel that it interferes with your work?\n# * remote_work - Do you work remotely (outside of an office) at least 50% of the time?\n# * tech_company - Is your employer primarily a tech company\/organization?\n# * benefits - Does your employer provide mental health benefits?\n# * care_options - Do you know the options for mental health care your employer provides?\n# * wellness_program - Has your employer ever discussed mental health as part of an employee wellness program?\n# * seek_help - Does your employer provide resources to learn more about mental health issues and how to seek help?\n# * anonymity - Is your anonymity protected if you choose to take advantage of mental health or substance abuse treatment resources?\n# * leave - How easy is it for you to take medical leave for a mental health condition?\n# * mental_health_consequence - Do you think that discussing a mental health issue with your employer would have negative consequences?\n# * phys_health_consequence - Do you think that discussing a physical health issue with your employer would have negative consequences?\n# * coworkers - Would you be willing to discuss a mental health issue with your coworkers?\n# * supervisor - Would you be willing to discuss a mental health issue with your direct supervisor(s)?\n# * mental_health_interview - Would you bring up a mental health issue with a potential employer in an interview?\n# * phys_health_interview - Would you bring up a physical health issue with a potential employer in an interview?\n# * mental_vs_physical - Do you feel that your employer takes mental health as seriously as physical health?\n# * obs_consequence - Have you heard of or observed negative consequences for coworkers with mental health conditions in your workplace?","9f00a7eb":"mtech.describe(include='all')","bb299e07":"sns.catplot(x='self_employed', hue='remote_work', col='tech_company', kind='count', data=mtech)","5d0b97e3":"sns.catplot(x='anonymity', hue='leave', col='supervisor', row='coworkers', kind='count', data=mtech)","ed3b536f":"sns.catplot(x='benefits', hue='treatment', col='wellness_program', row='care_options',kind='count', data=mtech)","f80022dd":"sns.catplot(x='seek_help', hue='mental_health_consequence', col='treatment', row='family_history', kind='count', data=mtech)","6d0d96ff":"Referred \n\n* https:\/\/www.kaggle.com\/lahanasm\/un-historical-transitional-justice-analysis\n* https:\/\/www.kaggle.com\/kikexclusive\/curiosity-didn-t-kill-the-cat-all-in-one\n* https:\/\/gist.github.com\/dela3499\/e159b388258b5f1a7a3bac42fc0179fd\n* https:\/\/www.kaggle.com\/kanncaa1\/visualization-bokeh-tutorial-part-1\n* https:\/\/github.com\/bokeh\/bokeh\/issues\/5112\n* https:\/\/pythonspot.com\/3d-scatterplot\/\n* https:\/\/matplotlib.org\/gallery\/mplot3d\/scatter3d.html\n* https:\/\/www.kaggle.com\/janiobachmann\/credit-fraud-dealing-with-imbalanced-datasets\n* https:\/\/python-graph-gallery.com\/20-basic-histogram-seaborn\/\n* https:\/\/bokeh.pydata.org\/en\/latest\/docs\/user_guide\/interaction\/legends.html#userguide-interaction-legends\n* https:\/\/bokeh.pydata.org\/en\/latest\/docs\/user_guide\/tools.html\n* https:\/\/pandas.pydata.org\/pandas-docs\/stable\/options.html\n* https:\/\/pandas.pydata.org\/pandas-docs\/stable\/generated\/pandas.Series.pct_change.html\n* https:\/\/stackoverflow.com\/questions\/26414913\/normalize-columns-of-pandas-data-frame\n* https:\/\/stackoverflow.com\/questions\/42579908\/use-corr-to-get-the-correlation-between-two-columns\n* https:\/\/www.kaggle.com\/rblcoder\/2018-kaggle-survey-eda-platforms-tools-and-more\n* https:\/\/stackoverflow.com\/questions\/31467655\/python-seaborn-lmplot-regplot-for-y-log-scale-fit","44e12c1f":"* seek_help - Does your employer provide resources to learn more about mental health issues and how to seek help?\n* mental_health_consequence - Do you think that discussing a mental health issue with your employer would have negative consequences?\n* family_history - Do you have a family history of mental illness?\n* treatment - Have you sought treatment for a mental health condition?\n","487f9fc3":"* self_employed - Are you self-employed?\n* remote_work - Do you work remotely (outside of an office) at least 50% of the time?\n* tech_company - Is your employer primarily a tech company\/organization?","c8119902":"* treatment - Have you sought treatment for a mental health condition?\n* benefits - Does your employer provide mental health benefits?\n* care_options - Do you know the options for mental health care your employer provides?\n* wellness_program - Has your employer ever discussed mental health as part of an employee wellness program?\n","e3f04f28":"* anonymity - Is your anonymity protected if you choose to take advantage of mental health or substance abuse treatment resources?\n* leave - How easy is it for you to take medical leave for a mental health condition?\n* coworkers - Would you be willing to discuss a mental health issue with your coworkers?\n* supervisor - Would you be willing to discuss a mental health issue with your direct supervisor(s)?"}}