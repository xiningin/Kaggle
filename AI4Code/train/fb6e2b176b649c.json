{"cell_type":{"8a3219a1":"code","8cce4828":"code","0b68e66a":"code","4d17a843":"code","6fbd9df5":"code","e5b9e6a1":"code","8e2ab31c":"code","58a698ef":"markdown","9ea81846":"markdown"},"source":{"8a3219a1":"import numpy as np\nimport pandas as pd\nimport matplotlib.pyplot as plt\nimport seaborn as sns\nfrom pathlib import Path","8cce4828":"TRAIN_DIR = Path('..\/input\/mlb-pdef-train-dataset')\nBASE_DIR = Path('..\/input\/mlb-player-digital-engagement-forecasting')\ntargets = pd.read_pickle(TRAIN_DIR \/ 'nextDayPlayerEngagement_train.pkl')\nplayers = pd.read_csv(BASE_DIR \/ 'players.csv')","0b68e66a":"players['DOB'] = pd.to_datetime(players['DOB'],\n                                format = '%Y-%m-%d')\n\ntargets['date'] = pd.to_datetime(targets['date'],\n                                format = '%Y%m%d')\ntargets['year'] = targets['date'].dt.year\n\n\nplayers_target = pd.merge(targets,\n                          players,\n                          on = 'playerId',\n                          how = 'left')\n\nplayers_target['PLAYER_AGE'] = (players_target['date'] - pd.to_datetime(players_target['DOB'])).dt.days\/365","4d17a843":"mean=np.ceil(players_target['PLAYER_AGE'].mean())\nmedian=np.ceil(players_target['PLAYER_AGE'].median())","6fbd9df5":"plt.figure(figsize=(10, 5))\nsns.set_style('white')\nhist_plot = sns.histplot(players_target['PLAYER_AGE'], )\nhist_plot.axvline(mean, color='r', linestyle='--', linewidth = 4, label = f'mean-{mean}')\nhist_plot.axvline(median, color='g', linestyle='-', linewidth = 4, label = f'median-{median}')\nplt.suptitle(\"Players Age Distribution\")\nplt.legend()","e5b9e6a1":"players_target['PLAYER_AGE'] = round(players_target['PLAYER_AGE']).astype('int')\nfig, axs = plt.subplots(4,2, figsize = (20, 12))\nsns.set_style('white')\nsns.set(font_scale = 1)\ni = 0\nfor target in ['target1', 'target2', 'target3', 'target4']:\n    target_median = players_target.groupby('PLAYER_AGE')[target].agg(['median', 'sum']).reset_index()   \n    sns.set_style('white')\n    bar_plot = sns.barplot(ax=axs[i, 0], x = target_median['PLAYER_AGE'], y = target_median['median'])\n    axs[i, 0].set(ylabel = f\"{target} \"+ \"MEDIAN\")\n    sns.barplot(ax=axs[i, 1], x = target_median['PLAYER_AGE'], y = target_median['sum'])\n    axs[i, 1].set(ylabel = f\"{target} \"+ \"SUM\")\n    i = i + 1\n    plt.suptitle(\"Player Age vs Target Median\/Sum\", y = 1.03)\n    plt.tight_layout()","8e2ab31c":"print(\"Players making more noise\")\nfor name in players_target[players_target['PLAYER_AGE'] >= 45]['playerName'].unique():\n    print(name)","58a698ef":"### Other than those players above, rest of the age groups does not seem interesting, becase the differences in medians are not significant by visual inspection, and sums have similar distribution of distribution of age.","9ea81846":"### Short analysis to see if age has any impact on the Social Media noise a Player generates"}}