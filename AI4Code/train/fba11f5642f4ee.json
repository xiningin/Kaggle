{"cell_type":{"b659db7c":"code","22501abd":"code","4f178563":"code","fc09a493":"code","16bff607":"code","7bf3c6e3":"code","8be02520":"code","ac87d274":"code","d3c8f08b":"markdown","c8657ddd":"markdown","ee6aaa2f":"markdown"},"source":{"b659db7c":"import os\nimport json\nimport glob\nimport random\nimport collections\nimport numpy as np\nimport pandas as pd\nimport pydicom\nfrom pydicom.pixel_data_handlers.util import apply_voi_lut\nimport cv2\nimport matplotlib.pyplot as plt\nimport seaborn as sns\nfrom matplotlib import animation, rc\nrc('animation', html='jshtml')\nfrom tqdm import tqdm","22501abd":"#Code by stpete_ishii https:\/\/www.kaggle.com\/stpeteishii\/siim-acr-dicom-slide-show\/notebook?select=stage_2_images\n\nscans = !ls ..\/input\/rsna-miccai-brain-tumor-radiogenomic-classification\/train\/00688\/T2w\/ -d\nprint(len(scans))\nprint(scans[0])","4f178563":"#Code by stpete_ishii https:\/\/www.kaggle.com\/stpeteishii\/siim-acr-dicom-slide-show\/notebook?select=stage_2_images\n\nfiles=os.listdir('..\/input\/rsna-miccai-brain-tumor-radiogenomic-classification\/train\/00688\/T2w')\nprint(len(files))\nn=len(files)\nN=[]\nfor i in range(n\/\/10):\n    N+=[i*10]","fc09a493":"#Code by stpete_ishii https:\/\/www.kaggle.com\/stpeteishii\/siim-acr-dicom-slide-show\/notebook?select=stage_2_images\n\n\ndef load_dicom(path):\n    dicom=pydicom.read_file(path,force=True)\n    data=dicom.pixel_array\n    data=data-np.min(data)\n    if np.max(data) != 0:\n        data=data\/np.max(data)\n    data=(data*255).astype(np.uint8)\n    return data","16bff607":"#Code by stpete_ishii https:\/\/www.kaggle.com\/stpeteishii\/siim-acr-dicom-slide-show\/notebook?select=stage_2_images\n\ndef load_dicom_line(path):\n    t_paths = sorted(\n        glob.glob(os.path.join(path,\"*\")), \n        key=lambda x: x[:-4].split(\"_\")[-1],\n    )\n    images = []\n    for filename in tqdm(np.array(t_paths)[N]):\n        data = load_dicom(filename)\n        if data.max() == 0:\n            continue\n        images.append(data)\n        \n    return images","7bf3c6e3":"#Code by stpete_ishii https:\/\/www.kaggle.com\/stpeteishii\/siim-acr-dicom-slide-show\/notebook?select=stage_2_images\n\ndef create_animation(ims):\n    fig=plt.figure(figsize=(7,7))\n    plt.axis('off')\n    im=plt.imshow(ims[0],cmap=\"gray\")\n\n    def animate_func(i):\n        im.set_array(ims[i])\n        return [im]\n\n    return animation.FuncAnimation(fig, animate_func, frames=len(ims), interval=1000)","8be02520":"images = load_dicom_line(scans[0])","ac87d274":"#Code by stpete_ishii https:\/\/www.kaggle.com\/stpeteishii\/siim-acr-dicom-slide-show\/notebook?select=stage_2_images\n\ncreate_animation(images)","d3c8f08b":"#Code by stpete_ishii https:\/\/www.kaggle.com\/stpeteishii\/siim-acr-dicom-slide-show\/notebook?select=stage_2_images","c8657ddd":"#Is that a Homer Simpson's Brain MRI scan? \n\n![](https:\/\/slideplayer.com\/7099373\/24\/images\/slide_1.jpg)slideplayer.com","ee6aaa2f":"#Thank you stpete_ishii for the script  https:\/\/www.kaggle.com\/stpeteishii\/siim-acr-dicom-slide-show\/notebook?select=stage_2_images"}}