{"cell_type":{"46ea9fdf":"code","e7b96ea4":"code","9dd08cbd":"code","d8ca3984":"code","b645f6d1":"code","1578036f":"code","e9a8c310":"code","00ff91ed":"code","2c977f13":"code","8b3a7d91":"code","5930adde":"code","29dfd682":"code","e2f57d83":"code","bac075f8":"code","9343ef6f":"code","3c98f7a2":"code","6ef5665e":"code","584a9e99":"code","c4c7409a":"code","d8d44f82":"code","ab62c5ae":"code","601cb0df":"code","c563639d":"code","898c9b14":"code","75a8f3e8":"code","6f61d105":"code","cf0d03cc":"code","6d204bfe":"markdown","fc4c58a7":"markdown","fdbb3ca8":"markdown","ee2233f6":"markdown","1add1cb3":"markdown","0f47367a":"markdown","00787954":"markdown","746ab0d7":"markdown","af22caa3":"markdown","4fd0bb10":"markdown","760e0395":"markdown","3dedfb23":"markdown","96fcb31a":"markdown","c9fe59b2":"markdown"},"source":{"46ea9fdf":"import numpy as np \nimport pandas as pd\nimport matplotlib.pyplot as plt\nimport seaborn as sns\nsns.set()\nimport os\nfor dirname, _, filenames in os.walk('\/kaggle\/input'):\n    for filename in filenames:\n        print(os.path.join(dirname, filename))","e7b96ea4":"#reading the data\nhourly = pd.read_csv('\/kaggle\/input\/pharma-sales-data\/saleshourly.csv')\ndaily = pd.read_csv('\/kaggle\/input\/pharma-sales-data\/salesdaily.csv')\nweekly = pd.read_csv('\/kaggle\/input\/pharma-sales-data\/salesweekly.csv')\nmonthly = pd.read_csv('\/kaggle\/input\/pharma-sales-data\/salesmonthly.csv')","9dd08cbd":"#function to print shape of a given data\ndef print_shape(data):\n    print('Rows : ',data.shape[0])\n    print('Columns : ',data.shape[1])","d8ca3984":"print_shape(hourly)\nprint_shape(daily)\nprint_shape(weekly)\nprint_shape(monthly)","b645f6d1":"hourly.head(2)","1578036f":"daily.head(2)","e9a8c310":"weekly.head(2)","00ff91ed":"monthly.head(2)","2c977f13":"#copy the data\nhourly_original = hourly.copy()\ndaily_original = daily.copy()\nweekly_original = weekly.copy()\nmonthly_original = monthly.copy()","8b3a7d91":"#converting datatype of dates from object to Datetime\nmonthly['datum'] = pd.to_datetime(monthly['datum'], format= '%Y-%m-%d')\nweekly['datum'] = pd.to_datetime(weekly['datum'], format= '%m\/%d\/%Y')\ndaily['datum'] = pd.to_datetime(daily['datum'], format= '%m\/%d\/%Y')\nhourly['datum'] = pd.to_datetime(hourly['datum'], format= '%m\/%d\/%Y %H:%M')","5930adde":"#import datetime for dates and time realted calculations\nimport datetime as dt","29dfd682":"#extracting year from dates\nmonthly['year'] = monthly['datum'].dt.year","e2f57d83":"#extracting month from dates\nmonthly['month'] = monthly['datum'].dt.month","bac075f8":"#extracting day from dates\nmonthly['day'] = monthly['datum'].dt.day","9343ef6f":"#set index equal to the dates which will help us in visualising the time series\nmonthly.set_index(monthly['datum'], inplace= True)","3c98f7a2":"monthly.head(2)","6ef5665e":"#define a function to plot yearly sales of every category of drug.\ndef plot_yearly_sales(column):\n    monthly.groupby('year')[column].mean().plot.bar()#calculating yearly sales using groupby\n    plt.title(f'Yearly sales of {column}')\n    plt.xlabel('Year')\n    plt.ylabel('Sales')\n    plt.show()","584a9e99":"#plotting yearly sales of each drug category\nfor i in monthly.columns[1:9]:#drug categories are from 1 to 8 index\n    plot_yearly_sales(i) ","c4c7409a":"#lets see some statistics related to the data\nmonthly.describe()","d8d44f82":"#plot line curve to analyse monthly sales\ndef plot_line_curve(series):\n    plt.figure(figsize= (15,5))\n    series.plot(kind= 'line')\n    plt.title(f'Monthly Sales of Drug : {col}')\n    plt.show()","ab62c5ae":"for col in monthly.columns[1:9]:\n    plot_line_curve(monthly[col])","601cb0df":"daily.columns","c563639d":"#extracting days from date\ndaily['day'] = daily['datum'].dt.day","898c9b14":"#set dates as index\ndaily.set_index(daily['datum'], inplace= True)","75a8f3e8":"#looking at sales data from 1st Jan, 2017 to 1st Feb, 2019\nfor col in daily.columns[1:9]:\n    plot_line_curve(daily[col].loc['1\/1\/2017':'2\/1\/2017'])","6f61d105":"#calculating total sales\nmonthly['total_sales'] = monthly['M01AB']\nfor cols in monthly.columns[2:9]:\n    monthly['total_sales'] = monthly['total_sales']+monthly[cols]","cf0d03cc":"monthly.groupby('month')['total_sales'].plot.bar(rot=45)\nplt.xlabel('Date Time')\nplt.ylabel('Total Sales')\nplt.title('Total Sales of Drugs')\nplt.show()","6d204bfe":"# Pharma Sales Time Series Analysis\n\n## Getting Started","fc4c58a7":"Seperate year, month and day from the datum column","fdbb3ca8":"From the above graphs, we can infer that the sales for first month of 2017 is 0. This means that we have missing values for the first month.\nLet us analyse this from daily data.<br>\nBut first let us preprocess daily data also.","ee2233f6":"Let us now convert data type of datum column from object to datetime","1add1cb3":"Notice that the format of datum column is different in hourly and monthly data and same in daily and weekly data.","0f47367a":"\n## Reading the Data","00787954":"Analysing the above yearly sales graphs, we can conclude that:\n* The year 2017 has seen a major dip in the sales of drugs. This need digging. Lets do it","746ab0d7":"From these graphs, we can say say that the data is **not missing**. Instead, the sales of drugs on 2nd January, 2017 is low rather there is no sale on 2nd Feb.","af22caa3":"From the shape of monthly dataframe, we see that the data is of 70 months.","4fd0bb10":"## Analysing total sales of drug","760e0395":"# Analysing Monthly Series\n\nFirstly, let us analyse the monthly data and see what inferences can we draw from this data.","3dedfb23":"## Analysing Data Stucture","96fcb31a":"Here, we see that the minimum value of sale of majority of drugs is 0 while that of drug N05B is 1. This is the reason why year 2017 has lowest sales.","c9fe59b2":"From above diagram we can hence validate that the sales of drugs have been lowest in the year 2017."}}