{"cell_type":{"52f01a9e":"code","1b4c8649":"code","866dcdc0":"code","80a57c44":"code","b7d03d8a":"code","9f162ff9":"code","ac3746f6":"code","1c0090f4":"code","e4e420d3":"code","19830df1":"code","974eda1e":"code","4cf3b03a":"code","0f39b14f":"code","41ca5f56":"code","20b5d33b":"code","7d9e9cc9":"code","edfb3c80":"code","473c4bdd":"code","bbd26527":"markdown","fe3f094f":"markdown","778ff840":"markdown","9473444e":"markdown","9baa31af":"markdown"},"source":{"52f01a9e":"import pandas as pd\nimport seaborn as sns\nimport numpy as np\n\nimport matplotlib\nimport matplotlib.pyplot as plt\nplt.style.use('ggplot')\nfrom matplotlib.pyplot import figure\n\n# Output will show all rows\npd.set_option('display.max_rows', None)\n\n%matplotlib inline\nmatplotlib.rcParams['figure.figsize'] = (12,8)\n\n# Load data\ndf = pd.read_csv('..\/input\/movies\/movies.csv')","1b4c8649":"df.head()","866dcdc0":"# Percent of null values in each column\n\nfor col in df.columns:\n    n_missing = sum(df[col].isnull())\n    pct_missing = np.mean(df[col].isnull())\n    print(f'{col} : {pct_missing}% ({n_missing})')","80a57c44":"df.dtypes","b7d03d8a":"# Change data types\n\ndf['votes'] = df['votes'].astype('Int64')\ndf['budget'] = df['budget'].astype('Int64')\ndf['gross'] = df['gross'].astype('Int64')\n\ndf.dtypes","9f162ff9":"# Problem: `year` column is inaccurate\n# Solution: extract the correct year from `released` column\n\nreleased_df = df['released'].str.split(' ',n = 3,expand = True)\nreleased_df.rename(columns={0: 'month', 1: 'day', 2: 'year', 3: 'country'}, inplace = True)\n\n# Add new columns to df\ndf['released_year'] = released_df['year']\ndf['released_month'] = released_df['month']\ndf['released_day'] = released_df['day']\n\n# 'released_year' will replace 'year'\ndf.drop(['year'], axis = 1, inplace = True)\n\ndf.head()","ac3746f6":"df.shape","1c0090f4":"# Remove redundant rows\n\ndf = df.drop_duplicates()\n# df = df.dropna()\ndf.shape","e4e420d3":"# Order films by gross revenue\ndf.sort_values(by=['gross'], ascending = False).head(25)","19830df1":"# Scatterplot: budget vs gross revenue\n\ndf['gross'] = df['gross'].astype('float')\ndf['budget'] = df['budget'].astype('float')\n\nplt.scatter(x = df['budget'], y = df['gross'])\nplt.title('Budget vs Gross Revenue')\nplt.xlabel('Budget')\nplt.ylabel('Gross Revenue')\nplt.show()","974eda1e":"# Regression plot: how much is budget correlated to gross revenue?\n\nsns.regplot(data = df, x = 'budget', y = 'gross', \n            scatter_kws = {'color': 'red'},\n            line_kws = {'color': 'blue'})\nplt.title('Budget vs Gross Revenue')\nplt.xlabel('Budget')\nplt.ylabel('Gross Revenue')\nplt.show()","4cf3b03a":"# Confirm high correlation b\/w budget and gross (0.74)\ndf.corr(method = 'pearson')","0f39b14f":"# Heatmap \n\ncorrelation_matrix = df.corr(method = 'pearson')\nsns.heatmap(correlation_matrix, annot = True)\nplt.title('Correlation Matrix for Numeric Movie Features')\nplt.xlabel('Movie Features')\nplt.ylabel('Movie Features')\nplt.show()","41ca5f56":"# Change all column values to numbers in order to run a (bigger) correlation matrix\ndf_numerized = df\n\nfor col_name in df_numerized.columns:\n    if(df_numerized[col_name].dtype == 'object'):\n        df_numerized[col_name] = df_numerized[col_name].astype('category')\n        df_numerized[col_name] = df_numerized[col_name].cat.codes\n        \ndf_numerized.head(25)","20b5d33b":"# Correlations b\/w all variables\ndf_numerized.corr()","7d9e9cc9":"# Heatmap with all variables\ncorrelation_matrix_num = df_numerized.corr(method = 'pearson')\nsns.heatmap(correlation_matrix_num, annot = True)\n\nfig = matplotlib.pyplot.gcf()\nfig.set_size_inches(20, 13)\nplt.title('Correlation Matrix for Numeric Movie Features')\nplt.xlabel('Movie Features')\nplt.ylabel('Movie Features')\nplt.show()","edfb3c80":"# Create correlation pairs for each variable\ncorrelation_pairs = correlation_matrix_num.unstack()\n\n# Sort correlation pairs by correlation value \nsorted_pairs = correlation_pairs.sort_values()\nsorted_pairs","473c4bdd":"# Show only strong positive correlations\nsorted_pairs[sorted_pairs > 0.5]","bbd26527":"## Analysis","fe3f094f":"## Setup","778ff840":"## Data Cleaning","9473444e":"## Hypothesis\n\nWhich movie factors are highly correlated with gross revenue?\n\nPrediction: **Movie budget and main actor (`star`)** will have a strong positive correlation to gross revenue.","9baa31af":"## Conclusion \n\n**Number of ratings (`votes`) and budget** have the highest correlation to gross earnings"}}