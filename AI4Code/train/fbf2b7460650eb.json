{"cell_type":{"1916af9c":"code","51ae7445":"code","2aefe7a1":"code","a69c991d":"code","145c7070":"code","84453ace":"code","57f77324":"code","f53b292e":"code","866be2cb":"code","d480f535":"code","e13c36c4":"code","64d5cee2":"code","644fb618":"code","3d58b84f":"code","7070cc6c":"code","b3bbf4c9":"code","9f3202dd":"code","7af5a20f":"code","0954d9dc":"code","2b65e5c4":"code","b1d96d6e":"code","6cef5e96":"code","4d7e3fca":"code","9145e6f8":"code","2d74f8b1":"code","c2b79eae":"code","3bee0bbe":"code","3423b705":"code","58772672":"code","8765062a":"code","837197b0":"code","57b339ac":"code","ae18f926":"code","512a6e8e":"code","58435279":"code","56237919":"code","233898ec":"code","b1c4b208":"code","424dba45":"code","81b40a0e":"code","e6068857":"code","178ad634":"code","f8d61754":"markdown","5e94eba6":"markdown","fcc43fd5":"markdown","1477be09":"markdown","560b4b7b":"markdown","054b2bac":"markdown","866f24fb":"markdown","df409103":"markdown","b85d0814":"markdown","7446a8e0":"markdown","0066f873":"markdown","e64b46bc":"markdown","530ad29b":"markdown","b0dc9f5b":"markdown","e047abb6":"markdown","86699f8e":"markdown","185d312a":"markdown","65a5e67d":"markdown","71260695":"markdown","a985640f":"markdown"},"source":{"1916af9c":"# packages\nimport numpy as np\nimport pandas as pd\n\nimport matplotlib.pyplot as plt\nimport seaborn as sns\nimport plotly.express as px","51ae7445":"# import data and first glance (Top 10 Games)\ndf = pd.read_csv('..\/input\/worldwide-video-game-sales\/vgsalesGlobale.csv')\ndf.head(10)","2aefe7a1":"# dimensions\ndf.shape","a69c991d":"# there are quite a few rows w\/o year\nprint('Year missing: ', sum(df.Year.isna()))\n# let's remove those\ndf = df[~df.Year.isna()]\n# and convert to int\ndf.Year = df.Year.astype(int)","145c7070":"# show the top 10\nplt.figure(figsize=(10,6))\nsns.barplot(x=df.Name[0:10], y=df.Global_Sales[0:10])\nplt.title('Top 10 (global sales)')\nplt.grid()\nplt.xticks(rotation=90)\nplt.show()","84453ace":"# check that table is consistently sorted by global sales:\nplt.plot(np.log10(df.Global_Sales))\nplt.title('Global Sales')\nplt.grid()\nplt.show()","57f77324":"# Data from 2017 on looks incomplete. Let's remove those years:\ndf = df[df.Year<2017]","f53b292e":"# Interactive plot of top games; color ~ Year, size ~ Global_Sales\n# Log scale for all axes\ndf4plot = df[0:100] # select only top N for plot\nfig = px.scatter_3d(df4plot, x='NA_Sales', y='EU_Sales', z='JP_Sales',\n                    color='Year',\n                    size='Global_Sales',\n                    size_max = 30,\n                    hover_data=['Name','Platform','Year'],\n                    opacity=0.5,\n                    log_x=True, log_y=True, log_z=True)\nfig.update_layout(title='Top Games')\nfig.show()","866be2cb":"plt.hist(df.Global_Sales,100)\nplt.title('Global Sales')\nplt.grid()\nplt.show()","d480f535":"# logarithmic version\nplt.hist(np.log10(df.Global_Sales),20)\nplt.title('Global Sales - log10')\nplt.grid()\nplt.show()","e13c36c4":"# pairwise scatter plot including regression lines\ndf_sales = df[['NA_Sales','EU_Sales','JP_Sales','Other_Sales']].copy()\nsns.pairplot(df_sales, kind='reg', plot_kws={'line_kws':{'color':'magenta'}, 'scatter_kws': {'alpha': 0.25}})\nplt.show()","64d5cee2":"# pair plot of sales by region - apply log trafo before\ndf_sales['NA_log'] = np.log10(0.001+df_sales['NA_Sales']) # \"cheat\" a little bit (add 0.001) to avoid log(0)-issue\ndf_sales['EU_log'] = np.log10(0.001+df_sales['EU_Sales'])\ndf_sales['JP_log'] = np.log10(0.001+df_sales['JP_Sales'])\ndf_sales['Other_log'] = np.log10(0.001+df_sales['Other_Sales'])\n\nsns.pairplot(df_sales[['NA_log','EU_log','JP_log','Other_log']], kind='scatter',\n            plot_kws = {'alpha': 0.25})\nplt.show()","644fb618":"# aux function for evaluation of categorical variables\ndef categorical_eval(df, feature, add_text):\n    freqs = df[feature].value_counts()\n    print(freqs)\n    plt.figure(figsize=(10,6))\n    sns.barplot(x=freqs.index, y=freqs.values)\n    plt.title(feature + add_text)\n    plt.grid()\n    plt.xticks(rotation=90)\n    plt.show()","3d58b84f":"categorical_eval(df, 'Platform', ' - Frequencies')","7070cc6c":"categorical_eval(df, 'Genre', ' - Frequencies')","b3bbf4c9":"categorical_eval(df, 'Year', ' - Frequencies')","9f3202dd":"sales_by_platform = df.groupby(by='Platform').Global_Sales.sum()","7af5a20f":"plt.figure(figsize=(10,6))\nsns.barplot(x=sales_by_platform.index, y=sales_by_platform.values)\nplt.title('Global Sales by Platform')\nplt.grid()\nplt.xticks(rotation=90)\nplt.show()","0954d9dc":"sales_by_genre = df.groupby(by='Genre').Global_Sales.sum()","2b65e5c4":"plt.figure(figsize=(10,6))\nsns.barplot(x=sales_by_genre.index, y=sales_by_genre.values)\nplt.title('Global Sales by Genre')\nplt.grid()\nplt.xticks(rotation=90)\nplt.show()","b1d96d6e":"NA_total = df.NA_Sales.sum()\nEU_total = df.EU_Sales.sum()\nJP_total = df.JP_Sales.sum()\nOther_total = df.Other_Sales.sum()\nGlobal_total = NA_total + EU_total + JP_total + Other_total\n\nprint(\"Total sales NA    :\", round(NA_total,2), ' ~ ', round(100*NA_total\/Global_total,2), '%')\nprint(\"Total sales EU    :\", round(EU_total,2), ' ~ ', round(100*EU_total\/Global_total,2), '%')\nprint(\"Total sales JP    :\", round(JP_total,2), ' ~ ', round(100*JP_total\/Global_total,2), '%')\nprint(\"Total sales Other : \", round(Other_total,2), ' ~  ', round(100*Other_total\/Global_total,2), '%')\nprint(\"Total sales Global:\", round(Global_total,2))","6cef5e96":"plt.figure(figsize=(10,6))\nplt.pie([NA_total, EU_total, JP_total, Other_total], labels=['North America','Europe','Japan','Other'],\n       autopct='%1.2f%%', shadow=True)\nplt.title('Total Sales by region')\nplt.show()","4d7e3fca":"global_sales = df.groupby(by='Year').Global_Sales.sum()","9145e6f8":"plt.figure(figsize=(10,6))\nsns.barplot(x=global_sales.index, y=global_sales.values)\nplt.title('Global Sales by Year')\nplt.grid()\nplt.xticks(rotation=90)\nplt.show()","2d74f8b1":"df_sales_split_by_year = df.groupby(\n     ['Year']\n ).agg(\n     NorthAmerica = ('NA_Sales','sum'),\n     Europe = ('EU_Sales','sum'),\n     Japan = ('JP_Sales','sum'),\n     Other = ('Other_Sales','sum')\n ).reset_index()","c2b79eae":"df_sales_split_by_year","3bee0bbe":"# plot sales development by region\nplt.figure(figsize=(10,6))\ndf_sales_4plot = df_sales_split_by_year.melt('Year', var_name='Region', value_name='Sales')\nsns.lineplot(x=df_sales_4plot.Year, y=df_sales_4plot.Sales, hue=df_sales_4plot.Region)\nplt.title('Sales development by region')\nplt.xticks(rotation=90)\nplt.grid()\nplt.show()","3423b705":"# alternative visualization: stacked bars\nplt.figure(figsize=(10,6))\np1=plt.bar(df_sales_split_by_year.Year, df_sales_split_by_year.NorthAmerica)\nbot = df_sales_split_by_year.NorthAmerica\np2=plt.bar(df_sales_split_by_year.Year, df_sales_split_by_year.Europe, bottom=bot)\nbot = bot+df_sales_split_by_year.Europe\np3=plt.bar(df_sales_split_by_year.Year, df_sales_split_by_year.Japan, bottom=bot)\nbot = bot+df_sales_split_by_year.Japan\np4=plt.bar(df_sales_split_by_year.Year, df_sales_split_by_year.Other, bottom=bot)\nplt.title('Sales development by region')\nplt.legend((p1[0],p2[0],p3[0],p4[0]), ('North America', 'Europe', 'Japan', 'Other'))\nplt.grid()\nplt.show()","58772672":"genre_list = list(df['Genre'].value_counts().index)\ngenre_list","8765062a":"for genre in genre_list:\n    top = df[df.Genre==genre]\n    top = top[0:10]\n    display(top)\n\n    top['Name_Unique'] = top.Name + ' | ' + top.Platform # we need a unique name for plot!\n    plt.figure(figsize=(10,6))\n    sns.barplot(x='Name_Unique', y='Global_Sales', data=top)\n    plt.title(genre)\n    plt.grid()\n    plt.xticks(rotation=90)\n    plt.show()","837197b0":"df_NA = df.sort_values(by='NA_Sales', ascending=False)\ndf_NA = df_NA.reset_index(drop=True)\ndf_NA.index = df_NA.index + 1 # start index with 1 => index = (local) rank\ndf_NA.head(10)","57b339ac":"plt.figure(figsize=(10,6))\nsns.barplot(x=df_NA.Name[0:10], y=df_NA.NA_Sales[0:10])\nplt.title('North America - Top 10')\nplt.grid()\nplt.xticks(rotation=90)\nplt.show()","ae18f926":"df_Europe = df.sort_values(by='EU_Sales', ascending=False)\ndf_Europe = df_Europe.reset_index(drop=True)\ndf_Europe.index = df_Europe.index + 1 # start index with 1 => index = (local) rank\ndf_Europe.head(10)","512a6e8e":"plt.figure(figsize=(10,6))\nsns.barplot(x=df_Europe.Name[0:10], y=df_Europe.EU_Sales[0:10])\nplt.title('Europe - Top 10')\nplt.grid()\nplt.xticks(rotation=90)\nplt.show()","58435279":"df_Japan = df.sort_values(by='JP_Sales', ascending=False)\ndf_Japan = df_Japan.reset_index(drop=True)\ndf_Japan.index = df_Japan.index + 1 # start index with 1 => index = (local) rank\ndf_Japan.head(10)","56237919":"plt.figure(figsize=(10,6))\nsns.barplot(x=df_Japan.Name[0:10], y=df_Japan.JP_Sales[0:10])\nplt.title('Japan - Top 10')\nplt.grid()\nplt.xticks(rotation=90)\nplt.show()","233898ec":"# Let's check\ndf_Japan[df_Japan.Name=='Wii Sports']","b1c4b208":"df_Other = df.sort_values(by='Other_Sales', ascending=False)\ndf_Other = df_Other.reset_index(drop=True)\ndf_Other.head(10)","424dba45":"plt.figure(figsize=(10,6))\nsns.barplot(x=df_Other.Name[0:10], y=df_Other.Other_Sales[0:10])\nplt.title('Other - Top 10')\nplt.grid()\nplt.xticks(rotation=90)\nplt.show()","81b40a0e":"for year in range(1980,2016+1):\n    top = df[df.Year==year]\n    display(top.head(1))","e6068857":"platform_list = list(df['Platform'].value_counts().index)","178ad634":"for pf in platform_list:\n    top = df[df.Platform==pf]\n    display(top.head(1))","f8d61754":"### Europe","5e94eba6":"# Top 10 Bestsellers by Region","fcc43fd5":"# Bestsellers by Platform","1477be09":"### Japan","560b4b7b":"#### \"Wii Sports\" is only on 26th place in Japan!","054b2bac":"### Other","866f24fb":"### North America","df409103":"# Top 10 Bestsellers by Genre","b85d0814":"### Split by region","7446a8e0":"# Global sales over all years","0066f873":"# Performing some analytics on worldwide video games sales data.\n* Evaluate sales distributions\n* Evaluate categorical variables\n* Global sales by platform and by genre\n* Global sales over all years\n* Sales development over time (global and per region)\n* Top 10 bestsellers by genre and by region\n* Bestsellers by year\n* Bestsellers by platform","e64b46bc":"# Global sales development","530ad29b":"# Bestsellers by Year","b0dc9f5b":"#### Yet another suprise: \"Pro Evolution Soccer 2008\" jumps from 349 worldwide in the Top 10 in \"Other\"!","e047abb6":"# Evaluate categorial variables (frequency)","86699f8e":"# Evaluate sales distributions","185d312a":"# Global Sales by Genre","65a5e67d":"# PLAYER ONE - START","71260695":"* Wow, \"Monster Hunter Freedom 3\" jumps from 215 worldwide in the Top 10 in Japan!\n* Furthermore Role-Playing is extremely popular in Japan (6 out of Top 10). \n* Surprisingly, we do not see the global leader \"Wii Sports\" in the Japan Top 10!","a985640f":"# Global sales by Platform"}}