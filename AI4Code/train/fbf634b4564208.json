{"cell_type":{"1e008a11":"code","cfa84f94":"code","79fe9723":"code","e728d35c":"code","34299c26":"code","299ed719":"code","0021120f":"code","fea335d2":"code","31b79582":"code","99abe985":"code","7ab9dbce":"code","31ef9146":"code","dac20b4d":"code","48c01146":"code","f11ef639":"code","e1c560d4":"code","ec73ba45":"code","2063d53c":"code","8d78c4a7":"code","dc2f8a4c":"code","a262d780":"code","b782a62c":"code","f3fbad59":"code","bf627ccd":"code","c6f23c2a":"markdown","bd1c42d0":"markdown","6daffbef":"markdown","3baa021e":"markdown","36bf6e07":"markdown","ab3d4bf2":"markdown"},"source":{"1e008a11":"import numpy as np # linear algebra\nimport pandas as pd\ndf = pd.read_csv(\"Cleaned-Data.csv\")\ndataset = df.values","cfa84f94":"df.head()","79fe9723":"severity_columns = df.filter(like='Severity_').columns\ndf['Severity_None'].replace({1:'None',0:'No'},inplace =True)\ndf['Severity_Mild'].replace({1:'Mild',0:'No'},inplace =True)\ndf['Severity_Moderate'].replace({1:'Moderate',0:'No'},inplace =True)\ndf['Severity_Severe'].replace({1:'Severe',0:'No'},inplace =True)","e728d35c":"df['Condition']=df[severity_columns].values.tolist()","34299c26":"def removing(list1):\n    list1 = set(list1) \n    list1.discard(\"No\")\n    a = ''.join(list1)\n    return a","299ed719":"df['Condition'] = df['Condition'].apply(removing)","0021120f":"age_columns = df.filter(like='Age_').columns\ngender_columns = df.filter(like='Gender_').columns\ncontact_columns = df.filter(like='Contact_').columns","fea335d2":"No_risk_age = df.groupby(['Severity_None'])[age_columns].sum()\nNo_risk_gender = df.groupby(['Severity_None'])[gender_columns].sum()\nNo_risk_contact = df.groupby(['Severity_None'])[contact_columns].sum()","31b79582":"Low_risk_age = df.groupby(['Severity_Mild'])[age_columns].sum()\nLow_risk_gender = df.groupby(['Severity_Mild'])[gender_columns].sum()\nLow_risk_contact = df.groupby(['Severity_Mild'])[contact_columns].sum()","99abe985":"Moderate_risk_age = df.groupby(['Severity_Moderate'])[age_columns].sum()\nModerate_risk_gender = df.groupby(['Severity_Moderate'])[gender_columns].sum()\nModerate_risk_contact = df.groupby(['Severity_Moderate'])[contact_columns].sum()","7ab9dbce":"Severe_risk_age = df.groupby(['Severity_Severe'])[age_columns].sum()\nSevere_risk_gender = df.groupby(['Severity_Severe'])[gender_columns].sum()\nSevere_risk_contact = df.groupby(['Severity_Severe'])[contact_columns].sum()","31ef9146":"df.drop(\"Country\",axis=1,inplace=True)\ndf.drop(severity_columns,axis=1,inplace=True)\ndf['Symptoms_Score'] = df.iloc[:,:5].sum(axis=1) + df.iloc[:,6:10].sum(axis=1)","dac20b4d":"df['Condition'].replace({'Mild':1,'None':0,'Moderate':1,'Severe':1},inplace =True)","48c01146":"for i in df.columns:\n    print(\"\\nColumn Name:\",i,\"-->\",df[i].unique(),\"-->Unique Count\",len(df[i].unique()))","f11ef639":"import tensorflow","e1c560d4":"def reduce_mem_usage(props):\n    start_mem_usg = props.memory_usage().sum() \/ 1024**2 \n    print(\"Memory usage of properties dataframe is :\",start_mem_usg,\" MB\")\n    NAlist = [] # Keeps track of columns that have missing values filled in. \n    for col in props.columns:\n        if props[col].dtype != object:  # Exclude strings\n            \n            # Print current column type\n            print(\"******************************\")\n            print(\"Column: \",col)\n            print(\"dtype before: \",props[col].dtype)\n            \n            # make variables for Int, max and min\n            IsInt = False\n            mx = props[col].max()\n            mn = props[col].min()\n            \n            # Integer does not support NA, therefore, NA needs to be filled\n            if not np.isfinite(props[col]).all(): \n                NAlist.append(col)\n                props[col].fillna(mn-1,inplace=True)  \n                   \n            # test if column can be converted to an integer\n            asint = props[col].fillna(0).astype(np.int64)\n            result = (props[col] - asint)\n            result = result.sum()\n            if result > -0.01 and result < 0.01:\n                IsInt = True\n            if IsInt:\n                if mn >= 0:\n                    if mx < 255:\n                        props[col] = props[col].astype(np.uint8)\n                    elif mx < 65535:\n                        props[col] = props[col].astype(np.uint16)\n                    elif mx < 4294967295:\n                        props[col] = props[col].astype(np.uint32)\n                    else:\n                        props[col] = props[col].astype(np.uint64)\n                else:\n                    if mn > np.iinfo(np.int8).min and mx < np.iinfo(np.int8).max:\n                        props[col] = props[col].astype(np.int8)\n                    elif mn > np.iinfo(np.int16).min and mx < np.iinfo(np.int16).max:\n                      props[col] = props[col].astype(np.int16)\n                    elif mn > np.iinfo(np.int32).min and mx < np.iinfo(np.int32).max:\n                        props[col] = props[col].astype(np.int32)\n                    elif mn > np.iinfo(np.int64).min and mx < np.iinfo(np.int64).max:\n                        props[col] = props[col].astype(np.int64)    \n            \n            # Make float datatypes 32 bit\n            else:\n                props[col] = props[col].astype(np.float32)\n            \n            # Print new column type\n            print(\"dtype after: \",props[col].dtype)\n            print(\"******************************\")\n            print(\"___MEMORY USAGE AFTER COMPLETION:___\")\n    mem_usg = props.memory_usage().sum() \/ 1024**2 \n    print(\"Memory usage is: \",mem_usg,\" MB\")\n    print(\"This is \",100*mem_usg\/start_mem_usg,\"% of the initial size\")\n    return props, NAlist\n","ec73ba45":"df, NAlist = reduce_mem_usage(df)\nprint(\"_________________\")\nprint(\"\")\nprint(\"Warning: the following columns have missing values filled with 'df['column_name'].min() -1': \")\nprint(\"_________________\")\nprint(\"\")\nprint(NAlist)","2063d53c":"!pip install tpot","8d78c4a7":"from sklearn.model_selection import train_test_split\nx=df.drop(['Condition','Age_0-9', 'Age_10-19',\n       'Age_20-24', 'Age_25-59', 'Age_60+', 'Gender_Female', 'Gender_Male',\n       'Gender_Transgender', 'Contact_Dont-Know', 'Contact_No', 'Contact_Yes','Symptoms_Score','None_Sympton', 'Pains','None_Experiencing'],axis=1)\ny=df['Condition']\n\nx_train, x_test, y_train, y_test = train_test_split(x,y , test_size =0.2)","dc2f8a4c":"from tpot import TPOTClassifier\n\n\ntpot_classifier = TPOTClassifier(generations= 5, population_size= 50,\n                                 verbosity= 2,\n                                 n_jobs = -1 , random_state = 1 , early_stop = 12,\n                                 cv = 5, scoring = 'accuracy')\ntpot_classifier.fit(x_train,y_train)","a262d780":"accuracy = tpot_classifier.score(x_test,y_test)\nprint(accuracy)","b782a62c":"tpot_classifier.export('optimal_pipeline.py')","f3fbad59":"def pipeline_suggested(df):\n\n  exported_pipeline = BernoulliNB(alpha=0.1, fit_prior=True)\n# Fix random state in exported estimator\n  if hasattr(exported_pipeline, 'random_state'):\n      setattr(exported_pipeline, 'random_state', 1)\n \n\n  exported_pipeline.fit(x_train, y_train)\n  print(f\"Train acc: {exported_pipeline.score(x_train, y_train)}\")\n  print(f\"Test acc: {exported_pipeline.score(x_test, y_test)}\")\n\n","bf627ccd":"\n    # Copied from optimal pipeline suggested by tpot in file \"optimal_pipeline.py\"\n    # Initialize \n#exported_pipeline = make_pipeline(\n    \n    \n    \n    #PolynomialFeatures(degree=2, include_bias=False, interaction_only=False),\n    #VarianceThreshold(threshold=0.2),\n    #ZeroCount(),\n    #GradientBoostingClassifier(learning_rate=1.0, max_depth=10, max_features=0.9000000000000001, min_samples_leaf=16, min_samples_split=3, n_estimators=100, subsample=0.7000000000000001)\n    #)\n    # Init training\nfrom sklearn.naive_bayes import BernoulliNB\nexported_pipeline = BernoulliNB(alpha=0.1, fit_prior=True)\nexported_pipeline.fit(x_train, y_train)\nprint(f\"Train acc: {exported_pipeline.score(x_train, y_train)}\")\nprint(f\"Test acc: {exported_pipeline.score(x_test, y_test)}\")\n   ","c6f23c2a":"Downcasting ","bd1c42d0":"Preprocessing","6daffbef":"Importing Lib and data","3baa021e":"Covid-19 symptoms checker (using genetic algorithm)","36bf6e07":"<a href=\"https:\/\/colab.research.google.com\/github\/kritika200015\/Covid19_symptoms-checker\/blob\/main\/Tpot_classification_with_GA.ipynb\" target=\"_parent\"><img src=\"https:\/\/colab.research.google.com\/assets\/colab-badge.svg\" alt=\"Open In Colab\"\/><\/a>","ab3d4bf2":"Model"}}