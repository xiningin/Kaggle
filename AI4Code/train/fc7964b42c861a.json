{"cell_type":{"371b6433":"code","525fb78d":"code","81b3715b":"code","deb5265d":"code","296adad5":"code","490c997e":"code","da35a814":"code","3641a4b0":"code","1592d15e":"markdown","30bfea1c":"markdown","d16a97e3":"markdown","d28438ff":"markdown","c728dc95":"markdown","6947f124":"markdown","a3b201f2":"markdown","58b3b32a":"markdown"},"source":{"371b6433":"!pip install tweepy\nimport tweepy\nfrom tweepy import Stream\nfrom tweepy import StreamListener\nimport json\nfrom textblob import TextBlob\nimport re\nimport csv\nimport nltk\nimport pandas as pd\nimport time\nnltk.download('punkt')\n","525fb78d":"consumer_key = \"Type your access key\"\nconsumer_secret = \"Type your access key\"\naccess_token = \"Type your access key\"\naccess_token_secret = \"Type your access key\"","81b3715b":"df = pd.DataFrame(list())\ndf.to_csv('sentiment.csv')","deb5265d":"biden=0\ntrump=0\n#setting the columns for csv file\nheader_name = ['Trump', 'Biden']\nwith open('sentiment.csv', 'w') as file:\n    writer = csv.DictWriter(file, fieldnames=header_name)\n    writer.writeheader()\n\nclass Listener(StreamListener):\n    #setting the time limit for processing\n    def __init__(self, time_limit=120):\n        self.start_time = time.time()\n        self.limit = time_limit\n        super(Listener, self).__init__()\n    \n    def on_data(self, data):\n        \n        if (time.time() - self.start_time) < self.limit:\n            raw_tweets = json.loads(data)\n            try:\n                tweets = raw_tweets['text']\n                #using regular expression to extract the text of the tweets.\n                tweets = ' '.join(re.sub(\"(@[A-Za-z0-9]+)|([^0-9A-Za-z \\t])|(\\w+:\\\/\\\/\\S+)\", \" \", tweets).split())\n                tweets = ' '.join(re.sub('RT',' ', tweets).split())\n                #applying textblob to tweets for sentiment analysis\n                blob = TextBlob(tweets.strip())\n\n\n                global biden\n                global trump\n\n\n\n                bidenS=0\n                trumpS=0\n\n\n                for sent in blob.sentences:\n                    #extracting sentiment of a tweet\n                    if \"Trump\" in sent and not \"Biden\" in sent:\n                        trumpS = trumpS + sent.sentiment.polarity\n                    elif \"Biden\" in sent and not \"Trump\" in sent:\n                        bidenS = bidenS + sent.sentiment.polarity\n\n\n                #calculating cumulative sentiment for all tweets\n                biden = biden + bidenS\n                trump = trump + trumpS\n\n                with open('sentiment.csv', 'a') as file:\n                    writer = csv.DictWriter(file, fieldnames=header_name)\n                    info = {\n                        'Trump' : trump,\n                        'Biden' : biden\n                    }\n                    writer.writerow(info)\n\n                return(True)\n            \n            except:\n                pass\n            \n        else:\n            return(False)\n        \n    def on_error(self, status):\n        print(status)","296adad5":"auth = tweepy.OAuthHandler(consumer_key, consumer_secret)\nauth.set_access_token(access_token, access_token_secret)","490c997e":"twitter_stream = Stream(auth, Listener())\ntwitter_stream.filter(track = ['Trump','Biden'])","da35a814":"import matplotlib.pyplot as plt\n\n%matplotlib notebook\n\nplt.style.use('fivethirtyeight')","3641a4b0":"fig = plt.figure(figsize=(10,8))\n\ndata = pd.read_csv('sentiment.csv')\ny1 = data['Biden']\ny2 = data['Trump']\n\nplt.cla()\nplt.plot(y1, label='Joe Biden')\nplt.plot(y2, label='Donald Trump')\n\nplt.legend(loc='upper left')\nplt.tight_layout()","1592d15e":"# Writing my Access key to Access the tweets","30bfea1c":"# Streaming the Tweets","d16a97e3":"# Creating a blank CSV file to store the sentiments","d28438ff":"# Plotting the Visualizations","c728dc95":"# Conclusion\n* The program ran for 2 minutes and analysed aprroximately 6000 tweets.\n* From the above graph we can see that in the last 6000 tweets cumulative sentiment for VP Biden is increasing stabally.\n* From the above graph we can see that cumulative sentiment for President Trump is drastically increasing at some interval and also decreasing drastically.","6947f124":"# Accessing tweets and storing in CSV file.","a3b201f2":"# Authentication","58b3b32a":"# Importing Neccessary Libraries\n### Import tweepy for accessing Tweets"}}