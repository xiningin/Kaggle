{"cell_type":{"9616624a":"code","f5124be2":"code","521cf1fe":"code","91a0e18d":"code","c102a34d":"code","99fa0ffb":"code","cfa61917":"code","b5a5d643":"code","7fe09336":"code","59e7bb1f":"code","8585cb4b":"code","2ac01d42":"code","2590275c":"markdown","d09fb175":"markdown","138ec530":"markdown","2ad804f2":"markdown","2b8cbc04":"markdown","1ba93cee":"markdown","f4834a6b":"markdown","b97db565":"markdown","88718f1b":"markdown","320b90bc":"markdown"},"source":{"9616624a":"import os\n\nimport pandas as pd\nimport numpy as np \n\nimport plotly.express as px\nimport plotly.graph_objects as go","f5124be2":"df = pd.read_csv('\/kaggle\/input\/enarm-20012019\/ENARM.csv')\ndf.head()","521cf1fe":"df.info()","91a0e18d":"df['Escuela de Medicina'].unique()","c102a34d":"#Lista de estados de M\u00e9xico\n\nEstados_Mex = ['AGUASCALIENTES','BAJA CALIFORNIA','BAJA CALIFORNIA SUR','CAMPECHE','CHIHUAHUA',\n              'CHIAPAS','COHALITA DE ZARAGOZA','COLIMA','DURANGO','GUANAJATO','GUERRERO',\n              'HIDALGO','JALISCO','ESTADO DE M\u00c9XICO','MICHOAC\u00c1N DE OCAMPO','MORELOS','NAYARIT','NUEVO LE\u00d3N',\n              'OAXACA','COAHUILA DE ZARAGOZA','QUER\u00c9TARO','QUINTANA ROO','SAN LUIS POTOS\u00cd','SINALOA','SONORA',\n              'TABASCO','TAMAULIPAS','TLAXCALA','VERACRUZ','YUCAT\u00c1N','ZACATECAS','M\u00c9XICO']\n\n#Lista de capitales de estado (Palabras clave no repetidas)\n\nCap_est_Mex = ['AGUASCALIENTES','MEXICALI','PAZ','FRANCISCO','CHIHUAHUA',\n               'TUXTLA GUTI\u00c9RREZ','SALTILLO','COLIMA','VICTORIA DE DURANGO','GUANAJUATO',\n              'CHILIPANCINGO BRAVO','PACHUCA SOTO','GUADALAJARA',\n               'TOLUCA DE LERDO','MORELIA','CUERNAVACA','TEPIC','MONTERREY','JU\u00c1REZ',\n              'PUEBLA','SANTIAGO','CHETUMAL','SSLLPP','CULIAC\u00c1N ROSALES',\n              'HERMOSILLO','VILLAHERMOSA','CIUDAD VICTORIA','XICOHT\u00c9NCATL','XALAPA-ENR\u00cdQUEZ',\n              'M\u00c9RIDA','ZACATECAS','CIUDAD DE M\u00c9XICO']\n# \u00daltimas palabras clave\n\nKey_words=['ANAHUAC','AN\u00c1HUAC','COAHUILA','TAMAULIPAS-TAMPICO','ZARAGOZA','IZTACALA','XOCHICALCO',\n           'QUETZALC\u00d3ATL','QUETZALCOATL','CD. VICTORIA','MATATIPAC','XOCHIMILCO','VALLE DEL BRAVO',\n           'VALLE DE BRAVO','VILLA RICA','INSTITUTO POLIT\u00c9CNICO NACIONAL','ESCUELA SUPERIOR DE MEDICINA',\n          'IPN','I.P.N.','FUERZA A\u00c9REA','NAVAL','OTRO PA\u00cdS','EXTRANJEROS','EXTRANJERAS','EXTRANJERO',\n          'TOMINAGA NAKAMOTO','WEST HILL','SALLE', 'UNAM','MAYAB', 'AUT\u00d3NOMA','SURESTE','SIERRA','NORESTE',\n          'TEPEACA','FACULTAD DE MEDICINA','HOMEOPAT\u00cdA','CIENCIAS DE LA SALUD']\nEst_corr =['NUEVO LE\u00d3N','NUEVO LE\u00d3N','COAHUILA DE ZARAGOZA','TAMAULIPAS','ESTADO DE M\u00c9XICO',\n           'ESTADO DE M\u00c9XICO','MORELOS','GUANAJATO','GUANAJATO','TAMAULIPAS','NAYARIT','ESTADO DE M\u00c9XICO',\n           'ESTADO DE M\u00c9XICO','ESTADO DE M\u00c9XICO','VERACRUZ','ESTADO DE M\u00c9XICO','ESTADO DE M\u00c9XICO',\n           'ESTADO DE M\u00c9XICO','ESTADO DE M\u00c9XICO','OTRA','OTRA','EXTRANJERO','EXTRANJERO','EXTRANJERO',\n           'EXTRANJERO','ESTADO DE M\u00c9XICO','ESTADO DE M\u00c9XICO','ESTADO DE M\u00c9XICO','ESTADO DE M\u00c9XICO',\n           'YUCAT\u00c1N','ESTADO DE M\u00c9XICO','OAXACA','ESTADO DE M\u00c9XICO','TAMAULIPAS','ESTADO DE M\u00c9XICO',\n           'ESTADO DE M\u00c9XICO','ESTADO DE M\u00c9XICO','JALISCO']","99fa0ffb":"est=[]\nfor esc in df['Escuela de Medicina'].unique():\n    est.append(df.estado[df['Escuela de Medicina'].isin([esc])].unique()[0])\n    \nEst_Esc=pd.DataFrame(list(zip(est,df['Escuela de Medicina'].unique())))\n\nfor i in range(0,df.shape[0]):\n    df.at[i,'estado'] = Est_Esc.at[Est_Esc.index[Est_Esc[1].isin([df['Escuela de Medicina'][i]])==True][0],0]\n\nprint('Busqueda por Universidades que tienen el nombre del estado en algunos a\u00f1os')\nprint(df.info())\nprint('Faltan {} datos'.format(df.estado.isnull().sum()))\nprint()\n\nnull_items = df.index[df.estado.isnull()].values.tolist()\nfor item in null_items:\n    if any([word in df['Escuela de Medicina'][item] for word in Estados_Mex]):\n        df.at[item,'estado'] = [word for word in Estados_Mex if word in df['Escuela de Medicina'][item]][0]\n\nprint('Busqueda por Estado en el nombre de la universidad')\nprint(df.info())\nprint('Faltan {} datos'.format(df.estado.isnull().sum()))\nprint()\n\nnull_items = df.index[df.estado.isnull()].values.tolist()\nfor item in null_items:\n    if any([word in df['Escuela de Medicina'][item] for word in Cap_est_Mex]):\n        index = Cap_est_Mex.index([word for word in Cap_est_Mex if word in df['Escuela de Medicina'][item]][0])\n        df.at[item,'estado'] = Estados_Mex[index]\n\nprint('Busqueda por capital de Estado en el nombre de la universidad')\nprint(df.info())\nprint('Faltan {} datos'.format(df.estado.isnull().sum()))\nprint()\n\nnull_items = df.index[df.estado.isnull()].values.tolist()\nfor item in null_items:\n    if any([word in df['Escuela de Medicina'][item] for word in Key_words]):\n        index = Key_words.index([word for word in Key_words if word in df['Escuela de Medicina'][item]][0])\n        df.at[item,'estado'] = Est_corr[index]\n\nprint('Busqueda por Palabras clave en el nombre de la universidad')\nprint(df.info())\nprint('Faltan {} datos'.format(df.estado.isnull().sum()))\nprint()","cfa61917":"df.replace({'Escuela de Medicina' : {'UNIVERSIDAD':'UNIV.',\n                                     'AUT\u00d3NOMA':'AUT.',\n                                     'INSTITUTO':'INST. ',\n                                     'TECNOL\u00d3GICO Y': 'TECNOL\u00d3GICO',\n                                     'TECNOL\u00d3GICO DE': 'TECNOL\u00d3GICO',\n                                     'ESTUDIOS' : 'EST.',\n                                     'SUPERIORES' : 'SUP.',\n                                     'DE MONTERREY' : 'MTY.',\n                                     'BAJA CALIFORNIA' :'B.C.',\n                                     'ESCUELA' :'ESC.',\n                                     'NAVAL' :'NAV.',\n                                     \n                                     }},\n          inplace=True,regex=True)\n","b5a5d643":"mean_promedio=[]\nyears = np.arange(2001,2020)\nfor year in years:\n    mean_promedio.append(df.promedio[df.a\u00f1o.isin([year])].mean())\na\u00f1o_promedio =pd.DataFrame(list(zip(years,mean_promedio)),columns=['A\u00f1o','Media Promedio'])\na\u00f1o_promedio.fillna(0,inplace=True)\na\u00f1o_promedio.set_index('A\u00f1o',inplace=True)\na\u00f1o_promedio","7fe09336":"df['Varianza']=np.zeros(df.shape[0])\nfor year in years:\n    df.loc[df.a\u00f1o.isin([year]),'Varianza']=df['promedio'][df.a\u00f1o.isin([year])]-a\u00f1o_promedio.at[year,'Media Promedio']\n        \ndf.head()","59e7bb1f":"df.sort_values('Varianza',ascending=False).head(30)","8585cb4b":"fig = px.scatter(df, x='a\u00f1o', y='promedio', color='Escuela de Medicina',\n             hover_name='Escuela de Medicina', hover_data=['estado','promedio','Sustentantes','Seleccionados','Varianza'])\nfig.add_trace(go.Scatter(x=a\u00f1o_promedio.index,y=a\u00f1o_promedio['Media Promedio'],name='Media de la nota promedio'))\n\nfig.update_layout(legend_orientation ='h',legend_y =-0.3,\n                 title='Promedio de nota por a\u00f1o y universidad')\nfig.show()","2ac01d42":"fig = px.scatter(df.sort_values('Varianza',ascending=False)[0:100], x='a\u00f1o', y='Varianza', color='Escuela de Medicina',\n             hover_name='Escuela de Medicina', hover_data=['estado','promedio','Sustentantes','Seleccionados'])\n\nfig.update_layout(legend_orientation ='h',legend_y =-0.3,\n                 title='100 Casos m\u00e1s susceptibles de fraude')\nfig.show()","2590275c":"## Carga y limpieza de datos","d09fb175":"# ENARM M\u00e9xico\n\nLas metas son:\n- Limpiar los datos.\n- Hacer un estudio estad\u00edstico.\n- Comprobar si existe corrupci\u00f3n en ciertas universidades.","138ec530":"This data set is in spanish since is for M\u00e9xico. if you want to understand something please put it in the discuss section","2ad804f2":"Se puede observar alguna universidad con un cambio dr\u00e1stico de nota promedio como la Universidad del Valle de Mexico -Campus Jalisco pero puede ser debido a que el n\u00famero de sustentantes es reducido.\n\nHay que buscar picos que se salgan de la media de las universidades.","2b8cbc04":"Se puede observar que la media es de:\n* 40 puntos : 2001-2006 y 2008\n* 30 puntos : 2007\n* 50 puntos : 2011\n* 60 puntos : 2012-2019\nEsto da una idea de la dificultad del examen, para una universidad que ense\u00f1a el mismo contenido cada a\u00f1o la varianza respecto a la media deber\u00eda tender a ser constante. Una curva en forma de 'U' puede indicar el punto de inflexi\u00f3n a partir del cu\u00e1l se comenz\u00f3 a cometer fraude de forma continua, una curva en forma de 'A' indicar\u00eda que se dej\u00f3 de hacer fraude, un pico ser\u00eda fraude puntual, y una l\u00ednea constante ausencia de fraude.\n\n\n* UNIVERSIDAD PANAMERICANA : \n    * Se ha presentado todos los a\u00f1os menos 2009 y2010.\n    * En torno a 50 sustentantes por convocatoria.\n    * Supera la media todas las veces con m\u00e1s de 6 puntos(M\u00e1ximo de 15 puntos sobre la media (2017). \n    * Picos no correlativos con la media en 2006 y una l\u00ednea ascendente desde 2011 a 2019\n    * **Posible fraude general** \n    \n\n* INST. TECNOL\u00d3GICO EST.SUP.MTY.-CAMPUS JALISCO :\n    * Solo se present\u00f3 el 2019.\n    * 37 sustentantes.\n    * Super\u00f3 la media con 14,5 puntos.\n    * **Improbable fraude puntual**.\n    \n\n* UNIV.DEL VALLE DE M\u00c9XICO - CAMPUS JALISCO : \n    * Se present\u00f3 en 2015-2016.\n    * En torno a 5 sustentantes por convocatoria. No son suficientes para estimar fraude.\n    * Super\u00f3 la media en m\u00e1s de 6 puntos en 2016 (11)\n    * **No hay fraude**.\n    \n\n* UNIV.AUT.DE SAN LUIS POTOS\u00cd :  \n    * Se ha presentado todos los a\u00f1os menos 2009 y2010.\n    * En torno a 150-200 sustentantes por convocatoria.\n    * Supera la media todos los a\u00f1os con m\u00e1s de 6 puntos menos en 2007 y 2008(M\u00e1x = 14 en 2006). \n    * Picos no correlativos con la media en 2006 y una l\u00ednea constante desde 2011 a 2019\n    * **Posible fraude puntual en 2006**\n    \n\n* INST.TECNOL\u00d3GICO EST.SUP.MTY. : \n    * Se ha presentado todos los a\u00f1os menos 2009 y2010.\n    * En torno a 40 sustentantes por convocatoria en 2001-2008 y en torno a 50 en 2011-2019.\n    * Supera la media todas las veces. \n    * Picos no correlativos con la media en 2006 y una l\u00ednea constante desde 2011 a 2019\n    * **Posible fraude puntual en 2006**\n    \n\n* UNIV.DEL EJ\u00c9RCITO Y FUERZAS A\u00c9REAS :\n    * Se ha presentado en 2001, 2003 y 2004.\n    * 12 sustentantes en 2001, en torno a 150 en 2003 y 2004.\n    * Supera la media en 2001 en m\u00e1s de 6 puntos (12).\n    * **No hay fraude**\n    \n\n* INST. DE EST.SUP. DE TEPEACA :\n    * Se ha presentado en 2005-2008.\n    * <10 sustentantes por convocatoria. No son suficientes para estimar un fraude\n    * Supera la media en 2005 y 2006 en m\u00e1s de 6 puntos (M\u00e1x = 11, 2005). Por debajo de la media en 2007-2008.\n    * **No hay fraude**\n    \n\n* UNIV.AUT DE QUER\u00c9TARO : \n    * Se ha presentado en 2001-2008 y 2011-2019\n    * Alrededor de 100 sustentantes en 2001-2008 y alrededor de 200 sustentantes en 2011-2019.\n    * Supera la media en m\u00e1s de 6 puntos en 2004-2006, 2011-2014, 2016-2017.\n    * Patrones no correlativo en 2004-2006, 2011-2013.\n    * **Posible fraude generalizado**.\n    \n\n\n* UNIV. LAS AMERICAS PUEBLA : \n    * Se ha presentado en 2013-2019.\n    * <50 sustentantes por convocatoria. No son suficientes para estimar fraude.\n    * Supera la media en 2013 por 9.5 puntos.\n    * **No hay Fraude**.\n    \n\n* UNIV.CUAUHTEMOC - PLANTEL GUADALAJARA : Se ha presentado desde 2015 hasta 2018, en 2015 super\u00f3 la media con 1 sustentante. **No es fraude** (Es suerte).\n    * Se ha presentado en 2015-2019.\n    * <50 sustentantes por convocatoria. No son suficientes para estimar fraude.\n    * Supera la media en 2015 por 9.5 puntos.\n    * **No hay Fraude**.\n    \n\n* UNIV.DE GUAJANATO : \n    * Se ha presentado en 2001-2008 y 2011-2019\n    * Entre 100 y 200 sustentantes por convocatoria.\n    * Supera la media en m\u00e1s de 6 puntos en 2001, 2003-2006, 2015-2016.\n    * Pico no correlativo en 2006, varianza con tendencia constante en los dem\u00e1s casos.\n    * **Posible fraude puntual en 2006**.\n    \n\n* UNIV. AN\u00c1HUAC :\n    * Se ha presentado en 2001-2006 y 2011-2019\n    * Alrededor de 200 sustentantes en 2001-2006 y alrededor de 400 sustentantes en 2011-2019.\n    * Supera la media en m\u00e1s de 6 puntos en 2005-2006.\n    * Pico no correlativo en 2005, varianza con tendencia constante en los dem\u00e1s casos.\n    * **Posible fraude puntual en 2005**.\n    \n    \n* UNIV.AUT. DE CHIHUAHUA : \n    * Se ha presentado en 2001-2008 y 2011-2019\n    * Alrededor de 100 sustentantes en cada convocatoria.\n    * Supera la media en m\u00e1s de 6 puntos en 2003-2004, 2012, 2015.\n    * Pico no correlativo en 2012, varianza con tendencia constante en los dem\u00e1s casos.\n    * **Posible fraude puntual en 2012**.\n    \n    \n* UNIV.AUT. DEL ESTADO DE M\u00c9XICO : \n    * Se ha presentado en 2001-2008 y 2011-2019\n    * Alrededor de 250 sustentantes en cada convocatoria.\n    * Supera la media en m\u00e1s de 6 puntos en 2005-2006.\n    * Pico no correlativo en 2005 no muy pronunciado, varianza con tendencia constante en los dem\u00e1s casos.\n    * **Improbable fraude puntual en 2005**.\n    \n\n* UNIV.AUT.DE COAHUILA, U. SALTILLO : \n    * Se ha presentado en 2011-2019.\n    * 50-100 sustentantes en cada convocatoria.\n    * Supera la media en m\u00e1s de 6 puntos en 2013, 2015, 2018.\n    * La varianza se mantiene bastante constante\n    * **No hay fraude**.\n    \n\n* UNIV.LA SALLE : \n    * Se ha presentado desde 2001-2008 y 2011-2019.\n    * En torno a 200-350 sustentantes por convocatoria.\n    * Superando la media en m\u00e1s de 6 puntos en todas las ocasiones excepto en 2007, 2013-2015\n    * Un pico no correlativo con la media en 2006. Varianza m\u00e1s o menos constante las dem\u00e1s veces.\n    * **Posible Fraude puntual en 2006**.\n    \n\n\n* UNIV.AUT.DE B.C., U. MEXICALI : \n    * Se ha presentado en 2006-2008 y 2011-2019.\n    * Alrededor de 200 sustentantes por convocatoria.\n    * Supera la media en 2017 en 7 puntos.\n    * Varianza m\u00e1s o menos constante y peque\u00f1a. \n    * **No hay Fraude**.\n    \n\n* ESC.M\u00c9DICO-MILITAR SEDENA : \n    * Se ha presentado desde el 2011-2019 menos los a\u00f1os 2013 y 2015.\n    * <10 sustentantes por convocatoria. No son suficientes para estimar fraude.\n    * Super\u00f3 la media por m\u00e1s de 6 puntos en 2014.\n    * **No es fraude**.\n    \n\n\n* UNIV.AUT.DE AGUASCALIENTES : \n    * Se ha presentado en 2001-2008 y 2011-2019.\n    * En torno a 200 sustentantes por a\u00f1o.\n    * Super\u00f3 la media 2019 en 6.5 puntos.\n    * **No hay Fraude**.\n\n\n\nA\u00f1os fraudulentos clave: 2005-2006, 2012.","1ba93cee":"Dataset completo.","f4834a6b":"Las 30 universidades con mayor varianza de la media, estas universidades y las subsiguientes ser\u00e1n susceptibles de fraude.","b97db565":"\u00danicamente faltan datos para el estado. Veamos si podemos rellenarlos con aquellos conocidos","88718f1b":"## Visualizaci\u00f3n y b\u00fasqueda de fraude","320b90bc":"No necesariamente las entidades catalogadas como fraudulentas son fraudulentas. Los indicios as\u00ed lo indican pero puede ser debido a un buen plan de estudios o a cualquier otro factor.\n\nLo que s\u00ed est\u00e1 claro es que desde 2011 la media de nota promedio de las universidades por a\u00f1o aument\u00f3 en 10 puntos. Adem\u00e1s, quitando a la UNIVERSIDAD PANAMERICANA, la varianza positiva es mayor en el rango de a\u00f1os de 2001 a 2006 donde todos los a\u00f1os se alcanzan los 14 puntos incluso los 16 en 2005."}}