{"cell_type":{"4226c85e":"code","d4c13dd8":"code","27ddc4a2":"code","4f12c8c7":"code","7440dea1":"code","ab3990ce":"code","362e1fce":"code","178027bc":"code","4abe77bf":"code","62f6432b":"code","4db8ccd9":"code","f83444c4":"code","b3feaaed":"code","fe6a918b":"markdown","faf34ebe":"markdown","718682b4":"markdown"},"source":{"4226c85e":"import xarray as xr\nimport numpy as np\nimport matplotlib.pyplot as plt\nimport datetime as dt","d4c13dd8":"model = 'arome'  #weather model (arome or arpege)\nparam = \"tp\"   #parameter name in the file (cf cells below to know the parameter names -> exploration of metadata)\nfile_date = dt.datetime(2017, 2, 14) # Day example ","27ddc4a2":"fname = \"\/kaggle\/input\/defi-ia-2022-test\/Train\/Train\/X_forecast\/2D_%s_%s.nc\" %(model,file_date.strftime('%Y%m%d'))\ndata = xr.open_dataset(fname)","4f12c8c7":"data","7440dea1":"coord = 'longitude'\ndata[coord]","ab3990ce":"data[coord].values[0:10]","362e1fce":"run_date = data['time']\n#run_date.values     #get the values\nrun_date","178027bc":"range_forecasts_dates = data['valid_time']\nrange_forecasts_dates","4abe77bf":"d = data[param]     #param : parameter name defined at the beginning of the Notebook \nd_vals=d.values     #get the values\n###examples to get the information from attributes\n#d.units                      #unit\n#d.long_name                      #long name\nd","62f6432b":"d_vals.shape","4db8ccd9":"import cartopy.crs as ccrs\nimport cartopy.feature as cfeature","f83444c4":"forecast_date = dt.datetime(2017, 2, 14,12,0)","b3feaaed":"# Coordinates of studied area boundaries (in \u00b0N and \u00b0E)\nlllat = 46.25  #lower left latitude\nurlat = 51.896  #upper right latitude\nlllon = -5.842  #lower left longitude\nurlon = 2  #upper right longitude\nextent = [lllon, urlon, lllat, urlat]\n\nfig=plt.figure(figsize=(9,10))\n\n# Select projection\nax = plt.axes(projection=ccrs.PlateCarree())\n\n#plot the data and the background map (coastlines and borders)\nimg = ax.imshow(data.sel(valid_time=forecast_date)[param], interpolation='none', origin='upper', extent=extent)\nax.coastlines(resolution='50m', linewidth=1)\nax.add_feature(cfeature.BORDERS.with_scale('50m'))\n\n\nplt.colorbar(img, orientation= 'horizontal').set_label(d.long_name+ ' (in '+d.units+ ')')\nplt.title(model +\" model - \"+str(forecast_date))\nplt.show()","fe6a918b":"# Note\n\n<font size=\"4.5\">To use <span style=\"color:blue\">**Cartopy**<\/span>, a library to plot data with basemaps (see cells below), it is necessary to <span style=\"color:red\">activate the internet connection<\/span> of that notebook (in edit mode, you can find on the right column, in the *Settings* section, a row entitled *Internet*, put the slider bar on **on**).  <\/font>\n\n<font size=\"4.5\">If it does not still work, check you use the latest environment (in the *Settings* section, click on **Preferences**).<\/font>","faf34ebe":"The structure of the parameter (3 dimensions):\n* number of steps or range forecasts\n* number of points in latitude\n* number of points in longitude  ","718682b4":"# Weather models : 2D parameters\n\nThe aim of this notebook is to indicate how to read the 2D data from weather models.\nThere are 2 weather models:\n* a fine-mesh french weather model called 'AROME' (spatial resolution of 0.025\u00b0)\n* a large-mesh french weather model called 'ARPEGE' (spatial resolution of 0.1\u00b0)\n\nPer model and day, you have the model run of 00h with range forecasts from 00h to 24h. The time step is 1h.\n\nHere are the different weather parameters:\n\n* at 2m: temperature (in K), dew point temperature** (in K) and relative humidity (in %)\n* at 10m: wind speed (in m.s<sup>-1<\/sup>), wind direction (in degrees), U and V wind components*** (in m.s<sup>-1<\/sup>)\n* at the sea level: mean sea level pressure (in Pa)\n* at the ground level: total precipitation (in kg m<sup>-2<\/sup> which is equivalent to mm) **since the beginning of the model run**\n\nFor more information about data, cf [documentation](https:\/\/meteofrance.github.io\/meteonet\/english\/data\/weather-models\/).\n\n** : temperature for which it is needed to refresh an air volume at constant pressure and humidity to become it saturated (i.e. condensation temperature)\n\n*** : horizontal wind speed components, U : from west to east and V : from south to north. "}}