{"cell_type":{"faf1c690":"code","e89e842c":"code","d64a627f":"code","c69f2946":"code","cab19416":"code","742382ae":"code","b06ebbcb":"code","06e3f19f":"code","a4002c12":"code","d934b902":"code","9133ab4d":"code","69e70bfe":"code","83abed69":"code","9540d3ab":"code","a9a47d83":"code","64e0a3dd":"code","89049e4d":"markdown","a9eff5e6":"markdown","4d7a3067":"markdown","340b4367":"markdown","d2e54fdf":"markdown","729fc98b":"markdown","fbe5ad08":"markdown","6ed39159":"markdown","bd622726":"markdown","aaec4402":"markdown","cd0f2349":"markdown","e35cf0bb":"markdown","cb00860c":"markdown","ad6a7b6a":"markdown","4bec8578":"markdown","b78d5b00":"markdown","0f803303":"markdown","98ea4fa5":"markdown","a438c5cf":"markdown","51479bf2":"markdown","d5395143":"markdown","2600830d":"markdown"},"source":{"faf1c690":"import pandas as pd\nimport numpy as np\nimport seaborn as sns\nimport matplotlib.pyplot as plt\n\nimport plotly.io as pio\nimport plotly.express as px\nimport plotly.graph_objects as go\nimport plotly.figure_factory as ff\nfrom plotly.subplots import make_subplots\nfrom plotly.validators.scatter.marker import SymbolValidator\nimport plotly.offline as pyo\npyo.init_notebook_mode()\n\nfrom sklearn.model_selection import train_test_split\nfrom sklearn.neighbors import KNeighborsClassifier\nfrom sklearn.metrics import mean_squared_error\n\ndf = pd.read_csv(\"..\/input\/students-performance-in-exams\/StudentsPerformance.csv\")","e89e842c":"gender_mean = df.groupby('gender')[['math score','reading score','writing score']].mean().round(2).T\nfig = go.Figure(data=[go.Table(\n    header=dict(values=['','Male', 'Female'],\n                line_color='darkslategray',\n                fill_color='lightskyblue',\n                align='center',\n               height=40,\n               font_size=20),\n    cells=dict(values=[gender_mean.index,\n                       gender_mean['male'],\n                       gender_mean['female']],\n               line_color='darkslategray',\n               fill_color='lightcyan',\n               align='center',\n              height=40,\n              font_size= 20))\n])\n\nfig.update_layout(width=800, height=400)\nfig.show()","d64a627f":"fig , axes = plt.subplots(2,3, figsize=(20,10))\nsns.histplot(df[df['gender'] =='male']['math score'],kde=True,ax = axes[0][0])\nsns.histplot(df[df['gender'] =='male']['reading score'],kde=True,ax = axes[0][1])\nsns.histplot(df[df['gender'] =='male']['writing score'],kde=True,ax = axes[0][2])\n\nsns.histplot(df[df['gender'] =='female']['math score'],kde=True,ax = axes[1][0],color='red')\nsns.histplot(df[df['gender'] =='female']['reading score'],kde=True,ax = axes[1][1],color='red')\nsns.histplot(df[df['gender'] =='female']['writing score'],kde=True,ax = axes[1][2],color='red')\n\nfor i in range(0,3):\n    axes[0][i].set_title(\"Male\")\n    axes[1][i].set_title(\"Female\")\n    \n    axes[0][i].set_xlim(0,100)\n    axes[1][i].set_xlim(0,100)\nplt.show()","c69f2946":"df['tmp'] = 1\nfig = px.pie(df, names='race\/ethnicity',values='tmp',hole = 0.8,title='relation tips')\nfig.update_traces(textposition='outside', textinfo='percent+label')\nfig.update_layout(\n    title_text=\"Group percentage\",\n    annotations=[dict(text='Group', x=0.5, y=0.5, font_size=20, showarrow=False)])","cab19416":"df['total'] = (df['math score'] + df['reading score'] + df['writing score']) \/ 3\nfig , axes = plt.subplots(1,4, figsize=(25,8))\nsns.barplot(data = df, x='race\/ethnicity', y='math score',ax = axes[0],ci=None)\naxes[0].set_title(\"Math score\")\nsns.barplot(data = df, x='race\/ethnicity', y='reading score',ax = axes[1],ci=None)\naxes[1].set_title(\"Reading score\")\nsns.barplot(data = df, x='race\/ethnicity', y='writing score',ax = axes[2],ci=None)\naxes[2].set_title(\"Writing score\")\nsns.barplot(data = df, x='race\/ethnicity', y='total',ax = axes[3],ci=None)\naxes[3].set_title(\"Total score\")\n\nfor i in range(0,4):\n    axes[i].set_ylim(55,75)\nplt.show()","742382ae":"fig , axes = plt.subplots(3,5, figsize=(20,15))\nsns.histplot(df[df['race\/ethnicity'] =='group A']['math score'],kde=True,ax = axes[0][0])\nsns.histplot(df[df['race\/ethnicity'] =='group B']['math score'],kde=True,ax = axes[0][1],color='black')\nsns.histplot(df[df['race\/ethnicity'] =='group C']['math score'],kde=True,ax = axes[0][2],color = 'green')\nsns.histplot(df[df['race\/ethnicity'] =='group D']['math score'],kde=True,ax = axes[0][3], color = 'purple')\nsns.histplot(df[df['race\/ethnicity'] =='group E']['math score'],kde=True,ax = axes[0][4], color = 'red')\n\nsns.histplot(df[df['race\/ethnicity'] =='group A']['reading score'],kde=True,ax = axes[1][0])\nsns.histplot(df[df['race\/ethnicity'] =='group B']['reading score'],kde=True,ax = axes[1][1],color='black')\nsns.histplot(df[df['race\/ethnicity'] =='group C']['reading score'],kde=True,ax = axes[1][2],color = 'green')\nsns.histplot(df[df['race\/ethnicity'] =='group D']['reading score'],kde=True,ax = axes[1][3], color = 'purple')\nsns.histplot(df[df['race\/ethnicity'] =='group E']['reading score'],kde=True,ax = axes[1][4], color = 'red')\n\nsns.histplot(df[df['race\/ethnicity'] =='group A']['writing score'],kde=True,ax = axes[2][0])\nsns.histplot(df[df['race\/ethnicity'] =='group B']['writing score'],kde=True,ax = axes[2][1],color='black')\nsns.histplot(df[df['race\/ethnicity'] =='group C']['writing score'],kde=True,ax = axes[2][2],color = 'green')\nsns.histplot(df[df['race\/ethnicity'] =='group D']['writing score'],kde=True,ax = axes[2][3], color = 'purple')\nsns.histplot(df[df['race\/ethnicity'] =='group E']['writing score'],kde=True,ax = axes[2][4], color = 'red')\n\n\nfor i in range(0,3):\n    axes[i][0].set_title(\"group A\")\n    axes[i][1].set_title(\"group B\")\n    axes[i][2].set_title(\"group C\")\n    axes[i][3].set_title(\"group D\")\n    axes[i][4].set_title(\"group E\")\n    \nfor i in range(0,5):\n    axes[0][i].set_xlim(0,100)\n    axes[1][i].set_xlim(0,100)\n    axes[2][i].set_xlim(0,100)\n    \nplt.show()","b06ebbcb":"fig , axes = plt.subplots(1,4, figsize=(25,10),sharey=True)\nsns.barplot(data = df, y='parental level of education', x='math score',ax = axes[0],ci=None)\naxes[0].set_title(\"Math score\")\nsns.barplot(data = df, y='parental level of education', x='reading score',ax = axes[1],ci=None)\naxes[1].set_title(\"Reading score\")\nsns.barplot(data = df, y='parental level of education', x='writing score',ax = axes[2],ci=None)\naxes[2].set_title(\"Writing score\")\nsns.barplot(data = df, y='parental level of education', x='total',ax = axes[3],ci=None)\naxes[3].set_title(\"Total score\")\nfor i in range(0,4):\n    axes[i].set_xlim(60,77.5)\n\nplt.show()","06e3f19f":"fig = make_subplots(\n    rows=1, cols=2,\n    specs=[[{\"type\": \"domain\"}, {\"type\": \"xy\"}]],\n)\nfig.add_trace(go.Pie(labels=['free\/reduced','standard'],values=df.groupby('lunch')['tmp'].count(),hole = 0.8),\n              row=1, col=1)\nfig.update_traces(textposition='outside', textinfo='percent+label')\n\ncolors = ['red','blue']\ntexts = df.groupby('lunch')['total'].mean().round(2)\nfig.add_trace(go.Bar(x = ['free\/reduced','standard'],y= df.groupby('lunch')['total'].mean(),text=texts,marker_color=colors,opacity=.5))\nfig.update_traces(textposition='outside')\nfig.update_layout(showlegend=False)\nfig.layout.margin.update({'t':50, 'b':100,'l':0})\nfig.update_layout(\n    title=\"Score's Relationship with Lunch\",\n    legend_title=\"Legend Title\",\n    font=dict(\n        size=15,\n    )\n)\nfig.show()","a4002c12":"fig = make_subplots(\n    rows=1, cols=2,\n    specs=[[{\"type\": \"domain\"}, {\"type\": \"xy\"}]],\n)\nfig.add_trace(go.Pie(labels=['Completed','None'],values=df.groupby('test preparation course')['tmp'].count(),hole = 0.8),\n              row=1, col=1)\nfig.update_traces(textposition='outside', textinfo='percent+label')\n\ncolors = ['red','blue']\ntexts = df.groupby('test preparation course')['total'].mean().round(2)\nfig.add_trace(go.Bar(x = ['Completed','None'],y= df.groupby('test preparation course')['total'].mean(),text=texts,marker_color=colors,opacity=.5))\nfig.update_traces(textposition='outside')\nfig.update_layout(showlegend=False)\nfig.layout.margin.update({'t':50, 'b':100,'l':0})\nfig.update_layout(\n    \n    title=\"Score's Relationship with preparation course\",\n    legend_title=\"Legend Title\",\n    font=dict(\n        size=15,\n    )\n)\nfig.show()","d934b902":"df.drop(['tmp','total'],axis=1,inplace=True)\n\nX = df.drop(['math score', 'reading score', 'writing score'],axis=1)\ny = df[['math score', 'reading score', 'writing score']]","9133ab4d":"X = pd.get_dummies(X,columns=['gender','race\/ethnicity','parental level of education','lunch','test preparation course'])","69e70bfe":"X.head()","83abed69":"X_train, X_test, y_train, y_test = train_test_split(X,y, test_size=0.2,random_state=100)","9540d3ab":"mse = []\nfor i in range(2,101):\n    model = KNeighborsClassifier(n_neighbors=i)\n    model.fit(X_train, y_train)\n    mse.append(mean_squared_error(y_test,model.predict(X_test)))","a9a47d83":"plt.figure(figsize=(15,10))\nplt.plot(mse)\nplt.show()","64e0a3dd":"model = KNeighborsClassifier(n_neighbors=80)\nmodel.fit(X_train, y_train)\nmse.append(mean_squared_error(y_test,model.predict(X_test)))\n\npred = model.predict(X_test)\n\npred = pd.DataFrame(pred,columns= y_test.columns)\n\nfig , axes = plt.subplots(1,3, figsize=(25,10))\nsns.scatterplot(x=pred['math score'], y=y_test['math score'],ax=axes[0])\naxes[0].plot([40,100], [40,100])\nsns.scatterplot(x=pred['reading score'], y=y_test['reading score'],ax=axes[1])\naxes[1].plot([40,100], [40,100])\nsns.scatterplot(x=pred['writing score'], y=y_test['writing score'],ax=axes[2])\naxes[2].plot([40,100], [40,100])\nplt.show()","89049e4d":"### Group E is show best score in all subjects. and Group A is Worst grade. \n### We can know that Groups have priority (Grade : A < B < C < D < E)","a9eff5e6":"# <p style=\"background-color:skyblue; font-family:newtimeroman; font-size:150%; text-align:center; border-radius: 15px 50px;\">Who will get good grades?<\/p>\n![](https:\/\/www.gannett-cdn.com\/-mm-\/900b93cfc33a420aa612b7d27f5759d6be80e12e\/c=0-45-714-448\/local\/-\/media\/2016\/01\/06\/Nashville\/Nashville\/635876956564303673-grades.jpg?auto=webp&format=pjpg&width=1200)","4d7a3067":"### First, Let's look up the Group's rate.\n### Each Groups have another percentage. The Group C is 31.9% that most percentage \n### And group D is 26.2% that followed C, The Group A is the least percentage","340b4367":"## 1. Gender \n### Is it have grade relation with gender? \n### Some people say that Male is logical so, male is better than female in Math. Let's check the grade by subjects","d2e54fdf":"## 4. Lunch\n### Is it effect to the score thah Standard Lunch and free\/reduced Lunch ? ","729fc98b":"---\n## 3. Parental level of education\n### Parental's education level effets to child's score ?","fbe5ad08":"### Standard Lunch is more than free\/reduced Lunch. about 30 percentage\n### Through Bar chart, Standard Lunch and Not Standard have a big difference in grade\n---","6ed39159":"## Conclusion\n* Gender : Male have high score in math but, In other subjects, Female have high score than male.\n* Group : Each group have Class that Group A < Group B < Group C < Group D < Group E\n* Parental level of education : Parental level of education effect to child's score\n* Lunch : Standard lunch is more high score than free\/reduce lunch\n* est preparation course : Completed the course more high score than None","bd622726":"### Completed the preparation course rate is 35.8 % and they get more high score than None group\n---","aaec4402":"### In score's distribution, It have not special characteristics without score.","cd0f2349":"### Through score's distribution, Male's score is distributed at the center compare with female.\n---\n","e35cf0bb":"# <p style=\"background-color:skyblue; font-family:newtimeroman; font-size:150%; text-align:center; border-radius: 15px 50px;\">Imort Libraries and Load dataset<\/p>","cb00860c":"# <p style=\"background-color:skyblue; font-family:newtimeroman; font-size:150%; text-align:center; border-radius: 15px 50px;\">EDA : Features<\/p>\n","ad6a7b6a":"### Compare using score's mean value, The Male's math score is higher than Female's math score. \n### And In Reading score, and Writing score, The Female's grade are more higher than Male's grade. \n### Especially, In writing score, The Female's score  with Male's score has diffenrence more 8 score","4bec8578":"## 2. Group\n### Groups have mean? like Basic group, normal group, a deep-seated class group.","b78d5b00":"### The Parental's education level effect to child's score. \n### The master's degree is highest in group, But some high school is higher than high school.\n---","0f803303":"### Feature engineering to make model","98ea4fa5":"## 5. Test preparation course\n### Surely, Preparation the test is higher than didn't?","a438c5cf":"### I will use KNN model to predict the score. ","51479bf2":"# <p style=\"background-color:skyblue; font-family:newtimeroman; font-size:150%; text-align:center; border-radius: 15px 50px;\">Modeling<\/p>\n","d5395143":"<p style=\"background-color:skyblue; font-family:newtimeroman; font-size:150%; text-align:center; border-radius: 15px 50px;\">Finish<\/p>\n\n![](https:\/\/1.bp.blogspot.com\/-A58QTJ8JYo8\/XtedXWLDS8I\/AAAAAAAACpE\/vAAJyFd1TZ8xHXhh3akSLNSFj99YIjjewCLcBGAsYHQ\/s320\/Thank-You-Gif.gif)","2600830d":"# <p style=\"background-color:skyblue; font-family:newtimeroman; font-size:150%; text-align:center; border-radius: 15px 50px;\">Feature engineering<\/p>\n"}}