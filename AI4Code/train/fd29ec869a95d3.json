{"cell_type":{"3b344fe7":"code","6cf0a530":"code","46c44222":"code","6b2be12e":"code","adc2a014":"code","563d277f":"code","e56d4eb4":"code","57e19d97":"code","972b1939":"code","bb6b7d87":"code","06946172":"code","dff02ff3":"code","9d7efe51":"code","ff30565c":"code","24cff3e5":"code","51fbc7da":"code","f51debd1":"code","2088048c":"code","23eabc83":"code","243a71cf":"code","55129563":"code","b49c83a9":"code","32a10a91":"code","e9b2884b":"code","7cce7060":"code","e3820024":"code","9aaf565c":"code","91ff4366":"code","f1c80577":"code","bc56bdfb":"code","9d2faa6b":"code","c972b579":"code","bee63762":"code","9dfc6fc0":"code","dba87737":"code","8c3ca8e3":"code","4db46608":"code","148a5ff2":"code","43440902":"code","a7f4808d":"code","2100b57e":"code","de236a69":"code","8df99f3e":"code","f7039efe":"code","40519d26":"code","6d7dac3c":"code","7427d952":"code","792dc7ee":"code","28e0c846":"code","63a28db4":"code","83158ecd":"code","adfc62e0":"code","b02d7b83":"code","be96efb7":"code","a27986a3":"code","b6f76038":"code","7f7bd349":"code","b0c67f08":"code","24bddb04":"code","deb7215b":"code","7cac5518":"code","3ec48f98":"code","5f03deea":"code","0246f966":"code","c62be5c7":"code","aaf6193e":"code","244c934b":"code","6be9d885":"code","0edd4f78":"code","9a80bdbd":"code","39520244":"code","0021c924":"code","26b9bce5":"code","465ab44a":"code","64235934":"code","0fd35ddc":"code","5571b07f":"code","bac29755":"code","d8eb5f09":"code","5c39e3d6":"code","e9012477":"code","fbc4f7ea":"code","58b8d639":"code","b384d38e":"code","b95cc048":"code","d5cb0757":"code","5fee4f39":"code","090d25a9":"code","3cfaedf5":"code","6dae7413":"code","0e03f20c":"code","6a645aa0":"code","6bfa3f35":"markdown","44c99fb0":"markdown","e724c565":"markdown","7b85afc9":"markdown","550fba5c":"markdown","68947897":"markdown","615e2fd8":"markdown","2e1aa85a":"markdown","e46f0047":"markdown","7639015b":"markdown","360902e3":"markdown","91957f09":"markdown","a5287bbc":"markdown","cf2a1a8f":"markdown","06a3b70f":"markdown","cc19991f":"markdown","78040a49":"markdown","e835f42e":"markdown","0c516943":"markdown","b99aa4f9":"markdown","f3736b6b":"markdown","5777b156":"markdown","ed749b33":"markdown","eab8998f":"markdown","3c2f1047":"markdown","1f8c8900":"markdown","37f5c8db":"markdown","21758ae2":"markdown","b3083365":"markdown"},"source":{"3b344fe7":"import numpy as np\nimport pandas as pd\nimport matplotlib.pyplot as plt\nimport seaborn as sns\n%matplotlib inline\nimport warnings\nwarnings.filterwarnings('ignore')","6cf0a530":"df=pd.read_csv('..\/input\/customer-personality-analysis\/marketing_campaign.csv',sep='\\t')","46c44222":"df.head()","6b2be12e":"df.shape","adc2a014":"df.columns","563d277f":"df.nunique()","e56d4eb4":"df.drop(['Z_CostContact', 'Z_Revenue'],axis=1,inplace=True)","57e19d97":"df.isnull().sum()","972b1939":"sns.distplot(df['Income'])\nplt.show()","bb6b7d87":"df['Income'] = df['Income'].fillna(df['Income'].median())","06946172":"df['Campaign_accepted']=df['AcceptedCmp1']+df['AcceptedCmp2']+df['AcceptedCmp3']+df['AcceptedCmp4']+df['AcceptedCmp5']+df['Response']","dff02ff3":"df.drop(['AcceptedCmp3', 'AcceptedCmp4', 'AcceptedCmp5', 'AcceptedCmp1','AcceptedCmp2','Response']\n        ,axis=1,inplace=True)","9d7efe51":"df['Purchase__amount']=df['MntWines']+df['MntFruits']+df['MntMeatProducts']+df['MntFishProducts']+df['MntSweetProducts']+df['MntGoldProds']","ff30565c":"df.drop(['MntWines', 'MntFruits','MntMeatProducts', 'MntFishProducts', 'MntSweetProducts','MntGoldProds']\n        ,axis=1,inplace=True)","24cff3e5":"df['Total_purchase']=df['NumWebPurchases'] + df['NumCatalogPurchases'] + df['NumStorePurchases'] + df['NumDealsPurchases']","51fbc7da":"df.drop(['NumWebPurchases', 'NumCatalogPurchases','NumStorePurchases','NumDealsPurchases'],axis=1,inplace=True)","f51debd1":"df.head()","2088048c":"df['Age']=2021-df['Year_Birth']","23eabc83":"df.drop(['Year_Birth'],axis=1,inplace=True)","243a71cf":"df['Education'].value_counts()","55129563":"df['Education'] = df['Education'].replace(['PhD','2n Cycle','Graduation', 'Master'],'PG')  \ndf['Education'] = df['Education'].replace(['Basic'], 'UG')","b49c83a9":"df['Marital_Status'].value_counts()","32a10a91":"df['Marital_Status'] = df['Marital_Status'].replace(['Married', 'Together'],'Not_single')\ndf['Marital_Status'] = df['Marital_Status'].replace(['Divorced', 'Widow', 'Alone', 'YOLO', 'Absurd'],'Single')","e9b2884b":"df['total_kids']=df['Kidhome']+df['Teenhome']","7cce7060":"df.drop(['Kidhome','Teenhome'],axis=1,inplace=True)","e3820024":"df['Dt_Customer']=pd.to_datetime(df['Dt_Customer'])","9aaf565c":"df['2021']='01-01-2021'","91ff4366":"df['2021']=pd.to_datetime(df['2021'])","f1c80577":"df['Customer_year']=(df['2021'].dt.year)-(df['Dt_Customer'].dt.year)","bc56bdfb":"df.drop(['Dt_Customer','2021'],axis=1,inplace=True)","9d2faa6b":"df.head()","c972b579":"sns.pairplot(df,kind='reg')\nplt.show()","bee63762":"plt.figure(figsize=(20,20))\nsns.heatmap(df.corr(), annot=True)\nplt.show()","9dfc6fc0":"sns.countplot(df['Education'])\nplt.show()","dba87737":"df.groupby(['Education'])['Education'].count()","8c3ca8e3":"sns.countplot(df['Marital_Status'])\nplt.show()","4db46608":"df.groupby(['Marital_Status'])['Marital_Status'].count()","148a5ff2":"sns.distplot(df['Income'])\nplt.show()","43440902":"df['Income'].describe()","a7f4808d":"df[df['Income']>400000]","2100b57e":"df.drop(df[df['Income']>400000].index,inplace=True)","de236a69":"sns.distplot(df['Recency'])\nplt.show()","8df99f3e":"df['Recency'].describe()","f7039efe":"sns.distplot(df['NumWebVisitsMonth'])\nplt.show()","40519d26":"df['NumWebVisitsMonth'].describe()","6d7dac3c":"df.drop(['NumWebVisitsMonth'],axis=1,inplace=True)","7427d952":"sns.countplot(df['Complain'])\nplt.show()","792dc7ee":"df.groupby(['Complain'])['Complain'].count()","28e0c846":"df.drop(['Complain'],axis=1,inplace=True)","63a28db4":"sns.countplot(df['Campaign_accepted'])\nplt.show()","83158ecd":"df.groupby(['Campaign_accepted'])['Campaign_accepted'].count()","adfc62e0":"sns.distplot(df['Purchase__amount'])\nplt.show()","b02d7b83":"df['Purchase__amount'].describe()","be96efb7":"sns.distplot(df['Total_purchase'])\nplt.show()","a27986a3":"df['Total_purchase'].describe()","b6f76038":"df[df['Total_purchase']==0][['Total_purchase','Purchase__amount']]","7f7bd349":"df.drop(df[(df['Total_purchase']==0) & (df['Purchase__amount']>0)].index,inplace=True)","b0c67f08":"sns.distplot(df['Age'])\nplt.show()","24bddb04":"df['Age'].describe()","deb7215b":"df[df['Age']>95]","7cac5518":"df.drop(df[df['Age']>95].index,inplace=True)","3ec48f98":"sns.countplot(df['total_kids'])\nplt.show()","5f03deea":"df.groupby(['total_kids'])['total_kids'].count()","0246f966":"sns.countplot(df['Customer_year'])\nplt.show()","c62be5c7":"df.groupby(['Customer_year'])['Customer_year'].count()","aaf6193e":"df.head(2)","244c934b":"sns.barplot(df['Education'],df['Purchase__amount'])\nplt.show()","6be9d885":"sns.barplot(df['Education'],df['Total_purchase'])\nplt.show()","0edd4f78":"sns.barplot(df['Marital_Status'],df['Purchase__amount'])\nplt.show()","9a80bdbd":"sns.barplot(df['Marital_Status'],df['Total_purchase'])\nplt.show()","39520244":"sns.barplot(df['total_kids'],df['Purchase__amount'])\nplt.show()","0021c924":"sns.barplot(df['total_kids'],df['Total_purchase'])\nplt.show()","26b9bce5":"from sklearn.preprocessing import LabelEncoder\n\nle=LabelEncoder()","465ab44a":"cat = []\nfor i in df.columns:\n    if (df[i].dtypes == \"object\"):\n        cat.append(i)\n\nprint(cat)","64235934":"for x in cat:\n    df[x]=df[[x]].apply(le.fit_transform)","0fd35ddc":"from sklearn.preprocessing import StandardScaler\n\nss=StandardScaler()","5571b07f":"df_val=df.drop(['ID'],axis=1)","bac29755":"scaled_features = ss.fit_transform(df_val.values)\nscaled_features_df = pd.DataFrame(scaled_features, index=df_val.index, columns=df_val.columns)","d8eb5f09":"scaled_features_df.head()","5c39e3d6":"#pip install yellowbrick","e9012477":"from sklearn.cluster import KMeans\nfrom yellowbrick.cluster import KElbowVisualizer","fbc4f7ea":"Elbow_M = KElbowVisualizer(KMeans(), k=10,timings=False,metric='silhouette')\nElbow_M.fit(scaled_features_df)\nElbow_M.show()\nplt.show()","58b8d639":"kmeans=KMeans(n_clusters=3,random_state=10)","b384d38e":"kmeans.fit(scaled_features_df)","b95cc048":"pred=kmeans.predict(scaled_features_df)\ndf['Cluster']=pred","d5cb0757":"df.head()","5fee4f39":"sns.countplot(df['Cluster'])","090d25a9":"df.groupby('Cluster')['Cluster'].count()","3cfaedf5":"pl = sns.scatterplot(data = df,x=df[\"Purchase__amount\"], y=df[\"Income\"],hue=df[\"Cluster\"],palette='viridis')\npl.set_title(\"Cluster's Profile Based On Income And Spending\")\nplt.legend()\nplt.show()","6dae7413":"df[df['Cluster']==0].describe().transpose()","0e03f20c":"df[df['Cluster']==1].describe().transpose()","6a645aa0":"df[df['Cluster']==2].describe().transpose()","6bfa3f35":"Total expense and total purachase for Single and not signle are about eqaul.","44c99fb0":"# Clustering","e724c565":"* Creating new feature age (as in 2021) using Year_Birth ","7b85afc9":"Well this does not make any sense that Total purchase is 0 and number of purchase is more than 0. Hence dropping these 4 entries","550fba5c":"This must be due error in data entry. Hence removing these 3 entries","68947897":"## univariate analysis","615e2fd8":"* Creating new feature for total accepted offer in all campaigns","2e1aa85a":"# Conclusion","e46f0047":"* Less number of Single customer","7639015b":"* dividing marital stauts in single or not single","360902e3":"# Cluster Analysis","91957f09":"* Imputing missing value for Income column","a5287bbc":"# Data Cleaning and Feature Generation","cf2a1a8f":"The above figure indicates that 3 will be an optimal number of clusters for this data.","06a3b70f":"* Creating new feature for total number of purchase","cc19991f":"## Thanks and please upvote if you liked it!!","78040a49":"From analysis of 3 clusters:\n#### 1. Cluster 0:- \n1. They have done post-graduation.\n2. Most of them didn't accepted the campaign offer.\n3. Thier mean income is low and also spent low on purchasing.\n4. Mean age is 50.\n \n#### 2. Cluster 1:-\n1. They have done post-graduation.\n2. Most of them accepted the campaign offer.\n3. Thier mean income is highest and also spent the most on purchasing.\n4. Mean age is 55.\n\n#### 3. Cluster 2:-\n1. They have done under-graduation.\n2. Most of them didn't accepted the campaign offer.\n3. Thier mean income is lowest and also spent least on purchasing.\n4. Mean age is 43.","e835f42e":"* less number of UG customer","0c516943":"# EDA","b99aa4f9":"Customer with 0 kids spent more on purchasing.","f3736b6b":"# Data preprocessing","5777b156":"It is better to remove this feature because this doesnot provide any customer beahvaiour collectively.","ed749b33":"* Creating new column to show number of months the customer is using website servive","eab8998f":"Very low number of complaints, hence it is better to remove from the data","3c2f1047":"* Creating new column for total kids in home","1f8c8900":"* Dividing education in 2 class ","37f5c8db":"## multivariate analysis","21758ae2":"* Dropping Z_Revenue and Z_CostContact as they have same value throughout the data and doesnot provide any usefull insight about data. Hence dropping these features.","b3083365":"* Creating new feature for total amount spent on buying products from website in last 2 years"}}