{"cell_type":{"e3488064":"code","6fd182f2":"code","cb59d15e":"code","8c126647":"code","73883b4d":"code","a3bdb80e":"code","3c42d3ca":"code","6ffb883b":"code","a400fa6c":"code","a93dff28":"code","4adf5a14":"code","40ffbab7":"code","567ada7e":"code","ba8338a0":"code","62f86d03":"code","81dd89fc":"code","2b43fa46":"code","3ea7d4b7":"code","51839453":"code","ae45625b":"markdown","a0dab5eb":"markdown","352e535e":"markdown","0094d17e":"markdown","a9d1b278":"markdown","fced5ea4":"markdown","92338604":"markdown","a04f3189":"markdown","dfe7df7e":"markdown"},"source":{"e3488064":"# This Python 3 environment comes with many helpful analytics libraries installed\n# It is defined by the kaggle\/python Docker image: https:\/\/github.com\/kaggle\/docker-python\n# For example, here's several helpful packages to load\n\nimport numpy as np # linear algebra\nimport pandas as pd # data processing, CSV file I\/O (e.g. pd.read_csv)\nimport matplotlib.pylab as plt\nimport seaborn as sb \n\n# Input data files are available in the read-only \"..\/input\/\" directory\n# For example, running this (by clicking run or pressing Shift+Enter) will list all files under the input directory\n\nimport os\nfor dirname, _, filenames in os.walk('\/kaggle\/input'):\n    for filename in filenames:\n        print(os.path.join(dirname, filename))\n\n# You can write up to 20GB to the current directory (\/kaggle\/working\/) that gets preserved as output when you create a version using \"Save & Run All\" \n# You can also write temporary files to \/kaggle\/temp\/, but they won't be saved outside of the current session","6fd182f2":"df = pd.read_csv('\/kaggle\/input\/covid19-data-from-john-hopkins-university\/CONVENIENT_us_confirmed_cases.csv')\n","cb59d15e":"df.head() #to understand the data ","8c126647":"#delete first row index 0\ndf = df.drop([0])","73883b4d":"# convert to datatime\ndf = df.rename(columns={'Province_State': 'Date'})\ndf['Date'] = pd.to_datetime(df['Date'])\ndf.head()","a3bdb80e":"#Convert column headers into a column its own column\n#Also create a new column that contains the number of cases \ndf = df.melt(id_vars=[\"Date\"], \n        var_name=\"State\", \n        value_name=\"Count\")\ndf.head()","3c42d3ca":"#Make a column containing only months\ndf['Month'] = df['Date'].dt.month\ndf.head()","6ffb883b":"#Convert from strings to numeric\ndf['Month'] = pd.to_numeric(df['Month'])\ndf['Count'] = pd.to_numeric(df['Count'])","a400fa6c":"#Some months have a .1 or .2 \n#Combine states with the same name togther \n#Possibility is to create a function \ndef get_states(state):\n    return state.split(\".\")[0]\n\ndf['States']= df['State'].apply(lambda x: get_states(x))\ndf.head()\n","a93dff28":"#The count column should be a sum up all the cases for each state\naggregation_functions = {'Count': 'sum', 'States': 'first'}\ndf_new = df.groupby(df['States']).aggregate(aggregation_functions)\ndf_new.head(n = 10)\n\n","4adf5a14":"#Sort the data so that it is in descending order\ndf_new_sorted = df_new.sort_values('Count', ascending=False)","40ffbab7":"#plot\n#top ten cases \ndf_new_top_ten = df_new_sorted.head(10)\nplt.bar(df_new_top_ten['States'],df_new_top_ten['Count'])\nplt.xticks(df_new_top_ten['States'],rotation = 'vertical', size = 10)\nplt.title('Total Confirmed Cases for the \\nTop Ten States',size = 16)\nplt.ylabel('Total Confirmed Cases')\nplt.xlabel('States')\nplt.show()","567ada7e":"#load in metadata\ndf2 = pd.read_csv('\/kaggle\/input\/covid19-data-from-john-hopkins-university\/CONVENIENT_us_metadata.csv')\ndf2.head()","ba8338a0":"def get_states(state):\n    return state.split(\".\")[0]\n\ndf2['States']= df2['Province_State'].apply(lambda x: get_states(x))\ndf2.head()","62f86d03":"#Sum up population for each state\naggregation_functions2 = {'Population': 'sum', 'States': 'first'}\ndf2_new = df2.groupby(df2['States']).aggregate(aggregation_functions2)\ndf2_new.head()","81dd89fc":"#Merge the two dataframes, each state associated with population\n#Used the unsorted data, to concatenate via index \ndf_combined = pd.concat([df_new, df2_new], axis = 1)\ndf_combined['Population'] = pd.to_numeric(df_combined['Population'])\n#sort data in decending order in terms of Count\ndf_combined_sorted = df_combined.sort_values('Count', ascending=False)\ndf_combined_sorted.head()","2b43fa46":"#Delete the extra columm of states \ndf_combined_sorted = df_combined_sorted.loc[:, ~df_combined_sorted.columns.duplicated()]\ndf_combined_sorted.head()","3ea7d4b7":"#top ten cases and overlay plot with population size\ndf_com_top_ten = df_combined_sorted.head(10)\nStates = df_com_top_ten['States']\nCases  = df_com_top_ten['Count']\nPopulation = df_com_top_ten['Population']\nfig, ax1 = plt.subplots()\n\nax2 = ax1.twinx()\nax1.bar(States,Cases, color = 'k')\nax2.plot(States, Population, 'g-')\nax1.set_title('Total Confirmed Cases for the \\nTop Ten States',size = 16)\nax1.set_xlabel('States', size = 14)\nax1.set_ylabel('Number of Confirmed Cases', color='k', size = 14)\nax2.set_ylabel('Population', color='g', size = 12)\nax1.set_xticklabels(States, rotation = 'vertical', size = 10)\nplt.show()","51839453":"#look at the state of Texas using a histogram\ndf_texas = df.loc[df['States'] == 'Texas']\n\nimport plotly.express as px\n\nplot = px.histogram(df_texas, y=\"Count\", x=\"Month\",\n                    title = 'Total Number of Confirmed Cases Texas')\nplot.show()\n","ae45625b":"## Load in US metadata","a0dab5eb":"## Plot Texas confirmed cases for each month","352e535e":"## Data Cleaning","0094d17e":"# Importing Packages and Data","a9d1b278":"### Which state has the highest number of confirmed cases across all months? ","fced5ea4":"### Further analysis can be conducted to understand the peak in cases November. Is this due to external factors like policies or social distancing?","92338604":"## Data Cleaning","a04f3189":"### A Question that pops up is why certain states have such a high number of confirmed cases? Is this due to population density or other external factors? To answer this question, a plot can be made that accounts for population density","dfe7df7e":"### An interesting observation Texas has a population less than California but still acounts for higher number of covid cases. "}}