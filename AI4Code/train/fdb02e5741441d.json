{"cell_type":{"4c8aac23":"code","804837b7":"code","06a34b34":"code","46cec52b":"code","2a7675b8":"code","41cc8dd7":"code","99795330":"code","a89a2cfd":"code","afd711e1":"code","a7434501":"code","01a76acb":"code","7e861668":"code","93a083e5":"code","f0bf6b5a":"code","11b3c6e8":"code","2e586344":"code","b5d6f0b8":"code","1aeaccc7":"markdown","faee397c":"markdown","ad782cc3":"markdown","095a5597":"markdown","57626f7a":"markdown","dd00bd6a":"markdown"},"source":{"4c8aac23":"# # This Python 3 environment comes with many helpful analytics libraries installed\n# # It is defined by the kaggle\/python docker image: https:\/\/github.com\/kaggle\/docker-python\n# # For example, here's several helpful packages to load in \n\n# import numpy as np # linear algebra\n# import pandas as pd # data processing, CSV file I\/O (e.g. pd.read_csv)\n# import os\n# # Input data files are available in the \"..\/input\/\" directory.\n# # For example, running this (by clicking run or pressing Shift+Enter) will list all files under the input directory\n\n\n# for dirname, _, filenames in os.walk('\/kaggle\/input'):\n#     for filename in filenames:\n#         os.path.join(dirname, filename)\n\n# # Any results you write to the current directory are saved as output.","804837b7":"import numpy as np\nimport pandas as pd\nimport os\nimport imageio\nimport matplotlib as mpl\nimport matplotlib.pyplot as plt\nimport matplotlib.image as mpimg\nfrom PIL import Image, ImageOps\nimport scipy.ndimage as ndi\nimport cv2","06a34b34":"dirname = '\/kaggle\/input'\ntrain_path = os.path.join(dirname, 'chest-xray-pneumonia\/chest_xray\/chest_xray\/train')\ntrain_nrml_pth = os.path.join(train_path, 'NORMAL')\ntrain_pnm_pth = os.path.join(train_path, 'PNEUMONIA')\ntest_path = os.path.join(dirname, 'chest-xray-pneumonia\/chest_xray\/chest_xray\/test')\ntest_nrml_pth = os.path.join(test_path, 'NORMAL')\ntest_pnm_pth = os.path.join(test_path, 'PNEUMONIA')\nval_path = os.path.join(dirname, 'chest-xray-pneumonia\/chest_xray\/chest_xray\/test')\nval_nrml_pth = os.path.join(val_path, 'NORMAL')\nval_pnm_pth = os.path.join(val_path, 'PNEUMONIA')","46cec52b":"def plot_imgs(item_dir, num_imgs=25):\n    all_item_dirs = os.listdir(item_dir)\n    item_files = [os.path.join(item_dir, file) for file in all_item_dirs][:num_imgs]\n\n    plt.figure(figsize=(10, 10))\n    for idx, img_path in enumerate(item_files):\n        plt.subplot(5, 5, idx+1)\n\n        img = plt.imread(img_path)\n        img = cv2.cvtColor(img, cv2.COLOR_BGR2RGB)\n        plt.imshow(img)\n\n    plt.tight_layout()","2a7675b8":"plot_imgs(train_nrml_pth)","41cc8dd7":"plot_imgs(train_pnm_pth)","99795330":"def plot_img_hist(item_dir, num_img=6):\n    all_item_dirs = os.listdir(item_dir)\n    item_files = [os.path.join(item_dir, file) for file in all_item_dirs][:num_img]\n  \n  #plt.figure(figsize=(10, 10))\n    for idx, img_path in enumerate(item_files):\n        fig1 = plt.figure(idx,figsize=(10, 10))\n        fig1.add_subplot(2, 2, 1)\n        img = mpimg.imread(img_path, )\n        img = cv2. cvtColor(img, cv2. COLOR_BGR2RGB)\n        plt.imshow(img)\n        fig1.add_subplot(2, 2, 2)\n        plt.hist(img.ravel(),bins=256, fc='k', ec='k')\n    \n    plt.tight_layout()","a89a2cfd":"plot_img_hist(train_pnm_pth,1)","afd711e1":"dirname_work = '\/kaggle'\ndir_chest_xray = os.path.join('\/kaggle', 'chest_xray')\nos.mkdir('\/kaggle\/chest_xray\/')\nos.mkdir('\/kaggle\/chest_xray\/train')\nos.mkdir('\/kaggle\/chest_xray\/train\/NORMAL')\nos.mkdir('\/kaggle\/chest_xray\/train\/PNEUMONIA')\ntrain_path_work = os.path.join(dir_chest_xray, 'train')\ntrain_nrml_pth_work = os.path.join(train_path_work, 'NORMAL')\ntrain_pnm_pth_work = os.path.join(train_path_work, 'PNEUMONIA')\n\n\nos.mkdir('\/kaggle\/chest_xray\/test')\nos.mkdir('\/kaggle\/chest_xray\/test\/NORMAL')\nos.mkdir('\/kaggle\/chest_xray\/test\/PNEUMONIA')\ntest_path_work = os.path.join(dir_chest_xray, 'test')\ntest_nrml_pth_work = os.path.join(test_path_work, 'NORMAL')\ntest_pnm_pth_work = os.path.join(test_path_work, 'PNEUMONIA')","a7434501":"def image_resizing(path_from, path_to, height=500, width=500):\n    size = height, width\n    i=1\n    files = os.listdir(path_from)\n    for file in files: \n        try:\n            file_dir = os.path.join(path_from, file)\n            file_dir_save = os.path.join(path_to, file)\n            img = Image.open(file_dir)\n            img = img.resize(size, Image.ANTIALIAS)\n            img = img.convert(\"RGB\")\n            img.save(file_dir_save) \n            i=i+1\n        except:\n            continue","01a76acb":"image_resizing(train_nrml_pth, train_nrml_pth_work, 300, 300)","7e861668":"image_resizing(train_pnm_pth, train_pnm_pth_work, 300, 300)","93a083e5":"image_resizing(test_nrml_pth, test_nrml_pth_work, 300, 300)\nimage_resizing(test_pnm_pth, test_pnm_pth_work, 300, 300)","f0bf6b5a":"plot_imgs(train_nrml_pth_work)","11b3c6e8":"def  hist_equal(path_from, path_to):\n    i=1\n    files = os.listdir(path_from)\n    for file in files: \n        try:\n            file_dir = os.path.join(path_from, file)\n            file_dir_save = os.path.join(path_to, file)\n            img = Image.open(file_dir)\n            img = ImageOps.equalize(img)\n            #img = img.convert(\"RGB\") #konwersja z RGBA do RGB, usuniecie kana\u0142u alfa zeby zapisa\u0107 do jpg\n            img.save(file_dir_save) \n            i=i+1\n        except:\n            continue","2e586344":"hist_equal(train_pnm_pth_work, train_pnm_pth_work)\nhist_equal(train_nrml_pth_work, train_nrml_pth_work)\n\nhist_equal(test_pnm_pth_work, test_pnm_pth_work)\nhist_equal(test_nrml_pth_work, test_nrml_pth_work)","b5d6f0b8":"plot_img_hist(train_pnm_pth_work, 2)","1aeaccc7":"**Histogram equalization**","faee397c":"**Image resizing**","ad782cc3":"**Histograms and resizing**","095a5597":"**Plotted Images**","57626f7a":"Images of Pneumonia","dd00bd6a":"Images of Normal People"}}