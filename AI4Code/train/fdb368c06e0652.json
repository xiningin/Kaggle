{"cell_type":{"8a3988cd":"code","d027a932":"code","b5f0fad9":"code","fe129ccb":"code","0c013c44":"code","01c030ec":"code","4485a592":"code","5b50fcbc":"code","f2635dc3":"code","650b4d95":"code","e2288cf3":"code","0daaeaca":"code","647a263a":"markdown","dc6a01db":"markdown","ad07e75a":"markdown","baeef0c2":"markdown","7e11542a":"markdown","42249886":"markdown"},"source":{"8a3988cd":"# \u30e9\u30a4\u30d6\u30e9\u30ea\u306e\u30a4\u30f3\u30dd\u30fc\u30c8\nimport numpy as np # \u884c\u5217\u6f14\u7b97\nimport pandas as pd # \u30c6\u30fc\u30d6\u30eb\u30c7\u30fc\u30bf\u3092\u6271\u3046\npd.set_option(\"display.max_columns\", 100) # \u30ab\u30e9\u30e0\u6570\u8868\u793a\u306e\u4e0a\u9650\u3092100\u306b\u7de9\u548c\n\nimport matplotlib.pyplot as plt # \u53ef\u8996\u5316\u30e9\u30a4\u30d6\u30e9\u30ea\nplt.style.use('ggplot')\n%matplotlib inline\n\nfrom category_encoders import CountEncoder # \u30ab\u30c6\u30b4\u30ea\u3092\u6570\u5024\u306b\u5909\u63db\uff08\u30a8\u30f3\u30b3\u30fc\u30c7\u30a3\u30f3\u30b0\uff09\nfrom sklearn.feature_extraction.text import TfidfVectorizer # scikit-learn\u3000python\u3067ML\u3084\u308b\u4e0a\u3067\u306e\u30c7\u30d5\u30a1\u30af\u30c8\u30e9\u30a4\u30d6\u30e9\u30ea\nfrom sklearn.metrics import mean_absolute_error\nfrom sklearn.model_selection import KFold\n\nfrom tqdm.notebook import tqdm # \u30d7\u30ed\u30b0\u30ec\u30b9\u30d0\u30fc\nfrom xgboost import XGBRegressor # \u5b66\u7fd2\u5668\uff08\u5f37\u3044\u3084\u3064\uff09\nimport cv2 #opencv, \u753b\u50cf\u30c7\u30fc\u30bf\u306e\u5404\u7a2e\u51e6\u7406\u306b\u4f7f\u3046","d027a932":"# \u30e1\u30a4\u30f3\u30c7\u30fc\u30bf\u3092\u8aad\u307f\u8fbc\u3093\u3067\u898b\u307e\u3059\ndf_train = pd.read_csv('\/kaggle\/input\/data-science-autumn-2021\/train.csv', parse_dates=['latest_saledate'])\ndf_test = pd.read_csv('\/kaggle\/input\/data-science-autumn-2021\/test.csv', parse_dates=['latest_saledate'])","b5f0fad9":"# \u8aac\u660e\u5909\u6570\u3068\u30bf\u30fc\u30b2\u30c3\u30c8\u5909\u6570\u306b\u5206\u5272\u3057\u3066\u304a\u304d\u307e\u3059\n# \u30c6\u30ad\u30b9\u30c8\u3068\u753b\u50cf\u4e00\u65e6\u9664\u3044\u3066\u304a\u304d\u307e\u3057\u3087\u3046\u3002\u3053\u308c\u3089\u306e\u6271\u3044\u306b\u3064\u3044\u3066\u306f\u672c\u30b3\u30f3\u30da\u3092\u901a\u3058\u3066\u5b66\u3093\u3067\u3044\u304d\u307e\u3057\u3087\u3046\u3002\u307e\u305f\u3001\u65e5\u4ed8\u3082year\u3068month\u304c\u65e2\u306b\u542b\u307e\u308c\u3066\u3044\u308b\u306e\u3067\u4e00\u65e6\u4f7f\u308f\u306a\u3044\u3067\u3084\u3063\u3066\u307f\u307e\u3059\u3002\ny_train = df_train.latestPrice\nX_train = df_train.drop(['latestPrice', 'description', 'homeImage', 'latest_saledate'], axis=1)\nX_test = df_test.drop(['description', 'homeImage', 'latest_saledate'], axis=1)","fe129ccb":"# streetAddress\u3082\u3042\u3068\u3067\u8003\u3048\u308b\u3053\u3068\u306b\u3057\u3066\u4e00\u65e6\u9664\u3044\u3066\u304a\u304d\u307e\u3059\u3002\n# 2\u5ea6\u3042\u308b\u3053\u3068\u306f3\u5ea6\u3042\u308b\u65b9\u5f0f\u3067\u5b66\u7fd2\u3059\u308b\u306e\u304c\u6a5f\u68b0\u5b66\u7fd2\u3067\u3059\u306e\u3067\u3001\u5168\u90e81\u56de\u3057\u304b\u89b3\u6e2c\u3055\u308c\u306a\u3044\u73fe\u72b6\u306e\u307e\u307e\u3067\u306f\u76f4\u63a5\u306f\u610f\u5473\u3092\u306a\u3055\u306a\u3044\u304b\u3089\u3067\u3059\u3002\nX_train = X_train.drop(['streetAddress'], axis=1)\nX_test = X_test.drop(['streetAddress'], axis=1)","0c013c44":"# \u7bc9\u5e74\u6570\u3092\u8ffd\u52a0\nX_train['Age'] = X_train['latest_saleyear']-X_train['yearBuilt']\nX_test['Age'] = X_test['latest_saleyear']-X_test['yearBuilt']","01c030ec":"#\u3000\u6e1b\u4fa1\u511f\u5374\u3092\u9244\u7b4b\u30b3\u30f3\u30af\u30ea\u30fc\u30c8\u3067\u8a08\u7b97\u3059\u308b\u305f\u3081\u3001\u8010\u7528\u5e74\u6570\u4e0a\u9650\u3067\u533a\u5207\u308b\nconditions = [X_train['Age'] > 47]\nchoices = [47]\nX_train['Age_RC'] = np.select(conditions, choices, default = X_train['Age'])\nconditions = [X_test['Age'] > 47]\nchoices = [47]\nX_test['Age_RC'] = np.select(conditions, choices, default = X_test['Age'])","4485a592":"#\u3000\u9244\u7b4b\u30b3\u30f3\u30af\u30ea\u30fc\u30c8\u306e\u5834\u5408\u306e\u8010\u7528\u5e74\u6570\u3092\u8a08\u7b97\nX_train['HouseLifeRC'] = 47 - X_train['Age_RC']\nX_test['HouseLifeRC'] = 47 - X_test['Age_RC']","5b50fcbc":"#\u3000\u6e1b\u4fa1\u511f\u5374\u3092\u6728\u9020\u3067\u8a08\u7b97\u3059\u308b\u305f\u3081\u3001\u8010\u7528\u5e74\u6570\u4e0a\u9650\u3067\u533a\u5207\u308b\nconditions = [X_train['Age'] > 27]\nchoices = [27]\nX_train['Age_Wood'] = np.select(conditions, choices, default = X_train['Age'])\nconditions = [X_test['Age'] > 27]\nchoices = [27]\nX_test['Age_Wood'] = np.select(conditions, choices, default = X_test['Age'])","f2635dc3":"#\u3000\u9244\u7b4b\u30b3\u30f3\u30af\u30ea\u30fc\u30c8\u306e\u5834\u5408\u306e\u8010\u7528\u5e74\u6570\u3092\u8a08\u7b97\nX_train['HouseLifeWood'] = 27 - X_train['Age_Wood']\nX_test['HouseLifeWood'] = 27 - X_test['Age_Wood']","650b4d95":"#\u3000\u8ffd\u52a0\u4e0d\u8981\u30ab\u30e9\u30e0Drop\nX_train = X_train.drop(['Age','Age_RC','Age_Wood'], axis=1)\nX_test = X_test.drop(['Age','Age_RC','Age_Wood'], axis=1)","e2288cf3":"X_train.head(20)","0daaeaca":"X_test.head(20)","647a263a":"\u8010\u7528\u5e74\u6570\u306f\u4e0a\u9650\u5024\uff14\uff17\u5e74\u304b\u3089\u7bc9\u5e74\u6570\u3092\u5f15\u3044\u305f\u3082\u306e\u306a\u306e\u3067\u6728\u9020\u306e\u5834\u5408\u3092\u7b97\u51fa\u3057\u307e\u3059","dc6a01db":"\u7b97\u51fa\u904e\u7a0b\u3067\u4f7f\u7528\u3057\u305f\u7279\u5fb4\u91cf\u3092\uff24\uff52\uff4f\uff50\u3057\u307e\u3059\uff08\u3057\u306a\u304f\u3066\u3082\u826f\u3044\u3067\u3059\u304c\u30fb\u30fb\u30fb\uff09","ad07e75a":"\u5bb6\u306e\u6750\u8cea(\u69cb\u9020\uff09\u3067\u8010\u7528\u5e74\u6570\u304c\u7570\u306a\u308b\u3088\u3046\u3067\u3059\u3002\uff08\uff32\uff23\u306f\u4e0a\u9650\uff14\uff17\u5e74\u3001\u6728\u9020\u306f\u4e0a\u9650\uff12\uff17\u5e74\uff09\n\u305d\u3053\u3067\u3001\u8010\u7528\u5e74\u6570\u4ee5\u4e0a\u306e\u3082\u306e\u306f\u4e0a\u9650\u5024\u3068\u3057\u307e\u3059\u3002\u4ee5\u4e0b\u306f\uff32\uff23\u306e\u5834\u5408\u3067\u3059","baeef0c2":"\uff03\u3053\u3053\u304b\u3089\u8ffd\u52a0\u3067\u3059\n\u3000\u307e\u305a\u3001\u7bc9\u5e74\u6570\u3092\u7b97\u51fa\u3057\u307e\u3059","7e11542a":"\u540c\u69d8\u306b\u6728\u9020\u3067\u306e\u7bc9\u5e74\u6570\u3092\u8010\u7528\u5e74\u6570\u4ee5\u4e0a\u306e\u3082\u306e\u306f\u4e0a\u9650\u5024\u3068\u3057\u307e\u3059\u3002","42249886":"\u8010\u7528\u5e74\u6570\u306f\u4e0a\u9650\u5024\uff14\uff17\u5e74\u304b\u3089\u7bc9\u5e74\u6570\u3092\u5f15\u3044\u305f\u3082\u306e\u306e\u3088\u3046\u3067\u3059\uff08\u53b3\u5bc6\u306b\u306f\u9055\u3044\u307e\u3059\u304c\uff09\u306e\u3067\uff32\uff23\u306e\u5834\u5408\u3092\u7b97\u51fa\u3057\u307e\u3059"}}