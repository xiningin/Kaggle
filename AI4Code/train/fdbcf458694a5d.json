{"cell_type":{"500501e1":"code","288b4b15":"code","5ba5d1c0":"code","3852a8f0":"code","8200f49f":"code","7db78d16":"code","4a55b81b":"code","6d243e05":"code","1012f557":"code","def0c19a":"code","4c88b9f6":"code","1c5af524":"code","46307198":"code","1b0bc8e6":"code","820ca0d4":"code","461f53eb":"code","cf98dcaa":"code","6522c4cc":"code","ac1dac08":"code","fbf50584":"code","413f7429":"code","0420e754":"code","ecd88ce3":"code","392cff4c":"markdown","1e7089cc":"markdown","054bfd45":"markdown","4b650936":"markdown","a0dad4ae":"markdown","5f194daa":"markdown","dd05e7a9":"markdown","93e4c962":"markdown","a9571d16":"markdown","b9d255b3":"markdown","a1e60ed8":"markdown","6459c927":"markdown","51351a1b":"markdown","4e356847":"markdown","9bbbabca":"markdown","602e3b68":"markdown","52b1b4dc":"markdown","6bfb57c3":"markdown","c284eebf":"markdown","644e7852":"markdown","72c94d77":"markdown","65ce3e6b":"markdown","c9d961b0":"markdown","8a800dd5":"markdown","9dff5624":"markdown"},"source":{"500501e1":"%%writefile submission.py\nimport secrets\n\nclass RandomAgent():\n    \n    def __init__(self):\n        pass\n        \n    def action(self, self_moves, opp_moves):\n        return secrets.choice(list(range(3)))\n\n    \nclass ModalModel():\n    \n    def __init__(self):\n        pass\n        \n    def action(self, self_moves, opp_moves):\n        ones = 0\n        twos = 0\n        zeros = 0\n        if len(opp_moves):\n            for i in opp_moves:\n                if (i % 3) == 0:\n                    zeros += 1\n                if (i % 3) == 1:\n                    ones += 1\n                if (i % 3) == 2:\n                    twos += 1\n            values = [zeros, ones, twos]\n            return (values.index(max(values)) + 1) % 3\n        else:\n            action = secrets.choice(list(range(3)))\n        return (action + 1) % 3\n\n\nclass OppRotation0():\n    \n    def __init__(self):\n        pass\n    \n    def action(self, self_moves, opp_moves):\n        if len(opp_moves):\n            return (opp_moves[-1]) % 3\n        else:\n            return 0\n\n\nclass OppRotation1():\n    \n    def __init__(self):\n        pass\n        \n    def action(self, self_moves, opp_moves):\n        if len(opp_moves):\n            return (opp_moves[-1] + 1) % 3\n        else:\n            return 0\n\n\n\nclass OppRotation2():\n    \n    def __init__(self):\n        pass\n    \n    def action(self, self_moves, opp_moves):\n        if len(opp_moves):\n            return (opp_moves[-1] + 2) % 3\n        else:\n            return 0\n    \n    \nclass Rotation0():\n    \n    def __init__(self):\n        pass\n        \n    def action(self, self_moves, opp_moves):\n        if len(self_moves):\n            return (self_moves[-1]) % 3\n        else:\n            return 0\n\n        \nclass Rotation1():\n    \n    def __init__(self):\n        pass\n    \n    def action(self, self_moves, opp_moves):\n        if len(self_moves):\n            return (self_moves[-1] + 1) % 3\n        else:\n            return 0\n\nclass Rotation2():\n    \n    def __init__(self):\n        pass\n    \n    def action(self, self_moves, opp_moves):\n        if len(self_moves):\n            return (self_moves[-1] + 2) % 3\n        else:\n            return 0\n    \n    \nclass LeastCommonOpponentAction():\n    \n    def __init__(self):\n        pass\n    \n    def action(self, self_moves, opp_moves):\n        if len(opp_moves):\n            zeros = 0\n            ones = 0\n            twos = 0\n            for move in opp_moves:\n                if (move % 3) == 0:\n                    zeros += 1\n                elif (move % 3) == 1:\n                    ones += 1\n                elif (move % 3) == 2:\n                    twos += 2\n            move_freq = [zeros, ones, twos]\n            action = move_freq.index(min(move_freq))\n        else:\n            action = secrets.choice(list(range(3)))\n        return action\n    \n    \nclass RockIt():\n    \n    def __init__(self):\n        pass\n    \n    def action(self, self_moves, opp_moves):\n        return 0\n\n\nclass SaltAndPaper():\n    \n    def __init__(self):\n        pass\n    \n    def action(self, self_moves, opp_moves):\n        return 1\n\n\nclass Scissors():\n    \n    def __init__(self):\n        pass\n    \n    def action(self, self_moves, opp_moves):\n        return 2\n    \n    \ndef winner(self_move, opp_move):\n    if self_move == opp_move:\n        return 0\n    elif (self_move == 0 and opp_move == 2):\n        return 1\n    elif (self_move == 2 and opp_move == 0):\n        return -1\n    elif (self_move > opp_move):\n        return 1\n    else:\n        return -1\n    \n\ndef special_rounder(num):\n    if num <= 0:\n        return 0\n    else:\n        return 1\n\nclass ModelAction():\n    \n    def __init__(self, models):\n        self.models = models\n        self.num_uses = [0 for i in range(len(models))]\n        self.num_wins = [0 for i in range(len(models))]\n        self.win_rate = [0 for i in range(len(models))]\n        self.epsilon = 0.1 # This part based on epsilon greedy algorithm\n        \n    def update(self, model_index, win_loss):\n        # print(self.num_uses[model_index])\n        # print(self.num_wins[model_index])\n        # print(self.win_rate[model_index])\n        # print(model_index)\n        # print(win_loss)\n        self.num_uses[model_index] += 1\n        self.num_wins[model_index] += special_rounder(win_loss[-1])\n        self.win_rate[model_index] = self.num_wins[model_index]\/self.num_uses[model_index]\n        \n    def take_action(self):\n        yes_no = secrets.randbelow(10000)\n        yes_no \/= 10000\n        if yes_no < self.epsilon:\n            return self.choose_random_model()\n        else:\n            return self.choose_best_model()\n        \n    def choose_random_model(self):\n        return secrets.randbelow(len(self.models))\n    \n    def choose_best_model(self):\n        return self.win_rate.index(max(self.win_rate))\n\nrand_agent = RandomAgent()\nmode_agent = ModalModel()\nopp_rotat0 = OppRotation0()\nopp_rotat1 = OppRotation1()\nopp_rotat2 = OppRotation2()\nself_rotat0 = Rotation0()\nself_rotat1 = Rotation1()\nself_rotat2 = Rotation2()\nanti_modal = LeastCommonOpponentAction()\nrock_agent = RockIt()\npaper_agent = SaltAndPaper()\nscis_agent = Scissors()\n# 12 models, and counting\n\nmodel_list = [rand_agent, mode_agent, opp_rotat0, opp_rotat1, opp_rotat2,\n              self_rotat0, self_rotat1, self_rotat2, anti_modal, \n              rock_agent, paper_agent, scis_agent\n             ]\n\n# # Other possible models:\n# return current_step % 3\n# on_line_neural_network\n# triangle model\n\n\nmy_moves = list()\nopp_moves = list()\nwins_losses = [list() for i in model_list]\n\ndecider = ModelAction(model_list)\npossible_moves = [0 for i in model_list]\n# update for all possible moves every move made\n\nindex = [0]\n\ndef make_a_move(observation, configuration):\n    if observation.step > (100):\n        opp_moves.append(observation.lastOpponentAction)\n        for i in range(len(model_list)):\n            wins_losses[i].append(winner(possible_moves[i], observation.lastOpponentAction))\n#         wins_losses.append(winner(my_moves[-1], opp_moves[-1]))\n        for i in range(len(model_list)):\n            decider.update(i, wins_losses[i])\n        # print(\"Updated weights...\")\n        # print(\"Index:\" + str(index[0]))\n        index[0] = decider.take_action()\n        # print(index[0])\n        # print(\"\\n\")\n        for i in range(len(model_list)):\n            possible_moves[i] = model_list[i].action(my_moves, opp_moves)    \n        curr_action = model_list[index[0]].action(my_moves, opp_moves)\n        possible_moves[index[0]] = curr_action\n        my_moves.append(curr_action)\n        return curr_action\n    else:\n        # print(index[0])\n        if observation.step:\n            opp_moves.append(observation.lastOpponentAction)\n            for i in range(len(model_list)):\n                wins_losses[i].append(winner(possible_moves[i], observation.lastOpponentAction))\n            for i in range(len(model_list)):\n                decider.update(i, wins_losses[i])\n        index[0] = (observation.step % len(model_list))\n        if observation.step:\n            curr_action = model_list[observation.step % len(model_list)].action(my_moves, opp_moves)\n        else:\n            curr_action = model_list[observation.step % len(model_list)].action(0, 0)\n            for i in range(len(model_list)):\n                possible_moves[i] = model_list[i].action(my_moves, opp_moves)\n            possible_moves[observation.step % len(model_list)] = curr_action\n        my_moves.append(curr_action)\n        return curr_action","288b4b15":"from kaggle_environments import make\nenv = make(\"rps\", configuration={\"episodeSteps\": 1000}, debug = True)\n\nenv.reset()\nenv.run([\"submission.py\", \"submission.py\"])\nenv.render(mode=\"ipython\", width=550, height=500)","5ba5d1c0":"%%writefile rand.py\nimport secrets\nclass RandomAgent():\n    \n    def __init__(self):\n        pass\n        \n    def action(self, self_moves, opp_moves):\n        return secrets.choice(list(range(3)))\n\nmodel = RandomAgent()\n    \nmy_moves = list()\nopp_moves = list()\n\n\ndef make_a_move(observation, configuration):\n    if observation.step:\n        opp_moves.append(observation.lastOpponentAction)\n        action = model.action(my_moves, opp_moves)\n        my_moves.append(action)\n        return action\n    else:\n        action = model.action(my_moves, opp_moves)\n        my_moves.append(action)\n        return action","3852a8f0":"%%writefile modal.py\nimport secrets\nclass ModalModel():\n    \n    def __init__(self):\n        pass\n        \n    def action(self, self_moves, opp_moves):\n        zeros = 0\n        ones = 0\n        twos = 0\n        if len(opp_moves):\n            for i in opp_moves:\n                if (i % 3) == 0:\n                    zeros += 1\n                if (i % 3) == 1:\n                    ones += 1\n                if (i % 3) == 2:\n                    twos += 1\n            values = [zeros, ones, twos]\n            return (values.index(max(values)) + 1) % 3\n        else:\n            action = secrets.choice(list(range(3)))\n        return (action + 1) % 3\n\nmodel = ModalModel()\n    \nmy_moves = list()\nopp_moves = list()\n\n\ndef make_a_move(observation, configuration):\n    if observation.step:\n        opp_moves.append(observation.lastOpponentAction)\n        action = model.action(my_moves, opp_moves)\n        my_moves.append(action)\n        return action\n    else:\n        action = model.action(my_moves, opp_moves)\n        my_moves.append(action)\n        return action","8200f49f":"%%writefile beatmodal.py\nimport secrets\nclass ModalModel2():\n    \n    def __init__(self):\n        pass\n        \n    def action(self, self_moves, opp_moves):\n        zeros = 0\n        ones = 0\n        twos = 0\n        if len(self_moves):\n            for i in self_moves:\n                if (i % 3) == 0:\n                    zeros += 1\n                if (i % 3) == 1:\n                    ones += 1\n                if (i % 3) == 2:\n                    twos += 1\n            values = [zeros, ones, twos]\n            return (values.index(max(values)) + 2) % 3\n        else:\n            action = secrets.choice(list(range(3)))\n        return (action + 1) % 3\n\nmodel = ModalModel2()\n    \nmy_moves = list()\nopp_moves = list()\n\n\ndef make_a_move(observation, configuration):\n    if observation.step:\n        opp_moves.append(observation.lastOpponentAction)\n        action = model.action(my_moves, opp_moves)\n        my_moves.append(action)\n        return action\n    else:\n        action = model.action(my_moves, opp_moves)\n        my_moves.append(action)\n        return action","7db78d16":"%%writefile opprot0\nclass OppRotation0():\n    \n    def __init__(self):\n        pass\n    \n    def action(self, self_moves, opp_moves):\n        if len(opp_moves):\n            return (opp_moves[-1]) % 3\n        else:\n            return 0\n    \nmodel = OppRotation0()\n    \nmy_moves = list()\nopp_moves = list()\n\n\ndef make_a_move(observation, configuration):\n    if observation.step:\n        opp_moves.append(observation.lastOpponentAction)\n        action = model.action(my_moves, opp_moves)\n        my_moves.append(action)\n        return action\n    else:\n        action = model.action(my_moves, opp_moves)\n        my_moves.append(action)\n        return action","4a55b81b":"%%writefile opprot1.py\nclass OppRotation1():\n    \n    def __init__(self):\n        pass\n        \n    def action(self, self_moves, opp_moves):\n        if len(opp_moves):\n            return (opp_moves[-1] + 1) % 3\n        else:\n            return 0\n    \nmodel = OppRotation1()\n\nmy_moves = list()\nopp_moves = list()\n\n\ndef make_a_move(observation, configuration):\n    if observation.step:\n        opp_moves.append(observation.lastOpponentAction)\n        action = model.action(my_moves, opp_moves)\n        my_moves.append(action)\n        return action\n    else:\n        action = model.action(my_moves, opp_moves)\n        my_moves.append(action)\n        return action","6d243e05":"%%writefile opprot2.py\nclass OppRotation2():\n    \n    def __init__(self):\n        pass\n    \n    def action(self, self_moves, opp_moves):\n        if len(opp_moves):\n            return (opp_moves[-1] + 2) % 3\n        else:\n            return 0\n\nmodel = OppRotation2()\n    \nmy_moves = list()\nopp_moves = list()\n\n\ndef make_a_move(observation, configuration):\n    if observation.step:\n        opp_moves.append(observation.lastOpponentAction)\n        action = model.action(my_moves, opp_moves)\n        my_moves.append(action)\n        return action\n    else:\n        action = model.action(my_moves, opp_moves)\n        my_moves.append(action)\n        return action","1012f557":"%%writefile rot0.py\nimport secrets\nclass Rotation0():\n    \n    def __init__(self):\n        pass\n        \n    def action(self, self_moves, opp_moves):\n        if len(self_moves):\n            return (self_moves[-1]) % 3\n        else:\n            return secrets.choice([0, 1, 2])\n\nmodel = Rotation0()\n\nmy_moves = list()\nopp_moves = list()\n\n\ndef make_a_move(observation, configuration):\n    if observation.step:\n        opp_moves.append(observation.lastOpponentAction)\n        action = model.action(my_moves, opp_moves)\n        my_moves.append(action)\n        return action\n    else:\n        action = model.action(my_moves, opp_moves)\n        my_moves.append(action)\n        return action","def0c19a":"%%writefile rot1.py\nimport secrets\nclass Rotation1():\n    \n    def __init__(self):\n        pass\n    \n    def action(self, self_moves, opp_moves):\n        if len(self_moves):\n            return (self_moves[-1] + 1) % 3\n        else:\n            return secrets.choice([0, 1, 2])\n\nmodel = Rotation1()\n\nmy_moves = list()\nopp_moves = list()\n\n\ndef make_a_move(observation, configuration):\n    if observation.step:\n        opp_moves.append(observation.lastOpponentAction)\n        action = model.action(my_moves, opp_moves)\n        my_moves.append(action)\n        return action\n    else:\n        action = model.action(my_moves, opp_moves)\n        my_moves.append(action)\n        return action","4c88b9f6":"%%writefile rot2.py\nimport secrets\nclass Rotation2():\n    \n    def __init__(self):\n        pass\n    \n    def action(self, self_moves, opp_moves):\n        if len(self_moves):\n            return (self_moves[-1] + 2) % 3\n        else:\n            return secrets.choice([0, 1, 2])\n    \nmodel = Rotation2()\n    \nmy_moves = list()\nopp_moves = list()\n\n\ndef make_a_move(observation, configuration):\n    if observation.step:\n        opp_moves.append(observation.lastOpponentAction)\n        action = model.action(my_moves, opp_moves)\n        my_moves.append(action)\n        return action\n    else:\n        action = model.action(my_moves, opp_moves)\n        my_moves.append(action)\n        return action","1c5af524":"%%writefile lcoa.py\nimport secrets\nclass LeastCommonOpponentAction():\n    \n    def __init__(self):\n        pass\n    \n    def action(self, self_moves, opp_moves):\n        if len(opp_moves):\n            zeros = 0\n            ones = 0\n            twos = 0\n            for move in opp_moves:\n                if (move % 3) == 0:\n                    zeros += 1\n                elif (move % 3) == 1:\n                    ones += 1\n                elif (move % 3) == 2:\n                    twos += 2\n            move_freq = [zeros, ones, twos]\n            action = move_freq.index(min(move_freq))\n        else:\n            action = secrets.choice(list(range(3)))\n        return action\n\nmodel = LeastCommonOpponentAction()\n    \nmy_moves = list()\nopp_moves = list()\n\n\ndef make_a_move(observation, configuration):\n    if observation.step:\n        opp_moves.append(observation.lastOpponentAction)\n        action = model.action(my_moves, opp_moves)\n        my_moves.append(action)\n        return action\n    else:\n        action = model.action(my_moves, opp_moves)\n        my_moves.append(action)\n        return action","46307198":"%%writefile rockit.py\nclass RockIt():\n    \n    def __init__(self):\n        pass\n        \n    def action(self, self_moves, opp_moves):\n        return 0\n\nmodel = RockIt()\n    \nmy_moves = list()\nopp_moves = list()\n\n\ndef make_a_move(observation, configuration):\n    if observation.step:\n        opp_moves.append(observation.lastOpponentAction)\n        action = model.action(my_moves, opp_moves)\n        my_moves.append(action)\n        return action\n    else:\n        action = model.action(my_moves, opp_moves)\n        my_moves.append(action)\n        return action","1b0bc8e6":"%%writefile saltandpaper.py\nclass SaltAndPaper():\n    \n    def __init__(self):\n        pass\n        \n    def action(self, self_moves, opp_moves):\n        return 1\n\nmodel = SaltAndPaper()\n\nmy_moves = list()\nopp_moves = list()\n\n\ndef make_a_move(observation, configuration):\n    if observation.step:\n        opp_moves.append(observation.lastOpponentAction)\n        action = model.action(my_moves, opp_moves)\n        my_moves.append(action)\n        return action\n    else:\n        action = model.action(my_moves, opp_moves)\n        my_moves.append(action)\n        return action","820ca0d4":"%%writefile scissors.py\nclass Scissors():\n    \n    def __init__(self):\n        pass\n        \n    def action(self, self_moves, opp_moves):\n        return 2\n\nmodel = Scissors()\n\nmy_moves = list()\nopp_moves = list()\n\n\ndef make_a_move(observation, configuration):\n    if observation.step:\n        opp_moves.append(observation.lastOpponentAction)\n        action = model.action(my_moves, opp_moves)\n        my_moves.append(action)\n        return action\n    else:\n        action = model.action(my_moves, opp_moves)\n        my_moves.append(action)\n        return action","461f53eb":"from kaggle_environments import make\nenv = make(\"rps\", configuration={\"episodeSteps\": 1000}, debug = True)\n\nenv.reset()\nenv.run([\"submission.py\", \"rand.py\"])\nenv.render(mode=\"ipython\", width=550, height=500)","cf98dcaa":"from kaggle_environments import make\nenv = make(\"rps\", configuration={\"episodeSteps\": 1000}, debug = True)\n\nenv.reset()\nenv.run([\"submission.py\", \"modal.py\"])\nenv.render(mode=\"ipython\", width=550, height=500)","6522c4cc":"from kaggle_environments import make\nenv = make(\"rps\", configuration={\"episodeSteps\": 1000}, debug = True)\n\nenv.reset()\nenv.run([\"submission.py\", \"opprot0.py\"])\nenv.render(mode=\"ipython\", width=550, height=500)","ac1dac08":"from kaggle_environments import make\nenv = make(\"rps\", configuration={\"episodeSteps\": 1000}, debug = True)\n\nenv.reset()\nenv.run([\"submission.py\", \"opprot1.py\"])\nenv.render(mode=\"ipython\", width=550, height=500)","fbf50584":"from kaggle_environments import make\nenv = make(\"rps\", configuration={\"episodeSteps\": 1000}, debug = True)\n\nenv.reset()\nenv.run([\"submission.py\", \"opprot2.py\"])\nenv.render(mode=\"ipython\", width=550, height=500)","413f7429":"from kaggle_environments import make\nenv = make(\"rps\", configuration={\"episodeSteps\": 1000}, debug = True)\n\nenv.reset()\nenv.run([\"submission.py\", \"rot0.py\"])\nenv.render(mode=\"ipython\", width=550, height=500)","0420e754":"from kaggle_environments import make\nenv = make(\"rps\", configuration={\"episodeSteps\": 1000}, debug = True)\n\nenv.reset()\nenv.run([\"submission.py\", \"rot1.py\"])\nenv.render(mode=\"ipython\", width=550, height=500)","ecd88ce3":"from kaggle_environments import make\nenv = make(\"rps\", configuration={\"episodeSteps\": 1000}, debug = True)\n\nenv.reset()\nenv.run([\"submission.py\", \"rot2.py\"])\nenv.render(mode=\"ipython\", width=550, height=500)","392cff4c":"## Bonus Algorithm: Beat Opponent Modal Algorithm","1e7089cc":"## Algorithm 4: Beat Opponents Last Move","054bfd45":"## Algorithm 10: Always Rock","4b650936":"## Algorithm 3: Opponents Last Move","a0dad4ae":"## Algorithm 7: Rotation by 1","5f194daa":"## Epsilon Model vs. Modal Model","dd05e7a9":"## Algorithm 5: Beat Opponent Rotation by 1","93e4c962":"## Algorithm 1: Random Model","a9571d16":"## Epsilon Model vs Last Action","b9d255b3":"## The Rest:\nThe rest of the models are Rock only, paper only, and scissor only, which are basically the same as beating Rot0.\n","a1e60ed8":"# Epsilon Model vs Random","6459c927":"## Algorithm 2: Beating Opponent Modal Move","51351a1b":"## Epsilon Model vs. Rotation 1","4e356847":"## Epsilon Model vs Opponent Rotation 2","9bbbabca":"## Algorithm 6: Use Last Move","602e3b68":"## Epsilon Model vs. Opponents Last Action","52b1b4dc":"If you find any errors let me know, and if you found this uesful, give it an upvote!","6bfb57c3":"## Epsilon Model vs. Rotation 2","c284eebf":"## Algorithm 11: Always Paper","644e7852":"## Algorithm 8: Rotation by 2","72c94d77":"## Epsilon Model vs. Opponent Rotation 1","65ce3e6b":"# Epsilon Greedy from Scratch on 12 Algorithms","c9d961b0":"## Algorithm 12: Always Scissors","8a800dd5":"## Epsilon Greedy on 12","9dff5624":"## Algorithm 9: Least Common Opponent Action (Reverse Modal)"}}