{"cell_type":{"c2baa935":"code","370dc2db":"code","203c35a9":"code","738814d5":"code","ff4ce719":"code","6de3320a":"code","c3b6f747":"code","42cdd0d1":"code","90bc63d0":"code","592d1f5b":"code","cfe71afc":"code","4b888235":"code","d9367348":"code","0b532d08":"code","fba7e838":"code","c60b2d9d":"code","dcb2052b":"code","319814c3":"code","be8d76bb":"code","8ccd2204":"code","e46469f7":"code","46372e4a":"code","abd5bdfc":"code","ac3f6972":"code","90ee63e9":"code","9ffdba5f":"code","ef35b1e0":"code","7e764ba5":"code","a87a2d21":"code","9ed09298":"code","5fee65ed":"code","93f634a6":"code","00389231":"code","90e0d2ac":"code","c5b6b044":"code","a7f56ac8":"code","ae39576b":"code","4b2a9f76":"code","a5eb72ab":"code","7b29ce19":"code","79f6fe4a":"code","66e8ab96":"code","ddc11357":"code","b692c94f":"code","3785ff87":"code","163612dc":"code","0b39453a":"code","089744b5":"code","3be57e7c":"code","2af02704":"code","f0d21fd3":"code","fc812fd3":"code","c83b545f":"code","a8ad5a7e":"code","bc470d06":"code","c1d46193":"code","01709e0b":"code","344422f7":"code","7a8f5ab8":"code","faa82adb":"code","1dce9896":"code","a6d1f5bf":"code","e26d1a03":"code","a1643149":"code","6d4e477a":"code","64a76777":"code","c451a27c":"code","43d7b581":"code","388836f9":"code","5cd68d9c":"code","13712201":"code","354019f0":"code","2e71f1de":"code","50fb8c89":"code","d0ab7869":"code","7002ac08":"code","44769e64":"code","1f31f322":"code","0bb2fdce":"code","cc838464":"code","d65b466d":"code","b7fc281d":"code","27d23674":"code","35a896ea":"code","29b836ac":"code","2fad5ea8":"code","54e37517":"code","1cb10b03":"code","4b6d0c7d":"code","f24b1997":"code","b2236510":"code","2bfbbc2d":"code","74375a94":"code","5e7d1526":"code","26909bf9":"code","81002ae3":"code","64d8a752":"code","ef18ddbd":"code","0a1d3f06":"code","5a84e8f4":"code","c9688028":"code","4db1d79b":"code","e043d66c":"code","c40caf3f":"code","2d88e42c":"markdown","56e5b530":"markdown","d15c41af":"markdown","5ea38f08":"markdown","6b4ace96":"markdown","3027883a":"markdown","aa4ddc92":"markdown","a3e6a4db":"markdown","8200ebdd":"markdown","b677eeba":"markdown","ebe57a42":"markdown","236dfb72":"markdown","a2490f9d":"markdown","8d123748":"markdown","1a20d7af":"markdown","a3a9043f":"markdown","14520809":"markdown","79e1fcf5":"markdown","75323fd9":"markdown","63d7681c":"markdown","c53f5948":"markdown","58bc8254":"markdown","e83588d0":"markdown","c467a8aa":"markdown","6b03e2ae":"markdown","8e67df0f":"markdown","511915c3":"markdown","e2a456d6":"markdown","d310dae6":"markdown","ee241bcb":"markdown","84119b06":"markdown","83c1b68c":"markdown","8f788550":"markdown","05602a3f":"markdown","695f985b":"markdown","2347a595":"markdown","bafb4311":"markdown","9e80de48":"markdown","ff9428ae":"markdown","94ae1d4f":"markdown","0e49e17d":"markdown","d2252d01":"markdown"},"source":{"c2baa935":"import pandas as pd\nimport numpy as np\nimport matplotlib.pyplot as plt\n%matplotlib inline\nimport seaborn as sns","370dc2db":"import itertools\nimport sklearn as sk\nimport warnings","203c35a9":"sns.set(style='white', context='notebook', palette='deep')\nimport matplotlib.style as style\nstyle.use('fivethirtyeight')","738814d5":"from sklearn.model_selection import KFold\nfrom sklearn.pipeline import Pipeline\nfrom sklearn.preprocessing import Imputer\nfrom sklearn.preprocessing import StandardScaler, OneHotEncoder\nfrom sklearn.linear_model import LogisticRegression\nfrom sklearn.model_selection import train_test_split, GridSearchCV","ff4ce719":"from sklearn.preprocessing import StandardScaler","6de3320a":"from sklearn.linear_model import LinearRegression \nfrom sklearn.linear_model import Lasso\nfrom sklearn.linear_model import Ridge\nfrom sklearn.ensemble import RandomForestRegressor\nfrom sklearn.linear_model import ElasticNet","c3b6f747":"from sklearn import metrics\nfrom sklearn.metrics import mean_squared_error\nfrom sklearn.model_selection import cross_val_score","42cdd0d1":"df=pd.read_csv('..\/input\/nyc-rolling-sales.csv')","90bc63d0":"df.head(5)","592d1f5b":"df.drop(columns={'Unnamed: 0', 'EASE-MENT'}, inplace=True)","cfe71afc":"df.head()","4b888235":"df.columns","d9367348":"df.dtypes","0b532d08":"df['BOROUGH'][df['BOROUGH']==1]='Manhattan'","fba7e838":"df['BOROUGH'][df['BOROUGH']==2]='Bronx'","c60b2d9d":"df['BOROUGH'][df['BOROUGH']==3]='Brooklyn'","dcb2052b":"df['BOROUGH'][df['BOROUGH']==4]='Queens'","319814c3":"df['BOROUGH'][df['BOROUGH']==5]='Staten Island'","be8d76bb":"df.head()","8ccd2204":"df.info()","e46469f7":"missing_data=df.isnull()","46372e4a":"missing_data.head()","abd5bdfc":"for column in missing_data.columns.values.tolist():\n    print(column)\n    print (missing_data[column].value_counts())\n    print(\"\")","ac3f6972":"sum(df.duplicated(df.columns))","90ee63e9":"df=df.drop_duplicates(df.columns, keep='last')","9ffdba5f":"sum(df.duplicated(df.columns))","ef35b1e0":"df.dtypes","7e764ba5":"df.head(2)","a87a2d21":"df['SALE PRICE']=pd.to_numeric(df['SALE PRICE'], errors='coerce')","9ed09298":"df['YEAR BUILT']=pd.to_numeric(df['YEAR BUILT'], errors='coerce')","5fee65ed":"df['LAND SQUARE FEET']=pd.to_numeric(df['LAND SQUARE FEET'], errors='coerce')","93f634a6":"df['GROSS SQUARE FEET']=pd.to_numeric(df['GROSS SQUARE FEET'], errors='coerce')","00389231":"df['SALE DATE']=pd.to_datetime(df['SALE DATE'], errors='coerce')","90e0d2ac":"df['TAX CLASS AT TIME OF SALE'] = df['TAX CLASS AT TIME OF SALE'].astype('category')\ndf['TAX CLASS AT PRESENT'] = df['TAX CLASS AT PRESENT'].astype('category')\ndf['ZIP CODE'] = df['ZIP CODE'].astype('category')","c5b6b044":"df.head()","a7f56ac8":"df.isnull().sum()","ae39576b":"avg_land=df['LAND SQUARE FEET'].astype('float').mean(axis=0)","4b2a9f76":"df['LAND SQUARE FEET'].replace(np.nan, avg_land, inplace=True)","a5eb72ab":"avg_gross=df['GROSS SQUARE FEET'].astype('float').mean(axis=0)","7b29ce19":"df['GROSS SQUARE FEET'].replace(np.nan, avg_gross, inplace=True)","79f6fe4a":"avg_sale_price=df['SALE PRICE'].astype('float').mean(axis=0)","66e8ab96":"df['SALE PRICE'].replace('np.nan, avg_sale_price', inplace=True)","ddc11357":"df.head()","b692c94f":"var=df.columns\ncount=[]\nfor variable in var:\n    length=df[variable].count()\n    count.append(length)","3785ff87":"plt.figure(figsize=(40,8))\nsns.barplot(x=var, y=count)\nplt.title('Percentage of Available Data', fontsize=30)\nplt.show()","163612dc":"df.corr()","0b39453a":"df[['COMMERCIAL UNITS', 'SALE PRICE']].corr()","089744b5":"sns.regplot(x='COMMERCIAL UNITS', y='SALE PRICE', data=df)","3be57e7c":"df[['LAND SQUARE FEET', 'SALE PRICE']].corr()","2af02704":"sns.regplot(x='LAND SQUARE FEET', y='SALE PRICE', data=df)","f0d21fd3":"df[['GROSS SQUARE FEET', 'SALE PRICE']].corr()","fc812fd3":"sns.regplot(x='GROSS SQUARE FEET', y='SALE PRICE', data=df)","c83b545f":"sns.boxplot(x='BOROUGH', y='SALE PRICE', data=df)","a8ad5a7e":"df.head(2)","bc470d06":"df.describe(include=['object'])","c1d46193":"df_borough=df[['BOROUGH','SALE PRICE', 'SALE DATE']]","01709e0b":"df_borough.head(5)","344422f7":"df_borough=df_borough.groupby(['BOROUGH'], as_index=False).mean()","7a8f5ab8":"df_borough.head(100)","faa82adb":"sns.boxplot(x='BOROUGH', y='SALE PRICE', data=df_borough)","1dce9896":"df_manhattan=df[(df['BOROUGH']=='Manhattan')]","a6d1f5bf":"df_manhattan","e26d1a03":"df_manhattan_neighborhood=df[['NEIGHBORHOOD', 'RESIDENTIAL UNITS','SALE PRICE', 'SALE DATE']]","a1643149":"df_manhattan_neighborhood=df_manhattan_neighborhood.groupby(['NEIGHBORHOOD', 'SALE PRICE'], as_index=False).mean()","6d4e477a":"df_manhattan_neighborhood","64a76777":"fig, ax = plt.subplots(figsize=(40,20))\nplt.xticks(fontsize=30) \nplt.yticks(fontsize=30)\nax.set_title('Neighborhood Sale Price Analysis', fontweight=\"bold\", size=30)\nax.set_ylabel('Neighborhood', fontsize = 30)\nax.set_xlabel('Sale Price', fontsize = 30)\nsns.boxplot(x='SALE PRICE', y='NEIGHBORHOOD', data=df_manhattan)","c451a27c":"df_manhattan.head(2)","43d7b581":"fig, ax = plt.subplots(figsize=(40,20))\nplt.xticks(fontsize=30) \nplt.yticks(fontsize=30)\nax.set_title('Neighborhood vs Residential Units Analysis', fontweight=\"bold\", size=30)\nax.set_ylabel('Neighborhood', fontsize = 30)\nax.set_xlabel('Residential Units', fontsize = 30)\nsns.barplot(x='RESIDENTIAL UNITS', y='NEIGHBORHOOD', data=df_manhattan)","388836f9":"plt.figure(figsize=(12,4))\nsns.countplot(x='BOROUGH', data=df)","5cd68d9c":"def get_season(x):\n    if x==1:\n        return 'Summer'\n    elif x==2:\n        return 'Fall'\n    elif x==3:\n        return 'Winter'\n    elif x==4:\n        return 'Spring'\n    else:\n        return ''\ndf['seasons']=df['SALE DATE'].apply(lambda x:x.month)\ndf['seasons']=df['seasons'].apply(lambda x:(x%12+3)\/\/3)\ndf['seasons']=df['seasons'].apply(get_season)","13712201":"plt.figure(figsize=(18,8))\ndf_wo_manhattan=df.loc[df['BOROUGH']!='Manhattan']\nsns.relplot(x=\"BOROUGH\", y=\"SALE PRICE\",hue='seasons' ,kind=\"line\", data=df_wo_manhattan,legend='full')","354019f0":"sns.regplot(x='SALE PRICE', y='LAND SQUARE FEET', data=df)","2e71f1de":"from sklearn.linear_model import LinearRegression","50fb8c89":"df[['SALE PRICE', 'GROSS SQUARE FEET', 'LAND SQUARE FEET']]","d0ab7869":"df.dropna(subset=[\"SALE PRICE\"], axis=0, inplace = True)","7002ac08":"df.reset_index(drop = True, inplace = True)","44769e64":"df.dropna(subset=['GROSS SQUARE FEET', 'LAND SQUARE FEET'], axis=0, inplace=True)","1f31f322":"lm = LinearRegression()\nlm","0bb2fdce":"X = df[['SALE PRICE']]\nY = df['GROSS SQUARE FEET']","cc838464":"lm.fit(X,Y)","d65b466d":"Yhat=lm.predict(X)\nYhat[0:5]   ","b7fc281d":"## intercept value is\nlm.intercept_","27d23674":"## slope\nlm.coef_","35a896ea":"plt.figure(figsize=(12, 10))\nsns.regplot(x=\"GROSS SQUARE FEET\", y=\"SALE PRICE\", data=df)\nplt.ylim(0,)","29b836ac":"sns.pairplot(data=df, hue='BOROUGH')","2fad5ea8":"variable_model=['BOROUGH','BUILDING CLASS CATEGORY','COMMERCIAL UNITS','GROSS SQUARE FEET',\n               'SALE PRICE','Building Age During Sale','LAND SQUARE FEET','RESIDENTIAL UNITS','seasons']\ndata_model=df.loc[:,variable_model]","54e37517":"important_features=['BOROUGH','BUILDING CLASS CATEGORY','seasons']\nlongest_str=max(important_features,key=len)\ntotal_num_of_unique_cat=0\nfor feature in important_features:\n    num_unique=len(data_model[feature].unique())\n    print('{} : {} unique categorical values '.format(feature,num_unique))\n    total_num_of_unique_cat+=num_unique\nprint('Total {} will be added with important feature adding'.format(total_num_of_unique_cat))","1cb10b03":"df[df['SALE PRICE']==0.0].sum().count()","4b6d0c7d":"important_features_included = pd.get_dummies(data_model[important_features])\nimportant_features_included.info(verbose=True, memory_usage=True, null_counts=True)","f24b1997":"data_model.drop(important_features,axis=1,inplace=True)\ndata_model=pd.concat([data_model,important_features_included],axis=1)\ndata_model.head()","b2236510":"plt.figure(figsize=(12,8))\nsns.distplot(data_model['SALE PRICE'],bins=2)\nplt.title('Histogram of SALE PRICE')\nplt.show()","2bfbbc2d":"data_model.head()","74375a94":"data_model=data_model[data_model['SALE PRICE']!=0]\ndata_model","5e7d1526":"data_model['SALE PRICE'] = StandardScaler().fit_transform(np.log(data_model['SALE PRICE']).values.reshape(-1,1))\nplt.figure(figsize=(10,6))\nsns.distplot(data_model['SALE PRICE'])\nplt.title('Histogram of Normalised SALE PRICE')\nplt.show()","26909bf9":"data_model.describe()","81002ae3":"from sklearn.pipeline import Pipeline\nfrom sklearn.preprocessing import StandardScaler","64d8a752":"lm.fit(X, Y)","ef18ddbd":"lm.score(X, Y)","0a1d3f06":"Yhat=lm.predict(X)\nYhat[0:4]","5a84e8f4":"from sklearn.metrics import mean_squared_error","c9688028":"mean_squared_error(df['SALE PRICE'], Yhat)","4db1d79b":"y=data_model['SALE PRICE']\nX=data_model.drop('SALE PRICE',axis=1)\nX_train,X_test,y_train,y_test = train_test_split(X,y, test_size=0.2, random_state=0)\nprint('Size of Training data: {} \\n Size of test data: {}'.format(X_train.shape[0],X_test.shape[0]))","e043d66c":"data_model.shape[0]","c40caf3f":"sns.distplot(y_test)\nplt.show()","2d88e42c":"Conclusion:\n\n<ul>\n    <li>Dependent Variable is 'SALE PRICE'<\/li>\n    <li>Predictive variables are 'LAND SQUARE FEET', GROSS SQUARE FEET', 'BOROUGH'<\/li>\n    <li>Predictive Models to be used - Single Linear or Multi Linear Regression<\/li>\n    ","56e5b530":"Grouping the dataset based on Boroughs will help segmenting my analysis.","d15c41af":"Manhattan has the most expensive houses in averege, followed by Brooklyn, Queens, Bronx and Staten Island. The median gap between Manhattan and other boroughs is huge.","5ea38f08":"I will also set the style use of seaborn and matplotlib for my visualizations.","6b4ace96":"We have Sale Date data as a variable in our dataset. However using sale data, considering the amount of possible variations might make it difficult to use as a predictor variable. So I will categorize them and create a season variable.","3027883a":"There are 10,000 values showing up as null for SALE DATA. These needs to be removed from our observations. ","aa4ddc92":"There is definately strong correlation between Gross Square Feet and Sale Price. Regression line is not that bad in this case so I can use Gross Square Feet as a predictor variable.","a3e6a4db":"## Data Exploration","8200ebdd":"Standardization or normalization is not required in this case. I corrected the data types, removed duplicate data and there are no missing data values. I can further start analyszing the data set. Woot!","b677eeba":"Part of the cleaning process I will look for the missing and duplicate data. 3 Steps to cleaning the missing data, I will identify them and either remove, correct or replace them.","ebe57a42":"I will explore more around the neighboorhood and boroughs. ","236dfb72":"There is not much correlation with commercial units in a neighborhood and sale price","a2490f9d":"Interestingly there correlation between Land Square Feet and Sale Price is weak as well","8d123748":"Here is our prediction model (single regression) using Gross Square Feet as a predictive variable.","1a20d7af":"I will further import my data and start the cleaning process. I grabbed the data \"nyc-rolling-sales\" from Kaggle. It is in csv format and easy to import.","a3a9043f":"Conclusion: We can use single regression to create a predictive model GROSS SQUARE FEET AND OR LAND SQUARE FEET as the predictive variable.","14520809":"## Data Preperation","79e1fcf5":"Besides these standard libraries, i will import sklearn, warnings for my predictive model and itertools moduole for iteration and looping.","75323fd9":"When I initially look at the data set, I see \"Unnamed o\" column as a possible index coming from the csv and \"Easement\" variable that doesnt have any value in the rows. I will drop these columns.","63d7681c":"We split our data set into two sections; Train and Test data sets.","c53f5948":"<ul>\n    <li>Final Predictive Model using Single Linear Regression <\/li>\n    <li>Yhat=a+bx <\/li>\n    <li>a is intercept<\/li>\n    <li>b is slope<\/li>\n    <li> final formula == SALE PRICE = 2422.1667333157084 + 0.00095306 * GROSS SQUARE FEET  ","58bc8254":"By our above exploration, we know we will be using single and multi linear regression.\n","e83588d0":"## Split the Data Set","c467a8aa":"There are NaN values in the \"SALE PRICE\" variable, I will replace them with average Sale Price","6b03e2ae":"\"SALE PRICE\" is the dependent variable meaning , we are trying to predict the sale price in our ","8e67df0f":"\"SALE PRICE', \"YEAR BUILT\", \"LAND SQUARE FEET\", \"GROSS SQUARE FEET\" have 'object' values but should all be numeric. \"SALE DATE\" has an 'object' value but should be datatime, \"TAX CLASS AT THE TIME OF SALE\" has 'integer' value but should be categorical. \"TAX CLASS AT PRESENT\" has 'object' value and should also have categorical value.","511915c3":"## Importing Modules and Libraries","e2a456d6":"The Boroguh column has integer type; based on the value of the variable, this is correct; however, Borough should have me a name such as \"Manhattan\" or \"Brooklyn\". According the data set from Kaggle I will convert the numeric values into the Borough names.","d310dae6":"## Introduction\n\nThe purpose of this analysis is to reinforce the data science methotology and process from reviewing the problem in question, getting and cleaning the data, analyzing it and further creating a predictive model. This report will revolve around the use case of New York Real Estate market. \n\nI am interested in automating the process of figuring out estimated price of a real estate properly in the recent future. Can I predict the sale price of a property within a certain area? Can I figure out estimated price of a property within a certain neighbourhood? Can I predict the future up and coming neighborhood within a borough? These are some of the questions I will try to answer with my analysis.\n\nI will start downloading my libraries.","ee241bcb":"There are 26054 missing data for \"Land Square Feet\", 27385 for \"Gross Square Feet\" and 14176 missing values for \"SALE PRICE\". I will;\n<ul>\n    <li> Avg each missing data variable<\/li>\n    <li> Replace the missing dat value with the avg<\/li>","84119b06":"Finally will import regression , metrics and other model libraries for ML from sklearn","83c1b68c":"Lets see if there is a linear correlation between \"Land Square Feet\" and \"Sales Price\" . Simple Linear Regression is a very straight forward data model; it can help us understand the relationship between Land Square Feet and Sales Price.","8f788550":"There are null values in the SALE PRICE data. ","05602a3f":"## Import the Data","695f985b":"Based on the data exploration, I can use GROSS SQUARE FEET, LAND SQAURE FEET as predictive variable for Single or Multi Linear Regresstion data model. Important data variables are;\n\n<ul>\n    <li>Residential Units<\/li>\n    <li>Land Square Feet<\/li>\n    <li>Gross Square Feet<\/li>\n    <li>Age of the Building Sale<\/li>\n","2347a595":"Since there are no duplicated data, I can look at the values and make sure they have correct data types.","bafb4311":"## Data Cleaning","9e80de48":"There is no correlation between sale price and seaons. For example; Sale prices go up and down during the summer for all boroughs. There is definately a correlation between boroughs and sale price though. Keep in mind, correlation does not mean causation. Cause of something will require more investigation. In this case, I can't use seasons as a predictor variable for my model.","ff9428ae":"Let's see if we can use the BOROUGH","94ae1d4f":"We have a lot more data on \"Brooklyn\" than any other borough within the data set. This might indicate there are more real estate properties in Brooklyn than other boroughs. Interesting that Queens is the largest borough in NYC but has less real estate properties. This might also indicate that our data set might not be accurate. ","0e49e17d":"There isnt any missing data value in the dataset however there are 765 duplicates. I will remove the duplicated data so it doesnt hinder the analysis.","d2252d01":"Let's examine \"Manhattan\" in more detail."}}