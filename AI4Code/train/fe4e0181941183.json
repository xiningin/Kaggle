{"cell_type":{"ef38fdc1":"code","32961965":"code","aaed38a0":"code","d1457ab4":"code","984e9007":"code","9b7f7590":"code","8f0b77d1":"code","4834c835":"code","8748deac":"code","e56eb24a":"code","23ec615d":"code","a1e23198":"code","4c1ba4c0":"code","4c686ca4":"code","2153b48f":"code","3c0b51f5":"code","e256b873":"code","0151dd00":"code","66fdbebd":"code","abcb7f54":"code","8af84852":"code","da4184b6":"code","fc22bcb6":"code","7c6acdec":"code","10ef4f67":"markdown","95afb2e0":"markdown","bf8ba3fb":"markdown","d5e7b8fd":"markdown"},"source":{"ef38fdc1":"# This Python 3 environment comes with many helpful analytics libraries installed\n# It is defined by the kaggle\/python docker image: https:\/\/github.com\/kaggle\/docker-python\n# For example, here's several helpful packages to load in \n\nimport numpy as np\nimport pandas as pd\npd.set_option('max_columns', None)\nimport matplotlib.pyplot as plt\nimport seaborn as sns\n%matplotlib inline\nplt.style.use('ggplot')\nimport datetime # data processing, CSV file I\/O (e.g. pd.read_csv)\n\n# Input data files are available in the \"..\/input\/\" directory.\n# For example, running this (by clicking run or pressing Shift+Enter) will list the files in the input directory\n\nimport os\nprint(os.listdir(\"..\/input\"))\n\n# Any results you write to the current directory are saved as output.","32961965":"restaurants = pd.read_csv('..\/input\/zomato.csv')\n","aaed38a0":"print(restaurants.shape)","d1457ab4":"restaurants.info()","984e9007":"restaurants.head()","9b7f7590":"def hasNumbers(inputString):\n    return any(char.isdigit() for char in inputString)","8f0b77d1":"def get_rating(name):\n    if type(name) == str and hasNumbers(name):\n        rating = name.split('\/');\n        return float(rating[0]);\n\n#Get all the ratings\nratings = restaurants['rate'].apply(get_rating)\nrestaurants['ratings'] = ratings","4834c835":"restaurants['listed_in(type)'].value_counts()","8748deac":"restaurants['rest_type'].value_counts()","e56eb24a":"restaurants.iloc[0,10]","23ec615d":"restaurants.loc[0,'dish_liked']","a1e23198":"restaurants['rest_type'].value_counts()","4c1ba4c0":"restaurants['listed_in(city)'].value_counts().plot(kind='bar', title='Restaurant count by Area',figsize=(20,8)) ","4c686ca4":"restaurants['listed_in(type)'].value_counts().plot(kind='bar', title='Restaurant count by Type')","2153b48f":"#instead of appending data to dataframe , it gives much better performance when data is appended to lists and later converted to dataframe\nrestTypesArr = []\ncuisineTypesArr = []\nfor index, row in restaurants.iterrows():\n    if type(row['rest_type']) == str:\n        rest_type_arr = row['rest_type'].split(',')\n        for rest_type in rest_type_arr:\n            restTypesArr.append([index,rest_type.strip(),row['listed_in(city)']])\n            \n    if type(row['cuisines']) == str:\n        cuisine_type_arr = row['cuisines'].split(',')\n        for cuisine_type in cuisine_type_arr:\n            cuisineTypesArr.append([index,cuisine_type.strip(),row['listed_in(city)']])\n","3c0b51f5":"#Convert list of tuples to dataframe and set column names and indexes\nrestaurantTypedf = pd.DataFrame(restTypesArr,columns=['rest_id', 'rest_type','listed_in(city)'])\ncuisineTypedf = pd.DataFrame(cuisineTypesArr,columns=['rest_id', 'cuisine_type','listed_in(city)'])","e256b873":"restaurantCounts = restaurantTypedf.groupby('rest_type')['rest_type'].agg(['count']).reset_index()\nrestaurantCounts = restaurantCounts.rename(columns = {'count': 'restaurant_counts'})\nrestaurantCounts = restaurantCounts.sort_values('restaurant_counts',ascending=False)\nrestaurantCounts.head()","0151dd00":"cuisineCounts = cuisineTypedf.groupby('cuisine_type')['cuisine_type'].agg(['count']).reset_index()\ncuisineCounts = cuisineCounts.rename(columns = {'count': 'cuisine_counts'})\ncuisineCounts = cuisineCounts.sort_values('cuisine_counts',ascending=False)\ncuisineCounts.head(10)","66fdbebd":"topCuisines = cuisineCounts.head(10)\nindex = np.arange(10)\nf, ax = plt.subplots(figsize=(10,5))\nplt.bar(index, topCuisines['cuisine_counts'])\nplt.xlabel('Cuisine', fontsize=10)\nplt.ylabel('No of restaurants', fontsize=10)\nplt.xticks(index, topCuisines['cuisine_type'], fontsize=10, rotation=30)","abcb7f54":"# df = pd.DataFrame({'category': list('XYZXY'), 'B': range(5,10),'sex': list('mfmff')})\n# df.head()","8af84852":"# df.groupby(['category','sex']).B.count().unstack().reset_index()\\\n# .plot.bar(x = 'category', y = ['f', 'm'])\n# print(df.groupby(['category','sex']).B.count())\n# print(df.groupby(['category','sex']).B.count().unstack())\n# print(df.groupby(['category','sex']).B.count().unstack().reset_index())","da4184b6":"def topCuisine(group,rank):\n    df= group.nlargest(rank).iloc[-2:]\n    return df\n    \n#     return group.loc[group['ranks']==3 ,:]\n\ns = cuisineTypedf.groupby(['listed_in(city)','cuisine_type'])['rest_id'].size()\ns = s.groupby(level=0).apply(topCuisine,rank=4)\n# print(s.reset_index(level=0, drop=True).unstack())\ns.reset_index(level=0, drop=True).unstack().plot.bar(figsize=(14,10))\nplt.xlabel(\"Area\", labelpad=14)\nplt.ylabel(\"Count of Restaurants\", labelpad=14)\nplt.title(\"the most popular cuisines in Each Area\", y=1.02);","fc22bcb6":"# print(cuisineTypedf.groupby(['listed_in(city)','cuisine_type'])['cuisine_type'].count())\ns = cuisineTypedf.groupby(['listed_in(city)','cuisine_type'])['rest_id'].count()\n# print(s.groupby(level=0).apply(lambda group: group.nlargest(4).iloc[-2:]))\ns.groupby(level=0).apply(lambda group: group.nlargest(4).iloc[-2:]).reset_index(level=0, drop=True).unstack().reset_index()\\\n.plot.bar(x = 'listed_in(city)',  figsize=(20, 6), rot=30);\nplt.xlabel(\"Area\", labelpad=14)\nplt.ylabel(\"Count of Restaurants\", labelpad=14)\nplt.title(\"Two most popular cuisines in Each Area\", y=1.02);","7c6acdec":"def cuisineRest(cusineType):\n    mexicanRestDf = cuisineTypedf.loc[cuisineTypedf['cuisine_type']==cusineType,:]\n    result = pd.merge(mexicanRestDf, restaurants, left_on='rest_id', right_index=True, how='left', sort=False);\n    result['rating_votes'] = result['votes'] * result['ratings']\n    result = result.drop(columns = ['listed_in(city)_x'])\n    result = result[['rating_votes','address','listed_in(city)_y','rest_id']].sort_values('rating_votes', ascending=False)\n    # print(result.groupby('listed_in(city)_y')['rating_votes'].sum().reset_index())\n    result.groupby('listed_in(city)_y')['rating_votes'].sum().reset_index().head(10).sort_values('rating_votes', ascending=False).plot.bar(x = 'listed_in(city)_y', y = 'rating_votes',figsize=(20, 6), rot=30);\n    plt.xlabel(\"Area\", labelpad=14)\n    plt.ylabel(\"top ratings\", labelpad=14)\n    plt.title( \"{} restaurants in Each Area\".format(cusineType), y=1.02);\n\n# restaurants.iloc[result.head()['rest_id'],1]\ncuisineRest('Biryani')\ncuisineRest('Mexican')\ncuisineRest('Italian')","10ef4f67":"The below code gives top selling food in an area based on number (x) . i.e if 2 is given , it will return 2nd highest available cuisine in an area","95afb2e0":"**North Indian and Chinese cuisines are two most popular foods in all areas in Bangalore**","bf8ba3fb":"1. top mexican restaurants\n2. top italian restaurants\n3. top chinese restaurant\n4. top biryani restaurants\n5. top breweries with dine in\n6. number of restros servig food vs drinks\n7. area, cuisine_type and price range gives top 5 restaurants in area with cuisine type below range\n","d5e7b8fd":"****There are double the restaurants serving North indian food compared to South indian food in Bangalore****"}}