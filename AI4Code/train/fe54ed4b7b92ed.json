{"cell_type":{"d4d2f632":"code","e4968177":"code","d2918440":"code","b1b93e0d":"code","5410b193":"code","c3a7b298":"code","e7b5adbf":"code","c0f488e5":"code","ae1725fc":"code","234633c3":"code","128aea67":"code","f900cd1f":"code","857246b7":"code","009a58dc":"code","94b42123":"code","7f1c63ad":"code","551437d4":"code","6670e2cb":"code","832ec7c7":"code","796fa879":"code","ff1c3804":"code","9157a632":"code","96bf7c8c":"markdown","85e9f215":"markdown","5fe30021":"markdown","b3b1853a":"markdown","6aa942a9":"markdown","5a701cd6":"markdown","dcd1475a":"markdown","7f4a17bd":"markdown","1f9bd4e3":"markdown","66c1b783":"markdown","4e31f007":"markdown","57fedd3b":"markdown","eee33419":"markdown"},"source":{"d4d2f632":"# This Python 3 environment comes with many helpful analytics libraries installed\n# It is defined by the kaggle\/python Docker image: https:\/\/github.com\/kaggle\/docker-python\n# For example, here's several helpful packages to load\n\nimport numpy as np # linear algebra\nimport pandas as pd # data processing, CSV file I\/O (e.g. pd.read_csv)\nimport plotly.express as px\n\n# Input data files are available in the read-only \"..\/input\/\" directory\n# For example, running this (by clicking run or pressing Shift+Enter) will list all files under the input directory\n\nimport os\nfor dirname, _, filenames in os.walk('\/kaggle\/input'):\n    for filename in filenames:\n        print(os.path.join(dirname, filename))\n\n# You can write up to 5GB to the current directory (\/kaggle\/working\/) that gets preserved as output when you create a version using \"Save & Run All\" \n# You can also write temporary files to \/kaggle\/temp\/, but they won't be saved outside of the current session","e4968177":"happiness = pd.read_excel('\/kaggle\/input\/happiness.xls')","d2918440":"# Show the top 5 happiest nations\nhappiness.head(5)","b1b93e0d":"# drop the standard error, upperwhisker and lowerwhisker columns and all the explained by columns\nhappiness.drop(happiness.columns[[3,4,5,-2,-3,-4,-5,-6,-7]],axis=1,inplace=True)","5410b193":"happiness.head()","c3a7b298":"# Which are the ten least happiest nations?\nfig = px.bar(happiness.tail(10),x='Ladder score', y='Country name')\nfig.show()","e7b5adbf":"# GDP, Happiness Score and Life Expectancy of the top 20 happiest nations\nfig = px.scatter(happiness.head(20), x=\"Logged GDP per capita\", y=\"Ladder score\",\n\t         size=\"Healthy life expectancy\", color=\"Regional indicator\",\n                 hover_name=\"Country name\", log_x=True, size_max=60)\nfig.show()\n\n# Western Europe greatly dominates this.","c0f488e5":"# is social support important when it comes to happiness?\nfig = px.scatter(happiness, x=\"Social support\", y=\"Ladder score\", color=\"Regional indicator\",\n                 size='Healthy life expectancy', hover_data=['Country name'])\nfig.show()\n","ae1725fc":"suicide = pd.read_csv('\/kaggle\/input\/suicide.csv')","234633c3":"suicide.head()","128aea67":"suicide.sort_values(by=['2016 Suicide Rate'],inplace = True, ascending = False)\nsuicide.head(20)","f900cd1f":"happiness.sort_values(by=['Country name'],inplace=True)\nsuicide.sort_values(by=['Country name'],inplace=True)\nhappiness_suicide = pd.merge(happiness, suicide, on = 'Country name', how = 'inner')","857246b7":"happiness_suicide.head()","009a58dc":"fig = px.scatter (happiness_suicide, x = '2016 Suicide Rate', y = 'Ladder score', color = 'Regional indicator',\n                 hover_data = ['Country name'])\nfig.show()","94b42123":"# Before the regression, is there a direct correlation between the factors in the happiness index and suicide rates?\ncorr_matrix = happiness_suicide.corr()\ncorr_matrix[\"2016 Suicide Rate\"].sort_values(ascending=False)","7f1c63ad":"happiness_suicide.drop(happiness.columns[[2]],axis=1,inplace=True)","551437d4":"# The libraries I shall use\nfrom sklearn.model_selection import train_test_split\nfrom sklearn.preprocessing import StandardScaler\nfrom sklearn.svm import SVR\nfrom sklearn.ensemble import RandomForestRegressor\nfrom sklearn.metrics import mean_squared_error","6670e2cb":"# Get the independent and dependent variables in place\nX = happiness_suicide.iloc[:, 2:10].values\ny = happiness_suicide.iloc[:, -1].values","832ec7c7":"# Carry out feature scaling\nsc_X=StandardScaler()\nsc_y=StandardScaler()\nX= sc_X.fit_transform(X)\ny= sc_y.fit_transform(y.reshape(-1,1))","796fa879":"# Divide the dataset into training and test sets\nX_train, X_test, y_train, y_test = train_test_split(X, y, test_size = 0.2, random_state = 0)","ff1c3804":"# SVR regression and accuracy\nregressor_rbf=SVR(kernel='rbf')\nregressor_rbf.fit(X_train,y_train.ravel())\ny_pred_rbf=regressor_rbf.predict(X_test)\nmean_squared_error(y_test,y_pred_rbf)","9157a632":"# Random Forests\nregressor1=RandomForestRegressor(n_estimators=300, random_state=0)\nregressor1.fit(X_train,y_train.ravel())\ny_pred1=regressor1.predict(X_test)\nmean_squared_error(y_test,y_pred1)","96bf7c8c":"This is in alphabetical order. Let us change that.","85e9f215":"Based on political stereotypes some of these nations make sense e.g. Afghanistan and South Sudan. However, as a Kenyan it shocks me to see Rwanda and Tanzania on the list. In fact we consider the Tanzanians happier than we are. They have Zanzibar and longer beaches than ours. But what do I know. Also India's presence in the top 10 is interesting too. ","5fe30021":"As expected Western Europe dominates.The only standout nation here is Costa Rica. The rest are as expected and from the start it is clear that the happiness score is mostly a measurement of wealth, politics and some other factors that European and Western nations excel at.","b3b1853a":"I originally posted this on https:\/\/github.com\/benonik\/nations_and_happiness. I have always been intrigued with the happiness index and wondered whether there was more to it than met the eye. It came to my attention that in fact the nations with high happiness scores are also the ones that have higher suicide rates. This is an exploratory data analysis on this sensitive subject.","6aa942a9":"The scatter plot of suicide rate vs the ladder score (the happiness index) is intriguing. If we assume that suicide rates below 5 are in fact a great indicator of 'some sort of happiness' we can conclude that the nations that are higher on the happiness index are congregated on the wrong area of the graph. The UAE has a suicide rate of 2.8 per 100k and a happiness index of 6.8. Jamaica has a 2.2 rate of suicide (lowest for the merged dataset) with the Maldives following with 2.3. Something to do with the ocean and warm weather? Who knows.\n\nCan we then use the factors used to determine the happiness index to determine suicide? Or are we going to face the same problem as the organization that came up with the happiness index? Can we quantify determinants of depression and its consequences? Without being experts in psychology of course, and for this reason forgive me.","5a701cd6":"From the top 20 shown above an astonishing number of nations come from the 'First World.' Only two nations from Africa are in the top 20: Lesotho and Equitorial Guinea. Only three from South America: Guyana, Suriname, and Uruguay. Europe dominates here as it did the happiness index.\n\nWe are faced by an interesting question here: can we use the factors that are used by the happiness index to actually predict the suicide rates of nation? Can we then conclude that the higher a country's GDP the higher its suicide rates? Let's find out.\n\nTo do this I have to combine these two datasets. However, this will result in loss of data because I will only include the nations in the happiness index. However, the nations that are left out can be used to test the hypothesis later: can we used the GDP, social support and other factors in the World Happiness Report to predict the suicide rates of a nation?","dcd1475a":"Let's attempt to use regression techniques to do this. I don't have much hope for any model because of the fact that it is actually more difficult to predict suicide rates than it is to quantify a nation as happy or not.","7f4a17bd":"Now it is time to analyze the more sensitive dataset: The WHO suicide rate report from 2016. I downloaded only the dataset that shows the total suicide rate per 100,0000. You can choose the one that shows the male\/female totals but I was more interested about national average figures.","1f9bd4e3":"That is an 90% error. Quite impressive given that our task was doomed from the start.","66c1b783":"Social support is important. This is how the World Happiness Report defines it: Social support is the national average of the binary responses (0=no, 1=yes) to the Gallup World Poll (GWP) question, \u201cIf you were in trouble, do you have relatives or friends you can count on to help you whenever you need them, or not?\u201d\nIt is interesting that some nations would rank low on this. It seems like a straightforward question that most people would answer yes, if you had a family member or a friend. Once again why does Rwanda and India rank low on social support?","4e31f007":"There are two main reasons that the models have performed this poorly. First,the happiness index is created from data collected through surveys. Thus factors such as social support, perceptions of corruption and others definitely have nothing to do with the suicide rates of a nation. These factors were collected to attempt to explain the happiness of nations (another vanity project).\n\nSecondly, the actual factors that contribute to suicide rates tend to have nothing to with macroeconomic indicators such as the GDP of a nation.One thing is clear: GDP and life expectancy of nations should not be used to determine suicide rates and it should definitely not be used to determine the happiness of nations. \n\nAfghanistan has a lower suicide rate than Norway, but Norway is happier. Suicide rates are an indication of mental health problems that are usually difficult to diagnose and treat. Perhaps next time when the happiness report is created this should be considered: a happy nation is one that is truly happy. If your citizens have a higher risk of suicide than those of another nation, this should be factored into your ranking on the happiness index. ","57fedd3b":"Now this is a more interesting dataset. You can see both how happy a nation is (according to the Happiness Report) and what its suicide rate is.","eee33419":"Because this is somewhat a vanity idea I shall use of all these factors to predict suicide rates I shall use two of my favorite regression models: random forests and Kernel SVR to see if we can get the answers to this question.\nHowever, this is a small dataset and the results might not be as impressive as expected.\nHowever, I need to drop the ladder score which was created from the other factors presented here."}}