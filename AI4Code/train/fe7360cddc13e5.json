{"cell_type":{"a301fb69":"code","873088b9":"code","f5e23cd2":"code","727491a0":"code","6813237b":"code","6b838675":"code","4b4c15cf":"code","5ad6f0ac":"code","05372316":"code","38c40564":"code","ed21b9c4":"code","846e7144":"code","f004f1e9":"code","45e0db47":"code","a3cae195":"code","083898c9":"code","adf5861f":"code","acad3114":"code","e49edf1f":"code","092e2e05":"code","13a8366d":"code","ae44f197":"code","1db20670":"code","ec75e0b0":"code","e20d53ea":"code","95bb7df2":"code","d41009a2":"code","56f47c41":"code","0a25e5c9":"code","3d5336c7":"code","726fb2d0":"code","09d18a1b":"code","10446af3":"code","77296c94":"code","0c0c64e1":"code","eaad4984":"code","2a3d1def":"code","ccd00748":"code","11c8d168":"code","73ed9c60":"code","c436c580":"code","b56660b7":"code","43c7181d":"code","a8adfbd2":"code","e93120be":"code","0969fe8e":"code","7ff1a0c2":"code","74bbd45a":"code","5db7a85f":"code","75a93a2c":"code","8db21d5c":"code","645a730a":"code","a54c0efc":"code","738dd741":"code","79d8162a":"code","6d74491e":"code","b6886b7b":"code","82bad622":"code","c3c3be6d":"code","e957f042":"code","b1425111":"code","7988efc1":"code","9e659867":"code","fa10f800":"markdown","aefdb3c5":"markdown","4566386f":"markdown","bcd402ef":"markdown","a7db6af5":"markdown","248140ac":"markdown","7ca33a1b":"markdown","59f48e3c":"markdown","3aa53f22":"markdown","0e0b4091":"markdown","10b67958":"markdown","5b6caa40":"markdown","808e2c9f":"markdown","0ce61990":"markdown","eb144c8c":"markdown","829a638e":"markdown","ab4acf75":"markdown","abe48358":"markdown","bddb8ba0":"markdown","ca5633bb":"markdown","69a19f1a":"markdown","ad3fa5fa":"markdown","c1d7a562":"markdown","c116653e":"markdown","e2c74218":"markdown","7586cf72":"markdown","ea503e36":"markdown","61dc4683":"markdown","5d5cea9e":"markdown","76281a9a":"markdown","9d5fc1e1":"markdown","0689e42a":"markdown","2a234f6b":"markdown","89ca555c":"markdown","2a35d708":"markdown","7be95fc9":"markdown","65133228":"markdown","0877dfca":"markdown","aa6bd236":"markdown","29d61afa":"markdown","14213963":"markdown","28bdd76b":"markdown","cd0b1e5c":"markdown","0a54a94b":"markdown","b865d271":"markdown","a377991e":"markdown","42e88b35":"markdown","9f91d880":"markdown","1121bd0e":"markdown","8cf90438":"markdown","beed566d":"markdown"},"source":{"a301fb69":"from IPython.display import Image\nfrom IPython.core.display import HTML ","873088b9":"Image(url = \"https:\/\/i.hizliresim.com\/2orGgZ.png\",width=500, height=100)","f5e23cd2":"Image(url = \"https:\/\/miro.medium.com\/max\/1400\/1*9c6EW5GCp4pzgA7wi2VOaA.png\", width=500, height=100)","727491a0":"Image(url = \"https:\/\/i.hizliresim.com\/Z1OMBT.png\",width=500, height=100)","6813237b":"Image(url = \"https:\/\/i.hizliresim.com\/JLecRW.png\",width=500, height=100)","6b838675":"Image(url = \"https:\/\/i.hizliresim.com\/4ufsJR.png\",width=500, height=100)","4b4c15cf":"Image(url = \"https:\/\/miro.medium.com\/max\/1000\/1*RGJobJQsS6gtv0S2HcEYdg.png\", width=500, height=100)","5ad6f0ac":"Image(url = \"https:\/\/i.hizliresim.com\/bn1Qi2.png\",width=500, height=100)","05372316":"Image(url = \"https:\/\/i.hizliresim.com\/FB1iJG.png\",width=500, height=100)","38c40564":"Image(url = \"https:\/\/i.hizliresim.com\/ravabX.png\",width=500, height=100)","ed21b9c4":"Image(url = \"https:\/\/i.hizliresim.com\/3b3JNE.png\",width=500, height=100)","846e7144":"Image(url = \"https:\/\/i.hizliresim.com\/yau66x.png\",width=500, height=100)","f004f1e9":"Image(url = \"https:\/\/i.hizliresim.com\/KqTWz0.png\",width=500, height=100)","45e0db47":"Image(url = \"https:\/\/i.hizliresim.com\/pzwP9H.png\",width=300, height=80)","a3cae195":"Image(url = \"https:\/\/i.hizliresim.com\/5jyPr5.png\",width=300, height=100)","083898c9":"Image(url = \"https:\/\/i.hizliresim.com\/4f0E33.png\",width=500, height=100)","adf5861f":"pip install lifetimes","acad3114":"import numpy as np\nimport pandas as pd\nimport matplotlib.pyplot as plt\nimport seaborn as sns\n\nfrom lifetimes.plotting import *\nfrom lifetimes.utils import *\n\nfrom lifetimes import GammaGammaFitter\nfrom lifetimes import ModifiedBetaGeoFitter\n\nfrom lifetimes.plotting import plot_history_alive\nfrom datetime import date\nfrom pylab import figure, text, scatter, show\n\nfrom lifetimes.plotting import plot_frequency_recency_matrix\nfrom lifetimes.plotting import plot_period_transactions\nfrom lifetimes.plotting import plot_calibration_purchases_vs_holdout_purchases\n\nfrom lifetimes.utils import calculate_alive_path\n\nfrom lifetimes.utils import calibration_and_holdout_data\n\nimport warnings\nwarnings.filterwarnings('ignore')","e49edf1f":"data = pd.read_csv('..\/input\/onlineretail\/OnlineRetail.csv', header = 0, encoding= 'cp1252')","092e2e05":"data.head()","13a8366d":"data.info()","ae44f197":"data.isnull().sum()","1db20670":"data = data[pd.notnull(data['CustomerID'])] ##\u00a0Customer Id lerin bo\u015f oldu\u011fu sat\u0131rlar\u0131 siliyoruz.","ec75e0b0":"data['InvoiceDate'] = pd.to_datetime(data['InvoiceDate'], format=\"%m\/%d\/%Y %H:%M\").dt.date # Tarih format\u0131n\u0131 ayarlama","e20d53ea":"data = data[(data['Quantity']>0)]","95bb7df2":"data['Total_Sales'] = data['Quantity'] * data['UnitPrice']\nnecessary_cols = ['CustomerID', 'InvoiceDate','Quantity','UnitPrice','Total_Sales']\ndata = data[necessary_cols]","d41009a2":"data['CustomerID'] = data['CustomerID'].astype(int)","56f47c41":"last_order_date = data['InvoiceDate'].max()\nmin_order_date = data['InvoiceDate'].min()\nprint(\"Veride g\u00f6zlemlenen ilk i\u015flem tarihi:\", min_order_date)\nprint(\"Veride g\u00f6zlemlenen son i\u015flem tarihi:\", last_order_date)\nprint(\"--------------------------------------\")","0a25e5c9":"elog = data[['CustomerID','InvoiceDate','Total_Sales']]","3d5336c7":"elog.rename(columns = {'CustomerID':'CUSTOMER_ID','InvoiceDate':'ORDER_DATE'},inplace = True)","726fb2d0":"elog","09d18a1b":"summary_cal_holdout = calibration_and_holdout_data(elog, \n                                                   customer_id_col = 'CUSTOMER_ID', \n                                                   datetime_col = 'ORDER_DATE',\n                                                   monetary_value_col = 'Total_Sales',\n                                        calibration_period_end='2011-09-10',\n                                        observation_period_end='2011-12-09')","10446af3":"summary_cal_holdout.head()","77296c94":"returning_customers_summary = summary_cal_holdout[summary_cal_holdout['frequency_cal'] > 0]\nreturning_customers_summary[['monetary_value_cal', 'frequency_cal']].corr()","0c0c64e1":"from lifetimes import ModifiedBetaGeoFitter\n\nmbgnbd = ModifiedBetaGeoFitter(penalizer_coef=0.01)\nmbgnbd.fit(summary_cal_holdout['frequency_cal'], \n        summary_cal_holdout['recency_cal'], \n        summary_cal_holdout['T_cal'],\n       verbose=True)","eaad4984":"t = 90\nsummary_cal_holdout['predicted_purchases'] = mbgnbd.conditional_expected_number_of_purchases_up_to_time(t, \n                                                                                      summary_cal_holdout['frequency_cal'], \n                                                                                      summary_cal_holdout['recency_cal'], \n                                                                                      summary_cal_holdout['T_cal'])\n\nsummary_cal_holdout['p_alive'] = mbgnbd.conditional_probability_alive(summary_cal_holdout['frequency_cal'], \n                                                                         summary_cal_holdout['recency_cal'], \n                                                                         summary_cal_holdout['T_cal'])","2a3d1def":"display(summary_cal_holdout.sample(2))","ccd00748":"from lifetimes import GammaGammaFitter\n\ngg = GammaGammaFitter(penalizer_coef = 0.01)\ngg.fit(returning_customers_summary['frequency_cal'],\n        returning_customers_summary['monetary_value_cal'],\n       verbose=True)","11c8d168":"summary_cal_holdout['clv'] = gg.customer_lifetime_value(\n    mbgnbd,\n    summary_cal_holdout['frequency_cal'],\n    summary_cal_holdout['recency_cal'],\n    summary_cal_holdout['T_cal'],\n    summary_cal_holdout['monetary_value_cal'],\n    time=3, #ay\n    discount_rate=0)\nsummary_cal_holdout['clv'] += -1*summary_cal_holdout['clv'].min()","73ed9c60":"summary_cal_holdout","c436c580":"ax = plot_period_transactions(mbgnbd, max_frequency=7)\nax.set_yscale('log')\nsns.despine();","b56660b7":"plot_calibration_purchases_vs_holdout_purchases(mbgnbd, summary_cal_holdout)\nsns.despine();","43c7181d":"individual = summary_cal_holdout.iloc[1]\n\nid = individual.name\nt = 365*50\n\ntoday = date.today()\ntwo_year_ago = today.replace(year=today.year - 2)\none_year_from_now = today.replace(year=today.year + 1)\n\nsp_trans = elog.loc[elog['CUSTOMER_ID'] == id]","a8adfbd2":"t = (today - sp_trans.ORDER_DATE.min()).days\np_alive_today = pd.DataFrame(calculate_alive_path(mbgnbd, sp_trans, 'ORDER_DATE', t, freq='D'))[0].tail(1).values\np_alive_today = np.round(p_alive_today[0], 2)\nprint('Probability that customer is alive today is', p_alive_today)\n\nt = (one_year_from_now - sp_trans.ORDER_DATE.min()).days\nax = plot_history_alive(mbgnbd, t, sp_trans, 'ORDER_DATE', start_date=two_year_ago) #, start_date='2016-01-01'\nax.vlines(x=today, ymin=0, ymax=1.05, colors='#4C4C4C')\nax.hlines(y=0.8, xmin=two_year_ago, xmax=one_year_from_now, colors='#4C4C4C')\n\nax.set_xlim(two_year_ago, one_year_from_now) # sp_trans.ORDER_DATE.min()\nax.set_ylim(0, 1.05)\n\nplt.xticks(rotation=-90)\ntext(0.75, 0.1, p_alive_today, ha='center', va='center', transform=ax.transAxes)\n\nsns.despine()","e93120be":"elog","0969fe8e":"elog = pd.DataFrame(data = elog,columns = ['CUSTOMER_ID', 'ORDER_DATE'])","7ff1a0c2":"data = summary_data_from_transaction_data(data,\n                                          'CustomerID',\n                                          'InvoiceDate',\n                                          monetary_value_col='Total_Sales',\n                                          observation_period_end='2011-12-9')\ndata.reset_index().head()","74bbd45a":"#\u00a0Recency : M\u00fc\u015fterinin al\u0131\u015fveri\u015f yapt\u0131\u011f\u0131 son g\u00fcnden bu yana ge\u00e7en g\u00fcn say\u0131s\u0131\n# Frequency : Toplam al\u0131\u015fveri\u015f say\u0131s\u0131 - 1\n#\u00a0Monetary : Toplam al\u0131\u015fveri\u015f tutar\u0131\n# T_cal : M\u00fc\u015fterinin ilk i\u015flemi ile train setinin son g\u00fcn\u00fc aras\u0131ndaki g\u00fcnler. M\u00fc\u015fteri ya\u015f\u0131","5db7a85f":"mbgnbd = ModifiedBetaGeoFitter(penalizer_coef=0.00)\nmbgnbd.fit(data['frequency'], \n        data['recency'], \n        data['T'],\n       verbose=True)","75a93a2c":"%matplotlib inline\nfig = plt.figure(figsize=(12,8))\nplot_frequency_recency_matrix(mbgnbd);","8db21d5c":"control = data[data['frequency'] > 0]\ncontrol[['monetary_value', 'frequency']].corr()","645a730a":"print(data['frequency'].describe())","a54c0efc":"one_time_buyers = round(sum(data['frequency'] == 0)\/float(len(data))*(100),2)\nprint(\"Sadece bir kez sat\u0131n al\u0131m yapm\u0131\u015flar\u0131n oran\u0131:\", one_time_buyers ,\"%\")","738dd741":"fig = plt.figure(figsize=(12,8))\nplot_probability_alive_matrix(mbgnbd)","79d8162a":"t = 90\ndata['pred_num_txn'] = round(mbgnbd.conditional_expected_number_of_purchases_up_to_time(t, data['frequency'], data['recency'], data['T']),2)\ndata.sort_values(by='pred_num_txn', ascending=False).head(10).reset_index()","6d74491e":"plot_period_transactions(mbgnbd);","b6886b7b":"t = 90\nindividual = data.loc[14911]\nmbgnbd.predict(t, individual['frequency'], individual['recency'], individual['T'])","82bad622":"shortlisted_customers = data[data['frequency']>0]\nprint(shortlisted_customers.head().reset_index())\nprint(\"-----------------------------------------\")\nprint(\"The Number of Returning Customers are: \",len(shortlisted_customers))","c3c3be6d":"ggf = GammaGammaFitter(penalizer_coef = 0)\nggf.fit(shortlisted_customers['frequency'],\n        shortlisted_customers['monetary_value'])\nprint(ggf)","e957f042":"print(ggf.conditional_expected_average_profit(\n        data['frequency'],\n        data['monetary_value']\n    ).head(10))","b1425111":"data['pred_txn_value'] = round(ggf.conditional_expected_average_profit(\n        data['frequency'],\n        data['monetary_value']), 2)\ndata.reset_index().head()","7988efc1":"data['CLV'] = round(ggf.customer_lifetime_value(\n    mbgnbd, #gelecekteki i\u015flemlerin say\u0131s\u0131n\u0131 tahmin etmek i\u00e7in kullan\u0131lacak model\n    data['frequency'],\n    data['recency'],\n    data['T'],\n    data['monetary_value'],\n    time=12, # ay baz\u0131nda\n    discount_rate=0.01 # opsiyoneldir.\n), 2)\n\n\ndata.sort_values(by='CLV', ascending=False).head(10).reset_index()","9e659867":"data.drop(data.iloc[:, 0:6], inplace=True, axis=1)\n\ndata.sort_values(by='CLV', ascending=False).head(10).reset_index()","fa10f800":"Ortalama 4 i\u015flem yapan bir m\u00fc\u015fterinin t zamanda 9 ve 0 al\u0131\u015fveri\u015f yapma olas\u0131l\u0131\u011f\u0131 g\u00f6rece d\u00fc\u015f\u00fckt\u00fcr.","aefdb3c5":"M\u00fc\u015fterinin t zaman\u0131nda aktif olma ihtimalini a\u015fa\u011f\u0131daki form\u00fclizasyon verir.","4566386f":"## Veriyi Y\u00fckleme ve Yap\u0131s\u0131n\u0131 \u0130nceleme","bcd402ef":"# Modelin Varsay\u0131mlar\u0131","a7db6af5":"Buraya kadar modelin da\u011f\u0131l\u0131mlara ba\u011fl\u0131 parametreleri olan r,\u03b1,a,b de\u011ferleri kullan\u0131lmam\u0131\u015ft\u0131. Ba\u015fta verdi\u011fimiz likelihood fonksiyonlar\u0131n\u0131n maksimize edilmesi ile bu en iyi parametreler tahmin edilebilir. Ve elde edilen parametrelerle yukar\u0131da elde edilen ham denklemler geli\u015ftirilir. Ve ge\u00e7mi\u015f davran\u0131\u015flardan yola \u00e7\u0131karak \u00f6rne\u011fin bir m\u00fc\u015fterinin gelecekteki transaction say\u0131s\u0131n\u0131n beklenen de\u011feri a\u015fa\u011f\u0131daki gibi ifade edilir:","248140ac":"-----------------------------------------------------------------------------------------------","7ca33a1b":"Bu durumda beklenen de\u011fer hesaplamas\u0131 yap\u0131ld\u0131\u011f\u0131nda transaction say\u0131s\u0131n\u0131n beklenen de\u011feri \u015fu denklemin \u00e7\u00f6z\u00fcmlenmesiyle elde edilecektir:","59f48e3c":"## Manip\u00fclasyon","3aa53f22":"\"\"\"License\n\nCopyright (c) 2020 Mustafa Batuhan\n\nPermission is hereby granted, free of charge, to any person obtaining a copy\nof this software and associated documentation files (the \"Software\"), to deal\nin the Software without restriction, including without limitation the rights\nto use, copy, modify, merge, publish, distribute, sublicense, and\/or sell\ncopies of the Software, and to permit persons to whom the Software is\nfurnished to do so, subject to the following conditions:\n\nThe above copyright notice and this permission notice shall be included in all\ncopies or substantial portions of the Software.\n\nTHE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\nIMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\nFITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\nAUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\nLIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\nOUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\nSOFTWARE.\"\"\"","0e0b4091":"-----------------------------------------------------------------------------------------------","10b67958":"<font color='red'> **5 - Transaction oran\u0131 \u03bb ve pasifle\u015fme olas\u0131l\u0131\u011f\u0131 p, m\u00fc\u015fteriler aras\u0131nda ba\u011f\u0131ms\u0131z olarak de\u011fi\u015fir.**\n","5b6caa40":"<font color='blue'>**TEOR\u0130K KISIM**","808e2c9f":"Her m\u00fc\u015fterinin davran\u0131\u015flar\u0131 birbirinden farkl\u0131d\u0131r, dolay\u0131s\u0131yla birbirlerinden ba\u011f\u0131ms\u0131zd\u0131r.","0ce61990":"M\u00fc\u015fterilerin transaction say\u0131s\u0131 ile transactionlar aras\u0131ndaki ge\u00e7en s\u00fcre aras\u0131ndaki ili\u015fkiye bakarak, ve transactionlar aras\u0131ndaki s\u00fcrenin \u00fcstel da\u011f\u0131l\u0131ma, t zamanda x transaction\u0131n ger\u00e7ekle\u015fme olas\u0131l\u0131\u011f\u0131n\u0131n da poisson da\u011f\u0131l\u0131m\u0131na uydu\u011fu varsay\u0131mlar\u0131ndan yola \u00e7\u0131karak bu iki da\u011f\u0131l\u0131m\u0131n fonksiyonlar\u0131na veriler uyduruldu\u011funda P(X(t) = x| \u03bb, p), a\u015fa\u011f\u0131daki gibi form\u00fclize edilebilir.","eb144c8c":"T = **G\u00f6zlemlenen datan\u0131n son g\u00fcn\u00fc\/ M\u00fc\u015fterinin ya\u015f\u0131**\n\nt = **Tahminlemeyi yapaca\u011f\u0131m\u0131z zaman diliminin uzunlu\u011fu**\n\ntx = **M\u00fc\u015fterinin son i\u015fleminin zaman\u0131**\n\nX(t) = **t zamanda ger\u00e7ekle\u015fen i\u015flem say\u0131s\u0131**","829a638e":"## K\u00fct\u00fcphanelerin Import Edilmesi","ab4acf75":"O halde bunun t\u00fcm olas\u0131l\u0131klar\u0131 i\u00e7eren olas\u0131l\u0131k yo\u011funluk fonksiyonu a\u015fa\u011f\u0131daki \u015fekilde yaz\u0131labilir.","abe48358":"Ger\u00e7ek hayatta m\u00fc\u015fteri davran\u0131\u015flar\u0131n\u0131 anlamland\u0131rabilmek,bize m\u00fc\u015fterilere olan yakla\u015f\u0131m stratejileri ba\u011flam\u0131nda bir i\u00e7g\u00f6r\u00fc sa\u011flar. Zira bir \u015firketin gelecekteki de\u011feri, uzun vadede t\u00fcm m\u00fc\u015fterilerinden elde etti\u011fi kard\u0131r. Pazarlama,elde tutma maliyetleri d\u00fc\u015f\u00fcn\u00fcld\u00fc\u011f\u00fcnde, bir firman\u0131n t\u00fcm m\u00fc\u015fterileriyle uzun vadeli ili\u015fkilerini s\u00fcrd\u00fcrmesi optimum se\u00e7enek de\u011fildir. \n\nBu model,m\u00fc\u015fterilerin gelecekteki davran\u0131\u015f yap\u0131s\u0131n\u0131 \u00f6l\u00e7mek i\u00e7in 2 temel olas\u0131l\u0131ksal yakla\u015f\u0131m \u00f6ne s\u00fcrer.\n\n1- Her m\u00fc\u015fterinin bir alive olma olas\u0131l\u0131\u011f\u0131 vard\u0131r.\n\n2- Alive olan her m\u00fc\u015fterinin ileride i\u015flem ger\u00e7ekle\u015ftirme olas\u0131l\u0131\u011f\u0131 vard\u0131r.\n\nModel,m\u00fc\u015fterilerin ge\u00e7mi\u015f zamana ait RFM verilerindeki dinamikleri \u00f6\u011frenerek m\u00fc\u015fterilerin gelecekteki i\u015flemlerinin beklenen say\u0131s\u0131n\u0131, ve m\u00fc\u015fterinin \"aktif\" olma olas\u0131l\u0131\u011f\u0131n\u0131 hesaplayarak, bir m\u00fc\u015fterinin ya\u015fam boyu de\u011ferini \u00f6l\u00e7memize yard\u0131mc\u0131 olur. \n\nRFM gibi klasik ve ge\u00e7mi\u015fe d\u00f6n\u00fck yakla\u015f\u0131mlardan farkl\u0131 olarak davran\u0131\u015fsal ve bayezyen bir modeldir. Ve nihayetinde her m\u00fc\u015fterinin gelecekteki karl\u0131l\u0131\u011f\u0131n\u0131 makul bir hata ile hesaplama gayesi ta\u015f\u0131r. \n\nEn bilinenleri **Pareto\/NBD** ve **BG\/NBD** dir. Belirli parametreleri vard\u0131r. Parametrelerinin hesaplanmas\u0131ndaki karma\u015f\u0131kl\u0131k ve tahmin sonu\u00e7lar\u0131n\u0131n g\u00f6rece daha k\u00f6t\u00fc olmas\u0131 nedeni ile Pareto\/NBD yerine varsay\u0131mlarda de\u011fi\u015fiklik yap\u0131lm\u0131\u015f hali BG\/ NBD' yi kullanmak daha avantajl\u0131d\u0131r.\n\nBG\/NBD modeli 2005 y\u0131l\u0131nda bir matematik\u00e7i ve pazarlama profes\u00f6r\u00fc olan Peter Fader'\u0131n makalesinde yay\u0131mlanm\u0131\u015ft\u0131r.\n\nBu notebookta modelin teorik yap\u0131s\u0131 ve \u00f6rnek bir veri seti \u00fczerinden pythondaki kullan\u0131m\u0131 anlat\u0131lacakt\u0131r.","bddb8ba0":"<font color='red'> **3-Her m\u00fc\u015fterinin g\u00f6zlemlenemeyen bir \"\u00f6mr\u00fc\" vard\u0131r. Herhangi bir transactiondan sonra, m\u00fc\u015fteri p olas\u0131l\u0131\u011f\u0131 ile pasif hale gelir. M\u00fc\u015fterinin pasif hale geldi\u011fi bu nokta, b\u0131rakma oran\u0131yla \u00fcstel da\u011f\u0131l\u0131m\u0131 takip eder.**","ca5633bb":"### Modelin \u00c7\u0131kt\u0131lar\u0131","69a19f1a":"------------------------------------------------------------------------------------------------------------------------","ad3fa5fa":"# Buy \u2018Til You Die\u201d Yakla\u015f\u0131m\u0131","c1d7a562":"kaynak : \u201cCounting Your Customers\u201d the Easy Way: An Alternative to the Pareto\/NBD model - 2015 \n\nhttp:\/\/brucehardie.com\/papers\/018\/fader_et_al_mksc_05.pdf","c116653e":"Model parasall\u0131kla frekans aras\u0131nda bir ili\u015fki olmad\u0131\u011f\u0131n\u0131 varsayar. Bunun kontrol\u00fcn\u00fc yap\u0131yoruz. Korelasyon varsa gamma gamma modelini kullanaca\u011f\u0131z.","e2c74218":"<font color='red'> **4- Pasif hale gelme olas\u0131l\u0131\u011f\u0131 p'deki t\u00fcm m\u00fc\u015fterilerin heterojenli\u011fi, a ve b parametreleri ile bir beta da\u011f\u0131l\u0131m\u0131n\u0131 takip eder.**","7586cf72":"## Eksik Veri","ea503e36":"<font color='red'> **3- Pasifle\u015fme oran\u0131 p'nin ve t Zamanda Ger\u00e7ekle\u015fecek Transaction Say\u0131s\u0131n\u0131n Beklenen De\u011ferinin T\u00fcretilmesi**","61dc4683":"Yukar\u0131daki g\u00f6rselde bir m\u00fc\u015fterinin (0,T] zaman aral\u0131\u011f\u0131nda x i\u015flemi oldu\u011funu g\u00f6rebiliyoruz.","5d5cea9e":"Model belirli varsay\u0131mlar alt\u0131nda \u00e7al\u0131\u015f\u0131r ve bu varsay\u0131mlardaki da\u011f\u0131l\u0131mlara g\u00f6re hesaplamalar ger\u00e7ekle\u015ftirilir.","76281a9a":"-----------------------------------------------------------------------------------------------","9d5fc1e1":"<font color='red'> **2- M\u00fc\u015fteriler aras\u0131ndaki i\u015flem oran\u0131ndaki heterojenlik, \u015fekil parametresi \"r\" ve \u00f6l\u00e7ek parametresi ile bir gama da\u011f\u0131l\u0131m\u0131n\u0131 takip eder.**","0689e42a":"B(a,b) = beta fonksiyonu\n\nalfa ve beta = hiperparametreler","2a234f6b":"Herhangi bir i\u015flemden (j.) sonra m\u00fc\u015fteri \"p\" olas\u0131l\u0131kla pasif hale gelir. M\u00fc\u015fterinin i\u015flem say\u0131s\u0131 artt\u0131k\u00e7a pasifle\u015fme olas\u0131l\u0131\u011f\u0131 d\u00fc\u015fer ve transactionlar aras\u0131 s\u00fcre \u00fcstel&geometrik da\u011f\u0131l\u0131m izler.","89ca555c":"Modelin sat\u0131n alma s\u00fcrecinin dinamiklerini yakalama performans\u0131n\u0131 de\u011ferlendirmek i\u00e7in birbirinden \u00e7e\u015fitli sat\u0131n alma ortamlar\u0131n\u0131 yans\u0131tan sim\u00fclyasyonlar \u00fczerinde \u00e7al\u0131\u015f\u0131lm\u0131\u015f ve parametreler i\u00e7in 3 er farkl\u0131 de\u011fer belirlenerek t\u00fcm bu parametre kombinasyonlar\u0131 ile test edilmi\u015ftir. 104 haftal\u0131k s\u00fcrecin ilk 52 si train kalan 52 si test i\u00e7in kullan\u0131lm\u0131\u015ft\u0131r. Modelin ba\u015far\u0131 kriteri olan MAPE (Ortalama mutlak y\u00fczde hata) 'nin ortalamas\u0131 %2.68 \u00e7\u0131km\u0131\u015ft\u0131r. MAPE'si en k\u00f6t\u00fc \u00e7\u0131kan sat\u0131n alma ortam\u0131nda MAPE, gayet kabul edilebilir bir de\u011fer olan %6.97 \u00e7\u0131kt\u0131. \n\nGer\u00e7ek hayat verileri kullan\u0131larak kurulan modelin sonu\u00e7lar\u0131 da son derece ba\u015far\u0131l\u0131d\u0131r. Pareto\/NBD modelinin sonu\u00e7lar\u0131na yak\u0131n bir performans yans\u0131tmas\u0131na kar\u015f\u0131n biraz daha iyidir.\n\n- Sat\u0131n alma s\u0131kl\u0131klar\u0131 d\u00fc\u015f\u00fck olan verilerde modelin tahmin g\u00fcc\u00fc g\u00f6rece daha d\u00fc\u015f\u00fck olma e\u011filimindedir.\n\n- Model ayr\u0131 edinme kanallar\u0131na ve ayr\u0131 \u00e7eyrekliklere ayr\u0131 ayr\u0131 uygulanmal\u0131d\u0131r.\n\n- Ge\u00e7mi\u015fte uygulanan pazarlama faaliyetlerinin tahmin edilecek d\u00f6nemdeki faaliyetlerle benzer olaca\u011f\u0131 varsay\u0131m\u0131 alt\u0131nda do\u011fru \u00e7al\u0131\u015f\u0131r.\n\n- Al\u0131\u015fveri\u015f tutar\u0131, al\u0131\u015fveri\u015f zaman\u0131ndan ba\u011f\u0131ms\u0131z oldu\u011fu varsay\u0131m\u0131nda \u00e7al\u0131\u015f\u0131r. ????\n","2a35d708":"------------------------------------------------------------------------------------------------------------------------","7be95fc9":"T\u00fcm bu bilgiler \u0131\u015f\u0131\u011f\u0131nda g\u00f6r\u00fclmektedir ki model, standart modellerden(rfm), bir m\u00fc\u015fterinin gelecekteki i\u015flemlerinin beklenen say\u0131s\u0131n\u0131 ve hayatta kalma olas\u0131l\u0131\u011f\u0131n\u0131 de\u011ferlendirerek gelece\u011fe dair stokastik gibi g\u00f6r\u00fcnen bir s\u00fcreci matematiksel olarak a\u00e7\u0131klama \u00e7abas\u0131yla ayr\u0131lmakta ve modelin \u00e7\u0131kt\u0131lar\u0131 kullan\u0131larak t zamanda bir m\u00fc\u015fterinin CLV'su hesaplanabilmektedir. ","65133228":"t1 i\u015fleminin likelihood'u (olabilitesi), \u00fcstel likelihood bile\u015fenine g\u00f6re hesaplan\u0131r. alfa*e^(-alfa*t1)\n\nt2 i\u015fleminin likelihood'u, ilkinden farkl\u0131 olarak, t1 noktas\u0131nda pasifle\u015fmeme(hayatta kalma) olas\u0131l\u0131\u011f\u0131yla \u00e7arp\u0131m\u0131d\u0131r.\n\ntx i\u015fleminin likelihood'u ise, \u00fcstel likelihood bile\u015feniyle, t(x-1) notas\u0131nda hayatta kalma olas\u0131\u011f\u0131n\u0131n \u00e7arp\u0131m\u0131d\u0131r.\n\ntx ile T aras\u0131ndaki s\u00fcre\u00e7te hi\u00e7 i\u015flem yapmamas\u0131n\u0131n olabilirli\u011fi ise, pasifle\u015fme olas\u0131l\u0131\u011f\u0131(p) + aktif kal\u0131p hi\u00e7 i\u015flem yapmamas\u0131 olas\u0131l\u0131\u011f\u0131na e\u015fittir.\n\nBu \u015fekilde t\u00fcm m\u00fc\u015fterilerin belirli bir d\u00f6nem aral\u0131\u011f\u0131ndaki olabilirlik fonksiyonlar\u0131 a\u015fa\u011f\u0131daki gibi yaz\u0131labilir.","0877dfca":"<font color='red'> **2- t Zamanda x Transaction Ger\u00e7ekle\u015fme Olas\u0131l\u0131\u011f\u0131n\u0131n T\u00fcretilmesi**","aa6bd236":"<font color='blue'> **PRAT\u0130K KISIM**","29d61afa":"-----------------------------------------------------------------------------------------------","14213963":"T\u00fcm m\u00fc\u015fterilerin ge\u00e7mi\u015f verilerini modelin varsay\u0131mlar\u0131ndaki da\u011f\u0131l\u0131mlara uydurarak, her m\u00fc\u015fteri \u00f6zelinde \u015funlar\u0131 bulabiliriz:\n\n**1- E(X(t) | \u03bb, p)** t uzunlu\u011fundaki bir d\u00f6nemdeki transaction say\u0131s\u0131n\u0131n beklenen de\u011feri\n\n**2- P(X(t) = x | \u03bb, p)** t uzunlu\u011fundaki bir d\u00f6nemde x kadar transaction ger\u00e7ekle\u015fme olas\u0131l\u0131\u011f\u0131\n\n**3- P(teta>t)** teta an\u0131nda m\u00fc\u015fterinin pasif hale gelme olas\u0131l\u0131\u011f\u0131","28bdd76b":"Alfa, sabit bir zaman aral\u0131\u011f\u0131nda m\u00fc\u015fterinin yapt\u0131\u011f\u0131 ortalama i\u015flem say\u0131s\u0131d\u0131r.\n\nOrtalama 4.3 al\u0131\u015fveri\u015f yapt\u0131ysa poisson da\u011f\u0131l\u0131m\u0131nda alfa = 4.3 t\u00fcr.\n\nPoisson da\u011f\u0131l\u0131m\u0131, alfay\u0131 kullanarak m\u00fc\u015fterinin t zamanda x kez sat\u0131n alma olas\u0131l\u0131\u011f\u0131n\u0131 verir bize. ","cd0b1e5c":"T\u00fcm m\u00fc\u015fterilerin poisson da\u011f\u0131l\u0131mlar\u0131 birle\u015ftirildi\u011finde, bir gama da\u011f\u0131l\u0131m\u0131 elde edilir.","0a54a94b":"# BG \/ NBD","b865d271":"## Hesaplamalar","a377991e":"<font color='red'> **1- Aktifken,bir m\u00fc\u015fteri taraf\u0131ndan t uzunluktaki bir d\u00f6nemde yap\u0131lan i\u015flemlerin say\u0131s\u0131, alfa ile birlikte bir Poisson da\u011f\u0131l\u0131m\u0131 izler.**","42e88b35":"**BG** = (beta-\u00fcstel da\u011f\u0131l\u0131m\u0131 kar\u0131\u015f\u0131m\u0131) Tekrar sat\u0131n alma davran\u0131\u015f\u0131n\u0131 modellemi\u015ftir.\n\n**NBD** = (poisson-gama kar\u0131\u015f\u0131m\u0131) Gelecekteki i\u015flemlerin beklenen say\u0131s\u0131n\u0131 modellemi\u015ftir.","9f91d880":"<font color='red'>*Created with* \u2764 *by Mustafa Batuhan Ermi\u015f.*<font>\n    \n<font color='blue'>Resources:\n\n2005 \/ Peter Fader\n\nhttp:\/\/brucehardie.com\/papers\/018\/fader_et_al_mksc_05.pdf","1121bd0e":"<font color='red'> **1- Olabilirlik Fonksiyonunun T\u00fcretilmesi**","8cf90438":"------------------------------------------------------------------------------------------------------------------------","beed566d":"------------------------------------------------------------------------------------------------------------------------"}}