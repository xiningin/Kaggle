{"cell_type":{"b71396d7":"code","000aafce":"code","d7900d75":"code","565aa2ee":"code","d1c66a6a":"code","400b5675":"code","57588ff4":"code","727b3639":"code","46cbcca1":"code","73ee9c94":"markdown","f928eb43":"markdown","0c908484":"markdown","04bf552a":"markdown","4d2f1ed8":"markdown","ba83a8ed":"markdown","3cf83b17":"markdown","5d2642af":"markdown","5ddd3759":"markdown","1277f80c":"markdown","0ab2c0bd":"markdown","7c87d8f9":"markdown"},"source":{"b71396d7":"#Import libraries\nimport sqlite3\nimport pandas as pd, numpy as np, seaborn as sns, matplotlib.pyplot as plt, plotly.graph_objects as go\nfrom plotly.subplots import make_subplots\n\n# Suppress warnings \nimport warnings\nwarnings.filterwarnings('ignore')","000aafce":"#Import dataset\nconn = sqlite3.connect('..\/input\/clubhouse-dataset\/Clubhouse_Dataset_v1.db')\ndf = pd.read_sql_query('SELECT * FROM user', conn)\n\n#Filling missing value\ndf = df.fillna('')","d7900d75":"#Convert time_created column to date format\ndf['time_created'] = pd.to_datetime(df['time_created']).apply(lambda x: x.date())\ndf['time_created']\n\n#Creating dataframe for new accounts created\nnew_user_df = df.groupby('time_created', as_index=False).agg(NewUser=('time_created','count'))\n\n#Creating line plot\nplt.figure(figsize=(12,8))\nsns.set_style(\"darkgrid\")\nsns.lineplot(x=new_user_df['time_created'], y=new_user_df['NewUser'])\nplt.xlabel('Datetime', fontsize=14)\nplt.ylabel('New User', fontsize=14)\nplt.title('Lineplot of Account Creation Datetime', fontsize=16)\nplt.show()","565aa2ee":"df['num_followers'].describe()","d1c66a6a":"group_1 = round((df['num_followers']<100).sum()\/len(df)*100)\ngroup_2 = round(((df['num_followers']>=100)&(df['num_followers']<=1000)).sum()\/len(df)*100)\ngroup_3 = round((df['num_followers']>1000).sum()\/len(df)*100)\n\n\nfol_dict = {'Group':[\"Less than 100 followers\", \"Followers between 100 and 1000\", 'More than 1000 followers'],\n            'Group Percentage':[group_1, group_2, group_3]}\n# Use `hole` to create a donut-like pie chart\nfig = go.Figure(data=[go.Pie(labels=fol_dict['Group'], values = fol_dict['Group Percentage'], hole=.4)])\n\nfig.update_layout(annotations=[dict(text='Followers', x=0.5,y=0.5, font_size=20, showarrow=False)])\nfig.show()","400b5675":"largest_followers = df.nlargest(20,['num_followers'])\n\nplt.figure(figsize=(10,8))\nfol_plot = sns.barplot(x=largest_followers['num_followers'], y = largest_followers['name'], palette='mako')\nplt.xlabel('Followers', fontsize=14)\nplt.ylabel('User', fontsize=14)\nplt.title('Top 20 Most Followed Users', fontsize=16)\nplt.show()","57588ff4":"most_following = df.nlargest(10,['num_following'])\n\nplt.figure(figsize=(10,7))\nf_plot = sns.barplot(x= most_following['name'], y=most_following['num_following'], color='gold', edgecolor='black')\nplt.xlabel('User', fontsize=16)\nplt.ylabel('Following Numbers', fontsize=16)\nplt.xticks(rotation=30)\nplt.title('Users with Largest Number of Following', fontsize=18)\nfor p in f_plot.patches:\n    f_plot.annotate(format(p.get_height(), '.0f'), \n                   (p.get_x() + p.get_width() \/ 2., p.get_height()), \n                   ha = 'center', va = 'center', \n                   xytext = (0, 9), \n                   textcoords = 'offset points')\nplt.show()","727b3639":"#Create dataframe for top invitee\ninvite_df = pd.DataFrame(df.invited_by_user_profile.value_counts())\ninvite_df.reset_index(level=0,inplace=True)\ninvite_df.columns = ['user_id','invites count']\ntop_invitee = invite_df.iloc[:10,:]\n\ninvites_count = top_invitee['invites count']\nuser_list=[]\nfor i in top_invitee.index:\n    user_name = df['name'].loc[(df['user_id']==top_invitee.loc[i,'user_id'])].values\n    if top_invitee.loc[i,'user_id']!='null':\n        if user_name.size!=0:\n            user_list.append(user_name[0])\n        else:\n            user_list.append('User_id ' + str(top_invitee.loc[i,'user_id']))       \n    else:\n         user_list.append('No Invitee')\n\ntop_invitee['User Name'] = user_list\ntop_invitee.drop(['user_id','invites count'],axis=1,inplace=True)\ntop_invitee['invites count'] = invites_count\n\n#Visualization\nplt.figure(figsize=(10,7))\ninv_plot = sns.barplot(x = top_invitee['User Name'], y=top_invitee['invites count'], palette='viridis')\nplt.xlabel('User', fontsize=14)\nplt.ylabel('Number of invites', fontsize=14)\nplt.xticks(rotation=30)\nplt.title('Top 10 Users with Most Invites', fontsize=14)\nfor p in inv_plot.patches:\n    inv_plot.annotate(format(p.get_height(), '.0f'), \n                   (p.get_x() + p.get_width() \/ 2., p.get_height()), \n                   ha = 'center', va = 'center', \n                   xytext = (0, 9), \n                   textcoords = 'offset points')\nplt.show()","46cbcca1":"no_twitter_acc_perc =  (df['twitter']=='null').sum()\/len(df)*100\nno_insta_acc_perc = (df['instagram']=='null').sum()\/len(df)*100\n\nsoc_med_dict = {'Account':[\"Do not have account\", \"Have Account\"],'Twitter':[no_twitter_acc_perc, (100-no_twitter_acc_perc)],\n                'Instagram':[no_insta_acc_perc, (100-no_insta_acc_perc)]}\n\n#Visualization\nfig = make_subplots(rows=1, cols=2, specs=[[{'type':'domain'}, {'type':'domain'}]])\nfig.add_trace(go.Pie(labels=soc_med_dict['Account'], values=soc_med_dict['Twitter'], name=\"Twitter\"),\n              1, 1)\nfig.add_trace(go.Pie(labels=soc_med_dict['Account'], values=soc_med_dict['Instagram'], name=\"Instagram\"),\n              1, 2)\n\n# Use `hole` to create a donut-like pie chart\ncolors = ['orangered','royalblue']\nfig.update_traces(hole=.4, hoverinfo=\"label+percent+name\",  marker=dict(colors=colors))\n\nfig.update_layout(\n    title_text=\"Social Media Account\",\n    # Add annotations in the center of the donut pies.\n    annotations=[dict(text='Twitter', x=0.19,y=0.5, font_size=14, showarrow=False),\n                 dict(text='Instagram', x=0.81, y=0.5, font_size=14, showarrow=False)])\nfig.show()","73ee9c94":"###  5. Which users (Top 10) have invited new users the most?","f928eb43":"From the describe() function above, we know that 75% (Q3) of users have less than or equal 99 followers. From that information, I divided users' followers numbers into 3 groups for visualization so later we know their proportion:\n1. Group 1: Less than 100 followers\n2. Group 2: Followers between 100 and 1000\n3. Group 3: More than 1000 followers ","0c908484":"### 6. What are the percentage of clubhouse users who have twitter or instagram account?","04bf552a":"### 4. Which users (Top 10) have the largest number of following?","4d2f1ed8":"#  About Clubhouse\n\n**Clubhouse** is an invitation-only social media app for iOS that facilitates auditory communication through rooms that can accommodate groups of up to 5,000 people.The audio-only app hosts virtual rooms for live discussions, with opportunities for individuals to participate through speaking and listening.","ba83a8ed":"# In this notebook\n\nThere are 1300515 rows in clubhouse dataset table. Columns in clubhouse dataset:\n1. **user_id**\n2. **name**\n3. **photo_url**\n4. **username**\n5. **twitter**\n6. **instagram**\n7. **num_followers**\n8. **num_following**\n9. **time_created**\n10. **invited_by_user_profile**\n\nWith seaborn and plotly library, I will visualize from the dataset to answer these questions:\n1. From column **time_created**, in what months are the new accounts created the most?\n2. From column **num_followers**, how is the distribution of the users' followers?\n3. From column **num_followers**, which users (Top 20) have the most followers? \n4. From column **num_following**, which users (Top 10) have the largest number of following? \n5. From column **invited_by_user_profile**, which users (Top 10) have invited new users the most? \n6. From column  **twitter** & **instagram**, what are the percentage of clubhouse users who have twitter or instagram account?\n\n","3cf83b17":"### 2. How is the distribution of the users' followers?","5d2642af":"Although to join clubhouse, new user has to be invited by existing user but there are 3214 users who have joined without being invited by other users.","5ddd3759":"From the pie chart, we know that most of the clubhouse users (more than 50 %) don't have Twitter or Instagram account","1277f80c":"From the line plot, it is shown that between December 2020 to January 2021 were the time when new accounts were created the most.","0ab2c0bd":"### 3. Which users (Top 20) have the most followers?","7c87d8f9":"### 1. What months are the new accounts created the most?"}}