{"cell_type":{"232b39da":"code","b2dcf35d":"code","7ea0b5ef":"code","c24f23d8":"code","2b7153f4":"code","a7216e22":"code","d8855226":"code","43c0b1fa":"code","7b9f4047":"code","ae4e5bea":"code","24900005":"code","06d78d87":"code","f42d494c":"code","07428981":"code","2807ed31":"code","d41ada49":"code","8bb86171":"code","ba0e2017":"code","bd86a8af":"code","637aa683":"code","4e4a4fd4":"code","5e8ec4cf":"code","66f4a5d2":"code","156658b8":"code","6b808a4c":"code","b408aa28":"code","9f0f854f":"code","5012835f":"code","79782bf8":"code","0abcb3a1":"code","a591d84c":"code","6886e402":"code","ee07f4a0":"code","51739230":"code","afb6a8b9":"code","43437ae6":"code","6b7d8e15":"code","c278322f":"code","f357ab3c":"code","0361ccee":"markdown","76354a62":"markdown","ecf6064a":"markdown","d2e75b66":"markdown","595bc692":"markdown","8416f31c":"markdown","cab3cda5":"markdown","38e8023c":"markdown","4dc7f902":"markdown","9357883a":"markdown","b1de0cf3":"markdown","115d1a1b":"markdown","75ba03e3":"markdown","d16b0c12":"markdown","0b72aaf8":"markdown","799a9e22":"markdown","405fad4f":"markdown","d754985e":"markdown","fbee5c4a":"markdown","33ecdd5d":"markdown","a873581c":"markdown","35513514":"markdown","c2a9e08e":"markdown","4fac7186":"markdown","9b597123":"markdown","8e7ead26":"markdown","e9604c2f":"markdown","fe6aeb3f":"markdown","29df5e26":"markdown","2fc56ae1":"markdown","855fb82d":"markdown","85f8f125":"markdown"},"source":{"232b39da":"#  https:\/\/github.com\/abdul-haseeb123\/projects","b2dcf35d":"# Importing Libraries \nimport numpy as np\nimport pandas as pd\n\nfilename = \"..\/input\/10-coffee-places-from-ukrainian-cities\/Ukraine Cities Coffee Shops Analysis - Main.csv\"\ncoffee_shops = pd.read_csv(filename)\ncoffee_shops.head(10)","7ea0b5ef":"coffee_shops.info()","c24f23d8":"coffee_shops.isna().sum()","2b7153f4":"coffee_shops['Price'].value_counts()","a7216e22":"coffee_shops['Delivery option'].unique()","d8855226":"coffee_shops['Dine in option'].unique()","43c0b1fa":"coffee_shops['Takeout option'].unique()","7b9f4047":"# IMPUTING ALL MISSING VALUES\ncoffee_shops['Rating'].fillna(coffee_shops['Rating'].mean(), inplace=True)\ncoffee_shops['Reviews'].fillna(coffee_shops['Reviews'].mean(), inplace=True)\ncoffee_shops['Price'].fillna('$$', inplace=True)\ncoffee_shops['Delivery option'].fillna(False, inplace=True)\ncoffee_shops['Dine in option'].fillna(False, inplace=True)\ncoffee_shops['Takeout option'].fillna(False, inplace=True)","ae4e5bea":"coffee_shops['Region'] = coffee_shops['Region'].astype('category')\ncoffee_shops['Place type'] = coffee_shops['Place type'].astype('category')\ncoffee_shops['Price'] = coffee_shops['Price'].astype('category')\ncoffee_shops['Delivery option'] = coffee_shops['Delivery option'].astype('bool')\ncoffee_shops['Dine in option'] = coffee_shops['Dine in option'].astype('bool')\ncoffee_shops['Takeout option'] = coffee_shops['Takeout option'].astype('bool')","24900005":"import matplotlib.pyplot as plt\nimport seaborn as sns \n\nplace_type_count = coffee_shops['Place type'].value_counts()\nsns.set_style(\"darkgrid\")\nfig, ax = plt.subplots(figsize=(12, 8))\norder_list = list(place_type_count.index)\nsns.barplot(x=place_type_count.values, y=place_type_count.index, order=order_list, palette=\"rocket\")\nplt.xlabel(\"Count\", size=14)\nplt.ylabel(\"Place Type\", size=14)\nplt.title(\"Frequency Of Place Type\", size=18)\nplt.show()","06d78d87":"fig, ax = plt.subplots(figsize=(12,8))\nsns.barplot(x=\"Reviews\", y=\"Place type\", hue=\"Delivery option\", data=coffee_shops, order=order_list, hue_order=[True,False], palette=\"coolwarm\", ci=0)\nsns.set_style(\"darkgrid\")\nplt.xlabel(\"No Of Reviews\", size=14)\nplt.ylabel(\"Place type\", size=14)\nplt.title(\"No Of Reviews According To Place Type With Respect To Delivery Option\", size=18)","f42d494c":"fig, ax = plt.subplots(figsize=(12,8))\nsns.barplot(x=\"Reviews\", y=\"Place type\", hue=\"Dine in option\", data=coffee_shops, order=order_list, hue_order=[True,False], palette=\"seismic\", ci=0)\nsns.set_style(\"darkgrid\")\nplt.xlabel(\"No Of Reviews\",size=14)\nplt.ylabel(\"Place type\",size=14)\nplt.title(\"No Of Reviews According To Place Type With Respect To Dine In Option\", size=18)","07428981":"fig, ax = plt.subplots(figsize=(12,8))\nsns.barplot(x=\"Reviews\", y=\"Place type\", hue=\"Takeout option\", data=coffee_shops, order=order_list, hue_order=[True,False], palette=\"RdGy\", ci=0)\nsns.set_style(\"darkgrid\")\nplt.xlabel(\"No Of Reviews\",size=14)\nplt.ylabel(\"Place type\",size=14)\nplt.title(\"No Of Reviews According To Place Type With Respect To Takeout Option\", size=18)","2807ed31":"df = coffee_shops.copy()","d41ada49":"from scipy.cluster.vq import whiten\ndf[['scaled_rating','scaled_reviews']] = whiten(df[['Rating','Reviews']])","8bb86171":"df.describe()","ba0e2017":"from scipy.cluster.hierarchy import fcluster,linkage, dendrogram\n\nfig, ax = plt.subplots(figsize=(16,12))\ndistance_matrix = linkage(df[['scaled_rating','scaled_reviews']], method='complete', metric='euclidean')\ndn = dendrogram(distance_matrix) # Exploring Our Clusters and getting and idea by plotting a dendrogram\nplt.show()","bd86a8af":"# Lets plot an elbow plot to select right number of clusters\nfrom scipy.cluster.vq import kmeans\n\ndistortions = []\nnum_clusters = range(1,8)\n\nfor i in num_clusters:\n    cluster_centers, distortion = kmeans(df[['scaled_rating','scaled_reviews']], i)\n    distortions.append(distortion)\nfig, ax = plt.subplots(figsize=(12,8))    \nelbow_df = pd.DataFrame({'num_clusters':num_clusters, 'distortions':distortions})\nsns.pointplot(x=\"num_clusters\", y=\"distortions\", data=elbow_df)\nplt.xticks(num_clusters)\nplt.ylabel(\"Distortions\",size=14)\nplt.xlabel(\"Clusters\",size=14)\nplt.title(\"Elbow Plot\", size=18)\nplt.show()","637aa683":"from scipy.cluster.vq import vq\nfig, ax = plt.subplots(figsize=(12,8))\nnp.random.seed(0) # So that it generates the same result everytime...\ncluster_centers, distortion = kmeans(df[['scaled_rating','scaled_reviews']], 4)\ndf['cluster_labels'], distortion_list = vq(df[['scaled_rating','scaled_reviews']], cluster_centers)\nsns.scatterplot(x='scaled_rating', y='scaled_reviews', \n                hue='cluster_labels', data = df)\nplt.xlabel('scaled_rating',size=14)\nplt.ylabel('scaled_reviews',size=14)\nplt.title(\"Scaled Rating VS Scaled Reviews\", size=18)\nplt.show()","4e4a4fd4":"df.head()","5e8ec4cf":"df['cluster_labels'].value_counts()","66f4a5d2":"clustered_data = df[['Rating','Reviews','cluster_labels']].groupby('cluster_labels').mean()\nclustered_data","156658b8":"rating_range = clustered_data['Rating'].max() - clustered_data['Rating'].min()\nreviews_range = clustered_data['Reviews'].max() - clustered_data['Reviews'].min()\n\nclustered_data['rating_prop'] = (clustered_data['Rating'] - clustered_data['Rating'].min()) \/ rating_range\nclustered_data['reviews_prop'] = (clustered_data['Reviews'] - clustered_data['Reviews'].min()) \/  reviews_range\nclustered_data","6b808a4c":"fig, ax = plt.subplots(figsize=(12,8))\nsns.heatmap(clustered_data[['rating_prop','reviews_prop']], cmap='PuBuGn')\nplt.title(\"Comparison Of Rating and Reviews for Clusters\", size=18)\nplt.show()","b408aa28":"cluster_0 = df[df['cluster_labels'] == 0]\nprint(f\"Count Of Coffee Shops in Cluster 0 is: {len(cluster_0)}\")\ncluster_0.head()","9f0f854f":"cluster_0 = cluster_0.reset_index()\ncluster_0 = cluster_0.drop('index', axis=1)","5012835f":"cluster_0","79782bf8":"fig, axes = plt.subplots(figsize=(12, 8))\nplace_type_cluster_0 = cluster_0['Place type'].value_counts()\nordered = list(place_type_cluster_0.index)\nsns.barplot(x=place_type_cluster_0.values, y=place_type_cluster_0.index, order=ordered, palette=\"mako\")\nplt.xlabel(\"COUNT\",size=14)\nplt.ylabel(\"PLACE TYPE\",size=14)\nplt.title(\"NUMBER OF COFFEE SHOPS IN CLUSTER 0\", size=18)","0abcb3a1":"fig, ax = plt.subplots(figsize=(12,8))\nsns.barplot(x=\"Reviews\", y=\"Place type\", hue=\"Delivery option\", data=cluster_0, order=ordered, hue_order=[True,False], palette=\"coolwarm\", ci=0)\nsns.set_style(\"darkgrid\")\nplt.xlabel(\"No Of Reviews\",size=14)\nplt.ylabel(\"Place type\",size=14)\nplt.title(\"No Of Reviews According To Place Type With Respect To Delivery Option\", size=18)\nplt.legend(loc=7)\nplt.show()","a591d84c":"fig, ax = plt.subplots(figsize=(12,8))\nsns.barplot(x=\"Reviews\", y=\"Place type\", hue=\"Dine in option\", data=cluster_0, order=ordered, hue_order=[True,False], palette=\"coolwarm\", ci=0)\nsns.set_style(\"darkgrid\")\nplt.xlabel(\"No Of Reviews\",size=14)\nplt.ylabel(\"Place type\",size=14)\nplt.title(\"No Of Reviews According To Place Type With Respect To Dine in Option\", size=18)\nplt.legend(loc=7)\nplt.show()","6886e402":"fig, ax = plt.subplots(figsize=(12,8))\nsns.barplot(x=\"Reviews\", y=\"Place type\", hue=\"Takeout option\", data=cluster_0, order=ordered, hue_order=[True,False], palette=\"coolwarm\", ci=0)\nsns.set_style(\"darkgrid\")\nplt.xlabel(\"No Of Reviews\",size=14)\nplt.ylabel(\"Place type\",size=14)\nplt.title(\"No Of Reviews According To Place Type With Respect To Takeout Option\", size=18)\nplt.legend(loc=7)\nplt.show()","ee07f4a0":"cluster_1 = df[df['cluster_labels'] == 1]\ncluster_2 = df[df['cluster_labels'] == 2]\ncluster_3 = df[df['cluster_labels'] == 3]","51739230":"delivery = cluster_0['Delivery option'] == True\ndinein = cluster_0['Dine in option'] == True\ntakeout = cluster_0['Takeout option'] == True\n\nall_services_0 = cluster_0[delivery & dinein & takeout]\npercent_0 = len(all_services_0) \/ len(cluster_0)","afb6a8b9":"delivery = cluster_1['Delivery option'] == True\ndinein = cluster_1['Dine in option'] == True\ntakeout = cluster_1['Takeout option'] == True\n\nall_services_1 = cluster_1[delivery & dinein & takeout]\npercent_1 = len(all_services_1) \/ len(cluster_1)","43437ae6":"delivery = cluster_2['Delivery option'] == True\ndinein = cluster_2['Dine in option'] == True\ntakeout = cluster_2['Takeout option'] == True\n\nall_services_2 = cluster_2[delivery & dinein & takeout]\npercent_2 = len(all_services_2) \/ len(cluster_2)","6b7d8e15":"delivery = cluster_3['Delivery option'] == True\ndinein = cluster_3['Dine in option'] == True\ntakeout = cluster_3['Takeout option'] == True\n\nall_services_3 = cluster_3[delivery & dinein & takeout]\npercent_3 = len(all_services_3) \/ len(cluster_3)","c278322f":"print(f\"{round(percent_0 * 100, 2)}% of Coffee Shops have all options available in cluster 0\")\nprint(f\"{round(percent_1 * 100, 2)}% of Coffee Shops have all options available in cluster 1\")\nprint(f\"{round(percent_2 * 100, 2)}% of Coffee Shops have all options available in cluster 2\")\nprint(f\"{round(percent_3 * 100, 2)}% of Coffee Shops have all options available in cluster 3\")","f357ab3c":"fig, ax = plt.subplots(figsize=(12,8))\nclusters = [\"Cluster 0\",\"Cluster 1\",\"Cluster 2\",\"Cluster 3\"]\npercentages = [percent_0, percent_1, percent_2, percent_3]\nsns.barplot(x=percentages, y=clusters, palette=\"magma\", order=[\"Cluster 0\",\"Cluster 2\",\"Cluster 1\",\"Cluster 3\"])\nplt.xlabel(\"(%) Of Clusters\",size=14)\nplt.ylabel(\"Clusters\",size=14)\nplt.title(\"% OF COFFEE SHOPS HAVING ALL OPTIONS\", size=18)\nplt.show()","0361ccee":"As in the above cell nan will be as no dine in option available so we can impute it with False also in the below cell we can do the same procedure with Takeout option...","76354a62":"As We can look at the upper bar graph We can easily see that Coffee shop is the most popular in Ukraine, Also Cafe then Espresso bar and Coffee store with a low numbers in Ukraine.","ecf6064a":"## 3. FURTHER EDA USING VISUALIZATIONS:","d2e75b66":"# Ukrainian Coffee Shops Case Study\n\n### Project Brief\n\nYou are on the data science team for a coffee company that is looking to expand their business into Ukraine. They want to get an understanding of the existing coffee shop market there.\n\nYou have a dataset from Kaggle. It contains information about coffee shops in Ukraine. The marketing manager wants to identify the key coffee shop segments. They will use this to construct their marketing plan. In their current location, they split the market into 5 segments. The marketing manager wants to know how many segments are in this new market, and their key features.\n\nYou will be presenting your findings to the Marketing Manager, who has no data science background.","595bc692":"In the Bar graph above We can clearly see that Coffee shop is getting most number of reviews with delivery option...","8416f31c":"In the Bar Graph above we can clearly see that Coffee Shops, Cafe, Espresso bar, Chocolate shop, European Restaurant, Pastry shop are the most performing shops and get most number of ratings and Reviews...","cab3cda5":"In the above cell we count our clusters","38e8023c":"## 5. EVALUATION:","4dc7f902":"Now as you can see in the above cell that Rating and Reviews can easily be imputed by the means of their respected columns...But how can we impute missing values in the other columns We cannot also drop the rows cause this will result in so much Loss Of Information. Let's inspect how can we impute them.. ","9357883a":"As we can see above in the heatmap cluster_label 0 have most effective performance in terms of both rating proportion and reviews proportion as compare to other cluster_labels....","b1de0cf3":"In the above cell we take the mean of Rating and Reviews of the 4 clusters...","115d1a1b":"In the above cell we calculate rating proportion and reviews proportion so that we can check cluster have the best performance","75ba03e3":"We plot the above dendrogram to see how many clusters are forming from our data","d16b0c12":"## 4. ANALYSIS NOTES:","0b72aaf8":"In the above cell We count number of coffee shops present in cluster 0 which is 25","799a9e22":"As We can look in the above cell that all columns have their dtypes as object except for Reviews and Ratings and some of the columns have missing values as well so now we will count all missing values in their respected columns...","405fad4f":"As per my hypothesis those shops that are having Delivery option and Dine in option and Takeout option available tends to be more likely give more number of reviews however some are famous in their unique way for e.g European Restaurant and Chocolate Shop...Now lets try some unsupervised learning to discover patterns in our data...  ","d754985e":"As we explore the unique values in our column of Price in above cell we can easily see that there are so much same entries so we can easily impute the missing values with the most frequent in the Price column","fbee5c4a":"In the Bar Graph present above We can easliy see Coffee shop is receiving the most number of reviews. It can be because they are in a very huge amount in Ukraine However Pastry shop is receiving the second most number of reviews when they have the delivery option but there are only upto 10 in Ukraine that means when people wants to order coffee they tend to be more likely order from a coffee shop or pastry shop. Also We can observe that people tends to be more likely to give a review when a delivery option is avail  ","33ecdd5d":"As in the above cell there is False,True and missing entry in the Delivery option column There can be a chance that if it is missing then perhaps the shop will not be having a delivery option so we can easily impute the missing values with False as No Delivery option is available....","a873581c":"In the Bar graph above Coffee shop is still generating most number of reviews when takeout option is available...Also Notice European Restaurant does not have Takeout option still generating a good number of reviews tells us about its uniqueness also all pastry shops in the best performing cluster have Takeout option available...","35513514":"As we can see that last drop down was at 4  and then it did not have a major drop down so we will be using 4 clusters","c2a9e08e":"Now We will plot a barplot to see the number of shops with respect to its place type in Ukraine....","4fac7186":"In the Bar Graph present above We can easily see that Chocolate shop and European Restaurant are getting most number of reviews with respect to Dine in option however coffee shops are not so much famous in Dine in that is why they are getting less number of reviews than Chocolate shop, European Restaurant, Pastry shop and Coffee roasters... ","9b597123":"In the above we plot an elbow plot to see how many clusters can be formed","8e7ead26":"In the Bar graph above we can clearly see that Coffee shop is most performing in cluster 0 even with Dine in option...However in this best performing cluster we can also see that every shop have a dine in option so dine in option is necessary to boost your shop.. ","e9604c2f":"As ratings and reviews are the most that impact on the popularity of place type So we will first scale them then we will try to find hidden clusters in them","fe6aeb3f":"5. Model Fitting:","29df5e26":"In the Bar graph present above We can easily see that Chocolate shop and Pastry shop are getting most number of reivews when Takeout option is available Also Coffee roasters and Restaurants are generating a good number of reviews when takeout option is available however Coffee shop which is having the most number of shops in Ukraine are not so famous in the takeout option as well. Also European Restaurant is still generating the second highest number of reviews also when takeout option is not available...However we can clearly observe that people tends more likely to give reviews when Takeout option is available...","2fc56ae1":"Now that We have imputed all the missing values we can know change their dtypes of the columns so that they can result with faster and better analysis...The code is present below","855fb82d":"As we can see in the above cell our cluster_0 which is the best performing cluster also have the most number of shops which have all three options available...They all are whether a Coffee shop or a Cafe or an Espresso bar....","85f8f125":"## 2. EDA (EXPLORATORY DATA ANALYSIS):\nFirst We had load and print the top five rows of our Dataset in the above cell.\nThen to get to more information on our data about the columns dtypes and missing values...We use .info() method on our dataset.."}}