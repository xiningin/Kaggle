{"cell_type":{"e464245f":"code","9cc96839":"code","90213f3c":"code","cab03f28":"code","7e7dd2f8":"code","6ef8a7e5":"code","9a9fa967":"code","f02726d9":"code","bdfedb08":"code","2b158d48":"code","785433ca":"code","7c83fb72":"code","9768dc09":"code","17c04088":"code","7eb7d749":"code","9a060668":"code","5391a9eb":"code","538de5eb":"code","44faeb83":"code","e98bd854":"code","bb7f9e54":"code","b794267f":"code","f79f86f8":"code","e8e822e8":"code","1d9ba93f":"code","e406f9a2":"code","cbde9d4f":"code","d8443b6a":"code","c962fa90":"code","e65cf0f8":"code","23765e35":"markdown","1578d6dc":"markdown","8c45e1ef":"markdown","08f48a9c":"markdown","751f30ae":"markdown","efd8fa56":"markdown","e1ea8882":"markdown","b94f0eb1":"markdown","5d3c61c3":"markdown","9d55af82":"markdown","b4929951":"markdown","681fc373":"markdown","2299bd22":"markdown","57149df7":"markdown","1ff6b6e2":"markdown","aaffb66b":"markdown","8c6b2d96":"markdown","7f8e3dae":"markdown","cfab9b94":"markdown","c6340c63":"markdown","57254540":"markdown","6b9028b5":"markdown","79155946":"markdown","1c9c66d6":"markdown","b01b830b":"markdown","2676da1e":"markdown","aa534f5b":"markdown","4b9bfbca":"markdown"},"source":{"e464245f":"import numpy as np # linear algebra\nimport pandas as pd # data processing, CSV file I\/O (e.g. pd.read_csv)\nimport plotly.plotly as py\nfrom plotly.offline import init_notebook_mode,iplot\ninit_notebook_mode(connected=True)\nimport plotly.graph_objs as go\nfrom plotly import tools\n# Input data files are available in the \"..\/input\/\" directory.\n# For example, running this (by clicking run or pressing Shift+Enter) will list the files in the input directory\nimport warnings\nwarnings.filterwarnings(\"ignore\")\nimport os\nprint(os.listdir(\"..\/input\"))","9cc96839":"data=pd.read_csv(\"..\/input\/ExtractedTweets.csv\")","90213f3c":"data.head(10)","cab03f28":"data.Tweet[0]","7e7dd2f8":"#import necessary libraries\nimport re\nimport nltk\nfrom nltk.corpus import stopwords\nimport nltk as nlp\nstopwords = stopwords.words('english')\n#add some unnecessary word to stopwords list\nstopwords.append(\"rt\")\nstopwords.append(\"u\")\nstopwords.append(\"amp\")\nstopwords.append(\"w\")\nstopwords.append(\"th\")","6ef8a7e5":"#we created 2 different class as democrat and republican\ndemocrat=data[data.Party==\"Democrat\"]\nrepublican=data[data.Party==\"Republican\"]","9a9fa967":"#Cleaning democrat party tweets \ndemocrat_list=[]\nfor d in democrat.Tweet:\n    d=re.sub(r'http\\S+', '', d) #remove links\n    d=re.sub(\"[^a-zA-Z]\", \" \", d) #remove all characters except letters\n    d=d.lower() #convert all words to lowercase\n    d=nltk.word_tokenize(d) #split sentences into word\n    d=[word for word in d if not word in set(stopwords)] #add to stopwords list if unnecessary words.\n    lemma=nlp.WordNetLemmatizer() \n    d=[lemma.lemmatize(word) for word in d] #identify the correct form of the word in the dictionary\n    d=\" \".join(d)\n    democrat_list.append(d) #append words to list","f02726d9":"#same process as before\nrepublican_list=[]\nfor r in republican.Tweet:\n    r=re.sub(r'http\\S+', '', r)\n    r=re.sub(\"[^a-zA-Z]\", \" \", r)\n    r=r.lower()\n    r=nltk.word_tokenize(r)\n    r=[word for word in r if not word in set(stopwords)]\n    lemma=nlp.WordNetLemmatizer()\n    r=[lemma.lemmatize(word) for word in r]\n    r=\" \".join(r)\n    republican_list.append(r)","bdfedb08":"#first 5 tweets in the list\ndemocrat_list[0:5]","2b158d48":"#first 5 tweets in the list\nrepublican_list[0:5]","785433ca":"\ndemocrat_tweets=str(democrat_list).split()\nrepublican_tweets=str(republican_list).split()\ndemocrat_tweets=[word.replace(\"'\",\"\") for word in democrat_tweets ]\ndemocrat_tweets=[word.replace(\"[\", \"\") for word in democrat_tweets ]\ndemocrat_tweets=[word.replace(\"]\",\"\") for word in democrat_tweets ]\ndemocrat_tweets=[word.replace(\",\", \"\") for word in democrat_tweets ]\n\nrepublican_tweets=[word.replace(\"'\",\"\") for word in republican_tweets ]\nrepublican_tweets=[word.replace(\"[\", \"\") for word in republican_tweets ]\nrepublican_tweets=[word.replace(\"]\",\"\") for word in republican_tweets ]\nrepublican_tweets=[word.replace(\",\", \"\") for word in republican_tweets ]","7c83fb72":"print(\"Democrat tweets word length:\",len(democrat_tweets))\nprint(\"Republican tweets word length:\",len(republican_tweets))","9768dc09":"#FreqDist records the number of times each words are used. \nfrom nltk.probability import FreqDist\nfdist_democrat = FreqDist(democrat_tweets)\nfdist_republican=FreqDist(republican_tweets)","17c04088":"fdist_democrat","7eb7d749":"fdist_republican","9a060668":"import matplotlib.pyplot as plt\nplt.subplots(figsize=(10,5))\nfdist_democrat.plot(30,title=\"Democrat Tweets\")\nplt.subplots(figsize=(10,5))\nfdist_republican.plot(30,title=\"Republican Tweets\")","5391a9eb":"de=pd.DataFrame(list(fdist_democrat.items()), columns = [\"Word\",\"FrequencyDemocrat\"])\nre=pd.DataFrame(list(fdist_republican.items()), columns = [\"Word\",\"FrequencyRepublican\"])\nnew=pd.merge(de,re,on='Word')","538de5eb":"new.head(10)","44faeb83":"democratclass=[] \nfor each in new.FrequencyDemocrat:\n    if each<50:\n        democratclass.append(\"Very Low\")\n    elif 49<each<150:\n        democratclass.append(\"Low\")\n    elif 149<each<500:\n        democratclass.append(\"Medium\")\n    elif 499<each<1500:\n        democratclass.append(\"High\")\n    else:\n        democratclass.append(\"Very High\")\n        \nnew[\"democratclass\"]=democratclass","e98bd854":"republicanclass=[] \nfor each in new.FrequencyRepublican:\n    if each<50:\n        republicanclass.append(\"Very Low\")\n    elif 49<each<150:\n        republicanclass.append(\"Low\")\n    elif 149<each<500:\n        republicanclass.append(\"Medium\")\n    elif 499<each<1500:\n        republicanclass.append(\"High\")\n    else:\n        republicanclass.append(\"Very High\")\n        \nnew[\"republicanclass\"]=republicanclass","bb7f9e54":"new.head()","b794267f":"democratveryhigh=new[new.democratclass==\"Very High\"]\ndemocrathigh=new[new.democratclass==\"High\"]\ndemocratmedium=new[new.democratclass==\"Medium\"]\ndemocratlow=new[new.democratclass==\"Low\"]\ndemocratverylow=new[new.democratclass==\"Very Low\"]","f79f86f8":"vhvh=democratveryhigh[new.republicanclass==\"Very High\"]\nvhh=democratveryhigh[new.republicanclass==\"High\"]\nvhm=democratveryhigh[new.republicanclass==\"Medium\"]\nvhl=democratveryhigh[new.republicanclass==\"Low\"]\nvhvl=democratveryhigh[new.republicanclass==\"Very Low\"]\n\nhvh=democrathigh[new.republicanclass==\"Very High\"]\nhh=democrathigh[new.republicanclass==\"High\"]\nhm=democrathigh[new.republicanclass==\"Medium\"]\nhl=democrathigh[new.republicanclass==\"Low\"]\nhvl=democrathigh[new.republicanclass==\"Very Low\"]\n\nmvh=democratmedium[new.republicanclass==\"Very High\"]\nmh=democratmedium[new.republicanclass==\"High\"]\nmm=democratmedium[new.republicanclass==\"Medium\"]\nml=democratmedium[new.republicanclass==\"Low\"]\nmvl=democratmedium[new.republicanclass==\"Very Low\"]\n\nlvh=democratlow[new.republicanclass==\"Very High\"]\nlh=democratlow[new.republicanclass==\"High\"]\nlm=democratlow[new.republicanclass==\"Medium\"]\nll=democratlow[new.republicanclass==\"Low\"]\nlvl=democratlow[new.republicanclass==\"Very Low\"]\n\nvlvh=democratverylow[new.republicanclass==\"Very High\"]\nvlh=democratverylow[new.republicanclass==\"High\"]\nvlm=democratverylow[new.republicanclass==\"Medium\"]\nvll=democratverylow[new.republicanclass==\"Low\"]\nvlvl=democratverylow[new.republicanclass==\"Very Low\"]","e8e822e8":"trace5 = go.Scatter(y=vhvh.FrequencyDemocrat, x=vhvh.FrequencyRepublican,text=vhvh.Word,mode='markers+text')\ntrace4 = go.Scatter(y=vhh.FrequencyDemocrat, x=vhh.FrequencyRepublican,text=vhh.Word,mode='markers+text')\ntrace3 = go.Scatter(y=vhm.FrequencyDemocrat, x=vhm.FrequencyRepublican,text=vhm.Word,mode='markers+text')\ntrace2 = go.Scatter(y=vhl.FrequencyDemocrat, x=vhl.FrequencyRepublican,text=vhl.Word,mode='markers+text')\ntrace1 = go.Scatter(y=vhvl.FrequencyDemocrat, x=vhvl.FrequencyRepublican,text=vhvl.Word,mode='markers+text')\n\ntrace10 = go.Scatter(y=hvh.FrequencyDemocrat, x=hvh.FrequencyRepublican,text=hvh.Word,mode='markers+text')\ntrace9 = go.Scatter(y=hh.FrequencyDemocrat, x=hh.FrequencyRepublican,text=hh.Word,mode='markers+text')\ntrace8 = go.Scatter(y=hm.FrequencyDemocrat, x=hm.FrequencyRepublican,text=hm.Word,mode='markers+text')\ntrace7 = go.Scatter(y=hl.FrequencyDemocrat, x=hl.FrequencyRepublican,text=hl.Word,mode='markers+text')\ntrace6 = go.Scatter(y=hvl.FrequencyDemocrat, x=hvl.FrequencyRepublican,text=hvl.Word,mode='markers+text')\n\ntrace15 = go.Scatter(y=mvh.FrequencyDemocrat, x=mvh.FrequencyRepublican,text=mvh.Word,mode='markers+text')\ntrace14 = go.Scatter(y=mh.FrequencyDemocrat, x=mh.FrequencyRepublican,text=mh.Word,mode='markers+text')\ntrace13 = go.Scatter(y=mm.FrequencyDemocrat, x=mm.FrequencyRepublican,text=mm.Word,mode='markers+text')\ntrace12 = go.Scatter(y=ml.FrequencyDemocrat, x=ml.FrequencyRepublican,text=ml.Word,mode='markers+text')\ntrace11 = go.Scatter(y=mvl.FrequencyDemocrat, x=mvl.FrequencyRepublican,text=mvl.Word,mode='markers+text')\n\n\ntrace20 = go.Scatter(y=lvh.FrequencyDemocrat, x=lvh.FrequencyRepublican,text=lvh.Word,mode='markers+text')\ntrace19 = go.Scatter(y=lh.FrequencyDemocrat, x=lh.FrequencyRepublican,text=lh.Word,mode='markers+text')\ntrace18 = go.Scatter(y=lm.FrequencyDemocrat, x=lm.FrequencyRepublican,text=lm.Word,mode='markers+text')\ntrace17 = go.Scatter(y=ll.FrequencyDemocrat, x=ll.FrequencyRepublican,text=ll.Word,mode='markers+text')\ntrace16 = go.Scatter(y=lvl.FrequencyDemocrat, x=lvl.FrequencyRepublican,text=lvl.Word,mode='markers+text')\n\ntrace25 = go.Scatter(y=vlvh.FrequencyDemocrat, x=vlvh.FrequencyRepublican,text=vlvh.Word,mode='markers+text')\ntrace24 = go.Scatter(y=vlh.FrequencyDemocrat, x=vlh.FrequencyRepublican,text=vlh.Word,mode='markers+text')\ntrace23 = go.Scatter(y=vlm.FrequencyDemocrat, x=vlm.FrequencyRepublican,text=vlm.Word,mode='markers+text')\ntrace22 = go.Scatter(y=vll.FrequencyDemocrat, x=vll.FrequencyRepublican,text=vll.Word,mode='markers+text')\ntrace21 = go.Scatter(y=vlvl.FrequencyDemocrat, x=vlvl.FrequencyRepublican,text=vlvl.Word,mode='markers+text')\n\nfig = tools.make_subplots(rows=5, cols=5,shared_xaxes=True, shared_yaxes=True,print_grid=False)\n\nfig.append_trace(trace1, 1, 1)\nfig.append_trace(trace2, 1, 2)\nfig.append_trace(trace3, 1, 3)\nfig.append_trace(trace4, 1, 4)\nfig.append_trace(trace5, 1, 5)\nfig.append_trace(trace6, 2, 1)\nfig.append_trace(trace7, 2, 2)\nfig.append_trace(trace8, 2, 3)\nfig.append_trace(trace9, 2, 4)\nfig.append_trace(trace10, 2, 5)\nfig.append_trace(trace11, 3, 1)\nfig.append_trace(trace12, 3, 2)\nfig.append_trace(trace13, 3, 3)\nfig.append_trace(trace14, 3, 4)\nfig.append_trace(trace15, 3, 5)\nfig.append_trace(trace16, 4, 1)\nfig.append_trace(trace17, 4, 2)\nfig.append_trace(trace18, 4, 3)\nfig.append_trace(trace19, 4, 4)\nfig.append_trace(trace20, 4, 5)\nfig.append_trace(trace21, 5, 1)\nfig.append_trace(trace22, 5, 2)\nfig.append_trace(trace23, 5, 3)\nfig.append_trace(trace24, 5, 4)\nfig.append_trace(trace25, 5, 5)\n\n\nfig['layout']['xaxis5'].update(title='Very High')\nfig['layout']['xaxis4'].update(title='High')\nfig['layout']['xaxis3'].update(title='Medium')\nfig['layout']['xaxis2'].update(title='Low')\nfig['layout']['xaxis1'].update(title='Very Low')\n\nfig['layout']['yaxis1'].update(title='Very High')\nfig['layout']['yaxis2'].update(title='High')\nfig['layout']['yaxis3'].update(title='Medium')\nfig['layout']['yaxis4'].update(title='Low')\nfig['layout']['yaxis5'].update(title='Very Low')\n\n\n\nfig['layout'].update(height=1500, width=1500, title= \"Words in Democrat and Republican Tweets\",showlegend=False, titlefont=dict(size=30),\n                    annotations=[dict(showarrow=False,text=\"Republican Tweets\",x=0.5,y=-0.06,xref=\"paper\",yref=\"paper\",\n                                      font=dict(size=30)),dict(showarrow=False, text='Democrat Tweets',\n                                                               x=-0.06,y=0.5,xref=\"paper\",yref=\"paper\",textangle=270,\n                                                               font=dict(size=30))],\n                    plot_bgcolor=\"snow\" ,paper_bgcolor='rgb(243, 243, 243)')\n\niplot(fig)","1d9ba93f":"from nltk.text import Text  \ndemocrat_tweet=Text(democrat_tweets)\nrepublican_tweet=Text(republican_tweets)","e406f9a2":"plt.subplots(figsize=(10,5))\ndemocrat_tweet.dispersion_plot([\"vote\",\"democracy\",\"freedom\",\"america\",\"american\",\"tax\",\"trump\",\"clinton\"])","cbde9d4f":"plt.subplots(figsize=(10,5))\nrepublican_tweet.dispersion_plot([\"vote\",\"democracy\",\"freedom\",\"america\",\"american\",\"tax\",\"trump\",\"clinton\"])","d8443b6a":"from textblob import TextBlob\ndemocratblob=TextBlob(str(democrat_tweets))\nrepublicanblob=TextBlob(str(republican_tweets))","c962fa90":"democratblob.sentiment","e65cf0f8":"republicanblob.sentiment","23765e35":"The first 10 entries of our dataset are shown in the table.","1578d6dc":"<a id=\"4\"><\/a> <br>\n## 4- Sentiment Analysis","8c45e1ef":"Before starting the analysis, we should remove like @, rt, html, # etc. objects. ","08f48a9c":"In order to better analyze, I merge the two lists and the word frequencies used in the dataframe.","751f30ae":"I also categorized the word frequencies into 5 groups. \n\n- if a word is used less than 50, it is in the **very low** group.\n\n- If it's used between 50 and 150 times, it is in the **low ** group. \n\n- If it's used between 150 and 500 times, it is in the **medium ** group. \n\n- If it's used between 500 and 1500 times, it is in the **high** group. \n\n- If usage of a word is greater than 1500, it is in the **very high ** group.\n\nAlso I added these new lists to new dataframe. \n","efd8fa56":"In this matrix, \n\nx axis shows word usage frequency of Republican tweets and y axis Democrats.\n\nFor example, the word **\"taxreform\"** is used by Republican 966 times (its in the high category) ( and I think it's a hashtag) However, Democrats used that word only 12 times. \n\nThe other example is **\"gun\"** word. Its used 876 times in Democrat tweets and 117 times in Republican tweets. \n\nAlso there is no words, when Republicans used very highly and Democrats used at the medium, low or very low level. The same as for Democrats.\n\n**\"today\"**, **\"american\"**, **\"great,** **\"house\"**, **\"year\"**, **\"family\"**, **\"day\"** and **\"thank\"** words are used very highly both democrats and republicans. \n\nThese categories are the categories I created. Different classifications can also be made. Usage intervals can be changed.\n","e1ea8882":"<a id=\"1\"><\/a> <br>\n## 1- DATA CLEANING","b94f0eb1":"Now our lists are as follows","5d3c61c3":"**Republican Tweets Plot**","9d55af82":"I have selected some words in the data set and I looked at the usage distribution for both parties. \n\nThese words are **\"vote\"**, **\"democracy\"**, **\"freedom\"**, **\"america\"**, **\"american\"**, **\"tax\"**, **\"trump\"** and **\"clinton\"**. \n\nAlso, the other words can be chosen. ","b4929951":"#### Thank you for reading. Waiting for your comments :)","681fc373":"\nThe **polarity** score is a float within the range [-1.0, 1.0]. And it represents emotions expressed in a sentence. \n1 means positive statement and -1 means a negative statement.\n\nThe **subjectivity ** is a float within the range [0.0, 1.0] where 0.0 is very objective and 1.0 is very subjective.  And it refers to personal opinion, emotion or judgment. ","2299bd22":"For example, the word **\"today\"** (3850 times) is used most in the tweets sent by democrat people. Secondly **\"trump\"**(2502) and thirdly **\"american\"**. ","57149df7":"If we look at the tweets of people who have a republican opinion, the word **\"today\"** (4883 times) is in the first place again. **\"tax\"** is in the second place and **\"great\"** in the third place.","1ff6b6e2":"## **REPUBLICAN AND DEMOCRAT TWEET ANALYSIS**","aaffb66b":"### Republican Party \n\nThe Republican Party, also referred to as the GOP (Grand Old Party), is one of the two major political parties in the United States; the other is its historic rival, the Democratic Party.\n\nThe GOP was founded in 1854 by opponents of the Kansas\u2013Nebraska Act, which allowed for the potential expansion of slavery into certain U.S. territories. The party supported classical liberalism, opposed the expansion of slavery, and supported economic reform. Abraham Lincoln was the first Republican president. Under the leadership of Lincoln and a Republican Congress, slavery was banned in the United States in 1865. (for more information: https:\/\/en.wikipedia.org\/wiki\/Republican_Party_(United_States) )\n\n![](https:\/\/www.newsmax.com\/CMSPages\/GetFile.aspx?guid=bef7fbf9-29c1-4554-bff6-889c831c3f69&SiteName=Newsmax&maxsidesize=600)","8c6b2d96":"**Democrat Tweets Plot**","7f8e3dae":"In the following graphs the 30 most used words were shown according to political opinion.","cfab9b94":"### Democratic Party\n\nThe Democratic Party is one of the two major contemporary political parties in the United States, along with its rival, the Republican Party. Tracing its heritage back to Thomas Jefferson and James Madison's Democratic-Republican Party, the modern-day Democratic Party was founded around 1828 by supporters of Andrew Jackson, making it the world's oldest active political party.\n\nIn its early years, the Party supported individual rights and state sovereignty and opposed banks and the abolition of slavery. Since Franklin D. Roosevelt and his New Deal coalition in the 1930s, the Democratic Party has promoted a social liberal platform, Well into the 20th century, the party had conservative pro-business and Southern conservative-populist anti-business wings; following the New Deal, however, the conservative wing of the party withered outside the South. (for more information: https:\/\/en.wikipedia.org\/wiki\/Democratic_Party_(United_States))\n\n![](https:\/\/www.globalresearch.ca\/wp-content\/uploads\/2017\/07\/Democratic_Party.jpg)","c6340c63":"However I would like to review these tweets word by word. So I split sentences into words and remove unnecessary punctuation characters.","57254540":"Using TextBlob, you can see polarity and subjectivity scores both parties. ","6b9028b5":"<a id=\"3\"><\/a> <br>\n## 3- Dispersion Plots","79155946":"I created these categories to create a matrix.","1c9c66d6":"There are 443138 words in democrat tweets and 457293 words in republican tweets.","b01b830b":"And the first tweet is as follows.","2676da1e":"<a id=\"2\"><\/a> <br>\n## 2- Frequency of Usage of Words by Parties","aa534f5b":"Now lets check length of two list.","4b9bfbca":"In this kernel, I examined the tweets of people with democratic and republican political opinion.\n\n### CONTENTS:\n\n1- [Data Cleaning](#1)\n\n2- [Frequency of Usage of Words by Parties](#2)\n\n3- [Dispersion Plots](#3)\n\n4- [Sentiment Analysis](#4)"}}